function aN(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const sN=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}};sN();var zo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function lN(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var m={exports:{}},rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag=Symbol.for("react.element"),uN=Symbol.for("react.portal"),cN=Symbol.for("react.fragment"),hN=Symbol.for("react.strict_mode"),dN=Symbol.for("react.profiler"),pN=Symbol.for("react.provider"),fN=Symbol.for("react.context"),mN=Symbol.for("react.forward_ref"),gN=Symbol.for("react.suspense"),yN=Symbol.for("react.memo"),vN=Symbol.for("react.lazy"),bA=Symbol.iterator;function _N(e){return e===null||typeof e!="object"?null:(e=bA&&e[bA]||e["@@iterator"],typeof e=="function"?e:null)}var GD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qD=Object.assign,ZD={};function Ip(e,t,n){this.props=e,this.context=t,this.refs=ZD,this.updater=n||GD}Ip.prototype.isReactComponent={};Ip.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ip.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function XD(){}XD.prototype=Ip.prototype;function TC(e,t,n){this.props=e,this.context=t,this.refs=ZD,this.updater=n||GD}var AC=TC.prototype=new XD;AC.constructor=TC;qD(AC,Ip.prototype);AC.isPureReactComponent=!0;var wA=Array.isArray,KD=Object.prototype.hasOwnProperty,MC={current:null},YD={key:!0,ref:!0,__self:!0,__source:!0};function JD(e,t,n){var r,a={},c=null,d=null;if(t!=null)for(r in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(c=""+t.key),t)KD.call(t,r)&&!YD.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var v=Array(o),C=0;C<o;C++)v[C]=arguments[C+2];a.children=v}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Ag,type:e,key:c,ref:d,props:a,_owner:MC.current}}function xN(e,t){return{$$typeof:Ag,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function IC(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ag}function bN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var EA=/\/+/g;function yb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bN(""+e.key):t.toString(36)}function s_(e,t,n,r,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Ag:case uN:d=!0}}if(d)return d=e,a=a(d),e=r===""?"."+yb(d,0):r,wA(a)?(n="",e!=null&&(n=e.replace(EA,"$&/")+"/"),s_(a,t,n,"",function(C){return C})):a!=null&&(IC(a)&&(a=xN(a,n+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(EA,"$&/")+"/")+e)),t.push(a)),1;if(d=0,r=r===""?".":r+":",wA(e))for(var o=0;o<e.length;o++){c=e[o];var v=r+yb(c,o);d+=s_(c,t,n,v,a)}else if(v=_N(e),typeof v=="function")for(e=v.call(e),o=0;!(c=e.next()).done;)c=c.value,v=r+yb(c,o++),d+=s_(c,t,n,v,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Rv(e,t,n){if(e==null)return e;var r=[],a=0;return s_(e,r,"","",function(c){return t.call(n,c,a++)}),r}function wN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xo={current:null},l_={transition:null},EN={ReactCurrentDispatcher:Xo,ReactCurrentBatchConfig:l_,ReactCurrentOwner:MC};rr.Children={map:Rv,forEach:function(e,t,n){Rv(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rv(e,function(){t++}),t},toArray:function(e){return Rv(e,function(t){return t})||[]},only:function(e){if(!IC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rr.Component=Ip;rr.Fragment=cN;rr.Profiler=dN;rr.PureComponent=TC;rr.StrictMode=hN;rr.Suspense=gN;rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EN;rr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=qD({},e.props),a=e.key,c=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,d=MC.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(v in t)KD.call(t,v)&&!YD.hasOwnProperty(v)&&(r[v]=t[v]===void 0&&o!==void 0?o[v]:t[v])}var v=arguments.length-2;if(v===1)r.children=n;else if(1<v){o=Array(v);for(var C=0;C<v;C++)o[C]=arguments[C+2];r.children=o}return{$$typeof:Ag,type:e.type,key:a,ref:c,props:r,_owner:d}};rr.createContext=function(e){return e={$$typeof:fN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pN,_context:e},e.Consumer=e};rr.createElement=JD;rr.createFactory=function(e){var t=JD.bind(null,e);return t.type=e,t};rr.createRef=function(){return{current:null}};rr.forwardRef=function(e){return{$$typeof:mN,render:e}};rr.isValidElement=IC;rr.lazy=function(e){return{$$typeof:vN,_payload:{_status:-1,_result:e},_init:wN}};rr.memo=function(e,t){return{$$typeof:yN,type:e,compare:t===void 0?null:t}};rr.startTransition=function(e){var t=l_.transition;l_.transition={};try{e()}finally{l_.transition=t}};rr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};rr.useCallback=function(e,t){return Xo.current.useCallback(e,t)};rr.useContext=function(e){return Xo.current.useContext(e)};rr.useDebugValue=function(){};rr.useDeferredValue=function(e){return Xo.current.useDeferredValue(e)};rr.useEffect=function(e,t){return Xo.current.useEffect(e,t)};rr.useId=function(){return Xo.current.useId()};rr.useImperativeHandle=function(e,t,n){return Xo.current.useImperativeHandle(e,t,n)};rr.useInsertionEffect=function(e,t){return Xo.current.useInsertionEffect(e,t)};rr.useLayoutEffect=function(e,t){return Xo.current.useLayoutEffect(e,t)};rr.useMemo=function(e,t){return Xo.current.useMemo(e,t)};rr.useReducer=function(e,t,n){return Xo.current.useReducer(e,t,n)};rr.useRef=function(e){return Xo.current.useRef(e)};rr.useState=function(e){return Xo.current.useState(e)};rr.useSyncExternalStore=function(e,t,n){return Xo.current.useSyncExternalStore(e,t,n)};rr.useTransition=function(){return Xo.current.useTransition()};rr.version="18.2.0";m.exports=rr;var nt=m.exports,CA=aN({__proto__:null,default:nt},[m.exports]),Pu={exports:{}},Ta={},QD={exports:{}},eR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(We,Et){var ct=We.length;We.push(Et);e:for(;0<ct;){var xe=ct-1>>>1,Ee=We[xe];if(0<a(Ee,Et))We[xe]=Et,We[ct]=Ee,ct=xe;else break e}}function n(We){return We.length===0?null:We[0]}function r(We){if(We.length===0)return null;var Et=We[0],ct=We.pop();if(ct!==Et){We[0]=ct;e:for(var xe=0,Ee=We.length,xn=Ee>>>1;xe<xn;){var Qt=2*(xe+1)-1,yn=We[Qt],on=Qt+1,Sn=We[on];if(0>a(yn,ct))on<Ee&&0>a(Sn,yn)?(We[xe]=Sn,We[on]=ct,xe=on):(We[xe]=yn,We[Qt]=ct,xe=Qt);else if(on<Ee&&0>a(Sn,ct))We[xe]=Sn,We[on]=ct,xe=on;else break e}}return Et}function a(We,Et){var ct=We.sortIndex-Et.sortIndex;return ct!==0?ct:We.id-Et.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,o=d.now();e.unstable_now=function(){return d.now()-o}}var v=[],C=[],I=1,D=null,F=3,U=!1,j=!1,T=!1,H=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(We){for(var Et=n(C);Et!==null;){if(Et.callback===null)r(C);else if(Et.startTime<=We)r(C),Et.sortIndex=Et.expirationTime,t(v,Et);else break;Et=n(C)}}function B(We){if(T=!1,z(We),!j)if(n(v)!==null)j=!0,Ie(k);else{var Et=n(C);Et!==null&&xt(B,Et.startTime-We)}}function k(We,Et){j=!1,T&&(T=!1,N(J),J=-1),U=!0;var ct=F;try{for(z(Et),D=n(v);D!==null&&(!(D.expirationTime>Et)||We&&!se());){var xe=D.callback;if(typeof xe=="function"){D.callback=null,F=D.priorityLevel;var Ee=xe(D.expirationTime<=Et);Et=e.unstable_now(),typeof Ee=="function"?D.callback=Ee:D===n(v)&&r(v),z(Et)}else r(v);D=n(v)}if(D!==null)var xn=!0;else{var Qt=n(C);Qt!==null&&xt(B,Qt.startTime-Et),xn=!1}return xn}finally{D=null,F=ct,U=!1}}var w=!1,R=null,J=-1,ie=5,ue=-1;function se(){return!(e.unstable_now()-ue<ie)}function _e(){if(R!==null){var We=e.unstable_now();ue=We;var Et=!0;try{Et=R(!0,We)}finally{Et?Ue():(w=!1,R=null)}}else w=!1}var Ue;if(typeof q=="function")Ue=function(){q(_e)};else if(typeof MessageChannel!="undefined"){var je=new MessageChannel,Ne=je.port2;je.port1.onmessage=_e,Ue=function(){Ne.postMessage(null)}}else Ue=function(){H(_e,0)};function Ie(We){R=We,w||(w=!0,Ue())}function xt(We,Et){J=H(function(){We(e.unstable_now())},Et)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(We){We.callback=null},e.unstable_continueExecution=function(){j||U||(j=!0,Ie(k))},e.unstable_forceFrameRate=function(We){0>We||125<We?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<We?Math.floor(1e3/We):5},e.unstable_getCurrentPriorityLevel=function(){return F},e.unstable_getFirstCallbackNode=function(){return n(v)},e.unstable_next=function(We){switch(F){case 1:case 2:case 3:var Et=3;break;default:Et=F}var ct=F;F=Et;try{return We()}finally{F=ct}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(We,Et){switch(We){case 1:case 2:case 3:case 4:case 5:break;default:We=3}var ct=F;F=We;try{return Et()}finally{F=ct}},e.unstable_scheduleCallback=function(We,Et,ct){var xe=e.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?xe+ct:xe):ct=xe,We){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ct+Ee,We={id:I++,callback:Et,priorityLevel:We,startTime:ct,expirationTime:Ee,sortIndex:-1},ct>xe?(We.sortIndex=ct,t(C,We),n(v)===null&&We===n(C)&&(T?(N(J),J=-1):T=!0,xt(B,ct-xe))):(We.sortIndex=Ee,t(v,We),j||U||(j=!0,Ie(k))),We},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(We){var Et=F;return function(){var ct=F;F=Et;try{return We.apply(this,arguments)}finally{F=ct}}}})(eR);QD.exports=eR;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tR=m.exports,ka=QD.exports;function Ht(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nR=new Set,eg={};function wh(e,t){vp(e,t),vp(e+"Capture",t)}function vp(e,t){for(eg[e]=t,e=0;e<t.length;e++)nR.add(t[e])}var Ml=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Uw=Object.prototype.hasOwnProperty,CN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,SA={},kA={};function SN(e){return Uw.call(kA,e)?!0:Uw.call(SA,e)?!1:CN.test(e)?kA[e]=!0:(SA[e]=!0,!1)}function kN(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TN(e,t,n,r){if(t===null||typeof t=="undefined"||kN(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ko(e,t,n,r,a,c,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=d}var xo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xo[e]=new Ko(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xo[t]=new Ko(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xo[e]=new Ko(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xo[e]=new Ko(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xo[e]=new Ko(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xo[e]=new Ko(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xo[e]=new Ko(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xo[e]=new Ko(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xo[e]=new Ko(e,5,!1,e.toLowerCase(),null,!1,!1)});var PC=/[\-:]([a-z])/g;function DC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(PC,DC);xo[t]=new Ko(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(PC,DC);xo[t]=new Ko(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(PC,DC);xo[t]=new Ko(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xo[e]=new Ko(e,1,!1,e.toLowerCase(),null,!1,!1)});xo.xlinkHref=new Ko("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xo[e]=new Ko(e,1,!1,e.toLowerCase(),null,!0,!0)});function RC(e,t,n,r){var a=xo.hasOwnProperty(t)?xo[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TN(t,n,a,r)&&(n=null),r||a===null?SN(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ol=tR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lv=Symbol.for("react.element"),Ud=Symbol.for("react.portal"),jd=Symbol.for("react.fragment"),LC=Symbol.for("react.strict_mode"),jw=Symbol.for("react.profiler"),rR=Symbol.for("react.provider"),iR=Symbol.for("react.context"),OC=Symbol.for("react.forward_ref"),Vw=Symbol.for("react.suspense"),$w=Symbol.for("react.suspense_list"),zC=Symbol.for("react.memo"),Eu=Symbol.for("react.lazy"),oR=Symbol.for("react.offscreen"),TA=Symbol.iterator;function hm(e){return e===null||typeof e!="object"?null:(e=TA&&e[TA]||e["@@iterator"],typeof e=="function"?e:null)}var mi=Object.assign,vb;function Mm(e){if(vb===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vb=t&&t[1]||""}return`
`+vb+e}var _b=!1;function xb(e,t){if(!e||_b)return"";_b=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(C){var r=C}Reflect.construct(e,[],t)}else{try{t.call()}catch(C){r=C}e.call(t.prototype)}else{try{throw Error()}catch(C){r=C}e()}}catch(C){if(C&&r&&typeof C.stack=="string"){for(var a=C.stack.split(`
`),c=r.stack.split(`
`),d=a.length-1,o=c.length-1;1<=d&&0<=o&&a[d]!==c[o];)o--;for(;1<=d&&0<=o;d--,o--)if(a[d]!==c[o]){if(d!==1||o!==1)do if(d--,o--,0>o||a[d]!==c[o]){var v=`
`+a[d].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=d&&0<=o);break}}}finally{_b=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Mm(e):""}function AN(e){switch(e.tag){case 5:return Mm(e.type);case 16:return Mm("Lazy");case 13:return Mm("Suspense");case 19:return Mm("SuspenseList");case 0:case 2:case 15:return e=xb(e.type,!1),e;case 11:return e=xb(e.type.render,!1),e;case 1:return e=xb(e.type,!0),e;default:return""}}function Hw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jd:return"Fragment";case Ud:return"Portal";case jw:return"Profiler";case LC:return"StrictMode";case Vw:return"Suspense";case $w:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case iR:return(e.displayName||"Context")+".Consumer";case rR:return(e._context.displayName||"Context")+".Provider";case OC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zC:return t=e.displayName||null,t!==null?t:Hw(e.type)||"Memo";case Eu:t=e._payload,e=e._init;try{return Hw(e(t))}catch{}}return null}function MN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hw(t);case 8:return t===LC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ju(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function aR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function IN(e){var t=aR(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){r=""+d,c.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ov(e){e._valueTracker||(e._valueTracker=IN(e))}function sR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=aR(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function R_(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ww(e,t){var n=t.checked;return mi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function AA(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ju(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lR(e,t){t=t.checked,t!=null&&RC(e,"checked",t,!1)}function Gw(e,t){lR(e,t);var n=ju(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qw(e,t.type,n):t.hasOwnProperty("defaultValue")&&qw(e,t.type,ju(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function MA(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function qw(e,t,n){(t!=="number"||R_(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Im=Array.isArray;function ip(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ju(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Zw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ht(91));return mi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function IA(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ht(92));if(Im(n)){if(1<n.length)throw Error(Ht(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ju(n)}}function uR(e,t){var n=ju(t.value),r=ju(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function PA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zv,hR=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zv=zv||document.createElement("div"),zv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Lm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PN=["Webkit","ms","Moz","O"];Object.keys(Lm).forEach(function(e){PN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lm[t]=Lm[e]})});function dR(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Lm.hasOwnProperty(e)&&Lm[e]?(""+t).trim():t+"px"}function pR(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=dR(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var DN=mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kw(e,t){if(t){if(DN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ht(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ht(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ht(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ht(62))}}function Yw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jw=null;function BC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qw=null,op=null,ap=null;function DA(e){if(e=Pg(e)){if(typeof Qw!="function")throw Error(Ht(280));var t=e.stateNode;t&&(t=Ox(t),Qw(e.stateNode,e.type,t))}}function fR(e){op?ap?ap.push(e):ap=[e]:op=e}function mR(){if(op){var e=op,t=ap;if(ap=op=null,DA(e),t)for(e=0;e<t.length;e++)DA(t[e])}}function gR(e,t){return e(t)}function yR(){}var bb=!1;function vR(e,t,n){if(bb)return e(t,n);bb=!0;try{return gR(e,t,n)}finally{bb=!1,(op!==null||ap!==null)&&(yR(),mR())}}function ng(e,t){var n=e.stateNode;if(n===null)return null;var r=Ox(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ht(231,t,typeof n));return n}var eE=!1;if(Ml)try{var dm={};Object.defineProperty(dm,"passive",{get:function(){eE=!0}}),window.addEventListener("test",dm,dm),window.removeEventListener("test",dm,dm)}catch{eE=!1}function RN(e,t,n,r,a,c,d,o,v){var C=Array.prototype.slice.call(arguments,3);try{t.apply(n,C)}catch(I){this.onError(I)}}var Om=!1,L_=null,O_=!1,tE=null,LN={onError:function(e){Om=!0,L_=e}};function ON(e,t,n,r,a,c,d,o,v){Om=!1,L_=null,RN.apply(LN,arguments)}function zN(e,t,n,r,a,c,d,o,v){if(ON.apply(this,arguments),Om){if(Om){var C=L_;Om=!1,L_=null}else throw Error(Ht(198));O_||(O_=!0,tE=C)}}function Eh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _R(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function RA(e){if(Eh(e)!==e)throw Error(Ht(188))}function BN(e){var t=e.alternate;if(!t){if(t=Eh(e),t===null)throw Error(Ht(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return RA(a),e;if(c===r)return RA(a),t;c=c.sibling}throw Error(Ht(188))}if(n.return!==r.return)n=a,r=c;else{for(var d=!1,o=a.child;o;){if(o===n){d=!0,n=a,r=c;break}if(o===r){d=!0,r=a,n=c;break}o=o.sibling}if(!d){for(o=c.child;o;){if(o===n){d=!0,n=c,r=a;break}if(o===r){d=!0,r=c,n=a;break}o=o.sibling}if(!d)throw Error(Ht(189))}}if(n.alternate!==r)throw Error(Ht(190))}if(n.tag!==3)throw Error(Ht(188));return n.stateNode.current===n?e:t}function xR(e){return e=BN(e),e!==null?bR(e):null}function bR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=bR(e);if(t!==null)return t;e=e.sibling}return null}var wR=ka.unstable_scheduleCallback,LA=ka.unstable_cancelCallback,FN=ka.unstable_shouldYield,NN=ka.unstable_requestPaint,Pi=ka.unstable_now,UN=ka.unstable_getCurrentPriorityLevel,FC=ka.unstable_ImmediatePriority,ER=ka.unstable_UserBlockingPriority,z_=ka.unstable_NormalPriority,jN=ka.unstable_LowPriority,CR=ka.unstable_IdlePriority,Px=null,Ks=null;function VN(e){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(Px,e,void 0,(e.current.flags&128)===128)}catch{}}var _s=Math.clz32?Math.clz32:WN,$N=Math.log,HN=Math.LN2;function WN(e){return e>>>=0,e===0?32:31-($N(e)/HN|0)|0}var Bv=64,Fv=4194304;function Pm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function B_(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,c=e.pingedLanes,d=n&268435455;if(d!==0){var o=d&~a;o!==0?r=Pm(o):(c&=d,c!==0&&(r=Pm(c)))}else d=n&~a,d!==0?r=Pm(d):c!==0&&(r=Pm(c));if(r===0)return 0;if(t!==0&&t!==r&&(t&a)===0&&(a=r&-r,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_s(t),a=1<<n,r|=e[n],t&=~a;return r}function GN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-_s(c),o=1<<d,v=a[d];v===-1?((o&n)===0||(o&r)!==0)&&(a[d]=GN(o,t)):v<=t&&(e.expiredLanes|=o),c&=~o}}function nE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function SR(){var e=Bv;return Bv<<=1,(Bv&4194240)===0&&(Bv=64),e}function wb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Mg(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_s(t),e[t]=n}function ZN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-_s(n),c=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~c}}function NC(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_s(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Fr=0;function kR(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var TR,UC,AR,MR,IR,rE=!1,Nv=[],Du=null,Ru=null,Lu=null,rg=new Map,ig=new Map,Su=[],XN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OA(e,t){switch(e){case"focusin":case"focusout":Du=null;break;case"dragenter":case"dragleave":Ru=null;break;case"mouseover":case"mouseout":Lu=null;break;case"pointerover":case"pointerout":rg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ig.delete(t.pointerId)}}function pm(e,t,n,r,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:c,targetContainers:[a]},t!==null&&(t=Pg(t),t!==null&&UC(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function KN(e,t,n,r,a){switch(t){case"focusin":return Du=pm(Du,e,t,n,r,a),!0;case"dragenter":return Ru=pm(Ru,e,t,n,r,a),!0;case"mouseover":return Lu=pm(Lu,e,t,n,r,a),!0;case"pointerover":var c=a.pointerId;return rg.set(c,pm(rg.get(c)||null,e,t,n,r,a)),!0;case"gotpointercapture":return c=a.pointerId,ig.set(c,pm(ig.get(c)||null,e,t,n,r,a)),!0}return!1}function PR(e){var t=th(e.target);if(t!==null){var n=Eh(t);if(n!==null){if(t=n.tag,t===13){if(t=_R(n),t!==null){e.blockedOn=t,IR(e.priority,function(){AR(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function u_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=iE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Jw=r,n.target.dispatchEvent(r),Jw=null}else return t=Pg(n),t!==null&&UC(t),e.blockedOn=n,!1;t.shift()}return!0}function zA(e,t,n){u_(e)&&n.delete(t)}function YN(){rE=!1,Du!==null&&u_(Du)&&(Du=null),Ru!==null&&u_(Ru)&&(Ru=null),Lu!==null&&u_(Lu)&&(Lu=null),rg.forEach(zA),ig.forEach(zA)}function fm(e,t){e.blockedOn===t&&(e.blockedOn=null,rE||(rE=!0,ka.unstable_scheduleCallback(ka.unstable_NormalPriority,YN)))}function og(e){function t(a){return fm(a,e)}if(0<Nv.length){fm(Nv[0],e);for(var n=1;n<Nv.length;n++){var r=Nv[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Du!==null&&fm(Du,e),Ru!==null&&fm(Ru,e),Lu!==null&&fm(Lu,e),rg.forEach(t),ig.forEach(t),n=0;n<Su.length;n++)r=Su[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Su.length&&(n=Su[0],n.blockedOn===null);)PR(n),n.blockedOn===null&&Su.shift()}var sp=Ol.ReactCurrentBatchConfig,F_=!0;function JN(e,t,n,r){var a=Fr,c=sp.transition;sp.transition=null;try{Fr=1,jC(e,t,n,r)}finally{Fr=a,sp.transition=c}}function QN(e,t,n,r){var a=Fr,c=sp.transition;sp.transition=null;try{Fr=4,jC(e,t,n,r)}finally{Fr=a,sp.transition=c}}function jC(e,t,n,r){if(F_){var a=iE(e,t,n,r);if(a===null)Db(e,t,r,N_,n),OA(e,r);else if(KN(a,e,t,n,r))r.stopPropagation();else if(OA(e,r),t&4&&-1<XN.indexOf(e)){for(;a!==null;){var c=Pg(a);if(c!==null&&TR(c),c=iE(e,t,n,r),c===null&&Db(e,t,r,N_,n),c===a)break;a=c}a!==null&&r.stopPropagation()}else Db(e,t,r,null,n)}}var N_=null;function iE(e,t,n,r){if(N_=null,e=BC(r),e=th(e),e!==null)if(t=Eh(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_R(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return N_=e,null}function DR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UN()){case FC:return 1;case ER:return 4;case z_:case jN:return 16;case CR:return 536870912;default:return 16}default:return 16}}var Tu=null,VC=null,c_=null;function RR(){if(c_)return c_;var e,t=VC,n=t.length,r,a="value"in Tu?Tu.value:Tu.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===a[c-r];r++);return c_=a.slice(e,1<r?1-r:void 0)}function h_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Uv(){return!0}function BA(){return!1}function Aa(e){function t(n,r,a,c,d){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(c):c[o]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Uv:BA,this.isPropagationStopped=BA,this}return mi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uv)},persist:function(){},isPersistent:Uv}),t}var Pp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$C=Aa(Pp),Ig=mi({},Pp,{view:0,detail:0}),e6=Aa(Ig),Eb,Cb,mm,Dx=mi({},Ig,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:HC,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mm&&(mm&&e.type==="mousemove"?(Eb=e.screenX-mm.screenX,Cb=e.screenY-mm.screenY):Cb=Eb=0,mm=e),Eb)},movementY:function(e){return"movementY"in e?e.movementY:Cb}}),FA=Aa(Dx),t6=mi({},Dx,{dataTransfer:0}),n6=Aa(t6),r6=mi({},Ig,{relatedTarget:0}),Sb=Aa(r6),i6=mi({},Pp,{animationName:0,elapsedTime:0,pseudoElement:0}),o6=Aa(i6),a6=mi({},Pp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),s6=Aa(a6),l6=mi({},Pp,{data:0}),NA=Aa(l6),u6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=h6[e])?!!t[e]:!1}function HC(){return d6}var p6=mi({},Ig,{key:function(e){if(e.key){var t=u6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=h_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?c6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:HC,charCode:function(e){return e.type==="keypress"?h_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?h_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),f6=Aa(p6),m6=mi({},Dx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UA=Aa(m6),g6=mi({},Ig,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:HC}),y6=Aa(g6),v6=mi({},Pp,{propertyName:0,elapsedTime:0,pseudoElement:0}),_6=Aa(v6),x6=mi({},Dx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),b6=Aa(x6),w6=[9,13,27,32],WC=Ml&&"CompositionEvent"in window,zm=null;Ml&&"documentMode"in document&&(zm=document.documentMode);var E6=Ml&&"TextEvent"in window&&!zm,LR=Ml&&(!WC||zm&&8<zm&&11>=zm),jA=String.fromCharCode(32),VA=!1;function OR(e,t){switch(e){case"keyup":return w6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vd=!1;function C6(e,t){switch(e){case"compositionend":return zR(t);case"keypress":return t.which!==32?null:(VA=!0,jA);case"textInput":return e=t.data,e===jA&&VA?null:e;default:return null}}function S6(e,t){if(Vd)return e==="compositionend"||!WC&&OR(e,t)?(e=RR(),c_=VC=Tu=null,Vd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LR&&t.locale!=="ko"?null:t.data;default:return null}}var k6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $A(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!k6[e.type]:t==="textarea"}function BR(e,t,n,r){fR(r),t=U_(t,"onChange"),0<t.length&&(n=new $C("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bm=null,ag=null;function T6(e){ZR(e,0)}function Rx(e){var t=Wd(e);if(sR(t))return e}function A6(e,t){if(e==="change")return t}var FR=!1;if(Ml){var kb;if(Ml){var Tb="oninput"in document;if(!Tb){var HA=document.createElement("div");HA.setAttribute("oninput","return;"),Tb=typeof HA.oninput=="function"}kb=Tb}else kb=!1;FR=kb&&(!document.documentMode||9<document.documentMode)}function WA(){Bm&&(Bm.detachEvent("onpropertychange",NR),ag=Bm=null)}function NR(e){if(e.propertyName==="value"&&Rx(ag)){var t=[];BR(t,ag,e,BC(e)),vR(T6,t)}}function M6(e,t,n){e==="focusin"?(WA(),Bm=t,ag=n,Bm.attachEvent("onpropertychange",NR)):e==="focusout"&&WA()}function I6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rx(ag)}function P6(e,t){if(e==="click")return Rx(t)}function D6(e,t){if(e==="input"||e==="change")return Rx(t)}function R6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Es=typeof Object.is=="function"?Object.is:R6;function sg(e,t){if(Es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Uw.call(t,a)||!Es(e[a],t[a]))return!1}return!0}function GA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qA(e,t){var n=GA(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=GA(n)}}function UR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jR(){for(var e=window,t=R_();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=R_(e.document)}return t}function GC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function L6(e){var t=jR(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&UR(n.ownerDocument.documentElement,n)){if(r!==null&&GC(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(r.start,a);r=r.end===void 0?c:Math.min(r.end,a),!e.extend&&c>r&&(a=r,r=c,c=a),a=qA(n,c);var d=qA(n,r);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>r?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var O6=Ml&&"documentMode"in document&&11>=document.documentMode,$d=null,oE=null,Fm=null,aE=!1;function ZA(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;aE||$d==null||$d!==R_(r)||(r=$d,"selectionStart"in r&&GC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fm&&sg(Fm,r)||(Fm=r,r=U_(oE,"onSelect"),0<r.length&&(t=new $C("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$d)))}function jv(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hd={animationend:jv("Animation","AnimationEnd"),animationiteration:jv("Animation","AnimationIteration"),animationstart:jv("Animation","AnimationStart"),transitionend:jv("Transition","TransitionEnd")},Ab={},VR={};Ml&&(VR=document.createElement("div").style,"AnimationEvent"in window||(delete Hd.animationend.animation,delete Hd.animationiteration.animation,delete Hd.animationstart.animation),"TransitionEvent"in window||delete Hd.transitionend.transition);function Lx(e){if(Ab[e])return Ab[e];if(!Hd[e])return e;var t=Hd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in VR)return Ab[e]=t[n];return e}var $R=Lx("animationend"),HR=Lx("animationiteration"),WR=Lx("animationstart"),GR=Lx("transitionend"),qR=new Map,XA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qu(e,t){qR.set(e,t),wh(t,[e])}for(var Mb=0;Mb<XA.length;Mb++){var Ib=XA[Mb],z6=Ib.toLowerCase(),B6=Ib[0].toUpperCase()+Ib.slice(1);qu(z6,"on"+B6)}qu($R,"onAnimationEnd");qu(HR,"onAnimationIteration");qu(WR,"onAnimationStart");qu("dblclick","onDoubleClick");qu("focusin","onFocus");qu("focusout","onBlur");qu(GR,"onTransitionEnd");vp("onMouseEnter",["mouseout","mouseover"]);vp("onMouseLeave",["mouseout","mouseover"]);vp("onPointerEnter",["pointerout","pointerover"]);vp("onPointerLeave",["pointerout","pointerover"]);wh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wh("onBeforeInput",["compositionend","keypress","textInput","paste"]);wh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dm));function KA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zN(r,t,void 0,e),e.currentTarget=null}function ZR(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var c=void 0;if(t)for(var d=r.length-1;0<=d;d--){var o=r[d],v=o.instance,C=o.currentTarget;if(o=o.listener,v!==c&&a.isPropagationStopped())break e;KA(a,o,C),c=v}else for(d=0;d<r.length;d++){if(o=r[d],v=o.instance,C=o.currentTarget,o=o.listener,v!==c&&a.isPropagationStopped())break e;KA(a,o,C),c=v}}}if(O_)throw e=tE,O_=!1,tE=null,e}function Xr(e,t){var n=t[hE];n===void 0&&(n=t[hE]=new Set);var r=e+"__bubble";n.has(r)||(XR(t,e,2,!1),n.add(r))}function Pb(e,t,n){var r=0;t&&(r|=4),XR(n,e,r,t)}var Vv="_reactListening"+Math.random().toString(36).slice(2);function lg(e){if(!e[Vv]){e[Vv]=!0,nR.forEach(function(n){n!=="selectionchange"&&(F6.has(n)||Pb(n,!1,e),Pb(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vv]||(t[Vv]=!0,Pb("selectionchange",!1,t))}}function XR(e,t,n,r){switch(DR(t)){case 1:var a=JN;break;case 4:a=QN;break;default:a=jC}n=a.bind(null,t,n,e),a=void 0,!eE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Db(e,t,n,r,a){var c=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(d===4)for(d=r.return;d!==null;){var v=d.tag;if((v===3||v===4)&&(v=d.stateNode.containerInfo,v===a||v.nodeType===8&&v.parentNode===a))return;d=d.return}for(;o!==null;){if(d=th(o),d===null)return;if(v=d.tag,v===5||v===6){r=c=d;continue e}o=o.parentNode}}r=r.return}vR(function(){var C=c,I=BC(n),D=[];e:{var F=qR.get(e);if(F!==void 0){var U=$C,j=e;switch(e){case"keypress":if(h_(n)===0)break e;case"keydown":case"keyup":U=f6;break;case"focusin":j="focus",U=Sb;break;case"focusout":j="blur",U=Sb;break;case"beforeblur":case"afterblur":U=Sb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=FA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=n6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=y6;break;case $R:case HR:case WR:U=o6;break;case GR:U=_6;break;case"scroll":U=e6;break;case"wheel":U=b6;break;case"copy":case"cut":case"paste":U=s6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=UA}var T=(t&4)!==0,H=!T&&e==="scroll",N=T?F!==null?F+"Capture":null:F;T=[];for(var q=C,z;q!==null;){z=q;var B=z.stateNode;if(z.tag===5&&B!==null&&(z=B,N!==null&&(B=ng(q,N),B!=null&&T.push(ug(q,B,z)))),H)break;q=q.return}0<T.length&&(F=new U(F,j,null,n,I),D.push({event:F,listeners:T}))}}if((t&7)===0){e:{if(F=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",F&&n!==Jw&&(j=n.relatedTarget||n.fromElement)&&(th(j)||j[Il]))break e;if((U||F)&&(F=I.window===I?I:(F=I.ownerDocument)?F.defaultView||F.parentWindow:window,U?(j=n.relatedTarget||n.toElement,U=C,j=j?th(j):null,j!==null&&(H=Eh(j),j!==H||j.tag!==5&&j.tag!==6)&&(j=null)):(U=null,j=C),U!==j)){if(T=FA,B="onMouseLeave",N="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(T=UA,B="onPointerLeave",N="onPointerEnter",q="pointer"),H=U==null?F:Wd(U),z=j==null?F:Wd(j),F=new T(B,q+"leave",U,n,I),F.target=H,F.relatedTarget=z,B=null,th(I)===C&&(T=new T(N,q+"enter",j,n,I),T.target=z,T.relatedTarget=H,B=T),H=B,U&&j)t:{for(T=U,N=j,q=0,z=T;z;z=Md(z))q++;for(z=0,B=N;B;B=Md(B))z++;for(;0<q-z;)T=Md(T),q--;for(;0<z-q;)N=Md(N),z--;for(;q--;){if(T===N||N!==null&&T===N.alternate)break t;T=Md(T),N=Md(N)}T=null}else T=null;U!==null&&YA(D,F,U,T,!1),j!==null&&H!==null&&YA(D,H,j,T,!0)}}e:{if(F=C?Wd(C):window,U=F.nodeName&&F.nodeName.toLowerCase(),U==="select"||U==="input"&&F.type==="file")var k=A6;else if($A(F))if(FR)k=D6;else{k=I6;var w=M6}else(U=F.nodeName)&&U.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(k=P6);if(k&&(k=k(e,C))){BR(D,k,n,I);break e}w&&w(e,F,C),e==="focusout"&&(w=F._wrapperState)&&w.controlled&&F.type==="number"&&qw(F,"number",F.value)}switch(w=C?Wd(C):window,e){case"focusin":($A(w)||w.contentEditable==="true")&&($d=w,oE=C,Fm=null);break;case"focusout":Fm=oE=$d=null;break;case"mousedown":aE=!0;break;case"contextmenu":case"mouseup":case"dragend":aE=!1,ZA(D,n,I);break;case"selectionchange":if(O6)break;case"keydown":case"keyup":ZA(D,n,I)}var R;if(WC)e:{switch(e){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else Vd?OR(e,n)&&(J="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(J="onCompositionStart");J&&(LR&&n.locale!=="ko"&&(Vd||J!=="onCompositionStart"?J==="onCompositionEnd"&&Vd&&(R=RR()):(Tu=I,VC="value"in Tu?Tu.value:Tu.textContent,Vd=!0)),w=U_(C,J),0<w.length&&(J=new NA(J,e,null,n,I),D.push({event:J,listeners:w}),R?J.data=R:(R=zR(n),R!==null&&(J.data=R)))),(R=E6?C6(e,n):S6(e,n))&&(C=U_(C,"onBeforeInput"),0<C.length&&(I=new NA("onBeforeInput","beforeinput",null,n,I),D.push({event:I,listeners:C}),I.data=R))}ZR(D,t)})}function ug(e,t,n){return{instance:e,listener:t,currentTarget:n}}function U_(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=ng(e,n),c!=null&&r.unshift(ug(e,c,a)),c=ng(e,t),c!=null&&r.push(ug(e,c,a))),e=e.return}return r}function Md(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function YA(e,t,n,r,a){for(var c=t._reactName,d=[];n!==null&&n!==r;){var o=n,v=o.alternate,C=o.stateNode;if(v!==null&&v===r)break;o.tag===5&&C!==null&&(o=C,a?(v=ng(n,c),v!=null&&d.unshift(ug(n,v,o))):a||(v=ng(n,c),v!=null&&d.push(ug(n,v,o)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var N6=/\r\n?/g,U6=/\u0000|\uFFFD/g;function JA(e){return(typeof e=="string"?e:""+e).replace(N6,`
`).replace(U6,"")}function $v(e,t,n){if(t=JA(t),JA(e)!==t&&n)throw Error(Ht(425))}function j_(){}var sE=null,lE=null;function uE(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cE=typeof setTimeout=="function"?setTimeout:void 0,j6=typeof clearTimeout=="function"?clearTimeout:void 0,QA=typeof Promise=="function"?Promise:void 0,V6=typeof queueMicrotask=="function"?queueMicrotask:typeof QA!="undefined"?function(e){return QA.resolve(null).then(e).catch($6)}:cE;function $6(e){setTimeout(function(){throw e})}function Rb(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),og(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);og(t)}function Ou(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function eM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Dp=Math.random().toString(36).slice(2),qs="__reactFiber$"+Dp,cg="__reactProps$"+Dp,Il="__reactContainer$"+Dp,hE="__reactEvents$"+Dp,H6="__reactListeners$"+Dp,W6="__reactHandles$"+Dp;function th(e){var t=e[qs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Il]||n[qs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=eM(e);e!==null;){if(n=e[qs])return n;e=eM(e)}return t}e=n,n=e.parentNode}return null}function Pg(e){return e=e[qs]||e[Il],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ht(33))}function Ox(e){return e[cg]||null}var dE=[],Gd=-1;function Zu(e){return{current:e}}function Yr(e){0>Gd||(e.current=dE[Gd],dE[Gd]=null,Gd--)}function Wr(e,t){Gd++,dE[Gd]=e.current,e.current=t}var Vu={},Fo=Zu(Vu),ua=Zu(!1),hh=Vu;function _p(e,t){var n=e.type.contextTypes;if(!n)return Vu;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ca(e){return e=e.childContextTypes,e!=null}function V_(){Yr(ua),Yr(Fo)}function tM(e,t,n){if(Fo.current!==Vu)throw Error(Ht(168));Wr(Fo,t),Wr(ua,n)}function KR(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Ht(108,MN(e)||"Unknown",a));return mi({},n,r)}function $_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vu,hh=Fo.current,Wr(Fo,e),Wr(ua,ua.current),!0}function nM(e,t,n){var r=e.stateNode;if(!r)throw Error(Ht(169));n?(e=KR(e,t,hh),r.__reactInternalMemoizedMergedChildContext=e,Yr(ua),Yr(Fo),Wr(Fo,e)):Yr(ua),Wr(ua,n)}var bl=null,zx=!1,Lb=!1;function YR(e){bl===null?bl=[e]:bl.push(e)}function G6(e){zx=!0,YR(e)}function Xu(){if(!Lb&&bl!==null){Lb=!0;var e=0,t=Fr;try{var n=bl;for(Fr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bl=null,zx=!1}catch(a){throw bl!==null&&(bl=bl.slice(e+1)),wR(FC,Xu),a}finally{Fr=t,Lb=!1}}return null}var qd=[],Zd=0,H_=null,W_=0,Va=[],$a=0,dh=null,El=1,Cl="";function Gc(e,t){qd[Zd++]=W_,qd[Zd++]=H_,H_=e,W_=t}function JR(e,t,n){Va[$a++]=El,Va[$a++]=Cl,Va[$a++]=dh,dh=e;var r=El;e=Cl;var a=32-_s(r)-1;r&=~(1<<a),n+=1;var c=32-_s(t)+a;if(30<c){var d=a-a%5;c=(r&(1<<d)-1).toString(32),r>>=d,a-=d,El=1<<32-_s(t)+a|n<<a|r,Cl=c+e}else El=1<<c|n<<a|r,Cl=e}function qC(e){e.return!==null&&(Gc(e,1),JR(e,1,0))}function ZC(e){for(;e===H_;)H_=qd[--Zd],qd[Zd]=null,W_=qd[--Zd],qd[Zd]=null;for(;e===dh;)dh=Va[--$a],Va[$a]=null,Cl=Va[--$a],Va[$a]=null,El=Va[--$a],Va[$a]=null}var wa=null,ba=null,ii=!1,ys=null;function QR(e,t){var n=Ga(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function rM(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wa=e,ba=Ou(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wa=e,ba=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=dh!==null?{id:El,overflow:Cl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ga(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wa=e,ba=null,!0):!1;default:return!1}}function pE(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fE(e){if(ii){var t=ba;if(t){var n=t;if(!rM(e,t)){if(pE(e))throw Error(Ht(418));t=Ou(n.nextSibling);var r=wa;t&&rM(e,t)?QR(r,n):(e.flags=e.flags&-4097|2,ii=!1,wa=e)}}else{if(pE(e))throw Error(Ht(418));e.flags=e.flags&-4097|2,ii=!1,wa=e}}}function iM(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wa=e}function Hv(e){if(e!==wa)return!1;if(!ii)return iM(e),ii=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!uE(e.type,e.memoizedProps)),t&&(t=ba)){if(pE(e))throw eL(),Error(Ht(418));for(;t;)QR(e,t),t=Ou(t.nextSibling)}if(iM(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ht(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ba=Ou(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ba=null}}else ba=wa?Ou(e.stateNode.nextSibling):null;return!0}function eL(){for(var e=ba;e;)e=Ou(e.nextSibling)}function xp(){ba=wa=null,ii=!1}function XC(e){ys===null?ys=[e]:ys.push(e)}var q6=Ol.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){t=mi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var G_=Zu(null),q_=null,Xd=null,KC=null;function YC(){KC=Xd=q_=null}function JC(e){var t=G_.current;Yr(G_),e._currentValue=t}function mE(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function lp(e,t){q_=e,KC=Xd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(sa=!0),e.firstContext=null)}function Xa(e){var t=e._currentValue;if(KC!==e)if(e={context:e,memoizedValue:t,next:null},Xd===null){if(q_===null)throw Error(Ht(308));Xd=e,q_.dependencies={lanes:0,firstContext:e}}else Xd=Xd.next=e;return t}var nh=null;function QC(e){nh===null?nh=[e]:nh.push(e)}function tL(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,QC(t)):(n.next=a.next,a.next=n),t.interleaved=n,Pl(e,r)}function Pl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cu=!1;function eS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(fr&2)!==0){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Pl(e,n)}return a=r.interleaved,a===null?(t.next=t,QC(r)):(t.next=a.next,a.next=t),r.interleaved=t,Pl(e,n)}function d_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,NC(e,n)}}function oM(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=d:c=c.next=d,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Z_(e,t,n,r){var a=e.updateQueue;Cu=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var v=o,C=v.next;v.next=null,d===null?c=C:d.next=C,d=v;var I=e.alternate;I!==null&&(I=I.updateQueue,o=I.lastBaseUpdate,o!==d&&(o===null?I.firstBaseUpdate=C:o.next=C,I.lastBaseUpdate=v))}if(c!==null){var D=a.baseState;d=0,I=C=v=null,o=c;do{var F=o.lane,U=o.eventTime;if((r&F)===F){I!==null&&(I=I.next={eventTime:U,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var j=e,T=o;switch(F=t,U=n,T.tag){case 1:if(j=T.payload,typeof j=="function"){D=j.call(U,D,F);break e}D=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=T.payload,F=typeof j=="function"?j.call(U,D,F):j,F==null)break e;D=mi({},D,F);break e;case 2:Cu=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,F=a.effects,F===null?a.effects=[o]:F.push(o))}else U={eventTime:U,lane:F,tag:o.tag,payload:o.payload,callback:o.callback,next:null},I===null?(C=I=U,v=D):I=I.next=U,d|=F;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;F=o,o=F.next,F.next=null,a.lastBaseUpdate=F,a.shared.pending=null}}while(1);if(I===null&&(v=D),a.baseState=v,a.firstBaseUpdate=C,a.lastBaseUpdate=I,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);fh|=d,e.lanes=d,e.memoizedState=D}}function aM(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ht(191,a));a.call(r)}}}var rL=new tR.Component().refs;function gE(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:mi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bx={isMounted:function(e){return(e=e._reactInternals)?Eh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Go(),a=Fu(e),c=kl(r,a);c.payload=t,n!=null&&(c.callback=n),t=zu(e,c,a),t!==null&&(xs(t,e,a,r),d_(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Go(),a=Fu(e),c=kl(r,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=zu(e,c,a),t!==null&&(xs(t,e,a,r),d_(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Go(),r=Fu(e),a=kl(n,r);a.tag=2,t!=null&&(a.callback=t),t=zu(e,a,r),t!==null&&(xs(t,e,r,n),d_(t,e,r))}};function sM(e,t,n,r,a,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,c,d):t.prototype&&t.prototype.isPureReactComponent?!sg(n,r)||!sg(a,c):!0}function iL(e,t,n){var r=!1,a=Vu,c=t.contextType;return typeof c=="object"&&c!==null?c=Xa(c):(a=ca(t)?hh:Fo.current,r=t.contextTypes,c=(r=r!=null)?_p(e,a):Vu),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function lM(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bx.enqueueReplaceState(t,t.state,null)}function yE(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=rL,eS(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=Xa(c):(c=ca(t)?hh:Fo.current,a.context=_p(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(gE(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Bx.enqueueReplaceState(a,a.state,null),Z_(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function gm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ht(309));var r=n.stateNode}if(!r)throw Error(Ht(147,e));var a=r,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var o=a.refs;o===rL&&(o=a.refs={}),d===null?delete o[c]:o[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(Ht(284));if(!n._owner)throw Error(Ht(290,e))}return e}function Wv(e,t){throw e=Object.prototype.toString.call(t),Error(Ht(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uM(e){var t=e._init;return t(e._payload)}function oL(e){function t(N,q){if(e){var z=N.deletions;z===null?(N.deletions=[q],N.flags|=16):z.push(q)}}function n(N,q){if(!e)return null;for(;q!==null;)t(N,q),q=q.sibling;return null}function r(N,q){for(N=new Map;q!==null;)q.key!==null?N.set(q.key,q):N.set(q.index,q),q=q.sibling;return N}function a(N,q){return N=Nu(N,q),N.index=0,N.sibling=null,N}function c(N,q,z){return N.index=z,e?(z=N.alternate,z!==null?(z=z.index,z<q?(N.flags|=2,q):z):(N.flags|=2,q)):(N.flags|=1048576,q)}function d(N){return e&&N.alternate===null&&(N.flags|=2),N}function o(N,q,z,B){return q===null||q.tag!==6?(q=jb(z,N.mode,B),q.return=N,q):(q=a(q,z),q.return=N,q)}function v(N,q,z,B){var k=z.type;return k===jd?I(N,q,z.props.children,B,z.key):q!==null&&(q.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Eu&&uM(k)===q.type)?(B=a(q,z.props),B.ref=gm(N,q,z),B.return=N,B):(B=v_(z.type,z.key,z.props,null,N.mode,B),B.ref=gm(N,q,z),B.return=N,B)}function C(N,q,z,B){return q===null||q.tag!==4||q.stateNode.containerInfo!==z.containerInfo||q.stateNode.implementation!==z.implementation?(q=Vb(z,N.mode,B),q.return=N,q):(q=a(q,z.children||[]),q.return=N,q)}function I(N,q,z,B,k){return q===null||q.tag!==7?(q=lh(z,N.mode,B,k),q.return=N,q):(q=a(q,z),q.return=N,q)}function D(N,q,z){if(typeof q=="string"&&q!==""||typeof q=="number")return q=jb(""+q,N.mode,z),q.return=N,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Lv:return z=v_(q.type,q.key,q.props,null,N.mode,z),z.ref=gm(N,null,q),z.return=N,z;case Ud:return q=Vb(q,N.mode,z),q.return=N,q;case Eu:var B=q._init;return D(N,B(q._payload),z)}if(Im(q)||hm(q))return q=lh(q,N.mode,z,null),q.return=N,q;Wv(N,q)}return null}function F(N,q,z,B){var k=q!==null?q.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return k!==null?null:o(N,q,""+z,B);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Lv:return z.key===k?v(N,q,z,B):null;case Ud:return z.key===k?C(N,q,z,B):null;case Eu:return k=z._init,F(N,q,k(z._payload),B)}if(Im(z)||hm(z))return k!==null?null:I(N,q,z,B,null);Wv(N,z)}return null}function U(N,q,z,B,k){if(typeof B=="string"&&B!==""||typeof B=="number")return N=N.get(z)||null,o(q,N,""+B,k);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Lv:return N=N.get(B.key===null?z:B.key)||null,v(q,N,B,k);case Ud:return N=N.get(B.key===null?z:B.key)||null,C(q,N,B,k);case Eu:var w=B._init;return U(N,q,z,w(B._payload),k)}if(Im(B)||hm(B))return N=N.get(z)||null,I(q,N,B,k,null);Wv(q,B)}return null}function j(N,q,z,B){for(var k=null,w=null,R=q,J=q=0,ie=null;R!==null&&J<z.length;J++){R.index>J?(ie=R,R=null):ie=R.sibling;var ue=F(N,R,z[J],B);if(ue===null){R===null&&(R=ie);break}e&&R&&ue.alternate===null&&t(N,R),q=c(ue,q,J),w===null?k=ue:w.sibling=ue,w=ue,R=ie}if(J===z.length)return n(N,R),ii&&Gc(N,J),k;if(R===null){for(;J<z.length;J++)R=D(N,z[J],B),R!==null&&(q=c(R,q,J),w===null?k=R:w.sibling=R,w=R);return ii&&Gc(N,J),k}for(R=r(N,R);J<z.length;J++)ie=U(R,N,J,z[J],B),ie!==null&&(e&&ie.alternate!==null&&R.delete(ie.key===null?J:ie.key),q=c(ie,q,J),w===null?k=ie:w.sibling=ie,w=ie);return e&&R.forEach(function(se){return t(N,se)}),ii&&Gc(N,J),k}function T(N,q,z,B){var k=hm(z);if(typeof k!="function")throw Error(Ht(150));if(z=k.call(z),z==null)throw Error(Ht(151));for(var w=k=null,R=q,J=q=0,ie=null,ue=z.next();R!==null&&!ue.done;J++,ue=z.next()){R.index>J?(ie=R,R=null):ie=R.sibling;var se=F(N,R,ue.value,B);if(se===null){R===null&&(R=ie);break}e&&R&&se.alternate===null&&t(N,R),q=c(se,q,J),w===null?k=se:w.sibling=se,w=se,R=ie}if(ue.done)return n(N,R),ii&&Gc(N,J),k;if(R===null){for(;!ue.done;J++,ue=z.next())ue=D(N,ue.value,B),ue!==null&&(q=c(ue,q,J),w===null?k=ue:w.sibling=ue,w=ue);return ii&&Gc(N,J),k}for(R=r(N,R);!ue.done;J++,ue=z.next())ue=U(R,N,J,ue.value,B),ue!==null&&(e&&ue.alternate!==null&&R.delete(ue.key===null?J:ue.key),q=c(ue,q,J),w===null?k=ue:w.sibling=ue,w=ue);return e&&R.forEach(function(_e){return t(N,_e)}),ii&&Gc(N,J),k}function H(N,q,z,B){if(typeof z=="object"&&z!==null&&z.type===jd&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Lv:e:{for(var k=z.key,w=q;w!==null;){if(w.key===k){if(k=z.type,k===jd){if(w.tag===7){n(N,w.sibling),q=a(w,z.props.children),q.return=N,N=q;break e}}else if(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Eu&&uM(k)===w.type){n(N,w.sibling),q=a(w,z.props),q.ref=gm(N,w,z),q.return=N,N=q;break e}n(N,w);break}else t(N,w);w=w.sibling}z.type===jd?(q=lh(z.props.children,N.mode,B,z.key),q.return=N,N=q):(B=v_(z.type,z.key,z.props,null,N.mode,B),B.ref=gm(N,q,z),B.return=N,N=B)}return d(N);case Ud:e:{for(w=z.key;q!==null;){if(q.key===w)if(q.tag===4&&q.stateNode.containerInfo===z.containerInfo&&q.stateNode.implementation===z.implementation){n(N,q.sibling),q=a(q,z.children||[]),q.return=N,N=q;break e}else{n(N,q);break}else t(N,q);q=q.sibling}q=Vb(z,N.mode,B),q.return=N,N=q}return d(N);case Eu:return w=z._init,H(N,q,w(z._payload),B)}if(Im(z))return j(N,q,z,B);if(hm(z))return T(N,q,z,B);Wv(N,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,q!==null&&q.tag===6?(n(N,q.sibling),q=a(q,z),q.return=N,N=q):(n(N,q),q=jb(z,N.mode,B),q.return=N,N=q),d(N)):n(N,q)}return H}var bp=oL(!0),aL=oL(!1),Dg={},Ys=Zu(Dg),hg=Zu(Dg),dg=Zu(Dg);function rh(e){if(e===Dg)throw Error(Ht(174));return e}function tS(e,t){switch(Wr(dg,t),Wr(hg,e),Wr(Ys,Dg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xw(t,e)}Yr(Ys),Wr(Ys,t)}function wp(){Yr(Ys),Yr(hg),Yr(dg)}function sL(e){rh(dg.current);var t=rh(Ys.current),n=Xw(t,e.type);t!==n&&(Wr(hg,e),Wr(Ys,n))}function nS(e){hg.current===e&&(Yr(Ys),Yr(hg))}var di=Zu(0);function X_(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ob=[];function rS(){for(var e=0;e<Ob.length;e++)Ob[e]._workInProgressVersionPrimary=null;Ob.length=0}var p_=Ol.ReactCurrentDispatcher,zb=Ol.ReactCurrentBatchConfig,ph=0,fi=null,Wi=null,ro=null,K_=!1,Nm=!1,pg=0,Z6=0;function Do(){throw Error(Ht(321))}function iS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Es(e[n],t[n]))return!1;return!0}function oS(e,t,n,r,a,c){if(ph=c,fi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,p_.current=e===null||e.memoizedState===null?J6:Q6,e=n(r,a),Nm){c=0;do{if(Nm=!1,pg=0,25<=c)throw Error(Ht(301));c+=1,ro=Wi=null,t.updateQueue=null,p_.current=e9,e=n(r,a)}while(Nm)}if(p_.current=Y_,t=Wi!==null&&Wi.next!==null,ph=0,ro=Wi=fi=null,K_=!1,t)throw Error(Ht(300));return e}function aS(){var e=pg!==0;return pg=0,e}function $s(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ro===null?fi.memoizedState=ro=e:ro=ro.next=e,ro}function Ka(){if(Wi===null){var e=fi.alternate;e=e!==null?e.memoizedState:null}else e=Wi.next;var t=ro===null?fi.memoizedState:ro.next;if(t!==null)ro=t,Wi=e;else{if(e===null)throw Error(Ht(310));Wi=e,e={memoizedState:Wi.memoizedState,baseState:Wi.baseState,baseQueue:Wi.baseQueue,queue:Wi.queue,next:null},ro===null?fi.memoizedState=ro=e:ro=ro.next=e}return ro}function fg(e,t){return typeof t=="function"?t(e):t}function Bb(e){var t=Ka(),n=t.queue;if(n===null)throw Error(Ht(311));n.lastRenderedReducer=e;var r=Wi,a=r.baseQueue,c=n.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}r.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,r=r.baseState;var o=d=null,v=null,C=c;do{var I=C.lane;if((ph&I)===I)v!==null&&(v=v.next={lane:0,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null}),r=C.hasEagerState?C.eagerState:e(r,C.action);else{var D={lane:I,action:C.action,hasEagerState:C.hasEagerState,eagerState:C.eagerState,next:null};v===null?(o=v=D,d=r):v=v.next=D,fi.lanes|=I,fh|=I}C=C.next}while(C!==null&&C!==c);v===null?d=r:v.next=o,Es(r,t.memoizedState)||(sa=!0),t.memoizedState=r,t.baseState=d,t.baseQueue=v,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do c=a.lane,fi.lanes|=c,fh|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fb(e){var t=Ka(),n=t.queue;if(n===null)throw Error(Ht(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do c=e(c,d.action),d=d.next;while(d!==a);Es(c,t.memoizedState)||(sa=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,r]}function lL(){}function uL(e,t){var n=fi,r=Ka(),a=t(),c=!Es(r.memoizedState,a);if(c&&(r.memoizedState=a,sa=!0),r=r.queue,sS(dL.bind(null,n,r,e),[e]),r.getSnapshot!==t||c||ro!==null&&ro.memoizedState.tag&1){if(n.flags|=2048,mg(9,hL.bind(null,n,r,a,t),void 0,null),oo===null)throw Error(Ht(349));(ph&30)!==0||cL(n,t,a)}return a}function cL(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=fi.updateQueue,t===null?(t={lastEffect:null,stores:null},fi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function hL(e,t,n,r){t.value=n,t.getSnapshot=r,pL(t)&&fL(e)}function dL(e,t,n){return n(function(){pL(t)&&fL(e)})}function pL(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Es(e,n)}catch{return!0}}function fL(e){var t=Pl(e,1);t!==null&&xs(t,e,1,-1)}function cM(e){var t=$s();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fg,lastRenderedState:e},t.queue=e,e=e.dispatch=Y6.bind(null,fi,e),[t.memoizedState,e]}function mg(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=fi.updateQueue,t===null?(t={lastEffect:null,stores:null},fi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function mL(){return Ka().memoizedState}function f_(e,t,n,r){var a=$s();fi.flags|=e,a.memoizedState=mg(1|t,n,void 0,r===void 0?null:r)}function Fx(e,t,n,r){var a=Ka();r=r===void 0?null:r;var c=void 0;if(Wi!==null){var d=Wi.memoizedState;if(c=d.destroy,r!==null&&iS(r,d.deps)){a.memoizedState=mg(t,n,c,r);return}}fi.flags|=e,a.memoizedState=mg(1|t,n,c,r)}function hM(e,t){return f_(8390656,8,e,t)}function sS(e,t){return Fx(2048,8,e,t)}function gL(e,t){return Fx(4,2,e,t)}function yL(e,t){return Fx(4,4,e,t)}function vL(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _L(e,t,n){return n=n!=null?n.concat([e]):null,Fx(4,4,vL.bind(null,t,e),n)}function lS(){}function xL(e,t){var n=Ka();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&iS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function bL(e,t){var n=Ka();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&iS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wL(e,t,n){return(ph&21)===0?(e.baseState&&(e.baseState=!1,sa=!0),e.memoizedState=n):(Es(n,t)||(n=SR(),fi.lanes|=n,fh|=n,e.baseState=!0),t)}function X6(e,t){var n=Fr;Fr=n!==0&&4>n?n:4,e(!0);var r=zb.transition;zb.transition={};try{e(!1),t()}finally{Fr=n,zb.transition=r}}function EL(){return Ka().memoizedState}function K6(e,t,n){var r=Fu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CL(e))SL(t,n);else if(n=tL(e,t,n,r),n!==null){var a=Go();xs(n,e,r,a),kL(n,t,r)}}function Y6(e,t,n){var r=Fu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CL(e))SL(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var d=t.lastRenderedState,o=c(d,n);if(a.hasEagerState=!0,a.eagerState=o,Es(o,d)){var v=t.interleaved;v===null?(a.next=a,QC(t)):(a.next=v.next,v.next=a),t.interleaved=a;return}}catch{}finally{}n=tL(e,t,a,r),n!==null&&(a=Go(),xs(n,e,r,a),kL(n,t,r))}}function CL(e){var t=e.alternate;return e===fi||t!==null&&t===fi}function SL(e,t){Nm=K_=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kL(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,NC(e,n)}}var Y_={readContext:Xa,useCallback:Do,useContext:Do,useEffect:Do,useImperativeHandle:Do,useInsertionEffect:Do,useLayoutEffect:Do,useMemo:Do,useReducer:Do,useRef:Do,useState:Do,useDebugValue:Do,useDeferredValue:Do,useTransition:Do,useMutableSource:Do,useSyncExternalStore:Do,useId:Do,unstable_isNewReconciler:!1},J6={readContext:Xa,useCallback:function(e,t){return $s().memoizedState=[e,t===void 0?null:t],e},useContext:Xa,useEffect:hM,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,f_(4194308,4,vL.bind(null,t,e),n)},useLayoutEffect:function(e,t){return f_(4194308,4,e,t)},useInsertionEffect:function(e,t){return f_(4,2,e,t)},useMemo:function(e,t){var n=$s();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$s();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=K6.bind(null,fi,e),[r.memoizedState,e]},useRef:function(e){var t=$s();return e={current:e},t.memoizedState=e},useState:cM,useDebugValue:lS,useDeferredValue:function(e){return $s().memoizedState=e},useTransition:function(){var e=cM(!1),t=e[0];return e=X6.bind(null,e[1]),$s().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fi,a=$s();if(ii){if(n===void 0)throw Error(Ht(407));n=n()}else{if(n=t(),oo===null)throw Error(Ht(349));(ph&30)!==0||cL(r,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,hM(dL.bind(null,r,c,e),[e]),r.flags|=2048,mg(9,hL.bind(null,r,c,n,t),void 0,null),n},useId:function(){var e=$s(),t=oo.identifierPrefix;if(ii){var n=Cl,r=El;n=(r&~(1<<32-_s(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pg++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Z6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Q6={readContext:Xa,useCallback:xL,useContext:Xa,useEffect:sS,useImperativeHandle:_L,useInsertionEffect:gL,useLayoutEffect:yL,useMemo:bL,useReducer:Bb,useRef:mL,useState:function(){return Bb(fg)},useDebugValue:lS,useDeferredValue:function(e){var t=Ka();return wL(t,Wi.memoizedState,e)},useTransition:function(){var e=Bb(fg)[0],t=Ka().memoizedState;return[e,t]},useMutableSource:lL,useSyncExternalStore:uL,useId:EL,unstable_isNewReconciler:!1},e9={readContext:Xa,useCallback:xL,useContext:Xa,useEffect:sS,useImperativeHandle:_L,useInsertionEffect:gL,useLayoutEffect:yL,useMemo:bL,useReducer:Fb,useRef:mL,useState:function(){return Fb(fg)},useDebugValue:lS,useDeferredValue:function(e){var t=Ka();return Wi===null?t.memoizedState=e:wL(t,Wi.memoizedState,e)},useTransition:function(){var e=Fb(fg)[0],t=Ka().memoizedState;return[e,t]},useMutableSource:lL,useSyncExternalStore:uL,useId:EL,unstable_isNewReconciler:!1};function Ep(e,t){try{var n="",r=t;do n+=AN(r),r=r.return;while(r);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function Nb(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function vE(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var t9=typeof WeakMap=="function"?WeakMap:Map;function TL(e,t,n){n=kl(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Q_||(Q_=!0,AE=r),vE(e,t)},n}function AL(e,t,n){n=kl(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){vE(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){vE(e,t),typeof r!="function"&&(Bu===null?Bu=new Set([this]):Bu.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function dM(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new t9;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=m9.bind(null,e,t,n),t.then(e,e))}function pM(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fM(e,t,n,r,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kl(-1,1),t.tag=2,zu(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var n9=Ol.ReactCurrentOwner,sa=!1;function $o(e,t,n,r){t.child=e===null?aL(t,null,n,r):bp(t,e.child,n,r)}function mM(e,t,n,r,a){n=n.render;var c=t.ref;return lp(t,a),r=oS(e,t,n,r,c,a),n=aS(),e!==null&&!sa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Dl(e,t,a)):(ii&&n&&qC(t),t.flags|=1,$o(e,t,r,a),t.child)}function gM(e,t,n,r,a){if(e===null){var c=n.type;return typeof c=="function"&&!gS(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,ML(e,t,c,r,a)):(e=v_(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,(e.lanes&a)===0){var d=c.memoizedProps;if(n=n.compare,n=n!==null?n:sg,n(d,r)&&e.ref===t.ref)return Dl(e,t,a)}return t.flags|=1,e=Nu(c,r),e.ref=t.ref,e.return=t,t.child=e}function ML(e,t,n,r,a){if(e!==null){var c=e.memoizedProps;if(sg(c,r)&&e.ref===t.ref)if(sa=!1,t.pendingProps=r=c,(e.lanes&a)!==0)(e.flags&131072)!==0&&(sa=!0);else return t.lanes=e.lanes,Dl(e,t,a)}return _E(e,t,n,r,a)}function IL(e,t,n){var r=t.pendingProps,a=r.children,c=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wr(Yd,_a),_a|=n;else{if((n&1073741824)===0)return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Wr(Yd,_a),_a|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=c!==null?c.baseLanes:n,Wr(Yd,_a),_a|=r}else c!==null?(r=c.baseLanes|n,t.memoizedState=null):r=n,Wr(Yd,_a),_a|=r;return $o(e,t,a,n),t.child}function PL(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _E(e,t,n,r,a){var c=ca(n)?hh:Fo.current;return c=_p(t,c),lp(t,a),n=oS(e,t,n,r,c,a),r=aS(),e!==null&&!sa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Dl(e,t,a)):(ii&&r&&qC(t),t.flags|=1,$o(e,t,n,a),t.child)}function yM(e,t,n,r,a){if(ca(n)){var c=!0;$_(t)}else c=!1;if(lp(t,a),t.stateNode===null)m_(e,t),iL(t,n,r),yE(t,n,r,a),r=!0;else if(e===null){var d=t.stateNode,o=t.memoizedProps;d.props=o;var v=d.context,C=n.contextType;typeof C=="object"&&C!==null?C=Xa(C):(C=ca(n)?hh:Fo.current,C=_p(t,C));var I=n.getDerivedStateFromProps,D=typeof I=="function"||typeof d.getSnapshotBeforeUpdate=="function";D||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(o!==r||v!==C)&&lM(t,d,r,C),Cu=!1;var F=t.memoizedState;d.state=F,Z_(t,r,d,a),v=t.memoizedState,o!==r||F!==v||ua.current||Cu?(typeof I=="function"&&(gE(t,n,I,r),v=t.memoizedState),(o=Cu||sM(t,n,o,r,F,v,C))?(D||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=v),d.props=r,d.state=v,d.context=C,r=o):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{d=t.stateNode,nL(e,t),o=t.memoizedProps,C=t.type===t.elementType?o:ms(t.type,o),d.props=C,D=t.pendingProps,F=d.context,v=n.contextType,typeof v=="object"&&v!==null?v=Xa(v):(v=ca(n)?hh:Fo.current,v=_p(t,v));var U=n.getDerivedStateFromProps;(I=typeof U=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(o!==D||F!==v)&&lM(t,d,r,v),Cu=!1,F=t.memoizedState,d.state=F,Z_(t,r,d,a);var j=t.memoizedState;o!==D||F!==j||ua.current||Cu?(typeof U=="function"&&(gE(t,n,U,r),j=t.memoizedState),(C=Cu||sM(t,n,C,r,F,j,v)||!1)?(I||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,j,v),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,j,v)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||o===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),d.props=r,d.state=j,d.context=v,r=C):(typeof d.componentDidUpdate!="function"||o===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),r=!1)}return xE(e,t,n,r,c,a)}function xE(e,t,n,r,a,c){PL(e,t);var d=(t.flags&128)!==0;if(!r&&!d)return a&&nM(t,n,!1),Dl(e,t,c);r=t.stateNode,n9.current=t;var o=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=bp(t,e.child,null,c),t.child=bp(t,null,o,c)):$o(e,t,o,c),t.memoizedState=r.state,a&&nM(t,n,!0),t.child}function DL(e){var t=e.stateNode;t.pendingContext?tM(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tM(e,t.context,!1),tS(e,t.containerInfo)}function vM(e,t,n,r,a){return xp(),XC(a),t.flags|=256,$o(e,t,n,r),t.child}var bE={dehydrated:null,treeContext:null,retryLane:0};function wE(e){return{baseLanes:e,cachePool:null,transitions:null}}function RL(e,t,n){var r=t.pendingProps,a=di.current,c=!1,d=(t.flags&128)!==0,o;if((o=d)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Wr(di,a&1),e===null)return fE(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(d=r.children,e=r.fallback,c?(r=t.mode,c=t.child,d={mode:"hidden",children:d},(r&1)===0&&c!==null?(c.childLanes=0,c.pendingProps=d):c=jx(d,r,0,null),e=lh(e,r,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=wE(n),t.memoizedState=bE,e):uS(t,d));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return r9(e,t,d,r,o,a,n);if(c){c=r.fallback,d=t.mode,a=e.child,o=a.sibling;var v={mode:"hidden",children:r.children};return(d&1)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=v,t.deletions=null):(r=Nu(a,v),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?c=Nu(o,c):(c=lh(c,d,n,null),c.flags|=2),c.return=t,r.return=t,r.sibling=c,t.child=r,r=c,c=t.child,d=e.child.memoizedState,d=d===null?wE(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~n,t.memoizedState=bE,r}return c=e.child,e=c.sibling,r=Nu(c,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function uS(e,t){return t=jx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gv(e,t,n,r){return r!==null&&XC(r),bp(t,e.child,null,n),e=uS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function r9(e,t,n,r,a,c,d){if(n)return t.flags&256?(t.flags&=-257,r=Nb(Error(Ht(422))),Gv(e,t,d,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=r.fallback,a=t.mode,r=jx({mode:"visible",children:r.children},a,0,null),c=lh(c,a,d,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,(t.mode&1)!==0&&bp(t,e.child,null,d),t.child.memoizedState=wE(d),t.memoizedState=bE,c);if((t.mode&1)===0)return Gv(e,t,d,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,c=Error(Ht(419)),r=Nb(c,r,void 0),Gv(e,t,d,r)}if(o=(d&e.childLanes)!==0,sa||o){if(r=oo,r!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(r.suspendedLanes|d))!==0?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Pl(e,a),xs(r,e,a,-1))}return mS(),r=Nb(Error(Ht(421))),Gv(e,t,d,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=g9.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,ba=Ou(a.nextSibling),wa=t,ii=!0,ys=null,e!==null&&(Va[$a++]=El,Va[$a++]=Cl,Va[$a++]=dh,El=e.id,Cl=e.overflow,dh=t),t=uS(t,r.children),t.flags|=4096,t)}function _M(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mE(e.return,t,n)}function Ub(e,t,n,r,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=r,c.tail=n,c.tailMode=a)}function LL(e,t,n){var r=t.pendingProps,a=r.revealOrder,c=r.tail;if($o(e,t,r.children,n),r=di.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_M(e,n,t);else if(e.tag===19)_M(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Wr(di,r),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&X_(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Ub(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&X_(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Ub(t,!0,n,null,c);break;case"together":Ub(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function m_(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fh|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Ht(153));if(t.child!==null){for(e=t.child,n=Nu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Nu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function i9(e,t,n){switch(t.tag){case 3:DL(t),xp();break;case 5:sL(t);break;case 1:ca(t.type)&&$_(t);break;case 4:tS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Wr(G_,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Wr(di,di.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?RL(e,t,n):(Wr(di,di.current&1),e=Dl(e,t,n),e!==null?e.sibling:null);Wr(di,di.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return LL(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Wr(di,di.current),r)break;return null;case 22:case 23:return t.lanes=0,IL(e,t,n)}return Dl(e,t,n)}var OL,EE,zL,BL;OL=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};EE=function(){};zL=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,rh(Ys.current);var c=null;switch(n){case"input":a=Ww(e,a),r=Ww(e,r),c=[];break;case"select":a=mi({},a,{value:void 0}),r=mi({},r,{value:void 0}),c=[];break;case"textarea":a=Zw(e,a),r=Zw(e,r),c=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=j_)}Kw(n,r);var d;n=null;for(C in a)if(!r.hasOwnProperty(C)&&a.hasOwnProperty(C)&&a[C]!=null)if(C==="style"){var o=a[C];for(d in o)o.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else C!=="dangerouslySetInnerHTML"&&C!=="children"&&C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&C!=="autoFocus"&&(eg.hasOwnProperty(C)?c||(c=[]):(c=c||[]).push(C,null));for(C in r){var v=r[C];if(o=a!=null?a[C]:void 0,r.hasOwnProperty(C)&&v!==o&&(v!=null||o!=null))if(C==="style")if(o){for(d in o)!o.hasOwnProperty(d)||v&&v.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in v)v.hasOwnProperty(d)&&o[d]!==v[d]&&(n||(n={}),n[d]=v[d])}else n||(c||(c=[]),c.push(C,n)),n=v;else C==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,o=o?o.__html:void 0,v!=null&&o!==v&&(c=c||[]).push(C,v)):C==="children"?typeof v!="string"&&typeof v!="number"||(c=c||[]).push(C,""+v):C!=="suppressContentEditableWarning"&&C!=="suppressHydrationWarning"&&(eg.hasOwnProperty(C)?(v!=null&&C==="onScroll"&&Xr("scroll",e),c||o===v||(c=[])):(c=c||[]).push(C,v))}n&&(c=c||[]).push("style",n);var C=c;(t.updateQueue=C)&&(t.flags|=4)}};BL=function(e,t,n,r){n!==r&&(t.flags|=4)};function ym(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ro(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function o9(e,t,n){var r=t.pendingProps;switch(ZC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ro(t),null;case 1:return ca(t.type)&&V_(),Ro(t),null;case 3:return r=t.stateNode,wp(),Yr(ua),Yr(Fo),rS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hv(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ys!==null&&(PE(ys),ys=null))),EE(e,t),Ro(t),null;case 5:nS(t);var a=rh(dg.current);if(n=t.type,e!==null&&t.stateNode!=null)zL(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ht(166));return Ro(t),null}if(e=rh(Ys.current),Hv(t)){r=t.stateNode,n=t.type;var c=t.memoizedProps;switch(r[qs]=t,r[cg]=c,e=(t.mode&1)!==0,n){case"dialog":Xr("cancel",r),Xr("close",r);break;case"iframe":case"object":case"embed":Xr("load",r);break;case"video":case"audio":for(a=0;a<Dm.length;a++)Xr(Dm[a],r);break;case"source":Xr("error",r);break;case"img":case"image":case"link":Xr("error",r),Xr("load",r);break;case"details":Xr("toggle",r);break;case"input":AA(r,c),Xr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!c.multiple},Xr("invalid",r);break;case"textarea":IA(r,c),Xr("invalid",r)}Kw(n,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var o=c[d];d==="children"?typeof o=="string"?r.textContent!==o&&(c.suppressHydrationWarning!==!0&&$v(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(c.suppressHydrationWarning!==!0&&$v(r.textContent,o,e),a=["children",""+o]):eg.hasOwnProperty(d)&&o!=null&&d==="onScroll"&&Xr("scroll",r)}switch(n){case"input":Ov(r),MA(r,c,!0);break;case"textarea":Ov(r),PA(r);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(r.onclick=j_)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cR(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(n,{is:r.is}):(e=d.createElement(n),n==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,n),e[qs]=t,e[cg]=r,OL(e,t,!1,!1),t.stateNode=e;e:{switch(d=Yw(n,r),n){case"dialog":Xr("cancel",e),Xr("close",e),a=r;break;case"iframe":case"object":case"embed":Xr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Dm.length;a++)Xr(Dm[a],e);a=r;break;case"source":Xr("error",e),a=r;break;case"img":case"image":case"link":Xr("error",e),Xr("load",e),a=r;break;case"details":Xr("toggle",e),a=r;break;case"input":AA(e,r),a=Ww(e,r),Xr("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=mi({},r,{value:void 0}),Xr("invalid",e);break;case"textarea":IA(e,r),a=Zw(e,r),Xr("invalid",e);break;default:a=r}Kw(n,a),o=a;for(c in o)if(o.hasOwnProperty(c)){var v=o[c];c==="style"?pR(e,v):c==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&hR(e,v)):c==="children"?typeof v=="string"?(n!=="textarea"||v!=="")&&tg(e,v):typeof v=="number"&&tg(e,""+v):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(eg.hasOwnProperty(c)?v!=null&&c==="onScroll"&&Xr("scroll",e):v!=null&&RC(e,c,v,d))}switch(n){case"input":Ov(e),MA(e,r,!1);break;case"textarea":Ov(e),PA(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ju(r.value));break;case"select":e.multiple=!!r.multiple,c=r.value,c!=null?ip(e,!!r.multiple,c,!1):r.defaultValue!=null&&ip(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=j_)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ro(t),null;case 6:if(e&&t.stateNode!=null)BL(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ht(166));if(n=rh(dg.current),rh(Ys.current),Hv(t)){if(r=t.stateNode,n=t.memoizedProps,r[qs]=t,(c=r.nodeValue!==n)&&(e=wa,e!==null))switch(e.tag){case 3:$v(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$v(r.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qs]=t,t.stateNode=r}return Ro(t),null;case 13:if(Yr(di),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ii&&ba!==null&&(t.mode&1)!==0&&(t.flags&128)===0)eL(),xp(),t.flags|=98560,c=!1;else if(c=Hv(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(Ht(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Ht(317));c[qs]=t}else xp(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ro(t),c=!1}else ys!==null&&(PE(ys),ys=null),c=!0;if(!c)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(di.current&1)!==0?Gi===0&&(Gi=3):mS())),t.updateQueue!==null&&(t.flags|=4),Ro(t),null);case 4:return wp(),EE(e,t),e===null&&lg(t.stateNode.containerInfo),Ro(t),null;case 10:return JC(t.type._context),Ro(t),null;case 17:return ca(t.type)&&V_(),Ro(t),null;case 19:if(Yr(di),c=t.memoizedState,c===null)return Ro(t),null;if(r=(t.flags&128)!==0,d=c.rendering,d===null)if(r)ym(c,!1);else{if(Gi!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=X_(e),d!==null){for(t.flags|=128,ym(c,!1),r=d.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)c=n,e=r,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Wr(di,di.current&1|2),t.child}e=e.sibling}c.tail!==null&&Pi()>Cp&&(t.flags|=128,r=!0,ym(c,!1),t.lanes=4194304)}else{if(!r)if(e=X_(d),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ym(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!ii)return Ro(t),null}else 2*Pi()-c.renderingStartTime>Cp&&n!==1073741824&&(t.flags|=128,r=!0,ym(c,!1),t.lanes=4194304);c.isBackwards?(d.sibling=t.child,t.child=d):(n=c.last,n!==null?n.sibling=d:t.child=d,c.last=d)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Pi(),t.sibling=null,n=di.current,Wr(di,r?n&1|2:n&1),t):(Ro(t),null);case 22:case 23:return fS(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(_a&1073741824)!==0&&(Ro(t),t.subtreeFlags&6&&(t.flags|=8192)):Ro(t),null;case 24:return null;case 25:return null}throw Error(Ht(156,t.tag))}function a9(e,t){switch(ZC(t),t.tag){case 1:return ca(t.type)&&V_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wp(),Yr(ua),Yr(Fo),rS(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return nS(t),null;case 13:if(Yr(di),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ht(340));xp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yr(di),null;case 4:return wp(),null;case 10:return JC(t.type._context),null;case 22:case 23:return fS(),null;case 24:return null;default:return null}}var qv=!1,Oo=!1,s9=typeof WeakSet=="function"?WeakSet:Set,cn=null;function Kd(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ei(e,t,r)}else n.current=null}function CE(e,t,n){try{n()}catch(r){Ei(e,t,r)}}var xM=!1;function l9(e,t){if(sE=F_,e=jR(),GC(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,c=r.focusNode;r=r.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var d=0,o=-1,v=-1,C=0,I=0,D=e,F=null;t:for(;;){for(var U;D!==n||a!==0&&D.nodeType!==3||(o=d+a),D!==c||r!==0&&D.nodeType!==3||(v=d+r),D.nodeType===3&&(d+=D.nodeValue.length),(U=D.firstChild)!==null;)F=D,D=U;for(;;){if(D===e)break t;if(F===n&&++C===a&&(o=d),F===c&&++I===r&&(v=d),(U=D.nextSibling)!==null)break;D=F,F=D.parentNode}D=U}n=o===-1||v===-1?null:{start:o,end:v}}else n=null}n=n||{start:0,end:0}}else n=null;for(lE={focusedElem:e,selectionRange:n},F_=!1,cn=t;cn!==null;)if(t=cn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,cn=e;else for(;cn!==null;){t=cn;try{var j=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var T=j.memoizedProps,H=j.memoizedState,N=t.stateNode,q=N.getSnapshotBeforeUpdate(t.elementType===t.type?T:ms(t.type,T),H);N.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ht(163))}}catch(B){Ei(t,t.return,B)}if(e=t.sibling,e!==null){e.return=t.return,cn=e;break}cn=t.return}return j=xM,xM=!1,j}function Um(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&CE(t,n,c)}a=a.next}while(a!==r)}}function Nx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function SE(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function FL(e){var t=e.alternate;t!==null&&(e.alternate=null,FL(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qs],delete t[cg],delete t[hE],delete t[H6],delete t[W6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NL(e){return e.tag===5||e.tag===3||e.tag===4}function bM(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function kE(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=j_));else if(r!==4&&(e=e.child,e!==null))for(kE(e,t,n),e=e.sibling;e!==null;)kE(e,t,n),e=e.sibling}function TE(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(TE(e,t,n),e=e.sibling;e!==null;)TE(e,t,n),e=e.sibling}var mo=null,gs=!1;function _u(e,t,n){for(n=n.child;n!==null;)UL(e,t,n),n=n.sibling}function UL(e,t,n){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(Px,n)}catch{}switch(n.tag){case 5:Oo||Kd(n,t);case 6:var r=mo,a=gs;mo=null,_u(e,t,n),mo=r,gs=a,mo!==null&&(gs?(e=mo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):mo.removeChild(n.stateNode));break;case 18:mo!==null&&(gs?(e=mo,n=n.stateNode,e.nodeType===8?Rb(e.parentNode,n):e.nodeType===1&&Rb(e,n),og(e)):Rb(mo,n.stateNode));break;case 4:r=mo,a=gs,mo=n.stateNode.containerInfo,gs=!0,_u(e,t,n),mo=r,gs=a;break;case 0:case 11:case 14:case 15:if(!Oo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&((c&2)!==0||(c&4)!==0)&&CE(n,t,d),a=a.next}while(a!==r)}_u(e,t,n);break;case 1:if(!Oo&&(Kd(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ei(n,t,o)}_u(e,t,n);break;case 21:_u(e,t,n);break;case 22:n.mode&1?(Oo=(r=Oo)||n.memoizedState!==null,_u(e,t,n),Oo=r):_u(e,t,n);break;default:_u(e,t,n)}}function wM(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new s9),t.forEach(function(r){var a=y9.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function fs(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var c=e,d=t,o=d;e:for(;o!==null;){switch(o.tag){case 5:mo=o.stateNode,gs=!1;break e;case 3:mo=o.stateNode.containerInfo,gs=!0;break e;case 4:mo=o.stateNode.containerInfo,gs=!0;break e}o=o.return}if(mo===null)throw Error(Ht(160));UL(c,d,a),mo=null,gs=!1;var v=a.alternate;v!==null&&(v.return=null),a.return=null}catch(C){Ei(a,t,C)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)jL(t,e),t=t.sibling}function jL(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fs(t,e),Vs(e),r&4){try{Um(3,e,e.return),Nx(3,e)}catch(T){Ei(e,e.return,T)}try{Um(5,e,e.return)}catch(T){Ei(e,e.return,T)}}break;case 1:fs(t,e),Vs(e),r&512&&n!==null&&Kd(n,n.return);break;case 5:if(fs(t,e),Vs(e),r&512&&n!==null&&Kd(n,n.return),e.flags&32){var a=e.stateNode;try{tg(a,"")}catch(T){Ei(e,e.return,T)}}if(r&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,d=n!==null?n.memoizedProps:c,o=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{o==="input"&&c.type==="radio"&&c.name!=null&&lR(a,c),Yw(o,d);var C=Yw(o,c);for(d=0;d<v.length;d+=2){var I=v[d],D=v[d+1];I==="style"?pR(a,D):I==="dangerouslySetInnerHTML"?hR(a,D):I==="children"?tg(a,D):RC(a,I,D,C)}switch(o){case"input":Gw(a,c);break;case"textarea":uR(a,c);break;case"select":var F=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var U=c.value;U!=null?ip(a,!!c.multiple,U,!1):F!==!!c.multiple&&(c.defaultValue!=null?ip(a,!!c.multiple,c.defaultValue,!0):ip(a,!!c.multiple,c.multiple?[]:"",!1))}a[cg]=c}catch(T){Ei(e,e.return,T)}}break;case 6:if(fs(t,e),Vs(e),r&4){if(e.stateNode===null)throw Error(Ht(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(T){Ei(e,e.return,T)}}break;case 3:if(fs(t,e),Vs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{og(t.containerInfo)}catch(T){Ei(e,e.return,T)}break;case 4:fs(t,e),Vs(e);break;case 13:fs(t,e),Vs(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(dS=Pi())),r&4&&wM(e);break;case 22:if(I=n!==null&&n.memoizedState!==null,e.mode&1?(Oo=(C=Oo)||I,fs(t,e),Oo=C):fs(t,e),Vs(e),r&8192){if(C=e.memoizedState!==null,(e.stateNode.isHidden=C)&&!I&&(e.mode&1)!==0)for(cn=e,I=e.child;I!==null;){for(D=cn=I;cn!==null;){switch(F=cn,U=F.child,F.tag){case 0:case 11:case 14:case 15:Um(4,F,F.return);break;case 1:Kd(F,F.return);var j=F.stateNode;if(typeof j.componentWillUnmount=="function"){r=F,n=F.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(T){Ei(r,n,T)}}break;case 5:Kd(F,F.return);break;case 22:if(F.memoizedState!==null){CM(D);continue}}U!==null?(U.return=F,cn=U):CM(D)}I=I.sibling}e:for(I=null,D=e;;){if(D.tag===5){if(I===null){I=D;try{a=D.stateNode,C?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(o=D.stateNode,v=D.memoizedProps.style,d=v!=null&&v.hasOwnProperty("display")?v.display:null,o.style.display=dR("display",d))}catch(T){Ei(e,e.return,T)}}}else if(D.tag===6){if(I===null)try{D.stateNode.nodeValue=C?"":D.memoizedProps}catch(T){Ei(e,e.return,T)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;I===D&&(I=null),D=D.return}I===D&&(I=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:fs(t,e),Vs(e),r&4&&wM(e);break;case 21:break;default:fs(t,e),Vs(e)}}function Vs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(NL(n)){var r=n;break e}n=n.return}throw Error(Ht(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(tg(a,""),r.flags&=-33);var c=bM(e);TE(e,c,a);break;case 3:case 4:var d=r.stateNode.containerInfo,o=bM(e);kE(e,o,d);break;default:throw Error(Ht(161))}}catch(v){Ei(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function u9(e,t,n){cn=e,VL(e)}function VL(e,t,n){for(var r=(e.mode&1)!==0;cn!==null;){var a=cn,c=a.child;if(a.tag===22&&r){var d=a.memoizedState!==null||qv;if(!d){var o=a.alternate,v=o!==null&&o.memoizedState!==null||Oo;o=qv;var C=Oo;if(qv=d,(Oo=v)&&!C)for(cn=a;cn!==null;)d=cn,v=d.child,d.tag===22&&d.memoizedState!==null?SM(a):v!==null?(v.return=d,cn=v):SM(a);for(;c!==null;)cn=c,VL(c),c=c.sibling;cn=a,qv=o,Oo=C}EM(e)}else(a.subtreeFlags&8772)!==0&&c!==null?(c.return=a,cn=c):EM(e)}}function EM(e){for(;cn!==null;){var t=cn;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Oo||Nx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Oo)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&aM(t,c,r);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}aM(t,d,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&n.focus();break;case"img":v.src&&(n.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var C=t.alternate;if(C!==null){var I=C.memoizedState;if(I!==null){var D=I.dehydrated;D!==null&&og(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ht(163))}Oo||t.flags&512&&SE(t)}catch(F){Ei(t,t.return,F)}}if(t===e){cn=null;break}if(n=t.sibling,n!==null){n.return=t.return,cn=n;break}cn=t.return}}function CM(e){for(;cn!==null;){var t=cn;if(t===e){cn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,cn=n;break}cn=t.return}}function SM(e){for(;cn!==null;){var t=cn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nx(4,t)}catch(v){Ei(t,n,v)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(v){Ei(t,a,v)}}var c=t.return;try{SE(t)}catch(v){Ei(t,c,v)}break;case 5:var d=t.return;try{SE(t)}catch(v){Ei(t,d,v)}}}catch(v){Ei(t,t.return,v)}if(t===e){cn=null;break}var o=t.sibling;if(o!==null){o.return=t.return,cn=o;break}cn=t.return}}var c9=Math.ceil,J_=Ol.ReactCurrentDispatcher,cS=Ol.ReactCurrentOwner,qa=Ol.ReactCurrentBatchConfig,fr=0,oo=null,Bi=null,_o=0,_a=0,Yd=Zu(0),Gi=0,gg=null,fh=0,Ux=0,hS=0,jm=null,oa=null,dS=0,Cp=1/0,xl=null,Q_=!1,AE=null,Bu=null,Zv=!1,Au=null,ex=0,Vm=0,ME=null,g_=-1,y_=0;function Go(){return(fr&6)!==0?Pi():g_!==-1?g_:g_=Pi()}function Fu(e){return(e.mode&1)===0?1:(fr&2)!==0&&_o!==0?_o&-_o:q6.transition!==null?(y_===0&&(y_=SR()),y_):(e=Fr,e!==0||(e=window.event,e=e===void 0?16:DR(e.type)),e)}function xs(e,t,n,r){if(50<Vm)throw Vm=0,ME=null,Error(Ht(185));Mg(e,n,r),((fr&2)===0||e!==oo)&&(e===oo&&((fr&2)===0&&(Ux|=n),Gi===4&&ku(e,_o)),ha(e,r),n===1&&fr===0&&(t.mode&1)===0&&(Cp=Pi()+500,zx&&Xu()))}function ha(e,t){var n=e.callbackNode;qN(e,t);var r=B_(e,e===oo?_o:0);if(r===0)n!==null&&LA(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&LA(n),t===1)e.tag===0?G6(kM.bind(null,e)):YR(kM.bind(null,e)),V6(function(){(fr&6)===0&&Xu()}),n=null;else{switch(kR(r)){case 1:n=FC;break;case 4:n=ER;break;case 16:n=z_;break;case 536870912:n=CR;break;default:n=z_}n=KL(n,$L.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $L(e,t){if(g_=-1,y_=0,(fr&6)!==0)throw Error(Ht(327));var n=e.callbackNode;if(up()&&e.callbackNode!==n)return null;var r=B_(e,e===oo?_o:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=tx(e,r);else{t=r;var a=fr;fr|=2;var c=WL();(oo!==e||_o!==t)&&(xl=null,Cp=Pi()+500,sh(e,t));do try{p9();break}catch(o){HL(e,o)}while(1);YC(),J_.current=c,fr=a,Bi!==null?t=0:(oo=null,_o=0,t=Gi)}if(t!==0){if(t===2&&(a=nE(e),a!==0&&(r=a,t=IE(e,a))),t===1)throw n=gg,sh(e,0),ku(e,r),ha(e,Pi()),n;if(t===6)ku(e,r);else{if(a=e.current.alternate,(r&30)===0&&!h9(a)&&(t=tx(e,r),t===2&&(c=nE(e),c!==0&&(r=c,t=IE(e,c))),t===1))throw n=gg,sh(e,0),ku(e,r),ha(e,Pi()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Ht(345));case 2:qc(e,oa,xl);break;case 3:if(ku(e,r),(r&130023424)===r&&(t=dS+500-Pi(),10<t)){if(B_(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Go(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=cE(qc.bind(null,e,oa,xl),t);break}qc(e,oa,xl);break;case 4:if(ku(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var d=31-_s(r);c=1<<d,d=t[d],d>a&&(a=d),r&=~c}if(r=a,r=Pi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c9(r/1960))-r,10<r){e.timeoutHandle=cE(qc.bind(null,e,oa,xl),r);break}qc(e,oa,xl);break;case 5:qc(e,oa,xl);break;default:throw Error(Ht(329))}}}return ha(e,Pi()),e.callbackNode===n?$L.bind(null,e):null}function IE(e,t){var n=jm;return e.current.memoizedState.isDehydrated&&(sh(e,t).flags|=256),e=tx(e,t),e!==2&&(t=oa,oa=n,t!==null&&PE(t)),e}function PE(e){oa===null?oa=e:oa.push.apply(oa,e)}function h9(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],c=a.getSnapshot;a=a.value;try{if(!Es(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ku(e,t){for(t&=~hS,t&=~Ux,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_s(t),r=1<<n;e[n]=-1,t&=~r}}function kM(e){if((fr&6)!==0)throw Error(Ht(327));up();var t=B_(e,0);if((t&1)===0)return ha(e,Pi()),null;var n=tx(e,t);if(e.tag!==0&&n===2){var r=nE(e);r!==0&&(t=r,n=IE(e,r))}if(n===1)throw n=gg,sh(e,0),ku(e,t),ha(e,Pi()),n;if(n===6)throw Error(Ht(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qc(e,oa,xl),ha(e,Pi()),null}function pS(e,t){var n=fr;fr|=1;try{return e(t)}finally{fr=n,fr===0&&(Cp=Pi()+500,zx&&Xu())}}function mh(e){Au!==null&&Au.tag===0&&(fr&6)===0&&up();var t=fr;fr|=1;var n=qa.transition,r=Fr;try{if(qa.transition=null,Fr=1,e)return e()}finally{Fr=r,qa.transition=n,fr=t,(fr&6)===0&&Xu()}}function fS(){_a=Yd.current,Yr(Yd)}function sh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,j6(n)),Bi!==null)for(n=Bi.return;n!==null;){var r=n;switch(ZC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&V_();break;case 3:wp(),Yr(ua),Yr(Fo),rS();break;case 5:nS(r);break;case 4:wp();break;case 13:Yr(di);break;case 19:Yr(di);break;case 10:JC(r.type._context);break;case 22:case 23:fS()}n=n.return}if(oo=e,Bi=e=Nu(e.current,null),_o=_a=t,Gi=0,gg=null,hS=Ux=fh=0,oa=jm=null,nh!==null){for(t=0;t<nh.length;t++)if(n=nh[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,c=n.pending;if(c!==null){var d=c.next;c.next=a,r.next=d}n.pending=r}nh=null}return e}function HL(e,t){do{var n=Bi;try{if(YC(),p_.current=Y_,K_){for(var r=fi.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}K_=!1}if(ph=0,ro=Wi=fi=null,Nm=!1,pg=0,cS.current=null,n===null||n.return===null){Gi=1,gg=t,Bi=null;break}e:{var c=e,d=n.return,o=n,v=t;if(t=_o,o.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var C=v,I=o,D=I.tag;if((I.mode&1)===0&&(D===0||D===11||D===15)){var F=I.alternate;F?(I.updateQueue=F.updateQueue,I.memoizedState=F.memoizedState,I.lanes=F.lanes):(I.updateQueue=null,I.memoizedState=null)}var U=pM(d);if(U!==null){U.flags&=-257,fM(U,d,o,c,t),U.mode&1&&dM(c,C,t),t=U,v=C;var j=t.updateQueue;if(j===null){var T=new Set;T.add(v),t.updateQueue=T}else j.add(v);break e}else{if((t&1)===0){dM(c,C,t),mS();break e}v=Error(Ht(426))}}else if(ii&&o.mode&1){var H=pM(d);if(H!==null){(H.flags&65536)===0&&(H.flags|=256),fM(H,d,o,c,t),XC(Ep(v,o));break e}}c=v=Ep(v,o),Gi!==4&&(Gi=2),jm===null?jm=[c]:jm.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var N=TL(c,v,t);oM(c,N);break e;case 1:o=v;var q=c.type,z=c.stateNode;if((c.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Bu===null||!Bu.has(z)))){c.flags|=65536,t&=-t,c.lanes|=t;var B=AL(c,o,t);oM(c,B);break e}}c=c.return}while(c!==null)}qL(n)}catch(k){t=k,Bi===n&&n!==null&&(Bi=n=n.return);continue}break}while(1)}function WL(){var e=J_.current;return J_.current=Y_,e===null?Y_:e}function mS(){(Gi===0||Gi===3||Gi===2)&&(Gi=4),oo===null||(fh&268435455)===0&&(Ux&268435455)===0||ku(oo,_o)}function tx(e,t){var n=fr;fr|=2;var r=WL();(oo!==e||_o!==t)&&(xl=null,sh(e,t));do try{d9();break}catch(a){HL(e,a)}while(1);if(YC(),fr=n,J_.current=r,Bi!==null)throw Error(Ht(261));return oo=null,_o=0,Gi}function d9(){for(;Bi!==null;)GL(Bi)}function p9(){for(;Bi!==null&&!FN();)GL(Bi)}function GL(e){var t=XL(e.alternate,e,_a);e.memoizedProps=e.pendingProps,t===null?qL(e):Bi=t,cS.current=null}function qL(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=o9(n,t,_a),n!==null){Bi=n;return}}else{if(n=a9(n,t),n!==null){n.flags&=32767,Bi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Gi=6,Bi=null;return}}if(t=t.sibling,t!==null){Bi=t;return}Bi=t=e}while(t!==null);Gi===0&&(Gi=5)}function qc(e,t,n){var r=Fr,a=qa.transition;try{qa.transition=null,Fr=1,f9(e,t,n,r)}finally{qa.transition=a,Fr=r}return null}function f9(e,t,n,r){do up();while(Au!==null);if((fr&6)!==0)throw Error(Ht(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ht(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(ZN(e,c),e===oo&&(Bi=oo=null,_o=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Zv||(Zv=!0,KL(z_,function(){return up(),null})),c=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||c){c=qa.transition,qa.transition=null;var d=Fr;Fr=1;var o=fr;fr|=4,cS.current=null,l9(e,n),jL(n,e),L6(lE),F_=!!sE,lE=sE=null,e.current=n,u9(n),NN(),fr=o,Fr=d,qa.transition=c}else e.current=n;if(Zv&&(Zv=!1,Au=e,ex=a),c=e.pendingLanes,c===0&&(Bu=null),VN(n.stateNode),ha(e,Pi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Q_)throw Q_=!1,e=AE,AE=null,e;return(ex&1)!==0&&e.tag!==0&&up(),c=e.pendingLanes,(c&1)!==0?e===ME?Vm++:(Vm=0,ME=e):Vm=0,Xu(),null}function up(){if(Au!==null){var e=kR(ex),t=qa.transition,n=Fr;try{if(qa.transition=null,Fr=16>e?16:e,Au===null)var r=!1;else{if(e=Au,Au=null,ex=0,(fr&6)!==0)throw Error(Ht(331));var a=fr;for(fr|=4,cn=e.current;cn!==null;){var c=cn,d=c.child;if((cn.flags&16)!==0){var o=c.deletions;if(o!==null){for(var v=0;v<o.length;v++){var C=o[v];for(cn=C;cn!==null;){var I=cn;switch(I.tag){case 0:case 11:case 15:Um(8,I,c)}var D=I.child;if(D!==null)D.return=I,cn=D;else for(;cn!==null;){I=cn;var F=I.sibling,U=I.return;if(FL(I),I===C){cn=null;break}if(F!==null){F.return=U,cn=F;break}cn=U}}}var j=c.alternate;if(j!==null){var T=j.child;if(T!==null){j.child=null;do{var H=T.sibling;T.sibling=null,T=H}while(T!==null)}}cn=c}}if((c.subtreeFlags&2064)!==0&&d!==null)d.return=c,cn=d;else e:for(;cn!==null;){if(c=cn,(c.flags&2048)!==0)switch(c.tag){case 0:case 11:case 15:Um(9,c,c.return)}var N=c.sibling;if(N!==null){N.return=c.return,cn=N;break e}cn=c.return}}var q=e.current;for(cn=q;cn!==null;){d=cn;var z=d.child;if((d.subtreeFlags&2064)!==0&&z!==null)z.return=d,cn=z;else e:for(d=q;cn!==null;){if(o=cn,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:Nx(9,o)}}catch(k){Ei(o,o.return,k)}if(o===d){cn=null;break e}var B=o.sibling;if(B!==null){B.return=o.return,cn=B;break e}cn=o.return}}if(fr=a,Xu(),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(Px,e)}catch{}r=!0}return r}finally{Fr=n,qa.transition=t}}return!1}function TM(e,t,n){t=Ep(n,t),t=TL(e,t,1),e=zu(e,t,1),t=Go(),e!==null&&(Mg(e,1,t),ha(e,t))}function Ei(e,t,n){if(e.tag===3)TM(e,e,n);else for(;t!==null;){if(t.tag===3){TM(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bu===null||!Bu.has(r))){e=Ep(n,e),e=AL(t,e,1),t=zu(t,e,1),e=Go(),t!==null&&(Mg(t,1,e),ha(t,e));break}}t=t.return}}function m9(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Go(),e.pingedLanes|=e.suspendedLanes&n,oo===e&&(_o&n)===n&&(Gi===4||Gi===3&&(_o&130023424)===_o&&500>Pi()-dS?sh(e,0):hS|=n),ha(e,t)}function ZL(e,t){t===0&&((e.mode&1)===0?t=1:(t=Fv,Fv<<=1,(Fv&130023424)===0&&(Fv=4194304)));var n=Go();e=Pl(e,t),e!==null&&(Mg(e,t,n),ha(e,n))}function g9(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ZL(e,n)}function y9(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ht(314))}r!==null&&r.delete(t),ZL(e,n)}var XL;XL=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ua.current)sa=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return sa=!1,i9(e,t,n);sa=(e.flags&131072)!==0}else sa=!1,ii&&(t.flags&1048576)!==0&&JR(t,W_,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;m_(e,t),e=t.pendingProps;var a=_p(t,Fo.current);lp(t,n),a=oS(null,t,r,e,a,n);var c=aS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ca(r)?(c=!0,$_(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,eS(t),a.updater=Bx,t.stateNode=a,a._reactInternals=t,yE(t,r,e,n),t=xE(null,t,r,!0,c,n)):(t.tag=0,ii&&c&&qC(t),$o(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(m_(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=_9(r),e=ms(r,e),a){case 0:t=_E(null,t,r,e,n);break e;case 1:t=yM(null,t,r,e,n);break e;case 11:t=mM(null,t,r,e,n);break e;case 14:t=gM(null,t,r,ms(r.type,e),n);break e}throw Error(Ht(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ms(r,a),_E(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ms(r,a),yM(e,t,r,a,n);case 3:e:{if(DL(t),e===null)throw Error(Ht(387));r=t.pendingProps,c=t.memoizedState,a=c.element,nL(e,t),Z_(t,r,null,n);var d=t.memoizedState;if(r=d.element,c.isDehydrated)if(c={element:r,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=Ep(Error(Ht(423)),t),t=vM(e,t,r,n,a);break e}else if(r!==a){a=Ep(Error(Ht(424)),t),t=vM(e,t,r,n,a);break e}else for(ba=Ou(t.stateNode.containerInfo.firstChild),wa=t,ii=!0,ys=null,n=aL(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xp(),r===a){t=Dl(e,t,n);break e}$o(e,t,r,n)}t=t.child}return t;case 5:return sL(t),e===null&&fE(t),r=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,d=a.children,uE(r,a)?d=null:c!==null&&uE(r,c)&&(t.flags|=32),PL(e,t),$o(e,t,d,n),t.child;case 6:return e===null&&fE(t),null;case 13:return RL(e,t,n);case 4:return tS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bp(t,null,r,n):$o(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ms(r,a),mM(e,t,r,a,n);case 7:return $o(e,t,t.pendingProps,n),t.child;case 8:return $o(e,t,t.pendingProps.children,n),t.child;case 12:return $o(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,c=t.memoizedProps,d=a.value,Wr(G_,r._currentValue),r._currentValue=d,c!==null)if(Es(c.value,d)){if(c.children===a.children&&!ua.current){t=Dl(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var o=c.dependencies;if(o!==null){d=c.child;for(var v=o.firstContext;v!==null;){if(v.context===r){if(c.tag===1){v=kl(-1,n&-n),v.tag=2;var C=c.updateQueue;if(C!==null){C=C.shared;var I=C.pending;I===null?v.next=v:(v.next=I.next,I.next=v),C.pending=v}}c.lanes|=n,v=c.alternate,v!==null&&(v.lanes|=n),mE(c.return,n,t),o.lanes|=n;break}v=v.next}}else if(c.tag===10)d=c.type===t.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(Ht(341));d.lanes|=n,o=d.alternate,o!==null&&(o.lanes|=n),mE(d,n,t),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===t){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}$o(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,lp(t,n),a=Xa(a),r=r(a),t.flags|=1,$o(e,t,r,n),t.child;case 14:return r=t.type,a=ms(r,t.pendingProps),a=ms(r.type,a),gM(e,t,r,a,n);case 15:return ML(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ms(r,a),m_(e,t),t.tag=1,ca(r)?(e=!0,$_(t)):e=!1,lp(t,n),iL(t,r,a),yE(t,r,a,n),xE(null,t,r,!0,e,n);case 19:return LL(e,t,n);case 22:return IL(e,t,n)}throw Error(Ht(156,t.tag))};function KL(e,t){return wR(e,t)}function v9(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ga(e,t,n,r){return new v9(e,t,n,r)}function gS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _9(e){if(typeof e=="function")return gS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===OC)return 11;if(e===zC)return 14}return 2}function Nu(e,t){var n=e.alternate;return n===null?(n=Ga(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function v_(e,t,n,r,a,c){var d=2;if(r=e,typeof e=="function")gS(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case jd:return lh(n.children,a,c,t);case LC:d=8,a|=8;break;case jw:return e=Ga(12,n,t,a|2),e.elementType=jw,e.lanes=c,e;case Vw:return e=Ga(13,n,t,a),e.elementType=Vw,e.lanes=c,e;case $w:return e=Ga(19,n,t,a),e.elementType=$w,e.lanes=c,e;case oR:return jx(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rR:d=10;break e;case iR:d=9;break e;case OC:d=11;break e;case zC:d=14;break e;case Eu:d=16,r=null;break e}throw Error(Ht(130,e==null?e:typeof e,""))}return t=Ga(d,n,t,a),t.elementType=e,t.type=r,t.lanes=c,t}function lh(e,t,n,r){return e=Ga(7,e,r,t),e.lanes=n,e}function jx(e,t,n,r){return e=Ga(22,e,r,t),e.elementType=oR,e.lanes=n,e.stateNode={isHidden:!1},e}function jb(e,t,n){return e=Ga(6,e,null,t),e.lanes=n,e}function Vb(e,t,n){return t=Ga(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function x9(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wb(0),this.expirationTimes=wb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wb(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function yS(e,t,n,r,a,c,d,o,v){return e=new x9(e,t,n,o,v),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Ga(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eS(c),e}function b9(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ud,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function YL(e){if(!e)return Vu;e=e._reactInternals;e:{if(Eh(e)!==e||e.tag!==1)throw Error(Ht(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ca(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ht(171))}if(e.tag===1){var n=e.type;if(ca(n))return KR(e,n,t)}return t}function JL(e,t,n,r,a,c,d,o,v){return e=yS(n,r,!0,e,a,c,d,o,v),e.context=YL(null),n=e.current,r=Go(),a=Fu(n),c=kl(r,a),c.callback=t!=null?t:null,zu(n,c,a),e.current.lanes=a,Mg(e,a,r),ha(e,r),e}function Vx(e,t,n,r){var a=t.current,c=Go(),d=Fu(a);return n=YL(n),t.context===null?t.context=n:t.pendingContext=n,t=kl(c,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zu(a,t,d),e!==null&&(xs(e,a,d,c),d_(e,a,d)),d}function nx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function AM(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vS(e,t){AM(e,t),(e=e.alternate)&&AM(e,t)}function w9(){return null}var QL=typeof reportError=="function"?reportError:function(e){console.error(e)};function _S(e){this._internalRoot=e}$x.prototype.render=_S.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ht(409));Vx(e,t,null,null)};$x.prototype.unmount=_S.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mh(function(){Vx(null,e,null,null)}),t[Il]=null}};function $x(e){this._internalRoot=e}$x.prototype.unstable_scheduleHydration=function(e){if(e){var t=MR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Su.length&&t!==0&&t<Su[n].priority;n++);Su.splice(n,0,e),n===0&&PR(e)}};function xS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function MM(){}function E9(e,t,n,r,a){if(a){if(typeof r=="function"){var c=r;r=function(){var C=nx(d);c.call(C)}}var d=JL(t,r,e,0,null,!1,!1,"",MM);return e._reactRootContainer=d,e[Il]=d.current,lg(e.nodeType===8?e.parentNode:e),mh(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var C=nx(v);o.call(C)}}var v=yS(e,0,!1,null,null,!1,!1,"",MM);return e._reactRootContainer=v,e[Il]=v.current,lg(e.nodeType===8?e.parentNode:e),mh(function(){Vx(t,v,n,r)}),v}function Wx(e,t,n,r,a){var c=n._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var o=a;a=function(){var v=nx(d);o.call(v)}}Vx(t,d,e,a)}else d=E9(n,t,e,a,r);return nx(d)}TR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pm(t.pendingLanes);n!==0&&(NC(t,n|1),ha(t,Pi()),(fr&6)===0&&(Cp=Pi()+500,Xu()))}break;case 13:mh(function(){var r=Pl(e,1);if(r!==null){var a=Go();xs(r,e,1,a)}}),vS(e,1)}};UC=function(e){if(e.tag===13){var t=Pl(e,134217728);if(t!==null){var n=Go();xs(t,e,134217728,n)}vS(e,134217728)}};AR=function(e){if(e.tag===13){var t=Fu(e),n=Pl(e,t);if(n!==null){var r=Go();xs(n,e,t,r)}vS(e,t)}};MR=function(){return Fr};IR=function(e,t){var n=Fr;try{return Fr=e,t()}finally{Fr=n}};Qw=function(e,t,n){switch(t){case"input":if(Gw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Ox(r);if(!a)throw Error(Ht(90));sR(r),Gw(r,a)}}}break;case"textarea":uR(e,n);break;case"select":t=n.value,t!=null&&ip(e,!!n.multiple,t,!1)}};gR=pS;yR=mh;var C9={usingClientEntryPoint:!1,Events:[Pg,Wd,Ox,fR,mR,pS]},vm={findFiberByHostInstance:th,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},S9={bundleType:vm.bundleType,version:vm.version,rendererPackageName:vm.rendererPackageName,rendererConfig:vm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xR(e),e===null?null:e.stateNode},findFiberByHostInstance:vm.findFiberByHostInstance||w9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Xv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xv.isDisabled&&Xv.supportsFiber)try{Px=Xv.inject(S9),Ks=Xv}catch{}}Ta.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C9;Ta.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xS(t))throw Error(Ht(200));return b9(e,t,null,n)};Ta.createRoot=function(e,t){if(!xS(e))throw Error(Ht(299));var n=!1,r="",a=QL;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=yS(e,1,!1,null,null,n,!1,r,a),e[Il]=t.current,lg(e.nodeType===8?e.parentNode:e),new _S(t)};Ta.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ht(188)):(e=Object.keys(e).join(","),Error(Ht(268,e)));return e=xR(t),e=e===null?null:e.stateNode,e};Ta.flushSync=function(e){return mh(e)};Ta.hydrate=function(e,t,n){if(!Hx(t))throw Error(Ht(200));return Wx(null,e,t,!0,n)};Ta.hydrateRoot=function(e,t,n){if(!xS(e))throw Error(Ht(405));var r=n!=null&&n.hydratedSources||null,a=!1,c="",d=QL;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=JL(t,null,e,1,n!=null?n:null,a,!1,c,d),e[Il]=t.current,lg(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $x(t)};Ta.render=function(e,t,n){if(!Hx(t))throw Error(Ht(200));return Wx(null,e,t,!1,n)};Ta.unmountComponentAtNode=function(e){if(!Hx(e))throw Error(Ht(40));return e._reactRootContainer?(mh(function(){Wx(null,null,e,!1,function(){e._reactRootContainer=null,e[Il]=null})}),!0):!1};Ta.unstable_batchedUpdates=pS;Ta.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Hx(n))throw Error(Ht(200));if(e==null||e._reactInternals===void 0)throw Error(Ht(38));return Wx(e,t,n,!1,r)};Ta.version="18.2.0-next-9e3b772b8-20220608";function e3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e3)}catch(e){console.error(e)}}e3(),Pu.exports=Ta;var Kv=Pu.exports,t3,IM=Pu.exports;t3=IM.createRoot,IM.hydrateRoot;function st(){return st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},st.apply(this,arguments)}var ih;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ih||(ih={}));var PM=function(e){return e},DM="beforeunload",k9="popstate";function T9(e){e===void 0&&(e={});var t=e,n=t.window,r=n===void 0?document.defaultView:n,a=r.history;function c(){var R=r.location,J=R.pathname,ie=R.search,ue=R.hash,se=a.state||{};return[se.idx,PM({pathname:J,search:ie,hash:ue,state:se.usr||null,key:se.key||"default"})]}var d=null;function o(){if(d)U.call(d),d=null;else{var R=ih.Pop,J=c(),ie=J[0],ue=J[1];if(U.length){if(ie!=null){var se=I-ie;se&&(d={action:R,location:ue,retry:function(){k(se*-1)}},k(se))}}else q(R)}}r.addEventListener(k9,o);var v=ih.Pop,C=c(),I=C[0],D=C[1],F=LM(),U=LM();I==null&&(I=0,a.replaceState(st({},a.state,{idx:I}),""));function j(R){return typeof R=="string"?R:DE(R)}function T(R,J){return J===void 0&&(J=null),PM(st({pathname:D.pathname,hash:"",search:""},typeof R=="string"?Ch(R):R,{state:J,key:A9()}))}function H(R,J){return[{usr:R.state,key:R.key,idx:J},j(R)]}function N(R,J,ie){return!U.length||(U.call({action:R,location:J,retry:ie}),!1)}function q(R){v=R;var J=c();I=J[0],D=J[1],F.call({action:v,location:D})}function z(R,J){var ie=ih.Push,ue=T(R,J);function se(){z(R,J)}if(N(ie,ue,se)){var _e=H(ue,I+1),Ue=_e[0],je=_e[1];try{a.pushState(Ue,"",je)}catch{r.location.assign(je)}q(ie)}}function B(R,J){var ie=ih.Replace,ue=T(R,J);function se(){B(R,J)}if(N(ie,ue,se)){var _e=H(ue,I),Ue=_e[0],je=_e[1];a.replaceState(Ue,"",je),q(ie)}}function k(R){a.go(R)}var w={get action(){return v},get location(){return D},createHref:j,push:z,replace:B,go:k,back:function(){k(-1)},forward:function(){k(1)},listen:function(J){return F.push(J)},block:function(J){var ie=U.push(J);return U.length===1&&r.addEventListener(DM,RM),function(){ie(),U.length||r.removeEventListener(DM,RM)}}};return w}function RM(e){e.preventDefault(),e.returnValue=""}function LM(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(r){return r!==n})}},call:function(n){e.forEach(function(r){return r&&r(n)})}}}function A9(){return Math.random().toString(36).substr(2,8)}function DE(e){var t=e.pathname,n=t===void 0?"/":t,r=e.search,a=r===void 0?"":r,c=e.hash,d=c===void 0?"":c;return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),d&&d!=="#"&&(n+=d.charAt(0)==="#"?d:"#"+d),n}function Ch(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const bS=m.exports.createContext(null),wS=m.exports.createContext(null),Rg=m.exports.createContext({outlet:null,matches:[]});function Qs(e,t){if(!e)throw new Error(t)}function M9(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Ch(t):t,a=i3(r.pathname||"/",n);if(a==null)return null;let c=n3(e);I9(c);let d=null;for(let o=0;d==null&&o<c.length;++o)d=N9(c[o],a);return d}function n3(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((a,c)=>{let d={relativePath:a.path||"",caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(d.relativePath.startsWith(r)||Qs(!1),d.relativePath=d.relativePath.slice(r.length));let o=Uu([r,d.relativePath]),v=n.concat(d);a.children&&a.children.length>0&&(a.index===!0&&Qs(!1),n3(a.children,t,v,o)),!(a.path==null&&!a.index)&&t.push({path:o,score:B9(o,a.index),routesMeta:v})}),t}function I9(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:F9(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const P9=/^:\w+$/,D9=3,R9=2,L9=1,O9=10,z9=-2,OM=e=>e==="*";function B9(e,t){let n=e.split("/"),r=n.length;return n.some(OM)&&(r+=z9),t&&(r+=R9),n.filter(a=>!OM(a)).reduce((a,c)=>a+(P9.test(c)?D9:c===""?L9:O9),r)}function F9(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function N9(e,t){let{routesMeta:n}=e,r={},a="/",c=[];for(let d=0;d<n.length;++d){let o=n[d],v=d===n.length-1,C=a==="/"?t:t.slice(a.length)||"/",I=U9({path:o.relativePath,caseSensitive:o.caseSensitive,end:v},C);if(!I)return null;Object.assign(r,I.params);let D=o.route;c.push({params:r,pathname:Uu([a,I.pathname]),pathnameBase:o3(Uu([a,I.pathnameBase])),route:D}),I.pathnameBase!=="/"&&(a=Uu([a,I.pathnameBase]))}return c}function U9(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=j9(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let c=a[0],d=c.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((C,I,D)=>{if(I==="*"){let F=o[D]||"";d=c.slice(0,c.length-F.length).replace(/(.)\/+$/,"$1")}return C[I]=V9(o[D]||""),C},{}),pathname:c,pathnameBase:d,pattern:e}}function j9(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(d,o)=>(r.push(o),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(a,t?void 0:"i"),r]}function V9(e,t){try{return decodeURIComponent(e)}catch{return e}}function $9(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Ch(e):e;return{pathname:n?n.startsWith("/")?n:H9(n,t):t,search:G9(r),hash:q9(a)}}function H9(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function r3(e,t,n){let r=typeof e=="string"?Ch(e):e,a=e===""||r.pathname===""?"/":r.pathname,c;if(a==null)c=n;else{let o=t.length-1;if(a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),o-=1;r.pathname=v.join("/")}c=o>=0?t[o]:"/"}let d=$9(r,c);return a&&a!=="/"&&a.endsWith("/")&&!d.pathname.endsWith("/")&&(d.pathname+="/"),d}function W9(e){return e===""||e.pathname===""?"/":typeof e=="string"?Ch(e).pathname:e.pathname}function i3(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&n!=="/"?null:e.slice(t.length)||"/"}const Uu=e=>e.join("/").replace(/\/\/+/g,"/"),o3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,q9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Z9(e){Lg()||Qs(!1);let{basename:t,navigator:n}=m.exports.useContext(bS),{hash:r,pathname:a,search:c}=ES(e),d=a;if(t!=="/"){let o=W9(e),v=o!=null&&o.endsWith("/");d=a==="/"?t+(v?"/":""):Uu([t,a])}return n.createHref({pathname:d,search:c,hash:r})}function Lg(){return m.exports.useContext(wS)!=null}function Rp(){return Lg()||Qs(!1),m.exports.useContext(wS).location}function Si(){Lg()||Qs(!1);let{basename:e,navigator:t}=m.exports.useContext(bS),{matches:n}=m.exports.useContext(Rg),{pathname:r}=Rp(),a=JSON.stringify(n.map(o=>o.pathnameBase)),c=m.exports.useRef(!1);return m.exports.useEffect(()=>{c.current=!0}),m.exports.useCallback(function(o,v){if(v===void 0&&(v={}),!c.current)return;if(typeof o=="number"){t.go(o);return}let C=r3(o,JSON.parse(a),r);e!=="/"&&(C.pathname=Uu([e,C.pathname])),(v.replace?t.replace:t.push)(C,v.state)},[e,t,a,r])}function Og(){let{matches:e}=m.exports.useContext(Rg),t=e[e.length-1];return t?t.params:{}}function ES(e){let{matches:t}=m.exports.useContext(Rg),{pathname:n}=Rp(),r=JSON.stringify(t.map(a=>a.pathnameBase));return m.exports.useMemo(()=>r3(e,JSON.parse(r),n),[e,r,n])}function X9(e,t){Lg()||Qs(!1);let{matches:n}=m.exports.useContext(Rg),r=n[n.length-1],a=r?r.params:{};r&&r.pathname;let c=r?r.pathnameBase:"/";r&&r.route;let d=Rp(),o;if(t){var v;let F=typeof t=="string"?Ch(t):t;c==="/"||((v=F.pathname)==null?void 0:v.startsWith(c))||Qs(!1),o=F}else o=d;let C=o.pathname||"/",I=c==="/"?C:C.slice(c.length)||"/",D=M9(e,{pathname:I});return K9(D&&D.map(F=>Object.assign({},F,{params:Object.assign({},a,F.params),pathname:Uu([c,F.pathname]),pathnameBase:F.pathnameBase==="/"?c:Uu([c,F.pathnameBase])})),n)}function K9(e,t){return t===void 0&&(t=[]),e==null?null:e.reduceRight((n,r,a)=>m.exports.createElement(Rg.Provider,{children:r.route.element!==void 0?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}}),null)}function Li(e){Qs(!1)}function Y9(e){let{basename:t="/",children:n=null,location:r,navigationType:a=ih.Pop,navigator:c,static:d=!1}=e;Lg()&&Qs(!1);let o=o3(t),v=m.exports.useMemo(()=>({basename:o,navigator:c,static:d}),[o,c,d]);typeof r=="string"&&(r=Ch(r));let{pathname:C="/",search:I="",hash:D="",state:F=null,key:U="default"}=r,j=m.exports.useMemo(()=>{let T=i3(C,o);return T==null?null:{pathname:T,search:I,hash:D,state:F,key:U}},[o,C,I,D,F,U]);return j==null?null:m.exports.createElement(bS.Provider,{value:v},m.exports.createElement(wS.Provider,{children:n,value:{location:j,navigationType:a}}))}function J9(e){let{children:t,location:n}=e;return X9(RE(t),n)}function RE(e){let t=[];return m.exports.Children.forEach(e,n=>{if(!m.exports.isValidElement(n))return;if(n.type===m.exports.Fragment){t.push.apply(t,RE(n.props.children));return}n.type!==Li&&Qs(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=RE(n.props.children)),t.push(r)}),t}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rx(){return rx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rx.apply(this,arguments)}function a3(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,c;for(c=0;c<r.length;c++)a=r[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}const Q9=["onClick","reloadDocument","replace","state","target","to"],eU=["aria-current","caseSensitive","className","end","style","to","children"];function tU(e){let{basename:t,children:n,window:r}=e,a=m.exports.useRef();a.current==null&&(a.current=T9({window:r}));let c=a.current,[d,o]=m.exports.useState({action:c.action,location:c.location});return m.exports.useLayoutEffect(()=>c.listen(o),[c]),m.exports.createElement(Y9,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:c})}function nU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const Yt=m.exports.forwardRef(function(t,n){let{onClick:r,reloadDocument:a,replace:c=!1,state:d,target:o,to:v}=t,C=a3(t,Q9),I=Z9(v),D=iU(v,{replace:c,state:d,target:o});function F(U){r&&r(U),!U.defaultPrevented&&!a&&D(U)}return m.exports.createElement("a",rx({},C,{href:I,onClick:F,ref:n,target:o}))}),rU=m.exports.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:c="",end:d=!1,style:o,to:v,children:C}=t,I=a3(t,eU),D=Rp(),F=ES(v),U=D.pathname,j=F.pathname;a||(U=U.toLowerCase(),j=j.toLowerCase());let T=U===j||!d&&U.startsWith(j)&&U.charAt(j.length)==="/",H=T?r:void 0,N;typeof c=="function"?N=c({isActive:T}):N=[c,T?"active":null].filter(Boolean).join(" ");let q=typeof o=="function"?o({isActive:T}):o;return m.exports.createElement(Yt,rx({},I,{"aria-current":H,className:N,ref:n,style:q,to:v}),typeof C=="function"?C({isActive:T}):C)});function iU(e,t){let{target:n,replace:r,state:a}=t===void 0?{}:t,c=Si(),d=Rp(),o=ES(e);return m.exports.useCallback(v=>{if(v.button===0&&(!n||n==="_self")&&!nU(v)){v.preventDefault();let C=!!r||DE(d)===DE(o);c(e,{replace:C,state:a})}},[d,c,o,r,a,n,e])}const _m=()=>localStorage.getItem("token"),oU=e=>{localStorage.setItem("token",e)},aU=()=>localStorage.getItem("refresh"),s3=e=>{localStorage.setItem("refresh",e)},go=()=>!!localStorage.getItem("token"),sU=()=>{localStorage.removeItem("token"),localStorage.removeItem("refresh")};function LE(e){this.message=e}LE.prototype=new Error,LE.prototype.name="InvalidCharacterError";var zM=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new LE("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,a=0,c=0,d="";r=t.charAt(c++);~r&&(n=a%4?64*n+r:r,a++%4)?d+=String.fromCharCode(255&n>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return d};function lU(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(zM(n).replace(/(.)/g,function(r,a){var c=a.charCodeAt(0).toString(16).toUpperCase();return c.length<2&&(c="0"+c),"%"+c}))}(t)}catch{return zM(t)}}function ix(e){this.message=e}function uU(e,t){if(typeof e!="string")throw new ix("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(lU(e.split(".")[n]))}catch(r){throw new ix("Invalid token specified: "+r.message)}}ix.prototype=new Error,ix.prototype.name="InvalidTokenError";function l3(e,t){return function(){return e.apply(t,arguments)}}const{toString:u3}=Object.prototype,{getPrototypeOf:CS}=Object,SS=(e=>t=>{const n=u3.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),zl=e=>(e=e.toLowerCase(),t=>SS(t)===e),Gx=e=>t=>typeof t===e,{isArray:Lp}=Array,yg=Gx("undefined");function cU(e){return e!==null&&!yg(e)&&e.constructor!==null&&!yg(e.constructor)&&gh(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const c3=zl("ArrayBuffer");function hU(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&c3(e.buffer),t}const dU=Gx("string"),gh=Gx("function"),h3=Gx("number"),kS=e=>e!==null&&typeof e=="object",pU=e=>e===!0||e===!1,__=e=>{if(SS(e)!=="object")return!1;const t=CS(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},fU=zl("Date"),mU=zl("File"),gU=zl("Blob"),yU=zl("FileList"),vU=e=>kS(e)&&gh(e.pipe),_U=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||u3.call(e)===t||gh(e.toString)&&e.toString()===t)},xU=zl("URLSearchParams"),bU=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zg(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e=="undefined")return;let r,a;if(typeof e!="object"&&(e=[e]),Lp(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{const c=n?Object.getOwnPropertyNames(e):Object.keys(e),d=c.length;let o;for(r=0;r<d;r++)o=c[r],t.call(null,e[o],o,e)}}function d3(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const p3=typeof self=="undefined"?typeof global=="undefined"?globalThis:global:self,f3=e=>!yg(e)&&e!==p3;function OE(){const{caseless:e}=f3(this)&&this||{},t={},n=(r,a)=>{const c=e&&d3(t,a)||a;__(t[c])&&__(r)?t[c]=OE(t[c],r):__(r)?t[c]=OE({},r):Lp(r)?t[c]=r.slice():t[c]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&zg(arguments[r],n);return t}const wU=(e,t,n,{allOwnKeys:r}={})=>(zg(t,(a,c)=>{n&&gh(a)?e[c]=l3(a,n):e[c]=a},{allOwnKeys:r}),e),EU=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),CU=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},SU=(e,t,n,r)=>{let a,c,d;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),c=a.length;c-- >0;)d=a[c],(!r||r(d,e,t))&&!o[d]&&(t[d]=e[d],o[d]=!0);e=n!==!1&&CS(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kU=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},TU=e=>{if(!e)return null;if(Lp(e))return e;let t=e.length;if(!h3(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},AU=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&CS(Uint8Array)),MU=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=r.next())&&!a.done;){const c=a.value;t.call(e,c[0],c[1])}},IU=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},PU=zl("HTMLFormElement"),DU=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),BM=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),RU=zl("RegExp"),m3=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};zg(n,(a,c)=>{t(a,c,e)!==!1&&(r[c]=a)}),Object.defineProperties(e,r)},LU=e=>{m3(e,(t,n)=>{if(gh(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(!!gh(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},OU=(e,t)=>{const n={},r=a=>{a.forEach(c=>{n[c]=!0})};return Lp(e)?r(e):r(String(e).split(t)),n},zU=()=>{},BU=(e,t)=>(e=+e,Number.isFinite(e)?e:t),FU=e=>{const t=new Array(10),n=(r,a)=>{if(kS(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[a]=r;const c=Lp(r)?[]:{};return zg(r,(d,o)=>{const v=n(d,a+1);!yg(v)&&(c[o]=v)}),t[a]=void 0,c}}return r};return n(e,0)};var Pt={isArray:Lp,isArrayBuffer:c3,isBuffer:cU,isFormData:_U,isArrayBufferView:hU,isString:dU,isNumber:h3,isBoolean:pU,isObject:kS,isPlainObject:__,isUndefined:yg,isDate:fU,isFile:mU,isBlob:gU,isRegExp:RU,isFunction:gh,isStream:vU,isURLSearchParams:xU,isTypedArray:AU,isFileList:yU,forEach:zg,merge:OE,extend:wU,trim:bU,stripBOM:EU,inherits:CU,toFlatObject:SU,kindOf:SS,kindOfTest:zl,endsWith:kU,toArray:TU,forEachEntry:MU,matchAll:IU,isHTMLForm:PU,hasOwnProperty:BM,hasOwnProp:BM,reduceDescriptors:m3,freezeMethods:LU,toObjectSet:OU,toCamelCase:DU,noop:zU,toFiniteNumber:BU,findKey:d3,global:p3,isContextDefined:f3,toJSONObject:FU};function pr(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}Pt.inherits(pr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const g3=pr.prototype,y3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{y3[e]={value:e}});Object.defineProperties(pr,y3);Object.defineProperty(g3,"isAxiosError",{value:!0});pr.from=(e,t,n,r,a,c)=>{const d=Object.create(g3);return Pt.toFlatObject(e,d,function(v){return v!==Error.prototype},o=>o!=="isAxiosError"),pr.call(d,e.message,t,n,r,a),d.cause=e,d.name=e.name,c&&Object.assign(d,c),d};var NU=typeof self=="object"?self.FormData:window.FormData,UU=NU;function zE(e){return Pt.isPlainObject(e)||Pt.isArray(e)}function v3(e){return Pt.endsWith(e,"[]")?e.slice(0,-2):e}function FM(e,t,n){return e?e.concat(t).map(function(a,c){return a=v3(a),!n&&c?"["+a+"]":a}).join(n?".":""):t}function jU(e){return Pt.isArray(e)&&!e.some(zE)}const VU=Pt.toFlatObject(Pt,{},null,function(t){return/^is[A-Z]/.test(t)});function $U(e){return e&&Pt.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function qx(e,t,n){if(!Pt.isObject(e))throw new TypeError("target must be an object");t=t||new(UU||FormData),n=Pt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,H){return!Pt.isUndefined(H[T])});const r=n.metaTokens,a=n.visitor||I,c=n.dots,d=n.indexes,v=(n.Blob||typeof Blob!="undefined"&&Blob)&&$U(t);if(!Pt.isFunction(a))throw new TypeError("visitor must be a function");function C(j){if(j===null)return"";if(Pt.isDate(j))return j.toISOString();if(!v&&Pt.isBlob(j))throw new pr("Blob is not supported. Use a Buffer instead.");return Pt.isArrayBuffer(j)||Pt.isTypedArray(j)?v&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function I(j,T,H){let N=j;if(j&&!H&&typeof j=="object"){if(Pt.endsWith(T,"{}"))T=r?T:T.slice(0,-2),j=JSON.stringify(j);else if(Pt.isArray(j)&&jU(j)||Pt.isFileList(j)||Pt.endsWith(T,"[]")&&(N=Pt.toArray(j)))return T=v3(T),N.forEach(function(z,B){!(Pt.isUndefined(z)||z===null)&&t.append(d===!0?FM([T],B,c):d===null?T:T+"[]",C(z))}),!1}return zE(j)?!0:(t.append(FM(H,T,c),C(j)),!1)}const D=[],F=Object.assign(VU,{defaultVisitor:I,convertValue:C,isVisitable:zE});function U(j,T){if(!Pt.isUndefined(j)){if(D.indexOf(j)!==-1)throw Error("Circular reference detected in "+T.join("."));D.push(j),Pt.forEach(j,function(N,q){(!(Pt.isUndefined(N)||N===null)&&a.call(t,N,Pt.isString(q)?q.trim():q,T,F))===!0&&U(N,T?T.concat(q):[q])}),D.pop()}}if(!Pt.isObject(e))throw new TypeError("data must be an object");return U(e),t}function NM(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function TS(e,t){this._pairs=[],e&&qx(e,this,t)}const _3=TS.prototype;_3.append=function(t,n){this._pairs.push([t,n])};_3.toString=function(t){const n=t?function(r){return t.call(this,r,NM)}:NM;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function HU(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function x3(e,t,n){if(!t)return e;const r=n&&n.encode||HU,a=n&&n.serialize;let c;if(a?c=a(t,n):c=Pt.isURLSearchParams(t)?t.toString():new TS(t,n).toString(r),c){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class WU{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Pt.forEach(this.handlers,function(r){r!==null&&t(r)})}}var UM=WU,b3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GU=typeof URLSearchParams!="undefined"?URLSearchParams:TS,qU=FormData;const ZU=(()=>{let e;return typeof navigator!="undefined"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"})();var Tl={isBrowser:!0,classes:{URLSearchParams:GU,FormData:qU,Blob},isStandardBrowserEnv:ZU,protocols:["http","https","file","blob","url","data"]};function XU(e,t){return qx(e,new Tl.classes.URLSearchParams,Object.assign({visitor:function(n,r,a,c){return Tl.isNode&&Pt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},t))}function KU(e){return Pt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function YU(e){const t={},n=Object.keys(e);let r;const a=n.length;let c;for(r=0;r<a;r++)c=n[r],t[c]=e[c];return t}function w3(e){function t(n,r,a,c){let d=n[c++];const o=Number.isFinite(+d),v=c>=n.length;return d=!d&&Pt.isArray(a)?a.length:d,v?(Pt.hasOwnProp(a,d)?a[d]=[a[d],r]:a[d]=r,!o):((!a[d]||!Pt.isObject(a[d]))&&(a[d]=[]),t(n,r,a[d],c)&&Pt.isArray(a[d])&&(a[d]=YU(a[d])),!o)}if(Pt.isFormData(e)&&Pt.isFunction(e.entries)){const n={};return Pt.forEachEntry(e,(r,a)=>{t(KU(r),a,n,0)}),n}return null}const JU={"Content-Type":void 0};function QU(e,t,n){if(Pt.isString(e))try{return(t||JSON.parse)(e),Pt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Zx={transitional:b3,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,c=Pt.isObject(t);if(c&&Pt.isHTMLForm(t)&&(t=new FormData(t)),Pt.isFormData(t))return a&&a?JSON.stringify(w3(t)):t;if(Pt.isArrayBuffer(t)||Pt.isBuffer(t)||Pt.isStream(t)||Pt.isFile(t)||Pt.isBlob(t))return t;if(Pt.isArrayBufferView(t))return t.buffer;if(Pt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return XU(t,this.formSerializer).toString();if((o=Pt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return qx(o?{"files[]":t}:t,v&&new v,this.formSerializer)}}return c||a?(n.setContentType("application/json",!1),QU(t)):t}],transformResponse:[function(t){const n=this.transitional||Zx.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(t&&Pt.isString(t)&&(r&&!this.responseType||a)){const d=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(o){if(d)throw o.name==="SyntaxError"?pr.from(o,pr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tl.classes.FormData,Blob:Tl.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Pt.forEach(["delete","get","head"],function(t){Zx.headers[t]={}});Pt.forEach(["post","put","patch"],function(t){Zx.headers[t]=Pt.merge(JU)});var AS=Zx;const e7=Pt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var t7=e=>{const t={};let n,r,a;return e&&e.split(`
`).forEach(function(d){a=d.indexOf(":"),n=d.substring(0,a).trim().toLowerCase(),r=d.substring(a+1).trim(),!(!n||t[n]&&e7[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t};const jM=Symbol("internals");function xm(e){return e&&String(e).trim().toLowerCase()}function x_(e){return e===!1||e==null?e:Pt.isArray(e)?e.map(x_):String(e)}function n7(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}function r7(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function VM(e,t,n,r){if(Pt.isFunction(r))return r.call(this,t,n);if(!!Pt.isString(t)){if(Pt.isString(r))return t.indexOf(r)!==-1;if(Pt.isRegExp(r))return r.test(t)}}function i7(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function o7(e,t){const n=Pt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,c,d){return this[r].call(this,t,a,c,d)},configurable:!0})})}class Xx{constructor(t){t&&this.set(t)}set(t,n,r){const a=this;function c(o,v,C){const I=xm(v);if(!I)throw new Error("header name must be a non-empty string");const D=Pt.findKey(a,I);(!D||a[D]===void 0||C===!0||C===void 0&&a[D]!==!1)&&(a[D||v]=x_(o))}const d=(o,v)=>Pt.forEach(o,(C,I)=>c(C,I,v));return Pt.isPlainObject(t)||t instanceof this.constructor?d(t,n):Pt.isString(t)&&(t=t.trim())&&!r7(t)?d(t7(t),n):t!=null&&c(n,t,r),this}get(t,n){if(t=xm(t),t){const r=Pt.findKey(this,t);if(r){const a=this[r];if(!n)return a;if(n===!0)return n7(a);if(Pt.isFunction(n))return n.call(this,a,r);if(Pt.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=xm(t),t){const r=Pt.findKey(this,t);return!!(r&&(!n||VM(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let a=!1;function c(d){if(d=xm(d),d){const o=Pt.findKey(r,d);o&&(!n||VM(r,r[o],o,n))&&(delete r[o],a=!0)}}return Pt.isArray(t)?t.forEach(c):c(t),a}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){const n=this,r={};return Pt.forEach(this,(a,c)=>{const d=Pt.findKey(r,c);if(d){n[d]=x_(a),delete n[c];return}const o=t?i7(c):String(c).trim();o!==c&&delete n[c],n[o]=x_(a),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Pt.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=t&&Pt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[jM]=this[jM]={accessors:{}}).accessors,a=this.prototype;function c(d){const o=xm(d);r[o]||(o7(a,d),r[o]=!0)}return Pt.isArray(t)?t.forEach(c):c(t),this}}Xx.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);Pt.freezeMethods(Xx.prototype);Pt.freezeMethods(Xx);var Al=Xx;function $b(e,t){const n=this||AS,r=t||n,a=Al.from(r.headers);let c=r.data;return Pt.forEach(e,function(o){c=o.call(n,c,a.normalize(),t?t.status:void 0)}),a.normalize(),c}function E3(e){return!!(e&&e.__CANCEL__)}function Bg(e,t,n){pr.call(this,e==null?"canceled":e,pr.ERR_CANCELED,t,n),this.name="CanceledError"}Pt.inherits(Bg,pr,{__CANCEL__:!0});var a7=null;function s7(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new pr("Request failed with status code "+n.status,[pr.ERR_BAD_REQUEST,pr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var l7=Tl.isStandardBrowserEnv?function(){return{write:function(n,r,a,c,d,o){const v=[];v.push(n+"="+encodeURIComponent(r)),Pt.isNumber(a)&&v.push("expires="+new Date(a).toGMTString()),Pt.isString(c)&&v.push("path="+c),Pt.isString(d)&&v.push("domain="+d),o===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function u7(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function c7(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function C3(e,t){return e&&!u7(t)?c7(e,t):t}var h7=Tl.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function a(c){let d=c;return t&&(n.setAttribute("href",d),d=n.href),n.setAttribute("href",d),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=a(window.location.href),function(d){const o=Pt.isString(d)?a(d):d;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}();function d7(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function p7(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a=0,c=0,d;return t=t!==void 0?t:1e3,function(v){const C=Date.now(),I=r[c];d||(d=C),n[a]=v,r[a]=C;let D=c,F=0;for(;D!==a;)F+=n[D++],D=D%e;if(a=(a+1)%e,a===c&&(c=(c+1)%e),C-d<t)return;const U=I&&C-I;return U?Math.round(F*1e3/U):void 0}}function $M(e,t){let n=0;const r=p7(50,250);return a=>{const c=a.loaded,d=a.lengthComputable?a.total:void 0,o=c-n,v=r(o),C=c<=d;n=c;const I={loaded:c,total:d,progress:d?c/d:void 0,bytes:o,rate:v||void 0,estimated:v&&d&&C?(d-c)/v:void 0,event:a};I[t?"download":"upload"]=!0,e(I)}}const f7=typeof XMLHttpRequest!="undefined";var m7=f7&&function(e){return new Promise(function(n,r){let a=e.data;const c=Al.from(e.headers).normalize(),d=e.responseType;let o;function v(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}Pt.isFormData(a)&&Tl.isStandardBrowserEnv&&c.setContentType(!1);let C=new XMLHttpRequest;if(e.auth){const U=e.auth.username||"",j=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";c.set("Authorization","Basic "+btoa(U+":"+j))}const I=C3(e.baseURL,e.url);C.open(e.method.toUpperCase(),x3(I,e.params,e.paramsSerializer),!0),C.timeout=e.timeout;function D(){if(!C)return;const U=Al.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),T={data:!d||d==="text"||d==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:U,config:e,request:C};s7(function(N){n(N),v()},function(N){r(N),v()},T),C=null}if("onloadend"in C?C.onloadend=D:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(D)},C.onabort=function(){!C||(r(new pr("Request aborted",pr.ECONNABORTED,e,C)),C=null)},C.onerror=function(){r(new pr("Network Error",pr.ERR_NETWORK,e,C)),C=null},C.ontimeout=function(){let j=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const T=e.transitional||b3;e.timeoutErrorMessage&&(j=e.timeoutErrorMessage),r(new pr(j,T.clarifyTimeoutError?pr.ETIMEDOUT:pr.ECONNABORTED,e,C)),C=null},Tl.isStandardBrowserEnv){const U=(e.withCredentials||h7(I))&&e.xsrfCookieName&&l7.read(e.xsrfCookieName);U&&c.set(e.xsrfHeaderName,U)}a===void 0&&c.setContentType(null),"setRequestHeader"in C&&Pt.forEach(c.toJSON(),function(j,T){C.setRequestHeader(T,j)}),Pt.isUndefined(e.withCredentials)||(C.withCredentials=!!e.withCredentials),d&&d!=="json"&&(C.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&C.addEventListener("progress",$M(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",$M(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=U=>{!C||(r(!U||U.type?new Bg(null,e,C):U),C.abort(),C=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const F=d7(I);if(F&&Tl.protocols.indexOf(F)===-1){r(new pr("Unsupported protocol "+F+":",pr.ERR_BAD_REQUEST,e));return}C.send(a||null)})};const b_={http:a7,xhr:m7};Pt.forEach(b_,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var g7={getAdapter:e=>{e=Pt.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let a=0;a<t&&(n=e[a],!(r=Pt.isString(n)?b_[n.toLowerCase()]:n));a++);if(!r)throw r===!1?new pr(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(Pt.hasOwnProp(b_,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!Pt.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:b_};function Hb(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bg}function HM(e){return Hb(e),e.headers=Al.from(e.headers),e.data=$b.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),g7.getAdapter(e.adapter||AS.adapter)(e).then(function(r){return Hb(e),r.data=$b.call(e,e.transformResponse,r),r.headers=Al.from(r.headers),r},function(r){return E3(r)||(Hb(e),r&&r.response&&(r.response.data=$b.call(e,e.transformResponse,r.response),r.response.headers=Al.from(r.response.headers))),Promise.reject(r)})}const WM=e=>e instanceof Al?e.toJSON():e;function vg(e,t){t=t||{};const n={};function r(C,I,D){return Pt.isPlainObject(C)&&Pt.isPlainObject(I)?Pt.merge.call({caseless:D},C,I):Pt.isPlainObject(I)?Pt.merge({},I):Pt.isArray(I)?I.slice():I}function a(C,I,D){if(Pt.isUndefined(I)){if(!Pt.isUndefined(C))return r(void 0,C,D)}else return r(C,I,D)}function c(C,I){if(!Pt.isUndefined(I))return r(void 0,I)}function d(C,I){if(Pt.isUndefined(I)){if(!Pt.isUndefined(C))return r(void 0,C)}else return r(void 0,I)}function o(C,I,D){if(D in t)return r(C,I);if(D in e)return r(void 0,C)}const v={url:c,method:c,data:c,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:o,headers:(C,I)=>a(WM(C),WM(I),!0)};return Pt.forEach(Object.keys(e).concat(Object.keys(t)),function(I){const D=v[I]||a,F=D(e[I],t[I],I);Pt.isUndefined(F)&&D!==o||(n[I]=F)}),n}const S3="1.2.0",MS={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{MS[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const GM={};MS.transitional=function(t,n,r){function a(c,d){return"[Axios v"+S3+"] Transitional option '"+c+"'"+d+(r?". "+r:"")}return(c,d,o)=>{if(t===!1)throw new pr(a(d," has been removed"+(n?" in "+n:"")),pr.ERR_DEPRECATED);return n&&!GM[d]&&(GM[d]=!0,console.warn(a(d," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,d,o):!0}};function y7(e,t,n){if(typeof e!="object")throw new pr("options must be an object",pr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const c=r[a],d=t[c];if(d){const o=e[c],v=o===void 0||d(o,c,e);if(v!==!0)throw new pr("option "+c+" must be "+v,pr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new pr("Unknown option "+c,pr.ERR_BAD_OPTION)}}var BE={assertOptions:y7,validators:MS};const xu=BE.validators;class ox{constructor(t){this.defaults=t,this.interceptors={request:new UM,response:new UM}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=vg(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:c}=n;r!==void 0&&BE.assertOptions(r,{silentJSONParsing:xu.transitional(xu.boolean),forcedJSONParsing:xu.transitional(xu.boolean),clarifyTimeoutError:xu.transitional(xu.boolean)},!1),a!==void 0&&BE.assertOptions(a,{encode:xu.function,serialize:xu.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d;d=c&&Pt.merge(c.common,c[n.method]),d&&Pt.forEach(["delete","get","head","post","put","patch","common"],j=>{delete c[j]}),n.headers=Al.concat(d,c);const o=[];let v=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(v=v&&T.synchronous,o.unshift(T.fulfilled,T.rejected))});const C=[];this.interceptors.response.forEach(function(T){C.push(T.fulfilled,T.rejected)});let I,D=0,F;if(!v){const j=[HM.bind(this),void 0];for(j.unshift.apply(j,o),j.push.apply(j,C),F=j.length,I=Promise.resolve(n);D<F;)I=I.then(j[D++],j[D++]);return I}F=o.length;let U=n;for(D=0;D<F;){const j=o[D++],T=o[D++];try{U=j(U)}catch(H){T.call(this,H);break}}try{I=HM.call(this,U)}catch(j){return Promise.reject(j)}for(D=0,F=C.length;D<F;)I=I.then(C[D++],C[D++]);return I}getUri(t){t=vg(this.defaults,t);const n=C3(t.baseURL,t.url);return x3(n,t.params,t.paramsSerializer)}}Pt.forEach(["delete","get","head","options"],function(t){ox.prototype[t]=function(n,r){return this.request(vg(r||{},{method:t,url:n,data:(r||{}).data}))}});Pt.forEach(["post","put","patch"],function(t){function n(r){return function(c,d,o){return this.request(vg(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:d}))}}ox.prototype[t]=n(),ox.prototype[t+"Form"]=n(!0)});var w_=ox;class IS{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(a=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](a);r._listeners=null}),this.promise.then=a=>{let c;const d=new Promise(o=>{r.subscribe(o),c=o}).then(a);return d.cancel=function(){r.unsubscribe(c)},d},t(function(c,d,o){r.reason||(r.reason=new Bg(c,d,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new IS(function(a){t=a}),cancel:t}}}var v7=IS;function _7(e){return function(n){return e.apply(null,n)}}function x7(e){return Pt.isObject(e)&&e.isAxiosError===!0}function k3(e){const t=new w_(e),n=l3(w_.prototype.request,t);return Pt.extend(n,w_.prototype,t,{allOwnKeys:!0}),Pt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return k3(vg(e,a))},n}const bo=k3(AS);bo.Axios=w_;bo.CanceledError=Bg;bo.CancelToken=v7;bo.isCancel=E3;bo.VERSION=S3;bo.toFormData=qx;bo.AxiosError=pr;bo.Cancel=bo.CanceledError;bo.all=function(t){return Promise.all(t)};bo.spread=_7;bo.isAxiosError=x7;bo.AxiosHeaders=Al;bo.formToJSON=e=>w3(Pt.isHTMLForm(e)?new FormData(e):e);bo.default=bo;var wl=bo;const vl="https://maclyonsden.com",lr={BASEURL:vl,AUTH:{LOGIN:`${vl}/api/auth/token`,REFRESH:`${vl}/api/auth/token/refresh`},POST:{USER:`${vl}/api/v3/obj/user/retrieve`,USER_UPDATE:`${vl}/api/v3/obj/user/single`,ANNOUNCEMENT:`${vl}/api/v3/announcement`},USER:`${vl}/api/v3/obj/user/retrieve`,TIMETABLE:`${vl}/api/me/timetable`,OBJECT:`${vl}/api/v3/obj`},Hr=m.exports.createContext({user:{},allUsers:[],allOrgs:[],allTags:[],setUser:e=>{},updateToken:e=>{},getAPI:(e,t)=>({}),postAPI:(e,t)=>({}),putAPI:(e,t)=>({}),patchAPI:(e,t)=>({}),refreshAuth:()=>{},logout:()=>{}}),b7=e=>{let[t,n]=m.exports.useState({});const[r,a]=m.exports.useState([]),[c,d]=m.exports.useState([]),[o,v]=m.exports.useState([]),C=Si(),I=z=>{t=z,n(z)},D=()=>{go()&&U(`${lr.USER}/${t.id}`).then(z=>{I({...t,...z.data})}).catch(z=>{N()})};m.exports.useEffect(()=>{go()&&(F(_m()),D()),U(`${lr.OBJECT}/user`).then(z=>{a(z.data.results)}).catch(z=>{}),U(`${lr.OBJECT}/organization`).then(z=>{d(z.data.results)}).catch(z=>{}),U(`${lr.OBJECT}/tag`).then(z=>{v(z.data.results)}).catch(z=>{})},[]);const F=z=>{if(oU(z),z!==""){let B=uU(z);I({...t,id:B.user_id,registertime:B.iat}),D()}else I({})};function U(z,B){B&&!go()&&C("/accounts/login");const k=_m();return wl.get(z,B?{headers:{Authorization:`Bearer ${k}`}}:{})}const j=(z,B)=>{go()||C("/accounts/login");const k=_m();return wl.post(z,B,{headers:{Authorization:`Bearer ${k}`}})},T=(z,B)=>{go()||C("/accounts/login");const k=_m();return wl.put(z,B,{headers:{Authorization:`Bearer ${k}`}})},H=(z,B)=>{const k=_m();return wl.patch(z,B,{headers:{Authorization:`Bearer ${k}`}})},N=()=>{!go()||wl.post(lr.AUTH.REFRESH,{refresh:aU()},{}).then(z=>{F(z.data.access),s3(z.data.refresh)}).catch(z=>{console.log("Refresh expired. Logging out."),q()})},q=()=>{!go()||(I({}),localStorage.removeItem("token"),localStorage.removeItem("refresh"),C("/accounts/login"))};return m.exports.createElement(Hr.Provider,{value:{user:t,allUsers:r,allOrgs:c,allTags:o,setUser:I,updateToken:F,getAPI:U,postAPI:j,putAPI:T,patchAPI:H,refreshAuth:N,logout:q}},e.children)},w7=()=>{const e=Si(),t=m.exports.useContext(Hr);return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("ul",{className:"sidenav",id:"slide-out",style:{transform:"translateX(-105%)"}},m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/announcements?feed=all"},"All")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/announcements?feed=school"},"School")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/announcements?feed=sac"},"Student Council")),m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/calendar",className:"sidenav-close"},"Calendar")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/clubs",className:"sidenav-close"},"Clubs")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/blog",className:"sidenav-close"},"Content")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/resources",className:"sidenav-close"},"Resources")),m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=history"},"WLMCI")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=about"},"About")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=team"},"Team")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/map"},"Map")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=school"},"Contact WLMCI")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=contact"},"Contact Us")),m.exports.createElement("li",{className:"divider"}),go()?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("li",null,m.exports.createElement(Tr,{href:`/user/${t.user.id}`,className:"sidenav-close"},"Profile")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/timetable",className:"sidenav-close"},"Timetable")),m.exports.createElement("li",null,m.exports.createElement("a",{className:"nav-link",onClick:n=>{n.preventDefault(),sU(),e("/accounts/login")}},"Logout"))):m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/accounts/login/?next=/",className:"sidenav-close"},"Login")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/accounts/signup/?next=/",className:"sidenav-close"},"Sign Up")))),m.exports.createElement("nav",null,m.exports.createElement("div",{className:"nav-wrapper"},m.exports.createElement(Tr,{href:"/"},m.exports.createElement("div",{className:"brand-logo"},m.exports.createElement("img",{className:"img-logo",src:"/static/img/themes/logos/dark-transparent.png"}))),m.exports.createElement("a",{href:"#","data-target":"slide-out",className:"sidenav-trigger"},m.exports.createElement("i",{className:"zmdi zmdi-menu"})),m.exports.createElement("ul",{className:"right hide-on-med-and-down"},m.exports.createElement("li",null,m.exports.createElement("a",{className:"dropdown-trigger","data-target":"dropdownAnnouncements"},"Announcements",m.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),m.exports.createElement("ul",{id:"dropdownAnnouncements",className:"dropdown-content"},m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/announcements?feed=all"},"All")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/announcements?feed=school"},"School")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/announcements?feed=sac"},"Student Council")))),m.exports.createElement("li",{className:"nav-item"},m.exports.createElement(Tr,{href:"/calendar"},"Calendar")),m.exports.createElement("li",{className:"nav-item"},m.exports.createElement(Tr,{href:"/clubs"},"Clubs")),m.exports.createElement("li",{className:"nav-item"},m.exports.createElement(Tr,{href:"/blog"},"Content")),m.exports.createElement("li",{className:"nav-item"},m.exports.createElement(Tr,{href:"/resources"},"Resources")),m.exports.createElement("li",null,m.exports.createElement("a",{className:"dropdown-trigger",href:"/#!","data-target":"dropdownAbout"},"About",m.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),m.exports.createElement("ul",{id:"dropdownAbout",className:"dropdown-content"},m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=history"},"WLMCI")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=about"},"About")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=team"},"Team")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/map"},"Map")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=school"},"Contact WLMCI")),m.exports.createElement("li",null,m.exports.createElement(Tr,{href:"/about?tab=contact"},"Contact Us")))),m.exports.createElement("li",null,go()?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("a",{className:"dropdown-trigger",href:"https://maclyonsden.com/user/ji.mmyliu#!","data-target":"dropdownAcc"},"Account",m.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),m.exports.createElement("ul",{id:"dropdownAcc",className:"dropdown-content",tabIndex:0},m.exports.createElement("li",{tabIndex:0},m.exports.createElement(Yt,{to:`/user/${t.user.id}`},"Profile")),m.exports.createElement("li",{tabIndex:0},m.exports.createElement(Yt,{to:"/timetable"},"Timetable")),t.user.is_staff&&m.exports.createElement("li",{tabIndex:0},m.exports.createElement("a",{href:"/admin/"},"Admin")),m.exports.createElement("li",{tabIndex:0},m.exports.createElement("a",{onClick:n=>{n.preventDefault(),t.logout()}},"Logout")))):m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("a",{className:"dropdown-trigger",href:"/#!","data-target":"dropdownAcc"},"Login/Sign Up",m.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),m.exports.createElement("ul",{id:"dropdownAcc",className:"dropdown-content"},m.exports.createElement("li",null,m.exports.createElement(ax,{href:"/accounts/login/?next=/"},"Login")),m.exports.createElement("li",null,m.exports.createElement(ax,{href:"/accounts/signup/?next=/"},"Sign Up")))))))))},Tr=e=>{const t=Si();return m.exports.createElement("a",{className:"nav-link",href:e.href,onClick:n=>{n.preventDefault(),t(e.href)}},e.children)},ax=e=>{const t=Si();return m.exports.createElement("a",{href:e.href,className:e.className,onClick:n=>{n.preventDefault(),t(e.href)}},e.children)},E7=()=>(Si(),m.exports.createElement("div",{className:"footer"},m.exports.createElement("div",{className:"footer-title-par"},m.exports.createElement("p",{className:"footer-title"},"William Lyon Mackenzie's online hub for announcements, calendar events, clubs, and timetables."),m.exports.createElement("p",{className:"footer-title"},m.exports.createElement(Yt,{to:"/terms"},"Terms of Service")," and ",m.exports.createElement(Yt,{to:"/privacy"},"Privacy Policy"))),m.exports.createElement("hr",{className:"footer-bar"}),m.exports.createElement("div",{className:"foooter-icon-par"},m.exports.createElement("a",{className:"footer-name",href:"https://github.com/wlmac/metropolis",rel:"noreferrer",target:"_blank"},m.exports.createElement("i",{className:"footer-icon zmdi zmdi-hc-3x zmdi-github"}))))),C7=()=>{Si(),m.exports.useEffect(()=>{document.title="Home | Metropolis"},[]);const[e,t]=m.exports.useState({});return m.exports.useEffect(()=>{const n=`${lr.OBJECT}/blog-post`;wl.get(n).then(r=>{t(r.data.results[0])})},[]),m.exports.createElement("div",{id:"content-container"},m.exports.createElement("div",{className:"banner"},m.exports.createElement("div",{className:"background"},m.exports.createElement("img",{src:"/static/img/themes/banners/summer.jpg"})),m.exports.createElement("div",{className:"overlay-container valign-wrapper"},m.exports.createElement("div",{className:"next-class center-align"},m.exports.createElement("h4",{className:"schedule-course"},"No School"),m.exports.createElement("span",{className:"schedule-description"},"Enjoy your day!"))),m.exports.createElement("div",{className:"schedule-today-overlay hide-on-small-and-down"},m.exports.createElement("div",{className:"schedule-today-overlay-container"},m.exports.createElement("h4",{className:"schedule-cycle"}),m.exports.createElement("div",{className:"schedule-today-courses"}))),m.exports.createElement("div",{className:"overlay-container"},m.exports.createElement("div",{className:"banner-message center-align"},m.exports.createElement("span",null,m.exports.createElement(Yt,{to:"/accounts/signup/"},"Sign up")," and add your timetable to see a personalized schedule here.")))),m.exports.createElement("div",{id:"main-container"},m.exports.createElement(S7,{post:e}),m.exports.createElement("div",{id:"recent-events",className:"card-list center-align"},m.exports.createElement("div",{className:"cards-container"},"There are no events at this time."),m.exports.createElement(Yt,{className:"full-content-page link",to:"/calendar"},"View all events ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))),m.exports.createElement("hr",{style:{margin:"10px calc(2% + 10px)",borderTopWidth:"2.5px",borderColor:"#d9d9d9"}}),m.exports.createElement("div",{id:"recent-announcements",className:"center-align"},m.exports.createElement("div",{id:"announcements",className:"cards-container"},k7()),m.exports.createElement(Yt,{className:"full-content-page link",to:"/announcements"},"View all announcements ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"})))))},S7=e=>{const t=e.post;return m.exports.createElement("div",{className:"blog row"},m.exports.createElement("div",{className:"blog-content s5 col valign-wrapper left-align s5"},m.exports.createElement("div",{className:"blog-content-container"},m.exports.createElement("h4",{className:"title"},t.title),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"blog-body markdown-container"},m.exports.createElement("p",null,t.body),m.exports.createElement(Yt,{className:"full-content-page link",to:`/blog/${t.id}`},"Read full blog post ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))))),m.exports.createElement("img",{className:"blog-image hide-on-small-and-down col s7",src:t.featured_image+"?fmt=webp&w=1280"}))},k7=()=>{const[e,t]=m.exports.useState([]);return m.exports.useEffect(()=>{const n=`${lr.OBJECT}/announcement`;wl.get(n).then(r=>{t(r.data.results.slice(0,3))})},[]),e.map(n=>m.exports.createElement(T7,{key:n.id,announcement:n}))},T7=e=>{const t=m.exports.useContext(Hr),n=e.announcement;let r=t.allOrgs.find(a=>a.id===n.organization);return r?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("div",{className:"announcement-card card left-align",style:{borderColor:"#ffccce"}},m.exports.createElement("h5",{className:"title truncate"},n.title),m.exports.createElement("div",{className:"authors"},m.exports.createElement("div",{className:"authors-image"},m.exports.createElement(Yt,{to:`/club/${n.organization}`},m.exports.createElement("img",{className:"circle",src:r&&r.banner}))),m.exports.createElement("div",{className:"authors-text"},m.exports.createElement(Yt,{to:`/club/${n.organization}`},r.name))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"announcement-description markdown-container"},m.exports.createElement("p",null,n.body),m.exports.createElement(Yt,{className:"link",to:`/announcement/${n.id}`},"See announcement ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))))):m.exports.createElement(m.exports.Fragment,null)},Kx=()=>{const{search:e}=Rp();return m.exports.useMemo(()=>new URLSearchParams(e),[e])},T3=[{id:"all",text:"ALL",filters:null},{id:"school",text:"SCHOOL",filters:null},{id:"sac",text:"STUDENT COUNCIL",filters:null}],_g=e=>m.exports.createElement("p",{className:"tag",style:{backgroundColor:e.tag.color}},e.tag.name);var Fg=e=>e.type==="checkbox",Jd=e=>e instanceof Date,Ho=e=>e==null;const A3=e=>typeof e=="object";var wo=e=>!Ho(e)&&!Array.isArray(e)&&A3(e)&&!Jd(e),A7=e=>wo(e)&&e.target?Fg(e.target)?e.target.checked:e.target.value:e,M7=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,I7=(e,t)=>e.has(M7(t)),Ng=e=>Array.isArray(e)?e.filter(Boolean):[],io=e=>e===void 0,mn=(e,t,n)=>{if(!t||!wo(e))return n;const r=Ng(t.split(/[,[\].]+?/)).reduce((a,c)=>Ho(a)?a:a[c],e);return io(r)||r===e?io(e[t])?n:e[t]:r};const qM={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},vs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_l={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};nt.createContext(null);var P7=(e,t,n,r=!0)=>{const a={defaultValues:t._defaultValues};for(const c in e)Object.defineProperty(a,c,{get:()=>{const d=c;return t._proxyFormState[d]!==vs.all&&(t._proxyFormState[d]=!r||vs.all),n&&(n[d]=!0),e[d]}});return a},Ua=e=>wo(e)&&!Object.keys(e).length,D7=(e,t,n)=>{const{name:r,...a}=e;return Ua(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(c=>t[c]===(!n||vs.all))},Wb=e=>Array.isArray(e)?e:[e];function R7(e){const t=nt.useRef(e);t.current=e,nt.useEffect(()=>{const n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>{n&&n.unsubscribe()}},[e.disabled])}var Xs=e=>typeof e=="string",L7=(e,t,n,r)=>{const a=Array.isArray(e);return Xs(e)?(r&&t.watch.add(e),mn(n,e)):a?e.map(c=>(r&&t.watch.add(c),mn(n,c))):(r&&(t.watchAll=!0),n)},sx=e=>typeof e=="function",M3=e=>{for(const t in e)if(sx(e[t]))return!0;return!1},O7=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},PS=e=>/^\w*$/.test(e),I3=e=>Ng(e.replace(/["|']|\]/g,"").split(/\.|\[/));function ri(e,t,n){let r=-1;const a=PS(t)?[t]:I3(t),c=a.length,d=c-1;for(;++r<c;){const o=a[r];let v=n;if(r!==d){const C=e[o];v=wo(C)||Array.isArray(C)?C:isNaN(+a[r+1])?{}:[]}e[o]=v,e=e[o]}return e}const FE=(e,t,n)=>{for(const r of n||Object.keys(e)){const a=mn(e,r);if(a){const{_f:c,...d}=a;if(c&&t(c.name)){if(c.ref.focus){c.ref.focus();break}else if(c.refs&&c.refs[0].focus){c.refs[0].focus();break}}else wo(d)&&FE(d,t)}}};var ZM=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length)))),z7=(e,t,n)=>{const r=Ng(mn(e,n));return ri(r,"root",t[n]),ri(e,n,r),e},lx=e=>typeof e=="boolean",DS=e=>e.type==="file",E_=e=>Xs(e)||nt.isValidElement(e),RS=e=>e.type==="radio",ux=e=>e instanceof RegExp;const XM={value:!1,isValid:!1},KM={value:!0,isValid:!0};var P3=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!io(e[0].attributes.value)?io(e[0].value)||e[0].value===""?KM:{value:e[0].value,isValid:!0}:KM:XM}return XM};const YM={isValid:!1,value:null};var D3=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,YM):YM;function JM(e,t,n="validate"){if(E_(e)||Array.isArray(e)&&e.every(E_)||lx(e)&&!e)return{type:n,message:E_(e)?e:"",ref:t}}var Id=e=>wo(e)&&!ux(e)?e:{value:e,message:""},QM=async(e,t,n,r,a)=>{const{ref:c,refs:d,required:o,maxLength:v,minLength:C,min:I,max:D,pattern:F,validate:U,name:j,valueAsNumber:T,mount:H,disabled:N}=e._f;if(!H||N)return{};const q=d?d[0]:c,z=se=>{r&&q.reportValidity&&(q.setCustomValidity(lx(se)?"":se||" "),q.reportValidity())},B={},k=RS(c),w=Fg(c),R=k||w,J=(T||DS(c))&&!c.value||t===""||Array.isArray(t)&&!t.length,ie=O7.bind(null,j,n,B),ue=(se,_e,Ue,je=_l.maxLength,Ne=_l.minLength)=>{const Ie=se?_e:Ue;B[j]={type:se?je:Ne,message:Ie,ref:c,...ie(se?je:Ne,Ie)}};if(a?!Array.isArray(t)||!t.length:o&&(!R&&(J||Ho(t))||lx(t)&&!t||w&&!P3(d).isValid||k&&!D3(d).isValid)){const{value:se,message:_e}=E_(o)?{value:!!o,message:o}:Id(o);if(se&&(B[j]={type:_l.required,message:_e,ref:q,...ie(_l.required,_e)},!n))return z(_e),B}if(!J&&(!Ho(I)||!Ho(D))){let se,_e;const Ue=Id(D),je=Id(I);if(!Ho(t)&&!isNaN(t)){const Ne=c.valueAsNumber||t&&+t;Ho(Ue.value)||(se=Ne>Ue.value),Ho(je.value)||(_e=Ne<je.value)}else{const Ne=c.valueAsDate||new Date(t);Xs(Ue.value)&&(se=Ne>new Date(Ue.value)),Xs(je.value)&&(_e=Ne<new Date(je.value))}if((se||_e)&&(ue(!!se,Ue.message,je.message,_l.max,_l.min),!n))return z(B[j].message),B}if((v||C)&&!J&&(Xs(t)||a&&Array.isArray(t))){const se=Id(v),_e=Id(C),Ue=!Ho(se.value)&&t.length>se.value,je=!Ho(_e.value)&&t.length<_e.value;if((Ue||je)&&(ue(Ue,se.message,_e.message),!n))return z(B[j].message),B}if(F&&!J&&Xs(t)){const{value:se,message:_e}=Id(F);if(ux(se)&&!t.match(se)&&(B[j]={type:_l.pattern,message:_e,ref:c,...ie(_l.pattern,_e)},!n))return z(_e),B}if(U){if(sx(U)){const se=await U(t),_e=JM(se,q);if(_e&&(B[j]={..._e,...ie(_l.validate,_e.message)},!n))return z(_e.message),B}else if(wo(U)){let se={};for(const _e in U){if(!Ua(se)&&!n)break;const Ue=JM(await U[_e](t),q,_e);Ue&&(se={...Ue,...ie(_e,Ue.message)},z(Ue.message),n&&(B[j]=se))}if(!Ua(se)&&(B[j]={ref:q,...se},!n))return B}}return z(!0),B},B7=e=>{const t=e.constructor&&e.constructor.prototype;return wo(t)&&t.hasOwnProperty("isPrototypeOf")},NE=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Zc(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(NE&&(e instanceof Blob||e instanceof FileList))&&(n||wo(e)))if(t=n?[]:{},!Array.isArray(e)&&!B7(e))t=e;else for(const r in e)t[r]=Zc(e[r]);else return e;return t}var eI=e=>({isOnSubmit:!e||e===vs.onSubmit,isOnBlur:e===vs.onBlur,isOnChange:e===vs.onChange,isOnAll:e===vs.all,isOnTouch:e===vs.onTouched});function F7(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=io(e)?r++:e[t[r++]];return e}function N7(e){for(const t in e)if(!io(e[t]))return!1;return!0}function Vo(e,t){const n=PS(t)?[t]:I3(t),r=n.length==1?e:F7(e,n),a=n[n.length-1];let c;r&&delete r[a];for(let d=0;d<n.slice(0,-1).length;d++){let o=-1,v;const C=n.slice(0,-(d+1)),I=C.length-1;for(d>0&&(c=e);++o<C.length;){const D=C[o];v=v?v[D]:e[D],I===o&&(wo(v)&&Ua(v)||Array.isArray(v)&&N7(v))&&(c?delete c[D]:delete e[D]),c=v}}return e}function Gb(){let e=[];return{get observers(){return e},next:a=>{for(const c of e)c.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(c=>c!==a)}}),unsubscribe:()=>{e=[]}}}var cx=e=>Ho(e)||!A3(e);function Qd(e,t){if(cx(e)||cx(t))return e===t;if(Jd(e)&&Jd(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const a of n){const c=e[a];if(!r.includes(a))return!1;if(a!=="ref"){const d=t[a];if(Jd(c)&&Jd(d)||wo(c)&&wo(d)||Array.isArray(c)&&Array.isArray(d)?!Qd(c,d):c!==d)return!1}}return!0}var UE=e=>{const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof n},R3=e=>e.type==="select-multiple",U7=e=>RS(e)||Fg(e),qb=e=>UE(e)&&e.isConnected;function hx(e,t={}){const n=Array.isArray(e);if(wo(e)||n)for(const r in e)Array.isArray(e[r])||wo(e[r])&&!M3(e[r])?(t[r]=Array.isArray(e[r])?[]:{},hx(e[r],t[r])):Ho(e[r])||(t[r]=!0);return t}function L3(e,t,n){const r=Array.isArray(e);if(wo(e)||r)for(const a in e)Array.isArray(e[a])||wo(e[a])&&!M3(e[a])?io(t)||cx(n[a])?n[a]=Array.isArray(e[a])?hx(e[a],[]):{...hx(e[a])}:L3(e[a],Ho(t)?{}:t[a],n[a]):n[a]=!Qd(e[a],t[a]);return n}var Zb=(e,t)=>L3(e,t,hx(t)),O3=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>io(e)?e:t?e===""?NaN:e&&+e:n&&Xs(e)?new Date(e):r?r(e):e;function Xb(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return DS(t)?t.files:RS(t)?D3(e.refs).value:R3(t)?[...t.selectedOptions].map(({value:n})=>n):Fg(t)?P3(e.refs).value:O3(io(t.value)?e.ref.value:t.value,e)}var j7=(e,t,n,r)=>{const a={};for(const c of e){const d=mn(t,c);d&&ri(a,c,d._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}},bm=e=>io(e)?void 0:ux(e)?e.source:wo(e)?ux(e.value)?e.value.source:e.value:e,V7=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function tI(e,t,n){const r=mn(e,n);if(r||PS(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const c=a.join("."),d=mn(t,c),o=mn(e,c);if(d&&!Array.isArray(d)&&n!==c)return{name:n};if(o&&o.type)return{name:c,error:o};a.pop()}return{name:n}}var $7=(e,t,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:(n?r.isOnChange:a.isOnChange)?e:!0,H7=(e,t)=>!Ng(mn(e,t)).length&&Vo(e,t);const W7={mode:vs.onSubmit,reValidateMode:vs.onChange,shouldFocusError:!0};function G7(e={}){let t={...W7,...e},n={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},r={},a=Zc(t.defaultValues)||{},c=t.shouldUnregister?{}:Zc(a),d={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},v,C=0,I={};const D={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},F={watch:Gb(),array:Gb(),state:Gb()},U=eI(t.mode),j=eI(t.reValidateMode),T=t.criteriaMode===vs.all,H=Le=>Ke=>{clearTimeout(C),C=window.setTimeout(Le,Ke)},N=async Le=>{let Ke=!1;return D.isValid&&(Ke=t.resolver?Ua((await R()).errors):await ie(r,!0),!Le&&Ke!==n.isValid&&(n.isValid=Ke,F.state.next({isValid:Ke}))),Ke},q=(Le,Ke=[],pt,St,Ft=!0,ht=!0)=>{if(St&&pt){if(d.action=!0,ht&&Array.isArray(mn(r,Le))){const Nt=pt(mn(r,Le),St.argA,St.argB);Ft&&ri(r,Le,Nt)}if(D.errors&&ht&&Array.isArray(mn(n.errors,Le))){const Nt=pt(mn(n.errors,Le),St.argA,St.argB);Ft&&ri(n.errors,Le,Nt),H7(n.errors,Le)}if(D.touchedFields&&ht&&Array.isArray(mn(n.touchedFields,Le))){const Nt=pt(mn(n.touchedFields,Le),St.argA,St.argB);Ft&&ri(n.touchedFields,Le,Nt)}D.dirtyFields&&(n.dirtyFields=Zb(a,c)),F.state.next({isDirty:se(Le,Ke),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else ri(c,Le,Ke)},z=(Le,Ke)=>{ri(n.errors,Le,Ke),F.state.next({errors:n.errors})},B=(Le,Ke,pt,St)=>{const Ft=mn(r,Le);if(Ft){const ht=mn(c,Le,io(pt)?mn(a,Le):pt);io(ht)||St&&St.defaultChecked||Ke?ri(c,Le,Ke?ht:Xb(Ft._f)):je(Le,ht),d.mount&&N()}},k=(Le,Ke,pt,St,Ft)=>{let ht=!1;const Nt={name:Le},wn=mn(n.touchedFields,Le);if(D.isDirty){const Gn=n.isDirty;n.isDirty=Nt.isDirty=se(),ht=Gn!==Nt.isDirty}if(D.dirtyFields&&(!pt||St)){const Gn=mn(n.dirtyFields,Le);Qd(mn(a,Le),Ke)?Vo(n.dirtyFields,Le):ri(n.dirtyFields,Le,!0),Nt.dirtyFields=n.dirtyFields,ht=ht||Gn!==mn(n.dirtyFields,Le)}return pt&&!wn&&(ri(n.touchedFields,Le,pt),Nt.touchedFields=n.touchedFields,ht=ht||D.touchedFields&&wn!==pt),ht&&Ft&&F.state.next(Nt),ht?Nt:{}},w=async(Le,Ke,pt,St)=>{const Ft=mn(n.errors,Le),ht=D.isValid&&n.isValid!==Ke;if(e.delayError&&pt?(v=H(()=>z(Le,pt)),v(e.delayError)):(clearTimeout(C),v=null,pt?ri(n.errors,Le,pt):Vo(n.errors,Le)),(pt?!Qd(Ft,pt):Ft)||!Ua(St)||ht){const Nt={...St,...ht?{isValid:Ke}:{},errors:n.errors,name:Le};n={...n,...Nt},F.state.next(Nt)}I[Le]--,D.isValidating&&!Object.values(I).some(Nt=>Nt)&&(F.state.next({isValidating:!1}),I={})},R=async Le=>t.resolver?await t.resolver({...c},t.context,j7(Le||o.mount,r,t.criteriaMode,t.shouldUseNativeValidation)):{},J=async Le=>{const{errors:Ke}=await R();if(Le)for(const pt of Le){const St=mn(Ke,pt);St?ri(n.errors,pt,St):Vo(n.errors,pt)}else n.errors=Ke;return Ke},ie=async(Le,Ke,pt={valid:!0})=>{for(const St in Le){const Ft=Le[St];if(Ft){const{_f:ht,...Nt}=Ft;if(ht){const wn=o.array.has(ht.name),Gn=await QM(Ft,mn(c,ht.name),T,t.shouldUseNativeValidation,wn);if(Gn[ht.name]&&(pt.valid=!1,Ke))break;!Ke&&(mn(Gn,ht.name)?wn?z7(n.errors,Gn,ht.name):ri(n.errors,ht.name,Gn[ht.name]):Vo(n.errors,ht.name))}Nt&&await ie(Nt,Ke,pt)}}return pt.valid},ue=()=>{for(const Le of o.unMount){const Ke=mn(r,Le);Ke&&(Ke._f.refs?Ke._f.refs.every(pt=>!qb(pt)):!qb(Ke._f.ref))&&Qt(Le)}o.unMount=new Set},se=(Le,Ke)=>(Le&&Ke&&ri(c,Le,Ke),!Qd(Et(),a)),_e=(Le,Ke,pt)=>{const St={...d.mount?c:io(Ke)?a:Xs(Le)?{[Le]:Ke}:Ke};return L7(Le,o,St,pt)},Ue=Le=>Ng(mn(d.mount?c:a,Le,e.shouldUnregister?mn(a,Le,[]):[])),je=(Le,Ke,pt={})=>{const St=mn(r,Le);let Ft=Ke;if(St){const ht=St._f;ht&&(!ht.disabled&&ri(c,Le,O3(Ke,ht)),Ft=NE&&UE(ht.ref)&&Ho(Ke)?"":Ke,R3(ht.ref)?[...ht.ref.options].forEach(Nt=>Nt.selected=Ft.includes(Nt.value)):ht.refs?Fg(ht.ref)?ht.refs.length>1?ht.refs.forEach(Nt=>(!Nt.defaultChecked||!Nt.disabled)&&(Nt.checked=Array.isArray(Ft)?!!Ft.find(wn=>wn===Nt.value):Ft===Nt.value)):ht.refs[0]&&(ht.refs[0].checked=!!Ft):ht.refs.forEach(Nt=>Nt.checked=Nt.value===Ft):DS(ht.ref)?ht.ref.value="":(ht.ref.value=Ft,ht.ref.type||F.watch.next({name:Le})))}(pt.shouldDirty||pt.shouldTouch)&&k(Le,Ft,pt.shouldTouch,pt.shouldDirty,!0),pt.shouldValidate&&We(Le)},Ne=(Le,Ke,pt)=>{for(const St in Ke){const Ft=Ke[St],ht=`${Le}.${St}`,Nt=mn(r,ht);(o.array.has(Le)||!cx(Ft)||Nt&&!Nt._f)&&!Jd(Ft)?Ne(ht,Ft,pt):je(ht,Ft,pt)}},Ie=(Le,Ke,pt={})=>{const St=mn(r,Le),Ft=o.array.has(Le),ht=Zc(Ke);ri(c,Le,ht),Ft?(F.array.next({name:Le,values:c}),(D.isDirty||D.dirtyFields)&&pt.shouldDirty&&(n.dirtyFields=Zb(a,c),F.state.next({name:Le,dirtyFields:n.dirtyFields,isDirty:se(Le,ht)}))):St&&!St._f&&!Ho(ht)?Ne(Le,ht,pt):je(Le,ht,pt),ZM(Le,o)&&F.state.next({}),F.watch.next({name:Le})},xt=async Le=>{const Ke=Le.target;let pt=Ke.name;const St=mn(r,pt);if(St){let Ft,ht;const Nt=Ke.type?Xb(St._f):A7(Le),wn=Le.type===qM.BLUR||Le.type===qM.FOCUS_OUT,Gn=!V7(St._f)&&!t.resolver&&!mn(n.errors,pt)&&!St._f.deps||$7(wn,mn(n.touchedFields,pt),n.isSubmitted,j,U),qn=ZM(pt,o,wn);ri(c,pt,Nt),wn?(St._f.onBlur&&St._f.onBlur(Le),v&&v(0)):St._f.onChange&&St._f.onChange(Le);const Un=k(pt,Nt,wn,!1),xr=!Ua(Un)||qn;if(!wn&&F.watch.next({name:pt,type:Le.type}),Gn)return xr&&F.state.next({name:pt,...qn?{}:Un});if(!wn&&qn&&F.state.next({}),I[pt]=(I[pt],1),F.state.next({isValidating:!0}),t.resolver){const{errors:Ae}=await R([pt]),Ye=tI(n.errors,r,pt),re=tI(Ae,r,Ye.name||pt);Ft=re.error,pt=re.name,ht=Ua(Ae)}else Ft=(await QM(St,mn(c,pt),T,t.shouldUseNativeValidation))[pt],ht=await N(!0);St._f.deps&&We(St._f.deps),w(pt,ht,Ft,Un)}},We=async(Le,Ke={})=>{let pt,St;const Ft=Wb(Le);if(F.state.next({isValidating:!0}),t.resolver){const ht=await J(io(Le)?Le:Ft);pt=Ua(ht),St=Le?!Ft.some(Nt=>mn(ht,Nt)):pt}else Le?(St=(await Promise.all(Ft.map(async ht=>{const Nt=mn(r,ht);return await ie(Nt&&Nt._f?{[ht]:Nt}:Nt)}))).every(Boolean),!(!St&&!n.isValid)&&N()):St=pt=await ie(r);return F.state.next({...!Xs(Le)||D.isValid&&pt!==n.isValid?{}:{name:Le},...t.resolver?{isValid:pt}:{},errors:n.errors,isValidating:!1}),Ke.shouldFocus&&!St&&FE(r,ht=>mn(n.errors,ht),Le?Ft:o.mount),St},Et=Le=>{const Ke={...a,...d.mount?c:{}};return io(Le)?Ke:Xs(Le)?mn(Ke,Le):Le.map(pt=>mn(Ke,pt))},ct=(Le,Ke)=>({invalid:!!mn((Ke||n).errors,Le),isDirty:!!mn((Ke||n).dirtyFields,Le),isTouched:!!mn((Ke||n).touchedFields,Le),error:mn((Ke||n).errors,Le)}),xe=Le=>{Le?Wb(Le).forEach(Ke=>Vo(n.errors,Ke)):n.errors={},F.state.next({errors:n.errors})},Ee=(Le,Ke,pt)=>{const St=(mn(r,Le,{_f:{}})._f||{}).ref;ri(n.errors,Le,{...Ke,ref:St}),F.state.next({name:Le,errors:n.errors,isValid:!1}),pt&&pt.shouldFocus&&St&&St.focus&&St.focus()},xn=(Le,Ke)=>sx(Le)?F.watch.subscribe({next:pt=>Le(_e(void 0,Ke),pt)}):_e(Le,Ke,!0),Qt=(Le,Ke={})=>{for(const pt of Le?Wb(Le):o.mount)o.mount.delete(pt),o.array.delete(pt),mn(r,pt)&&(Ke.keepValue||(Vo(r,pt),Vo(c,pt)),!Ke.keepError&&Vo(n.errors,pt),!Ke.keepDirty&&Vo(n.dirtyFields,pt),!Ke.keepTouched&&Vo(n.touchedFields,pt),!t.shouldUnregister&&!Ke.keepDefaultValue&&Vo(a,pt));F.watch.next({}),F.state.next({...n,...Ke.keepDirty?{isDirty:se()}:{}}),!Ke.keepIsValid&&N()},yn=(Le,Ke={})=>{let pt=mn(r,Le);const St=lx(Ke.disabled);return ri(r,Le,{...pt||{},_f:{...pt&&pt._f?pt._f:{ref:{name:Le}},name:Le,mount:!0,...Ke}}),o.mount.add(Le),pt?St&&ri(c,Le,Ke.disabled?void 0:mn(c,Le,Xb(pt._f))):B(Le,!0,Ke.value),{...St?{disabled:Ke.disabled}:{},...t.shouldUseNativeValidation?{required:!!Ke.required,min:bm(Ke.min),max:bm(Ke.max),minLength:bm(Ke.minLength),maxLength:bm(Ke.maxLength),pattern:bm(Ke.pattern)}:{},name:Le,onChange:xt,onBlur:xt,ref:Ft=>{if(Ft){yn(Le,Ke),pt=mn(r,Le);const ht=io(Ft.value)&&Ft.querySelectorAll&&Ft.querySelectorAll("input,select,textarea")[0]||Ft,Nt=U7(ht),wn=pt._f.refs||[];if(Nt?wn.find(Gn=>Gn===ht):ht===pt._f.ref)return;ri(r,Le,{_f:{...pt._f,...Nt?{refs:[...wn.filter(qb),ht,...Array.isArray(mn(a,Le))?[{}]:[]],ref:{type:ht.type,name:Le}}:{ref:ht}}}),B(Le,!1,void 0,ht)}else pt=mn(r,Le,{}),pt._f&&(pt._f.mount=!1),(t.shouldUnregister||Ke.shouldUnregister)&&!(I7(o.array,Le)&&d.action)&&o.unMount.add(Le)}}},on=(Le,Ke)=>async pt=>{pt&&(pt.preventDefault&&pt.preventDefault(),pt.persist&&pt.persist());let St=!0,Ft=Zc(c);F.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:ht,values:Nt}=await R();n.errors=ht,Ft=Nt}else await ie(r);Ua(n.errors)?(F.state.next({errors:{},isSubmitting:!0}),await Le(Ft,pt)):(Ke&&await Ke({...n.errors},pt),t.shouldFocusError&&FE(r,ht=>mn(n.errors,ht),o.mount))}catch(ht){throw St=!1,ht}finally{n.isSubmitted=!0,F.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ua(n.errors)&&St,submitCount:n.submitCount+1,errors:n.errors})}},Sn=(Le,Ke={})=>{mn(r,Le)&&(io(Ke.defaultValue)?Ie(Le,mn(a,Le)):(Ie(Le,Ke.defaultValue),ri(a,Le,Ke.defaultValue)),Ke.keepTouched||Vo(n.touchedFields,Le),Ke.keepDirty||(Vo(n.dirtyFields,Le),n.isDirty=Ke.defaultValue?se(Le,mn(a,Le)):se()),Ke.keepError||(Vo(n.errors,Le),D.isValid&&N()),F.state.next({...n}))},Nn=(Le,Ke={})=>{const pt=Le||a,St=Zc(pt),Ft=Le&&!Ua(Le)?St:a;if(Ke.keepDefaultValues||(a=pt),!Ke.keepValues){if(Ke.keepDirtyValues)for(const ht of o.mount)mn(n.dirtyFields,ht)?ri(Ft,ht,mn(c,ht)):Ie(ht,mn(Ft,ht));else{if(NE&&io(Le))for(const ht of o.mount){const Nt=mn(r,ht);if(Nt&&Nt._f){const wn=Array.isArray(Nt._f.refs)?Nt._f.refs[0]:Nt._f.ref;try{if(UE(wn)){wn.closest("form").reset();break}}catch{}}}r={}}c=e.shouldUnregister?Ke.keepDefaultValues?Zc(a):{}:St,F.array.next({values:Ft}),F.watch.next({values:Ft})}o={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!D.isValid||!!Ke.keepIsValid,d.watch=!!e.shouldUnregister,F.state.next({submitCount:Ke.keepSubmitCount?n.submitCount:0,isDirty:Ke.keepDirty||Ke.keepDirtyValues?n.isDirty:!!(Ke.keepDefaultValues&&!Qd(Le,a)),isSubmitted:Ke.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ke.keepDirty||Ke.keepDirtyValues?n.dirtyFields:Ke.keepDefaultValues&&Le?Zb(a,Le):{},touchedFields:Ke.keepTouched?n.touchedFields:{},errors:Ke.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:yn,unregister:Qt,getFieldState:ct,_executeSchema:R,_getWatch:_e,_getDirty:se,_updateValid:N,_removeUnmounted:ue,_updateFieldArray:q,_getFieldArray:Ue,_subjects:F,_proxyFormState:D,get _fields(){return r},get _formValues(){return c},get _stateFlags(){return d},set _stateFlags(Le){d=Le},get _defaultValues(){return a},get _names(){return o},set _names(Le){o=Le},get _formState(){return n},set _formState(Le){n=Le},get _options(){return t},set _options(Le){t={...t,...Le}}},trigger:We,register:yn,handleSubmit:on,watch:xn,setValue:Ie,getValues:Et,reset:(Le,Ke)=>Nn(sx(Le)?Le(c):Le,Ke),resetField:Sn,clearErrors:xe,unregister:Qt,setError:Ee,setFocus:(Le,Ke={})=>{const pt=mn(r,Le),St=pt&&pt._f;if(St){const Ft=St.refs?St.refs[0]:St.ref;Ft.focus&&(Ft.focus(),Ke.shouldSelect&&Ft.select())}},getFieldState:ct}}function LS(e={}){const t=nt.useRef(),[n,r]=nt.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});t.current||(t.current={...G7(e),formState:n});const a=t.current.control;return a._options=e,R7({subject:a._subjects.state,callback:nt.useCallback(c=>{D7(c,a._proxyFormState,!0)&&(a._formState={...a._formState,...c},r({...a._formState}))},[a])}),nt.useEffect(()=>{a._stateFlags.mount||(a._proxyFormState.isValid&&a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()}),t.current.formState=P7(n,a),t.current}const Yx={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};var zt={exports:{}},q7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Z7=q7,X7=Z7;function z3(){}function B3(){}B3.resetWarningCache=z3;var K7=function(){function e(r,a,c,d,o,v){if(v!==X7){var C=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw C.name="Invariant Violation",C}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:B3,resetWarningCache:z3};return n.PropTypes=n,n};zt.exports=K7();var Fn=zt.exports,jE=globalThis&&globalThis.__assign||function(){return jE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},jE.apply(this,arguments)},F3={onActivate:zt.exports.func,onAddUndo:zt.exports.func,onBeforeAddUndo:zt.exports.func,onBeforeExecCommand:zt.exports.func,onBeforeGetContent:zt.exports.func,onBeforeRenderUI:zt.exports.func,onBeforeSetContent:zt.exports.func,onBeforePaste:zt.exports.func,onBlur:zt.exports.func,onChange:zt.exports.func,onClearUndos:zt.exports.func,onClick:zt.exports.func,onContextMenu:zt.exports.func,onCommentChange:zt.exports.func,onCopy:zt.exports.func,onCut:zt.exports.func,onDblclick:zt.exports.func,onDeactivate:zt.exports.func,onDirty:zt.exports.func,onDrag:zt.exports.func,onDragDrop:zt.exports.func,onDragEnd:zt.exports.func,onDragGesture:zt.exports.func,onDragOver:zt.exports.func,onDrop:zt.exports.func,onExecCommand:zt.exports.func,onFocus:zt.exports.func,onFocusIn:zt.exports.func,onFocusOut:zt.exports.func,onGetContent:zt.exports.func,onHide:zt.exports.func,onInit:zt.exports.func,onKeyDown:zt.exports.func,onKeyPress:zt.exports.func,onKeyUp:zt.exports.func,onLoadContent:zt.exports.func,onMouseDown:zt.exports.func,onMouseEnter:zt.exports.func,onMouseLeave:zt.exports.func,onMouseMove:zt.exports.func,onMouseOut:zt.exports.func,onMouseOver:zt.exports.func,onMouseUp:zt.exports.func,onNodeChange:zt.exports.func,onObjectResizeStart:zt.exports.func,onObjectResized:zt.exports.func,onObjectSelected:zt.exports.func,onPaste:zt.exports.func,onPostProcess:zt.exports.func,onPostRender:zt.exports.func,onPreProcess:zt.exports.func,onProgressState:zt.exports.func,onRedo:zt.exports.func,onRemove:zt.exports.func,onReset:zt.exports.func,onSaveContent:zt.exports.func,onSelectionChange:zt.exports.func,onSetAttrib:zt.exports.func,onSetContent:zt.exports.func,onShow:zt.exports.func,onSubmit:zt.exports.func,onUndo:zt.exports.func,onVisualAid:zt.exports.func,onSkinLoadError:zt.exports.func,onThemeLoadError:zt.exports.func,onModelLoadError:zt.exports.func,onPluginLoadError:zt.exports.func,onIconsLoadError:zt.exports.func,onLanguageLoadError:zt.exports.func,onScriptsLoad:zt.exports.func,onScriptsLoadError:zt.exports.func},Y7=jE({apiKey:zt.exports.string,id:zt.exports.string,inline:zt.exports.bool,init:zt.exports.object,initialValue:zt.exports.string,onEditorChange:zt.exports.func,value:zt.exports.string,tagName:zt.exports.string,cloudChannel:zt.exports.string,plugins:zt.exports.oneOfType([zt.exports.string,zt.exports.array]),toolbar:zt.exports.oneOfType([zt.exports.string,zt.exports.array]),disabled:zt.exports.bool,textareaName:zt.exports.string,tinymceScriptSrc:zt.exports.oneOfType([zt.exports.string,zt.exports.arrayOf(zt.exports.string),zt.exports.arrayOf(zt.exports.shape({src:zt.exports.string,async:zt.exports.bool,defer:zt.exports.bool}))]),rollback:zt.exports.oneOfType([zt.exports.number,zt.exports.oneOf([!1])]),scriptLoading:zt.exports.shape({async:zt.exports.bool,defer:zt.exports.bool,delay:zt.exports.number})},F3),Kb=function(e){return typeof e=="function"},nI=function(e){return e in F3},rI=function(e){return e.substr(2)},J7=function(e,t,n,r,a,c,d){var o=Object.keys(a).filter(nI),v=Object.keys(c).filter(nI),C=o.filter(function(D){return c[D]===void 0}),I=v.filter(function(D){return a[D]===void 0});C.forEach(function(D){var F=rI(D),U=d[F];n(F,U),delete d[F]}),I.forEach(function(D){var F=r(e,D),U=rI(D);d[U]=F,t(U,F)})},Q7=function(e,t,n,r,a){return J7(a,e.on.bind(e),e.off.bind(e),function(c,d){return function(o){var v;return(v=c(d))===null||v===void 0?void 0:v(o,e)}},t,n,r)},iI=0,N3=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return iI++,e+"_"+n+iI+String(t)},oI=function(e){return e!==null&&(e.tagName.toLowerCase()==="textarea"||e.tagName.toLowerCase()==="input")},aI=function(e){return typeof e=="undefined"||e===""?[]:Array.isArray(e)?e:e.split(" ")},e8=function(e,t){return aI(e).concat(aI(t))},t8=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},n8=function(e){if(!("isConnected"in Node.prototype)){for(var t=e,n=e.parentNode;n!=null;)t=n,n=t.parentNode;return t===e.ownerDocument}return e.isConnected},sI=function(e,t){e!==void 0&&(e.mode!=null&&typeof e.mode=="object"&&typeof e.mode.set=="function"?e.mode.set(t):e.setMode(t))},VE=globalThis&&globalThis.__assign||function(){return VE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},VE.apply(this,arguments)},r8=function(e,t,n){var r,a,c=e.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=t.id,c.src=t.src,c.async=(r=t.async)!==null&&r!==void 0?r:!1,c.defer=(a=t.defer)!==null&&a!==void 0?a:!1;var d=function(){c.removeEventListener("load",d),c.removeEventListener("error",o),n(t.src)},o=function(v){c.removeEventListener("load",d),c.removeEventListener("error",o),n(t.src,v)};c.addEventListener("load",d),c.addEventListener("error",o),e.head&&e.head.appendChild(c)},i8=function(e){var t={},n=function(d,o){var v=t[d];v.done=!0,v.error=o;for(var C=0,I=v.handlers;C<I.length;C++){var D=I[C];D(d,o)}v.handlers=[]},r=function(d,o,v){var C=function(q){return v!==void 0?v(q):console.error(q)};if(d.length===0){C(new Error("At least one script must be provided"));return}for(var I=0,D=!1,F=function(q,z){D||(z?(D=!0,C(z)):++I===d.length&&o())},U=0,j=d;U<j.length;U++){var T=j[U],H=t[T.src];if(H)H.done?F(T.src,H.error):H.handlers.push(F);else{var N=N3("tiny-");t[T.src]={id:N,src:T.src,done:!1,error:null,handlers:[F]},r8(e,VE({id:N},T),n)}}},a=function(){for(var d,o=0,v=Object.values(t);o<v.length;o++){var C=v[o],I=e.getElementById(C.id);I!=null&&I.tagName==="SCRIPT"&&((d=I.parentNode)===null||d===void 0||d.removeChild(I))}t={}},c=function(){return e};return{loadScripts:r,deleteScripts:a,getDocument:c}},o8=function(){var e=[],t=function(a){var c=e.find(function(d){return d.getDocument()===a});return c===void 0&&(c=i8(a),e.push(c)),c},n=function(a,c,d,o,v){var C=function(){return t(a).loadScripts(c,o,v)};d>0?setTimeout(C,d):C()},r=function(){for(var a=e.pop();a!=null;a=e.pop())a.deleteScripts()};return{loadList:n,reinitialize:r}},a8=o8(),Yb=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},s8=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dx=globalThis&&globalThis.__assign||function(){return dx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},dx.apply(this,arguments)},l8=function(e){s8(t,e);function t(n){var r=this,a,c,d;return r=e.call(this,n)||this,r.rollbackTimer=void 0,r.valueCursor=void 0,r.rollbackChange=function(){var o=r.editor,v=r.props.value;o&&v&&v!==r.currentContent&&o.undoManager.ignore(function(){if(o.setContent(v),r.valueCursor&&(!r.inline||o.hasFocus()))try{o.selection.moveToBookmark(r.valueCursor)}catch{}}),r.rollbackTimer=void 0},r.handleBeforeInput=function(o){if(r.props.value!==void 0&&r.props.value===r.currentContent&&r.editor&&(!r.inline||r.editor.hasFocus()))try{r.valueCursor=r.editor.selection.getBookmark(3)}catch{}},r.handleBeforeInputSpecial=function(o){(o.key==="Enter"||o.key==="Backspace"||o.key==="Delete")&&r.handleBeforeInput(o)},r.handleEditorChange=function(o){var v=r.editor;if(v&&v.initialized){var C=v.getContent();r.props.value!==void 0&&r.props.value!==C&&r.props.rollback!==!1&&(r.rollbackTimer||(r.rollbackTimer=window.setTimeout(r.rollbackChange,typeof r.props.rollback=="number"?r.props.rollback:200))),C!==r.currentContent&&(r.currentContent=C,Kb(r.props.onEditorChange)&&r.props.onEditorChange(C,v))}},r.handleEditorChangeSpecial=function(o){(o.key==="Backspace"||o.key==="Delete")&&r.handleEditorChange(o)},r.initialise=function(o){var v,C,I;o===void 0&&(o=0);var D=r.elementRef.current;if(!!D){if(!n8(D)){if(o===0)setTimeout(function(){return r.initialise(1)},1);else if(o<100)setTimeout(function(){return r.initialise(o+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var F=Yb(r.view);if(!F)throw new Error("tinymce should have been loaded into global scope");var U=dx(dx({},r.props.init),{selector:void 0,target:D,readonly:r.props.disabled,inline:r.inline,plugins:e8((v=r.props.init)===null||v===void 0?void 0:v.plugins,r.props.plugins),toolbar:(C=r.props.toolbar)!==null&&C!==void 0?C:(I=r.props.init)===null||I===void 0?void 0:I.toolbar,setup:function(j){r.editor=j,r.bindHandlers({}),r.inline&&!oI(D)&&j.once("PostRender",function(T){j.setContent(r.getInitialValue(),{no_events:!0})}),r.props.init&&Kb(r.props.init.setup)&&r.props.init.setup(j)},init_instance_callback:function(j){var T,H,N=r.getInitialValue();r.currentContent=(T=r.currentContent)!==null&&T!==void 0?T:j.getContent(),r.currentContent!==N&&(r.currentContent=N,j.setContent(N),j.undoManager.clear(),j.undoManager.add(),j.setDirty(!1));var q=(H=r.props.disabled)!==null&&H!==void 0?H:!1;sI(r.editor,q?"readonly":"design"),r.props.init&&Kb(r.props.init.init_instance_callback)&&r.props.init.init_instance_callback(j)}});r.inline||(D.style.visibility=""),oI(D)&&(D.value=r.getInitialValue()),F.init(U)}},r.id=r.props.id||N3("tiny-react"),r.elementRef=m.exports.createRef(),r.inline=(d=(a=r.props.inline)!==null&&a!==void 0?a:(c=r.props.init)===null||c===void 0?void 0:c.inline)!==null&&d!==void 0?d:!1,r.boundHandlers={},r}return Object.defineProperty(t.prototype,"view",{get:function(){var n,r;return(r=(n=this.elementRef.current)===null||n===void 0?void 0:n.ownerDocument.defaultView)!==null&&r!==void 0?r:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(n){var r=this,a,c;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(n),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==n.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var d=this.editor;d.undoManager.transact(function(){var v;if(!r.inline||d.hasFocus())try{v=d.selection.getBookmark(3)}catch{}var C=r.valueCursor;if(d.setContent(r.props.value),!r.inline||d.hasFocus())for(var I=0,D=[v,C];I<D.length;I++){var F=D[I];if(F)try{d.selection.moveToBookmark(F),r.valueCursor=F;break}catch{}}})}if(this.props.disabled!==n.disabled){var o=(c=this.props.disabled)!==null&&c!==void 0?c:!1;sI(this.editor,o?"readonly":"design")}}},t.prototype.componentDidMount=function(){var n=this,r,a,c,d,o;if(Yb(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(a=(r=this.props).onScriptsLoadError)===null||a===void 0||a.call(r,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((c=this.elementRef.current)===null||c===void 0)&&c.ownerDocument){var v=function(){var I,D;(D=(I=n.props).onScriptsLoad)===null||D===void 0||D.call(I),n.initialise()},C=function(I){var D,F;(F=(D=n.props).onScriptsLoadError)===null||F===void 0||F.call(D,I)};a8.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(o=(d=this.props.scriptLoading)===null||d===void 0?void 0:d.delay)!==null&&o!==void 0?o:0,v,C)}},t.prototype.componentWillUnmount=function(){var n=this,r=this.editor;r&&(r.off(this.changeEvents(),this.handleEditorChange),r.off(this.beforeInputEvent(),this.handleBeforeInput),r.off("keypress",this.handleEditorChangeSpecial),r.off("keydown",this.handleBeforeInputSpecial),r.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){r.off(a,n.boundHandlers[a])}),this.boundHandlers={},r.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var n,r,a,c=(a=(r=(n=Yb(this.view))===null||n===void 0?void 0:n.Env)===null||r===void 0?void 0:r.browser)===null||a===void 0?void 0:a.isIE();return c?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return t8()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var n=this.props.tagName,r=n===void 0?"div":n;return m.exports.createElement(r,{ref:this.elementRef,id:this.id})},t.prototype.renderIframe=function(){return m.exports.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},t.prototype.getScriptSources=function(){var n,r,a=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.async,c=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:a,defer:c}]:this.props.tinymceScriptSrc.map(function(C){return typeof C=="string"?{src:C,async:a,defer:c}:C});var d=this.props.cloudChannel,o=this.props.apiKey?this.props.apiKey:"no-api-key",v="https://cdn.tiny.cloud/1/".concat(o,"/tinymce/").concat(d,"/tinymce.min.js");return[{src:v,async:a,defer:c}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(n){var r=this;if(this.editor!==void 0){Q7(this.editor,n,this.props,this.boundHandlers,function(o){return r.props[o]});var a=function(o){return o.onEditorChange!==void 0||o.value!==void 0},c=a(n),d=a(this.props);!c&&d?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):c&&!d&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=Y7,t.defaultProps={cloudChannel:"6"},t}(m.exports.Component);const u8=()=>{const e=Kx(),t=Si(),n=e.get("feed"),[r,a]=m.exports.useState(!1);m.exports.useRef(null),m.exports.useEffect(()=>{document.title="Announcements | Metropolis"},[]);const c=d=>T3.map(o=>{const v=o.id===d?"header header-active":"header";return m.exports.createElement("li",{key:o.id,className:v,onClick:()=>t(`/announcements?feed=${o.id}`)},o.text)});return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"static/css/announcement-list.css"}),m.exports.createElement(d8,{openCreator:r,setOpenCreator:a}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"headers header-row"},m.exports.createElement("ul",null,c(n)),m.exports.createElement("a",{className:"btn-small waves-light red",href:"#modal1",onClick:d=>{if(d.preventDefault(),!go()){t("/accounts/login");return}M.Modal.getInstance(document.getElementById("announcement-creator")).open()}},m.exports.createElement("i",{className:"material-icons"},"add"))),m.exports.createElement("div",{className:"card-container"},m.exports.createElement("div",{className:"cards",id:"cards-all"},c8()))))},c8=()=>{const e=m.exports.useContext(Hr);m.exports.useEffect(()=>{const c=`${lr.OBJECT}/announcement`;e.getAPI(c,!1).then(d=>{n(d.data.results)}).catch(d=>{e.refreshAuth()}),e.getAPI(`${lr.OBJECT}/tag`,!1).then(d=>{const o=d.data.results;a(o)}).catch(()=>{e.refreshAuth()})},[]);const[t,n]=m.exports.useState([]),[r,a]=m.exports.useState([]);return t.map(c=>{let d=[];for(let o=0;o<c.tags.length;o++)for(let v=0;v<r.length;v++)c.tags[o]==r[v].id&&d.push(r[v]);return m.exports.createElement(h8,{key:c.id,announcement:c,tags:d})})},h8=e=>{const t=e.announcement,n=m.exports.useContext(Hr);let r=n.allOrgs.find(c=>c.id===t.organization),a=n.allUsers.find(c=>c.id===t.author);return r&&a?m.exports.createElement("div",{className:"card"},m.exports.createElement("div",{className:"card-headers"},m.exports.createElement("div",{className:"tag-section"},e.tags.map(c=>m.exports.createElement(_g,{key:c.id,tag:c}))),m.exports.createElement("h1",{className:"title"},t.title),m.exports.createElement("div",{className:"card-authors"},m.exports.createElement("div",{className:"card-authors-image"},m.exports.createElement(Yt,{to:`/club/${t.organization}`},m.exports.createElement("img",{className:"circle",src:a.gravatar_url}))),m.exports.createElement("div",{className:"card-authors-text"},m.exports.createElement(Yt,{to:`/club/${t.organization}`,className:"link"},r.name),",",m.exports.createElement(Yt,{to:`/user/${t.author}`,className:"link"},`${a.first_name} ${a.last_name}`),m.exports.createElement("br",null),"\u2022 ",new Date(t.created_date).toLocaleTimeString(void 0,Yx)))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"card-body"},t.body),m.exports.createElement("br",null),m.exports.createElement(Yt,{className:"link",to:`/announcement/${t.id}`},"See announcement ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))):m.exports.createElement(m.exports.Fragment,null)},d8=e=>{e.openCreator,e.setOpenCreator,m.exports.useState(!1);const t=m.exports.useContext(Hr),{register:n,handleSubmit:r,watch:a,formState:{errors:c}}=LS(),[d,o]=m.exports.useState("");m.exports.useState([]),t.allOrgs.map(C=>C.name);const v=C=>{t.postAPI(`${lr.OBJECT}/announcement/new`,{...C}).then(()=>{console.log("Announcement created successfully")}).catch(I=>{console.log("Error:",I)})};return m.exports.createElement("div",{id:"announcement-creator",className:"modal"},m.exports.createElement("div",{className:"modal-top modal-header"},m.exports.createElement("h5",{className:"header-announcement"},"Add Announcement")),m.exports.createElement("form",{className:"signup",onSubmit:r(v),style:{paddingLeft:"1rem",paddingTop:"1rem"}},m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_title"},"Title:"),m.exports.createElement("input",{...n("title"),type:"text",name:"title",required:!0,id:"id_title",style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABHklEQVQ4EaVTO26DQBD1ohQWaS2lg9JybZ+AK7hNwx2oIoVf4UPQ0Lj1FdKktevIpel8AKNUkDcWMxpgSaIEaTVv3sx7uztiTdu2s/98DywOw3Dued4Who/M2aIx5lZV1aEsy0+qiwHELyi+Ytl0PQ69SxAxkWIA4RMRTdNsKE59juMcuZd6xIAFeZ6fGCdJ8kY4y7KAuTRNGd7jyEBXsdOPE3a0QGPsniOnnYMO67LgSQN9T41F2QGrQRRFCwyzoIF2qyBuKKbcOgPXdVeY9rMWgNsjf9ccYesJhk3f5dYT1HX9gR0LLQR30TnjkUEcx2uIuS4RnI+aj6sJR0AM8AaumPaM/rRehyWhXqbFAA9kh3/8/NvHxAYGAsZ/il8IalkCLBfNVAAAAABJRU5ErkJggg==&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement(m.exports.Fragment,null,m.exports.createElement(l8,{apiKey:"your-api-key",onInit:(C,I)=>{},init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_org"},"Organization:"),m.exports.createElement("br",null),m.exports.createElement("select",{...n("organization"),className:"browser-default"},t.allOrgs.map(C=>m.exports.createElement("option",{key:C.id,value:C.id},C.name))))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_show_after"},"Show After:"),m.exports.createElement("input",{...n("show_after"),type:"text",name:"show_after",minLength:1,required:!0,id:"id_show_after"}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_supervisor"},"Supervisor:"),m.exports.createElement("input",{...n("supervisor"),type:"text",name:"supervisor",minLength:1,required:!0,id:"id_supervisor"}))),d&&m.exports.createElement("span",{className:"form-error"},m.exports.createElement("div",{className:"form-errors"},m.exports.createElement("i",{className:"material-icons"},"warning"),m.exports.createElement(m.exports.Fragment,null,d))),m.exports.createElement("div",{className:"modal-footer"},m.exports.createElement("a",{href:"#!",className:"modal-close waves-effect waves-red btn-flat"},"Cancel"),m.exports.createElement("button",{className:"waves-effect waves-green btn",type:"submit"},"Create!"))))},lI=()=>m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("div",{className:"content",id:"content-history"},m.exports.createElement("h1",{className:"title"},"Welcome to the Lyon's Den"),m.exports.createElement("hr",null),m.exports.createElement("h2",{className:"subtitle"},"Home and Pride of the Mackenzie Lyons circa 1960"),m.exports.createElement("p",{className:"text"},"William Lyon Mackenzie C. I. is a Toronto District Secondary School opened in 1960 and located in North York. Mackenzie was named after the historical prowess William Lyon Mackenzie, the political agitator who led the government revolt in Toronto in 1837. In its years of establishing a home of blue and gold, William Lyon Mackenzie Collegiate not only built an incredible student body of 1500 strong, but also a strong, tight knit community that prides itself on multicultural diversity, inclusion, creativity and academic innovation. And, here is where the heart and soul of the Lyon Pride resound."),m.exports.createElement("p",{className:"text"},"William Lyon Mackenzie Collegiate boasts scholastic excellence in its academic programing: the MaCS enrichment program, the Gifted Program, the ELL program, the Advanced Placement Program, and the FIT program. Collectively, these programs have helped nurture student voice and advocacy and inspire a variety of extracurricular opportunities from clubs and councils to intramurals and athletics, to school-wide events and initiatives, all of which beautifully reflect the spirit of membership - the roar of the Lyon Pride."))),p8=()=>m.exports.createElement("div",{className:"content",id:"content-about"},m.exports.createElement("h1",{className:"title"},"Our Vision"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"By definition, a metropolis is a significant cultural center of a country or region and a central hub for regional connections and communications. Likewise, it is our goal at Project Metropolis to create a centralized website at WLMAC where all students can easily access and share information with their peers, making this our own, online metropolis."),m.exports.createElement("h1",{className:"title"},"About the Site"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"The Mackenzie Lyon's Den (Project Metropolis) is a student-driven website that showcases the best of Mackenzie's pride; a central microcosm and communication hub, rich in representing the diverse facets of student life. Welcome to the Lyon's Den, the first stop to find out more about Mackenzie, its school-wide activities, events, initiatives, clubs and councils, Student Council offerings, creative student voice and essential resources to enrich Mackenzie student life!"),m.exports.createElement("p",{className:"text"},"Our site will continue to roll out new features and updates in the coming months. Users can look forward to a notification system, searching system, and a mobile app.")),f8=()=>m.exports.createElement("div",{className:"content",id:"content-team"},m.exports.createElement("h1",{className:"title"},"Our Team"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"A diverse group of 28 developers, artists, and creators worked in tandem to build this site."),m.exports.createElement("h1",{className:"title"},"Members"),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Project Manager"),m.exports.createElement(Yt,{to:"/user/justinlu"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/7fdefdebc57e64f410fc3b750fcd9c3b.jpeg"})),m.exports.createElement("div",{className:"member-text"},"Justin Lu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Saying Justin Lu is only the project manager would be an understatement. He has worked at all ends of development: designed the overall website, recruited/selected other team members, created front-end pages, and as a whole has championed Project Metropolis since its inception in May. When Justin's not dealing with Vice-President responsibilities or schoolwork, he fanboys Johnny Harris (like a true Canadian), grinds the heck out of Genshin Impact, and tries to "live without regret," to varying degrees of success. He's also obsessed with macOS keyboard shortcuts - some of his favourites are CMD + OPT + SHIFT + V and KLDSJFSDF.`)))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Frontend Developers"),m.exports.createElement(Yt,{to:"/user/toaster203"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/9754b27ccb9a2ac1215d2386fddeb9b5"})),m.exports.createElement("div",{className:"member-text"},"Hazel Guo")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Just like her valued (and preferably spicy) noodles, Hazel is brimming with warmth, solace, and a dash of ardor. She is as relatable as a frontend developer can get, with her acknowledgement of procrastination and zeal for grinding Monkeytype. She is also as cool as one gets, being a spirited chess player and hockey fan. No true Canadian, nor Lyon for that matter, will ever feel lonely at a hockey game with Hazel who supports the Leafs (and especially enjoys watching them throw leads!) with all her heart."))),m.exports.createElement(Yt,{to:"/user/lindiana"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/86b23d037b2c9a97930f1d6e727f87bd"})),m.exports.createElement("div",{className:"member-text"},"Diana Lin")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Just like her work, Diana's taste is authentic; for her, life just wouldn't be the same without peanut sauce and noodles. Neither can she go without highly recommending Mini Motorways to anyone with an assignment due tomorrow."))),m.exports.createElement(Yt,{to:"/user/ji.mmyliu"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/df0681c6201aa5fb2928af7bf9b02019"})),m.exports.createElement("div",{className:"member-text"},"Jimmy Liu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},'If one is in search of a teenager who manifests the spirit of a fresh, ambitious adolescent all with wholesomeness, they need not look further than Jimmy. An admirable conqueror of math, chess, competitive programming, and software development, Jimmy is also a badminton enthusiast. He takes his athletic abilities on screen too, surfing Nintendo Wii, and Mario Kart with a particular drive. On a final note, Jimmy, whose opinions are justified by his loving of sushi, lives by the words, "Try your best and forget the rest."'))),m.exports.createElement(Yt,{to:"/user/AavaSapkota"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/9e6b8d23f6da43a8c4537b2272166622"})),m.exports.createElement("div",{className:"member-text"},"Aava Sapkota")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Passionate, avid, and bearing a sharp eye for masterful world-building and science, Aava designed the school map and its remarkable features. In addition, she is an adamant advocate of sci-fi fantasy author Brandon Sanderson and cherishes WLMAC's science and math teachers for their efforts and talents. Alas, physics lessons aren't enough to ward one away from daredevil stunts; Aava has bungee jumping on her bucket list."))),m.exports.createElement(Yt,{to:"/user/rcshim04"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/0eeae9c7eeb7bb5ecb6e0ae45d1462a7.jpeg"})),m.exports.createElement("div",{className:"member-text"},"Eric Shim")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Eric Shim may be the closest person within our staff to a weeb. He is somehow so sharp witted and sui generis that his talents would be wasted if he were not here, tasked with creating the announcement and blog pages as well as fixing much of the errors found during QA (quality assurance) testing. Eric is easygoing, knowledgeable, and a great source of inside jokes (case in point: \u591C\u6838). He spends his spare time writing music arrangements, reading manga and light novels, regularly updating his Discord statuses and names in Japanese, and immersing himself in new languages."))),m.exports.createElement(Yt,{to:"/user/V1ad20"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/f757e632464313749ed5aaf28af2027f"})),m.exports.createElement("div",{className:"member-text"},"Vlad Surdu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Considering his breadth of initiatives and values, Vlad is at once human and superhuman. He applied his knowledge of HTML/CSS/JS and React Native to a broad range of tasks involving the styling of the app's window screens as well as polishing styles and functionalities pertaining to the website's map and calendar. Often you will find Vlad on a bike ride, at the gym, or in his room developing a website for his international students."))),m.exports.createElement(Yt,{to:"/user/Trentium"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/8d43abe4e1b9edf939344283117aa5c9.png"})),m.exports.createElement("div",{className:"member-text"},"Daniel Ye")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Although Daniel first joined the staff team as a learning experience, he has become someone reliable and integral to the development of Metropolis. Web development aside, he is not afraid to meet new people and help others, though he innately wishes for better social skills (and unlimited white tuna sushi, but that's beside the point). You can find Daniel on the Valorant grind with his friends or binging three anime seasons in one sitting."))),m.exports.createElement(Yt,{to:"/user/justinzhu"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/232c935ad6695b64b3e703edbca9bd1e.png"})),m.exports.createElement("div",{className:"member-text"},"Justin Zhu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"With wishes of becoming a video game director, Justin joined the team with the intentions of helping out and practicing his programming. Justin is the main developer behind the club pages, but he regularly assists with all parts of web development, spreading the twin gospels of Pokemon and anime along the way.")))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Backend Developers"),m.exports.createElement(Yt,{to:"/user/4yfc"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/a307bdbc3b0ca9ec1b0168324a82b514.png"})),m.exports.createElement("div",{className:"member-text"},"Ivy Fan-Chiang")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Ivy's back-end development duties entail some incredibly immersive work such as dealing with the site's REST API, database models, and calendar. A loyal and supportive friend through and through, Ivy joined the initiative upon hearing the call. They also save time for playing the flute and 3-D printing."))),m.exports.createElement(Yt,{to:"/user/enigma"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/35ff3331dedfa13707c8a63f450d4f0c"})),m.exports.createElement("div",{className:"member-text"},"Paul Lee")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Regarded as a central member of the team and known as a full stack developer, Paul is responsible for bringing the site and app to life through his work in API development and in the back-end framework Django. Paul's ingenuity and intelligence is matched with patience and a willingness to help others with whatever they need. He is not only a valuable member of Project Metropolis, but also a reliable friend to go to when you have absolutely no clue about how a database works. Aside from the outstanding work he does, Paul can be found on Discord using :monkey: to describe a variety of complex emotions."))),m.exports.createElement(Yt,{to:"/user/nyiyui"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/b2849e92834ef2f2525b035525308d59"})),m.exports.createElement("div",{className:"member-text"},"Ken Shibata")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Ken is "someone who tries to keep things unambiguous." The aspiring software developer is straightforward and ambitious in all his conquests. If he could retake a course, he would go for French to improve his past performance, and the man makes a habit of reading one book per two days; 240,000 English words, hence his mastery of sporadically using oxford commas. If you'd like to obtain guidance from this tech, EDM, and literature lover, Ken would recommend K-On!, The Last Human, and \u541B\u306E\u540D\u306F.`))),m.exports.createElement(Yt,{to:"/user/retep"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/1a6513ef7af252142ae6a434a9d65afe.png"})),m.exports.createElement("div",{className:"member-text"},"Peter Ye")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`A man of classic and contemporary taste, Peter's all-time favourite music consists of "Bohemian Rhapsody" by Queen and "Night Burn" by Ben Segev. His wide range of interests, from "Lord of the Rings" and roller skating to coding and all boils down to dreams of being a software developer. He's certainly getting his training in - you can thank Peter for the timetable banner and authentication page updates. Being a Toronto Argonauts fan, one may find him throwing and kicking footballs during wellness breaks. In the meanwhile, he'll be relishing his dumplings and praying in advance to pass Grade 12 Chemistry next year.`)))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"App Developers"),m.exports.createElement(Yt,{to:"/user/ApocalypseCalculator"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/be07132d1837e31b9e123913dc261ffe.png"})),m.exports.createElement("div",{className:"member-text"},"Patrick Lin")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Patrick Lin is the main developer of the Metropolis app. An individual with distinct tastes and self-understanding, Patrick is both wildly talented and opinionated. His dev experience (and tech rep responsibilities) compelled him to join Project Metropolis, where he's managed to share his LEGO expertise and his love-hate relationship with programming. For Patrick, the greatest inventions of all time include hockey, science fiction dystopias, and thin-crust pizza (meat required)."))),m.exports.createElement(Yt,{to:"/user/AZron"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/4ae56b64044b964f90cad0ee61ad9999"})),m.exports.createElement("div",{className:"member-text"},"Aaron Zhu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Aaron is chivalrous, knowing and respecting his values, interests, and disinterests. He fittingly describes himself as outgoing - he likes being around other people and is passionate about what he pursues, so much so that on his bucket list is travelling the world. Currently, Aaron has taken on the excellent development opportunity that encompasses building Project Metropolis' mobile app. He loves programming (and school!) so much that his favourite subjects are ICS and TEJ, and he would even take ICS2 again, partial credits to Mr. Wong. A man who would wish for "more time" if he could, Aaron un(ironically) lives by the words "seek discomfort" and "work smart, not hard." You can find him playing Tetris, enjoying noodles and dumplings, listening to radio and Chinese pop, all while dreaming of being CEO of a company he founded and having a dog.`)))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Graphic Designers"),m.exports.createElement(Yt,{to:"/user/aliciachung"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/09dd528b306ef4dd7c8758708f708f96"})),m.exports.createElement("div",{className:"member-text"},"Alicia Chung")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Just as her artistic touch is perfectly poignant, Alicia knows how to paint between the lines of on-point and venturesome; She has the drive and confidence to pursue her passions and yearnings given that they are genuinely her heart's desires. As of now, her affections lie with the book that enkindled 35 straight minutes of tears, "The Book Thief," and pho. In the future, Alicia intends to travel the world, alone or with company, and broaden her horizons of diverse cultures, foods, and landscapes.`))),m.exports.createElement(Yt,{to:"/user/nisu"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/5f2df3b2844836244aa1f93f3b033166.jpeg"})),m.exports.createElement("div",{className:"member-text"},"Nicole Cui")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Mind constantly brimming with a myriad of ideas along with the drive to make them happen, Nicole yearns to both reach for heaven (see the northern lights) and stay grounded (go camping in Algonquin Park), all while keeping up to date with her MasterChef videos. She's also passionate about digital art and multiplayer video games like Overcooked, Stardew Valley, and (like half our staff) Valorant."))),m.exports.createElement(Yt,{to:"/user/zozoe_fc"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/97c77dfe5e67cc2c4c30e15f51facaa8.png"})),m.exports.createElement("div",{className:"member-text"},"Zoe Fan-Chiang")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`To put it simply, Zoe knows what she's doing. Already a master of balancing when to listen to others and when to follow her own path, Zoe's joining Project Metropolis was a decision our dear graphic designer made because "Chelc said join and i listened because it's Chelc :D" A true Canadian, Zoe curls too, and a true artist with soul, she is also the only oboeist at WLMAC. Zoe intends to continue living her life listening (to Chelc), doing her best, and designing graphics.`))),m.exports.createElement(Yt,{to:"/user/SidewalkSkunk"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/f10c88679075d6b1aab0aa27f6023c26"})),m.exports.createElement("div",{className:"member-text"},"Derek Ma")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Derek Ma has such a bland personality he knows it. While others describe him as intimidating, Derek uses his suspiciously unsourced British-ism to describe himself as "conscientious"  and embrace his appreciation for good manners. Jokes aside, Derek's a genuinely good person. Like anyone with decent taste, his favourite food is lasagna. Like any true WLMAC patriot, his favourite part about the school is the geese. And like any stereotypical tryhard, Derek would retake ICS if he could and he dreams of being an investment banker. On his bucket list, constructed from his stonks, cinematography, and computer hardware interests is building a computer, whaling on at least one character in Genshin Impact, and making it to retirement. Old age seems to be a genuine fear since Derek would wish, if he could, to advance healthcare to the point of curing ageing. However, we'll never know too much about the man who claims a cool fact about himself is that he likes starting fires. In a fireplace.`))),m.exports.createElement(Yt,{to:"/user/cheollie"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/07eb7d43c09e6a8b541b0113846d41fa.png"})),m.exports.createElement("div",{className:"member-text"},"Chelsea W")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Chelsea is the shortest person in our staff. All illustrations on the website, from the map to the login graphics, are her original work, truly a testament to how height doesn't mean everything. All jokes aside, Chelsea also runs her own music corner, creates her own calligraphy, and wastes her own life away watching cheesy K-dramas."))),m.exports.createElement(Yt,{to:"/user/Neko"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/3ce2bd07d903482f99d0a111913f5b68"})),m.exports.createElement("div",{className:"member-text"},"Connie Zhang")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Connie Zhang is a fine example of someone who knows where and if her tastes lie, and based on that, makes the decisions that shape her authenticity. According to she who describes herself as "incredibly passive," Connie applied to Project Metropolis half-expecting to get rejected. However, her passion, including her fondness of horror, is exactly what our team values. Her spicy fancies, from dying her hair pastel pink to eating instant noodles so hot she can't taste anything else, make Connie super cool. If that isn't enough to get you to stop and stare, Connie's art is so good the artist herself states that she'd rather the fashion of the clothes she likes drawing over the world's mode manias.`)))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Content Creators"),m.exports.createElement(Yt,{to:"/user/misheel.bt"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/ee83f2c6818c6891b878d44f25f7ba3a.jpeg"})),m.exports.createElement("div",{className:"member-text"},"Misheel Batkhuu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"The resident writer of Project Metropolis, Misheel has also taken up the role of 'chief tormentor of Bernie' within the Metropolis staff. Overwhelmingly brimming with energy and positivity, she sets herself apart from others not because of academic skill, but because of her willingness to try anything and everything. Not to say that she's academically lacking, however\u2014her love of science would say otherwise. If you want to talk about karate, yoga, oatmeal, or are just a diehard romantic, Misheel is here for you."))),m.exports.createElement(Yt,{to:"/user/carminite"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/c643df5412333b47a4d948c9f1712fa2.png"})),m.exports.createElement("div",{className:"member-text"},"Bernie Chen")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Although Bernie has a tendency to portray himself as a typical nerd, one look at his character would suffice to prove he is anything but inauthentic. With a genuine love for the piano and sandbox games, he dreams of being a video game composer. However, just like the rest of us, Bernie admits WLMAC deserves what Project Metropolis will foster\u2026 in the meantime, he recommends broadening your horizons by trying some \u5C0F\u7B3C\u5305."))),m.exports.createElement(Yt,{to:"/user/julianne.ylh"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/e682d8fe14389324d47019ca3a4dd625"})),m.exports.createElement("div",{className:"member-text"},"Julianne Ho")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"A baker, gardener, painter, birdER, And dancer with five years of rhythmic gymnastics background, Julianne is raging with talent and passion of a caliber one would only believe if they saw it with their own eyes. Bright-eyed herself, Julianne describes herself as \u201Ca person who really enjoys the little things in life.\u201D Diligent as she is, Julianne\u2019s bucket list actually stands a chance at being realized because she\u2019s already on it: getting back to rock climbing and learning ASL. If the girl is starting to look too intimidating, she offers her comfort song: Castle Town by Toby Fox. As for why she\u2019s here on Project Metropolis, the Laufey lover intends to give WLMAC some fun content to enjoy and, definitely not more importantly, help the team get sleep."))),m.exports.createElement(Yt,{to:"/user/celine_celestium"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/98bdd04ab9b2ac08c35f133ee2493cb8"})),m.exports.createElement("div",{className:"member-text"},"Celine Hwang")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`With her soulful heart, Celine is sure to make a lasting impact wherever she sets foot; quite literally, as she is a cardinal member of the Mac Dance Team. Her favourite movies are empowering rom-com hits from the 90s/200s, including Mean Girls and Legally Blonde, and her music taste extends from Ariana Grande to Blackpink. For Celine, Project Metropolis means an opportunity, not only to work with fellow (math) savants but to ensure WLMAC's ears are open to good music. For now, she would highly recommend listening to Eighteen by Key. To reinforce her wish for everyone to look back on life with no regrets, here are the song lyrics Celine lives by, "My mama said I'm living today for tomorrow, my daddy said it won't be easy but that's life, you only live once."`))),m.exports.createElement(Yt,{to:"/user/hassankhan8868"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/16eee7097593979cb312ab378cddb9e3"})),m.exports.createElement("div",{className:"member-text"},"Hassan Khan")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Wholesome and compassionate, Hassan is a cinnamon bun that makes sweetness all but natural and life hopeful. He joined Project Metropolis because he wanted to contribute to a place that genuinely informs and connects students. To thank him for his heroism, or just to hear about his endeavours, you can find Hassan chilling with music - likely soft indie, - dystopian lits, thrillers, or, if you're lucky enough to find him tired, a cheesy romance. In the future, though, you'll be more likely to find the man a journalist or professor, living his dream.")))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Game Developers"),m.exports.createElement(Yt,{to:"/user/3xp3rtz"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/a02b6f6eef8301cdbee1b398bec869a8"})),m.exports.createElement("div",{className:"member-text"},"Caleb Chue")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Caleb is special in many ways, most good, some cool, and others still, merely special. There's the honest confession that he measures 154cm in height. Then there's the "orz"-inducing declaration that he spends his spare time programming, creating minigames like Mahjong and Tetris, and dedicating/sacrificing some more time/sleep to perfecting them. The most wonderful part about Caleb, though, asides from his love of glitch-hop/jpop, badminton, and curling, is that he is one of those rare golden souls that genuinely lives by words like, "treat others the way you want to be treated" and " you fail, you forget." Welp, everyone will be failing to forget Caleb.`))),m.exports.createElement(Yt,{to:"/user/Maplefin"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/1a67ed933f725ecacab937b65c2fb9e2.jpeg"})),m.exports.createElement("div",{className:"member-text"},"James Huynh")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`A video game and keyboard hobbyist, the things that make James James are also what make him a slick game developer for Mac Lyons' Den. His favourite game is "Control" and he immerses himself wholeheartedly in the realm of alternative/modern rock like Twenty One Pilots, Half-Alive, and Weathers. He interestingly and genuinely considers ICS his favourite subject. Most fascinating, however, James proclaims a passionate food predilection for all vegetables, raw or cooked.`))))),m8=()=>m.exports.createElement("div",{className:"content",id:"content-school"},m.exports.createElement("h1",{className:"title"},"Contact the School"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"Project Metropolis is a site affiliated with William Lyon Mackenzie Collegiate Institute. To contact the school, please refer to the channels of communication listed below."),m.exports.createElement("ul",{className:"link-section"},m.exports.createElement("div",null,m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"https://wlmac.ca/",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-link zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"WLMCI Offical Website"))),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"https://goo.gl/maps/WyfTKUqKrbecU4RE9",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-map zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"20 Tillplain Road, North York, ON M3H 5R2"))),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"tel:4163953330"},m.exports.createElement("i",{className:"zmdi zmdi-phone zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"(416) 395-3330"))))),m.exports.createElement("h2",{className:"subtitle"},"Admin"),m.exports.createElement("hr",null),m.exports.createElement("ul",{className:"link-section"},m.exports.createElement("div",null,m.exports.createElement("h3",{className:"section-title"},"Principal"),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"mailto:keith.johnson@tdsb.on.ca",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"Keith Johnson (keith.johnson@tdsb.on.ca)"))),m.exports.createElement("h3",{className:"section-title"},"Vice Principals"),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"mailto:joanne.d'addio@tdsb.on.ca",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"Joanne D'Addio (joanne.d'addio@tdsb.on.ca)"))),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"mailto:stephen.morris@tdsb.on.ca",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"Stephen Morris (stephen.morris@tdsb.on.ca)")))))),g8=()=>m.exports.createElement("div",{className:"content",id:"content-contact"},m.exports.createElement("h1",{className:"title"},"Contact Us"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"If you ever find bugs or problems with the site, or need to be granted the staff status, feel free to ",m.exports.createElement(Yt,{className:"link",to:"mailto:hello@maclyonsden.com",target:"_blank"},"email")," us or use the form below."),m.exports.createElement("ul",{className:"link-section"},m.exports.createElement("div",null,m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"mailto:hello@maclyonsden.com",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"hello@maclyonsden.com"))),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"https://github.com/wlmac",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-github zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"wlmac"))),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"https://www.instagram.com/wlmac.sac/",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-instagram zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"@wlmac.sac"))),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"https://www.facebook.com/groups/keeptrackofmac",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-facebook-box zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"Keep Track of MAC"))))),m.exports.createElement("br",null),m.exports.createElement("div",{className:"content-embed"},m.exports.createElement("iframe",{src:"./About _ Metropolis_files/viewform.html",frameBorder:0,marginHeight:0,marginWidth:0},"Loading\u2026"))),$E=[{id:"history",text:"WLMCI",path:"/about?tab=history",component:lI},{id:"about",text:"ABOUT",path:"/about?tab=about",component:p8},{id:"team",text:"TEAM",path:"/about?tab=team",component:f8},{id:"map",text:"MAP",path:"/map",component:lI},{id:"school",text:"CONTACT WLMCI",path:"/about?tab=school",component:m8},{id:"contact",text:"CONTACT US",path:"/about?tab=contact",component:g8}],uI=()=>{const t=Kx().get("tab"),n=Si();m.exports.useEffect(()=>{document.title="About | Metropolis"},[]);const r=a=>$E.map(c=>{const d=a===c.id?"header active":"header";return m.exports.createElement("li",{key:c.id,className:d,onClick:()=>n(c.path)},c.text)});return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"static/css/about.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"headers"},m.exports.createElement("ul",null,r(t))),m.exports.createElement("div",{className:"content-container"},m.exports.createElement(y8,{page:t}))))},y8=e=>{for(let t of $E)if(t.id===e.page)return m.exports.createElement(t.component);return m.exports.createElement($E[0].component)},v8=()=>(m.exports.useEffect(()=>{document.title="Clubs | Metropolis"},[]),Si(),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/club-list.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"card-container"},m.exports.createElement("div",{className:"legend"},m.exports.createElement("div",{className:"legend-items"},m.exports.createElement("div",{className:"green-square"}),m.exports.createElement("span",null,"Open Membership")),m.exports.createElement("div",{className:"legend-items"},m.exports.createElement("div",{className:"yellow-square"}," "),m.exports.createElement("span",null,"Accepting Applications")),m.exports.createElement("div",{className:"legend-items"},m.exports.createElement("div",{className:"red-square"}," "),m.exports.createElement("span",null,"Closed Applications"))),m.exports.createElement("div",{className:"cards"},_8()))))),_8=()=>{const e=m.exports.useContext(Hr),[t,n]=m.exports.useState([]),[r,a]=m.exports.useState([]);return m.exports.useEffect(()=>{const c=`${lr.OBJECT}/organization`;e.getAPI(c,!1).then(d=>{n(d.data.results)}).catch(d=>{e.refreshAuth()}),e.getAPI(`${lr.OBJECT}/tag`,!1).then(d=>{const o=d.data.results;a(o)}).catch(()=>{e.refreshAuth()})},[]),t.map(c=>{let d=[];for(let o=0;o<c.tags.length;o++)for(let v=0;v<r.length;v++)c.tags[o]==r[v].id&&d.push(r[v]);return m.exports.createElement(x8,{club:c,tags:d,key:c.id})})},x8=e=>{const t=e.club,[n,r]=m.exports.useState([]),a=m.exports.useContext(Hr),c=()=>t.is_open?"green":t.applications_open?"yellow":"red";return m.exports.useEffect(()=>{a.getAPI(`${lr.OBJECT}/tag`,!1).then(d=>{const o=d.data.results;r(o.map(v=>m.exports.createElement(_g,{tag:v})))}).catch(()=>{a.refreshAuth()})},[]),m.exports.createElement("div",{className:`card ${c()}-status`},m.exports.createElement("div",{className:"valign-wrapper"},m.exports.createElement("div",{className:"club-logo"},m.exports.createElement("img",{className:"circle",src:t.icon})),m.exports.createElement("h1",{className:"title link"},m.exports.createElement(Yt,{to:`/club/${t.id}`},t.name))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"club-description"},m.exports.createElement("p",null,t.bio)),m.exports.createElement("div",{className:"tag-section"},e.tags.map(d=>m.exports.createElement(_g,{key:d.id,tag:d}))))};(typeof globalThis!="undefined"?globalThis:window).FullCalendarVDom={Component:m.exports.Component,createElement:m.exports.createElement,render:Pu.exports.render,createRef:m.exports.createRef,Fragment:m.exports.Fragment,createContext:m.exports.createContext,createPortal:Pu.exports.createPortal,flushSync:b8,unmountComponentAtNode:Pu.exports.unmountComponentAtNode};function b8(e){e()}var HE=function(e,t){return HE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},HE(e,t)};function w8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");HE(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var WE=function(){return WE=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},WE.apply(this,arguments)};var GE=function(e,t){return GE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},GE(e,t)};function Ir(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");GE(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ft=function(){return ft=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},ft.apply(this,arguments)};function Ii(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,c;r<a;r++)(c||!(r in t))&&(c||(c=Array.prototype.slice.call(t,0,r)),c[r]=t[r]);return e.concat(c||Array.prototype.slice.call(t))}if(typeof FullCalendarVDom=="undefined")throw new Error("Please import the top-level fullcalendar lib before attempting to import a plugin.");var OS=FullCalendarVDom.Component,_t=FullCalendarVDom.createElement;FullCalendarVDom.render;var Ya=FullCalendarVDom.createRef,aa=FullCalendarVDom.Fragment,U3=FullCalendarVDom.createContext,E8=FullCalendarVDom.createPortal;FullCalendarVDom.flushSync;FullCalendarVDom.unmountComponentAtNode;/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/var Fd=function(){function e(t,n){this.context=t,this.internalEventSource=n}return e.prototype.remove=function(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})},e.prototype.refetch=function(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})},Object.defineProperty(e.prototype,"id",{get:function(){return this.internalEventSource.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.internalEventSource.meta.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.internalEventSource.meta.format},enumerable:!1,configurable:!0}),e}();function zS(e){e.parentNode&&e.parentNode.removeChild(e)}function Bo(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(C8(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}function C8(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector;return n.call(e,t)}function S8(e,t){for(var n=e instanceof HTMLElement?[e]:e,r=[],a=0;a<n.length;a+=1)for(var c=n[a].querySelectorAll(t),d=0;d<c.length;d+=1)r.push(c[d]);return r}var k8=/(top|left|right|bottom|width|height)$/i;function $m(e,t){for(var n in t)T8(e,n,t[n])}function T8(e,t,n){n==null?e.style[t]="":typeof n=="number"&&k8.test(t)?e.style[t]=n+"px":e.style[t]=n}function j3(e){var t,n;return(n=(t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])!==null&&n!==void 0?n:e.target}function V3(e){return e.getRootNode?e.getRootNode():document}var cI=0;function Jx(){return cI+=1,"fc-dom-"+cI}function Qx(e){e.preventDefault()}function A8(e,t){return function(n){var r=Bo(n.target,e);r&&t.call(r,n,r)}}function $3(e,t,n,r){var a=A8(n,r);return e.addEventListener(t,a),function(){e.removeEventListener(t,a)}}function M8(e,t,n,r){var a;return $3(e,"mouseover",t,function(c,d){if(d!==a){a=d,n(c,d);var o=function(v){a=null,r(v,d),d.removeEventListener("mouseleave",o)};d.addEventListener("mouseleave",o)}})}var hI=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function I8(e,t){var n=function(r){t(r),hI.forEach(function(a){e.removeEventListener(a,n)})};hI.forEach(function(r){e.addEventListener(r,n)})}function H3(e){return ft({onClick:e},W3(e))}function W3(e){return{tabIndex:0,onKeyDown:function(t){(t.key==="Enter"||t.key===" ")&&(e(t),t.preventDefault())}}}var dI=0;function Op(){return dI+=1,String(dI)}function BS(){document.body.classList.add("fc-not-allowed")}function FS(){document.body.classList.remove("fc-not-allowed")}function P8(e){e.classList.add("fc-unselectable"),e.addEventListener("selectstart",Qx)}function D8(e){e.classList.remove("fc-unselectable"),e.removeEventListener("selectstart",Qx)}function R8(e){e.addEventListener("contextmenu",Qx)}function L8(e){e.removeEventListener("contextmenu",Qx)}function O8(e){var t=[],n=[],r,a;for(typeof e=="string"?n=e.split(/\s*,\s*/):typeof e=="function"?n=[e]:Array.isArray(e)&&(n=e),r=0;r<n.length;r+=1)a=n[r],typeof a=="string"?t.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&t.push({func:a});return t}function z8(e,t,n){var r,a;for(r=0;r<n.length;r+=1)if(a=B8(e,t,n[r]),a)return a;return 0}function B8(e,t,n){return n.func?n.func(e,t):F8(e[n.field],t[n.field])*(n.order||1)}function F8(e,t){return!e&&!t?0:t==null?-1:e==null?1:typeof e=="string"||typeof t=="string"?String(e).localeCompare(String(t)):e-t}function Jb(e,t){var n=String(e);return"000".substr(0,t-n.length)+n}function Hm(e,t,n){return typeof e=="function"?e.apply(void 0,t):typeof e=="string"?t.reduce(function(r,a,c){return r.replace("$"+c,a||"")},e):n}function N8(e,t){return e-t}function Qb(e){return e%1===0}function U8(e){var t=e.querySelector(".fc-scrollgrid-shrink-frame"),n=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+n.getBoundingClientRect().width}var j8=["sun","mon","tue","wed","thu","fri","sat"];function pI(e,t){var n=Mu(e);return n[2]+=t*7,la(n)}function qo(e,t){var n=Mu(e);return n[2]+=t,la(n)}function yh(e,t){var n=Mu(e);return n[6]+=t,la(n)}function V8(e,t){return zp(e,t)/7}function zp(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60*24)}function $8(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60)}function H8(e,t){return(t.valueOf()-e.valueOf())/(1e3*60)}function W8(e,t){return(t.valueOf()-e.valueOf())/1e3}function G8(e,t){var n=oi(e),r=oi(t);return{years:0,months:0,days:Math.round(zp(n,r)),milliseconds:t.valueOf()-r.valueOf()-(e.valueOf()-n.valueOf())}}function q8(e,t){var n=px(e,t);return n!==null&&n%7===0?n/7:null}function px(e,t){return Iu(e)===Iu(t)?Math.round(zp(e,t)):null}function oi(e){return la([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function Z8(e){return la([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}function X8(e){return la([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}function K8(e){return la([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}function Y8(e,t,n){var r=e.getUTCFullYear(),a=ew(e,r,t,n);if(a<1)return ew(e,r-1,t,n);var c=ew(e,r+1,t,n);return c>=1?Math.min(a,c):a}function ew(e,t,n,r){var a=la([t,0,1+J8(t,n,r)]),c=oi(e),d=Math.round(zp(a,c));return Math.floor(d/7)+1}function J8(e,t,n){var r=7+t-n,a=(7+la([e,0,r]).getUTCDay()-t)%7;return-a+r-1}function fI(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function mI(e){return new Date(e[0],e[1]||0,e[2]==null?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function Mu(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function la(e){return e.length===1&&(e=e.concat([0])),new Date(Date.UTC.apply(Date,e))}function G3(e){return!isNaN(e.valueOf())}function Iu(e){return e.getUTCHours()*1e3*60*60+e.getUTCMinutes()*1e3*60+e.getUTCSeconds()*1e3+e.getUTCMilliseconds()}function NS(e,t,n,r){return{instanceId:Op(),defId:e,range:t,forcedStartTzo:n==null?null:n,forcedEndTzo:r==null?null:r}}var fx=Object.prototype.hasOwnProperty;function US(e,t){var n={};if(t)for(var r in t){for(var a=[],c=e.length-1;c>=0;c-=1){var d=e[c][r];if(typeof d=="object"&&d)a.unshift(d);else if(d!==void 0){n[r]=d;break}}a.length&&(n[r]=US(a))}for(var c=e.length-1;c>=0;c-=1){var o=e[c];for(var v in o)v in n||(n[v]=o[v])}return n}function vh(e,t){var n={};for(var r in e)t(e[r],r)&&(n[r]=e[r]);return n}function Sh(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}function q3(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a]=!0}return t}function jS(e){var t=[];for(var n in e)t.push(e[n]);return t}function Rl(e,t){if(e===t)return!0;for(var n in e)if(fx.call(e,n)&&!(n in t))return!1;for(var n in t)if(fx.call(t,n)&&e[n]!==t[n])return!1;return!0}function gI(e,t){var n=[];for(var r in e)fx.call(e,r)&&(r in t||n.push(r));for(var r in t)fx.call(t,r)&&e[r]!==t[r]&&n.push(r);return n}function tw(e,t,n){if(n===void 0&&(n={}),e===t)return!0;for(var r in t)if(!(r in e&&Q8(e[r],t[r],n[r])))return!1;for(var r in e)if(!(r in t))return!1;return!0}function Q8(e,t,n){return e===t||n===!0?!0:n?n(e,t):!1}function ej(e,t,n,r){t===void 0&&(t=0),r===void 0&&(r=1);var a=[];n==null&&(n=Object.keys(e).length);for(var c=t;c<n;c+=r){var d=e[c];d!==void 0&&a.push(d)}return a}function tj(e,t,n,r){for(var a=0;a<r.length;a+=1){var c=r[a].parse(e,n);if(c){var d=e.allDay;return d==null&&(d=t,d==null&&(d=c.allDayGuess,d==null&&(d=!1))),{allDay:d,duration:c.duration,typeData:c.typeData,typeId:a}}}return null}function Sp(e,t,n){var r=n.dateEnv,a=n.pluginHooks,c=n.options,d=e.defs,o=e.instances;o=vh(o,function(H){return!d[H.defId].recurringDef});for(var v in d){var C=d[v];if(C.recurringDef){var I=C.recurringDef.duration;I||(I=C.allDay?c.defaultAllDayEventDuration:c.defaultTimedEventDuration);for(var D=nj(C,I,t,r,a.recurringTypes),F=0,U=D;F<U.length;F++){var j=U[F],T=NS(v,{start:j,end:r.add(j,I)});o[T.instanceId]=T}}}return{defs:d,instances:o}}function nj(e,t,n,r,a){var c=a[e.recurringDef.typeId],d=c.expand(e.recurringDef.typeData,{start:r.subtract(n.start,t),end:n.end},r);return e.allDay&&(d=d.map(oi)),d}var rj=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Mr(e,t){var n;return typeof e=="string"?ij(e):typeof e=="object"&&e?yI(e):typeof e=="number"?yI((n={},n[t||"milliseconds"]=e,n)):null}function ij(e){var t=rj.exec(e);if(t){var n=t[1]?-1:1;return{years:0,months:0,days:n*(t[2]?parseInt(t[2],10):0),milliseconds:n*((t[3]?parseInt(t[3],10):0)*60*60*1e3+(t[4]?parseInt(t[4],10):0)*60*1e3+(t[5]?parseInt(t[5],10):0)*1e3+(t[6]?parseInt(t[6],10):0))}}return null}function yI(e){var t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:(e.hours||e.hour||0)*60*60*1e3+(e.minutes||e.minute||0)*60*1e3+(e.seconds||e.second||0)*1e3+(e.milliseconds||e.millisecond||e.ms||0)},n=e.weeks||e.week;return n&&(t.days+=n*7,t.specifiedWeeks=!0),t}function oj(e,t){return e.years===t.years&&e.months===t.months&&e.days===t.days&&e.milliseconds===t.milliseconds}function aj(e,t){return{years:e.years-t.years,months:e.months-t.months,days:e.days-t.days,milliseconds:e.milliseconds-t.milliseconds}}function sj(e){return cp(e)/365}function lj(e){return cp(e)/30}function cp(e){return xg(e)/864e5}function xg(e){return e.years*(365*864e5)+e.months*(30*864e5)+e.days*864e5+e.milliseconds}function qE(e){var t=e.milliseconds;if(t){if(t%1e3!==0)return{unit:"millisecond",value:t};if(t%(1e3*60)!==0)return{unit:"second",value:t/1e3};if(t%(1e3*60*60)!==0)return{unit:"minute",value:t/(1e3*60)};if(t)return{unit:"hour",value:t/(1e3*60*60)}}return e.days?e.specifiedWeeks&&e.days%7===0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function uj(e,t,n){n===void 0&&(n=!1);var r=e.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(t==null?r=r.replace("Z",""):t!==0&&(r=r.replace("Z",VS(t,!0)))),r}function Z3(e){return e.toISOString().replace(/T.*$/,"")}function VS(e,t){t===void 0&&(t=!1);var n=e<0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),c=Math.round(r%60);return t?n+Jb(a,2)+":"+Jb(c,2):"GMT"+n+a+(c?":"+Jb(c,2):"")}function bg(e,t,n){if(e===t)return!0;var r=e.length,a;if(r!==t.length)return!1;for(a=0;a<r;a+=1)if(!(n?n(e[a],t[a]):e[a]===t[a]))return!1;return!0}function vr(e,t,n){var r,a;return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];if(!r)a=e.apply(this,c);else if(!bg(r,c)){n&&n(a);var o=e.apply(this,c);(!t||!t(o,a))&&(a=o)}return r=c,a}}function C_(e,t,n){var r=this,a,c;return function(d){if(!a)c=e.call(r,d);else if(!Rl(a,d)){n&&n(c);var o=e.call(r,d);(!t||!t(o,c))&&(c=o)}return a=d,c}}var vI={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},mx={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Yv=/\s*([ap])\.?m\.?/i,cj=/,/g,hj=/\s+/g,dj=/\u200e/g,pj=/UTC|GMT/,fj=function(){function e(t){var n={},r={},a=0;for(var c in t)c in vI?(r[c]=t[c],a=Math.max(vI[c],a)):(n[c]=t[c],c in mx&&(a=Math.max(mx[c],a)));this.standardDateProps=n,this.extendedSettings=r,this.severity=a,this.buildFormattingFunc=vr(_I)}return e.prototype.format=function(t,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(t)},e.prototype.formatRange=function(t,n,r,a){var c=this,d=c.standardDateProps,o=c.extendedSettings,v=xj(t.marker,n.marker,r.calendarSystem);if(!v)return this.format(t,r);var C=v;C>1&&(d.year==="numeric"||d.year==="2-digit")&&(d.month==="numeric"||d.month==="2-digit")&&(d.day==="numeric"||d.day==="2-digit")&&(C=1);var I=this.format(t,r),D=this.format(n,r);if(I===D)return I;var F=bj(d,C),U=_I(F,o,r),j=U(t),T=U(n),H=wj(I,j,D,T),N=o.separator||a||r.defaultSeparator||"";return H?H.before+j+N+T+H.after:I+N+D},e.prototype.getLargestUnit=function(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}},e}();function _I(e,t,n){var r=Object.keys(e).length;return r===1&&e.timeZoneName==="short"?function(a){return VS(a.timeZoneOffset)}:r===0&&t.week?function(a){return _j(n.computeWeekNumber(a.marker),n.weekText,n.weekTextLong,n.locale,t.week)}:mj(e,t,n)}function mj(e,t,n){e=ft({},e),t=ft({},t),gj(e,t),e.timeZone="UTC";var r=new Intl.DateTimeFormat(n.locale.codes,e),a;if(t.omitZeroMinute){var c=ft({},e);delete c.minute,a=new Intl.DateTimeFormat(n.locale.codes,c)}return function(d){var o=d.marker,v;a&&!o.getUTCMinutes()?v=a:v=r;var C=v.format(o);return yj(C,d,e,t,n)}}function gj(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit")),e.timeZoneName==="long"&&(e.timeZoneName="short"),t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}function yj(e,t,n,r,a){return e=e.replace(dj,""),n.timeZoneName==="short"&&(e=vj(e,a.timeZone==="UTC"||t.timeZoneOffset==null?"UTC":VS(t.timeZoneOffset))),r.omitCommas&&(e=e.replace(cj,"").trim()),r.omitZeroMinute&&(e=e.replace(":00","")),r.meridiem===!1?e=e.replace(Yv,"").trim():r.meridiem==="narrow"?e=e.replace(Yv,function(c,d){return d.toLocaleLowerCase()}):r.meridiem==="short"?e=e.replace(Yv,function(c,d){return d.toLocaleLowerCase()+"m"}):r.meridiem==="lowercase"&&(e=e.replace(Yv,function(c){return c.toLocaleLowerCase()})),e=e.replace(hj," "),e=e.trim(),e}function vj(e,t){var n=!1;return e=e.replace(pj,function(){return n=!0,t}),n||(e+=" "+t),e}function _j(e,t,n,r,a){var c=[];return a==="long"?c.push(n):(a==="short"||a==="narrow")&&c.push(t),(a==="long"||a==="short")&&c.push(" "),c.push(r.simpleNumberFormat.format(e)),r.options.direction==="rtl"&&c.reverse(),c.join("")}function xj(e,t,n){return n.getMarkerYear(e)!==n.getMarkerYear(t)?5:n.getMarkerMonth(e)!==n.getMarkerMonth(t)?4:n.getMarkerDay(e)!==n.getMarkerDay(t)?2:Iu(e)!==Iu(t)?1:0}function bj(e,t){var n={};for(var r in e)(!(r in mx)||mx[r]<=t)&&(n[r]=e[r]);return n}function wj(e,t,n,r){for(var a=0;a<e.length;){var c=e.indexOf(t,a);if(c===-1)break;var d=e.substr(0,c);a=c+t.length;for(var o=e.substr(a),v=0;v<n.length;){var C=n.indexOf(r,v);if(C===-1)break;var I=n.substr(0,C);v=C+r.length;var D=n.substr(v);if(d===I&&o===D)return{before:d,after:o}}}return null}function xI(e,t){var n=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function gx(e,t,n,r){var a=xI(e,n.calendarSystem),c=t?xI(t,n.calendarSystem):null;return{date:a,start:a,end:c,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}var Ej=function(){function e(t){this.cmdStr=t}return e.prototype.format=function(t,n,r){return n.cmdFormatter(this.cmdStr,gx(t,null,n,r))},e.prototype.formatRange=function(t,n,r,a){return r.cmdFormatter(this.cmdStr,gx(t,n,r,a))},e}(),Cj=function(){function e(t){this.func=t}return e.prototype.format=function(t,n,r){return this.func(gx(t,null,n,r))},e.prototype.formatRange=function(t,n,r,a){return this.func(gx(t,n,r,a))},e}();function vo(e){return typeof e=="object"&&e?new fj(e):typeof e=="string"?new Ej(e):typeof e=="function"?new Cj(e):null}var bI={navLinkDayClick:vt,navLinkWeekClick:vt,duration:Mr,bootstrapFontAwesome:vt,buttonIcons:vt,customButtons:vt,defaultAllDayEventDuration:Mr,defaultTimedEventDuration:Mr,nextDayThreshold:Mr,scrollTime:Mr,scrollTimeReset:Boolean,slotMinTime:Mr,slotMaxTime:Mr,dayPopoverFormat:vo,slotDuration:Mr,snapDuration:Mr,headerToolbar:vt,footerToolbar:vt,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:vo,dayHeaderClassNames:vt,dayHeaderContent:vt,dayHeaderDidMount:vt,dayHeaderWillUnmount:vt,dayCellClassNames:vt,dayCellContent:vt,dayCellDidMount:vt,dayCellWillUnmount:vt,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:vt,weekNumbers:Boolean,weekNumberClassNames:vt,weekNumberContent:vt,weekNumberDidMount:vt,weekNumberWillUnmount:vt,editable:Boolean,viewClassNames:vt,viewDidMount:vt,viewWillUnmount:vt,nowIndicator:Boolean,nowIndicatorClassNames:vt,nowIndicatorContent:vt,nowIndicatorDidMount:vt,nowIndicatorWillUnmount:vt,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:vt,locale:vt,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:vt,eventOrder:O8,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:vt,contentHeight:vt,direction:String,weekNumberFormat:vo,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:vt,initialDate:vt,now:vt,eventDataTransform:vt,stickyHeaderDates:vt,stickyFooterScrollbar:vt,viewHeight:vt,defaultAllDay:Boolean,eventSourceFailure:vt,eventSourceSuccess:vt,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:vt,eventConstraint:vt,eventAllow:vt,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:vt,eventContent:vt,eventDidMount:vt,eventWillUnmount:vt,selectConstraint:vt,selectOverlap:vt,selectAllow:vt,droppable:Boolean,unselectCancel:String,slotLabelFormat:vt,slotLaneClassNames:vt,slotLaneContent:vt,slotLaneDidMount:vt,slotLaneWillUnmount:vt,slotLabelClassNames:vt,slotLabelContent:vt,slotLabelDidMount:vt,slotLabelWillUnmount:vt,dayMaxEvents:vt,dayMaxEventRows:vt,dayMinWidth:Number,slotLabelInterval:Mr,allDayText:String,allDayClassNames:vt,allDayContent:vt,allDayDidMount:vt,allDayWillUnmount:vt,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:vo,rerenderDelay:Number,moreLinkText:vt,moreLinkHint:vt,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:vt,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Mr,hiddenDays:vt,monthMode:Boolean,fixedWeekCount:Boolean,validRange:vt,visibleRange:vt,titleFormat:vt,eventInteractive:Boolean,noEventsText:String,viewHint:vt,navLinkHint:vt,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:vt,moreLinkClassNames:vt,moreLinkContent:vt,moreLinkDidMount:vt,moreLinkWillUnmount:vt},Wm={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30},wI={datesSet:vt,eventsSet:vt,eventAdd:vt,eventChange:vt,eventRemove:vt,windowResize:vt,eventClick:vt,eventMouseEnter:vt,eventMouseLeave:vt,select:vt,unselect:vt,loading:vt,_unmount:vt,_beforeprint:vt,_afterprint:vt,_noEventDrop:vt,_noEventResize:vt,_resize:vt,_scrollRequest:vt},EI={buttonText:vt,buttonHints:vt,views:vt,plugins:vt,initialEvents:vt,events:vt,eventSources:vt},Xc={headerToolbar:Pd,footerToolbar:Pd,buttonText:Pd,buttonHints:Pd,buttonIcons:Pd,dateIncrement:Pd};function Pd(e,t){return typeof e=="object"&&typeof t=="object"&&e&&t?Rl(e,t):e===t}var Sj={type:String,component:vt,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:vt,usesMinMaxTime:Boolean,classNames:vt,content:vt,didMount:vt,willUnmount:vt};function nw(e){return US(e,Xc)}function $S(e,t){var n={},r={};for(var a in t)a in e&&(n[a]=t[a](e[a]));for(var a in e)a in t||(r[a]=e[a]);return{refined:n,extra:r}}function vt(e){return e}function yx(e,t,n,r){for(var a=bs(),c=GS(n),d=0,o=e;d<o.length;d++){var v=o[d],C=K3(v,t,n,r,c);C&&ZE(C,a)}return a}function ZE(e,t){return t===void 0&&(t=bs()),t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function HS(e,t){var n=e.instances[t];if(n){var r=e.defs[n.defId],a=e0(e,function(c){return kj(r,c)});return a.defs[r.defId]=r,a.instances[n.instanceId]=n,a}return bs()}function kj(e,t){return Boolean(e.groupId&&e.groupId===t.groupId)}function bs(){return{defs:{},instances:{}}}function WS(e,t){return{defs:ft(ft({},e.defs),t.defs),instances:ft(ft({},e.instances),t.instances)}}function e0(e,t){var n=vh(e.defs,t),r=vh(e.instances,function(a){return n[a.defId]});return{defs:n,instances:r}}function Tj(e,t){var n=e.defs,r=e.instances,a={},c={};for(var d in n)t.defs[d]||(a[d]=n[d]);for(var o in r)!t.instances[o]&&a[r[o].defId]&&(c[o]=r[o]);return{defs:a,instances:c}}function Aj(e,t){return Array.isArray(e)?yx(e,null,t,!0):typeof e=="object"&&e?yx([e],null,t,!0):e!=null?String(e):null}function XE(e){return Array.isArray(e)?e:typeof e=="string"?e.split(/\s+/):[]}var vx={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:vt,overlap:vt,allow:vt,className:XE,classNames:XE,color:String,backgroundColor:String,borderColor:String,textColor:String},Mj={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function _x(e,t){var n=Aj(e.constraint,t);return{display:e.display||null,startEditable:e.startEditable!=null?e.startEditable:e.editable,durationEditable:e.durationEditable!=null?e.durationEditable:e.editable,constraints:n!=null?[n]:[],overlap:e.overlap!=null?e.overlap:null,allows:e.allow!=null?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function Ij(e){return e.reduce(Pj,Mj)}function Pj(e,t){return{display:t.display!=null?t.display:e.display,startEditable:t.startEditable!=null?t.startEditable:e.startEditable,durationEditable:t.durationEditable!=null?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:typeof t.overlap=="boolean"?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}var S_={id:String,groupId:String,title:String,url:String,interactive:Boolean},X3={start:vt,end:vt,date:vt,allDay:Boolean},Dj=ft(ft(ft({},S_),X3),{extendedProps:vt});function K3(e,t,n,r,a){a===void 0&&(a=GS(n));var c=Y3(e,n,a),d=c.refined,o=c.extra,v=Lj(t,n),C=tj(d,v,n.dateEnv,n.pluginHooks.recurringTypes);if(C){var I=KE(d,o,t?t.sourceId:"",C.allDay,Boolean(C.duration),n);return I.recurringDef={typeId:C.typeId,typeData:C.typeData,duration:C.duration},{def:I,instance:null}}var D=Rj(d,v,n,r);if(D){var I=KE(d,o,t?t.sourceId:"",D.allDay,D.hasEnd,n),F=NS(I.defId,D.range,D.forcedStartTzo,D.forcedEndTzo);return{def:I,instance:F}}return null}function Y3(e,t,n){return n===void 0&&(n=GS(t)),$S(e,n)}function GS(e){return ft(ft(ft({},vx),Dj),e.pluginHooks.eventRefiners)}function KE(e,t,n,r,a,c){for(var d={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:Op(),sourceId:n,allDay:r,hasEnd:a,interactive:e.interactive,ui:_x(e,c),extendedProps:ft(ft({},e.extendedProps||{}),t)},o=0,v=c.pluginHooks.eventDefMemberAdders;o<v.length;o++){var C=v[o];ft(d,C(e))}return Object.freeze(d.ui.classNames),Object.freeze(d.extendedProps),d}function Rj(e,t,n,r){var a=e.allDay,c,d=null,o=!1,v,C=null,I=e.start!=null?e.start:e.date;if(c=n.dateEnv.createMarkerMeta(I),c)d=c.marker;else if(!r)return null;return e.end!=null&&(v=n.dateEnv.createMarkerMeta(e.end)),a==null&&(t!=null?a=t:a=(!c||c.isTimeUnspecified)&&(!v||v.isTimeUnspecified)),a&&d&&(d=oi(d)),v&&(C=v.marker,a&&(C=oi(C)),d&&C<=d&&(C=null)),C?o=!0:r||(o=n.options.forceEventDuration||!1,C=n.dateEnv.add(d,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:a,hasEnd:o,range:{start:d,end:C},forcedStartTzo:c?c.forcedTzo:null,forcedEndTzo:v?v.forcedTzo:null}}function Lj(e,t){var n=null;return e&&(n=e.defaultAllDay),n==null&&(n=t.options.defaultAllDay),n}function J3(e){var t=Math.floor(zp(e.start,e.end))||1,n=oi(e.start),r=qo(n,t);return{start:n,end:r}}function Q3(e,t){t===void 0&&(t=Mr(0));var n=null,r=null;if(e.end){r=oi(e.end);var a=e.end.valueOf()-r.valueOf();a&&a>=xg(t)&&(r=qo(r,1))}return e.start&&(n=oi(e.start),r&&r<=n&&(r=qo(n,1))),{start:n,end:r}}function ep(e,t,n,r){return r==="year"?Mr(n.diffWholeYears(e,t),"year"):r==="month"?Mr(n.diffWholeMonths(e,t),"month"):G8(e,t)}function Oj(e,t){var n=null,r=null;return e.start&&(n=t.createMarker(e.start)),e.end&&(r=t.createMarker(e.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function CI(e,t){var n=[],r=t.start,a,c;for(e.sort(zj),a=0;a<e.length;a+=1)c=e[a],c.start>r&&n.push({start:r,end:c.start}),c.end>r&&(r=c.end);return r<t.end&&n.push({start:r,end:t.end}),n}function zj(e,t){return e.start.valueOf()-t.start.valueOf()}function wg(e,t){var n=e.start,r=e.end,a=null;return t.start!==null&&(n===null?n=t.start:n=new Date(Math.max(n.valueOf(),t.start.valueOf()))),t.end!=null&&(r===null?r=t.end:r=new Date(Math.min(r.valueOf(),t.end.valueOf()))),(n===null||r===null||n<r)&&(a={start:n,end:r}),a}function Bj(e,t){return(e.start===null?null:e.start.valueOf())===(t.start===null?null:t.start.valueOf())&&(e.end===null?null:e.end.valueOf())===(t.end===null?null:t.end.valueOf())}function qS(e,t){return(e.end===null||t.start===null||e.end>t.start)&&(e.start===null||t.end===null||e.start<t.end)}function t0(e,t){return(e.start===null||t.start!==null&&t.start>=e.start)&&(e.end===null||t.end!==null&&t.end<=e.end)}function uh(e,t){return(e.start===null||t>=e.start)&&(e.end===null||t<e.end)}function Fj(e,t){return t.start!=null&&e<t.start?t.start:t.end!=null&&e>=t.end?new Date(t.end.valueOf()-1):e}function SI(e,t,n,r){var a={},c={},d={},o=[],v=[],C=xx(e.defs,t);for(var I in e.defs){var D=e.defs[I],F=C[D.defId];F.display==="inverse-background"&&(D.groupId?(a[D.groupId]=[],d[D.groupId]||(d[D.groupId]=D)):c[I]=[])}for(var U in e.instances){var j=e.instances[U],D=e.defs[j.defId],F=C[D.defId],T=j.range,H=!D.allDay&&r?Q3(T,r):T,N=wg(H,n);N&&(F.display==="inverse-background"?D.groupId?a[D.groupId].push(N):c[j.defId].push(N):F.display!=="none"&&(F.display==="background"?o:v).push({def:D,ui:F,instance:j,range:N,isStart:H.start&&H.start.valueOf()===N.start.valueOf(),isEnd:H.end&&H.end.valueOf()===N.end.valueOf()}))}for(var q in a)for(var z=a[q],B=CI(z,n),k=0,w=B;k<w.length;k++){var R=w[k],D=d[q],F=C[D.defId];o.push({def:D,ui:F,instance:null,range:R,isStart:!1,isEnd:!1})}for(var I in c)for(var z=c[I],B=CI(z,n),J=0,ie=B;J<ie.length;J++){var R=ie[J];o.push({def:e.defs[I],ui:C[I],instance:null,range:R,isStart:!1,isEnd:!1})}return{bg:o,fg:v}}function kI(e,t){e.fcSeg=t}function kp(e){return e.fcSeg||e.parentNode.fcSeg||null}function xx(e,t){return Sh(e,function(n){return eO(n,t)})}function eO(e,t){var n=[];return t[""]&&n.push(t[""]),t[e.defId]&&n.push(t[e.defId]),n.push(e.ui),Ij(n)}function Nj(e,t){var n=e.map(Uj);return n.sort(function(r,a){return z8(r,a,t)}),n.map(function(r){return r._seg})}function Uj(e){var t=e.eventRange,n=t.def,r=t.instance?t.instance.range:t.range,a=r.start?r.start.valueOf():0,c=r.end?r.end.valueOf():0;return ft(ft(ft({},n.extendedProps),n),{id:n.publicId,start:a,end:c,duration:c-a,allDay:Number(n.allDay),_seg:e})}function jj(e,t){for(var n=t.pluginHooks,r=n.isDraggableTransformers,a=e.eventRange,c=a.def,d=a.ui,o=d.startEditable,v=0,C=r;v<C.length;v++){var I=C[v];o=I(o,c,d,t)}return o}function Vj(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function $j(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function tO(e,t,n,r,a,c,d){var o=n.dateEnv,v=n.options,C=v.displayEventTime,I=v.displayEventEnd,D=e.eventRange.def,F=e.eventRange.instance;C==null&&(C=r!==!1),I==null&&(I=a!==!1);var U=F.range.start,j=F.range.end,T=c||e.start||e.eventRange.range.start,H=d||e.end||e.eventRange.range.end,N=oi(U).valueOf()===oi(T).valueOf(),q=oi(yh(j,-1)).valueOf()===oi(yh(H,-1)).valueOf();return C&&!D.allDay&&(N||q)?(T=N?U:T,H=q?j:H,I&&D.hasEnd?o.formatRange(T,H,t,{forcedStartTzo:c?null:F.forcedStartTzo,forcedEndTzo:d?null:F.forcedEndTzo}):o.format(T,t,{forcedTzo:c?null:F.forcedStartTzo})):""}function Gm(e,t,n){var r=e.eventRange.range;return{isPast:r.end<(n||t.start),isFuture:r.start>=(n||t.end),isToday:t&&uh(t,r.start)}}function Hj(e){var t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}function Wj(e){return e.instance?e.instance.instanceId:e.def.defId+":"+e.range.start.toISOString()}function nO(e,t){var n=e.eventRange,r=n.def,a=n.instance,c=r.url;if(c)return{href:c};var d=t.emitter,o=t.options,v=o.eventInteractive;return v==null&&(v=r.interactive,v==null&&(v=Boolean(d.hasHandlers("eventClick")))),v?W3(function(C){d.trigger("eventClick",{el:C.target,event:new Ci(t,r,a),jsEvent:C,view:t.viewApi})}):{}}var Gj={start:vt,end:vt,allDay:Boolean};function qj(e,t,n){var r=Zj(e,t),a=r.range;if(!a.start)return null;if(!a.end){if(n==null)return null;a.end=t.add(a.start,n)}return r}function Zj(e,t){var n=$S(e,Gj),r=n.refined,a=n.extra,c=r.start?t.createMarkerMeta(r.start):null,d=r.end?t.createMarkerMeta(r.end):null,o=r.allDay;return o==null&&(o=c&&c.isTimeUnspecified&&(!d||d.isTimeUnspecified)),ft({range:{start:c?c.marker:null,end:d?d.marker:null},allDay:o},a)}function Xj(e,t){return Bj(e.range,t.range)&&e.allDay===t.allDay&&Kj(e,t)}function Kj(e,t){for(var n in t)if(n!=="range"&&n!=="allDay"&&e[n]!==t[n])return!1;for(var n in e)if(!(n in t))return!1;return!0}function Yj(e,t){return ft(ft({},iO(e.range,t,e.allDay)),{allDay:e.allDay})}function rO(e,t,n){return ft(ft({},iO(e,t,n)),{timeZone:t.timeZone})}function iO(e,t,n){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:n}),endStr:t.formatIso(e.end,{omitTime:n})}}function Jj(e,t,n){var r=Y3({editable:!1},n),a=KE(r.refined,r.extra,"",e.allDay,!0,n);return{def:a,ui:eO(a,t),instance:NS(a.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}function oO(e,t,n){n.emitter.trigger("select",ft(ft({},ZS(e,n)),{jsEvent:t?t.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function Qj(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}function ZS(e,t){for(var n={},r=0,a=t.pluginHooks.dateSpanTransforms;r<a.length;r++){var c=a[r];ft(n,c(e,t))}return ft(n,Yj(e,t.dateEnv)),n}function TI(e,t,n){var r=n.dateEnv,a=n.options,c=t;return e?(c=oi(c),c=r.add(c,a.defaultAllDayEventDuration)):c=r.add(c,a.defaultTimedEventDuration),c}function XS(e,t,n,r){var a=xx(e.defs,t),c=bs();for(var d in e.defs){var o=e.defs[d];c.defs[d]=eV(o,a[d],n,r)}for(var v in e.instances){var C=e.instances[v],o=c.defs[C.defId];c.instances[v]=tV(C,o,a[C.defId],n,r)}return c}function eV(e,t,n,r){var a=n.standardProps||{};a.hasEnd==null&&t.durationEditable&&(n.startDelta||n.endDelta)&&(a.hasEnd=!0);var c=ft(ft(ft({},e),a),{ui:ft(ft({},e.ui),a.ui)});n.extendedProps&&(c.extendedProps=ft(ft({},c.extendedProps),n.extendedProps));for(var d=0,o=r.pluginHooks.eventDefMutationAppliers;d<o.length;d++){var v=o[d];v(c,n,r)}return!c.hasEnd&&r.options.forceEventDuration&&(c.hasEnd=!0),c}function tV(e,t,n,r,a){var c=a.dateEnv,d=r.standardProps&&r.standardProps.allDay===!0,o=r.standardProps&&r.standardProps.hasEnd===!1,v=ft({},e);return d&&(v.range=J3(v.range)),r.datesDelta&&n.startEditable&&(v.range={start:c.add(v.range.start,r.datesDelta),end:c.add(v.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(v.range={start:c.add(v.range.start,r.startDelta),end:v.range.end}),r.endDelta&&n.durationEditable&&(v.range={start:v.range.start,end:c.add(v.range.end,r.endDelta)}),o&&(v.range={start:v.range.start,end:TI(t.allDay,v.range.start,a)}),t.allDay&&(v.range={start:oi(v.range.start),end:oi(v.range.end)}),v.range.end<v.range.start&&(v.range.end=TI(t.allDay,v.range.start,a)),v}var nV=function(){function e(t,n,r){this.type=t,this.getCurrentData=n,this.dateEnv=r}return Object.defineProperty(e.prototype,"calendar",{get:function(){return this.getCurrentData().calendarApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.getCurrentData().viewTitle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)},enumerable:!1,configurable:!0}),e.prototype.getOption=function(t){return this.getCurrentData().options[t]},e}(),rV={id:String,defaultAllDay:Boolean,url:String,format:String,events:vt,eventDataTransform:vt,success:vt,failure:vt};function aO(e,t,n){n===void 0&&(n=sO(t));var r;if(typeof e=="string"?r={url:e}:typeof e=="function"||Array.isArray(e)?r={events:e}:typeof e=="object"&&e&&(r=e),r){var a=$S(r,n),c=a.refined,d=a.extra,o=iV(c,t);if(o)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:c.defaultAllDay,eventDataTransform:c.eventDataTransform,success:c.success,failure:c.failure,publicId:c.id||"",sourceId:Op(),sourceDefId:o.sourceDefId,meta:o.meta,ui:_x(c,t),extendedProps:d}}return null}function sO(e){return ft(ft(ft({},vx),rV),e.pluginHooks.eventSourceRefiners)}function iV(e,t){for(var n=t.pluginHooks.eventSourceDefs,r=n.length-1;r>=0;r-=1){var a=n[r],c=a.parseMeta(e);if(c)return{sourceDefId:r,meta:c}}return null}function oV(e,t){switch(t.type){case"CHANGE_DATE":return t.dateMarker;default:return e}}function aV(e,t){var n=e.initialDate;return n!=null?t.createMarker(n):Ug(e.now,t)}function Ug(e,t){return typeof e=="function"&&(e=e()),e==null?t.createNowMarker():t.createMarker(e)}var sV=function(){function e(){}return e.prototype.getCurrentData=function(){return this.currentDataManager.getCurrentData()},e.prototype.dispatch=function(t){return this.currentDataManager.dispatch(t)},Object.defineProperty(e.prototype,"view",{get:function(){return this.getCurrentData().viewApi},enumerable:!1,configurable:!0}),e.prototype.batchRendering=function(t){t()},e.prototype.updateSize=function(){this.trigger("_resize",!0)},e.prototype.setOption=function(t,n){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:n})},e.prototype.getOption=function(t){return this.currentDataManager.currentCalendarOptionsInput[t]},e.prototype.getAvailableLocaleCodes=function(){return Object.keys(this.getCurrentData().availableRawLocales)},e.prototype.on=function(t,n){var r=this.currentDataManager;r.currentCalendarOptionsRefiners[t]?r.emitter.on(t,n):console.warn("Unknown listener name '"+t+"'")},e.prototype.off=function(t,n){this.currentDataManager.emitter.off(t,n)},e.prototype.trigger=function(t){for(var n,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];(n=this.currentDataManager.emitter).trigger.apply(n,Ii([t],r))},e.prototype.changeView=function(t,n){var r=this;this.batchRendering(function(){if(r.unselect(),n)if(n.start&&n.end)r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),r.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{var a=r.getCurrentData().dateEnv;r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:a.createMarker(n)})}else r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})},e.prototype.zoomTo=function(t,n){var r=this.getCurrentData(),a;n=n||"day",a=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:t}):this.dispatch({type:"CHANGE_DATE",dateMarker:t})},e.prototype.getUnitViewSpec=function(t){var n=this.getCurrentData(),r=n.viewSpecs,a=n.toolbarConfig,c=[].concat(a.header?a.header.viewsWithButtons:[],a.footer?a.footer.viewsWithButtons:[]),d,o;for(var v in r)c.push(v);for(d=0;d<c.length;d+=1)if(o=r[c[d]],o&&o.singleUnit===t)return o;return null},e.prototype.prev=function(){this.unselect(),this.dispatch({type:"PREV"})},e.prototype.next=function(){this.unselect(),this.dispatch({type:"NEXT"})},e.prototype.prevYear=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})},e.prototype.nextYear=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})},e.prototype.today=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:Ug(t.calendarOptions.now,t.dateEnv)})},e.prototype.gotoDate=function(t){var n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(t)})},e.prototype.incrementDate=function(t){var n=this.getCurrentData(),r=Mr(t);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))},e.prototype.getDate=function(){var t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)},e.prototype.formatDate=function(t,n){var r=this.getCurrentData().dateEnv;return r.format(r.createMarker(t),vo(n))},e.prototype.formatRange=function(t,n,r){var a=this.getCurrentData().dateEnv;return a.formatRange(a.createMarker(t),a.createMarker(n),vo(r),r)},e.prototype.formatIso=function(t,n){var r=this.getCurrentData().dateEnv;return r.formatIso(r.createMarker(t),{omitTime:n})},e.prototype.select=function(t,n){var r;n==null?t.start!=null?r=t:r={start:t,end:null}:r={start:t,end:n};var a=this.getCurrentData(),c=qj(r,a.dateEnv,Mr({days:1}));c&&(this.dispatch({type:"SELECT_DATES",selection:c}),oO(c,null,a))},e.prototype.unselect=function(t){var n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),Qj(t,n))},e.prototype.addEvent=function(t,n){if(t instanceof Ci){var r=t._def,a=t._instance,c=this.getCurrentData();return c.eventStore.defs[r.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:ZE({def:r,instance:a})}),this.triggerEventAdd(t)),t}var d=this.getCurrentData(),o;if(n instanceof Fd)o=n.internalEventSource;else if(typeof n=="boolean")n&&(o=jS(d.eventSources)[0]);else if(n!=null){var v=this.getEventSourceById(n);if(!v)return console.warn('Could not find an event source with ID "'+n+'"'),null;o=v.internalEventSource}var C=K3(t,o,d,!1);if(C){var I=new Ci(d,C.def,C.def.recurringDef?null:C.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:ZE(C)}),this.triggerEventAdd(I),I}return null},e.prototype.triggerEventAdd=function(t){var n=this,r=this.getCurrentData().emitter;r.trigger("eventAdd",{event:t,relatedEvents:[],revert:function(){n.dispatch({type:"REMOVE_EVENTS",eventStore:lO(t)})}})},e.prototype.getEventById=function(t){var n=this.getCurrentData(),r=n.eventStore,a=r.defs,c=r.instances;t=String(t);for(var d in a){var o=a[d];if(o.publicId===t){if(o.recurringDef)return new Ci(n,o,null);for(var v in c){var C=c[v];if(C.defId===o.defId)return new Ci(n,o,C)}}}return null},e.prototype.getEvents=function(){var t=this.getCurrentData();return ch(t.eventStore,t)},e.prototype.removeAllEvents=function(){this.dispatch({type:"REMOVE_ALL_EVENTS"})},e.prototype.getEventSources=function(){var t=this.getCurrentData(),n=t.eventSources,r=[];for(var a in n)r.push(new Fd(t,n[a]));return r},e.prototype.getEventSourceById=function(t){var n=this.getCurrentData(),r=n.eventSources;t=String(t);for(var a in r)if(r[a].publicId===t)return new Fd(n,r[a]);return null},e.prototype.addEventSource=function(t){var n=this.getCurrentData();if(t instanceof Fd)return n.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;var r=aO(t,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Fd(n,r)):null},e.prototype.removeAllEventSources=function(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})},e.prototype.refetchEvents=function(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})},e.prototype.scrollToTime=function(t){var n=Mr(t);n&&this.trigger("_scrollRequest",{time:n})},e}(),Ci=function(){function e(t,n,r){this._context=t,this._def=n,this._instance=r||null}return e.prototype.setProp=function(t,n){var r,a;if(t in X3)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(t==="id")n=S_[t](n),this.mutate({standardProps:{publicId:n}});else if(t in S_)n=S_[t](n),this.mutate({standardProps:(r={},r[t]=n,r)});else if(t in vx){var c=vx[t](n);t==="color"?c={backgroundColor:n,borderColor:n}:t==="editable"?c={startEditable:n,durationEditable:n}:c=(a={},a[t]=n,a),this.mutate({standardProps:{ui:c}})}else console.warn("Could not set prop '"+t+"'. Use setExtendedProp instead.")},e.prototype.setExtendedProp=function(t,n){var r;this.mutate({extendedProps:(r={},r[t]=n,r)})},e.prototype.setStart=function(t,n){n===void 0&&(n={});var r=this._context.dateEnv,a=r.createMarker(t);if(a&&this._instance){var c=this._instance.range,d=ep(c.start,a,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:d}):this.mutate({startDelta:d})}},e.prototype.setEnd=function(t,n){n===void 0&&(n={});var r=this._context.dateEnv,a;if(!(t!=null&&(a=r.createMarker(t),!a))&&this._instance)if(a){var c=ep(this._instance.range.end,a,r,n.granularity);this.mutate({endDelta:c})}else this.mutate({standardProps:{hasEnd:!1}})},e.prototype.setDates=function(t,n,r){r===void 0&&(r={});var a=this._context.dateEnv,c={allDay:r.allDay},d=a.createMarker(t),o;if(!!d&&!(n!=null&&(o=a.createMarker(n),!o))&&this._instance){var v=this._instance.range;r.allDay===!0&&(v=J3(v));var C=ep(v.start,d,a,r.granularity);if(o){var I=ep(v.end,o,a,r.granularity);oj(C,I)?this.mutate({datesDelta:C,standardProps:c}):this.mutate({startDelta:C,endDelta:I,standardProps:c})}else c.hasEnd=!1,this.mutate({datesDelta:C,standardProps:c})}},e.prototype.moveStart=function(t){var n=Mr(t);n&&this.mutate({startDelta:n})},e.prototype.moveEnd=function(t){var n=Mr(t);n&&this.mutate({endDelta:n})},e.prototype.moveDates=function(t){var n=Mr(t);n&&this.mutate({datesDelta:n})},e.prototype.setAllDay=function(t,n){n===void 0&&(n={});var r={allDay:t},a=n.maintainDuration;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(r.hasEnd=a),this.mutate({standardProps:r})},e.prototype.formatRange=function(t){var n=this._context.dateEnv,r=this._instance,a=vo(t);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,a,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,a,{forcedTzo:r.forcedStartTzo})},e.prototype.mutate=function(t){var n=this._instance;if(n){var r=this._def,a=this._context,c=a.getCurrentData().eventStore,d=HS(c,n.instanceId),o={"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}};d=XS(d,o,t,a);var v=new e(a,r,n);this._def=d.defs[r.defId],this._instance=d.instances[n.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:d}),a.emitter.trigger("eventChange",{oldEvent:v,event:this,relatedEvents:ch(d,a,n),revert:function(){a.dispatch({type:"RESET_EVENTS",eventStore:c})}})}},e.prototype.remove=function(){var t=this._context,n=lO(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:n}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert:function(){t.dispatch({type:"MERGE_EVENTS",eventStore:n})}})},Object.defineProperty(e.prototype,"source",{get:function(){var t=this._def.sourceId;return t?new Fd(this._context,this._context.getCurrentData().eventSources[t]):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startStr",{get:function(){var t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endStr",{get:function(){var t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._def.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return this._def.groupId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allDay",{get:function(){return this._def.allDay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._def.title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._def.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this._def.ui.display||"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startEditable",{get:function(){return this._def.ui.startEditable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationEditable",{get:function(){return this._def.ui.durationEditable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"constraint",{get:function(){return this._def.ui.constraints[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlap",{get:function(){return this._def.ui.overlap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allow",{get:function(){return this._def.ui.allows[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._def.ui.backgroundColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._def.ui.borderColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._def.ui.textColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNames",{get:function(){return this._def.ui.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extendedProps",{get:function(){return this._def.extendedProps},enumerable:!1,configurable:!0}),e.prototype.toPlainObject=function(t){t===void 0&&(t={});var n=this._def,r=n.ui,a=this,c=a.startStr,d=a.endStr,o={};return n.title&&(o.title=n.title),c&&(o.start=c),d&&(o.end=d),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),r.display&&r.display!=="auto"&&(o.display=r.display),t.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?o.color=r.backgroundColor:(r.backgroundColor&&(o.backgroundColor=r.backgroundColor),r.borderColor&&(o.borderColor=r.borderColor)),r.textColor&&(o.textColor=r.textColor),r.classNames.length&&(o.classNames=r.classNames),Object.keys(n.extendedProps).length&&(t.collapseExtendedProps?ft(o,n.extendedProps):o.extendedProps=n.extendedProps),o},e.prototype.toJSON=function(){return this.toPlainObject()},e}();function lO(e){var t,n,r=e._def,a=e._instance;return{defs:(t={},t[r.defId]=r,t),instances:a?(n={},n[a.instanceId]=a,n):{}}}function ch(e,t,n){var r=e.defs,a=e.instances,c=[],d=n?n.instanceId:"";for(var o in a){var v=a[o],C=r[v.defId];v.instanceId!==d&&c.push(new Ci(t,C,v))}return c}var uO={};function lV(e,t){uO[e]=t}function uV(e){return new uO[e]}var cV=function(){function e(){}return e.prototype.getMarkerYear=function(t){return t.getUTCFullYear()},e.prototype.getMarkerMonth=function(t){return t.getUTCMonth()},e.prototype.getMarkerDay=function(t){return t.getUTCDate()},e.prototype.arrayToMarker=function(t){return la(t)},e.prototype.markerToArray=function(t){return Mu(t)},e}();lV("gregory",cV);var hV=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function dV(e){var t=hV.exec(e);if(t){var n=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?Number("0."+t[12])*1e3:0));if(G3(n)){var r=null;return t[13]&&(r=(t[15]==="-"?-1:1)*(Number(t[16]||0)*60+Number(t[18]||0))),{marker:n,isTimeUnspecified:!t[6],timeZoneOffset:r}}}return null}var pV=function(){function e(t){var n=this.timeZone=t.timeZone,r=n!=="local"&&n!=="UTC";t.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(n)),this.canComputeOffset=Boolean(!r||this.namedTimeZoneImpl),this.calendarSystem=uV(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,t.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof t.firstDay=="number"&&(this.weekDow=t.firstDay),typeof t.weekNumberCalculation=="function"&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=t.weekText!=null?t.weekText:t.locale.options.weekText,this.weekTextLong=(t.weekTextLong!=null?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}return e.prototype.createMarker=function(t){var n=this.createMarkerMeta(t);return n===null?null:n.marker},e.prototype.createNowMarker=function(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):la(fI(new Date))},e.prototype.createMarkerMeta=function(t){if(typeof t=="string")return this.parse(t);var n=null;return typeof t=="number"?n=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(n=this.timestampToMarker(t))):Array.isArray(t)&&(n=la(t)),n===null||!G3(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}},e.prototype.parse=function(t){var n=dV(t);if(n===null)return null;var r=n.marker,a=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):a=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:a}},e.prototype.getYear=function(t){return this.calendarSystem.getMarkerYear(t)},e.prototype.getMonth=function(t){return this.calendarSystem.getMarkerMonth(t)},e.prototype.add=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)},e.prototype.subtract=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)},e.prototype.addYears=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]+=n,this.calendarSystem.arrayToMarker(r)},e.prototype.addMonths=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[1]+=n,this.calendarSystem.arrayToMarker(r)},e.prototype.diffWholeYears=function(t,n){var r=this.calendarSystem;return Iu(t)===Iu(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)&&r.getMarkerMonth(t)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(t):null},e.prototype.diffWholeMonths=function(t,n){var r=this.calendarSystem;return Iu(t)===Iu(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(t)+(r.getMarkerYear(n)-r.getMarkerYear(t))*12:null},e.prototype.greatestWholeUnit=function(t,n){var r=this.diffWholeYears(t,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(t,n),r!==null?{unit:"month",value:r}:(r=q8(t,n),r!==null?{unit:"week",value:r}:(r=px(t,n),r!==null?{unit:"day",value:r}:(r=$8(t,n),Qb(r)?{unit:"hour",value:r}:(r=H8(t,n),Qb(r)?{unit:"minute",value:r}:(r=W8(t,n),Qb(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-t.valueOf()}))))))},e.prototype.countDurationsBetween=function(t,n,r){var a;return r.years&&(a=this.diffWholeYears(t,n),a!==null)?a/sj(r):r.months&&(a=this.diffWholeMonths(t,n),a!==null)?a/lj(r):r.days&&(a=px(t,n),a!==null)?a/cp(r):(n.valueOf()-t.valueOf())/xg(r)},e.prototype.startOf=function(t,n){return n==="year"?this.startOfYear(t):n==="month"?this.startOfMonth(t):n==="week"?this.startOfWeek(t):n==="day"?oi(t):n==="hour"?Z8(t):n==="minute"?X8(t):n==="second"?K8(t):null},e.prototype.startOfYear=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])},e.prototype.startOfMonth=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])},e.prototype.startOfWeek=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])},e.prototype.computeWeekNumber=function(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):Y8(t,this.weekDow,this.weekDoy)},e.prototype.format=function(t,n,r){return r===void 0&&(r={}),n.format({marker:t,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(t)},this)},e.prototype.formatRange=function(t,n,r,a){return a===void 0&&(a={}),a.isEndExclusive&&(n=yh(n,-1)),r.formatRange({marker:t,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(t)},{marker:n,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(n)},this,a.defaultSeparator)},e.prototype.formatIso=function(t,n){n===void 0&&(n={});var r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(t)),uj(t,r,n.omitTime)},e.prototype.timestampToMarker=function(t){return this.timeZone==="local"?la(fI(new Date(t))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(t):la(this.namedTimeZoneImpl.timestampToArray(t))},e.prototype.offsetForMarker=function(t){return this.timeZone==="local"?-mI(Mu(t)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Mu(t)):null},e.prototype.toDate=function(t,n){return this.timeZone==="local"?mI(Mu(t)):this.timeZone==="UTC"?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-this.namedTimeZoneImpl.offsetForArray(Mu(t))*1e3*60):new Date(t.valueOf()-(n||0))},e}(),fV=[],cO={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},hO=ft(ft({},cO),{buttonHints:{prev:"Previous $0",next:"Next $0",today:function(e,t){return t==="day"?"Today":"This "+e}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:function(e){return"Show "+e+" more event"+(e===1?"":"s")}});function mV(e){for(var t=e.length>0?e[0].code:"en",n=fV.concat(e),r={en:hO},a=0,c=n;a<c.length;a++){var d=c[a];r[d.code]=d}return{map:r,defaultCode:t}}function dO(e,t){return typeof e=="object"&&!Array.isArray(e)?pO(e.code,[e.code],e):gV(e,t)}function gV(e,t){var n=[].concat(e||[]),r=yV(n,t)||hO;return pO(e,n,r)}function yV(e,t){for(var n=0;n<e.length;n+=1)for(var r=e[n].toLocaleLowerCase().split("-"),a=r.length;a>0;a-=1){var c=r.slice(0,a).join("-");if(t[c])return t[c]}return null}function pO(e,t,n){var r=US([cO,n],["buttonText"]);delete r.code;var a=r.week;return delete r.week,{codeArg:e,codes:t,week:a,simpleNumberFormat:new Intl.NumberFormat(e),options:r}}var vV={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function _V(e,t){return yx(xV(e),null,t)}function xV(e){var t;return e===!0?t=[{}]:Array.isArray(e)?t=e.filter(function(n){return n.daysOfWeek}):typeof e=="object"&&e?t=[e]:t=[],t=t.map(function(n){return ft(ft({},vV),n)}),t}function bV(e,t){return e.left>=t.left&&e.left<t.right&&e.top>=t.top&&e.top<t.bottom}function fO(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function wV(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function EV(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function CV(e,t){return{left:e.left-t.left,top:e.top-t.top}}var rw;function mO(){return rw==null&&(rw=SV()),rw}function SV(){if(typeof document=="undefined")return!0;var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);var t=e.querySelector("div"),n=t.offsetHeight>0;return document.body.removeChild(e),n}function gO(e,t,n,r){return{dow:e.getUTCDay(),isDisabled:Boolean(r&&!uh(r.activeRange,e)),isOther:Boolean(r&&!uh(r.currentRange,e)),isToday:Boolean(t&&uh(t,e)),isPast:Boolean(n?e<n:t?e<t.start:!1),isFuture:Boolean(n?e>n:t?e>=t.end:!1)}}function KS(e,t){var n=["fc-day","fc-day-"+j8[e.dow]];return e.isDisabled?n.push("fc-day-disabled"):(e.isToday&&(n.push("fc-day-today"),n.push(t.getClass("today"))),e.isPast&&n.push("fc-day-past"),e.isFuture&&n.push("fc-day-future"),e.isOther&&n.push("fc-day-other")),n}var kV=vo({year:"numeric",month:"long",day:"numeric"}),TV=vo({week:"long"});function YS(e,t,n,r){n===void 0&&(n="day"),r===void 0&&(r=!0);var a=e.dateEnv,c=e.options,d=e.calendarApi,o=a.format(t,n==="week"?TV:kV);if(c.navLinks){var v=a.toDate(t),C=function(I){var D=n==="day"?c.navLinkDayClick:n==="week"?c.navLinkWeekClick:null;typeof D=="function"?D.call(d,a.toDate(t),I):(typeof D=="string"&&(n=D),d.zoomTo(t,n))};return ft({title:Hm(c.navLinkHint,[o,v],o),"data-navlink":""},r?H3(C):{onClick:C})}return{"aria-label":o}}var iw=null;function AV(){return iw===null&&(iw=MV()),iw}function MV(){var e=document.createElement("div");$m(e,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),e.innerHTML="<div></div>",document.body.appendChild(e);var t=e.firstChild,n=t.getBoundingClientRect().left>e.getBoundingClientRect().left;return zS(e),n}var ow;function IV(){return ow||(ow=PV()),ow}function PV(){var e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);var t=yO(e);return document.body.removeChild(e),t}function yO(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function DV(e,t){t===void 0&&(t=!1);var n=window.getComputedStyle(e),r=parseInt(n.borderLeftWidth,10)||0,a=parseInt(n.borderRightWidth,10)||0,c=parseInt(n.borderTopWidth,10)||0,d=parseInt(n.borderBottomWidth,10)||0,o=yO(e),v=o.y-r-a,C=o.x-c-d,I={borderLeft:r,borderRight:a,borderTop:c,borderBottom:d,scrollbarBottom:C,scrollbarLeft:0,scrollbarRight:0};return AV()&&n.direction==="rtl"?I.scrollbarLeft=v:I.scrollbarRight=v,t&&(I.paddingLeft=parseInt(n.paddingLeft,10)||0,I.paddingRight=parseInt(n.paddingRight,10)||0,I.paddingTop=parseInt(n.paddingTop,10)||0,I.paddingBottom=parseInt(n.paddingBottom,10)||0),I}function RV(e,t,n){t===void 0&&(t=!1);var r=n?e.getBoundingClientRect():JS(e),a=DV(e,t),c={left:r.left+a.borderLeft+a.scrollbarLeft,right:r.right-a.borderRight-a.scrollbarRight,top:r.top+a.borderTop,bottom:r.bottom-a.borderBottom-a.scrollbarBottom};return t&&(c.left+=a.paddingLeft,c.right-=a.paddingRight,c.top+=a.paddingTop,c.bottom-=a.paddingBottom),c}function JS(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset}}function LV(e){for(var t=vO(e),n=e.getBoundingClientRect(),r=0,a=t;r<a.length;r++){var c=a[r],d=fO(n,c.getBoundingClientRect());if(d)n=d;else return null}return n}function vO(e){for(var t=[];e instanceof HTMLElement;){var n=window.getComputedStyle(e);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&t.push(e),e=e.parentNode}return t}function OV(e,t,n){var r=!1,a=function(){r||(r=!0,t.apply(this,arguments))},c=function(){r||(r=!0,n&&n.apply(this,arguments))},d=e(a,c);d&&typeof d.then=="function"&&d.then(a,c)}var n0=function(){function e(){this.handlers={},this.thisContext=null}return e.prototype.setThisContext=function(t){this.thisContext=t},e.prototype.setOptions=function(t){this.options=t},e.prototype.on=function(t,n){zV(this.handlers,t,n)},e.prototype.off=function(t,n){BV(this.handlers,t,n)},e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var a=this.handlers[t]||[],c=this.options&&this.options[t],d=[].concat(c||[],a),o=0,v=d;o<v.length;o++){var C=v[o];C.apply(this.thisContext,n)}},e.prototype.hasHandlers=function(t){return Boolean(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])},e}();function zV(e,t,n){(e[t]||(e[t]=[])).push(n)}function BV(e,t,n){n?e[t]&&(e[t]=e[t].filter(function(r){return r!==n})):delete e[t]}var YE=function(){function e(t,n,r,a){this.els=n;var c=this.originClientRect=t.getBoundingClientRect();r&&this.buildElHorizontals(c.left),a&&this.buildElVerticals(c.top)}return e.prototype.buildElHorizontals=function(t){for(var n=[],r=[],a=0,c=this.els;a<c.length;a++){var d=c[a],o=d.getBoundingClientRect();n.push(o.left-t),r.push(o.right-t)}this.lefts=n,this.rights=r},e.prototype.buildElVerticals=function(t){for(var n=[],r=[],a=0,c=this.els;a<c.length;a++){var d=c[a],o=d.getBoundingClientRect();n.push(o.top-t),r.push(o.bottom-t)}this.tops=n,this.bottoms=r},e.prototype.leftToIndex=function(t){var n=this,r=n.lefts,a=n.rights,c=r.length,d;for(d=0;d<c;d+=1)if(t>=r[d]&&t<a[d])return d},e.prototype.topToIndex=function(t){var n=this,r=n.tops,a=n.bottoms,c=r.length,d;for(d=0;d<c;d+=1)if(t>=r[d]&&t<a[d])return d},e.prototype.getWidth=function(t){return this.rights[t]-this.lefts[t]},e.prototype.getHeight=function(t){return this.bottoms[t]-this.tops[t]},e}(),QS=function(){function e(){}return e.prototype.getMaxScrollTop=function(){return this.getScrollHeight()-this.getClientHeight()},e.prototype.getMaxScrollLeft=function(){return this.getScrollWidth()-this.getClientWidth()},e.prototype.canScrollVertically=function(){return this.getMaxScrollTop()>0},e.prototype.canScrollHorizontally=function(){return this.getMaxScrollLeft()>0},e.prototype.canScrollUp=function(){return this.getScrollTop()>0},e.prototype.canScrollDown=function(){return this.getScrollTop()<this.getMaxScrollTop()},e.prototype.canScrollLeft=function(){return this.getScrollLeft()>0},e.prototype.canScrollRight=function(){return this.getScrollLeft()<this.getMaxScrollLeft()},e}(),FV=function(e){Ir(t,e);function t(n){var r=e.call(this)||this;return r.el=n,r}return t.prototype.getScrollTop=function(){return this.el.scrollTop},t.prototype.getScrollLeft=function(){return this.el.scrollLeft},t.prototype.setScrollTop=function(n){this.el.scrollTop=n},t.prototype.setScrollLeft=function(n){this.el.scrollLeft=n},t.prototype.getScrollWidth=function(){return this.el.scrollWidth},t.prototype.getScrollHeight=function(){return this.el.scrollHeight},t.prototype.getClientHeight=function(){return this.el.clientHeight},t.prototype.getClientWidth=function(){return this.el.clientWidth},t}(QS),NV=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getScrollTop=function(){return window.pageYOffset},t.prototype.getScrollLeft=function(){return window.pageXOffset},t.prototype.setScrollTop=function(n){window.scroll(window.pageXOffset,n)},t.prototype.setScrollLeft=function(n){window.scroll(n,window.pageYOffset)},t.prototype.getScrollWidth=function(){return document.documentElement.scrollWidth},t.prototype.getScrollHeight=function(){return document.documentElement.scrollHeight},t.prototype.getClientHeight=function(){return document.documentElement.clientHeight},t.prototype.getClientWidth=function(){return document.documentElement.clientWidth},t}(QS),jg=function(){function e(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}return e.prototype.setIconOverride=function(t){var n,r;if(typeof t=="object"&&t){n=ft({},this.iconClasses);for(r in t)n[r]=this.applyIconOverridePrefix(t[r]);this.iconClasses=n}else t===!1&&(this.iconClasses={})},e.prototype.applyIconOverridePrefix=function(t){var n=this.iconOverridePrefix;return n&&t.indexOf(n)!==0&&(t=n+t),t},e.prototype.getClass=function(t){return this.classes[t]||""},e.prototype.getIconClass=function(t,n){var r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[t]||this.iconClasses[t]:r=this.iconClasses[t],r?this.baseIconClass+" "+r:""},e.prototype.getCustomButtonIconClass=function(t){var n;return this.iconOverrideCustomButtonOption&&(n=t[this.iconOverrideCustomButtonOption],n)?this.baseIconClass+" "+this.applyIconOverridePrefix(n):""},e}();jg.prototype.classes={};jg.prototype.iconClasses={};jg.prototype.baseIconClass="";jg.prototype.iconOverridePrefix="";var UV=function(){function e(t,n,r,a){var c=this;this.execFunc=t,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=a,this.handleScrollRequest=function(d){c.queuedRequest=ft({},c.queuedRequest||{},d),c.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}return e.prototype.detach=function(){this.emitter.off("_scrollRequest",this.handleScrollRequest)},e.prototype.update=function(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()},e.prototype.fireInitialScroll=function(){this.handleScrollRequest({time:this.scrollTime})},e.prototype.drain=function(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)},e}(),kh=U3({});function jV(e,t,n,r,a,c,d,o,v,C,I,D,F){return{dateEnv:a,options:n,pluginHooks:d,emitter:C,dispatch:o,getCurrentData:v,calendarApi:I,viewSpec:e,viewApi:t,dateProfileGenerator:r,theme:c,isRtl:n.direction==="rtl",addResizeHandler:function(U){C.on("_resize",U)},removeResizeHandler:function(U){C.off("_resize",U)},createScrollResponder:function(U){return new UV(U,C,Mr(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:D,unregisterInteractiveComponent:F}}var r0=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.shouldComponentUpdate=function(n,r){return this.debug&&console.log(gI(n,this.props),gI(r,this.state)),!tw(this.props,n,this.propEquality)||!tw(this.state,r,this.stateEquality)},t.prototype.safeSetState=function(n){tw(this.state,ft(ft({},this.state),n),this.stateEquality)||this.setState(n)},t.addPropsEquality=VV,t.addStateEquality=$V,t.contextType=kh,t}(OS);r0.prototype.propEquality={};r0.prototype.stateEquality={};var ai=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.contextType=kh,t}(r0);function VV(e){var t=Object.create(this.prototype.propEquality);ft(t,e),this.prototype.propEquality=t}function $V(e){var t=Object.create(this.prototype.stateEquality);ft(t,e),this.prototype.stateEquality=t}function Ll(e,t){typeof e=="function"?e(t):e&&(e.current=t)}var Bp=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.uid=Op(),n}return t.prototype.prepareHits=function(){},t.prototype.queryHit=function(n,r,a,c){return null},t.prototype.isValidSegDownEl=function(n){return!this.props.eventDrag&&!this.props.eventResize&&!Bo(n,".fc-event-mirror")},t.prototype.isValidDateDownEl=function(n){return!Bo(n,".fc-event:not(.fc-bg-event)")&&!Bo(n,".fc-more-link")&&!Bo(n,"a[data-navlink]")&&!Bo(n,".fc-popover")},t}(ai);function Ku(e){return{id:Op(),deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,contentTypeHandlers:e.contentTypeHandlers||{},listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function HV(e,t){var n={},r={reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,contentTypeHandlers:{},listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(c){for(var d=0,o=c;d<o.length;d++){var v=o[d];n[v.id]||(n[v.id]=!0,a(v.deps),r=GV(r,v))}}return e&&a(e),a(t),r}function WV(){var e=[],t=[],n;return function(r,a){return(!n||!bg(r,e)||!bg(a,t))&&(n=HV(r,a)),e=r,t=a,n}}function GV(e,t){return{reducers:e.reducers.concat(t.reducers),isLoadingFuncs:e.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:e.contextInit.concat(t.contextInit),eventRefiners:ft(ft({},e.eventRefiners),t.eventRefiners),eventDefMemberAdders:e.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:ft(ft({},e.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:e.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:e.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:e.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:e.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:e.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:e.dateSpanTransforms.concat(t.dateSpanTransforms),views:ft(ft({},e.views),t.views),viewPropsTransformers:e.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||e.isPropsValid,externalDefTransforms:e.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:e.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:e.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:e.calendarInteractions.concat(t.calendarInteractions),componentInteractions:e.componentInteractions.concat(t.componentInteractions),themeClasses:ft(ft({},e.themeClasses),t.themeClasses),eventSourceDefs:e.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||e.cmdFormatter,recurringTypes:e.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||e.namedTimeZonedImpl,initialView:e.initialView||t.initialView,elementDraggingImpl:e.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:ft(ft({},e.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||e.scrollGridImpl,contentTypeHandlers:ft(ft({},e.contentTypeHandlers),t.contentTypeHandlers),listenerRefiners:ft(ft({},e.listenerRefiners),t.listenerRefiners),optionRefiners:ft(ft({},e.optionRefiners),t.optionRefiners),propSetHandlers:ft(ft({},e.propSetHandlers),t.propSetHandlers)}}var Yu=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(jg);Yu.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Yu.prototype.baseIconClass="fc-icon";Yu.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Yu.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Yu.prototype.iconOverrideOption="buttonIcons";Yu.prototype.iconOverrideCustomButtonOption="icon";Yu.prototype.iconOverridePrefix="fc-icon-";function qV(e,t){var n={},r;for(r in e)JE(r,n,e,t);for(r in t)JE(r,n,e,t);return n}function JE(e,t,n,r){if(t[e])return t[e];var a=ZV(e,t,n,r);return a&&(t[e]=a),a}function ZV(e,t,n,r){var a=n[e],c=r[e],d=function(I){return a&&a[I]!==null?a[I]:c&&c[I]!==null?c[I]:null},o=d("component"),v=d("superType"),C=null;if(v){if(v===e)throw new Error("Can't have a custom view type that references itself");C=JE(v,t,n,r)}return!o&&C&&(o=C.component),o?{type:e,component:o,defaults:ft(ft({},C?C.defaults:{}),a?a.rawOptions:{}),overrides:ft(ft({},C?C.overrides:{}),c?c.rawOptions:{})}:null}var Fp=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.rootElRef=Ya(),n.handleRootEl=function(r){Ll(n.rootElRef,r),n.props.elRef&&Ll(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this,r=this.props,a=r.hookProps;return _t(ek,{hookProps:a,didMount:r.didMount,willUnmount:r.willUnmount,elRef:this.handleRootEl},function(c){return _t(_O,{hookProps:a,content:r.content,defaultContent:r.defaultContent,backupElRef:n.rootElRef},function(d,o){return r.children(c,bO(r.classNames,a),d,o)})})},t}(ai),XV=U3(0);function _O(e){return _t(XV.Consumer,null,function(t){return _t(KV,ft({renderId:t},e))})}var KV=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.innerElRef=Ya(),n}return t.prototype.render=function(){return this.props.children(this.innerElRef,this.renderInnerContent())},t.prototype.componentDidMount=function(){this.updateCustomContent()},t.prototype.componentDidUpdate=function(){this.updateCustomContent()},t.prototype.componentWillUnmount=function(){this.customContentInfo&&this.customContentInfo.destroy&&this.customContentInfo.destroy()},t.prototype.renderInnerContent=function(){var n=this.customContentInfo,r=this.getInnerContent(),a=this.getContentMeta(r);return!n||n.contentKey!==a.contentKey?(n&&(n.destroy&&n.destroy(),n=this.customContentInfo=null),a.contentKey&&(n=this.customContentInfo=ft({contentKey:a.contentKey,contentVal:r[a.contentKey]},a.buildLifecycleFuncs()))):n&&(n.contentVal=r[a.contentKey]),n?[]:r},t.prototype.getInnerContent=function(){var n=this.props,r=AI(n.content,n.hookProps);return r===void 0&&(r=AI(n.defaultContent,n.hookProps)),r==null?null:r},t.prototype.getContentMeta=function(n){var r=this.context.pluginHooks.contentTypeHandlers,a="",c=null;if(n){for(var d in r)if(n[d]!==void 0){a=d,c=r[d];break}}return{contentKey:a,buildLifecycleFuncs:c}},t.prototype.updateCustomContent=function(){this.customContentInfo&&this.customContentInfo.render(this.innerElRef.current||this.props.backupElRef.current,this.customContentInfo.contentVal)},t}(ai),ek=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleRootEl=function(r){n.rootEl=r,n.props.elRef&&Ll(n.props.elRef,r)},n}return t.prototype.render=function(){return this.props.children(this.handleRootEl)},t.prototype.componentDidMount=function(){var n=this.props.didMount;n&&n(ft(ft({},this.props.hookProps),{el:this.rootEl}))},t.prototype.componentWillUnmount=function(){var n=this.props.willUnmount;n&&n(ft(ft({},this.props.hookProps),{el:this.rootEl}))},t}(ai);function xO(){var e,t,n=[];return function(r,a){return(!t||!Rl(t,a)||r!==e)&&(e=r,t=a,n=bO(r,a)),n}}function bO(e,t){return typeof e=="function"&&(e=e(t)),XE(e)}function AI(e,t){return typeof e=="function"?e(t,_t):e}var QE=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.normalizeClassNames=xO(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options,d={view:a.viewApi},o=this.normalizeClassNames(c.viewClassNames,d);return _t(ek,{hookProps:d,didMount:c.viewDidMount,willUnmount:c.viewWillUnmount,elRef:r.elRef},function(v){return r.children(v,["fc-"+r.viewSpec.type+"-view","fc-view"].concat(o))})},t}(ai);function MI(e){return Sh(e,YV)}function YV(e){var t=typeof e=="function"?{component:e}:e,n=t.component;return t.content&&(n=JV(t)),{superType:t.type,component:n,rawOptions:t}}function JV(e){return function(t){return _t(kh.Consumer,null,function(n){return _t(QE,{viewSpec:n.viewSpec},function(r,a){var c=ft(ft({},t),{nextDayThreshold:n.options.nextDayThreshold});return _t(Fp,{hookProps:c,classNames:e.classNames,content:e.content,didMount:e.didMount,willUnmount:e.willUnmount,elRef:r},function(d,o,v,C){return _t("div",{className:a.concat(o).join(" "),ref:d},C)})})})}}function QV(e,t,n,r){var a=MI(e),c=MI(t.views),d=qV(a,c);return Sh(d,function(o){return e$(o,c,t,n,r)})}function e$(e,t,n,r,a){var c=e.overrides.duration||e.defaults.duration||r.duration||n.duration,d=null,o="",v="",C={};if(c&&(d=t$(c),d)){var I=qE(d);o=I.unit,I.value===1&&(v=o,C=t[o]?t[o].rawOptions:{})}var D=function(U){var j=U.buttonText||{},T=e.defaults.buttonTextKey;return T!=null&&j[T]!=null?j[T]:j[e.type]!=null?j[e.type]:j[v]!=null?j[v]:null},F=function(U){var j=U.buttonHints||{},T=e.defaults.buttonTextKey;return T!=null&&j[T]!=null?j[T]:j[e.type]!=null?j[e.type]:j[v]!=null?j[v]:null};return{type:e.type,component:e.component,duration:d,durationUnit:o,singleUnit:v,optionDefaults:e.defaults,optionOverrides:ft(ft({},C),e.overrides),buttonTextOverride:D(r)||D(n)||e.overrides.buttonText,buttonTextDefault:D(a)||e.defaults.buttonText||D(Wm)||e.type,buttonTitleOverride:F(r)||F(n)||e.overrides.buttonHint,buttonTitleDefault:F(a)||e.defaults.buttonHint||F(Wm)}}var II={};function t$(e){var t=JSON.stringify(e),n=II[t];return n===void 0&&(n=Mr(e),II[t]=n),n}var wO=function(){function e(t){this.props=t,this.nowDate=Ug(t.nowInput,t.dateEnv),this.initHiddenDays()}return e.prototype.buildPrev=function(t,n,r){var a=this.props.dateEnv,c=a.subtract(a.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(c,-1,r)},e.prototype.buildNext=function(t,n,r){var a=this.props.dateEnv,c=a.add(a.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(c,1,r)},e.prototype.build=function(t,n,r){r===void 0&&(r=!0);var a=this.props,c,d,o,v,C,I;return c=this.buildValidRange(),c=this.trimHiddenDays(c),r&&(t=Fj(t,c)),d=this.buildCurrentRangeInfo(t,n),o=/^(year|month|week|day)$/.test(d.unit),v=this.buildRenderRange(this.trimHiddenDays(d.range),d.unit,o),v=this.trimHiddenDays(v),C=v,a.showNonCurrentDates||(C=wg(C,d.range)),C=this.adjustActiveRange(C),C=wg(C,c),I=qS(d.range,c),{validRange:c,currentRange:d.range,currentRangeUnit:d.unit,isRangeAllDay:o,activeRange:C,renderRange:v,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:I,dateIncrement:this.buildDateIncrement(d.duration)}},e.prototype.buildValidRange=function(){var t=this.props.validRangeInput,n=typeof t=="function"?t.call(this.props.calendarApi,this.nowDate):t;return this.refineRange(n)||{start:null,end:null}},e.prototype.buildCurrentRangeInfo=function(t,n){var r=this.props,a=null,c=null,d=null,o;return r.duration?(a=r.duration,c=r.durationUnit,d=this.buildRangeFromDuration(t,n,a,c)):(o=this.props.dayCount)?(c="day",d=this.buildRangeFromDayCount(t,n,o)):(d=this.buildCustomVisibleRange(t))?c=r.dateEnv.greatestWholeUnit(d.start,d.end).unit:(a=this.getFallbackDuration(),c=qE(a).unit,d=this.buildRangeFromDuration(t,n,a,c)),{duration:a,unit:c,range:d}},e.prototype.getFallbackDuration=function(){return Mr({day:1})},e.prototype.adjustActiveRange=function(t){var n=this.props,r=n.dateEnv,a=n.usesMinMaxTime,c=n.slotMinTime,d=n.slotMaxTime,o=t.start,v=t.end;return a&&(cp(c)<0&&(o=oi(o),o=r.add(o,c)),cp(d)>1&&(v=oi(v),v=qo(v,-1),v=r.add(v,d))),{start:o,end:v}},e.prototype.buildRangeFromDuration=function(t,n,r,a){var c=this.props,d=c.dateEnv,o=c.dateAlignment,v,C,I;if(!o){var D=this.props.dateIncrement;D&&xg(D)<xg(r)?o=qE(D).unit:o=a}cp(r)<=1&&this.isHiddenDay(v)&&(v=this.skipHiddenDays(v,n),v=oi(v));function F(){v=d.startOf(t,o),C=d.add(v,r),I={start:v,end:C}}return F(),this.trimHiddenDays(I)||(t=this.skipHiddenDays(t,n),F()),I},e.prototype.buildRangeFromDayCount=function(t,n,r){var a=this.props,c=a.dateEnv,d=a.dateAlignment,o=0,v=t,C;d&&(v=c.startOf(v,d)),v=oi(v),v=this.skipHiddenDays(v,n),C=v;do C=qo(C,1),this.isHiddenDay(C)||(o+=1);while(o<r);return{start:v,end:C}},e.prototype.buildCustomVisibleRange=function(t){var n=this.props,r=n.visibleRangeInput,a=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(t)):r,c=this.refineRange(a);return c&&(c.start==null||c.end==null)?null:c},e.prototype.buildRenderRange=function(t,n,r){return t},e.prototype.buildDateIncrement=function(t){var n=this.props.dateIncrement,r;return n||((r=this.props.dateAlignment)?Mr(1,r):t||Mr({days:1}))},e.prototype.refineRange=function(t){if(t){var n=Oj(t,this.props.dateEnv);return n&&(n=Q3(n)),n}return null},e.prototype.initHiddenDays=function(){var t=this.props.hiddenDays||[],n=[],r=0,a;for(this.props.weekends===!1&&t.push(0,6),a=0;a<7;a+=1)(n[a]=t.indexOf(a)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n},e.prototype.trimHiddenDays=function(t){var n=t.start,r=t.end;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null},e.prototype.isHiddenDay=function(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]},e.prototype.skipHiddenDays=function(t,n,r){for(n===void 0&&(n=1),r===void 0&&(r=!1);this.isHiddenDayHash[(t.getUTCDay()+(r?n:0)+7)%7];)t=qo(t,n);return t},e}();function n$(e,t){switch(t.type){case"CHANGE_VIEW_TYPE":e=t.viewType}return e}function r$(e,t){var n;switch(t.type){case"SET_OPTION":return ft(ft({},e),(n={},n[t.optionName]=t.rawOptionValue,n));default:return e}}function i$(e,t,n,r){var a;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||n);case"CHANGE_DATE":return r.build(t.dateMarker);case"PREV":if(a=r.buildPrev(e,n),a.isValid)return a;break;case"NEXT":if(a=r.buildNext(e,n),a.isValid)return a;break}return e}function o$(e,t,n){var r=t?t.activeRange:null;return CO({},d$(e,n),r,n)}function a$(e,t,n,r){var a=n?n.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return CO(e,t.sources,a,r);case"REMOVE_EVENT_SOURCE":return l$(e,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?SO(e,a,r):e;case"FETCH_EVENT_SOURCES":return tk(e,t.sourceIds?q3(t.sourceIds):kO(e,r),a,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return h$(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}}function s$(e,t,n){var r=t?t.activeRange:null;return tk(e,kO(e,n),r,!0,n)}function EO(e){for(var t in e)if(e[t].isFetching)return!0;return!1}function CO(e,t,n,r){for(var a={},c=0,d=t;c<d.length;c++){var o=d[c];a[o.sourceId]=o}return n&&(a=SO(a,n,r)),ft(ft({},e),a)}function l$(e,t){return vh(e,function(n){return n.sourceId!==t})}function SO(e,t,n){return tk(e,vh(e,function(r){return u$(r,t,n)}),t,!1,n)}function u$(e,t,n){return TO(e,n)?!n.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end:!e.latestFetchId}function tk(e,t,n,r,a){var c={};for(var d in e){var o=e[d];t[d]?c[d]=c$(o,n,r,a):c[d]=o}return c}function c$(e,t,n,r){var a=r.options,c=r.calendarApi,d=r.pluginHooks.eventSourceDefs[e.sourceDefId],o=Op();return d.fetch({eventSource:e,range:t,isRefetch:n,context:r},function(v){var C=v.rawEvents;a.eventSourceSuccess&&(C=a.eventSourceSuccess.call(c,C,v.xhr)||C),e.success&&(C=e.success.call(c,C,v.xhr)||C),r.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:o,fetchRange:t,rawEvents:C})},function(v){console.warn(v.message,v),a.eventSourceFailure&&a.eventSourceFailure.call(c,v),e.failure&&e.failure(v),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:o,fetchRange:t,error:v})}),ft(ft({},e),{isFetching:!0,latestFetchId:o})}function h$(e,t,n,r){var a,c=e[t];return c&&n===c.latestFetchId?ft(ft({},e),(a={},a[t]=ft(ft({},c),{isFetching:!1,fetchRange:r}),a)):e}function kO(e,t){return vh(e,function(n){return TO(n,t)})}function d$(e,t){var n=sO(t),r=[].concat(e.eventSources||[]),a=[];e.initialEvents&&r.unshift(e.initialEvents),e.events&&r.unshift(e.events);for(var c=0,d=r;c<d.length;c++){var o=d[c],v=aO(o,t,n);v&&a.push(v)}return a}function TO(e,t){var n=t.pluginHooks.eventSourceDefs;return!n[e.sourceDefId].ignoreRange}function p$(e,t,n,r,a){switch(t.type){case"RECEIVE_EVENTS":return f$(e,n[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,a);case"ADD_EVENTS":return g$(e,t.eventStore,r?r.activeRange:null,a);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return WS(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?Sp(e,r.activeRange,a):e;case"REMOVE_EVENTS":return Tj(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return AO(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return e0(e,function(c){return!c.sourceId});case"REMOVE_ALL_EVENTS":return bs();default:return e}}function f$(e,t,n,r,a,c){if(t&&n===t.latestFetchId){var d=yx(m$(a,t,c),t,c);return r&&(d=Sp(d,r,c)),WS(AO(e,t.sourceId),d)}return e}function m$(e,t,n){var r=n.options.eventDataTransform,a=t?t.eventDataTransform:null;return a&&(e=PI(e,a)),r&&(e=PI(e,r)),e}function PI(e,t){var n;if(!t)n=e;else{n=[];for(var r=0,a=e;r<a.length;r++){var c=a[r],d=t(c);d?n.push(d):d==null&&n.push(c)}}return n}function g$(e,t,n,r){return n&&(t=Sp(t,n,r)),WS(e,t)}function y$(e,t,n){var r=e.defs,a=Sh(e.instances,function(c){var d=r[c.defId];return d.allDay||d.recurringDef?c:ft(ft({},c),{range:{start:n.createMarker(t.toDate(c.range.start,c.forcedStartTzo)),end:n.createMarker(t.toDate(c.range.end,c.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:c.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:c.forcedEndTzo})});return{defs:r,instances:a}}function AO(e,t){return e0(e,function(n){return n.sourceId!==t})}function v$(e,t){return{defs:e.defs,instances:vh(e.instances,function(n){return!t[n.instanceId]})}}function _$(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function x$(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function b$(e,t){var n;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function w$(e,t){var n;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function E$(e,t,n,r,a){var c=e.headerToolbar?DI(e.headerToolbar,e,t,n,r,a):null,d=e.footerToolbar?DI(e.footerToolbar,e,t,n,r,a):null;return{header:c,footer:d}}function DI(e,t,n,r,a,c){var d={},o=[],v=!1;for(var C in e){var I=e[C],D=C$(I,t,n,r,a,c);d[C]=D.widgets,o.push.apply(o,D.viewsWithButtons),v=v||D.hasTitle}return{sectionWidgets:d,viewsWithButtons:o,hasTitle:v}}function C$(e,t,n,r,a,c){var d=t.direction==="rtl",o=t.customButtons||{},v=n.buttonText||{},C=t.buttonText||{},I=n.buttonHints||{},D=t.buttonHints||{},F=e?e.split(" "):[],U=[],j=!1,T=F.map(function(H){return H.split(",").map(function(N){if(N==="title")return j=!0,{buttonName:N};var q,z,B,k,w,R;if(q=o[N])B=function(ue){q.click&&q.click.call(ue.target,ue,ue.target)},(k=r.getCustomButtonIconClass(q))||(k=r.getIconClass(N,d))||(w=q.text),R=q.hint||q.text;else if(z=a[N]){U.push(N),B=function(){c.changeView(N)},(w=z.buttonTextOverride)||(k=r.getIconClass(N,d))||(w=z.buttonTextDefault);var J=z.buttonTextOverride||z.buttonTextDefault;R=Hm(z.buttonTitleOverride||z.buttonTitleDefault||t.viewHint,[J,N],J)}else if(c[N])if(B=function(){c[N]()},(w=v[N])||(k=r.getIconClass(N,d))||(w=C[N]),N==="prevYear"||N==="nextYear"){var ie=N==="prevYear"?"prev":"next";R=Hm(I[ie]||D[ie],[C.year||"year","year"],C[N])}else R=function(ue){return Hm(I[N]||D[N],[C[ue]||ue,ue],C[N])};return{buttonName:N,buttonClick:B,buttonIcon:k,buttonText:w,buttonHint:R}})});return{widgets:T,viewsWithButtons:U,hasTitle:j}}var S$={ignoreRange:!0,parseMeta:function(e){return Array.isArray(e.events)?e.events:null},fetch:function(e,t){t({rawEvents:e.eventSource.meta})}},k$=Ku({eventSourceDefs:[S$]}),T$={parseMeta:function(e){return typeof e.events=="function"?e.events:null},fetch:function(e,t,n){var r=e.context.dateEnv,a=e.eventSource.meta;OV(a.bind(null,rO(e.range,r)),function(c){t({rawEvents:c})},n)}},A$=Ku({eventSourceDefs:[T$]});function M$(e,t,n,r,a){e=e.toUpperCase();var c=null;e==="GET"?t=I$(t,n):c=MO(n);var d=new XMLHttpRequest;d.open(e,t,!0),e!=="GET"&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.onload=function(){if(d.status>=200&&d.status<400){var o=!1,v=void 0;try{v=JSON.parse(d.responseText),o=!0}catch{}o?r(v,d):a("Failure parsing JSON",d)}else a("Request failed",d)},d.onerror=function(){a("Request failed",d)},d.send(c)}function I$(e,t){return e+(e.indexOf("?")===-1?"?":"&")+MO(t)}function MO(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var P$={method:String,extraParams:vt,startParam:String,endParam:String,timeZoneParam:String},D$={parseMeta:function(e){return e.url&&(e.format==="json"||!e.format)?{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}:null},fetch:function(e,t,n){var r=e.eventSource.meta,a=L$(r,e.range,e.context);M$(r.method,r.url,a,function(c,d){t({rawEvents:c,xhr:d})},function(c,d){n({message:c,xhr:d})})}},R$=Ku({eventSourceRefiners:P$,eventSourceDefs:[D$]});function L$(e,t,n){var r=n.dateEnv,a=n.options,c,d,o,v,C={};return c=e.startParam,c==null&&(c=a.startParam),d=e.endParam,d==null&&(d=a.endParam),o=e.timeZoneParam,o==null&&(o=a.timeZoneParam),typeof e.extraParams=="function"?v=e.extraParams():v=e.extraParams||{},ft(C,v),C[c]=r.formatIso(t.start),C[d]=r.formatIso(t.end),r.timeZone!=="local"&&(C[o]=r.timeZone),C}var O$={daysOfWeek:vt,startTime:Mr,endTime:Mr,duration:Mr,startRecur:vt,endRecur:vt},z$={parse:function(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){var n={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null},r=void 0;return e.duration&&(r=e.duration),!r&&e.startTime&&e.endTime&&(r=aj(e.endTime,e.startTime)),{allDayGuess:Boolean(!e.startTime&&!e.endTime),duration:r,typeData:n}}return null},expand:function(e,t,n){var r=wg(t,{start:e.startRecur,end:e.endRecur});return r?F$(e.daysOfWeek,e.startTime,r,n):[]}},B$=Ku({recurringTypes:[z$],eventRefiners:O$});function F$(e,t,n,r){for(var a=e?q3(e):null,c=oi(n.start),d=n.end,o=[];c<d;){var v=void 0;(!a||a[c.getUTCDay()])&&(t?v=r.add(c,t):v=c,o.push(v)),c=qo(c,1)}return o}var N$=Ku({optionChangeHandlers:{events:function(e,t){RI([e],t)},eventSources:RI}});function RI(e,t){for(var n=jS(t.getCurrentData().eventSources),r=[],a=0,c=e;a<c.length;a++){for(var d=c[a],o=!1,v=0;v<n.length;v+=1)if(n[v]._raw===d){n.splice(v,1),o=!0;break}o||r.push(d)}for(var C=0,I=n;C<I.length;C++){var D=I[C];t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:D.sourceId})}for(var F=0,U=r;F<U.length;F++){var j=U[F];t.calendarApi.addEventSource(j)}}function U$(e,t){t.emitter.trigger("datesSet",ft(ft({},rO(e.activeRange,t.dateEnv)),{view:t.viewApi}))}function j$(e,t){var n=t.emitter;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",ch(e,t))}var V$=[k$,A$,R$,B$,N$,Ku({isLoadingFuncs:[function(e){return EO(e.eventSources)}],contentTypeHandlers:{html:$$,domNodes:H$},propSetHandlers:{dateProfile:U$,eventStore:j$}})];function $$(){var e=null,t="";function n(a,c){(a!==e||c!==t)&&(a.innerHTML=c),e=a,t=c}function r(){e.innerHTML="",e=null,t=""}return{render:n,destroy:r}}function H$(){var e=null,t=[];function n(a,c){var d=Array.prototype.slice.call(c);if(a!==e||!bg(t,d)){for(var o=0,v=d;o<v.length;o++){var C=v[o];a.appendChild(C)}r()}e=a,t=d}function r(){t.forEach(zS),t=[],e=null}return{render:n,destroy:r}}var IO=function(){function e(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}return e.prototype.request=function(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),t==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))},e.prototype.pause=function(t){t===void 0&&(t="");var n=this.pauseDepths;n[t]=(n[t]||0)+1,this.clearTimeout()},e.prototype.resume=function(t,n){t===void 0&&(t="");var r=this.pauseDepths;if(t in r){if(n)delete r[t];else{r[t]-=1;var a=r[t];a<=0&&delete r[t]}this.tryDrain()}},e.prototype.isPaused=function(){return Object.keys(this.pauseDepths).length},e.prototype.tryDrain=function(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}},e.prototype.clear=function(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}},e.prototype.clearTimeout=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},e.prototype.drained=function(){this.drainedOption&&this.drainedOption()},e}(),W$=function(){function e(t,n){this.runTaskOption=t,this.drainedOption=n,this.queue=[],this.delayedRunner=new IO(this.drain.bind(this))}return e.prototype.request=function(t,n){this.queue.push(t),this.delayedRunner.request(n)},e.prototype.pause=function(t){this.delayedRunner.pause(t)},e.prototype.resume=function(t,n){this.delayedRunner.resume(t,n)},e.prototype.drain=function(){for(var t=this.queue;t.length;){for(var n=[],r=void 0;r=t.shift();)this.runTask(r),n.push(r);this.drained(n)}},e.prototype.runTask=function(t){this.runTaskOption&&this.runTaskOption(t)},e.prototype.drained=function(t){this.drainedOption&&this.drainedOption(t)},e}();function G$(e,t,n){var r;return/^(year|month)$/.test(e.currentRangeUnit)?r=e.currentRange:r=e.activeRange,n.formatRange(r.start,r.end,vo(t.titleFormat||q$(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}function q$(e){var t=e.currentRangeUnit;if(t==="year")return{year:"numeric"};if(t==="month")return{year:"numeric",month:"long"};var n=px(e.currentRange.start,e.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}var Z$=function(){function e(t){var n=this;this.computeOptionsData=vr(this._computeOptionsData),this.computeCurrentViewData=vr(this._computeCurrentViewData),this.organizeRawLocales=vr(mV),this.buildLocale=vr(dO),this.buildPluginHooks=WV(),this.buildDateEnv=vr(X$),this.buildTheme=vr(K$),this.parseToolbars=vr(E$),this.buildViewSpecs=vr(QV),this.buildDateProfileGenerator=C_(Y$),this.buildViewApi=vr(J$),this.buildViewUiProps=C_(tH),this.buildEventUiBySource=vr(Q$,Rl),this.buildEventUiBases=vr(eH),this.parseContextBusinessHours=C_(nH),this.buildTitle=vr(G$),this.emitter=new n0,this.actionRunner=new W$(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.getCurrentData=function(){return n.data},this.dispatch=function(z){n.actionRunner.request(z)},this.props=t,this.actionRunner.pause();var r={},a=this.computeOptionsData(t.optionOverrides,r,t.calendarApi),c=a.calendarOptions.initialView||a.pluginHooks.initialView,d=this.computeCurrentViewData(c,a,t.optionOverrides,r);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(d.options);var o=aV(a.calendarOptions,a.dateEnv),v=d.dateProfileGenerator.build(o);uh(v.activeRange,o)||(o=v.currentRange.start);for(var C={dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},I=0,D=a.pluginHooks.contextInit;I<D.length;I++){var F=D[I];F(C)}for(var U=o$(a.calendarOptions,v,C),j={dynamicOptionOverrides:r,currentViewType:c,currentDate:o,dateProfile:v,businessHours:this.parseContextBusinessHours(C),eventSources:U,eventUiBases:{},eventStore:bs(),renderableEventStore:bs(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(C).selectionConfig},T=ft(ft({},C),j),H=0,N=a.pluginHooks.reducers;H<N.length;H++){var q=N[H];ft(j,q(null,null,T))}aw(j,C)&&this.emitter.trigger("loading",!0),this.state=j,this.updateData(),this.actionRunner.resume()}return e.prototype.resetOptions=function(t,n){var r=this.props;r.optionOverrides=n?ft(ft({},r.optionOverrides),t):t,this.actionRunner.request({type:"NOTHING"})},e.prototype._handleAction=function(t){var n=this,r=n.props,a=n.state,c=n.emitter,d=r$(a.dynamicOptionOverrides,t),o=this.computeOptionsData(r.optionOverrides,d,r.calendarApi),v=n$(a.currentViewType,t),C=this.computeCurrentViewData(v,o,r.optionOverrides,d);r.calendarApi.currentDataManager=this,c.setThisContext(r.calendarApi),c.setOptions(C.options);var I={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:r.calendarApi,dispatch:this.dispatch,emitter:c,getCurrentData:this.getCurrentData},D=a.currentDate,F=a.dateProfile;this.data&&this.data.dateProfileGenerator!==C.dateProfileGenerator&&(F=C.dateProfileGenerator.build(D)),D=oV(D,t),F=i$(F,t,D,C.dateProfileGenerator),(t.type==="PREV"||t.type==="NEXT"||!uh(F.currentRange,D))&&(D=F.currentRange.start);for(var U=a$(a.eventSources,t,F,I),j=p$(a.eventStore,t,U,F,I),T=EO(U),H=T&&!C.options.progressiveEventRendering&&a.renderableEventStore||j,N=this.buildViewUiProps(I),q=N.eventUiSingleBase,z=N.selectionConfig,B=this.buildEventUiBySource(U),k=this.buildEventUiBases(H.defs,q,B),w={dynamicOptionOverrides:d,currentViewType:v,currentDate:D,dateProfile:F,eventSources:U,eventStore:j,renderableEventStore:H,selectionConfig:z,eventUiBases:k,businessHours:this.parseContextBusinessHours(I),dateSelection:_$(a.dateSelection,t),eventSelection:x$(a.eventSelection,t),eventDrag:b$(a.eventDrag,t),eventResize:w$(a.eventResize,t)},R=ft(ft({},I),w),J=0,ie=o.pluginHooks.reducers;J<ie.length;J++){var ue=ie[J];ft(w,ue(a,t,R))}var se=aw(a,I),_e=aw(w,I);!se&&_e?c.trigger("loading",!0):se&&!_e&&c.trigger("loading",!1),this.state=w,r.onAction&&r.onAction(t)},e.prototype.updateData=function(){var t=this,n=t.props,r=t.state,a=this.data,c=this.computeOptionsData(n.optionOverrides,r.dynamicOptionOverrides,n.calendarApi),d=this.computeCurrentViewData(r.currentViewType,c,n.optionOverrides,r.dynamicOptionOverrides),o=this.data=ft(ft(ft({viewTitle:this.buildTitle(r.dateProfile,d.options,c.dateEnv),calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},c),d),r),v=c.pluginHooks.optionChangeHandlers,C=a&&a.calendarOptions,I=c.calendarOptions;if(C&&C!==I){C.timeZone!==I.timeZone&&(r.eventSources=o.eventSources=s$(o.eventSources,r.dateProfile,o),r.eventStore=o.eventStore=y$(o.eventStore,a.dateEnv,o.dateEnv));for(var D in v)C[D]!==I[D]&&v[D](I[D],o)}n.onData&&n.onData(o)},e.prototype._computeOptionsData=function(t,n,r){var a=this.processRawCalendarOptions(t,n),c=a.refinedOptions,d=a.pluginHooks,o=a.localeDefaults,v=a.availableLocaleData,C=a.extra;LI(C);var I=this.buildDateEnv(c.timeZone,c.locale,c.weekNumberCalculation,c.firstDay,c.weekText,d,v,c.defaultRangeSeparator),D=this.buildViewSpecs(d.views,t,n,o),F=this.buildTheme(c,d),U=this.parseToolbars(c,t,F,D,r);return{calendarOptions:c,pluginHooks:d,dateEnv:I,viewSpecs:D,theme:F,toolbarConfig:U,localeDefaults:o,availableRawLocales:v.map}},e.prototype.processRawCalendarOptions=function(t,n){var r=nw([Wm,t,n]),a=r.locales,c=r.locale,d=this.organizeRawLocales(a),o=d.map,v=this.buildLocale(c||d.defaultCode,o).options,C=this.buildPluginHooks(t.plugins||[],V$),I=this.currentCalendarOptionsRefiners=ft(ft(ft(ft(ft({},bI),wI),EI),C.listenerRefiners),C.optionRefiners),D={},F=nw([Wm,v,t,n]),U={},j=this.currentCalendarOptionsInput,T=this.currentCalendarOptionsRefined,H=!1;for(var N in F)N!=="plugins"&&(F[N]===j[N]||Xc[N]&&N in j&&Xc[N](j[N],F[N])?U[N]=T[N]:I[N]?(U[N]=I[N](F[N]),H=!0):D[N]=j[N]);return H&&(this.currentCalendarOptionsInput=F,this.currentCalendarOptionsRefined=U),{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:C,availableLocaleData:d,localeDefaults:v,extra:D}},e.prototype._computeCurrentViewData=function(t,n,r,a){var c=n.viewSpecs[t];if(!c)throw new Error('viewType "'+t+`" is not available. Please make sure you've loaded all neccessary plugins`);var d=this.processRawViewOptions(c,n.pluginHooks,n.localeDefaults,r,a),o=d.refinedOptions,v=d.extra;LI(v);var C=this.buildDateProfileGenerator({dateProfileGeneratorClass:c.optionDefaults.dateProfileGeneratorClass,duration:c.duration,durationUnit:c.durationUnit,usesMinMaxTime:c.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,nowInput:o.now,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,monthMode:o.monthMode,fixedWeekCount:o.fixedWeekCount}),I=this.buildViewApi(t,this.getCurrentData,n.dateEnv);return{viewSpec:c,options:o,dateProfileGenerator:C,viewApi:I}},e.prototype.processRawViewOptions=function(t,n,r,a,c){var d=nw([Wm,t.optionDefaults,r,a,t.optionOverrides,c]),o=ft(ft(ft(ft(ft(ft({},bI),wI),EI),Sj),n.listenerRefiners),n.optionRefiners),v={},C=this.currentViewOptionsInput,I=this.currentViewOptionsRefined,D=!1,F={};for(var U in d)d[U]===C[U]||Xc[U]&&Xc[U](d[U],C[U])?v[U]=I[U]:(d[U]===this.currentCalendarOptionsInput[U]||Xc[U]&&Xc[U](d[U],this.currentCalendarOptionsInput[U])?U in this.currentCalendarOptionsRefined&&(v[U]=this.currentCalendarOptionsRefined[U]):o[U]?v[U]=o[U](d[U]):F[U]=d[U],D=!0);return D&&(this.currentViewOptionsInput=d,this.currentViewOptionsRefined=v),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:F}},e}();function X$(e,t,n,r,a,c,d,o){var v=dO(t||d.defaultCode,d.map);return new pV({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:c.namedTimeZonedImpl,locale:v,weekNumberCalculation:n,firstDay:r,weekText:a,cmdFormatter:c.cmdFormatter,defaultSeparator:o})}function K$(e,t){var n=t.themeClasses[e.themeSystem]||Yu;return new n(e)}function Y$(e){var t=e.dateProfileGeneratorClass||wO;return new t(e)}function J$(e,t,n){return new nV(e,t,n)}function Q$(e){return Sh(e,function(t){return t.ui})}function eH(e,t,n){var r={"":t};for(var a in e){var c=e[a];c.sourceId&&n[c.sourceId]&&(r[a]=n[c.sourceId])}return r}function tH(e){var t=e.options;return{eventUiSingleBase:_x({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:typeof t.eventOverlap=="boolean"?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:_x({constraint:t.selectConstraint,overlap:typeof t.selectOverlap=="boolean"?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function aw(e,t){for(var n=0,r=t.pluginHooks.isLoadingFuncs;n<r.length;n++){var a=r[n];if(a(e))return!0}return!1}function nH(e){return _V(e.options.businessHours,e)}function LI(e,t){for(var n in e)console.warn("Unknown option '"+n+"'"+(t?" for view '"+t+"'":""))}var rH=function(e){Ir(t,e);function t(n){var r=e.call(this,n)||this;return r.handleData=function(a){r.dataManager?r.setState(a):r.state=a},r.dataManager=new Z$({optionOverrides:n.optionOverrides,calendarApi:n.calendarApi,onData:r.handleData}),r}return t.prototype.render=function(){return this.props.children(this.state)},t.prototype.componentDidUpdate=function(n){var r=this.props.optionOverrides;r!==n.optionOverrides&&this.dataManager.resetOptions(r)},t}(OS),iH=function(){function e(){this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}return e.prototype.addSegs=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var c=a[r];this.insertEntry(c,n)}return n},e.prototype.insertEntry=function(t,n){var r=this.findInsertion(t);return this.isInsertionValid(r,t)?(this.insertEntryAt(t,r),1):this.handleInvalidInsertion(r,t,n)},e.prototype.isInsertionValid=function(t,n){return(this.maxCoord===-1||t.levelCoord+n.thickness<=this.maxCoord)&&(this.maxStackCnt===-1||t.stackCnt<this.maxStackCnt)},e.prototype.handleInvalidInsertion=function(t,n,r){return this.allowReslicing&&t.touchingEntry?this.splitEntry(n,t.touchingEntry,r):(r.push(n),0)},e.prototype.splitEntry=function(t,n,r){var a=0,c=[],d=t.span,o=n.span;return d.start<o.start&&(a+=this.insertEntry({index:t.index,thickness:t.thickness,span:{start:d.start,end:o.start}},c)),d.end>o.end&&(a+=this.insertEntry({index:t.index,thickness:t.thickness,span:{start:o.end,end:d.end}},c)),a?(r.push.apply(r,Ii([{index:t.index,thickness:t.thickness,span:PO(o,d)}],c)),a):(r.push(t),0)},e.prototype.insertEntryAt=function(t,n){var r=this,a=r.entriesByLevel,c=r.levelCoords;n.lateral===-1?(sw(c,n.level,n.levelCoord),sw(a,n.level,[t])):sw(a[n.level],n.lateral,t),this.stackCnts[qm(t)]=n.stackCnt},e.prototype.findInsertion=function(t){for(var n=this,r=n.levelCoords,a=n.entriesByLevel,c=n.strictOrder,d=n.stackCnts,o=r.length,v=0,C=-1,I=-1,D=null,F=0,U=0;U<o;U+=1){var j=r[U];if(!c&&j>=v+t.thickness)break;for(var T=a[U],H=void 0,N=zI(T,t.span.start,OI),q=N[0]+N[1];(H=T[q])&&H.span.start<t.span.end;){var z=j+H.thickness;z>v&&(v=z,D=H,C=U,I=q),z===v&&(F=Math.max(F,d[qm(H)]+1)),q+=1}}var B=0;if(D)for(B=C+1;B<o&&r[B]<v;)B+=1;var k=-1;return B<o&&r[B]===v&&(k=zI(a[B],t.span.end,OI)[0]),{touchingLevel:C,touchingLateral:I,touchingEntry:D,stackCnt:F,levelCoord:v,level:B,lateral:k}},e.prototype.toRects=function(){for(var t=this,n=t.entriesByLevel,r=t.levelCoords,a=n.length,c=[],d=0;d<a;d+=1)for(var o=n[d],v=r[d],C=0,I=o;C<I.length;C++){var D=I[C];c.push(ft(ft({},D),{levelCoord:v}))}return c},e}();function OI(e){return e.span.end}function qm(e){return e.index+":"+e.span.start}function PO(e,t){var n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return n<r?{start:n,end:r}:null}function sw(e,t,n){e.splice(t,0,n)}function zI(e,t,n){var r=0,a=e.length;if(!a||t<n(e[r]))return[0,0];if(t>n(e[a-1]))return[a,0];for(;r<a;){var c=Math.floor(r+(a-r)/2),d=n(e[c]);if(t<d)a=c;else if(t>d)r=c+1;else return[c,1]}return[r,0]}var Np=function(){function e(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}return e.prototype.destroy=function(){},e}();function oH(e,t){return{component:e,el:t.el,useEventCenter:t.useEventCenter!=null?t.useEventCenter:!0,isHitComboAllowed:t.isHitComboAllowed||null}}function nk(e){var t;return t={},t[e.component.uid]=e,t}var eC={},DO=function(){function e(t,n){this.emitter=new n0}return e.prototype.destroy=function(){},e.prototype.setMirrorIsVisible=function(t){},e.prototype.setMirrorNeedsRevert=function(t){},e.prototype.setAutoScrollEnabled=function(t){},e}(),rk={},aH=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=this.props.widgetGroups.map(function(a){return n.renderWidgetGroup(a)});return _t.apply(void 0,Ii(["div",{className:"fc-toolbar-chunk"}],r))},t.prototype.renderWidgetGroup=function(n){for(var r=this.props,a=this.context.theme,c=[],d=!0,o=0,v=n;o<v.length;o++){var C=v[o],I=C.buttonName,D=C.buttonClick,F=C.buttonText,U=C.buttonIcon,j=C.buttonHint;if(I==="title")d=!1,c.push(_t("h2",{className:"fc-toolbar-title",id:r.titleId},r.title));else{var T=I===r.activeButton,H=!r.isTodayEnabled&&I==="today"||!r.isPrevEnabled&&I==="prev"||!r.isNextEnabled&&I==="next",N=["fc-"+I+"-button",a.getClass("button")];T&&N.push(a.getClass("buttonActive")),c.push(_t("button",{type:"button",title:typeof j=="function"?j(r.navUnit):j,disabled:H,"aria-pressed":T,className:N.join(" "),onClick:D},F||(U?_t("span",{className:U}):"")))}}if(c.length>1){var q=d&&a.getClass("buttonGroup")||"";return _t.apply(void 0,Ii(["div",{className:q}],c))}return c[0]},t}(ai),BI=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=n.model,a=n.extraClassName,c=!1,d,o,v=r.sectionWidgets,C=v.center;v.left?(c=!0,d=v.left):d=v.start,v.right?(c=!0,o=v.right):o=v.end;var I=[a||"","fc-toolbar",c?"fc-toolbar-ltr":""];return _t("div",{className:I.join(" ")},this.renderSection("start",d||[]),this.renderSection("center",C||[]),this.renderSection("end",o||[]))},t.prototype.renderSection=function(n,r){var a=this.props;return _t(aH,{key:n,widgetGroups:r,title:a.title,navUnit:a.navUnit,activeButton:a.activeButton,isTodayEnabled:a.isTodayEnabled,isPrevEnabled:a.isPrevEnabled,isNextEnabled:a.isNextEnabled,titleId:a.titleId})},t}(ai),sH=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={availableWidth:null},n.handleEl=function(r){n.el=r,Ll(n.props.elRef,r),n.updateAvailableWidth()},n.handleResize=function(){n.updateAvailableWidth()},n}return t.prototype.render=function(){var n=this,r=n.props,a=n.state,c=r.aspectRatio,d=["fc-view-harness",c||r.liquid||r.height?"fc-view-harness-active":"fc-view-harness-passive"],o="",v="";return c?a.availableWidth!==null?o=a.availableWidth/c:v=1/c*100+"%":o=r.height||"",_t("div",{"aria-labelledby":r.labeledById,ref:this.handleEl,className:d.join(" "),style:{height:o,paddingBottom:v}},r.children)},t.prototype.componentDidMount=function(){this.context.addResizeHandler(this.handleResize)},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleResize)},t.prototype.updateAvailableWidth=function(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})},t}(ai),lH=function(e){Ir(t,e);function t(n){var r=e.call(this,n)||this;return r.handleSegClick=function(a,c){var d=r.component,o=d.context,v=kp(c);if(v&&d.isValidSegDownEl(a.target)){var C=Bo(a.target,".fc-event-forced-url"),I=C?C.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:c,event:new Ci(d.context,v.eventRange.def,v.eventRange.instance),jsEvent:a,view:o.viewApi}),I&&!a.defaultPrevented&&(window.location.href=I)}},r.destroy=$3(n.el,"click",".fc-event",r.handleSegClick),r}return t}(Np),uH=function(e){Ir(t,e);function t(n){var r=e.call(this,n)||this;return r.handleEventElRemove=function(a){a===r.currentSegEl&&r.handleSegLeave(null,r.currentSegEl)},r.handleSegEnter=function(a,c){kp(c)&&(r.currentSegEl=c,r.triggerEvent("eventMouseEnter",a,c))},r.handleSegLeave=function(a,c){r.currentSegEl&&(r.currentSegEl=null,r.triggerEvent("eventMouseLeave",a,c))},r.removeHoverListeners=M8(n.el,".fc-event",r.handleSegEnter,r.handleSegLeave),r}return t.prototype.destroy=function(){this.removeHoverListeners()},t.prototype.triggerEvent=function(n,r,a){var c=this.component,d=c.context,o=kp(a);(!r||c.isValidSegDownEl(r.target))&&d.emitter.trigger(n,{el:a,event:new Ci(d,o.eventRange.def,o.eventRange.instance),jsEvent:r,view:d.viewApi})},t}(Np),cH=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.buildViewContext=vr(jV),n.buildViewPropTransformers=vr(dH),n.buildToolbarProps=vr(hH),n.headerRef=Ya(),n.footerRef=Ya(),n.interactionsStore={},n.state={viewLabelId:Jx()},n.registerInteractiveComponent=function(r,a){var c=oH(r,a),d=[lH,uH],o=d.concat(n.props.pluginHooks.componentInteractions),v=o.map(function(C){return new C(c)});n.interactionsStore[r.uid]=v,eC[r.uid]=c},n.unregisterInteractiveComponent=function(r){var a=n.interactionsStore[r.uid];if(a){for(var c=0,d=a;c<d.length;c++){var o=d[c];o.destroy()}delete n.interactionsStore[r.uid]}delete eC[r.uid]},n.resizeRunner=new IO(function(){n.props.emitter.trigger("_resize",!0),n.props.emitter.trigger("windowResize",{view:n.props.viewApi})}),n.handleWindowResize=function(r){var a=n.props.options;a.handleWindowResize&&r.target===window&&n.resizeRunner.request(a.windowResizeDelay)},n}return t.prototype.render=function(){var n=this.props,r=n.toolbarConfig,a=n.options,c=this.buildToolbarProps(n.viewSpec,n.dateProfile,n.dateProfileGenerator,n.currentDate,Ug(n.options.now,n.dateEnv),n.viewTitle),d=!1,o="",v;n.isHeightAuto||n.forPrint?o="":a.height!=null?d=!0:a.contentHeight!=null?o=a.contentHeight:v=Math.max(a.aspectRatio,.5);var C=this.buildViewContext(n.viewSpec,n.viewApi,n.options,n.dateProfileGenerator,n.dateEnv,n.theme,n.pluginHooks,n.dispatch,n.getCurrentData,n.emitter,n.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),I=r.header&&r.header.hasTitle?this.state.viewLabelId:"";return _t(kh.Provider,{value:C},r.header&&_t(BI,ft({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:r.header,titleId:I},c)),_t(sH,{liquid:d,height:o,aspectRatio:v,labeledById:I},this.renderView(n),this.buildAppendContent()),r.footer&&_t(BI,ft({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:r.footer,titleId:""},c)))},t.prototype.componentDidMount=function(){var n=this.props;this.calendarInteractions=n.pluginHooks.calendarInteractions.map(function(c){return new c(n)}),window.addEventListener("resize",this.handleWindowResize);var r=n.pluginHooks.propSetHandlers;for(var a in r)r[a](n[a],n)},t.prototype.componentDidUpdate=function(n){var r=this.props,a=r.pluginHooks.propSetHandlers;for(var c in a)r[c]!==n[c]&&a[c](r[c],r)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(var n=0,r=this.calendarInteractions;n<r.length;n++){var a=r[n];a.destroy()}this.props.emitter.trigger("_unmount")},t.prototype.buildAppendContent=function(){var n=this.props,r=n.pluginHooks.viewContainerAppends.map(function(a){return a(n)});return _t.apply(void 0,Ii([aa,{}],r))},t.prototype.renderView=function(n){for(var r=n.pluginHooks,a=n.viewSpec,c={dateProfile:n.dateProfile,businessHours:n.businessHours,eventStore:n.renderableEventStore,eventUiBases:n.eventUiBases,dateSelection:n.dateSelection,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,isHeightAuto:n.isHeightAuto,forPrint:n.forPrint},d=this.buildViewPropTransformers(r.viewPropsTransformers),o=0,v=d;o<v.length;o++){var C=v[o];ft(c,C.transform(c,n))}var I=a.component;return _t(I,ft({},c))},t}(r0);function hH(e,t,n,r,a,c){var d=n.build(a,void 0,!1),o=n.buildPrev(t,r,!1),v=n.buildNext(t,r,!1);return{title:c,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:d.isValid&&!uh(t.currentRange,a),isPrevEnabled:o.isValid,isNextEnabled:v.isValid}}function dH(e){return e.map(function(t){return new t})}var pH=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={forPrint:!1},n.handleBeforePrint=function(){n.setState({forPrint:!0})},n.handleAfterPrint=function(){n.setState({forPrint:!1})},n}return t.prototype.render=function(){var n=this.props,r=n.options,a=this.state.forPrint,c=a||r.height==="auto"||r.contentHeight==="auto",d=!c&&r.height!=null?r.height:"",o=["fc",a?"fc-media-print":"fc-media-screen","fc-direction-"+r.direction,n.theme.getClass("root")];return mO()||o.push("fc-liquid-hack"),n.children(o,d,c,a)},t.prototype.componentDidMount=function(){var n=this.props.emitter;n.on("_beforeprint",this.handleBeforePrint),n.on("_afterprint",this.handleAfterPrint)},t.prototype.componentWillUnmount=function(){var n=this.props.emitter;n.off("_beforeprint",this.handleBeforePrint),n.off("_afterprint",this.handleAfterPrint)},t}(ai);function fH(e,t){return!e||t>10?vo({weekday:"short"}):t>1?vo({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):vo({weekday:"long"})}var RO="fc-col-header-cell";function LO(e){return e.text}var mH=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.context,r=n.dateEnv,a=n.options,c=n.theme,d=n.viewApi,o=this.props,v=o.date,C=o.dateProfile,I=gO(v,o.todayRange,null,C),D=[RO].concat(KS(I,c)),F=r.format(v,o.dayHeaderFormat),U=!I.isDisabled&&o.colCnt>1?YS(this.context,v):{},j=ft(ft(ft({date:r.toDate(v),view:d},o.extraHookProps),{text:F}),I);return _t(Fp,{hookProps:j,classNames:a.dayHeaderClassNames,content:a.dayHeaderContent,defaultContent:LO,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},function(T,H,N,q){return _t("th",ft({ref:T,role:"columnheader",className:D.concat(H).join(" "),"data-date":I.isDisabled?void 0:Z3(v),colSpan:o.colSpan},o.extraDataAttrs),_t("div",{className:"fc-scrollgrid-sync-inner"},!I.isDisabled&&_t("a",ft({ref:N,className:["fc-col-header-cell-cushion",o.isSticky?"fc-sticky":""].join(" ")},U),q)))})},t}(ai),gH=vo({weekday:"long"}),yH=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=this.context,a=r.dateEnv,c=r.theme,d=r.viewApi,o=r.options,v=qo(new Date(2592e5),n.dow),C={dow:n.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},I=[RO].concat(KS(C,c),n.extraClassNames||[]),D=a.format(v,n.dayHeaderFormat),F=ft(ft(ft(ft({date:v},C),{view:d}),n.extraHookProps),{text:D});return _t(Fp,{hookProps:F,classNames:o.dayHeaderClassNames,content:o.dayHeaderContent,defaultContent:LO,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},function(U,j,T,H){return _t("th",ft({ref:U,role:"columnheader",className:I.concat(j).join(" "),colSpan:n.colSpan},n.extraDataAttrs),_t("div",{className:"fc-scrollgrid-sync-inner"},_t("a",{"aria-label":a.format(v,gH),className:["fc-col-header-cell-cushion",n.isSticky?"fc-sticky":""].join(" "),ref:T},H)))})},t}(ai),OO=function(e){Ir(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.initialNowDate=Ug(r.options.now,r.dateEnv),a.initialNowQueriedMs=new Date().valueOf(),a.state=a.computeTiming().currentState,a}return t.prototype.render=function(){var n=this,r=n.props,a=n.state;return r.children(a.nowDate,a.todayRange)},t.prototype.componentDidMount=function(){this.setTimeout()},t.prototype.componentDidUpdate=function(n){n.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())},t.prototype.componentWillUnmount=function(){this.clearTimeout()},t.prototype.computeTiming=function(){var n=this,r=n.props,a=n.context,c=yh(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),d=a.dateEnv.startOf(c,r.unit),o=a.dateEnv.add(d,Mr(1,r.unit)),v=o.valueOf()-c.valueOf();return v=Math.min(1e3*60*60*24,v),{currentState:{nowDate:d,todayRange:FI(d)},nextState:{nowDate:o,todayRange:FI(o)},waitMs:v}},t.prototype.setTimeout=function(){var n=this,r=this.computeTiming(),a=r.nextState,c=r.waitMs;this.timeoutId=setTimeout(function(){n.setState(a,function(){n.setTimeout()})},c)},t.prototype.clearTimeout=function(){this.timeoutId&&clearTimeout(this.timeoutId)},t.contextType=kh,t}(OS);function FI(e){var t=oi(e),n=qo(t,1);return{start:t,end:n}}var vH=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.createDayHeaderFormatter=vr(_H),n}return t.prototype.render=function(){var n=this.context,r=this.props,a=r.dates,c=r.dateProfile,d=r.datesRepDistinctDays,o=r.renderIntro,v=this.createDayHeaderFormatter(n.options.dayHeaderFormat,d,a.length);return _t(OO,{unit:"day"},function(C,I){return _t("tr",{role:"row"},o&&o("day"),a.map(function(D){return d?_t(mH,{key:D.toISOString(),date:D,dateProfile:c,todayRange:I,colCnt:a.length,dayHeaderFormat:v}):_t(yH,{key:D.getUTCDay(),dow:D.getUTCDay(),dayHeaderFormat:v})}))})},t}(ai);function _H(e,t,n){return e||fH(t,n)}var xH=function(){function e(t,n){for(var r=t.start,a=t.end,c=[],d=[],o=-1;r<a;)n.isHiddenDay(r)?c.push(o+.5):(o+=1,c.push(o),d.push(r)),r=qo(r,1);this.dates=d,this.indices=c,this.cnt=d.length}return e.prototype.sliceRange=function(t){var n=this.getDateDayIndex(t.start),r=this.getDateDayIndex(qo(t.end,-1)),a=Math.max(0,n),c=Math.min(this.cnt-1,r);return a=Math.ceil(a),c=Math.floor(c),a<=c?{firstIndex:a,lastIndex:c,isStart:n===a,isEnd:r===c}:null},e.prototype.getDateDayIndex=function(t){var n=this.indices,r=Math.floor(zp(this.dates[0],t));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]},e}(),bH=function(){function e(t,n){var r=t.dates,a,c,d;if(n){for(c=r[0].getUTCDay(),a=1;a<r.length&&r[a].getUTCDay()!==c;a+=1);d=Math.ceil(r.length/a)}else d=1,a=r.length;this.rowCnt=d,this.colCnt=a,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}return e.prototype.buildCells=function(){for(var t=[],n=0;n<this.rowCnt;n+=1){for(var r=[],a=0;a<this.colCnt;a+=1)r.push(this.buildCell(n,a));t.push(r)}return t},e.prototype.buildCell=function(t,n){var r=this.daySeries.dates[t*this.colCnt+n];return{key:r.toISOString(),date:r}},e.prototype.buildHeaderDates=function(){for(var t=[],n=0;n<this.colCnt;n+=1)t.push(this.cells[0][n].date);return t},e.prototype.sliceRange=function(t){var n=this.colCnt,r=this.daySeries.sliceRange(t),a=[];if(r)for(var c=r.firstIndex,d=r.lastIndex,o=c;o<=d;){var v=Math.floor(o/n),C=Math.min((v+1)*n,d+1);a.push({row:v,firstCol:o%n,lastCol:(C-1)%n,isStart:r.isStart&&o===c,isEnd:r.isEnd&&C-1===d}),o=C}return a},e}(),wH=function(){function e(){this.sliceBusinessHours=vr(this._sliceBusinessHours),this.sliceDateSelection=vr(this._sliceDateSpan),this.sliceEventStore=vr(this._sliceEventStore),this.sliceEventDrag=vr(this._sliceInteraction),this.sliceEventResize=vr(this._sliceInteraction),this.forceDayIfListItem=!1}return e.prototype.sliceProps=function(t,n,r,a){for(var c=[],d=4;d<arguments.length;d++)c[d-4]=arguments[d];var o=t.eventUiBases,v=this.sliceEventStore.apply(this,Ii([t.eventStore,o,n,r],c));return{dateSelectionSegs:this.sliceDateSelection.apply(this,Ii([t.dateSelection,o,a],c)),businessHourSegs:this.sliceBusinessHours.apply(this,Ii([t.businessHours,n,r,a],c)),fgEventSegs:v.fg,bgEventSegs:v.bg,eventDrag:this.sliceEventDrag.apply(this,Ii([t.eventDrag,o,n,r],c)),eventResize:this.sliceEventResize.apply(this,Ii([t.eventResize,o,n,r],c)),eventSelection:t.eventSelection}},e.prototype.sliceNowDate=function(t,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return this._sliceDateSpan.apply(this,Ii([{range:{start:t,end:yh(t,1)},allDay:!1},{},n],r))},e.prototype._sliceBusinessHours=function(t,n,r,a){for(var c=[],d=4;d<arguments.length;d++)c[d-4]=arguments[d];return t?this._sliceEventStore.apply(this,Ii([Sp(t,lw(n,Boolean(r)),a),{},n,r],c)).bg:[]},e.prototype._sliceEventStore=function(t,n,r,a){for(var c=[],d=4;d<arguments.length;d++)c[d-4]=arguments[d];if(t){var o=SI(t,n,lw(r,Boolean(a)),a);return{bg:this.sliceEventRanges(o.bg,c),fg:this.sliceEventRanges(o.fg,c)}}return{bg:[],fg:[]}},e.prototype._sliceInteraction=function(t,n,r,a){for(var c=[],d=4;d<arguments.length;d++)c[d-4]=arguments[d];if(!t)return null;var o=SI(t.mutatedEvents,n,lw(r,Boolean(a)),a);return{segs:this.sliceEventRanges(o.fg,c),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}},e.prototype._sliceDateSpan=function(t,n,r){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];if(!t)return[];for(var d=Jj(t,n,r),o=this.sliceRange.apply(this,Ii([t.range],a)),v=0,C=o;v<C.length;v++){var I=C[v];I.eventRange=d}return o},e.prototype.sliceEventRanges=function(t,n){for(var r=[],a=0,c=t;a<c.length;a++){var d=c[a];r.push.apply(r,this.sliceEventRange(d,n))}return r},e.prototype.sliceEventRange=function(t,n){var r=t.range;this.forceDayIfListItem&&t.ui.display==="list-item"&&(r={start:r.start,end:qo(r.start,1)});for(var a=this.sliceRange.apply(this,Ii([r],n)),c=0,d=a;c<d.length;c++){var o=d[c];o.eventRange=t,o.isStart=t.isStart&&o.isStart,o.isEnd=t.isEnd&&o.isEnd}return a},e}();function lw(e,t){var n=e.activeRange;return t?n:{start:yh(n.start,e.slotMinTime.milliseconds),end:yh(n.end,e.slotMaxTime.milliseconds-864e5)}}function zO(e,t,n){var r=e.mutatedEvents.instances;for(var a in r)if(!t0(t.validRange,r[a].range))return!1;return BO({eventDrag:e},n)}function EH(e,t,n){return t0(t.validRange,e.range)?BO({dateSelection:e},n):!1}function BO(e,t){var n=t.getCurrentData(),r=ft({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},e);return(t.pluginHooks.isPropsValid||CH)(r,t)}function CH(e,t,n,r){return n===void 0&&(n={}),!(e.eventDrag&&!SH(e,t,n,r)||e.dateSelection&&!kH(e,t,n,r))}function SH(e,t,n,r){var a=t.getCurrentData(),c=e.eventDrag,d=c.mutatedEvents,o=d.defs,v=d.instances,C=xx(o,c.isEvent?e.eventUiBases:{"":a.selectionConfig});r&&(C=Sh(C,r));var I=v$(e.eventStore,c.affectedEvents.instances),D=I.defs,F=I.instances,U=xx(D,e.eventUiBases);for(var j in v){var T=v[j],H=T.range,N=C[T.defId],q=o[T.defId];if(!FO(N.constraints,H,I,e.businessHours,t))return!1;var z=t.options.eventOverlap,B=typeof z=="function"?z:null;for(var k in F){var w=F[k];if(qS(H,w.range)){var R=U[w.defId].overlap;if(R===!1&&c.isEvent||N.overlap===!1||B&&!B(new Ci(t,D[w.defId],w),new Ci(t,q,T)))return!1}}for(var J=a.eventStore,ie=0,ue=N.allows;ie<ue.length;ie++){var se=ue[ie],_e=ft(ft({},n),{range:T.range,allDay:q.allDay}),Ue=J.defs[q.defId],je=J.instances[j],Ne=void 0;if(Ue?Ne=new Ci(t,Ue,je):Ne=new Ci(t,q),!se(ZS(_e,t),Ne))return!1}}return!0}function kH(e,t,n,r){var a=e.eventStore,c=a.defs,d=a.instances,o=e.dateSelection,v=o.range,C=t.getCurrentData().selectionConfig;if(r&&(C=r(C)),!FO(C.constraints,v,a,e.businessHours,t))return!1;var I=t.options.selectOverlap,D=typeof I=="function"?I:null;for(var F in d){var U=d[F];if(qS(v,U.range)&&(C.overlap===!1||D&&!D(new Ci(t,c[U.defId],U),null)))return!1}for(var j=0,T=C.allows;j<T.length;j++){var H=T[j],N=ft(ft({},n),o);if(!H(ZS(N,t),null))return!1}return!0}function FO(e,t,n,r,a){for(var c=0,d=e;c<d.length;c++){var o=d[c];if(!AH(TH(o,t,n,r,a),t))return!1}return!0}function TH(e,t,n,r,a){return e==="businessHours"?uw(Sp(r,t,a)):typeof e=="string"?uw(e0(n,function(c){return c.groupId===e})):typeof e=="object"&&e?uw(Sp(e,t,a)):[]}function uw(e){var t=e.instances,n=[];for(var r in t)n.push(t[r].range);return n}function AH(e,t){for(var n=0,r=e;n<r.length;n++){var a=r[n];if(t0(a,t))return!0}return!1}var Jv=/^(visible|hidden)$/,MH=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleEl=function(r){n.el=r,Ll(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this.props,r=n.liquid,a=n.liquidIsAbsolute,c=r&&a,d=["fc-scroller"];return r&&(a?d.push("fc-scroller-liquid-absolute"):d.push("fc-scroller-liquid")),_t("div",{ref:this.handleEl,className:d.join(" "),style:{overflowX:n.overflowX,overflowY:n.overflowY,left:c&&-(n.overcomeLeft||0)||"",right:c&&-(n.overcomeRight||0)||"",bottom:c&&-(n.overcomeBottom||0)||"",marginLeft:!c&&-(n.overcomeLeft||0)||"",marginRight:!c&&-(n.overcomeRight||0)||"",marginBottom:!c&&-(n.overcomeBottom||0)||"",maxHeight:n.maxHeight||""}},n.children)},t.prototype.needsXScrolling=function(){if(Jv.test(this.props.overflowX))return!1;for(var n=this.el,r=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),a=n.children,c=0;c<a.length;c+=1){var d=a[c];if(d.getBoundingClientRect().width>r)return!0}return!1},t.prototype.needsYScrolling=function(){if(Jv.test(this.props.overflowY))return!1;for(var n=this.el,r=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),a=n.children,c=0;c<a.length;c+=1){var d=a[c];if(d.getBoundingClientRect().height>r)return!0}return!1},t.prototype.getXScrollbarWidth=function(){return Jv.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight},t.prototype.getYScrollbarWidth=function(){return Jv.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth},t}(ai),oh=function(){function e(t){var n=this;this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=function(r,a){var c=n,d=c.depths,o=c.currentMap,v=!1,C=!1;r!==null?(v=a in o,o[a]=r,d[a]=(d[a]||0)+1,C=!0):(d[a]-=1,d[a]||(delete o[a],delete n.callbackMap[a],v=!0)),n.masterCallback&&(v&&n.masterCallback(null,String(a)),C&&n.masterCallback(r,String(a)))}}return e.prototype.createRef=function(t){var n=this,r=this.callbackMap[t];return r||(r=this.callbackMap[t]=function(a){n.handleValue(a,String(t))}),r},e.prototype.collect=function(t,n,r){return ej(this.currentMap,t,n,r)},e.prototype.getAll=function(){return jS(this.currentMap)},e}();function IH(e){for(var t=S8(e,".fc-scrollgrid-shrink"),n=0,r=0,a=t;r<a.length;r++){var c=a[r];n=Math.max(n,U8(c))}return Math.ceil(n)}function NO(e,t){return e.liquid&&t.liquid}function PH(e,t){return t.maxHeight!=null||NO(e,t)}function DH(e,t,n,r){var a=n.expandRows,c=typeof t.content=="function"?t.content(n):_t("table",{role:"presentation",className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:a?n.clientHeight:""}},n.tableColGroupNode,_t(r?"thead":"tbody",{role:"presentation"},typeof t.rowContent=="function"?t.rowContent(n):t.rowContent));return c}function RH(e,t){return bg(e,t,Rl)}function LH(e,t){for(var n=[],r=0,a=e;r<a.length;r++)for(var c=a[r],d=c.span||1,o=0;o<d;o+=1)n.push(_t("col",{style:{width:c.width==="shrink"?OH(t):c.width||"",minWidth:c.minWidth||""}}));return _t.apply(void 0,Ii(["colgroup",{}],n))}function OH(e){return e==null?4:e}function zH(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r.width==="shrink")return!0}return!1}function BH(e,t){var n=["fc-scrollgrid",t.theme.getClass("table")];return e&&n.push("fc-scrollgrid-liquid"),n}function FH(e,t){var n=["fc-scrollgrid-section","fc-scrollgrid-section-"+e.type,e.className];return t&&e.liquid&&e.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),e.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function NH(e){return _t("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function NI(e){var t=e.stickyHeaderDates;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}function UH(e){var t=e.stickyFooterScrollbar;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}var UO=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.processCols=vr(function(r){return r},RH),n.renderMicroColGroup=vr(LH),n.scrollerRefs=new oh,n.scrollerElRefs=new oh(n._handleScrollerEl.bind(n)),n.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},n.handleSizing=function(){n.safeSetState(ft({shrinkWidth:n.computeShrinkWidth()},n.computeScrollerDims()))},n}return t.prototype.render=function(){var n=this,r=n.props,a=n.state,c=n.context,d=r.sections||[],o=this.processCols(r.cols),v=this.renderMicroColGroup(o,a.shrinkWidth),C=BH(r.liquid,c);r.collapsibleWidth&&C.push("fc-scrollgrid-collapsible");for(var I=d.length,D=0,F,U=[],j=[],T=[];D<I&&(F=d[D]).type==="header";)U.push(this.renderSection(F,v,!0)),D+=1;for(;D<I&&(F=d[D]).type==="body";)j.push(this.renderSection(F,v,!1)),D+=1;for(;D<I&&(F=d[D]).type==="footer";)T.push(this.renderSection(F,v,!0)),D+=1;var H=!mO(),N={role:"rowgroup"};return _t("table",{role:"grid",className:C.join(" "),style:{height:r.height}},Boolean(!H&&U.length)&&_t.apply(void 0,Ii(["thead",N],U)),Boolean(!H&&j.length)&&_t.apply(void 0,Ii(["tbody",N],j)),Boolean(!H&&T.length)&&_t.apply(void 0,Ii(["tfoot",N],T)),H&&_t.apply(void 0,Ii(Ii(Ii(["tbody",N],U),j),T)))},t.prototype.renderSection=function(n,r,a){return"outerContent"in n?_t(aa,{key:n.key},n.outerContent):_t("tr",{key:n.key,role:"presentation",className:FH(n,this.props.liquid).join(" ")},this.renderChunkTd(n,r,n.chunk,a))},t.prototype.renderChunkTd=function(n,r,a,c){if("outerContent"in a)return a.outerContent;var d=this.props,o=this.state,v=o.forceYScrollbars,C=o.scrollerClientWidths,I=o.scrollerClientHeights,D=PH(d,n),F=NO(d,n),U=d.liquid?v?"scroll":D?"auto":"hidden":"visible",j=n.key,T=DH(n,a,{tableColGroupNode:r,tableMinWidth:"",clientWidth:!d.collapsibleWidth&&C[j]!==void 0?C[j]:null,clientHeight:I[j]!==void 0?I[j]:null,expandRows:n.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:function(){}},c);return _t(c?"th":"td",{ref:a.elRef,role:"presentation"},_t("div",{className:"fc-scroller-harness"+(F?" fc-scroller-harness-liquid":"")},_t(MH,{ref:this.scrollerRefs.createRef(j),elRef:this.scrollerElRefs.createRef(j),overflowY:U,overflowX:d.liquid?"hidden":"visible",maxHeight:n.maxHeight,liquid:F,liquidIsAbsolute:!0},T)))},t.prototype._handleScrollerEl=function(n,r){var a=jH(this.props.sections,r);a&&Ll(a.chunk.scrollerElRef,n)},t.prototype.componentDidMount=function(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)},t.prototype.componentDidUpdate=function(){this.handleSizing()},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleSizing)},t.prototype.computeShrinkWidth=function(){return zH(this.props.cols)?IH(this.scrollerElRefs.getAll()):0},t.prototype.computeScrollerDims=function(){var n=IV(),r=this,a=r.scrollerRefs,c=r.scrollerElRefs,d=!1,o={},v={};for(var C in a.currentMap){var I=a.currentMap[C];if(I&&I.needsYScrolling()){d=!0;break}}for(var D=0,F=this.props.sections;D<F.length;D++){var U=F[D],C=U.key,j=c.currentMap[C];if(j){var T=j.parentNode;o[C]=Math.floor(T.getBoundingClientRect().width-(d?n.y:0)),v[C]=Math.floor(T.getBoundingClientRect().height)}}return{forceYScrollbars:d,scrollerClientWidths:o,scrollerClientHeights:v}},t}(ai);UO.addStateEquality({scrollerClientWidths:Rl,scrollerClientHeights:Rl});function jH(e,t){for(var n=0,r=e;n<r.length;n++){var a=r[n];if(a.key===t)return a}return null}var ik=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.elRef=Ya(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options,d=r.seg,o=d.eventRange,v=o.ui,C={event:new Ci(a,o.def,o.instance),view:a.viewApi,timeText:r.timeText,textColor:v.textColor,backgroundColor:v.backgroundColor,borderColor:v.borderColor,isDraggable:!r.disableDragging&&jj(d,a),isStartResizable:!r.disableResizing&&Vj(d,a),isEndResizable:!r.disableResizing&&$j(d),isMirror:Boolean(r.isDragging||r.isResizing||r.isDateSelecting),isStart:Boolean(d.isStart),isEnd:Boolean(d.isEnd),isPast:Boolean(r.isPast),isFuture:Boolean(r.isFuture),isToday:Boolean(r.isToday),isSelected:Boolean(r.isSelected),isDragging:Boolean(r.isDragging),isResizing:Boolean(r.isResizing)},I=Hj(C).concat(v.classNames);return _t(Fp,{hookProps:C,classNames:c.eventClassNames,content:c.eventContent,defaultContent:r.defaultContent,didMount:c.eventDidMount,willUnmount:c.eventWillUnmount,elRef:this.elRef},function(D,F,U,j){return r.children(D,I.concat(F),U,j,C)})},t.prototype.componentDidMount=function(){kI(this.elRef.current,this.props.seg)},t.prototype.componentDidUpdate=function(n){var r=this.props.seg;r!==n.seg&&kI(this.elRef.current,r)},t}(ai),VH=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=r.seg,d=a.options.eventTimeFormat||r.defaultTimeFormat,o=tO(c,d,a,r.defaultDisplayEventTime,r.defaultDisplayEventEnd);return _t(ik,{seg:c,timeText:o,disableDragging:r.disableDragging,disableResizing:r.disableResizing,defaultContent:r.defaultContent||$H,isDragging:r.isDragging,isResizing:r.isResizing,isDateSelecting:r.isDateSelecting,isSelected:r.isSelected,isPast:r.isPast,isFuture:r.isFuture,isToday:r.isToday},function(v,C,I,D,F){return _t("a",ft({className:r.extraClassNames.concat(C).join(" "),style:{borderColor:F.borderColor,backgroundColor:F.backgroundColor},ref:v},nO(c,a)),_t("div",{className:"fc-event-main",ref:I,style:{color:F.textColor}},D),F.isStartResizable&&_t("div",{className:"fc-event-resizer fc-event-resizer-start"}),F.isEndResizable&&_t("div",{className:"fc-event-resizer fc-event-resizer-end"}))})},t}(ai);function $H(e){return _t("div",{className:"fc-event-main-frame"},e.timeText&&_t("div",{className:"fc-event-time"},e.timeText),_t("div",{className:"fc-event-title-container"},_t("div",{className:"fc-event-title fc-sticky"},e.event.title||_t(aa,null,"\xA0"))))}var HH=vo({day:"numeric"}),jO=function(e){Ir(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options,d=VO({date:r.date,dateProfile:r.dateProfile,todayRange:r.todayRange,showDayNumber:r.showDayNumber,extraProps:r.extraHookProps,viewApi:a.viewApi,dateEnv:a.dateEnv});return _t(_O,{hookProps:d,content:c.dayCellContent,defaultContent:r.defaultContent},r.children)},t}(ai);function VO(e){var t=e.date,n=e.dateEnv,r=gO(t,e.todayRange,null,e.dateProfile);return ft(ft(ft({date:n.toDate(t),view:e.viewApi},r),{dayNumberText:e.showDayNumber?n.format(t,HH):""}),e.extraProps)}var $O=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.refineHookProps=C_(VO),n.normalizeClassNames=xO(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options,d=this.refineHookProps({date:r.date,dateProfile:r.dateProfile,todayRange:r.todayRange,showDayNumber:r.showDayNumber,extraProps:r.extraHookProps,viewApi:a.viewApi,dateEnv:a.dateEnv}),o=KS(d,a.theme).concat(d.isDisabled?[]:this.normalizeClassNames(c.dayCellClassNames,d)),v=d.isDisabled?{}:{"data-date":Z3(r.date)};return _t(ek,{hookProps:d,didMount:c.dayCellDidMount,willUnmount:c.dayCellWillUnmount,elRef:r.elRef},function(C){return r.children(C,o,v,d.isDisabled)})},t}(ai);function WH(e){return _t("div",{className:"fc-"+e})}var GH=function(e){return _t(ik,{defaultContent:qH,seg:e.seg,timeText:"",disableDragging:!0,disableResizing:!0,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday},function(t,n,r,a,c){return _t("div",{ref:t,className:["fc-bg-event"].concat(n).join(" "),style:{backgroundColor:c.backgroundColor}},a)})};function qH(e){var t=e.event.title;return t&&_t("div",{className:"fc-event-title"},e.event.title)}var ZH=function(e){return _t(kh.Consumer,null,function(t){var n=t.dateEnv,r=t.options,a=e.date,c=r.weekNumberFormat||e.defaultFormat,d=n.computeWeekNumber(a),o=n.format(a,c),v={num:d,text:o,date:a};return _t(Fp,{hookProps:v,classNames:r.weekNumberClassNames,content:r.weekNumberContent,defaultContent:XH,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},e.children)})};function XH(e){return e.text}var cw=10,KH=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={titleId:Jx()},n.handleRootEl=function(r){n.rootEl=r,n.props.elRef&&Ll(n.props.elRef,r)},n.handleDocumentMouseDown=function(r){var a=j3(r);n.rootEl.contains(a)||n.handleCloseClick()},n.handleDocumentKeyDown=function(r){r.key==="Escape"&&n.handleCloseClick()},n.handleCloseClick=function(){var r=n.props.onClose;r&&r()},n}return t.prototype.render=function(){var n=this.context,r=n.theme,a=n.options,c=this,d=c.props,o=c.state,v=["fc-popover",r.getClass("popover")].concat(d.extraClassNames||[]);return E8(_t("div",ft({id:d.id,className:v.join(" "),"aria-labelledby":o.titleId},d.extraAttrs,{ref:this.handleRootEl}),_t("div",{className:"fc-popover-header "+r.getClass("popoverHeader")},_t("span",{className:"fc-popover-title",id:o.titleId},d.title),_t("span",{className:"fc-popover-close "+r.getIconClass("close"),title:a.closeHint,onClick:this.handleCloseClick})),_t("div",{className:"fc-popover-body "+r.getClass("popoverContent")},d.children)),d.parentEl)},t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)},t.prototype.updateSize=function(){var n=this.context.isRtl,r=this.props,a=r.alignmentEl,c=r.alignGridTop,d=this.rootEl,o=LV(a);if(o){var v=d.getBoundingClientRect(),C=c?Bo(a,".fc-scrollgrid").getBoundingClientRect().top:o.top,I=n?o.right-v.width:o.left;C=Math.max(C,cw),I=Math.min(I,document.documentElement.clientWidth-cw-v.width),I=Math.max(I,cw);var D=d.offsetParent.getBoundingClientRect();$m(d,{top:C-D.top,left:I-D.left})}},t}(ai),YH=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleRootEl=function(r){n.rootEl=r,r?n.context.registerInteractiveComponent(n,{el:r,useEventCenter:!1}):n.context.unregisterInteractiveComponent(n)},n}return t.prototype.render=function(){var n=this.context,r=n.options,a=n.dateEnv,c=this.props,d=c.startDate,o=c.todayRange,v=c.dateProfile,C=a.format(d,r.dayPopoverFormat);return _t($O,{date:d,dateProfile:v,todayRange:o,elRef:this.handleRootEl},function(I,D,F){return _t(KH,{elRef:I,id:c.id,title:C,extraClassNames:["fc-more-popover"].concat(D),extraAttrs:F,parentEl:c.parentEl,alignmentEl:c.alignmentEl,alignGridTop:c.alignGridTop,onClose:c.onClose},_t(jO,{date:d,dateProfile:v,todayRange:o},function(U,j){return j&&_t("div",{className:"fc-more-popover-misc",ref:U},j)}),c.children)})},t.prototype.queryHit=function(n,r,a,c){var d=this,o=d.rootEl,v=d.props;return n>=0&&n<a&&r>=0&&r<c?{dateProfile:v.dateProfile,dateSpan:ft({allDay:!0,range:{start:v.startDate,end:v.endDate}},v.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:a,bottom:c},layer:1}:null},t}(Bp),JH=function(e){Ir(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.linkElRef=Ya(),n.state={isPopoverOpen:!1,popoverId:Jx()},n.handleClick=function(r){var a=n,c=a.props,d=a.context,o=d.options.moreLinkClick,v=UI(c).start;function C(I){var D=I.eventRange,F=D.def,U=D.instance,j=D.range;return{event:new Ci(d,F,U),start:d.dateEnv.toDate(j.start),end:d.dateEnv.toDate(j.end),isStart:I.isStart,isEnd:I.isEnd}}typeof o=="function"&&(o=o({date:v,allDay:Boolean(c.allDayDate),allSegs:c.allSegs.map(C),hiddenSegs:c.hiddenSegs.map(C),jsEvent:r,view:d.viewApi})),!o||o==="popover"?n.setState({isPopoverOpen:!0}):typeof o=="string"&&d.calendarApi.zoomTo(v,o)},n.handlePopoverClose=function(){n.setState({isPopoverOpen:!1})},n}return t.prototype.render=function(){var n=this,r=this,a=r.props,c=r.state;return _t(kh.Consumer,null,function(d){var o=d.viewApi,v=d.options,C=d.calendarApi,I=v.moreLinkText,D=a.moreCnt,F=UI(a),U=typeof I=="function"?I.call(C,D):"+"+D+" "+I,j=Hm(v.moreLinkHint,[D],U),T={num:D,shortText:"+"+D,text:U,view:o};return _t(aa,null,Boolean(a.moreCnt)&&_t(Fp,{elRef:n.linkElRef,hookProps:T,classNames:v.moreLinkClassNames,content:v.moreLinkContent,defaultContent:a.defaultContent||QH,didMount:v.moreLinkDidMount,willUnmount:v.moreLinkWillUnmount},function(H,N,q,z){return a.children(H,["fc-more-link"].concat(N),q,z,n.handleClick,j,c.isPopoverOpen,c.isPopoverOpen?c.popoverId:"")}),c.isPopoverOpen&&_t(YH,{id:c.popoverId,startDate:F.start,endDate:F.end,dateProfile:a.dateProfile,todayRange:a.todayRange,extraDateSpan:a.extraDateSpan,parentEl:n.parentEl,alignmentEl:a.alignmentElRef.current,alignGridTop:a.alignGridTop,onClose:n.handlePopoverClose},a.popoverContent()))})},t.prototype.componentDidMount=function(){this.updateParentEl()},t.prototype.componentDidUpdate=function(){this.updateParentEl()},t.prototype.updateParentEl=function(){this.linkElRef.current&&(this.parentEl=Bo(this.linkElRef.current,".fc-view-harness"))},t}(ai);function QH(e){return e.text}function UI(e){if(e.allDayDate)return{start:e.allDayDate,end:qo(e.allDayDate,1)};var t=e.hiddenSegs;return{start:eW(t),end:nW(t)}}function eW(e){return e.reduce(tW).eventRange.range.start}function tW(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function nW(e){return e.reduce(rW).eventRange.range.end}function rW(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}var iW=function(e){w8(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._calendarApi=new sV,n}return t.prototype.render=function(){return m.exports.createElement(rH,{optionOverrides:this.props,calendarApi:this._calendarApi},function(n){return m.exports.createElement(pH,{options:n.calendarOptions,theme:n.theme,emitter:n.emitter},function(r,a,c,d){return m.exports.createElement("div",{className:r.join(" "),style:{height:a}},m.exports.createElement(cH,WE({isHeightAuto:c,forPrint:d},n)))})})},t.prototype.getApi=function(){return this._calendarApi},t}(m.exports.Component);var tC=function(e,t){return tC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},tC(e,t)};function Ma(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var pi=function(){return pi=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},pi.apply(this,arguments)};function oW(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,c;r<a;r++)(c||!(r in t))&&(c||(c=Array.prototype.slice.call(t,0,r)),c[r]=t[r]);return e.concat(c||Array.prototype.slice.call(t))}/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/var aW=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.headerElRef=Ya(),n}return t.prototype.renderSimpleLayout=function(n,r){var a=this,c=a.props,d=a.context,o=[],v=NI(d.options);return n&&o.push({type:"header",key:"header",isSticky:v,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:n}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:r}}),_t(QE,{viewSpec:d.viewSpec},function(C,I){return _t("div",{ref:C,className:["fc-daygrid"].concat(I).join(" ")},_t(UO,{liquid:!c.isHeightAuto&&!c.forPrint,collapsibleWidth:c.forPrint,cols:[],sections:o}))})},t.prototype.renderHScrollLayout=function(n,r,a,c){var d=this.context.pluginHooks.scrollGridImpl;if(!d)throw new Error("No ScrollGrid implementation");var o=this,v=o.props,C=o.context,I=!v.forPrint&&NI(C.options),D=!v.forPrint&&UH(C.options),F=[];return n&&F.push({type:"header",key:"header",isSticky:I,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:n}]}),F.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:r}]}),D&&F.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:NH}]}),_t(QE,{viewSpec:C.viewSpec},function(U,j){return _t("div",{ref:U,className:["fc-daygrid"].concat(j).join(" ")},_t(d,{liquid:!v.isHeightAuto&&!v.forPrint,collapsibleWidth:v.forPrint,colGroups:[{cols:[{span:a,minWidth:c}]}],sections:F}))})},t}(Bp);function Qv(e,t){for(var n=[],r=0;r<t;r+=1)n[r]=[];for(var a=0,c=e;a<c.length;a++){var d=c[a];n[d.row].push(d)}return n}function e_(e,t){for(var n=[],r=0;r<t;r+=1)n[r]=[];for(var a=0,c=e;a<c.length;a++){var d=c[a];n[d.firstCol].push(d)}return n}function jI(e,t){var n=[];if(e){for(var r=0;r<t;r+=1)n[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(var a=0,c=e.segs;a<c.length;a++){var d=c[a];n[d.row].segs.push(d)}}else for(var r=0;r<t;r+=1)n[r]=null;return n}var sW=function(e){Ma(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=YS(this.context,n.date);return _t(jO,{date:n.date,dateProfile:n.dateProfile,todayRange:n.todayRange,showDayNumber:n.showDayNumber,extraHookProps:n.extraHookProps,defaultContent:lW},function(a,c){return(c||n.forceDayTop)&&_t("div",{className:"fc-daygrid-day-top",ref:a},_t("a",pi({id:n.dayNumberId,className:"fc-daygrid-day-number"},r),c||_t(aa,null,"\xA0")))})},t}(ai);function lW(e){return e.dayNumberText}var HO=vo({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function WO(e){var t=e.eventRange.ui.display;return t==="list-item"||t==="auto"&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}var GO=function(e){Ma(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props;return _t(VH,pi({},n,{extraClassNames:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:HO,defaultDisplayEventEnd:n.defaultDisplayEventEnd,disableResizing:!n.seg.eventRange.def.allDay}))},t}(ai),qO=function(e){Ma(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options.eventTimeFormat||HO,d=tO(r.seg,c,a,!0,r.defaultDisplayEventEnd);return _t(ik,{seg:r.seg,timeText:d,defaultContent:uW,isDragging:r.isDragging,isResizing:!1,isDateSelecting:!1,isSelected:r.isSelected,isPast:r.isPast,isFuture:r.isFuture,isToday:r.isToday},function(o,v,C,I){return _t("a",pi({className:["fc-daygrid-event","fc-daygrid-dot-event"].concat(v).join(" "),ref:o},nO(r.seg,a)),I)})},t}(ai);function uW(e){return _t(aa,null,_t("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&_t("div",{className:"fc-event-time"},e.timeText),_t("div",{className:"fc-event-title"},e.event.title||_t(aa,null,"\xA0")))}var cW=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.compileSegs=vr(hW),n}return t.prototype.render=function(){var n=this.props,r=this.compileSegs(n.singlePlacements),a=r.allSegs,c=r.invisibleSegs;return _t(JH,{dateProfile:n.dateProfile,todayRange:n.todayRange,allDayDate:n.allDayDate,moreCnt:n.moreCnt,allSegs:a,hiddenSegs:c,alignmentElRef:n.alignmentElRef,alignGridTop:n.alignGridTop,extraDateSpan:n.extraDateSpan,popoverContent:function(){var d=(n.eventDrag?n.eventDrag.affectedInstances:null)||(n.eventResize?n.eventResize.affectedInstances:null)||{};return _t(aa,null,a.map(function(o){var v=o.eventRange.instance.instanceId;return _t("div",{className:"fc-daygrid-event-harness",key:v,style:{visibility:d[v]?"hidden":""}},WO(o)?_t(qO,pi({seg:o,isDragging:!1,isSelected:v===n.eventSelection,defaultDisplayEventEnd:!1},Gm(o,n.todayRange))):_t(GO,pi({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:v===n.eventSelection,defaultDisplayEventEnd:!1},Gm(o,n.todayRange))))}))}},function(d,o,v,C,I,D,F,U){return _t("a",pi({ref:d,className:["fc-daygrid-more-link"].concat(o).join(" "),title:D,"aria-expanded":F,"aria-controls":U},H3(I)),C)})},t}(ai);function hW(e){for(var t=[],n=[],r=0,a=e;r<a.length;r++){var c=a[r];t.push(c.seg),c.isVisible||n.push(c.seg)}return{allSegs:t,invisibleSegs:n}}var dW=vo({week:"narrow"}),pW=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.rootElRef=Ya(),n.state={dayNumberId:Jx()},n.handleRootEl=function(r){Ll(n.rootElRef,r),Ll(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this,r=n.context,a=n.props,c=n.state,d=n.rootElRef,o=a.date,v=a.dateProfile,C=YS(r,o,"week");return _t($O,{date:o,dateProfile:v,todayRange:a.todayRange,showDayNumber:a.showDayNumber,extraHookProps:a.extraHookProps,elRef:this.handleRootEl},function(I,D,F,U){return _t("td",pi({ref:I,role:"gridcell",className:["fc-daygrid-day"].concat(D,a.extraClassNames||[]).join(" ")},F,a.extraDataAttrs,a.showDayNumber?{"aria-labelledby":c.dayNumberId}:{}),_t("div",{className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",ref:a.innerElRef},a.showWeekNumber&&_t(ZH,{date:o,defaultFormat:dW},function(j,T,H,N){return _t("a",pi({ref:j,className:["fc-daygrid-week-number"].concat(T).join(" ")},C),N)}),!U&&_t(sW,{date:o,dateProfile:v,showDayNumber:a.showDayNumber,dayNumberId:c.dayNumberId,forceDayTop:a.forceDayTop,todayRange:a.todayRange,extraHookProps:a.extraHookProps}),_t("div",{className:"fc-daygrid-day-events",ref:a.fgContentElRef},a.fgContent,_t("div",{className:"fc-daygrid-day-bottom",style:{marginTop:a.moreMarginTop}},_t(cW,{allDayDate:o,singlePlacements:a.singlePlacements,moreCnt:a.moreCnt,alignmentElRef:d,alignGridTop:!a.showDayNumber,extraDateSpan:a.extraDateSpan,dateProfile:a.dateProfile,eventSelection:a.eventSelection,eventDrag:a.eventDrag,eventResize:a.eventResize,todayRange:a.todayRange}))),_t("div",{className:"fc-daygrid-day-bg"},a.bgContent)))})},t}(Bp);function fW(e,t,n,r,a,c,d){var o=new yW;o.allowReslicing=!0,o.strictOrder=r,t===!0||n===!0?(o.maxCoord=c,o.hiddenConsumes=!0):typeof t=="number"?o.maxStackCnt=t:typeof n=="number"&&(o.maxStackCnt=n,o.hiddenConsumes=!0);for(var v=[],C=[],I=0;I<e.length;I+=1){var D=e[I],F=D.eventRange.instance.instanceId,U=a[F];U!=null?v.push({index:I,thickness:U,span:{start:D.firstCol,end:D.lastCol+1}}):C.push(D)}for(var j=o.addSegs(v),T=o.toRects(),H=mW(T,e,d),N=H.singleColPlacements,q=H.multiColPlacements,z=H.leftoverMargins,B=[],k=[],w=0,R=C;w<R.length;w++){var D=R[w];q[D.firstCol].push({seg:D,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var J=D.firstCol;J<=D.lastCol;J+=1)N[J].push({seg:hp(D,J,J+1,d),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(var J=0;J<d.length;J+=1)B.push(0);for(var ie=0,ue=j;ie<ue.length;ie++){var se=ue[ie],D=e[se.index],_e=se.span;q[_e.start].push({seg:hp(D,_e.start,_e.end,d),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var J=_e.start;J<_e.end;J+=1)B[J]+=1,N[J].push({seg:hp(D,J,J+1,d),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(var J=0;J<d.length;J+=1)k.push(z[J]);return{singleColPlacements:N,multiColPlacements:q,moreCnts:B,moreMarginTops:k}}function mW(e,t,n){for(var r=gW(e,n.length),a=[],c=[],d=[],o=0;o<n.length;o+=1){for(var v=r[o],C=[],I=0,D=0,F=0,U=v;F<U.length;F++){var j=U[F],T=t[j.index];C.push({seg:hp(T,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:j.levelCoord,marginTop:j.levelCoord-I}),I=j.levelCoord+j.thickness}var H=[];I=0,D=0;for(var N=0,q=v;N<q.length;N++){var j=q[N],T=t[j.index],z=j.span.end-j.span.start>1,B=j.span.start===o;D+=j.levelCoord-I,I=j.levelCoord+j.thickness,z?(D+=j.thickness,B&&H.push({seg:hp(T,j.span.start,j.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:j.levelCoord,marginTop:0})):B&&(H.push({seg:hp(T,j.span.start,j.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:j.levelCoord,marginTop:D}),D=0)}a.push(C),c.push(H),d.push(D)}return{singleColPlacements:a,multiColPlacements:c,leftoverMargins:d}}function gW(e,t){for(var n=[],r=0;r<t;r+=1)n.push([]);for(var a=0,c=e;a<c.length;a++)for(var d=c[a],r=d.span.start;r<d.span.end;r+=1)n[r].push(d);return n}function hp(e,t,n,r){if(e.firstCol===t&&e.lastCol===n-1)return e;var a=e.eventRange,c=a.range,d=wg(c,{start:r[t].date,end:qo(r[n-1].date,1)});return pi(pi({},e),{firstCol:t,lastCol:n-1,eventRange:{def:a.def,ui:pi(pi({},a.ui),{durationEditable:!1}),instance:a.instance,range:d},isStart:e.isStart&&d.start.valueOf()===c.start.valueOf(),isEnd:e.isEnd&&d.end.valueOf()===c.end.valueOf()})}var yW=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.hiddenConsumes=!1,n.forceHidden={},n}return t.prototype.addSegs=function(n){for(var r=this,a=e.prototype.addSegs.call(this,n),c=this.entriesByLevel,d=function(v){return!r.forceHidden[qm(v)]},o=0;o<c.length;o+=1)c[o]=c[o].filter(d);return a},t.prototype.handleInvalidInsertion=function(n,r,a){var c=this,d=c.entriesByLevel,o=c.forceHidden,v=n.touchingEntry,C=n.touchingLevel,I=n.touchingLateral;if(this.hiddenConsumes&&v){var D=qm(v);if(!o[D])if(this.allowReslicing){var F=pi(pi({},v),{span:PO(v.span,r.span)}),U=qm(F);o[U]=!0,d[C][I]=F,this.splitEntry(v,r,a)}else o[D]=!0,a.push(v)}return e.prototype.handleInvalidInsertion.call(this,n,r,a)},t}(iH),ZO=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.cellElRefs=new oh,n.frameElRefs=new oh,n.fgElRefs=new oh,n.segHarnessRefs=new oh,n.rootElRef=Ya(),n.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},n}return t.prototype.render=function(){var n=this,r=this,a=r.props,c=r.state,d=r.context,o=d.options,v=a.cells.length,C=e_(a.businessHourSegs,v),I=e_(a.bgEventSegs,v),D=e_(this.getHighlightSegs(),v),F=e_(this.getMirrorSegs(),v),U=fW(Nj(a.fgEventSegs,o.eventOrder),a.dayMaxEvents,a.dayMaxEventRows,o.eventOrderStrict,c.eventInstanceHeights,c.maxContentHeight,a.cells),j=U.singleColPlacements,T=U.multiColPlacements,H=U.moreCnts,N=U.moreMarginTops,q=a.eventDrag&&a.eventDrag.affectedInstances||a.eventResize&&a.eventResize.affectedInstances||{};return _t("tr",{ref:this.rootElRef,role:"row"},a.renderIntro&&a.renderIntro(),a.cells.map(function(z,B){var k=n.renderFgSegs(B,a.forPrint?j[B]:T[B],a.todayRange,q),w=n.renderFgSegs(B,vW(F[B],T),a.todayRange,{},Boolean(a.eventDrag),Boolean(a.eventResize),!1);return _t(pW,{key:z.key,elRef:n.cellElRefs.createRef(z.key),innerElRef:n.frameElRefs.createRef(z.key),dateProfile:a.dateProfile,date:z.date,showDayNumber:a.showDayNumbers,showWeekNumber:a.showWeekNumbers&&B===0,forceDayTop:a.showWeekNumbers,todayRange:a.todayRange,eventSelection:a.eventSelection,eventDrag:a.eventDrag,eventResize:a.eventResize,extraHookProps:z.extraHookProps,extraDataAttrs:z.extraDataAttrs,extraClassNames:z.extraClassNames,extraDateSpan:z.extraDateSpan,moreCnt:H[B],moreMarginTop:N[B],singlePlacements:j[B],fgContentElRef:n.fgElRefs.createRef(z.key),fgContent:_t(aa,null,_t(aa,null,k),_t(aa,null,w)),bgContent:_t(aa,null,n.renderFillSegs(D[B],"highlight"),n.renderFillSegs(C[B],"non-business"),n.renderFillSegs(I[B],"bg-event"))})}))},t.prototype.componentDidMount=function(){this.updateSizing(!0)},t.prototype.componentDidUpdate=function(n,r){var a=this.props;this.updateSizing(!Rl(n,a))},t.prototype.getHighlightSegs=function(){var n=this.props;return n.eventDrag&&n.eventDrag.segs.length?n.eventDrag.segs:n.eventResize&&n.eventResize.segs.length?n.eventResize.segs:n.dateSelectionSegs},t.prototype.getMirrorSegs=function(){var n=this.props;return n.eventResize&&n.eventResize.segs.length?n.eventResize.segs:[]},t.prototype.renderFgSegs=function(n,r,a,c,d,o,v){var C=this.context,I=this.props.eventSelection,D=this.state.framePositions,F=this.props.cells.length===1,U=d||o||v,j=[];if(D)for(var T=0,H=r;T<H.length;T++){var N=H[T],q=N.seg,z=q.eventRange.instance.instanceId,B=z+":"+n,k=N.isVisible&&!c[z],w=N.isAbsolute,R="",J="";w&&(C.isRtl?(J=0,R=D.lefts[q.lastCol]-D.lefts[q.firstCol]):(R=0,J=D.rights[q.firstCol]-D.rights[q.lastCol])),j.push(_t("div",{className:"fc-daygrid-event-harness"+(w?" fc-daygrid-event-harness-abs":""),key:B,ref:U?null:this.segHarnessRefs.createRef(B),style:{visibility:k?"":"hidden",marginTop:w?"":N.marginTop,top:w?N.absoluteTop:"",left:R,right:J}},WO(q)?_t(qO,pi({seg:q,isDragging:d,isSelected:z===I,defaultDisplayEventEnd:F},Gm(q,a))):_t(GO,pi({seg:q,isDragging:d,isResizing:o,isDateSelecting:v,isSelected:z===I,defaultDisplayEventEnd:F},Gm(q,a)))))}return j},t.prototype.renderFillSegs=function(n,r){var a=this.context.isRtl,c=this.props.todayRange,d=this.state.framePositions,o=[];if(d)for(var v=0,C=n;v<C.length;v++){var I=C[v],D=a?{right:0,left:d.lefts[I.lastCol]-d.lefts[I.firstCol]}:{left:0,right:d.rights[I.firstCol]-d.rights[I.lastCol]};o.push(_t("div",{key:Wj(I.eventRange),className:"fc-daygrid-bg-harness",style:D},r==="bg-event"?_t(GH,pi({seg:I},Gm(I,c))):WH(r)))}return _t.apply(void 0,oW([aa,{}],o))},t.prototype.updateSizing=function(n){var r=this,a=r.props,c=r.frameElRefs;if(!a.forPrint&&a.clientWidth!==null){if(n){var d=a.cells.map(function(D){return c.currentMap[D.key]});if(d.length){var o=this.rootElRef.current;this.setState({framePositions:new YE(o,d,!0,!1)})}}var v=this.state.eventInstanceHeights,C=this.queryEventInstanceHeights(),I=a.dayMaxEvents===!0||a.dayMaxEventRows===!0;this.safeSetState({eventInstanceHeights:pi(pi({},v),C),maxContentHeight:I?this.computeMaxContentHeight():null})}},t.prototype.queryEventInstanceHeights=function(){var n=this.segHarnessRefs.currentMap,r={};for(var a in n){var c=Math.round(n[a].getBoundingClientRect().height),d=a.split(":")[0];r[d]=Math.max(r[d]||0,c)}return r},t.prototype.computeMaxContentHeight=function(){var n=this.props.cells[0].key,r=this.cellElRefs.currentMap[n],a=this.fgElRefs.currentMap[n];return r.getBoundingClientRect().bottom-a.getBoundingClientRect().top},t.prototype.getCellEls=function(){var n=this.cellElRefs.currentMap;return this.props.cells.map(function(r){return n[r.key]})},t}(Bp);ZO.addStateEquality({eventInstanceHeights:Rl});function vW(e,t){if(!e.length)return[];var n=_W(t);return e.map(function(r){return{seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}})}function _W(e){for(var t={},n=0,r=e;n<r.length;n++)for(var a=r[n],c=0,d=a;c<d.length;c++){var o=d[c];t[o.seg.eventRange.instance.instanceId]=o.absoluteTop}return t}var xW=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.splitBusinessHourSegs=vr(Qv),n.splitBgEventSegs=vr(Qv),n.splitFgEventSegs=vr(Qv),n.splitDateSelectionSegs=vr(Qv),n.splitEventDrag=vr(jI),n.splitEventResize=vr(jI),n.rowRefs=new oh,n.handleRootEl=function(r){n.rootEl=r,r?n.context.registerInteractiveComponent(n,{el:r,isHitComboAllowed:n.props.isHitComboAllowed}):n.context.unregisterInteractiveComponent(n)},n}return t.prototype.render=function(){var n=this,r=this.props,a=r.dateProfile,c=r.dayMaxEventRows,d=r.dayMaxEvents,o=r.expandRows,v=r.cells.length,C=this.splitBusinessHourSegs(r.businessHourSegs,v),I=this.splitBgEventSegs(r.bgEventSegs,v),D=this.splitFgEventSegs(r.fgEventSegs,v),F=this.splitDateSelectionSegs(r.dateSelectionSegs,v),U=this.splitEventDrag(r.eventDrag,v),j=this.splitEventResize(r.eventResize,v),T=d===!0||c===!0;T&&!o&&(T=!1,c=null,d=null);var H=["fc-daygrid-body",T?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",o?"":"fc-daygrid-body-natural"];return _t("div",{className:H.join(" "),ref:this.handleRootEl,style:{width:r.clientWidth,minWidth:r.tableMinWidth}},_t(OO,{unit:"day"},function(N,q){return _t(aa,null,_t("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:r.clientWidth,minWidth:r.tableMinWidth,height:o?r.clientHeight:""}},r.colGroupNode,_t("tbody",{role:"presentation"},r.cells.map(function(z,B){return _t(ZO,{ref:n.rowRefs.createRef(B),key:z.length?z[0].date.toISOString():B,showDayNumbers:v>1,showWeekNumbers:r.showWeekNumbers,todayRange:q,dateProfile:a,cells:z,renderIntro:r.renderRowIntro,businessHourSegs:C[B],eventSelection:r.eventSelection,bgEventSegs:I[B].filter(bW),fgEventSegs:D[B],dateSelectionSegs:F[B],eventDrag:U[B],eventResize:j[B],dayMaxEvents:d,dayMaxEventRows:c,clientWidth:r.clientWidth,clientHeight:r.clientHeight,forPrint:r.forPrint})}))))}))},t.prototype.prepareHits=function(){this.rowPositions=new YE(this.rootEl,this.rowRefs.collect().map(function(n){return n.getCellEls()[0]}),!1,!0),this.colPositions=new YE(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)},t.prototype.queryHit=function(n,r){var a=this,c=a.colPositions,d=a.rowPositions,o=c.leftToIndex(n),v=d.topToIndex(r);if(v!=null&&o!=null){var C=this.props.cells[v][o];return{dateProfile:this.props.dateProfile,dateSpan:pi({range:this.getCellRange(v,o),allDay:!0},C.extraDateSpan),dayEl:this.getCellEl(v,o),rect:{left:c.lefts[o],right:c.rights[o],top:d.tops[v],bottom:d.bottoms[v]},layer:0}}return null},t.prototype.getCellEl=function(n,r){return this.rowRefs.currentMap[n].getCellEls()[r]},t.prototype.getCellRange=function(n,r){var a=this.props.cells[n][r].date,c=qo(a,1);return{start:a,end:c}},t}(Bp);function bW(e){return e.eventRange.def.allDay}var wW=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.forceDayIfListItem=!0,n}return t.prototype.sliceRange=function(n,r){return r.sliceRange(n)},t}(wH),EW=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.slicer=new wW,n.tableRef=Ya(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context;return _t(xW,pi({ref:this.tableRef},this.slicer.sliceProps(r,r.dateProfile,r.nextDayThreshold,a,r.dayTableModel),{dateProfile:r.dateProfile,cells:r.dayTableModel.cells,colGroupNode:r.colGroupNode,tableMinWidth:r.tableMinWidth,renderRowIntro:r.renderRowIntro,dayMaxEvents:r.dayMaxEvents,dayMaxEventRows:r.dayMaxEventRows,showWeekNumbers:r.showWeekNumbers,expandRows:r.expandRows,headerAlignElRef:r.headerAlignElRef,clientWidth:r.clientWidth,clientHeight:r.clientHeight,forPrint:r.forPrint}))},t}(Bp),CW=function(e){Ma(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.buildDayTableModel=vr(SW),n.headerRef=Ya(),n.tableRef=Ya(),n}return t.prototype.render=function(){var n=this,r=this.context,a=r.options,c=r.dateProfileGenerator,d=this.props,o=this.buildDayTableModel(d.dateProfile,c),v=a.dayHeaders&&_t(vH,{ref:this.headerRef,dateProfile:d.dateProfile,dates:o.headerDates,datesRepDistinctDays:o.rowCnt===1}),C=function(I){return _t(EW,{ref:n.tableRef,dateProfile:d.dateProfile,dayTableModel:o,businessHours:d.businessHours,dateSelection:d.dateSelection,eventStore:d.eventStore,eventUiBases:d.eventUiBases,eventSelection:d.eventSelection,eventDrag:d.eventDrag,eventResize:d.eventResize,nextDayThreshold:a.nextDayThreshold,colGroupNode:I.tableColGroupNode,tableMinWidth:I.tableMinWidth,dayMaxEvents:a.dayMaxEvents,dayMaxEventRows:a.dayMaxEventRows,showWeekNumbers:a.weekNumbers,expandRows:!d.isHeightAuto,headerAlignElRef:n.headerElRef,clientWidth:I.clientWidth,clientHeight:I.clientHeight,forPrint:d.forPrint})};return a.dayMinWidth?this.renderHScrollLayout(v,C,o.colCnt,a.dayMinWidth):this.renderSimpleLayout(v,C)},t}(aW);function SW(e,t){var n=new xH(e.renderRange,t);return new bH(n,/year|month|week/.test(e.currentRangeUnit))}var kW=function(e){Ma(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.buildRenderRange=function(n,r,a){var c=this.props.dateEnv,d=e.prototype.buildRenderRange.call(this,n,r,a),o=d.start,v=d.end,C;if(/^(year|month)$/.test(r)&&(o=c.startOfWeek(o),C=c.startOfWeek(v),C.valueOf()!==v.valueOf()&&(v=pI(C,1))),this.props.monthMode&&this.props.fixedWeekCount){var I=Math.ceil(V8(o,v));v=pI(v,6-I)}return{start:o,end:v}},t}(wO),TW=Ku({initialView:"dayGridMonth",views:{dayGrid:{component:CW,dateProfileGeneratorClass:kW},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}}),nC=function(e,t){return nC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},nC(e,t)};function Bl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");nC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Hi=function(){return Hi=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},Hi.apply(this,arguments)};/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/rk.touchMouseIgnoreWait=500;var rC=0,bx=0,iC=!1,ok=function(){function e(t){var n=this;this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(r){if(!n.shouldIgnoreMouse()&&AW(r)&&n.tryStart(r)){var a=n.createEventFromMouse(r,!0);n.emitter.trigger("pointerdown",a),n.initScrollWatch(a),n.shouldIgnoreMove||document.addEventListener("mousemove",n.handleMouseMove),document.addEventListener("mouseup",n.handleMouseUp)}},this.handleMouseMove=function(r){var a=n.createEventFromMouse(r);n.recordCoords(a),n.emitter.trigger("pointermove",a)},this.handleMouseUp=function(r){document.removeEventListener("mousemove",n.handleMouseMove),document.removeEventListener("mouseup",n.handleMouseUp),n.emitter.trigger("pointerup",n.createEventFromMouse(r)),n.cleanup()},this.handleTouchStart=function(r){if(n.tryStart(r)){n.isTouchDragging=!0;var a=n.createEventFromTouch(r,!0);n.emitter.trigger("pointerdown",a),n.initScrollWatch(a);var c=r.target;n.shouldIgnoreMove||c.addEventListener("touchmove",n.handleTouchMove),c.addEventListener("touchend",n.handleTouchEnd),c.addEventListener("touchcancel",n.handleTouchEnd),window.addEventListener("scroll",n.handleTouchScroll,!0)}},this.handleTouchMove=function(r){var a=n.createEventFromTouch(r);n.recordCoords(a),n.emitter.trigger("pointermove",a)},this.handleTouchEnd=function(r){if(n.isDragging){var a=r.target;a.removeEventListener("touchmove",n.handleTouchMove),a.removeEventListener("touchend",n.handleTouchEnd),a.removeEventListener("touchcancel",n.handleTouchEnd),window.removeEventListener("scroll",n.handleTouchScroll,!0),n.emitter.trigger("pointerup",n.createEventFromTouch(r)),n.cleanup(),n.isTouchDragging=!1,MW()}},this.handleTouchScroll=function(){n.wasTouchScroll=!0},this.handleScroll=function(r){if(!n.shouldIgnoreMove){var a=window.pageXOffset-n.prevScrollX+n.prevPageX,c=window.pageYOffset-n.prevScrollY+n.prevPageY;n.emitter.trigger("pointermove",{origEvent:r,isTouch:n.isTouchDragging,subjectEl:n.subjectEl,pageX:a,pageY:c,deltaX:a-n.origPageX,deltaY:c-n.origPageY})}},this.containerEl=t,this.emitter=new n0,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),IW()}return e.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),PW()},e.prototype.tryStart=function(t){var n=this.querySubjectEl(t),r=t.target;return n&&(!this.handleSelector||Bo(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1},e.prototype.cleanup=function(){iC=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()},e.prototype.querySubjectEl=function(t){return this.selector?Bo(t.target,this.selector):this.containerEl},e.prototype.shouldIgnoreMouse=function(){return rC||this.isTouchDragging},e.prototype.cancelTouchScroll=function(){this.isDragging&&(iC=!0)},e.prototype.initScrollWatch=function(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))},e.prototype.recordCoords=function(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},e.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},e.prototype.createEventFromMouse=function(t,n){var r=0,a=0;return n?(this.origPageX=t.pageX,this.origPageY=t.pageY):(r=t.pageX-this.origPageX,a=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:r,deltaY:a}},e.prototype.createEventFromTouch=function(t,n){var r=t.touches,a,c,d=0,o=0;return r&&r.length?(a=r[0].pageX,c=r[0].pageY):(a=t.pageX,c=t.pageY),n?(this.origPageX=a,this.origPageY=c):(d=a-this.origPageX,o=c-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:c,deltaX:d,deltaY:o}},e}();function AW(e){return e.button===0&&!e.ctrlKey}function MW(){rC+=1,setTimeout(function(){rC-=1},rk.touchMouseIgnoreWait)}function IW(){bx+=1,bx===1&&window.addEventListener("touchmove",XO,{passive:!1})}function PW(){bx-=1,bx||window.removeEventListener("touchmove",XO,{passive:!1})}function XO(e){iC&&e.preventDefault()}var DW=function(){function e(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return e.prototype.start=function(t,n,r){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.pageXOffset,this.origScreenY=r-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},e.prototype.handleMove=function(t,n){this.deltaX=t-window.pageXOffset-this.origScreenX,this.deltaY=n-window.pageYOffset-this.origScreenY,this.updateElPosition()},e.prototype.setIsVisible=function(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)},e.prototype.stop=function(t,n){var r=this,a=function(){r.cleanup(),n()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(a,this.revertDuration):setTimeout(a,0)},e.prototype.doRevertAnimation=function(t,n){var r=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",$m(r,{left:a.left,top:a.top}),I8(r,function(){r.style.transition="",t()})},e.prototype.cleanup=function(){this.mirrorEl&&(zS(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},e.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&$m(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},e.prototype.getMirrorEl=function(){var t=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.classList.add("fc-unselectable"),n.classList.add("fc-event-dragging"),$m(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n},e}(),KO=function(e){Bl(t,e);function t(n,r){var a=e.call(this)||this;return a.handleScroll=function(){a.scrollTop=a.scrollController.getScrollTop(),a.scrollLeft=a.scrollController.getScrollLeft(),a.handleScrollChange()},a.scrollController=n,a.doesListening=r,a.scrollTop=a.origScrollTop=n.getScrollTop(),a.scrollLeft=a.origScrollLeft=n.getScrollLeft(),a.scrollWidth=n.getScrollWidth(),a.scrollHeight=n.getScrollHeight(),a.clientWidth=n.getClientWidth(),a.clientHeight=n.getClientHeight(),a.clientRect=a.computeClientRect(),a.doesListening&&a.getEventTarget().addEventListener("scroll",a.handleScroll),a}return t.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},t.prototype.getScrollTop=function(){return this.scrollTop},t.prototype.getScrollLeft=function(){return this.scrollLeft},t.prototype.setScrollTop=function(n){this.scrollController.setScrollTop(n),this.doesListening||(this.scrollTop=Math.max(Math.min(n,this.getMaxScrollTop()),0),this.handleScrollChange())},t.prototype.setScrollLeft=function(n){this.scrollController.setScrollLeft(n),this.doesListening||(this.scrollLeft=Math.max(Math.min(n,this.getMaxScrollLeft()),0),this.handleScrollChange())},t.prototype.getClientWidth=function(){return this.clientWidth},t.prototype.getClientHeight=function(){return this.clientHeight},t.prototype.getScrollWidth=function(){return this.scrollWidth},t.prototype.getScrollHeight=function(){return this.scrollHeight},t.prototype.handleScrollChange=function(){},t}(QS),YO=function(e){Bl(t,e);function t(n,r){return e.call(this,new FV(n),r)||this}return t.prototype.getEventTarget=function(){return this.scrollController.el},t.prototype.computeClientRect=function(){return RV(this.scrollController.el)},t}(KO),RW=function(e){Bl(t,e);function t(n){return e.call(this,new NV,n)||this}return t.prototype.getEventTarget=function(){return window},t.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},t.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},t}(KO),VI=typeof performance=="function"?performance.now:Date.now,LW=function(){function e(){var t=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(t.isAnimating){var n=t.computeBestEdge(t.pointerScreenX+window.pageXOffset,t.pointerScreenY+window.pageYOffset);if(n){var r=VI();t.handleSide(n,(r-t.msSinceRequest)/1e3),t.requestAnimation(r)}else t.isAnimating=!1}}}return e.prototype.start=function(t,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,n))},e.prototype.handleMove=function(t,n){if(this.isEnabled){var r=t-window.pageXOffset,a=n-window.pageYOffset,c=this.pointerScreenY===null?0:a-this.pointerScreenY,d=this.pointerScreenX===null?0:r-this.pointerScreenX;c<0?this.everMovedUp=!0:c>0&&(this.everMovedDown=!0),d<0?this.everMovedLeft=!0:d>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(VI()))}},e.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];r.destroy()}this.scrollCaches=null}},e.prototype.requestAnimation=function(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)},e.prototype.handleSide=function(t,n){var r=t.scrollCache,a=this.edgeThreshold,c=a-t.distance,d=c*c/(a*a)*this.maxVelocity*n,o=1;switch(t.name){case"left":o=-1;case"right":r.setScrollLeft(r.getScrollLeft()+d*o);break;case"top":o=-1;case"bottom":r.setScrollTop(r.getScrollTop()+d*o);break}},e.prototype.computeBestEdge=function(t,n){for(var r=this.edgeThreshold,a=null,c=this.scrollCaches||[],d=0,o=c;d<o.length;d++){var v=o[d],C=v.clientRect,I=t-C.left,D=C.right-t,F=n-C.top,U=C.bottom-n;I>=0&&D>=0&&F>=0&&U>=0&&(F<=r&&this.everMovedUp&&v.canScrollUp()&&(!a||a.distance>F)&&(a={scrollCache:v,name:"top",distance:F}),U<=r&&this.everMovedDown&&v.canScrollDown()&&(!a||a.distance>U)&&(a={scrollCache:v,name:"bottom",distance:U}),I<=r&&this.everMovedLeft&&v.canScrollLeft()&&(!a||a.distance>I)&&(a={scrollCache:v,name:"left",distance:I}),D<=r&&this.everMovedRight&&v.canScrollRight()&&(!a||a.distance>D)&&(a={scrollCache:v,name:"right",distance:D}))}return a},e.prototype.buildCaches=function(t){return this.queryScrollEls(t).map(function(n){return n===window?new RW(!1):new YO(n,!1)})},e.prototype.queryScrollEls=function(t){for(var n=[],r=0,a=this.scrollQuery;r<a.length;r++){var c=a[r];typeof c=="object"?n.push(c):n.push.apply(n,Array.prototype.slice.call(V3(t).querySelectorAll(c)))}return n},e}(),Vg=function(e){Bl(t,e);function t(n,r){var a=e.call(this,n)||this;a.containerEl=n,a.delay=null,a.minDistance=0,a.touchScrollAllowed=!0,a.mirrorNeedsRevert=!1,a.isInteracting=!1,a.isDragging=!1,a.isDelayEnded=!1,a.isDistanceSurpassed=!1,a.delayTimeoutId=null,a.onPointerDown=function(d){a.isDragging||(a.isInteracting=!0,a.isDelayEnded=!1,a.isDistanceSurpassed=!1,P8(document.body),R8(document.body),d.isTouch||d.origEvent.preventDefault(),a.emitter.trigger("pointerdown",d),a.isInteracting&&!a.pointer.shouldIgnoreMove&&(a.mirror.setIsVisible(!1),a.mirror.start(d.subjectEl,d.pageX,d.pageY),a.startDelay(d),a.minDistance||a.handleDistanceSurpassed(d)))},a.onPointerMove=function(d){if(a.isInteracting){if(a.emitter.trigger("pointermove",d),!a.isDistanceSurpassed){var o=a.minDistance,v=void 0,C=d.deltaX,I=d.deltaY;v=C*C+I*I,v>=o*o&&a.handleDistanceSurpassed(d)}a.isDragging&&(d.origEvent.type!=="scroll"&&(a.mirror.handleMove(d.pageX,d.pageY),a.autoScroller.handleMove(d.pageX,d.pageY)),a.emitter.trigger("dragmove",d))}},a.onPointerUp=function(d){a.isInteracting&&(a.isInteracting=!1,D8(document.body),L8(document.body),a.emitter.trigger("pointerup",d),a.isDragging&&(a.autoScroller.stop(),a.tryStopDrag(d)),a.delayTimeoutId&&(clearTimeout(a.delayTimeoutId),a.delayTimeoutId=null))};var c=a.pointer=new ok(n);return c.emitter.on("pointerdown",a.onPointerDown),c.emitter.on("pointermove",a.onPointerMove),c.emitter.on("pointerup",a.onPointerUp),r&&(c.selector=r),a.mirror=new DW,a.autoScroller=new LW,a}return t.prototype.destroy=function(){this.pointer.destroy(),this.onPointerUp({})},t.prototype.startDelay=function(n){var r=this;typeof this.delay=="number"?this.delayTimeoutId=setTimeout(function(){r.delayTimeoutId=null,r.handleDelayEnd(n)},this.delay):this.handleDelayEnd(n)},t.prototype.handleDelayEnd=function(n){this.isDelayEnded=!0,this.tryStartDrag(n)},t.prototype.handleDistanceSurpassed=function(n){this.isDistanceSurpassed=!0,this.tryStartDrag(n)},t.prototype.tryStartDrag=function(n){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(n.pageX,n.pageY,this.containerEl),this.emitter.trigger("dragstart",n),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())},t.prototype.tryStopDrag=function(n){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,n))},t.prototype.stopDrag=function(n){this.isDragging=!1,this.emitter.trigger("dragend",n)},t.prototype.setIgnoreMove=function(n){this.pointer.shouldIgnoreMove=n},t.prototype.setMirrorIsVisible=function(n){this.mirror.setIsVisible(n)},t.prototype.setMirrorNeedsRevert=function(n){this.mirrorNeedsRevert=n},t.prototype.setAutoScrollEnabled=function(n){this.autoScroller.isEnabled=n},t}(DO),OW=function(){function e(t){this.origRect=JS(t),this.scrollCaches=vO(t).map(function(n){return new YO(n,!0)})}return e.prototype.destroy=function(){for(var t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];r.destroy()}},e.prototype.computeLeft=function(){for(var t=this.origRect.left,n=0,r=this.scrollCaches;n<r.length;n++){var a=r[n];t+=a.origScrollLeft-a.getScrollLeft()}return t},e.prototype.computeTop=function(){for(var t=this.origRect.top,n=0,r=this.scrollCaches;n<r.length;n++){var a=r[n];t+=a.origScrollTop-a.getScrollTop()}return t},e.prototype.isWithinClipping=function(t,n){for(var r={left:t,top:n},a=0,c=this.scrollCaches;a<c.length;a++){var d=c[a];if(!zW(d.getEventTarget())&&!bV(r,d.clientRect))return!1}return!0},e}();function zW(e){var t=e.tagName;return t==="HTML"||t==="BODY"}var i0=function(){function e(t,n){var r=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(a){var c=r.dragging;r.initialHit=null,r.movingHit=null,r.finalHit=null,r.prepareHits(),r.processFirstCoord(a),r.initialHit||!r.requireInitial?(c.setIgnoreMove(!1),r.emitter.trigger("pointerdown",a)):c.setIgnoreMove(!0)},this.handleDragStart=function(a){r.emitter.trigger("dragstart",a),r.handleMove(a,!0)},this.handleDragMove=function(a){r.emitter.trigger("dragmove",a),r.handleMove(a)},this.handlePointerUp=function(a){r.releaseHits(),r.emitter.trigger("pointerup",a)},this.handleDragEnd=function(a){r.movingHit&&r.emitter.trigger("hitupdate",null,!0,a),r.finalHit=r.movingHit,r.movingHit=null,r.emitter.trigger("dragend",a)},this.droppableStore=n,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new n0}return e.prototype.processFirstCoord=function(t){var n={left:t.pageX,top:t.pageY},r=n,a=t.subjectEl,c;a instanceof HTMLElement&&(c=JS(a),r=wV(r,c));var d=this.initialHit=this.queryHitForOffset(r.left,r.top);if(d){if(this.useSubjectCenter&&c){var o=fO(c,d.rect);o&&(r=EV(o))}this.coordAdjust=CV(r,n)}else this.coordAdjust={left:0,top:0}},e.prototype.handleMove=function(t,n){var r=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);(n||!o0(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,t))},e.prototype.prepareHits=function(){this.offsetTrackers=Sh(this.droppableStore,function(t){return t.component.prepareHits(),new OW(t.el)})},e.prototype.releaseHits=function(){var t=this.offsetTrackers;for(var n in t)t[n].destroy();this.offsetTrackers={}},e.prototype.queryHitForOffset=function(t,n){var r=this,a=r.droppableStore,c=r.offsetTrackers,d=null;for(var o in a){var v=a[o].component,C=c[o];if(C&&C.isWithinClipping(t,n)){var I=C.computeLeft(),D=C.computeTop(),F=t-I,U=n-D,j=C.origRect,T=j.right-j.left,H=j.bottom-j.top;if(F>=0&&F<T&&U>=0&&U<H){var N=v.queryHit(F,U,T,H);N&&t0(N.dateProfile.activeRange,N.dateSpan.range)&&(!d||N.layer>d.layer)&&(N.componentId=o,N.context=v.context,N.rect.left+=I,N.rect.right+=I,N.rect.top+=D,N.rect.bottom+=D,d=N)}}}return d},e}();function o0(e,t){return!e&&!t?!0:Boolean(e)!==Boolean(t)?!1:Xj(e.dateSpan,t.dateSpan)}function JO(e,t){for(var n={},r=0,a=t.pluginHooks.datePointTransforms;r<a.length;r++){var c=a[r];Hi(n,c(e,t))}return Hi(n,BW(e,t.dateEnv)),n}function BW(e,t){return{date:t.toDate(e.range.start),dateStr:t.formatIso(e.range.start,{omitTime:e.allDay}),allDay:e.allDay}}var FW=function(e){Bl(t,e);function t(n){var r=e.call(this,n)||this;r.handlePointerDown=function(c){var d=r.dragging,o=c.origEvent.target;d.setIgnoreMove(!r.component.isValidDateDownEl(o))},r.handleDragEnd=function(c){var d=r.component,o=r.dragging.pointer;if(!o.wasTouchScroll){var v=r.hitDragging,C=v.initialHit,I=v.finalHit;if(C&&I&&o0(C,I)){var D=d.context,F=Hi(Hi({},JO(C.dateSpan,D)),{dayEl:C.dayEl,jsEvent:c.origEvent,view:D.viewApi||D.calendarApi.view});D.emitter.trigger("dateClick",F)}}},r.dragging=new Vg(n.el),r.dragging.autoScroller.isEnabled=!1;var a=r.hitDragging=new i0(r.dragging,nk(n));return a.emitter.on("pointerdown",r.handlePointerDown),a.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t}(Np),NW=function(e){Bl(t,e);function t(n){var r=e.call(this,n)||this;r.dragSelection=null,r.handlePointerDown=function(v){var C=r,I=C.component,D=C.dragging,F=I.context.options,U=F.selectable&&I.isValidDateDownEl(v.origEvent.target);D.setIgnoreMove(!U),D.delay=v.isTouch?UW(I):null},r.handleDragStart=function(v){r.component.context.calendarApi.unselect(v)},r.handleHitUpdate=function(v,C){var I=r.component.context,D=null,F=!1;if(v){var U=r.hitDragging.initialHit,j=v.componentId===U.componentId&&r.isHitComboAllowed&&!r.isHitComboAllowed(U,v);j||(D=jW(U,v,I.pluginHooks.dateSelectionTransformers)),(!D||!EH(D,v.dateProfile,I))&&(F=!0,D=null)}D?I.dispatch({type:"SELECT_DATES",selection:D}):C||I.dispatch({type:"UNSELECT_DATES"}),F?BS():FS(),C||(r.dragSelection=D)},r.handlePointerUp=function(v){r.dragSelection&&(oO(r.dragSelection,v,r.component.context),r.dragSelection=null)};var a=n.component,c=a.context.options,d=r.dragging=new Vg(n.el);d.touchScrollAllowed=!1,d.minDistance=c.selectMinDistance||0,d.autoScroller.isEnabled=c.dragScroll;var o=r.hitDragging=new i0(r.dragging,nk(n));return o.emitter.on("pointerdown",r.handlePointerDown),o.emitter.on("dragstart",r.handleDragStart),o.emitter.on("hitupdate",r.handleHitUpdate),o.emitter.on("pointerup",r.handlePointerUp),r}return t.prototype.destroy=function(){this.dragging.destroy()},t}(Np);function UW(e){var t=e.context.options,n=t.selectLongPressDelay;return n==null&&(n=t.longPressDelay),n}function jW(e,t,n){var r=e.dateSpan,a=t.dateSpan,c=[r.range.start,r.range.end,a.range.start,a.range.end];c.sort(N8);for(var d={},o=0,v=n;o<v.length;o++){var C=v[o],I=C(e,t);if(I===!1)return null;I&&Hi(d,I)}return d.range={start:c[0],end:c[3]},d.allDay=r.allDay,d}var QO=function(e){Bl(t,e);function t(n){var r=e.call(this,n)||this;r.subjectEl=null,r.subjectSeg=null,r.isDragging=!1,r.eventRange=null,r.relevantEvents=null,r.receivingContext=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(v){var C=v.origEvent.target,I=r,D=I.component,F=I.dragging,U=F.mirror,j=D.context.options,T=D.context;r.subjectEl=v.subjectEl;var H=r.subjectSeg=kp(v.subjectEl),N=r.eventRange=H.eventRange,q=N.instance.instanceId;r.relevantEvents=HS(T.getCurrentData().eventStore,q),F.minDistance=v.isTouch?0:j.eventDragMinDistance,F.delay=v.isTouch&&q!==D.props.eventSelection?$W(D):null,j.fixedMirrorParent?U.parentNode=j.fixedMirrorParent:U.parentNode=Bo(C,".fc"),U.revertDuration=j.dragRevertDuration;var z=D.isValidSegDownEl(C)&&!Bo(C,".fc-event-resizer");F.setIgnoreMove(!z),r.isDragging=z&&v.subjectEl.classList.contains("fc-event-draggable")},r.handleDragStart=function(v){var C=r.component.context,I=r.eventRange,D=I.instance.instanceId;v.isTouch?D!==r.component.props.eventSelection&&C.dispatch({type:"SELECT_EVENT",eventInstanceId:D}):C.dispatch({type:"UNSELECT_EVENT"}),r.isDragging&&(C.calendarApi.unselect(v),C.emitter.trigger("eventDragStart",{el:r.subjectEl,event:new Ci(C,I.def,I.instance),jsEvent:v.origEvent,view:C.viewApi}))},r.handleHitUpdate=function(v,C){if(!!r.isDragging){var I=r.relevantEvents,D=r.hitDragging.initialHit,F=r.component.context,U=null,j=null,T=null,H=!1,N={affectedEvents:I,mutatedEvents:bs(),isEvent:!0};if(v){U=v.context;var q=U.options;F===U||q.editable&&q.droppable?(j=VW(D,v,U.getCurrentData().pluginHooks.eventDragMutationMassagers),j&&(T=XS(I,U.getCurrentData().eventUiBases,j,U),N.mutatedEvents=T,zO(N,v.dateProfile,U)||(H=!0,j=null,T=null,N.mutatedEvents=bs()))):U=null}r.displayDrag(U,N),H?BS():FS(),C||(F===U&&o0(D,v)&&(j=null),r.dragging.setMirrorNeedsRevert(!j),r.dragging.setMirrorIsVisible(!v||!V3(r.subjectEl).querySelector(".fc-event-mirror")),r.receivingContext=U,r.validMutation=j,r.mutatedRelevantEvents=T)}},r.handlePointerUp=function(){r.isDragging||r.cleanup()},r.handleDragEnd=function(v){if(r.isDragging){var C=r.component.context,I=C.viewApi,D=r,F=D.receivingContext,U=D.validMutation,j=r.eventRange.def,T=r.eventRange.instance,H=new Ci(C,j,T),N=r.relevantEvents,q=r.mutatedRelevantEvents,z=r.hitDragging.finalHit;if(r.clearDrag(),C.emitter.trigger("eventDragStop",{el:r.subjectEl,event:H,jsEvent:v.origEvent,view:I}),U){if(F===C){var B=new Ci(C,q.defs[j.defId],T?q.instances[T.instanceId]:null);C.dispatch({type:"MERGE_EVENTS",eventStore:q});for(var k={oldEvent:H,event:B,relatedEvents:ch(q,C,T),revert:function(){C.dispatch({type:"MERGE_EVENTS",eventStore:N})}},w={},R=0,J=C.getCurrentData().pluginHooks.eventDropTransformers;R<J.length;R++){var ie=J[R];Hi(w,ie(U,C))}C.emitter.trigger("eventDrop",Hi(Hi(Hi({},k),w),{el:v.subjectEl,delta:U.datesDelta,jsEvent:v.origEvent,view:I})),C.emitter.trigger("eventChange",k)}else if(F){var ue={event:H,relatedEvents:ch(N,C,T),revert:function(){C.dispatch({type:"MERGE_EVENTS",eventStore:N})}};C.emitter.trigger("eventLeave",Hi(Hi({},ue),{draggedEl:v.subjectEl,view:I})),C.dispatch({type:"REMOVE_EVENTS",eventStore:N}),C.emitter.trigger("eventRemove",ue);var se=q.defs[j.defId],_e=q.instances[T.instanceId],Ue=new Ci(F,se,_e);F.dispatch({type:"MERGE_EVENTS",eventStore:q});var je={event:Ue,relatedEvents:ch(q,F,_e),revert:function(){F.dispatch({type:"REMOVE_EVENTS",eventStore:q})}};F.emitter.trigger("eventAdd",je),v.isTouch&&F.dispatch({type:"SELECT_EVENT",eventInstanceId:T.instanceId}),F.emitter.trigger("drop",Hi(Hi({},JO(z.dateSpan,F)),{draggedEl:v.subjectEl,jsEvent:v.origEvent,view:z.context.viewApi})),F.emitter.trigger("eventReceive",Hi(Hi({},je),{draggedEl:v.subjectEl,view:z.context.viewApi}))}}else C.emitter.trigger("_noEventDrop")}r.cleanup()};var a=r.component,c=a.context.options,d=r.dragging=new Vg(n.el);d.pointer.selector=t.SELECTOR,d.touchScrollAllowed=!1,d.autoScroller.isEnabled=c.dragScroll;var o=r.hitDragging=new i0(r.dragging,eC);return o.useSubjectCenter=n.useEventCenter,o.emitter.on("pointerdown",r.handlePointerDown),o.emitter.on("dragstart",r.handleDragStart),o.emitter.on("hitupdate",r.handleHitUpdate),o.emitter.on("pointerup",r.handlePointerUp),o.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t.prototype.displayDrag=function(n,r){var a=this.component.context,c=this.receivingContext;c&&c!==n&&(c===a?c.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:bs(),isEvent:!0}}):c.dispatch({type:"UNSET_EVENT_DRAG"})),n&&n.dispatch({type:"SET_EVENT_DRAG",state:r})},t.prototype.clearDrag=function(){var n=this.component.context,r=this.receivingContext;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),n!==r&&n.dispatch({type:"UNSET_EVENT_DRAG"})},t.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null},t.SELECTOR=".fc-event-draggable, .fc-event-resizable",t}(Np);function VW(e,t,n){var r=e.dateSpan,a=t.dateSpan,c=r.range.start,d=a.range.start,o={};r.allDay!==a.allDay&&(o.allDay=a.allDay,o.hasEnd=t.context.options.allDayMaintainDuration,a.allDay&&(c=oi(c)));var v=ep(c,d,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);v.milliseconds&&(o.allDay=!1);for(var C={datesDelta:v,standardProps:o},I=0,D=n;I<D.length;I++){var F=D[I];F(C,e,t)}return C}function $W(e){var t=e.context.options,n=t.eventLongPressDelay;return n==null&&(n=t.longPressDelay),n}var HW=function(e){Bl(t,e);function t(n){var r=e.call(this,n)||this;r.draggingSegEl=null,r.draggingSeg=null,r.eventRange=null,r.relevantEvents=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(o){var v=r.component,C=r.querySegEl(o),I=kp(C),D=r.eventRange=I.eventRange;r.dragging.minDistance=v.context.options.eventDragMinDistance,r.dragging.setIgnoreMove(!r.component.isValidSegDownEl(o.origEvent.target)||o.isTouch&&r.component.props.eventSelection!==D.instance.instanceId)},r.handleDragStart=function(o){var v=r.component.context,C=r.eventRange;r.relevantEvents=HS(v.getCurrentData().eventStore,r.eventRange.instance.instanceId);var I=r.querySegEl(o);r.draggingSegEl=I,r.draggingSeg=kp(I),v.calendarApi.unselect(),v.emitter.trigger("eventResizeStart",{el:I,event:new Ci(v,C.def,C.instance),jsEvent:o.origEvent,view:v.viewApi})},r.handleHitUpdate=function(o,v,C){var I=r.component.context,D=r.relevantEvents,F=r.hitDragging.initialHit,U=r.eventRange.instance,j=null,T=null,H=!1,N={affectedEvents:D,mutatedEvents:bs(),isEvent:!0};if(o){var q=o.componentId===F.componentId&&r.isHitComboAllowed&&!r.isHitComboAllowed(F,o);q||(j=WW(F,o,C.subjectEl.classList.contains("fc-event-resizer-start"),U.range))}j&&(T=XS(D,I.getCurrentData().eventUiBases,j,I),N.mutatedEvents=T,zO(N,o.dateProfile,I)||(H=!0,j=null,T=null,N.mutatedEvents=null)),T?I.dispatch({type:"SET_EVENT_RESIZE",state:N}):I.dispatch({type:"UNSET_EVENT_RESIZE"}),H?BS():FS(),v||(j&&o0(F,o)&&(j=null),r.validMutation=j,r.mutatedRelevantEvents=T)},r.handleDragEnd=function(o){var v=r.component.context,C=r.eventRange.def,I=r.eventRange.instance,D=new Ci(v,C,I),F=r.relevantEvents,U=r.mutatedRelevantEvents;if(v.emitter.trigger("eventResizeStop",{el:r.draggingSegEl,event:D,jsEvent:o.origEvent,view:v.viewApi}),r.validMutation){var j=new Ci(v,U.defs[C.defId],I?U.instances[I.instanceId]:null);v.dispatch({type:"MERGE_EVENTS",eventStore:U});var T={oldEvent:D,event:j,relatedEvents:ch(U,v,I),revert:function(){v.dispatch({type:"MERGE_EVENTS",eventStore:F})}};v.emitter.trigger("eventResize",Hi(Hi({},T),{el:r.draggingSegEl,startDelta:r.validMutation.startDelta||Mr(0),endDelta:r.validMutation.endDelta||Mr(0),jsEvent:o.origEvent,view:v.viewApi})),v.emitter.trigger("eventChange",T)}else v.emitter.trigger("_noEventResize");r.draggingSeg=null,r.relevantEvents=null,r.validMutation=null};var a=n.component,c=r.dragging=new Vg(n.el);c.pointer.selector=".fc-event-resizer",c.touchScrollAllowed=!1,c.autoScroller.isEnabled=a.context.options.dragScroll;var d=r.hitDragging=new i0(r.dragging,nk(n));return d.emitter.on("pointerdown",r.handlePointerDown),d.emitter.on("dragstart",r.handleDragStart),d.emitter.on("hitupdate",r.handleHitUpdate),d.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t.prototype.querySegEl=function(n){return Bo(n.subjectEl,".fc-event")},t}(Np);function WW(e,t,n,r){var a=e.context.dateEnv,c=e.dateSpan.range.start,d=t.dateSpan.range.start,o=ep(c,d,a,e.largeUnit);if(n){if(a.add(r.start,o)<r.end)return{startDelta:o}}else if(a.add(r.end,o)>r.start)return{endDelta:o};return null}var GW=function(){function e(t){var n=this;this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=function(a){a.jsEvent&&(n.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=function(a){var c=n.context.options.unselectCancel,d=j3(a.origEvent);n.matchesCancel=!!Bo(d,c),n.matchesEvent=!!Bo(d,QO.SELECTOR)},this.onDocumentPointerUp=function(a){var c=n.context,d=n.documentPointer,o=c.getCurrentData();if(!d.wasTouchScroll){if(o.dateSelection&&!n.isRecentPointerDateSelect){var v=c.options.unselectAuto;v&&(!v||!n.matchesCancel)&&c.calendarApi.unselect(a)}o.eventSelection&&!n.matchesEvent&&c.dispatch({type:"UNSELECT_EVENT"})}n.isRecentPointerDateSelect=!1};var r=this.documentPointer=new ok(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerdown",this.onDocumentPointerDown),r.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}return e.prototype.destroy=function(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()},e}(),qW={fixedMirrorParent:vt},ZW={dateClick:vt,eventDragStart:vt,eventDragStop:vt,eventDrop:vt,eventResizeStart:vt,eventResizeStop:vt,eventResize:vt,drop:vt,eventReceive:vt,eventLeave:vt};rk.dataAttrPrefix="";(function(e){Bl(t,e);function t(n){var r=e.call(this,n)||this;r.shouldIgnoreMove=!1,r.mirrorSelector="",r.currentMirrorEl=null,r.handlePointerDown=function(c){r.emitter.trigger("pointerdown",c),r.shouldIgnoreMove||r.emitter.trigger("dragstart",c)},r.handlePointerMove=function(c){r.shouldIgnoreMove||r.emitter.trigger("dragmove",c)},r.handlePointerUp=function(c){r.emitter.trigger("pointerup",c),r.shouldIgnoreMove||r.emitter.trigger("dragend",c)};var a=r.pointer=new ok(n);return a.emitter.on("pointerdown",r.handlePointerDown),a.emitter.on("pointermove",r.handlePointerMove),a.emitter.on("pointerup",r.handlePointerUp),r}return t.prototype.destroy=function(){this.pointer.destroy()},t.prototype.setIgnoreMove=function(n){this.shouldIgnoreMove=n},t.prototype.setMirrorIsVisible=function(n){if(n)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var r=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;r&&(this.currentMirrorEl=r,r.style.visibility="hidden")}},t})(DO);var XW=Ku({componentInteractions:[FW,NW,QO,HW],calendarInteractions:[GW],elementDraggingImpl:Vg,optionRefiners:qW,listenerRefiners:ZW});const KW=()=>{const[e,t]=m.exports.useState([]),[n,r]=m.exports.useState([]),[a,c]=m.exports.useState(""),[d,o]=m.exports.useState(void 0),[v,C]=m.exports.useState([]),I=nt.useContext(Hr),D=T=>T.split("T")[0];nt.useEffect(()=>{function T(H){return Object.assign(Object.assign({},H),{organization:I.allOrgs.find(N=>N.id===H.organization),tags:H.tags.map(N=>I.allTags.find(q=>q.id===N)).filter(N=>!!N)})}r(e.map(T))},[I,e]);const F=(T,H,N)=>{let q=JSON.stringify(T);if(a!==q){const z=`${lr.BASEURL}/api/v3/obj/event?start=${D(T.startStr)}&end=${D(T.endStr)}`;console.log(z),I.getAPI(z,!1).then(B=>{B.status!==200?N(new Error("Returned status "+B.status)):(c(q),t(B.data.results),H(n))})}else H(n)},U=T=>{if(o(T),T===void 0)C([]);else{let H=T,N=[],q=new Date(H.getTime()+24*60*60*1e3);for(let z of n){let B=new Date(z.start_date),k=new Date(z.end_date);B<q&&k>=H&&N.push(z)}C(N)}};let j="";return d!==void 0&&(j=d.toLocaleDateString(void 0,{day:"numeric",year:"numeric",weekday:"long",month:"long"})),nt.createElement(nt.Fragment,null,nt.createElement("link",{rel:"stylesheet",href:"static/css/fullcalendar.min.css",type:"text/css"}),nt.createElement("link",{rel:"stylesheet",href:"static/css/calendar/view.css",type:"text/css"}),nt.createElement("div",{className:"container"},nt.createElement(YW,{updateEvents:F,selectedDate:d,setSelectedDate:U}),nt.createElement("div",{id:"details"},nt.createElement("div",{className:"container"},nt.createElement("a",{href:"url_to_calendar"},"URL to iCalendar (use this to add to Google Calendar, not yet implemented sry :/)"),nt.createElement("h3",{id:"detailsCurrentDay"},j),nt.createElement("p",{id:"detailsCurrentWeek"}),nt.createElement("hr",null),nt.createElement("p",{className:"no-event-inform"},"No events on this day"),nt.createElement("div",{id:"eventDetails"},nt.createElement(JW,{eventsToday:v,date:d}))))))},YW=e=>{const t=e.updateEvents,n=e.selectedDate,r=e.setSelectedDate,a=1.7,c="var(--dark-colour)";nt.useContext(Hr);const d=I=>{I.clientHeight<I.clientWidth/a&&(I.style.height=I.clientWidth/a+"px");let D=I.querySelector(".fc-daygrid-day-top");if(D===null)throw"rendering error";let F=document.createElement("div");F.classList.add("fc-daygrid-day-number-circle"),document.createElement("li");const U=D.querySelector(".fc-daygrid-day-number");U!=null&&F.appendChild(U),D.innerHTML="",D.appendChild(F),F.style.width=F.clientHeight+"px"},o=I=>{var F;const D=[];for(let U of I)D.push({title:U.name,start:U.start_date,end:U.end_date,color:((F=U.tags[0])!=null?F:{color:"lightblue"}).color,textColor:"#434343"});return D};(()=>{var I;if(document.querySelectorAll(".fc-daygrid-day").forEach(D=>{var U;const F=D.querySelector(".fc-daygrid-day-number-circle");F!=null&&(F.style.background=""),(U=D.querySelector(".fc-daygrid-day-number"))==null||U.removeAttribute("selected")}),n!==void 0){let D=document.querySelector("[data-date='"+n.toISOString().split("T")[0]+"']");if(D!=null){let F=D.querySelector(".fc-daygrid-day-top");if(F==null)throw"reformat error";(F.children.length!==1||!F.children[0].classList.contains(".fc-daygrid-day-number-circle"))&&d(D);const U=F.querySelector(".fc-daygrid-day-number-circle");U!=null&&(U.style.backgroundColor=c),(I=F.querySelector(".fc-daygrid-day-number"))==null||I.setAttribute("selected","true")}}})();var C=nt.createElement(iW,{plugins:[TW,XW],initialView:"dayGridMonth",headerToolbar:{right:"today prev,next"},views:{dayGridMonth:{dayCellDidMount:I=>{d(I.el)},aspectRatio:1.7}},selectable:!0,selectAllow:I=>I.end.getTime()-I.start.getTime()<=24*60*60*1e3,select:I=>{r(new Date(I.start.setHours(0,0,0,0)))},unselect:()=>{r(void 0)},events:(I,D,F)=>{t(I,U=>{D(o(U))},F)},height:"auto",selectLongPressDelay:0});return nt.createElement(nt.Fragment,null,nt.createElement("div",{id:"calendar"},C))},JW=e=>{const t=e.eventsToday,n=e.date,r=n==null?[]:t.map(a=>nt.createElement(QW,{key:a.id,curEvent:a,date:n}));return r.length===0?nt.createElement(nt.Fragment,null):nt.createElement(nt.Fragment,null,r)},QW=e=>{var F;const t=e.curEvent,n=e.date;let r=new Date(t.start_date),a=new Date(t.end_date);nt.useContext(Hr);const c=U=>{let j=U.getHours(),T=U.getMinutes();const H=j>=12?"pm":"am";j=j%12,j=j||12;let N=T<10?"0"+T:""+T;return[j+":"+N,H]},d=U=>{let j=new Intl.DateTimeFormat().format(U),[T,H]=c(U);return[j+" "+T,H]};let[o,v]=r<n?d(r):c(r),[C,I]=a>=new Date(n.getTime()+24*60*60*1e3)?d(a):c(a);const D=t.tags.map(U=>nt.createElement("p",{key:t.name+"|"+U.name,className:"tag",style:{backgroundColor:(U!=null?U:{color:"lightblue"}).color}},U.name));return nt.createElement("table",{className:"dayEvent"},nt.createElement("tbody",null,nt.createElement("tr",null,nt.createElement("td",{className:"leftPanel",style:{backgroundColor:((F=t.tags[0])!=null?F:{color:"lightblue"}).color}},nt.createElement("span",{className:"timeDisplay",id:"event_start"},o),nt.createElement("span",{className:"ampm",id:"event_start_ampm"},v),nt.createElement("br",null),nt.createElement("span",{className:"intermediate_to"},"to"),nt.createElement("br",null),nt.createElement("span",{className:"timeDisplay",id:"event_end"},C),nt.createElement("span",{className:"ampm",id:"event_end_ampm"},I)),nt.createElement(eG,{curEvent:t,tagEls:D}))))},eG=e=>{var c;const[t,n]=m.exports.useState(!0),r=e.curEvent,a=e.tagEls;return nt.useContext(Hr),nt.createElement("td",{className:"detailPanel"},nt.createElement("h4",{className:"event_title"},r.name),nt.createElement("em",null,nt.createElement("a",{className:"eventHost event_host_name"},((c=r.organization)!=null?c:{name:""}).name)),nt.createElement("hr",null),nt.createElement("p",{className:"event_description "+(t?"truncate-100":""),onClick:()=>n(!t)},r.description.replace(/(?:\r\n|\r|\n)/g,"<br>")),nt.createElement("div",{className:"tag-section"},a))},tG=()=>{const e=Si(),t=m.exports.useContext(Hr),r=Kx().get("next");m.exports.useState("");const[a,c]=m.exports.useState(""),[d,o]=m.exports.useState(""),[v,C]=m.exports.useState(!1),[I,D]=m.exports.useState("");m.exports.useEffect(()=>{go()&&e(r||"/"),U("id_login"),U("id_password"),U("id_remember"),document.title="Login | Metropolis"},[]);const F=()=>{window.history.back()},U=T=>{document.getElementById(T).removeAttribute("placeholder")},j=T=>{T.preventDefault(),console.log("Logging in 3"),C(!0),wl.post(lr.AUTH.LOGIN,{username:a,password:d},{}).then(H=>{H.data.access?(console.log(`Success: ${H.data.access}`),t.updateToken(H.data.access),s3(H.data.refresh),C(!1),e(r||"/")):(console.log("Error"),D(H.data.error),C(!1))}).catch(H=>{D(H.response.data.detail),C(!1)})};return m.exports.createElement("div",{className:"login-page"},m.exports.createElement("a",{id:"back",onClick:F},m.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"row wrapper"},m.exports.createElement("div",{className:"col m12 l6 hide-on-med-and-down"},m.exports.createElement("img",{className:"responsive-img account-art",src:"/static/img/log-in.png"})),m.exports.createElement("div",{className:"col m12 l6"},m.exports.createElement("div",{className:"form-wrapper"},m.exports.createElement("div",{className:"tab-wrapper row"},m.exports.createElement("div",{className:"col s6"},m.exports.createElement(Yt,{to:"/accounts/login/"},m.exports.createElement("div",{className:"tab current"},"Log In"))),m.exports.createElement("div",{className:"col s6"},m.exports.createElement(Yt,{to:"/accounts/signup/"},m.exports.createElement("div",{className:"tab"},"Sign Up")))),m.exports.createElement("form",{className:"login",onSubmit:j},m.exports.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:"CSRFSECRET123"}),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_login",className:"active"},"Login:"),m.exports.createElement("input",{type:"text",name:"login",autoComplete:"off",required:!0,id:"id_login",onChange:T=>{c(T.target.value)},style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=&quot;)"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_password",className:"active"},"Password:"),m.exports.createElement("input",{type:"password",name:"password",autoComplete:"off",required:!0,id:"id_password",onChange:T=>{o(T.target.value)},style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=&quot;)"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"col s12"},m.exports.createElement("label",{htmlFor:"id_remember",className:"valign-wrapper"},m.exports.createElement("input",{className:"filled-in checkbox-blue",type:"checkbox",name:"remember",id:"id_remember"}),m.exports.createElement("span",null,"Remember Me")))),!!I&&m.exports.createElement("ul",{className:"errorlist nonfield"},m.exports.createElement("li",null,"The username and/or password you specified are not correct.")),m.exports.createElement("div",null,m.exports.createElement("button",{className:"btn login-btn",type:"submit"},"Sign In")),m.exports.createElement("p",null,"Forgot your password? Click ",m.exports.createElement(Yt,{className:"link",to:"/accounts/password/reset/"},"here")," to reset.")))))))},nG=()=>{const e=Si();m.exports.useContext(Hr);const{register:t,handleSubmit:n,watch:r,formState:{errors:a}}=LS(),[c,d]=m.exports.useState("");m.exports.useEffect(()=>{document.title="Sign Up | Metropolis"},[]),m.exports.useEffect(()=>{go()&&e("/")});const o=()=>{window.history.back()},v=C=>{if(console.log("Submitted data:",C),C.password!==C.confirm_password){d("Passwords do not match");return}const I={first_name:C.first_name,last_name:C.last_name,graduating_year:C.graduating_year,email:C.email,username:C.username,password:C.password};wl.post(lr.USER,{new_user:I}).then(D=>{console.log("Successfully registered user"),e("/accounts/login")}).catch(D=>{console.log("Failed to register user"),d("An internal error occurred. Please contact an admin to get it fixed.")})};return m.exports.createElement("div",{className:"register-page"},m.exports.createElement("a",{id:"back",onClick:o},m.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"row wrapper"},m.exports.createElement("div",{className:"graphic col m12 l6 hide-on-med-and-down account-art",style:{backgroundImage:"url('/static/img/sign-up.png')"}}),m.exports.createElement("div",{className:"col m12 l6"},m.exports.createElement("div",{className:"form-wrapper"},m.exports.createElement("div",{className:"tab-wrapper row"},m.exports.createElement("div",{className:"col s6"},m.exports.createElement(ax,{href:"/accounts/login/"},m.exports.createElement("div",{className:"tab"},"Log In"))),m.exports.createElement("div",{className:"col s6"},m.exports.createElement(ax,{href:"/accounts/signup/"},m.exports.createElement("div",{className:"tab current"},"Sign Up")))),m.exports.createElement("form",{className:"signup",onSubmit:n(v)},m.exports.createElement("input",{...t("CSRF_TOKEN"),type:"hidden",name:"csrfmiddlewaretoken",value:"CSRFSECRET"}),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_email",className:"active"},"TDSB Email:"),m.exports.createElement("input",{...t("email"),type:"email",name:"email",autoComplete:"email",required:!0,id:"id_email",style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABHklEQVQ4EaVTO26DQBD1ohQWaS2lg9JybZ+AK7hNwx2oIoVf4UPQ0Lj1FdKktevIpel8AKNUkDcWMxpgSaIEaTVv3sx7uztiTdu2s/98DywOw3Dued4Who/M2aIx5lZV1aEsy0+qiwHELyi+Ytl0PQ69SxAxkWIA4RMRTdNsKE59juMcuZd6xIAFeZ6fGCdJ8kY4y7KAuTRNGd7jyEBXsdOPE3a0QGPsniOnnYMO67LgSQN9T41F2QGrQRRFCwyzoIF2qyBuKKbcOgPXdVeY9rMWgNsjf9ccYesJhk3f5dYT1HX9gR0LLQR30TnjkUEcx2uIuS4RnI+aj6sJR0AM8AaumPaM/rRehyWhXqbFAA9kh3/8/NvHxAYGAsZ/il8IalkCLBfNVAAAAABJRU5ErkJggg==&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_username",className:"active"},"Username:"),m.exports.createElement("input",{...t("username"),type:"text",name:"username",autoComplete:"username",minLength:1,maxLength:150,required:!0,id:"id_username"}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_first_name",className:"active"},"First Name:"),m.exports.createElement("input",{...t("first_name"),type:"text",name:"first_name",autoComplete:"given-name",maxLength:30,required:!0,id:"id_first_name"}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_last_name",className:"active"},"Last Name:"),m.exports.createElement("input",{...t("last_name"),type:"text",name:"last_name",autoComplete:"family-name",maxLength:30,required:!0,id:"id_last_name"}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("span",{className:"grad-year"},"Graduating Year:"),m.exports.createElement("select",{...t("graduating_year"),className:"browser-default"},m.exports.createElement("option",{value:""},"Does not apply"),m.exports.createElement("option",{value:"2022"},"2022"),m.exports.createElement("option",{value:"2023"},"2023"),m.exports.createElement("option",{value:"2024"},"2024"),m.exports.createElement("option",{value:"2025"},"2025")))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_password1",className:"active"},"Password:"),m.exports.createElement("input",{...t("password"),type:"password",required:!0,style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACIUlEQVQ4EX2TOYhTURSG87IMihDsjGghBhFBmHFDHLWwSqcikk4RRKJgk0KL7C8bMpWpZtIqNkEUl1ZCgs0wOo0SxiLMDApWlgOPrH7/5b2QkYwX7jvn/uc//zl3edZ4PPbNGvF4fC4ajR5VrNvt/mo0Gr1ZPOtfgWw2e9Lv9+chX7cs64CS4Oxg3o9GI7tUKv0Q5o1dAiTfCgQCLwnOkfQOu+oSLyJ2A783HA7vIPLGxX0TgVwud4HKn0nc7Pf7N6vV6oZHkkX8FPG3uMfgXC0Wi2vCg/poUKGGcagQI3k7k8mcp5slcGswGDwpl8tfwGJg3xB6Dvey8vz6oH4C3iXcFYjbwiDeo1KafafkC3NjK7iL5ESFGQEUF7Sg+ifZdDp9GnMF/KGmfBdT2HCwZ7TwtrBPC7rQaav6Iv48rqZwg+F+p8hOMBj0IbxfMdMBrW5pAVGV/ztINByENkU0t5BIJEKRSOQ3Aj+Z57iFs1R5NK3EQS6HQqF1zmQdzpFWq3W42WwOTAf1er1PF2USFlC+qxMvFAr3HcexWX+QX6lUvsKpkTyPSEXJkw6MQ4S38Ljdbi8rmM/nY+CvgNcQqdH6U/xrYK9t244jZv6ByUOSiDdIfgBZ12U6dHEHu9TpdIr8F0OP692CtzaW/a6y3y0Wx5kbFHvGuXzkgf0xhKnPzA4UTyaTB8Ph8AvcHi3fnsrZ7Wore02YViqVOrRXXPhfqP8j6MYlawoAAAAASUVORK5CYII=&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_password2",className:"active"},"Password (again):"),m.exports.createElement("input",{...t("confirm_password"),type:"password",required:!0,style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACIUlEQVQ4EX2TOYhTURSG87IMihDsjGghBhFBmHFDHLWwSqcikk4RRKJgk0KL7C8bMpWpZtIqNkEUl1ZCgs0wOo0SxiLMDApWlgOPrH7/5b2QkYwX7jvn/uc//zl3edZ4PPbNGvF4fC4ajR5VrNvt/mo0Gr1ZPOtfgWw2e9Lv9+chX7cs64CS4Oxg3o9GI7tUKv0Q5o1dAiTfCgQCLwnOkfQOu+oSLyJ2A783HA7vIPLGxX0TgVwud4HKn0nc7Pf7N6vV6oZHkkX8FPG3uMfgXC0Wi2vCg/poUKGGcagQI3k7k8mcp5slcGswGDwpl8tfwGJg3xB6Dvey8vz6oH4C3iXcFYjbwiDeo1KafafkC3NjK7iL5ESFGQEUF7Sg+ifZdDp9GnMF/KGmfBdT2HCwZ7TwtrBPC7rQaav6Iv48rqZwg+F+p8hOMBj0IbxfMdMBrW5pAVGV/ztINByENkU0t5BIJEKRSOQ3Aj+Z57iFs1R5NK3EQS6HQqF1zmQdzpFWq3W42WwOTAf1er1PF2USFlC+qxMvFAr3HcexWX+QX6lUvsKpkTyPSEXJkw6MQ4S38Ljdbi8rmM/nY+CvgNcQqdH6U/xrYK9t244jZv6ByUOSiDdIfgBZ12U6dHEHu9TpdIr8F0OP692CtzaW/a6y3y0Wx5kbFHvGuXzkgf0xhKnPzA4UTyaTB8Ph8AvcHi3fnsrZ7Wore02YViqVOrRXXPhfqP8j6MYlawoAAAAASUVORK5CYII=&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"}}))),m.exports.createElement("p",null,"By clicking this button, you agree to our ",m.exports.createElement(Yt,{to:"/terms/"},"terms")," and ",m.exports.createElement(Yt,{className:"link",to:"/privacy/"},"privacy policy"),"."),c&&m.exports.createElement("span",{className:"form-error"},m.exports.createElement("div",{className:"form-errors"},m.exports.createElement("i",{className:"material-icons"},"warning"),m.exports.createElement(m.exports.Fragment,null,c))),m.exports.createElement("button",{type:"submit",className:"btn login-btn"},"Sign Up")))))))};var oC={exports:{}};/*!
 * Materialize v1.0.0 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */(function(e,t){var n=function T(H,N,q){H===null&&(H=Function.prototype);var z=Object.getOwnPropertyDescriptor(H,N);if(z===void 0){var B=Object.getPrototypeOf(H);return B===null?void 0:T(B,N,q)}else{if("value"in z)return z.value;var k=z.get;return k===void 0?void 0:k.call(q)}},r=function(){function T(H,N){for(var q=0;q<N.length;q++){var z=N[q];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(H,z.key,z)}}return function(H,N,q){return N&&T(H.prototype,N),q&&T(H,q),H}}();function a(T,H){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:T}function c(T,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);T.prototype=Object.create(H&&H.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(T,H):T.__proto__=H)}function d(T,H){if(!(T instanceof H))throw new TypeError("Cannot call a class as a function")}/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */(function(T){window.cash=T()})(function(){var T=document,H=window,N=Array.prototype,q=N.slice,z=N.filter,B=N.push,k=function(){},w=function(re){return typeof re==typeof k&&re.call},R=function(re){return typeof re=="string"},J=/^#[\w-]*$/,ie=/^\.[\w-]*$/,ue=/<.+>/,se=/^\w+$/;function _e(re,ce){ce=ce||T;var De=ie.test(re)?ce.getElementsByClassName(re.slice(1)):se.test(re)?ce.getElementsByTagName(re):ce.querySelectorAll(re);return De}var Ue;function je(re){if(!Ue){Ue=T.implementation.createHTMLDocument(null);var ce=Ue.createElement("base");ce.href=T.location.href,Ue.head.appendChild(ce)}return Ue.body.innerHTML=re,Ue.body.childNodes}function Ne(re){T.readyState!=="loading"?re():T.addEventListener("DOMContentLoaded",re)}function Ie(re,ce){if(!re)return this;if(re.cash&&re!==H)return re;var De=re,be=0,Te;if(R(re))De=J.test(re)?T.getElementById(re.slice(1)):ue.test(re)?je(re):_e(re,ce);else if(w(re))return Ne(re),this;if(!De)return this;if(De.nodeType||De===H)this[0]=De,this.length=1;else for(Te=this.length=De.length;be<Te;be++)this[be]=De[be];return this}function xt(re,ce){return new Ie(re,ce)}var We=xt.fn=xt.prototype=Ie.prototype={cash:!0,length:0,push:B,splice:N.splice,map:N.map,init:Ie};Object.defineProperty(We,"constructor",{value:xt}),xt.parseHTML=je,xt.noop=k,xt.isFunction=w,xt.isString=R,xt.extend=We.extend=function(re){re=re||{};var ce=q.call(arguments),De=ce.length,be=1;for(ce.length===1&&(re=this,be=0);be<De;be++)if(!!ce[be])for(var Te in ce[be])ce[be].hasOwnProperty(Te)&&(re[Te]=ce[be][Te]);return re};function Et(re,ce){for(var De=re.length,be=0;be<De&&ce.call(re[be],re[be],be,re)!==!1;be++);}function ct(re,ce){var De=re&&(re.matches||re.webkitMatchesSelector||re.mozMatchesSelector||re.msMatchesSelector||re.oMatchesSelector);return!!De&&De.call(re,ce)}function xe(re){return R(re)?ct:re.cash?function(ce){return re.is(ce)}:function(ce,De){return ce===De}}function Ee(re){return xt(q.call(re).filter(function(ce,De,be){return be.indexOf(ce)===De}))}xt.extend({merge:function(re,ce){for(var De=+ce.length,be=re.length,Te=0;Te<De;be++,Te++)re[be]=ce[Te];return re.length=be,re},each:Et,matches:ct,unique:Ee,isArray:Array.isArray,isNumeric:function(re){return!isNaN(parseFloat(re))&&isFinite(re)}});var xn=xt.uid="_cash"+Date.now();function Qt(re){return re[xn]=re[xn]||{}}function yn(re,ce,De){return Qt(re)[ce]=De}function on(re,ce){var De=Qt(re);return De[ce]===void 0&&(De[ce]=re.dataset?re.dataset[ce]:xt(re).attr("data-"+ce)),De[ce]}function Sn(re,ce){var De=Qt(re);De?delete De[ce]:re.dataset?delete re.dataset[ce]:xt(re).removeAttr("data-"+name)}We.extend({data:function(re,ce){if(R(re))return ce===void 0?on(this[0],re):this.each(function(be){return yn(be,re,ce)});for(var De in re)this.data(De,re[De]);return this},removeData:function(re){return this.each(function(ce){return Sn(ce,re)})}});var Nn=/\S+/g;function bn(re){return R(re)&&re.match(Nn)}function kn(re,ce){return re.classList?re.classList.contains(ce):new RegExp("(^| )"+ce+"( |$)","gi").test(re.className)}function Le(re,ce,De){re.classList?re.classList.add(ce):De.indexOf(" "+ce+" ")&&(re.className+=" "+ce)}function Ke(re,ce){re.classList?re.classList.remove(ce):re.className=re.className.replace(ce,"")}We.extend({addClass:function(re){var ce=bn(re);return ce?this.each(function(De){var be=" "+De.className+" ";Et(ce,function(Te){Le(De,Te,be)})}):this},attr:function(re,ce){if(!!re){if(R(re))return ce===void 0?this[0]?this[0].getAttribute?this[0].getAttribute(re):this[0][re]:void 0:this.each(function(be){be.setAttribute?be.setAttribute(re,ce):be[re]=ce});for(var De in re)this.attr(De,re[De]);return this}},hasClass:function(re){var ce=!1,De=bn(re);return De&&De.length&&this.each(function(be){return ce=kn(be,De[0]),!ce}),ce},prop:function(re,ce){if(R(re))return ce===void 0?this[0][re]:this.each(function(be){be[re]=ce});for(var De in re)this.prop(De,re[De]);return this},removeAttr:function(re){return this.each(function(ce){ce.removeAttribute?ce.removeAttribute(re):delete ce[re]})},removeClass:function(re){if(!arguments.length)return this.attr("class","");var ce=bn(re);return ce?this.each(function(De){Et(ce,function(be){Ke(De,be)})}):this},removeProp:function(re){return this.each(function(ce){delete ce[re]})},toggleClass:function(re,ce){if(ce!==void 0)return this[ce?"addClass":"removeClass"](re);var De=bn(re);return De?this.each(function(be){var Te=" "+be.className+" ";Et(De,function(mt){kn(be,mt)?Ke(be,mt):Le(be,mt,Te)})}):this}}),We.extend({add:function(re,ce){return Ee(xt.merge(this,xt(re,ce)))},each:function(re){return Et(this,re),this},eq:function(re){return xt(this.get(re))},filter:function(re){if(!re)return this;var ce=w(re)?re:xe(re);return xt(z.call(this,function(De){return ce(De,re)}))},first:function(){return this.eq(0)},get:function(re){return re===void 0?q.call(this):re<0?this[re+this.length]:this[re]},index:function(re){var ce=re?xt(re)[0]:this[0],De=re?this:xt(ce).parent().children();return q.call(De).indexOf(ce)},last:function(){return this.eq(-1)}});var pt=function(){var re=/(?:^\w|[A-Z]|\b\w)/g,ce=/[\s-_]+/g;return function(De){return De.replace(re,function(be,Te){return be[Te===0?"toLowerCase":"toUpperCase"]()}).replace(ce,"")}}(),St=function(){var re={},ce=document,De=ce.createElement("div"),be=De.style;return function(Te){if(Te=pt(Te),re[Te])return re[Te];var mt=Te.charAt(0).toUpperCase()+Te.slice(1),Bt=["webkit","moz","ms","o"],Kt=(Te+" "+Bt.join(mt+" ")+mt).split(" ");return Et(Kt,function(er){if(er in be)return re[er]=Te=re[Te]=er,!1}),re[Te]}}();xt.prefixedProp=St,xt.camelCase=pt,We.extend({css:function(re,ce){if(R(re))return re=St(re),arguments.length>1?this.each(function(be){return be.style[re]=ce}):H.getComputedStyle(this[0])[re];for(var De in re)this.css(De,re[De]);return this}});function Ft(re,ce){return parseInt(H.getComputedStyle(re[0],null)[ce],10)||0}Et(["Width","Height"],function(re){var ce=re.toLowerCase();We[ce]=function(){return this[0].getBoundingClientRect()[ce]},We["inner"+re]=function(){return this[0]["client"+re]},We["outer"+re]=function(De){return this[0]["offset"+re]+(De?Ft(this,"margin"+(re==="Width"?"Left":"Top"))+Ft(this,"margin"+(re==="Width"?"Right":"Bottom")):0)}});function ht(re,ce,De){var be=on(re,"_cashEvents")||yn(re,"_cashEvents",{});be[ce]=be[ce]||[],be[ce].push(De),re.addEventListener(ce,De)}function Nt(re,ce,De){var be=on(re,"_cashEvents"),Te=be&&be[ce],mt;!Te||(De?(re.removeEventListener(ce,De),mt=Te.indexOf(De),mt>=0&&Te.splice(mt,1)):(Et(Te,function(Bt){re.removeEventListener(ce,Bt)}),Te=[]))}We.extend({off:function(re,ce){return this.each(function(De){return Nt(De,re,ce)})},on:function(re,ce,De,be){var Te;if(!R(re)){for(var mt in re)this.on(mt,ce,re[mt]);return this}return w(ce)&&(De=ce,ce=null),re==="ready"?(Ne(De),this):(ce&&(Te=De,De=function(Bt){for(var Kt=Bt.target;!ct(Kt,ce);){if(Kt===this||Kt===null)return Kt=!1;Kt=Kt.parentNode}Kt&&Te.call(Kt,Bt)}),this.each(function(Bt){var Kt=De;be&&(Kt=function(){De.apply(this,arguments),Nt(Bt,re,Kt)}),ht(Bt,re,Kt)}))},one:function(re,ce,De){return this.on(re,ce,De,!0)},ready:Ne,trigger:function(re,ce){if(document.createEvent){var De=document.createEvent("HTMLEvents");return De.initEvent(re,!0,!1),De=this.extend(De,ce),this.each(function(be){return be.dispatchEvent(De)})}}});function wn(re,ce){return"&"+encodeURIComponent(re)+"="+encodeURIComponent(ce).replace(/%20/g,"+")}function Gn(re){var ce=[];return Et(re.options,function(De){De.selected&&ce.push(De.value)}),ce.length?ce:null}function qn(re){var ce=re.selectedIndex;return ce>=0?re.options[ce].value:null}function Un(re){var ce=re.type;if(!ce)return null;switch(ce.toLowerCase()){case"select-one":return qn(re);case"select-multiple":return Gn(re);case"radio":return re.checked?re.value:null;case"checkbox":return re.checked?re.value:null;default:return re.value?re.value:null}}We.extend({serialize:function(){var re="";return Et(this[0].elements||this,function(ce){if(!(ce.disabled||ce.tagName==="FIELDSET")){var De=ce.name;switch(ce.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var be=Un(ce);be!==null&&Et(be,function(mt){re+=wn(De,mt)});break;default:var Te=Un(ce);Te!==null&&(re+=wn(De,Te))}}}),re.substr(1)},val:function(re){return re===void 0?Un(this[0]):this.each(function(ce){return ce.value=re})}});function xr(re,ce,De){if(De){var be=re.childNodes[0];re.insertBefore(ce,be)}else re.appendChild(ce)}function Ae(re,ce,De){var be=R(ce);if(!be&&ce.length){Et(ce,function(Te){return Ae(re,Te,De)});return}Et(re,be?function(Te){return Te.insertAdjacentHTML(De?"afterbegin":"beforeend",ce)}:function(Te,mt){return xr(Te,mt===0?ce:ce.cloneNode(!0),De)})}We.extend({after:function(re){return xt(re).insertAfter(this),this},append:function(re){return Ae(this,re),this},appendTo:function(re){return Ae(xt(re),this),this},before:function(re){return xt(re).insertBefore(this),this},clone:function(){return xt(this.map(function(re){return re.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(re){if(re===void 0)return this[0].innerHTML;var ce=re.nodeType?re[0].outerHTML:re;return this.each(function(De){return De.innerHTML=ce})},insertAfter:function(re){var ce=this;return xt(re).each(function(De,be){var Te=De.parentNode,mt=De.nextSibling;ce.each(function(Bt){Te.insertBefore(be===0?Bt:Bt.cloneNode(!0),mt)})}),this},insertBefore:function(re){var ce=this;return xt(re).each(function(De,be){var Te=De.parentNode;ce.each(function(mt){Te.insertBefore(be===0?mt:mt.cloneNode(!0),De)})}),this},prepend:function(re){return Ae(this,re,!0),this},prependTo:function(re){return Ae(xt(re),this,!0),this},remove:function(){return this.each(function(re){if(re.parentNode)return re.parentNode.removeChild(re)})},text:function(re){return re===void 0?this[0].textContent:this.each(function(ce){return ce.textContent=re})}});var Ye=T.documentElement;return We.extend({position:function(){var re=this[0];return{left:re.offsetLeft,top:re.offsetTop}},offset:function(){var re=this[0].getBoundingClientRect();return{top:re.top+H.pageYOffset-Ye.clientTop,left:re.left+H.pageXOffset-Ye.clientLeft}},offsetParent:function(){return xt(this[0].offsetParent)}}),We.extend({children:function(re){var ce=[];return this.each(function(De){B.apply(ce,De.children)}),ce=Ee(ce),re?ce.filter(function(De){return ct(De,re)}):ce},closest:function(re){return!re||this.length<1?xt():this.is(re)?this.filter(re):this.parent().closest(re)},is:function(re){if(!re)return!1;var ce=!1,De=xe(re);return this.each(function(be){return ce=De(be,re),!ce}),ce},find:function(re){if(!re||re.nodeType)return xt(re&&this.has(re).length?re:null);var ce=[];return this.each(function(De){B.apply(ce,_e(re,De))}),Ee(ce)},has:function(re){var ce=R(re)?function(De){return _e(re,De).length!==0}:function(De){return De.contains(re)};return this.filter(ce)},next:function(){return xt(this[0].nextElementSibling)},not:function(re){if(!re)return this;var ce=xe(re);return this.filter(function(De){return!ce(De,re)})},parent:function(){var re=[];return this.each(function(ce){ce&&ce.parentNode&&re.push(ce.parentNode)}),Ee(re)},parents:function(re){var ce,De=[];return this.each(function(be){for(ce=be;ce&&ce.parentNode&&ce!==T.body.parentNode;)ce=ce.parentNode,(!re||re&&ct(ce,re))&&De.push(ce)}),Ee(De)},prev:function(){return xt(this[0].previousElementSibling)},siblings:function(re){var ce=this.parent().children(re),De=this[0];return ce.filter(function(be){return be!==De})}}),xt});var o=function(){function T(H,N,q){d(this,T),N instanceof Element||console.error(Error(N+" is not an HTML Element"));var z=H.getInstance(N);z&&z.destroy(),this.el=N,this.$el=cash(N)}return r(T,null,[{key:"init",value:function(N,q,z){var B=null;if(q instanceof Element)B=new N(q,z);else if(!!q&&(q.jquery||q.cash||q instanceof NodeList)){for(var k=[],w=0;w<q.length;w++)k.push(new N(q[w],z));B=k}return B}}]),T}();(function(T){T.Package?M={}:T.M={},M.jQueryLoaded=!!T.jQuery})(window),t.nodeType||(!e.nodeType&&e.exports&&(t=e.exports=M),t.default=M),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var v=function(T){M.keyDown=!0,(T.which===M.keys.TAB||T.which===M.keys.ARROW_DOWN||T.which===M.keys.ARROW_UP)&&(M.tabPressed=!0)},C=function(T){M.keyDown=!1,(T.which===M.keys.TAB||T.which===M.keys.ARROW_DOWN||T.which===M.keys.ARROW_UP)&&(M.tabPressed=!1)},I=function(T){M.keyDown&&document.body.classList.add("keyboard-focused")},D=function(T){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",v,!0),document.addEventListener("keyup",C,!0),document.addEventListener("focus",I,!0),document.addEventListener("blur",D,!0),M.initializeJqueryWrapper=function(T,H,N){jQuery.fn[H]=function(q){if(T.prototype[q]){var z=Array.prototype.slice.call(arguments,1);if(q.slice(0,3)==="get"){var B=this.first()[0][N];return B[q].apply(B,z)}return this.each(function(){var k=this[N];k[q].apply(k,z)})}else if(typeof q=="object"||!q)return T.init(this,arguments[0]),this;jQuery.error("Method "+q+" does not exist on jQuery."+H)}},M.AutoInit=function(T){var H=T||document.body,N={Autocomplete:H.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:H.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:H.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:H.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:H.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:H.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:H.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:H.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:H.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:H.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:H.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:H.querySelectorAll("select:not(.no-autoinit)"),Sidenav:H.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:H.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:H.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:H.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:H.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:H.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var q in N){var z=M[q];z.init(N[q])}},M.objectSelectorString=function(T){var H=T.prop("tagName")||"",N=T.attr("id")||"",q=T.attr("class")||"";return(H+N+q).replace(/\s/g,"")},M.guid=function(){function T(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return T()+T()+"-"+T()+"-"+T()+"-"+T()+"-"+T()+T()+T()}}(),M.escapeHash=function(T){return T.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(T){var H=$(T),N=H.add(H.parents()),q=!1;return N.each(function(){if($(this).css("position")==="fixed")return q=!0,!1}),q},M.checkWithinContainer=function(T,H,N){var q={top:!1,right:!1,bottom:!1,left:!1},z=T.getBoundingClientRect(),B=T===document.body?Math.max(z.bottom,window.innerHeight):z.bottom,k=T.scrollLeft,w=T.scrollTop,R=H.left-k,J=H.top-w;return(R<z.left+N||R<N)&&(q.left=!0),(R+H.width>z.right-N||R+H.width>window.innerWidth-N)&&(q.right=!0),(J<z.top+N||J<N)&&(q.top=!0),(J+H.height>B-N||J+H.height>window.innerHeight-N)&&(q.bottom=!0),q},M.checkPossibleAlignments=function(T,H,N,q){var z={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},B=getComputedStyle(H).overflow==="visible",k=H.getBoundingClientRect(),w=Math.min(k.height,window.innerHeight),R=Math.min(k.width,window.innerWidth),J=T.getBoundingClientRect(),ie=H.scrollLeft,ue=H.scrollTop,se=N.left-ie,_e=N.top-ue,Ue=N.top+J.height-ue;return z.spaceOnRight=B?window.innerWidth-(J.left+N.width):R-(se+N.width),z.spaceOnRight<0&&(z.left=!1),z.spaceOnLeft=B?J.right-N.width:se-N.width+J.width,z.spaceOnLeft<0&&(z.right=!1),z.spaceOnBottom=B?window.innerHeight-(J.top+N.height+q):w-(_e+N.height+q),z.spaceOnBottom<0&&(z.top=!1),z.spaceOnTop=B?J.bottom-(N.height+q):Ue-(N.height-q),z.spaceOnTop<0&&(z.bottom=!1),z},M.getOverflowParent=function(T){return T==null?null:T===document.body||getComputedStyle(T).overflow!=="visible"?T:M.getOverflowParent(T.parentElement)},M.getIdFromTrigger=function(T){var H=T.getAttribute("data-target");return H||(H=T.getAttribute("href"),H?H=H.slice(1):H=""),H},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};/**
 * Get time in ms
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @type {function}
 * @return {number}
 */var F=Date.now||function(){return new Date().getTime()};/**
 * Returns a function, that, when invoked, will only be triggered at most once
 * during a given window of time. Normally, the throttled function will run
 * as much as it can, without ever going more than once per `wait` duration;
 * but if you'd like to disable the execution on the leading edge, pass
 * `{leading: false}`. To disable execution on the trailing edge, ditto.
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @param {function} func
 * @param {number} wait
 * @param {Object=} options
 * @returns {Function}
 */M.throttle=function(T,H,N){var q=void 0,z=void 0,B=void 0,k=null,w=0;N||(N={});var R=function(){w=N.leading===!1?0:F(),k=null,B=T.apply(q,z),q=z=null};return function(){var J=F();!w&&N.leading===!1&&(w=J);var ie=H-(J-w);return q=this,z=arguments,ie<=0?(clearTimeout(k),k=null,w=J,B=T.apply(q,z),q=z=null):!k&&N.trailing!==!1&&(k=setTimeout(R,ie)),B}};var U={scope:{}};U.defineProperty=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,H,N){if(N.get||N.set)throw new TypeError("ES3 does not support getters and setters.");T!=Array.prototype&&T!=Object.prototype&&(T[H]=N.value)},U.getGlobal=function(T){return typeof window!="undefined"&&window===T?T:typeof zo!="undefined"&&zo!=null?zo:T},U.global=U.getGlobal(zo),U.SYMBOL_PREFIX="jscomp_symbol_",U.initSymbol=function(){U.initSymbol=function(){},U.global.Symbol||(U.global.Symbol=U.Symbol)},U.symbolCounter_=0,U.Symbol=function(T){return U.SYMBOL_PREFIX+(T||"")+U.symbolCounter_++},U.initSymbolIterator=function(){U.initSymbol();var T=U.global.Symbol.iterator;T||(T=U.global.Symbol.iterator=U.global.Symbol("iterator")),typeof Array.prototype[T]!="function"&&U.defineProperty(Array.prototype,T,{configurable:!0,writable:!0,value:function(){return U.arrayIterator(this)}}),U.initSymbolIterator=function(){}},U.arrayIterator=function(T){var H=0;return U.iteratorPrototype(function(){return H<T.length?{done:!1,value:T[H++]}:{done:!0}})},U.iteratorPrototype=function(T){return U.initSymbolIterator(),T={next:T},T[U.global.Symbol.iterator]=function(){return this},T},U.array=U.array||{},U.iteratorFromArray=function(T,H){U.initSymbolIterator(),T instanceof String&&(T+="");var N=0,q={next:function(){if(N<T.length){var z=N++;return{value:H(z,T[z]),done:!1}}return q.next=function(){return{done:!0,value:void 0}},q.next()}};return q[Symbol.iterator]=function(){return q},q},U.polyfill=function(T,H,N,q){if(H){for(N=U.global,T=T.split("."),q=0;q<T.length-1;q++){var z=T[q];z in N||(N[z]={}),N=N[z]}T=T[T.length-1],q=N[T],H=H(q),H!=q&&H!=null&&U.defineProperty(N,T,{configurable:!0,writable:!0,value:H})}},U.polyfill("Array.prototype.keys",function(T){return T||function(){return U.iteratorFromArray(this,function(H){return H})}},"es6-impl","es3");var j=zo;(function(T){M.anime=T()})(function(){function T(Ae){if(!ht.col(Ae))try{return document.querySelectorAll(Ae)}catch{}}function H(Ae,Ye){for(var re=Ae.length,ce=2<=arguments.length?arguments[1]:void 0,De=[],be=0;be<re;be++)if(be in Ae){var Te=Ae[be];Ye.call(ce,Te,be,Ae)&&De.push(Te)}return De}function N(Ae){return Ae.reduce(function(Ye,re){return Ye.concat(ht.arr(re)?N(re):re)},[])}function q(Ae){return ht.arr(Ae)?Ae:(ht.str(Ae)&&(Ae=T(Ae)||Ae),Ae instanceof NodeList||Ae instanceof HTMLCollection?[].slice.call(Ae):[Ae])}function z(Ae,Ye){return Ae.some(function(re){return re===Ye})}function B(Ae){var Ye={},re;for(re in Ae)Ye[re]=Ae[re];return Ye}function k(Ae,Ye){var re=B(Ae),ce;for(ce in Ae)re[ce]=Ye.hasOwnProperty(ce)?Ye[ce]:Ae[ce];return re}function w(Ae,Ye){var re=B(Ae),ce;for(ce in Ye)re[ce]=ht.und(Ae[ce])?Ye[ce]:Ae[ce];return re}function R(Ae){Ae=Ae.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(ce,De,be,Te){return De+De+be+be+Te+Te});var re=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Ae);Ae=parseInt(re[1],16);var Ye=parseInt(re[2],16),re=parseInt(re[3],16);return"rgba("+Ae+","+Ye+","+re+",1)"}function J(Ae){function Ye(mt,Bt,Kt){return 0>Kt&&(Kt+=1),1<Kt&&--Kt,Kt<1/6?mt+6*(Bt-mt)*Kt:.5>Kt?Bt:Kt<2/3?mt+(Bt-mt)*(2/3-Kt)*6:mt}var De=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(Ae)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(Ae);Ae=parseInt(De[1])/360;var re=parseInt(De[2])/100,ce=parseInt(De[3])/100,De=De[4]||1;if(re==0)ce=re=Ae=ce;else{var be=.5>ce?ce*(1+re):ce+re-ce*re,Te=2*ce-be,ce=Ye(Te,be,Ae+1/3),re=Ye(Te,be,Ae);Ae=Ye(Te,be,Ae-1/3)}return"rgba("+255*ce+","+255*re+","+255*Ae+","+De+")"}function ie(Ae){if(Ae=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(Ae))return Ae[2]}function ue(Ae){if(-1<Ae.indexOf("translate")||Ae==="perspective")return"px";if(-1<Ae.indexOf("rotate")||-1<Ae.indexOf("skew"))return"deg"}function se(Ae,Ye){return ht.fnc(Ae)?Ae(Ye.target,Ye.id,Ye.total):Ae}function _e(Ae,Ye){if(Ye in Ae.style)return getComputedStyle(Ae).getPropertyValue(Ye.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function Ue(Ae,Ye){if(ht.dom(Ae)&&z(St,Ye))return"transform";if(ht.dom(Ae)&&(Ae.getAttribute(Ye)||ht.svg(Ae)&&Ae[Ye]))return"attribute";if(ht.dom(Ae)&&Ye!=="transform"&&_e(Ae,Ye))return"css";if(Ae[Ye]!=null)return"object"}function je(Ae,Ye){var re=ue(Ye),re=-1<Ye.indexOf("scale")?1:0+re;if(Ae=Ae.style.transform,!Ae)return re;for(var ce=[],De=[],be=[],Te=/(\w+)\((.+?)\)/g;ce=Te.exec(Ae);)De.push(ce[1]),be.push(ce[2]);return Ae=H(be,function(mt,Bt){return De[Bt]===Ye}),Ae.length?Ae[0]:re}function Ne(Ae,Ye){switch(Ue(Ae,Ye)){case"transform":return je(Ae,Ye);case"css":return _e(Ae,Ye);case"attribute":return Ae.getAttribute(Ye)}return Ae[Ye]||0}function Ie(Ae,Ye){var re=/^(\*=|\+=|-=)/.exec(Ae);if(!re)return Ae;var ce=ie(Ae)||0;switch(Ye=parseFloat(Ye),Ae=parseFloat(Ae.replace(re[0],"")),re[0][0]){case"+":return Ye+Ae+ce;case"-":return Ye-Ae+ce;case"*":return Ye*Ae+ce}}function xt(Ae,Ye){return Math.sqrt(Math.pow(Ye.x-Ae.x,2)+Math.pow(Ye.y-Ae.y,2))}function We(Ae){Ae=Ae.points;for(var Ye=0,re,ce=0;ce<Ae.numberOfItems;ce++){var De=Ae.getItem(ce);0<ce&&(Ye+=xt(re,De)),re=De}return Ye}function Et(Ae){if(Ae.getTotalLength)return Ae.getTotalLength();switch(Ae.tagName.toLowerCase()){case"circle":return 2*Math.PI*Ae.getAttribute("r");case"rect":return 2*Ae.getAttribute("width")+2*Ae.getAttribute("height");case"line":return xt({x:Ae.getAttribute("x1"),y:Ae.getAttribute("y1")},{x:Ae.getAttribute("x2"),y:Ae.getAttribute("y2")});case"polyline":return We(Ae);case"polygon":var Ye=Ae.points;return We(Ae)+xt(Ye.getItem(Ye.numberOfItems-1),Ye.getItem(0))}}function ct(Ae,Ye){function re(Te){return Te=Te===void 0?0:Te,Ae.el.getPointAtLength(1<=Ye+Te?Ye+Te:0)}var ce=re(),De=re(-1),be=re(1);switch(Ae.property){case"x":return ce.x;case"y":return ce.y;case"angle":return 180*Math.atan2(be.y-De.y,be.x-De.x)/Math.PI}}function xe(Ae,Ye){var re=/-?\d*\.?\d+/g,ce;if(ce=ht.pth(Ae)?Ae.totalLength:Ae,ht.col(ce))if(ht.rgb(ce)){var De=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(ce);ce=De?"rgba("+De[1]+",1)":ce}else ce=ht.hex(ce)?R(ce):ht.hsl(ce)?J(ce):void 0;else De=(De=ie(ce))?ce.substr(0,ce.length-De.length):ce,ce=Ye&&!/\s/g.test(ce)?De+Ye:De;return ce+="",{original:ce,numbers:ce.match(re)?ce.match(re).map(Number):[0],strings:ht.str(Ae)||Ye?ce.split(re):[]}}function Ee(Ae){return Ae=Ae?N(ht.arr(Ae)?Ae.map(q):q(Ae)):[],H(Ae,function(Ye,re,ce){return ce.indexOf(Ye)===re})}function xn(Ae){var Ye=Ee(Ae);return Ye.map(function(re,ce){return{target:re,id:ce,total:Ye.length}})}function Qt(Ae,Ye){var re=B(Ye);if(ht.arr(Ae)){var ce=Ae.length;ce!==2||ht.obj(Ae[0])?ht.fnc(Ye.duration)||(re.duration=Ye.duration/ce):Ae={value:Ae}}return q(Ae).map(function(De,be){return be=be?0:Ye.delay,De=ht.obj(De)&&!ht.pth(De)?De:{value:De},ht.und(De.delay)&&(De.delay=be),De}).map(function(De){return w(De,re)})}function yn(Ae,Ye){var re={},ce;for(ce in Ae){var De=se(Ae[ce],Ye);ht.arr(De)&&(De=De.map(function(be){return se(be,Ye)}),De.length===1&&(De=De[0])),re[ce]=De}return re.duration=parseFloat(re.duration),re.delay=parseFloat(re.delay),re}function on(Ae){return ht.arr(Ae)?Nt.apply(this,Ae):wn[Ae]}function Sn(Ae,Ye){var re;return Ae.tweens.map(function(ce){ce=yn(ce,Ye);var De=ce.value,mt=Ne(Ye.target,Ae.name),be=re?re.to.original:mt,be=ht.arr(De)?De[0]:be,Te=Ie(ht.arr(De)?De[1]:De,be),mt=ie(Te)||ie(be)||ie(mt);return ce.from=xe(be,mt),ce.to=xe(Te,mt),ce.start=re?re.end:Ae.offset,ce.end=ce.start+ce.delay+ce.duration,ce.easing=on(ce.easing),ce.elasticity=(1e3-Math.min(Math.max(ce.elasticity,1),999))/1e3,ce.isPath=ht.pth(De),ce.isColor=ht.col(ce.from.original),ce.isColor&&(ce.round=1),re=ce})}function Nn(Ae,Ye){return H(N(Ae.map(function(re){return Ye.map(function(ce){var De=Ue(re.target,ce.name);if(De){var be=Sn(ce,re);ce={type:De,property:ce.name,animatable:re,tweens:be,duration:be[be.length-1].end,delay:be[0].delay}}else ce=void 0;return ce})})),function(re){return!ht.und(re)})}function bn(Ae,Ye,re,ce){var De=Ae==="delay";return Ye.length?(De?Math.min:Math.max).apply(Math,Ye.map(function(be){return be[Ae]})):De?ce.delay:re.offset+ce.delay+ce.duration}function kn(Ae){var Ye=k(Ke,Ae),re=k(pt,Ae),ce=xn(Ae.targets),De=[],be=w(Ye,re),Te;for(Te in Ae)be.hasOwnProperty(Te)||Te==="targets"||De.push({name:Te,offset:be.offset,tweens:Qt(Ae[Te],re)});return Ae=Nn(ce,De),w(Ye,{children:[],animatables:ce,animations:Ae,duration:bn("duration",Ae,Ye,re),delay:bn("delay",Ae,Ye,re)})}function Le(Ae){function Ye(){return window.Promise&&new Promise(function(Rn){return er=Rn})}function re(Rn){return $t.reversed?$t.duration-Rn:Rn}function ce(Rn){for(var br=0,Zn={},Ti=$t.animations,Jr=Ti.length;br<Jr;){var gi=Ti[br],yi=gi.animatable,Ai=gi.tweens,uo=Ai.length-1,wr=Ai[uo];uo&&(wr=H(Ai,function(te){return Rn<te.end})[0]||wr);for(var Ai=Math.min(Math.max(Rn-wr.start-wr.delay,0),wr.duration)/wr.duration,co=isNaN(Ai)?1:wr.easing(Ai,wr.elasticity),Ai=wr.to.strings,vi=wr.round,uo=[],Di=void 0,Di=wr.to.numbers.length,Eo=0;Eo<Di;Eo++){var ge=void 0,ge=wr.to.numbers[Eo],Pa=wr.from.numbers[Eo],ge=wr.isPath?ct(wr.value,co*ge):Pa+co*(ge-Pa);vi&&(wr.isColor&&2<Eo||(ge=Math.round(ge*vi)/vi)),uo.push(ge)}if(wr=Ai.length)for(Di=Ai[0],co=0;co<wr;co++)vi=Ai[co+1],Eo=uo[co],isNaN(Eo)||(Di=vi?Di+(Eo+vi):Di+(Eo+" "));else Di=uo[0];Gn[gi.type](yi.target,gi.property,Di,Zn,yi.id),gi.currentValue=Di,br++}if(br=Object.keys(Zn).length)for(Ti=0;Ti<br;Ti++)Ft||(Ft=_e(document.body,"transform")?"transform":"-webkit-transform"),$t.animatables[Ti].target.style[Ft]=Zn[Ti].join(" ");$t.currentTime=Rn,$t.progress=Rn/$t.duration*100}function De(Rn){$t[Rn]&&$t[Rn]($t)}function be(){$t.remaining&&$t.remaining!==!0&&$t.remaining--}function Te(Rn){var br=$t.duration,Zn=$t.offset,Ti=Zn+$t.delay,Jr=$t.currentTime,gi=$t.reversed,yi=re(Rn);if($t.children.length){var Ai=$t.children,uo=Ai.length;if(yi>=$t.currentTime)for(var wr=0;wr<uo;wr++)Ai[wr].seek(yi);else for(;uo--;)Ai[uo].seek(yi)}(yi>=Ti||!br)&&($t.began||($t.began=!0,De("begin")),De("run")),yi>Zn&&yi<br?ce(yi):(yi<=Zn&&Jr!==0&&(ce(0),gi&&be()),(yi>=br&&Jr!==br||!br)&&(ce(br),gi||be())),De("update"),Rn>=br&&($t.remaining?(Bt=mt,$t.direction==="alternate"&&($t.reversed=!$t.reversed)):($t.pause(),$t.completed||($t.completed=!0,De("complete"),"Promise"in window&&(er(),In=Ye()))),Kt=0)}Ae=Ae===void 0?{}:Ae;var mt,Bt,Kt=0,er=null,In=Ye(),$t=kn(Ae);return $t.reset=function(){var Rn=$t.direction,br=$t.loop;for($t.currentTime=0,$t.progress=0,$t.paused=!0,$t.began=!1,$t.completed=!1,$t.reversed=Rn==="reverse",$t.remaining=Rn==="alternate"&&br===1?2:br,ce(0),Rn=$t.children.length;Rn--;)$t.children[Rn].reset()},$t.tick=function(Rn){mt=Rn,Bt||(Bt=mt),Te((Kt+mt-Bt)*Le.speed)},$t.seek=function(Rn){Te(re(Rn))},$t.pause=function(){var Rn=qn.indexOf($t);-1<Rn&&qn.splice(Rn,1),$t.paused=!0},$t.play=function(){$t.paused&&($t.paused=!1,Bt=0,Kt=re($t.currentTime),qn.push($t),Un||xr())},$t.reverse=function(){$t.reversed=!$t.reversed,Bt=0,Kt=re($t.currentTime)},$t.restart=function(){$t.pause(),$t.reset(),$t.play()},$t.finished=In,$t.reset(),$t.autoplay&&$t.play(),$t}var Ke={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},pt={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},St="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),Ft,ht={arr:function(Ae){return Array.isArray(Ae)},obj:function(Ae){return-1<Object.prototype.toString.call(Ae).indexOf("Object")},pth:function(Ae){return ht.obj(Ae)&&Ae.hasOwnProperty("totalLength")},svg:function(Ae){return Ae instanceof SVGElement},dom:function(Ae){return Ae.nodeType||ht.svg(Ae)},str:function(Ae){return typeof Ae=="string"},fnc:function(Ae){return typeof Ae=="function"},und:function(Ae){return typeof Ae=="undefined"},hex:function(Ae){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(Ae)},rgb:function(Ae){return/^rgb/.test(Ae)},hsl:function(Ae){return/^hsl/.test(Ae)},col:function(Ae){return ht.hex(Ae)||ht.rgb(Ae)||ht.hsl(Ae)}},Nt=function(){function Ae(Ye,re,ce){return(((1-3*ce+3*re)*Ye+(3*ce-6*re))*Ye+3*re)*Ye}return function(Ye,re,ce,De){if(0<=Ye&&1>=Ye&&0<=ce&&1>=ce){var be=new Float32Array(11);if(Ye!==re||ce!==De)for(var Te=0;11>Te;++Te)be[Te]=Ae(.1*Te,Ye,ce);return function(mt){if(Ye===re&&ce===De)return mt;if(mt===0)return 0;if(mt===1)return 1;for(var Bt=0,Kt=1;Kt!==10&&be[Kt]<=mt;++Kt)Bt+=.1;--Kt;var Kt=Bt+(mt-be[Kt])/(be[Kt+1]-be[Kt])*.1,er=3*(1-3*ce+3*Ye)*Kt*Kt+2*(3*ce-6*Ye)*Kt+3*Ye;if(.001<=er){for(Bt=0;4>Bt&&(er=3*(1-3*ce+3*Ye)*Kt*Kt+2*(3*ce-6*Ye)*Kt+3*Ye,er!==0);++Bt)var In=Ae(Kt,Ye,ce)-mt,Kt=Kt-In/er;mt=Kt}else if(er===0)mt=Kt;else{var Kt=Bt,Bt=Bt+.1,$t=0;do In=Kt+(Bt-Kt)/2,er=Ae(In,Ye,ce)-mt,0<er?Bt=In:Kt=In;while(1e-7<Math.abs(er)&&10>++$t);mt=In}return Ae(mt,re,De)}}}}(),wn=function(){function Ae(Te,mt){return Te===0||Te===1?Te:-Math.pow(2,10*(Te-1))*Math.sin(2*(Te-1-mt/(2*Math.PI)*Math.asin(1))*Math.PI/mt)}var Ye="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),re={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],Ae],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(Te,mt){return 1-Ae(1-Te,mt)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(Te,mt){return .5>Te?Ae(2*Te,mt)/2:1-Ae(-2*Te+2,mt)/2}]},ce={linear:Nt(.25,.25,.75,.75)},De={},be;for(be in re)De.type=be,re[De.type].forEach(function(Te){return function(mt,Bt){ce["ease"+Te.type+Ye[Bt]]=ht.fnc(mt)?mt:Nt.apply(j,mt)}}(De)),De={type:De.type};return ce}(),Gn={css:function(Ae,Ye,re){return Ae.style[Ye]=re},attribute:function(Ae,Ye,re){return Ae.setAttribute(Ye,re)},object:function(Ae,Ye,re){return Ae[Ye]=re},transform:function(Ae,Ye,re,ce,De){ce[De]||(ce[De]=[]),ce[De].push(Ye+"("+re+")")}},qn=[],Un=0,xr=function(){function Ae(){Un=requestAnimationFrame(Ye)}function Ye(re){var ce=qn.length;if(ce){for(var De=0;De<ce;)qn[De]&&qn[De].tick(re),De++;Ae()}else cancelAnimationFrame(Un),Un=0}return Ae}();return Le.version="2.2.0",Le.speed=1,Le.running=qn,Le.remove=function(Ae){Ae=Ee(Ae);for(var Ye=qn.length;Ye--;)for(var re=qn[Ye],ce=re.animations,De=ce.length;De--;)z(Ae,ce[De].animatable.target)&&(ce.splice(De,1),ce.length||re.pause())},Le.getValue=Ne,Le.path=function(Ae,Ye){var re=ht.str(Ae)?T(Ae)[0]:Ae,ce=Ye||100;return function(De){return{el:re,property:De,totalLength:Et(re)*(ce/100)}}},Le.setDashoffset=function(Ae){var Ye=Et(Ae);return Ae.setAttribute("stroke-dasharray",Ye),Ye},Le.bezier=Nt,Le.easings=wn,Le.timeline=function(Ae){var Ye=Le(Ae);return Ye.pause(),Ye.duration=0,Ye.add=function(re){return Ye.children.forEach(function(ce){ce.began=!0,ce.completed=!0}),q(re).forEach(function(ce){var De=w(ce,k(pt,Ae||{}));De.targets=De.targets||Ae.targets,ce=Ye.duration;var be=De.offset;De.autoplay=!1,De.direction=Ye.direction,De.offset=ht.und(be)?ce:Ie(be,ce),Ye.began=!0,Ye.completed=!0,Ye.seek(De.offset),De=Le(De),De.began=!0,De.completed=!0,De.duration>ce&&(Ye.duration=De.duration),Ye.children.push(De)}),Ye.seek(0),Ye.reset(),Ye.autoplay&&Ye.restart(),Ye},Ye},Le.random=function(Ae,Ye){return Math.floor(Math.random()*(Ye-Ae+1))+Ae},Le}),function(T,H){var N={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));R.el.M_Collapsible=R,R.options=T.extend({},B.defaults,w),R.$headers=R.$el.children("li").children(".collapsible-header"),R.$headers.attr("tabindex",0),R._setupEventHandlers();var J=R.$el.children("li.active").children(".collapsible-body");return R.options.accordion?J.first().css("display","block"):J.css("display","block"),R}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var w=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(R){R.addEventListener("keydown",w._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var w=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(R){R.removeEventListener("keydown",w._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(w){var R=T(w.target).closest(".collapsible-header");if(w.target&&R.length){var J=R.closest(".collapsible");if(J[0]===this.el){var ie=R.closest("li"),ue=J.children("li"),se=ie[0].classList.contains("active"),_e=ue.index(ie);se?this.close(_e):this.open(_e)}}}},{key:"_handleCollapsibleKeydown",value:function(w){w.keyCode===13&&this._handleCollapsibleClickBound(w)}},{key:"_animateIn",value:function(w){var R=this,J=this.$el.children("li").eq(w);if(J.length){var ie=J.children(".collapsible-body");H.remove(ie[0]),ie.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var ue=ie.css("padding-top"),se=ie.css("padding-bottom"),_e=ie[0].scrollHeight;ie.css({paddingTop:0,paddingBottom:0}),H({targets:ie[0],height:_e,paddingTop:ue,paddingBottom:se,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(Ue){ie.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),typeof R.options.onOpenEnd=="function"&&R.options.onOpenEnd.call(R,J[0])}})}}},{key:"_animateOut",value:function(w){var R=this,J=this.$el.children("li").eq(w);if(J.length){var ie=J.children(".collapsible-body");H.remove(ie[0]),ie.css("overflow","hidden"),H({targets:ie[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){ie.css({height:"",overflow:"",padding:"",display:""}),typeof R.options.onCloseEnd=="function"&&R.options.onCloseEnd.call(R,J[0])}})}}},{key:"open",value:function(w){var R=this,J=this.$el.children("li").eq(w);if(J.length&&!J[0].classList.contains("active")){if(typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,J[0]),this.options.accordion){var ie=this.$el.children("li"),ue=this.$el.children("li.active");ue.each(function(se){var _e=ie.index(T(se));R.close(_e)})}J[0].classList.add("active"),this._animateIn(w)}}},{key:"close",value:function(w){var R=this.$el.children("li").eq(w);R.length&&R[0].classList.contains("active")&&(typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,R[0]),R[0].classList.remove("active"),this._animateOut(w))}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Collapsible}},{key:"defaults",get:function(){return N}}]),B}(o);M.Collapsible=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"collapsible","M_Collapsible")}(cash,M.anime),function(T,H){var N={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_Dropdown=R,B._dropdowns.push(R),R.id=M.getIdFromTrigger(k),R.dropdownEl=document.getElementById(R.id),R.$dropdownEl=T(R.dropdownEl),R.options=T.extend({},B.defaults,w),R.isOpen=!1,R.isScrollable=!1,R.isTouchMoving=!1,R.focusedIndex=-1,R.filterQuery=[],R.options.container?T(R.options.container).append(R.dropdownEl):R.$el.after(R.dropdownEl),R._makeDropdownFocusable(),R._resetFilterQueryBound=R._resetFilterQuery.bind(R),R._handleDocumentClickBound=R._handleDocumentClick.bind(R),R._handleDocumentTouchmoveBound=R._handleDocumentTouchmove.bind(R),R._handleDropdownClickBound=R._handleDropdownClick.bind(R),R._handleDropdownKeydownBound=R._handleDropdownKeydown.bind(R),R._handleTriggerKeydownBound=R._handleTriggerKeydown.bind(R),R._setupEventHandlers(),R}return r(B,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),B._dropdowns.splice(B._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(w){w.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(w){var R=w.toElement||w.relatedTarget,J=!!T(R).closest(".dropdown-content").length,ie=!1,ue=T(R).closest(".dropdown-trigger");ue.length&&!!ue[0].M_Dropdown&&ue[0].M_Dropdown.isOpen&&(ie=!0),!ie&&!J&&this.close()}},{key:"_handleDocumentClick",value:function(w){var R=this,J=T(w.target);this.options.closeOnClick&&J.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){R.close()},0):(J.closest(".dropdown-trigger").length||!J.closest(".dropdown-content").length)&&setTimeout(function(){R.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(w){(w.which===M.keys.ARROW_DOWN||w.which===M.keys.ENTER)&&!this.isOpen&&(w.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(w){var R=T(w.target);R.closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(w){if(typeof this.options.onItemClick=="function"){var R=T(w.target).closest("li")[0];this.options.onItemClick.call(this,R)}}},{key:"_handleDropdownKeydown",value:function(w){if(w.which===M.keys.TAB)w.preventDefault(),this.close();else if((w.which===M.keys.ARROW_DOWN||w.which===M.keys.ARROW_UP)&&this.isOpen){w.preventDefault();var R=w.which===M.keys.ARROW_DOWN?1:-1,J=this.focusedIndex,ie=!1;do if(J=J+R,!!this.dropdownEl.children[J]&&this.dropdownEl.children[J].tabIndex!==-1){ie=!0;break}while(J<this.dropdownEl.children.length&&J>=0);ie&&(this.focusedIndex=J,this._focusFocusedItem())}else if(w.which===M.keys.ENTER&&this.isOpen){var ue=this.dropdownEl.children[this.focusedIndex],se=T(ue).find("a, button").first();se.length?se[0].click():ue&&ue.click()}else w.which===M.keys.ESC&&this.isOpen&&(w.preventDefault(),this.close());var _e=String.fromCharCode(w.which).toLowerCase(),Ue=[9,13,27,38,40];if(_e&&Ue.indexOf(w.which)===-1){this.filterQuery.push(_e);var je=this.filterQuery.join(""),Ne=T(this.dropdownEl).find("li").filter(function(Ie){return T(Ie).text().toLowerCase().indexOf(je)===0})[0];Ne&&(this.focusedIndex=T(Ne).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,T(this.dropdownEl).children().each(function(w){w.getAttribute("tabindex")||w.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var w=this.el.getBoundingClientRect(),R=this.dropdownEl.getBoundingClientRect(),J=R.height,ie=R.width,ue=w.left-R.left,se=w.top-R.top,_e={left:ue,top:se,height:J,width:ie},Ue=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,je=M.checkPossibleAlignments(this.el,Ue,_e,this.options.coverTrigger?0:w.height),Ne="top",Ie=this.options.alignment;if(se+=this.options.coverTrigger?0:w.height,this.isScrollable=!1,je.top||(je.bottom?Ne="bottom":(this.isScrollable=!0,je.spaceOnTop>je.spaceOnBottom?(Ne="bottom",J+=je.spaceOnTop,se-=je.spaceOnTop):J+=je.spaceOnBottom)),!je[Ie]){var xt=Ie==="left"?"right":"left";je[xt]?Ie=xt:je.spaceOnLeft>je.spaceOnRight?(Ie="right",ie+=je.spaceOnLeft,ue-=je.spaceOnLeft):(Ie="left",ie+=je.spaceOnRight)}return Ne==="bottom"&&(se=se-R.height+(this.options.coverTrigger?w.height:0)),Ie==="right"&&(ue=ue-R.width+w.width),{x:ue,y:se,verticalAlignment:Ne,horizontalAlignment:Ie,height:J,width:ie}}},{key:"_animateIn",value:function(){var w=this;H.remove(this.dropdownEl),H({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(R){w.options.autoFocus&&w.dropdownEl.focus(),typeof w.options.onOpenEnd=="function"&&w.options.onOpenEnd.call(w,w.el)}})}},{key:"_animateOut",value:function(){var w=this;H.remove(this.dropdownEl),H({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(R){w._resetDropdownStyles(),typeof w.options.onCloseEnd=="function"&&w.options.onCloseEnd.call(w,w.el)}})}},{key:"_placeDropdown",value:function(){var w=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=w+"px";var R=this._getDropdownPosition();this.dropdownEl.style.left=R.x+"px",this.dropdownEl.style.top=R.y+"px",this.dropdownEl.style.height=R.height+"px",this.dropdownEl.style.width=R.width+"px",this.dropdownEl.style.transformOrigin=(R.horizontalAlignment==="left"?"0":"100%")+" "+(R.verticalAlignment==="top"?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){!this.isOpen||(this.isOpen=!1,this.focusedIndex=-1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Dropdown}},{key:"defaults",get:function(){return N}}]),B}(o);q._dropdowns=[],M.Dropdown=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"dropdown","M_Dropdown")}(cash,M.anime),function(T,H){var N={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_Modal=R,R.options=T.extend({},B.defaults,w),R.isOpen=!1,R.id=R.$el.attr("id"),R._openingTrigger=void 0,R.$overlay=T('<div class="modal-overlay"></div>'),R.el.tabIndex=0,R._nthModalOpened=0,B._count++,R._setupEventHandlers(),R}return r(B,[{key:"destroy",value:function(){B._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),B._count===1&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){B._count===0&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(w){var R=T(w.target).closest(".modal-trigger");if(R.length){var J=M.getIdFromTrigger(R[0]),ie=document.getElementById(J).M_Modal;ie&&ie.open(R),w.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(w){var R=T(w.target).closest(".modal-close");R.length&&this.close()}},{key:"_handleKeydown",value:function(w){w.keyCode===27&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(w){!this.el.contains(w.target)&&this._nthModalOpened===B._modalsOpen&&this.el.focus()}},{key:"_animateIn",value:function(){var w=this;T.extend(this.el.style,{display:"block",opacity:0}),T.extend(this.$overlay[0].style,{display:"block",opacity:0}),H({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var R={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){typeof w.options.onOpenEnd=="function"&&w.options.onOpenEnd.call(w,w.el,w._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(T.extend(R,{bottom:0,opacity:1}),H(R)):(T.extend(R,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),H(R))}},{key:"_animateOut",value:function(){var w=this;H({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var R={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){w.el.style.display="none",w.$overlay.remove(),typeof w.options.onCloseEnd=="function"&&w.options.onCloseEnd.call(w,w.el)}};this.el.classList.contains("bottom-sheet")?(T.extend(R,{bottom:"-100%",opacity:0}),H(R)):(T.extend(R,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),H(R))}},{key:"open",value:function(w){if(!this.isOpen)return this.isOpen=!0,B._modalsOpen++,this._nthModalOpened=B._modalsOpen,this.$overlay[0].style.zIndex=1e3+B._modalsOpen*2,this.el.style.zIndex=1e3+B._modalsOpen*2+1,this._openingTrigger=w?w[0]:void 0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),H.remove(this.el),H.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(!!this.isOpen)return this.isOpen=!1,B._modalsOpen--,this._nthModalOpened=0,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),B._modalsOpen===0&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),H.remove(this.el),H.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Modal}},{key:"defaults",get:function(){return N}}]),B}(o);q._modalsOpen=0,q._count=0,M.Modal=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"modal","M_Modal")}(cash,M.anime),function(T,H){var N={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_Materialbox=R,R.options=T.extend({},B.defaults,w),R.overlayActive=!1,R.doneAnimating=!0,R.placeholder=T("<div></div>").addClass("material-placeholder"),R.originalWidth=0,R.originalHeight=0,R.originInlineStyles=R.$el.attr("style"),R.caption=R.el.getAttribute("data-caption")||"",R.$el.before(R.placeholder),R.placeholder.append(R.$el),R._setupEventHandlers(),R}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,T(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(w){this.doneAnimating===!1||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(w){w.keyCode===27&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=T();for(var w=this.placeholder[0].parentNode;w!==null&&!T(w).is(document);){var R=T(w);R.css("overflow")!=="visible"&&(R.css("overflow","visible"),this.ancestorsChanged===void 0?this.ancestorsChanged=R:this.ancestorsChanged=this.ancestorsChanged.add(R)),w=w.parentNode}}},{key:"_animateImageIn",value:function(){var w=this,R={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){w.doneAnimating=!0,typeof w.options.onOpenEnd=="function"&&w.options.onOpenEnd.call(w,w.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),this.maxWidth!=="none"&&(R.maxWidth=this.newWidth),this.maxHeight!=="none"&&(R.maxHeight=this.newHeight),H(R)}},{key:"_animateImageOut",value:function(){var w=this,R={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){w.placeholder.css({height:"",width:"",position:"",top:"",left:""}),w.attrWidth&&w.$el.attr("width",w.attrWidth),w.attrHeight&&w.$el.attr("height",w.attrHeight),w.$el.removeAttr("style"),w.originInlineStyles&&w.$el.attr("style",w.originInlineStyles),w.$el.removeClass("active"),w.doneAnimating=!0,w.ancestorsChanged.length&&w.ancestorsChanged.css("overflow",""),typeof w.options.onCloseEnd=="function"&&w.options.onCloseEnd.call(w,w.el)}};H(R)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var w=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=T('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){w.doneAnimating&&w.close()}),this.$el.before(this.$overlay);var R=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*R.left+"px",top:-1*R.top+"px"}),H.remove(this.el),H.remove(this.$overlay[0]),H({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),this.caption!==""&&(this.$photocaption&&H.remove(this.$photoCaption[0]),this.$photoCaption=T('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),T("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),H({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var J=0,ie=this.originalWidth/this.windowWidth,ue=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,ie>ue?(J=this.originalHeight/this.originalWidth,this.newWidth=this.windowWidth*.9,this.newHeight=this.windowWidth*.9*J):(J=this.originalWidth/this.originalHeight,this.newWidth=this.windowHeight*.9*J,this.newHeight=this.windowHeight*.9),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var w=this;this._updateVars(),this.doneAnimating=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),H.remove(this.el),H.remove(this.$overlay[0]),this.caption!==""&&H.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),H({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){w.overlayActive=!1,w.$overlay.remove()}}),this._animateImageOut(),this.caption!==""&&H({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){w.$photoCaption.remove()}})}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Materialbox}},{key:"defaults",get:function(){return N}}]),B}(o);M.Materialbox=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"materialbox","M_Materialbox")}(cash,M.anime),function(T){var H={responsiveThreshold:0},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.el.M_Parallax=w,w.options=T.extend({},z.defaults,k),w._enabled=window.innerWidth>w.options.responsiveThreshold,w.$img=w.$el.find("img").first(),w.$img.each(function(){var R=this;R.complete&&T(R).trigger("load")}),w._updateParallax(),w._setupEventHandlers(),w._setupStyles(),z._parallaxes.push(w),w}return r(z,[{key:"destroy",value:function(){z._parallaxes.splice(z._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),z._parallaxes.length===0&&(z._handleScrollThrottled=M.throttle(z._handleScroll,5),window.addEventListener("scroll",z._handleScrollThrottled),z._handleWindowResizeThrottled=M.throttle(z._handleWindowResize,5),window.addEventListener("resize",z._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),z._parallaxes.length===0&&(window.removeEventListener("scroll",z._handleScrollThrottled),window.removeEventListener("resize",z._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var k=this.$el.height()>0?this.el.parentNode.offsetHeight:500,w=this.$img[0].offsetHeight,R=w-k,J=this.$el.offset().top+k,ie=this.$el.offset().top,ue=M.getDocumentScrollTop(),se=window.innerHeight,_e=ue+se,Ue=(_e-ie)/(k+se),je=R*Ue;this._enabled?J>ue&&ie<ue+se&&(this.$img[0].style.transform="translate3D(-50%, "+je+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_Parallax}},{key:"_handleScroll",value:function(){for(var k=0;k<z._parallaxes.length;k++){var w=z._parallaxes[k];w._updateParallax.call(w)}}},{key:"_handleWindowResize",value:function(){for(var k=0;k<z._parallaxes.length;k++){var w=z._parallaxes[k];w._enabled=window.innerWidth>w.options.responsiveThreshold}}},{key:"defaults",get:function(){return H}}]),z}(o);N._parallaxes=[],M.Parallax=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"parallax","M_Parallax")}(cash),function(T,H){var N={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_Tabs=R,R.options=T.extend({},B.defaults,w),R.$tabLinks=R.$el.children("li.tab").children("a"),R.index=0,R._setupActiveTabLink(),R.options.swipeable?R._setupSwipeableTabs():R._setupNormalTabs(),R._setTabsAndTabWidth(),R._createIndicator(),R._setupEventHandlers(),R}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),this.tabWidth!==0&&this.tabsWidth!==0&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(w){var R=this,J=T(w.target).closest("li.tab"),ie=T(w.target).closest("a");if(!(!ie.length||!ie.parent().hasClass("tab"))){if(J.hasClass("disabled")){w.preventDefault();return}if(!ie.attr("target")){this.$activeTabLink.removeClass("active");var ue=this.$content;this.$activeTabLink=ie,this.$content=T(M.escapeHash(ie[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var se=this.index;this.index=Math.max(this.$tabLinks.index(ie),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){typeof R.options.onShow=="function"&&R.options.onShow.call(R,R.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),typeof this.options.onShow=="function"&&this.options.onShow.call(this,this.$content[0]),ue.length&&!ue.is(this.$content)&&(ue[0].style.display="none",ue.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(se),w.preventDefault()}}}},{key:"_createIndicator",value:function(){var w=this,R=document.createElement("li");R.classList.add("indicator"),this.el.appendChild(R),this._indicator=R,setTimeout(function(){w._indicator.style.left=w._calcLeftPos(w.$activeTabLink)+"px",w._indicator.style.right=w._calcRightPos(w.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=T(this.$tabLinks.filter('[href="'+location.hash+'"]')),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=T(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var w=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var R=T();this.$tabLinks.each(function(ue){var se=T(M.escapeHash(ue.hash));se.addClass("carousel-item"),R=R.add(se)});var J=T('<div class="tabs-content carousel carousel-slider"></div>');R.first().before(J),J.append(R),R[0].style.display="";var ie=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(J[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(ue){var se=w.index;w.index=T(ue).index(),w.$activeTabLink.removeClass("active"),w.$activeTabLink=w.$tabLinks.eq(w.index),w.$activeTabLink.addClass("active"),w._animateIndicator(se),typeof w.options.onShow=="function"&&w.options.onShow.call(w,w.$content[0])}}),this._tabsCarousel.set(ie)}},{key:"_teardownSwipeableTabs",value:function(){var w=this._tabsCarousel.$el;this._tabsCarousel.destroy(),w.after(w.children()),w.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(w){if(w.hash){var R=T(M.escapeHash(w.hash));R.length&&(R[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(w){if(w.hash){var R=T(M.escapeHash(w.hash));R.length&&(R[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(w){return Math.ceil(this.tabsWidth-w.position().left-w[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(w){return Math.floor(w.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(w){var R=0,J=0;this.index-w>=0?R=90:J=90;var ie={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:R},right:{value:this._calcRightPos(this.$activeTabLink),delay:J},duration:this.options.duration,easing:"easeOutQuad"};H.remove(this._indicator),H(ie)}},{key:"select",value:function(w){var R=this.$tabLinks.filter('[href="#'+w+'"]');R.length&&R.trigger("click")}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Tabs}},{key:"defaults",get:function(){return N}}]),B}(o);M.Tabs=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"tabs","M_Tabs")}(cash,M.anime),function(T,H){var N={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_Tooltip=R,R.options=T.extend({},B.defaults,w),R.isOpen=!1,R.isHovered=!1,R.isFocused=!1,R._appendTooltipEl(),R._setupEventHandlers(),R}return r(B,[{key:"destroy",value:function(){T(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var w=document.createElement("div");w.classList.add("material-tooltip"),this.tooltipEl=w;var R=document.createElement("div");R.classList.add("tooltip-content"),R.innerHTML=this.options.html,w.appendChild(R),document.body.appendChild(w)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(w){this.isOpen||(w=w===void 0?!0:void 0,this.isOpen=!0,this.options=T.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(w))}},{key:"close",value:function(){!this.isOpen||(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var w=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){w.isHovered||w.isFocused||w._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(w){var R=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){!R.isHovered&&!R.isFocused&&!w||R._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var w=this.el,R=this.tooltipEl,J=w.offsetHeight,ie=w.offsetWidth,ue=R.offsetHeight,se=R.offsetWidth,_e=void 0,Ue=this.options.margin,je=void 0,Ne=void 0;this.xMovement=0,this.yMovement=0,je=w.getBoundingClientRect().top+M.getDocumentScrollTop(),Ne=w.getBoundingClientRect().left+M.getDocumentScrollLeft(),this.options.position==="top"?(je+=-ue-Ue,Ne+=ie/2-se/2,this.yMovement=-this.options.transitionMovement):this.options.position==="right"?(je+=J/2-ue/2,Ne+=ie+Ue,this.xMovement=this.options.transitionMovement):this.options.position==="left"?(je+=J/2-ue/2,Ne+=-se-Ue,this.xMovement=-this.options.transitionMovement):(je+=J+Ue,Ne+=ie/2-se/2,this.yMovement=this.options.transitionMovement),_e=this._repositionWithinScreen(Ne,je,se,ue),T(R).css({top:_e.y+"px",left:_e.x+"px"})}},{key:"_repositionWithinScreen",value:function(w,R,J,ie){var ue=M.getDocumentScrollLeft(),se=M.getDocumentScrollTop(),_e=w-ue,Ue=R-se,je={left:_e,top:Ue,width:J,height:ie},Ne=this.options.margin+this.options.transitionMovement,Ie=M.checkWithinContainer(document.body,je,Ne);return Ie.left?_e=Ne:Ie.right&&(_e-=_e+J-window.innerWidth),Ie.top?Ue=Ne:Ie.bottom&&(Ue-=Ue+ie-window.innerHeight),{x:_e+ue,y:Ue+se}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",H.remove(this.tooltipEl),H({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){H.remove(this.tooltipEl),H({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var w={},R=this.el.getAttribute("data-tooltip"),J=this.el.getAttribute("data-position");return R&&(w.html=R),J&&(w.position=J),w}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Tooltip}},{key:"defaults",get:function(){return N}}]),B}(o);M.Tooltip=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"tooltip","M_Tooltip")}(cash,M.anime),function(T){var H=H||{},N=document.querySelectorAll.bind(document);function q(ue){return ue!==null&&ue===ue.window}function z(ue){return q(ue)?ue:ue.nodeType===9&&ue.defaultView}function B(ue){var se,_e,Ue={top:0,left:0},je=ue&&ue.ownerDocument;return se=je.documentElement,typeof ue.getBoundingClientRect!="undefined"&&(Ue=ue.getBoundingClientRect()),_e=z(je),{top:Ue.top+_e.pageYOffset-se.clientTop,left:Ue.left+_e.pageXOffset-se.clientLeft}}function k(ue){var se="";for(var _e in ue)ue.hasOwnProperty(_e)&&(se+=_e+":"+ue[_e]+";");return se}var w={duration:750,show:function(ue,se){if(ue.button===2)return!1;var _e=se||this,Ue=document.createElement("div");Ue.className="waves-ripple",_e.appendChild(Ue);var je=B(_e),Ne=ue.pageY-je.top,Ie=ue.pageX-je.left,xt="scale("+_e.clientWidth/100*10+")";"touches"in ue&&(Ne=ue.touches[0].pageY-je.top,Ie=ue.touches[0].pageX-je.left),Ue.setAttribute("data-hold",Date.now()),Ue.setAttribute("data-scale",xt),Ue.setAttribute("data-x",Ie),Ue.setAttribute("data-y",Ne);var We={top:Ne+"px",left:Ie+"px"};Ue.className=Ue.className+" waves-notransition",Ue.setAttribute("style",k(We)),Ue.className=Ue.className.replace("waves-notransition",""),We["-webkit-transform"]=xt,We["-moz-transform"]=xt,We["-ms-transform"]=xt,We["-o-transform"]=xt,We.transform=xt,We.opacity="1",We["-webkit-transition-duration"]=w.duration+"ms",We["-moz-transition-duration"]=w.duration+"ms",We["-o-transition-duration"]=w.duration+"ms",We["transition-duration"]=w.duration+"ms",We["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",We["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",We["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",We["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Ue.setAttribute("style",k(We))},hide:function(ue){R.touchup(ue);var se=this;se.clientWidth*1.4;var _e=null,Ue=se.getElementsByClassName("waves-ripple");if(Ue.length>0)_e=Ue[Ue.length-1];else return!1;var je=_e.getAttribute("data-x"),Ne=_e.getAttribute("data-y"),Ie=_e.getAttribute("data-scale"),xt=Date.now()-Number(_e.getAttribute("data-hold")),We=350-xt;We<0&&(We=0),setTimeout(function(){var Et={top:Ne+"px",left:je+"px",opacity:"0","-webkit-transition-duration":w.duration+"ms","-moz-transition-duration":w.duration+"ms","-o-transition-duration":w.duration+"ms","transition-duration":w.duration+"ms","-webkit-transform":Ie,"-moz-transform":Ie,"-ms-transform":Ie,"-o-transform":Ie,transform:Ie};_e.setAttribute("style",k(Et)),setTimeout(function(){try{se.removeChild(_e)}catch{return!1}},w.duration)},We)},wrapInput:function(ue){for(var se=0;se<ue.length;se++){var _e=ue[se];if(_e.tagName.toLowerCase()==="input"){var Ue=_e.parentNode;if(Ue.tagName.toLowerCase()==="i"&&Ue.className.indexOf("waves-effect")!==-1)continue;var je=document.createElement("i");je.className=_e.className+" waves-input-wrapper";var Ne=_e.getAttribute("style");Ne||(Ne=""),je.setAttribute("style",Ne),_e.className="waves-button-input",_e.removeAttribute("style"),Ue.replaceChild(je,_e),je.appendChild(_e)}}}},R={touches:0,allowEvent:function(ue){var se=!0;return ue.type==="touchstart"?R.touches+=1:ue.type==="touchend"||ue.type==="touchcancel"?setTimeout(function(){R.touches>0&&(R.touches-=1)},500):ue.type==="mousedown"&&R.touches>0&&(se=!1),se},touchup:function(ue){R.allowEvent(ue)}};function J(ue){if(R.allowEvent(ue)===!1)return null;for(var se=null,_e=ue.target||ue.srcElement;_e.parentNode!==null;){if(!(_e instanceof SVGElement)&&_e.className.indexOf("waves-effect")!==-1){se=_e;break}_e=_e.parentNode}return se}function ie(ue){var se=J(ue);se!==null&&(w.show(ue,se),"ontouchstart"in T&&(se.addEventListener("touchend",w.hide,!1),se.addEventListener("touchcancel",w.hide,!1)),se.addEventListener("mouseup",w.hide,!1),se.addEventListener("mouseleave",w.hide,!1),se.addEventListener("dragend",w.hide,!1))}H.displayEffect=function(ue){ue=ue||{},"duration"in ue&&(w.duration=ue.duration),w.wrapInput(N(".waves-effect")),"ontouchstart"in T&&document.body.addEventListener("touchstart",ie,!1),document.body.addEventListener("mousedown",ie,!1)},H.attach=function(ue){ue.tagName.toLowerCase()==="input"&&(w.wrapInput([ue]),ue=ue.parentNode),"ontouchstart"in T&&ue.addEventListener("touchstart",ie,!1),ue.addEventListener("mousedown",ie,!1)},T.Waves=H,document.addEventListener("DOMContentLoaded",function(){H.displayEffect()},!1)}(window),function(T,H){var N={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},q=function(){function z(B){d(this,z),this.options=T.extend({},z.defaults,B),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,z._toasts.length===0&&z._createContainer(),z._toasts.push(this);var k=this._createToast();k.M_Toast=this,this.el=k,this.$el=T(k),this._animateIn(),this._setTimer()}return r(z,[{key:"_createToast",value:function(){var k=document.createElement("div");return k.classList.add("toast"),this.options.classes.length&&T(k).addClass(this.options.classes),(typeof HTMLElement=="object"?this.message instanceof HTMLElement:this.message&&typeof this.message=="object"&&this.message!==null&&this.message.nodeType===1&&typeof this.message.nodeName=="string")?k.appendChild(this.message):this.message.jquery?T(k).append(this.message[0]):k.innerHTML=this.message,z._container.appendChild(k),k}},{key:"_animateIn",value:function(){H({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var k=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){k.panning||(k.timeRemaining-=20),k.timeRemaining<=0&&k.dismiss()},20))}},{key:"dismiss",value:function(){var k=this;window.clearInterval(this.counterInterval);var w=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+w+"px)",this.el.style.opacity=0),H({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){typeof k.options.completeCallback=="function"&&k.options.completeCallback(),k.$el.remove(),z._toasts.splice(z._toasts.indexOf(k),1),z._toasts.length===0&&z._removeContainer()}})}}],[{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_Toast}},{key:"_createContainer",value:function(){var k=document.createElement("div");k.setAttribute("id","toast-container"),k.addEventListener("touchstart",z._onDragStart),k.addEventListener("touchmove",z._onDragMove),k.addEventListener("touchend",z._onDragEnd),k.addEventListener("mousedown",z._onDragStart),document.addEventListener("mousemove",z._onDragMove),document.addEventListener("mouseup",z._onDragEnd),document.body.appendChild(k),z._container=k}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",z._onDragMove),document.removeEventListener("mouseup",z._onDragEnd),T(z._container).remove(),z._container=null}},{key:"_onDragStart",value:function(k){if(k.target&&T(k.target).closest(".toast").length){var w=T(k.target).closest(".toast"),R=w[0].M_Toast;R.panning=!0,z._draggedToast=R,R.el.classList.add("panning"),R.el.style.transition="",R.startingXPos=z._xPos(k),R.time=Date.now(),R.xPos=z._xPos(k)}}},{key:"_onDragMove",value:function(k){if(z._draggedToast){k.preventDefault();var w=z._draggedToast;w.deltaX=Math.abs(w.xPos-z._xPos(k)),w.xPos=z._xPos(k),w.velocityX=w.deltaX/(Date.now()-w.time),w.time=Date.now();var R=w.xPos-w.startingXPos,J=w.el.offsetWidth*w.options.activationPercent;w.el.style.transform="translateX("+R+"px)",w.el.style.opacity=1-Math.abs(R/J)}}},{key:"_onDragEnd",value:function(){if(z._draggedToast){var k=z._draggedToast;k.panning=!1,k.el.classList.remove("panning");var w=k.xPos-k.startingXPos,R=k.el.offsetWidth*k.options.activationPercent,J=Math.abs(w)>R||k.velocityX>1;J?(k.wasSwiped=!0,k.dismiss()):(k.el.style.transition="transform .2s, opacity .2s",k.el.style.transform="",k.el.style.opacity=""),z._draggedToast=null}}},{key:"_xPos",value:function(k){return k.targetTouches&&k.targetTouches.length>=1?k.targetTouches[0].clientX:k.clientX}},{key:"dismissAll",value:function(){for(var k in z._toasts)z._toasts[k].dismiss()}},{key:"defaults",get:function(){return N}}]),z}();q._toasts=[],q._container=null,q._draggedToast=null,M.Toast=q,M.toast=function(z){return new q(z)}}(cash,M.anime),function(T,H){var N={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_Sidenav=R,R.id=R.$el.attr("id"),R.options=T.extend({},B.defaults,w),R.isOpen=!1,R.isFixed=R.el.classList.contains("sidenav-fixed"),R.isDragged=!1,R.lastWindowWidth=window.innerWidth,R.lastWindowHeight=window.innerHeight,R._createOverlay(),R._createDragTarget(),R._setupEventHandlers(),R._setupClasses(),R._setupFixed(),B._sidenavs.push(R),R}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var w=B._sidenavs.indexOf(this);w>=0&&B._sidenavs.splice(w,1)}},{key:"_createOverlay",value:function(){var w=document.createElement("div");this._closeBound=this.close.bind(this),w.classList.add("sidenav-overlay"),w.addEventListener("click",this._closeBound),document.body.appendChild(w),this._overlay=w}},{key:"_setupEventHandlers",value:function(){B._sidenavs.length===0&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){B._sidenavs.length===1&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(w){var R=T(w.target).closest(".sidenav-trigger");if(w.target&&R.length){var J=M.getIdFromTrigger(R[0]),ie=document.getElementById(J).M_Sidenav;ie&&ie.open(R),w.preventDefault()}}},{key:"_startDrag",value:function(w){var R=w.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=R,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,H.remove(this.el),H.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(w){var R=w.targetTouches[0].clientX,J=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-R),this._xPos=R,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==J&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(w){if(!(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)){this.isDragged||this._startDrag(w),this._dragMoveUpdate(w);var R=this._xPos-this._startingXpos,J=R>0?"right":"left";R=Math.min(this._width,Math.abs(R)),this.options.edge===J&&(R=0);var ie=R,ue="translateX(-100%)";this.options.edge==="right"&&(ue="translateX(100%)",ie=-ie),this.percentOpen=Math.min(1,R/this._width),this.el.style.transform=ue+" translateX("+ie+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(w){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(w),this._dragMoveUpdate(w);var R=this._xPos-this._startingXpos,J=R>0?"right":"left";R=Math.min(this._width,Math.abs(R)),this.options.edge!==J&&(R=0);var ie=-R;this.options.edge==="right"&&(ie=-ie),this.percentOpen=Math.min(1,1-R/this._width),this.el.style.transform="translateX("+ie+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(w){var R=T(w.target).closest(".sidenav-close");R.length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){this.options.edge==="right"&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var w=document.createElement("div");w.classList.add("drag-target"),document.body.appendChild(w),this.dragTarget=w}},{key:"_preventBodyScrolling",value:function(){var w=document.body;w.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){var w=document.body;w.style.overflow=""}},{key:"open",value:function(){this.isOpen!==!0&&(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(H.remove(this.el),H({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),(!this.isDragged||this.percentOpen!=1)&&this._animateIn()))}},{key:"close",value:function(){if(this.isOpen!==!1)if(this.isOpen=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var w=this.options.edge==="left"?"-105%":"105%";this.el.style.transform="translateX("+w+")"}else this._enableBodyScrolling(),!this.isDragged||this.percentOpen!=0?this._animateOut():this._overlay.style.display="none"}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var w=this,R=this.options.edge==="left"?-1:1;this.isDragged&&(R=this.options.edge==="left"?R+this.percentOpen:R-this.percentOpen),H.remove(this.el),H({targets:this.el,translateX:[R*100+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){typeof w.options.onOpenEnd=="function"&&w.options.onOpenEnd.call(w,w.el)}})}},{key:"_animateOverlayIn",value:function(){var w=0;this.isDragged?w=this.percentOpen:T(this._overlay).css({display:"block"}),H.remove(this._overlay),H({targets:this._overlay,opacity:[w,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var w=this,R=this.options.edge==="left"?-1:1,J=0;this.isDragged&&(J=this.options.edge==="left"?R+this.percentOpen:R-this.percentOpen),H.remove(this.el),H({targets:this.el,translateX:[J*100+"%",R*105+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){typeof w.options.onCloseEnd=="function"&&w.options.onCloseEnd.call(w,w.el)}})}},{key:"_animateOverlayOut",value:function(){var w=this;H.remove(this._overlay),H({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){T(w._overlay).css("display","none")}})}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Sidenav}},{key:"defaults",get:function(){return N}}]),B}(o);q._sidenavs=[],M.Sidenav=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"sidenav","M_Sidenav")}(cash,M.anime),function(T,H){var N={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(z){return'a[href="#'+z+'"]'}},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_ScrollSpy=R,R.options=T.extend({},B.defaults,w),B._elements.push(R),B._count++,B._increment++,R.tickId=-1,R.id=B._increment,R._setupEventHandlers(),R._handleWindowScroll(),R}return r(B,[{key:"destroy",value:function(){B._elements.splice(B._elements.indexOf(this),1),B._elementsInView.splice(B._elementsInView.indexOf(this),1),B._visibleElements.splice(B._visibleElements.indexOf(this.$el),1),B._count--,this._removeEventHandlers(),T(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var w=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=w.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),B._count===1&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){B._count===0&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(w){for(var R=T(w.target),J=B._elements.length-1;J>=0;J--){var ie=B._elements[J];if(R.is('a[href="#'+ie.$el.attr("id")+'"]')){w.preventDefault();var ue=ie.$el.offset().top+1;H({targets:[document.documentElement,document.body],scrollTop:ue-ie.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){B._ticks++;for(var w=M.getDocumentScrollTop(),R=M.getDocumentScrollLeft(),J=R+window.innerWidth,ie=w+window.innerHeight,ue=B._findElements(w,J,ie,R),se=0;se<ue.length;se++){var _e=ue[se],Ue=_e.tickId;Ue<0&&_e._enter(),_e.tickId=B._ticks}for(var je=0;je<B._elementsInView.length;je++){var Ne=B._elementsInView[je],Ie=Ne.tickId;Ie>=0&&Ie!==B._ticks&&(Ne._exit(),Ne.tickId=-1)}B._elementsInView=ue}},{key:"_enter",value:function(){B._visibleElements=B._visibleElements.filter(function(w){return w.height()!=0}),B._visibleElements[0]?(T(this.options.getActiveElement(B._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),B._visibleElements[0][0].M_ScrollSpy&&this.id<B._visibleElements[0][0].M_ScrollSpy.id?B._visibleElements.unshift(this.$el):B._visibleElements.push(this.$el)):B._visibleElements.push(this.$el),T(this.options.getActiveElement(B._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var w=this;B._visibleElements=B._visibleElements.filter(function(R){return R.height()!=0}),B._visibleElements[0]&&(T(this.options.getActiveElement(B._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),B._visibleElements=B._visibleElements.filter(function(R){return R.attr("id")!=w.$el.attr("id")}),B._visibleElements[0]&&T(this.options.getActiveElement(B._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_ScrollSpy}},{key:"_findElements",value:function(w,R,J,ie){for(var ue=[],se=0;se<B._elements.length;se++){var _e=B._elements[se],Ue=w+_e.options.scrollOffset||200;if(_e.$el.height()>0){var je=_e.$el.offset().top,Ne=_e.$el.offset().left,Ie=Ne+_e.$el.width(),xt=je+_e.$el.height(),We=!(Ne>R||Ie<ie||je>J||xt<Ue);We&&ue.push(_e)}}return ue}},{key:"defaults",get:function(){return N}}]),B}(o);q._elements=[],q._elementsInView=[],q._visibleElements=[],q._count=0,q._increment=0,q._ticks=0,M.ScrollSpy=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(T){var H={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(q,z,B){return q.indexOf(B)-z.indexOf(B)}},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.el.M_Autocomplete=w,w.options=T.extend({},z.defaults,k),w.isOpen=!1,w.count=0,w.activeIndex=-1,w.oldVal,w.$inputField=w.$el.closest(".input-field"),w.$active=T(),w._mousedown=!1,w._setupDropdown(),w._setupEventHandlers(),w}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),typeof window.ontouchstart!="undefined"&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),typeof window.ontouchstart!="undefined"&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var k=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),T(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(w){k.selectOption(T(w))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(k){k.type==="keyup"&&(z._keydown=!1),this.count=0;var w=this.el.value.toLowerCase();k.keyCode===13||k.keyCode===38||k.keyCode===40||(this.oldVal!==w&&(M.tabPressed||k.type!=="focus")&&this.open(),this.oldVal=w)}},{key:"_handleInputKeydown",value:function(k){z._keydown=!0;var w=k.keyCode,R=void 0,J=T(this.container).children("li").length;if(w===M.keys.ENTER&&this.activeIndex>=0){R=T(this.container).children("li").eq(this.activeIndex),R.length&&(this.selectOption(R),k.preventDefault());return}(w===M.keys.ARROW_UP||w===M.keys.ARROW_DOWN)&&(k.preventDefault(),w===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,w===M.keys.ARROW_DOWN&&this.activeIndex<J-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=T(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(k){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(k){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(k){this._mousedown=!1}},{key:"_highlight",value:function(k,w){var R=w.find("img"),J=w.text().toLowerCase().indexOf(""+k.toLowerCase()),ie=J+k.length-1,ue=w.text().slice(0,J),se=w.text().slice(J,ie+1),_e=w.text().slice(ie+1);w.html("<span>"+ue+"<span class='highlight'>"+se+"</span>"+_e+"</span>"),R.length&&w.prepend(R)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){T(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(k){var w=k.text().trim();this.el.value=w,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),typeof this.options.onAutocomplete=="function"&&this.options.onAutocomplete.call(this,w)}},{key:"_renderDropdown",value:function(k,w){var R=this;this._resetAutocomplete();var J=[];for(var ie in k)if(k.hasOwnProperty(ie)&&ie.toLowerCase().indexOf(w)!==-1){if(this.count>=this.options.limit)break;var ue={data:k[ie],key:ie};J.push(ue),this.count++}if(this.options.sortFunction){var se=function(Ne,Ie){return R.options.sortFunction(Ne.key.toLowerCase(),Ie.key.toLowerCase(),w.toLowerCase())};J.sort(se)}for(var _e=0;_e<J.length;_e++){var Ue=J[_e],je=T("<li></li>");Ue.data?je.append('<img src="'+Ue.data+'" class="right circle"><span>'+Ue.key+"</span>"):je.append("<span>"+Ue.key+"</span>"),T(this.container).append(je),this._highlight(w,je)}}},{key:"open",value:function(){var k=this.el.value.toLowerCase();this._resetAutocomplete(),k.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,k)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(k){var w=this.el.value.toLowerCase();this.options.data=k,this.isOpen&&this._renderDropdown(k,w)}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_Autocomplete}},{key:"defaults",get:function(){return H}}]),z}(o);N._keydown=!1,M.Autocomplete=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"autocomplete","M_Autocomplete")}(cash),function(T){M.updateTextFields=function(){var H="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";T(H).each(function(N,q){var z=T(this);N.value.length>0||T(N).is(":focus")||N.autofocus||z.attr("placeholder")!==null?z.siblings("label").addClass("active"):N.validity?z.siblings("label").toggleClass("active",N.validity.badInput===!0):z.siblings("label").removeClass("active")})},M.validate_field=function(H){var N=H.attr("data-length")!==null,q=parseInt(H.attr("data-length")),z=H[0].value.length;z===0&&H[0].validity.badInput===!1&&!H.is(":required")?H.hasClass("validate")&&(H.removeClass("valid"),H.removeClass("invalid")):H.hasClass("validate")&&(H.is(":valid")&&N&&z<=q||H.is(":valid")&&!N?(H.removeClass("invalid"),H.addClass("valid")):(H.removeClass("valid"),H.addClass("invalid")))},M.textareaAutoResize=function(H){if(H instanceof Element&&(H=T(H)),!H.length){console.error("No textarea element found");return}var N=T(".hiddendiv").first();N.length||(N=T('<div class="hiddendiv common"></div>'),T("body").append(N));var q=H.css("font-family"),z=H.css("font-size"),B=H.css("line-height"),k=H.css("padding-top"),w=H.css("padding-right"),R=H.css("padding-bottom"),J=H.css("padding-left");z&&N.css("font-size",z),q&&N.css("font-family",q),B&&N.css("line-height",B),k&&N.css("padding-top",k),w&&N.css("padding-right",w),R&&N.css("padding-bottom",R),J&&N.css("padding-left",J),H.data("original-height")||H.data("original-height",H.height()),H.attr("wrap")==="off"&&N.css("overflow-wrap","normal").css("white-space","pre"),N.text(H[0].value+`
`);var ie=N.html().replace(/\n/g,"<br>");N.html(ie),H[0].offsetWidth>0&&H[0].offsetHeight>0?N.css("width",H.width()+"px"):N.css("width",window.innerWidth/2+"px"),H.data("original-height")<=N.innerHeight()?H.css("height",N.innerHeight()+"px"):H[0].value.length<H.data("previous-length")&&H.css("height",H.data("original-height")+"px"),H.data("previous-length",H[0].value.length)},T(document).ready(function(){var H="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";T(document).on("change",H,function(){(this.value.length!==0||T(this).attr("placeholder")!==null)&&T(this).siblings("label").addClass("active"),M.validate_field(T(this))}),T(document).ready(function(){M.updateTextFields()}),T(document).on("reset",function(z){var B=T(z.target);B.is("form")&&(B.find(H).removeClass("valid").removeClass("invalid"),B.find(H).each(function(k){this.value.length&&T(this).siblings("label").removeClass("active")}),setTimeout(function(){B.find("select").each(function(){this.M_FormSelect&&T(this).trigger("change")})},0))}),document.addEventListener("focus",function(z){T(z.target).is(H)&&T(z.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(z){var B=T(z.target);if(B.is(H)){var k=".prefix";B[0].value.length===0&&B[0].validity.badInput!==!0&&B.attr("placeholder")===null&&(k+=", label"),B.siblings(k).removeClass("active"),M.validate_field(B)}},!0);var N="input[type=radio], input[type=checkbox]";T(document).on("keyup",N,function(z){if(z.which===M.keys.TAB){T(this).addClass("tabbed");var B=T(this);B.one("blur",function(k){T(this).removeClass("tabbed")});return}});var q=".materialize-textarea";T(q).each(function(){var z=T(this);z.data("original-height",z.height()),z.data("previous-length",this.value.length),M.textareaAutoResize(z)}),T(document).on("keyup",q,function(){M.textareaAutoResize(T(this))}),T(document).on("keydown",q,function(){M.textareaAutoResize(T(this))}),T(document).on("change",'.file-field input[type="file"]',function(){for(var z=T(this).closest(".file-field"),B=z.find("input.file-path"),k=T(this)[0].files,w=[],R=0;R<k.length;R++)w.push(k[R].name);B[0].value=w.join(", "),B.trigger("change")})})}(cash),function(T,H){var N={indicators:!0,height:400,duration:500,interval:6e3},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_Slider=R,R.options=T.extend({},B.defaults,w),R.$slider=R.$el.find(".slides"),R.$slides=R.$slider.children("li"),R.activeIndex=R.$slides.filter(function(J){return T(J).hasClass("active")}).first().index(),R.activeIndex!=-1&&(R.$active=R.$slides.eq(R.activeIndex)),R._setSliderHeight(),R.$slides.find(".caption").each(function(J){R._animateCaptionIn(J,0)}),R.$slides.find("img").each(function(J){var ie="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";T(J).attr("src")!==ie&&(T(J).css("background-image",'url("'+T(J).attr("src")+'")'),T(J).attr("src",ie))}),R._setupIndicators(),R.$active?R.$active.css("display","block"):(R.$slides.first().addClass("active"),H({targets:R.$slides.first()[0],opacity:1,duration:R.options.duration,easing:"easeOutQuad"}),R.activeIndex=0,R.$active=R.$slides.eq(R.activeIndex),R.options.indicators&&R.$indicators.eq(R.activeIndex).addClass("active")),R.$active.find("img").each(function(J){H({targets:R.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:R.options.duration,easing:"easeOutQuad"})}),R._setupEventHandlers(),R.start(),R}return r(B,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var w=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(R){R.addEventListener("click",w._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var w=this;this.options.indicators&&this.$indicators.each(function(R){R.removeEventListener("click",w._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(w){var R=T(w.target).index();this.set(R)}},{key:"_handleInterval",value:function(){var w=this.$slider.find(".active").index();this.$slides.length===w+1?w=0:w+=1,this.set(w)}},{key:"_animateCaptionIn",value:function(w,R){var J={targets:w,opacity:0,duration:R,easing:"easeOutQuad"};T(w).hasClass("center-align")?J.translateY=-100:T(w).hasClass("right-align")?J.translateX=100:T(w).hasClass("left-align")&&(J.translateX=-100),H(J)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var w=this;this.options.indicators&&(this.$indicators=T('<ul class="indicators"></ul>'),this.$slides.each(function(R,J){var ie=T('<li class="indicator-item"></li>');w.$indicators.append(ie[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(w){var R=this;if(w>=this.$slides.length?w=0:w<0&&(w=this.$slides.length-1),this.activeIndex!=w){this.$active=this.$slides.eq(this.activeIndex);var J=this.$active.find(".caption");this.$active.removeClass("active"),H({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){R.$slides.not(".active").each(function(ie){H({targets:ie,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(J[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(w).addClass("active")),H({targets:this.$slides.eq(w)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),H({targets:this.$slides.eq(w).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(w).addClass("active"),this.activeIndex=w,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var w=this.activeIndex+1;w>=this.$slides.length?w=0:w<0&&(w=this.$slides.length-1),this.set(w)}},{key:"prev",value:function(){var w=this.activeIndex-1;w>=this.$slides.length?w=0:w<0&&(w=this.$slides.length-1),this.set(w)}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Slider}},{key:"defaults",get:function(){return N}}]),B}(o);M.Slider=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"slider","M_Slider")}(cash,M.anime),function(T,H){T(document).on("click",".card",function(N){if(T(this).children(".card-reveal").length){var q=T(N.target).closest(".card");q.data("initialOverflow")===void 0&&q.data("initialOverflow",q.css("overflow")===void 0?"":q.css("overflow"));var z=T(this).find(".card-reveal");T(N.target).is(T(".card-reveal .card-title"))||T(N.target).is(T(".card-reveal .card-title i"))?H({targets:z[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(B){var k=B.animatables[0].target;T(k).css({display:"none"}),q.css("overflow",q.data("initialOverflow"))}}):(T(N.target).is(T(".card .activator"))||T(N.target).is(T(".card .activator i")))&&(q.css("overflow","hidden"),z.css({display:"block"}),H({targets:z[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(T){var H={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.el.M_Chips=w,w.options=T.extend({},z.defaults,k),w.$el.addClass("chips input-field"),w.chipsData=[],w.$chips=T(),w._setupInput(),w.hasAutocomplete=Object.keys(w.options.autocompleteOptions).length>0,w.$input.attr("id")||w.$input.attr("id",M.guid()),w.options.data.length&&(w.chipsData=w.options.data,w._renderChips(w.chipsData)),w.hasAutocomplete&&w._setupAutocomplete(),w._setPlaceholder(),w._setupLabel(),w._setupEventHandlers(),w}return r(z,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",z._handleChipsKeydown),document.addEventListener("keyup",z._handleChipsKeyup),this.el.addEventListener("blur",z._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",z._handleChipsKeydown),document.removeEventListener("keyup",z._handleChipsKeyup),this.el.removeEventListener("blur",z._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(k){var w=T(k.target).closest(".chip"),R=T(k.target).is(".close");if(w.length){var J=w.index();R?(this.deleteChip(J),this.$input[0].focus()):this.selectChip(J)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(k){if(z._keydown=!0,k.keyCode===13){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;k.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else(k.keyCode===8||k.keyCode===37)&&this.$input[0].value===""&&this.chipsData.length&&(k.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(k){if(!!k.tag){var w=document.createElement("div"),R=document.createElement("i");if(w.classList.add("chip"),w.textContent=k.tag,w.setAttribute("tabindex",0),T(R).addClass("material-icons close"),R.textContent="close",k.image){var J=document.createElement("img");J.setAttribute("src",k.image),w.insertBefore(J,w.firstChild)}return w.appendChild(R),w}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var k=0;k<this.chipsData.length;k++){var w=this._renderChip(this.chipsData[k]);this.$el.append(w),this.$chips.add(w)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var k=this;this.options.autocompleteOptions.onAutocomplete=function(w){k.addChip({tag:w}),k.$input[0].value="",k.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=T("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){this.chipsData!==void 0&&!this.chipsData.length&&this.options.placeholder?T(this.$input).prop("placeholder",this.options.placeholder):(this.chipsData===void 0||!!this.chipsData.length)&&this.options.secondaryPlaceholder&&T(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(k){if(k.hasOwnProperty("tag")&&k.tag!==""){for(var w=!1,R=0;R<this.chipsData.length;R++)if(this.chipsData[R].tag===k.tag){w=!0;break}return!w}return!1}},{key:"addChip",value:function(k){if(!(!this._isValid(k)||this.chipsData.length>=this.options.limit)){var w=this._renderChip(k);this.$chips.add(w),this.chipsData.push(k),T(this.$input).before(w),this._setPlaceholder(),typeof this.options.onChipAdd=="function"&&this.options.onChipAdd.call(this,this.$el,w)}}},{key:"deleteChip",value:function(k){var w=this.$chips.eq(k);this.$chips.eq(k).remove(),this.$chips=this.$chips.filter(function(R){return T(R).index()>=0}),this.chipsData.splice(k,1),this._setPlaceholder(),typeof this.options.onChipDelete=="function"&&this.options.onChipDelete.call(this,this.$el,w[0])}},{key:"selectChip",value:function(k){var w=this.$chips.eq(k);this._selectedChip=w,w[0].focus(),typeof this.options.onChipSelect=="function"&&this.options.onChipSelect.call(this,this.$el,w[0])}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_Chips}},{key:"_handleChipsKeydown",value:function(k){z._keydown=!0;var w=T(k.target).closest(".chips"),R=k.target&&w.length;if(!(T(k.target).is("input, textarea")||!R)){var J=w[0].M_Chips;if(k.keyCode===8||k.keyCode===46){k.preventDefault();var ie=J.chipsData.length;if(J._selectedChip){var ue=J._selectedChip.index();J.deleteChip(ue),J._selectedChip=null,ie=Math.max(ue-1,0)}J.chipsData.length&&J.selectChip(ie)}else if(k.keyCode===37){if(J._selectedChip){var se=J._selectedChip.index()-1;if(se<0)return;J.selectChip(se)}}else if(k.keyCode===39&&J._selectedChip){var _e=J._selectedChip.index()+1;_e>=J.chipsData.length?J.$input[0].focus():J.selectChip(_e)}}}},{key:"_handleChipsKeyup",value:function(k){z._keydown=!1}},{key:"_handleChipsBlur",value:function(k){if(!z._keydown){var w=T(k.target).closest(".chips"),R=w[0].M_Chips;R._selectedChip=null}}},{key:"defaults",get:function(){return H}}]),z}(o);N._keydown=!1,M.Chips=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"chips","M_Chips"),T(document).ready(function(){T(document.body).on("click",".chip .close",function(){var q=T(this).closest(".chips");q.length&&q[0].M_Chips||T(this).closest(".chip").remove()})})}(cash),function(T){var H={top:0,bottom:1/0,offset:0,onPositionChange:null},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.el.M_Pushpin=w,w.options=T.extend({},z.defaults,k),w.originalOffset=w.el.offsetTop,z._pushpins.push(w),w._setupEventHandlers(),w._updatePosition(),w}return r(z,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var k=z._pushpins.indexOf(this);z._pushpins.splice(k,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",z._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",z._updateElements)}},{key:"_updatePosition",value:function(){var k=M.getDocumentScrollTop()+this.options.offset;this.options.top<=k&&this.options.bottom>=k&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pinned")),k<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-top")),k>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px",typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_Pushpin}},{key:"_updateElements",value:function(){for(var k in z._pushpins){var w=z._pushpins[k];w._updatePosition()}}},{key:"defaults",get:function(){return H}}]),z}(o);N._pushpins=[],M.Pushpin=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"pushpin","M_Pushpin")}(cash),function(T,H){var N={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};T.fn.reverse=[].reverse;var q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_FloatingActionButton=R,R.options=T.extend({},B.defaults,w),R.isOpen=!1,R.$anchor=R.$el.children("a").first(),R.$menu=R.$el.children("ul").first(),R.$floatingBtns=R.$el.find("ul .btn-floating"),R.$floatingBtnsReverse=R.$el.find("ul .btn-floating").reverse(),R.offsetY=0,R.offsetX=0,R.$el.addClass("direction-"+R.options.direction),R.options.direction==="top"?R.offsetY=40:R.options.direction==="right"?R.offsetX=-40:R.options.direction==="bottom"?R.offsetY=-40:R.offsetX=40,R._setupEventHandlers(),R}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(w){T(w.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){!this.isOpen||(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var w=this;this.$el.addClass("active");var R=0;this.$floatingBtnsReverse.each(function(J){H({targets:J,opacity:1,scale:[.4,1],translateY:[w.offsetY,0],translateX:[w.offsetX,0],duration:275,delay:R,easing:"easeInOutQuad"}),R+=40})}},{key:"_animateOutFAB",value:function(){var w=this;this.$floatingBtnsReverse.each(function(R){H.remove(R),H({targets:R,opacity:0,scale:.4,translateY:w.offsetY,translateX:w.offsetX,duration:175,easing:"easeOutQuad",complete:function(){w.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var w=this,R=void 0,J=window.innerWidth,ie=window.innerHeight,ue=this.el.getBoundingClientRect(),se=T('<div class="fab-backdrop"></div>'),_e=this.$anchor.css("background-color");this.$anchor.append(se),this.offsetX=ue.left-J/2+ue.width/2,this.offsetY=ie-ue.bottom,R=J/se[0].clientWidth,this.btnBottom=ue.bottom,this.btnLeft=ue.left,this.btnWidth=ue.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),se.css({"background-color":_e}),setTimeout(function(){w.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),w.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){w.$el.css({overflow:"hidden","background-color":_e}),se.css({transform:"scale("+R+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),w.$menu.children("li").children("a").css({opacity:1}),w._handleDocumentClickBound=w._handleDocumentClick.bind(w),window.addEventListener("scroll",w._handleCloseBound,!0),document.body.addEventListener("click",w._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var w=this,R=window.innerWidth,J=window.innerHeight,ie=this.$el.find(".fab-backdrop"),ue=this.$anchor.css("background-color");this.offsetX=this.btnLeft-R/2+this.btnWidth/2,this.offsetY=J-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),ie.css({transform:"scale(0)","background-color":ue}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){ie.remove(),w.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-w.offsetX+"px,0,0)"}),w.$anchor.css({overflow:"",transform:"translate3d(0,"+w.offsetY+"px,0)"}),setTimeout(function(){w.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),w.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_FloatingActionButton}},{key:"defaults",get:function(){return N}}]),B}(o);M.FloatingActionButton=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(T){var H={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203A",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));w.el.M_Datepicker=w,w.options=T.extend({},z.defaults,k),!!k&&k.hasOwnProperty("i18n")&&typeof k.i18n=="object"&&(w.options.i18n=T.extend({},z.defaults.i18n,k.i18n)),w.options.minDate&&w.options.minDate.setHours(0,0,0,0),w.options.maxDate&&w.options.maxDate.setHours(0,0,0,0),w.id=M.guid(),w._setupVariables(),w._insertHTMLIntoDOM(),w._setupModal(),w._setupEventHandlers(),w.options.defaultDate||(w.options.defaultDate=new Date(Date.parse(w.el.value)));var R=w.options.defaultDate;return z._isDate(R)?w.options.setDefaultDate?(w.setDate(R,!0),w.setInputValue()):w.gotoDate(R):w.gotoDate(new Date),w.isOpen=!1,w}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),T(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var k=this.calendarEl.querySelector(".orig-select-year");k&&M.FormSelect.getInstance(k).destroy();var w=this.calendarEl.querySelector(".orig-select-month");w&&M.FormSelect.getInstance(w).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(T(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var k=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){k.isOpen=!1}})}},{key:"toString",value:function(k){var w=this;if(k=k||this.options.format,!z._isDate(this.date))return"";var R=k.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g),J=R.map(function(ie){return w.formats[ie]?w.formats[ie]():ie}).join("");return J}},{key:"setDate",value:function(k,w){if(!k)return this.date=null,this._renderDateDisplay(),this.draw();if(typeof k=="string"&&(k=new Date(Date.parse(k))),!!z._isDate(k)){var R=this.options.minDate,J=this.options.maxDate;z._isDate(R)&&k<R?k=R:z._isDate(J)&&k>J&&(k=J),this.date=new Date(k.getTime()),this._renderDateDisplay(),z._setToStartOfDay(this.date),this.gotoDate(this.date),!w&&typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var k=z._isDate(this.date)?this.date:new Date,w=this.options.i18n,R=w.weekdaysShort[k.getDay()],J=w.monthsShort[k.getMonth()],ie=k.getDate();this.yearTextEl.innerHTML=k.getFullYear(),this.dateTextEl.innerHTML=R+", "+J+" "+ie}},{key:"gotoDate",value:function(k){var w=!0;if(!!z._isDate(k)){if(this.calendars){var R=new Date(this.calendars[0].year,this.calendars[0].month,1),J=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),ie=k.getTime();J.setMonth(J.getMonth()+1),J.setDate(J.getDate()-1),w=ie<R.getTime()||J.getTime()<ie}w&&(this.calendars=[{month:k.getMonth(),year:k.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(k){return k.month<0&&(k.year-=Math.ceil(Math.abs(k.month)/12),k.month+=12),k.month>11&&(k.year+=Math.floor(Math.abs(k.month)/12),k.month-=12),k}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(k,w,R){var J=this.options,ie=new Date,ue=z._getDaysInMonth(k,w),se=new Date(k,w,1).getDay(),_e=[],Ue=[];z._setToStartOfDay(ie),J.firstDay>0&&(se-=J.firstDay,se<0&&(se+=7));for(var je=w===0?11:w-1,Ne=w===11?0:w+1,Ie=w===0?k-1:k,xt=w===11?k+1:k,We=z._getDaysInMonth(Ie,je),Et=ue+se,ct=Et;ct>7;)ct-=7;Et+=7-ct;for(var xe=!1,Ee=0,xn=0;Ee<Et;Ee++){var Qt=new Date(k,w,1+(Ee-se)),yn=z._isDate(this.date)?z._compareDates(Qt,this.date):!1,on=z._compareDates(Qt,ie),Sn=J.events.indexOf(Qt.toDateString())!==-1,Nn=Ee<se||Ee>=ue+se,bn=1+(Ee-se),kn=w,Le=k,Ke=J.startRange&&z._compareDates(J.startRange,Qt),pt=J.endRange&&z._compareDates(J.endRange,Qt),St=J.startRange&&J.endRange&&J.startRange<Qt&&Qt<J.endRange,Ft=J.minDate&&Qt<J.minDate||J.maxDate&&Qt>J.maxDate||J.disableWeekends&&z._isWeekend(Qt)||J.disableDayFn&&J.disableDayFn(Qt);Nn&&(Ee<se?(bn=We+bn,kn=je,Le=Ie):(bn=bn-ue,kn=Ne,Le=xt));var ht={day:bn,month:kn,year:Le,hasEvent:Sn,isSelected:yn,isToday:on,isDisabled:Ft,isEmpty:Nn,isStartRange:Ke,isEndRange:pt,isInRange:St,showDaysInNextAndPreviousMonths:J.showDaysInNextAndPreviousMonths};Ue.push(this.renderDay(ht)),++xn===7&&(_e.push(this.renderRow(Ue,J.isRTL,xe)),Ue=[],xn=0,xe=!1)}return this.renderTable(J,_e,R)}},{key:"renderDay",value:function(k){var w=[],R="false";if(k.isEmpty)if(k.showDaysInNextAndPreviousMonths)w.push("is-outside-current-month"),w.push("is-selection-disabled");else return'<td class="is-empty"></td>';return k.isDisabled&&w.push("is-disabled"),k.isToday&&w.push("is-today"),k.isSelected&&(w.push("is-selected"),R="true"),k.hasEvent&&w.push("has-event"),k.isInRange&&w.push("is-inrange"),k.isStartRange&&w.push("is-startrange"),k.isEndRange&&w.push("is-endrange"),'<td data-day="'+k.day+'" class="'+w.join(" ")+'" aria-selected="'+R+'">'+('<button class="datepicker-day-button" type="button" data-year="'+k.year+'" data-month="'+k.month+'" data-day="'+k.day+'">'+k.day+"</button>")+"</td>"}},{key:"renderRow",value:function(k,w,R){return'<tr class="datepicker-row'+(R?" is-selected":"")+'">'+(w?k.reverse():k).join("")+"</tr>"}},{key:"renderTable",value:function(k,w,R){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+R+'">'+this.renderHead(k)+this.renderBody(w)+"</table></div>"}},{key:"renderHead",value:function(k){var w=void 0,R=[];for(w=0;w<7;w++)R.push('<th scope="col"><abbr title="'+this.renderDayName(k,w)+'">'+this.renderDayName(k,w,!0)+"</abbr></th>");return"<thead><tr>"+(k.isRTL?R.reverse():R).join("")+"</tr></thead>"}},{key:"renderBody",value:function(k){return"<tbody>"+k.join("")+"</tbody>"}},{key:"renderTitle",value:function(k,w,R,J,ie,ue){var se=void 0,_e=void 0,Ue=void 0,je=this.options,Ne=R===je.minYear,Ie=R===je.maxYear,xt='<div id="'+ue+'" class="datepicker-controls" role="heading" aria-live="assertive">',We=void 0,Et=void 0,ct=!0,xe=!0;for(Ue=[],se=0;se<12;se++)Ue.push('<option value="'+(R===ie?se-w:12+se-w)+'"'+(se===J?' selected="selected"':"")+(Ne&&se<je.minMonth||Ie&&se>je.maxMonth?'disabled="disabled"':"")+">"+je.i18n.months[se]+"</option>");for(We='<select class="datepicker-select orig-select-month" tabindex="-1">'+Ue.join("")+"</select>",T.isArray(je.yearRange)?(se=je.yearRange[0],_e=je.yearRange[1]+1):(se=R-je.yearRange,_e=1+R+je.yearRange),Ue=[];se<_e&&se<=je.maxYear;se++)se>=je.minYear&&Ue.push('<option value="'+se+'" '+(se===R?'selected="selected"':"")+">"+se+"</option>");Et='<select class="datepicker-select orig-select-year" tabindex="-1">'+Ue.join("")+"</select>";var Ee='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg>';xt+='<button class="month-prev'+(ct?"":" is-disabled")+'" type="button">'+Ee+"</button>",xt+='<div class="selects-container">',je.showMonthAfterYear?xt+=Et+We:xt+=We+Et,xt+="</div>",Ne&&(J===0||je.minMonth>=J)&&(ct=!1),Ie&&(J===11||je.maxMonth<=J)&&(xe=!1);var xn='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg>';return xt+='<button class="month-next'+(xe?"":" is-disabled")+'" type="button">'+xn+"</button>",xt+="</div>"}},{key:"draw",value:function(k){if(!(!this.isOpen&&!k)){var w=this.options,R=w.minYear,J=w.maxYear,ie=w.minMonth,ue=w.maxMonth,se="",_e=void 0;this._y<=R&&(this._y=R,!isNaN(ie)&&this._m<ie&&(this._m=ie)),this._y>=J&&(this._y=J,!isNaN(ue)&&this._m>ue&&(this._m=ue)),_e="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var Ue=0;Ue<1;Ue++)this._renderDateDisplay(),se+=this.renderTitle(this,Ue,this.calendars[Ue].year,this.calendars[Ue].month,this.calendars[0].year,_e)+this.render(this.calendars[Ue].year,this.calendars[Ue].month,_e);this.destroySelects(),this.calendarEl.innerHTML=se;var je=this.calendarEl.querySelector(".orig-select-year"),Ne=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(je,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(Ne,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),je.addEventListener("change",this._handleYearChange.bind(this)),Ne.addEventListener("change",this._handleMonthChange.bind(this)),typeof this.options.onDraw=="function"&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var k=this;this.$modalEl=T(z._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return k.date.getDate()},dd:function(){var w=k.date.getDate();return(w<10?"0":"")+w},ddd:function(){return k.options.i18n.weekdaysShort[k.date.getDay()]},dddd:function(){return k.options.i18n.weekdays[k.date.getDay()]},m:function(){return k.date.getMonth()+1},mm:function(){var w=k.date.getMonth()+1;return(w<10?"0":"")+w},mmm:function(){return k.options.i18n.monthsShort[k.date.getMonth()]},mmmm:function(){return k.options.i18n.months[k.date.getMonth()]},yy:function(){return(""+k.date.getFullYear()).slice(2)},yyyy:function(){return k.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(k){k.which===M.keys.ENTER&&(k.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(k){if(!!this.isOpen){var w=T(k.target);w.hasClass("is-disabled")||(w.hasClass("datepicker-day-button")&&!w.hasClass("is-empty")&&!w.parent().hasClass("is-disabled")?(this.setDate(new Date(k.target.getAttribute("data-year"),k.target.getAttribute("data-month"),k.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()):w.closest(".month-prev").length?this.prevMonth():w.closest(".month-next").length&&this.nextMonth())}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(k){this.gotoMonth(k.target.value)}},{key:"_handleYearChange",value:function(k){this.gotoYear(k.target.value)}},{key:"gotoMonth",value:function(k){isNaN(k)||(this.calendars[0].month=parseInt(k,10),this.adjustCalendars())}},{key:"gotoYear",value:function(k){isNaN(k)||(this.calendars[0].year=parseInt(k,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(k){var w=void 0;k.firedBy!==this&&(this.options.parse?w=this.options.parse(this.el.value,this.options.format):w=new Date(Date.parse(this.el.value)),z._isDate(w)&&this.setDate(w))}},{key:"renderDayName",value:function(k,w,R){for(w+=k.firstDay;w>=7;)w-=7;return R?k.i18n.weekdaysAbbrev[w]:k.i18n.weekdays[w]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,typeof this.options.onOpen=="function"&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(!!this.isOpen)return this.isOpen=!1,typeof this.options.onClose=="function"&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"_isDate",value:function(k){return/Date/.test(Object.prototype.toString.call(k))&&!isNaN(k.getTime())}},{key:"_isWeekend",value:function(k){var w=k.getDay();return w===0||w===6}},{key:"_setToStartOfDay",value:function(k){z._isDate(k)&&k.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(k,w){return[31,z._isLeapYear(k)?29:28,31,30,31,30,31,31,30,31,30,31][w]}},{key:"_isLeapYear",value:function(k){return k%4===0&&k%100!==0||k%400===0}},{key:"_compareDates",value:function(k,w){return k.getTime()===w.getTime()}},{key:"_setToStartOfDay",value:function(k){z._isDate(k)&&k.setHours(0,0,0,0)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_Datepicker}},{key:"defaults",get:function(){return H}}]),z}(o);N._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"datepicker","M_Datepicker")}(cash),function(T){var H={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.el.M_Timepicker=w,w.options=T.extend({},z.defaults,k),w.id=M.guid(),w._insertHTMLIntoDOM(),w._setupModal(),w._setupVariables(),w._setupEventHandlers(),w._clockSetup(),w._pickerSetup(),w}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),T(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),T(this.spanHours).on("click",this.showView.bind(this,"hours")),T(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(k){k.which===M.keys.ENTER&&(k.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(k){k.preventDefault();var w=this.plate.getBoundingClientRect(),R={x:w.left,y:w.top};this.x0=R.x+this.options.dialRadius,this.y0=R.y+this.options.dialRadius,this.moved=!1;var J=z._Pos(k);this.dx=J.x-this.x0,this.dy=J.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(k){k.preventDefault();var w=z._Pos(k),R=w.x-this.x0,J=w.y-this.y0;this.moved=!0,this.setHand(R,J,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(k){var w=this;k.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var R=z._Pos(k),J=R.x-this.x0,ie=R.y-this.y0;this.moved&&J===this.dx&&ie===this.dy&&this.setHand(J,ie),this.currentView==="hours"?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(T(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){w.done()},this.options.duration/2)),typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=T(z._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var k=document.querySelector(this.options.container);this.options.container&&!!k?this.$modalEl.appendTo(k):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var k=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){typeof k.options.onCloseEnd=="function"&&k.options.onCloseEnd.call(k),k.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var k=T('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&k.css({visibility:""});var w=T('<div class="confirmation-btns"></div>');T('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(w).on("click",this.close.bind(this)),T('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(w).on("click",this.done.bind(this)),w.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=T('<div class="am-btn">AM</div>'),this.$pmBtn=T('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var k=this.options.dialRadius,w=this.options.tickRadius,R=k*2,J=z._createSVGEl("svg");J.setAttribute("class","timepicker-svg"),J.setAttribute("width",R),J.setAttribute("height",R);var ie=z._createSVGEl("g");ie.setAttribute("transform","translate("+k+","+k+")");var ue=z._createSVGEl("circle");ue.setAttribute("class","timepicker-canvas-bearing"),ue.setAttribute("cx",0),ue.setAttribute("cy",0),ue.setAttribute("r",4);var se=z._createSVGEl("line");se.setAttribute("x1",0),se.setAttribute("y1",0);var _e=z._createSVGEl("circle");_e.setAttribute("class","timepicker-canvas-bg"),_e.setAttribute("r",w),ie.appendChild(se),ie.appendChild(_e),ie.appendChild(ue),J.appendChild(ie),this._canvas.appendChild(J),this.hand=se,this.bg=_e,this.bearing=ue,this.g=ie}},{key:"_buildHoursView",value:function(){var k=T('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var w=1;w<13;w+=1){var R=k.clone(),J=w/6*Math.PI,ie=this.options.outerRadius;R.css({left:this.options.dialRadius+Math.sin(J)*ie-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(J)*ie-this.options.tickRadius+"px"}),R.html(w===0?"00":w),this.hoursView.appendChild(R[0])}else for(var ue=0;ue<24;ue+=1){var se=k.clone(),_e=ue/6*Math.PI,Ue=ue>0&&ue<13,je=Ue?this.options.innerRadius:this.options.outerRadius;se.css({left:this.options.dialRadius+Math.sin(_e)*je-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(_e)*je-this.options.tickRadius+"px"}),se.html(ue===0?"00":ue),this.hoursView.appendChild(se[0])}}},{key:"_buildMinutesView",value:function(){for(var k=T('<div class="timepicker-tick"></div>'),w=0;w<60;w+=5){var R=k.clone(),J=w/30*Math.PI;R.css({left:this.options.dialRadius+Math.sin(J)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(J)*this.options.outerRadius-this.options.tickRadius+"px"}),R.html(z._addLeadingZero(w)),this.minutesView.appendChild(R[0])}}},{key:"_handleAmPmClick",value:function(k){var w=T(k.target);this.amOrPm=w.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary",this.amOrPm==="AM"),this.$pmBtn.toggleClass("text-primary",this.amOrPm==="PM"))}},{key:"_updateTimeFromInput",value:function(){var k=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&typeof k[1]!="undefined"&&(k[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",k[1]=k[1].replace("AM","").replace("PM","")),k[0]==="now"){var w=new Date(+new Date+this.options.fromNow);k=[w.getHours(),w.getMinutes()],this.options.twelveHour&&(this.amOrPm=k[0]>=12&&k[0]<24?"PM":"AM")}this.hours=+k[0]||0,this.minutes=+k[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=z._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(k,w){k==="minutes"&&T(this.hoursView).css("visibility");var R=k==="hours",J=R?this.hoursView:this.minutesView,ie=R?this.minutesView:this.hoursView;this.currentView=k,T(this.spanHours).toggleClass("text-primary",R),T(this.spanMinutes).toggleClass("text-primary",!R),ie.classList.add("timepicker-dial-out"),T(J).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(w),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){T(ie).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(k){var w=this.currentView,R=this[w],J=w==="hours",ie=Math.PI/(J?6:30),ue=R*ie,se=J&&R>0&&R<13?this.options.innerRadius:this.options.outerRadius,_e=Math.sin(ue)*se,Ue=-Math.cos(ue)*se,je=this;k?(T(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){T(je.canvas).removeClass("timepicker-canvas-out"),je.setHand(_e,Ue)},k)):this.setHand(_e,Ue)}},{key:"setHand",value:function(k,w,R){var J=this,ie=Math.atan2(k,-w),ue=this.currentView==="hours",se=Math.PI/(ue||R?6:30),_e=Math.sqrt(k*k+w*w),Ue=ue&&_e<(this.options.outerRadius+this.options.innerRadius)/2,je=Ue?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(je=this.options.outerRadius),ie<0&&(ie=Math.PI*2+ie);var Ne=Math.round(ie/se);ie=Ne*se,this.options.twelveHour?ue?Ne===0&&(Ne=12):(R&&(Ne*=5),Ne===60&&(Ne=0)):ue?(Ne===12&&(Ne=0),Ne=Ue?Ne===0?12:Ne:Ne===0?0:Ne+12):(R&&(Ne*=5),Ne===60&&(Ne=0)),this[this.currentView]!==Ne&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){J.vibrateTimer=null},100))),this[this.currentView]=Ne,ue?this.spanHours.innerHTML=Ne:this.spanMinutes.innerHTML=z._addLeadingZero(Ne);var Ie=Math.sin(ie)*(je-this.options.tickRadius),xt=-Math.cos(ie)*(je-this.options.tickRadius),We=Math.sin(ie)*je,Et=-Math.cos(ie)*je;this.hand.setAttribute("x2",Ie),this.hand.setAttribute("y2",xt),this.bg.setAttribute("cx",We),this.bg.setAttribute("cy",Et)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){!this.isOpen||(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(k,w){var R=this.el.value,J=w?"":z._addLeadingZero(this.hours)+":"+z._addLeadingZero(this.minutes);this.time=J,!w&&this.options.twelveHour&&(J=J+" "+this.amOrPm),this.el.value=J,J!==R&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"_addLeadingZero",value:function(k){return(k<10?"0":"")+k}},{key:"_createSVGEl",value:function(k){var w="http://www.w3.org/2000/svg";return document.createElementNS(w,k)}},{key:"_Pos",value:function(k){return k.targetTouches&&k.targetTouches.length>=1?{x:k.targetTouches[0].clientX,y:k.targetTouches[0].clientY}:{x:k.clientX,y:k.clientY}}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_Timepicker}},{key:"defaults",get:function(){return H}}]),z}(o);N._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"timepicker","M_Timepicker")}(cash),function(T){var H={},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.el.M_CharacterCounter=w,w.options=T.extend({},z.defaults,k),w.isInvalid=!1,w.isValidLength=!1,w._setupCounter(),w._setupEventHandlers(),w}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),T(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){T(this.counterEl).remove()}},{key:"updateCounter",value:function(){var k=+this.$el.attr("data-length"),w=this.el.value.length;this.isValidLength=w<=k;var R=w;k&&(R+="/"+k,this._validateInput()),T(this.counterEl).html(R)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):!this.isValidLength&&!this.isInvalid&&(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_CharacterCounter}},{key:"defaults",get:function(){return H}}]),z}(o);M.CharacterCounter=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"characterCounter","M_CharacterCounter")}(cash),function(T){var H={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.el.M_Carousel=w,w.options=T.extend({},z.defaults,k),w.hasMultipleSlides=w.$el.find(".carousel-item").length>1,w.showIndicators=w.options.indicators&&w.hasMultipleSlides,w.noWrap=w.options.noWrap||!w.hasMultipleSlides,w.pressed=!1,w.dragged=!1,w.offset=w.target=0,w.images=[],w.itemWidth=w.$el.find(".carousel-item").first().innerWidth(),w.itemHeight=w.$el.find(".carousel-item").first().innerHeight(),w.dim=w.itemWidth*2+w.options.padding||1,w._autoScrollBound=w._autoScroll.bind(w),w._trackBound=w._track.bind(w),w.options.fullWidth&&(w.options.dist=0,w._setCarouselHeight(),w.showIndicators&&w.$el.find(".carousel-fixed-item").addClass("with-indicators")),w.$indicators=T('<ul class="indicators"></ul>'),w.$el.find(".carousel-item").each(function(R,J){if(w.images.push(R),w.showIndicators){var ie=T('<li class="indicator-item"></li>');J===0&&ie[0].classList.add("active"),w.$indicators.append(ie)}}),w.showIndicators&&w.$el.append(w.$indicators),w.count=w.images.length,w.options.numVisible=Math.min(w.count,w.options.numVisible),w.xform="transform",["webkit","Moz","O","ms"].every(function(R){var J=R+"Transform";return typeof document.body.style[J]!="undefined"?(w.xform=J,!1):!0}),w._setupEventHandlers(),w._scroll(w.offset),w}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var k=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),typeof window.ontouchstart!="undefined"&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(R,J){R.addEventListener("click",k._handleIndicatorClickBound)}));var w=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=w.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var k=this;typeof window.ontouchstart!="undefined"&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(w,R){w.removeEventListener("click",k._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(k){k.type==="mousedown"&&T(k.target).is("img")&&k.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(k),this.referenceY=this._ypos(k),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(k){var w=void 0,R=void 0,J=void 0,ie=void 0;if(this.pressed)if(w=this._xpos(k),R=this._ypos(k),J=this.reference-w,ie=Math.abs(this.referenceY-R),ie<30&&!this.verticalDragged)(J>2||J<-2)&&(this.dragged=!0,this.reference=w,this._scroll(this.offset+J));else{if(this.dragged)return k.preventDefault(),k.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return k.preventDefault(),k.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(k){if(this.pressed)this.pressed=!1;else return;return clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(k.preventDefault(),k.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(k){if(this.dragged)return k.preventDefault(),k.stopPropagation(),!1;if(!this.options.fullWidth){var w=T(k.target).closest(".carousel-item").index(),R=this._wrap(this.center)-w;R!==0&&(k.preventDefault(),k.stopPropagation()),this._cycleTo(w)}}},{key:"_handleIndicatorClick",value:function(k){k.stopPropagation();var w=T(k.target).closest(".indicator-item");w.length&&this._cycleTo(w.index())}},{key:"_handleResize",value:function(k){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=this.itemWidth*2+this.options.padding,this.offset=this.center*2*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(k){var w=this,R=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),J=R.find("img").first();if(J.length)if(J[0].complete){var ie=J.height();if(ie>0)this.$el.css("height",ie+"px");else{var ue=J[0].naturalWidth,se=J[0].naturalHeight,_e=this.$el.width()/ue*se;this.$el.css("height",_e+"px")}}else J.one("load",function(je,Ne){w.$el.css("height",je.offsetHeight+"px")});else if(!k){var Ue=R.height();this.$el.css("height",Ue+"px")}}},{key:"_xpos",value:function(k){return k.targetTouches&&k.targetTouches.length>=1?k.targetTouches[0].clientX:k.clientX}},{key:"_ypos",value:function(k){return k.targetTouches&&k.targetTouches.length>=1?k.targetTouches[0].clientY:k.clientY}},{key:"_wrap",value:function(k){return k>=this.count?k%this.count:k<0?this._wrap(this.count+k%this.count):k}},{key:"_track",value:function(){var k=void 0,w=void 0,R=void 0,J=void 0;k=Date.now(),w=k-this.timestamp,this.timestamp=k,R=this.offset-this.frame,this.frame=this.offset,J=1e3*R/(1+w),this.velocity=.8*J+.2*this.velocity}},{key:"_autoScroll",value:function(){var k=void 0,w=void 0;this.amplitude&&(k=Date.now()-this.timestamp,w=this.amplitude*Math.exp(-k/this.options.duration),w>2||w<-2?(this._scroll(this.target-w),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(k){var w=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),this.scrollingTimeout!=null&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){w.$el.removeClass("scrolling")},this.options.duration);var R=void 0,J=void 0,ie=void 0,ue=void 0,se=void 0,_e=void 0,Ue=void 0,je=void 0,Ne=void 0,Ie=void 0,xt=this.center,We=1/this.options.numVisible;if(this.offset=typeof k=="number"?k:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),ie=this.offset-this.center*this.dim,ue=ie<0?1:-1,se=-ue*ie*2/this.dim,J=this.count>>1,this.options.fullWidth?(Ue="translateX(0)",Ie=1):(Ue="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",Ue+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",Ie=1-We*se),this.showIndicators){var Et=this.center%this.count,ct=this.$indicators.find(".indicator-item.active");ct.index()!==Et&&(ct.removeClass("active"),this.$indicators.find(".indicator-item").eq(Et)[0].classList.add("active"))}if(!this.noWrap||this.center>=0&&this.center<this.count){_e=this.images[this._wrap(this.center)],T(_e).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),_e.classList.add("active"));var xe=Ue+" translateX("+-ie/2+"px) translateX("+ue*this.options.shift*se*R+"px) translateZ("+this.options.dist*se+"px)";this._updateItemStyle(_e,Ie,0,xe)}for(R=1;R<=J;++R){if(this.options.fullWidth?(je=this.options.dist,Ne=R===J&&ie<0?1-se:1):(je=this.options.dist*(R*2+se*ue),Ne=1-We*(R*2+se*ue)),!this.noWrap||this.center+R<this.count){_e=this.images[this._wrap(this.center+R)];var Ee=Ue+" translateX("+(this.options.shift+(this.dim*R-ie)/2)+"px) translateZ("+je+"px)";this._updateItemStyle(_e,Ne,-R,Ee)}if(this.options.fullWidth?(je=this.options.dist,Ne=R===J&&ie>0?1-se:1):(je=this.options.dist*(R*2-se*ue),Ne=1-We*(R*2-se*ue)),!this.noWrap||this.center-R>=0){_e=this.images[this._wrap(this.center-R)];var xn=Ue+" translateX("+(-this.options.shift+(-this.dim*R-ie)/2)+"px) translateZ("+je+"px)";this._updateItemStyle(_e,Ne,-R,xn)}}if(!this.noWrap||this.center>=0&&this.center<this.count){_e=this.images[this._wrap(this.center)];var Qt=Ue+" translateX("+-ie/2+"px) translateX("+ue*this.options.shift*se+"px) translateZ("+this.options.dist*se+"px)";this._updateItemStyle(_e,Ie,0,Qt)}var yn=this.$el.find(".carousel-item").eq(this._wrap(this.center));xt!==this.center&&typeof this.options.onCycleTo=="function"&&this.options.onCycleTo.call(this,yn[0],this.dragged),typeof this.oneTimeCallback=="function"&&(this.oneTimeCallback.call(this,yn[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(k,w,R,J){k.style[this.xform]=J,k.style.zIndex=R,k.style.opacity=w,k.style.visibility="visible"}},{key:"_cycleTo",value:function(k,w){var R=this.center%this.count-k;this.noWrap||(R<0?Math.abs(R+this.count)<Math.abs(R)&&(R+=this.count):R>0&&Math.abs(R-this.count)<R&&(R-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),R<0?this.target+=this.dim*Math.abs(R):R>0&&(this.target-=this.dim*R),typeof w=="function"&&(this.oneTimeCallback=w),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(k){(k===void 0||isNaN(k))&&(k=1);var w=this.center+k;if(w>=this.count||w<0){if(this.noWrap)return;w=this._wrap(w)}this._cycleTo(w)}},{key:"prev",value:function(k){(k===void 0||isNaN(k))&&(k=1);var w=this.center-k;if(w>=this.count||w<0){if(this.noWrap)return;w=this._wrap(w)}this._cycleTo(w)}},{key:"set",value:function(k,w){if((k===void 0||isNaN(k))&&(k=0),k>this.count||k<0){if(this.noWrap)return;k=this._wrap(k)}this._cycleTo(k,w)}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_Carousel}},{key:"defaults",get:function(){return H}}]),z}(o);M.Carousel=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"carousel","M_Carousel")}(cash),function(T){var H={onOpen:void 0,onClose:void 0},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.el.M_TapTarget=w,w.options=T.extend({},z.defaults,k),w.isOpen=!1,w.$origin=T("#"+w.$el.attr("data-target")),w._setup(),w._calculatePositioning(),w._setupEventHandlers(),w}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var k=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=k.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(k){this.open()}},{key:"_handleOriginClick",value:function(k){this.close()}},{key:"_handleResize",value:function(k){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(k){T(k.target).closest(".tap-target-wrapper").length||(this.close(),k.preventDefault(),k.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=T(this.wrapper).find(".tap-target-wave")[0],this.originEl=T(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],T(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(T(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var k=this.$origin.css("position")==="fixed";if(!k)for(var w=this.$origin.parents(),R=0;R<w.length&&(k=T(w[R]).css("position")=="fixed",!k);R++);var J=this.$origin.outerWidth(),ie=this.$origin.outerHeight(),ue=k?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,se=k?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,_e=window.innerWidth,Ue=window.innerHeight,je=_e/2,Ne=Ue/2,Ie=se<=je,xt=se>je,We=ue<=Ne,Et=ue>Ne,ct=se>=_e*.25&&se<=_e*.75,xe=this.$el.outerWidth(),Ee=this.$el.outerHeight(),xn=ue+ie/2-Ee/2,Qt=se+J/2-xe/2,yn=k?"fixed":"absolute",on=ct?xe:xe/2+J,Sn=Ee/2,Nn=We?Ee/2:0,bn=0,kn=Ie&&!ct?xe/2-J:0,Le=0,Ke=J,pt=Et?"bottom":"top",St=(J>ie,J*2),Ft=St,ht=Ee/2-Ft/2,Nt=xe/2-St/2,wn={};wn.top=We?xn+"px":"",wn.right=xt?_e-Qt-xe+"px":"",wn.bottom=Et?Ue-xn-Ee+"px":"",wn.left=Ie?Qt+"px":"",wn.position=yn,T(this.wrapper).css(wn),T(this.contentEl).css({width:on+"px",height:Sn+"px",top:Nn+"px",right:Le+"px",bottom:bn+"px",left:kn+"px",padding:Ke+"px",verticalAlign:pt}),T(this.waveEl).css({top:ht+"px",left:Nt+"px",width:St+"px",height:Ft+"px"})}},{key:"open",value:function(){this.isOpen||(typeof this.options.onOpen=="function"&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){!this.isOpen||(typeof this.options.onClose=="function"&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_TapTarget}},{key:"defaults",get:function(){return H}}]),z}(o);M.TapTarget=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"tapTarget","M_TapTarget")}(cash),function(T){var H={classes:"",dropdownOptions:{}},N=function(q){c(z,q);function z(B,k){d(this,z);var w=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,B,k));return w.$el.hasClass("browser-default")?a(w):(w.el.M_FormSelect=w,w.options=T.extend({},z.defaults,k),w.isMultiple=w.$el.prop("multiple"),w.el.tabIndex=-1,w._keysSelected={},w._valueDict={},w._setupDropdown(),w._setupEventHandlers(),w)}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var k=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),T(this.dropdownOptions).find("li:not(.optgroup)").each(function(w){w.addEventListener("click",k._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var k=this;T(this.dropdownOptions).find("li:not(.optgroup)").each(function(w){w.removeEventListener("click",k._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(k){this._setValueToInput()}},{key:"_handleOptionClick",value:function(k){k.preventDefault();var w=T(k.target).closest("li")[0],R=w.id;if(!T(w).hasClass("disabled")&&!T(w).hasClass("optgroup")&&R.length){var J=!0;if(this.isMultiple){var ie=T(this.dropdownOptions).find("li.disabled.selected");ie.length&&(ie.removeClass("selected"),ie.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(ie[0].id)),J=this._toggleEntryFromArray(R)}else T(this.dropdownOptions).find("li").removeClass("selected"),T(w).toggleClass("selected",J);var ue=T(this._valueDict[R].el).prop("selected");ue!==J&&(T(this._valueDict[R].el).prop("selected",J),this.$el.trigger("change"))}k.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var k=this;this.wrapper=document.createElement("div"),T(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(T(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),T(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(J){if(T(J).is("option")){var ie=void 0;k.isMultiple?ie=k._appendOptionWithIcon(k.$el,J,"multiple"):ie=k._appendOptionWithIcon(k.$el,J),k._addOptionToValueDict(J,ie)}else if(T(J).is("optgroup")){var ue=T(J).children("option");T(k.dropdownOptions).append(T('<li class="optgroup"><span>'+J.getAttribute("label")+"</span></li>")[0]),ue.each(function(se){var _e=k._appendOptionWithIcon(k.$el,se,"optgroup-option");k._addOptionToValueDict(se,_e)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),T(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&T(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var w=T('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(w[0]),!this.el.disabled){var R=T.extend({},this.options.dropdownOptions);R.onOpenEnd=function(J){var ie=T(k.dropdownOptions).find(".selected").first();if(ie.length&&(M.keyDown=!0,k.dropdown.focusedIndex=ie.index(),k.dropdown._focusFocusedItem(),M.keyDown=!1,k.dropdown.isScrollable)){var ue=ie[0].getBoundingClientRect().top-k.dropdownOptions.getBoundingClientRect().top;ue-=k.dropdownOptions.clientHeight/2,k.dropdownOptions.scrollTop=ue}},this.isMultiple&&(R.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,R)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(k,w){var R=Object.keys(this._valueDict).length,J=this.dropdownOptions.id+R,ie={};w.id=J,ie.el=k,ie.optionEl=w,this._valueDict[J]=ie}},{key:"_removeDropdown",value:function(){T(this.wrapper).find(".caret").remove(),T(this.input).remove(),T(this.dropdownOptions).remove(),T(this.wrapper).before(this.$el),T(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(k,w,R){var J=w.disabled?"disabled ":"",ie=R==="optgroup-option"?"optgroup-option ":"",ue=this.isMultiple?'<label><input type="checkbox"'+J+'"/><span>'+w.innerHTML+"</span></label>":w.innerHTML,se=T("<li></li>"),_e=T("<span></span>");_e.html(ue),se.addClass(J+" "+ie),se.append(_e);var Ue=w.getAttribute("data-icon");if(Ue){var je=T('<img alt="" src="'+Ue+'">');se.prepend(je)}return T(this.dropdownOptions).append(se[0]),se[0]}},{key:"_toggleEntryFromArray",value:function(k){var w=!this._keysSelected.hasOwnProperty(k),R=T(this._valueDict[k].optionEl);return w?this._keysSelected[k]=!0:delete this._keysSelected[k],R.toggleClass("selected",w),R.find('input[type="checkbox"]').prop("checked",w),R.prop("selected",w),w}},{key:"_setValueToInput",value:function(){var k=[],w=this.$el.find("option");if(w.each(function(J){if(T(J).prop("selected")){var ie=T(J).text();k.push(ie)}}),!k.length){var R=this.$el.find("option:disabled").eq(0);R.length&&R[0].value===""&&k.push(R.text())}this.input.value=k.join(", ")}},{key:"_setSelectedStates",value:function(){this._keysSelected={};for(var k in this._valueDict){var w=this._valueDict[k],R=T(w.el).prop("selected");T(w.optionEl).find('input[type="checkbox"]').prop("checked",R),R?(this._activateOption(T(this.dropdownOptions),T(w.optionEl)),this._keysSelected[k]=!0):T(w.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(k,w){if(w){this.isMultiple||k.find("li.selected").removeClass("selected");var R=T(w);R.addClass("selected")}}},{key:"getSelectedValues",value:function(){var k=[];for(var w in this._keysSelected)k.push(this._valueDict[w].el.value);return k}}],[{key:"init",value:function(k,w){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,k,w)}},{key:"getInstance",value:function(k){var w=k.jquery?k[0]:k;return w.M_FormSelect}},{key:"defaults",get:function(){return H}}]),z}(o);M.FormSelect=N,M.jQueryLoaded&&M.initializeJqueryWrapper(N,"formSelect","M_FormSelect")}(cash),function(T,H){var N={},q=function(z){c(B,z);function B(k,w){d(this,B);var R=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,k,w));return R.el.M_Range=R,R.options=T.extend({},B.defaults,w),R._mousedown=!1,R._setupThumb(),R._setupEventHandlers(),R}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){T(this.value).html(this.$el.val()),T(this.thumb).hasClass("active")||this._showRangeBubble();var w=this._calcRangeOffset();T(this.thumb).addClass("active").css("left",w+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(w){if(T(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),T(this.thumb).hasClass("active")||this._showRangeBubble(),w.type!=="input"){var R=this._calcRangeOffset();T(this.thumb).addClass("active").css("left",R+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){T(this.thumb).hasClass("active")||this._showRangeBubble();var w=this._calcRangeOffset();T(this.thumb).addClass("active").css("left",w+"px"),T(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var w=parseInt(this.$el.css("padding-left")),R=7+w+"px";T(this.thumb).hasClass("active")&&(H.remove(this.thumb),H({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:R,duration:100})),T(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),T(this.thumb).addClass("thumb"),T(this.value).addClass("value"),T(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){T(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var w=parseInt(T(this.thumb).parent().css("padding-left")),R=-7+w+"px";H.remove(this.thumb),H({targets:this.thumb,height:30,width:30,top:-30,marginLeft:R,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var w=this.$el.width()-15,R=parseFloat(this.$el.attr("max"))||100,J=parseFloat(this.$el.attr("min"))||0,ie=(parseFloat(this.$el.val())-J)/(R-J);return ie*w}}],[{key:"init",value:function(w,R){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,w,R)}},{key:"getInstance",value:function(w){var R=w.jquery?w[0]:w;return R.M_Range}},{key:"defaults",get:function(){return N}}]),B}(o);M.Range=q,M.jQueryLoaded&&M.initializeJqueryWrapper(q,"range","M_Range"),q.init(T("input[type=range]"))}(cash,M.anime)})(oC,oC.exports);var rG=oC.exports;const iG=()=>{m.exports.useContext(Hr);const e=Si();return m.exports.useEffect(()=>{go||e("/accounts/login?next=/blog")}),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"static/css/blog-list.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"card-container"},oG())))},oG=()=>{const[e,t]=m.exports.useState([]),n=m.exports.useContext(Hr),[r,a]=m.exports.useState([]);return m.exports.useEffect(()=>{const c=`${lr.OBJECT}/blog-post`;n.getAPI(c).then(d=>{t(d.data.results)}).catch(d=>{n.refreshAuth()}),n.getAPI(`${lr.OBJECT}/tag`).then(d=>{const o=d.data.results;a(o)}).catch(()=>{n.refreshAuth()})},[]),e.map(c=>{let d=[];for(let o=0;o<c.tags.length;o++)for(let v=0;v<r.length;v++)c.tags[o]==r[v].id&&d.push(r[v]);return m.exports.createElement(aG,{post:c,tags:d,key:c.id})})},aG=e=>{const t=e.post;let r=m.exports.useContext(Hr).allUsers.find(a=>a.id===t.author);return r?m.exports.createElement("div",{className:"card"},m.exports.createElement("div",{className:"card-headers"},m.exports.createElement("img",{className:"card-image",src:t.featured_image}),m.exports.createElement("div",{className:"card-text"},m.exports.createElement("div",{className:"tag-section"},e.tags.map(a=>m.exports.createElement(_g,{key:a.id,tag:a}))),m.exports.createElement("h1",{className:"title"},t.title),m.exports.createElement("div",{className:"card-authors"},m.exports.createElement("div",{className:"card-authors-image"},m.exports.createElement(Yt,{to:`/user/${t.author}`},m.exports.createElement("img",{className:"circle",src:r.gravatar_url}))),m.exports.createElement("div",{className:"card-authors-text"},m.exports.createElement(Yt,{to:`/user/${t.author}`,className:"link"},r&&`${r.first_name} ${r.last_name}`),m.exports.createElement("br",null),"\u2022 posted ",new Date(t.created_date).toLocaleTimeString(void 0,Yx))))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"card-body"},m.exports.createElement("p",null,t.body)),m.exports.createElement("br",null),m.exports.createElement(Yt,{className:"link",to:`/blog/${t.id}`},"Read full blog post ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))):m.exports.createElement(m.exports.Fragment,null)},e4=()=>m.exports.createElement("div",{className:"secondary-nav-wrapper"},m.exports.createElement("ul",{className:"secondary-nav"},m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link current",to:"/accounts/profile"},"Profile")),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"/timetable"},"Timetable")),m.exports.createElement("hr",null),m.exports.createElement("li",null,m.exports.createElement("a",{className:"link",href:"/admin/core/announcement/add/"},"Announcements")),m.exports.createElement("li",null,m.exports.createElement("a",{className:"link",href:"/admin/core/event/add/"},"Events")),m.exports.createElement("hr",null),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link",to:"/accounts/logout/"},"Logout")))),$I=e=>{const{userID:t}=Og(),n=m.exports.useContext(Hr),r=Si();n.user;const[a,c]=m.exports.useState({});m.exports.useState([]),m.exports.useEffect(()=>{document.title=`User ${a.username} | Metropolis`},[a]);const d=()=>{!t||n.getAPI(`${lr.USER}/${t}`,!0).then(o=>{const v=o.data;c(o.data),console.log("Fetched user:",v),n.getAPI(`${lr.OBJECT}/organization`,!1).then(C=>{C.data.results}).catch(C=>{})}).catch(o=>{console.log(o),n.refreshAuth(),d()})};return m.exports.useEffect(()=>{go()||r("/accounts/login")}),m.exports.useEffect(()=>{d()},[]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/profile/detail.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/secondary.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("ul",{className:"sidenav secondnav",id:"secondary-out"},m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"sidenav-close",to:"/accounts/profile"},"Profile")),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"sidenav-close",to:"/timetable"},"Timetable")),m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link sidenav-close",to:"/admin/core/announcement/add/"},"Add announcement")),m.exports.createElement("li",null,m.exports.createElement(Yt,{className:"link sidenav-close",to:"/admin/core/event/add/"},"Add event")),m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null,m.exports.createElement(Yt,{to:"/accounts/logout/",className:"sidenav-close"},"Logout"))),m.exports.createElement(e4,null),m.exports.createElement("div",{className:"white-bg"},e.children)))},HI=["http","https","mailto","tel"];function sG(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let a=-1;for(;++a<HI.length;){const c=HI[a];if(r===c.length&&t.slice(0,c.length).toLowerCase()===c)return t}return a=t.indexOf("?"),a!==-1&&r>a||(a=t.indexOf("#"),a!==-1&&r>a)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var t4=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};function Zm(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?WI(e.position):"start"in e||"end"in e?WI(e):"line"in e||"column"in e?aC(e):""}function aC(e){return GI(e&&e.line)+":"+GI(e&&e.column)}function WI(e){return aC(e&&e.start)+"-"+aC(e&&e.end)}function GI(e){return e&&typeof e=="number"?e:1}class Ja extends Error{constructor(t,n,r){const a=[null,null];let c={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const d=r.indexOf(":");d===-1?a[1]=r:(a[0]=r.slice(0,d),a[1]=r.slice(d+1))}n&&("type"in n||"position"in n?n.position&&(c=n.position):"start"in n||"end"in n?c=n:("line"in n||"column"in n)&&(c.start=n)),this.name=Zm(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack=typeof t=="object"?t.stack:"",this.reason=this.message,this.fatal,this.line=c.start.line,this.column=c.start.column,this.source=a[0],this.ruleId=a[1],this.position=c,this.actual,this.expected,this.file,this.url,this.note}}Ja.prototype.file="";Ja.prototype.name="";Ja.prototype.reason="";Ja.prototype.message="";Ja.prototype.stack="";Ja.prototype.fatal=null;Ja.prototype.column=null;Ja.prototype.line=null;Ja.prototype.source=null;Ja.prototype.ruleId=null;Ja.prototype.position=null;const Hs={basename:lG,dirname:uG,extname:cG,join:hG,sep:"/"};function lG(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');$g(e);let n=0,r=-1,a=e.length,c;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.charCodeAt(a)===47){if(c){n=a+1;break}}else r<0&&(c=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let d=-1,o=t.length-1;for(;a--;)if(e.charCodeAt(a)===47){if(c){n=a+1;break}}else d<0&&(c=!0,d=a+1),o>-1&&(e.charCodeAt(a)===t.charCodeAt(o--)?o<0&&(r=a):(o=-1,r=d));return n===r?r=d:r<0&&(r=e.length),e.slice(n,r)}function uG(e){if($g(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function cG(e){$g(e);let t=e.length,n=-1,r=0,a=-1,c=0,d;for(;t--;){const o=e.charCodeAt(t);if(o===47){if(d){r=t+1;break}continue}n<0&&(d=!0,n=t+1),o===46?a<0?a=t:c!==1&&(c=1):a>-1&&(c=-1)}return a<0||n<0||c===0||c===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function hG(...e){let t=-1,n;for(;++t<e.length;)$g(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":dG(n)}function dG(e){$g(e);const t=e.charCodeAt(0)===47;let n=pG(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function pG(e,t){let n="",r=0,a=-1,c=0,d=-1,o,v;for(;++d<=e.length;){if(d<e.length)o=e.charCodeAt(d);else{if(o===47)break;o=47}if(o===47){if(!(a===d-1||c===1))if(a!==d-1&&c===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(v=n.lastIndexOf("/"),v!==n.length-1){v<0?(n="",r=0):(n=n.slice(0,v),r=n.length-1-n.lastIndexOf("/")),a=d,c=0;continue}}else if(n.length>0){n="",r=0,a=d,c=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,d):n=e.slice(a+1,d),r=d-a-1;a=d,c=0}else o===46&&c>-1?c++:c=-1}return n}function $g(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const fG={cwd:mG};function mG(){return"/"}function sC(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function gG(e){if(typeof e=="string")e=new URL(e);else if(!sC(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return yG(e)}function yG(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const hw=["history","path","basename","stem","extname","dirname"];class n4{constructor(t){let n;t?typeof t=="string"||t4(t)?n={value:t}:sC(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=fG.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<hw.length;){const c=hw[r];c in n&&n[c]!==void 0&&(this[c]=c==="history"?[...n[c]]:n[c])}let a;for(a in n)hw.includes(a)||(this[a]=n[a])}get path(){return this.history[this.history.length-1]}set path(t){sC(t)&&(t=gG(t)),pw(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Hs.dirname(this.path):void 0}set dirname(t){qI(this.basename,"dirname"),this.path=Hs.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Hs.basename(this.path):void 0}set basename(t){pw(t,"basename"),dw(t,"basename"),this.path=Hs.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Hs.extname(this.path):void 0}set extname(t){if(dw(t,"extname"),qI(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Hs.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Hs.basename(this.path,this.extname):void 0}set stem(t){pw(t,"stem"),dw(t,"stem"),this.path=Hs.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const a=new Ja(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=null,a}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}}function dw(e,t){if(e&&e.includes(Hs.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Hs.sep+"`")}function pw(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function qI(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ZI(e){if(e)throw e}var k_=Object.prototype.hasOwnProperty,r4=Object.prototype.toString,XI=Object.defineProperty,KI=Object.getOwnPropertyDescriptor,YI=function(t){return typeof Array.isArray=="function"?Array.isArray(t):r4.call(t)==="[object Array]"},JI=function(t){if(!t||r4.call(t)!=="[object Object]")return!1;var n=k_.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&k_.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a=="undefined"||k_.call(t,a)},QI=function(t,n){XI&&n.name==="__proto__"?XI(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},eP=function(t,n){if(n==="__proto__")if(k_.call(t,n)){if(KI)return KI(t,n).value}else return;return t[n]},tP=function e(){var t,n,r,a,c,d,o=arguments[0],v=1,C=arguments.length,I=!1;for(typeof o=="boolean"&&(I=o,o=arguments[1]||{},v=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});v<C;++v)if(t=arguments[v],t!=null)for(n in t)r=eP(o,n),a=eP(t,n),o!==a&&(I&&a&&(JI(a)||(c=YI(a)))?(c?(c=!1,d=r&&YI(r)?r:[]):d=r&&JI(r)?r:{},QI(o,{name:n,newValue:e(I,d,a)})):typeof a!="undefined"&&QI(o,{name:n,newValue:a}));return o};function lC(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function vG(){const e=[],t={run:n,use:r};return t;function n(...a){let c=-1;const d=a.pop();if(typeof d!="function")throw new TypeError("Expected function as last argument, not "+d);o(null,...a);function o(v,...C){const I=e[++c];let D=-1;if(v){d(v);return}for(;++D<a.length;)(C[D]===null||C[D]===void 0)&&(C[D]=a[D]);a=C,I?_G(I,o)(...C):d(null,...C)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function _G(e,t){let n;return r;function r(...d){const o=e.length>d.length;let v;o&&d.push(a);try{v=e.apply(this,d)}catch(C){const I=C;if(o&&n)throw I;return a(I)}o||(v instanceof Promise?v.then(c,a):v instanceof Error?a(v):c(v))}function a(d,...o){n||(n=!0,t(d,...o))}function c(d){a(null,d)}}const xG=o4().freeze(),i4={}.hasOwnProperty;function o4(){const e=vG(),t=[];let n={},r,a=-1;return c.data=d,c.Parser=void 0,c.Compiler=void 0,c.freeze=o,c.attachers=t,c.use=v,c.parse=C,c.stringify=I,c.run=D,c.runSync=F,c.process=U,c.processSync=j,c;function c(){const T=o4();let H=-1;for(;++H<t.length;)T.use(...t[H]);return T.data(tP(!0,{},n)),T}function d(T,H){return typeof T=="string"?arguments.length===2?(gw("data",r),n[T]=H,c):i4.call(n,T)&&n[T]||null:T?(gw("data",r),n=T,c):n}function o(){if(r)return c;for(;++a<t.length;){const[T,...H]=t[a];if(H[0]===!1)continue;H[0]===!0&&(H[0]=void 0);const N=T.call(c,...H);typeof N=="function"&&e.use(N)}return r=!0,a=Number.POSITIVE_INFINITY,c}function v(T,...H){let N;if(gw("use",r),T!=null)if(typeof T=="function")k(T,...H);else if(typeof T=="object")Array.isArray(T)?B(T):z(T);else throw new TypeError("Expected usable value, not `"+T+"`");return N&&(n.settings=Object.assign(n.settings||{},N)),c;function q(w){if(typeof w=="function")k(w);else if(typeof w=="object")if(Array.isArray(w)){const[R,...J]=w;k(R,...J)}else z(w);else throw new TypeError("Expected usable value, not `"+w+"`")}function z(w){B(w.plugins),w.settings&&(N=Object.assign(N||{},w.settings))}function B(w){let R=-1;if(w!=null)if(Array.isArray(w))for(;++R<w.length;){const J=w[R];q(J)}else throw new TypeError("Expected a list of plugins, not `"+w+"`")}function k(w,R){let J=-1,ie;for(;++J<t.length;)if(t[J][0]===w){ie=t[J];break}ie?(lC(ie[1])&&lC(R)&&(R=tP(!0,ie[1],R)),ie[1]=R):t.push([...arguments])}}function C(T){c.freeze();const H=wm(T),N=c.Parser;return fw("parse",N),nP(N,"parse")?new N(String(H),H).parse():N(String(H),H)}function I(T,H){c.freeze();const N=wm(H),q=c.Compiler;return mw("stringify",q),rP(T),nP(q,"compile")?new q(T,N).compile():q(T,N)}function D(T,H,N){if(rP(T),c.freeze(),!N&&typeof H=="function"&&(N=H,H=void 0),!N)return new Promise(q);q(null,N);function q(z,B){e.run(T,wm(H),k);function k(w,R,J){R=R||T,w?B(w):z?z(R):N(null,R,J)}}}function F(T,H){let N,q;return c.run(T,H,z),iP("runSync","run",q),N;function z(B,k){ZI(B),N=k,q=!0}}function U(T,H){if(c.freeze(),fw("process",c.Parser),mw("process",c.Compiler),!H)return new Promise(N);N(null,H);function N(q,z){const B=wm(T);c.run(c.parse(B),B,(w,R,J)=>{if(w||!R||!J)k(w);else{const ie=c.stringify(R,J);ie==null||(EG(ie)?J.value=ie:J.result=ie),k(w,J)}});function k(w,R){w||!R?z(w):q?q(R):H(null,R)}}}function j(T){let H;c.freeze(),fw("processSync",c.Parser),mw("processSync",c.Compiler);const N=wm(T);return c.process(N,q),iP("processSync","process",H),N;function q(z){H=!0,ZI(z)}}}function nP(e,t){return typeof e=="function"&&e.prototype&&(bG(e.prototype)||t in e.prototype)}function bG(e){let t;for(t in e)if(i4.call(e,t))return!0;return!1}function fw(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function mw(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function gw(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function rP(e){if(!lC(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function iP(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function wm(e){return wG(e)?e:new n4(e)}function wG(e){return Boolean(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function EG(e){return typeof e=="string"||t4(e)}function CG(e,t){var{includeImageAlt:n=!0}=t||{};return a4(e,n)}function a4(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&oP(e.children,t)||Array.isArray(e)&&oP(e,t))||""}function oP(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=a4(e[r],t);return n.join("")}function Ea(e,t,n,r){const a=e.length;let c=0,d;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)d=Array.from(r),d.unshift(t,n),[].splice.apply(e,d);else for(n&&[].splice.apply(e,[t,n]);c<r.length;)d=r.slice(c,c+1e4),d.unshift(t,0),[].splice.apply(e,d),c+=1e4,t+=1e4}function Ha(e,t){return e.length>0?(Ea(e,e.length,0,t),e):t}const aP={}.hasOwnProperty;function s4(e){const t={};let n=-1;for(;++n<e.length;)SG(t,e[n]);return t}function SG(e,t){let n;for(n in t){const a=(aP.call(e,n)?e[n]:void 0)||(e[n]={}),c=t[n];let d;for(d in c){aP.call(a,d)||(a[d]=[]);const o=c[d];kG(a[d],Array.isArray(o)?o:o?[o]:[])}}}function kG(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ea(e,0,0,r)}const TG=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Wa=Ju(/[A-Za-z]/),wx=Ju(/\d/),AG=Ju(/[\dA-Fa-f]/),Wo=Ju(/[\dA-Za-z]/),MG=Ju(/[!-/:-@[-`{-~]/),sP=Ju(/[#-'*+\--9=?A-Z^-~]/);function Eg(e){return e!==null&&(e<32||e===127)}function Fi(e){return e!==null&&(e<0||e===32)}function Cn(e){return e!==null&&e<-2}function $r(e){return e===-2||e===-1||e===32}const a0=Ju(/\s/),s0=Ju(TG);function Ju(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function mr(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let c=0;return d;function d(v){return $r(v)?(e.enter(n),o(v)):t(v)}function o(v){return $r(v)&&c++<a?(e.consume(v),o):(e.exit(n),t(v))}}const IG={tokenize:PG};function PG(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),mr(e,t,"linePrefix")}function a(o){return e.enter("paragraph"),c(o)}function c(o){const v=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=v),n=v,d(o)}function d(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return Cn(o)?(e.consume(o),e.exit("chunkText"),c):(e.consume(o),d)}}const DG={tokenize:RG},lP={tokenize:LG};function RG(e){const t=this,n=[];let r=0,a,c,d;return o;function o(z){if(r<n.length){const B=n[r];return t.containerState=B[1],e.attempt(B[0].continuation,v,C)(z)}return C(z)}function v(z){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&q();const B=t.events.length;let k=B,w;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){w=t.events[k][1].end;break}N(r);let R=B;for(;R<t.events.length;)t.events[R][1].end=Object.assign({},w),R++;return Ea(t.events,k+1,0,t.events.slice(B)),t.events.length=R,C(z)}return o(z)}function C(z){if(r===n.length){if(!a)return F(z);if(a.currentConstruct&&a.currentConstruct.concrete)return j(z);t.interrupt=Boolean(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(lP,I,D)(z)}function I(z){return a&&q(),N(r),F(z)}function D(z){return t.parser.lazy[t.now().line]=r!==n.length,d=t.now().offset,j(z)}function F(z){return t.containerState={},e.attempt(lP,U,j)(z)}function U(z){return r++,n.push([t.currentConstruct,t.containerState]),F(z)}function j(z){if(z===null){a&&q(),N(0),e.consume(z);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:c,_tokenizer:a}),T(z)}function T(z){if(z===null){H(e.exit("chunkFlow"),!0),N(0),e.consume(z);return}return Cn(z)?(e.consume(z),H(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(z),T)}function H(z,B){const k=t.sliceStream(z);if(B&&k.push(null),z.previous=c,c&&(c.next=z),c=z,a.defineSkip(z.start),a.write(k),t.parser.lazy[z.start.line]){let w=a.events.length;for(;w--;)if(a.events[w][1].start.offset<d&&(!a.events[w][1].end||a.events[w][1].end.offset>d))return;const R=t.events.length;let J=R,ie,ue;for(;J--;)if(t.events[J][0]==="exit"&&t.events[J][1].type==="chunkFlow"){if(ie){ue=t.events[J][1].end;break}ie=!0}for(N(r),w=R;w<t.events.length;)t.events[w][1].end=Object.assign({},ue),w++;Ea(t.events,J+1,0,t.events.slice(R)),t.events.length=w}}function N(z){let B=n.length;for(;B-- >z;){const k=n[B];t.containerState=k[1],k[0].exit.call(t,e)}n.length=z}function q(){a.write([null]),c=void 0,a=void 0,t.containerState._closeFlow=void 0}}function LG(e,t,n){return mr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ex(e){if(e===null||Fi(e)||a0(e))return 1;if(s0(e))return 2}function l0(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const c=e[a].resolveAll;c&&!r.includes(c)&&(t=c(t,n),r.push(c))}return t}const uC={name:"attention",tokenize:zG,resolveAll:OG};function OG(e,t){let n=-1,r,a,c,d,o,v,C,I;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;v=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const D=Object.assign({},e[r][1].end),F=Object.assign({},e[n][1].start);uP(D,-v),uP(F,v),d={type:v>1?"strongSequence":"emphasisSequence",start:D,end:Object.assign({},e[r][1].end)},o={type:v>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:F},c={type:v>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a={type:v>1?"strong":"emphasis",start:Object.assign({},d.start),end:Object.assign({},o.end)},e[r][1].end=Object.assign({},d.start),e[n][1].start=Object.assign({},o.end),C=[],e[r][1].end.offset-e[r][1].start.offset&&(C=Ha(C,[["enter",e[r][1],t],["exit",e[r][1],t]])),C=Ha(C,[["enter",a,t],["enter",d,t],["exit",d,t],["enter",c,t]]),C=Ha(C,l0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),C=Ha(C,[["exit",c,t],["enter",o,t],["exit",o,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(I=2,C=Ha(C,[["enter",e[n][1],t],["exit",e[n][1],t]])):I=0,Ea(e,r-1,n-r+3,C),n=r+C.length-I-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function zG(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Ex(r);let c;return d;function d(v){return e.enter("attentionSequence"),c=v,o(v)}function o(v){if(v===c)return e.consume(v),o;const C=e.exit("attentionSequence"),I=Ex(v),D=!I||I===2&&a||n.includes(v),F=!a||a===2&&I||n.includes(r);return C._open=Boolean(c===42?D:D&&(a||!F)),C._close=Boolean(c===42?F:F&&(I||!D)),t(v)}}function uP(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const BG={name:"autolink",tokenize:FG};function FG(e,t,n){let r=1;return a;function a(j){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(j),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),c}function c(j){return Wa(j)?(e.consume(j),d):sP(j)?C(j):n(j)}function d(j){return j===43||j===45||j===46||Wo(j)?o(j):C(j)}function o(j){return j===58?(e.consume(j),v):(j===43||j===45||j===46||Wo(j))&&r++<32?(e.consume(j),o):C(j)}function v(j){return j===62?(e.exit("autolinkProtocol"),U(j)):j===null||j===32||j===60||Eg(j)?n(j):(e.consume(j),v)}function C(j){return j===64?(e.consume(j),r=0,I):sP(j)?(e.consume(j),C):n(j)}function I(j){return Wo(j)?D(j):n(j)}function D(j){return j===46?(e.consume(j),r=0,I):j===62?(e.exit("autolinkProtocol").type="autolinkEmail",U(j)):F(j)}function F(j){return(j===45||Wo(j))&&r++<63?(e.consume(j),j===45?F:D):n(j)}function U(j){return e.enter("autolinkMarker"),e.consume(j),e.exit("autolinkMarker"),e.exit("autolink"),t}}const Hg={tokenize:NG,partial:!0};function NG(e,t,n){return mr(e,r,"linePrefix");function r(a){return a===null||Cn(a)?t(a):n(a)}}const l4={name:"blockQuote",tokenize:UG,continuation:{tokenize:jG},exit:VG};function UG(e,t,n){const r=this;return a;function a(d){if(d===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(d),e.exit("blockQuoteMarker"),c}return n(d)}function c(d){return $r(d)?(e.enter("blockQuotePrefixWhitespace"),e.consume(d),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(d))}}function jG(e,t,n){return mr(e,e.attempt(l4,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function VG(e){e.exit("blockQuote")}const u4={name:"characterEscape",tokenize:$G};function $G(e,t,n){return r;function r(c){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(c),e.exit("escapeMarker"),a}function a(c){return MG(c)?(e.enter("characterEscapeValue"),e.consume(c),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(c)}}const cP=document.createElement("i");function ak(e){const t="&"+e+";";cP.innerHTML=t;const n=cP.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const c4={name:"characterReference",tokenize:HG};function HG(e,t,n){const r=this;let a=0,c,d;return o;function o(D){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(D),e.exit("characterReferenceMarker"),v}function v(D){return D===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(D),e.exit("characterReferenceMarkerNumeric"),C):(e.enter("characterReferenceValue"),c=31,d=Wo,I(D))}function C(D){return D===88||D===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(D),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),c=6,d=AG,I):(e.enter("characterReferenceValue"),c=7,d=wx,I(D))}function I(D){let F;return D===59&&a?(F=e.exit("characterReferenceValue"),d===Wo&&!ak(r.sliceSerialize(F))?n(D):(e.enter("characterReferenceMarker"),e.consume(D),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):d(D)&&a++<c?(e.consume(D),I):n(D)}}const hP={name:"codeFenced",tokenize:WG,concrete:!0};function WG(e,t,n){const r=this,a={tokenize:k,partial:!0},c={tokenize:B,partial:!0},d=this.events[this.events.length-1],o=d&&d[1].type==="linePrefix"?d[2].sliceSerialize(d[1],!0).length:0;let v=0,C;return I;function I(w){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),C=w,D(w)}function D(w){return w===C?(e.consume(w),v++,D):(e.exit("codeFencedFenceSequence"),v<3?n(w):mr(e,F,"whitespace")(w))}function F(w){return w===null||Cn(w)?H(w):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),U(w))}function U(w){return w===null||Fi(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),mr(e,j,"whitespace")(w)):w===96&&w===C?n(w):(e.consume(w),U)}function j(w){return w===null||Cn(w)?H(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),T(w))}function T(w){return w===null||Cn(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),H(w)):w===96&&w===C?n(w):(e.consume(w),T)}function H(w){return e.exit("codeFencedFence"),r.interrupt?t(w):N(w)}function N(w){return w===null?z(w):Cn(w)?e.attempt(c,e.attempt(a,z,o?mr(e,N,"linePrefix",o+1):N),z)(w):(e.enter("codeFlowValue"),q(w))}function q(w){return w===null||Cn(w)?(e.exit("codeFlowValue"),N(w)):(e.consume(w),q)}function z(w){return e.exit("codeFenced"),t(w)}function B(w,R,J){const ie=this;return ue;function ue(_e){return w.enter("lineEnding"),w.consume(_e),w.exit("lineEnding"),se}function se(_e){return ie.parser.lazy[ie.now().line]?J(_e):R(_e)}}function k(w,R,J){let ie=0;return mr(w,ue,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function ue(Ue){return w.enter("codeFencedFence"),w.enter("codeFencedFenceSequence"),se(Ue)}function se(Ue){return Ue===C?(w.consume(Ue),ie++,se):ie<v?J(Ue):(w.exit("codeFencedFenceSequence"),mr(w,_e,"whitespace")(Ue))}function _e(Ue){return Ue===null||Cn(Ue)?(w.exit("codeFencedFence"),R(Ue)):J(Ue)}}}const yw={name:"codeIndented",tokenize:qG},GG={tokenize:ZG,partial:!0};function qG(e,t,n){const r=this;return a;function a(C){return e.enter("codeIndented"),mr(e,c,"linePrefix",4+1)(C)}function c(C){const I=r.events[r.events.length-1];return I&&I[1].type==="linePrefix"&&I[2].sliceSerialize(I[1],!0).length>=4?d(C):n(C)}function d(C){return C===null?v(C):Cn(C)?e.attempt(GG,d,v)(C):(e.enter("codeFlowValue"),o(C))}function o(C){return C===null||Cn(C)?(e.exit("codeFlowValue"),d(C)):(e.consume(C),o)}function v(C){return e.exit("codeIndented"),t(C)}}function ZG(e,t,n){const r=this;return a;function a(d){return r.parser.lazy[r.now().line]?n(d):Cn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),a):mr(e,c,"linePrefix",4+1)(d)}function c(d){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(d):Cn(d)?a(d):n(d)}}const XG={name:"codeText",tokenize:JG,resolve:KG,previous:YG};function KG(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function YG(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function JG(e,t,n){let r=0,a,c;return d;function d(D){return e.enter("codeText"),e.enter("codeTextSequence"),o(D)}function o(D){return D===96?(e.consume(D),r++,o):(e.exit("codeTextSequence"),v(D))}function v(D){return D===null?n(D):D===96?(c=e.enter("codeTextSequence"),a=0,I(D)):D===32?(e.enter("space"),e.consume(D),e.exit("space"),v):Cn(D)?(e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),v):(e.enter("codeTextData"),C(D))}function C(D){return D===null||D===32||D===96||Cn(D)?(e.exit("codeTextData"),v(D)):(e.consume(D),C)}function I(D){return D===96?(e.consume(D),a++,I):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(D)):(c.type="codeTextData",C(D))}}function h4(e){const t={};let n=-1,r,a,c,d,o,v,C;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(v=r[1]._tokenizer.events,c=0,c<v.length&&v[c][1].type==="lineEndingBlank"&&(c+=2),c<v.length&&v[c][1].type==="content"))for(;++c<v.length&&v[c][1].type!=="content";)v[c][1].type==="chunkText"&&(v[c][1]._isInFirstContentOfListItem=!0,c++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,QG(e,n)),n=t[n],C=!0);else if(r[1]._container){for(c=n,a=void 0;c--&&(d=e[c],d[1].type==="lineEnding"||d[1].type==="lineEndingBlank");)d[0]==="enter"&&(a&&(e[a][1].type="lineEndingBlank"),d[1].type="lineEnding",a=c);a&&(r[1].end=Object.assign({},e[a][1].start),o=e.slice(a,n),o.unshift(r),Ea(e,a,n-a+1,o))}}return!C}function QG(e,t){const n=e[t][1],r=e[t][2];let a=t-1;const c=[],d=n._tokenizer||r.parser[n.contentType](n.start),o=d.events,v=[],C={};let I,D,F=-1,U=n,j=0,T=0;const H=[T];for(;U;){for(;e[++a][1]!==U;);c.push(a),U._tokenizer||(I=r.sliceStream(U),U.next||I.push(null),D&&d.defineSkip(U.start),U._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=!0),d.write(I),U._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=void 0)),D=U,U=U.next}for(U=n;++F<o.length;)o[F][0]==="exit"&&o[F-1][0]==="enter"&&o[F][1].type===o[F-1][1].type&&o[F][1].start.line!==o[F][1].end.line&&(T=F+1,H.push(T),U._tokenizer=void 0,U.previous=void 0,U=U.next);for(d.events=[],U?(U._tokenizer=void 0,U.previous=void 0):H.pop(),F=H.length;F--;){const N=o.slice(H[F],H[F+1]),q=c.pop();v.unshift([q,q+N.length-1]),Ea(e,q,2,N)}for(F=-1;++F<v.length;)C[j+v[F][0]]=j+v[F][1],j+=v[F][1]-v[F][0]-1;return C}const eq={tokenize:rq,resolve:nq},tq={tokenize:iq,partial:!0};function nq(e){return h4(e),e}function rq(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(o)}function a(o){return o===null?c(o):Cn(o)?e.check(tq,d,c)(o):(e.consume(o),a)}function c(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function d(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function iq(e,t,n){const r=this;return a;function a(d){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),mr(e,c,"linePrefix")}function c(d){if(d===null||Cn(d))return n(d);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(d):e.interrupt(r.parser.constructs.flow,n,t)(d)}}function d4(e,t,n,r,a,c,d,o,v){const C=v||Number.POSITIVE_INFINITY;let I=0;return D;function D(N){return N===60?(e.enter(r),e.enter(a),e.enter(c),e.consume(N),e.exit(c),F):N===null||N===41||Eg(N)?n(N):(e.enter(r),e.enter(d),e.enter(o),e.enter("chunkString",{contentType:"string"}),T(N))}function F(N){return N===62?(e.enter(c),e.consume(N),e.exit(c),e.exit(a),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),U(N))}function U(N){return N===62?(e.exit("chunkString"),e.exit(o),F(N)):N===null||N===60||Cn(N)?n(N):(e.consume(N),N===92?j:U)}function j(N){return N===60||N===62||N===92?(e.consume(N),U):U(N)}function T(N){return N===40?++I>C?n(N):(e.consume(N),T):N===41?I--?(e.consume(N),T):(e.exit("chunkString"),e.exit(o),e.exit(d),e.exit(r),t(N)):N===null||Fi(N)?I?n(N):(e.exit("chunkString"),e.exit(o),e.exit(d),e.exit(r),t(N)):Eg(N)?n(N):(e.consume(N),N===92?H:T)}function H(N){return N===40||N===41||N===92?(e.consume(N),T):T(N)}}function p4(e,t,n,r,a,c){const d=this;let o=0,v;return C;function C(U){return e.enter(r),e.enter(a),e.consume(U),e.exit(a),e.enter(c),I}function I(U){return U===null||U===91||U===93&&!v||U===94&&!o&&"_hiddenFootnoteSupport"in d.parser.constructs||o>999?n(U):U===93?(e.exit(c),e.enter(a),e.consume(U),e.exit(a),e.exit(r),t):Cn(U)?(e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),I):(e.enter("chunkString",{contentType:"string"}),D(U))}function D(U){return U===null||U===91||U===93||Cn(U)||o++>999?(e.exit("chunkString"),I(U)):(e.consume(U),v=v||!$r(U),U===92?F:D)}function F(U){return U===91||U===92||U===93?(e.consume(U),o++,D):D(U)}}function f4(e,t,n,r,a,c){let d;return o;function o(F){return e.enter(r),e.enter(a),e.consume(F),e.exit(a),d=F===40?41:F,v}function v(F){return F===d?(e.enter(a),e.consume(F),e.exit(a),e.exit(r),t):(e.enter(c),C(F))}function C(F){return F===d?(e.exit(c),v(d)):F===null?n(F):Cn(F)?(e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),mr(e,C,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),I(F))}function I(F){return F===d||F===null||Cn(F)?(e.exit("chunkString"),C(F)):(e.consume(F),F===92?D:I)}function D(F){return F===d||F===92?(e.consume(F),I):I(F)}}function Xm(e,t){let n;return r;function r(a){return Cn(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):$r(a)?mr(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}function ws(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const oq={name:"definition",tokenize:sq},aq={tokenize:lq,partial:!0};function sq(e,t,n){const r=this;let a;return c;function c(v){return e.enter("definition"),p4.call(r,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function d(v){return a=ws(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(e.enter("definitionMarker"),e.consume(v),e.exit("definitionMarker"),Xm(e,d4(e,e.attempt(aq,mr(e,o,"whitespace"),mr(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(v)}function o(v){return v===null||Cn(v)?(e.exit("definition"),r.parser.defined.includes(a)||r.parser.defined.push(a),t(v)):n(v)}}function lq(e,t,n){return r;function r(d){return Fi(d)?Xm(e,a)(d):n(d)}function a(d){return d===34||d===39||d===40?f4(e,mr(e,c,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d):n(d)}function c(d){return d===null||Cn(d)?t(d):n(d)}}const uq={name:"hardBreakEscape",tokenize:cq};function cq(e,t,n){return r;function r(c){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(c),a}function a(c){return Cn(c)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(c)):n(c)}}const hq={name:"headingAtx",tokenize:pq,resolve:dq};function dq(e,t){let n=e.length-2,r=3,a,c;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},c={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ea(e,r,n-r+1,[["enter",a,t],["enter",c,t],["exit",c,t],["exit",a,t]])),e}function pq(e,t,n){const r=this;let a=0;return c;function c(I){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),d(I)}function d(I){return I===35&&a++<6?(e.consume(I),d):I===null||Fi(I)?(e.exit("atxHeadingSequence"),r.interrupt?t(I):o(I)):n(I)}function o(I){return I===35?(e.enter("atxHeadingSequence"),v(I)):I===null||Cn(I)?(e.exit("atxHeading"),t(I)):$r(I)?mr(e,o,"whitespace")(I):(e.enter("atxHeadingText"),C(I))}function v(I){return I===35?(e.consume(I),v):(e.exit("atxHeadingSequence"),o(I))}function C(I){return I===null||I===35||Fi(I)?(e.exit("atxHeadingText"),o(I)):(e.consume(I),C)}}const fq=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dP=["pre","script","style","textarea"],mq={name:"htmlFlow",tokenize:vq,resolveTo:yq,concrete:!0},gq={tokenize:_q,partial:!0};function yq(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function vq(e,t,n){const r=this;let a,c,d,o,v;return C;function C(Ee){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(Ee),I}function I(Ee){return Ee===33?(e.consume(Ee),D):Ee===47?(e.consume(Ee),j):Ee===63?(e.consume(Ee),a=3,r.interrupt?t:Et):Wa(Ee)?(e.consume(Ee),d=String.fromCharCode(Ee),c=!0,T):n(Ee)}function D(Ee){return Ee===45?(e.consume(Ee),a=2,F):Ee===91?(e.consume(Ee),a=5,d="CDATA[",o=0,U):Wa(Ee)?(e.consume(Ee),a=4,r.interrupt?t:Et):n(Ee)}function F(Ee){return Ee===45?(e.consume(Ee),r.interrupt?t:Et):n(Ee)}function U(Ee){return Ee===d.charCodeAt(o++)?(e.consume(Ee),o===d.length?r.interrupt?t:se:U):n(Ee)}function j(Ee){return Wa(Ee)?(e.consume(Ee),d=String.fromCharCode(Ee),T):n(Ee)}function T(Ee){return Ee===null||Ee===47||Ee===62||Fi(Ee)?Ee!==47&&c&&dP.includes(d.toLowerCase())?(a=1,r.interrupt?t(Ee):se(Ee)):fq.includes(d.toLowerCase())?(a=6,Ee===47?(e.consume(Ee),H):r.interrupt?t(Ee):se(Ee)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(Ee):c?q(Ee):N(Ee)):Ee===45||Wo(Ee)?(e.consume(Ee),d+=String.fromCharCode(Ee),T):n(Ee)}function H(Ee){return Ee===62?(e.consume(Ee),r.interrupt?t:se):n(Ee)}function N(Ee){return $r(Ee)?(e.consume(Ee),N):ie(Ee)}function q(Ee){return Ee===47?(e.consume(Ee),ie):Ee===58||Ee===95||Wa(Ee)?(e.consume(Ee),z):$r(Ee)?(e.consume(Ee),q):ie(Ee)}function z(Ee){return Ee===45||Ee===46||Ee===58||Ee===95||Wo(Ee)?(e.consume(Ee),z):B(Ee)}function B(Ee){return Ee===61?(e.consume(Ee),k):$r(Ee)?(e.consume(Ee),B):q(Ee)}function k(Ee){return Ee===null||Ee===60||Ee===61||Ee===62||Ee===96?n(Ee):Ee===34||Ee===39?(e.consume(Ee),v=Ee,w):$r(Ee)?(e.consume(Ee),k):(v=null,R(Ee))}function w(Ee){return Ee===null||Cn(Ee)?n(Ee):Ee===v?(e.consume(Ee),J):(e.consume(Ee),w)}function R(Ee){return Ee===null||Ee===34||Ee===39||Ee===60||Ee===61||Ee===62||Ee===96||Fi(Ee)?B(Ee):(e.consume(Ee),R)}function J(Ee){return Ee===47||Ee===62||$r(Ee)?q(Ee):n(Ee)}function ie(Ee){return Ee===62?(e.consume(Ee),ue):n(Ee)}function ue(Ee){return $r(Ee)?(e.consume(Ee),ue):Ee===null||Cn(Ee)?se(Ee):n(Ee)}function se(Ee){return Ee===45&&a===2?(e.consume(Ee),Ne):Ee===60&&a===1?(e.consume(Ee),Ie):Ee===62&&a===4?(e.consume(Ee),ct):Ee===63&&a===3?(e.consume(Ee),Et):Ee===93&&a===5?(e.consume(Ee),We):Cn(Ee)&&(a===6||a===7)?e.check(gq,ct,_e)(Ee):Ee===null||Cn(Ee)?_e(Ee):(e.consume(Ee),se)}function _e(Ee){return e.exit("htmlFlowData"),Ue(Ee)}function Ue(Ee){return Ee===null?xe(Ee):Cn(Ee)?e.attempt({tokenize:je,partial:!0},Ue,xe)(Ee):(e.enter("htmlFlowData"),se(Ee))}function je(Ee,xn,Qt){return yn;function yn(Sn){return Ee.enter("lineEnding"),Ee.consume(Sn),Ee.exit("lineEnding"),on}function on(Sn){return r.parser.lazy[r.now().line]?Qt(Sn):xn(Sn)}}function Ne(Ee){return Ee===45?(e.consume(Ee),Et):se(Ee)}function Ie(Ee){return Ee===47?(e.consume(Ee),d="",xt):se(Ee)}function xt(Ee){return Ee===62&&dP.includes(d.toLowerCase())?(e.consume(Ee),ct):Wa(Ee)&&d.length<8?(e.consume(Ee),d+=String.fromCharCode(Ee),xt):se(Ee)}function We(Ee){return Ee===93?(e.consume(Ee),Et):se(Ee)}function Et(Ee){return Ee===62?(e.consume(Ee),ct):Ee===45&&a===2?(e.consume(Ee),Et):se(Ee)}function ct(Ee){return Ee===null||Cn(Ee)?(e.exit("htmlFlowData"),xe(Ee)):(e.consume(Ee),ct)}function xe(Ee){return e.exit("htmlFlow"),t(Ee)}}function _q(e,t,n){return r;function r(a){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),e.attempt(Hg,t,n)}}const xq={name:"htmlText",tokenize:bq};function bq(e,t,n){const r=this;let a,c,d,o;return v;function v(xe){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(xe),C}function C(xe){return xe===33?(e.consume(xe),I):xe===47?(e.consume(xe),R):xe===63?(e.consume(xe),k):Wa(xe)?(e.consume(xe),ue):n(xe)}function I(xe){return xe===45?(e.consume(xe),D):xe===91?(e.consume(xe),c="CDATA[",d=0,H):Wa(xe)?(e.consume(xe),B):n(xe)}function D(xe){return xe===45?(e.consume(xe),F):n(xe)}function F(xe){return xe===null||xe===62?n(xe):xe===45?(e.consume(xe),U):j(xe)}function U(xe){return xe===null||xe===62?n(xe):j(xe)}function j(xe){return xe===null?n(xe):xe===45?(e.consume(xe),T):Cn(xe)?(o=j,We(xe)):(e.consume(xe),j)}function T(xe){return xe===45?(e.consume(xe),ct):j(xe)}function H(xe){return xe===c.charCodeAt(d++)?(e.consume(xe),d===c.length?N:H):n(xe)}function N(xe){return xe===null?n(xe):xe===93?(e.consume(xe),q):Cn(xe)?(o=N,We(xe)):(e.consume(xe),N)}function q(xe){return xe===93?(e.consume(xe),z):N(xe)}function z(xe){return xe===62?ct(xe):xe===93?(e.consume(xe),z):N(xe)}function B(xe){return xe===null||xe===62?ct(xe):Cn(xe)?(o=B,We(xe)):(e.consume(xe),B)}function k(xe){return xe===null?n(xe):xe===63?(e.consume(xe),w):Cn(xe)?(o=k,We(xe)):(e.consume(xe),k)}function w(xe){return xe===62?ct(xe):k(xe)}function R(xe){return Wa(xe)?(e.consume(xe),J):n(xe)}function J(xe){return xe===45||Wo(xe)?(e.consume(xe),J):ie(xe)}function ie(xe){return Cn(xe)?(o=ie,We(xe)):$r(xe)?(e.consume(xe),ie):ct(xe)}function ue(xe){return xe===45||Wo(xe)?(e.consume(xe),ue):xe===47||xe===62||Fi(xe)?se(xe):n(xe)}function se(xe){return xe===47?(e.consume(xe),ct):xe===58||xe===95||Wa(xe)?(e.consume(xe),_e):Cn(xe)?(o=se,We(xe)):$r(xe)?(e.consume(xe),se):ct(xe)}function _e(xe){return xe===45||xe===46||xe===58||xe===95||Wo(xe)?(e.consume(xe),_e):Ue(xe)}function Ue(xe){return xe===61?(e.consume(xe),je):Cn(xe)?(o=Ue,We(xe)):$r(xe)?(e.consume(xe),Ue):se(xe)}function je(xe){return xe===null||xe===60||xe===61||xe===62||xe===96?n(xe):xe===34||xe===39?(e.consume(xe),a=xe,Ne):Cn(xe)?(o=je,We(xe)):$r(xe)?(e.consume(xe),je):(e.consume(xe),a=void 0,xt)}function Ne(xe){return xe===a?(e.consume(xe),Ie):xe===null?n(xe):Cn(xe)?(o=Ne,We(xe)):(e.consume(xe),Ne)}function Ie(xe){return xe===62||xe===47||Fi(xe)?se(xe):n(xe)}function xt(xe){return xe===null||xe===34||xe===39||xe===60||xe===61||xe===96?n(xe):xe===62||Fi(xe)?se(xe):(e.consume(xe),xt)}function We(xe){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(xe),e.exit("lineEnding"),mr(e,Et,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Et(xe){return e.enter("htmlTextData"),o(xe)}function ct(xe){return xe===62?(e.consume(xe),e.exit("htmlTextData"),e.exit("htmlText"),t):n(xe)}}const sk={name:"labelEnd",tokenize:Tq,resolveTo:kq,resolveAll:Sq},wq={tokenize:Aq},Eq={tokenize:Mq},Cq={tokenize:Iq};function Sq(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function kq(e,t){let n=e.length,r=0,a,c,d,o;for(;n--;)if(a=e[n][1],c){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(d){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(c=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(d=n);const v={type:e[c][1].type==="labelLink"?"link":"image",start:Object.assign({},e[c][1].start),end:Object.assign({},e[e.length-1][1].end)},C={type:"label",start:Object.assign({},e[c][1].start),end:Object.assign({},e[d][1].end)},I={type:"labelText",start:Object.assign({},e[c+r+2][1].end),end:Object.assign({},e[d-2][1].start)};return o=[["enter",v,t],["enter",C,t]],o=Ha(o,e.slice(c+1,c+r+3)),o=Ha(o,[["enter",I,t]]),o=Ha(o,l0(t.parser.constructs.insideSpan.null,e.slice(c+r+4,d-3),t)),o=Ha(o,[["exit",I,t],e[d-2],e[d-1],["exit",C,t]]),o=Ha(o,e.slice(d+1)),o=Ha(o,[["exit",v,t]]),Ea(e,c,e.length,o),e}function Tq(e,t,n){const r=this;let a=r.events.length,c,d;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){c=r.events[a][1];break}return o;function o(I){return c?c._inactive?C(I):(d=r.parser.defined.includes(ws(r.sliceSerialize({start:c.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(I),e.exit("labelMarker"),e.exit("labelEnd"),v):n(I)}function v(I){return I===40?e.attempt(wq,t,d?t:C)(I):I===91?e.attempt(Eq,t,d?e.attempt(Cq,t,C):C)(I):d?t(I):C(I)}function C(I){return c._balanced=!0,n(I)}}function Aq(e,t,n){return r;function r(v){return e.enter("resource"),e.enter("resourceMarker"),e.consume(v),e.exit("resourceMarker"),Xm(e,a)}function a(v){return v===41?o(v):d4(e,c,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function c(v){return Fi(v)?Xm(e,d)(v):o(v)}function d(v){return v===34||v===39||v===40?f4(e,Xm(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):o(v)}function o(v){return v===41?(e.enter("resourceMarker"),e.consume(v),e.exit("resourceMarker"),e.exit("resource"),t):n(v)}}function Mq(e,t,n){const r=this;return a;function a(d){return p4.call(r,e,c,n,"reference","referenceMarker","referenceString")(d)}function c(d){return r.parser.defined.includes(ws(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(d):n(d)}}function Iq(e,t,n){return r;function r(c){return e.enter("reference"),e.enter("referenceMarker"),e.consume(c),e.exit("referenceMarker"),a}function a(c){return c===93?(e.enter("referenceMarker"),e.consume(c),e.exit("referenceMarker"),e.exit("reference"),t):n(c)}}const Pq={name:"labelStartImage",tokenize:Dq,resolveAll:sk.resolveAll};function Dq(e,t,n){const r=this;return a;function a(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),c}function c(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),d):n(o)}function d(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Rq={name:"labelStartLink",tokenize:Lq,resolveAll:sk.resolveAll};function Lq(e,t,n){const r=this;return a;function a(d){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelLink"),c}function c(d){return d===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(d):t(d)}}const vw={name:"lineEnding",tokenize:Oq};function Oq(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),mr(e,t,"linePrefix")}}const T_={name:"thematicBreak",tokenize:zq};function zq(e,t,n){let r=0,a;return c;function c(v){return e.enter("thematicBreak"),a=v,d(v)}function d(v){return v===a?(e.enter("thematicBreakSequence"),o(v)):$r(v)?mr(e,d,"whitespace")(v):r<3||v!==null&&!Cn(v)?n(v):(e.exit("thematicBreak"),t(v))}function o(v){return v===a?(e.consume(v),r++,o):(e.exit("thematicBreakSequence"),d(v))}}const ia={name:"list",tokenize:Nq,continuation:{tokenize:Uq},exit:Vq},Bq={tokenize:$q,partial:!0},Fq={tokenize:jq,partial:!0};function Nq(e,t,n){const r=this,a=r.events[r.events.length-1];let c=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,d=0;return o;function o(U){const j=r.containerState.type||(U===42||U===43||U===45?"listUnordered":"listOrdered");if(j==="listUnordered"?!r.containerState.marker||U===r.containerState.marker:wx(U)){if(r.containerState.type||(r.containerState.type=j,e.enter(j,{_container:!0})),j==="listUnordered")return e.enter("listItemPrefix"),U===42||U===45?e.check(T_,n,C)(U):C(U);if(!r.interrupt||U===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),v(U)}return n(U)}function v(U){return wx(U)&&++d<10?(e.consume(U),v):(!r.interrupt||d<2)&&(r.containerState.marker?U===r.containerState.marker:U===41||U===46)?(e.exit("listItemValue"),C(U)):n(U)}function C(U){return e.enter("listItemMarker"),e.consume(U),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||U,e.check(Hg,r.interrupt?n:I,e.attempt(Bq,F,D))}function I(U){return r.containerState.initialBlankLine=!0,c++,F(U)}function D(U){return $r(U)?(e.enter("listItemPrefixWhitespace"),e.consume(U),e.exit("listItemPrefixWhitespace"),F):n(U)}function F(U){return r.containerState.size=c+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(U)}}function Uq(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Hg,a,c);function a(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,mr(e,t,"listItemIndent",r.containerState.size+1)(o)}function c(o){return r.containerState.furtherBlankLines||!$r(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,d(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Fq,t,d)(o))}function d(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,mr(e,e.attempt(ia,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function jq(e,t,n){const r=this;return mr(e,a,"listItemIndent",r.containerState.size+1);function a(c){const d=r.events[r.events.length-1];return d&&d[1].type==="listItemIndent"&&d[2].sliceSerialize(d[1],!0).length===r.containerState.size?t(c):n(c)}}function Vq(e){e.exit(this.containerState.type)}function $q(e,t,n){const r=this;return mr(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function a(c){const d=r.events[r.events.length-1];return!$r(c)&&d&&d[1].type==="listItemPrefixWhitespace"?t(c):n(c)}}const pP={name:"setextUnderline",tokenize:Wq,resolveTo:Hq};function Hq(e,t){let n=e.length,r,a,c;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!c&&e[n][1].type==="definition"&&(c=n);const d={type:"setextHeading",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[a][1].type="setextHeadingText",c?(e.splice(a,0,["enter",d,t]),e.splice(c+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[c][1].end)):e[r][1]=d,e.push(["exit",d,t]),e}function Wq(e,t,n){const r=this;let a=r.events.length,c,d;for(;a--;)if(r.events[a][1].type!=="lineEnding"&&r.events[a][1].type!=="linePrefix"&&r.events[a][1].type!=="content"){d=r.events[a][1].type==="paragraph";break}return o;function o(I){return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),c=I,v(I)):n(I)}function v(I){return I===c?(e.consume(I),v):(e.exit("setextHeadingLineSequence"),mr(e,C,"lineSuffix")(I))}function C(I){return I===null||Cn(I)?(e.exit("setextHeadingLine"),t(I)):n(I)}}const Gq={tokenize:qq};function qq(e){const t=this,n=e.attempt(Hg,r,e.attempt(this.parser.constructs.flowInitial,a,mr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(eq,a)),"linePrefix")));return n;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEndingBlank"),e.consume(c),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Zq={resolveAll:g4()},Xq=m4("string"),Kq=m4("text");function m4(e){return{tokenize:t,resolveAll:g4(e==="text"?Yq:void 0)};function t(n){const r=this,a=this.parser.constructs[e],c=n.attempt(a,d,o);return d;function d(I){return C(I)?c(I):o(I)}function o(I){if(I===null){n.consume(I);return}return n.enter("data"),n.consume(I),v}function v(I){return C(I)?(n.exit("data"),c(I)):(n.consume(I),v)}function C(I){if(I===null)return!0;const D=a[I];let F=-1;if(D)for(;++F<D.length;){const U=D[F];if(!U.previous||U.previous.call(r,r.previous))return!0}return!1}}}function g4(e){return t;function t(n,r){let a=-1,c;for(;++a<=n.length;)c===void 0?n[a]&&n[a][1].type==="data"&&(c=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==c+2&&(n[c][1].end=n[a-1][1].end,n.splice(c+2,a-c-2),a=c+2),c=void 0);return e?e(n,r):n}}function Yq(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let c=a.length,d=-1,o=0,v;for(;c--;){const C=a[c];if(typeof C=="string"){for(d=C.length;C.charCodeAt(d-1)===32;)o++,d--;if(d)break;d=-1}else if(C===-2)v=!0,o++;else if(C!==-1){c++;break}}if(o){const C={type:n===e.length||v||o<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-o,offset:r.end.offset-o,_index:r.start._index+c,_bufferIndex:c?d:r.start._bufferIndex+d},end:Object.assign({},r.end)};r.end=Object.assign({},C.start),r.start.offset===r.end.offset?Object.assign(r,C):(e.splice(n,0,["enter",C,t],["exit",C,t]),n+=2)}n++}return e}function Jq(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},c=[];let d=[],o=[];const v={consume:q,enter:z,exit:B,attempt:R(k),check:R(w),interrupt:R(w,{interrupt:!0})},C={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:U,sliceSerialize:F,now:j,defineSkip:T,write:D};let I=t.tokenize.call(C,v);return t.resolveAll&&c.push(t),C;function D(se){return d=Ha(d,se),H(),d[d.length-1]!==null?[]:(J(t,0),C.events=l0(c,C.events,C),C.events)}function F(se,_e){return eZ(U(se),_e)}function U(se){return Qq(d,se)}function j(){return Object.assign({},r)}function T(se){a[se.line]=se.column,ue()}function H(){let se;for(;r._index<d.length;){const _e=d[r._index];if(typeof _e=="string")for(se=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===se&&r._bufferIndex<_e.length;)N(_e.charCodeAt(r._bufferIndex));else N(_e)}}function N(se){I=I(se)}function q(se){Cn(se)?(r.line++,r.column=1,r.offset+=se===-3?2:1,ue()):se!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===d[r._index].length&&(r._bufferIndex=-1,r._index++)),C.previous=se}function z(se,_e){const Ue=_e||{};return Ue.type=se,Ue.start=j(),C.events.push(["enter",Ue,C]),o.push(Ue),Ue}function B(se){const _e=o.pop();return _e.end=j(),C.events.push(["exit",_e,C]),_e}function k(se,_e){J(se,_e.from)}function w(se,_e){_e.restore()}function R(se,_e){return Ue;function Ue(je,Ne,Ie){let xt,We,Et,ct;return Array.isArray(je)?Ee(je):"tokenize"in je?Ee([je]):xe(je);function xe(on){return Sn;function Sn(Nn){const bn=Nn!==null&&on[Nn],kn=Nn!==null&&on.null,Le=[...Array.isArray(bn)?bn:bn?[bn]:[],...Array.isArray(kn)?kn:kn?[kn]:[]];return Ee(Le)(Nn)}}function Ee(on){return xt=on,We=0,on.length===0?Ie:xn(on[We])}function xn(on){return Sn;function Sn(Nn){return ct=ie(),Et=on,on.partial||(C.currentConstruct=on),on.name&&C.parser.constructs.disable.null.includes(on.name)?yn():on.tokenize.call(_e?Object.assign(Object.create(C),_e):C,v,Qt,yn)(Nn)}}function Qt(on){return se(Et,ct),Ne}function yn(on){return ct.restore(),++We<xt.length?xn(xt[We]):Ie}}}function J(se,_e){se.resolveAll&&!c.includes(se)&&c.push(se),se.resolve&&Ea(C.events,_e,C.events.length-_e,se.resolve(C.events.slice(_e),C)),se.resolveTo&&(C.events=se.resolveTo(C.events,C))}function ie(){const se=j(),_e=C.previous,Ue=C.currentConstruct,je=C.events.length,Ne=Array.from(o);return{restore:Ie,from:je};function Ie(){r=se,C.previous=_e,C.currentConstruct=Ue,C.events.length=je,o=Ne,ue()}}function ue(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function Qq(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,c=t.end._bufferIndex;let d;return n===a?d=[e[n].slice(r,c)]:(d=e.slice(n,a),r>-1&&(d[0]=d[0].slice(r)),c>0&&d.push(e[a].slice(0,c))),d}function eZ(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const c=e[n];let d;if(typeof c=="string")d=c;else switch(c){case-5:{d="\r";break}case-4:{d=`
`;break}case-3:{d=`\r
`;break}case-2:{d=t?" ":"	";break}case-1:{if(!t&&a)continue;d=" ";break}default:d=String.fromCharCode(c)}a=c===-2,r.push(d)}return r.join("")}const tZ={[42]:ia,[43]:ia,[45]:ia,[48]:ia,[49]:ia,[50]:ia,[51]:ia,[52]:ia,[53]:ia,[54]:ia,[55]:ia,[56]:ia,[57]:ia,[62]:l4},nZ={[91]:oq},rZ={[-2]:yw,[-1]:yw,[32]:yw},iZ={[35]:hq,[42]:T_,[45]:[pP,T_],[60]:mq,[61]:pP,[95]:T_,[96]:hP,[126]:hP},oZ={[38]:c4,[92]:u4},aZ={[-5]:vw,[-4]:vw,[-3]:vw,[33]:Pq,[38]:c4,[42]:uC,[60]:[BG,xq],[91]:Rq,[92]:[uq,u4],[93]:sk,[95]:uC,[96]:XG},sZ={null:[uC,Zq]},lZ={null:[42,95]},uZ={null:[]};var cZ=Object.freeze(Object.defineProperty({__proto__:null,document:tZ,contentInitial:nZ,flowInitial:rZ,flow:iZ,string:oZ,text:aZ,insideSpan:sZ,attentionMarkers:lZ,disable:uZ},Symbol.toStringTag,{value:"Module"}));function hZ(e={}){const t=s4([cZ].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(IG),document:r(DG),flow:r(Gq),string:r(Xq),text:r(Kq)};return n;function r(a){return c;function c(d){return Jq(n,a,d)}}}const fP=/[\0\t\n\r]/g;function dZ(){let e=1,t="",n=!0,r;return a;function a(c,d,o){const v=[];let C,I,D,F,U;for(c=t+c.toString(d),D=0,t="",n&&(c.charCodeAt(0)===65279&&D++,n=void 0);D<c.length;){if(fP.lastIndex=D,C=fP.exec(c),F=C&&C.index!==void 0?C.index:c.length,U=c.charCodeAt(F),!C){t=c.slice(D);break}if(U===10&&D===F&&r)v.push(-3),r=void 0;else switch(r&&(v.push(-5),r=void 0),D<F&&(v.push(c.slice(D,F)),e+=F-D),U){case 0:{v.push(65533),e++;break}case 9:{for(I=Math.ceil(e/4)*4,v.push(-2);e++<I;)v.push(-1);break}case 10:{v.push(-4),e=1;break}default:r=!0,e=1}D=F+1}return o&&(r&&v.push(-5),t&&v.push(t),v.push(null)),v}}function pZ(e){for(;!h4(e););return e}function y4(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCharCode(n)}const fZ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function v4(e){return e.replace(fZ,mZ)}function mZ(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),c=a===120||a===88;return y4(n.slice(c?2:1),c?16:10)}return ak(n)||e}const cC={}.hasOwnProperty,gZ=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),yZ(n)(pZ(hZ(n).document().write(dZ()(e,t,!0))))};function yZ(e={}){const t=_4({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:v(Un),autolinkProtocol:_e,autolinkEmail:_e,atxHeading:v(Nt),blockQuote:v(Ke),characterEscape:_e,characterReference:_e,codeFenced:v(pt),codeFencedFenceInfo:C,codeFencedFenceMeta:C,codeIndented:v(pt,C),codeText:v(St,C),codeTextData:_e,data:_e,codeFlowValue:_e,definition:v(Ft),definitionDestinationString:C,definitionLabelString:C,definitionTitleString:C,emphasis:v(ht),hardBreakEscape:v(wn),hardBreakTrailing:v(wn),htmlFlow:v(Gn,C),htmlFlowData:_e,htmlText:v(Gn,C),htmlTextData:_e,image:v(qn),label:C,link:v(Un),listItem:v(Ae),listItemValue:T,listOrdered:v(xr,j),listUnordered:v(xr),paragraph:v(Ye),reference:on,referenceString:C,resourceDestinationString:C,resourceTitleString:C,setextHeading:v(Nt),strong:v(re),thematicBreak:v(De)},exit:{atxHeading:D(),atxHeadingSequence:J,autolink:D(),autolinkEmail:Le,autolinkProtocol:kn,blockQuote:D(),characterEscapeValue:Ue,characterReferenceMarkerHexadecimal:Nn,characterReferenceMarkerNumeric:Nn,characterReferenceValue:bn,codeFenced:D(z),codeFencedFence:q,codeFencedFenceInfo:H,codeFencedFenceMeta:N,codeFlowValue:Ue,codeIndented:D(B),codeText:D(We),codeTextData:Ue,data:Ue,definition:D(),definitionDestinationString:R,definitionLabelString:k,definitionTitleString:w,emphasis:D(),hardBreakEscape:D(Ne),hardBreakTrailing:D(Ne),htmlFlow:D(Ie),htmlFlowData:Ue,htmlText:D(xt),htmlTextData:Ue,image:D(ct),label:Ee,labelText:xe,lineEnding:je,link:D(Et),listItem:D(),listOrdered:D(),listUnordered:D(),paragraph:D(),referenceString:Sn,resourceDestinationString:xn,resourceTitleString:Qt,resource:yn,setextHeading:D(se),setextHeadingLineSequence:ue,setextHeadingText:ie,strong:D(),thematicBreak:D()}},e.mdastExtensions||[]),n={};return r;function r(be){let Te={type:"root",children:[]};const mt=[Te],Bt=[],Kt=[],er={stack:mt,tokenStack:Bt,config:t,enter:I,exit:F,buffer:C,resume:U,setData:c,getData:d};let In=-1;for(;++In<be.length;)if(be[In][1].type==="listOrdered"||be[In][1].type==="listUnordered")if(be[In][0]==="enter")Kt.push(In);else{const $t=Kt.pop();In=a(be,$t,In)}for(In=-1;++In<be.length;){const $t=t[be[In][0]];cC.call($t,be[In][1].type)&&$t[be[In][1].type].call(Object.assign({sliceSerialize:be[In][2].sliceSerialize},er),be[In][1])}if(Bt.length>0){const $t=Bt[Bt.length-1];($t[1]||mP).call(er,void 0,$t[0])}for(Te.position={start:o(be.length>0?be[0][1].start:{line:1,column:1,offset:0}),end:o(be.length>0?be[be.length-2][1].end:{line:1,column:1,offset:0})},In=-1;++In<t.transforms.length;)Te=t.transforms[In](Te)||Te;return Te}function a(be,Te,mt){let Bt=Te-1,Kt=-1,er=!1,In,$t,Rn,br;for(;++Bt<=mt;){const Zn=be[Bt];if(Zn[1].type==="listUnordered"||Zn[1].type==="listOrdered"||Zn[1].type==="blockQuote"?(Zn[0]==="enter"?Kt++:Kt--,br=void 0):Zn[1].type==="lineEndingBlank"?Zn[0]==="enter"&&(In&&!br&&!Kt&&!Rn&&(Rn=Bt),br=void 0):Zn[1].type==="linePrefix"||Zn[1].type==="listItemValue"||Zn[1].type==="listItemMarker"||Zn[1].type==="listItemPrefix"||Zn[1].type==="listItemPrefixWhitespace"||(br=void 0),!Kt&&Zn[0]==="enter"&&Zn[1].type==="listItemPrefix"||Kt===-1&&Zn[0]==="exit"&&(Zn[1].type==="listUnordered"||Zn[1].type==="listOrdered")){if(In){let Ti=Bt;for($t=void 0;Ti--;){const Jr=be[Ti];if(Jr[1].type==="lineEnding"||Jr[1].type==="lineEndingBlank"){if(Jr[0]==="exit")continue;$t&&(be[$t][1].type="lineEndingBlank",er=!0),Jr[1].type="lineEnding",$t=Ti}else if(!(Jr[1].type==="linePrefix"||Jr[1].type==="blockQuotePrefix"||Jr[1].type==="blockQuotePrefixWhitespace"||Jr[1].type==="blockQuoteMarker"||Jr[1].type==="listItemIndent"))break}Rn&&(!$t||Rn<$t)&&(In._spread=!0),In.end=Object.assign({},$t?be[$t][1].start:Zn[1].end),be.splice($t||Bt,0,["exit",In,Zn[2]]),Bt++,mt++}Zn[1].type==="listItemPrefix"&&(In={type:"listItem",_spread:!1,start:Object.assign({},Zn[1].start)},be.splice(Bt,0,["enter",In,Zn[2]]),Bt++,mt++,Rn=void 0,br=!0)}}return be[Te][1]._spread=er,mt}function c(be,Te){n[be]=Te}function d(be){return n[be]}function o(be){return{line:be.line,column:be.column,offset:be.offset}}function v(be,Te){return mt;function mt(Bt){I.call(this,be(Bt),Bt),Te&&Te.call(this,Bt)}}function C(){this.stack.push({type:"fragment",children:[]})}function I(be,Te,mt){return this.stack[this.stack.length-1].children.push(be),this.stack.push(be),this.tokenStack.push([Te,mt]),be.position={start:o(Te.start)},be}function D(be){return Te;function Te(mt){be&&be.call(this,mt),F.call(this,mt)}}function F(be,Te){const mt=this.stack.pop(),Bt=this.tokenStack.pop();if(Bt)Bt[0].type!==be.type&&(Te?Te.call(this,be,Bt[0]):(Bt[1]||mP).call(this,be,Bt[0]));else throw new Error("Cannot close `"+be.type+"` ("+Zm({start:be.start,end:be.end})+"): it\u2019s not open");return mt.position.end=o(be.end),mt}function U(){return CG(this.stack.pop())}function j(){c("expectingFirstListItemValue",!0)}function T(be){if(d("expectingFirstListItemValue")){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(be),10),c("expectingFirstListItemValue")}}function H(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=be}function N(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=be}function q(){d("flowCodeInside")||(this.buffer(),c("flowCodeInside",!0))}function z(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.value=be.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),c("flowCodeInside")}function B(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.value=be.replace(/(\r?\n|\r)$/g,"")}function k(be){const Te=this.resume(),mt=this.stack[this.stack.length-1];mt.label=Te,mt.identifier=ws(this.sliceSerialize(be)).toLowerCase()}function w(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.title=be}function R(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.url=be}function J(be){const Te=this.stack[this.stack.length-1];if(!Te.depth){const mt=this.sliceSerialize(be).length;Te.depth=mt}}function ie(){c("setextHeadingSlurpLineEnding",!0)}function ue(be){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(be).charCodeAt(0)===61?1:2}function se(){c("setextHeadingSlurpLineEnding")}function _e(be){const Te=this.stack[this.stack.length-1];let mt=Te.children[Te.children.length-1];(!mt||mt.type!=="text")&&(mt=ce(),mt.position={start:o(be.start)},Te.children.push(mt)),this.stack.push(mt)}function Ue(be){const Te=this.stack.pop();Te.value+=this.sliceSerialize(be),Te.position.end=o(be.end)}function je(be){const Te=this.stack[this.stack.length-1];if(d("atHardBreak")){const mt=Te.children[Te.children.length-1];mt.position.end=o(be.end),c("atHardBreak");return}!d("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Te.type)&&(_e.call(this,be),Ue.call(this,be))}function Ne(){c("atHardBreak",!0)}function Ie(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.value=be}function xt(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.value=be}function We(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.value=be}function Et(){const be=this.stack[this.stack.length-1];d("inReference")?(be.type+="Reference",be.referenceType=d("referenceType")||"shortcut",delete be.url,delete be.title):(delete be.identifier,delete be.label),c("referenceType")}function ct(){const be=this.stack[this.stack.length-1];d("inReference")?(be.type+="Reference",be.referenceType=d("referenceType")||"shortcut",delete be.url,delete be.title):(delete be.identifier,delete be.label),c("referenceType")}function xe(be){const Te=this.stack[this.stack.length-2],mt=this.sliceSerialize(be);Te.label=v4(mt),Te.identifier=ws(mt).toLowerCase()}function Ee(){const be=this.stack[this.stack.length-1],Te=this.resume(),mt=this.stack[this.stack.length-1];c("inReference",!0),mt.type==="link"?mt.children=be.children:mt.alt=Te}function xn(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.url=be}function Qt(){const be=this.resume(),Te=this.stack[this.stack.length-1];Te.title=be}function yn(){c("inReference")}function on(){c("referenceType","collapsed")}function Sn(be){const Te=this.resume(),mt=this.stack[this.stack.length-1];mt.label=Te,mt.identifier=ws(this.sliceSerialize(be)).toLowerCase(),c("referenceType","full")}function Nn(be){c("characterReferenceType",be.type)}function bn(be){const Te=this.sliceSerialize(be),mt=d("characterReferenceType");let Bt;mt?(Bt=y4(Te,mt==="characterReferenceMarkerNumeric"?10:16),c("characterReferenceType")):Bt=ak(Te);const Kt=this.stack.pop();Kt.value+=Bt,Kt.position.end=o(be.end)}function kn(be){Ue.call(this,be);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(be)}function Le(be){Ue.call(this,be);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(be)}function Ke(){return{type:"blockquote",children:[]}}function pt(){return{type:"code",lang:null,meta:null,value:""}}function St(){return{type:"inlineCode",value:""}}function Ft(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ht(){return{type:"emphasis",children:[]}}function Nt(){return{type:"heading",depth:void 0,children:[]}}function wn(){return{type:"break"}}function Gn(){return{type:"html",value:""}}function qn(){return{type:"image",title:null,url:"",alt:null}}function Un(){return{type:"link",title:null,url:"",children:[]}}function xr(be){return{type:"list",ordered:be.type==="listOrdered",start:null,spread:be._spread,children:[]}}function Ae(be){return{type:"listItem",spread:be._spread,checked:null,children:[]}}function Ye(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function ce(){return{type:"text",value:""}}function De(){return{type:"thematicBreak"}}}function _4(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?_4(e,r):vZ(e,r)}return e}function vZ(e,t){let n;for(n in t)if(cC.call(t,n)){const r=n==="canContainEols"||n==="transforms",c=(cC.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),d=t[n];d&&(r?e[n]=[...c,...d]:Object.assign(c,d))}}function mP(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Zm({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Zm({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Zm({start:t.start,end:t.end})+") is still open")}function _Z(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return gZ(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var qi=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const A_={}.hasOwnProperty;function xZ(e,t){const n=t.data||{};return"value"in t&&!(A_.call(n,"hName")||A_.call(n,"hProperties")||A_.call(n,"hChildren"))?e.augment(t,qi("text",t.value)):e(t,"div",No(e,t))}function x4(e,t,n){const r=t&&t.type;let a;if(!r)throw new Error("Expected node, got `"+t+"`");return A_.call(e.handlers,r)?a=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?a=bZ:a=e.unknownHandler,(typeof a=="function"?a:xZ)(e,t,n)}function bZ(e,t){return"children"in t?{...t,children:No(e,t)}:t}function No(e,t){const n=[];if("children"in t){const r=t.children;let a=-1;for(;++a<r.length;){const c=x4(e,r[a],t);if(c){if(a&&r[a-1].type==="break"&&(!Array.isArray(c)&&c.type==="text"&&(c.value=c.value.replace(/^\s+/,"")),!Array.isArray(c)&&c.type==="element")){const d=c.children[0];d&&d.type==="text"&&(d.value=d.value.replace(/^\s+/,""))}Array.isArray(c)?n.push(...c):n.push(c)}}}return n}const lk=function(e){if(e==null)return SZ;if(typeof e=="string")return CZ(e);if(typeof e=="object")return Array.isArray(e)?wZ(e):EZ(e);if(typeof e=="function")return u0(e);throw new Error("Expected function, string, or object as test")};function wZ(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=lk(e[n]);return u0(r);function r(...a){let c=-1;for(;++c<t.length;)if(t[c].call(this,...a))return!0;return!1}}function EZ(e){return u0(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function CZ(e){return u0(t);function t(n){return n&&n.type===e}}function u0(e){return t;function t(...n){return Boolean(e.call(this,...n))}}function SZ(){return!0}const kZ=!0,TZ="skip",gP=!1,b4=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const a=lk(t),c=r?-1:1;d(e,null,[])();function d(o,v,C){const I=typeof o=="object"&&o!==null?o:{};let D;return typeof I.type=="string"&&(D=typeof I.tagName=="string"?I.tagName:typeof I.name=="string"?I.name:void 0,Object.defineProperty(F,"name",{value:"node ("+(I.type+(D?"<"+D+">":""))+")"})),F;function F(){let U=[],j,T,H;if((!t||a(o,v,C[C.length-1]||null))&&(U=AZ(n(o,C)),U[0]===gP))return U;if(o.children&&U[0]!==TZ)for(T=(r?o.children.length:-1)+c,H=C.concat(o);T>-1&&T<o.children.length;){if(j=d(o.children[T],T,H)(),j[0]===gP)return j;T=typeof j[1]=="number"?j[1]:T+c}return U}}};function AZ(e){return Array.isArray(e)?e:typeof e=="number"?[kZ,e]:[e]}const uk=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),b4(e,t,a,r);function a(c,d){const o=d[d.length-1];return n(c,o?o.children.indexOf(c):null,o)}},w4=C4("start"),E4=C4("end");function C4(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function MZ(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const yP={}.hasOwnProperty;function IZ(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return uk(e,"definition",r=>{const a=vP(r.identifier);a&&!yP.call(t,a)&&(t[a]=r)}),n;function n(r){const a=vP(r);return a&&yP.call(t,a)?t[a]:null}}function vP(e){return String(e||"").toUpperCase()}const PZ={'"':"quot","&":"amp","<":"lt",">":"gt"};function DZ(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+PZ[n]+";"}}function S4(e,t){const n=DZ(RZ(e||""));if(!t)return n;const r=n.indexOf(":"),a=n.indexOf("?"),c=n.indexOf("#"),d=n.indexOf("/");return r<0||d>-1&&r>d||a>-1&&r>a||c>-1&&r>c||t.test(n.slice(0,r))?n:""}function RZ(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const c=e.charCodeAt(n);let d="";if(c===37&&Wo(e.charCodeAt(n+1))&&Wo(e.charCodeAt(n+2)))a=2;else if(c<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(c))||(d=String.fromCharCode(c));else if(c>55295&&c<57344){const o=e.charCodeAt(n+1);c<56320&&o>56319&&o<57344?(d=String.fromCharCode(c,o),a=1):d="\uFFFD"}else d=String.fromCharCode(c);d&&(t.push(e.slice(r,n),encodeURIComponent(d)),r=n+a+1,d=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Sl(e,t){const n=[];let r=-1;for(t&&n.push(qi("text",`
`));++r<e.length;)r&&n.push(qi("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(qi("text",`
`)),n}function LZ(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const a=No(e,r),c=String(r.identifier),d=S4(c.toLowerCase());let o=0;const v=[];for(;++o<=e.footnoteCounts[c];){const D={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+d+(o>1?"-"+o:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"\u21A9"}]};o>1&&D.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(o)}]}),v.length>0&&v.push({type:"text",value:" "}),v.push(D)}const C=a[a.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const D=C.children[C.children.length-1];D&&D.type==="text"?D.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...v)}else a.push(...v);const I={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+d},children:Sl(a,!0)};r.position&&(I.position=r.position),n.push(I)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[qi("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:Sl(n,!0)},{type:"text",value:`
`}]}}function OZ(e,t){return e(t,"blockquote",Sl(No(e,t),!0))}function zZ(e,t){return[e(t,"br"),qi("text",`
`)]}function BZ(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),a={};r&&(a.className=["language-"+r]);const c=e(t,"code",a,[qi("text",n)]);return t.meta&&(c.data={meta:t.meta}),e(t.position,"pre",[c])}function FZ(e,t){return e(t,"del",No(e,t))}function NZ(e,t){return e(t,"em",No(e,t))}function k4(e,t){const n=String(t.identifier),r=S4(n.toLowerCase()),a=e.footnoteOrder.indexOf(n);let c;a===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,c=e.footnoteOrder.length):(e.footnoteCounts[n]++,c=a+1);const d=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[qi("text",String(c))])])}function UZ(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const a=String(r);return n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},k4(e,{type:"footnoteReference",identifier:a,position:t.position})}function jZ(e,t){return e(t,"h"+t.depth,No(e,t))}function VZ(e,t){return e.dangerous?e.augment(t,qi("raw",t.value)):null}var _P={};function $Z(e){var t,n,r=_P[e];if(r)return r;for(r=_P[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}function c0(e,t,n){var r,a,c,d,o,v="";for(typeof t!="string"&&(n=t,t=c0.defaultChars),typeof n=="undefined"&&(n=!0),o=$Z(t),r=0,a=e.length;r<a;r++){if(c=e.charCodeAt(r),n&&c===37&&r+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){v+=e.slice(r,r+3),r+=2;continue}if(c<128){v+=o[c];continue}if(c>=55296&&c<=57343){if(c>=55296&&c<=56319&&r+1<a&&(d=e.charCodeAt(r+1),d>=56320&&d<=57343)){v+=encodeURIComponent(e[r]+e[r+1]),r++;continue}v+="%EF%BF%BD";continue}v+=encodeURIComponent(e[r])}return v}c0.defaultChars=";/?:@&=+$,-_.!~*'()#";c0.componentChars="-_.!~*'()";var h0=c0;function T4(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return qi("text","!["+t.alt+r);const a=No(e,t),c=a[0];c&&c.type==="text"?c.value="["+c.value:a.unshift(qi("text","["));const d=a[a.length-1];return d&&d.type==="text"?d.value+=r:a.push(qi("text",r)),a}function HZ(e,t){const n=e.definition(t.identifier);if(!n)return T4(e,t);const r={src:h0(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function WZ(e,t){const n={src:h0(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function GZ(e,t){return e(t,"code",[qi("text",t.value.replace(/\r?\n|\r/g," "))])}function qZ(e,t){const n=e.definition(t.identifier);if(!n)return T4(e,t);const r={href:h0(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,No(e,t))}function ZZ(e,t){const n={href:h0(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,No(e,t))}function XZ(e,t,n){const r=No(e,t),a=n?KZ(n):A4(t),c={},d=[];if(typeof t.checked=="boolean"){let C;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?C=r[0]:(C=e(null,"p",[]),r.unshift(C)),C.children.length>0&&C.children.unshift(qi("text"," ")),C.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),c.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const C=r[o];(a||o!==0||C.type!=="element"||C.tagName!=="p")&&d.push(qi("text",`
`)),C.type==="element"&&C.tagName==="p"&&!a?d.push(...C.children):d.push(C)}const v=r[r.length-1];return v&&(a||!("tagName"in v)||v.tagName!=="p")&&d.push(qi("text",`
`)),e(t,"li",c,d)}function KZ(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=A4(n[r]);return Boolean(t)}function A4(e){const t=e.spread;return t==null?e.children.length>1:t}function YZ(e,t){const n={},r=t.ordered?"ol":"ul",a=No(e,t);let c=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++c<a.length;){const d=a[c];if(d.type==="element"&&d.tagName==="li"&&d.properties&&Array.isArray(d.properties.className)&&d.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Sl(a,!0))}function JZ(e,t){return e(t,"p",No(e,t))}function QZ(e,t){return e.augment(t,qi("root",Sl(No(e,t))))}function eX(e,t){return e(t,"strong",No(e,t))}function tX(e,t){const n=t.children;let r=-1;const a=t.align||[],c=[];for(;++r<n.length;){const d=n[r].children,o=r===0?"th":"td",v=[];let C=-1;const I=t.align?a.length:d.length;for(;++C<I;){const D=d[C];v.push(e(D,o,{align:a[C]},D?No(e,D):[]))}c[r]=e(n[r],"tr",Sl(v,!0))}return e(t,"table",Sl([e(c[0].position,"thead",Sl([c[0]],!0))].concat(c[1]?e({start:w4(c[1]),end:E4(c[c.length-1])},"tbody",Sl(c.slice(1),!0)):[]),!0))}const xP=9,bP=32;function nX(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const c=[];for(;r;)c.push(wP(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return c.push(wP(t.slice(a),a>0,!1)),c.join("")}function wP(e,t,n){let r=0,a=e.length;if(t){let c=e.codePointAt(r);for(;c===xP||c===bP;)r++,c=e.codePointAt(r)}if(n){let c=e.codePointAt(a-1);for(;c===xP||c===bP;)a--,c=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function rX(e,t){return e.augment(t,qi("text",nX(String(t.value))))}function iX(e,t){return e(t,"hr")}const oX={blockquote:OZ,break:zZ,code:BZ,delete:FZ,emphasis:NZ,footnoteReference:k4,footnote:UZ,heading:jZ,html:VZ,imageReference:HZ,image:WZ,inlineCode:GZ,linkReference:qZ,link:ZZ,listItem:XZ,list:YZ,paragraph:JZ,root:QZ,strong:eX,table:tX,text:rX,thematicBreak:iX,toml:t_,yaml:t_,definition:t_,footnoteDefinition:t_};function t_(){return null}const aX={}.hasOwnProperty;function sX(e,t){const n=t||{},r=n.allowDangerousHtml||!1,a={};return d.dangerous=r,d.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,d.footnoteLabel=n.footnoteLabel||"Footnotes",d.footnoteLabelTagName=n.footnoteLabelTagName||"h2",d.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},d.footnoteBackLabel=n.footnoteBackLabel||"Back to content",d.definition=IZ(e),d.footnoteById=a,d.footnoteOrder=[],d.footnoteCounts={},d.augment=c,d.handlers={...oX,...n.handlers},d.unknownHandler=n.unknownHandler,d.passThrough=n.passThrough,uk(e,"footnoteDefinition",o=>{const v=String(o.identifier).toUpperCase();aX.call(a,v)||(a[v]=o)}),d;function c(o,v){if(o&&"data"in o&&o.data){const C=o.data;C.hName&&(v.type!=="element"&&(v={type:"element",tagName:"",properties:{},children:[]}),v.tagName=C.hName),v.type==="element"&&C.hProperties&&(v.properties={...v.properties,...C.hProperties}),"children"in v&&v.children&&C.hChildren&&(v.children=C.hChildren)}if(o){const C="type"in o?o:{position:o};MZ(C)||(v.position={start:w4(C),end:E4(C)})}return v}function d(o,v,C,I){return Array.isArray(C)&&(I=C,C={}),c(o,{type:"element",tagName:v,properties:C||{},children:I||[]})}}function M4(e,t){const n=sX(e,t),r=x4(n,e,null),a=LZ(n);return a&&r.children.push(qi("text",`
`),a),Array.isArray(r)?{type:"root",children:r}:r}const lX=function(e,t){return e&&"run"in e?cX(e,t):hX(e||t)};var uX=lX;function cX(e,t){return(n,r,a)=>{e.run(M4(n,t),r,c=>{a(c)})}}function hX(e){return t=>M4(t,e)}class Wg{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}Wg.prototype.property={};Wg.prototype.normal={};Wg.prototype.space=null;function I4(e,t){const n={},r={};let a=-1;for(;++a<e.length;)Object.assign(n,e[a].property),Object.assign(r,e[a].normal);return new Wg(n,r,t)}function hC(e){return e.toLowerCase()}class Qa{constructor(t,n){this.property=t,this.attribute=n}}Qa.prototype.space=null;Qa.prototype.boolean=!1;Qa.prototype.booleanish=!1;Qa.prototype.overloadedBoolean=!1;Qa.prototype.number=!1;Qa.prototype.commaSeparated=!1;Qa.prototype.spaceSeparated=!1;Qa.prototype.commaOrSpaceSeparated=!1;Qa.prototype.mustUseProperty=!1;Qa.prototype.defined=!1;let dX=0;const Wn=Th(),Oi=Th(),P4=Th(),Wt=Th(),Kr=Th(),dp=Th(),va=Th();function Th(){return 2**++dX}var dC=Object.freeze(Object.defineProperty({__proto__:null,boolean:Wn,booleanish:Oi,overloadedBoolean:P4,number:Wt,spaceSeparated:Kr,commaSeparated:dp,commaOrSpaceSeparated:va},Symbol.toStringTag,{value:"Module"}));const _w=Object.keys(dC);class ck extends Qa{constructor(t,n,r,a){let c=-1;if(super(t,n),EP(this,"space",a),typeof r=="number")for(;++c<_w.length;){const d=_w[c];EP(this,_w[c],(r&dC[d])===dC[d])}}}ck.prototype.defined=!0;function EP(e,t,n){n&&(e[t]=n)}const pX={}.hasOwnProperty;function Up(e){const t={},n={};let r;for(r in e.properties)if(pX.call(e.properties,r)){const a=e.properties[r],c=new ck(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(c.mustUseProperty=!0),t[r]=c,n[hC(r)]=r,n[hC(c.attribute)]=r}return new Wg(t,n,e.space)}const D4=Up({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),R4=Up({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function L4(e,t){return t in e?e[t]:t}function O4(e,t){return L4(e,t.toLowerCase())}const z4=Up({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:O4,properties:{xmlns:null,xmlnsXLink:null}}),B4=Up({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Oi,ariaAutoComplete:null,ariaBusy:Oi,ariaChecked:Oi,ariaColCount:Wt,ariaColIndex:Wt,ariaColSpan:Wt,ariaControls:Kr,ariaCurrent:null,ariaDescribedBy:Kr,ariaDetails:null,ariaDisabled:Oi,ariaDropEffect:Kr,ariaErrorMessage:null,ariaExpanded:Oi,ariaFlowTo:Kr,ariaGrabbed:Oi,ariaHasPopup:null,ariaHidden:Oi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Kr,ariaLevel:Wt,ariaLive:null,ariaModal:Oi,ariaMultiLine:Oi,ariaMultiSelectable:Oi,ariaOrientation:null,ariaOwns:Kr,ariaPlaceholder:null,ariaPosInSet:Wt,ariaPressed:Oi,ariaReadOnly:Oi,ariaRelevant:null,ariaRequired:Oi,ariaRoleDescription:Kr,ariaRowCount:Wt,ariaRowIndex:Wt,ariaRowSpan:Wt,ariaSelected:Oi,ariaSetSize:Wt,ariaSort:null,ariaValueMax:Wt,ariaValueMin:Wt,ariaValueNow:Wt,ariaValueText:null,role:null}}),fX=Up({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:O4,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dp,acceptCharset:Kr,accessKey:Kr,action:null,allow:null,allowFullScreen:Wn,allowPaymentRequest:Wn,allowUserMedia:Wn,alt:null,as:null,async:Wn,autoCapitalize:null,autoComplete:Kr,autoFocus:Wn,autoPlay:Wn,capture:Wn,charSet:null,checked:Wn,cite:null,className:Kr,cols:Wt,colSpan:null,content:null,contentEditable:Oi,controls:Wn,controlsList:Kr,coords:Wt|dp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Wn,defer:Wn,dir:null,dirName:null,disabled:Wn,download:P4,draggable:Oi,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Wn,formTarget:null,headers:Kr,height:Wt,hidden:Wn,high:Wt,href:null,hrefLang:null,htmlFor:Kr,httpEquiv:Kr,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:Wn,itemId:null,itemProp:Kr,itemRef:Kr,itemScope:Wn,itemType:Kr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Wn,low:Wt,manifest:null,max:null,maxLength:Wt,media:null,method:null,min:null,minLength:Wt,multiple:Wn,muted:Wn,name:null,nonce:null,noModule:Wn,noValidate:Wn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Wn,optimum:Wt,pattern:null,ping:Kr,placeholder:null,playsInline:Wn,poster:null,preload:null,readOnly:Wn,referrerPolicy:null,rel:Kr,required:Wn,reversed:Wn,rows:Wt,rowSpan:Wt,sandbox:Kr,scope:null,scoped:Wn,seamless:Wn,selected:Wn,shape:null,size:Wt,sizes:null,slot:null,span:Wt,spellCheck:Oi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Wt,step:null,style:null,tabIndex:Wt,target:null,title:null,translate:null,type:null,typeMustMatch:Wn,useMap:null,value:Oi,width:Wt,wrap:null,align:null,aLink:null,archive:Kr,axis:null,background:null,bgColor:null,border:Wt,borderColor:null,bottomMargin:Wt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Wn,declare:Wn,event:null,face:null,frame:null,frameBorder:null,hSpace:Wt,leftMargin:Wt,link:null,longDesc:null,lowSrc:null,marginHeight:Wt,marginWidth:Wt,noResize:Wn,noHref:Wn,noShade:Wn,noWrap:Wn,object:null,profile:null,prompt:null,rev:null,rightMargin:Wt,rules:null,scheme:null,scrolling:Oi,standby:null,summary:null,text:null,topMargin:Wt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Wt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Wn,disableRemotePlayback:Wn,prefix:null,property:null,results:Wt,security:null,unselectable:null}}),mX=Up({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:L4,properties:{about:va,accentHeight:Wt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Wt,amplitude:Wt,arabicForm:null,ascent:Wt,attributeName:null,attributeType:null,azimuth:Wt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Wt,by:null,calcMode:null,capHeight:Wt,className:Kr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Wt,diffuseConstant:Wt,direction:null,display:null,dur:null,divisor:Wt,dominantBaseline:null,download:Wn,dx:null,dy:null,edgeMode:null,editable:null,elevation:Wt,enableBackground:null,end:null,event:null,exponent:Wt,externalResourcesRequired:null,fill:null,fillOpacity:Wt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dp,g2:dp,glyphName:dp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Wt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Wt,horizOriginX:Wt,horizOriginY:Wt,id:null,ideographic:Wt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Wt,k:Wt,k1:Wt,k2:Wt,k3:Wt,k4:Wt,kernelMatrix:va,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Wt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Wt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Wt,overlineThickness:Wt,paintOrder:null,panose1:null,path:null,pathLength:Wt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Kr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Wt,pointsAtY:Wt,pointsAtZ:Wt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:va,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:va,rev:va,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:va,requiredFeatures:va,requiredFonts:va,requiredFormats:va,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Wt,specularExponent:Wt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Wt,strikethroughThickness:Wt,string:null,stroke:null,strokeDashArray:va,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Wt,strokeOpacity:Wt,strokeWidth:null,style:null,surfaceScale:Wt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:va,tabIndex:Wt,tableValues:null,target:null,targetX:Wt,targetY:Wt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:va,to:null,transform:null,u1:null,u2:null,underlinePosition:Wt,underlineThickness:Wt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Wt,values:null,vAlphabetic:Wt,vMathematical:Wt,vectorEffect:null,vHanging:Wt,vIdeographic:Wt,version:null,vertAdvY:Wt,vertOriginX:Wt,vertOriginY:Wt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Wt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),gX=/^data[-\w.:]+$/i,CP=/-[a-z]/g,yX=/[A-Z]/g;function vX(e,t){const n=hC(t);let r=t,a=Qa;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&gX.test(t)){if(t.charAt(4)==="-"){const c=t.slice(5).replace(CP,xX);r="data"+c.charAt(0).toUpperCase()+c.slice(1)}else{const c=t.slice(4);if(!CP.test(c)){let d=c.replace(yX,_X);d.charAt(0)!=="-"&&(d="-"+d),t="data"+d}}a=ck}return new a(r,t)}function _X(e){return"-"+e.toLowerCase()}function xX(e){return e.charAt(1).toUpperCase()}const SP={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},bX=I4([R4,D4,z4,B4,fX],"html"),wX=I4([R4,D4,z4,B4,mX],"svg");function EX(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{uk(t,"element",(n,r,a)=>{const c=a;let d;if(e.allowedElements?d=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(d=e.disallowedElements.includes(n.tagName)),!d&&e.allowElement&&typeof r=="number"&&(d=!e.allowElement(n,r,c)),d&&typeof r=="number")return e.unwrapDisallowed&&n.children?c.children.splice(r,1,...n.children):c.children.splice(r,1),r})}}var F4={exports:{}},Nr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hk=Symbol.for("react.element"),dk=Symbol.for("react.portal"),d0=Symbol.for("react.fragment"),p0=Symbol.for("react.strict_mode"),f0=Symbol.for("react.profiler"),m0=Symbol.for("react.provider"),g0=Symbol.for("react.context"),CX=Symbol.for("react.server_context"),y0=Symbol.for("react.forward_ref"),v0=Symbol.for("react.suspense"),_0=Symbol.for("react.suspense_list"),x0=Symbol.for("react.memo"),b0=Symbol.for("react.lazy"),SX=Symbol.for("react.offscreen"),N4;N4=Symbol.for("react.module.reference");function es(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hk:switch(e=e.type,e){case d0:case f0:case p0:case v0:case _0:return e;default:switch(e=e&&e.$$typeof,e){case CX:case g0:case y0:case b0:case x0:case m0:return e;default:return t}}case dk:return t}}}Nr.ContextConsumer=g0;Nr.ContextProvider=m0;Nr.Element=hk;Nr.ForwardRef=y0;Nr.Fragment=d0;Nr.Lazy=b0;Nr.Memo=x0;Nr.Portal=dk;Nr.Profiler=f0;Nr.StrictMode=p0;Nr.Suspense=v0;Nr.SuspenseList=_0;Nr.isAsyncMode=function(){return!1};Nr.isConcurrentMode=function(){return!1};Nr.isContextConsumer=function(e){return es(e)===g0};Nr.isContextProvider=function(e){return es(e)===m0};Nr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hk};Nr.isForwardRef=function(e){return es(e)===y0};Nr.isFragment=function(e){return es(e)===d0};Nr.isLazy=function(e){return es(e)===b0};Nr.isMemo=function(e){return es(e)===x0};Nr.isPortal=function(e){return es(e)===dk};Nr.isProfiler=function(e){return es(e)===f0};Nr.isStrictMode=function(e){return es(e)===p0};Nr.isSuspense=function(e){return es(e)===v0};Nr.isSuspenseList=function(e){return es(e)===_0};Nr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===d0||e===f0||e===p0||e===v0||e===_0||e===SX||typeof e=="object"&&e!==null&&(e.$$typeof===b0||e.$$typeof===x0||e.$$typeof===m0||e.$$typeof===g0||e.$$typeof===y0||e.$$typeof===N4||e.getModuleId!==void 0)};Nr.typeOf=es;F4.exports=Nr;var kX=F4.exports;function TX(e){var t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function AX(e){return e.join(" ").trim()}function MX(e,t){var n=t||{};return e[e.length-1]===""&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var kP=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,IX=/\n/g,PX=/^\s*/,DX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,RX=/^:\s*/,LX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,OX=/^[;\s]*/,zX=/^\s+|\s+$/g,BX=`
`,TP="/",AP="*",Qc="",FX="comment",NX="declaration",UX=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(j){var T=j.match(IX);T&&(n+=T.length);var H=j.lastIndexOf(BX);r=~H?j.length-H:r+j.length}function c(){var j={line:n,column:r};return function(T){return T.position=new d(j),C(),T}}function d(j){this.start=j,this.end={line:n,column:r},this.source=t.source}d.prototype.content=e;function o(j){var T=new Error(t.source+":"+n+":"+r+": "+j);if(T.reason=j,T.filename=t.source,T.line=n,T.column=r,T.source=e,!t.silent)throw T}function v(j){var T=j.exec(e);if(!!T){var H=T[0];return a(H),e=e.slice(H.length),T}}function C(){v(PX)}function I(j){var T;for(j=j||[];T=D();)T!==!1&&j.push(T);return j}function D(){var j=c();if(!(TP!=e.charAt(0)||AP!=e.charAt(1))){for(var T=2;Qc!=e.charAt(T)&&(AP!=e.charAt(T)||TP!=e.charAt(T+1));)++T;if(T+=2,Qc===e.charAt(T-1))return o("End of comment missing");var H=e.slice(2,T-2);return r+=2,a(H),e=e.slice(T),r+=2,j({type:FX,comment:H})}}function F(){var j=c(),T=v(DX);if(!!T){if(D(),!v(RX))return o("property missing ':'");var H=v(LX),N=j({type:NX,property:MP(T[0].replace(kP,Qc)),value:H?MP(H[0].replace(kP,Qc)):Qc});return v(OX),N}}function U(){var j=[];I(j);for(var T;T=F();)T!==!1&&(j.push(T),I(j));return j}return C(),U()};function MP(e){return e?e.replace(zX,Qc):Qc}var jX=UX;function VX(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,a=jX(e),c=typeof t=="function",d,o,v=0,C=a.length;v<C;v++)r=a[v],d=r.property,o=r.value,c?t(d,o,r):o&&(n||(n={}),n[d]=o);return n}var $X=VX;const pC={}.hasOwnProperty,HX=new Set(["table","thead","tbody","tfoot","tr"]);function U4(e,t){const n=[];let r=-1,a;for(;++r<t.children.length;)a=t.children[r],a.type==="element"?n.push(WX(e,a,r,t)):a.type==="text"?(t.type!=="element"||!HX.has(t.tagName)||!TX(a))&&n.push(a.value):a.type==="raw"&&!e.options.skipHtml&&n.push(a.value);return n}function WX(e,t,n,r){const a=e.options,c=e.schema,d=t.tagName,o={};let v=c,C;if(c.space==="html"&&d==="svg"&&(v=wX,e.schema=v),t.properties)for(C in t.properties)pC.call(t.properties,C)&&qX(o,C,t.properties[C],e);(d==="ol"||d==="ul")&&e.listDepth++;const I=U4(e,t);(d==="ol"||d==="ul")&&e.listDepth--,e.schema=c;const D=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},F=a.components&&pC.call(a.components,d)?a.components[d]:d,U=typeof F=="string"||F===nt.Fragment;if(!kX.isValidElementType(F))throw new TypeError(`Component for name \`${d}\` not defined or is not renderable`);if(o.key=[d,D.start.line,D.start.column,n].join("-"),d==="a"&&a.linkTarget&&(o.target=typeof a.linkTarget=="function"?a.linkTarget(String(o.href||""),t.children,typeof o.title=="string"?o.title:null):a.linkTarget),d==="a"&&a.transformLinkUri&&(o.href=a.transformLinkUri(String(o.href||""),t.children,typeof o.title=="string"?o.title:null)),!U&&d==="code"&&r.type==="element"&&r.tagName!=="pre"&&(o.inline=!0),!U&&(d==="h1"||d==="h2"||d==="h3"||d==="h4"||d==="h5"||d==="h6")&&(o.level=Number.parseInt(d.charAt(1),10)),d==="img"&&a.transformImageUri&&(o.src=a.transformImageUri(String(o.src||""),String(o.alt||""),typeof o.title=="string"?o.title:null)),!U&&d==="li"&&r.type==="element"){const j=GX(t);o.checked=j&&j.properties?Boolean(j.properties.checked):null,o.index=xw(r,t),o.ordered=r.tagName==="ol"}return!U&&(d==="ol"||d==="ul")&&(o.ordered=d==="ol",o.depth=e.listDepth),(d==="td"||d==="th")&&(o.align&&(o.style||(o.style={}),o.style.textAlign=o.align,delete o.align),U||(o.isHeader=d==="th")),!U&&d==="tr"&&r.type==="element"&&(o.isHeader=Boolean(r.tagName==="thead")),a.sourcePos&&(o["data-sourcepos"]=KX(D)),!U&&a.rawSourcePos&&(o.sourcePosition=t.position),!U&&a.includeElementIndex&&(o.index=xw(r,t),o.siblingCount=xw(r)),U||(o.node=t),I.length>0?nt.createElement(F,o,I):nt.createElement(F,o)}function GX(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function xw(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function qX(e,t,n,r){const a=vX(r.schema,t);let c=n;c==null||c!==c||(Array.isArray(c)&&(c=a.commaSeparated?MX(c):AX(c)),a.property==="style"&&typeof c=="string"&&(c=ZX(c)),a.space&&a.property?e[pC.call(SP,a.property)?SP[a.property]:a.property]=c:a.attribute&&(e[a.attribute]=c))}function ZX(e){const t={};try{$X(e,n)}catch{}return t;function n(r,a){const c=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[c.replace(/-([a-z])/g,XX)]=a}}function XX(e,t){return t.toUpperCase()}function KX(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(t=>String(t)).join("")}const IP={}.hasOwnProperty,YX="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",n_={plugins:{to:"plugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function pk(e){for(const c in n_)if(IP.call(n_,c)&&IP.call(e,c)){const d=n_[c];console.warn(`[react-markdown] Warning: please ${d.to?`use \`${d.to}\` instead of`:"remove"} \`${c}\` (see <${YX}#${d.id}> for more info)`),delete n_[c]}const t=xG().use(_Z).use(e.remarkPlugins||[]).use(uX,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(EX,e),n=new n4;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let a=nt.createElement(nt.Fragment,{},U4({options:e,schema:bX,listDepth:0},r));return e.className&&(a=nt.createElement("div",{className:e.className},a)),a}pk.defaultProps={transformLinkUri:sG};pk.propTypes={children:Fn.string,className:Fn.string,allowElement:Fn.func,allowedElements:Fn.arrayOf(Fn.string),disallowedElements:Fn.arrayOf(Fn.string),unwrapDisallowed:Fn.bool,remarkPlugins:Fn.arrayOf(Fn.oneOfType([Fn.object,Fn.func,Fn.arrayOf(Fn.oneOfType([Fn.bool,Fn.string,Fn.object,Fn.func,Fn.arrayOf(Fn.any)]))])),rehypePlugins:Fn.arrayOf(Fn.oneOfType([Fn.object,Fn.func,Fn.arrayOf(Fn.oneOfType([Fn.bool,Fn.string,Fn.object,Fn.func,Fn.arrayOf(Fn.any)]))])),sourcePos:Fn.bool,rawSourcePos:Fn.bool,skipHtml:Fn.bool,includeElementIndex:Fn.bool,transformLinkUri:Fn.oneOfType([Fn.func,Fn.bool]),linkTarget:Fn.oneOfType([Fn.func,Fn.string]),transformImageUri:Fn.func,components:Fn.object};const JX={tokenize:rK,partial:!0},j4={tokenize:iK,partial:!0},V4={tokenize:oK,partial:!0},pp={tokenize:sK,partial:!0},$4={tokenize:aK,partial:!0},H4={tokenize:tK,previous:q4},W4={tokenize:nK,previous:mk},Fl={tokenize:eK,previous:Z4},tl={},QX={text:tl};let $c=48;for(;$c<123;)tl[$c]=Fl,$c++,$c===58?$c=65:$c===91&&($c=97);tl[43]=Fl;tl[45]=Fl;tl[46]=Fl;tl[95]=Fl;tl[72]=[Fl,W4];tl[104]=[Fl,W4];tl[87]=[Fl,H4];tl[119]=[Fl,H4];function eK(e,t,n){const r=this;let a,c;return d;function d(U){return!PP(U)||!Z4(r.previous)||gk(r.events)?n(U):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(U))}function o(U){return PP(U)?(e.consume(U),o):U===64?(e.consume(U),v):n(U)}function v(U){return U===46?e.check(pp,F,C)(U):U===45||U===95?e.check(pp,n,I)(U):Wo(U)?(!c&&wx(U)&&(c=!0),e.consume(U),v):F(U)}function C(U){return e.consume(U),a=!0,c=void 0,v}function I(U){return e.consume(U),D}function D(U){return U===46?e.check(pp,n,C)(U):v(U)}function F(U){return a&&!c?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(U)):n(U)}}function tK(e,t,n){const r=this;return a;function a(d){return d!==87&&d!==119||!q4(r.previous)||gk(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(JX,e.attempt(j4,e.attempt(V4,c),n),n)(d))}function c(d){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(d)}}function nK(e,t,n){const r=this;return a;function a(j){return j!==72&&j!==104||!mk(r.previous)||gk(r.events)?n(j):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(j),c)}function c(j){return j===84||j===116?(e.consume(j),d):n(j)}function d(j){return j===84||j===116?(e.consume(j),o):n(j)}function o(j){return j===80||j===112?(e.consume(j),v):n(j)}function v(j){return j===83||j===115?(e.consume(j),C):C(j)}function C(j){return j===58?(e.consume(j),I):n(j)}function I(j){return j===47?(e.consume(j),D):n(j)}function D(j){return j===47?(e.consume(j),F):n(j)}function F(j){return j===null||Eg(j)||a0(j)||s0(j)?n(j):e.attempt(j4,e.attempt(V4,U),n)(j)}function U(j){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(j)}}function rK(e,t,n){return r;function r(v){return e.consume(v),a}function a(v){return v===87||v===119?(e.consume(v),c):n(v)}function c(v){return v===87||v===119?(e.consume(v),d):n(v)}function d(v){return v===46?(e.consume(v),o):n(v)}function o(v){return v===null||Cn(v)?n(v):t(v)}}function iK(e,t,n){let r,a;return c;function c(v){return v===38?e.check($4,o,d)(v):v===46||v===95?e.check(pp,o,d)(v):v===null||Eg(v)||a0(v)||v!==45&&s0(v)?o(v):(e.consume(v),c)}function d(v){return v===46?(a=r,r=void 0,e.consume(v),c):(v===95&&(r=!0),e.consume(v),c)}function o(v){return!a&&!r?t(v):n(v)}}function oK(e,t){let n=0;return r;function r(d){return d===38?e.check($4,t,a)(d):(d===40&&n++,d===41?e.check(pp,c,a)(d):fk(d)?t(d):G4(d)?e.check(pp,t,a)(d):(e.consume(d),r))}function a(d){return e.consume(d),r}function c(d){return n--,n<0?t(d):a(d)}}function aK(e,t,n){return r;function r(d){return e.consume(d),a}function a(d){return Wa(d)?(e.consume(d),a):d===59?(e.consume(d),c):n(d)}function c(d){return fk(d)?t(d):n(d)}}function sK(e,t,n){return r;function r(c){return e.consume(c),a}function a(c){return G4(c)?(e.consume(c),a):fk(c)?t(c):n(c)}}function G4(e){return e===33||e===34||e===39||e===41||e===42||e===44||e===46||e===58||e===59||e===60||e===63||e===95||e===126}function fk(e){return e===null||e===60||Fi(e)}function PP(e){return e===43||e===45||e===46||e===95||Wo(e)}function q4(e){return e===null||e===40||e===42||e===95||e===126||Fi(e)}function mk(e){return e===null||!Wa(e)}function Z4(e){return e!==47&&mk(e)}function gk(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const lK={tokenize:gK,partial:!0};function uK(){return{document:{[91]:{tokenize:pK,continuation:{tokenize:fK},exit:mK}},text:{[91]:{tokenize:dK},[93]:{add:"after",tokenize:cK,resolveTo:hK}}}}function cK(e,t,n){const r=this;let a=r.events.length;const c=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let d;for(;a--;){const v=r.events[a][1];if(v.type==="labelImage"){d=v;break}if(v.type==="gfmFootnoteCall"||v.type==="labelLink"||v.type==="label"||v.type==="image"||v.type==="link")break}return o;function o(v){if(!d||!d._balanced)return n(v);const C=ws(r.sliceSerialize({start:d.end,end:r.now()}));return C.charCodeAt(0)!==94||!c.includes(C.slice(1))?n(v):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(v),e.exit("gfmFootnoteCallLabelMarker"),t(v))}}function hK(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const c={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},d={type:"chunkString",contentType:"string",start:Object.assign({},c.start),end:Object.assign({},c.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",c,t],["enter",d,t],["exit",d,t],["exit",c,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function dK(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let c=0,d;return o;function o(F){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(F),e.exit("gfmFootnoteCallLabelMarker"),v}function v(F){return F!==94?n(F):(e.enter("gfmFootnoteCallMarker"),e.consume(F),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",C)}function C(F){let U;return F===null||F===91||c++>999?n(F):F===93?d?(e.exit("chunkString"),U=e.exit("gfmFootnoteCallString"),a.includes(ws(r.sliceSerialize(U)))?D(F):n(F)):n(F):(e.consume(F),Fi(F)||(d=!0),F===92?I:C)}function I(F){return F===91||F===92||F===93?(e.consume(F),c++,C):C(F)}function D(F){return e.enter("gfmFootnoteCallLabelMarker"),e.consume(F),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t}}function pK(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let c,d=0,o;return v;function v(T){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(T),e.exit("gfmFootnoteDefinitionLabelMarker"),C}function C(T){return T===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(T),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),I):n(T)}function I(T){let H;return T===null||T===91||d>999?n(T):T===93?o?(H=e.exit("gfmFootnoteDefinitionLabelString"),c=ws(r.sliceSerialize(H)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(T),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),U):n(T):Cn(T)?(e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),d++,I):(e.enter("chunkString").contentType="string",D(T))}function D(T){return T===null||Cn(T)||T===91||T===93||d>999?(e.exit("chunkString"),I(T)):(Fi(T)||(o=!0),d++,e.consume(T),T===92?F:D)}function F(T){return T===91||T===92||T===93?(e.consume(T),d++,D):D(T)}function U(T){return T===58?(e.enter("definitionMarker"),e.consume(T),e.exit("definitionMarker"),mr(e,j,"gfmFootnoteDefinitionWhitespace")):n(T)}function j(T){return a.includes(c)||a.push(c),t(T)}}function fK(e,t,n){return e.check(Hg,t,e.attempt(lK,t,n))}function mK(e){e.exit("gfmFootnoteDefinition")}function gK(e,t,n){const r=this;return mr(e,a,"gfmFootnoteDefinitionIndent",4+1);function a(c){const d=r.events[r.events.length-1];return d&&d[1].type==="gfmFootnoteDefinitionIndent"&&d[2].sliceSerialize(d[1],!0).length===4?t(c):n(c)}}function yK(e={}){let t=e.singleTilde;const n={tokenize:a,resolveAll:r};return t==null&&(t=!0),{text:{[126]:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(c,d){let o=-1;for(;++o<c.length;)if(c[o][0]==="enter"&&c[o][1].type==="strikethroughSequenceTemporary"&&c[o][1]._close){let v=o;for(;v--;)if(c[v][0]==="exit"&&c[v][1].type==="strikethroughSequenceTemporary"&&c[v][1]._open&&c[o][1].end.offset-c[o][1].start.offset===c[v][1].end.offset-c[v][1].start.offset){c[o][1].type="strikethroughSequence",c[v][1].type="strikethroughSequence";const C={type:"strikethrough",start:Object.assign({},c[v][1].start),end:Object.assign({},c[o][1].end)},I={type:"strikethroughText",start:Object.assign({},c[v][1].end),end:Object.assign({},c[o][1].start)},D=[["enter",C,d],["enter",c[v][1],d],["exit",c[v][1],d],["enter",I,d]];Ea(D,D.length,0,l0(d.parser.constructs.insideSpan.null,c.slice(v+1,o),d)),Ea(D,D.length,0,[["exit",I,d],["enter",c[o][1],d],["exit",c[o][1],d],["exit",C,d]]),Ea(c,v-1,o-v+3,D),o=v+D.length-2;break}}for(o=-1;++o<c.length;)c[o][1].type==="strikethroughSequenceTemporary"&&(c[o][1].type="data");return c}function a(c,d,o){const v=this.previous,C=this.events;let I=0;return D;function D(U){return v===126&&C[C.length-1][1].type!=="characterEscape"?o(U):(c.enter("strikethroughSequenceTemporary"),F(U))}function F(U){const j=Ex(v);if(U===126)return I>1?o(U):(c.consume(U),I++,F);if(I<2&&!t)return o(U);const T=c.exit("strikethroughSequenceTemporary"),H=Ex(U);return T._open=!H||H===2&&Boolean(j),T._close=!j||j===2&&Boolean(H),d(U)}}}const vK={flow:{null:{tokenize:xK,resolve:_K}}},DP={tokenize:bK,partial:!0};function _K(e,t){let n=-1,r,a,c,d,o,v,C;for(;++n<e.length;){const I=e[n][1];if(c&&(I.type==="temporaryTableCellContent"&&(d=d||n,o=n),(I.type==="tableCellDivider"||I.type==="tableRow")&&o)){const D={type:"tableContent",start:e[d][1].start,end:e[o][1].end},F={type:"chunkText",start:D.start,end:D.end,contentType:"text"};e.splice(d,o-d+1,["enter",D,t],["enter",F,t],["exit",F,t],["exit",D,t]),n-=o-d-3,d=void 0,o=void 0}if(e[n][0]==="exit"&&v!==void 0&&v+(C?0:1)<n&&(I.type==="tableCellDivider"||I.type==="tableRow"&&(v+3<n||e[v][1].type!=="whitespace"))){const D={type:a?"tableDelimiter":r?"tableHeader":"tableData",start:e[v][1].start,end:e[n][1].end};e.splice(n+(I.type==="tableCellDivider"?1:0),0,["exit",D,t]),e.splice(v,0,["enter",D,t]),n+=2,v=n+1,C=!0}I.type==="tableRow"&&(c=e[n][0]==="enter",c&&(v=n+1,C=!1)),I.type==="tableDelimiterRow"&&(a=e[n][0]==="enter",a&&(v=n+1,C=!1)),I.type==="tableHead"&&(r=e[n][0]==="enter")}return e}function xK(e,t,n){const r=this,a=[];let c=0,d,o;return v;function v(Ie){return e.enter("table")._align=a,e.enter("tableHead"),e.enter("tableRow"),Ie===124?C(Ie):(c++,e.enter("temporaryTableCellContent"),F(Ie))}function C(Ie){return e.enter("tableCellDivider"),e.consume(Ie),e.exit("tableCellDivider"),d=!0,I}function I(Ie){return Ie===null||Cn(Ie)?j(Ie):$r(Ie)?(e.enter("whitespace"),e.consume(Ie),D):(d&&(d=void 0,c++),Ie===124?C(Ie):(e.enter("temporaryTableCellContent"),F(Ie)))}function D(Ie){return $r(Ie)?(e.consume(Ie),D):(e.exit("whitespace"),I(Ie))}function F(Ie){return Ie===null||Ie===124||Fi(Ie)?(e.exit("temporaryTableCellContent"),I(Ie)):(e.consume(Ie),Ie===92?U:F)}function U(Ie){return Ie===92||Ie===124?(e.consume(Ie),F):F(Ie)}function j(Ie){if(Ie===null)return n(Ie);e.exit("tableRow"),e.exit("tableHead");const xt=r.interrupt;return r.interrupt=!0,e.attempt({tokenize:Ne,partial:!0},function(We){return r.interrupt=xt,e.enter("tableDelimiterRow"),T(We)},function(We){return r.interrupt=xt,n(We)})(Ie)}function T(Ie){return Ie===null||Cn(Ie)?B(Ie):$r(Ie)?(e.enter("whitespace"),e.consume(Ie),H):Ie===45?(e.enter("tableDelimiterFiller"),e.consume(Ie),o=!0,a.push("none"),N):Ie===58?(e.enter("tableDelimiterAlignment"),e.consume(Ie),e.exit("tableDelimiterAlignment"),a.push("left"),q):Ie===124?(e.enter("tableCellDivider"),e.consume(Ie),e.exit("tableCellDivider"),T):n(Ie)}function H(Ie){return $r(Ie)?(e.consume(Ie),H):(e.exit("whitespace"),T(Ie))}function N(Ie){return Ie===45?(e.consume(Ie),N):(e.exit("tableDelimiterFiller"),Ie===58?(e.enter("tableDelimiterAlignment"),e.consume(Ie),e.exit("tableDelimiterAlignment"),a[a.length-1]=a[a.length-1]==="left"?"center":"right",z):T(Ie))}function q(Ie){return Ie===45?(e.enter("tableDelimiterFiller"),e.consume(Ie),o=!0,N):n(Ie)}function z(Ie){return Ie===null||Cn(Ie)?B(Ie):$r(Ie)?(e.enter("whitespace"),e.consume(Ie),H):Ie===124?(e.enter("tableCellDivider"),e.consume(Ie),e.exit("tableCellDivider"),T):n(Ie)}function B(Ie){return e.exit("tableDelimiterRow"),!o||c!==a.length?n(Ie):Ie===null?k(Ie):e.check(DP,k,e.attempt({tokenize:Ne,partial:!0},mr(e,w,"linePrefix",4),k))(Ie)}function k(Ie){return e.exit("table"),t(Ie)}function w(Ie){return e.enter("tableBody"),R(Ie)}function R(Ie){return e.enter("tableRow"),Ie===124?J(Ie):(e.enter("temporaryTableCellContent"),se(Ie))}function J(Ie){return e.enter("tableCellDivider"),e.consume(Ie),e.exit("tableCellDivider"),ie}function ie(Ie){return Ie===null||Cn(Ie)?Ue(Ie):$r(Ie)?(e.enter("whitespace"),e.consume(Ie),ue):Ie===124?J(Ie):(e.enter("temporaryTableCellContent"),se(Ie))}function ue(Ie){return $r(Ie)?(e.consume(Ie),ue):(e.exit("whitespace"),ie(Ie))}function se(Ie){return Ie===null||Ie===124||Fi(Ie)?(e.exit("temporaryTableCellContent"),ie(Ie)):(e.consume(Ie),Ie===92?_e:se)}function _e(Ie){return Ie===92||Ie===124?(e.consume(Ie),se):se(Ie)}function Ue(Ie){return e.exit("tableRow"),Ie===null?je(Ie):e.check(DP,je,e.attempt({tokenize:Ne,partial:!0},mr(e,R,"linePrefix",4),je))(Ie)}function je(Ie){return e.exit("tableBody"),k(Ie)}function Ne(Ie,xt,We){return Et;function Et(xe){return Ie.enter("lineEnding"),Ie.consume(xe),Ie.exit("lineEnding"),mr(Ie,ct,"linePrefix")}function ct(xe){if(r.parser.lazy[r.now().line]||xe===null||Cn(xe))return We(xe);const Ee=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&Ee&&Ee[1].type==="linePrefix"&&Ee[2].sliceSerialize(Ee[1],!0).length>=4?We(xe):(r._gfmTableDynamicInterruptHack=!0,Ie.check(r.parser.constructs.flow,function(xn){return r._gfmTableDynamicInterruptHack=!1,We(xn)},function(xn){return r._gfmTableDynamicInterruptHack=!1,xt(xn)})(xe))}}}function bK(e,t,n){let r=0;return a;function a(d){return e.enter("check"),e.consume(d),c}function c(d){return d===-1||d===32?(e.consume(d),r++,r===4?t:c):d===null||Fi(d)?t(d):n(d)}}const wK={tokenize:CK},EK={text:{[91]:wK}};function CK(e,t,n){const r=this;return a;function a(o){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(o):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(o),e.exit("taskListCheckMarker"),c)}function c(o){return Fi(o)?(e.enter("taskListCheckValueUnchecked"),e.consume(o),e.exit("taskListCheckValueUnchecked"),d):o===88||o===120?(e.enter("taskListCheckValueChecked"),e.consume(o),e.exit("taskListCheckValueChecked"),d):n(o)}function d(o){return o===93?(e.enter("taskListCheckMarker"),e.consume(o),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:SK},t,n)):n(o)}}function SK(e,t,n){const r=this;return mr(e,a,"whitespace");function a(c){const d=r.events[r.events.length-1];return(d&&d[1].type==="whitespace"||Cn(c))&&c!==null?t(c):n(c)}}function kK(e){return s4([QX,uK(),yK(e),vK,EK])}function RP(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function TK(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const AK={}.hasOwnProperty,MK=function(e,t,n,r){let a,c;typeof t=="string"||t instanceof RegExp?(c=[[t,n]],a=r):(c=t,a=n),a||(a={});const d=lk(a.ignore||[]),o=IK(c);let v=-1;for(;++v<o.length;)b4(e,"text",C);return e;function C(D,F){let U=-1,j;for(;++U<F.length;){const T=F[U];if(d(T,j?j.children.indexOf(T):void 0,j))return;j=T}if(j)return I(D,F)}function I(D,F){const U=F[F.length-1],j=o[v][0],T=o[v][1];let H=0;const N=U.children.indexOf(D);let q=!1,z=[],B;j.lastIndex=0;let k=j.exec(D.value);for(;k;){B=k.index;const w={index:k.index,input:k.input,stack:[...F,D]};let R=T(...k,w);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R!==!1&&(H!==B&&z.push({type:"text",value:D.value.slice(H,B)}),Array.isArray(R)?z.push(...R):R&&z.push(R),H=B+k[0].length,q=!0),!j.global)break;k=j.exec(D.value)}return q?(H<D.value.length&&z.push({type:"text",value:D.value.slice(H)}),U.children.splice(N,1,...z)):z=[D],N+z.length}};function IK(e){const t=[];if(typeof e!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(e)){let n=-1;for(;++n<e.length;)t.push([LP(e[n][0]),OP(e[n][1])])}else{let n;for(n in e)AK.call(e,n)&&t.push([LP(n),OP(e[n])])}return t}function LP(e){return typeof e=="string"?new RegExp(TK(e),"g"):e}function OP(e){return typeof e=="function"?e:()=>e}const bw="phrasing",ww=["autolink","link","image","label"],PK={transforms:[FK],enter:{literalAutolink:RK,literalAutolinkEmail:Ew,literalAutolinkHttp:Ew,literalAutolinkWww:Ew},exit:{literalAutolink:BK,literalAutolinkEmail:zK,literalAutolinkHttp:LK,literalAutolinkWww:OK}},DK={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:bw,notInConstruct:ww},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:bw,notInConstruct:ww},{character:":",before:"[ps]",after:"\\/",inConstruct:bw,notInConstruct:ww}]};function RK(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Ew(e){this.config.enter.autolinkProtocol.call(this,e)}function LK(e){this.config.exit.autolinkProtocol.call(this,e)}function OK(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.url="http://"+this.sliceSerialize(e)}function zK(e){this.config.exit.autolinkEmail.call(this,e)}function BK(e){this.exit(e)}function FK(e){MK(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,NK],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,UK]],{ignore:["link","linkReference"]})}function NK(e,t,n,r,a){let c="";if(!X4(a)||(/^w/i.test(t)&&(n=t+n,t="",c="http://"),!jK(n)))return!1;const d=VK(n+r);if(!d[0])return!1;const o={type:"link",title:null,url:c+t+d[0],children:[{type:"text",value:t+d[0]}]};return d[1]?[o,{type:"text",value:d[1]}]:o}function UK(e,t,n,r){return!X4(r,!0)||/[_-\d]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function jK(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function VK(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);let n,r,a,c;if(t)for(e=e.slice(0,t.index),c=t[0],n=c.indexOf(")"),r=RP(e,"("),a=RP(e,")");n!==-1&&r>a;)e+=c.slice(0,n+1),c=c.slice(n+1),n=c.indexOf(")"),a++;return[e,c]}function X4(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||a0(n)||s0(n))&&(!t||n!==47)}function zP(e){return e.label||!e.identifier?e.label||"":v4(e.identifier)}function $u(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,a=n.line||1,c=n.column||1;return{move:v,current:d,shift:o};function d(){return{now:{line:a,column:c},lineShift:r}}function o(C){r+=C}function v(C=""){const I=C.split(/\r?\n|\r/g),D=I[I.length-1];return a+=I.length-1,c=I.length===1?c+D.length:1+D.length+r,C}}function K4(e,t,n){const r=t.indexStack,a=e.children||[],c=$u(n),d=[];let o=-1;for(r.push(-1);++o<a.length;){const C=a[o];r[r.length-1]=o,d.push(c.move(t.handle(C,e,t,{before:`
`,after:`
`,...c.current()}))),C.type!=="list"&&(t.bulletLastUsed=void 0),o<a.length-1&&d.push(c.move(v(C,a[o+1])))}return r.pop(),d.join("");function v(C,I){let D=t.join.length;for(;D--;){const F=t.join[D](C,I,e,t);if(F===!0||F===1)break;if(typeof F=="number")return`
`.repeat(1+F);if(F===!1)return`

<!---->

`}return`

`}}const $K=/\r?\n|\r/g;function Y4(e,t){const n=[];let r=0,a=0,c;for(;c=$K.exec(e);)d(e.slice(r,c.index)),n.push(c[0]),r=c.index+c[0].length,a++;return d(e.slice(r)),n.join("");function d(o){n.push(t(o,a,!o))}}function J4(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function HK(e,t){return BP(e,t.inConstruct,!0)&&!BP(e,t.notInConstruct,!1)}function BP(e,t,n){if(!t)return n;typeof t=="string"&&(t=[t]);let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function FP(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),a=[],c=[],d={};let o=-1;for(;++o<e.unsafe.length;){const I=e.unsafe[o];if(!HK(e.stack,I))continue;const D=J4(I);let F;for(;F=D.exec(r);){const U="before"in I||Boolean(I.atBreak),j="after"in I,T=F.index+(U?F[1].length:0);a.includes(T)?(d[T].before&&!U&&(d[T].before=!1),d[T].after&&!j&&(d[T].after=!1)):(a.push(T),d[T]={before:U,after:j})}}a.sort(WK);let v=n.before?n.before.length:0;const C=r.length-(n.after?n.after.length:0);for(o=-1;++o<a.length;){const I=a[o];I<v||I>=C||I+1<C&&a[o+1]===I+1&&d[I].after&&!d[I+1].before&&!d[I+1].after||a[o-1]===I-1&&d[I].before&&!d[I-1].before&&!d[I-1].after||(v!==I&&c.push(NP(r.slice(v,I),"\\")),v=I,/[!-/:-@[-`{-~]/.test(r.charAt(I))&&(!n.encode||!n.encode.includes(r.charAt(I)))?c.push("\\"):(c.push("&#x"+r.charCodeAt(I).toString(16).toUpperCase()+";"),v++))}return c.push(NP(r.slice(v,C),n.after)),c.join("")}function WK(e,t){return e-t}function NP(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],a=[],c=e+t;let d=-1,o=0,v;for(;v=n.exec(c);)r.push(v.index);for(;++d<r.length;)o!==r[d]&&a.push(e.slice(o,r[d])),a.push("\\"),o=r[d];return a.push(e.slice(o)),a.join("")}function GK(){return{enter:{gfmFootnoteDefinition:e,gfmFootnoteDefinitionLabelString:t,gfmFootnoteCall:a,gfmFootnoteCallString:c},exit:{gfmFootnoteDefinition:r,gfmFootnoteDefinitionLabelString:n,gfmFootnoteCall:o,gfmFootnoteCallString:d}};function e(v){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},v)}function t(){this.buffer()}function n(v){const C=this.resume(),I=this.stack[this.stack.length-1];I.label=C,I.identifier=ws(this.sliceSerialize(v)).toLowerCase()}function r(v){this.exit(v)}function a(v){this.enter({type:"footnoteReference",identifier:"",label:""},v)}function c(){this.buffer()}function d(v){const C=this.resume(),I=this.stack[this.stack.length-1];I.label=C,I.identifier=ws(this.sliceSerialize(v)).toLowerCase()}function o(v){this.exit(v)}}function qK(){return e.peek=t,{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:n,footnoteReference:e}};function e(r,a,c,d){const o=$u(d);let v=o.move("[^");const C=c.enter("footnoteReference"),I=c.enter("reference");return v+=o.move(FP(c,zP(r),{...o.current(),before:v,after:"]"})),I(),C(),v+=o.move("]"),v}function t(){return"["}function n(r,a,c,d){const o=$u(d);let v=o.move("[^");const C=c.enter("footnoteDefinition"),I=c.enter("label");return v+=o.move(FP(c,zP(r),{...o.current(),before:v,after:"]"})),I(),v+=o.move("]:"+(r.children&&r.children.length>0?" ":"")),o.shift(4),v+=o.move(Y4(K4(r,c,o.current()),D)),C(),v;function D(F,U,j){return U?(j?"":"    ")+F:F}}}function Q4(e,t,n){const r=t.indexStack,a=e.children||[],c=[];let d=-1,o=n.before;r.push(-1);let v=$u(n);for(;++d<a.length;){const C=a[d];let I;if(r[r.length-1]=d,d+1<a.length){let D=t.handle.handlers[a[d+1].type];D&&D.peek&&(D=D.peek),I=D?D(a[d+1],e,t,{before:"",after:"",...v.current()}).charAt(0):""}else I=n.after;c.length>0&&(o==="\r"||o===`
`)&&C.type==="html"&&(c[c.length-1]=c[c.length-1].replace(/(\r?\n|\r)$/," "),o=" ",v=$u(n),v.move(c.join(""))),c.push(v.move(t.handle(C,e,t,{...v.current(),before:o,after:I}))),o=c[c.length-1].slice(-1)}return r.pop(),c.join("")}const ZK={canContainEols:["delete"],enter:{strikethrough:KK},exit:{strikethrough:YK}},XK={unsafe:[{character:"~",inConstruct:"phrasing"}],handlers:{delete:ez}};ez.peek=JK;function KK(e){this.enter({type:"delete",children:[]},e)}function YK(e){this.exit(e)}function ez(e,t,n,r){const a=$u(r),c=n.enter("emphasis");let d=a.move("~~");return d+=Q4(e,n,{...a.current(),before:d,after:"~"}),d+=a.move("~~"),c(),d}function JK(){return"~"}tz.peek=QK;function tz(e,t,n){let r=e.value||"",a="`",c=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++c<n.unsafe.length;){const d=n.unsafe[c],o=J4(d);let v;if(!!d.atBreak)for(;v=o.exec(r);){let C=v.index;r.charCodeAt(C)===10&&r.charCodeAt(C-1)===13&&C--,r=r.slice(0,C)+" "+r.slice(v.index+1)}}return a+r+a}function QK(){return"`"}function eY(e,t={}){const n=(t.align||[]).concat(),r=t.stringLength||nY,a=[],c=[],d=[],o=[];let v=0,C=-1;for(;++C<e.length;){const j=[],T=[];let H=-1;for(e[C].length>v&&(v=e[C].length);++H<e[C].length;){const N=tY(e[C][H]);if(t.alignDelimiters!==!1){const q=r(N);T[H]=q,(o[H]===void 0||q>o[H])&&(o[H]=q)}j.push(N)}c[C]=j,d[C]=T}let I=-1;if(typeof n=="object"&&"length"in n)for(;++I<v;)a[I]=UP(n[I]);else{const j=UP(n);for(;++I<v;)a[I]=j}I=-1;const D=[],F=[];for(;++I<v;){const j=a[I];let T="",H="";j===99?(T=":",H=":"):j===108?T=":":j===114&&(H=":");let N=t.alignDelimiters===!1?1:Math.max(1,o[I]-T.length-H.length);const q=T+"-".repeat(N)+H;t.alignDelimiters!==!1&&(N=T.length+N+H.length,N>o[I]&&(o[I]=N),F[I]=N),D[I]=q}c.splice(1,0,D),d.splice(1,0,F),C=-1;const U=[];for(;++C<c.length;){const j=c[C],T=d[C];I=-1;const H=[];for(;++I<v;){const N=j[I]||"";let q="",z="";if(t.alignDelimiters!==!1){const B=o[I]-(T[I]||0),k=a[I];k===114?q=" ".repeat(B):k===99?B%2?(q=" ".repeat(B/2+.5),z=" ".repeat(B/2-.5)):(q=" ".repeat(B/2),z=q):z=" ".repeat(B)}t.delimiterStart!==!1&&!I&&H.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&N==="")&&(t.delimiterStart!==!1||I)&&H.push(" "),t.alignDelimiters!==!1&&H.push(q),H.push(N),t.alignDelimiters!==!1&&H.push(z),t.padding!==!1&&H.push(" "),(t.delimiterEnd!==!1||I!==v-1)&&H.push("|")}U.push(t.delimiterEnd===!1?H.join("").replace(/ +$/,""):H.join(""))}return U.join(`
`)}function tY(e){return e==null?"":String(e)}function nY(e){return e.length}function UP(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const rY={enter:{table:iY,tableData:jP,tableHeader:jP,tableRow:aY},exit:{codeText:sY,table:oY,tableData:Cw,tableHeader:Cw,tableRow:Cw}};function iY(e){const t=e._align;this.enter({type:"table",align:t.map(n=>n==="none"?null:n),children:[]},e),this.setData("inTable",!0)}function oY(e){this.exit(e),this.setData("inTable")}function aY(e){this.enter({type:"tableRow",children:[]},e)}function Cw(e){this.exit(e)}function jP(e){this.enter({type:"tableCell",children:[]},e)}function sY(e){let t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,lY));const n=this.stack[this.stack.length-1];n.value=t,this.exit(e)}function lY(e,t){return t==="|"?t:e}function uY(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,c=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:d,tableRow:o,tableCell:v,inlineCode:F}};function d(U,j,T,H){return C(I(U,T,H),U.align)}function o(U,j,T,H){const N=D(U,T,H),q=C([N]);return q.slice(0,q.indexOf(`
`))}function v(U,j,T,H){const N=T.enter("tableCell"),q=T.enter("phrasing"),z=Q4(U,T,{...H,before:c,after:c});return q(),N(),z}function C(U,j){return eY(U,{align:j,alignDelimiters:r,padding:n,stringLength:a})}function I(U,j,T){const H=U.children;let N=-1;const q=[],z=j.enter("table");for(;++N<H.length;)q[N]=D(H[N],j,T);return z(),q}function D(U,j,T){const H=U.children;let N=-1;const q=[],z=j.enter("tableRow");for(;++N<H.length;)q[N]=v(H[N],U,j,T);return z(),q}function F(U,j,T){let H=tz(U,j,T);return T.stack.includes("tableCell")&&(H=H.replace(/\|/g,"\\$&")),H}}function cY(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function hY(e){const t=e.options.listItemIndent||"tab";if(t===1||t==="1")return"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function dY(e,t,n,r){const a=hY(n);let c=n.bulletCurrent||cY(n);t&&t.type==="list"&&t.ordered&&(c=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+c);let d=c.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(d=Math.ceil(d/4)*4);const o=$u(r);o.move(c+" ".repeat(d-c.length)),o.shift(d);const v=n.enter("listItem"),C=Y4(K4(e,n,o.current()),I);return v(),C;function I(D,F,U){return F?(U?"":" ".repeat(d))+D:(U?c:c+" ".repeat(d-c.length))+D}}const pY={exit:{taskListCheckValueChecked:VP,taskListCheckValueUnchecked:VP,paragraph:mY}},fY={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:gY}};function VP(e){const t=this.stack[this.stack.length-2];t.checked=e.type==="taskListCheckValueChecked"}function mY(e){const t=this.stack[this.stack.length-2],n=this.stack[this.stack.length-1],r=t.children,a=n.children[0];let c=-1,d;if(t&&t.type==="listItem"&&typeof t.checked=="boolean"&&a&&a.type==="text"){for(;++c<r.length;){const o=r[c];if(o.type==="paragraph"){d=o;break}}d===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}this.exit(e)}function gY(e,t,n,r){const a=e.children[0],c=typeof e.checked=="boolean"&&a&&a.type==="paragraph",d="["+(e.checked?"x":" ")+"] ",o=$u(r);c&&o.move(d);let v=dY(e,t,n,{...r,...o.current()});return c&&(v=v.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,C)),v;function C(I){return I+d}}function yY(){return[PK,GK(),ZK,rY,pY]}function vY(e){return{extensions:[DK,qK(),XK,uY(e),fY]}}function _Y(e={}){const t=this.data();n("micromarkExtensions",kK(e)),n("fromMarkdownExtensions",yY()),n("toMarkdownExtensions",vY(e));function n(r,a){(t[r]?t[r]:t[r]=[]).push(a)}}const yk=({text:e})=>m.exports.createElement(pk,{children:e,remarkPlugins:[_Y],components:{img:t=>xY(t.src)?m.exports.createElement("iframe",{className:"markdown-embed",frameBorder:0,src:t.src}):m.exports.createElement("img",{src:t.src,alt:t.alt})}});function xY(e){let t=["https://forms.gle","https://docs.google.com","https://www.youtube.com/embed","https://open.spotify.com/embed"];for(let n=0;n<t.length;n++)if(e.startsWith(t[n]))return!0;return!1}const bY=()=>{const[e,t]=m.exports.useState(-1);return m.exports.useEffect(()=>{document.title="404 Page Not Found | Metropolis",t(Math.floor(Math.random()*3))},[]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/404.css"}),m.exports.createElement("div",{className:"main-container card"},m.exports.createElement("h2",{className:"center-align message"},"404: Page Not Found"),m.exports.createElement("img",{className:"comic-img",style:{maxWidth:"100%"},src:`/static/img/404-comics/404-${e}.png`}),m.exports.createElement("div",{className:"display-metropolis valign-wrapper"},m.exports.createElement("img",{className:"inline-logo",src:"/static/img/themes/logos/dark-transparent.png"})),m.exports.createElement("div",{className:"game-container",hidden:!0},m.exports.createElement("input",{type:"button",className:"control-button",id:"up-button",value:"W"}),m.exports.createElement("br",null),m.exports.createElement("div",{className:"row valign-wrapper game-mid"},m.exports.createElement("div",{style:{marginLeft:"auto",marginRight:"auto"}},m.exports.createElement("input",{type:"button",className:"col control-button",id:"left-button",value:"A"}),m.exports.createElement("div",{className:"game-content col"},m.exports.createElement("canvas",{id:"game-canvas",style:{backgroundColor:"black"}}),m.exports.createElement("div",{className:"result-container valign-wrapper"},m.exports.createElement("div",{className:"result-display valign-wrapper",hidden:!0},m.exports.createElement("div",{className:"result-display-text"},m.exports.createElement("span",{className:"result-display-message"},"Start Game"),m.exports.createElement("br",null))))),m.exports.createElement("input",{type:"button",className:"col control-button",id:"right-button",value:"D"}),m.exports.createElement("br",null))),m.exports.createElement("input",{type:"button",className:"control-button",id:"down-button",value:"S"})),m.exports.createElement("p",{className:"center-align"},m.exports.createElement(Yt,{to:"https://maclyonsden.com/"},"Return Home"))))},wY=()=>{const e=m.exports.useContext(Hr),[t,n]=m.exports.useState(!1),[r,a]=m.exports.useState({}),c=encodeURIComponent(window.location.pathname+"/");m.exports.useEffect(()=>{e.getAPI(`${lr.OBJECT}/flatpage/retrieve/${c}?lookup=url`,!1).then(o=>{a(o.data),n(!0),document.title=`${o.data.title} | Metropolis`}).catch(o=>{o.response.status!==404&&e.refreshAuth()})},[]);const d=()=>{window.history.back()};return t?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/flatpage.css"}),m.exports.createElement("div",{className:"resources-page"},m.exports.createElement("a",{id:"back",onClick:d},m.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"content"},m.exports.createElement("h1",{className:"title"},"Resources"),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"content-body"},m.exports.createElement(yk,{text:r.content})))))):m.exports.createElement(bY,null)},EY=()=>{const{id:e}=Og();Si();const t=m.exports.useContext(Hr),[n,r]=m.exports.useState({}),[a,c]=m.exports.useState([]),[d,o]=m.exports.useState([]),[v,C]=m.exports.useState([]);m.exports.useEffect(()=>{document.title=`${n.name} | Metropolis`},[n]),m.exports.useEffect(()=>{const D=`${lr.OBJECT}/organization/retrieve/${e}`;t.getAPI(D,!1).then(F=>{const U=F.data;r(U),console.log(D),t.getAPI(`${lr.OBJECT}/tag`,!1).then(j=>{const T=j.data.results;console.log(U.tags);const H=[];for(let N=0;N<U.tags.length;N++)for(let q=0;q<T.length;q++)if(U.tags[N]===T[q].id){H.push(T[q]);break}c(H)}).catch(()=>{t.refreshAuth()}),t.getAPI(`${lr.OBJECT}/user?limit=99999999`,!1).then(j=>{const T=j.data.results;o(U.execs.map(H=>{for(let N=0;N<T.length;N++)if(T[N].id===H)return T[N];return null})),C(U.members.map(H=>{for(let N=0;N<T.length;N++)if(T[N].id===H)return T[N];return null}))}).catch(()=>{t.refreshAuth()})}).catch(F=>{t.refreshAuth()})},[]);const I=D=>m.exports.createElement("li",null,m.exports.createElement("i",{className:"zmdi zmdi-link zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("a",{href:D.href,target:"_blank",style:{wordBreak:"break-word"}},D.href));return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/detail.css"}),m.exports.createElement("div",{className:"club"},m.exports.createElement("div",{className:"row"},m.exports.createElement("img",{className:"club-banner responsive-img col s12",src:n.banner,alt:"banner of organization"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"club-detail"},m.exports.createElement("div",{className:"row club-header"},m.exports.createElement("div",{className:"col m3 s12"},m.exports.createElement("div",{className:"club-logo"},m.exports.createElement("img",{className:"circle",src:n.icon,alt:"icon of organization"}))),m.exports.createElement("div",{className:"col m5 s12"},m.exports.createElement("h2",{className:"club-name"},n.name),m.exports.createElement("div",{className:"tag-section"},a.map(D=>m.exports.createElement(_g,{tag:D})))),m.exports.createElement("div",{className:"col m4 s12"})),m.exports.createElement("div",{className:"row club-info"},m.exports.createElement("div",{className:"col m8"},m.exports.createElement("div",{className:"description"},n.bio,m.exports.createElement("br",null),m.exports.createElement("br",null),n.owner!==t.user.id?m.exports.createElement(Yt,{to:`/club/edit/${n.id}`},"Edit club details"):m.exports.createElement(m.exports.Fragment,null))),m.exports.createElement("div",{className:"col m4"},m.exports.createElement("ul",{className:"link-section",style:{display:"inline"}},"links"in n?n.links.map(D=>m.exports.createElement(I,{href:D})):m.exports.createElement(m.exports.Fragment,null)))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"col s12"},m.exports.createElement("section",{id:"executives"},m.exports.createElement("h4",null,"Executives"),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"members-list"},d.map(D=>D===null?m.exports.createElement(m.exports.Fragment,null):(console.log(D),m.exports.createElement(Yt,{to:`/user/${D.id}`,key:D.id},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:D.gravatar_url,alt:`${D.username}'s profile picture`})),m.exports.createElement("div",{className:"member-text"},`${D.first_name} ${D.last_name}`))))))),m.exports.createElement("section",{id:"members"},m.exports.createElement("h4",null,"Members"),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"members-list"},v.map(D=>D===null?m.exports.createElement(m.exports.Fragment,null):m.exports.createElement("a",{href:`/user/${D.id}`,key:D.id},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:D.gravatar_url,alt:`${D.username}'s profile picture`})),m.exports.createElement("div",{className:"member-text"},`${D.first_name} ${D.last_name}`))))))))))))},CY=()=>{const e=Si(),{id:t}=Og(),n=m.exports.useContext(Hr),[r,a]=m.exports.useState({}),[c,d]=m.exports.useState(""),[o,v]=m.exports.useState({}),[C,I]=m.exports.useState("");m.exports.useEffect(()=>{const U=`${lr.OBJECT}/organization/retrieve/${t}`;n.getAPI(U,!1).then(j=>{const T=j.data;a(T),v(T)}),I(r.bio)},[]),console.log(`${r.name}'s Bio: ${r.bio}`);const D=U=>{U.preventDefault(),console.log("ogga");const j=`${lr.OBJECT}/organization/single/${r.id}`;n.patchAPI(j,o).then(T=>{console.log(`Successfully changed ${r.name}'s details`),e(`/club/${r.id}`)}).catch(T=>{console.log(`Failed to change ${r.name}'s details`),d("An internal error occured. Please contact an admin to get it fixed.")})},F=U=>{I(U.target.value),console.log(C+" "+r.name)};return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/edit-club.css"}),m.exports.createElement("div",{className:"edit-club"},m.exports.createElement("div",{className:"row"},m.exports.createElement("img",{className:"club-banner responsive-img col s12",src:r.banner,alt:"banner of organization"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"white-bg box-center"},m.exports.createElement("div",{className:"row page-title"},m.exports.createElement("h1",null,m.exports.createElement("strong",null,"Edit club details for ",r.name))),m.exports.createElement("form",{onSubmit:D},m.exports.createElement("div",{className:"field"},m.exports.createElement("label",{htmlFor:"edit-club-name-textarea"},"Name:"),m.exports.createElement("div",{className:"row edit-club-name"},m.exports.createElement("input",{type:"text",id:"edit-club-name-textarea",defaultValue:r.name,onChange:F}))),m.exports.createElement("div",{className:"field"},m.exports.createElement("label",{htmlFor:"edit-club-status-dropdown"},"Club Status:"),m.exports.createElement("select",{id:"edit-club-status-dropdown",className:"browser-default"},m.exports.createElement("option",{value:"Open Membership"},"Open Membership"),m.exports.createElement("option",{value:"Accepting Applications"},"Accepting Applications"),m.exports.createElement("option",{value:"Closed Applications"},"Closed Applications"))),m.exports.createElement("div",{className:"field"},m.exports.createElement("label",{htmlFor:"edit-club-bio-textarea"},"Bio:"),m.exports.createElement("div",{className:"row edit-club-bio"},m.exports.createElement("textarea",{id:"edit-club-bio-textarea",defaultValue:r.bio,onChange:F}))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",null,m.exports.createElement("button",{type:"submit",className:"btn"},"Submit"),m.exports.createElement("a",{href:`/club/${r.id}`,className:"btn"},"Cancel"))))))))},SY=()=>{const{id:e}=Og();Si();const t=m.exports.useContext(Hr),[n,r]=m.exports.useState({}),[a,c]=m.exports.useState({}),[d,o]=m.exports.useState([]);return m.exports.useState([]),m.exports.useState([]),m.exports.useEffect(()=>{const v=`${lr.OBJECT}/blog-post/retrieve/${e}`;t.getAPI(v).then(C=>{const I=C.data;r(I),t.getAPI(`${lr.USER}/${I.author}`).then(D=>{c(D.data)}).catch(()=>{t.refreshAuth()}),t.getAPI(`${lr.OBJECT}/tag`).then(D=>{const F=D.data.results,U=[];for(let j=0;j<I.tags.length;j++)for(let T=0;T<F.length;T++)if(I.tags[j]===F[T].id){U.push(F[T]);break}o(U)}).catch(()=>{t.refreshAuth()})}).catch(C=>{t.refreshAuth()})},[]),a?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/blog-detail.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"card-container"},m.exports.createElement("img",{className:"card-image",src:n.featured_image}),m.exports.createElement("div",{className:"tag-section"},m.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ffcced"}},"test tag"),m.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ccffe1"}},"test tag 2")),m.exports.createElement("h1",{className:"title"},n.title),m.exports.createElement("div",{className:"card-authors"},m.exports.createElement("div",{className:"card-authors-image"},m.exports.createElement(Yt,{to:`/user/${n.author}`},m.exports.createElement("img",{className:"circle",src:a.gravatar_url}))),m.exports.createElement("div",{className:"card-authors-text"},m.exports.createElement(Yt,{to:`/user/${n.author}`,className:"link"},`${a.first_name} ${a.last_name}`),m.exports.createElement("br",null),"\u2022 ",new Date(n.created_date).toLocaleTimeString(void 0,Yx))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"card-body"},m.exports.createElement(yk,{text:n.body})),m.exports.createElement("br",null),m.exports.createElement(Yt,{className:"link",to:"/blog"},m.exports.createElement("i",{className:"zmdi zmdi-chevron-left"})," Return to Blog Posts")))):m.exports.createElement(m.exports.Fragment,null)},kY=()=>{const{id:e}=Og(),[t,n]=m.exports.useState({body:""}),r=m.exports.useContext(Hr),a=Si();m.exports.useState(!0);const[c,d]=m.exports.useState({}),[o,v]=m.exports.useState({});m.exports.useEffect(()=>{r.getAPI(`${lr.OBJECT}/announcement/retrieve/${e}`,!1).then(U=>{n(U.data)}).catch(U=>{console.log(U),r.refreshAuth()})},[]),m.exports.useEffect(()=>{console.log("ORGANIZATIONS UPDATED:",r.allOrgs),d(r.allOrgs.find(U=>U.id===t.organization))},[r.allOrgs,t]),m.exports.useEffect(()=>{console.log("USERS UPDATED:",r.allUsers);let U=r.allUsers.find(j=>j.id===t.author);console.log("Looking for:",t),console.log("Author found:",U),v(U)},[r.allUsers,t]);const C=U=>T3.map(j=>{const T=j.id===U?"header header-active":"header";return m.exports.createElement("li",{key:j.id,className:T,onClick:()=>a(`/announcements?feed=${j.id}`)},j.text)}),I=U=>m.exports.createElement("div",{className:"prompt"},m.exports.createElement("div",{className:"prompt-text"},m.exports.createElement("p",{id:"approvaltop"},"The following announcement is awaiting your approval."),m.exports.createElement("h5",{id:"approvalbot"},"Approve Announcement?")),m.exports.createElement("div",{className:"prompt-buttons"},m.exports.createElement("a",{className:"checkmark",onClick:j=>{r.putAPI(`${lr.OBJECT}/announcement/single/${e}`,{...t,status:"a"}).then(T=>{console.log("Success!")}).catch(T=>{})}},m.exports.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"}},m.exports.createElement("i",{className:"material-icons"},"check"))),m.exports.createElement("a",{className:"reject",onClick:j=>{M.Modal.getInstance(document.getElementById("reject-popup")).open()}},m.exports.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"}},m.exports.createElement("i",{className:"material-icons",style:{color:"red"}},"clear"))))),[D,F]=m.exports.useState("");return console.log("Debug:",c,o),c&&o&&"name"in c&&"username"in o?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/announcement-detail.css"}),m.exports.createElement("div",{className:"container"},r.user.is_staff&&m.exports.createElement(I,null),m.exports.createElement("div",{id:"reject-popup",className:"modal reject-modal"},m.exports.createElement("div",{className:"modal-top modal-header"},m.exports.createElement("h5",{className:"header-announcement"},"Add Announcement")),m.exports.createElement("div",{className:"modal-content"},m.exports.createElement("div",{className:"form reason"},m.exports.createElement("h6",{className:"form-label"},"Reason for rejection:"),m.exports.createElement("input",{type:"text",onChange:U=>F(U.target.value)}))),m.exports.createElement("div",{className:"modal-footer"},m.exports.createElement("a",{href:"#!",className:"modal-close waves-effect waves-red btn-flat"},"Cancel"),m.exports.createElement("a",{className:"waves-effect waves-light btn",onClick:U=>{r.putAPI(`${lr.OBJECT}/announcement/single/${e}`,{...t,status:"r",rejection_reason:D}).then(j=>{console.log("Success!"),M.Modal.getInstance(document.getElementById("reject-popup")).close()}).catch(j=>{})}},"Submit!"))),m.exports.createElement("div",{className:"headers"},m.exports.createElement("ul",null,C(""))),m.exports.createElement("div",{className:"card-container"},m.exports.createElement("div",{className:"admin"},m.exports.createElement("a",{className:"link",href:`/admin/core/announcement/${e}/change/`},"Edit")),m.exports.createElement("div",{className:"tag-section"},m.exports.createElement("p",{className:"tag",style:{backgroundColor:"#f9ccff"}},"cultural & community"),m.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ffccd0"}},"school")),m.exports.createElement("h1",{className:"title"},t.title),m.exports.createElement("div",{className:"card-authors"},m.exports.createElement("div",{className:"card-authors-image"},m.exports.createElement(Yt,{to:`/club/${t.organization}`},m.exports.createElement("img",{className:"circle",src:c&&c.banner}))),m.exports.createElement("div",{className:"card-authors-text"},m.exports.createElement("a",{href:`/club/${t.organization}`,className:"link"},c.name),",",m.exports.createElement("a",{href:`/user/${t.author}`,className:"link"},`${o.first_name} ${o.last_name}`),m.exports.createElement("br",null),"\u2022 ",new Date(t.created_date).toLocaleTimeString(void 0,Yx))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"card-body"},!!t.body&&m.exports.createElement(yk,{text:t.body})),m.exports.createElement("br",null),m.exports.createElement(Yt,{className:"link",to:"/announcements"},m.exports.createElement("i",{className:"zmdi zmdi-chevron-left"})," Return to Announcements")))):m.exports.createElement(m.exports.Fragment,null)},TY=()=>{const e=Si(),t=m.exports.useContext(Hr),r=Kx().get("next");return m.exports.useEffect(()=>{document.title="Logout | Metropolis",t.logout(),e(r||"/")}),m.exports.createElement(m.exports.Fragment,null)},AY={black:"#000",white:"#fff"};var Cg=AY;const MY={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var Dd=MY;const IY={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var Rd=IY;const PY={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var Ld=PY;const DY={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var Od=DY;const RY={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var zd=RY;const LY={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var Em=LY;const OY={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var zY=OY;function eh(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function nz(e){if(!eh(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=nz(e[n])}),t}function Za(e,t,n={clone:!0}){const r=n.clone?st({},e):e;return eh(e)&&eh(t)&&Object.keys(t).forEach(a=>{a!=="__proto__"&&(eh(t[a])&&a in e&&eh(e[a])?r[a]=Za(e[a],t[a],n):n.clone?r[a]=eh(t[a])?nz(t[a]):t[a]:r[a]=t[a])}),r}function Hu(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Zi(e){if(typeof e!="string")throw new Error(Hu(7));return e.charAt(0).toUpperCase()+e.slice(1)}function $P(...e){return e.reduce((t,n)=>n==null?t:function(...a){t.apply(this,a),n.apply(this,a)},()=>{})}function rz(e,t=166){let n;function r(...a){const c=()=>{e.apply(this,a)};clearTimeout(n),n=setTimeout(c,t)}return r.clear=()=>{clearTimeout(n)},r}function Sw(e,t){return m.exports.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function Ca(e){return e&&e.ownerDocument||document}function _h(e){return Ca(e).defaultView||window}function fC(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const BY=typeof window!="undefined"?m.exports.useLayoutEffect:m.exports.useEffect;var xh=BY;function HP({controlled:e,default:t,name:n,state:r="value"}){const{current:a}=m.exports.useRef(e!==void 0),[c,d]=m.exports.useState(t),o=a?e:c,v=m.exports.useCallback(C=>{a||d(C)},[]);return[o,v]}function tp(e){const t=m.exports.useRef(e);return xh(()=>{t.current=e}),m.exports.useCallback((...n)=>(0,t.current)(...n),[])}function Zo(...e){return m.exports.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{fC(n,t)})},e)}let w0=!0,mC=!1,WP;const FY={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function NY(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&FY[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function UY(e){e.metaKey||e.altKey||e.ctrlKey||(w0=!0)}function kw(){w0=!1}function jY(){this.visibilityState==="hidden"&&mC&&(w0=!0)}function VY(e){e.addEventListener("keydown",UY,!0),e.addEventListener("mousedown",kw,!0),e.addEventListener("pointerdown",kw,!0),e.addEventListener("touchstart",kw,!0),e.addEventListener("visibilitychange",jY,!0)}function $Y(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return w0||NY(t)}function HY(){const e=m.exports.useCallback(a=>{a!=null&&VY(a.ownerDocument)},[]),t=m.exports.useRef(!1);function n(){return t.current?(mC=!0,window.clearTimeout(WP),WP=window.setTimeout(()=>{mC=!1},100),t.current=!1,!0):!1}function r(a){return $Y(a)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}function iz(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function oz(e,t){const n=st({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=st({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const a=e[r]||{},c=t[r];n[r]={},!c||!Object.keys(c)?n[r]=a:!a||!Object.keys(a)?n[r]=c:(n[r]=st({},c),Object.keys(a).forEach(d=>{n[r][d]=oz(a[d],c[d])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function ao(e,t,n=void 0){const r={};return Object.keys(e).forEach(a=>{r[a]=e[a].reduce((c,d)=>{if(d){const o=t(d);o!==""&&c.push(o),n&&n[d]&&c.push(n[d])}return c},[]).join(" ")}),r}const GP=e=>e,WY=()=>{let e=GP;return{configure(t){e=t},generate(t){return e(t)},reset(){e=GP}}},GY=WY();var az=GY;const qY={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Xi(e,t,n="Mui"){const r=qY[t];return r?`${n}-${r}`:`${az.generate(e)}-${t}`}function ki(e,t,n="Mui"){const r={};return t.forEach(a=>{r[a]=Xi(e,a,n)}),r}function Vn(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,c;for(c=0;c<r.length;c++)a=r[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function sz(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var ZY=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,XY=sz(function(e){return ZY.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function KY(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function YY(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var JY=function(){function e(n){var r=this;this._insertTag=function(a){var c;r.tags.length===0?r.insertionPoint?c=r.insertionPoint.nextSibling:r.prepend?c=r.container.firstChild:c=r.before:c=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,c),r.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(YY(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=KY(a);try{c.insertRule(r,c.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Lo="-ms-",Cx="-moz-",Ar="-webkit-",lz="comm",vk="rule",_k="decl",QY="@import",uz="@keyframes",eJ=Math.abs,E0=String.fromCharCode,tJ=Object.assign;function nJ(e,t){return yo(e,0)^45?(((t<<2^yo(e,0))<<2^yo(e,1))<<2^yo(e,2))<<2^yo(e,3):0}function cz(e){return e.trim()}function rJ(e,t){return(e=t.exec(e))?e[0]:e}function Lr(e,t,n){return e.replace(t,n)}function gC(e,t){return e.indexOf(t)}function yo(e,t){return e.charCodeAt(t)|0}function Sg(e,t,n){return e.slice(t,n)}function Ws(e){return e.length}function xk(e){return e.length}function r_(e,t){return t.push(e),e}function iJ(e,t){return e.map(t).join("")}var C0=1,Tp=1,hz=0,da=0,zi=0,jp="";function S0(e,t,n,r,a,c,d){return{value:e,root:t,parent:n,type:r,props:a,children:c,line:C0,column:Tp,length:d,return:""}}function Cm(e,t){return tJ(S0("",null,null,"",null,null,0),e,{length:-e.length},t)}function oJ(){return zi}function aJ(){return zi=da>0?yo(jp,--da):0,Tp--,zi===10&&(Tp=1,C0--),zi}function Sa(){return zi=da<hz?yo(jp,da++):0,Tp++,zi===10&&(Tp=1,C0++),zi}function Js(){return yo(jp,da)}function M_(){return da}function Gg(e,t){return Sg(jp,e,t)}function kg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function dz(e){return C0=Tp=1,hz=Ws(jp=e),da=0,[]}function pz(e){return jp="",e}function I_(e){return cz(Gg(da-1,yC(e===91?e+2:e===40?e+1:e)))}function sJ(e){for(;(zi=Js())&&zi<33;)Sa();return kg(e)>2||kg(zi)>3?"":" "}function lJ(e,t){for(;--t&&Sa()&&!(zi<48||zi>102||zi>57&&zi<65||zi>70&&zi<97););return Gg(e,M_()+(t<6&&Js()==32&&Sa()==32))}function yC(e){for(;Sa();)switch(zi){case e:return da;case 34:case 39:e!==34&&e!==39&&yC(zi);break;case 40:e===41&&yC(e);break;case 92:Sa();break}return da}function uJ(e,t){for(;Sa()&&e+zi!==47+10;)if(e+zi===42+42&&Js()===47)break;return"/*"+Gg(t,da-1)+"*"+E0(e===47?e:Sa())}function cJ(e){for(;!kg(Js());)Sa();return Gg(e,da)}function hJ(e){return pz(P_("",null,null,null,[""],e=dz(e),0,[0],e))}function P_(e,t,n,r,a,c,d,o,v){for(var C=0,I=0,D=d,F=0,U=0,j=0,T=1,H=1,N=1,q=0,z="",B=a,k=c,w=r,R=z;H;)switch(j=q,q=Sa()){case 40:if(j!=108&&yo(R,D-1)==58){gC(R+=Lr(I_(q),"&","&\f"),"&\f")!=-1&&(N=-1);break}case 34:case 39:case 91:R+=I_(q);break;case 9:case 10:case 13:case 32:R+=sJ(j);break;case 92:R+=lJ(M_()-1,7);continue;case 47:switch(Js()){case 42:case 47:r_(dJ(uJ(Sa(),M_()),t,n),v);break;default:R+="/"}break;case 123*T:o[C++]=Ws(R)*N;case 125*T:case 59:case 0:switch(q){case 0:case 125:H=0;case 59+I:U>0&&Ws(R)-D&&r_(U>32?ZP(R+";",r,n,D-1):ZP(Lr(R," ","")+";",r,n,D-2),v);break;case 59:R+=";";default:if(r_(w=qP(R,t,n,C,I,a,o,z,B=[],k=[],D),c),q===123)if(I===0)P_(R,t,w,w,B,c,D,o,k);else switch(F===99&&yo(R,3)===110?100:F){case 100:case 109:case 115:P_(e,w,w,r&&r_(qP(e,w,w,0,0,a,o,z,a,B=[],D),k),a,k,D,o,r?B:k);break;default:P_(R,w,w,w,[""],k,0,o,k)}}C=I=U=0,T=N=1,z=R="",D=d;break;case 58:D=1+Ws(R),U=j;default:if(T<1){if(q==123)--T;else if(q==125&&T++==0&&aJ()==125)continue}switch(R+=E0(q),q*T){case 38:N=I>0?1:(R+="\f",-1);break;case 44:o[C++]=(Ws(R)-1)*N,N=1;break;case 64:Js()===45&&(R+=I_(Sa())),F=Js(),I=D=Ws(z=R+=cJ(M_())),q++;break;case 45:j===45&&Ws(R)==2&&(T=0)}}return c}function qP(e,t,n,r,a,c,d,o,v,C,I){for(var D=a-1,F=a===0?c:[""],U=xk(F),j=0,T=0,H=0;j<r;++j)for(var N=0,q=Sg(e,D+1,D=eJ(T=d[j])),z=e;N<U;++N)(z=cz(T>0?F[N]+" "+q:Lr(q,/&\f/g,F[N])))&&(v[H++]=z);return S0(e,t,n,a===0?vk:o,v,C,I)}function dJ(e,t,n){return S0(e,t,n,lz,E0(oJ()),Sg(e,2,-2),0)}function ZP(e,t,n,r){return S0(e,t,n,_k,Sg(e,0,r),Sg(e,r+1,-1),r)}function fp(e,t){for(var n="",r=xk(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function pJ(e,t,n,r){switch(e.type){case QY:case _k:return e.return=e.return||e.value;case lz:return"";case uz:return e.return=e.value+"{"+fp(e.children,r)+"}";case vk:e.value=e.props.join(",")}return Ws(n=fp(e.children,r))?e.return=e.value+"{"+n+"}":""}function fJ(e){var t=xk(e);return function(n,r,a,c){for(var d="",o=0;o<t;o++)d+=e[o](n,r,a,c)||"";return d}}function mJ(e){return function(t){t.root||(t=t.return)&&e(t)}}var gJ=function(t,n,r){for(var a=0,c=0;a=c,c=Js(),a===38&&c===12&&(n[r]=1),!kg(c);)Sa();return Gg(t,da)},yJ=function(t,n){var r=-1,a=44;do switch(kg(a)){case 0:a===38&&Js()===12&&(n[r]=1),t[r]+=gJ(da-1,n,r);break;case 2:t[r]+=I_(a);break;case 4:if(a===44){t[++r]=Js()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=E0(a)}while(a=Sa());return t},vJ=function(t,n){return pz(yJ(dz(t),n))},XP=new WeakMap,_J=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,a=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!XP.get(r))&&!a){XP.set(t,!0);for(var c=[],d=vJ(n,c),o=r.props,v=0,C=0;v<d.length;v++)for(var I=0;I<o.length;I++,C++)t.props[C]=c[v]?d[v].replace(/&\f/g,o[I]):o[I]+" "+d[v]}}},xJ=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function fz(e,t){switch(nJ(e,t)){case 5103:return Ar+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ar+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ar+e+Cx+e+Lo+e+e;case 6828:case 4268:return Ar+e+Lo+e+e;case 6165:return Ar+e+Lo+"flex-"+e+e;case 5187:return Ar+e+Lr(e,/(\w+).+(:[^]+)/,Ar+"box-$1$2"+Lo+"flex-$1$2")+e;case 5443:return Ar+e+Lo+"flex-item-"+Lr(e,/flex-|-self/,"")+e;case 4675:return Ar+e+Lo+"flex-line-pack"+Lr(e,/align-content|flex-|-self/,"")+e;case 5548:return Ar+e+Lo+Lr(e,"shrink","negative")+e;case 5292:return Ar+e+Lo+Lr(e,"basis","preferred-size")+e;case 6060:return Ar+"box-"+Lr(e,"-grow","")+Ar+e+Lo+Lr(e,"grow","positive")+e;case 4554:return Ar+Lr(e,/([^-])(transform)/g,"$1"+Ar+"$2")+e;case 6187:return Lr(Lr(Lr(e,/(zoom-|grab)/,Ar+"$1"),/(image-set)/,Ar+"$1"),e,"")+e;case 5495:case 3959:return Lr(e,/(image-set\([^]*)/,Ar+"$1$`$1");case 4968:return Lr(Lr(e,/(.+:)(flex-)?(.*)/,Ar+"box-pack:$3"+Lo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ar+e+e;case 4095:case 3583:case 4068:case 2532:return Lr(e,/(.+)-inline(.+)/,Ar+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ws(e)-1-t>6)switch(yo(e,t+1)){case 109:if(yo(e,t+4)!==45)break;case 102:return Lr(e,/(.+:)(.+)-([^]+)/,"$1"+Ar+"$2-$3$1"+Cx+(yo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~gC(e,"stretch")?fz(Lr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(yo(e,t+1)!==115)break;case 6444:switch(yo(e,Ws(e)-3-(~gC(e,"!important")&&10))){case 107:return Lr(e,":",":"+Ar)+e;case 101:return Lr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ar+(yo(e,14)===45?"inline-":"")+"box$3$1"+Ar+"$2$3$1"+Lo+"$2box$3")+e}break;case 5936:switch(yo(e,t+11)){case 114:return Ar+e+Lo+Lr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ar+e+Lo+Lr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ar+e+Lo+Lr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ar+e+Lo+e+e}return e}var bJ=function(t,n,r,a){if(t.length>-1&&!t.return)switch(t.type){case _k:t.return=fz(t.value,t.length);break;case uz:return fp([Cm(t,{value:Lr(t.value,"@","@"+Ar)})],a);case vk:if(t.length)return iJ(t.props,function(c){switch(rJ(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return fp([Cm(t,{props:[Lr(c,/:(read-\w+)/,":"+Cx+"$1")]})],a);case"::placeholder":return fp([Cm(t,{props:[Lr(c,/:(plac\w+)/,":"+Ar+"input-$1")]}),Cm(t,{props:[Lr(c,/:(plac\w+)/,":"+Cx+"$1")]}),Cm(t,{props:[Lr(c,/:(plac\w+)/,Lo+"input-$1")]})],a)}return""})}},wJ=[bJ],EJ=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(T){var H=T.getAttribute("data-emotion");H.indexOf(" ")!==-1&&(document.head.appendChild(T),T.setAttribute("data-s",""))})}var a=t.stylisPlugins||wJ,c={},d,o=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(T){for(var H=T.getAttribute("data-emotion").split(" "),N=1;N<H.length;N++)c[H[N]]=!0;o.push(T)});var v,C=[_J,xJ];{var I,D=[pJ,mJ(function(T){I.insert(T)})],F=fJ(C.concat(a,D)),U=function(H){return fp(hJ(H),F)};v=function(H,N,q,z){I=q,U(H?H+"{"+N.styles+"}":N.styles),z&&(j.inserted[N.name]=!0)}}var j={key:n,sheet:new JY({key:n,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:c,registered:{},insert:v};return j.sheet.hydrate(o),j},mz={exports:{}},Ur={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=typeof Symbol=="function"&&Symbol.for,bk=so?Symbol.for("react.element"):60103,wk=so?Symbol.for("react.portal"):60106,k0=so?Symbol.for("react.fragment"):60107,T0=so?Symbol.for("react.strict_mode"):60108,A0=so?Symbol.for("react.profiler"):60114,M0=so?Symbol.for("react.provider"):60109,I0=so?Symbol.for("react.context"):60110,Ek=so?Symbol.for("react.async_mode"):60111,P0=so?Symbol.for("react.concurrent_mode"):60111,D0=so?Symbol.for("react.forward_ref"):60112,R0=so?Symbol.for("react.suspense"):60113,CJ=so?Symbol.for("react.suspense_list"):60120,L0=so?Symbol.for("react.memo"):60115,O0=so?Symbol.for("react.lazy"):60116,SJ=so?Symbol.for("react.block"):60121,kJ=so?Symbol.for("react.fundamental"):60117,TJ=so?Symbol.for("react.responder"):60118,AJ=so?Symbol.for("react.scope"):60119;function Ia(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case bk:switch(e=e.type,e){case Ek:case P0:case k0:case A0:case T0:case R0:return e;default:switch(e=e&&e.$$typeof,e){case I0:case D0:case O0:case L0:case M0:return e;default:return t}}case wk:return t}}}function gz(e){return Ia(e)===P0}Ur.AsyncMode=Ek;Ur.ConcurrentMode=P0;Ur.ContextConsumer=I0;Ur.ContextProvider=M0;Ur.Element=bk;Ur.ForwardRef=D0;Ur.Fragment=k0;Ur.Lazy=O0;Ur.Memo=L0;Ur.Portal=wk;Ur.Profiler=A0;Ur.StrictMode=T0;Ur.Suspense=R0;Ur.isAsyncMode=function(e){return gz(e)||Ia(e)===Ek};Ur.isConcurrentMode=gz;Ur.isContextConsumer=function(e){return Ia(e)===I0};Ur.isContextProvider=function(e){return Ia(e)===M0};Ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===bk};Ur.isForwardRef=function(e){return Ia(e)===D0};Ur.isFragment=function(e){return Ia(e)===k0};Ur.isLazy=function(e){return Ia(e)===O0};Ur.isMemo=function(e){return Ia(e)===L0};Ur.isPortal=function(e){return Ia(e)===wk};Ur.isProfiler=function(e){return Ia(e)===A0};Ur.isStrictMode=function(e){return Ia(e)===T0};Ur.isSuspense=function(e){return Ia(e)===R0};Ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===k0||e===P0||e===A0||e===T0||e===R0||e===CJ||typeof e=="object"&&e!==null&&(e.$$typeof===O0||e.$$typeof===L0||e.$$typeof===M0||e.$$typeof===I0||e.$$typeof===D0||e.$$typeof===kJ||e.$$typeof===TJ||e.$$typeof===AJ||e.$$typeof===SJ)};Ur.typeOf=Ia;mz.exports=Ur;var yz=mz.exports,MJ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},IJ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},vz={};vz[yz.ForwardRef]=MJ;vz[yz.Memo]=IJ;var PJ=!0;function DJ(e,t,n){var r="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):r+=a+" "}),r}var _z=function(t,n,r){var a=t.key+"-"+n.name;(r===!1||PJ===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},xz=function(t,n,r){_z(t,n,r);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var c=n;do t.insert(n===c?"."+a:"",c,t.sheet,!0),c=c.next;while(c!==void 0)}};function RJ(e){for(var t=0,n,r=0,a=e.length;a>=4;++r,a-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var LJ={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},OJ=/[A-Z]|^ms/g,zJ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,bz=function(t){return t.charCodeAt(1)===45},KP=function(t){return t!=null&&typeof t!="boolean"},Tw=sz(function(e){return bz(e)?e:e.replace(OJ,"-$&").toLowerCase()}),YP=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(zJ,function(r,a,c){return Gs={name:a,styles:c,next:Gs},a})}return LJ[t]!==1&&!bz(t)&&typeof n=="number"&&n!==0?n+"px":n};function Tg(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Gs={name:n.name,styles:n.styles,next:Gs},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Gs={name:r.name,styles:r.styles,next:Gs},r=r.next;var a=n.styles+";";return a}return BJ(e,t,n)}case"function":{if(e!==void 0){var c=Gs,d=n(e);return Gs=c,Tg(e,t,d)}break}}if(t==null)return n;var o=t[n];return o!==void 0?o:n}function BJ(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=Tg(e,t,n[a])+";";else for(var c in n){var d=n[c];if(typeof d!="object")t!=null&&t[d]!==void 0?r+=c+"{"+t[d]+"}":KP(d)&&(r+=Tw(c)+":"+YP(c,d)+";");else if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var o=0;o<d.length;o++)KP(d[o])&&(r+=Tw(c)+":"+YP(c,d[o])+";");else{var v=Tg(e,t,d);switch(c){case"animation":case"animationName":{r+=Tw(c)+":"+v+";";break}default:r+=c+"{"+v+"}"}}}return r}var JP=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Gs,Ck=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,c="";Gs=void 0;var d=t[0];d==null||d.raw===void 0?(a=!1,c+=Tg(r,n,d)):c+=d[0];for(var o=1;o<t.length;o++)c+=Tg(r,n,t[o]),a&&(c+=d[o]);JP.lastIndex=0;for(var v="",C;(C=JP.exec(c))!==null;)v+="-"+C[1];var I=RJ(c)+v;return{name:I,styles:c,next:Gs}},FJ=function(t){return t()},wz=CA["useInsertionEffect"]?CA["useInsertionEffect"]:!1,NJ=wz||FJ,QP=wz||m.exports.useLayoutEffect,Ez=m.exports.createContext(typeof HTMLElement!="undefined"?EJ({key:"css"}):null);Ez.Provider;var Cz=function(t){return m.exports.forwardRef(function(n,r){var a=m.exports.useContext(Ez);return t(n,a,r)})},Sz=m.exports.createContext({}),UJ=Cz(function(e,t){var n=e.styles,r=Ck([n],void 0,m.exports.useContext(Sz)),a=m.exports.useRef();return QP(function(){var c=t.key+"-global",d=new t.sheet.constructor({key:c,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,v=document.querySelector('style[data-emotion="'+c+" "+r.name+'"]');return t.sheet.tags.length&&(d.before=t.sheet.tags[0]),v!==null&&(o=!0,v.setAttribute("data-emotion",c),d.hydrate([v])),a.current=[d,o],function(){d.flush()}},[t]),QP(function(){var c=a.current,d=c[0],o=c[1];if(o){c[1]=!1;return}if(r.next!==void 0&&xz(t,r.next,!0),d.tags.length){var v=d.tags[d.tags.length-1].nextElementSibling;d.before=v,d.flush()}t.insert("",r,d,!1)},[t,r.name]),null});function jJ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ck(t)}var Sk=function(){var t=jJ.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},VJ=XY,$J=function(t){return t!=="theme"},eD=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?VJ:$J},tD=function(t,n,r){var a;if(n){var c=n.shouldForwardProp;a=t.__emotion_forwardProp&&c?function(d){return t.__emotion_forwardProp(d)&&c(d)}:c}return typeof a!="function"&&r&&(a=t.__emotion_forwardProp),a},HJ=function(t){var n=t.cache,r=t.serialized,a=t.isStringTag;return _z(n,r,a),NJ(function(){return xz(n,r,a)}),null},WJ=function e(t,n){var r=t.__emotion_real===t,a=r&&t.__emotion_base||t,c,d;n!==void 0&&(c=n.label,d=n.target);var o=tD(t,n,r),v=o||eD(a),C=!v("as");return function(){var I=arguments,D=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(c!==void 0&&D.push("label:"+c+";"),I[0]==null||I[0].raw===void 0)D.push.apply(D,I);else{D.push(I[0][0]);for(var F=I.length,U=1;U<F;U++)D.push(I[U],I[0][U])}var j=Cz(function(T,H,N){var q=C&&T.as||a,z="",B=[],k=T;if(T.theme==null){k={};for(var w in T)k[w]=T[w];k.theme=m.exports.useContext(Sz)}typeof T.className=="string"?z=DJ(H.registered,B,T.className):T.className!=null&&(z=T.className+" ");var R=Ck(D.concat(B),H.registered,k);z+=H.key+"-"+R.name,d!==void 0&&(z+=" "+d);var J=C&&o===void 0?eD(q):v,ie={};for(var ue in T)C&&ue==="as"||J(ue)&&(ie[ue]=T[ue]);return ie.className=z,ie.ref=N,m.exports.createElement(m.exports.Fragment,null,m.exports.createElement(HJ,{cache:H,serialized:R,isStringTag:typeof q=="string"}),m.exports.createElement(q,ie))});return j.displayName=c!==void 0?c:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",j.defaultProps=t.defaultProps,j.__emotion_real=j,j.__emotion_base=a,j.__emotion_styles=D,j.__emotion_forwardProp=o,Object.defineProperty(j,"toString",{value:function(){return"."+d}}),j.withComponent=function(T,H){return e(T,st({},n,H,{shouldForwardProp:tD(j,H,!0)})).apply(void 0,D)},j}},GJ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],vC=WJ.bind();GJ.forEach(function(e){vC[e]=vC(e)});var qJ=vC,nn={exports:{}},z0={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZJ=m.exports,XJ=Symbol.for("react.element"),KJ=Symbol.for("react.fragment"),YJ=Object.prototype.hasOwnProperty,JJ=ZJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QJ={key:!0,ref:!0,__self:!0,__source:!0};function kz(e,t,n){var r,a={},c=null,d=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)YJ.call(t,r)&&!QJ.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:XJ,type:e,key:c,ref:d,props:a,_owner:JJ.current}}z0.Fragment=KJ;z0.jsx=kz;z0.jsxs=kz;nn.exports=z0;function eQ(e){return e==null||Object.keys(e).length===0}function tQ(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?a=>t(eQ(a)?n:a):t;return nn.exports.jsx(UJ,{styles:r})}/**
 * @mui/styled-engine v5.11.11
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Tz(e,t){return qJ(e,t)}const nQ=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Km(e,t){return t?Za(e,t,{clone:!1}):e}const kk={xs:0,sm:600,md:900,lg:1200,xl:1536},nD={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${kk[e]}px)`};function el(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const c=r.breakpoints||nD;return t.reduce((d,o,v)=>(d[c.up(c.keys[v])]=n(t[v]),d),{})}if(typeof t=="object"){const c=r.breakpoints||nD;return Object.keys(t).reduce((d,o)=>{if(Object.keys(c.values||kk).indexOf(o)!==-1){const v=c.up(o);d[v]=n(t[o],o)}else{const v=o;d[v]=t[v]}return d},{})}return n(t)}function rQ(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,a)=>{const c=e.up(a);return r[c]={},r},{}))||{}}function iQ(e,t){return e.reduce((n,r)=>{const a=n[r];return(!a||Object.keys(a).length===0)&&delete n[r],n},t)}function B0(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((a,c)=>a&&a[c]?a[c]:null,e);if(r!=null)return r}return t.split(".").reduce((r,a)=>r&&r[a]!=null?r[a]:null,e)}function Sx(e,t,n,r=n){let a;return typeof e=="function"?a=e(n):Array.isArray(e)?a=e[n]||r:a=B0(e,n)||r,t&&(a=t(a,r,e)),a}function Or(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:a}=e,c=d=>{if(d[t]==null)return null;const o=d[t],v=d.theme,C=B0(v,r)||{};return el(d,o,D=>{let F=Sx(C,a,D);return D===F&&typeof D=="string"&&(F=Sx(C,a,`${t}${D==="default"?"":Zi(D)}`,D)),n===!1?F:{[n]:F}})};return c.propTypes={},c.filterProps=[t],c}function F0(...e){const t=e.reduce((r,a)=>(a.filterProps.forEach(c=>{r[c]=a}),r),{}),n=r=>Object.keys(r).reduce((a,c)=>t[c]?Km(a,t[c](r)):a,{});return n.propTypes={},n.filterProps=e.reduce((r,a)=>r.concat(a.filterProps),[]),n}function oQ(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const aQ={m:"margin",p:"padding"},sQ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},rD={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},lQ=oQ(e=>{if(e.length>2)if(rD[e])e=rD[e];else return[e];const[t,n]=e.split(""),r=aQ[t],a=sQ[n]||"";return Array.isArray(a)?a.map(c=>r+c):[r+a]}),Tk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ak=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Tk,...Ak];function qg(e,t,n,r){var a;const c=(a=B0(e,t,!1))!=null?a:n;return typeof c=="number"?d=>typeof d=="string"?d:c*d:Array.isArray(c)?d=>typeof d=="string"?d:c[d]:typeof c=="function"?c:()=>{}}function Az(e){return qg(e,"spacing",8)}function Zg(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function uQ(e,t){return n=>e.reduce((r,a)=>(r[a]=Zg(t,n),r),{})}function cQ(e,t,n,r){if(t.indexOf(n)===-1)return null;const a=lQ(n),c=uQ(a,r),d=e[n];return el(e,d,c)}function Mz(e,t){const n=Az(e.theme);return Object.keys(e).map(r=>cQ(e,t,r,n)).reduce(Km,{})}function bi(e){return Mz(e,Tk)}bi.propTypes={};bi.filterProps=Tk;function wi(e){return Mz(e,Ak)}wi.propTypes={};wi.filterProps=Ak;function Zs(e){return typeof e!="number"?e:`${e}px solid`}const hQ=Or({prop:"border",themeKey:"borders",transform:Zs}),dQ=Or({prop:"borderTop",themeKey:"borders",transform:Zs}),pQ=Or({prop:"borderRight",themeKey:"borders",transform:Zs}),fQ=Or({prop:"borderBottom",themeKey:"borders",transform:Zs}),mQ=Or({prop:"borderLeft",themeKey:"borders",transform:Zs}),gQ=Or({prop:"borderColor",themeKey:"palette"}),yQ=Or({prop:"borderTopColor",themeKey:"palette"}),vQ=Or({prop:"borderRightColor",themeKey:"palette"}),_Q=Or({prop:"borderBottomColor",themeKey:"palette"}),xQ=Or({prop:"borderLeftColor",themeKey:"palette"}),N0=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=qg(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Zg(t,r)});return el(e,e.borderRadius,n)}return null};N0.propTypes={};N0.filterProps=["borderRadius"];F0(hQ,dQ,pQ,fQ,mQ,gQ,yQ,vQ,_Q,xQ,N0);const U0=e=>{if(e.gap!==void 0&&e.gap!==null){const t=qg(e.theme,"spacing",8),n=r=>({gap:Zg(t,r)});return el(e,e.gap,n)}return null};U0.propTypes={};U0.filterProps=["gap"];const j0=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=qg(e.theme,"spacing",8),n=r=>({columnGap:Zg(t,r)});return el(e,e.columnGap,n)}return null};j0.propTypes={};j0.filterProps=["columnGap"];const V0=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=qg(e.theme,"spacing",8),n=r=>({rowGap:Zg(t,r)});return el(e,e.rowGap,n)}return null};V0.propTypes={};V0.filterProps=["rowGap"];const bQ=Or({prop:"gridColumn"}),wQ=Or({prop:"gridRow"}),EQ=Or({prop:"gridAutoFlow"}),CQ=Or({prop:"gridAutoColumns"}),SQ=Or({prop:"gridAutoRows"}),kQ=Or({prop:"gridTemplateColumns"}),TQ=Or({prop:"gridTemplateRows"}),AQ=Or({prop:"gridTemplateAreas"}),MQ=Or({prop:"gridArea"});F0(U0,j0,V0,bQ,wQ,EQ,CQ,SQ,kQ,TQ,AQ,MQ);function mp(e,t){return t==="grey"?t:e}const IQ=Or({prop:"color",themeKey:"palette",transform:mp}),PQ=Or({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:mp}),DQ=Or({prop:"backgroundColor",themeKey:"palette",transform:mp});F0(IQ,PQ,DQ);function xa(e){return e<=1&&e!==0?`${e*100}%`:e}const RQ=Or({prop:"width",transform:xa}),Mk=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,a,c;return{maxWidth:((r=e.theme)==null||(a=r.breakpoints)==null||(c=a.values)==null?void 0:c[n])||kk[n]||xa(n)}};return el(e,e.maxWidth,t)}return null};Mk.filterProps=["maxWidth"];const LQ=Or({prop:"minWidth",transform:xa}),OQ=Or({prop:"height",transform:xa}),zQ=Or({prop:"maxHeight",transform:xa}),BQ=Or({prop:"minHeight",transform:xa});Or({prop:"size",cssProperty:"width",transform:xa});Or({prop:"size",cssProperty:"height",transform:xa});const FQ=Or({prop:"boxSizing"});F0(RQ,Mk,LQ,OQ,zQ,BQ,FQ);const Aw=e=>t=>{if(t[e]!==void 0&&t[e]!==null){const n=r=>{var a,c;let d=(a=t.theme.typography)==null?void 0:a[`${e}${t[e]==="default"||t[e]===e?"":Zi((c=t[e])==null?void 0:c.toString())}`];if(!d){var o,v;d=(o=t.theme.typography)==null||(v=o[r])==null?void 0:v[e]}return d||(d=r),{[e]:d}};return el(t,t[e],n)}return null},NQ={border:{themeKey:"borders",transform:Zs},borderTop:{themeKey:"borders",transform:Zs},borderRight:{themeKey:"borders",transform:Zs},borderBottom:{themeKey:"borders",transform:Zs},borderLeft:{themeKey:"borders",transform:Zs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:N0},color:{themeKey:"palette",transform:mp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:mp},backgroundColor:{themeKey:"palette",transform:mp},p:{style:wi},pt:{style:wi},pr:{style:wi},pb:{style:wi},pl:{style:wi},px:{style:wi},py:{style:wi},padding:{style:wi},paddingTop:{style:wi},paddingRight:{style:wi},paddingBottom:{style:wi},paddingLeft:{style:wi},paddingX:{style:wi},paddingY:{style:wi},paddingInline:{style:wi},paddingInlineStart:{style:wi},paddingInlineEnd:{style:wi},paddingBlock:{style:wi},paddingBlockStart:{style:wi},paddingBlockEnd:{style:wi},m:{style:bi},mt:{style:bi},mr:{style:bi},mb:{style:bi},ml:{style:bi},mx:{style:bi},my:{style:bi},margin:{style:bi},marginTop:{style:bi},marginRight:{style:bi},marginBottom:{style:bi},marginLeft:{style:bi},marginX:{style:bi},marginY:{style:bi},marginInline:{style:bi},marginInlineStart:{style:bi},marginInlineEnd:{style:bi},marginBlock:{style:bi},marginBlockStart:{style:bi},marginBlockEnd:{style:bi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:U0},rowGap:{style:V0},columnGap:{style:j0},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:xa},maxWidth:{style:Mk},minWidth:{transform:xa},height:{transform:xa},maxHeight:{transform:xa},minHeight:{transform:xa},boxSizing:{},fontFamily:{themeKey:"typography",style:Aw("fontFamily")},fontSize:{themeKey:"typography",style:Aw("fontSize")},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography",style:Aw("fontWeight")},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};var $0=NQ;function UQ(...e){const t=e.reduce((r,a)=>r.concat(Object.keys(a)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function jQ(e,t){return typeof e=="function"?e(t):e}function VQ(){function e(n,r,a,c){const d={[n]:r,theme:a},o=c[n];if(!o)return{[n]:r};const{cssProperty:v=n,themeKey:C,transform:I,style:D}=o;if(r==null)return null;const F=B0(a,C)||{};return D?D(d):el(d,r,j=>{let T=Sx(F,I,j);return j===T&&typeof j=="string"&&(T=Sx(F,I,`${n}${j==="default"?"":Zi(j)}`,j)),v===!1?T:{[v]:T}})}function t(n){var r;const{sx:a,theme:c={}}=n||{};if(!a)return null;const d=(r=c.unstable_sxConfig)!=null?r:$0;function o(v){let C=v;if(typeof v=="function")C=v(c);else if(typeof v!="object")return v;if(!C)return null;const I=rQ(c.breakpoints),D=Object.keys(I);let F=I;return Object.keys(C).forEach(U=>{const j=jQ(C[U],c);if(j!=null)if(typeof j=="object")if(d[U])F=Km(F,e(U,j,c,d));else{const T=el({theme:c},j,H=>({[U]:H}));UQ(T,j)?F[U]=t({sx:j,theme:c}):F=Km(F,T)}else F=Km(F,e(U,j,c,d))}),iQ(D,F)}return Array.isArray(a)?a.map(o):o(a)}return t}const Iz=VQ();Iz.filterProps=["sx"];var H0=Iz;const $Q=["sx"],HQ=e=>{var t,n;const r={systemProps:{},otherProps:{}},a=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:$0;return Object.keys(e).forEach(c=>{a[c]?r.systemProps[c]=e[c]:r.otherProps[c]=e[c]}),r};function WQ(e){const{sx:t}=e,n=Vn(e,$Q),{systemProps:r,otherProps:a}=HQ(n);let c;return Array.isArray(t)?c=[r,...t]:typeof t=="function"?c=(...d)=>{const o=t(...d);return eh(o)?st({},r,o):r}:c=st({},r,t),st({},a,{sx:c})}function Pz(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Pz(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function _r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Pz(e))&&(r&&(r+=" "),r+=t);return r}const GQ=["values","unit","step"],qQ=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>st({},n,{[r.key]:r.val}),{})};function ZQ(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,a=Vn(e,GQ),c=qQ(t),d=Object.keys(c);function o(F){return`@media (min-width:${typeof t[F]=="number"?t[F]:F}${n})`}function v(F){return`@media (max-width:${(typeof t[F]=="number"?t[F]:F)-r/100}${n})`}function C(F,U){const j=d.indexOf(U);return`@media (min-width:${typeof t[F]=="number"?t[F]:F}${n}) and (max-width:${(j!==-1&&typeof t[d[j]]=="number"?t[d[j]]:U)-r/100}${n})`}function I(F){return d.indexOf(F)+1<d.length?C(F,d[d.indexOf(F)+1]):o(F)}function D(F){const U=d.indexOf(F);return U===0?o(d[1]):U===d.length-1?v(d[U]):C(F,d[d.indexOf(F)+1]).replace("@media","@media not all and")}return st({keys:d,values:c,up:o,down:v,between:C,only:I,not:D,unit:n},a)}const XQ={borderRadius:4};var KQ=XQ;function YQ(e=8){if(e.mui)return e;const t=Az({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(c=>{const d=t(c);return typeof d=="number"?`${d}px`:d}).join(" ");return n.mui=!0,n}const JQ=["breakpoints","palette","spacing","shape"];function Ik(e={},...t){const{breakpoints:n={},palette:r={},spacing:a,shape:c={}}=e,d=Vn(e,JQ),o=ZQ(n),v=YQ(a);let C=Za({breakpoints:o,direction:"ltr",components:{},palette:st({mode:"light"},r),spacing:v,shape:st({},KQ,c)},d);return C=t.reduce((I,D)=>Za(I,D),C),C.unstable_sxConfig=st({},$0,d==null?void 0:d.unstable_sxConfig),C.unstable_sx=function(D){return H0({sx:D,theme:this})},C}const QQ=m.exports.createContext(null);var eee=QQ;function tee(){return m.exports.useContext(eee)}function nee(e){return Object.keys(e).length===0}function ree(e=null){const t=tee();return!t||nee(t)?e:t}const iee=Ik();function Pk(e=iee){return ree(e)}const oee=["className","component"];function aee(e={}){const{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:r}=e,a=Tz("div",{shouldForwardProp:d=>d!=="theme"&&d!=="sx"&&d!=="as"})(H0);return m.exports.forwardRef(function(o,v){const C=Pk(t),I=WQ(o),{className:D,component:F="div"}=I,U=Vn(I,oee);return nn.exports.jsx(a,st({as:F,ref:v,className:_r(D,r?r(n):n),theme:C},U))})}const see=["variant"];function iD(e){return e.length===0}function Dz(e){const{variant:t}=e,n=Vn(e,see);let r=t||"";return Object.keys(n).sort().forEach(a=>{a==="color"?r+=iD(r)?e[a]:Zi(e[a]):r+=`${iD(r)?a:Zi(a)}${Zi(e[a].toString())}`}),r}const lee=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],uee=["theme"],cee=["theme"];function Sm(e){return Object.keys(e).length===0}function hee(e){return typeof e=="string"&&e.charCodeAt(0)>96}const dee=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,pee=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach(a=>{const c=Dz(a.props);r[c]=a.style}),r},fee=(e,t,n,r)=>{var a,c;const{ownerState:d={}}=e,o=[],v=n==null||(a=n.components)==null||(c=a[r])==null?void 0:c.variants;return v&&v.forEach(C=>{let I=!0;Object.keys(C.props).forEach(D=>{d[D]!==C.props[D]&&e[D]!==C.props[D]&&(I=!1)}),I&&o.push(t[Dz(C.props)])}),o};function Ym(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const mee=Ik();function gee(e={}){const{defaultTheme:t=mee,rootShouldForwardProp:n=Ym,slotShouldForwardProp:r=Ym}=e,a=c=>{const d=Sm(c.theme)?t:c.theme;return H0(st({},c,{theme:d}))};return a.__mui_systemSx=!0,(c,d={})=>{nQ(c,z=>z.filter(B=>!(B!=null&&B.__mui_systemSx)));const{name:o,slot:v,skipVariantsResolver:C,skipSx:I,overridesResolver:D}=d,F=Vn(d,lee),U=C!==void 0?C:v&&v!=="Root"||!1,j=I||!1;let T,H=Ym;v==="Root"?H=n:v?H=r:hee(c)&&(H=void 0);const N=Tz(c,st({shouldForwardProp:H,label:T},F)),q=(z,...B)=>{const k=B?B.map(ie=>typeof ie=="function"&&ie.__emotion_real!==ie?ue=>{let{theme:se}=ue,_e=Vn(ue,uee);return ie(st({theme:Sm(se)?t:se},_e))}:ie):[];let w=z;o&&D&&k.push(ie=>{const ue=Sm(ie.theme)?t:ie.theme,se=dee(o,ue);if(se){const _e={};return Object.entries(se).forEach(([Ue,je])=>{_e[Ue]=typeof je=="function"?je(st({},ie,{theme:ue})):je}),D(ie,_e)}return null}),o&&!U&&k.push(ie=>{const ue=Sm(ie.theme)?t:ie.theme;return fee(ie,pee(o,ue),ue,o)}),j||k.push(a);const R=k.length-B.length;if(Array.isArray(z)&&R>0){const ie=new Array(R).fill("");w=[...z,...ie],w.raw=[...z.raw,...ie]}else typeof z=="function"&&z.__emotion_real!==z&&(w=ie=>{let{theme:ue}=ie,se=Vn(ie,cee);return z(st({theme:Sm(ue)?t:ue},se))});return N(w,...k)};return N.withConfig&&(q.withConfig=N.withConfig),q}}function yee(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:oz(t.components[n].defaultProps,r)}function vee({props:e,name:t,defaultTheme:n}){const r=Pk(n);return yee({theme:r,name:t,props:e})}function Dk(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function _ee(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,a)=>a<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function bh(e){if(e.type)return e;if(e.charAt(0)==="#")return bh(_ee(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Hu(9,e));let r=e.substring(t+1,e.length-1),a;if(n==="color"){if(r=r.split(" "),a=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a)===-1)throw new Error(Hu(10,a))}else r=r.split(",");return r=r.map(c=>parseFloat(c)),{type:n,values:r,colorSpace:a}}function W0(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((a,c)=>c<3?parseInt(a,10):a):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function xee(e){e=bh(e);const{values:t}=e,n=t[0],r=t[1]/100,a=t[2]/100,c=r*Math.min(a,1-a),d=(C,I=(C+n/30)%12)=>a-c*Math.max(Math.min(I-3,9-I,1),-1);let o="rgb";const v=[Math.round(d(0)*255),Math.round(d(8)*255),Math.round(d(4)*255)];return e.type==="hsla"&&(o+="a",v.push(t[3])),W0({type:o,values:v})}function oD(e){e=bh(e);let t=e.type==="hsl"||e.type==="hsla"?bh(xee(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function bee(e,t){const n=oD(e),r=oD(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function np(e,t){return e=bh(e),t=Dk(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,W0(e)}function wee(e,t){if(e=bh(e),t=Dk(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return W0(e)}function Eee(e,t){if(e=bh(e),t=Dk(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return W0(e)}function Cee(e,t){return st({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const See=["mode","contrastThreshold","tonalOffset"],aD={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Cg.white,default:Cg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Mw={text:{primary:Cg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Cg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function sD(e,t,n,r){const a=r.light||r,c=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Eee(e.main,a):t==="dark"&&(e.dark=wee(e.main,c)))}function kee(e="light"){return e==="dark"?{main:Ld[200],light:Ld[50],dark:Ld[400]}:{main:Ld[700],light:Ld[400],dark:Ld[800]}}function Tee(e="light"){return e==="dark"?{main:Rd[200],light:Rd[50],dark:Rd[400]}:{main:Rd[500],light:Rd[300],dark:Rd[700]}}function Aee(e="light"){return e==="dark"?{main:Dd[500],light:Dd[300],dark:Dd[700]}:{main:Dd[700],light:Dd[400],dark:Dd[800]}}function Mee(e="light"){return e==="dark"?{main:Od[400],light:Od[300],dark:Od[700]}:{main:Od[700],light:Od[500],dark:Od[900]}}function Iee(e="light"){return e==="dark"?{main:zd[400],light:zd[300],dark:zd[700]}:{main:zd[800],light:zd[500],dark:zd[900]}}function Pee(e="light"){return e==="dark"?{main:Em[400],light:Em[300],dark:Em[700]}:{main:"#ed6c02",light:Em[500],dark:Em[900]}}function Dee(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,a=Vn(e,See),c=e.primary||kee(t),d=e.secondary||Tee(t),o=e.error||Aee(t),v=e.info||Mee(t),C=e.success||Iee(t),I=e.warning||Pee(t);function D(T){return bee(T,Mw.text.primary)>=n?Mw.text.primary:aD.text.primary}const F=({color:T,name:H,mainShade:N=500,lightShade:q=300,darkShade:z=700})=>{if(T=st({},T),!T.main&&T[N]&&(T.main=T[N]),!T.hasOwnProperty("main"))throw new Error(Hu(11,H?` (${H})`:"",N));if(typeof T.main!="string")throw new Error(Hu(12,H?` (${H})`:"",JSON.stringify(T.main)));return sD(T,"light",q,r),sD(T,"dark",z,r),T.contrastText||(T.contrastText=D(T.main)),T},U={dark:Mw,light:aD};return Za(st({common:st({},Cg),mode:t,primary:F({color:c,name:"primary"}),secondary:F({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:F({color:o,name:"error"}),warning:F({color:I,name:"warning"}),info:F({color:v,name:"info"}),success:F({color:C,name:"success"}),grey:zY,contrastThreshold:n,getContrastText:D,augmentColor:F,tonalOffset:r},U[t]),a)}const Ree=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Lee(e){return Math.round(e*1e5)/1e5}const lD={textTransform:"uppercase"},uD='"Roboto", "Helvetica", "Arial", sans-serif';function Oee(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=uD,fontSize:a=14,fontWeightLight:c=300,fontWeightRegular:d=400,fontWeightMedium:o=500,fontWeightBold:v=700,htmlFontSize:C=16,allVariants:I,pxToRem:D}=n,F=Vn(n,Ree),U=a/14,j=D||(N=>`${N/C*U}rem`),T=(N,q,z,B,k)=>st({fontFamily:r,fontWeight:N,fontSize:j(q),lineHeight:z},r===uD?{letterSpacing:`${Lee(B/q)}em`}:{},k,I),H={h1:T(c,96,1.167,-1.5),h2:T(c,60,1.2,-.5),h3:T(d,48,1.167,0),h4:T(d,34,1.235,.25),h5:T(d,24,1.334,0),h6:T(o,20,1.6,.15),subtitle1:T(d,16,1.75,.15),subtitle2:T(o,14,1.57,.1),body1:T(d,16,1.5,.15),body2:T(d,14,1.43,.15),button:T(o,14,1.75,.4,lD),caption:T(d,12,1.66,.4),overline:T(d,12,2.66,1,lD),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Za(st({htmlFontSize:C,pxToRem:j,fontFamily:r,fontSize:a,fontWeightLight:c,fontWeightRegular:d,fontWeightMedium:o,fontWeightBold:v},H),F,{clone:!1})}const zee=.2,Bee=.14,Fee=.12;function ni(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${zee})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Bee})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Fee})`].join(",")}const Nee=["none",ni(0,2,1,-1,0,1,1,0,0,1,3,0),ni(0,3,1,-2,0,2,2,0,0,1,5,0),ni(0,3,3,-2,0,3,4,0,0,1,8,0),ni(0,2,4,-1,0,4,5,0,0,1,10,0),ni(0,3,5,-1,0,5,8,0,0,1,14,0),ni(0,3,5,-1,0,6,10,0,0,1,18,0),ni(0,4,5,-2,0,7,10,1,0,2,16,1),ni(0,5,5,-3,0,8,10,1,0,3,14,2),ni(0,5,6,-3,0,9,12,1,0,3,16,2),ni(0,6,6,-3,0,10,14,1,0,4,18,3),ni(0,6,7,-4,0,11,15,1,0,4,20,3),ni(0,7,8,-4,0,12,17,2,0,5,22,4),ni(0,7,8,-4,0,13,19,2,0,5,24,4),ni(0,7,9,-4,0,14,21,2,0,5,26,4),ni(0,8,9,-5,0,15,22,2,0,6,28,5),ni(0,8,10,-5,0,16,24,2,0,6,30,5),ni(0,8,11,-5,0,17,26,2,0,6,32,5),ni(0,9,11,-5,0,18,28,2,0,7,34,6),ni(0,9,12,-6,0,19,29,2,0,7,36,6),ni(0,10,13,-6,0,20,31,3,0,8,38,7),ni(0,10,13,-6,0,21,33,3,0,8,40,7),ni(0,10,14,-6,0,22,35,3,0,8,42,7),ni(0,11,14,-7,0,23,36,3,0,9,44,8),ni(0,11,15,-7,0,24,38,3,0,9,46,8)];var Uee=Nee;const jee=["duration","easing","delay"],Vee={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},$ee={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function cD(e){return`${Math.round(e)}ms`}function Hee(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Wee(e){const t=st({},Vee,e.easing),n=st({},$ee,e.duration);return st({getAutoHeightDuration:Hee,create:(a=["all"],c={})=>{const{duration:d=n.standard,easing:o=t.easeInOut,delay:v=0}=c;return Vn(c,jee),(Array.isArray(a)?a:[a]).map(C=>`${C} ${typeof d=="string"?d:cD(d)} ${o} ${typeof v=="string"?v:cD(v)}`).join(",")}},e,{easing:t,duration:n})}const Gee={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var qee=Gee;const Zee=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Rz(e={},...t){const{mixins:n={},palette:r={},transitions:a={},typography:c={}}=e,d=Vn(e,Zee);if(e.vars)throw new Error(Hu(18));const o=Dee(r),v=Ik(e);let C=Za(v,{mixins:Cee(v.breakpoints,n),palette:o,shadows:Uee.slice(),typography:Oee(o,c),transitions:Wee(a),zIndex:st({},qee)});return C=Za(C,d),C=t.reduce((I,D)=>Za(I,D),C),C.unstable_sxConfig=st({},$0,d==null?void 0:d.unstable_sxConfig),C.unstable_sx=function(D){return H0({sx:D,theme:this})},C}const Xee=Rz();var G0=Xee;function Rk(){return Pk(G0)}function lo({props:e,name:t}){return vee({props:e,name:t,defaultTheme:G0})}const Nl=e=>Ym(e)&&e!=="classes",Kee=Ym,Yee=gee({defaultTheme:G0,rootShouldForwardProp:Nl});var Jn=Yee;const Jee=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var hD=Jee;function kx(e){return typeof e=="string"}function Qee(e,t,n){return e===void 0||kx(e)?t:st({},t,{ownerState:st({},t.ownerState,n)})}const ete={disableDefaultClasses:!1},tte=m.exports.createContext(ete);function nte(e){const{disableDefaultClasses:t}=m.exports.useContext(tte);return n=>t?"":e(n)}function rte(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function _C(e,t){return typeof e=="function"?e(t):e}function dD(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function ite(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:a,className:c}=e;if(!t){const U=_r(a==null?void 0:a.className,r==null?void 0:r.className,c,n==null?void 0:n.className),j=st({},n==null?void 0:n.style,a==null?void 0:a.style,r==null?void 0:r.style),T=st({},n,a,r);return U.length>0&&(T.className=U),Object.keys(j).length>0&&(T.style=j),{props:T,internalRef:void 0}}const d=rte(st({},a,r)),o=dD(r),v=dD(a),C=t(d),I=_r(C==null?void 0:C.className,n==null?void 0:n.className,c,a==null?void 0:a.className,r==null?void 0:r.className),D=st({},C==null?void 0:C.style,n==null?void 0:n.style,a==null?void 0:a.style,r==null?void 0:r.style),F=st({},C,n,v,o);return I.length>0&&(F.className=I),Object.keys(D).length>0&&(F.style=D),{props:F,internalRef:C.ref}}const ote=["elementType","externalSlotProps","ownerState"];function pD(e){var t;const{elementType:n,externalSlotProps:r,ownerState:a}=e,c=Vn(e,ote),d=_C(r,a),{props:o,internalRef:v}=ite(st({},c,{externalSlotProps:d})),C=Zo(v,d==null?void 0:d.ref,(t=e.additionalProps)==null?void 0:t.ref);return Qee(n,st({},o,{ref:C}),a)}const ate=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function ste(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function lte(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function ute(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||lte(e))}function cte(e){const t=[],n=[];return Array.from(e.querySelectorAll(ate)).forEach((r,a)=>{const c=ste(r);c===-1||!ute(r)||(c===0?t.push(r):n.push({documentOrder:a,tabIndex:c,node:r}))}),n.sort((r,a)=>r.tabIndex===a.tabIndex?r.documentOrder-a.documentOrder:r.tabIndex-a.tabIndex).map(r=>r.node).concat(t)}function hte(){return!0}function dte(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:a=!1,getTabbable:c=cte,isEnabled:d=hte,open:o}=e,v=m.exports.useRef(!1),C=m.exports.useRef(null),I=m.exports.useRef(null),D=m.exports.useRef(null),F=m.exports.useRef(null),U=m.exports.useRef(!1),j=m.exports.useRef(null),T=Zo(t.ref,j),H=m.exports.useRef(null);m.exports.useEffect(()=>{!o||!j.current||(U.current=!n)},[n,o]),m.exports.useEffect(()=>{if(!o||!j.current)return;const z=Ca(j.current);return j.current.contains(z.activeElement)||(j.current.hasAttribute("tabIndex")||j.current.setAttribute("tabIndex","-1"),U.current&&j.current.focus()),()=>{a||(D.current&&D.current.focus&&(v.current=!0,D.current.focus()),D.current=null)}},[o]),m.exports.useEffect(()=>{if(!o||!j.current)return;const z=Ca(j.current),B=R=>{const{current:J}=j;if(J!==null){if(!z.hasFocus()||r||!d()||v.current){v.current=!1;return}if(!J.contains(z.activeElement)){if(R&&F.current!==R.target||z.activeElement!==F.current)F.current=null;else if(F.current!==null)return;if(!U.current)return;let se=[];if((z.activeElement===C.current||z.activeElement===I.current)&&(se=c(j.current)),se.length>0){var ie,ue;const _e=Boolean(((ie=H.current)==null?void 0:ie.shiftKey)&&((ue=H.current)==null?void 0:ue.key)==="Tab"),Ue=se[0],je=se[se.length-1];typeof Ue!="string"&&typeof je!="string"&&(_e?je.focus():Ue.focus())}else J.focus()}}},k=R=>{H.current=R,!(r||!d()||R.key!=="Tab")&&z.activeElement===j.current&&R.shiftKey&&(v.current=!0,I.current&&I.current.focus())};z.addEventListener("focusin",B),z.addEventListener("keydown",k,!0);const w=setInterval(()=>{z.activeElement&&z.activeElement.tagName==="BODY"&&B(null)},50);return()=>{clearInterval(w),z.removeEventListener("focusin",B),z.removeEventListener("keydown",k,!0)}},[n,r,a,d,o,c]);const N=z=>{D.current===null&&(D.current=z.relatedTarget),U.current=!0,F.current=z.target;const B=t.props.onFocus;B&&B(z)},q=z=>{D.current===null&&(D.current=z.relatedTarget),U.current=!0};return nn.exports.jsxs(m.exports.Fragment,{children:[nn.exports.jsx("div",{tabIndex:o?0:-1,onFocus:q,ref:C,"data-testid":"sentinelStart"}),m.exports.cloneElement(t,{ref:T,onFocus:N}),nn.exports.jsx("div",{tabIndex:o?0:-1,onFocus:q,ref:I,"data-testid":"sentinelEnd"})]})}function pte(e){return typeof e=="function"?e():e}const fte=m.exports.forwardRef(function(t,n){const{children:r,container:a,disablePortal:c=!1}=t,[d,o]=m.exports.useState(null),v=Zo(m.exports.isValidElement(r)?r.ref:null,n);if(xh(()=>{c||o(pte(a)||document.body)},[a,c]),xh(()=>{if(d&&!c)return fC(n,d),()=>{fC(n,null)}},[n,d,c]),c){if(m.exports.isValidElement(r)){const C={ref:v};return m.exports.cloneElement(r,C)}return nn.exports.jsx(m.exports.Fragment,{children:r})}return nn.exports.jsx(m.exports.Fragment,{children:d&&Pu.exports.createPortal(r,d)})});var mte=fte;function gte(e){const t=Ca(e);return t.body===e?_h(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Jm(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function fD(e){return parseInt(_h(e).getComputedStyle(e).paddingRight,10)||0}function yte(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function mD(e,t,n,r,a){const c=[t,n,...r];[].forEach.call(e.children,d=>{const o=c.indexOf(d)===-1,v=!yte(d);o&&v&&Jm(d,a)})}function Iw(e,t){let n=-1;return e.some((r,a)=>t(r)?(n=a,!0):!1),n}function vte(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(gte(r)){const d=iz(Ca(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${fD(r)+d}px`;const o=Ca(r).querySelectorAll(".mui-fixed");[].forEach.call(o,v=>{n.push({value:v.style.paddingRight,property:"padding-right",el:v}),v.style.paddingRight=`${fD(v)+d}px`})}let c;if(r.parentNode instanceof DocumentFragment)c=Ca(r).body;else{const d=r.parentElement,o=_h(r);c=(d==null?void 0:d.nodeName)==="HTML"&&o.getComputedStyle(d).overflowY==="scroll"?d:r}n.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return()=>{n.forEach(({value:c,el:d,property:o})=>{c?d.style.setProperty(o,c):d.style.removeProperty(o)})}}function _te(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class xte{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&Jm(t.modalRef,!1);const a=_te(n);mD(n,t.mount,t.modalRef,a,!0);const c=Iw(this.containers,d=>d.container===n);return c!==-1?(this.containers[c].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:a}),r)}mount(t,n){const r=Iw(this.containers,c=>c.modals.indexOf(t)!==-1),a=this.containers[r];a.restore||(a.restore=vte(a,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const a=Iw(this.containers,d=>d.modals.indexOf(t)!==-1),c=this.containers[a];if(c.modals.splice(c.modals.indexOf(t),1),this.modals.splice(r,1),c.modals.length===0)c.restore&&c.restore(),t.modalRef&&Jm(t.modalRef,n),mD(c.container,t.mount,t.modalRef,c.hiddenSiblings,!1),this.containers.splice(a,1);else{const d=c.modals[c.modals.length-1];d.modalRef&&Jm(d.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function bte(e){return Xi("MuiModal",e)}ki("MuiModal",["root","hidden","backdrop"]);const wte=["children","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],Ete=e=>{const{open:t,exited:n}=e;return ao({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},nte(bte))};function Cte(e){return typeof e=="function"?e():e}function Ste(e){return e?e.props.hasOwnProperty("in"):!1}const kte=new xte,Tte=m.exports.forwardRef(function(t,n){var r,a;const{children:c,closeAfterTransition:d=!1,component:o,container:v,disableAutoFocus:C=!1,disableEnforceFocus:I=!1,disableEscapeKeyDown:D=!1,disablePortal:F=!1,disableRestoreFocus:U=!1,disableScrollLock:j=!1,hideBackdrop:T=!1,keepMounted:H=!1,manager:N=kte,onBackdropClick:q,onClose:z,onKeyDown:B,open:k,onTransitionEnter:w,onTransitionExited:R,slotProps:J={},slots:ie={}}=t,ue=Vn(t,wte),[se,_e]=m.exports.useState(!k),Ue=m.exports.useRef({}),je=m.exports.useRef(null),Ne=m.exports.useRef(null),Ie=Zo(Ne,n),xt=Ste(c),We=(r=t["aria-hidden"])!=null?r:!0,Et=()=>Ca(je.current),ct=()=>(Ue.current.modalRef=Ne.current,Ue.current.mountNode=je.current,Ue.current),xe=()=>{N.mount(ct(),{disableScrollLock:j}),Ne.current&&(Ne.current.scrollTop=0)},Ee=tp(()=>{const Nt=Cte(v)||Et().body;N.add(ct(),Nt),Ne.current&&xe()}),xn=m.exports.useCallback(()=>N.isTopModal(ct()),[N]),Qt=tp(Nt=>{je.current=Nt,!(!Nt||!Ne.current)&&(k&&xn()?xe():Jm(Ne.current,We))}),yn=m.exports.useCallback(()=>{N.remove(ct(),We)},[N,We]);m.exports.useEffect(()=>()=>{yn()},[yn]),m.exports.useEffect(()=>{k?Ee():(!xt||!d)&&yn()},[k,yn,xt,d,Ee]);const on=st({},t,{closeAfterTransition:d,disableAutoFocus:C,disableEnforceFocus:I,disableEscapeKeyDown:D,disablePortal:F,disableRestoreFocus:U,disableScrollLock:j,exited:se,hideBackdrop:T,keepMounted:H}),Sn=Ete(on),Nn=()=>{_e(!1),w&&w()},bn=()=>{_e(!0),R&&R(),d&&yn()},kn=Nt=>{Nt.target===Nt.currentTarget&&(q&&q(Nt),z&&z(Nt,"backdropClick"))},Le=Nt=>{B&&B(Nt),!(Nt.key!=="Escape"||!xn())&&(D||(Nt.stopPropagation(),z&&z(Nt,"escapeKeyDown")))},Ke={};c.props.tabIndex===void 0&&(Ke.tabIndex="-1"),xt&&(Ke.onEnter=$P(Nn,c.props.onEnter),Ke.onExited=$P(bn,c.props.onExited));const pt=(a=o!=null?o:ie.root)!=null?a:"div",St=pD({elementType:pt,externalSlotProps:J.root,externalForwardedProps:ue,additionalProps:{ref:Ie,role:"presentation",onKeyDown:Le},className:Sn.root,ownerState:on}),Ft=ie.backdrop,ht=pD({elementType:Ft,externalSlotProps:J.backdrop,additionalProps:{"aria-hidden":!0,onClick:kn,open:k},className:Sn.backdrop,ownerState:on});return!H&&!k&&(!xt||se)?null:nn.exports.jsx(mte,{ref:Qt,container:v,disablePortal:F,children:nn.exports.jsxs(pt,st({},St,{children:[!T&&Ft?nn.exports.jsx(Ft,st({},ht)):null,nn.exports.jsx(dte,{disableEnforceFocus:I,disableAutoFocus:C,disableRestoreFocus:U,isEnabled:xn,open:k,children:m.exports.cloneElement(c,Ke)})]}))})});var Ate=Tte;const Mte=["onChange","maxRows","minRows","style","value"];function i_(e){return parseInt(e,10)||0}const Ite={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function gD(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const Pte=m.exports.forwardRef(function(t,n){const{onChange:r,maxRows:a,minRows:c=1,style:d,value:o}=t,v=Vn(t,Mte),{current:C}=m.exports.useRef(o!=null),I=m.exports.useRef(null),D=Zo(n,I),F=m.exports.useRef(null),U=m.exports.useRef(0),[j,T]=m.exports.useState({outerHeightStyle:0}),H=m.exports.useCallback(()=>{const k=I.current,R=_h(k).getComputedStyle(k);if(R.width==="0px")return{outerHeightStyle:0};const J=F.current;J.style.width=R.width,J.value=k.value||t.placeholder||"x",J.value.slice(-1)===`
`&&(J.value+=" ");const ie=R.boxSizing,ue=i_(R.paddingBottom)+i_(R.paddingTop),se=i_(R.borderBottomWidth)+i_(R.borderTopWidth),_e=J.scrollHeight;J.value="x";const Ue=J.scrollHeight;let je=_e;c&&(je=Math.max(Number(c)*Ue,je)),a&&(je=Math.min(Number(a)*Ue,je)),je=Math.max(je,Ue);const Ne=je+(ie==="border-box"?ue+se:0),Ie=Math.abs(je-_e)<=1;return{outerHeightStyle:Ne,overflow:Ie}},[a,c,t.placeholder]),N=(k,w)=>{const{outerHeightStyle:R,overflow:J}=w;return U.current<20&&(R>0&&Math.abs((k.outerHeightStyle||0)-R)>1||k.overflow!==J)?(U.current+=1,{overflow:J,outerHeightStyle:R}):k},q=m.exports.useCallback(()=>{const k=H();gD(k)||T(w=>N(w,k))},[H]),z=()=>{const k=H();gD(k)||Pu.exports.flushSync(()=>{T(w=>N(w,k))})};m.exports.useEffect(()=>{const k=rz(()=>{U.current=0,I.current&&z()});let w;const R=I.current,J=_h(R);return J.addEventListener("resize",k),typeof ResizeObserver!="undefined"&&(w=new ResizeObserver(k),w.observe(R)),()=>{k.clear(),J.removeEventListener("resize",k),w&&w.disconnect()}}),xh(()=>{q()}),m.exports.useEffect(()=>{U.current=0},[o]);const B=k=>{U.current=0,C||q(),r&&r(k)};return nn.exports.jsxs(m.exports.Fragment,{children:[nn.exports.jsx("textarea",st({value:o,onChange:B,ref:D,rows:c,style:st({height:j.outerHeightStyle,overflow:j.overflow?"hidden":void 0},d)},v)),nn.exports.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:F,tabIndex:-1,style:st({},Ite.shadow,d,{padding:0})})]})});var Dte=Pte;function Rte(e){return Xi("MuiSvgIcon",e)}ki("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Lte=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Ote=e=>{const{color:t,fontSize:n,classes:r}=e,a={root:["root",t!=="inherit"&&`color${Zi(t)}`,`fontSize${Zi(n)}`]};return ao(a,Rte,r)},zte=Jn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Zi(n.color)}`],t[`fontSize${Zi(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,a,c,d,o,v,C,I,D,F,U,j,T,H,N,q;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(a=e.transitions)==null||(c=a.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(o=d.pxToRem)==null?void 0:o.call(d,20))||"1.25rem",medium:((v=e.typography)==null||(C=v.pxToRem)==null?void 0:C.call(v,24))||"1.5rem",large:((I=e.typography)==null||(D=I.pxToRem)==null?void 0:D.call(I,35))||"2.1875rem"}[t.fontSize],color:(F=(U=(e.vars||e).palette)==null||(j=U[t.color])==null?void 0:j.main)!=null?F:{action:(T=(e.vars||e).palette)==null||(H=T.action)==null?void 0:H.active,disabled:(N=(e.vars||e).palette)==null||(q=N.action)==null?void 0:q.disabled,inherit:void 0}[t.color]}}),Lz=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiSvgIcon"}),{children:a,className:c,color:d="inherit",component:o="svg",fontSize:v="medium",htmlColor:C,inheritViewBox:I=!1,titleAccess:D,viewBox:F="0 0 24 24"}=r,U=Vn(r,Lte),j=st({},r,{color:d,component:o,fontSize:v,instanceFontSize:t.fontSize,inheritViewBox:I,viewBox:F}),T={};I||(T.viewBox=F);const H=Ote(j);return nn.exports.jsxs(zte,st({as:o,className:_r(H.root,c),focusable:"false",color:C,"aria-hidden":D?void 0:!0,role:D?"img":void 0,ref:n},T,U,{ownerState:j,children:[a,D?nn.exports.jsx("title",{children:D}):null]}))});Lz.muiName="SvgIcon";var yD=Lz;function Bte(e,t){function n(r,a){return nn.exports.jsx(yD,st({"data-testid":`${t}Icon`,ref:a},r,{children:e}))}return n.muiName=yD.muiName,m.exports.memo(m.exports.forwardRef(n))}function xC(e,t){return xC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},xC(e,t)}function Oz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xC(e,t)}var vD={disabled:!1},Tx=nt.createContext(null),Fte=function(t){return t.scrollTop},Rm="unmounted",Kc="exited",Yc="entering",Nd="entered",bC="exiting",Ul=function(e){Oz(t,e);function t(r,a){var c;c=e.call(this,r,a)||this;var d=a,o=d&&!d.isMounting?r.enter:r.appear,v;return c.appearStatus=null,r.in?o?(v=Kc,c.appearStatus=Yc):v=Nd:r.unmountOnExit||r.mountOnEnter?v=Rm:v=Kc,c.state={status:v},c.nextCallback=null,c}t.getDerivedStateFromProps=function(a,c){var d=a.in;return d&&c.status===Rm?{status:Kc}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var c=null;if(a!==this.props){var d=this.state.status;this.props.in?d!==Yc&&d!==Nd&&(c=Yc):(d===Yc||d===Nd)&&(c=bC)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,c,d,o;return c=d=o=a,a!=null&&typeof a!="number"&&(c=a.exit,d=a.enter,o=a.appear!==void 0?a.appear:d),{exit:c,enter:d,appear:o}},n.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===Yc){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:Kv.findDOMNode(this);d&&Fte(d)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Kc&&this.setState({status:Rm})},n.performEnter=function(a){var c=this,d=this.props.enter,o=this.context?this.context.isMounting:a,v=this.props.nodeRef?[o]:[Kv.findDOMNode(this),o],C=v[0],I=v[1],D=this.getTimeouts(),F=o?D.appear:D.enter;if(!a&&!d||vD.disabled){this.safeSetState({status:Nd},function(){c.props.onEntered(C)});return}this.props.onEnter(C,I),this.safeSetState({status:Yc},function(){c.props.onEntering(C,I),c.onTransitionEnd(F,function(){c.safeSetState({status:Nd},function(){c.props.onEntered(C,I)})})})},n.performExit=function(){var a=this,c=this.props.exit,d=this.getTimeouts(),o=this.props.nodeRef?void 0:Kv.findDOMNode(this);if(!c||vD.disabled){this.safeSetState({status:Kc},function(){a.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:bC},function(){a.props.onExiting(o),a.onTransitionEnd(d.exit,function(){a.safeSetState({status:Kc},function(){a.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},n.setNextCallback=function(a){var c=this,d=!0;return this.nextCallback=function(o){d&&(d=!1,c.nextCallback=null,a(o))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},n.onTransitionEnd=function(a,c){this.setNextCallback(c);var d=this.props.nodeRef?this.props.nodeRef.current:Kv.findDOMNode(this),o=a==null&&!this.props.addEndListener;if(!d||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var v=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],C=v[0],I=v[1];this.props.addEndListener(C,I)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===Rm)return null;var c=this.props,d=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var o=Vn(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return nt.createElement(Tx.Provider,{value:null},typeof d=="function"?d(a,o):nt.cloneElement(nt.Children.only(d),o))},t}(nt.Component);Ul.contextType=Tx;Ul.propTypes={};function Bd(){}Ul.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bd,onEntering:Bd,onEntered:Bd,onExit:Bd,onExiting:Bd,onExited:Bd};Ul.UNMOUNTED=Rm;Ul.EXITED=Kc;Ul.ENTERING=Yc;Ul.ENTERED=Nd;Ul.EXITING=bC;var zz=Ul;function Nte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lk(e,t){var n=function(c){return t&&m.exports.isValidElement(c)?t(c):c},r=Object.create(null);return e&&m.exports.Children.map(e,function(a){return a}).forEach(function(a){r[a.key]=n(a)}),r}function Ute(e,t){e=e||{},t=t||{};function n(I){return I in t?t[I]:e[I]}var r=Object.create(null),a=[];for(var c in e)c in t?a.length&&(r[c]=a,a=[]):a.push(c);var d,o={};for(var v in t){if(r[v])for(d=0;d<r[v].length;d++){var C=r[v][d];o[r[v][d]]=n(C)}o[v]=n(v)}for(d=0;d<a.length;d++)o[a[d]]=n(a[d]);return o}function ah(e,t,n){return n[t]!=null?n[t]:e.props[t]}function jte(e,t){return Lk(e.children,function(n){return m.exports.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:ah(n,"appear",e),enter:ah(n,"enter",e),exit:ah(n,"exit",e)})})}function Vte(e,t,n){var r=Lk(e.children),a=Ute(t,r);return Object.keys(a).forEach(function(c){var d=a[c];if(!!m.exports.isValidElement(d)){var o=c in t,v=c in r,C=t[c],I=m.exports.isValidElement(C)&&!C.props.in;v&&(!o||I)?a[c]=m.exports.cloneElement(d,{onExited:n.bind(null,d),in:!0,exit:ah(d,"exit",e),enter:ah(d,"enter",e)}):!v&&o&&!I?a[c]=m.exports.cloneElement(d,{in:!1}):v&&o&&m.exports.isValidElement(C)&&(a[c]=m.exports.cloneElement(d,{onExited:n.bind(null,d),in:C.props.in,exit:ah(d,"exit",e),enter:ah(d,"enter",e)}))}}),a}var $te=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Hte={component:"div",childFactory:function(t){return t}},Ok=function(e){Oz(t,e);function t(r,a){var c;c=e.call(this,r,a)||this;var d=c.handleExited.bind(Nte(c));return c.state={contextValue:{isMounting:!0},handleExited:d,firstRender:!0},c}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,c){var d=c.children,o=c.handleExited,v=c.firstRender;return{children:v?jte(a,o):Vte(a,d,o),firstRender:!1}},n.handleExited=function(a,c){var d=Lk(this.props.children);a.key in d||(a.props.onExited&&a.props.onExited(c),this.mounted&&this.setState(function(o){var v=st({},o.children);return delete v[a.key],{children:v}}))},n.render=function(){var a=this.props,c=a.component,d=a.childFactory,o=Vn(a,["component","childFactory"]),v=this.state.contextValue,C=$te(this.state.children).map(d);return delete o.appear,delete o.enter,delete o.exit,c===null?nt.createElement(Tx.Provider,{value:v},C):nt.createElement(Tx.Provider,{value:v},nt.createElement(c,o,C))},t}(nt.Component);Ok.propTypes={};Ok.defaultProps=Hte;var Wte=Ok;const Bz=e=>e.scrollTop;function Ax(e,t){var n,r;const{timeout:a,easing:c,style:d={}}=e;return{duration:(n=d.transitionDuration)!=null?n:typeof a=="number"?a:a[t.mode]||0,easing:(r=d.transitionTimingFunction)!=null?r:typeof c=="object"?c[t.mode]:c,delay:d.transitionDelay}}function Gte(e){return Xi("MuiPaper",e)}ki("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const qte=["className","component","elevation","square","variant"],Zte=e=>{const{square:t,elevation:n,variant:r,classes:a}=e,c={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return ao(c,Gte,a)},Xte=Jn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return st({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&st({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${np("#fff",hD(t.elevation))}, ${np("#fff",hD(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),Kte=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiPaper"}),{className:a,component:c="div",elevation:d=1,square:o=!1,variant:v="elevation"}=r,C=Vn(r,qte),I=st({},r,{component:c,elevation:d,square:o,variant:v}),D=Zte(I);return nn.exports.jsx(Xte,st({as:c,ownerState:I,className:_r(D.root,a),ref:n},C))});var Fz=Kte;function Yte(e){const{className:t,classes:n,pulsate:r=!1,rippleX:a,rippleY:c,rippleSize:d,in:o,onExited:v,timeout:C}=e,[I,D]=m.exports.useState(!1),F=_r(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),U={width:d,height:d,top:-(d/2)+c,left:-(d/2)+a},j=_r(n.child,I&&n.childLeaving,r&&n.childPulsate);return!o&&!I&&D(!0),m.exports.useEffect(()=>{if(!o&&v!=null){const T=setTimeout(v,C);return()=>{clearTimeout(T)}}},[v,o,C]),nn.exports.jsx("span",{className:F,style:U,children:nn.exports.jsx("span",{className:j})})}const Jte=ki("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var ja=Jte;const Qte=["center","classes","className"];let q0=e=>e,_D,xD,bD,wD;const wC=550,ene=80,tne=Sk(_D||(_D=q0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),nne=Sk(xD||(xD=q0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),rne=Sk(bD||(bD=q0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),ine=Jn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),one=Jn(Yte,{name:"MuiTouchRipple",slot:"Ripple"})(wD||(wD=q0`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ja.rippleVisible,tne,wC,({theme:e})=>e.transitions.easing.easeInOut,ja.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,ja.child,ja.childLeaving,nne,wC,({theme:e})=>e.transitions.easing.easeInOut,ja.childPulsate,rne,({theme:e})=>e.transitions.easing.easeInOut),ane=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:c={},className:d}=r,o=Vn(r,Qte),[v,C]=m.exports.useState([]),I=m.exports.useRef(0),D=m.exports.useRef(null);m.exports.useEffect(()=>{D.current&&(D.current(),D.current=null)},[v]);const F=m.exports.useRef(!1),U=m.exports.useRef(null),j=m.exports.useRef(null),T=m.exports.useRef(null);m.exports.useEffect(()=>()=>{clearTimeout(U.current)},[]);const H=m.exports.useCallback(B=>{const{pulsate:k,rippleX:w,rippleY:R,rippleSize:J,cb:ie}=B;C(ue=>[...ue,nn.exports.jsx(one,{classes:{ripple:_r(c.ripple,ja.ripple),rippleVisible:_r(c.rippleVisible,ja.rippleVisible),ripplePulsate:_r(c.ripplePulsate,ja.ripplePulsate),child:_r(c.child,ja.child),childLeaving:_r(c.childLeaving,ja.childLeaving),childPulsate:_r(c.childPulsate,ja.childPulsate)},timeout:wC,pulsate:k,rippleX:w,rippleY:R,rippleSize:J},I.current)]),I.current+=1,D.current=ie},[c]),N=m.exports.useCallback((B={},k={},w=()=>{})=>{const{pulsate:R=!1,center:J=a||k.pulsate,fakeElement:ie=!1}=k;if((B==null?void 0:B.type)==="mousedown"&&F.current){F.current=!1;return}(B==null?void 0:B.type)==="touchstart"&&(F.current=!0);const ue=ie?null:T.current,se=ue?ue.getBoundingClientRect():{width:0,height:0,left:0,top:0};let _e,Ue,je;if(J||B===void 0||B.clientX===0&&B.clientY===0||!B.clientX&&!B.touches)_e=Math.round(se.width/2),Ue=Math.round(se.height/2);else{const{clientX:Ne,clientY:Ie}=B.touches&&B.touches.length>0?B.touches[0]:B;_e=Math.round(Ne-se.left),Ue=Math.round(Ie-se.top)}if(J)je=Math.sqrt((2*se.width**2+se.height**2)/3),je%2===0&&(je+=1);else{const Ne=Math.max(Math.abs((ue?ue.clientWidth:0)-_e),_e)*2+2,Ie=Math.max(Math.abs((ue?ue.clientHeight:0)-Ue),Ue)*2+2;je=Math.sqrt(Ne**2+Ie**2)}B!=null&&B.touches?j.current===null&&(j.current=()=>{H({pulsate:R,rippleX:_e,rippleY:Ue,rippleSize:je,cb:w})},U.current=setTimeout(()=>{j.current&&(j.current(),j.current=null)},ene)):H({pulsate:R,rippleX:_e,rippleY:Ue,rippleSize:je,cb:w})},[a,H]),q=m.exports.useCallback(()=>{N({},{pulsate:!0})},[N]),z=m.exports.useCallback((B,k)=>{if(clearTimeout(U.current),(B==null?void 0:B.type)==="touchend"&&j.current){j.current(),j.current=null,U.current=setTimeout(()=>{z(B,k)});return}j.current=null,C(w=>w.length>0?w.slice(1):w),D.current=k},[]);return m.exports.useImperativeHandle(n,()=>({pulsate:q,start:N,stop:z}),[q,N,z]),nn.exports.jsx(ine,st({className:_r(ja.root,c.root,d),ref:T},o,{children:nn.exports.jsx(Wte,{component:null,exit:!0,children:v})}))});var sne=ane;function lne(e){return Xi("MuiButtonBase",e)}const une=ki("MuiButtonBase",["root","disabled","focusVisible"]);var cne=une;const hne=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],dne=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:a}=e,d=ao({root:["root",t&&"disabled",n&&"focusVisible"]},lne,a);return n&&r&&(d.root+=` ${r}`),d},pne=Jn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${cne.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),fne=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:c=!1,children:d,className:o,component:v="button",disabled:C=!1,disableRipple:I=!1,disableTouchRipple:D=!1,focusRipple:F=!1,LinkComponent:U="a",onBlur:j,onClick:T,onContextMenu:H,onDragLeave:N,onFocus:q,onFocusVisible:z,onKeyDown:B,onKeyUp:k,onMouseDown:w,onMouseLeave:R,onMouseUp:J,onTouchEnd:ie,onTouchMove:ue,onTouchStart:se,tabIndex:_e=0,TouchRippleProps:Ue,touchRippleRef:je,type:Ne}=r,Ie=Vn(r,hne),xt=m.exports.useRef(null),We=m.exports.useRef(null),Et=Zo(We,je),{isFocusVisibleRef:ct,onFocus:xe,onBlur:Ee,ref:xn}=HY(),[Qt,yn]=m.exports.useState(!1);C&&Qt&&yn(!1),m.exports.useImperativeHandle(a,()=>({focusVisible:()=>{yn(!0),xt.current.focus()}}),[]);const[on,Sn]=m.exports.useState(!1);m.exports.useEffect(()=>{Sn(!0)},[]);const Nn=on&&!I&&!C;m.exports.useEffect(()=>{Qt&&F&&!I&&on&&We.current.pulsate()},[I,F,Qt,on]);function bn(Te,mt,Bt=D){return tp(Kt=>(mt&&mt(Kt),!Bt&&We.current&&We.current[Te](Kt),!0))}const kn=bn("start",w),Le=bn("stop",H),Ke=bn("stop",N),pt=bn("stop",J),St=bn("stop",Te=>{Qt&&Te.preventDefault(),R&&R(Te)}),Ft=bn("start",se),ht=bn("stop",ie),Nt=bn("stop",ue),wn=bn("stop",Te=>{Ee(Te),ct.current===!1&&yn(!1),j&&j(Te)},!1),Gn=tp(Te=>{xt.current||(xt.current=Te.currentTarget),xe(Te),ct.current===!0&&(yn(!0),z&&z(Te)),q&&q(Te)}),qn=()=>{const Te=xt.current;return v&&v!=="button"&&!(Te.tagName==="A"&&Te.href)},Un=m.exports.useRef(!1),xr=tp(Te=>{F&&!Un.current&&Qt&&We.current&&Te.key===" "&&(Un.current=!0,We.current.stop(Te,()=>{We.current.start(Te)})),Te.target===Te.currentTarget&&qn()&&Te.key===" "&&Te.preventDefault(),B&&B(Te),Te.target===Te.currentTarget&&qn()&&Te.key==="Enter"&&!C&&(Te.preventDefault(),T&&T(Te))}),Ae=tp(Te=>{F&&Te.key===" "&&We.current&&Qt&&!Te.defaultPrevented&&(Un.current=!1,We.current.stop(Te,()=>{We.current.pulsate(Te)})),k&&k(Te),T&&Te.target===Te.currentTarget&&qn()&&Te.key===" "&&!Te.defaultPrevented&&T(Te)});let Ye=v;Ye==="button"&&(Ie.href||Ie.to)&&(Ye=U);const re={};Ye==="button"?(re.type=Ne===void 0?"button":Ne,re.disabled=C):(!Ie.href&&!Ie.to&&(re.role="button"),C&&(re["aria-disabled"]=C));const ce=Zo(n,xn,xt),De=st({},r,{centerRipple:c,component:v,disabled:C,disableRipple:I,disableTouchRipple:D,focusRipple:F,tabIndex:_e,focusVisible:Qt}),be=dne(De);return nn.exports.jsxs(pne,st({as:Ye,className:_r(be.root,o),ownerState:De,onBlur:wn,onClick:T,onContextMenu:Le,onFocus:Gn,onKeyDown:xr,onKeyUp:Ae,onMouseDown:kn,onMouseLeave:St,onMouseUp:pt,onDragLeave:Ke,onTouchEnd:ht,onTouchMove:Nt,onTouchStart:Ft,ref:ce,tabIndex:C?-1:_e,type:Ne},re,Ie,{children:[d,Nn?nn.exports.jsx(sne,st({ref:Et,center:c},Ue)):null]}))});var mne=fne;function Xg({props:e,states:t,muiFormControl:n}){return t.reduce((r,a)=>(r[a]=e[a],n&&typeof e[a]=="undefined"&&(r[a]=n[a]),r),{})}const gne=m.exports.createContext(void 0);var zk=gne;function Kg(){return m.exports.useContext(zk)}function yne(e){return nn.exports.jsx(tQ,st({},e,{defaultTheme:G0}))}function ED(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Bk(e,t=!1){return e&&(ED(e.value)&&e.value!==""||t&&ED(e.defaultValue)&&e.defaultValue!=="")}function vne(e){return e.startAdornment}function _ne(e){return Xi("MuiInputBase",e)}const xne=ki("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Ap=xne;const bne=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Z0=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Zi(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},X0=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},wne=e=>{const{classes:t,color:n,disabled:r,error:a,endAdornment:c,focused:d,formControl:o,fullWidth:v,hiddenLabel:C,multiline:I,readOnly:D,size:F,startAdornment:U,type:j}=e,T={root:["root",`color${Zi(n)}`,r&&"disabled",a&&"error",v&&"fullWidth",d&&"focused",o&&"formControl",F==="small"&&"sizeSmall",I&&"multiline",U&&"adornedStart",c&&"adornedEnd",C&&"hiddenLabel",D&&"readOnly"],input:["input",r&&"disabled",j==="search"&&"inputTypeSearch",I&&"inputMultiline",F==="small"&&"inputSizeSmall",C&&"inputHiddenLabel",U&&"inputAdornedStart",c&&"inputAdornedEnd",D&&"readOnly"]};return ao(T,_ne,t)},K0=Jn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Z0})(({theme:e,ownerState:t})=>st({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ap.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&st({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Y0=Jn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:X0})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=st({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),a={opacity:"0 !important"},c=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return st({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ap.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":c,"&:focus::-moz-placeholder":c,"&:focus:-ms-input-placeholder":c,"&:focus::-ms-input-placeholder":c},[`&.${Ap.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),Ene=nn.exports.jsx(yne,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Cne=m.exports.forwardRef(function(t,n){var r;const a=lo({props:t,name:"MuiInputBase"}),{"aria-describedby":c,autoComplete:d,autoFocus:o,className:v,components:C={},componentsProps:I={},defaultValue:D,disabled:F,disableInjectingGlobalStyles:U,endAdornment:j,fullWidth:T=!1,id:H,inputComponent:N="input",inputProps:q={},inputRef:z,maxRows:B,minRows:k,multiline:w=!1,name:R,onBlur:J,onChange:ie,onClick:ue,onFocus:se,onKeyDown:_e,onKeyUp:Ue,placeholder:je,readOnly:Ne,renderSuffix:Ie,rows:xt,slotProps:We={},slots:Et={},startAdornment:ct,type:xe="text",value:Ee}=a,xn=Vn(a,bne),Qt=q.value!=null?q.value:Ee,{current:yn}=m.exports.useRef(Qt!=null),on=m.exports.useRef(),Sn=m.exports.useCallback(be=>{},[]),Nn=Zo(on,z,q.ref,Sn),[bn,kn]=m.exports.useState(!1),Le=Kg(),Ke=Xg({props:a,muiFormControl:Le,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Ke.focused=Le?Le.focused:bn,m.exports.useEffect(()=>{!Le&&F&&bn&&(kn(!1),J&&J())},[Le,F,bn,J]);const pt=Le&&Le.onFilled,St=Le&&Le.onEmpty,Ft=m.exports.useCallback(be=>{Bk(be)?pt&&pt():St&&St()},[pt,St]);xh(()=>{yn&&Ft({value:Qt})},[Qt,Ft,yn]);const ht=be=>{if(Ke.disabled){be.stopPropagation();return}se&&se(be),q.onFocus&&q.onFocus(be),Le&&Le.onFocus?Le.onFocus(be):kn(!0)},Nt=be=>{J&&J(be),q.onBlur&&q.onBlur(be),Le&&Le.onBlur?Le.onBlur(be):kn(!1)},wn=(be,...Te)=>{if(!yn){const mt=be.target||on.current;if(mt==null)throw new Error(Hu(1));Ft({value:mt.value})}q.onChange&&q.onChange(be,...Te),ie&&ie(be,...Te)};m.exports.useEffect(()=>{Ft(on.current)},[]);const Gn=be=>{on.current&&be.currentTarget===be.target&&on.current.focus(),ue&&ue(be)};let qn=N,Un=q;w&&qn==="input"&&(xt?Un=st({type:void 0,minRows:xt,maxRows:xt},Un):Un=st({type:void 0,maxRows:B,minRows:k},Un),qn=Dte);const xr=be=>{Ft(be.animationName==="mui-auto-fill-cancel"?on.current:{value:"x"})};m.exports.useEffect(()=>{Le&&Le.setAdornedStart(Boolean(ct))},[Le,ct]);const Ae=st({},a,{color:Ke.color||"primary",disabled:Ke.disabled,endAdornment:j,error:Ke.error,focused:Ke.focused,formControl:Le,fullWidth:T,hiddenLabel:Ke.hiddenLabel,multiline:w,size:Ke.size,startAdornment:ct,type:xe}),Ye=wne(Ae),re=Et.root||C.Root||K0,ce=We.root||I.root||{},De=Et.input||C.Input||Y0;return Un=st({},Un,(r=We.input)!=null?r:I.input),nn.exports.jsxs(m.exports.Fragment,{children:[!U&&Ene,nn.exports.jsxs(re,st({},ce,!kx(re)&&{ownerState:st({},Ae,ce.ownerState)},{ref:n,onClick:Gn},xn,{className:_r(Ye.root,ce.className,v,Ne&&"MuiInputBase-readOnly"),children:[ct,nn.exports.jsx(zk.Provider,{value:null,children:nn.exports.jsx(De,st({ownerState:Ae,"aria-invalid":Ke.error,"aria-describedby":c,autoComplete:d,autoFocus:o,defaultValue:D,disabled:Ke.disabled,id:H,onAnimationStart:xr,name:R,placeholder:je,readOnly:Ne,required:Ke.required,rows:xt,value:Qt,onKeyDown:_e,onKeyUp:Ue,type:xe},Un,!kx(De)&&{as:qn,ownerState:st({},Ae,Un.ownerState)},{ref:Nn,className:_r(Ye.input,Un.className,Ne&&"MuiInputBase-readOnly"),onBlur:Nt,onChange:wn,onFocus:ht}))}),j,Ie?Ie(st({},Ke,{startAdornment:ct})):null]}))]})});var Fk=Cne;function Sne(e){return Xi("MuiInput",e)}const kne=st({},Ap,ki("MuiInput",["root","underline","input"]));var km=kne;function Tne(e){return Xi("MuiOutlinedInput",e)}const Ane=st({},Ap,ki("MuiOutlinedInput",["root","notchedOutline","input"]));var bu=Ane;function Mne(e){return Xi("MuiFilledInput",e)}const Ine=st({},Ap,ki("MuiFilledInput",["root","underline","input"]));var Hc=Ine,Pne=Bte(nn.exports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");const Dne=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Rne={entering:{opacity:1},entered:{opacity:1}},Lne=m.exports.forwardRef(function(t,n){const r=Rk(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:c,appear:d=!0,children:o,easing:v,in:C,onEnter:I,onEntered:D,onEntering:F,onExit:U,onExited:j,onExiting:T,style:H,timeout:N=a,TransitionComponent:q=zz}=t,z=Vn(t,Dne),B=m.exports.useRef(null),k=Zo(B,o.ref,n),w=je=>Ne=>{if(je){const Ie=B.current;Ne===void 0?je(Ie):je(Ie,Ne)}},R=w(F),J=w((je,Ne)=>{Bz(je);const Ie=Ax({style:H,timeout:N,easing:v},{mode:"enter"});je.style.webkitTransition=r.transitions.create("opacity",Ie),je.style.transition=r.transitions.create("opacity",Ie),I&&I(je,Ne)}),ie=w(D),ue=w(T),se=w(je=>{const Ne=Ax({style:H,timeout:N,easing:v},{mode:"exit"});je.style.webkitTransition=r.transitions.create("opacity",Ne),je.style.transition=r.transitions.create("opacity",Ne),U&&U(je)}),_e=w(j),Ue=je=>{c&&c(B.current,je)};return nn.exports.jsx(q,st({appear:d,in:C,nodeRef:B,onEnter:J,onEntered:ie,onEntering:R,onExit:se,onExited:_e,onExiting:ue,addEndListener:Ue,timeout:N},z,{children:(je,Ne)=>m.exports.cloneElement(o,st({style:st({opacity:0,visibility:je==="exited"&&!C?"hidden":void 0},Rne[je],H,o.props.style),ref:k},Ne))}))});var One=Lne;function zne(e){return Xi("MuiBackdrop",e)}ki("MuiBackdrop",["root","invisible"]);const Bne=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Fne=e=>{const{classes:t,invisible:n}=e;return ao({root:["root",n&&"invisible"]},zne,t)},Nne=Jn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>st({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),Une=m.exports.forwardRef(function(t,n){var r,a,c;const d=lo({props:t,name:"MuiBackdrop"}),{children:o,className:v,component:C="div",components:I={},componentsProps:D={},invisible:F=!1,open:U,slotProps:j={},slots:T={},TransitionComponent:H=One,transitionDuration:N}=d,q=Vn(d,Bne),z=st({},d,{component:C,invisible:F}),B=Fne(z),k=(r=j.root)!=null?r:D.root;return nn.exports.jsx(H,st({in:U,timeout:N},q,{children:nn.exports.jsx(Nne,st({"aria-hidden":!0},k,{as:(a=(c=T.root)!=null?c:I.Root)!=null?a:C,className:_r(B.root,v,k==null?void 0:k.className),ownerState:st({},z,k==null?void 0:k.ownerState),classes:B,ref:n,children:o}))}))});var jne=Une;const Vne=Rz(),$ne=aee({defaultTheme:Vne,defaultClassName:"MuiBox-root",generateClassName:az.generate});var Hne=$ne;const Wne=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],Gne=Jn("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>st({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),qne=Jn(jne,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Zne=m.exports.forwardRef(function(t,n){var r,a,c,d,o,v;const C=lo({name:"MuiModal",props:t}),{BackdropComponent:I=qne,BackdropProps:D,classes:F,className:U,closeAfterTransition:j=!1,children:T,component:H,components:N={},componentsProps:q={},disableAutoFocus:z=!1,disableEnforceFocus:B=!1,disableEscapeKeyDown:k=!1,disablePortal:w=!1,disableRestoreFocus:R=!1,disableScrollLock:J=!1,hideBackdrop:ie=!1,keepMounted:ue=!1,slotProps:se,slots:_e,theme:Ue}=C,je=Vn(C,Wne),[Ne,Ie]=m.exports.useState(!0),xt={closeAfterTransition:j,disableAutoFocus:z,disableEnforceFocus:B,disableEscapeKeyDown:k,disablePortal:w,disableRestoreFocus:R,disableScrollLock:J,hideBackdrop:ie,keepMounted:ue},We=st({},C,xt,{exited:Ne}),Et=(r=(a=_e==null?void 0:_e.root)!=null?a:N.Root)!=null?r:Gne,ct=(c=(d=_e==null?void 0:_e.backdrop)!=null?d:N.Backdrop)!=null?c:I,xe=(o=se==null?void 0:se.root)!=null?o:q.root,Ee=(v=se==null?void 0:se.backdrop)!=null?v:q.backdrop;return nn.exports.jsx(Ate,st({slots:{root:Et,backdrop:ct},slotProps:{root:()=>st({},_C(xe,We),!kx(Et)&&{as:H,theme:Ue},{className:_r(U,xe==null?void 0:xe.className,F==null?void 0:F.root,!We.open&&We.exited&&(F==null?void 0:F.hidden))}),backdrop:()=>st({},D,_C(Ee,We),{className:_r(Ee==null?void 0:Ee.className,F==null?void 0:F.backdrop)})},onTransitionEnter:()=>Ie(!1),onTransitionExited:()=>Ie(!0),ref:n},je,xt,{children:T}))});var Xne=Zne;const Kne=ki("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var CD=Kne;const Yne=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],Jne=e=>{const{classes:t,disableUnderline:n}=e,a=ao({root:["root",!n&&"underline"],input:["input"]},Mne,t);return st({},t,a)},Qne=Jn(K0,{shouldForwardProp:e=>Nl(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Z0(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const r=e.palette.mode==="light",a=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",c=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",d=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return st({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:d,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c}},[`&.${Hc.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c},[`&.${Hc.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Hc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Hc.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Hc.disabled}, .${Hc.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Hc.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&st({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),ere=Jn(Y0,{name:"MuiFilledInput",slot:"Input",overridesResolver:X0})(({theme:e,ownerState:t})=>st({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),Nz=m.exports.forwardRef(function(t,n){var r,a,c,d;const o=lo({props:t,name:"MuiFilledInput"}),{components:v={},componentsProps:C,fullWidth:I=!1,inputComponent:D="input",multiline:F=!1,slotProps:U,slots:j={},type:T="text"}=o,H=Vn(o,Yne),N=st({},o,{fullWidth:I,inputComponent:D,multiline:F,type:T}),q=Jne(o),z={root:{ownerState:N},input:{ownerState:N}},B=(U!=null?U:C)?Za(U!=null?U:C,z):z,k=(r=(a=j.root)!=null?a:v.Root)!=null?r:Qne,w=(c=(d=j.input)!=null?d:v.Input)!=null?c:ere;return nn.exports.jsx(Fk,st({slots:{root:k,input:w},componentsProps:B,fullWidth:I,inputComponent:D,multiline:F,ref:n,type:T},H,{classes:q}))});Nz.muiName="Input";var tre=Nz;function nre(e){return Xi("MuiFormControl",e)}ki("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const rre=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],ire=e=>{const{classes:t,margin:n,fullWidth:r}=e,a={root:["root",n!=="none"&&`margin${Zi(n)}`,r&&"fullWidth"]};return ao(a,nre,t)},ore=Jn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>st({},t.root,t[`margin${Zi(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>st({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),are=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiFormControl"}),{children:a,className:c,color:d="primary",component:o="div",disabled:v=!1,error:C=!1,focused:I,fullWidth:D=!1,hiddenLabel:F=!1,margin:U="none",required:j=!1,size:T="medium",variant:H="outlined"}=r,N=Vn(r,rre),q=st({},r,{color:d,component:o,disabled:v,error:C,fullWidth:D,hiddenLabel:F,margin:U,required:j,size:T,variant:H}),z=ire(q),[B,k]=m.exports.useState(()=>{let Ue=!1;return a&&m.exports.Children.forEach(a,je=>{if(!Sw(je,["Input","Select"]))return;const Ne=Sw(je,["Select"])?je.props.input:je;Ne&&vne(Ne.props)&&(Ue=!0)}),Ue}),[w,R]=m.exports.useState(()=>{let Ue=!1;return a&&m.exports.Children.forEach(a,je=>{!Sw(je,["Input","Select"])||Bk(je.props,!0)&&(Ue=!0)}),Ue}),[J,ie]=m.exports.useState(!1);v&&J&&ie(!1);const ue=I!==void 0&&!v?I:J;let se;const _e=m.exports.useMemo(()=>({adornedStart:B,setAdornedStart:k,color:d,disabled:v,error:C,filled:w,focused:ue,fullWidth:D,hiddenLabel:F,size:T,onBlur:()=>{ie(!1)},onEmpty:()=>{R(!1)},onFilled:()=>{R(!0)},onFocus:()=>{ie(!0)},registerEffect:se,required:j,variant:H}),[B,d,v,C,w,ue,D,F,se,j,T,H]);return nn.exports.jsx(zk.Provider,{value:_e,children:nn.exports.jsx(ore,st({as:o,ownerState:q,className:_r(z.root,c),ref:n},N,{children:a}))})});var sre=are;function lre(e){return Xi("MuiFormLabel",e)}const ure=ki("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);var Qm=ure;const cre=["children","className","color","component","disabled","error","filled","focused","required"],hre=e=>{const{classes:t,color:n,focused:r,disabled:a,error:c,filled:d,required:o}=e,v={root:["root",`color${Zi(n)}`,a&&"disabled",c&&"error",d&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",c&&"error"]};return ao(v,lre,t)},dre=Jn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>st({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>st({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Qm.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Qm.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Qm.error}`]:{color:(e.vars||e).palette.error.main}})),pre=Jn("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Qm.error}`]:{color:(e.vars||e).palette.error.main}})),fre=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiFormLabel"}),{children:a,className:c,component:d="label"}=r,o=Vn(r,cre),v=Kg(),C=Xg({props:r,muiFormControl:v,states:["color","required","focused","disabled","error","filled"]}),I=st({},r,{color:C.color||"primary",component:d,disabled:C.disabled,error:C.error,filled:C.filled,focused:C.focused,required:C.required}),D=hre(I);return nn.exports.jsxs(dre,st({as:d,ownerState:I,className:_r(D.root,c),ref:n},o,{children:[a,C.required&&nn.exports.jsxs(pre,{ownerState:I,"aria-hidden":!0,className:D.asterisk,children:["\u2009","*"]})]}))});var mre=fre;const gre=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function EC(e){return`scale(${e}, ${e**2})`}const yre={entering:{opacity:1,transform:EC(1)},entered:{opacity:1,transform:"none"}},Pw=typeof navigator!="undefined"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Uz=m.exports.forwardRef(function(t,n){const{addEndListener:r,appear:a=!0,children:c,easing:d,in:o,onEnter:v,onEntered:C,onEntering:I,onExit:D,onExited:F,onExiting:U,style:j,timeout:T="auto",TransitionComponent:H=zz}=t,N=Vn(t,gre),q=m.exports.useRef(),z=m.exports.useRef(),B=Rk(),k=m.exports.useRef(null),w=Zo(k,c.ref,n),R=Ne=>Ie=>{if(Ne){const xt=k.current;Ie===void 0?Ne(xt):Ne(xt,Ie)}},J=R(I),ie=R((Ne,Ie)=>{Bz(Ne);const{duration:xt,delay:We,easing:Et}=Ax({style:j,timeout:T,easing:d},{mode:"enter"});let ct;T==="auto"?(ct=B.transitions.getAutoHeightDuration(Ne.clientHeight),z.current=ct):ct=xt,Ne.style.transition=[B.transitions.create("opacity",{duration:ct,delay:We}),B.transitions.create("transform",{duration:Pw?ct:ct*.666,delay:We,easing:Et})].join(","),v&&v(Ne,Ie)}),ue=R(C),se=R(U),_e=R(Ne=>{const{duration:Ie,delay:xt,easing:We}=Ax({style:j,timeout:T,easing:d},{mode:"exit"});let Et;T==="auto"?(Et=B.transitions.getAutoHeightDuration(Ne.clientHeight),z.current=Et):Et=Ie,Ne.style.transition=[B.transitions.create("opacity",{duration:Et,delay:xt}),B.transitions.create("transform",{duration:Pw?Et:Et*.666,delay:Pw?xt:xt||Et*.333,easing:We})].join(","),Ne.style.opacity=0,Ne.style.transform=EC(.75),D&&D(Ne)}),Ue=R(F),je=Ne=>{T==="auto"&&(q.current=setTimeout(Ne,z.current||0)),r&&r(k.current,Ne)};return m.exports.useEffect(()=>()=>{clearTimeout(q.current)},[]),nn.exports.jsx(H,st({appear:a,in:o,nodeRef:k,onEnter:ie,onEntered:ue,onEntering:J,onExit:_e,onExited:Ue,onExiting:se,addEndListener:je,timeout:T==="auto"?null:T},N,{children:(Ne,Ie)=>m.exports.cloneElement(c,st({style:st({opacity:0,transform:EC(.75),visibility:Ne==="exited"&&!o?"hidden":void 0},yre[Ne],j,c.props.style),ref:w},Ie))}))});Uz.muiSupportAuto=!0;var vre=Uz;const _re=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],xre=e=>{const{classes:t,disableUnderline:n}=e,a=ao({root:["root",!n&&"underline"],input:["input"]},Sne,t);return st({},t,a)},bre=Jn(K0,{shouldForwardProp:e=>Nl(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Z0(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),st({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${km.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${km.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${km.disabled}, .${km.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${km.disabled}:before`]:{borderBottomStyle:"dotted"}})}),wre=Jn(Y0,{name:"MuiInput",slot:"Input",overridesResolver:X0})({}),jz=m.exports.forwardRef(function(t,n){var r,a,c,d;const o=lo({props:t,name:"MuiInput"}),{disableUnderline:v,components:C={},componentsProps:I,fullWidth:D=!1,inputComponent:F="input",multiline:U=!1,slotProps:j,slots:T={},type:H="text"}=o,N=Vn(o,_re),q=xre(o),B={root:{ownerState:{disableUnderline:v}}},k=(j!=null?j:I)?Za(j!=null?j:I,B):B,w=(r=(a=T.root)!=null?a:C.Root)!=null?r:bre,R=(c=(d=T.input)!=null?d:C.Input)!=null?c:wre;return nn.exports.jsx(Fk,st({slots:{root:w,input:R},slotProps:k,fullWidth:D,inputComponent:F,multiline:U,ref:n,type:H},N,{classes:q}))});jz.muiName="Input";var Ere=jz;function Cre(e){return Xi("MuiInputLabel",e)}ki("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Sre=["disableAnimation","margin","shrink","variant","className"],kre=e=>{const{classes:t,formControl:n,size:r,shrink:a,disableAnimation:c,variant:d,required:o}=e,C=ao({root:["root",n&&"formControl",!c&&"animated",a&&"shrink",r==="small"&&"sizeSmall",d],asterisk:[o&&"asterisk"]},Cre,t);return st({},t,C)},Tre=Jn(mre,{shouldForwardProp:e=>Nl(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Qm.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(({theme:e,ownerState:t})=>st({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&st({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&st({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&st({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Are=m.exports.forwardRef(function(t,n){const r=lo({name:"MuiInputLabel",props:t}),{disableAnimation:a=!1,shrink:c,className:d}=r,o=Vn(r,Sre),v=Kg();let C=c;typeof C=="undefined"&&v&&(C=v.filled||v.focused||v.adornedStart);const I=Xg({props:r,muiFormControl:v,states:["size","variant","required"]}),D=st({},r,{disableAnimation:a,formControl:v,shrink:C,size:I.size,variant:I.variant,required:I.required}),F=kre(D);return nn.exports.jsx(Tre,st({"data-shrink":C,ownerState:D,ref:n,className:_r(F.root,d)},o,{classes:F}))});var Mre=Are;const Ire=m.exports.createContext({});var CC=Ire;function Pre(e){return Xi("MuiList",e)}ki("MuiList",["root","padding","dense","subheader"]);const Dre=["children","className","component","dense","disablePadding","subheader"],Rre=e=>{const{classes:t,disablePadding:n,dense:r,subheader:a}=e;return ao({root:["root",!n&&"padding",r&&"dense",a&&"subheader"]},Pre,t)},Lre=Jn("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>st({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),Ore=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiList"}),{children:a,className:c,component:d="ul",dense:o=!1,disablePadding:v=!1,subheader:C}=r,I=Vn(r,Dre),D=m.exports.useMemo(()=>({dense:o}),[o]),F=st({},r,{component:d,dense:o,disablePadding:v}),U=Rre(F);return nn.exports.jsx(CC.Provider,{value:D,children:nn.exports.jsxs(Lre,st({as:d,className:_r(U.root,c),ref:n,ownerState:F},I,{children:[C,a]}))})});var zre=Ore;const Bre=ki("MuiListItemIcon",["root","alignItemsFlexStart"]);var SD=Bre;const Fre=ki("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var kD=Fre;const Nre=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Dw(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function TD(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function Vz(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Tm(e,t,n,r,a,c){let d=!1,o=a(e,t,t?n:!1);for(;o;){if(o===e.firstChild){if(d)return!1;d=!0}const v=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!Vz(o,c)||v)o=a(e,o,n);else return o.focus(),!0}return!1}const Ure=m.exports.forwardRef(function(t,n){const{actions:r,autoFocus:a=!1,autoFocusItem:c=!1,children:d,className:o,disabledItemsFocusable:v=!1,disableListWrap:C=!1,onKeyDown:I,variant:D="selectedMenu"}=t,F=Vn(t,Nre),U=m.exports.useRef(null),j=m.exports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});xh(()=>{a&&U.current.focus()},[a]),m.exports.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(z,B)=>{const k=!U.current.style.width;if(z.clientHeight<U.current.clientHeight&&k){const w=`${iz(Ca(z))}px`;U.current.style[B.direction==="rtl"?"paddingLeft":"paddingRight"]=w,U.current.style.width=`calc(100% + ${w})`}return U.current}}),[]);const T=z=>{const B=U.current,k=z.key,w=Ca(B).activeElement;if(k==="ArrowDown")z.preventDefault(),Tm(B,w,C,v,Dw);else if(k==="ArrowUp")z.preventDefault(),Tm(B,w,C,v,TD);else if(k==="Home")z.preventDefault(),Tm(B,null,C,v,Dw);else if(k==="End")z.preventDefault(),Tm(B,null,C,v,TD);else if(k.length===1){const R=j.current,J=k.toLowerCase(),ie=performance.now();R.keys.length>0&&(ie-R.lastTime>500?(R.keys=[],R.repeating=!0,R.previousKeyMatched=!0):R.repeating&&J!==R.keys[0]&&(R.repeating=!1)),R.lastTime=ie,R.keys.push(J);const ue=w&&!R.repeating&&Vz(w,R);R.previousKeyMatched&&(ue||Tm(B,w,!1,v,Dw,R))?z.preventDefault():R.previousKeyMatched=!1}I&&I(z)},H=Zo(U,n);let N=-1;m.exports.Children.forEach(d,(z,B)=>{!m.exports.isValidElement(z)||(z.props.disabled||(D==="selectedMenu"&&z.props.selected||N===-1)&&(N=B),N===B&&(z.props.disabled||z.props.muiSkipListHighlight||z.type.muiSkipListHighlight)&&(N+=1,N>=d.length&&(N=-1)))});const q=m.exports.Children.map(d,(z,B)=>{if(B===N){const k={};return c&&(k.autoFocus=!0),z.props.tabIndex===void 0&&D==="selectedMenu"&&(k.tabIndex=0),m.exports.cloneElement(z,k)}return z});return nn.exports.jsx(zre,st({role:"menu",ref:H,className:o,onKeyDown:T,tabIndex:a?0:-1},F,{children:q}))});var jre=Ure;function Vre(e){return Xi("MuiPopover",e)}ki("MuiPopover",["root","paper"]);const $re=["onEntering"],Hre=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function AD(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function MD(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function ID(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Rw(e){return typeof e=="function"?e():e}const Wre=e=>{const{classes:t}=e;return ao({root:["root"],paper:["paper"]},Vre,t)},Gre=Jn(Xne,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),qre=Jn(Fz,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Zre=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiPopover"}),{action:a,anchorEl:c,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:v="anchorEl",children:C,className:I,container:D,elevation:F=8,marginThreshold:U=16,open:j,PaperProps:T={},transformOrigin:H={vertical:"top",horizontal:"left"},TransitionComponent:N=vre,transitionDuration:q="auto",TransitionProps:{onEntering:z}={}}=r,B=Vn(r.TransitionProps,$re),k=Vn(r,Hre),w=m.exports.useRef(),R=Zo(w,T.ref),J=st({},r,{anchorOrigin:d,anchorReference:v,elevation:F,marginThreshold:U,PaperProps:T,transformOrigin:H,TransitionComponent:N,transitionDuration:q,TransitionProps:B}),ie=Wre(J),ue=m.exports.useCallback(()=>{if(v==="anchorPosition")return o;const ct=Rw(c),Ee=(ct&&ct.nodeType===1?ct:Ca(w.current).body).getBoundingClientRect();return{top:Ee.top+AD(Ee,d.vertical),left:Ee.left+MD(Ee,d.horizontal)}},[c,d.horizontal,d.vertical,o,v]),se=m.exports.useCallback(ct=>({vertical:AD(ct,H.vertical),horizontal:MD(ct,H.horizontal)}),[H.horizontal,H.vertical]),_e=m.exports.useCallback(ct=>{const xe={width:ct.offsetWidth,height:ct.offsetHeight},Ee=se(xe);if(v==="none")return{top:null,left:null,transformOrigin:ID(Ee)};const xn=ue();let Qt=xn.top-Ee.vertical,yn=xn.left-Ee.horizontal;const on=Qt+xe.height,Sn=yn+xe.width,Nn=_h(Rw(c)),bn=Nn.innerHeight-U,kn=Nn.innerWidth-U;if(Qt<U){const Le=Qt-U;Qt-=Le,Ee.vertical+=Le}else if(on>bn){const Le=on-bn;Qt-=Le,Ee.vertical+=Le}if(yn<U){const Le=yn-U;yn-=Le,Ee.horizontal+=Le}else if(Sn>kn){const Le=Sn-kn;yn-=Le,Ee.horizontal+=Le}return{top:`${Math.round(Qt)}px`,left:`${Math.round(yn)}px`,transformOrigin:ID(Ee)}},[c,v,ue,se,U]),[Ue,je]=m.exports.useState(j),Ne=m.exports.useCallback(()=>{const ct=w.current;if(!ct)return;const xe=_e(ct);xe.top!==null&&(ct.style.top=xe.top),xe.left!==null&&(ct.style.left=xe.left),ct.style.transformOrigin=xe.transformOrigin,je(!0)},[_e]),Ie=(ct,xe)=>{z&&z(ct,xe),Ne()},xt=()=>{je(!1)};m.exports.useEffect(()=>{j&&Ne()}),m.exports.useImperativeHandle(a,()=>j?{updatePosition:()=>{Ne()}}:null,[j,Ne]),m.exports.useEffect(()=>{if(!j)return;const ct=rz(()=>{Ne()}),xe=_h(c);return xe.addEventListener("resize",ct),()=>{ct.clear(),xe.removeEventListener("resize",ct)}},[c,j,Ne]);let We=q;q==="auto"&&!N.muiSupportAuto&&(We=void 0);const Et=D||(c?Ca(Rw(c)).body:void 0);return nn.exports.jsx(Gre,st({BackdropProps:{invisible:!0},className:_r(ie.root,I),container:Et,open:j,ref:n,ownerState:J},k,{children:nn.exports.jsx(N,st({appear:!0,in:j,onEntering:Ie,onExited:xt,timeout:We},B,{children:nn.exports.jsx(qre,st({elevation:F},T,{ref:R,className:_r(ie.paper,T.className)},Ue?void 0:{style:st({},T.style,{opacity:0})},{ownerState:J,children:C}))}))}))});var Xre=Zre;function Kre(e){return Xi("MuiMenu",e)}ki("MuiMenu",["root","paper","list"]);const Yre=["onEntering"],Jre=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Qre={vertical:"top",horizontal:"right"},eie={vertical:"top",horizontal:"left"},tie=e=>{const{classes:t}=e;return ao({root:["root"],paper:["paper"],list:["list"]},Kre,t)},nie=Jn(Xre,{shouldForwardProp:e=>Nl(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),rie=Jn(Fz,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),iie=Jn(jre,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),oie=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:c,disableAutoFocusItem:d=!1,MenuListProps:o={},onClose:v,open:C,PaperProps:I={},PopoverClasses:D,transitionDuration:F="auto",TransitionProps:{onEntering:U}={},variant:j="selectedMenu"}=r,T=Vn(r.TransitionProps,Yre),H=Vn(r,Jre),N=Rk(),q=N.direction==="rtl",z=st({},r,{autoFocus:a,disableAutoFocusItem:d,MenuListProps:o,onEntering:U,PaperProps:I,transitionDuration:F,TransitionProps:T,variant:j}),B=tie(z),k=a&&!d&&C,w=m.exports.useRef(null),R=(ue,se)=>{w.current&&w.current.adjustStyleForScrollbar(ue,N),U&&U(ue,se)},J=ue=>{ue.key==="Tab"&&(ue.preventDefault(),v&&v(ue,"tabKeyDown"))};let ie=-1;return m.exports.Children.map(c,(ue,se)=>{!m.exports.isValidElement(ue)||ue.props.disabled||(j==="selectedMenu"&&ue.props.selected||ie===-1)&&(ie=se)}),nn.exports.jsx(nie,st({onClose:v,anchorOrigin:{vertical:"bottom",horizontal:q?"right":"left"},transformOrigin:q?Qre:eie,PaperProps:st({as:rie},I,{classes:st({},I.classes,{root:B.paper})}),className:B.root,open:C,ref:n,transitionDuration:F,TransitionProps:st({onEntering:R},T),ownerState:z},H,{classes:D,children:nn.exports.jsx(iie,st({onKeyDown:J,actions:w,autoFocus:a&&(ie===-1||d),autoFocusItem:k,variant:j},o,{className:_r(B.list,o.className),children:c}))}))});var aie=oie;function sie(e){return Xi("MuiMenuItem",e)}const lie=ki("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var Am=lie;const uie=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],cie=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},hie=e=>{const{disabled:t,dense:n,divider:r,disableGutters:a,selected:c,classes:d}=e,v=ao({root:["root",n&&"dense",t&&"disabled",!a&&"gutters",r&&"divider",c&&"selected"]},sie,d);return st({},d,v)},die=Jn(mne,{shouldForwardProp:e=>Nl(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:cie})(({theme:e,ownerState:t})=>st({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Am.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:np(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Am.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:np(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Am.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:np(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:np(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Am.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Am.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${CD.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${CD.inset}`]:{marginLeft:52},[`& .${kD.root}`]:{marginTop:0,marginBottom:0},[`& .${kD.inset}`]:{paddingLeft:36},[`& .${SD.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&st({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${SD.root} svg`]:{fontSize:"1.25rem"}}))),pie=m.exports.forwardRef(function(t,n){const r=lo({props:t,name:"MuiMenuItem"}),{autoFocus:a=!1,component:c="li",dense:d=!1,divider:o=!1,disableGutters:v=!1,focusVisibleClassName:C,role:I="menuitem",tabIndex:D,className:F}=r,U=Vn(r,uie),j=m.exports.useContext(CC),T=m.exports.useMemo(()=>({dense:d||j.dense||!1,disableGutters:v}),[j.dense,d,v]),H=m.exports.useRef(null);xh(()=>{a&&H.current&&H.current.focus()},[a]);const N=st({},r,{dense:T.dense,divider:o,disableGutters:v}),q=hie(r),z=Zo(H,n);let B;return r.disabled||(B=D!==void 0?D:-1),nn.exports.jsx(CC.Provider,{value:T,children:nn.exports.jsx(die,st({ref:z,role:I,tabIndex:B,component:c,focusVisibleClassName:_r(q.focusVisible,C),className:_r(q.root,F)},U,{ownerState:N,classes:q}))})});var fie=pie;function mie(e){return Xi("MuiNativeSelect",e)}const gie=ki("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var Nk=gie;const yie=["className","disabled","IconComponent","inputRef","variant"],vie=e=>{const{classes:t,variant:n,disabled:r,multiple:a,open:c}=e,d={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon",`icon${Zi(n)}`,c&&"iconOpen",r&&"disabled"]};return ao(d,mie,t)},$z=({ownerState:e,theme:t})=>st({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":st({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${Nk.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),_ie=Jn("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Nl,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],{[`&.${Nk.multiple}`]:t.multiple}]}})($z),Hz=({ownerState:e,theme:t})=>st({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${Nk.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),xie=Jn("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Zi(n.variant)}`],n.open&&t.iconOpen]}})(Hz),bie=m.exports.forwardRef(function(t,n){const{className:r,disabled:a,IconComponent:c,inputRef:d,variant:o="standard"}=t,v=Vn(t,yie),C=st({},t,{disabled:a,variant:o}),I=vie(C);return nn.exports.jsxs(m.exports.Fragment,{children:[nn.exports.jsx(_ie,st({ownerState:C,className:_r(I.select,r),disabled:a,ref:d||n},v)),t.multiple?null:nn.exports.jsx(xie,{as:c,ownerState:C,className:I.icon})]})});var wie=bie,PD;const Eie=["children","classes","className","label","notched"],Cie=Jn("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Sie=Jn("legend")(({ownerState:e,theme:t})=>st({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&st({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function kie(e){const{className:t,label:n,notched:r}=e,a=Vn(e,Eie),c=n!=null&&n!=="",d=st({},e,{notched:r,withLabel:c});return nn.exports.jsx(Cie,st({"aria-hidden":!0,className:t,ownerState:d},a,{children:nn.exports.jsx(Sie,{ownerState:d,children:c?nn.exports.jsx("span",{children:n}):PD||(PD=nn.exports.jsx("span",{className:"notranslate",children:"\u200B"}))})}))}const Tie=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Aie=e=>{const{classes:t}=e,r=ao({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Tne,t);return st({},t,r)},Mie=Jn(K0,{shouldForwardProp:e=>Nl(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Z0})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return st({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${bu.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${bu.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${bu.focused} .${bu.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${bu.error} .${bu.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${bu.disabled} .${bu.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&st({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),Iie=Jn(kie,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),Pie=Jn(Y0,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:X0})(({theme:e,ownerState:t})=>st({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),Wz=m.exports.forwardRef(function(t,n){var r,a,c,d,o;const v=lo({props:t,name:"MuiOutlinedInput"}),{components:C={},fullWidth:I=!1,inputComponent:D="input",label:F,multiline:U=!1,notched:j,slots:T={},type:H="text"}=v,N=Vn(v,Tie),q=Aie(v),z=Kg(),B=Xg({props:v,muiFormControl:z,states:["required"]}),k=st({},v,{color:B.color||"primary",disabled:B.disabled,error:B.error,focused:B.focused,formControl:z,fullWidth:I,hiddenLabel:B.hiddenLabel,multiline:U,size:B.size,type:H}),w=(r=(a=T.root)!=null?a:C.Root)!=null?r:Mie,R=(c=(d=T.input)!=null?d:C.Input)!=null?c:Pie;return nn.exports.jsx(Fk,st({slots:{root:w,input:R},renderSuffix:J=>nn.exports.jsx(Iie,{ownerState:k,className:q.notchedOutline,label:F!=null&&F!==""&&B.required?o||(o=nn.exports.jsxs(m.exports.Fragment,{children:[F,"\u2009","*"]})):F,notched:typeof j!="undefined"?j:Boolean(J.startAdornment||J.filled||J.focused)}),fullWidth:I,inputComponent:D,multiline:U,ref:n,type:H},N,{classes:st({},q,{notchedOutline:null})}))});Wz.muiName="Input";var Die=Wz;function Rie(e){return Xi("MuiSelect",e)}const Lie=ki("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var o_=Lie,DD;const Oie=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],zie=Jn("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${o_.select}`]:t.select},{[`&.${o_.select}`]:t[n.variant]},{[`&.${o_.multiple}`]:t.multiple}]}})($z,{[`&.${o_.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Bie=Jn("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Zi(n.variant)}`],n.open&&t.iconOpen]}})(Hz),Fie=Jn("input",{shouldForwardProp:e=>Kee(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function RD(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Nie(e){return e==null||typeof e=="string"&&!e.trim()}const Uie=e=>{const{classes:t,variant:n,disabled:r,multiple:a,open:c}=e,d={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon",`icon${Zi(n)}`,c&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return ao(d,Rie,t)},jie=m.exports.forwardRef(function(t,n){const{"aria-describedby":r,"aria-label":a,autoFocus:c,autoWidth:d,children:o,className:v,defaultOpen:C,defaultValue:I,disabled:D,displayEmpty:F,IconComponent:U,inputRef:j,labelId:T,MenuProps:H={},multiple:N,name:q,onBlur:z,onChange:B,onClose:k,onFocus:w,onOpen:R,open:J,readOnly:ie,renderValue:ue,SelectDisplayProps:se={},tabIndex:_e,value:Ue,variant:je="standard"}=t,Ne=Vn(t,Oie),[Ie,xt]=HP({controlled:Ue,default:I,name:"Select"}),[We,Et]=HP({controlled:J,default:C,name:"Select"}),ct=m.exports.useRef(null),xe=m.exports.useRef(null),[Ee,xn]=m.exports.useState(null),{current:Qt}=m.exports.useRef(J!=null),[yn,on]=m.exports.useState(),Sn=Zo(n,j),Nn=m.exports.useCallback(Te=>{xe.current=Te,Te&&xn(Te)},[]),bn=Ee==null?void 0:Ee.parentNode;m.exports.useImperativeHandle(Sn,()=>({focus:()=>{xe.current.focus()},node:ct.current,value:Ie}),[Ie]),m.exports.useEffect(()=>{C&&We&&Ee&&!Qt&&(on(d?null:bn.clientWidth),xe.current.focus())},[Ee,d]),m.exports.useEffect(()=>{c&&xe.current.focus()},[c]),m.exports.useEffect(()=>{if(!T)return;const Te=Ca(xe.current).getElementById(T);if(Te){const mt=()=>{getSelection().isCollapsed&&xe.current.focus()};return Te.addEventListener("click",mt),()=>{Te.removeEventListener("click",mt)}}},[T]);const kn=(Te,mt)=>{Te?R&&R(mt):k&&k(mt),Qt||(on(d?null:bn.clientWidth),Et(Te))},Le=Te=>{Te.button===0&&(Te.preventDefault(),xe.current.focus(),kn(!0,Te))},Ke=Te=>{kn(!1,Te)},pt=m.exports.Children.toArray(o),St=Te=>{const mt=pt.map(Kt=>Kt.props.value).indexOf(Te.target.value);if(mt===-1)return;const Bt=pt[mt];xt(Bt.props.value),B&&B(Te,Bt)},Ft=Te=>mt=>{let Bt;if(!!mt.currentTarget.hasAttribute("tabindex")){if(N){Bt=Array.isArray(Ie)?Ie.slice():[];const Kt=Ie.indexOf(Te.props.value);Kt===-1?Bt.push(Te.props.value):Bt.splice(Kt,1)}else Bt=Te.props.value;if(Te.props.onClick&&Te.props.onClick(mt),Ie!==Bt&&(xt(Bt),B)){const Kt=mt.nativeEvent||mt,er=new Kt.constructor(Kt.type,Kt);Object.defineProperty(er,"target",{writable:!0,value:{value:Bt,name:q}}),B(er,Te)}N||kn(!1,mt)}},ht=Te=>{ie||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Te.key)!==-1&&(Te.preventDefault(),kn(!0,Te))},Nt=Ee!==null&&We,wn=Te=>{!Nt&&z&&(Object.defineProperty(Te,"target",{writable:!0,value:{value:Ie,name:q}}),z(Te))};delete Ne["aria-invalid"];let Gn,qn;const Un=[];let xr=!1;(Bk({value:Ie})||F)&&(ue?Gn=ue(Ie):xr=!0);const Ae=pt.map(Te=>{if(!m.exports.isValidElement(Te))return null;let mt;if(N){if(!Array.isArray(Ie))throw new Error(Hu(2));mt=Ie.some(Bt=>RD(Bt,Te.props.value)),mt&&xr&&Un.push(Te.props.children)}else mt=RD(Ie,Te.props.value),mt&&xr&&(qn=Te.props.children);return m.exports.cloneElement(Te,{"aria-selected":mt?"true":"false",onClick:Ft(Te),onKeyUp:Bt=>{Bt.key===" "&&Bt.preventDefault(),Te.props.onKeyUp&&Te.props.onKeyUp(Bt)},role:"option",selected:mt,value:void 0,"data-value":Te.props.value})});xr&&(N?Un.length===0?Gn=null:Gn=Un.reduce((Te,mt,Bt)=>(Te.push(mt),Bt<Un.length-1&&Te.push(", "),Te),[]):Gn=qn);let Ye=yn;!d&&Qt&&Ee&&(Ye=bn.clientWidth);let re;typeof _e!="undefined"?re=_e:re=D?null:0;const ce=se.id||(q?`mui-component-select-${q}`:void 0),De=st({},t,{variant:je,value:Ie,open:Nt}),be=Uie(De);return nn.exports.jsxs(m.exports.Fragment,{children:[nn.exports.jsx(zie,st({ref:Nn,tabIndex:re,role:"button","aria-disabled":D?"true":void 0,"aria-expanded":Nt?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[T,ce].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:ht,onMouseDown:D||ie?null:Le,onBlur:wn,onFocus:w},se,{ownerState:De,className:_r(se.className,be.select,v),id:ce,children:Nie(Gn)?DD||(DD=nn.exports.jsx("span",{className:"notranslate",children:"\u200B"})):Gn})),nn.exports.jsx(Fie,st({value:Array.isArray(Ie)?Ie.join(","):Ie,name:q,ref:ct,"aria-hidden":!0,onChange:St,tabIndex:-1,disabled:D,className:be.nativeInput,autoFocus:c,ownerState:De},Ne)),nn.exports.jsx(Bie,{as:U,className:be.icon,ownerState:De}),nn.exports.jsx(aie,st({id:`menu-${q||""}`,anchorEl:bn,open:Nt,onClose:Ke,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},H,{MenuListProps:st({"aria-labelledby":T,role:"listbox",disableListWrap:!0},H.MenuListProps),PaperProps:st({},H.PaperProps,{style:st({minWidth:Ye},H.PaperProps!=null?H.PaperProps.style:null)}),children:Ae}))]})});var Vie=jie,LD,OD;const $ie=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Hie=e=>{const{classes:t}=e;return t},Uk={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Nl(e)&&e!=="variant",slot:"Root"},Wie=Jn(Ere,Uk)(""),Gie=Jn(Die,Uk)(""),qie=Jn(tre,Uk)(""),Gz=m.exports.forwardRef(function(t,n){const r=lo({name:"MuiSelect",props:t}),{autoWidth:a=!1,children:c,classes:d={},className:o,defaultOpen:v=!1,displayEmpty:C=!1,IconComponent:I=Pne,id:D,input:F,inputProps:U,label:j,labelId:T,MenuProps:H,multiple:N=!1,native:q=!1,onClose:z,onOpen:B,open:k,renderValue:w,SelectDisplayProps:R,variant:J="outlined"}=r,ie=Vn(r,$ie),ue=q?wie:Vie,se=Kg(),Ue=Xg({props:r,muiFormControl:se,states:["variant"]}).variant||J,je=F||{standard:LD||(LD=nn.exports.jsx(Wie,{})),outlined:nn.exports.jsx(Gie,{label:j}),filled:OD||(OD=nn.exports.jsx(qie,{}))}[Ue],Ne=st({},r,{variant:Ue,classes:d}),Ie=Hie(Ne),xt=Zo(n,je.ref);return nn.exports.jsx(m.exports.Fragment,{children:m.exports.cloneElement(je,st({inputComponent:ue,inputProps:st({children:c,IconComponent:I,variant:Ue,type:void 0,multiple:N},q?{id:D}:{autoWidth:a,defaultOpen:v,displayEmpty:C,labelId:T,MenuProps:H,onClose:z,onOpen:B,open:k,renderValue:w,SelectDisplayProps:st({id:D},R)},U,{classes:U?Za(Ie,U.classes):Ie},F?F.props.inputProps:{})},N&&q&&Ue==="outlined"?{notched:!0}:{},{ref:xt,className:_r(je.props.className,o)},!F&&{variant:Ue},ie))})});Gz.muiName="Select";var Zie=Gz;const Xie=e=>{const t=c=>{const d=c.course_1,o=c.course_2;return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("td",null,d?d.code:"-"),m.exports.createElement("td",null,o?o.code:"-"))},n=e.timetable,[r,a]=m.exports.useState(Array(5));return m.exports.useEffect(()=>{for(let c=0;c<n.courses.length;c++){const d=n.courses[c];r[d.position]=d}a([...r])},[]),console.log(r),m.exports.createElement("details",{className:"mb-3"},m.exports.createElement("summary",{className:"card-top"},m.exports.createElement("span",{className:"card-title"},m.exports.createElement("strong",null,n.term.name))),m.exports.createElement("div",{className:"card-body timetable-details",id:"card-body-1",hidden:!1},m.exports.createElement("p",{className:"card-text"}),m.exports.createElement("table",{className:"table"},m.exports.createElement("thead",null,m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"col"},"Period"),m.exports.createElement("th",{scope:"col"},"Day 1"),m.exports.createElement("th",{scope:"col"},"Day 2"))),m.exports.createElement("tbody",null,m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"row"},"09:00 am - 10:15 am"),m.exports.createElement(t,{course_1:r[1],course_2:r[1]})),m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"row"},"10:20 am - 11:35 am"),m.exports.createElement(t,{course_1:r[2],course_2:r[2]})),m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"row"},"12:20 pm - 01:35 pm"),m.exports.createElement(t,{course_1:r[3],course_2:r[4]})),m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"row"},"01:40 pm - 02:55 pm"),m.exports.createElement(t,{course_1:r[4],course_2:r[3]})))),m.exports.createElement("p",null),m.exports.createElement(Yt,{to:`/timetable/edit/${n.id}`,className:"card-link"},"Edit timetable")))},Kie=()=>{const e=Si(),[t,n]=m.exports.useState({}),r=m.exports.useContext(Hr);m.exports.useEffect(()=>{go()||e("/accounts/login")});const a=()=>{go()&&r.getAPI(lr.TIMETABLE,!0).then(c=>{n(c.data)}).catch(c=>{c.response.status!==404&&(r.refreshAuth(),a())})};return m.exports.useEffect(()=>{a()},[]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/list.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/main.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/base.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/secondary.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement(e4,null),m.exports.createElement("div",{className:"white-bg"},"id"in t?m.exports.createElement(Xie,{timetable:t}):m.exports.createElement("div",{className:"timetable-add-container"},m.exports.createElement("div",{className:"card-body"},m.exports.createElement("form",{onSubmit:c=>{c.preventDefault(),console.log("Submitted")}},m.exports.createElement("h5",{className:"card-title"},"Add timetable"),m.exports.createElement("hr",null),m.exports.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:"M5IY2bEzx9c5zEI25e3yzsF7XGycqazLGhT6fs8hrUw5fUunY4kgQZETZDpblGVm"}),m.exports.createElement(Hne,{sx:{minWidth:120}},m.exports.createElement(sre,{fullWidth:!0},m.exports.createElement(Mre,{id:"demo-simple-select-label"},"Term"),m.exports.createElement(Zie,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:0,label:"Term",onChange:()=>{}},m.exports.createElement(fie,{value:0},"---------")))),m.exports.createElement("div",{className:"mt-3"},m.exports.createElement("button",{type:"submit",id:"continue-button",className:"btn btn-primary mr-2",style:{letterSpacing:0}},"Continue"),m.exports.createElement(Yt,{to:"/user/1",className:"btn btn-primary",role:"button","aria-pressed":"true"},"Cancel"))))))))};var qz={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(zo,function(){var n,r,a;function c(o,v){if(!n)n=v;else if(!r)r=v;else{var C="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",I={};n(I),a=v(I),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}c(["exports"],function(o){var v=typeof self!="undefined"?self:{},C="2.14.1";let I;const D={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(I==null){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{I={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):s}catch{I=s}}return I},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!D.API_URL)return null;try{const s=new URL(D.API_URL);return s.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":s.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},F={supported:!1,testSupport:function(s){!T&&j&&(H?N(s):U=s)}};let U,j,T=!1,H=!1;function N(s){const i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,j),s.isContextLost())return;F.supported=!0}catch{}s.deleteTexture(i),T=!0}v.document&&(j=v.document.createElement("img"),j.onload=function(){U&&N(U),U=null,H=!0},j.onerror=function(){T=!0,U=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const q="01";var z=B;function B(s,i,l,h){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=l,this.p2y=h}B.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,h=0;h<8;h++){var f=this.sampleCurveX(l)-s;if(Math.abs(f)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=f/y}var x=0,E=1;for(l=s,h=0;h<20&&(f=this.sampleCurveX(l),!(Math.abs(f-s)<i));h++)s>f?x=l:E=l,l=.5*(E-x)+x;return l},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var k=w;function w(s,i){this.x=s,this.y=i}w.prototype={clone:function(){return new w(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,l=s.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),l=Math.sin(s),h=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=h,this},_rotateAround:function(s,i){var l=Math.cos(s),h=Math.sin(s),f=i.y+h*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-h*(this.y-i.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},w.convert=function(s){return s instanceof w?s:Array.isArray(s)?new w(s[0],s[1]):s};const R=Math.PI/180,J=180/Math.PI;function ie(s){return s*R}function ue(s){return s*J}const se=[[0,0],[1,0],[1,1],[0,1]];function _e(s){if(s<=0)return 0;if(s>=1)return 1;const i=s*s,l=i*s;return 4*(s<.5?l:3*(s-i)+l-.75)}function Ue(s,i,l,h){const f=new z(s,i,l,h);return function(y){return f.solve(y)}}const je=Ue(.25,.1,.25,1);function Ne(s,i,l){return Math.min(l,Math.max(i,s))}function Ie(s,i,l){return(l=Ne((l-s)/(i-s),0,1))*l*(3-2*l)}function xt(s,i,l){const h=l-i,f=((s-i)%h+h)%h+i;return f===i?l:f}function We(s,i,l){if(!s.length)return l(null,[]);let h=s.length;const f=new Array(s.length);let y=null;s.forEach((x,E)=>{i(x,(A,P)=>{A&&(y=A),f[E]=P,--h==0&&l(y,f)})})}function Et(s){const i=[];for(const l in s)i.push(s[l]);return i}function ct(s,...i){for(const l of i)for(const h in l)s[h]=l[h];return s}let xe=1;function Ee(){return xe++}function xn(){return function s(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function Qt(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function yn(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function on(s,i){s.forEach(l=>{i[l]&&(i[l]=i[l].bind(i))})}function Sn(s,i){return s.indexOf(i,s.length-i.length)!==-1}function Nn(s,i,l){const h={};for(const f in s)h[f]=i.call(l||this,s[f],f,s);return h}function bn(s,i,l){const h={};for(const f in s)i.call(l||this,s[f],f,s)&&(h[f]=s[f]);return h}function kn(s){return Array.isArray(s)?s.map(kn):typeof s=="object"&&s?Nn(s,kn):s}const Le={};function Ke(s){Le[s]||(typeof console!="undefined"&&console.warn(s),Le[s]=!0)}function pt(s,i,l){return(l.y-s.y)*(i.x-s.x)>(i.y-s.y)*(l.x-s.x)}function St(s){let i=0;for(let l,h,f=0,y=s.length,x=y-1;f<y;x=f++)l=s[f],h=s[x],i+=(h.x-l.x)*(l.y+h.y);return i}function Ft(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ht(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,f,y)=>{const x=f||y;return i[h]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}let Nt=null;function wn(s){if(Nt==null){const i=s.navigator?s.navigator.userAgent:null;Nt=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Nt}function Gn(s){try{const i=v[s];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function qn(s,i){return[s[4*i],s[4*i+1],s[4*i+2],s[4*i+3]]}const Un="mapbox-tiles";let xr,Ae,Ye=500,re=50;function ce(){try{return v.caches}catch{}}function De(){ce()&&!xr&&(xr=v.caches.open(Un))}function be(s){const i=s.indexOf("?");if(i<0)return s;const l=function(f){const y=f.indexOf("?");return y>0?f.slice(y+1).split("&"):[]}(s),h=l.filter(f=>{const y=f.split("=");return y[0]==="language"||y[0]==="worldview"});return h.length?`${s.slice(0,i)}?${h.join("&")}`:s.slice(0,i)}let Te=1/0;const mt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(mt);class Bt extends Error{constructor(i,l,h){l===401&&yi(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=l,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Kt=Ft()?()=>self.worker&&self.worker.referrer:()=>(v.location.protocol==="blob:"?v.parent:v).location.href,er=function(s,i){if(!(/^file:/.test(l=s.url)||/^file:/.test(Kt())&&!/^\w+:/.test(l))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(h,f){const y=new v.AbortController,x=new v.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:Kt(),referrerPolicy:h.referrerPolicy,signal:y.signal});let E=!1,A=!1;const P=(V=x.url).indexOf("sku=")>0&&yi(V);var V;h.type==="json"&&x.headers.set("Accept","application/json");const G=(Y,Q,ne)=>{if(A)return;if(Y&&Y.message!=="SecurityError"&&Ke(Y),Q&&ne)return Z(Q);const he=Date.now();v.fetch(x).then(we=>{if(we.ok){const Re=P?we.clone():null;return Z(we,Re,he)}return f(new Bt(we.statusText,we.status,h.url))}).catch(we=>{we.name!=="AbortError"&&f(new Error(`${we.message} ${h.url}`))})},Z=(Y,Q,ne)=>{(h.type==="arrayBuffer"?Y.arrayBuffer():h.type==="json"?Y.json():Y.text()).then(he=>{A||(Q&&ne&&function(we,Re,ye){if(De(),!xr)return;const Pe={status:Re.status,statusText:Re.statusText,headers:new v.Headers};Re.headers.forEach((it,et)=>Pe.headers.set(et,it));const Be=ht(Re.headers.get("Cache-Control")||"");if(Be["no-store"])return;Be["max-age"]&&Pe.headers.set("Expires",new Date(ye+1e3*Be["max-age"]).toUTCString());const Oe=Pe.headers.get("Expires");Oe&&(new Date(Oe).getTime()-ye<42e4||function(it,et){if(Ae===void 0)try{new Response(new ReadableStream),Ae=!0}catch{Ae=!1}Ae?et(it.body):it.blob().then(et)}(Re,it=>{const et=new v.Response(it,Pe);De(),xr&&xr.then(yt=>yt.put(be(we.url),et)).catch(yt=>Ke(yt.message))}))}(x,Q,ne),E=!0,f(null,he,Y.headers.get("Cache-Control"),Y.headers.get("Expires")))}).catch(he=>{A||f(new Error(he.message))})};return P?function(Y,Q){if(De(),!xr)return Q(null);const ne=be(Y.url);xr.then(he=>{he.match(ne).then(we=>{const Re=function(ye){if(!ye)return!1;const Pe=new Date(ye.headers.get("Expires")||0),Be=ht(ye.headers.get("Cache-Control")||"");return Pe>Date.now()&&!Be["no-cache"]}(we);he.delete(ne),Re&&he.put(ne,we.clone()),Q(null,we,Re)}).catch(Q)}).catch(Q)}(x,G):G(null,null),{cancel:()=>{A=!0,E||y.abort()}}}(s,i);if(Ft()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i,void 0,!0)}var l;return function(h,f){const y=new v.XMLHttpRequest;y.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const x in h.headers)y.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=h.credentials==="include",y.onerror=()=>{f(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let x=y.response;if(h.type==="json")try{x=JSON.parse(y.response)}catch(E){return f(E)}f(null,x,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else f(new Bt(y.statusText,y.status,h.url))},y.send(h.body),{cancel:()=>y.abort()}}(s,i)},In=function(s,i){return er(ct(s,{type:"arrayBuffer"}),i)};function $t(s){const i=v.document.createElement("a");return i.href=s,i.protocol===v.document.location.protocol&&i.host===v.document.location.host}const Rn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let br,Zn;br=[],Zn=0;const Ti=function(s,i){if(F.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),Zn>=D.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:s,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return br.push(y),y}Zn++;let l=!1;const h=()=>{if(!l)for(l=!0,Zn--;br.length&&Zn<D.MAX_PARALLEL_IMAGE_REQUESTS;){const y=br.shift(),{requestParameters:x,callback:E,cancelled:A}=y;A||(y.cancel=Ti(x,E).cancel)}},f=In(s,(y,x,E,A)=>{h(),y?i(y):x&&(v.createImageBitmap?function(P,V){const G=new v.Blob([new Uint8Array(P)],{type:"image/png"});v.createImageBitmap(G).then(Z=>{V(null,Z)}).catch(Z=>{V(new Error(`Could not load image because of ${Z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(P,V)=>i(P,V,E,A)):function(P,V){const G=new v.Image,Z=v.URL;G.onload=()=>{V(null,G),Z.revokeObjectURL(G.src),G.onload=null,v.requestAnimationFrame(()=>{G.src=Rn})},G.onerror=()=>V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Y=new v.Blob([new Uint8Array(P)],{type:"image/png"});G.src=P.byteLength?Z.createObjectURL(Y):Rn}(x,(P,V)=>i(P,V,E,A)))});return{cancel:()=>{f.cancel(),h()}}},Jr="NO_ACCESS_TOKEN";function gi(s){return s.indexOf("mapbox:")===0}function yi(s){return D.API_URL_REGEX.test(s)}function Ai(s){return D.API_CDN_URL_REGEX.test(s)}function uo(s){return D.API_STYLE_REGEX.test(s)&&!wr(s)}function wr(s){return D.API_SPRITE_REGEX.test(s)}const co=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function vi(s){const i=s.match(co);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Di(s){const i=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${i}`}function Eo(s){if(!s)return null;const i=s.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(i[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Pa{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const l=Eo(D.ACCESS_TOKEN);let h="";return h=l&&l.u?v.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(f,y)=>String.fromCharCode(Number("0x"+y)))):D.ACCESS_TOKEN||"",i?`mapbox.eventData.${i}:${h}`:`mapbox.eventData:${h}`}fetchEventData(){const i=Gn("localStorage"),l=this.getStorageKey(),h=this.getStorageKey("uuid");if(i)try{const f=v.localStorage.getItem(l);f&&(this.eventData=JSON.parse(f));const y=v.localStorage.getItem(h);y&&(this.anonId=y)}catch{Ke("Unable to read from LocalStorage")}}saveEventData(){const i=Gn("localStorage"),l=this.getStorageKey(),h=this.getStorageKey("uuid");if(i)try{v.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{Ke("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,l,h,f){if(!D.EVENTS_URL)return;const y=vi(D.EVENTS_URL);y.params.push(`access_token=${f||D.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(i).toISOString()},E=l?ct(x,l):x,A={url:Di(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=function(P,V){return er(ct(P,{method:"POST"}),V)}(A,P=>{this.pendingRequest=null,h(P),this.saveEventData(),this.processRequests(f)})}queueRequest(i,l){this.queue.push(i),this.processRequests(l)}}const ge=new class extends Pa{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,i){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(s)&&s.some(l=>gi(l)||yi(l))&&this.queueRequest(Date.now(),i)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=Eo(D.ACCESS_TOKEN),l=i?i.u:D.ACCESS_TOKEN;let h=l!==this.eventData.tokenU;yn(this.anonId)||(this.anonId=xn(),h=!0);const f=this.queue.shift();if(this.eventData.lastSuccess){const y=new Date(this.eventData.lastSuccess),x=new Date(f),E=(f-this.eventData.lastSuccess)/864e5;h=h||E>=1||E<-1||y.getDate()!==x.getDate()}else h=!0;h?this.postEvent(f,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:q,"enabled.telemetry":!1,userId:this.anonId},y=>{y||(this.eventData.lastSuccess=f,this.eventData.tokenU=l)},s):this.processRequests()}},te=ge.postTurnstileEvent.bind(ge),oe=new class extends Pa{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,i,l,h){this.skuToken=i,this.errorCb=h,D.EVENTS_URL&&(l||D.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(Jr)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),yn(this.anonId)||(this.anonId=xn()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:C,skuId:q,skuToken:this.skuToken,userId:this.anonId},h=>{h?this.errorCb(h):i&&(this.success[i]=!0)},s))}},ve=oe.postMapLoadEvent.bind(oe),Me=new class extends Pa{constructor(){super("gljs.performance")}postPerformanceEvent(s,i){D.EVENTS_URL&&(s||D.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},s)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:l}=this.queue.shift(),h=function(f){const y=v.performance.getEntriesByType("resource"),x=v.performance.getEntriesByType("mark"),E=function(Z){const Y={};if(Z){for(const Q in Z)if(Q!=="other")for(const ne of Z[Q]){const he=`${Q}ResolveRangeMin`,we=`${Q}ResolveRangeMax`,Re=`${Q}RequestCount`,ye=`${Q}RequestCachedCount`;Y[he]=Math.min(Y[he]||1/0,ne.startTime),Y[we]=Math.max(Y[we]||-1/0,ne.responseEnd);const Pe=Be=>{Y[Be]===void 0&&(Y[Be]=0),++Y[Be]};ne.transferSize!==void 0&&ne.transferSize===0&&Pe(ye),Pe(Re)}}return Y}(function(Z,Y){const Q={};if(Z)for(const ne of Z){const he=Y(ne);Q[he]===void 0&&(Q[he]=[]),Q[he].push(ne)}return Q}(y,qt)),A=v.devicePixelRatio,P=v.navigator.connection||v.navigator.mozConnection||v.navigator.webkitConnection,V={counters:[],metadata:[],attributes:[]},G=(Z,Y,Q)=>{Q!=null&&Z.push({name:Y,value:Q.toString()})};for(const Z in E)G(V.counters,Z,E[Z]);if(f.interactionRange[0]!==1/0&&f.interactionRange[1]!==-1/0&&(G(V.counters,"interactionRangeMin",f.interactionRange[0]),G(V.counters,"interactionRangeMax",f.interactionRange[1])),x)for(const Z of Object.keys(Qe)){const Y=Qe[Z],Q=x.find(ne=>ne.name===Y);Q&&G(V.counters,Y,Q.startTime)}return G(V.counters,"visibilityHidden",f.visibilityHidden),G(V.attributes,"style",function(Z){if(Z)for(const Y of Z){const Q=Y.name.split("?")[0];if(uo(Q)){const ne=Q.split("/").slice(-2);if(ne.length===2)return`mapbox://styles/${ne[0]}/${ne[1]}`}}}(y)),G(V.attributes,"terrainEnabled",f.terrainEnabled?"true":"false"),G(V.attributes,"fogEnabled",f.fogEnabled?"true":"false"),G(V.attributes,"projection",f.projection),G(V.attributes,"zoom",f.zoom),G(V.metadata,"devicePixelRatio",A),G(V.metadata,"connectionEffectiveType",P?P.effectiveType:void 0),G(V.metadata,"navigatorUserAgent",v.navigator.userAgent),G(V.metadata,"screenWidth",v.screen.width),G(V.metadata,"screenHeight",v.screen.height),G(V.metadata,"windowWidth",v.innerWidth),G(V.metadata,"windowHeight",v.innerHeight),G(V.metadata,"mapWidth",f.width/A),G(V.metadata,"mapHeight",f.height/A),G(V.metadata,"webglRenderer",f.renderer),G(V.metadata,"webglVendor",f.vendor),G(V.metadata,"sdkVersion",C),G(V.metadata,"sdkIdentifier","mapbox-gl-js"),V}(l);for(const f of h.metadata);for(const f of h.counters);for(const f of h.attributes);this.postEvent(i,h,()=>{},s)}},Ve=Me.postPerformanceEvent.bind(Me),Xe=new class extends Pa{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,i,l,h){if(!D.API_URL||!D.SESSION_PATH)return;const f=vi(D.API_URL+D.SESSION_PATH);f.params.push(`sku=${i||""}`),f.params.push(`access_token=${h||D.ACCESS_TOKEN||""}`);const y={url:Di(f),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(x,E){return er(ct(x,{method:"GET"}),E)}(y,x=>{this.pendingRequest=null,l(x),this.saveEventData(),this.processRequests(h)})}getSessionAPI(s,i,l,h){this.skuToken=i,this.errorCb=h,D.SESSION_PATH&&D.API_URL&&(l||D.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(Jr)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||this.getSession(l,this.skuToken,h=>{h?this.errorCb(h):i&&(this.success[i]=!0)},s)}},Ze=Xe.getSessionAPI.bind(Xe),He=new Set,Qe={create:"create",load:"load",fullLoad:"fullLoad"},Tt={mark(s){v.performance.mark(s)},measure(s,i,l){v.performance.measure(s,i,l)}};function qt(s){const i=s.name.split("?")[0];return Ai(i)&&i.includes("mapbox-gl.js")?"javascript":Ai(i)&&i.includes("mapbox-gl.css")?"css":function(l){return D.API_FONTS_REGEX.test(l)}(i)?"fontRange":wr(i)?"sprite":uo(i)?"style":function(l){return D.API_TILEJSON_REGEX.test(l)}(i)?"tilejson":"other"}const Dt=v.performance;function hn(s){const i=s?s.url.toString():void 0;return Dt.getEntriesByName(i)}let ln,sn,vn,An;const Qn={now:()=>vn!==void 0?vn:v.performance.now(),setNow(s){vn=s},restoreNow(){vn=void 0},frame(s){const i=v.requestAnimationFrame(s);return{cancel:()=>v.cancelAnimationFrame(i)}},getImageData(s,i=0){const{width:l,height:h}=s;An||(An=v.document.createElement("canvas"));const f=An.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return(l>An.width||h>An.height)&&(An.width=l,An.height=h),f.clearRect(-i,-i,l+2*i,h+2*i),f.drawImage(s,0,0,l,h),f.getImageData(-i,-i,l+2*i,h+2*i)},resolveURL:s=>(ln||(ln=v.document.createElement("a")),ln.href=s,ln.href),get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(sn==null&&(sn=v.matchMedia("(prefers-reduced-motion: reduce)")),sn.matches)}};function pn(s,i,l){l[s]&&l[s].indexOf(i)!==-1||(l[s]=l[s]||[],l[s].push(i))}function ur(s,i,l){if(l&&l[s]){const h=l[s].indexOf(i);h!==-1&&l[s].splice(h,1)}}class cr{constructor(i,l={}){ct(this,l),this.type=i}}class Cs extends cr{constructor(i,l={}){super("error",ct({error:i},l))}}class ts{on(i,l){return this._listeners=this._listeners||{},pn(i,l,this._listeners),this}off(i,l){return ur(i,l,this._listeners),ur(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},pn(i,l,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,l){typeof i=="string"&&(i=new cr(i,l||{}));const h=i.type;if(this.listens(h)){i.target=this;const f=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const E of f)E.call(this,i);const y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const E of y)ur(h,E,this._oneTimeListeners),E.call(this,i);const x=this._eventedParent;x&&(ct(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Cs&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var gt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ns(s,...i){for(const l of i)for(const h in l)s[h]=l[h];return s}function si(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Ss(s){if(Array.isArray(s))return s.map(Ss);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const l in s)i[l]=Ss(s[l]);return i}return si(s)}class Yg extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}var Da=Yg;class jl{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[h,f]of l)this.bindings[h]=f}concat(i){return new jl(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var Jg=jl;const Vl={kind:"null"},Ut={kind:"number"},jn={kind:"string"},Ln={kind:"boolean"},Ra={kind:"color"},nl={kind:"object"},Pn={kind:"value"},Qu={kind:"collator"},$l={kind:"formatted"},Hl={kind:"resolvedImage"};function ho(s,i){return{kind:"array",itemType:s,N:i}}function Er(s){if(s.kind==="array"){const i=Er(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const Qg=[Vl,Ut,jn,Ln,Ra,$l,nl,ho(Pn),Hl];function Co(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Co(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const l of Qg)if(!Co(l,i))return null}}return`Expected ${Er(s)} but found ${Er(i)} instead.`}function $p(s,i){return i.some(l=>l.kind===s.kind)}function rl(s,i){return i.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}var Hp,Ah={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ec(s){return(s=Math.round(s))<0?0:s>255?255:s}function il(s){return ec(s[s.length-1]==="%"?parseFloat(s)/100*255:parseInt(s))}function Wl(s){return(i=s[s.length-1]==="%"?parseFloat(s)/100:parseFloat(s))<0?0:i>1?1:i;var i}function Wp(s,i,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?s+(i-s)*l*6:2*l<1?i:3*l<2?s+(i-s)*(2/3-l)*6:s}try{Hp={}.parseCSSColor=function(s){var i,l=s.replace(/ /g,"").toLowerCase();if(l in Ah)return Ah[l].slice();if(l[0]==="#")return l.length===4?(i=parseInt(l.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:l.length===7&&(i=parseInt(l.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var h=l.indexOf("("),f=l.indexOf(")");if(h!==-1&&f+1===l.length){var y=l.substr(0,h),x=l.substr(h+1,f-(h+1)).split(","),E=1;switch(y){case"rgba":if(x.length!==4)return null;E=Wl(x.pop());case"rgb":return x.length!==3?null:[il(x[0]),il(x[1]),il(x[2]),E];case"hsla":if(x.length!==4)return null;E=Wl(x.pop());case"hsl":if(x.length!==3)return null;var A=(parseFloat(x[0])%360+360)%360/360,P=Wl(x[1]),V=Wl(x[2]),G=V<=.5?V*(P+1):V+P-V*P,Z=2*V-G;return[ec(255*Wp(Z,G,A+1/3)),ec(255*Wp(Z,G,A)),ec(255*Wp(Z,G,A-1/3)),E];default:return null}}return null}}catch{}class So{constructor(i,l,h,f=1){this.r=i,this.g=l,this.b=h,this.a=f}static parse(i){if(!i)return;if(i instanceof So)return i;if(typeof i!="string")return;const l=Hp(i);return l?new So(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[i,l,h,f]=this.toArray();return`rgba(${Math.round(i)},${Math.round(l)},${Math.round(h)},${f})`}toArray(){const{r:i,g:l,b:h,a:f}=this;return f===0?[0,0,0,0]:[255*i/f,255*l/f,255*h/f,f]}toArray01(){const{r:i,g:l,b:h,a:f}=this;return f===0?[0,0,0,0]:[i/f,l/f,h/f,f]}toArray01PremultipliedAlpha(){const{r:i,g:l,b:h,a:f}=this;return[i,l,h,f]}}So.black=new So(0,0,0,1),So.white=new So(1,1,1,1),So.transparent=new So(0,0,0,0),So.red=new So(1,0,0,1),So.blue=new So(0,0,1,1);var Qr=So;class Mh{constructor(i,l,h){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class tc{constructor(i,l,h,f,y){this.text=i.normalize?i.normalize():i,this.image=l,this.scale=h,this.fontStack=f,this.textColor=y}}class ko{constructor(i){this.sections=i}static fromString(i){return new ko([new tc(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof ko?i:ko.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const l of this.sections){if(l.image){i.push(["image",l.image.name]);continue}i.push(l.text);const h={};l.fontStack&&(h["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(h["font-scale"]=l.scale),l.textColor&&(h["text-color"]=["rgba"].concat(l.textColor.toArray())),i.push(h)}return i}}class po{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new po({name:i,available:!1}):null}serialize(){return["image",this.name]}}function ey(s,i,l,h){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,i,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,i,l,h]:[s,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ih(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Qr||s instanceof Mh||s instanceof ko||s instanceof po)return!0;if(Array.isArray(s)){for(const i of s)if(!Ih(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!Ih(s[i]))return!1;return!0}return!1}function _i(s){if(s===null)return Vl;if(typeof s=="string")return jn;if(typeof s=="boolean")return Ln;if(typeof s=="number")return Ut;if(s instanceof Qr)return Ra;if(s instanceof Mh)return Qu;if(s instanceof ko)return $l;if(s instanceof po)return Hl;if(Array.isArray(s)){const i=s.length;let l;for(const h of s){const f=_i(h);if(l){if(l===f)continue;l=Pn;break}l=f}return ho(l||Pn,i)}return nl}function nc(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof Qr||s instanceof ko||s instanceof po?s.toString():JSON.stringify(s)}class Gp{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Ih(i[1]))return l.error("invalid value");const h=i[1];let f=_i(h);const y=l.expectedType;return f.kind!=="array"||f.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(f=y),new Gp(f,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Qr?["rgba"].concat(this.value.toArray()):this.value instanceof ko?this.value.serialize():this.value}}var rc=Gp,Ni=class{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}};const Ph={string:jn,number:Ut,boolean:Ln,object:nl};class Gl{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let h,f=1;const y=i[0];if(y==="array"){let E,A;if(i.length>2){const P=i[1];if(typeof P!="string"||!(P in Ph)||P==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);E=Ph[P],f++}else E=Pn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);A=i[2],f++}h=ho(E,A)}else h=Ph[y];const x=[];for(;f<i.length;f++){const E=l.parse(i[f],f,Pn);if(!E)return null;x.push(E)}return new Gl(h,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(i);if(!Co(this.type,_i(h)))return h;if(l===this.args.length-1)throw new Ni(`Expected value to be of type ${Er(this.type)}, but found ${Er(_i(h))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,l=[i.kind];if(i.kind==="array"){const h=i.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){l.push(h.kind);const f=i.N;(typeof f=="number"||this.args.length>1)&&l.push(f)}}return l.concat(this.args.map(h=>h.serialize()))}}var rs=Gl;class ic{constructor(i){this.type=$l,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const f=[];let y=!1;for(let x=1;x<=i.length-1;++x){const E=i[x];if(y&&typeof E=="object"&&!Array.isArray(E)){y=!1;let A=null;if(E["font-scale"]&&(A=l.parse(E["font-scale"],1,Ut),!A))return null;let P=null;if(E["text-font"]&&(P=l.parse(E["text-font"],1,ho(jn)),!P))return null;let V=null;if(E["text-color"]&&(V=l.parse(E["text-color"],1,Ra),!V))return null;const G=f[f.length-1];G.scale=A,G.font=P,G.textColor=V}else{const A=l.parse(i[x],1,Pn);if(!A)return null;const P=A.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,f.push({content:A,scale:null,font:null,textColor:null})}}return new ic(f)}evaluate(i){return new ko(this.sections.map(l=>{const h=l.content.evaluate(i);return _i(h)===Hl?new tc("",h,null,null,null):new tc(nc(h),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const l of this.sections){i.push(l.content.serialize());const h={};l.scale&&(h["font-scale"]=l.scale.serialize()),l.font&&(h["text-font"]=l.font.serialize()),l.textColor&&(h["text-color"]=l.textColor.serialize()),i.push(h)}return i}}class Dh{constructor(i){this.type=Hl,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const h=l.parse(i[1],1,jn);return h?new Dh(h):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),h=po.fromString(l);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(l)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const e1={"to-boolean":Ln,"to-color":Ra,"to-number":Ut,"to-string":jn};class qp{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const h=i[0];if((h==="to-boolean"||h==="to-string")&&i.length!==2)return l.error("Expected one argument.");const f=e1[h],y=[];for(let x=1;x<i.length;x++){const E=l.parse(i[x],x,Pn);if(!E)return null;y.push(E)}return new qp(f,y)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let l,h;for(const f of this.args){if(l=f.evaluate(i),h=null,l instanceof Qr)return l;if(typeof l=="string"){const y=i.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:ey(l[0],l[1],l[2],l[3]),!h))return new Qr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Ni(h||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const h of this.args){if(l=h.evaluate(i),l===null)return 0;const f=Number(l);if(!isNaN(f))return f}throw new Ni(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?ko.fromString(nc(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?po.fromString(nc(this.args[0].evaluate(i))):nc(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ic([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Dh(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(l=>{i.push(l.serialize())}),i}}var ql=qp;const ty=["Unknown","Point","LineString","Polygon"];var oc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ty[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:l,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*i-s[0])+this.featureDistanceData.bearing[1]*(h*i-s[1])}return 0}parseColor(s){let i=this._parseColorCache[s];return i||(i=this._parseColorCache[s]=Qr.parse(s)),i}};class Zl{constructor(i,l,h,f){this.name=i,this.type=l,this._evaluate=h,this.args=f}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,l){const h=i[0],f=Zl.definitions[h];if(!f)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,E=x.filter(([P])=>!Array.isArray(P)||P.length===i.length-1);let A=null;for(const[P,V]of E){A=new Qp(l.registry,l.path,null,l.scope);const G=[];let Z=!1;for(let Y=1;Y<i.length;Y++){const Q=i[Y],ne=Array.isArray(P)?P[Y-1]:P.type,he=A.parse(Q,1+G.length,ne);if(!he){Z=!0;break}G.push(he)}if(!Z)if(Array.isArray(P)&&P.length!==G.length)A.error(`Expected ${P.length} arguments, but found ${G.length} instead.`);else{for(let Y=0;Y<G.length;Y++){const Q=Array.isArray(P)?P[Y]:P.type,ne=G[Y];A.concat(Y+1).checkSubtype(Q,ne.type)}if(A.errors.length===0)return new Zl(h,y,V,G)}}if(E.length===1)l.errors.push(...A.errors);else{const P=(E.length?E:x).map(([G])=>{return Z=G,Array.isArray(Z)?`(${Z.map(Er).join(", ")})`:`(${Er(Z.type)}...)`;var Z}).join(" | "),V=[];for(let G=1;G<i.length;G++){const Z=l.parse(i[G],1+V.length);if(!Z)return null;V.push(Er(Z.type))}l.error(`Expected arguments of type ${P}, but found (${V.join(", ")}) instead.`)}return null}static register(i,l){Zl.definitions=l;for(const h in l)i[h]=Zl}}var ks=Zl;class Rh{constructor(i,l,h){this.type=Qu,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const f=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ln);if(!f)return null;const y=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ln);if(!y)return null;let x=null;return h.locale&&(x=l.parse(h.locale,1,jn),!x)?null:new Rh(f,y,x)}evaluate(i){return new Mh(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const Ts=8192;function Yo(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function ac(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function ny(s,i){const l=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,f=Math.pow(2,i.z);return[Math.round(l*f*Ts),Math.round(h*f*Ts)]}function ry(s,i,l){const h=s[0]-i[0],f=s[1]-i[1],y=s[0]-l[0],x=s[1]-l[1];return h*x-y*f==0&&h*y<=0&&f*x<=0}function Lh(s,i){let l=!1;for(let x=0,E=i.length;x<E;x++){const A=i[x];for(let P=0,V=A.length;P<V-1;P++){if(ry(s,A[P],A[P+1]))return!1;(f=A[P])[1]>(h=s)[1]!=(y=A[P+1])[1]>h[1]&&h[0]<(y[0]-f[0])*(h[1]-f[1])/(y[1]-f[1])+f[0]&&(l=!l)}}var h,f,y;return l}function iy(s,i){for(let l=0;l<i.length;l++)if(Lh(s,i[l]))return!0;return!1}function Zp(s,i,l,h){const f=h[0]-l[0],y=h[1]-l[1],x=(s[0]-l[0])*y-f*(s[1]-l[1]),E=(i[0]-l[0])*y-f*(i[1]-l[1]);return x>0&&E<0||x<0&&E>0}function Xp(s,i,l){for(const P of l)for(let V=0;V<P.length-1;++V)if((E=[(x=P[V+1])[0]-(y=P[V])[0],x[1]-y[1]])[0]*(A=[(f=i)[0]-(h=s)[0],f[1]-h[1]])[1]-E[1]*A[0]!=0&&Zp(h,f,y,x)&&Zp(y,x,h,f))return!0;var h,f,y,x,E,A;return!1}function Xl(s,i){for(let l=0;l<s.length;++l)if(!Lh(s[l],i))return!1;for(let l=0;l<s.length-1;++l)if(Xp(s[l],s[l+1],i))return!1;return!0}function oy(s,i){for(let l=0;l<i.length;l++)if(Xl(s,i[l]))return!0;return!1}function Oh(s,i,l){const h=[];for(let f=0;f<s.length;f++){const y=[];for(let x=0;x<s[f].length;x++){const E=ny(s[f][x],l);Yo(i,E),y.push(E)}h.push(y)}return h}function zh(s,i,l){const h=[];for(let f=0;f<s.length;f++){const y=Oh(s[f],i,l);h.push(y)}return h}function Kp(s,i,l,h){if(s[0]<l[0]||s[0]>l[2]){const f=.5*h;let y=s[0]-l[0]>f?-h:l[0]-s[0]>f?h:0;y===0&&(y=s[0]-l[2]>f?-h:l[2]-s[0]>f?h:0),s[0]+=y}Yo(i,s)}function ol(s,i,l,h){const f=Math.pow(2,h.z)*Ts,y=[h.x*Ts,h.y*Ts],x=[];if(!s)return x;for(const E of s)for(const A of E){const P=[A.x+y[0],A.y+y[1]];Kp(P,i,l,f),x.push(P)}return x}function tr(s,i,l,h){const f=Math.pow(2,h.z)*Ts,y=[h.x*Ts,h.y*Ts],x=[];if(!s)return x;for(const A of s){const P=[];for(const V of A){const G=[V.x+y[0],V.y+y[1]];Yo(i,G),P.push(G)}x.push(P)}if(i[2]-i[0]<=f/2){(E=i)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const A of x)for(const P of A)Kp(P,i,l,f)}var E;return x}class sc{constructor(i,l){this.type=Ln,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Ih(i[1])){const h=i[1];if(h.type==="FeatureCollection")for(let f=0;f<h.features.length;++f){const y=h.features[f].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new sc(h,h.features[f].geometry)}else if(h.type==="Feature"){const f=h.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new sc(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new sc(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,h){const f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(h.type==="Polygon"){const E=Oh(h.coordinates,y,x),A=ol(l.geometry(),f,y,x);if(!ac(f,y))return!1;for(const P of A)if(!Lh(P,E))return!1}if(h.type==="MultiPolygon"){const E=zh(h.coordinates,y,x),A=ol(l.geometry(),f,y,x);if(!ac(f,y))return!1;for(const P of A)if(!iy(P,E))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,h){const f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(h.type==="Polygon"){const E=Oh(h.coordinates,y,x),A=tr(l.geometry(),f,y,x);if(!ac(f,y))return!1;for(const P of A)if(!Xl(P,E))return!1}if(h.type==="MultiPolygon"){const E=zh(h.coordinates,y,x),A=tr(l.geometry(),f,y,x);if(!ac(f,y))return!1;for(const P of A)if(!oy(P,E))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Yp=sc;function lc(s){if(s instanceof ks&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Yp)return!1;let i=!0;return s.eachChild(l=>{i&&!lc(l)&&(i=!1)}),i}function uc(s){if(s instanceof ks&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(l=>{i&&!uc(l)&&(i=!1)}),i}function Bh(s,i){if(s instanceof ks&&i.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(h=>{l&&!Bh(h,i)&&(l=!1)}),l}class Fh{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=i[1];return l.scope.has(h)?new Fh(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Jp=Fh;class Nh{constructor(i,l=[],h,f=new Jg,y=[]){this.registry=i,this.path=l,this.key=l.map(x=>`[${x}]`).join(""),this.scope=f,this.errors=y,this.expectedType=h}parse(i,l,h,f,y={}){return l?this.concat(l,h,f)._parse(i,y):this._parse(i,y)}_parse(i,l){function h(f,y,x){return x==="assert"?new rs(y,[f]):x==="coerce"?new ql(y,[f]):f}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=i[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[f];if(y){let x=y.parse(i,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,A=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||A.kind!=="value")if(E.kind!=="color"&&E.kind!=="formatted"&&E.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(this.checkSubtype(E,A))return null}else x=h(x,E,l.typeAnnotation||"coerce");else x=h(x,E,l.typeAnnotation||"assert")}if(!(x instanceof rc)&&x.type.kind!=="resolvedImage"&&As(x)){const E=new oc;try{x=new rc(x.type,x.evaluate(E))}catch(A){return this.error(A.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,h){const f=typeof i=="number"?this.path.concat(i):this.path,y=h?this.scope.concat(h):this.scope;return new Nh(this.registry,f,l||null,y,this.errors)}error(i,...l){const h=`${this.key}${l.map(f=>`[${f}]`).join("")}`;this.errors.push(new Da(h,i))}checkSubtype(i,l){const h=Co(i,l);return h&&this.error(h),h}}var Qp=Nh;function As(s){if(s instanceof Jp)return As(s.boundExpression);if(s instanceof ks&&s.name==="error"||s instanceof Rh||s instanceof Yp)return!1;const i=s instanceof ql||s instanceof rs;let l=!0;return s.eachChild(h=>{l=i?l&&As(h):l&&h instanceof rc}),!!l&&lc(s)&&Bh(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function al(s,i){const l=s.length-1;let h,f,y=0,x=l,E=0;for(;y<=x;)if(E=Math.floor((y+x)/2),h=s[E],f=s[E+1],h<=i){if(E===l||i<f)return E;y=E+1}else{if(!(h>i))throw new Ni("Input is not a number.");x=E-1}return 0}class Uh{constructor(i,l,h){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[f,y]of h)this.labels.push(f),this.outputs.push(y)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(i[1],1,Ut);if(!h)return null;const f=[];let y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let x=1;x<i.length;x+=2){const E=x===1?-1/0:i[x],A=i[x+1],P=x,V=x+1;if(typeof E!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(f.length&&f[f.length-1][0]>=E)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const G=l.parse(A,V,y);if(!G)return null;y=y||G.type,f.push([E,G])}return new Uh(y,h,f)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const f=this.input.evaluate(i);if(f<=l[0])return h[0].evaluate(i);const y=l.length;return f>=l[y-1]?h[y-1].evaluate(i):h[al(l,f)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&i.push(this.labels[l]),i.push(this.outputs[l].serialize());return i}}var ef=Uh;function Hn(s,i,l){return s*(1-l)+i*l}var cc=Object.freeze({__proto__:null,number:Hn,color:function(s,i,l){return new Qr(Hn(s.r,i.r,l),Hn(s.g,i.g,l),Hn(s.b,i.b,l),Hn(s.a,i.a,l))},array:function(s,i,l){return s.map((h,f)=>Hn(h,i[f],l))}});const ay=.95047,sy=1.08883,tf=4/29,nf=6/29,rf=3*nf*nf,ly=Math.PI/180,t1=180/Math.PI;function jh(s){return s>.008856451679035631?Math.pow(s,1/3):s/rf+tf}function of(s){return s>nf?s*s*s:rf*(s-tf)}function Vh(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function $h(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function uy(s){const i=$h(s.r),l=$h(s.g),h=$h(s.b),f=jh((.4124564*i+.3575761*l+.1804375*h)/ay),y=jh((.2126729*i+.7151522*l+.072175*h)/1);return{l:116*y-16,a:500*(f-y),b:200*(y-jh((.0193339*i+.119192*l+.9503041*h)/sy)),alpha:s.a}}function cy(s){let i=(s.l+16)/116,l=isNaN(s.a)?i:i+s.a/500,h=isNaN(s.b)?i:i-s.b/200;return i=1*of(i),l=ay*of(l),h=sy*of(h),new Qr(Vh(3.2404542*l-1.5371385*i-.4985314*h),Vh(-.969266*l+1.8760108*i+.041556*h),Vh(.0556434*l-.2040259*i+1.0572252*h),s.alpha)}function n1(s,i,l){const h=i-s;return s+l*(h>180||h<-180?h-360*Math.round(h/360):h)}const hc={forward:uy,reverse:cy,interpolate:function(s,i,l){return{l:Hn(s.l,i.l,l),a:Hn(s.a,i.a,l),b:Hn(s.b,i.b,l),alpha:Hn(s.alpha,i.alpha,l)}}},dc={forward:function(s){const{l:i,a:l,b:h}=uy(s),f=Math.atan2(h,l)*t1;return{h:f<0?f+360:f,c:Math.sqrt(l*l+h*h),l:i,alpha:s.a}},reverse:function(s){const i=s.h*ly,l=s.c;return cy({l:s.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:s.alpha})},interpolate:function(s,i,l){return{h:n1(s.h,i.h,l),c:Hn(s.c,i.c,l),l:Hn(s.l,i.l,l),alpha:Hn(s.alpha,i.alpha,l)}}};var hy=Object.freeze({__proto__:null,lab:hc,hcl:dc});class pc{constructor(i,l,h,f,y){this.type=i,this.operator=l,this.interpolation=h,this.input=f,this.labels=[],this.outputs=[];for(const[x,E]of y)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(i,l,h,f){let y=0;if(i.name==="exponential")y=af(l,i.base,h,f);else if(i.name==="linear")y=af(l,1,h,f);else if(i.name==="cubic-bezier"){const x=i.controlPoints;y=new z(x[0],x[1],x[2],x[3]).solve(af(l,1,h,f))}return y}static parse(i,l){let[h,f,y,...x]=i;if(!Array.isArray(f)||f.length===0)return l.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const P=f[1];if(typeof P!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:P}}else{if(f[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const P=f.slice(1);if(P.length!==4||P.some(V=>typeof V!="number"||V<0||V>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:P}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,Ut),!y)return null;const E=[];let A=null;h==="interpolate-hcl"||h==="interpolate-lab"?A=Ra:l.expectedType&&l.expectedType.kind!=="value"&&(A=l.expectedType);for(let P=0;P<x.length;P+=2){const V=x[P],G=x[P+1],Z=P+3,Y=P+4;if(typeof V!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(E.length&&E[E.length-1][0]>=V)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const Q=l.parse(G,Y,A);if(!Q)return null;A=A||Q.type,E.push([V,Q])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new pc(A,h,f,y,E):l.error(`Type ${Er(A)} is not interpolatable.`)}evaluate(i){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(i);const f=this.input.evaluate(i);if(f<=l[0])return h[0].evaluate(i);const y=l.length;if(f>=l[y-1])return h[y-1].evaluate(i);const x=al(l,f),E=pc.interpolationFactor(this.interpolation,f,l[x],l[x+1]),A=h[x].evaluate(i),P=h[x+1].evaluate(i);return this.operator==="interpolate"?cc[this.type.kind.toLowerCase()](A,P,E):this.operator==="interpolate-hcl"?dc.reverse(dc.interpolate(dc.forward(A),dc.forward(P),E)):hc.reverse(hc.interpolate(hc.forward(A),hc.forward(P),E))}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,i,this.input.serialize()];for(let h=0;h<this.labels.length;h++)l.push(this.labels[h],this.outputs[h].serialize());return l}}function af(s,i,l,h){const f=h-l,y=s-l;return f===0?0:i===1?y/f:(Math.pow(i,y)-1)/(Math.pow(i,f)-1)}var La=pc;class sf{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expectected at least one argument.");let h=null;const f=l.expectedType;f&&f.kind!=="value"&&(h=f);const y=[];for(const E of i.slice(1)){const A=l.parse(E,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!A)return null;h=h||A.type,y.push(A)}const x=f&&y.some(E=>Co(f,E.type));return new sf(x?Pn:h,y)}evaluate(i){let l,h=null,f=0;for(const y of this.args){if(f++,h=y.evaluate(i),h&&h instanceof po&&!h.available&&(l||(l=h),h=null,f===this.args.length))return l;if(h!==null)break}return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var dy=sf;class Hh{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let y=1;y<i.length-1;y+=2){const x=i[y];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);const E=l.parse(i[y+1],y+1);if(!E)return null;h.push([x,E])}const f=l.parse(i[i.length-1],i.length-1,l.expectedType,h);return f?new Hh(h,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[l,h]of this.bindings)i.push(l,h.serialize());return i.push(this.result.serialize()),i}}var lf=Hh;class Wh{constructor(i,l,h){this.type=i,this.index=l,this.input=h}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Ut),f=l.parse(i[2],2,ho(l.expectedType||Pn));return h&&f?new Wh(f.type.itemType,h,f):null}evaluate(i){const l=this.index.evaluate(i),h=this.input.evaluate(i);if(l<0)throw new Ni(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new Ni(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new Ni(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var r1=Wh;class uf{constructor(i,l){this.type=Ln,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Pn),f=l.parse(i[2],2,Pn);return h&&f?$p(h.type,[Ln,jn,Ut,Vl,Pn])?new uf(h,f):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Er(h.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(h==null)return!1;if(!rl(l,["boolean","string","number","null"]))throw new Ni(`Expected first argument to be of type boolean, string, number or null, but found ${Er(_i(l))} instead.`);if(!rl(h,["string","array"]))throw new Ni(`Expected second argument to be of type array or string, but found ${Er(_i(h))} instead.`);return h.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var py=uf;class fc{constructor(i,l,h){this.type=Ut,this.needle=i,this.haystack=l,this.fromIndex=h}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Pn),f=l.parse(i[2],2,Pn);if(!h||!f)return null;if(!$p(h.type,[Ln,jn,Ut,Vl,Pn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Er(h.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Ut);return y?new fc(h,f,y):null}return new fc(h,f)}evaluate(i){const l=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!rl(l,["boolean","string","number","null"]))throw new Ni(`Expected first argument to be of type boolean, string, number or null, but found ${Er(_i(l))} instead.`);if(!rl(h,["string","array"]))throw new Ni(`Expected second argument to be of type array or string, but found ${Er(_i(h))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(i);return h.indexOf(l,f)}return h.indexOf(l)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var fy=fc;class cf{constructor(i,l,h,f,y,x){this.inputType=i,this.type=l,this.input=h,this.cases=f,this.outputs=y,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let h,f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const y={},x=[];for(let P=2;P<i.length-1;P+=2){let V=i[P];const G=i[P+1];Array.isArray(V)||(V=[V]);const Z=l.concat(P);if(V.length===0)return Z.error("Expected at least one branch label.");for(const Q of V){if(typeof Q!="number"&&typeof Q!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Z.error("Numeric branch labels must be integer values.");if(h){if(Z.checkSubtype(h,_i(Q)))return null}else h=_i(Q);if(y[String(Q)]!==void 0)return Z.error("Branch labels must be unique.");y[String(Q)]=x.length}const Y=l.parse(G,P,f);if(!Y)return null;f=f||Y.type,x.push(Y)}const E=l.parse(i[1],1,Pn);if(!E)return null;const A=l.parse(i[i.length-1],i.length-1,f);return A?E.type.kind!=="value"&&l.concat(1).checkSubtype(h,E.type)?null:new cf(h,f,E,y,x,A):null}evaluate(i){const l=this.input.evaluate(i);return(_i(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),h=[],f={};for(const x of l){const E=f[this.cases[x]];E===void 0?(f[this.cases[x]]=h.length,h.push([this.cases[x],[x]])):h[E][1].push(x)}const y=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,E]of h)i.push(E.length===1?y(E[0]):E.map(y)),i.push(this.outputs[x].serialize());return i.push(this.otherwise.serialize()),i}}var i1=cf;class hf{constructor(i,l,h){this.type=i,this.branches=l,this.otherwise=h}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const f=[];for(let x=1;x<i.length-1;x+=2){const E=l.parse(i[x],x,Ln);if(!E)return null;const A=l.parse(i[x+1],x+1,h);if(!A)return null;f.push([E,A]),h=h||A.type}const y=l.parse(i[i.length-1],i.length-1,h);return y?new hf(h,f,y):null}evaluate(i){for(const[l,h]of this.branches)if(l.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,h]of this.branches)i(l),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var o1=hf;class sl{constructor(i,l,h,f){this.type=i,this.input=l,this.beginIndex=h,this.endIndex=f}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=l.parse(i[1],1,Pn),f=l.parse(i[2],2,Ut);if(!h||!f)return null;if(!$p(h.type,[ho(Pn),jn,Pn]))return l.error(`Expected first argument to be of type array or string, but found ${Er(h.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Ut);return y?new sl(h.type,h,f,y):null}return new sl(h.type,h,f)}evaluate(i){const l=this.input.evaluate(i),h=this.beginIndex.evaluate(i);if(!rl(l,["string","array"]))throw new Ni(`Expected first argument to be of type array or string, but found ${Er(_i(l))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(i);return l.slice(h,f)}return l.slice(h)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var my=sl;function df(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function gy(s,i,l,h){return h.compare(i,l)===0}function Kl(s,i,l){const h=s!=="=="&&s!=="!=";return class Zz{constructor(y,x,E){this.type=Ln,this.lhs=y,this.rhs=x,this.collator=E,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const E=y[0];let A=x.parse(y[1],1,Pn);if(!A)return null;if(!df(E,A.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${Er(A.type)}'.`);let P=x.parse(y[2],2,Pn);if(!P)return null;if(!df(E,P.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${Er(P.type)}'.`);if(A.type.kind!==P.type.kind&&A.type.kind!=="value"&&P.type.kind!=="value")return x.error(`Cannot compare types '${Er(A.type)}' and '${Er(P.type)}'.`);h&&(A.type.kind==="value"&&P.type.kind!=="value"?A=new rs(P.type,[A]):A.type.kind!=="value"&&P.type.kind==="value"&&(P=new rs(A.type,[P])));let V=null;if(y.length===4){if(A.type.kind!=="string"&&P.type.kind!=="string"&&A.type.kind!=="value"&&P.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(V=x.parse(y[3],3,Qu),!V)return null}return new Zz(A,P,V)}evaluate(y){const x=this.lhs.evaluate(y),E=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){const A=_i(x),P=_i(E);if(A.kind!==P.kind||A.kind!=="string"&&A.kind!=="number")throw new Ni(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${A.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const A=_i(x),P=_i(E);if(A.kind!=="string"||P.kind!=="string")return i(y,x,E)}return this.collator?l(y,x,E,this.collator.evaluate(y)):i(y,x,E)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[s];return this.eachChild(x=>{y.push(x.serialize())}),y}}}const a1=Kl("==",function(s,i,l){return i===l},gy),yy=Kl("!=",function(s,i,l){return i!==l},function(s,i,l,h){return!gy(0,i,l,h)}),vy=Kl("<",function(s,i,l){return i<l},function(s,i,l,h){return h.compare(i,l)<0}),_y=Kl(">",function(s,i,l){return i>l},function(s,i,l,h){return h.compare(i,l)>0}),pf=Kl("<=",function(s,i,l){return i<=l},function(s,i,l,h){return h.compare(i,l)<=0}),s1=Kl(">=",function(s,i,l){return i>=l},function(s,i,l,h){return h.compare(i,l)>=0});class ff{constructor(i,l,h,f,y,x){this.type=jn,this.number=i,this.locale=l,this.currency=h,this.unit=f,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const h=l.parse(i[1],1,Ut);if(!h)return null;const f=i[2];if(typeof f!="object"||Array.isArray(f))return l.error("NumberFormat options argument must be an object.");let y=null;if(f.locale&&(y=l.parse(f.locale,1,jn),!y))return null;let x=null;if(f.currency&&(x=l.parse(f.currency,1,jn),!x))return null;let E=null;if(f.unit&&(E=l.parse(f.unit,1,jn),!E))return null;let A=null;if(f["min-fraction-digits"]&&(A=l.parse(f["min-fraction-digits"],1,Ut),!A))return null;let P=null;return f["max-fraction-digits"]&&(P=l.parse(f["max-fraction-digits"],1,Ut),!P)?null:new ff(h,y,x,E,A,P)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class mf{constructor(i){this.type=Ut,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=l.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Er(h.type)} instead.`):new mf(h):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Ni(`Expected value to be of type string or array, but found ${Er(_i(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(l=>{i.push(l.serialize())}),i}}const xy={"==":a1,"!=":yy,">":_y,"<":vy,">=":s1,"<=":pf,array:rs,at:r1,boolean:rs,case:o1,coalesce:dy,collator:Rh,format:ic,image:Dh,in:py,"index-of":fy,interpolate:La,"interpolate-hcl":La,"interpolate-lab":La,length:mf,let:lf,literal:rc,match:i1,number:rs,"number-format":ff,object:rs,slice:my,step:ef,string:rs,"to-boolean":ql,"to-color":ql,"to-number":ql,"to-string":ql,var:Jp,within:Yp};function by(s,[i,l,h,f]){i=i.evaluate(s),l=l.evaluate(s),h=h.evaluate(s);const y=f?f.evaluate(s):1,x=ey(i,l,h,y);if(x)throw new Ni(x);return new Qr(i/255*y,l/255*y,h/255*y,y)}function wy(s,i){return s in i}function gf(s,i){const l=i[s];return l===void 0?null:l}function Ms(s){return{type:s}}ks.register(xy,{error:[{kind:"error"},[jn],(s,[i])=>{throw new Ni(i.evaluate(s))}],typeof:[jn,[Pn],(s,[i])=>Er(_i(i.evaluate(s)))],"to-rgba":[ho(Ut,4),[Ra],(s,[i])=>i.evaluate(s).toArray()],rgb:[Ra,[Ut,Ut,Ut],by],rgba:[Ra,[Ut,Ut,Ut,Ut],by],has:{type:Ln,overloads:[[[jn],(s,[i])=>wy(i.evaluate(s),s.properties())],[[jn,nl],(s,[i,l])=>wy(i.evaluate(s),l.evaluate(s))]]},get:{type:Pn,overloads:[[[jn],(s,[i])=>gf(i.evaluate(s),s.properties())],[[jn,nl],(s,[i,l])=>gf(i.evaluate(s),l.evaluate(s))]]},"feature-state":[Pn,[jn],(s,[i])=>gf(i.evaluate(s),s.featureState||{})],properties:[nl,[],s=>s.properties()],"geometry-type":[jn,[],s=>s.geometryType()],id:[Pn,[],s=>s.id()],zoom:[Ut,[],s=>s.globals.zoom],pitch:[Ut,[],s=>s.globals.pitch||0],"distance-from-center":[Ut,[],s=>s.distanceFromCenter()],"heatmap-density":[Ut,[],s=>s.globals.heatmapDensity||0],"line-progress":[Ut,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[Ut,[],s=>s.globals.skyRadialProgress||0],accumulated:[Pn,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ut,Ms(Ut),(s,i)=>{let l=0;for(const h of i)l+=h.evaluate(s);return l}],"*":[Ut,Ms(Ut),(s,i)=>{let l=1;for(const h of i)l*=h.evaluate(s);return l}],"-":{type:Ut,overloads:[[[Ut,Ut],(s,[i,l])=>i.evaluate(s)-l.evaluate(s)],[[Ut],(s,[i])=>-i.evaluate(s)]]},"/":[Ut,[Ut,Ut],(s,[i,l])=>i.evaluate(s)/l.evaluate(s)],"%":[Ut,[Ut,Ut],(s,[i,l])=>i.evaluate(s)%l.evaluate(s)],ln2:[Ut,[],()=>Math.LN2],pi:[Ut,[],()=>Math.PI],e:[Ut,[],()=>Math.E],"^":[Ut,[Ut,Ut],(s,[i,l])=>Math.pow(i.evaluate(s),l.evaluate(s))],sqrt:[Ut,[Ut],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Ut,[Ut],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Ut,[Ut],(s,[i])=>Math.log(i.evaluate(s))],log2:[Ut,[Ut],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Ut,[Ut],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Ut,[Ut],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Ut,[Ut],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Ut,[Ut],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Ut,[Ut],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Ut,[Ut],(s,[i])=>Math.atan(i.evaluate(s))],min:[Ut,Ms(Ut),(s,i)=>Math.min(...i.map(l=>l.evaluate(s)))],max:[Ut,Ms(Ut),(s,i)=>Math.max(...i.map(l=>l.evaluate(s)))],abs:[Ut,[Ut],(s,[i])=>Math.abs(i.evaluate(s))],round:[Ut,[Ut],(s,[i])=>{const l=i.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ut,[Ut],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Ut,[Ut],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[Ln,[jn,Pn],(s,[i,l])=>s.properties()[i.value]===l.value],"filter-id-==":[Ln,[Pn],(s,[i])=>s.id()===i.value],"filter-type-==":[Ln,[jn],(s,[i])=>s.geometryType()===i.value],"filter-<":[Ln,[jn,Pn],(s,[i,l])=>{const h=s.properties()[i.value],f=l.value;return typeof h==typeof f&&h<f}],"filter-id-<":[Ln,[Pn],(s,[i])=>{const l=s.id(),h=i.value;return typeof l==typeof h&&l<h}],"filter->":[Ln,[jn,Pn],(s,[i,l])=>{const h=s.properties()[i.value],f=l.value;return typeof h==typeof f&&h>f}],"filter-id->":[Ln,[Pn],(s,[i])=>{const l=s.id(),h=i.value;return typeof l==typeof h&&l>h}],"filter-<=":[Ln,[jn,Pn],(s,[i,l])=>{const h=s.properties()[i.value],f=l.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[Ln,[Pn],(s,[i])=>{const l=s.id(),h=i.value;return typeof l==typeof h&&l<=h}],"filter->=":[Ln,[jn,Pn],(s,[i,l])=>{const h=s.properties()[i.value],f=l.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[Ln,[Pn],(s,[i])=>{const l=s.id(),h=i.value;return typeof l==typeof h&&l>=h}],"filter-has":[Ln,[Pn],(s,[i])=>i.value in s.properties()],"filter-has-id":[Ln,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Ln,[ho(jn)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[Ln,[ho(Pn)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[Ln,[jn,ho(Pn)],(s,[i,l])=>l.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[Ln,[jn,ho(Pn)],(s,[i,l])=>function(h,f,y,x){for(;y<=x;){const E=y+x>>1;if(f[E]===h)return!0;f[E]>h?x=E-1:y=E+1}return!1}(s.properties()[i.value],l.value,0,l.value.length-1)],all:{type:Ln,overloads:[[[Ln,Ln],(s,[i,l])=>i.evaluate(s)&&l.evaluate(s)],[Ms(Ln),(s,i)=>{for(const l of i)if(!l.evaluate(s))return!1;return!0}]]},any:{type:Ln,overloads:[[[Ln,Ln],(s,[i,l])=>i.evaluate(s)||l.evaluate(s)],[Ms(Ln),(s,i)=>{for(const l of i)if(l.evaluate(s))return!0;return!1}]]},"!":[Ln,[Ln],(s,[i])=>!i.evaluate(s)],"is-supported-script":[Ln,[jn],(s,[i])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(i.evaluate(s))}],upcase:[jn,[jn],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[jn,[jn],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[jn,Ms(Pn),(s,i)=>i.map(l=>nc(l.evaluate(s))).join("")],"resolved-locale":[jn,[Qu],(s,[i])=>i.evaluate(s).resolvedLocale()]});var Yl=xy;function mc(s){return{result:"success",value:s}}function Jl(s){return{result:"error",value:s}}function Ql(s){return s["property-type"]==="data-driven"}function is(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Gh(s){return!!s.expression&&s.expression.interpolated}function $n(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function qh(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function l1(s){return s}function yf(s,i){const l=i.type==="color",h=s.stops&&typeof s.stops[0][0]=="object",f=h||!(h||s.property!==void 0),y=s.type||(Gh(i)?"exponential":"interval");if(l&&((s=ns({},s)).stops&&(s.stops=s.stops.map(P=>[P[0],Qr.parse(P[1])])),s.default=Qr.parse(s.default?s.default:i.default)),s.colorSpace&&s.colorSpace!=="rgb"&&!hy[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let x,E,A;if(y==="exponential")x=Zh;else if(y==="interval")x=Ey;else if(y==="categorical"){x=vf,E=Object.create(null);for(const P of s.stops)E[P[0]]=P[1];A=typeof s.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);x=Cy}if(h){const P={},V=[];for(let Y=0;Y<s.stops.length;Y++){const Q=s.stops[Y],ne=Q[0].zoom;P[ne]===void 0&&(P[ne]={zoom:ne,type:s.type,property:s.property,default:s.default,stops:[]},V.push(ne)),P[ne].stops.push([Q[0].value,Q[1]])}const G=[];for(const Y of V)G.push([P[Y].zoom,yf(P[Y],i)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:La.interpolationFactor.bind(void 0,Z),zoomStops:G.map(Y=>Y[0]),evaluate:({zoom:Y},Q)=>Zh({stops:G,base:s.base},i,Y).evaluate(Y,Q)}}if(f){const P=y==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:La.interpolationFactor.bind(void 0,P),zoomStops:s.stops.map(V=>V[0]),evaluate:({zoom:V})=>x(s,i,V,E,A)}}return{kind:"source",evaluate(P,V){const G=V&&V.properties?V.properties[s.property]:void 0;return G===void 0?gc(s.default,i.default):x(s,i,G,E,A)}}}function gc(s,i,l){return s!==void 0?s:i!==void 0?i:l!==void 0?l:void 0}function vf(s,i,l,h,f){return gc(typeof l===f?h[l]:void 0,s.default,i.default)}function Ey(s,i,l){if($n(l)!=="number")return gc(s.default,i.default);const h=s.stops.length;if(h===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[h-1][0])return s.stops[h-1][1];const f=al(s.stops.map(y=>y[0]),l);return s.stops[f][1]}function Zh(s,i,l){const h=s.base!==void 0?s.base:1;if($n(l)!=="number")return gc(s.default,i.default);const f=s.stops.length;if(f===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[f-1][0])return s.stops[f-1][1];const y=al(s.stops.map(V=>V[0]),l),x=function(V,G,Z,Y){const Q=Y-Z,ne=V-Z;return Q===0?0:G===1?ne/Q:(Math.pow(G,ne)-1)/(Math.pow(G,Q)-1)}(l,h,s.stops[y][0],s.stops[y+1][0]),E=s.stops[y][1],A=s.stops[y+1][1];let P=cc[i.type]||l1;if(s.colorSpace&&s.colorSpace!=="rgb"){const V=hy[s.colorSpace];P=(G,Z)=>V.reverse(V.interpolate(V.forward(G),V.forward(Z),x))}return typeof E.evaluate=="function"?{evaluate(...V){const G=E.evaluate.apply(void 0,V),Z=A.evaluate.apply(void 0,V);if(G!==void 0&&Z!==void 0)return P(G,Z,x)}}:P(E,A,x)}function Cy(s,i,l){return i.type==="color"?l=Qr.parse(l):i.type==="formatted"?l=ko.fromString(l.toString()):i.type==="resolvedImage"?l=po.fromString(l.toString()):$n(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),gc(l,s.default,i.default)}class Xh{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new oc,this._defaultValue=l?function(h){return h.type==="color"&&(qh(h.default)||Array.isArray(h.default))?new Qr(0,0,0,0):h.type==="color"?Qr.parse(h.default)||null:h.default===void 0?null:h.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,h,f,y,x,E,A){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=f||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=A||null,this.expression.evaluate(this._evaluator)}evaluate(i,l,h,f,y,x,E,A){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=f||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=E||null,this._evaluator.featureDistanceData=A||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new Ni(`Expected value to be one of ${Object.keys(this._enumValues).map(V=>JSON.stringify(V)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console!="undefined"&&console.warn(P.message)),this._defaultValue}}}function eu(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Yl}function tu(s,i){const l=new Qp(Yl,[],i?function(f){const y={color:Ra,string:jn,number:Ut,enum:jn,boolean:Ln,formatted:$l,resolvedImage:Hl};return f.type==="array"?ho(y[f.value]||Pn,f.length):y[f.type]}(i):void 0),h=l.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?mc(new Xh(h,i)):Jl(l.errors)}class Kh{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!uc(l.expression)}evaluateWithoutErrorHandling(i,l,h,f,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,f,y,x)}evaluate(i,l,h,f,y,x){return this._styleExpression.evaluate(i,l,h,f,y,x)}}class ll{constructor(i,l,h,f){this.kind=i,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!uc(l.expression),this.interpolationType=f}evaluateWithoutErrorHandling(i,l,h,f,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,h,f,y,x)}evaluate(i,l,h,f,y,x){return this._styleExpression.evaluate(i,l,h,f,y,x)}interpolationFactor(i,l,h){return this.interpolationType?La.interpolationFactor(this.interpolationType,i,l,h):0}}function ul(s,i){if((s=tu(s,i)).result==="error")return s;const l=s.value.expression,h=lc(l);if(!h&&!Ql(i))return Jl([new Da("","data expressions not supported")]);const f=Bh(l,["zoom","pitch","distance-from-center"]);if(!f&&!is(i))return Jl([new Da("","zoom expressions not supported")]);const y=vc(l);return y||f?y instanceof Da?Jl([y]):y instanceof La&&!Gh(i)?Jl([new Da("",'"interpolate" expressions cannot be used with this property')]):mc(y?new ll(h?"camera":"composite",s.value,y.labels,y instanceof La?y.interpolation:void 0):new Kh(h?"constant":"source",s.value)):Jl([new Da("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class yc{constructor(i,l){this._parameters=i,this._specification=l,ns(this,yf(this._parameters,this._specification))}static deserialize(i){return new yc(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function vc(s){let i=null;if(s instanceof lf)i=vc(s.result);else if(s instanceof dy){for(const l of s.args)if(i=vc(l),i)break}else(s instanceof ef||s instanceof La)&&s.input instanceof ks&&s.input.name==="zoom"&&(i=s);return i instanceof Da||s.eachChild(l=>{const h=vc(l);h instanceof Da?i=h:!i&&h?i=new Da("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&h&&i!==h&&(i=new Da("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Zt{constructor(i,l,h,f){this.message=(i?`${i}: `:"")+h,f&&(this.identifier=f),l!=null&&l.__line__&&(this.line=l.__line__)}}function Jo(s){const i=s.key,l=s.value,h=s.valueSpec||{},f=s.objectElementValidators||{},y=s.style,x=s.styleSpec;let E=[];const A=$n(l);if(A!=="object")return[new Zt(i,l,`object expected, ${A} found`)];for(const P in l){const V=P.split(".")[0],G=h[V]||h["*"];let Z;f[V]?Z=f[V]:h[V]?Z=Ki:f["*"]?Z=f["*"]:h["*"]&&(Z=Ki),Z?E=E.concat(Z({key:(i&&`${i}.`)+P,value:l[P],valueSpec:G,style:y,styleSpec:x,object:l,objectKey:P},l)):E.push(new Zt(i,l[P],`unknown property "${P}"`))}for(const P in h)f[P]||h[P].required&&h[P].default===void 0&&l[P]===void 0&&E.push(new Zt(i,l,`missing required property "${P}"`));return E}function Sy(s){const i=s.value,l=s.valueSpec,h=s.style,f=s.styleSpec,y=s.key,x=s.arrayElementValidator||Ki;if($n(i)!=="array")return[new Zt(y,i,`array expected, ${$n(i)} found`)];if(l.length&&i.length!==l.length)return[new Zt(y,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new Zt(y,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let E={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};f.$version<7&&(E.function=l.function),$n(l.value)==="object"&&(E=l.value);let A=[];for(let P=0;P<i.length;P++)A=A.concat(x({array:i,arrayIndex:P,value:i[P],valueSpec:E,style:h,styleSpec:f,key:`${y}[${P}]`}));return A}function _f(s){const i=s.key,l=s.value,h=s.valueSpec;let f=$n(l);if(f==="number"&&l!=l&&(f="NaN"),f!=="number")return[new Zt(i,l,`number expected, ${f} found`)];if("minimum"in h){let y=h.minimum;if($n(h.minimum)==="array"&&(y=h.minimum[s.arrayIndex]),l<y)return[new Zt(i,l,`${l} is less than the minimum value ${y}`)]}if("maximum"in h){let y=h.maximum;if($n(h.maximum)==="array"&&(y=h.maximum[s.arrayIndex]),l>y)return[new Zt(i,l,`${l} is greater than the maximum value ${y}`)]}return[]}function _c(s){const i=s.valueSpec,l=si(s.value.type);let h,f,y,x={};const E=l!=="categorical"&&s.value.property===void 0,A=!E,P=$n(s.value.stops)==="array"&&$n(s.value.stops[0])==="array"&&$n(s.value.stops[0][0])==="object",V=Jo({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Y){if(l==="identity")return[new Zt(Y.key,Y.value,'identity function may not have a "stops" property')];let Q=[];const ne=Y.value;return Q=Q.concat(Sy({key:Y.key,value:ne,valueSpec:Y.valueSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:G})),$n(ne)==="array"&&ne.length===0&&Q.push(new Zt(Y.key,ne,"array must have at least one stop")),Q},default:function(Y){return Ki({key:Y.key,value:Y.value,valueSpec:i,style:Y.style,styleSpec:Y.styleSpec})}}});return l==="identity"&&E&&V.push(new Zt(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||V.push(new Zt(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!Gh(s.valueSpec)&&V.push(new Zt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(A&&!Ql(s.valueSpec)?V.push(new Zt(s.key,s.value,"property functions not supported")):E&&!is(s.valueSpec)&&V.push(new Zt(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!P||s.value.property!==void 0||V.push(new Zt(s.key,s.value,'"property" property is required')),V;function G(Y){let Q=[];const ne=Y.value,he=Y.key;if($n(ne)!=="array")return[new Zt(he,ne,`array expected, ${$n(ne)} found`)];if(ne.length!==2)return[new Zt(he,ne,`array length 2 expected, length ${ne.length} found`)];if(P){if($n(ne[0])!=="object")return[new Zt(he,ne,`object expected, ${$n(ne[0])} found`)];if(ne[0].zoom===void 0)return[new Zt(he,ne,"object stop key must have zoom")];if(ne[0].value===void 0)return[new Zt(he,ne,"object stop key must have value")];const we=si(ne[0].zoom);if(typeof we!="number")return[new Zt(he,ne[0].zoom,"stop zoom values must be numbers")];if(y&&y>we)return[new Zt(he,ne[0].zoom,"stop zoom values must appear in ascending order")];we!==y&&(y=we,f=void 0,x={}),Q=Q.concat(Jo({key:`${he}[0]`,value:ne[0],valueSpec:{zoom:{}},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:_f,value:Z}}))}else Q=Q.concat(Z({key:`${he}[0]`,value:ne[0],valueSpec:{},style:Y.style,styleSpec:Y.styleSpec},ne));return eu(Ss(ne[1]))?Q.concat([new Zt(`${he}[1]`,ne[1],"expressions are not allowed in function stops.")]):Q.concat(Ki({key:`${he}[1]`,value:ne[1],valueSpec:i,style:Y.style,styleSpec:Y.styleSpec}))}function Z(Y,Q){const ne=$n(Y.value),he=si(Y.value),we=Y.value!==null?Y.value:Q;if(h){if(ne!==h)return[new Zt(Y.key,we,`${ne} stop domain type must match previous stop domain type ${h}`)]}else h=ne;if(ne!=="number"&&ne!=="string"&&ne!=="boolean"&&typeof he!="number"&&typeof he!="string"&&typeof he!="boolean")return[new Zt(Y.key,we,"stop domain value must be a number, string, or boolean")];if(ne!=="number"&&l!=="categorical"){let Re=`number expected, ${ne} found`;return Ql(i)&&l===void 0&&(Re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Zt(Y.key,we,Re)]}return l!=="categorical"||ne!=="number"||typeof he=="number"&&isFinite(he)&&Math.floor(he)===he?l!=="categorical"&&ne==="number"&&typeof he=="number"&&typeof f=="number"&&f!==void 0&&he<f?[new Zt(Y.key,we,"stop domain values must appear in ascending order")]:(f=he,l==="categorical"&&he in x?[new Zt(Y.key,we,"stop domain values must be unique")]:(x[he]=!0,[])):[new Zt(Y.key,we,`integer expected, found ${String(he)}`)]}}function nu(s){const i=(s.expressionContext==="property"?ul:tu)(Ss(s.value),s.valueSpec);if(i.result==="error")return i.value.map(h=>new Zt(`${s.key}${h.key}`,s.value,h.message));const l=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new Zt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!uc(l))return[new Zt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter")return ky(l,s);if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Bh(l,["zoom","feature-state"]))return[new Zt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!lc(l))return[new Zt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ky(s,i){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const f of i.valueSpec.expression.parameters)l.delete(f);if(l.size===0)return[];const h=[];return s instanceof ks&&l.has(s.name)?[new Zt(i.key,i.value,`["${s.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(s.eachChild(f=>{h.push(...ky(f,i))}),h)}function Yh(s){const i=s.key,l=s.value,h=s.valueSpec,f=[];return Array.isArray(h.values)?h.values.indexOf(si(l))===-1&&f.push(new Zt(i,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(si(l))===-1&&f.push(new Zt(i,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),f}function xf(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!xf(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function Jh(s,i="fill"){if(s==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};xf(s)||(s=ed(s));const l=s;let h=!0;try{h=function(P){if(!Ri(P))return P;let V=Ss(P);return bc(V),V=xc(V),V}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const f=gt[`filter_${i}`],y=tu(h,f);let x=null;if(y.result==="error")throw new Error(y.value.map(P=>`${P.key}: ${P.message}`).join(", "));x=(P,V,G)=>y.value.evaluate(P,V,{},G);let E=null,A=null;if(h!==l){const P=tu(l,f);if(P.result==="error")throw new Error(P.value.map(V=>`${V.key}: ${V.message}`).join(", "));E=(V,G,Z,Y,Q)=>P.value.evaluate(V,G,{},Z,void 0,void 0,Y,Q),A=!lc(P.value.expression)}return{filter:x,dynamicFilter:E||void 0,needGeometry:Ty(h),needFeature:!!A}}function xc(s){if(!Array.isArray(s))return s;const i=function(l){if(Qh.has(l[0])){for(let h=1;h<l.length;h++)if(Ri(l[h]))return!0}return l}(s);return i===!0?i:i.map(l=>xc(l))}function bc(s){let i=!1;const l=[];if(s[0]==="case"){for(let h=1;h<s.length-1;h+=2)i=i||Ri(s[h]),l.push(s[h+1]);l.push(s[s.length-1])}else if(s[0]==="match"){i=i||Ri(s[1]);for(let h=2;h<s.length-1;h+=2)l.push(s[h+1]);l.push(s[s.length-1])}else if(s[0]==="step"){i=i||Ri(s[1]);for(let h=1;h<s.length-1;h+=2)l.push(s[h+1])}i&&(s.length=0,s.push("any",...l));for(let h=1;h<s.length;h++)bc(s[h])}function Ri(s){if(!Array.isArray(s))return!1;if((i=s[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let l=1;l<s.length;l++)if(Ri(s[l]))return!0;return!1}const Qh=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function u1(s,i){return s<i?-1:s>i?1:0}function Ty(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let i=1;i<s.length;i++)if(Ty(s[i]))return!0;return!1}function ed(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?bf(s[1],s[2],"=="):i==="!="?ru(bf(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?bf(s[1],s[2],i):i==="any"?(l=s.slice(1),["any"].concat(l.map(ed))):i==="all"?["all"].concat(s.slice(1).map(ed)):i==="none"?["all"].concat(s.slice(1).map(ed).map(ru)):i==="in"?td(s[1],s.slice(2)):i==="!in"?ru(td(s[1],s.slice(2))):i==="has"?Ay(s[1]):i==="!has"?ru(Ay(s[1])):i!=="within"||s;var l}function bf(s,i,l){switch(s){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,s,i]}}function td(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",s,["literal",i.sort(u1)]]:["filter-in-small",s,["literal",i]]}}function Ay(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function ru(s){return["!",s]}function wf(s){return xf(Ss(s.value))?nu(ns({},s,{expressionContext:"filter",valueSpec:s.styleSpec[`filter_${s.layerType||"fill"}`]})):My(s)}function My(s){const i=s.value,l=s.key;if($n(i)!=="array")return[new Zt(l,i,`array expected, ${$n(i)} found`)];const h=s.styleSpec;let f,y=[];if(i.length<1)return[new Zt(l,i,"filter array must have at least 1 element")];switch(y=y.concat(Yh({key:`${l}[0]`,value:i[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),si(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&si(i[1])==="$type"&&y.push(new Zt(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new Zt(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(f=$n(i[1]),f!=="string"&&y.push(new Zt(`${l}[1]`,i[1],`string expected, ${f} found`)));for(let x=2;x<i.length;x++)f=$n(i[x]),si(i[1])==="$type"?y=y.concat(Yh({key:`${l}[${x}]`,value:i[x],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&y.push(new Zt(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)y=y.concat(My({key:`${l}[${x}]`,value:i[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":f=$n(i[1]),i.length!==2?y.push(new Zt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):f!=="string"&&y.push(new Zt(`${l}[1]`,i[1],`string expected, ${f} found`));break;case"within":f=$n(i[1]),i.length!==2?y.push(new Zt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):f!=="object"&&y.push(new Zt(`${l}[1]`,i[1],`object expected, ${f} found`))}return y}function nd(s,i){const l=s.key,h=s.style,f=s.styleSpec,y=s.value,x=s.objectKey,E=f[`${i}_${s.layerType}`];if(!E)return[];const A=x.match(/^(.*)-transition$/);if(i==="paint"&&A&&E[A[1]]&&E[A[1]].transition)return Ki({key:l,value:y,valueSpec:f.transition,style:h,styleSpec:f});const P=s.valueSpec||E[x];if(!P)return[new Zt(l,y,`unknown property "${x}"`)];let V;if($n(y)==="string"&&Ql(P)&&!P.tokens&&(V=/^{([^}]+)}$/.exec(y))){const Z=`\`{ "type": "identity", "property": ${V?JSON.stringify(V[1]):'"_"'} }\``;return[new Zt(l,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: ${Z}.`)]}const G=[];return s.layerType==="symbol"&&(x==="text-field"&&h&&!h.glyphs&&G.push(new Zt(l,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&qh(Ss(y))&&si(y.type)==="identity"&&G.push(new Zt(l,y,'"text-font" does not support identity functions'))),G.concat(Ki({key:s.key,value:y,valueSpec:P,style:h,styleSpec:f,expressionContext:"property",propertyType:i,propertyKey:x}))}function Iy(s){return nd(s,"paint")}function Ef(s){return nd(s,"layout")}function Cf(s){let i=[];const l=s.value,h=s.key,f=s.style,y=s.styleSpec;l.type||l.ref||i.push(new Zt(h,l,'either "type" or "ref" is required'));let x=si(l.type);const E=si(l.ref);if(l.id){const A=si(l.id);for(let P=0;P<s.arrayIndex;P++){const V=f.layers[P];si(V.id)===A&&i.push(new Zt(h,l.id,`duplicate layer id "${l.id}", previously used at line ${V.id.__line__}`))}}if("ref"in l){let A;["type","source","source-layer","filter","layout"].forEach(P=>{P in l&&i.push(new Zt(h,l[P],`"${P}" is prohibited for ref layers`))}),f.layers.forEach(P=>{si(P.id)===E&&(A=P)}),A?A.ref?i.push(new Zt(h,l.ref,"ref cannot reference another ref layer")):x=si(A.type):typeof E=="string"&&i.push(new Zt(h,l.ref,`ref layer "${E}" not found`))}else if(x!=="background"&&x!=="sky")if(l.source){const A=f.sources&&f.sources[l.source],P=A&&si(A.type);A?P==="vector"&&x==="raster"?i.push(new Zt(h,l.source,`layer "${l.id}" requires a raster source`)):P==="raster"&&x!=="raster"?i.push(new Zt(h,l.source,`layer "${l.id}" requires a vector source`)):P!=="vector"||l["source-layer"]?P==="raster-dem"&&x!=="hillshade"?i.push(new Zt(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||P==="geojson"&&A.lineMetrics||i.push(new Zt(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Zt(h,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new Zt(h,l.source,`source "${l.source}" not found`))}else i.push(new Zt(h,l,'missing required property "source"'));return i=i.concat(Jo({key:h,value:l,valueSpec:y.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ki({key:`${h}.type`,value:l.type,valueSpec:y.layer.type,style:s.style,styleSpec:s.styleSpec,object:l,objectKey:"type"}),filter:A=>wf(ns({layerType:x},A)),layout:A=>Jo({layer:l,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":P=>Ef(ns({layerType:x},P))}}),paint:A=>Jo({layer:l,key:A.key,value:A.value,valueSpec:{},style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":P=>Iy(ns({layerType:x},P))}})}})),i}function iu(s){const i=s.value,l=s.key,h=$n(i);return h!=="string"?[new Zt(l,i,`string expected, ${h} found`)]:[]}const rd={promoteId:function({key:s,value:i}){if($n(i)==="string")return iu({key:s,value:i});{const l=[];for(const h in i)l.push(...iu({key:`${s}.${h}`,value:i[h]}));return l}}};function wc(s){const i=s.value,l=s.key,h=s.styleSpec,f=s.style;if(!i.type)return[new Zt(l,i,'"type" is required')];const y=si(i.type);let x;switch(y){case"vector":case"raster":case"raster-dem":return x=Jo({key:l,value:i,valueSpec:h[`source_${y.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:rd}),x;case"geojson":if(x=Jo({key:l,value:i,valueSpec:h.source_geojson,style:f,styleSpec:h,objectElementValidators:rd}),i.cluster)for(const E in i.clusterProperties){const[A,P]=i.clusterProperties[E],V=typeof A=="string"?[A,["accumulated"],["get",E]]:A;x.push(...nu({key:`${l}.${E}.map`,value:P,expressionContext:"cluster-map"})),x.push(...nu({key:`${l}.${E}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return x;case"video":return Jo({key:l,value:i,valueSpec:h.source_video,style:f,styleSpec:h});case"image":return Jo({key:l,value:i,valueSpec:h.source_image,style:f,styleSpec:h});case"canvas":return[new Zt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yh({key:`${l}.type`,value:i.type,valueSpec:{values:Py(h)},style:f,styleSpec:h})}}function Py(s){return s.source.reduce((i,l)=>{const h=s[l];return h.type.type==="enum"&&(i=i.concat(Object.keys(h.type.values))),i},[])}function Dy(s){const i=s.value,l=s.styleSpec,h=l.light,f=s.style;let y=[];const x=$n(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new Zt("light",i,`object expected, ${x} found`)]),y;for(const E in i){const A=E.match(/^(.*)-transition$/);y=y.concat(A&&h[A[1]]&&h[A[1]].transition?Ki({key:E,value:i[E],valueSpec:l.transition,style:f,styleSpec:l}):h[E]?Ki({key:E,value:i[E],valueSpec:h[E],style:f,styleSpec:l}):[new Zt(E,i[E],`unknown property "${E}"`)])}return y}function Sf(s){const i=s.value,l=s.key,h=s.style,f=s.styleSpec,y=f.terrain;let x=[];const E=$n(i);if(i===void 0)return x;if(E!=="object")return x=x.concat([new Zt("terrain",i,`object expected, ${E} found`)]),x;for(const A in i){const P=A.match(/^(.*)-transition$/);x=x.concat(P&&y[P[1]]&&y[P[1]].transition?Ki({key:A,value:i[A],valueSpec:f.transition,style:h,styleSpec:f}):y[A]?Ki({key:A,value:i[A],valueSpec:y[A],style:h,styleSpec:f}):[new Zt(A,i[A],`unknown property "${A}"`)])}if(i.source){const A=h.sources&&h.sources[i.source],P=A&&si(A.type);A?P!=="raster-dem"&&x.push(new Zt(l,i.source,`terrain cannot be used with a source of type ${String(P)}, it only be used with a "raster-dem" source type`)):x.push(new Zt(l,i.source,`source "${i.source}" not found`))}else x.push(new Zt(l,i,'terrain is missing required property "source"'));return x}function Ry(s){const i=s.value,l=s.style,h=s.styleSpec,f=h.fog;let y=[];const x=$n(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new Zt("fog",i,`object expected, ${x} found`)]),y;for(const E in i){const A=E.match(/^(.*)-transition$/);y=y.concat(A&&f[A[1]]&&f[A[1]].transition?Ki({key:E,value:i[E],valueSpec:h.transition,style:l,styleSpec:h}):f[E]?Ki({key:E,value:i[E],valueSpec:f[E],style:l,styleSpec:h}):[new Zt(E,i[E],`unknown property "${E}"`)])}return y}const id={"*":()=>[],array:Sy,boolean:function(s){const i=s.value,l=s.key,h=$n(i);return h!=="boolean"?[new Zt(l,i,`boolean expected, ${h} found`)]:[]},number:_f,color:function(s){const i=s.key,l=s.value,h=$n(l);return h!=="string"?[new Zt(i,l,`color expected, ${h} found`)]:Hp(l)===null?[new Zt(i,l,`color expected, "${l}" found`)]:[]},enum:Yh,filter:wf,function:_c,layer:Cf,object:Jo,source:wc,light:Dy,terrain:Sf,fog:Ry,string:iu,formatted:function(s){return iu(s).length===0?[]:nu(s)},resolvedImage:function(s){return iu(s).length===0?[]:nu(s)},projection:function(s){const i=s.value,l=s.styleSpec,h=l.projection,f=s.style;let y=[];const x=$n(i);if(x==="object")for(const E in i)y=y.concat(Ki({key:E,value:i[E],valueSpec:h[E],style:f,styleSpec:l}));else x!=="string"&&(y=y.concat([new Zt("projection",i,`object or string expected, ${x} found`)]));return y}};function Ki(s){const i=s.value,l=s.valueSpec,h=s.styleSpec;return l.expression&&qh(si(i))?_c(s):l.expression&&eu(Ss(i))?nu(s):l.type&&id[l.type]?id[l.type](s):Jo(ns({},s,{valueSpec:l.type?h[l.type]:l}))}function c1(s){const i=s.value,l=s.key,h=iu(s);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new Zt(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new Zt(l,i,'"glyphs" url must include a "{range}" token'))),h}function Ly(s,i=gt){return os(Ki({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,objectElementValidators:{glyphs:c1,"*":()=>[]}}))}const h1=s=>os(Iy(s)),Oy=s=>os(Ef(s));function os(s){return s.slice().sort((i,l)=>i.line&&l.line?i.line-l.line:0)}function zy(s,i){let l=!1;if(i&&i.length)for(const h of i)s.fire(new Cs(new Error(h.message))),l=!0;return l}var ou=Oa;function Oa(s,i,l){var h=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var f=new Int32Array(this.arrayBuffer);s=f[0],this.d=(i=f[1])+2*(l=f[2]);for(var y=0;y<this.d*this.d;y++){var x=f[3+y],E=f[3+y+1];h.push(x===E?null:f.subarray(x,E))}var A=f[3+h.length+1];this.keys=f.subarray(f[3+h.length],A),this.bboxes=f.subarray(A),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var P=0;P<this.d*this.d;P++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=s,this.padding=l,this.scale=i/s,this.uid=0;var V=l/i*s;this.min=-V,this.max=s+V}Oa.prototype.insert=function(s,i,l,h,f){this._forEachCell(i,l,h,f,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(f)},Oa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Oa.prototype._insertCell=function(s,i,l,h,f,y){this.cells[f].push(y)},Oa.prototype.query=function(s,i,l,h,f){var y=this.min,x=this.max;if(s<=y&&i<=y&&x<=l&&x<=h&&!f)return Array.prototype.slice.call(this.keys);var E=[];return this._forEachCell(s,i,l,h,this._queryCell,E,{},f),E},Oa.prototype._queryCell=function(s,i,l,h,f,y,x,E){var A=this.cells[f];if(A!==null)for(var P=this.keys,V=this.bboxes,G=0;G<A.length;G++){var Z=A[G];if(x[Z]===void 0){var Y=4*Z;(E?E(V[Y+0],V[Y+1],V[Y+2],V[Y+3]):s<=V[Y+2]&&i<=V[Y+3]&&l>=V[Y+0]&&h>=V[Y+1])?(x[Z]=!0,y.push(P[Z])):x[Z]=!1}}},Oa.prototype._forEachCell=function(s,i,l,h,f,y,x,E){for(var A=this._convertToCellCoord(s),P=this._convertToCellCoord(i),V=this._convertToCellCoord(l),G=this._convertToCellCoord(h),Z=A;Z<=V;Z++)for(var Y=P;Y<=G;Y++){var Q=this.d*Y+Z;if((!E||E(this._convertFromCellCoord(Z),this._convertFromCellCoord(Y),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(Y+1)))&&f.call(this,s,i,l,h,Q,y,x,E))return}},Oa.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},Oa.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},Oa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,i=3+this.cells.length+1+1,l=0,h=0;h<this.cells.length;h++)l+=this.cells[h].length;var f=new Int32Array(i+l+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var y=i,x=0;x<s.length;x++){var E=s[x];f[3+x]=y,f.set(E,y),y+=E.length}return f[3+s.length]=y,f.set(this.keys,y),f[3+s.length+1]=y+=this.keys.length,f.set(this.bboxes,y),y+=this.bboxes.length,f.buffer};const od={};function Jt(s,i,l={}){Object.defineProperty(s,"_classRegistryKey",{value:i,writeable:!1}),od[i]={klass:s,omit:l.omit||[]}}Jt(Object,"Object"),ou.serialize=function(s,i){const l=s.toArrayBuffer();return i&&i.push(l),{buffer:l}},ou.deserialize=function(s){return new ou(s.buffer)},Object.defineProperty(ou,"name",{value:"Grid"}),Jt(ou,"Grid"),Jt(Qr,"Color"),Jt(Error,"Error"),Jt(Bt,"AJAXError"),Jt(po,"ResolvedImage"),Jt(yc,"StylePropertyFunction"),Jt(Xh,"StyleExpression",{omit:["_evaluator"]}),Jt(ll,"ZoomDependentExpression"),Jt(Kh,"ZoomConstantExpression"),Jt(ks,"CompoundExpression",{omit:["_evaluate"]});for(const s in Yl)od[Yl[s]._classRegistryKey]||Jt(Yl[s],`Expression${s}`);function By(s){return s&&typeof ArrayBuffer!="undefined"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Ec(s){return v.ImageBitmap&&s instanceof v.ImageBitmap}function Cc(s,i){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(By(s)||Ec(s))return i&&i.push(s),s;if(ArrayBuffer.isView(s)){const l=s;return i&&i.push(l.buffer),l}if(s instanceof v.ImageData)return i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const l=[];for(const h of s)l.push(Cc(h,i));return l}if(typeof s=="object"){const l=s.constructor,h=l._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const f=l.serialize?l.serialize(s,i):{};if(!l.serialize){for(const y in s)s.hasOwnProperty(y)&&(od[h].omit.indexOf(y)>=0||(f[y]=Cc(s[y],i)));s instanceof Error&&(f.message=s.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(f.$name=h),f}throw new Error("can't serialize object of type "+typeof s)}function Sc(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||By(s)||Ec(s)||ArrayBuffer.isView(s)||s instanceof v.ImageData)return s;if(Array.isArray(s))return s.map(Sc);if(typeof s=="object"){const i=s.$name||"Object",{klass:l}=od[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(s);const h=Object.create(l.prototype);for(const f of Object.keys(s))f!=="$name"&&(h[f]=Sc(s[f]));return h}throw new Error("can't deserialize object of type "+typeof s)}const kc=s=>s>=1536&&s<=1791,Fy=s=>s>=1872&&s<=1919,kf=s=>s>=2208&&s<=2303,Ny=s=>s>=11904&&s<=12031,Tf=s=>s>=12032&&s<=12255,Af=s=>s>=12272&&s<=12287,Tc=s=>s>=12288&&s<=12351,ad=s=>s>=12352&&s<=12447,au=s=>s>=12448&&s<=12543,sd=s=>s>=12544&&s<=12591,Uy=s=>s>=12704&&s<=12735,jy=s=>s>=12736&&s<=12783,Mf=s=>s>=12784&&s<=12799,Vy=s=>s>=12800&&s<=13055,$y=s=>s>=13056&&s<=13311,Hy=s=>s>=13312&&s<=19903,If=s=>s>=19968&&s<=40959,Wy=s=>s>=40960&&s<=42127,Gy=s=>s>=42128&&s<=42191,qy=s=>s>=44032&&s<=55215,Zy=s=>s>=63744&&s<=64255,ld=s=>s>=64336&&s<=65023,Ac=s=>s>=65040&&s<=65055,g=s=>s>=65072&&s<=65103,u=s=>s>=65104&&s<=65135,p=s=>s>=65136&&s<=65279,_=s=>s>=65280&&s<=65519;function b(s){for(const i of s)if(O(i.charCodeAt(0)))return!0;return!1}function S(s){for(const i of s)if(!L(i.charCodeAt(0)))return!1;return!0}function L(s){return!(kc(s)||Fy(s)||kf(s)||ld(s)||p(s))}function O(s){return!(s!==746&&s!==747&&(s<4352||!(Uy(s)||sd(s)||g(s)&&!(s>=65097&&s<=65103)||Zy(s)||$y(s)||Ny(s)||jy(s)||!(!Tc(s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Hy(s)||If(s)||Vy(s)||(i=>i>=12592&&i<=12687)(s)||(i=>i>=43360&&i<=43391)(s)||(i=>i>=55216&&i<=55295)(s)||(i=>i>=4352&&i<=4607)(s)||qy(s)||ad(s)||Af(s)||(i=>i>=12688&&i<=12703)(s)||Tf(s)||Mf(s)||au(s)&&s!==12540||!(!_(s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!u(s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||(i=>i>=5120&&i<=5759)(s)||(i=>i>=6320&&i<=6399)(s)||Ac(s)||(i=>i>=19904&&i<=19967)(s)||Wy(s)||Gy(s))))}function W(s){return!(O(s)||function(i){return!!((l=>l>=128&&l<=255)(i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||(l=>l>=8192&&l<=8303)(i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||(l=>l>=8448&&l<=8527)(i)||(l=>l>=8528&&l<=8591)(i)||(l=>l>=8960&&l<=9215)(i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||(l=>l>=9216&&l<=9279)(i)&&i!==9251||(l=>l>=9280&&l<=9311)(i)||(l=>l>=9312&&l<=9471)(i)||(l=>l>=9632&&l<=9727)(i)||(l=>l>=9728&&l<=9983)(i)&&!(i>=9754&&i<=9759)||(l=>l>=11008&&l<=11263)(i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Tc(i)||au(i)||(l=>l>=57344&&l<=63743)(i)||g(i)||u(i)||_(i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}function K(s){return s>=1424&&s<=2303||ld(s)||p(s)}function X(s,i){return!(!i&&K(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||(l=>l>=6016&&l<=6143)(s))}function ee(s){for(const i of s)if(K(i.charCodeAt(0)))return!0;return!1}const le="deferred",de="loading",pe="loaded";let fe=null,me="unavailable",ae=null;const Se=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(me="error"),fe&&fe(s)};function Ce(){ke.fire(new cr("pluginStateChange",{pluginStatus:me,pluginURL:ae}))}const ke=new ts,Fe=function(){return me},ze=function(){if(me!==le||!ae)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");me=de,Ce(),ae&&In({url:ae},s=>{s?Se(s):(me=pe,Ce())})},$e={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>me===pe||$e.applyArabicShaping!=null,isLoading:()=>me===de,setState(s){me=s.pluginStatus,ae=s.pluginURL},isParsed:()=>$e.applyArabicShaping!=null&&$e.processBidirectionalText!=null&&$e.processStyledBidirectionalText!=null,getPluginURL:()=>ae};class qe{constructor(i,l){this.zoom=i,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return function(l,h){for(const f of l)if(!X(f.charCodeAt(0),h))return!1;return!0}(i,$e.isLoaded())}}class tt{constructor(i,l){this.property=i,this.value=l,this.expression=function(h,f){if(qh(h))return new yc(h,f);if(eu(h)){const y=ul(h,f);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=h;return typeof h=="string"&&f.type==="color"&&(y=Qr.parse(h)),{kind:"constant",evaluate:()=>y}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,l,h){return this.property.possiblyEvaluate(this,i,l,h)}}class ot{constructor(i){this.property=i,this.value=new tt(i,void 0)}transitioned(i,l){return new Je(this.property,this.value,l,ct({},i.transition,this.transition),i.now)}untransitioned(){return new Je(this.property,this.value,null,{},0)}}class Ot{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return kn(this._values[i].value.value)}setValue(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new ot(this._values[i].property)),this._values[i].value=new tt(this._values[i].property,l===null?void 0:kn(l))}getTransition(i){return kn(this._values[i].transition)}setTransition(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new ot(this._values[i].property)),this._values[i].transition=kn(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h);const f=this.getTransition(l);f!==void 0&&(i[`${l}-transition`]=f)}return i}transitioned(i,l){const h=new wt(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].transitioned(i,l._values[f]);return h}untransitioned(){const i=new wt(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class Je{constructor(i,l,h,f,y){const x=f.delay||0,E=f.duration||0;y=y||0,this.property=i,this.value=l,this.begin=y+x,this.end=this.begin+E,i.specification.transition&&(f.delay||f.duration)&&(this.prior=h)}possiblyEvaluate(i,l,h){const f=i.now||0,y=this.value.possiblyEvaluate(i,l,h),x=this.prior;if(x){if(f>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(f<this.begin)return x.possiblyEvaluate(i,l,h);{const E=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,h),y,_e(E))}}return y}}class wt{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,h){const f=new rt(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(i,l,h);return f}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class dt{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return kn(this._values[i].value)}setValue(i,l){this._values[i]=new tt(this._values[i].property,l===null?void 0:kn(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(i[l]=h)}return i}possiblyEvaluate(i,l,h){const f=new rt(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(i,l,h);return f}}class At{constructor(i,l,h){this.property=i,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,h,f){return this.property.evaluate(this.value,this.parameters,i,l,h,f)}}class rt{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Ge{constructor(i){this.specification=i}possiblyEvaluate(i,l){return i.expression.evaluate(l)}interpolate(i,l,h){const f=cc[this.specification.type];return f?f(i,l,h):i}}class at{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,h,f){return new At(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},h,f)}:i.expression,l)}interpolate(i,l,h){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new At(this,{kind:"constant",value:void 0},i.parameters);const f=cc[this.specification.type];return f?new At(this,{kind:"constant",value:f(i.value.value,l.value.value,h)},i.parameters):i}evaluate(i,l,h,f,y,x){return i.kind==="constant"?i.value:i.evaluate(l,h,f,y,x)}}class kt{constructor(i){this.specification=i}possiblyEvaluate(i,l,h,f){return!!i.expression.evaluate(l,null,{},h,f)}interpolate(){return!1}}class It{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new qe(0,{});for(const h in i){const f=i[h];f.specification.overridable&&this.overridableProperties.push(h);const y=this.defaultPropertyValues[h]=new tt(f,void 0),x=this.defaultTransitionablePropertyValues[h]=new ot(f);this.defaultTransitioningPropertyValues[h]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=y.possiblyEvaluate(l)}}}function rn(s,i){return 256*(s=Ne(Math.floor(s),0,255))+Ne(Math.floor(i),0,255)}Jt(at,"DataDrivenProperty"),Jt(Ge,"DataConstantProperty"),Jt(kt,"ColorRampProperty");const Tn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class en{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Xt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function an(s,i=1){let l=0,h=0;return{members:s.map(f=>{const y=Tn[f.type].BYTES_PER_ELEMENT,x=l=On(l,Math.max(i,y)),E=f.components||1;return h=Math.max(h,y),l+=y*E,{name:f.name,type:f.type,components:E,offset:x}}),size:On(l,Math.max(h,i)),alignment:i}}function On(s,i){return Math.ceil(s/i)*i}class un extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const f=2*i;return this.int16[f+0]=l,this.int16[f+1]=h,i}}un.prototype.bytesPerElement=4,Jt(un,"StructArrayLayout2i4");class nr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,h)}emplace(i,l,h,f){const y=3*i;return this.int16[y+0]=l,this.int16[y+1]=h,this.int16[y+2]=f,i}}nr.prototype.bytesPerElement=6,Jt(nr,"StructArrayLayout3i6");class ir extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,f)}emplace(i,l,h,f,y){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=f,this.int16[x+3]=y,i}}ir.prototype.bytesPerElement=8,Jt(ir,"StructArrayLayout4i8");class Cr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y,x,E){const A=this.length;return this.resize(A+1),this.emplace(A,i,l,h,f,y,x,E)}emplace(i,l,h,f,y,x,E,A){const P=6*i,V=12*i,G=3*i;return this.int16[P+0]=l,this.int16[P+1]=h,this.uint8[V+4]=f,this.uint8[V+5]=y,this.uint8[V+6]=x,this.uint8[V+7]=E,this.float32[G+2]=A,i}}Cr.prototype.bytesPerElement=12,Jt(Cr,"StructArrayLayout2i4ub1f12");class gr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,f)}emplace(i,l,h,f,y){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=f,this.float32[x+3]=y,i}}gr.prototype.bytesPerElement=16,Jt(gr,"StructArrayLayout4f16");class li extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,f,y)}emplace(i,l,h,f,y,x){const E=6*i,A=3*i;return this.uint16[E+0]=l,this.uint16[E+1]=h,this.uint16[E+2]=f,this.uint16[E+3]=y,this.float32[A+2]=x,i}}li.prototype.bytesPerElement=12,Jt(li,"StructArrayLayout4ui1f12");class To extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,f)}emplace(i,l,h,f,y){const x=4*i;return this.uint16[x+0]=l,this.uint16[x+1]=h,this.uint16[x+2]=f,this.uint16[x+3]=y,i}}To.prototype.bytesPerElement=8,Jt(To,"StructArrayLayout4ui8");class fa extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,i,l,h,f,y,x)}emplace(i,l,h,f,y,x,E){const A=6*i;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=f,this.int16[A+3]=y,this.int16[A+4]=x,this.int16[A+5]=E,i}}fa.prototype.bytesPerElement=12,Jt(fa,"StructArrayLayout6i12");class as extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y,x,E,A,P,V,G,Z){const Y=this.length;return this.resize(Y+1),this.emplace(Y,i,l,h,f,y,x,E,A,P,V,G,Z)}emplace(i,l,h,f,y,x,E,A,P,V,G,Z,Y){const Q=12*i;return this.int16[Q+0]=l,this.int16[Q+1]=h,this.int16[Q+2]=f,this.int16[Q+3]=y,this.uint16[Q+4]=x,this.uint16[Q+5]=E,this.uint16[Q+6]=A,this.uint16[Q+7]=P,this.int16[Q+8]=V,this.int16[Q+9]=G,this.int16[Q+10]=Z,this.int16[Q+11]=Y,i}}as.prototype.bytesPerElement=24,Jt(as,"StructArrayLayout4i4ui4i24");class zr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y,x){const E=this.length;return this.resize(E+1),this.emplace(E,i,l,h,f,y,x)}emplace(i,l,h,f,y,x,E){const A=10*i,P=5*i;return this.int16[A+0]=l,this.int16[A+1]=h,this.int16[A+2]=f,this.float32[P+2]=y,this.float32[P+3]=x,this.float32[P+4]=E,i}}zr.prototype.bytesPerElement=20,Jt(zr,"StructArrayLayout3i3f20");class yr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}yr.prototype.bytesPerElement=4,Jt(yr,"StructArrayLayout1ul4");class Kn extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y,x,E,A,P,V,G,Z,Y){const Q=this.length;return this.resize(Q+1),this.emplace(Q,i,l,h,f,y,x,E,A,P,V,G,Z,Y)}emplace(i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q){const ne=20*i,he=10*i;return this.int16[ne+0]=l,this.int16[ne+1]=h,this.int16[ne+2]=f,this.int16[ne+3]=y,this.int16[ne+4]=x,this.float32[he+3]=E,this.float32[he+4]=A,this.float32[he+5]=P,this.float32[he+6]=V,this.int16[ne+14]=G,this.uint32[he+8]=Z,this.uint16[ne+18]=Y,this.uint16[ne+19]=Q,i}}Kn.prototype.bytesPerElement=40,Jt(Kn,"StructArrayLayout5i4f1i1ul2ui40");class qr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y,x,E){const A=this.length;return this.resize(A+1),this.emplace(A,i,l,h,f,y,x,E)}emplace(i,l,h,f,y,x,E,A){const P=8*i;return this.int16[P+0]=l,this.int16[P+1]=h,this.int16[P+2]=f,this.int16[P+4]=y,this.int16[P+5]=x,this.int16[P+6]=E,this.int16[P+7]=A,i}}qr.prototype.bytesPerElement=16,Jt(qr,"StructArrayLayout3i2i2i16");class Yi extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,f,y)}emplace(i,l,h,f,y,x){const E=4*i,A=8*i;return this.float32[E+0]=l,this.float32[E+1]=h,this.float32[E+2]=f,this.int16[A+6]=y,this.int16[A+7]=x,i}}Yi.prototype.bytesPerElement=16,Jt(Yi,"StructArrayLayout2f1f2i16");class Pr extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,f)}emplace(i,l,h,f,y){const x=12*i,E=3*i;return this.uint8[x+0]=l,this.uint8[x+1]=h,this.float32[E+1]=f,this.float32[E+2]=y,i}}Pr.prototype.bytesPerElement=12,Jt(Pr,"StructArrayLayout2ub2f12");class Ji extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,h)}emplace(i,l,h,f){const y=3*i;return this.float32[y+0]=l,this.float32[y+1]=h,this.float32[y+2]=f,i}}Ji.prototype.bytesPerElement=12,Jt(Ji,"StructArrayLayout3f12");class Qi extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,h)}emplace(i,l,h,f){const y=3*i;return this.uint16[y+0]=l,this.uint16[y+1]=h,this.uint16[y+2]=f,i}}Qi.prototype.bytesPerElement=6,Jt(Qi,"StructArrayLayout3ui6");class Is extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q,ne,he,we,Re,ye,Pe,Be){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q,ne,he,we,Re,ye,Pe,Be)}emplace(i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q,ne,he,we,Re,ye,Pe,Be,Oe){const it=30*i,et=15*i,yt=60*i;return this.int16[it+0]=l,this.int16[it+1]=h,this.int16[it+2]=f,this.float32[et+2]=y,this.float32[et+3]=x,this.uint16[it+8]=E,this.uint16[it+9]=A,this.uint32[et+5]=P,this.uint32[et+6]=V,this.uint32[et+7]=G,this.uint16[it+16]=Z,this.uint16[it+17]=Y,this.uint16[it+18]=Q,this.float32[et+10]=ne,this.float32[et+11]=he,this.uint8[yt+48]=we,this.uint8[yt+49]=Re,this.uint8[yt+50]=ye,this.uint32[et+13]=Pe,this.int16[it+28]=Be,this.uint8[yt+58]=Oe,i}}Is.prototype.bytesPerElement=60,Jt(Is,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class su extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q,ne,he,we,Re,ye,Pe,Be,Oe,it,et,yt,Rt,lt,bt,Ct,Mt){const Lt=this.length;return this.resize(Lt+1),this.emplace(Lt,i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q,ne,he,we,Re,ye,Pe,Be,Oe,it,et,yt,Rt,lt,bt,Ct,Mt)}emplace(i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q,ne,he,we,Re,ye,Pe,Be,Oe,it,et,yt,Rt,lt,bt,Ct,Mt,Lt){const ut=38*i,jt=19*i;return this.int16[ut+0]=l,this.int16[ut+1]=h,this.int16[ut+2]=f,this.float32[jt+2]=y,this.float32[jt+3]=x,this.int16[ut+8]=E,this.int16[ut+9]=A,this.int16[ut+10]=P,this.int16[ut+11]=V,this.int16[ut+12]=G,this.int16[ut+13]=Z,this.uint16[ut+14]=Y,this.uint16[ut+15]=Q,this.uint16[ut+16]=ne,this.uint16[ut+17]=he,this.uint16[ut+18]=we,this.uint16[ut+19]=Re,this.uint16[ut+20]=ye,this.uint16[ut+21]=Pe,this.uint16[ut+22]=Be,this.uint16[ut+23]=Oe,this.uint16[ut+24]=it,this.uint16[ut+25]=et,this.uint16[ut+26]=yt,this.uint16[ut+27]=Rt,this.uint16[ut+28]=lt,this.uint32[jt+15]=bt,this.float32[jt+16]=Ct,this.float32[jt+17]=Mt,this.float32[jt+18]=Lt,i}}su.prototype.bytesPerElement=76,Jt(su,"StructArrayLayout3i2f6i15ui1ul3f76");class jo extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}jo.prototype.bytesPerElement=4,Jt(jo,"StructArrayLayout1f4");class Qo extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,h,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,h,f,y)}emplace(i,l,h,f,y,x){const E=5*i;return this.float32[E+0]=l,this.float32[E+1]=h,this.float32[E+2]=f,this.float32[E+3]=y,this.float32[E+4]=x,i}}Qo.prototype.bytesPerElement=20,Jt(Qo,"StructArrayLayout5f20");class ss extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,h,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,h,f)}emplace(i,l,h,f,y){const x=6*i;return this.uint32[3*i+0]=l,this.uint16[x+2]=h,this.uint16[x+3]=f,this.uint16[x+4]=y,i}}ss.prototype.bytesPerElement=12,Jt(ss,"StructArrayLayout1ul3ui12");class Ps extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const f=2*i;return this.uint16[f+0]=l,this.uint16[f+1]=h,i}}Ps.prototype.bytesPerElement=4,Jt(Ps,"StructArrayLayout2ui4");class Ds extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}Ds.prototype.bytesPerElement=2,Jt(Ds,"StructArrayLayout1ui2");class lu extends Xt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const h=this.length;return this.resize(h+1),this.emplace(h,i,l)}emplace(i,l,h){const f=2*i;return this.float32[f+0]=l,this.float32[f+1]=h,i}}lu.prototype.bytesPerElement=8,Jt(lu,"StructArrayLayout2f8");class Gk extends en{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Gk.prototype.size=40;class d1 extends Kn{get(i){return new Gk(this,i)}}Jt(d1,"CollisionBoxArray");class qk extends en{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}qk.prototype.size=60;class Zk extends Is{get(i){return new qk(this,i)}}Jt(Zk,"PlacedSymbolArray");class Xk extends en{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Xk.prototype.size=76;class Kk extends su{get(i){return new Xk(this,i)}}Jt(Kk,"SymbolInstanceArray");class Yk extends jo{getoffsetX(i){return this.float32[1*i+0]}}Jt(Yk,"GlyphOffsetArray");class Jk extends un{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}Jt(Jk,"SymbolLineVertexArray");class Qk extends en{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Qk.prototype.size=12;class eT extends ss{get(i){return new Qk(this,i)}}Jt(eT,"FeatureIndexArray");class tT extends Ps{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}Jt(tT,"FillExtrusionCentroidArray");const I5=an([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),P5=an([{name:"a_dash",components:4,type:"Uint16"}]);var Mc={},D5={get exports(){return Mc},set exports(s){Mc=s}},p1={};({get exports(){return p1},set exports(s){p1=s}}).exports=function(s,i){var l,h,f,y,x,E,A,P;for(h=s.length-(l=3&s.length),f=i,x=3432918353,E=461845907,P=0;P<h;)A=255&s.charCodeAt(P)|(255&s.charCodeAt(++P))<<8|(255&s.charCodeAt(++P))<<16|(255&s.charCodeAt(++P))<<24,++P,f=27492+(65535&(y=5*(65535&(f=(f^=A=(65535&(A=(A=(65535&A)*x+(((A>>>16)*x&65535)<<16)&4294967295)<<15|A>>>17))*E+(((A>>>16)*E&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(A=0,l){case 3:A^=(255&s.charCodeAt(P+2))<<16;case 2:A^=(255&s.charCodeAt(P+1))<<8;case 1:f^=A=(65535&(A=(A=(65535&(A^=255&s.charCodeAt(P)))*x+(((A>>>16)*x&65535)<<16)&4294967295)<<15|A>>>17))*E+(((A>>>16)*E&65535)<<16)&4294967295}return f^=s.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var f1={};({get exports(){return f1},set exports(s){f1=s}}).exports=function(s,i){for(var l,h=s.length,f=i^h,y=0;h>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(y)|(255&s.charCodeAt(++y))<<8|(255&s.charCodeAt(++y))<<16|(255&s.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++y;switch(h){case 3:f^=(255&s.charCodeAt(y+2))<<16;case 2:f^=(255&s.charCodeAt(y+1))<<8;case 1:f=1540483477*(65535&(f^=255&s.charCodeAt(y)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var nT=p1,R5=f1;D5.exports=nT,Mc.murmur3=nT,Mc.murmur2=R5;class Xy{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,h,f){this.ids.push(rT(i)),this.positions.push(l,h,f)}getPositions(i){const l=rT(i);let h=0,f=this.ids.length-1;for(;h<f;){const x=h+f>>1;this.ids[x]>=l?f=x:h=x+1}const y=[];for(;this.ids[h]===l;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(i,l){const h=new Float64Array(i.ids),f=new Uint32Array(i.positions);return m1(h,f,0,h.length-1),l&&l.push(h.buffer,f.buffer),{ids:h,positions:f}}static deserialize(i){const l=new Xy;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function rT(s){const i=+s;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:Mc(String(s))}function m1(s,i,l,h){for(;l<h;){const f=s[l+h>>1];let y=l-1,x=h+1;for(;;){do y++;while(s[y]<f);do x--;while(s[x]>f);if(y>=x)break;Ky(s,y,x),Ky(i,3*y,3*x),Ky(i,3*y+1,3*x+1),Ky(i,3*y+2,3*x+2)}x-l<h-x?(m1(s,i,l,x),l=x+1):(m1(s,i,x+1,h),h=x)}}function Ky(s,i,l){const h=s[i];s[i]=s[l],s[l]=h}Jt(Xy,"FeaturePositionMap");class cl{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,l),this.initialized=!0),!!this.location}}class Yy extends cl{constructor(i){super(i),this.current=0}set(i,l,h){this.fetchUniformLocation(i,l)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class iT extends cl{constructor(i){super(i),this.current=[0,0,0,0]}set(i,l,h){this.fetchUniformLocation(i,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class oT extends cl{constructor(i){super(i),this.current=Qr.transparent}set(i,l,h){this.fetchUniformLocation(i,l)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const L5=new Float32Array(16),O5=new Float32Array(9),z5=new Float32Array(4);function g1(s){return[rn(255*s.r,255*s.g),rn(255*s.b,255*s.a)]}class Pf{constructor(i,l,h){this.value=i,this.uniformNames=l.map(f=>`u_${f}`),this.type=h}setUniform(i,l,h,f,y){l.set(i,y,f.constantOr(this.value))}getBinding(i,l){return this.type==="color"?new oT(i):new Yy(i)}}class ud{constructor(i,l){this.uniformNames=l.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,l,h,f,y){const x=y==="u_pattern"||y==="u_dash"?this.pattern:y==="u_pixel_ratio"?this.pixelRatio:null;x&&l.set(i,y,x)}getBinding(i,l){return l==="u_pattern"||l==="u_dash"?new iT(i):new Yy(i)}}class hl{constructor(i,l,h,f){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(i,l,h,f,y,x){const E=this.paintVertexArray.length,A=this.expression.evaluate(new qe(0),l,{},y,f,x);this.paintVertexArray.resize(i),this._setPaintValue(E,i,A)}updatePaintArray(i,l,h,f,y){const x=this.expression.evaluate({zoom:0},h,f,void 0,y);this._setPaintValue(i,l,x)}_setPaintValue(i,l,h){if(this.type==="color"){const f=g1(h);for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,f[0],f[1])}else{for(let f=i;f<l;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ls{constructor(i,l,h,f,y,x){this.expression=i,this.uniformNames=l.map(E=>`u_${E}_t`),this.type=h,this.useIntegerZoom=f,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(E=>({name:`a_${E}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,h,f,y,x){const E=this.expression.evaluate(new qe(this.zoom),l,{},y,f,x),A=this.expression.evaluate(new qe(this.zoom+1),l,{},y,f,x),P=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(P,i,E,A)}updatePaintArray(i,l,h,f,y){const x=this.expression.evaluate({zoom:this.zoom},h,f,void 0,y),E=this.expression.evaluate({zoom:this.zoom+1},h,f,void 0,y);this._setPaintValue(i,l,x,E)}_setPaintValue(i,l,h,f){if(this.type==="color"){const y=g1(h),x=g1(f);for(let E=i;E<l;E++)this.paintVertexArray.emplace(E,y[0],y[1],x[0],x[1])}else{for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,h,f);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l,h,f,y){const x=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,E=Ne(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(i,y,E)}getBinding(i,l){return new Yy(i)}}class uu{constructor(i,l,h,f,y){this.expression=i,this.layerId=y,this.paintVertexAttributes=(h==="array"?P5:I5).members;for(let x=0;x<l.length;++x);this.paintVertexArray=new f}populatePaintArray(i,l,h){const f=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(f,i,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(i,l,h,f,y,x){this._setPaintValues(i,l,h.patterns&&h.patterns[this.layerId],x)}_setPaintValues(i,l,h,f){if(!f||!h)return;const y=f[h];if(!y)return;const{tl:x,br:E,pixelRatio:A}=y;for(let P=i;P<l;P++)this.paintVertexArray.emplace(P,x[0],x[1],E[0],E[1],A)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class cu{constructor(i,l,h=()=>!0){this.binders={},this._buffers=[];const f=[];for(const y in i.paint._values){if(!h(y))continue;const x=i.paint.get(y);if(!(x instanceof At&&Ql(x.property.specification)))continue;const E=F5(y,i.type),A=x.value,P=x.property.specification.type,V=!!x.property.useIntegerZoom,G=y==="line-dasharray"||y.endsWith("pattern"),Z=y==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(A.kind!=="constant"||Z)if(A.kind==="source"||Z||G){const Y=aT(y,P,"source");this.binders[y]=G?new uu(A,E,P,Y,i.id):new hl(A,E,P,Y),f.push(`/a_${y}`)}else{const Y=aT(y,P,"composite");this.binders[y]=new ls(A,E,P,V,l,Y),f.push(`/z_${y}`)}else this.binders[y]=G?new ud(A.value,E):new Pf(A.value,E,P),f.push(`/u_${y}`)}this.cacheKey=f.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof hl||l instanceof ls?l.maxValue:0}populatePaintArrays(i,l,h,f,y,x){for(const E in this.binders){const A=this.binders[E];(A instanceof hl||A instanceof ls||A instanceof uu)&&A.populatePaintArray(i,l,h,f,y,x)}}setConstantPatternPositions(i){for(const l in this.binders){const h=this.binders[l];h instanceof ud&&h.setConstantPatternPositions(i)}}updatePaintArrays(i,l,h,f,y,x){let E=!1;for(const A in i){const P=l.getPositions(A);for(const V of P){const G=h.feature(V.index);for(const Z in this.binders){const Y=this.binders[Z];if((Y instanceof hl||Y instanceof ls||Y instanceof uu)&&Y.expression.isStateDependent===!0){const Q=f.paint.get(Z);Y.expression=Q.value,Y.updatePaintArray(V.start,V.end,G,i[A],y,x),E=!0}}}}return E}defines(){const i=[];for(const l in this.binders){const h=this.binders[l];(h instanceof Pf||h instanceof ud)&&i.push(...h.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof hl||h instanceof ls||h instanceof uu)for(let f=0;f<h.paintVertexAttributes.length;f++)i.push(h.paintVertexAttributes[f].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof Pf||h instanceof ud||h instanceof ls)for(const f of h.uniformNames)i.push(f)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const l=[];for(const h in this.binders){const f=this.binders[h];if(f instanceof Pf||f instanceof ud||f instanceof ls)for(const y of f.uniformNames)l.push({name:y,property:h,binding:f.getBinding(i,y)})}return l}setUniforms(i,l,h,f,y){for(const{name:x,property:E,binding:A}of h)this.binders[E].setUniform(i,A,y,f.get(E),x)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const l=this.binders[i];(l instanceof hl||l instanceof ls||l instanceof uu)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(i){for(const l in this.binders){const h=this.binders[l];(h instanceof hl||h instanceof ls||h instanceof uu)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof hl||l instanceof ls||l instanceof uu)&&l.destroy()}}}class Ic{constructor(i,l,h=()=>!0){this.programConfigurations={};for(const f of i)this.programConfigurations[f.id]=new cu(f,l,h);this.needsUpload=!1,this._featureMap=new Xy,this._bufferOffset=0}populatePaintArrays(i,l,h,f,y,x,E){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(i,l,f,y,x,E);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,h,f,y){for(const x of h)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(i,this._featureMap,l,x,f,y)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const B5={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function F5(s,i){return B5[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}const N5={"line-pattern":{source:li,composite:li},"fill-pattern":{source:li,composite:li},"fill-extrusion-pattern":{source:li,composite:li},"line-dasharray":{source:To,composite:To}},U5={color:{source:lu,composite:gr},number:{source:jo,composite:lu}};function aT(s,i,l){const h=N5[s];return h&&h[l]||U5[i][l]}Jt(Pf,"ConstantBinder"),Jt(ud,"PatternConstantBinder"),Jt(hl,"SourceExpressionBinder"),Jt(uu,"PatternCompositeBinder"),Jt(ls,"CompositeExpressionBinder"),Jt(cu,"ProgramConfiguration",{omit:["_buffers"]}),Jt(Ic,"ProgramConfigurationSet");const Jy="-transition";class us extends ts{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new dt(l.layout)),l.paint)){this._transitionablePaint=new Ot(l.paint);for(const h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(const h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rt(l.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,l,h={}){l!=null&&this._validate(Oy,`layers.${this.id}.layout.${i}`,i,l,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return Sn(i,Jy)?this._transitionablePaint.getTransition(i.slice(0,-Jy.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,h={}){if(l!=null&&this._validate(h1,`layers.${this.id}.paint.${i}`,i,l,h))return!1;if(Sn(i,Jy))return this._transitionablePaint.setTransition(i.slice(0,-Jy.length),l||void 0),!1;{const f=this._transitionablePaint._values[i],y=f.value.isDataDriven(),x=f.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const E=this._transitionablePaint._values[i].value,A=E.isDataDriven(),P=Sn(i,"pattern")||i==="line-dasharray";return A||y||P||this._handleOverridablePaintPropertyUpdate(i,x,E)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,l,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),bn(i,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(i,l,h,f,y={}){return(!y||y.validate!==!1)&&zy(this,i.call(Ly,{key:l,layerType:this.type,objectKey:h,value:f,styleSpec:gt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof At&&Ql(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Jh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const j5=an([{name:"a_pos",components:2,type:"Int16"}],4),V5=an([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ui{constructor(i=[]){this.segments=i}prepareSegment(i,l,h,f){let y=this.segments[this.segments.length-1];return i>ui.MAX_VERTEX_ARRAY_LENGTH&&Ke(`Max vertices per segment is ${ui.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!y||y.vertexLength+i>ui.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==f)&&(y={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},f!==void 0&&(y.sortKey=f),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,h,f){return new ui([{vertexOffset:i,primitiveOffset:l,vertexLength:h,primitiveLength:f,vaos:{},sortKey:0}])}}ui.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Jt(ui,"SegmentVector");var _n=8192;class hu{constructor(i,l){i&&(l?this.setSouthWest(i).setNorthEast(l):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Xn?new Xn(i.lng,i.lat):Xn.convert(i),this}setSouthWest(i){return this._sw=i instanceof Xn?new Xn(i.lng,i.lat):Xn.convert(i),this}extend(i){const l=this._sw,h=this._ne;let f,y;if(i instanceof Xn)f=i,y=i;else{if(!(i instanceof hu))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(hu.convert(i)):this.extend(Xn.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(Xn.convert(i)):this;if(f=i._sw,y=i._ne,!f||!y)return this}return l||h?(l.lng=Math.min(f.lng,l.lng),l.lat=Math.min(f.lat,l.lat),h.lng=Math.max(y.lng,h.lng),h.lat=Math.max(y.lat,h.lat)):(this._sw=new Xn(f.lng,f.lat),this._ne=new Xn(y.lng,y.lat)),this}getCenter(){return new Xn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Xn(this.getWest(),this.getNorth())}getSouthEast(){return new Xn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:l,lat:h}=Xn.convert(i);let f=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&f}static convert(i){return!i||i instanceof hu?i:new hu(i)}}var Qy=1e-6,ea=typeof Float32Array!="undefined"?Float32Array:Array;function sT(){var s=new ea(9);return ea!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function lT(s,i,l){var h=i[0],f=i[1],y=i[2],x=i[3],E=i[4],A=i[5],P=i[6],V=i[7],G=i[8],Z=l[0],Y=l[1],Q=l[2],ne=l[3],he=l[4],we=l[5],Re=l[6],ye=l[7],Pe=l[8];return s[0]=Z*h+Y*x+Q*P,s[1]=Z*f+Y*E+Q*V,s[2]=Z*y+Y*A+Q*G,s[3]=ne*h+he*x+we*P,s[4]=ne*f+he*E+we*V,s[5]=ne*y+he*A+we*G,s[6]=Re*h+ye*x+Pe*P,s[7]=Re*f+ye*E+Pe*V,s[8]=Re*y+ye*A+Pe*G,s}function cs(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function y1(s,i){var l=i[0],h=i[1],f=i[2],y=i[3],x=i[4],E=i[5],A=i[6],P=i[7],V=i[8],G=i[9],Z=i[10],Y=i[11],Q=i[12],ne=i[13],he=i[14],we=i[15],Re=l*E-h*x,ye=l*A-f*x,Pe=l*P-y*x,Be=h*A-f*E,Oe=h*P-y*E,it=f*P-y*A,et=V*ne-G*Q,yt=V*he-Z*Q,Rt=V*we-Y*Q,lt=G*he-Z*ne,bt=G*we-Y*ne,Ct=Z*we-Y*he,Mt=Re*Ct-ye*bt+Pe*lt+Be*Rt-Oe*yt+it*et;return Mt?(s[0]=(E*Ct-A*bt+P*lt)*(Mt=1/Mt),s[1]=(f*bt-h*Ct-y*lt)*Mt,s[2]=(ne*it-he*Oe+we*Be)*Mt,s[3]=(Z*Oe-G*it-Y*Be)*Mt,s[4]=(A*Rt-x*Ct-P*yt)*Mt,s[5]=(l*Ct-f*Rt+y*yt)*Mt,s[6]=(he*Pe-Q*it-we*ye)*Mt,s[7]=(V*it-Z*Pe+Y*ye)*Mt,s[8]=(x*bt-E*Rt+P*et)*Mt,s[9]=(h*Rt-l*bt-y*et)*Mt,s[10]=(Q*Oe-ne*Pe+we*Re)*Mt,s[11]=(G*Pe-V*Oe-Y*Re)*Mt,s[12]=(E*yt-x*lt-A*et)*Mt,s[13]=(l*lt-h*yt+f*et)*Mt,s[14]=(ne*ye-Q*Be-he*Re)*Mt,s[15]=(V*Be-G*ye+Z*Re)*Mt,s):null}function Pc(s,i,l){var h=i[0],f=i[1],y=i[2],x=i[3],E=i[4],A=i[5],P=i[6],V=i[7],G=i[8],Z=i[9],Y=i[10],Q=i[11],ne=i[12],he=i[13],we=i[14],Re=i[15],ye=l[0],Pe=l[1],Be=l[2],Oe=l[3];return s[0]=ye*h+Pe*E+Be*G+Oe*ne,s[1]=ye*f+Pe*A+Be*Z+Oe*he,s[2]=ye*y+Pe*P+Be*Y+Oe*we,s[3]=ye*x+Pe*V+Be*Q+Oe*Re,s[4]=(ye=l[4])*h+(Pe=l[5])*E+(Be=l[6])*G+(Oe=l[7])*ne,s[5]=ye*f+Pe*A+Be*Z+Oe*he,s[6]=ye*y+Pe*P+Be*Y+Oe*we,s[7]=ye*x+Pe*V+Be*Q+Oe*Re,s[8]=(ye=l[8])*h+(Pe=l[9])*E+(Be=l[10])*G+(Oe=l[11])*ne,s[9]=ye*f+Pe*A+Be*Z+Oe*he,s[10]=ye*y+Pe*P+Be*Y+Oe*we,s[11]=ye*x+Pe*V+Be*Q+Oe*Re,s[12]=(ye=l[12])*h+(Pe=l[13])*E+(Be=l[14])*G+(Oe=l[15])*ne,s[13]=ye*f+Pe*A+Be*Z+Oe*he,s[14]=ye*y+Pe*P+Be*Y+Oe*we,s[15]=ye*x+Pe*V+Be*Q+Oe*Re,s}function Df(s,i,l){var h,f,y,x,E,A,P,V,G,Z,Y,Q,ne=l[0],he=l[1],we=l[2];return i===s?(s[12]=i[0]*ne+i[4]*he+i[8]*we+i[12],s[13]=i[1]*ne+i[5]*he+i[9]*we+i[13],s[14]=i[2]*ne+i[6]*he+i[10]*we+i[14],s[15]=i[3]*ne+i[7]*he+i[11]*we+i[15]):(f=i[1],y=i[2],x=i[3],E=i[4],A=i[5],P=i[6],V=i[7],G=i[8],Z=i[9],Y=i[10],Q=i[11],s[0]=h=i[0],s[1]=f,s[2]=y,s[3]=x,s[4]=E,s[5]=A,s[6]=P,s[7]=V,s[8]=G,s[9]=Z,s[10]=Y,s[11]=Q,s[12]=h*ne+E*he+G*we+i[12],s[13]=f*ne+A*he+Z*we+i[13],s[14]=y*ne+P*he+Y*we+i[14],s[15]=x*ne+V*he+Q*we+i[15]),s}function Dc(s,i,l){var h=l[0],f=l[1],y=l[2];return s[0]=i[0]*h,s[1]=i[1]*h,s[2]=i[2]*h,s[3]=i[3]*h,s[4]=i[4]*f,s[5]=i[5]*f,s[6]=i[6]*f,s[7]=i[7]*f,s[8]=i[8]*y,s[9]=i[9]*y,s[10]=i[10]*y,s[11]=i[11]*y,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s}function v1(s,i,l){var h=Math.sin(l),f=Math.cos(l),y=i[4],x=i[5],E=i[6],A=i[7],P=i[8],V=i[9],G=i[10],Z=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=y*f+P*h,s[5]=x*f+V*h,s[6]=E*f+G*h,s[7]=A*f+Z*h,s[8]=P*f-y*h,s[9]=V*f-x*h,s[10]=G*f-E*h,s[11]=Z*f-A*h,s}function ev(s,i,l){var h=Math.sin(l),f=Math.cos(l),y=i[0],x=i[1],E=i[2],A=i[3],P=i[8],V=i[9],G=i[10],Z=i[11];return i!==s&&(s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*f-P*h,s[1]=x*f-V*h,s[2]=E*f-G*h,s[3]=A*f-Z*h,s[8]=y*h+P*f,s[9]=x*h+V*f,s[10]=E*h+G*f,s[11]=A*h+Z*f,s}function uT(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function cT(s,i,l){var h,f,y,x=l[0],E=l[1],A=l[2],P=Math.hypot(x,E,A);return P<Qy?null:(x*=P=1/P,E*=P,A*=P,h=Math.sin(i),f=Math.cos(i),s[0]=x*x*(y=1-f)+f,s[1]=E*x*y+A*h,s[2]=A*x*y-E*h,s[3]=0,s[4]=x*E*y-A*h,s[5]=E*E*y+f,s[6]=A*E*y+x*h,s[7]=0,s[8]=x*A*y+E*h,s[9]=E*A*y-x*h,s[10]=A*A*y+f,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var $5=Pc;function _1(){var s=new ea(3);return ea!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function hT(s){var i=new ea(3);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i}function Rf(s){return Math.hypot(s[0],s[1],s[2])}function cd(s,i,l){var h=new ea(3);return h[0]=s,h[1]=i,h[2]=l,h}function dl(s,i,l){return s[0]=i[0]+l[0],s[1]=i[1]+l[1],s[2]=i[2]+l[2],s}function x1(s,i,l){return s[0]=i[0]-l[0],s[1]=i[1]-l[1],s[2]=i[2]-l[2],s}function dT(s,i,l){return s[0]=i[0]*l[0],s[1]=i[1]*l[1],s[2]=i[2]*l[2],s}function Lf(s,i,l){return s[0]=Math.min(i[0],l[0]),s[1]=Math.min(i[1],l[1]),s[2]=Math.min(i[2],l[2]),s}function Of(s,i,l){return s[0]=Math.max(i[0],l[0]),s[1]=Math.max(i[1],l[1]),s[2]=Math.max(i[2],l[2]),s}function ma(s,i,l){return s[0]=i[0]*l,s[1]=i[1]*l,s[2]=i[2]*l,s}function zf(s,i,l,h){return s[0]=i[0]+l[0]*h,s[1]=i[1]+l[1]*h,s[2]=i[2]+l[2]*h,s}function Ao(s,i){var l=i[0],h=i[1],f=i[2],y=l*l+h*h+f*f;return y>0&&(y=1/Math.sqrt(y)),s[0]=i[0]*y,s[1]=i[1]*y,s[2]=i[2]*y,s}function za(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]}function b1(s,i,l){var h=i[0],f=i[1],y=i[2],x=l[0],E=l[1],A=l[2];return s[0]=f*A-y*E,s[1]=y*x-h*A,s[2]=h*E-f*x,s}function ei(s,i,l){var h=i[0],f=i[1],y=i[2],x=l[3]*h+l[7]*f+l[11]*y+l[15];return s[0]=(l[0]*h+l[4]*f+l[8]*y+l[12])/(x=x||1),s[1]=(l[1]*h+l[5]*f+l[9]*y+l[13])/x,s[2]=(l[2]*h+l[6]*f+l[10]*y+l[14])/x,s}function pT(s,i,l){var h=l[0],f=l[1],y=l[2],x=i[0],E=i[1],A=i[2],P=f*A-y*E,V=y*x-h*A,G=h*E-f*x,Z=f*G-y*V,Y=y*P-h*G,Q=h*V-f*P,ne=2*l[3];return V*=ne,G*=ne,Y*=2,Q*=2,s[0]=x+(P*=ne)+(Z*=2),s[1]=E+V+Y,s[2]=A+G+Q,s}var Bf,hs=x1,H5=dT,W5=Rf;function fT(s,i,l){return s[0]=i[0]*l,s[1]=i[1]*l,s[2]=i[2]*l,s[3]=i[3]*l,s}function mT(s,i){var l=i[0],h=i[1],f=i[2],y=i[3],x=l*l+h*h+f*f+y*y;return x>0&&(x=1/Math.sqrt(x)),s[0]=l*x,s[1]=h*x,s[2]=f*x,s[3]=y*x,s}function Rc(s,i,l){var h=i[0],f=i[1],y=i[2],x=i[3];return s[0]=l[0]*h+l[4]*f+l[8]*y+l[12]*x,s[1]=l[1]*h+l[5]*f+l[9]*y+l[13]*x,s[2]=l[2]*h+l[6]*f+l[10]*y+l[14]*x,s[3]=l[3]*h+l[7]*f+l[11]*y+l[15]*x,s}function gT(){var s=new ea(4);return ea!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function yT(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function vT(s,i,l){l*=.5;var h=i[0],f=i[1],y=i[2],x=i[3],E=Math.sin(l),A=Math.cos(l);return s[0]=h*A+x*E,s[1]=f*A+y*E,s[2]=y*A-f*E,s[3]=x*A-h*E,s}function _T(s,i,l){l*=.5;var h=i[0],f=i[1],y=i[2],x=i[3],E=Math.sin(l),A=Math.cos(l);return s[0]=h*A-y*E,s[1]=f*A+x*E,s[2]=y*A+h*E,s[3]=x*A-f*E,s}_1(),Bf=new ea(4),ea!=Float32Array&&(Bf[0]=0,Bf[1]=0,Bf[2]=0,Bf[3]=0);var G5=mT;_1(),cd(1,0,0),cd(0,1,0),gT(),gT(),sT();const q5=an([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:xT}=q5,bT=an([{name:"a_pos_3",components:3,type:"Int16"}]);var Ff=an([{name:"a_pos",type:"Int16",components:2}]);class w1{constructor(i,l){this.pos=i,this.dir=l}intersectsPlane(i,l,h){const f=za(l,this.dir);if(Math.abs(f)<1e-6)return!1;const y=((i[0]-this.pos[0])*l[0]+(i[1]-this.pos[1])*l[1]+(i[2]-this.pos[2])*l[2])/f;return h[0]=this.pos[0]+this.dir[0]*y,h[1]=this.pos[1]+this.dir[1]*y,h[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(i,l,h){if(function(Y,Q){var ne=Y[0],he=Y[1],we=Y[2],Re=Q[0],ye=Q[1],Pe=Q[2];return Math.abs(ne-Re)<=Qy*Math.max(1,Math.abs(ne),Math.abs(Re))&&Math.abs(he-ye)<=Qy*Math.max(1,Math.abs(he),Math.abs(ye))&&Math.abs(we-Pe)<=Qy*Math.max(1,Math.abs(we),Math.abs(Pe))}(this.pos,i)||l===0)return h[0]=h[1]=h[2]=0,!1;const[f,y,x]=this.dir,E=this.pos[0]-i[0],A=this.pos[1]-i[1],P=this.pos[2]-i[2],V=f*f+y*y+x*x,G=2*(E*f+A*y+P*x),Z=G*G-4*V*(E*E+A*A+P*P-l*l);if(Z<0){const Y=Math.max(-G/2,0),Q=E+f*Y,ne=A+y*Y,he=P+x*Y,we=Math.hypot(Q,ne,he);return h[0]=Q*l/we,h[1]=ne*l/we,h[2]=he*l/we,!1}{const Y=(-G-Math.sqrt(Z))/(2*V);if(Y<0){const Q=Math.hypot(E,A,P);return h[0]=E*l/Q,h[1]=A*l/Q,h[2]=P*l/Q,!1}return h[0]=E+f*Y,h[1]=A+y*Y,h[2]=P+x*Y,!0}}}class E1{constructor(i,l,h,f,y){this.TL=i,this.TR=l,this.BR=h,this.BL=f,this.horizon=y}static fromInvProjectionMatrix(i,l,h){const f=[-1,1,1],y=[1,1,1],x=[1,-1,1],E=[-1,-1,1],A=ei(f,f,i),P=ei(y,y,i),V=ei(x,x,i),G=ei(E,E,i);return new E1(A,P,V,G,l/h)}}class C1{constructor(i,l){this.points=i,this.planes=l}static fromInvProjectionMatrix(i,l,h,f){const y=Math.pow(2,h),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{const P=Rc([],A,i),V=1/P[3]/l*y;return function(G,Z,Y){return G[0]=Z[0]*Y[0],G[1]=Z[1]*Y[1],G[2]=Z[2]*Y[2],G[3]=Z[3]*Y[3],G}(P,P,[V,V,f?1/P[3]:V,V])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{const P=Ao([],b1([],hs([],x[A[0]],x[A[1]]),hs([],x[A[2]],x[A[1]]))),V=-za(P,x[A[1]]);return P.concat(V)});return new C1(x,E)}}class Mo{static fromPoints(i){const l=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const f of i)Lf(l,l,f),Of(h,h,f);return new Mo(l,h)}static applyTransform(i,l){const h=i.getCorners();for(let f=0;f<h.length;++f)ei(h[f],h[f],l);return Mo.fromPoints(h)}constructor(i,l){this.min=i,this.max=l,this.center=ma([],dl([],this.min,this.max),.5)}quadrant(i){const l=[i%2==0,i<2],h=hT(this.min),f=hT(this.max);for(let y=0;y<l.length;y++)h[y]=l[y]?this.min[y]:this.center[y],f[y]=l[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new Mo(h,f)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,l=this.max;return[[i[0],i[1],i[2]],[l[0],i[1],i[2]],[l[0],l[1],i[2]],[i[0],l[1],i[2]],[i[0],i[1],l[2]],[l[0],i[1],l[2]],[l[0],l[1],l[2]],[i[0],l[1],l[2]]]}intersects(i){const l=this.getCorners();let h=!0;for(let f=0;f<i.planes.length;f++){const y=i.planes[f];let x=0;for(let E=0;E<l.length;E++)x+=za(y,l[E])+y[3]>=0;if(x===0)return 0;x!==l.length&&(h=!1)}if(h)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let E=0;E<i.points.length;E++){const A=i.points[E][f]-this.min[f];y=Math.min(y,A),x=Math.max(x,A)}if(x<0||y>this.max[f]-this.min[f])return 0}return 1}}const Rs=_n/Math.PI/2,Lc=64,Nf=[Lc,32,16],Ba=-Rs,Fa=Rs,Z5=[new Mo([Ba,Ba,Ba],[Fa,Fa,Fa]),new Mo([Ba,Ba,Ba],[0,0,Fa]),new Mo([0,Ba,Ba],[Fa,0,Fa]),new Mo([Ba,0,Ba],[0,Fa,Fa]),new Mo([0,0,Ba],[Fa,Fa,Fa])];function tv(s){return s*Rs/Vf}function wT(s,i,l,h=!0){const f=ma([],s._camera.position,s.worldSize),y=[i,l,1,1];Rc(y,y,s.pixelMatrixInverse),fT(y,y,1/y[3]);const x=Ao([],hs([],y,f)),E=s.globeMatrix,A=[E[12],E[13],E[14]],P=hs([],A,f),V=Rf(P),G=Ao([],P),Z=s.worldSize/(2*Math.PI),Y=za(G,x),Q=Math.asin(Z/V);if(Q<Math.acos(Y)){if(!h)return null;const Rt=[],lt=[];ma(Rt,x,V/Y),Ao(lt,hs(lt,Rt,P)),Ao(x,dl(x,P,ma(x,lt,Math.tan(Q)*V)))}const ne=[];new w1(f,x).closestPointOnSphere(A,Z,ne);const he=Ao([],qn(E,0)),we=Ao([],qn(E,1)),Re=Ao([],qn(E,2)),ye=za(he,ne),Pe=za(we,ne),Be=za(Re,ne),Oe=ue(Math.asin(-Pe/Z));let it=ue(Math.atan2(ye,Be));it=s.center.lng+function(Rt,lt){const bt=(lt-Rt+180)%360-180;return bt<-180?bt+360:bt}(s.center.lng,it);const et=Os(it),yt=Ne(zs(Oe),0,1);return new fd(et,yt)}class X5{constructor(i,l,h){this.a=hs([],i,h),this.b=hs([],l,h),this.center=h;const f=Ao([],this.a),y=Ao([],this.b);this.angle=Math.acos(za(f,y))}}function S1(s,i){if(s.angle===0)return null;let l;return l=s.a[i]===0?1/s.angle*.5*Math.PI:1/s.angle*Math.atan(s.b[i]/s.a[i]/Math.sin(s.angle)-1/Math.tan(s.angle)),l<0||l>1?null:function(h,f,y,x){const E=Math.sin(y);return h*(Math.sin((1-x)*y)/E)+f*(Math.sin(x*y)/E)}(s.a[i],s.b[i],s.angle,Ne(l,0,1))+s.center[i]}function Ls(s){if(s.z<=1)return Z5[s.z+2*s.y+s.x];const i=k1(nv(s));return Mo.fromPoints(i)}function Oc(s,i,l){return ma(s,s,1-l),zf(s,s,i,l)}function ET(s,i){const l=pd(i.zoom);if(l===0)return Ls(s);const h=nv(s),f=k1(h),y=Os(h.getWest())*i.worldSize,x=Os(h.getEast())*i.worldSize,E=zs(h.getNorth())*i.worldSize,A=zs(h.getSouth())*i.worldSize,P=[y,E,0],V=[x,E,0],G=[y,A,0],Z=[x,A,0],Y=y1([],i.globeMatrix);return ei(P,P,Y),ei(V,V,Y),ei(G,G,Y),ei(Z,Z,Y),f[0]=Oc(f[0],G,l),f[1]=Oc(f[1],Z,l),f[2]=Oc(f[2],V,l),f[3]=Oc(f[3],P,l),Mo.fromPoints(f)}function CT(s,i,l){for(const h of s)ei(h,h,i),ma(h,h,l)}function K5(s,i,l){const h=i/s.worldSize,f=s.globeMatrix;if(l.z<=1){const et=Ls(l).getCorners();return CT(et,f,h),Mo.fromPoints(et)}const y=nv(l),x=k1(y);CT(x,f,h);const E=Number.MAX_VALUE,A=[-E,-E,-E],P=[E,E,E];if(y.contains(s.center)){for(const Rt of x)Lf(P,P,Rt),Of(A,A,Rt);A[2]=0;const et=s.point,yt=[et.x*h,et.y*h,0];return Lf(P,P,yt),Of(A,A,yt),new Mo(P,A)}const V=[f[12]*h,f[13]*h,f[14]*h],G=y.getCenter(),Z=Ne(s.center.lat,-to,to),Y=Ne(G.lat,-to,to),Q=Os(s.center.lng),ne=zs(Z);let he=Q-Os(G.lng);const we=ne-zs(Y);he>.5?he-=1:he<-.5&&(he+=1);let Re=0;Math.abs(he)>Math.abs(we)?Re=he>=0?1:3:(Re=we>=0?0:2,zf(V,V,[f[4]*h,f[5]*h,f[6]*h],-Math.sin(ie(we>=0?y.getSouth():y.getNorth()))*Rs));const ye=x[Re],Pe=x[(Re+1)%4],Be=new X5(ye,Pe,V),Oe=[S1(Be,0)||ye[0],S1(Be,1)||ye[1],S1(Be,2)||ye[2]],it=pd(s.zoom);if(it>0){const et=function({x:Rt,y:lt,z:bt},Ct,Mt,Lt,ut){const jt=1/(1<<bt);let dn=Rt*jt,Gt=dn+jt,tn=lt*jt,Vt=tn+jt,fn=0;const zn=(dn+Gt)/2-Lt;return zn>.5?fn=-1:zn<-.5&&(fn=1),dn=((dn+fn)*Ct-(Lt*=Ct))*Mt+Lt,Gt=((Gt+fn)*Ct-Lt)*Mt+Lt,tn=(tn*Ct-(ut*=Ct))*Mt+ut,Vt=(Vt*Ct-ut)*Mt+ut,[[dn,Vt,0],[Gt,Vt,0],[Gt,tn,0],[dn,tn,0]]}(l,i,s._pixelsPerMercatorPixel,Q,ne);for(let Rt=0;Rt<x.length;Rt++)Oc(x[Rt],et[Rt],it);const yt=dl([],et[Re],et[(Re+1)%4]);ma(yt,yt,.5),Oc(Oe,yt,it)}for(const et of x)Lf(P,P,et),Of(A,A,et);return P[2]=Math.min(ye[2],Pe[2]),Lf(P,P,Oe),Of(A,A,Oe),new Mo(P,A)}function nv({x:s,y:i,z:l}){const h=1/(1<<l),f=new Xn(ga(s*h),eo((i+1)*h)),y=new Xn(ga((s+1)*h),eo(i*h));return new hu(f,y)}function k1(s){const i=ie(s.getNorth()),l=ie(s.getSouth()),h=Math.cos(i),f=Math.cos(l),y=Math.sin(i),x=Math.sin(l),E=s.getWest(),A=s.getEast();return[hd(f,x,E),hd(f,x,A),hd(h,y,A),hd(h,y,E)]}function hd(s,i,l,h=Rs){return l=ie(l),[s*Math.sin(l)*h,-i*h,s*Math.cos(l)*h]}function dd(s,i,l){return hd(Math.cos(ie(s)),Math.sin(ie(s)),i,l)}function Uf(s,i,l,h){const f=1<<l.z,y=(s/_n+l.x)/f;return dd(eo((i/_n+l.y)/f),ga(y),h)}function rv({min:s,max:i}){return 16383/Math.max(i[0]-s[0],i[1]-s[1],i[2]-s[2])}const ST=new Float64Array(16);function jf(s){const i=rv(s),l=uT(ST,[i,i,i]);return Df(l,l,((h=[])[0]=-(f=s.min)[0],h[1]=-f[1],h[2]=-f[2],h));var h,f}function T1(s){const i=(h=s.min,(l=ST)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=h[0],l[13]=h[1],l[14]=h[2],l[15]=1,l);var l,h;const f=1/rv(s);return Dc(i,i,[f,f,f])}function kT(s,i,l,h,f){const y=function(A){const P=_n/(2*Math.PI);return A/(2*Math.PI)/P}(l),x=[s,i,-l/(2*Math.PI)],E=cs(new Float64Array(16));return Df(E,E,x),Dc(E,E,[y,y,y]),v1(E,E,ie(-f)),ev(E,E,ie(-h)),E}function pd(s){return Ie(5,6,s)}function TT(s,i){const l=dd(i.lat,i.lng),h=function(Q){const ne=dd(Q._center.lat,Q._center.lng);let he=b1([],cd(0,1,0),ne);const we=cT([],-Q.angle,ne);he=ei(he,he,we),cT(we,-Q._pitch,he);const Re=Ao([],ne);return ma(Re,Re,tv(Q.cameraToCenterDistance/Q.pixelsPerMeter)),ei(Re,Re,we),dl([],ne,Re)}(s);return x=(f=x1([],h,l))[0],E=f[1],A=f[2],P=(y=l)[0],V=y[1],G=y[2],Y=(Z=Math.sqrt(x*x+E*E+A*A)*Math.sqrt(P*P+V*V+G*G))&&za(f,y)/Z,Math.acos(Math.min(Math.max(Y,-1),1));var f,y,x,E,A,P,V,G,Z,Y}function A1(s,i){return TT(s,i)>Math.PI/2*1.01}const AT=ie(85),Y5=Math.cos(AT),J5=Math.sin(AT),Vf=63710088e-1,MT=2*Math.PI*Vf;class Xn{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xn(xt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,h=this.lat*l,f=i.lat*l,y=Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos((i.lng-this.lng)*l);return Vf*Math.acos(Math.min(y,1))}toBounds(i=0){const l=360*i/40075017,h=l/Math.cos(Math.PI/180*this.lat);return new hu(new Xn(this.lng-h,this.lat-l),new Xn(this.lng+h,this.lat+l))}toEcef(i){const l=tv(i);return dd(this.lat,this.lng,Rs+l)}static convert(i){if(i instanceof Xn)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Xn(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Xn(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function M1(s){return MT*Math.cos(s*Math.PI/180)}function Os(s){return(180+s)/360}function zs(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function ds(s,i){return s/M1(i)}function ga(s){return 360*s-180}function eo(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function IT(s,i){return s*M1(eo(i))}const to=85.051129;function PT(s){return 1/Math.cos(s*Math.PI/180)}class fd{constructor(i,l,h=0){this.x=+i,this.y=+l,this.z=+h}static fromLngLat(i,l=0){const h=Xn.convert(i);return new fd(Os(h.lng),zs(h.lat),ds(l,h.lat))}toLngLat(){return new Xn(ga(this.x),eo(this.y))}toAltitude(){return IT(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/MT*PT(eo(this.y))}}function I1(s,i,l,h,f,y,x,E,A){const P=(i+h)/2,V=(l+f)/2,G=new k(P,V);E(G),function(Z,Y,Q,ne,he,we){const Re=Q-he,ye=ne-we;return Math.abs((ne-Y)*Re-(Q-Z)*ye)/Math.hypot(Re,ye)}(G.x,G.y,y.x,y.y,x.x,x.y)>=A?(I1(s,i,l,P,V,y,G,E,A),I1(s,P,V,h,f,G,x,E,A)):s.push(x)}function DT(s,i,l){let h=s[0],f=h.x,y=h.y;i(h);const x=[h];for(let E=1;E<s.length;E++){const A=s[E],{x:P,y:V}=A;i(A),I1(x,f,y,P,V,h,A,i,l),f=P,y=V,h=A}return x}function P1(s,i,l,h){if(h(i,l)){const f=i.add(l)._mult(.5);P1(s,i,f,h),P1(s,f,l,h)}else s.push(l)}function Q5(s,i){let l=s[0];const h=[l];for(let f=1;f<s.length;f++){const y=s[f];P1(h,l,y,i),l=y}return h}const D1=Math.pow(2,14)-1,RT=-D1-1;function eB(s,i){const l=Math.round(s.x*i),h=Math.round(s.y*i);return s.x=Ne(l,RT,D1),s.y=Ne(h,RT,D1),(l<s.x||l>s.x+1||h<s.y||h>s.y+1)&&Ke("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s}function pl(s,i,l){const h=s.loadGeometry(),f=s.extent,y=_n/f;if(i&&l&&l.projection.isReprojectedInTileSpace){const x=1<<i.z,{scale:E,x:A,y:P,projection:V}=l,G=Z=>{const Y=ga((i.x+Z.x/f)/x),Q=eo((i.y+Z.y/f)/x),ne=V.project(Y,Q);Z.x=(ne.x*E-A)*f,Z.y=(ne.y*E-P)*f};for(let Z=0;Z<h.length;Z++)if(s.type!==1)h[Z]=DT(h[Z],G,1);else{const Y=[];for(const Q of h[Z])Q.x<0||Q.x>=f||Q.y<0||Q.y>=f||(G(Q),Y.push(Q));h[Z]=Y}}for(const x of h)for(const E of x)eB(E,y);return h}function zc(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?pl(s):[]}}function iv(s,i,l,h,f){s.emplaceBack(2*i+(h+1)/2,2*l+(f+1)/2)}function ov(s,i,l){s.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class R1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new un,this.indexArray=new Qi,this.segments=new ui,this.programConfigurations=new Ic(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h,f){const y=this.layers[0],x=[];let E=null;y.type==="circle"&&(E=y.layout.get("circle-sort-key"));for(const{feature:P,id:V,index:G,sourceLayerIndex:Z}of i){const Y=this.layers[0]._featureFilter.needGeometry,Q=zc(P,Y);if(!this.layers[0]._featureFilter.filter(new qe(this.zoom),Q,h))continue;const ne=E?E.evaluate(Q,{},h):void 0,he={id:V,properties:P.properties,type:P.type,sourceLayerIndex:Z,index:G,geometry:Y?Q.geometry:pl(P,h,f),patterns:{},sortKey:ne};x.push(he)}E&&x.sort((P,V)=>P.sortKey-V.sortKey);let A=null;f.projection.name==="globe"&&(this.globeExtVertexArray=new fa,A=f.projection);for(const P of x){const{geometry:V,index:G,sourceLayerIndex:Z}=P,Y=i[G].feature;this.addFeature(P,V,G,l.availableImages,h,A),l.featureIndex.insert(Y,V,G,Z,this.index)}}update(i,l,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,j5.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,V5.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,l,h,f,y,x){for(const E of l)for(const A of E){const P=A.x,V=A.y;if(P<0||P>=_n||V<0||V>=_n)continue;if(x){const Y=x.projectTilePoint(P,V,y),Q=x.upVector(y,P,V),ne=this.globeExtVertexArray;ov(ne,Y,Q),ov(ne,Y,Q),ov(ne,Y,Q),ov(ne,Y,Q)}const G=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),Z=G.vertexLength;iv(this.layoutVertexArray,P,V,-1,-1),iv(this.layoutVertexArray,P,V,1,-1),iv(this.layoutVertexArray,P,V,1,1),iv(this.layoutVertexArray,P,V,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+2,Z+3),G.vertexLength+=4,G.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},f,y)}}function LT(s,i){for(let l=0;l<s.length;l++)if(Bc(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(Bc(s,i[l]))return!0;return!!L1(s,i)}function tB(s,i,l){return!!Bc(s,i)||!!O1(i,s,l)}function OT(s,i){if(s.length===1)return BT(i,s[0]);for(let l=0;l<i.length;l++){const h=i[l];for(let f=0;f<h.length;f++)if(Bc(s,h[f]))return!0}for(let l=0;l<s.length;l++)if(BT(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(L1(s,i[l]))return!0;return!1}function nB(s,i,l){if(s.length>1){if(L1(s,i))return!0;for(let h=0;h<i.length;h++)if(O1(i[h],s,l))return!0}for(let h=0;h<s.length;h++)if(O1(s[h],i,l))return!0;return!1}function L1(s,i){if(s.length===0||i.length===0)return!1;for(let l=0;l<s.length-1;l++){const h=s[l],f=s[l+1];for(let y=0;y<i.length-1;y++)if(rB(h,f,i[y],i[y+1]))return!0}return!1}function rB(s,i,l,h){return pt(s,l,h)!==pt(i,l,h)&&pt(s,i,l)!==pt(s,i,h)}function O1(s,i,l){const h=l*l;if(i.length===1)return s.distSqr(i[0])<h;for(let f=1;f<i.length;f++)if(zT(s,i[f-1],i[f])<h)return!0;return!1}function zT(s,i,l){const h=i.distSqr(l);if(h===0)return s.distSqr(i);const f=((s.x-i.x)*(l.x-i.x)+(s.y-i.y)*(l.y-i.y))/h;return s.distSqr(f<0?i:f>1?l:l.sub(i)._mult(f)._add(i))}function BT(s,i){let l,h,f,y=!1;for(let x=0;x<s.length;x++){l=s[x];for(let E=0,A=l.length-1;E<l.length;A=E++)h=l[E],f=l[A],h.y>i.y!=f.y>i.y&&i.x<(f.x-h.x)*(i.y-h.y)/(f.y-h.y)+h.x&&(y=!y)}return y}function Bc(s,i){let l=!1;for(let h=0,f=s.length-1;h<s.length;f=h++){const y=s[h],x=s[f];y.y>i.y!=x.y>i.y&&i.x<(x.x-y.x)*(i.y-y.y)/(x.y-y.y)+y.x&&(l=!l)}return l}function FT(s,i,l,h,f){for(const x of s)if(i<=x.x&&l<=x.y&&h>=x.x&&f>=x.y)return!0;const y=[new k(i,l),new k(i,f),new k(h,f),new k(h,l)];if(s.length>2){for(const x of y)if(Bc(s,x))return!0}for(let x=0;x<s.length-1;x++)if(iB(s[x],s[x+1],y))return!0;return!1}function iB(s,i,l){const h=l[0],f=l[2];if(s.x<h.x&&i.x<h.x||s.x>f.x&&i.x>f.x||s.y<h.y&&i.y<h.y||s.y>f.y&&i.y>f.y)return!1;const y=pt(s,i,l[0]);return y!==pt(s,i,l[1])||y!==pt(s,i,l[2])||y!==pt(s,i,l[3])}function md(s,i,l){const h=i.paint.get(s).value;return h.kind==="constant"?h.value:l.programConfigurations.get(i.id).getMaxValue(s)}function av(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function NT(s,i,l,h,f){if(!i[0]&&!i[1])return s;const y=k.convert(i)._mult(f);l==="viewport"&&y._rotate(-h);const x=[];for(let E=0;E<s.length;E++)x.push(s[E].sub(y));return x}function UT(s,i,l,h){const f=k.convert(s)._mult(h);return i==="viewport"&&f._rotate(-l),f}Jt(R1,"CircleBucket",{omit:["layers"]});const oB=new It({"circle-sort-key":new at(gt.layout_circle["circle-sort-key"])});var aB={paint:new It({"circle-radius":new at(gt.paint_circle["circle-radius"]),"circle-color":new at(gt.paint_circle["circle-color"]),"circle-blur":new at(gt.paint_circle["circle-blur"]),"circle-opacity":new at(gt.paint_circle["circle-opacity"]),"circle-translate":new Ge(gt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ge(gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ge(gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ge(gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new at(gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new at(gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new at(gt.paint_circle["circle-stroke-opacity"])}),layout:oB};function jT(s,i,l,h,f,y,x,E,A){if(y&&s.queryGeometry.isAboveHorizon)return!1;y&&(A*=s.pixelToTileUnitsFactor);const P=s.tileID.canonical,V=l.projection.upVectorScale(P,l.center.lat,l.worldSize).metersToTile;for(const G of i)for(const Z of G){const Y=Z.add(E),Q=f&&l.elevation?l.elevation.exaggeration()*f.getElevationAt(Y.x,Y.y,!0):0,ne=l.projection.projectTilePoint(Y.x,Y.y,P);if(Q>0){const ye=l.projection.upVector(P,Y.x,Y.y);ne.x+=ye[0]*V*Q,ne.y+=ye[1]*V*Q,ne.z+=ye[2]*V*Q}const he=y?Y:sB(ne.x,ne.y,ne.z,h),we=y?s.tilespaceRays.map(ye=>uB(ye,Q)):s.queryGeometry.screenGeometry,Re=Rc([],[ne.x,ne.y,ne.z,1],h);if(!x&&y?A*=Re[3]/l.cameraToCenterDistance:x&&!y&&(A*=l.cameraToCenterDistance/Re[3]),y){const ye=eo((Z.y/_n+P.y)/(1<<P.z));A/=l.projection.pixelsPerMeter(ye,1)/ds(1,ye)}if(tB(we,he,A))return!0}return!1}function sB(s,i,l,h){const f=Rc([],[s,i,l,1],h);return new k(f[0]/f[3],f[1]/f[3])}const VT=cd(0,0,0),lB=cd(0,0,1);function uB(s,i){const l=_1();return VT[2]=i,s.intersectsPlane(VT,lB,l),new k(l[0],l[1])}class $T extends R1{}function HT(s,{width:i,height:l},h,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==i*l*h)throw new RangeError("mismatched image size")}else f=new Uint8Array(i*l*h);return s.width=i,s.height=l,s.data=f,s}function WT(s,i,l){const{width:h,height:f}=i;h===s.width&&f===s.height||(z1(s,i,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,h),height:Math.min(s.height,f)},l),s.width=h,s.height=f,s.data=i.data)}function z1(s,i,l,h,f,y){if(f.width===0||f.height===0)return i;if(f.width>s.width||f.height>s.height||l.x>s.width-f.width||l.y>s.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>i.width||f.height>i.height||h.x>i.width-f.width||h.y>i.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,E=i.data;for(let A=0;A<f.height;A++){const P=((l.y+A)*s.width+l.x)*y,V=((h.y+A)*i.width+h.x)*y;for(let G=0;G<f.width*y;G++)E[V+G]=x[P+G]}return i}Jt($T,"HeatmapBucket",{omit:["layers"]});class fl{constructor(i,l){HT(this,i,1,l)}resize(i){WT(this,new fl(i),1)}clone(){return new fl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,f,y){z1(i,l,h,f,y,1)}}class ta{constructor(i,l){HT(this,i,4,l)}resize(i){WT(this,new ta(i),4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,h,f,y){z1(i,l,h,f,y,4)}}Jt(fl,"AlphaImage"),Jt(ta,"RGBAImage");var cB={paint:new It({"heatmap-radius":new at(gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new at(gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ge(gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new kt(gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ge(gt.paint_heatmap["heatmap-opacity"])})};function B1(s){const i={},l=s.resolution||256,h=s.clips?s.clips.length:1,f=s.image||new ta({width:l,height:h}),y=(x,E,A)=>{i[s.evaluationKey]=A;const P=s.expression.evaluate(i);f.data[x+E+0]=Math.floor(255*P.r/P.a),f.data[x+E+1]=Math.floor(255*P.g/P.a),f.data[x+E+2]=Math.floor(255*P.b/P.a),f.data[x+E+3]=Math.floor(255*P.a)};if(s.clips)for(let x=0,E=0;x<h;++x,E+=4*l)for(let A=0,P=0;A<l;A++,P+=4){const V=A/(l-1),{start:G,end:Z}=s.clips[x];y(E,P,G*(1-V)+Z*V)}else for(let x=0,E=0;x<l;x++,E+=4)y(0,E,x/(l-1));return f}var hB={paint:new It({"hillshade-illumination-direction":new Ge(gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ge(gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ge(gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ge(gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ge(gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ge(gt.paint_hillshade["hillshade-accent-color"])})};const dB=an([{name:"a_pos",components:2,type:"Int16"}],4),{members:pB}=dB;var gd={};function sv(s,i,l){l=l||2;var h,f,y,x,E,A,P,V=i&&i.length,G=V?i[0]*l:s.length,Z=GT(s,0,G,l,!0),Y=[];if(!Z||Z.next===Z.prev)return Y;if(V&&(Z=function(ne,he,we,Re){var ye,Pe,Be,Oe=[];for(ye=0,Pe=he.length;ye<Pe;ye++)(Be=GT(ne,he[ye]*Re,ye<Pe-1?he[ye+1]*Re:ne.length,Re,!1))===Be.next&&(Be.steiner=!0),Oe.push(bB(Be));for(Oe.sort(vB),ye=0;ye<Oe.length;ye++)we=_B(Oe[ye],we);return we}(s,i,Z,l)),s.length>80*l){h=y=s[0],f=x=s[1];for(var Q=l;Q<G;Q+=l)(E=s[Q])<h&&(h=E),(A=s[Q+1])<f&&(f=A),E>y&&(y=E),A>x&&(x=A);P=(P=Math.max(y-h,x-f))!==0?32767/P:0}return $f(Z,Y,l,h,f,P,0),Y}function GT(s,i,l,h,f){var y,x;if(f===U1(s,i,l,h)>0)for(y=i;y<l;y+=h)x=XT(y,s[y],s[y+1],x);else for(y=l-h;y>=i;y-=h)x=XT(y,s[y],s[y+1],x);return x&&lv(x,x.next)&&(Wf(x),x=x.next),x}function Fc(s,i){if(!s)return s;i||(i=s);var l,h=s;do if(l=!1,h.steiner||!lv(h,h.next)&&ci(h.prev,h,h.next)!==0)h=h.next;else{if(Wf(h),(h=i=h.prev)===h.next)break;l=!0}while(l||h!==i);return i}function $f(s,i,l,h,f,y,x){if(s){!x&&y&&function(V,G,Z,Y){var Q=V;do Q.z===0&&(Q.z=F1(Q.x,Q.y,G,Z,Y)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==V);Q.prevZ.nextZ=null,Q.prevZ=null,function(ne){var he,we,Re,ye,Pe,Be,Oe,it,et=1;do{for(we=ne,ne=null,Pe=null,Be=0;we;){for(Be++,Re=we,Oe=0,he=0;he<et&&(Oe++,Re=Re.nextZ);he++);for(it=et;Oe>0||it>0&&Re;)Oe!==0&&(it===0||!Re||we.z<=Re.z)?(ye=we,we=we.nextZ,Oe--):(ye=Re,Re=Re.nextZ,it--),Pe?Pe.nextZ=ye:ne=ye,ye.prevZ=Pe,Pe=ye;we=Re}Pe.nextZ=null,et*=2}while(Be>1)}(Q)}(s,h,f,y);for(var E,A,P=s;s.prev!==s.next;)if(E=s.prev,A=s.next,y?mB(s,h,f,y):fB(s))i.push(E.i/l|0),i.push(s.i/l|0),i.push(A.i/l|0),Wf(s),s=A.next,P=A.next;else if((s=A)===P){x?x===1?$f(s=gB(Fc(s),i,l),i,l,h,f,y,2):x===2&&yB(s,i,l,h,f,y):$f(Fc(s),i,l,h,f,y,1);break}}}function fB(s){var i=s.prev,l=s,h=s.next;if(ci(i,l,h)>=0)return!1;for(var f=i.x,y=l.x,x=h.x,E=i.y,A=l.y,P=h.y,V=f<y?f<x?f:x:y<x?y:x,G=E<A?E<P?E:P:A<P?A:P,Z=f>y?f>x?f:x:y>x?y:x,Y=E>A?E>P?E:P:A>P?A:P,Q=h.next;Q!==i;){if(Q.x>=V&&Q.x<=Z&&Q.y>=G&&Q.y<=Y&&yd(f,E,y,A,x,P,Q.x,Q.y)&&ci(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function mB(s,i,l,h){var f=s.prev,y=s,x=s.next;if(ci(f,y,x)>=0)return!1;for(var E=f.x,A=y.x,P=x.x,V=f.y,G=y.y,Z=x.y,Y=E<A?E<P?E:P:A<P?A:P,Q=V<G?V<Z?V:Z:G<Z?G:Z,ne=E>A?E>P?E:P:A>P?A:P,he=V>G?V>Z?V:Z:G>Z?G:Z,we=F1(Y,Q,i,l,h),Re=F1(ne,he,i,l,h),ye=s.prevZ,Pe=s.nextZ;ye&&ye.z>=we&&Pe&&Pe.z<=Re;){if(ye.x>=Y&&ye.x<=ne&&ye.y>=Q&&ye.y<=he&&ye!==f&&ye!==x&&yd(E,V,A,G,P,Z,ye.x,ye.y)&&ci(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Pe.x>=Y&&Pe.x<=ne&&Pe.y>=Q&&Pe.y<=he&&Pe!==f&&Pe!==x&&yd(E,V,A,G,P,Z,Pe.x,Pe.y)&&ci(Pe.prev,Pe,Pe.next)>=0))return!1;Pe=Pe.nextZ}for(;ye&&ye.z>=we;){if(ye.x>=Y&&ye.x<=ne&&ye.y>=Q&&ye.y<=he&&ye!==f&&ye!==x&&yd(E,V,A,G,P,Z,ye.x,ye.y)&&ci(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Pe&&Pe.z<=Re;){if(Pe.x>=Y&&Pe.x<=ne&&Pe.y>=Q&&Pe.y<=he&&Pe!==f&&Pe!==x&&yd(E,V,A,G,P,Z,Pe.x,Pe.y)&&ci(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.nextZ}return!0}function gB(s,i,l){var h=s;do{var f=h.prev,y=h.next.next;!lv(f,y)&&qT(f,h,h.next,y)&&Hf(f,y)&&Hf(y,f)&&(i.push(f.i/l|0),i.push(h.i/l|0),i.push(y.i/l|0),Wf(h),Wf(h.next),h=s=y),h=h.next}while(h!==s);return Fc(h)}function yB(s,i,l,h,f,y){var x=s;do{for(var E=x.next.next;E!==x.prev;){if(x.i!==E.i&&wB(x,E)){var A=ZT(x,E);return x=Fc(x,x.next),A=Fc(A,A.next),$f(x,i,l,h,f,y,0),void $f(A,i,l,h,f,y,0)}E=E.next}x=x.next}while(x!==s)}function vB(s,i){return s.x-i.x}function _B(s,i){var l=function(f,y){var x,E=y,A=f.x,P=f.y,V=-1/0;do{if(P<=E.y&&P>=E.next.y&&E.next.y!==E.y){var G=E.x+(P-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(G<=A&&G>V&&(V=G,x=E.x<E.next.x?E:E.next,G===A))return x}E=E.next}while(E!==y);if(!x)return null;var Z,Y=x,Q=x.x,ne=x.y,he=1/0;E=x;do A>=E.x&&E.x>=Q&&A!==E.x&&yd(P<ne?A:V,P,Q,ne,P<ne?V:A,P,E.x,E.y)&&(Z=Math.abs(P-E.y)/(A-E.x),Hf(E,f)&&(Z<he||Z===he&&(E.x>x.x||E.x===x.x&&xB(x,E)))&&(x=E,he=Z)),E=E.next;while(E!==Y);return x}(s,i);if(!l)return i;var h=ZT(l,s);return Fc(h,h.next),Fc(l,l.next)}function xB(s,i){return ci(s.prev,s,i.prev)<0&&ci(i.next,s,s.next)<0}function F1(s,i,l,h,f){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*f|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function bB(s){var i=s,l=s;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==s);return l}function yd(s,i,l,h,f,y,x,E){return(f-x)*(i-E)>=(s-x)*(y-E)&&(s-x)*(h-E)>=(l-x)*(i-E)&&(l-x)*(y-E)>=(f-x)*(h-E)}function wB(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(l,h){var f=l;do{if(f.i!==l.i&&f.next.i!==l.i&&f.i!==h.i&&f.next.i!==h.i&&qT(f,f.next,l,h))return!0;f=f.next}while(f!==l);return!1}(s,i)&&(Hf(s,i)&&Hf(i,s)&&function(l,h){var f=l,y=!1,x=(l.x+h.x)/2,E=(l.y+h.y)/2;do f.y>E!=f.next.y>E&&f.next.y!==f.y&&x<(f.next.x-f.x)*(E-f.y)/(f.next.y-f.y)+f.x&&(y=!y),f=f.next;while(f!==l);return y}(s,i)&&(ci(s.prev,s,i.prev)||ci(s,i.prev,i))||lv(s,i)&&ci(s.prev,s,s.next)>0&&ci(i.prev,i,i.next)>0)}function ci(s,i,l){return(i.y-s.y)*(l.x-i.x)-(i.x-s.x)*(l.y-i.y)}function lv(s,i){return s.x===i.x&&s.y===i.y}function qT(s,i,l,h){var f=cv(ci(s,i,l)),y=cv(ci(s,i,h)),x=cv(ci(l,h,s)),E=cv(ci(l,h,i));return f!==y&&x!==E||!(f!==0||!uv(s,l,i))||!(y!==0||!uv(s,h,i))||!(x!==0||!uv(l,s,h))||!(E!==0||!uv(l,i,h))}function uv(s,i,l){return i.x<=Math.max(s.x,l.x)&&i.x>=Math.min(s.x,l.x)&&i.y<=Math.max(s.y,l.y)&&i.y>=Math.min(s.y,l.y)}function cv(s){return s>0?1:s<0?-1:0}function Hf(s,i){return ci(s.prev,s,s.next)<0?ci(s,i,s.next)>=0&&ci(s,s.prev,i)>=0:ci(s,i,s.prev)<0||ci(s,s.next,i)<0}function ZT(s,i){var l=new N1(s.i,s.x,s.y),h=new N1(i.i,i.x,i.y),f=s.next,y=i.prev;return s.next=i,i.prev=s,l.next=f,f.prev=l,h.next=l,l.prev=h,y.next=h,h.prev=y,h}function XT(s,i,l,h){var f=new N1(s,i,l);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function Wf(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function N1(s,i,l){this.i=s,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function U1(s,i,l,h){for(var f=0,y=i,x=l-h;y<l;y+=h)f+=(s[x]-s[y])*(s[y+1]+s[x+1]),x=y;return f}function EB(s,i,l,h,f){KT(s,i,l||0,h||s.length-1,f||CB)}function KT(s,i,l,h,f){for(;h>l;){if(h-l>600){var y=h-l+1,x=i-l+1,E=Math.log(y),A=.5*Math.exp(2*E/3),P=.5*Math.sqrt(E*A*(y-A)/y)*(x-y/2<0?-1:1);KT(s,i,Math.max(l,Math.floor(i-x*A/y+P)),Math.min(h,Math.floor(i+(y-x)*A/y+P)),f)}var V=s[i],G=l,Z=h;for(Gf(s,l,i),f(s[h],V)>0&&Gf(s,l,h);G<Z;){for(Gf(s,G,Z),G++,Z--;f(s[G],V)<0;)G++;for(;f(s[Z],V)>0;)Z--}f(s[l],V)===0?Gf(s,l,Z):Gf(s,++Z,h),Z<=i&&(l=Z+1),i<=Z&&(h=Z-1)}}function Gf(s,i,l){var h=s[i];s[i]=s[l],s[l]=h}function CB(s,i){return s<i?-1:s>i?1:0}function j1(s,i){const l=s.length;if(l<=1)return[s];const h=[];let f,y;for(let x=0;x<l;x++){const E=St(s[x]);E!==0&&(s[x].area=Math.abs(E),y===void 0&&(y=E<0),y===E<0?(f&&h.push(f),f=[s[x]]):f.push(s[x]))}if(f&&h.push(f),i>1)for(let x=0;x<h.length;x++)h[x].length<=i||(EB(h[x],i,1,h[x].length-1,SB),h[x]=h[x].slice(0,i));return h}function SB(s,i){return i.area-s.area}function V1(s,i,l){const h=l.patternDependencies;let f=!1;for(const y of i){const x=y.paint.get(`${s}-pattern`);x.isConstant()||(f=!0);const E=x.constantOr(null);E&&(f=!0,h[E]=!0)}return f}function $1(s,i,l,h,f){const y=f.patternDependencies;for(const x of i){const E=x.paint.get(`${s}-pattern`).value;if(E.kind!=="constant"){let A=E.evaluate({zoom:h},l,{},f.availableImages);A=A&&A.name?A.name:A,y[A]=!0,l.patterns[x.id]=A}}return l}({get exports(){return gd},set exports(s){gd=s}}).exports=sv,gd.default=sv,sv.deviation=function(s,i,l,h){var f=i&&i.length,y=Math.abs(U1(s,0,f?i[0]*l:s.length,l));if(f)for(var x=0,E=i.length;x<E;x++)y-=Math.abs(U1(s,i[x]*l,x<E-1?i[x+1]*l:s.length,l));var A=0;for(x=0;x<h.length;x+=3){var P=h[x]*l,V=h[x+1]*l,G=h[x+2]*l;A+=Math.abs((s[P]-s[G])*(s[V+1]-s[P+1])-(s[P]-s[V])*(s[G+1]-s[P+1]))}return y===0&&A===0?0:Math.abs((A-y)/y)},sv.flatten=function(s){for(var i=s[0][0].length,l={vertices:[],holes:[],dimensions:i},h=0,f=0;f<s.length;f++){for(var y=0;y<s[f].length;y++)for(var x=0;x<i;x++)l.vertices.push(s[f][y][x]);f>0&&l.holes.push(h+=s[f-1].length)}return l};class hv{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new un,this.indexArray=new Qi,this.indexArray2=new Ps,this.programConfigurations=new Ic(i.layers,i.zoom),this.segments=new ui,this.segments2=new ui,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=i.projection}populate(i,l,h,f){this.hasPattern=V1("fill",this.layers,l);const y=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:E,id:A,index:P,sourceLayerIndex:V}of i){const G=this.layers[0]._featureFilter.needGeometry,Z=zc(E,G);if(!this.layers[0]._featureFilter.filter(new qe(this.zoom),Z,h))continue;const Y=y?y.evaluate(Z,{},h,l.availableImages):void 0,Q={id:A,properties:E.properties,type:E.type,sourceLayerIndex:V,index:P,geometry:G?Z.geometry:pl(E,h,f),patterns:{},sortKey:Y};x.push(Q)}y&&x.sort((E,A)=>E.sortKey-A.sortKey);for(const E of x){const{geometry:A,index:P,sourceLayerIndex:V}=E;if(this.hasPattern){const G=$1("fill",this.layers,E,this.zoom,l);this.patternFeatures.push(G)}else this.addFeature(E,A,P,h,{},l.availableImages);l.featureIndex.insert(i[P].feature,A,P,V,this.index)}}update(i,l,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h,f)}addFeatures(i,l,h,f,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,h,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,pB),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,h,f,y,x=[]){for(const E of j1(l,500)){let A=0;for(const Q of E)A+=Q.length;const P=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),V=P.vertexLength,G=[],Z=[];for(const Q of E){if(Q.length===0)continue;Q!==E[0]&&Z.push(G.length/2);const ne=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),he=ne.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(he+Q.length-1,he),G.push(Q[0].x),G.push(Q[0].y);for(let we=1;we<Q.length;we++)this.layoutVertexArray.emplaceBack(Q[we].x,Q[we].y),this.indexArray2.emplaceBack(he+we-1,he+we),G.push(Q[we].x),G.push(Q[we].y);ne.vertexLength+=Q.length,ne.primitiveLength+=Q.length}const Y=gd(G,Z);for(let Q=0;Q<Y.length;Q+=3)this.indexArray.emplaceBack(V+Y[Q],V+Y[Q+1],V+Y[Q+2]);P.vertexLength+=A,P.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,x,f)}}Jt(hv,"FillBucket",{omit:["layers","patternFeatures"]});const kB=new It({"fill-sort-key":new at(gt.layout_fill["fill-sort-key"])});var TB={paint:new It({"fill-antialias":new Ge(gt.paint_fill["fill-antialias"]),"fill-opacity":new at(gt.paint_fill["fill-opacity"]),"fill-color":new at(gt.paint_fill["fill-color"]),"fill-outline-color":new at(gt.paint_fill["fill-outline-color"]),"fill-translate":new Ge(gt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ge(gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new at(gt.paint_fill["fill-pattern"])}),layout:kB};const AB=an([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),MB=an([{name:"a_centroid_pos",components:2,type:"Uint16"}]),IB=an([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:PB}=AB;var dv={},DB=k,YT=vd;function vd(s,i,l,h,f){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=h,this._values=f,s.readFields(RB,this,i)}function RB(s,i,l){s==1?i.id=l.readVarint():s==2?function(h,f){for(var y=h.readVarint()+h.pos;h.pos<y;){var x=f._keys[h.readVarint()],E=f._values[h.readVarint()];f.properties[x]=E}}(l,i):s==3?i.type=l.readVarint():s==4&&(i._geometry=l.pos)}function LB(s){for(var i,l,h=0,f=0,y=s.length,x=y-1;f<y;x=f++)h+=((l=s[x]).x-(i=s[f]).x)*(i.y+l.y);return h}vd.types=["Unknown","Point","LineString","Polygon"],vd.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,l=s.readVarint()+s.pos,h=1,f=0,y=0,x=0,E=[];s.pos<l;){if(f<=0){var A=s.readVarint();h=7&A,f=A>>3}if(f--,h===1||h===2)y+=s.readSVarint(),x+=s.readSVarint(),h===1&&(i&&E.push(i),i=[]),i.push(new DB(y,x));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&E.push(i),E},vd.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,l=1,h=0,f=0,y=0,x=1/0,E=-1/0,A=1/0,P=-1/0;s.pos<i;){if(h<=0){var V=s.readVarint();l=7&V,h=V>>3}if(h--,l===1||l===2)(f+=s.readSVarint())<x&&(x=f),f>E&&(E=f),(y+=s.readSVarint())<A&&(A=y),y>P&&(P=y);else if(l!==7)throw new Error("unknown command "+l)}return[x,A,E,P]},vd.prototype.toGeoJSON=function(s,i,l){var h,f,y=this.extent*Math.pow(2,l),x=this.extent*s,E=this.extent*i,A=this.loadGeometry(),P=vd.types[this.type];function V(Y){for(var Q=0;Q<Y.length;Q++){var ne=Y[Q];Y[Q]=[360*(ne.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(ne.y+E)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var G=[];for(h=0;h<A.length;h++)G[h]=A[h][0];V(A=G);break;case 2:for(h=0;h<A.length;h++)V(A[h]);break;case 3:for(A=function(Y){var Q=Y.length;if(Q<=1)return[Y];for(var ne,he,we=[],Re=0;Re<Q;Re++){var ye=LB(Y[Re]);ye!==0&&(he===void 0&&(he=ye<0),he===ye<0?(ne&&we.push(ne),ne=[Y[Re]]):ne.push(Y[Re]))}return ne&&we.push(ne),we}(A),h=0;h<A.length;h++)for(f=0;f<A[h].length;f++)V(A[h][f])}A.length===1?A=A[0]:P="Multi"+P;var Z={type:"Feature",geometry:{type:P,coordinates:A},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var OB=YT,JT=QT;function QT(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(zB,this,i),this.length=this._features.length}function zB(s,i,l){s===15?i.version=l.readVarint():s===1?i.name=l.readString():s===5?i.extent=l.readVarint():s===2?i._features.push(l.pos):s===3?i._keys.push(l.readString()):s===4&&i._values.push(function(h){for(var f=null,y=h.readVarint()+h.pos;h.pos<y;){var x=h.readVarint()>>3;f=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return f}(l))}QT.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new OB(this._pbf,i,this.extent,this._keys,this._values)};var BB=JT;function FB(s,i,l){if(s===3){var h=new BB(l,l.readVarint()+l.pos);h.length&&(i[h.name]=h)}}var H1=dv.VectorTile=function(s,i){this.layers=s.readFields(FB,{},i)},pv=dv.VectorTileFeature=YT;function fv(s,i,l,h){const f=[],y=h===0?(x,E,A,P,V,G)=>{x.push(new k(G,A+(G-E)/(P-E)*(V-A)))}:(x,E,A,P,V,G)=>{x.push(new k(E+(G-A)/(V-A)*(P-E),G))};for(const x of s){const E=[];for(const A of x){if(A.length<=2)continue;const P=[];for(let Z=0;Z<A.length-1;Z++){const Y=A[Z].x,Q=A[Z].y,ne=A[Z+1].x,he=A[Z+1].y,we=h===0?Y:Q,Re=h===0?ne:he;we<i?Re>i&&y(P,Y,Q,ne,he,i):we>l?Re<l&&y(P,Y,Q,ne,he,l):P.push(A[Z]),Re<i&&we>=i&&y(P,Y,Q,ne,he,i),Re>l&&we<=l&&y(P,Y,Q,ne,he,l)}let V=A[A.length-1];const G=h===0?V.x:V.y;G>=i&&G<=l&&P.push(V),P.length&&(V=P[P.length-1],P[0].x===V.x&&P[0].y===V.y||P.push(P[0]),E.push(P))}E.length&&f.push(E)}return f}dv.VectorTileLayer=JT;const NB=pv.types,UB=Math.pow(2,13);function qf(s,i,l,h,f,y,x,E){s.emplaceBack((i<<1)+x,(l<<1)+y,(Math.floor(h*UB)<<1)+f,Math.round(E))}function Zf(s,i,l){s.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class e2{constructor(){this.acc=new k(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new k(i.x,i.y),this.max=new k(i.x,i.y))}append(i,l){this.currentPolyCount.edges++,this.acc._add(i);const h=this.min,f=this.max;i.x<h.x?h.x=i.x:i.x>f.x&&(f.x=i.x),i.y<h.y?h.y=i.y:i.y>f.y&&(f.y=i.y),((i.x===0||i.x===_n)&&i.x===l.x)!=((i.y===0||i.y===_n)&&i.y===l.y)&&this.processBorderOverlap(i,l),l.x<0!=i.x<0&&this.addBorderIntersection(0,Hn(l.y,i.y,(0-l.x)/(i.x-l.x))),l.x>_n!=i.x>_n&&this.addBorderIntersection(1,Hn(l.y,i.y,(_n-l.x)/(i.x-l.x))),l.y<0!=i.y<0&&this.addBorderIntersection(2,Hn(l.x,i.x,(0-l.y)/(i.y-l.y))),l.y>_n!=i.y>_n&&this.addBorderIntersection(3,Hn(l.x,i.x,(_n-l.y)/(i.y-l.y)))}addBorderIntersection(i,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[i];l<h[0]&&(h[0]=l),l>h[1]&&(h[1]=l)}processBorderOverlap(i,l){if(i.x===l.x){if(i.y===l.y)return;const h=i.x===0?0:1;this.addBorderIntersection(h,l.y),this.addBorderIntersection(h,i.y)}else{const h=i.y===0?2:3;this.addBorderIntersection(h,l.x),this.addBorderIntersection(h,i.x)}}centroid(){const i=this.polyCount.reduce((l,h)=>l+h.edges,0);return i!==0?this.acc.div(i)._round():new k(0,0)}span(){return new k(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,l)=>i+ +(l[0]!==Number.MAX_VALUE),0)}}class Xf{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new ir,this.centroidVertexArray=new tT,this.indexArray=new Qi,this.programConfigurations=new Ic(i.layers,i.zoom),this.segments=new ui,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=i.enableTerrain}populate(i,l,h,f){this.features=[],this.hasPattern=V1("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(y){const x=Math.exp(Math.PI*(1-y.y/(1<<y.z)*2));return 80150034*x/(x*x+1)/_n/(1<<y.z)}(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:y,id:x,index:E,sourceLayerIndex:A}of i){const P=this.layers[0]._featureFilter.needGeometry,V=zc(y,P);if(!this.layers[0]._featureFilter.filter(new qe(this.zoom),V,h))continue;const G={id:x,sourceLayerIndex:A,index:E,geometry:P?V.geometry:pl(y,h,f),properties:y.properties,type:y.type,patterns:{}},Z=this.layoutVertexArray.length;this.hasPattern?this.features.push($1("fill-extrusion",this.layers,G,this.zoom,l)):this.addFeature(G,G.geometry,E,h,{},l.availableImages,f),l.featureIndex.insert(y,G.geometry,E,A,this.index,Z)}this.sortBorders()}addFeatures(i,l,h,f,y){for(const x of this.features){const{geometry:E}=x;this.addFeature(x,E,x.index,l,h,f,y)}this.sortBorders()}update(i,l,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,PB),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,IB.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,MB.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,h,f,y,x,E){const A=[new k(0,0),new k(_n,_n)],P=E.projection,V=P.name==="globe",G=this.enableTerrain&&!V?new e2:null,Z=NB[i.type]==="Polygon";V&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new fa);const Y=j1(l,500);for(let we=Y.length-1;we>=0;we--){const Re=Y[we];(Re.length===0||(Q=Re[0]).every(ye=>ye.x<=0)||Q.every(ye=>ye.x>=_n)||Q.every(ye=>ye.y<=0)||Q.every(ye=>ye.y>=_n))&&Y.splice(we,1)}var Q;let ne;if(V)ne=s2(Y,A,f);else{ne=[];for(const we of Y)ne.push({polygon:we,bounds:A})}const he=Z?this.edgeRadius:0;for(const{polygon:we,bounds:Re}of ne){let ye=0,Pe=0;for(const Oe of we)Z&&!Oe[0].equals(Oe[Oe.length-1])&&Oe.push(Oe[0]),Pe+=Z?Oe.length-1:Oe.length;const Be=this.segments.prepareSegment((Z?5:4)*Pe,this.layoutVertexArray,this.indexArray);if(Z){const Oe=[],it=[];ye=Be.vertexLength;for(const yt of we){let Rt,lt;yt.length&&yt!==we[0]&&it.push(Oe.length/2),Rt=yt[1].sub(yt[0])._perp()._unit();for(let bt=1;bt<yt.length;bt++){const Ct=yt[bt],Mt=yt[bt===yt.length-1?1:bt+1];let{x:Lt,y:ut}=Ct;if(he){lt=Mt.sub(Ct)._perp()._unit();const jt=Rt.add(lt)._unit(),dn=he*Math.min(4,1/(Rt.x*jt.x+Rt.y*jt.y));Lt+=dn*jt.x,ut+=dn*jt.y,Rt=lt}qf(this.layoutVertexArray,Lt,ut,0,0,1,1,0),Be.vertexLength++,Oe.push(Ct.x,Ct.y),V&&Zf(this.layoutVertexExtArray,P.projectTilePoint(Lt,ut,f),P.upVector(f,Lt,ut))}}const et=gd(Oe,it);for(let yt=0;yt<et.length;yt+=3)this.indexArray.emplaceBack(ye+et[yt],ye+et[yt+2],ye+et[yt+1]),Be.primitiveLength++}for(const Oe of we){G&&Oe.length&&G.startRing(Oe[0]);let it,et,yt,Rt=Oe.length>4&&i2(Oe[Oe.length-2],Oe[0],Oe[1]),lt=he?jB(Oe[Oe.length-2],Oe[0],Oe[1],he):0;et=Oe[1].sub(Oe[0])._perp()._unit();let bt=!0;for(let Ct=1,Mt=0;Ct<Oe.length;Ct++){let Lt=Oe[Ct-1],ut=Oe[Ct];const jt=Oe[Ct===Oe.length-1?1:Ct+1];if(G&&Z&&G.currentPolyCount.top++,r2(ut,Lt,Re)){he&&(et=jt.sub(ut)._perp()._unit(),bt=!bt);continue}G&&G.append(ut,Lt);const dn=ut.sub(Lt)._perp(),Gt=dn.x/(Math.abs(dn.x)+Math.abs(dn.y)),tn=dn.y>0?1:0,Vt=Lt.dist(ut);if(Mt+Vt>32768&&(Mt=0),he){yt=jt.sub(ut)._perp()._unit();let Mn=n2(Lt,ut,jt,t2(et,yt),he);isNaN(Mn)&&(Mn=0);const gn=ut.sub(Lt)._unit();Lt=Lt.add(gn.mult(lt))._round(),ut=ut.add(gn.mult(-Mn))._round(),lt=Mn,et=yt}const fn=Be.vertexLength,zn=Oe.length>4&&i2(Lt,ut,jt);let Dn=o2(Mt,Rt,bt);if(qf(this.layoutVertexArray,Lt.x,Lt.y,Gt,tn,0,0,Dn),qf(this.layoutVertexArray,Lt.x,Lt.y,Gt,tn,0,1,Dn),Mt+=Vt,Dn=o2(Mt,zn,!bt),Rt=zn,qf(this.layoutVertexArray,ut.x,ut.y,Gt,tn,0,0,Dn),qf(this.layoutVertexArray,ut.x,ut.y,Gt,tn,0,1,Dn),Be.vertexLength+=4,this.indexArray.emplaceBack(fn+0,fn+1,fn+2),this.indexArray.emplaceBack(fn+1,fn+3,fn+2),Be.primitiveLength+=2,he){const Mn=ye+(Ct===1?Oe.length-2:Ct-2),gn=Ct===1?ye:Mn+1;if(this.indexArray.emplaceBack(fn+1,Mn,fn+3),this.indexArray.emplaceBack(Mn,gn,fn+3),Be.primitiveLength+=2,it===void 0&&(it=fn),!r2(jt,Oe[Ct],Re)){const ar=Ct===Oe.length-1?it:Be.vertexLength;this.indexArray.emplaceBack(fn+2,fn+3,ar),this.indexArray.emplaceBack(fn+3,ar+1,ar),this.indexArray.emplaceBack(fn+3,gn,ar+1),Be.primitiveLength+=3}bt=!bt}if(V){const Mn=this.layoutVertexExtArray,gn=P.projectTilePoint(Lt.x,Lt.y,f),ar=P.projectTilePoint(ut.x,ut.y,f),En=P.upVector(f,Lt.x,Lt.y),Bn=P.upVector(f,ut.x,ut.y);Zf(Mn,gn,En),Zf(Mn,gn,En),Zf(Mn,ar,Bn),Zf(Mn,ar,Bn)}}Z&&(ye+=Oe.length-1)}}if(G&&G.polyCount.length>0){if(G.borders){G.vertexArrayOffset=this.centroidVertexArray.length;const we=G.borders,Re=this.featuresOnBorder.push(G)-1;for(let ye=0;ye<4;ye++)we[ye][0]!==Number.MAX_VALUE&&this.borders[ye].push(Re)}this.encodeCentroid(G.borders?void 0:G.centroid(),G)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,x,f)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((l,h)=>this.featuresOnBorder[l].borders[i][0]-this.featuresOnBorder[h].borders[i][0])}encodeCentroid(i,l,h=!0){let f,y;if(i)if(i.y!==0){const E=l.span()._mult(this.tileToMeter);f=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(E.x/10)),y=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(E.y/10))}else f=Math.ceil(7*(i.x+450)),y=0;else f=0,y=+h;let x=h?this.centroidVertexArray.length:l.vertexArrayOffset;for(const E of l.polyCount){h&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*E.edges+E.top);for(let A=0;A<E.top;A++)this.centroidVertexArray.emplace(x++,f,y);for(let A=0;A<2*E.edges;A++)this.centroidVertexArray.emplace(x++,0,y),this.centroidVertexArray.emplace(x++,f,y)}}}function t2(s,i){const l=s.add(i)._unit();return s.x*l.x+s.y*l.y}function jB(s,i,l,h){const f=i.sub(s)._perp()._unit(),y=l.sub(i)._perp()._unit();return n2(s,i,l,t2(f,y),h)}function n2(s,i,l,h,f){const y=Math.sqrt(1-h*h);return Math.min(s.dist(i)/3,i.dist(l)/3,f*y/h)}function r2(s,i,l){return s.x<l[0].x&&i.x<l[0].x||s.x>l[1].x&&i.x>l[1].x||s.y<l[0].y&&i.y<l[0].y||s.y>l[1].y&&i.y>l[1].y}function i2(s,i,l){if(s.x<0||s.x>=_n||i.x<0||i.x>=_n||l.x<0||l.x>=_n)return!1;const h=l.sub(i),f=h.perp(),y=s.sub(i);return(h.x*y.x+h.y*y.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(y.x*y.x+y.y*y.y))>-.866&&f.x*y.x+f.y*y.y<0}function o2(s,i,l){const h=i?2|s:-3&s;return l?1|h:-2&h}function a2(){const s=Math.PI/32,i=Math.tan(s),l=Vf;return l*Math.sqrt(1+2*i*i)-l}function s2(s,i,l){const h=1<<l.z,f=ga(l.x/h),y=ga((l.x+1)/h),x=eo(l.y/h),E=eo((l.y+1)/h);return function(A,P,V,G,Z=0,Y){const Q=[];if(!A.length||!V||!G)return Q;const ne=(Oe,it)=>{for(const et of Oe)Q.push({polygon:et,bounds:it})},he=Math.ceil(Math.log2(V)),we=Math.ceil(Math.log2(G)),Re=he-we,ye=[];for(let Oe=0;Oe<Math.abs(Re);Oe++)ye.push(Re>0?0:1);for(let Oe=0;Oe<Math.min(he,we);Oe++)ye.push(0),ye.push(1);let Pe=A;if(Pe=fv(Pe,P[0].y-Z,P[1].y+Z,1),Pe=fv(Pe,P[0].x-Z,P[1].x+Z,0),!Pe.length)return Q;const Be=[];for(ye.length?Be.push({polygons:Pe,bounds:P,depth:0}):ne(Pe,P);Be.length;){const Oe=Be.pop(),it=Oe.depth,et=ye[it],yt=Oe.bounds[0],Rt=Oe.bounds[1],lt=et===0?yt.x:yt.y,bt=et===0?Rt.x:Rt.y,Ct=Y?Y(et,lt,bt):.5*(lt+bt),Mt=fv(Oe.polygons,lt-Z,Ct+Z,et),Lt=fv(Oe.polygons,Ct-Z,bt+Z,et);if(Mt.length){const ut=[yt,new k(et===0?Ct:Rt.x,et===1?Ct:Rt.y)];ye.length>it+1?Be.push({polygons:Mt,bounds:ut,depth:it+1}):ne(Mt,ut)}if(Lt.length){const ut=[new k(et===0?Ct:yt.x,et===1?Ct:yt.y),Rt];ye.length>it+1?Be.push({polygons:Lt,bounds:ut,depth:it+1}):ne(Lt,ut)}}return Q}(s,i,Math.ceil((y-f)/11.25),Math.ceil((x-E)/11.25),1,(A,P,V)=>{if(A===0)return .5*(P+V);{const G=eo((l.y+P/_n)/h);return(zs(.5*(eo((l.y+V/_n)/h)+G))*h-l.y)*_n}})}Jt(Xf,"FillExtrusionBucket",{omit:["layers","features"]}),Jt(e2,"PartMetadata");const VB=new It({"fill-extrusion-edge-radius":new Ge(gt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var $B={paint:new It({"fill-extrusion-opacity":new Ge(gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new at(gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ge(gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ge(gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new at(gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new at(gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new at(gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ge(gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ge(gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ge(gt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:VB};function l2(s,i,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[s*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class mv{constructor(i,l,h){this.z=i,this.x=l,this.y=h,this.key=Kf(0,i,i,l,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l){const h=function(y,x,E){var A=l2(256*y,256*(x=Math.pow(2,E)-x-1),E),P=l2(256*(y+1),256*(x+1),E);return A[0]+","+A[1]+","+P[0]+","+P[1]}(this.x,this.y,this.z),f=function(y,x,E){let A,P="";for(let V=y;V>0;V--)A=1<<V-1,P+=(x&A?1:0)+(E&A?2:0);return P}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",f).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class u2{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Kf(i,l.z,l.z,l.x,l.y)}}class Io{constructor(i,l,h,f,y){this.overscaledZ=i,this.wrap=l,this.canonical=new mv(h,+f,+y),this.key=l===0&&i===h?this.canonical.key:Kf(l,i,h,f,y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const l=this.canonical.z-i;return i>this.canonical.z?new Io(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l=!0){if(this.overscaledZ===i&&l)return this.key;if(i>this.canonical.z)return Kf(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-i;return Kf(this.wrap*+l,i,i,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,f=2*this.canonical.y;return[new Io(l,this.wrap,l,h,f),new Io(l,this.wrap,l,h+1,f),new Io(l,this.wrap,l,h,f+1),new Io(l,this.wrap,l,h+1,f+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Io(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new u2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Kf(s,i,l,h,f){const y=1<<Math.min(l,22);let x=y*(f%y)+h%y;return s&&l<22&&(x+=y*y*((s<0?-2*s-1:2*s)%(1<<2*(22-l)))),16*(32*x+l)+(i-l)}Jt(mv,"CanonicalTileID"),Jt(Io,"OverscaledTileID",{omit:["projMatrix"]});class _d extends k{constructor(i,l,h){super(i,l),this.z=h}}function Yf(s,i){return s.x*i.x+s.y*i.y}function c2(s,i){if(s.length===1){let l=0;const h=i[l++];let f;for(;!f||h.equals(f);)if(f=i[l++],!f)return 1/0;for(;l<i.length;l++){const y=i[l],x=s[0],E=f.sub(h),A=y.sub(h),P=x.sub(h),V=Yf(E,E),G=Yf(E,A),Z=Yf(A,A),Y=Yf(P,E),Q=Yf(P,A),ne=V*Z-G*G,he=(Z*Y-G*Q)/ne,we=(V*Q-G*Y)/ne,Re=h.z*(1-he-we)+f.z*he+y.z*we;if(isFinite(Re))return Re}return 1/0}{let l=1/0;for(const h of i)l=Math.min(l,h.z);return l}}function h2(s,i,l,h,f,y,x,E){const A=x*f.getElevationAt(s,i,!0,!0),P=y[0]!==0,V=P?y[1]===0?x*(y[0]/7-450):x*function(G,Z,Y){const Q=Math.floor(Z[0]/8),ne=Math.floor(Z[1]/8),he=10*(Z[0]-8*Q),we=10*(Z[1]-8*ne),Re=G.getElevationAt(Q,ne,!0,!0),ye=G.getMeterToDEM(Y),Pe=Math.floor(.5*(he*ye-1)),Be=Math.floor(.5*(we*ye-1)),Oe=G.tileCoordToPixel(Q,ne),it=2*Pe+1,et=2*Be+1,yt=function(Lt,ut,jt,dn,Gt){return[Lt.getElevationAtPixel(ut,jt,!0),Lt.getElevationAtPixel(ut+Gt,jt,!0),Lt.getElevationAtPixel(ut,jt+Gt,!0),Lt.getElevationAtPixel(ut+dn,jt+Gt,!0)]}(G,Oe.x-Pe,Oe.y-Be,it,et),Rt=Math.abs(yt[0]-yt[1]),lt=Math.abs(yt[2]-yt[3]),bt=Math.abs(yt[0]-yt[2])+Math.abs(yt[1]-yt[3]),Ct=Math.min(.25,.5*ye*(Rt+lt)/it),Mt=Math.min(.25,.5*ye*bt/et);return Re+Math.max(Ct*he,Mt*we)}(f,y,E):A;return{base:A+(l===0)?-1:l,top:P?Math.max(V+h,A+l+2):A+h}}const HB=an([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:WB}=HB,GB=an([{name:"a_packed",components:4,type:"Float32"}]),{members:qB}=GB,ZB=pv.types,XB=Math.cos(Math.PI/180*37.5);class gv{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Cr,this.layoutVertexArray2=new gr,this.indexArray=new Qi,this.programConfigurations=new Ic(i.layers,i.zoom),this.segments=new ui,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,h,f){this.hasPattern=V1("line",this.layers,l);const y=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:V,id:G,index:Z,sourceLayerIndex:Y}of i){const Q=this.layers[0]._featureFilter.needGeometry,ne=zc(V,Q);if(!this.layers[0]._featureFilter.filter(new qe(this.zoom),ne,h))continue;const he=y?y.evaluate(ne,{},h):void 0,we={id:G,properties:V.properties,type:V.type,sourceLayerIndex:Y,index:Z,geometry:Q?ne.geometry:pl(V,h,f),patterns:{},sortKey:he};x.push(we)}y&&x.sort((V,G)=>V.sortKey-G.sortKey);const{lineAtlas:E,featureIndex:A}=l,P=this.addConstantDashes(E);for(const V of x){const{geometry:G,index:Z,sourceLayerIndex:Y}=V;if(P&&this.addFeatureDashes(V,E),this.hasPattern){const Q=$1("line",this.layers,V,this.zoom,l);this.patternFeatures.push(Q)}else this.addFeature(V,G,Z,h,E.positions,l.availableImages);A.insert(i[Z].feature,G,Z,Y,this.index)}}addConstantDashes(i){let l=!1;for(const h of this.layers){const f=h.paint.get("line-dasharray").value,y=h.layout.get("line-cap").value;if(f.kind!=="constant"||y.kind!=="constant")l=!0;else{const x=y.value,E=f.value;if(!E)continue;i.addDash(E,x)}}return l}addFeatureDashes(i,l){const h=this.zoom;for(const f of this.layers){const y=f.paint.get("line-dasharray").value,x=f.layout.get("line-cap").value;if(y.kind==="constant"&&x.kind==="constant")continue;let E,A;if(y.kind==="constant"){if(E=y.value,!E)continue}else E=y.evaluate({zoom:h},i);A=x.kind==="constant"?x.value:x.evaluate({zoom:h},i),l.addDash(E,A),i.patterns[f.id]=l.getKey(E,A)}}update(i,l,h,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,h,f)}addFeatures(i,l,h,f,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,h,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,qB)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,WB),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,h,f,y,x){const E=this.layers[0].layout,A=E.get("line-join").evaluate(i,{}),P=E.get("line-cap").evaluate(i,{}),V=E.get("line-miter-limit"),G=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const Z of l)this.addLine(Z,i,A,P,V,G);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,y,x,f)}addLine(i,l,h,f,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let we=0;we<i.length-1;we++)this.totalDistance+=i[we].dist(i[we+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=ZB[l.type]==="Polygon";let A=i.length;for(;A>=2&&i[A-1].equals(i[A-2]);)A--;let P=0;for(;P<A-1&&i[P].equals(i[P+1]);)P++;if(A<(E?3:2))return;h==="bevel"&&(y=1.05);const V=this.overscaling<=16?122880/(512*this.overscaling):0,G=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray);let Z,Y,Q,ne,he;this.e1=this.e2=-1,E&&(Z=i[A-2],he=i[P].sub(Z)._unit()._perp());for(let we=P;we<A;we++){if(Q=we===A-1?E?i[P+1]:void 0:i[we+1],Q&&i[we].equals(Q))continue;he&&(ne=he),Z&&(Y=Z),Z=i[we],he=Q?Q.sub(Z)._unit()._perp():ne,ne=ne||he;let Re=ne.add(he);Re.x===0&&Re.y===0||Re._unit();const ye=ne.x*he.x+ne.y*he.y,Pe=Re.x*he.x+Re.y*he.y,Be=Pe!==0?1/Pe:1/0,Oe=2*Math.sqrt(2-2*Pe),it=Pe<XB&&Y&&Q,et=ne.x*he.y-ne.y*he.x>0;if(it&&we>P){const lt=Z.dist(Y);if(lt>2*V){const bt=Z.sub(Z.sub(Y)._mult(V/lt)._round());this.updateDistance(Y,bt),this.addCurrentVertex(bt,ne,0,0,G),Y=bt}}const yt=Y&&Q;let Rt=yt?h:E?"butt":f;if(yt&&Rt==="round"&&(Be<x?Rt="miter":Be<=2&&(Rt="fakeround")),Rt==="miter"&&Be>y&&(Rt="bevel"),Rt==="bevel"&&(Be>2&&(Rt="flipbevel"),Be<y&&(Rt="miter")),Y&&this.updateDistance(Y,Z),Rt==="miter")Re._mult(Be),this.addCurrentVertex(Z,Re,0,0,G);else if(Rt==="flipbevel"){if(Be>100)Re=he.mult(-1);else{const lt=Be*ne.add(he).mag()/ne.sub(he).mag();Re._perp()._mult(lt*(et?-1:1))}this.addCurrentVertex(Z,Re,0,0,G),this.addCurrentVertex(Z,Re.mult(-1),0,0,G)}else if(Rt==="bevel"||Rt==="fakeround"){const lt=-Math.sqrt(Be*Be-1),bt=et?lt:0,Ct=et?0:lt;if(Y&&this.addCurrentVertex(Z,ne,bt,Ct,G),Rt==="fakeround"){const Mt=Math.round(180*Oe/Math.PI/20);for(let Lt=1;Lt<Mt;Lt++){let ut=Lt/Mt;if(ut!==.5){const dn=ut-.5;ut+=ut*dn*(ut-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*dn*dn+(.848013+ye*(.215638*ye-1.06021)))}const jt=he.sub(ne)._mult(ut)._add(ne)._unit()._mult(et?-1:1);this.addHalfVertex(Z,jt.x,jt.y,!1,et,0,G)}}Q&&this.addCurrentVertex(Z,he,-bt,-Ct,G)}else if(Rt==="butt")this.addCurrentVertex(Z,Re,0,0,G);else if(Rt==="square"){const lt=Y?1:-1;Y||this.addCurrentVertex(Z,Re,lt,lt,G),this.addCurrentVertex(Z,Re,0,0,G),Y&&this.addCurrentVertex(Z,Re,lt,lt,G)}else Rt==="round"&&(Y&&(this.addCurrentVertex(Z,ne,0,0,G),this.addCurrentVertex(Z,ne,1,1,G,!0)),Q&&(this.addCurrentVertex(Z,he,-1,-1,G,!0),this.addCurrentVertex(Z,he,0,0,G)));if(it&&we<A-1){const lt=Z.dist(Q);if(lt>2*V){const bt=Z.add(Q.sub(Z)._mult(V/lt)._round());this.updateDistance(Z,bt),this.addCurrentVertex(bt,he,0,0,G),Z=bt}}}}addCurrentVertex(i,l,h,f,y,x=!1){const E=l.y*f-l.x,A=-l.y-l.x*f;this.addHalfVertex(i,l.x+l.y*h,l.y-l.x*h,x,!1,h,y),this.addHalfVertex(i,E,A,x,!0,-f,y)}addHalfVertex({x:i,y:l},h,f,y,x,E,A){this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(l<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*f)+128,1+(E===0?0:E<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const P=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),A.primitiveLength++),x?this.e2=P:this.e1=P}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}Jt(gv,"LineBucket",{omit:["layers","patternFeatures"]});const KB=new It({"line-cap":new at(gt.layout_line["line-cap"]),"line-join":new at(gt.layout_line["line-join"]),"line-miter-limit":new Ge(gt.layout_line["line-miter-limit"]),"line-round-limit":new Ge(gt.layout_line["line-round-limit"]),"line-sort-key":new at(gt.layout_line["line-sort-key"])});var d2={paint:new It({"line-opacity":new at(gt.paint_line["line-opacity"]),"line-color":new at(gt.paint_line["line-color"]),"line-translate":new Ge(gt.paint_line["line-translate"]),"line-translate-anchor":new Ge(gt.paint_line["line-translate-anchor"]),"line-width":new at(gt.paint_line["line-width"]),"line-gap-width":new at(gt.paint_line["line-gap-width"]),"line-offset":new at(gt.paint_line["line-offset"]),"line-blur":new at(gt.paint_line["line-blur"]),"line-dasharray":new at(gt.paint_line["line-dasharray"]),"line-pattern":new at(gt.paint_line["line-pattern"]),"line-gradient":new kt(gt.paint_line["line-gradient"]),"line-trim-offset":new Ge(gt.paint_line["line-trim-offset"])}),layout:KB};const p2=new class extends at{possiblyEvaluate(s,i){return i=new qe(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(s,i)}evaluate(s,i,l,h){return i=ct({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(s,i,l,h)}}(d2.paint.properties["line-width"].specification);function f2(s,i){return i>0?i+2*s:s}p2.useIntegerZoom=!0;const YB=an([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),JB=an([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),QB=an([{name:"a_projected_pos",components:4,type:"Float32"}],4);an([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const eF=an([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),tF=an([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);an([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const m2=an([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),nF=an([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);an([{name:"triangle",components:3,type:"Uint16"}]),an([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),an([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),an([{type:"Float32",name:"offsetX"}]),an([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var no=24;const Bs=128;function W1(s,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new qe(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:f}=l;let y=0;for(;y<h.length&&h[y]<=s;)y++;y=Math.max(0,y-1);let x=y;for(;x<h.length&&h[x]<s+1;)x++;x=Math.min(h.length-1,x);const E=h[y],A=h[x];return l.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:A,interpolationType:f}:{kind:"camera",minZoom:E,maxZoom:A,minSize:l.evaluate(new qe(E)),maxSize:l.evaluate(new qe(A)),interpolationType:f}}}function yv(s,{uSize:i,uSizeT:l},{lowerSize:h,upperSize:f}){return s.kind==="source"?h/Bs:s.kind==="composite"?Hn(h/Bs,f/Bs,l):i}function xd(s,i){let l=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:f,minZoom:y,maxZoom:x}=s,E=f?Ne(La.interpolationFactor(f,i,y,x),0,1):0;s.kind==="camera"?h=Hn(s.minSize,s.maxSize,E):l=E}return{uSizeT:l,uSize:h}}var rF=Object.freeze({__proto__:null,getSizeData:W1,evaluateSizeForFeature:yv,evaluateSizeForZoom:xd,SIZE_PACK_FACTOR:Bs});function iF(s,i,l){return s.sections.forEach(h=>{h.text=function(f,y,x){const E=y.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?f=f.toLocaleUpperCase():E==="lowercase"&&(f=f.toLocaleLowerCase()),$e.applyArabicShaping&&(f=$e.applyArabicShaping(f)),f}(h.text,i,l)}),s}const Jf={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42","\u2190":"\u2191","\u2192":"\u2193"};function oF(s){return s==="\uFE36"||s==="\uFE48"||s==="\uFE38"||s==="\uFE44"||s==="\uFE42"||s==="\uFE3E"||s==="\uFE3C"||s==="\uFE3A"||s==="\uFE18"||s==="\uFE40"||s==="\uFE10"||s==="\uFE13"||s==="\uFE14"||s==="\uFF40"||s==="\uFFE3"||s==="\uFE11"||s==="\uFE12"}function aF(s){return s==="\uFE35"||s==="\uFE47"||s==="\uFE37"||s==="\uFE43"||s==="\uFE41"||s==="\uFE3D"||s==="\uFE3B"||s==="\uFE39"||s==="\uFE17"||s==="\uFE3F"}var Qf=Sr,g2=function(s,i,l,h,f){var y,x,E=8*f-h-1,A=(1<<E)-1,P=A>>1,V=-7,G=l?f-1:0,Z=l?-1:1,Y=s[i+G];for(G+=Z,y=Y&(1<<-V)-1,Y>>=-V,V+=E;V>0;y=256*y+s[i+G],G+=Z,V-=8);for(x=y&(1<<-V)-1,y>>=-V,V+=h;V>0;x=256*x+s[i+G],G+=Z,V-=8);if(y===0)y=1-P;else{if(y===A)return x?NaN:1/0*(Y?-1:1);x+=Math.pow(2,h),y-=P}return(Y?-1:1)*x*Math.pow(2,y-h)},y2=function(s,i,l,h,f,y){var x,E,A,P=8*y-f-1,V=(1<<P)-1,G=V>>1,Z=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=h?0:y-1,Q=h?1:-1,ne=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(E=isNaN(i)?1:0,x=V):(x=Math.floor(Math.log(i)/Math.LN2),i*(A=Math.pow(2,-x))<1&&(x--,A*=2),(i+=x+G>=1?Z/A:Z*Math.pow(2,1-G))*A>=2&&(x++,A/=2),x+G>=V?(E=0,x=V):x+G>=1?(E=(i*A-1)*Math.pow(2,f),x+=G):(E=i*Math.pow(2,G-1)*Math.pow(2,f),x=0));f>=8;s[l+Y]=255&E,Y+=Q,E/=256,f-=8);for(x=x<<f|E,P+=f;P>0;s[l+Y]=255&x,Y+=Q,x/=256,P-=8);s[l+Y-Q]|=128*ne};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Sr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Sr.Varint=0,Sr.Fixed64=1,Sr.Bytes=2,Sr.Fixed32=5;var G1=4294967296,v2=1/G1,_2=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ml(s){return s.type===Sr.Bytes?s.readVarint()+s.pos:s.pos+1}function bd(s,i,l){return l?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function x2(s,i,l){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(h);for(var f=l.pos-1;f>=s;f--)l.buf[f+h]=l.buf[f]}function sF(s,i){for(var l=0;l<s.length;l++)i.writeVarint(s[l])}function lF(s,i){for(var l=0;l<s.length;l++)i.writeSVarint(s[l])}function uF(s,i){for(var l=0;l<s.length;l++)i.writeFloat(s[l])}function cF(s,i){for(var l=0;l<s.length;l++)i.writeDouble(s[l])}function hF(s,i){for(var l=0;l<s.length;l++)i.writeBoolean(s[l])}function dF(s,i){for(var l=0;l<s.length;l++)i.writeFixed32(s[l])}function pF(s,i){for(var l=0;l<s.length;l++)i.writeSFixed32(s[l])}function fF(s,i){for(var l=0;l<s.length;l++)i.writeFixed64(s[l])}function mF(s,i){for(var l=0;l<s.length;l++)i.writeSFixed64(s[l])}function vv(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function wd(s,i,l){s[l]=i,s[l+1]=i>>>8,s[l+2]=i>>>16,s[l+3]=i>>>24}function b2(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}function gF(s,i,l){i.glyphs=[],s===1&&l.readMessage(yF,i)}function yF(s,i,l){if(s===3){const{id:h,bitmap:f,width:y,height:x,left:E,top:A,advance:P}=l.readMessage(vF,{});i.glyphs.push({id:h,bitmap:new fl({width:y+6,height:x+6},f),metrics:{width:y,height:x,left:E,top:A,advance:P}})}else s===4?i.ascender=l.readSVarint():s===5&&(i.descender=l.readSVarint())}function vF(s,i,l){s===1?i.id=l.readVarint():s===2?i.bitmap=l.readBytes():s===3?i.width=l.readVarint():s===4?i.height=l.readVarint():s===5?i.left=l.readSVarint():s===6?i.top=l.readSVarint():s===7&&(i.advance=l.readVarint())}function q1(s){let i=0,l=0;for(const x of s)i+=x.w*x.h,l=Math.max(l,x.w);s.sort((x,E)=>E.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let f=0,y=0;for(const x of s)for(let E=h.length-1;E>=0;E--){const A=h[E];if(!(x.w>A.w||x.h>A.h)){if(x.x=A.x,x.y=A.y,y=Math.max(y,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===A.w&&x.h===A.h){const P=h.pop();E<h.length&&(h[E]=P)}else x.h===A.h?(A.x+=x.w,A.w-=x.w):x.w===A.w?(A.y+=x.h,A.h-=x.h):(h.push({x:A.x+x.w,y:A.y,w:A.w-x.w,h:x.h}),A.y+=x.h,A.h-=x.h);break}}return{w:f,h:y,fill:i/(f*y)||0}}Sr.prototype={destroy:function(){this.buf=null},readFields:function(s,i,l){for(l=l||this.length;this.pos<l;){var h=this.readVarint(),f=h>>3,y=this.pos;this.type=7&h,s(f,i,this),this.pos===y&&this.skip(h)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=vv(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=b2(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=vv(this.buf,this.pos)+vv(this.buf,this.pos+4)*G1;return this.pos+=8,s},readSFixed64:function(){var s=vv(this.buf,this.pos)+b2(this.buf,this.pos+4)*G1;return this.pos+=8,s},readFloat:function(){var s=g2(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=g2(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,l,h=this.buf;return i=127&(l=h[this.pos++]),l<128?i:(i|=(127&(l=h[this.pos++]))<<7,l<128?i:(i|=(127&(l=h[this.pos++]))<<14,l<128?i:(i|=(127&(l=h[this.pos++]))<<21,l<128?i:function(f,y,x){var E,A,P=x.buf;if(E=(112&(A=P[x.pos++]))>>4,A<128||(E|=(127&(A=P[x.pos++]))<<3,A<128)||(E|=(127&(A=P[x.pos++]))<<10,A<128)||(E|=(127&(A=P[x.pos++]))<<17,A<128)||(E|=(127&(A=P[x.pos++]))<<24,A<128)||(E|=(1&(A=P[x.pos++]))<<31,A<128))return bd(f,E,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=h[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&_2?function(l,h,f){return _2.decode(l.subarray(h,f))}(this.buf,i,s):function(l,h,f){for(var y="",x=h;x<f;){var E,A,P,V=l[x],G=null,Z=V>239?4:V>223?3:V>191?2:1;if(x+Z>f)break;Z===1?V<128&&(G=V):Z===2?(192&(E=l[x+1]))==128&&(G=(31&V)<<6|63&E)<=127&&(G=null):Z===3?(A=l[x+2],(192&(E=l[x+1]))==128&&(192&A)==128&&((G=(15&V)<<12|(63&E)<<6|63&A)<=2047||G>=55296&&G<=57343)&&(G=null)):Z===4&&(A=l[x+2],P=l[x+3],(192&(E=l[x+1]))==128&&(192&A)==128&&(192&P)==128&&((G=(15&V)<<18|(63&E)<<12|(63&A)<<6|63&P)<=65535||G>=1114112)&&(G=null)),G===null?(G=65533,Z=1):G>65535&&(G-=65536,y+=String.fromCharCode(G>>>10&1023|55296),G=56320|1023&G),y+=String.fromCharCode(G),x+=Z}return y}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==Sr.Bytes)return s.push(this.readVarint(i));var l=ml(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==Sr.Bytes)return s.push(this.readSVarint());var i=ml(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Sr.Bytes)return s.push(this.readBoolean());var i=ml(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Sr.Bytes)return s.push(this.readFloat());var i=ml(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Sr.Bytes)return s.push(this.readDouble());var i=ml(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Sr.Bytes)return s.push(this.readFixed32());var i=ml(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Sr.Bytes)return s.push(this.readSFixed32());var i=ml(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Sr.Bytes)return s.push(this.readFixed64());var i=ml(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Sr.Bytes)return s.push(this.readSFixed64());var i=ml(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===Sr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Sr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Sr.Fixed32)this.pos+=4;else{if(i!==Sr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),wd(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),wd(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),wd(this.buf,-1&s,this.pos),wd(this.buf,Math.floor(s*v2),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),wd(this.buf,-1&s,this.pos),wd(this.buf,Math.floor(s*v2),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,l){var h,f;if(i>=0?(h=i%4294967296|0,f=i/4294967296|0):(f=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,f=f+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(y,x,E){E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,y>>>=7,E.buf[E.pos++]=127&y|128,E.buf[E.pos]=127&(y>>>=7)}(h,0,l),function(y,x){var E=(7&y)<<4;x.buf[x.pos++]|=E|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(f,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(h,f,y){for(var x,E,A=0;A<f.length;A++){if((x=f.charCodeAt(A))>55295&&x<57344){if(!E){x>56319||A+1===f.length?(h[y++]=239,h[y++]=191,h[y++]=189):E=x;continue}if(x<56320){h[y++]=239,h[y++]=191,h[y++]=189,E=x;continue}x=E-55296<<10|x-56320|65536,E=null}else E&&(h[y++]=239,h[y++]=191,h[y++]=189,E=null);x<128?h[y++]=x:(x<2048?h[y++]=x>>6|192:(x<65536?h[y++]=x>>12|224:(h[y++]=x>>18|240,h[y++]=x>>12&63|128),h[y++]=x>>6&63|128),h[y++]=63&x|128)}return y}(this.buf,s,this.pos);var l=this.pos-i;l>=128&&x2(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),y2(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),y2(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,i){this.pos++;var l=this.pos;s(i,this);var h=this.pos-l;h>=128&&x2(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeMessage:function(s,i,l){this.writeTag(s,Sr.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,sF,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,lF,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,hF,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,uF,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,cF,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,dF,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,pF,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,fF,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,mF,i)},writeBytesField:function(s,i){this.writeTag(s,Sr.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,Sr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,Sr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,Sr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,Sr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,Sr.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,Sr.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,Sr.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,Sr.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,Sr.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,Boolean(i))}};class Z1{constructor(i,{pixelRatio:l,version:h,stretchX:f,stretchY:y,content:x}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=f,this.stretchY=y,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class w2{constructor(i,l){const h={},f={};this.haveRenderCallbacks=[];const y=[];this.addImages(i,h,y),this.addImages(l,f,y);const{w:x,h:E}=q1(y),A=new ta({width:x||1,height:E||1});for(const P in i){const V=i[P],G=h[P].paddedRect;ta.copy(V.data,A,{x:0,y:0},{x:G.x+1,y:G.y+1},V.data)}for(const P in l){const V=l[P],G=f[P].paddedRect,Z=G.x+1,Y=G.y+1,Q=V.data.width,ne=V.data.height;ta.copy(V.data,A,{x:0,y:0},{x:Z,y:Y},V.data),ta.copy(V.data,A,{x:0,y:ne-1},{x:Z,y:Y-1},{width:Q,height:1}),ta.copy(V.data,A,{x:0,y:0},{x:Z,y:Y+ne},{width:Q,height:1}),ta.copy(V.data,A,{x:Q-1,y:0},{x:Z-1,y:Y},{width:1,height:ne}),ta.copy(V.data,A,{x:0,y:0},{x:Z+Q,y:Y},{width:1,height:ne})}this.image=A,this.iconPositions=h,this.patternPositions=f}addImages(i,l,h){for(const f in i){const y=i[f],x={x:0,y:0,w:y.data.width+2,h:y.data.height+2};h.push(x),l[f]=new Z1(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(i,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>i.hasImage(h)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),l)}patchUpdatedImage(i,l,h){if(!i||!l||i.version===l.version)return;i.version=l.version;const[f,y]=i.tl;h.update(l.data,void 0,{x:f,y})}}Jt(Z1,"ImagePosition"),Jt(w2,"ImageAtlas");const ya={horizontal:1,vertical:2,horizontalOnly:3};class em{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,l){const h=new em;return h.scale=i||1,h.fontStack=l,h}static forImage(i){const l=new em;return l.imageName=i,l}}class Ed{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const h=new Ed;for(let f=0;f<i.sections.length;f++){const y=i.sections[f];y.image?h.addImageSection(y):h.addTextSection(y,l)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(l,h){let f="";for(let y=0;y<l.length;y++){const x=l.charCodeAt(y+1)||null,E=l.charCodeAt(y-1)||null;f+=!h&&(x&&W(x)&&!Jf[l[y+1]]||E&&W(E)&&!Jf[l[y-1]])||!Jf[l[y]]?l[y]:Jf[l[y]]}return f}(this.text,i)}trim(){let i=0;for(let h=0;h<this.text.length&&_v[this.text.charCodeAt(h)];h++)i++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&_v[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const h=new Ed;return h.text=this.text.substring(i,l),h.sectionIndex=this.sectionIndex.slice(i,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}addTextSection(i,l){this.text+=i.text,this.sections.push(em.forText(i.scale,i.fontStack||l));const h=this.sections.length-1;for(let f=0;f<i.text.length;++f)this.sectionIndex.push(h)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Ke("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(em.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Ke("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function X1(s,i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q){const ne=Ed.fromFeature(s,f);G===ya.vertical&&ne.verticalizePunctuation(Z);let he=[];const we=function(Oe,it,et,yt,Rt,lt){if(!Oe)return[];const bt=[],Ct=function(jt,dn,Gt,tn,Vt,fn){let zn=0;for(let Dn=0;Dn<jt.length();Dn++){const Mn=jt.getSection(Dn);zn+=E2(jt.getCharCode(Dn),Mn,tn,Vt,dn,fn)}return zn/Math.max(1,Math.ceil(zn/Gt))}(Oe,it,et,yt,Rt,lt),Mt=Oe.text.indexOf("\u200B")>=0;let Lt=0;for(let jt=0;jt<Oe.length();jt++){const dn=Oe.getSection(jt),Gt=Oe.getCharCode(jt);if(_v[Gt]||(Lt+=E2(Gt,dn,yt,Rt,it,lt)),jt<Oe.length()-1){const tn=!((ut=Gt)<11904||!(Uy(ut)||sd(ut)||g(ut)||Zy(ut)||$y(ut)||Ny(ut)||jy(ut)||Tc(ut)||Hy(ut)||If(ut)||Vy(ut)||_(ut)||ad(ut)||Af(ut)||Tf(ut)||Mf(ut)||au(ut)||Ac(ut)||Gy(ut)||Wy(ut)));(_F[Gt]||tn||dn.imageName)&&bt.push(S2(jt+1,Lt,Ct,bt,xF(Gt,Oe.getCharCode(jt+1),tn&&Mt),!1))}}var ut;return k2(S2(Oe.length(),Lt,Ct,bt,0,!0))}(ne,P,y,i,h,Y),{processBidirectionalText:Re,processStyledBidirectionalText:ye}=$e;if(Re&&ne.sections.length===1){const Oe=Re(ne.toString(),we);for(const it of Oe){const et=new Ed;et.text=it,et.sections=ne.sections;for(let yt=0;yt<it.length;yt++)et.sectionIndex.push(0);he.push(et)}}else if(ye){const Oe=ye(ne.text,ne.sectionIndex,we);for(const it of Oe){const et=new Ed;et.text=it[0],et.sectionIndex=it[1],et.sections=ne.sections,he.push(et)}}else he=function(Oe,it){const et=[],yt=Oe.text;let Rt=0;for(const lt of it)et.push(Oe.substring(Rt,lt)),Rt=lt;return Rt<yt.length&&et.push(Oe.substring(Rt,yt.length)),et}(ne,we);const Pe=[],Be={positionedLines:Pe,text:ne.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:G,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Oe,it,et,yt,Rt,lt,bt,Ct,Mt,Lt,ut,jt){let dn=0,Gt=0,tn=0;const Vt=Ct==="right"?1:Ct==="left"?0:.5;let fn=!1;for(const En of Rt){const Bn=En.getSections();for(const hr of Bn){if(hr.imageName)continue;const Dr=it[hr.fontStack];if(Dr&&(fn=Dr.ascender!==void 0&&Dr.descender!==void 0,!fn))break}if(!fn)break}let zn=0;for(const En of Rt){En.trim();const Bn=En.getMaxScale(),hr=(Bn-1)*no,Dr={positionedGlyphs:[],lineOffset:0};Oe.positionedLines[zn]=Dr;const kr=Dr.positionedGlyphs;let Rr=0;if(!En.length()){Gt+=lt,++zn;continue}let Br=0,Zr=0;for(let sr=0;sr<En.length();sr++){const xi=En.getSection(sr),hi=En.getSectionIndex(sr),Yn=En.getCharCode(sr);let Vr=xi.scale,Mi=null,dr=null,ti=null,fo=no,ji=0;const Vi=!(Mt===ya.horizontal||!ut&&!O(Yn)||ut&&(_v[Yn]||(Dn=Yn,kc(Dn)||Fy(Dn)||kf(Dn)||ld(Dn)||p(Dn))));if(xi.imageName){const Po=yt[xi.imageName];if(!Po)continue;ti=xi.imageName,Oe.iconsInText=Oe.iconsInText||!0,dr=Po.paddedRect;const $i=Po.displaySize;Vr=Vr*no/jt,Mi={width:$i[0],height:$i[1],left:1,top:-3,advance:Vi?$i[1]:$i[0],localGlyph:!1},ji=fn?-Mi.height*Vr:Bn*no-17-$i[1]*Vr,fo=Mi.advance;const yl=(Vi?$i[0]:$i[1])*Vr-no*Bn;yl>0&&yl>Rr&&(Rr=yl)}else{const Po=et[xi.fontStack];if(!Po)continue;Po[Yn]&&(dr=Po[Yn]);const $i=it[xi.fontStack];if(!$i)continue;const yl=$i.glyphs[Yn];if(!yl)continue;if(Mi=yl.metrics,fo=Yn!==8203?no:0,fn){const Ad=$i.ascender!==void 0?Math.abs($i.ascender):0,lm=$i.descender!==void 0?Math.abs($i.descender):0,um=(Ad+lm)*Vr;Br<um&&(Br=um,Zr=(Ad-lm)/2*Vr),ji=-Ad*Vr}else ji=(Bn-Vr)*no-17}Vi?(Oe.verticalizable=!0,kr.push({glyph:Yn,imageName:ti,x:dn,y:Gt+ji,vertical:Vi,scale:Vr,localGlyph:Mi.localGlyph,fontStack:xi.fontStack,sectionIndex:hi,metrics:Mi,rect:dr}),dn+=fo*Vr+Lt):(kr.push({glyph:Yn,imageName:ti,x:dn,y:Gt+ji,vertical:Vi,scale:Vr,localGlyph:Mi.localGlyph,fontStack:xi.fontStack,sectionIndex:hi,metrics:Mi,rect:dr}),dn+=Mi.advance*Vr+Lt)}kr.length!==0&&(tn=Math.max(dn-Lt,tn),fn?T2(kr,Vt,Rr,Zr,lt*Bn/2):T2(kr,Vt,Rr,0,lt/2)),dn=0;const Ui=lt*Bn+Rr;Dr.lineOffset=Math.max(Rr,hr),Gt+=Ui,++zn}var Dn;const Mn=Gt,{horizontalAlign:gn,verticalAlign:ar}=K1(bt);(function(En,Bn,hr,Dr,kr,Rr){const Br=(Bn-hr)*kr,Zr=-Rr*Dr;for(const Ui of En)for(const sr of Ui.positionedGlyphs)sr.x+=Br,sr.y+=Zr})(Oe.positionedLines,Vt,gn,ar,tn,Mn),Oe.top+=-ar*Mn,Oe.bottom=Oe.top+Mn,Oe.left+=-gn*tn,Oe.right=Oe.left+tn,Oe.hasBaseline=fn}(Be,i,l,h,he,x,E,A,G,P,Z,Q),!function(Oe){for(const it of Oe)if(it.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&Be}const _v={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_F={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function E2(s,i,l,h,f,y){if(i.imageName){const x=h[i.imageName];return x?x.displaySize[0]*i.scale*no/y+f:0}{const x=l[i.fontStack],E=x&&x.glyphs[s];return E?E.metrics.advance*i.scale+f:0}}function C2(s,i,l,h){const f=Math.pow(s-i,2);return h?s<i?f/2:2*f:f+Math.abs(l)*l}function xF(s,i,l){let h=0;return s===10&&(h-=1e4),l&&(h+=150),s!==40&&s!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function S2(s,i,l,h,f,y){let x=null,E=C2(i,l,f,y);for(const A of h){const P=C2(i-A.x,l,f,y)+A.badness;P<=E&&(x=A,E=P)}return{index:s,x:i,priorBreak:x,badness:E}}function k2(s){return s?k2(s.priorBreak).concat(s.index):[]}function K1(s){let i=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function T2(s,i,l,h,f){if(!(i||l||h||f))return;const y=s.length-1,x=s[y],E=(x.x+x.metrics.advance*x.scale)*i;for(let A=0;A<=y;A++)s[A].x-=E,s[A].y+=l+h+f}function bF(s,i,l){const{horizontalAlign:h,verticalAlign:f}=K1(l),y=i[0]-s.displaySize[0]*h,x=i[1]-s.displaySize[1]*f;return{image:s,top:x,bottom:x+s.displaySize[1],left:y,right:y+s.displaySize[0]}}function A2(s,i,l,h,f,y){const x=s.image;let E;if(x.content){const he=x.content,we=x.pixelRatio||1;E=[he[0]/we,he[1]/we,x.displaySize[0]-he[2]/we,x.displaySize[1]-he[3]/we]}const A=i.left*y,P=i.right*y;let V,G,Z,Y;l==="width"||l==="both"?(Y=f[0]+A-h[3],G=f[0]+P+h[1]):(Y=f[0]+(A+P-x.displaySize[0])/2,G=Y+x.displaySize[0]);const Q=i.top*y,ne=i.bottom*y;return l==="height"||l==="both"?(V=f[1]+Q-h[0],Z=f[1]+ne+h[2]):(V=f[1]+(Q+ne-x.displaySize[1])/2,Z=V+x.displaySize[1]),{image:x,top:V,right:G,bottom:Z,left:Y,collisionPadding:E}}class gl extends k{constructor(i,l,h,f,y){super(i,l),this.angle=f,this.z=h,y!==void 0&&(this.segment=y)}clone(){return new gl(this.x,this.y,this.z,this.angle,this.segment)}}function M2(s,i,l,h,f){if(i.segment===void 0)return!0;let y=i,x=i.segment+1,E=0;for(;E>-l/2;){if(x--,x<0)return!1;E-=s[x].dist(y),y=s[x]}E+=s[x].dist(s[x+1]),x++;const A=[];let P=0;for(;E<l/2;){const V=s[x],G=s[x+1];if(!G)return!1;let Z=s[x-1].angleTo(V)-V.angleTo(G);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:E,angleDelta:Z}),P+=Z;E-A[0].distance>h;)P-=A.shift().angleDelta;if(P>f)return!1;x++,E+=V.dist(G)}return!0}function I2(s){let i=0;for(let l=0;l<s.length-1;l++)i+=s[l].dist(s[l+1]);return i}function P2(s,i,l){return s?.6*i*l:0}function D2(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function wF(s,i,l,h,f,y){const x=P2(l,f,y),E=D2(l,h)*y;let A=0;const P=I2(s)/2;for(let V=0;V<s.length-1;V++){const G=s[V],Z=s[V+1],Y=G.dist(Z);if(A+Y>P){const Q=(P-A)/Y,ne=Hn(G.x,Z.x,Q),he=Hn(G.y,Z.y,Q),we=new gl(ne,he,0,Z.angleTo(G),V);return!x||M2(s,we,E,x,i)?we:void 0}A+=Y}}function EF(s,i,l,h,f,y,x,E,A){const P=P2(h,y,x),V=D2(h,f),G=V*x,Z=s[0].x===0||s[0].x===A||s[0].y===0||s[0].y===A;return i-G<i/4&&(i=G+i/4),R2(s,Z?i/2*E%i:(V/2+2*y)*x*E%i,i,P,l,G,Z,!1,A)}function R2(s,i,l,h,f,y,x,E,A){const P=y/2,V=I2(s);let G=0,Z=i-l,Y=[];for(let Q=0;Q<s.length-1;Q++){const ne=s[Q],he=s[Q+1],we=ne.dist(he),Re=he.angleTo(ne);for(;Z+l<G+we;){Z+=l;const ye=(Z-G)/we,Pe=Hn(ne.x,he.x,ye),Be=Hn(ne.y,he.y,ye);if(Pe>=0&&Pe<A&&Be>=0&&Be<A&&Z-P>=0&&Z+P<=V){const Oe=new gl(Pe,Be,0,Re,Q);Oe._round(),h&&!M2(s,Oe,y,h,f)||Y.push(Oe)}}G+=we}return E||Y.length||x||(Y=R2(s,G/2,l,h,f,y,x,!0,A)),Y}function L2(s,i,l,h,f){const y=[];for(let x=0;x<s.length;x++){const E=s[x];let A;for(let P=0;P<E.length-1;P++){let V=E[P],G=E[P+1];V.x<i&&G.x<i||(V.x<i?V=new k(i,V.y+(i-V.x)/(G.x-V.x)*(G.y-V.y))._round():G.x<i&&(G=new k(i,V.y+(i-V.x)/(G.x-V.x)*(G.y-V.y))._round()),V.y<l&&G.y<l||(V.y<l?V=new k(V.x+(l-V.y)/(G.y-V.y)*(G.x-V.x),l)._round():G.y<l&&(G=new k(V.x+(l-V.y)/(G.y-V.y)*(G.x-V.x),l)._round()),V.x>=h&&G.x>=h||(V.x>=h?V=new k(h,V.y+(h-V.x)/(G.x-V.x)*(G.y-V.y))._round():G.x>=h&&(G=new k(h,V.y+(h-V.x)/(G.x-V.x)*(G.y-V.y))._round()),V.y>=f&&G.y>=f||(V.y>=f?V=new k(V.x+(f-V.y)/(G.y-V.y)*(G.x-V.x),f)._round():G.y>=f&&(G=new k(V.x+(f-V.y)/(G.y-V.y)*(G.x-V.x),f)._round()),A&&V.equals(A[A.length-1])||(A=[V],y.push(A)),A.push(G)))))}}return y}Jt(gl,"Anchor");const tm=1e20;function O2(s,i,l,h,f,y,x,E,A){for(let P=i;P<i+h;P++)z2(s,l*y+P,y,f,x,E,A);for(let P=l;P<l+f;P++)z2(s,P*y+i,1,h,x,E,A)}function z2(s,i,l,h,f,y,x){y[0]=0,x[0]=-tm,x[1]=tm,f[0]=s[i];for(let E=1,A=0,P=0;E<h;E++){f[E]=s[i+E*l];const V=E*E;do{const G=y[A];P=(f[E]-f[G]+V-G*G)/(E-G)/2}while(P<=x[A]&&--A>-1);A++,y[A]=E,x[A]=P,x[A+1]=tm}for(let E=0,A=0;E<h;E++){for(;x[A+1]<E;)A++;const P=y[A],V=E-P;s[i+E*l]=f[P]+V*V}}const Y1={none:0,ideographs:1,all:2};class Cd{constructor(i,l,h){this.requestManager=i,this.localGlyphMode=l,this.localFontFamily=h,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,l){const h=[];for(const f in i)for(const y of i[f])h.push({stack:f,id:y});We(h,({stack:f,id:y},x)=>{let E=this.entries[f];E||(E=this.entries[f]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let A=E.glyphs[y];if(A!==void 0)return void x(null,{stack:f,id:y,glyph:A});if(A=this._tinySDF(E,f,y),A)return E.glyphs[y]=A,void x(null,{stack:f,id:y,glyph:A});const P=Math.floor(y/256);if(256*P>65535)return void x(new Error("glyphs > 65535 not supported"));if(E.ranges[P])return void x(null,{stack:f,id:y,glyph:A});let V=E.requests[P];V||(V=E.requests[P]=[],Cd.loadGlyphRange(f,P,this.url,this.requestManager,(G,Z)=>{if(Z){E.ascender=Z.ascender,E.descender=Z.descender;for(const Y in Z.glyphs)this._doesCharSupportLocalGlyph(+Y)||(E.glyphs[+Y]=Z.glyphs[+Y]);E.ranges[P]=!0}for(const Y of V)Y(G,Z);delete E.requests[P]})),V.push((G,Z)=>{G?x(G):Z&&x(null,{stack:f,id:y,glyph:Z.glyphs[y]||null})})},(f,y)=>{if(f)l(f);else if(y){const x={};for(const{stack:E,id:A,glyph:P}of y)x[E]===void 0&&(x[E]={}),x[E].glyphs===void 0&&(x[E].glyphs={}),x[E].glyphs[A]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics},x[E].ascender=this.entries[E].ascender,x[E].descender=this.entries[E].descender;l(null,x)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==Y1.none&&(this.localGlyphMode===Y1.all?!!this.localFontFamily:!!this.localFontFamily&&(If(i)||qy(i)||ad(i)||au(i)||Tc(i)))}_tinySDF(i,l,h){const f=this.localFontFamily;if(!f||!this._doesCharSupportLocalGlyph(h))return;let y=i.tinySDF;if(!y){let ne="400";/bold/i.test(l)?ne="900":/medium/i.test(l)?ne="500":/light/i.test(l)&&(ne="200"),y=i.tinySDF=new Cd.TinySDF({fontFamily:f,fontWeight:ne,fontSize:48,buffer:6,radius:16}),y.fontWeight=ne}if(this.localGlyphs[y.fontWeight][h])return this.localGlyphs[y.fontWeight][h];const x=String.fromCharCode(h),{data:E,width:A,height:P,glyphWidth:V,glyphHeight:G,glyphLeft:Z,glyphTop:Y,glyphAdvance:Q}=y.draw(x);return this.localGlyphs[y.fontWeight][h]={id:h,bitmap:new fl({width:A,height:P},E),metrics:{width:V/2,height:G/2,left:Z/2,top:Y/2-27,advance:Q/2,localGlyph:!0}}}}function B2(s,i,l,h){const f=[],y=s.image,x=y.pixelRatio,E=y.paddedRect.w-2,A=y.paddedRect.h-2,P=s.right-s.left,V=s.bottom-s.top,G=y.stretchX||[[0,E]],Z=y.stretchY||[[0,A]],Y=(lt,bt)=>lt+bt[1]-bt[0],Q=G.reduce(Y,0),ne=Z.reduce(Y,0),he=E-Q,we=A-ne;let Re=0,ye=Q,Pe=0,Be=ne,Oe=0,it=he,et=0,yt=we;if(y.content&&h){const lt=y.content;Re=xv(G,0,lt[0]),Pe=xv(Z,0,lt[1]),ye=xv(G,lt[0],lt[2]),Be=xv(Z,lt[1],lt[3]),Oe=lt[0]-Re,et=lt[1]-Pe,it=lt[2]-lt[0]-ye,yt=lt[3]-lt[1]-Be}const Rt=(lt,bt,Ct,Mt)=>{const Lt=bv(lt.stretch-Re,ye,P,s.left),ut=wv(lt.fixed-Oe,it,lt.stretch,Q),jt=bv(bt.stretch-Pe,Be,V,s.top),dn=wv(bt.fixed-et,yt,bt.stretch,ne),Gt=bv(Ct.stretch-Re,ye,P,s.left),tn=wv(Ct.fixed-Oe,it,Ct.stretch,Q),Vt=bv(Mt.stretch-Pe,Be,V,s.top),fn=wv(Mt.fixed-et,yt,Mt.stretch,ne),zn=new k(Lt,jt),Dn=new k(Gt,jt),Mn=new k(Gt,Vt),gn=new k(Lt,Vt),ar=new k(ut/x,dn/x),En=new k(tn/x,fn/x),Bn=i*Math.PI/180;if(Bn){const kr=Math.sin(Bn),Rr=Math.cos(Bn),Br=[Rr,-kr,kr,Rr];zn._matMult(Br),Dn._matMult(Br),gn._matMult(Br),Mn._matMult(Br)}const hr=lt.stretch+lt.fixed,Dr=bt.stretch+bt.fixed;return{tl:zn,tr:Dn,bl:gn,br:Mn,tex:{x:y.paddedRect.x+1+hr,y:y.paddedRect.y+1+Dr,w:Ct.stretch+Ct.fixed-hr,h:Mt.stretch+Mt.fixed-Dr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ar,pixelOffsetBR:En,minFontScaleX:it/x/P,minFontScaleY:yt/x/V,isSDF:l}};if(h&&(y.stretchX||y.stretchY)){const lt=F2(G,he,Q),bt=F2(Z,we,ne);for(let Ct=0;Ct<lt.length-1;Ct++){const Mt=lt[Ct],Lt=lt[Ct+1];for(let ut=0;ut<bt.length-1;ut++)f.push(Rt(Mt,bt[ut],Lt,bt[ut+1]))}}else f.push(Rt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:A+1}));return f}function xv(s,i,l){let h=0;for(const f of s)h+=Math.max(i,Math.min(l,f[1]))-Math.max(i,Math.min(l,f[0]));return h}function F2(s,i,l){const h=[{fixed:-1,stretch:0}];for(const[f,y]of s){const x=h[h.length-1];h.push({fixed:f-x.stretch,stretch:x.stretch}),h.push({fixed:f-x.stretch,stretch:x.stretch+(y-f)})}return h.push({fixed:i+1,stretch:l}),h}function bv(s,i,l,h){return s/i*l+h}function wv(s,i,l,h){return s-i*l/h}function CF(s,i,l,h){const f=i+s.positionedLines[h].lineOffset;return h===0?l+f/2:l+(f+(i+s.positionedLines[h-1].lineOffset))/2}Cd.loadGlyphRange=function(s,i,l,h,f){const y=256*i,x=y+255,E=h.transformRequest(h.normalizeGlyphsURL(l).replace("{fontstack}",s).replace("{range}",`${y}-${x}`),mt.Glyphs);In(E,(A,P)=>{if(A)f(A);else if(P){const V={},G=function(Z){return new Qf(Z).readFields(gF,{})}(P);for(const Z of G.glyphs)V[Z.id]=Z;f(null,{glyphs:V,ascender:G.ascender,descender:G.descender})}})},Cd.TinySDF=class{constructor({fontSize:s=24,buffer:i=3,radius:l=8,cutoff:h=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=i,this.cutoff=h,this.radius=l;const E=this.size=s+4*i,A=this._createCanvas(E),P=this.ctx=A.getContext("2d",{willReadFrequently:!0});P.font=`${x} ${y} ${s}px ${f}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(s){const i=document.createElement("canvas");return i.width=i.height=s,i}draw(s){const{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:h,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(s),x=Math.ceil(l),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-f))),A=Math.min(this.size-this.buffer,x+Math.ceil(h)),P=E+2*this.buffer,V=A+2*this.buffer,G=Math.max(P*V,0),Z=new Uint8ClampedArray(G),Y={data:Z,width:P,height:V,glyphWidth:E,glyphHeight:A,glyphTop:x,glyphLeft:0,glyphAdvance:i};if(E===0||A===0)return Y;const{ctx:Q,buffer:ne,gridInner:he,gridOuter:we}=this;Q.clearRect(ne,ne,E,A),Q.fillText(s,ne,ne+x);const Re=Q.getImageData(ne,ne,E,A);we.fill(tm,0,G),he.fill(0,0,G);for(let ye=0;ye<A;ye++)for(let Pe=0;Pe<E;Pe++){const Be=Re.data[4*(ye*E+Pe)+3]/255;if(Be===0)continue;const Oe=(ye+ne)*P+Pe+ne;if(Be===1)we[Oe]=0,he[Oe]=tm;else{const it=.5-Be;we[Oe]=it>0?it*it:0,he[Oe]=it<0?it*it:0}}O2(we,0,0,P,V,P,this.f,this.v,this.z),O2(he,ne,ne,E,A,P,this.f,this.v,this.z);for(let ye=0;ye<G;ye++){const Pe=Math.sqrt(we[ye])-Math.sqrt(he[ye]);Z[ye]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return Y}};class SF{constructor(i=[],l=kF){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:h}=this,f=l[i];for(;i>0;){const y=i-1>>1,x=l[y];if(h(f,x)>=0)break;l[i]=x,i=y}l[i]=f}_down(i){const{data:l,compare:h}=this,f=this.length>>1,y=l[i];for(;i<f;){let x=1+(i<<1),E=l[x];const A=x+1;if(A<this.length&&h(l[A],E)<0&&(x=A,E=l[A]),h(E,y)>=0)break;l[i]=E,i=x}l[i]=y}}function kF(s,i){return s<i?-1:s>i?1:0}function TF(s,i=1,l=!1){let h=1/0,f=1/0,y=-1/0,x=-1/0;const E=s[0];for(let Y=0;Y<E.length;Y++){const Q=E[Y];(!Y||Q.x<h)&&(h=Q.x),(!Y||Q.y<f)&&(f=Q.y),(!Y||Q.x>y)&&(y=Q.x),(!Y||Q.y>x)&&(x=Q.y)}const A=Math.min(y-h,x-f);let P=A/2;const V=new SF([],AF);if(A===0)return new k(h,f);for(let Y=h;Y<y;Y+=A)for(let Q=f;Q<x;Q+=A)V.push(new Sd(Y+P,Q+P,P,s));let G=function(Y){let Q=0,ne=0,he=0;const we=Y[0];for(let Re=0,ye=we.length,Pe=ye-1;Re<ye;Pe=Re++){const Be=we[Re],Oe=we[Pe],it=Be.x*Oe.y-Oe.x*Be.y;ne+=(Be.x+Oe.x)*it,he+=(Be.y+Oe.y)*it,Q+=3*it}return new Sd(ne/Q,he/Q,0,Y)}(s),Z=V.length;for(;V.length;){const Y=V.pop();(Y.d>G.d||!G.d)&&(G=Y,l&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,Z)),Y.max-G.d<=i||(P=Y.h/2,V.push(new Sd(Y.p.x-P,Y.p.y-P,P,s)),V.push(new Sd(Y.p.x+P,Y.p.y-P,P,s)),V.push(new Sd(Y.p.x-P,Y.p.y+P,P,s)),V.push(new Sd(Y.p.x+P,Y.p.y+P,P,s)),Z+=4)}return l&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${G.d}`)),G.p}function AF(s,i){return i.max-s.max}class Sd{constructor(i,l,h,f){this.p=new k(i,l),this.h=h,this.d=function(y,x){let E=!1,A=1/0;for(let P=0;P<x.length;P++){const V=x[P];for(let G=0,Z=V.length,Y=Z-1;G<Z;Y=G++){const Q=V[G],ne=V[Y];Q.y>y.y!=ne.y>y.y&&y.x<(ne.x-Q.x)*(y.y-Q.y)/(ne.y-Q.y)+Q.x&&(E=!E),A=Math.min(A,zT(y,Q,ne))}}return(E?1:-1)*Math.sqrt(A)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}}const J1=Number.POSITIVE_INFINITY,MF=Math.sqrt(2);function N2(s,[i,l]){let h=0,f=0;if(l===J1){i<0&&(i=0);const y=i/MF;switch(s){case"top-right":case"top-left":f=y-7;break;case"bottom-right":case"bottom-left":f=7-y;break;case"bottom":f=7-i;break;case"top":f=i-7}switch(s){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=i;break;case"right":h=-i}}else{switch(i=Math.abs(i),l=Math.abs(l),s){case"top-right":case"top-left":case"top":f=l-7;break;case"bottom-right":case"bottom-left":case"bottom":f=7-l}switch(s){case"top-right":case"bottom-right":case"right":h=-i;break;case"top-left":case"bottom-left":case"left":h=i}}return[h,f]}function IF(s,i,l,h,f,y,x,E,A,P){s.createArrays(),s.tilePixelRatio=_n/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const V=s.layers[0].layout,G=s.layers[0]._unevaluatedLayout._values,Z={};if(s.textSizeData.kind==="composite"){const{minZoom:ne,maxZoom:he}=s.textSizeData;Z.compositeTextSizes=[G["text-size"].possiblyEvaluate(new qe(ne),E),G["text-size"].possiblyEvaluate(new qe(he),E)]}if(s.iconSizeData.kind==="composite"){const{minZoom:ne,maxZoom:he}=s.iconSizeData;Z.compositeIconSizes=[G["icon-size"].possiblyEvaluate(new qe(ne),E),G["icon-size"].possiblyEvaluate(new qe(he),E)]}Z.layoutTextSize=G["text-size"].possiblyEvaluate(new qe(A+1),E),Z.layoutIconSize=G["icon-size"].possiblyEvaluate(new qe(A+1),E),Z.textMaxSize=G["text-size"].possiblyEvaluate(new qe(18),E);const Y=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Q=V.get("text-size");for(const ne of s.features){const he=V.get("text-font").evaluate(ne,{},E).join(","),we=Q.evaluate(ne,{},E),Re=Z.layoutTextSize.evaluate(ne,{},E),ye=(Z.layoutIconSize.evaluate(ne,{},E),{horizontal:{},vertical:void 0}),Pe=ne.text;let Be,Oe=[0,0];if(Pe){const yt=Pe.toString(),Rt=V.get("text-letter-spacing").evaluate(ne,{},E)*no,lt=V.get("text-line-height").evaluate(ne,{},E)*no,bt=S(yt)?Rt:0,Ct=V.get("text-anchor").evaluate(ne,{},E),Mt=V.get("text-variable-anchor");if(!Mt){const Gt=V.get("text-radial-offset").evaluate(ne,{},E);Oe=Gt?N2(Ct,[Gt*no,J1]):V.get("text-offset").evaluate(ne,{},E).map(tn=>tn*no)}let Lt=Y?"center":V.get("text-justify").evaluate(ne,{},E);const ut=V.get("symbol-placement")==="point",jt=ut?V.get("text-max-width").evaluate(ne,{},E)*no:1/0,dn=Gt=>{s.allowVerticalPlacement&&b(yt)&&(ye.vertical=X1(Pe,i,l,f,he,jt,lt,Ct,Gt,bt,Oe,ya.vertical,!0,Re,we))};if(!Y&&Mt){const Gt=Lt==="auto"?Mt.map(Vt=>Q1(Vt)):[Lt];let tn=!1;for(let Vt=0;Vt<Gt.length;Vt++){const fn=Gt[Vt];if(!ye.horizontal[fn])if(tn)ye.horizontal[fn]=ye.horizontal[0];else{const zn=X1(Pe,i,l,f,he,jt,lt,"center",fn,bt,Oe,ya.horizontal,!1,Re,we);zn&&(ye.horizontal[fn]=zn,tn=zn.positionedLines.length===1)}}dn("left")}else{if(Lt==="auto"&&(Lt=Q1(Ct)),ut||V.get("text-writing-mode").indexOf("horizontal")>=0||!b(yt)){const Gt=X1(Pe,i,l,f,he,jt,lt,Ct,Lt,bt,Oe,ya.horizontal,!1,Re,we);Gt&&(ye.horizontal[Lt]=Gt)}dn(ut?"left":Lt)}}let it=!1;if(ne.icon&&ne.icon.name){const yt=h[ne.icon.name];yt&&(Be=bF(f[ne.icon.name],V.get("icon-offset").evaluate(ne,{},E),V.get("icon-anchor").evaluate(ne,{},E)),it=yt.sdf,s.sdfIcons===void 0?s.sdfIcons=yt.sdf:s.sdfIcons!==yt.sdf&&Ke("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(yt.pixelRatio!==s.pixelRatio||V.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}const et=j2(ye.horizontal)||ye.vertical;s.iconsInText||(s.iconsInText=!!et&&et.iconsInText),(et||Be)&&PF(s,ne,ye,Be,h,Z,Re,0,Oe,it,x,E,P)}y&&s.generateCollisionDebugBuffers(A,s.collisionBoxArray)}function Q1(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function PF(s,i,l,h,f,y,x,E,A,P,V,G,Z){let Y=y.textMaxSize.evaluate(i,{},G);Y===void 0&&(Y=x);const Q=s.layers[0].layout,ne=Q.get("icon-offset").evaluate(i,{},G),he=j2(l.horizontal)||l.vertical,we=Z.name==="globe",Re=x/24,ye=s.tilePixelRatio*Y/24,Pe=(bt=s.overscaling,s.zoom>18&&bt>2&&(bt>>=1),Math.max(_n/(512*bt),1)*Q.get("symbol-spacing")),Be=Q.get("text-padding")*s.tilePixelRatio,Oe=Q.get("icon-padding")*s.tilePixelRatio,it=ie(Q.get("text-max-angle")),et=Q.get("text-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",yt=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Rt=Q.get("symbol-placement"),lt=Pe/2;var bt;const Ct=Q.get("icon-text-fit");let Mt;h&&Ct!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(Mt=A2(h,l.vertical,Ct,Q.get("icon-text-fit-padding"),ne,Re)),he&&(h=A2(h,he,Ct,Q.get("icon-text-fit-padding"),ne,Re)));const Lt=(ut,jt,dn)=>{if(jt.x<0||jt.x>=_n||jt.y<0||jt.y>=_n)return;let Gt=null;if(we){const{x:tn,y:Vt,z:fn}=Z.projectTilePoint(jt.x,jt.y,dn);Gt={anchor:new gl(tn,Vt,fn,0,void 0),up:Z.upVector(dn,jt.x,jt.y)}}(function(tn,Vt,fn,zn,Dn,Mn,gn,ar,En,Bn,hr,Dr,kr,Rr,Br,Zr,Ui,sr,xi,hi,Yn,Vr,Mi,dr,ti){const fo=tn.addToLineVertexArray(Vt,zn);let ji,Vi,Po,$i,yl,Ad,lm,um=0,gA=0,yA=0,vA=0,hb=-1,db=-1;const js={};let _A=Mc("");const jc=fn?fn.anchor:Vt;let pb=0,fb=0;if(En._unevaluatedLayout.getValue("text-radial-offset")===void 0?[pb,fb]=En.layout.get("text-offset").evaluate(Yn,{},ti).map(na=>na*no):(pb=En.layout.get("text-radial-offset").evaluate(Yn,{},ti)*no,fb=J1),tn.allowVerticalPlacement&&Dn.vertical){const na=Dn.vertical;if(Br)Ad=eb(na),ar&&(lm=eb(ar));else{const ra=En.layout.get("text-rotate").evaluate(Yn,{},ti)+90;Po=Ev(Bn,jc,Vt,hr,Dr,kr,na,Rr,ra,Zr),ar&&($i=Ev(Bn,jc,Vt,hr,Dr,kr,ar,sr,ra))}}if(Mn){const na=En.layout.get("icon-rotate").evaluate(Yn,{},ti),ra=En.layout.get("icon-text-fit")!=="none",cm=B2(Mn,na,Mi,ra),gb=ar?B2(ar,na,Mi,ra):void 0;Vi=Ev(Bn,jc,Vt,hr,Dr,kr,Mn,sr,na),um=4*cm.length;const xA=tn.iconSizeData;let Vc=null;xA.kind==="source"?(Vc=[Bs*En.layout.get("icon-size").evaluate(Yn,{},ti)],Vc[0]>du&&Ke(`${tn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):xA.kind==="composite"&&(Vc=[Bs*Vr.compositeIconSizes[0].evaluate(Yn,{},ti),Bs*Vr.compositeIconSizes[1].evaluate(Yn,{},ti)],(Vc[0]>du||Vc[1]>du)&&Ke(`${tn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),tn.addSymbols(tn.icon,cm,Vc,hi,xi,Yn,!1,fn,Vt,fo.lineStartIndex,fo.lineLength,-1,dr,ti),hb=tn.icon.placedSymbolArray.length-1,gb&&(gA=4*gb.length,tn.addSymbols(tn.icon,gb,Vc,hi,xi,Yn,ya.vertical,fn,Vt,fo.lineStartIndex,fo.lineLength,-1,dr,ti),db=tn.icon.placedSymbolArray.length-1)}for(const na in Dn.horizontal){const ra=Dn.horizontal[na];ji||(_A=Mc(ra.text),Br?yl=eb(ra):ji=Ev(Bn,jc,Vt,hr,Dr,kr,ra,Rr,En.layout.get("text-rotate").evaluate(Yn,{},ti),Zr));const cm=ra.positionedLines.length===1;if(yA+=U2(tn,fn,Vt,ra,gn,En,Br,Yn,Zr,fo,Dn.vertical?ya.horizontal:ya.horizontalOnly,cm?Object.keys(Dn.horizontal):[na],js,hb,Vr,dr,ti),cm)break}Dn.vertical&&(vA+=U2(tn,fn,Vt,Dn.vertical,gn,En,Br,Yn,Zr,fo,ya.vertical,["vertical"],js,db,Vr,dr,ti));let vu=-1;const mb=(na,ra)=>na?Math.max(na,ra):ra;vu=mb(yl,vu),vu=mb(Ad,vu),vu=mb(lm,vu);const oN=vu>-1?1:0;tn.glyphOffsetArray.length>=fu.MAX_GLYPHS&&Ke("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Yn.sortKey!==void 0&&tn.addToSortKeyRanges(tn.symbolInstances.length,Yn.sortKey),tn.symbolInstances.emplaceBack(jc.x,jc.y,jc.z,Vt.x,Vt.y,js.right>=0?js.right:-1,js.center>=0?js.center:-1,js.left>=0?js.left:-1,js.vertical>=0?js.vertical:-1,hb,db,_A,ji!==void 0?ji:tn.collisionBoxArray.length,ji!==void 0?ji+1:tn.collisionBoxArray.length,Po!==void 0?Po:tn.collisionBoxArray.length,Po!==void 0?Po+1:tn.collisionBoxArray.length,Vi!==void 0?Vi:tn.collisionBoxArray.length,Vi!==void 0?Vi+1:tn.collisionBoxArray.length,$i||tn.collisionBoxArray.length,$i?$i+1:tn.collisionBoxArray.length,hr,yA,vA,um,gA,oN,0,pb,fb,vu)})(s,jt,Gt,ut,l,h,f,Mt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,Be,et,A,0,Oe,yt,ne,i,y,P,V,G)};if(Rt==="line")for(const ut of L2(i.geometry,0,0,_n,_n)){const jt=EF(ut,Pe,it,l.vertical||he,h,24,ye,s.overscaling,_n);for(const dn of jt){const Gt=he;Gt&&DF(s,Gt.text,lt,dn)||Lt(ut,dn,G)}}else if(Rt==="line-center"){for(const ut of i.geometry)if(ut.length>1){const jt=wF(ut,it,l.vertical||he,h,24,ye);jt&&Lt(ut,jt,G)}}else if(i.type==="Polygon")for(const ut of j1(i.geometry,0)){const jt=TF(ut,16);Lt(ut[0],new gl(jt.x,jt.y,0,0,void 0),G)}else if(i.type==="LineString")for(const ut of i.geometry)Lt(ut,new gl(ut[0].x,ut[0].y,0,0,void 0),G);else if(i.type==="Point")for(const ut of i.geometry)for(const jt of ut)Lt([jt],new gl(jt.x,jt.y,0,0,void 0),G)}const du=32640;function U2(s,i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q,ne,he){const we=function(Pe,Be,Oe,it,et,yt,Rt,lt){const bt=[];if(Be.positionedLines.length===0)return bt;const Ct=it.layout.get("text-rotate").evaluate(yt,{})*Math.PI/180,Mt=function(Gt){const tn=Gt[0],Vt=Gt[1],fn=tn*Vt;return fn>0?[tn,-Vt]:fn<0?[-tn,Vt]:tn===0?[Vt,tn]:[Vt,-tn]}(Oe);let Lt=Math.abs(Be.top-Be.bottom);for(const Gt of Be.positionedLines)Lt-=Gt.lineOffset;const ut=Be.positionedLines.length,jt=Lt/ut;let dn=Be.top-Oe[1];for(let Gt=0;Gt<ut;++Gt){const tn=Be.positionedLines[Gt];dn=CF(Be,jt,dn,Gt);for(const Vt of tn.positionedGlyphs){if(!Vt.rect)continue;const fn=Vt.rect||{};let zn=4,Dn=!0,Mn=1,gn=0;if(Vt.imageName){const dr=Rt[Vt.imageName];if(!dr)continue;if(dr.sdf){Ke("SDF images are not supported in formatted text and will be ignored.");continue}Dn=!1,Mn=dr.pixelRatio,zn=1/Mn}const ar=(et||lt)&&Vt.vertical,En=Vt.metrics.advance*Vt.scale/2,Bn=Vt.metrics,hr=Vt.rect;if(hr===null)continue;lt&&Be.verticalizable&&(gn=Vt.imageName?En-Vt.metrics.width*Vt.scale/2:0);const Dr=et?[Vt.x+En,Vt.y]:[0,0];let kr=[0,0],Rr=[0,0],Br=!1;et||(ar?(Rr=[Vt.x+En+Mt[0],Vt.y+Mt[1]-gn],Br=!0):kr=[Vt.x+En+Oe[0],Vt.y+Oe[1]-gn]);const Zr=hr.w*Vt.scale/(Mn*(Vt.localGlyph?2:1)),Ui=hr.h*Vt.scale/(Mn*(Vt.localGlyph?2:1));let sr,xi,hi,Yn;if(ar){const dr=Vt.y-dn,ti=new k(-En,En-dr),fo=-Math.PI/2,ji=new k(...Rr);sr=new k(-En+kr[0],kr[1]),sr._rotateAround(fo,ti)._add(ji),sr.x+=-dr+En,sr.y-=(Bn.left-zn)*Vt.scale;const Vi=Vt.imageName?Bn.advance*Vt.scale:no*Vt.scale,Po=String.fromCharCode(Vt.glyph);oF(Po)?sr.x+=(1-zn)*Vt.scale:aF(Po)?sr.x+=Vi-Bn.height*Vt.scale+(-zn-1)*Vt.scale:sr.x+=Vt.imageName||Bn.width+2*zn===hr.w&&Bn.height+2*zn===hr.h?(Vi-Ui)/2:(Vi-(Bn.height+2*zn)*Vt.scale)/2,xi=new k(sr.x,sr.y-Zr),hi=new k(sr.x+Ui,sr.y),Yn=new k(sr.x+Ui,sr.y-Zr)}else{const dr=(Bn.left-zn)*Vt.scale-En+kr[0],ti=(-Bn.top-zn)*Vt.scale+kr[1],fo=dr+Zr,ji=ti+Ui;sr=new k(dr,ti),xi=new k(fo,ti),hi=new k(dr,ji),Yn=new k(fo,ji)}if(Ct){let dr;dr=et?new k(0,0):Br?new k(Mt[0],Mt[1]):new k(Oe[0],Oe[1]),sr._rotateAround(Ct,dr),xi._rotateAround(Ct,dr),hi._rotateAround(Ct,dr),Yn._rotateAround(Ct,dr)}const Vr=new k(0,0),Mi=new k(0,0);bt.push({tl:sr,tr:xi,bl:hi,br:Yn,tex:fn,writingMode:Be.writingMode,glyphOffset:Dr,sectionIndex:Vt.sectionIndex,isSDF:Dn,pixelOffsetTL:Vr,pixelOffsetBR:Mi,minFontScaleX:0,minFontScaleY:0})}}return bt}(0,h,A,y,x,E,f,s.allowVerticalPlacement),Re=s.textSizeData;let ye=null;Re.kind==="source"?(ye=[Bs*y.layout.get("text-size").evaluate(E,{},he)],ye[0]>du&&Ke(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Re.kind==="composite"&&(ye=[Bs*Q.compositeTextSizes[0].evaluate(E,{},he),Bs*Q.compositeTextSizes[1].evaluate(E,{},he)],(ye[0]>du||ye[1]>du)&&Ke(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,we,ye,A,x,E,V,i,l,P.lineStartIndex,P.lineLength,Y,ne,he);for(const Pe of G)Z[Pe]=s.text.placedSymbolArray.length-1;return 4*we.length}function j2(s){for(const i in s)return s[i];return null}function Ev(s,i,l,h,f,y,x,E,A,P){let V=x.top,G=x.bottom,Z=x.left,Y=x.right;const Q=x.collisionPadding;if(Q&&(Z-=Q[0],V-=Q[1],Y+=Q[2],G+=Q[3]),A){const ne=new k(Z,V),he=new k(Y,V),we=new k(Z,G),Re=new k(Y,G),ye=ie(A);let Pe=new k(0,0);P&&(Pe=new k(P[0],P[1])),ne._rotateAround(ye,Pe),he._rotateAround(ye,Pe),we._rotateAround(ye,Pe),Re._rotateAround(ye,Pe),Z=Math.min(ne.x,he.x,we.x,Re.x),Y=Math.max(ne.x,he.x,we.x,Re.x),V=Math.min(ne.y,he.y,we.y,Re.y),G=Math.max(ne.y,he.y,we.y,Re.y)}return s.emplaceBack(i.x,i.y,i.z,l.x,l.y,Z,V,Y,G,E,h,f,y),s.length-1}function eb(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const i=s.bottom-s.top;return i>0?Math.max(10,i):null}function DF(s,i,l,h){const f=s.compareText;if(i in f){const y=f[i];for(let x=y.length-1;x>=0;x--)if(h.dist(y[x])<l)return!0}else f[i]=[];return f[i].push(h),!1}function V2(s,i){const l=s.fovAboveCenter,h=s.elevation?s.elevation.getMinElevationBelowMSL()*i:0,f=(s._camera.position[2]*s.worldSize-h)/Math.cos(s._pitch),y=Math.sin(l)*f/Math.sin(Math.max(Math.PI/2-s._pitch-l,.01)),x=Math.sin(s._pitch)*y+f;return Math.min(1.01*x,f*(1/s._horizonShift))}function Nc(s,i){if(!i.isReprojectedInTileSpace)return{scale:1<<s.z,x:s.x,y:s.y,x2:s.x+1,y2:s.y+1,projection:i};const l=Math.pow(2,-s.z),h=s.x*l,f=(s.x+1)*l,y=s.y*l,x=(s.y+1)*l,E=ga(h),A=ga(f),P=eo(y),V=eo(x),G=i.project(E,P),Z=i.project(A,P),Y=i.project(A,V),Q=i.project(E,V);let ne=Math.min(G.x,Z.x,Y.x,Q.x),he=Math.min(G.y,Z.y,Y.y,Q.y),we=Math.max(G.x,Z.x,Y.x,Q.x),Re=Math.max(G.y,Z.y,Y.y,Q.y);const ye=l/16;function Pe(Oe,it,et,yt,Rt,lt){const bt=(et+Rt)/2,Ct=(yt+lt)/2,Mt=i.project(ga(bt),eo(Ct)),Lt=Math.max(0,ne-Mt.x,he-Mt.y,Mt.x-we,Mt.y-Re);ne=Math.min(ne,Mt.x),we=Math.max(we,Mt.x),he=Math.min(he,Mt.y),Re=Math.max(Re,Mt.y),Lt>ye&&(Pe(Oe,Mt,et,yt,bt,Ct),Pe(Mt,it,bt,Ct,Rt,lt))}Pe(G,Z,h,y,f,y),Pe(Z,Y,f,y,f,x),Pe(Y,Q,f,x,h,x),Pe(Q,G,h,x,h,y),ne-=ye,he-=ye,we+=ye,Re+=ye;const Be=1/Math.max(we-ne,Re-he);return{scale:Be,x:ne*Be,y:he*Be,x2:we*Be,y2:Re*Be,projection:i}}const RF=cs(new Float32Array(16));class pu{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,l){return{x:0,y:0,z:0}}unproject(i,l){return new Xn(0,0)}projectTilePoint(i,l,h){return{x:i,y:l,z:0}}locationPoint(i,l,h=!0){return i._coordinatePoint(i.locationCoordinate(l),h)}pixelsPerMeter(i,l){return ds(1,i)*l}pixelSpaceConversion(i,l,h){return 1}farthestPixelDistance(i){return V2(i,i.pixelsPerMeter)}pointCoordinate(i,l,h,f){const y=i.horizonLineFromTop(!1),x=new k(l,Math.max(y,h));return i.rayIntersectionCoordinate(i.pointRayIntersection(x,f))}pointCoordinate3D(i,l,h){const f=new k(l,h);if(i.elevation)return i.elevation.pointCoordinate(f);{const y=this.pointCoordinate(i,f.x,f.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(i,l){if(i.elevation)return!this.pointCoordinate3D(i,l.x,l.y);const h=i.horizonLineFromTop();return l.y<h}createInversionMatrix(i,l){return RF}createTileMatrix(i,l,h){let f,y,x;const E=h.canonical,A=cs(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=Nc(E,this);f=1,y=P.x+h.wrap*P.scale,x=P.y,Dc(A,A,[f/P.scale,f/P.scale,i.pixelsPerMeter/l])}else f=l/i.zoomScale(E.z),y=(E.x+Math.pow(2,E.z)*h.wrap)*f,x=E.y*f;return Df(A,A,[y,x,0]),Dc(A,A,[f/_n,f/_n,1]),A}upVector(i,l,h){return[0,0,1]}upVectorScale(i,l,h){return{metersToTile:1}}}class LF extends pu{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[l,h]=this.parallels=i.parallels||[29.5,45.5],f=Math.sin(ie(l));this.n=(f+Math.sin(ie(h)))/2,this.c=1+f*(2*this.n-f),this.r0=Math.sqrt(this.c)/this.n}project(i,l){const{n:h,c:f,r0:y}=this,x=ie(i-this.center[0]),E=ie(l),A=Math.sqrt(f-2*h*Math.sin(E))/h;return{x:A*Math.sin(x*h),y:A*Math.cos(x*h)-y,z:0}}unproject(i,l){const{n:h,c:f,r0:y}=this,x=y+l;let E=Math.atan2(i,Math.abs(x))*Math.sign(x);x*h<0&&(E-=Math.PI*Math.sign(i)*Math.sign(x));const A=ie(this.center[0])*h;E=xt(E,-Math.PI-A,Math.PI-A);const P=Ne(ue(E/h)+this.center[0],-180,180),V=Math.asin(Ne((f-(i*i+x*x)*h*h)/(2*h),-1,1)),G=Ne(ue(V),-to,to);return new Xn(P,G)}}const nm=1.340264,rm=-.081106,im=893e-6,om=.003796,Cv=Math.sqrt(3)/2;class OF extends pu{project(i,l){l=l/180*Math.PI,i=i/180*Math.PI;const h=Math.asin(Cv*Math.sin(l)),f=h*h,y=f*f*f;return{x:.5*(i*Math.cos(h)/(Cv*(nm+3*rm*f+y*(7*im+9*om*f)))/Math.PI+.5),y:1-.5*(h*(nm+rm*f+y*(im+om*f))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,f=h*h,y=f*f*f;for(let V,G,Z,Y=0;Y<12&&(G=h*(nm+rm*f+y*(im+om*f))-l,Z=nm+3*rm*f+y*(7*im+9*om*f),V=G/Z,h=Ne(h-V,-Math.PI/3,Math.PI/3),f=h*h,y=f*f*f,!(Math.abs(V)<1e-12));++Y);const x=Cv*i*(nm+3*rm*f+y*(7*im+9*om*f))/Math.cos(h),E=Math.asin(Math.sin(h)/Cv),A=Ne(180*x/Math.PI,-180,180),P=Ne(180*E/Math.PI,-to,to);return new Xn(A,P)}}class zF extends pu{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){return{x:.5+i/360,y:.5-l/360,z:0}}unproject(i,l){const h=360*(i-.5),f=Ne(360*(.5-l),-to,to);return new Xn(h,f)}}const kd=Math.PI/2;function Sv(s){return Math.tan((kd+s)/2)}class BF extends pu{constructor(i){super(i),this.center=i.center||[0,30];const[l,h]=this.parallels=i.parallels||[30,30];let f=ie(l),y=ie(h);this.southernCenter=f+y<0,this.southernCenter&&(f=-f,y=-y);const x=Math.cos(f),E=Sv(f);this.n=f===y?Math.sin(f):Math.log(x/Math.cos(y))/Math.log(Sv(y)/E),this.f=x*Math.pow(Sv(f),this.n)/this.n}project(i,l){l=ie(l),this.southernCenter&&(l=-l),i=ie(i-this.center[0]);const h=1e-6,{n:f,f:y}=this;y>0?l<-kd+h&&(l=-kd+h):l>kd-h&&(l=kd-h);const x=y/Math.pow(Sv(l),f);let E=x*Math.sin(f*i),A=y-x*Math.cos(f*i);return E=.5*(E/Math.PI+.5),A=.5*(A/Math.PI+.5),{x:E,y:this.southernCenter?A:1-A,z:0}}unproject(i,l){i=(2*i-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:h,f}=this,y=f-l,x=Math.sign(y),E=Math.sign(h)*Math.sqrt(i*i+y*y);let A=Math.atan2(i,Math.abs(y))*x;y*h<0&&(A-=Math.PI*Math.sign(i)*x);const P=Ne(ue(A/h)+this.center[0],-180,180),V=Ne(ue(2*Math.atan(Math.pow(f/E,1/h))-kd),-to,to);return new Xn(P,this.southernCenter?-V:V)}}class $2 extends pu{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,l){return{x:Os(i),y:zs(l),z:0}}unproject(i,l){const h=ga(i),f=eo(l);return new Xn(h,f)}}const H2=ie(to);class FF extends pu{project(i,l){const h=(l=ie(l))*l,f=h*h;return{x:.5*((i=ie(i))*(.8707-.131979*h+f*(f*(.003971*h-.001529*f)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+h*(.015085+f*(.028874*h-.044475-.005916*f)))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,f=25,y=0,x=h*h;do{x=h*h;const P=x*x;y=(h*(1.007226+x*(.015085+P*(.028874*x-.044475-.005916*P)))-l)/(1.007226+x*(.045255+P*(.259866*x-.311325-.005916*11*P))),h=Ne(h-y,-H2,H2)}while(Math.abs(y)>1e-6&&--f>0);x=h*h;const E=Ne(ue(i/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),A=ue(h);return new Xn(E,A)}}const W2=ie(to);class NF extends pu{project(i,l){l=ie(l),i=ie(i);const h=Math.cos(l),f=2/Math.PI,y=Math.acos(h*Math.cos(i/2)),x=Math.sin(y)/y,E=.5*(i*f+2*h*Math.sin(i/2)/x)||0,A=.5*(l+Math.sin(l)/x)||0;return{x:.5*(E/Math.PI+.5),y:1-.5*(A/Math.PI+1),z:0}}unproject(i,l){let h=i=(2*i-.5)*Math.PI,f=l=(2*(1-l)-1)*Math.PI,y=25;const x=1e-6;let E=0,A=0;do{const P=Math.cos(f),V=Math.sin(f),G=2*V*P,Z=V*V,Y=P*P,Q=Math.cos(h/2),ne=Math.sin(h/2),he=2*Q*ne,we=ne*ne,Re=1-Y*Q*Q,ye=Re?1/Re:0,Pe=Re?Math.acos(P*Q)*Math.sqrt(1/Re):0,Be=.5*(2*Pe*P*ne+2*h/Math.PI)-i,Oe=.5*(Pe*V+f)-l,it=.5*ye*(Y*we+Pe*P*Q*Z)+1/Math.PI,et=ye*(he*G/4-Pe*V*ne),yt=.125*ye*(G*ne-Pe*V*Y*he),Rt=.5*ye*(Z*Q+Pe*we*P)+.5,lt=et*yt-Rt*it;E=(Oe*et-Be*Rt)/lt,A=(Be*yt-Oe*it)/lt,h=Ne(h-E,-Math.PI,Math.PI),f=Ne(f-A,-W2,W2)}while((Math.abs(E)>x||Math.abs(A)>x)&&--y>0);return new Xn(ue(h),ue(f))}}class G2 extends pu{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ie(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){const{scale:h,cosPhi:f}=this;return{x:ie(i)*f*h+.5,y:-Math.sin(ie(l))/f*h+.5,z:0}}unproject(i,l){const{scale:h,cosPhi:f}=this,y=-(l-.5)/h,x=Ne(ue((i-.5)/h)/f,-180,180),E=Math.asin(Ne(y*f,-1,1)),A=Ne(ue(E),-to,to);return new Xn(x,A)}}class UF extends $2{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,l,h){const f=Uf(i,l,h);return ei(f,f,jf(Ls(h))),{x:f[0],y:f[1],z:f[2]}}locationPoint(i,l){const h=dd(l.lat,l.lng),f=Ao([],h),y=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(l),i._centerAltitude):i._centerAltitude;zf(h,h,f,ds(1,0)*_n*y);const x=cs(new Float64Array(16));return Pc(x,i.pixelMatrix,i.globeMatrix),ei(h,h,x),new k(h[0],h[1])}pixelsPerMeter(i,l){return ds(1,0)*l}pixelSpaceConversion(i,l,h){const f=ds(1,i)*l,y=Hn(ds(1,45)*l,f,h);return this.pixelsPerMeter(i,l)/y}createTileMatrix(i,l,h){const f=T1(Ls(h.canonical));return Pc(new Float64Array(16),i.globeMatrix,f)}createInversionMatrix(i,l){const{center:h}=i,f=jf(Ls(l));return ev(f,f,ie(h.lng)),v1(f,f,ie(h.lat)),Dc(f,f,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(f)}pointCoordinate(i,l,h,f){return wT(i,l,h,!0)||new fd(0,0)}pointCoordinate3D(i,l,h){const f=this.pointCoordinate(i,l,h,0);return[f.x,f.y,f.z]}isPointAboveHorizon(i,l){return!wT(i,l.x,l.y,!1)}farthestPixelDistance(i){const l=function(f,y){const x=f.cameraToCenterDistance,E=f._centerAltitude*y,A=f._camera,P=f._camera.forward(),V=dl([],ma([],P,-x),[0,0,E]),G=f.worldSize/(2*Math.PI),Z=[0,0,-G],Y=f.width/f.height,Q=Math.tan(f.fovAboveCenter),ne=ma([],A.up(),Q),he=ma([],A.right(),Q*Y),we=Ao([],dl([],dl([],P,ne),he)),Re=[];let ye;if(new w1(V,we).closestPointOnSphere(Z,G,Re)){const Pe=dl([],Re,Z),Be=hs([],Pe,V);ye=Math.cos(f.fovAboveCenter)*Rf(Be)}else{const Pe=hs([],V,Z),Be=hs([],Z,V);Ao(Be,Be);const Oe=Rf(Pe)-G;ye=Math.sqrt(Oe*(Oe+2*G));const it=Math.acos(ye/(G+Oe))-Math.acos(za(P,Be));ye*=Math.cos(it)}return 1.01*ye}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),h=pd(i.zoom);if(h>0){const f=V2(i,ds(1,i.center.lat)*i.worldSize),y=i.worldSize/(2*Math.PI),x=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Hn(l,f+y*(1-Math.cos(x)),Math.pow(h,10))}return l}upVector(i,l,h){return Uf(l,h,i,1)}upVectorScale(i){return{metersToTile:tv(rv(Ls(i)))}}}function q2(s){const i=s.parallels,l=!!i&&Math.abs(i[0]+i[1])<.01;switch(s.name){case"mercator":return new $2(s);case"equirectangular":return new zF(s);case"naturalEarth":return new FF(s);case"equalEarth":return new OF(s);case"winkelTripel":return new NF(s);case"albers":return l?new G2(s):new LF(s);case"lambertConformalConic":return l?new G2(s):new BF(s);case"globe":return new UF(s)}throw new Error(`Invalid projection name: ${s.name}`)}const jF=pv.types,VF=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function kv(s,i,l,h,f,y,x,E,A,P,V,G,Z){const Y=E?Math.min(du,Math.round(E[0])):0,Q=E?Math.min(du,Math.round(E[1])):0;s.emplaceBack(i,l,Math.round(32*h),Math.round(32*f),y,x,(Y<<1)+(A?1:0),Q,16*P,16*V,256*G,256*Z)}function Tv(s,i,l,h,f,y,x){s.emplaceBack(i,l,h,f,y,x)}function Av(s,i,l,h,f){s.emplaceBack(i,l,h,f),s.emplaceBack(i,l,h,f),s.emplaceBack(i,l,h,f),s.emplaceBack(i,l,h,f)}function $F(s){for(const i of s.sections)if(ee(i.text))return!0;return!1}class tb{constructor(i){this.layoutVertexArray=new as,this.indexArray=new Qi,this.programConfigurations=i,this.segments=new ui,this.dynamicLayoutVertexArray=new gr,this.opacityVertexArray=new yr,this.placedSymbolArray=new Zk,this.globeExtVertexArray=new zr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,h,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,YB.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,QB.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,VF,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,JB.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||f)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Jt(tb,"SymbolBuffers");class nb{constructor(i,l,h){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new h,this.segments=new ui,this.collisionVertexArray=new Pr,this.collisionVertexArrayExt=new Ji}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,eF.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,tF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Jt(nb,"CollisionBuffers");class fu{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cs([]),this.placementViewportMatrix=cs([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=W1(this.zoom,l["text-size"]),this.iconSizeData=W1(this.zoom,l["icon-size"]);const h=this.layers[0].layout,f=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&f.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(x=>ya[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new tb(new Ic(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new tb(new Ic(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Yk,this.lineVertexArray=new Jk,this.symbolInstances=new Kk}calculateGlyphDependencies(i,l,h,f,y){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,f&&y){const E=Jf[i.charAt(x)];E&&(l[E.charCodeAt(0)]=!0)}}populate(i,l,h,f){const y=this.layers[0],x=y.layout,E=this.projection.name==="globe",A=x.get("text-font"),P=x.get("text-field"),V=x.get("icon-image"),G=(P.value.kind!=="constant"||P.value.value instanceof ko&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),Z=V.value.kind!=="constant"||!!V.value.value||Object.keys(V.parameters).length>0,Y=x.get("symbol-sort-key");if(this.features=[],!G&&!Z)return;const Q=l.iconDependencies,ne=l.glyphDependencies,he=l.availableImages,we=new qe(this.zoom);for(const{feature:Re,id:ye,index:Pe,sourceLayerIndex:Be}of i){const Oe=y._featureFilter.needGeometry,it=zc(Re,Oe);if(!y._featureFilter.filter(we,it,h))continue;if(Oe||(it.geometry=pl(Re,h,f)),E&&Re.type!==1&&h.z<=5){const lt=it.geometry,bt=.98078528056,Ct=(Mt,Lt)=>za(Uf(Mt.x,Mt.y,h,1),Uf(Lt.x,Lt.y,h,1))<bt;for(let Mt=0;Mt<lt.length;Mt++)lt[Mt]=Q5(lt[Mt],Ct)}let et,yt;if(G){const lt=y.getValueAndResolveTokens("text-field",it,h,he),bt=ko.factory(lt);$F(bt)&&(this.hasRTLText=!0),(!this.hasRTLText||Fe()==="unavailable"||this.hasRTLText&&$e.isParsed())&&(et=iF(bt,y,it))}if(Z){const lt=y.getValueAndResolveTokens("icon-image",it,h,he);yt=lt instanceof po?lt:po.fromString(lt)}if(!et&&!yt)continue;const Rt=this.sortFeaturesByKey?Y.evaluate(it,{},h):void 0;if(this.features.push({id:ye,text:et,icon:yt,index:Pe,sourceLayerIndex:Be,geometry:it.geometry,properties:Re.properties,type:jF[Re.type],sortKey:Rt}),yt&&(Q[yt.name]=!0),et){const lt=A.evaluate(it,{},h).join(","),bt=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ya.vertical)>=0;for(const Ct of et.sections)if(Ct.image)Q[Ct.image.name]=!0;else{const Mt=b(et.toString()),Lt=Ct.fontStack||lt,ut=ne[Lt]=ne[Lt]||{};this.calculateGlyphDependencies(Ct.text,ut,bt,this.allowVerticalPlacement,Mt)}}}x.get("symbol-placement")==="line"&&(this.features=function(Re){const ye={},Pe={},Be=[];let Oe=0;function it(lt){Be.push(Re[lt]),Oe++}function et(lt,bt,Ct){const Mt=Pe[lt];return delete Pe[lt],Pe[bt]=Mt,Be[Mt].geometry[0].pop(),Be[Mt].geometry[0]=Be[Mt].geometry[0].concat(Ct[0]),Mt}function yt(lt,bt,Ct){const Mt=ye[bt];return delete ye[bt],ye[lt]=Mt,Be[Mt].geometry[0].shift(),Be[Mt].geometry[0]=Ct[0].concat(Be[Mt].geometry[0]),Mt}function Rt(lt,bt,Ct){const Mt=Ct?bt[0][bt[0].length-1]:bt[0][0];return`${lt}:${Mt.x}:${Mt.y}`}for(let lt=0;lt<Re.length;lt++){const bt=Re[lt],Ct=bt.geometry,Mt=bt.text?bt.text.toString():null;if(!Mt){it(lt);continue}const Lt=Rt(Mt,Ct),ut=Rt(Mt,Ct,!0);if(Lt in Pe&&ut in ye&&Pe[Lt]!==ye[ut]){const jt=yt(Lt,ut,Ct),dn=et(Lt,ut,Be[jt].geometry);delete ye[Lt],delete Pe[ut],Pe[Rt(Mt,Be[dn].geometry,!0)]=dn,Be[jt].geometry=null}else Lt in Pe?et(Lt,ut,Ct):ut in ye?yt(Lt,ut,Ct):(it(lt),ye[Lt]=Oe-1,Pe[ut]=Oe-1)}return Be.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Re,ye)=>Re.sortKey-ye.sortKey)}update(i,l,h,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,h,f),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,h,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=q2(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const h=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:f,y}of l)this.lineVertexArray.emplaceBack(f,y);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,l,h,f,y,x,E,A,P,V,G,Z,Y,Q){const ne=i.indexArray,he=i.layoutVertexArray,we=i.globeExtVertexArray,Re=i.segments.prepareSegment(4*l.length,he,ne,this.canOverlap?x.sortKey:void 0),ye=this.glyphOffsetArray.length,Pe=Re.vertexLength,Be=this.allowVerticalPlacement&&E===ya.vertical?Math.PI/2:0,Oe=x.text&&x.text.sections;for(let et=0;et<l.length;et++){const{tl:yt,tr:Rt,bl:lt,br:bt,tex:Ct,pixelOffsetTL:Mt,pixelOffsetBR:Lt,minFontScaleX:ut,minFontScaleY:jt,glyphOffset:dn,isSDF:Gt,sectionIndex:tn}=l[et],Vt=Re.vertexLength,fn=dn[1];if(kv(he,P.x,P.y,yt.x,fn+yt.y,Ct.x,Ct.y,h,Gt,Mt.x,Mt.y,ut,jt),kv(he,P.x,P.y,Rt.x,fn+Rt.y,Ct.x+Ct.w,Ct.y,h,Gt,Lt.x,Mt.y,ut,jt),kv(he,P.x,P.y,lt.x,fn+lt.y,Ct.x,Ct.y+Ct.h,h,Gt,Mt.x,Lt.y,ut,jt),kv(he,P.x,P.y,bt.x,fn+bt.y,Ct.x+Ct.w,Ct.y+Ct.h,h,Gt,Lt.x,Lt.y,ut,jt),A){const{x:zn,y:Dn,z:Mn}=A.anchor,[gn,ar,En]=A.up;Tv(we,zn,Dn,Mn,gn,ar,En),Tv(we,zn,Dn,Mn,gn,ar,En),Tv(we,zn,Dn,Mn,gn,ar,En),Tv(we,zn,Dn,Mn,gn,ar,En),Av(i.dynamicLayoutVertexArray,zn,Dn,Mn,Be)}else Av(i.dynamicLayoutVertexArray,P.x,P.y,P.z,Be);ne.emplaceBack(Vt,Vt+1,Vt+2),ne.emplaceBack(Vt+1,Vt+2,Vt+3),Re.vertexLength+=4,Re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dn[0]),et!==l.length-1&&tn===l[et+1].sectionIndex||i.programConfigurations.populatePaintArrays(he.length,x,x.index,{},Y,Q,Oe&&Oe[tn])}const it=A?A.anchor:P;i.placedSymbolArray.emplaceBack(it.x,it.y,it.z,P.x,P.y,ye,this.glyphOffsetArray.length-ye,Pe,V,G,P.segment,h?h[0]:0,h?h[1]:0,f[0],f[1],E,0,!1,0,Z,0)}_commitLayoutVertex(i,l,h,f,y,x,E){i.emplaceBack(l,h,f,y,x,Math.round(E.x),Math.round(E.y))}_addCollisionDebugVertices(i,l,h,f,y,x,E){const A=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),P=A.vertexLength,V=E.tileAnchorX,G=E.tileAnchorY;for(let Y=0;Y<4;Y++)h.collisionVertexArray.emplaceBack(0,0,0,0);h.collisionVertexArrayExt.emplaceBack(l,-i.padding,-i.padding),h.collisionVertexArrayExt.emplaceBack(l,i.padding,-i.padding),h.collisionVertexArrayExt.emplaceBack(l,i.padding,i.padding),h.collisionVertexArrayExt.emplaceBack(l,-i.padding,i.padding),this._commitLayoutVertex(h.layoutVertexArray,f,y,x,V,G,new k(i.x1,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,f,y,x,V,G,new k(i.x2,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,f,y,x,V,G,new k(i.x2,i.y2)),this._commitLayoutVertex(h.layoutVertexArray,f,y,x,V,G,new k(i.x1,i.y2)),A.vertexLength+=4;const Z=h.indexArray;Z.emplaceBack(P,P+1),Z.emplaceBack(P+1,P+2),Z.emplaceBack(P+2,P+3),Z.emplaceBack(P+3,P),A.primitiveLength+=4}_addTextDebugCollisionBoxes(i,l,h,f,y,x){for(let E=f;E<y;E++){const A=h.get(E),P=this.getSymbolInstanceTextSize(i,x,l,E);this._addCollisionDebugVertices(A,P,this.textCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(i,l,h,f,y,x){for(let E=f;E<y;E++){const A=h.get(E),P=this.getSymbolInstanceIconSize(i,l,x.placedIconSymbolIndex);this._addCollisionDebugVertices(A,P,this.iconCollisionBox,A.projectedAnchorX,A.projectedAnchorY,A.projectedAnchorZ,x)}}generateCollisionDebugBuffers(i,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new nb(qr,m2.members,Ps),this.iconCollisionBox=new nb(qr,m2.members,Ps);const h=xd(this.iconSizeData,i),f=xd(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(f,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(f,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(h,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(h,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(i,l,h,f){const y=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:f),x=yv(this.textSizeData,i,y)/no;return this.tilePixelRatio*x}getSymbolInstanceIconSize(i,l,h){const f=this.icon.placedSymbolArray.get(h),y=yv(this.iconSizeData,i,f);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(i,l,h){i.emplaceBack(l,-h,-h),i.emplaceBack(l,h,-h),i.emplaceBack(l,h,h),i.emplaceBack(l,-h,h)}_updateTextDebugCollisionBoxes(i,l,h,f,y,x){for(let E=f;E<y;E++){const A=h.get(E),P=this.getSymbolInstanceTextSize(i,x,l,E);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,P,A.padding)}}_updateIconDebugCollisionBoxes(i,l,h,f,y,x){for(let E=f;E<y;E++){const A=h.get(E),P=this.getSymbolInstanceIconSize(i,l,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,P,A.padding)}}updateCollisionDebugBuffers(i,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const h=xd(this.iconSizeData,i),f=xd(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(f,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(f,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(h,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(h,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,l,h,f,y,x,E,A,P){const V={};if(l<h){const{x1:G,y1:Z,x2:Y,y2:Q,padding:ne,projectedAnchorX:he,projectedAnchorY:we,projectedAnchorZ:Re,tileAnchorX:ye,tileAnchorY:Pe,featureIndex:Be}=i.get(l);V.textBox={x1:G,y1:Z,x2:Y,y2:Q,padding:ne,projectedAnchorX:he,projectedAnchorY:we,projectedAnchorZ:Re,tileAnchorX:ye,tileAnchorY:Pe},V.textFeatureIndex=Be}if(f<y){const{x1:G,y1:Z,x2:Y,y2:Q,padding:ne,projectedAnchorX:he,projectedAnchorY:we,projectedAnchorZ:Re,tileAnchorX:ye,tileAnchorY:Pe,featureIndex:Be}=i.get(f);V.verticalTextBox={x1:G,y1:Z,x2:Y,y2:Q,padding:ne,projectedAnchorX:he,projectedAnchorY:we,projectedAnchorZ:Re,tileAnchorX:ye,tileAnchorY:Pe},V.verticalTextFeatureIndex=Be}if(x<E){const{x1:G,y1:Z,x2:Y,y2:Q,padding:ne,projectedAnchorX:he,projectedAnchorY:we,projectedAnchorZ:Re,tileAnchorX:ye,tileAnchorY:Pe,featureIndex:Be}=i.get(x);V.iconBox={x1:G,y1:Z,x2:Y,y2:Q,padding:ne,projectedAnchorX:he,projectedAnchorY:we,projectedAnchorZ:Re,tileAnchorX:ye,tileAnchorY:Pe},V.iconFeatureIndex=Be}if(A<P){const{x1:G,y1:Z,x2:Y,y2:Q,padding:ne,projectedAnchorX:he,projectedAnchorY:we,projectedAnchorZ:Re,tileAnchorX:ye,tileAnchorY:Pe,featureIndex:Be}=i.get(A);V.verticalIconBox={x1:G,y1:Z,x2:Y,y2:Q,padding:ne,projectedAnchorX:he,projectedAnchorY:we,projectedAnchorZ:Re,tileAnchorX:ye,tileAnchorY:Pe},V.verticalIconFeatureIndex=Be}return V}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const h=i.placedSymbolArray.get(l),f=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<f;y+=4)i.indexArray.emplaceBack(y,y+1,y+2),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),h=Math.cos(i),f=[],y=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const A=this.symbolInstances.get(E);f.push(0|Math.round(l*A.tileAnchorX+h*A.tileAnchorY)),y.push(A.featureIndex)}return x.sort((E,A)=>f[E]-f[A]||y[A]-y[E]),x}addToSortKeyRanges(i,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:f,centerJustifiedTextSymbolIndex:y,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:E,placedIconSymbolIndex:A,verticalPlacedIconSymbolIndex:P}=h;f>=0&&this.addIndicesForPlacedSymbol(this.text,f),y>=0&&y!==f&&this.addIndicesForPlacedSymbol(this.text,y),x>=0&&x!==y&&x!==f&&this.addIndicesForPlacedSymbol(this.text,x),E>=0&&this.addIndicesForPlacedSymbol(this.text,E),A>=0&&this.addIndicesForPlacedSymbol(this.icon,A),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Jt(fu,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),fu.MAX_GLYPHS=65535,fu.addDynamicAttributes=Av;const HF=new It({"symbol-placement":new Ge(gt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ge(gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ge(gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new at(gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ge(gt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ge(gt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ge(gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ge(gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ge(gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new at(gt.layout_symbol["icon-size"]),"icon-text-fit":new Ge(gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ge(gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new at(gt.layout_symbol["icon-image"]),"icon-rotate":new at(gt.layout_symbol["icon-rotate"]),"icon-padding":new Ge(gt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ge(gt.layout_symbol["icon-keep-upright"]),"icon-offset":new at(gt.layout_symbol["icon-offset"]),"icon-anchor":new at(gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ge(gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ge(gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ge(gt.layout_symbol["text-rotation-alignment"]),"text-field":new at(gt.layout_symbol["text-field"]),"text-font":new at(gt.layout_symbol["text-font"]),"text-size":new at(gt.layout_symbol["text-size"]),"text-max-width":new at(gt.layout_symbol["text-max-width"]),"text-line-height":new at(gt.layout_symbol["text-line-height"]),"text-letter-spacing":new at(gt.layout_symbol["text-letter-spacing"]),"text-justify":new at(gt.layout_symbol["text-justify"]),"text-radial-offset":new at(gt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ge(gt.layout_symbol["text-variable-anchor"]),"text-anchor":new at(gt.layout_symbol["text-anchor"]),"text-max-angle":new Ge(gt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ge(gt.layout_symbol["text-writing-mode"]),"text-rotate":new at(gt.layout_symbol["text-rotate"]),"text-padding":new Ge(gt.layout_symbol["text-padding"]),"text-keep-upright":new Ge(gt.layout_symbol["text-keep-upright"]),"text-transform":new at(gt.layout_symbol["text-transform"]),"text-offset":new at(gt.layout_symbol["text-offset"]),"text-allow-overlap":new Ge(gt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ge(gt.layout_symbol["text-ignore-placement"]),"text-optional":new Ge(gt.layout_symbol["text-optional"])});var rb={paint:new It({"icon-opacity":new at(gt.paint_symbol["icon-opacity"]),"icon-color":new at(gt.paint_symbol["icon-color"]),"icon-halo-color":new at(gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new at(gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new at(gt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ge(gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ge(gt.paint_symbol["icon-translate-anchor"]),"text-opacity":new at(gt.paint_symbol["text-opacity"]),"text-color":new at(gt.paint_symbol["text-color"],{runtimeType:Ra,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new at(gt.paint_symbol["text-halo-color"]),"text-halo-width":new at(gt.paint_symbol["text-halo-width"]),"text-halo-blur":new at(gt.paint_symbol["text-halo-blur"]),"text-translate":new Ge(gt.paint_symbol["text-translate"]),"text-translate-anchor":new Ge(gt.paint_symbol["text-translate-anchor"])}),layout:HF};class Z2{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:Vl,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Jt(Z2,"FormatSectionOverride",{omit:["defaultValue"]});class Mv extends us{constructor(i){super(i,rb)}recalculate(i,l){super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const f=[];for(const y of h)f.indexOf(y)<0&&f.push(y);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,l,h,f){const y=this.layout.get(i).evaluate(l,{},h,f),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||eu(x.value)||!y?y:function(E,A){return A.replace(/{([^{}]+)}/g,(P,V)=>V in E?String(E[V]):"")}(l.properties,y)}createBucket(i){return new fu(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of rb.paint.overridableProperties){if(!Mv.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),h=new Z2(l),f=new Xh(h,l.property.specification);let y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new Kh("source",f):new ll("composite",f,l.value.zoomStops,l.value._interpolationType),this.paint._values[i]=new At(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Mv.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const h=i.get("text-field"),f=rb.paint.properties[l];let y=!1;const x=E=>{for(const A of E)if(f.overrides&&f.overrides.hasOverride(A))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof ko)x(h.value.value.sections);else if(h.value.kind==="source"){const E=P=>{y||(P instanceof rc&&_i(P.value)===$l?x(P.value.sections):P instanceof ic?x(P.sections):P.eachChild(E))},A=h.value;A._styleExpression&&E(A._styleExpression.expression)}return y}getProgramConfiguration(i){return new cu(this,i)}}var WF={paint:new It({"background-color":new Ge(gt.paint_background["background-color"]),"background-pattern":new Ge(gt.paint_background["background-pattern"]),"background-opacity":new Ge(gt.paint_background["background-opacity"])})},GF={paint:new It({"raster-opacity":new Ge(gt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ge(gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ge(gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ge(gt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ge(gt.paint_raster["raster-saturation"]),"raster-contrast":new Ge(gt.paint_raster["raster-contrast"]),"raster-resampling":new Ge(gt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ge(gt.paint_raster["raster-fade-duration"])})};class qF extends us{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var ZF={paint:new It({"sky-type":new Ge(gt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ge(gt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ge(gt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ge(gt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ge(gt.paint_sky["sky-gradient-radius"]),"sky-gradient":new kt(gt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ge(gt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ge(gt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ge(gt.paint_sky["sky-opacity"])})};function ib(s,i,l){const h=[0,0,1],f=yT([]);return _T(f,f,l?-ie(s)+Math.PI:ie(s)),vT(f,f,-ie(i)),pT(h,h,f),Ao(h,h)}const XF={circle:class extends us{constructor(s){super(s,aB)}createBucket(s){return new R1(s)}queryRadius(s){const i=s;return md("circle-radius",this,i)+md("circle-stroke-width",this,i)+av(this.paint.get("circle-translate"))}queryIntersectsFeature(s,i,l,h,f,y,x,E){const A=UT(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l);return jT(s,h,y,x,E,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",A,P)}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new cu(this,s)}},heatmap:class extends us{createBucket(s){return new $T(s)}constructor(s){super(s,cB),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=B1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(s){return md("heatmap-radius",this,s)}queryIntersectsFeature(s,i,l,h,f,y,x,E){const A=this.paint.get("heatmap-radius").evaluate(i,l);return jT(s,h,y,x,E,!0,!0,new k(0,0),A)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new cu(this,s)}},hillshade:class extends us{constructor(s){super(s,hB)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends us{constructor(s){super(s,TB)}getProgramIds(){const s=this.paint.get("fill-pattern"),i=s&&s.constantOr(1),l=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(s){return new cu(this,s)}recalculate(s,i){super.recalculate(s,i);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new hv(s)}queryRadius(){return av(this.paint.get("fill-translate"))}queryIntersectsFeature(s,i,l,h,f,y){return!s.queryGeometry.isAboveHorizon&&OT(NT(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}},"fill-extrusion":class extends us{constructor(s){super(s,$B)}createBucket(s){return new Xf(s)}queryRadius(){return av(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new cu(this,s)}queryIntersectsFeature(s,i,l,h,f,y,x,E,A){const P=UT(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),V=this.paint.get("fill-extrusion-height").evaluate(i,l),G=this.paint.get("fill-extrusion-base").evaluate(i,l),Z=[0,0],Y=E&&y.elevation,Q=y.elevation?y.elevation.exaggeration():1,ne=s.tile.getBucket(this);if(Y&&ne instanceof Xf){const Pe=ne.centroidVertexArray,Be=A+1;Be<Pe.length&&(Z[0]=Pe.geta_centroid_pos0(Be),Z[1]=Pe.geta_centroid_pos1(Be))}if(Z[0]===0&&Z[1]===1)return!1;y.projection.name==="globe"&&(h=s2([h],[new k(0,0),new k(_n,_n)],s.tileID.canonical).map(Pe=>Pe.polygon).flat());const he=Y?E:null,[we,Re]=function(Pe,Be,Oe,it,et,yt,Rt,lt,bt,Ct,Mt){return Pe.projection.name==="globe"?function(Lt,ut,jt,dn,Gt,tn,Vt,fn,zn,Dn,Mn){const gn=[],ar=[],En=Lt.projection.upVectorScale(Mn,Lt.center.lat,Lt.worldSize).metersToTile,Bn=[0,0,0,1],hr=[0,0,0,1],Dr=(Rr,Br,Zr,Ui)=>{Rr[0]=Br,Rr[1]=Zr,Rr[2]=Ui,Rr[3]=1},kr=a2();jt>0&&(jt+=kr),dn+=kr;for(const Rr of ut){const Br=[],Zr=[];for(const Ui of Rr){const sr=Ui.x+Gt.x,xi=Ui.y+Gt.y,hi=Lt.projection.projectTilePoint(sr,xi,Mn),Yn=Lt.projection.upVector(Mn,Ui.x,Ui.y);let Vr=jt,Mi=dn;if(Vt){const dr=h2(sr,xi,jt,dn,Vt,fn,zn,Dn);Vr+=dr.base,Mi+=dr.top}jt!==0?Dr(Bn,hi.x+Yn[0]*En*Vr,hi.y+Yn[1]*En*Vr,hi.z+Yn[2]*En*Vr):Dr(Bn,hi.x,hi.y,hi.z),Dr(hr,hi.x+Yn[0]*En*Mi,hi.y+Yn[1]*En*Mi,hi.z+Yn[2]*En*Mi),ei(Bn,Bn,tn),ei(hr,hr,tn),Br.push(new _d(Bn[0],Bn[1],Bn[2])),Zr.push(new _d(hr[0],hr[1],hr[2]))}gn.push(Br),ar.push(Zr)}return[gn,ar]}(Pe,Be,Oe,it,et,yt,Rt,lt,bt,Ct,Mt):Rt?function(Lt,ut,jt,dn,Gt,tn,Vt,fn,zn){const Dn=[],Mn=[],gn=[0,0,0,1];for(const ar of Lt){const En=[],Bn=[];for(const hr of ar){const Dr=hr.x+dn.x,kr=hr.y+dn.y,Rr=h2(Dr,kr,ut,jt,tn,Vt,fn,zn);gn[0]=Dr,gn[1]=kr,gn[2]=Rr.base,gn[3]=1,Rc(gn,gn,Gt),gn[3]=Math.max(gn[3],1e-5);const Br=new _d(gn[0]/gn[3],gn[1]/gn[3],gn[2]/gn[3]);gn[0]=Dr,gn[1]=kr,gn[2]=Rr.top,gn[3]=1,Rc(gn,gn,Gt),gn[3]=Math.max(gn[3],1e-5);const Zr=new _d(gn[0]/gn[3],gn[1]/gn[3],gn[2]/gn[3]);En.push(Br),Bn.push(Zr)}Dn.push(En),Mn.push(Bn)}return[Dn,Mn]}(Be,Oe,it,et,yt,Rt,lt,bt,Ct):function(Lt,ut,jt,dn,Gt){const tn=[],Vt=[],fn=Gt[8]*ut,zn=Gt[9]*ut,Dn=Gt[10]*ut,Mn=Gt[11]*ut,gn=Gt[8]*jt,ar=Gt[9]*jt,En=Gt[10]*jt,Bn=Gt[11]*jt;for(const hr of Lt){const Dr=[],kr=[];for(const Rr of hr){const Br=Rr.x+dn.x,Zr=Rr.y+dn.y,Ui=Gt[0]*Br+Gt[4]*Zr+Gt[12],sr=Gt[1]*Br+Gt[5]*Zr+Gt[13],xi=Gt[2]*Br+Gt[6]*Zr+Gt[14],hi=Gt[3]*Br+Gt[7]*Zr+Gt[15],Yn=Ui+fn,Vr=sr+zn,Mi=xi+Dn,dr=Math.max(hi+Mn,1e-5),ti=Ui+gn,fo=sr+ar,ji=xi+En,Vi=Math.max(hi+Bn,1e-5);Dr.push(new _d(Yn/dr,Vr/dr,Mi/dr)),kr.push(new _d(ti/Vi,fo/Vi,ji/Vi))}tn.push(Dr),Vt.push(kr)}return[tn,Vt]}(Be,Oe,it,et,yt)}(y,h,G,V,P,x,he,Z,Q,y.center.lat,s.tileID.canonical),ye=s.queryGeometry;return function(Pe,Be,Oe){let it=1/0;OT(Oe,Be)&&(it=c2(Oe,Be[0]));for(let et=0;et<Be.length;et++){const yt=Be[et],Rt=Pe[et];for(let lt=0;lt<yt.length-1;lt++){const bt=yt[lt],Ct=[bt,yt[lt+1],Rt[lt+1],Rt[lt],bt];LT(Oe,Ct)&&(it=Math.min(it,c2(Oe,Ct)))}}return it!==1/0&&it}(we,Re,ye.isPointQuery()?ye.screenBounds:ye.screenGeometry)}},line:class extends us{constructor(s){super(s,d2),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof ef,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(s,i){super.recalculate(s,i),this.paint._values["line-floorwidth"]=p2.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new gv(s)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(s){return new cu(this,s)}queryRadius(s){const i=s,l=f2(md("line-width",this,i),md("line-gap-width",this,i)),h=md("line-offset",this,i);return l/2+Math.abs(h)+av(this.paint.get("line-translate"))}queryIntersectsFeature(s,i,l,h,f,y){if(s.queryGeometry.isAboveHorizon)return!1;const x=NT(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),E=s.pixelToTileUnitsFactor/2*f2(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),A=this.paint.get("line-offset").evaluate(i,l);return A&&(h=function(P,V){const G=[],Z=new k(0,0);for(let Y=0;Y<P.length;Y++){const Q=P[Y],ne=[];for(let he=0;he<Q.length;he++){const we=Q[he-1],Re=Q[he],ye=Q[he+1],Pe=he===0?Z:Re.sub(we)._unit()._perp(),Be=he===Q.length-1?Z:ye.sub(Re)._unit()._perp(),Oe=Pe._add(Be)._unit();Oe._mult(1/(Oe.x*Be.x+Oe.y*Be.y)),ne.push(Oe._mult(V)._add(Re))}G.push(ne)}return G}(h,A*s.pixelToTileUnitsFactor)),function(P,V,G){for(let Z=0;Z<V.length;Z++){const Y=V[Z];if(P.length>=3){for(let Q=0;Q<Y.length;Q++)if(Bc(P,Y[Q]))return!0}if(nB(P,Y,G))return!0}return!1}(x,h,E)}isTileClipped(){return!0}},symbol:Mv,background:class extends us{constructor(s){super(s,WF)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends us{constructor(s){super(s,GF)}getProgramIds(){return["raster"]}},sky:class extends us{constructor(s){super(s,ZF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="sky-gradient"?this._updateColorRamp():s!=="sky-atmosphere-sun"&&s!=="sky-atmosphere-halo-color"&&s!=="sky-atmosphere-color"&&s!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=B1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(s,i){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),f=!h,y=s.style.light,x=y.properties.get("position");return f&&y.properties.get("anchor")==="viewport"&&Ke("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),f?ib(x.azimuthal,90-x.polar,i):ib(h[0],90-h[1],i)}const l=this.paint.get("sky-gradient-center");return ib(l[0],90-l[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return s==="atmosphere"?["skyboxCapture","skybox"]:s==="gradient"?["skyboxGradient"]:null}}};class am{constructor(i,l,h,f){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(l,f)}update(i,l,h){const{width:f,height:y}=i,{context:x}=this,{gl:E}=x,{HTMLImageElement:A,HTMLCanvasElement:P,HTMLVideoElement:V,ImageData:G,ImageBitmap:Z}=v;if(E.bindTexture(E.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!l||l.premultiply!==!1)),h||this.size&&this.size[0]===f&&this.size[1]===y){const{x:Y,y:Q}=h||{x:0,y:0};i instanceof A||i instanceof P||i instanceof V||i instanceof G||Z&&i instanceof Z?E.texSubImage2D(E.TEXTURE_2D,0,Y,Q,E.RGBA,E.UNSIGNED_BYTE,i):E.texSubImage2D(E.TEXTURE_2D,0,Y,Q,f,y,E.RGBA,E.UNSIGNED_BYTE,i.data)}else this.size=[f,y],i instanceof A||i instanceof P||i instanceof V||i instanceof G||Z&&i instanceof Z?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,i):E.texImage2D(E.TEXTURE_2D,0,this.format,f,y,0,this.format,E.UNSIGNED_BYTE,i.data);this.useMipmap=Boolean(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&E.generateMipmap(E.TEXTURE_2D)}bind(i,l){const{context:h}=this,{gl:f}=h;f.bindTexture(f.TEXTURE_2D,this.texture),i!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap?i===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_NEAREST:i),this.filter=i),l!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,l),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class KF{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class YF{constructor(){this.tasks={},this.taskQueue=[],on(["process"],this),this.invoker=new KF(this.process),this.nextId=0}add(i,l){const h=this.nextId++,f=function({type:y,isSymbolTile:x,zoom:E}){return E=E||0,y==="message"?0:y!=="maybePrepare"||x?y!=="parseTile"||x?y==="parseTile"&&x?300-E:y==="maybePrepare"&&x?400-E:500:200-E:100-E}(l);if(f===0){Ft();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[h]={fn:i,metadata:l,priority:f,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){Ft();try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const l=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let i=null,l=1/0;for(let f=0;f<this.taskQueue.length;f++){const y=this.tasks[this.taskQueue[f]];y.priority<l&&(l=y.priority,i=f)}if(i===null)return null;const h=this.taskQueue[i];return this.taskQueue.splice(i,1),h}remove(){this.invoker.remove()}}class X2{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const h=i[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const JF=["tile","layer","source","sourceLayer","state"];class K2{constructor(i,l,h,f,y){this.type="Feature",this._vectorTileFeature=i,this._z=l,this._x=h,this._y=f,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const l of JF)this[l]!==void 0&&(i[l]=this[l]);return i}}const Na=32,Fs=33,mu=new Uint16Array(8184);for(let s=0;s<2046;s++){let i=s+2,l=0,h=0,f=0,y=0,x=0,E=0;for(1&i?f=y=x=Na:l=h=E=Na;(i>>=1)>1;){const P=l+f>>1,V=h+y>>1;1&i?(f=l,y=h,l=x,h=E):(l=f,h=y,f=x,y=E),x=P,E=V}const A=4*s;mu[A+0]=l,mu[A+1]=h,mu[A+2]=f,mu[A+3]=y}const Ns=new Uint16Array(2178),gu=new Uint8Array(1089),Iv=new Uint16Array(1089);function Y2(s){return s===0?-.03125:s===32?.03125:0}var J2=an([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Q2={type:2,extent:_n,loadGeometry:()=>[[new k(0,0),new k(8193,0),new k(8193,8193),new k(0,8193),new k(0,0)]]};class ob{constructor(i,l,h,f,y){this.tileID=i,this.uid=Ee(),this.uses=0,this.tileSize=l,this.tileZoom=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=y,this.expiredRequestCount=0,this.state="loading",f&&f.transform&&(this.projection=f.transform.projection)}registerFadeDuration(i){const l=i+this.timeAdded;l<Qn.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Nc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,l,h){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(f,y){const x={};if(!y)return x;for(const E of f){const A=E.layerIds.map(P=>y.getLayer(P)).filter(Boolean);if(A.length!==0){E.layers=A,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(P=>A.filter(V=>V.id===P)[0]));for(const P of A)x[P.id]=E}}return x}(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof fu){if(this.hasSymbolBuckets=!0,!h)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof fu&&y.hasRTLText){this.hasRTLText=!0,$e.isLoading()||$e.isLoaded()||Fe()!=="deferred"||ze();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(f).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new d1}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const h in this.buckets){const f=this.buckets[h];f.uploadPending()&&f.upload(i)}const l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new am(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new am(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new am(i,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,h,f,y,x,E,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:f,pixelPosMatrix:E,transform:x,params:y,tileTransform:this.tileTransform},i,l,h):{}}querySourceFeatures(i,l){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const f=h.loadVTLayers(),y=l?l.sourceLayer:"",x=f._geojsonTileLayer||f[y];if(!x)return;const E=Jh(l&&l.filter),{z:A,x:P,y:V}=this.tileID.canonical,G={z:A,x:P,y:V};for(let Z=0;Z<x.length;Z++){const Y=x.feature(Z);if(E.needGeometry){const he=zc(Y,!0);if(!E.filter(new qe(this.tileID.overscaledZ),he,this.tileID.canonical))continue}else if(!E.filter(new qe(this.tileID.overscaledZ),Y))continue;const Q=h.getId(Y,y),ne=new K2(Y,A,P,V,Q);ne.tile=G,i.push(ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const h=ht(i.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const h=Date.now();let f=!1;if(this.expirationTime>h)f=!1;else if(l)if(this.expirationTime<l)f=!0;else{const y=this.expirationTime-l;y?this.expirationTime=h+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!l)return;const h=this.latestFeatureIndex.loadVTLayers(),f=l.style.listImages();for(const y in this.buckets){if(!l.style.hasLayer(y))continue;const x=this.buckets[y],E=x.layers[0].sourceLayer||"_geojsonTileLayer",A=h[E],P=i[E];if(!A||!P||Object.keys(P).length===0)continue;if(x.update(P,A,f,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof gv||x instanceof hv){const G=l.style._getSourceCache(x.layers[0].source);l._terrain&&l._terrain.enabled&&G&&x.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(G.id,this.tileID)}const V=l&&l.style&&l.style.getLayer(y);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Qn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=Qn.now()+i}setTexture(i,l){const h=l.context,f=h.gl;this.texture=this.texture||l.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new am(h,i,f.RGBA,{useMipmap:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE))}setDependencies(i,l){const h={};for(const f of l)h[f]=!0;this.dependencies[i]=h}hasDependency(i,l){for(const h of i){const f=this.dependencies[h];if(f){for(const y of l)if(f[y])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const h=pl(Q2,this.tileID.canonical,this.tileTransform)[0],f=new un,y=new Ds;for(let x=0;x<h.length;x++){const{x:E,y:A}=h[x];f.emplaceBack(E,A),y.emplaceBack(x)}y.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(y),this._tileDebugBuffer=i.createVertexBuffer(f,Ff.members),this._tileDebugSegments=ui.simpleSegment(0,0,f.length,y.length)}_makeTileBoundsBuffers(i,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const h=pl(Q2,this.tileID.canonical,this.tileTransform)[0];let f,y;if(this.isRaster){const x=function(E,A){const P=Nc(E,A),V=Math.pow(2,E.z);for(let he=0;he<Fs;he++)for(let we=0;we<Fs;we++){const Re=ga((E.x+(we+Y2(we))/Na)/V),ye=eo((E.y+(he+Y2(he))/Na)/V),Pe=A.project(Re,ye),Be=he*Fs+we;Ns[2*Be+0]=Math.round((Pe.x*P.scale-P.x)*_n),Ns[2*Be+1]=Math.round((Pe.y*P.scale-P.y)*_n)}gu.fill(0),Iv.fill(0);for(let he=2045;he>=0;he--){const we=4*he,Re=mu[we+0],ye=mu[we+1],Pe=mu[we+2],Be=mu[we+3],Oe=Re+Pe>>1,it=ye+Be>>1,et=Oe+it-ye,yt=it+Re-Oe,Rt=ye*Fs+Re,lt=Be*Fs+Pe,bt=it*Fs+Oe,Ct=Math.hypot((Ns[2*Rt+0]+Ns[2*lt+0])/2-Ns[2*bt+0],(Ns[2*Rt+1]+Ns[2*lt+1])/2-Ns[2*bt+1])>=16;if(gu[bt]=gu[bt]||(Ct?1:0),he<1022){const Mt=(ye+yt>>1)*Fs+(Re+et>>1),Lt=(Be+yt>>1)*Fs+(Pe+et>>1);gu[bt]=gu[bt]||gu[Mt]||gu[Lt]}}const G=new ir,Z=new Qi;let Y=0;function Q(he,we){const Re=we*Fs+he;return Iv[Re]===0&&(G.emplaceBack(Ns[2*Re+0],Ns[2*Re+1],he*_n/Na,we*_n/Na),Iv[Re]=++Y),Iv[Re]-1}function ne(he,we,Re,ye,Pe,Be){const Oe=he+Re>>1,it=we+ye>>1;if(Math.abs(he-Pe)+Math.abs(we-Be)>1&&gu[it*Fs+Oe])ne(Pe,Be,he,we,Oe,it),ne(Re,ye,Pe,Be,Oe,it);else{const et=Q(he,we),yt=Q(Re,ye),Rt=Q(Pe,Be);Z.emplaceBack(et,yt,Rt)}}return ne(0,0,Na,Na,Na,0),ne(Na,Na,0,0,0,Na),{vertices:G,indices:Z}}(this.tileID.canonical,l);f=x.vertices,y=x.indices}else{f=new ir,y=new Qi;for(const{x:E,y:A}of h)f.emplaceBack(E,A,0,0);const x=gd(f.int16,void 0,4);for(let E=0;E<x.length;E+=3)y.emplaceBack(x[E],x[E+1],x[E+2])}this._tileBoundsBuffer=i.createVertexBuffer(f,J2.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(y),this._tileBoundsSegments=ui.simpleSegment(0,0,f.length,y.length)}_makeGlobeTileDebugBuffers(i,l){const h=l.projection;if(!h||h.name!=="globe"||l.freezeTileCoverage)return;const f=this.tileID.canonical,y=jf(ET(f,l)),x=pd(l.zoom);let E;x>0&&(E=y1(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,f,l,y,E,x),this._makeGlobeTileDebugTextBuffer(i,f,l,y,E,x)}_globePoint(i,l,h,f,y,x,E){let A=Uf(i,l,h);if(x){const P=1<<h.z,V=Os(f.center.lng),G=zs(f.center.lat),Z=(h.x+.5)/P-V;let Y=0;Z>.5?Y=-1:Z<-.5&&(Y=1);let Q=(i/_n+h.x)/P+Y,ne=(l/_n+h.y)/P;Q=(Q-V)*f._pixelsPerMercatorPixel+V,ne=(ne-G)*f._pixelsPerMercatorPixel+G;const he=[Q*f.worldSize,ne*f.worldSize,0];ei(he,he,x),A=Oc(A,he,E)}return ei(A,A,y)}_makeGlobeTileDebugBorderBuffer(i,l,h,f,y,x){const E=new un,A=new Ds,P=new nr,V=(Z,Y,Q,ne,he)=>{const we=(Q-Z)/(he-1),Re=(ne-Y)/(he-1),ye=E.length;for(let Pe=0;Pe<he;Pe++){const Be=Z+Pe*we,Oe=Y+Pe*Re;E.emplaceBack(Be,Oe);const it=this._globePoint(Be,Oe,l,h,f,y,x);P.emplaceBack(it[0],it[1],it[2]),A.emplaceBack(ye+Pe)}},G=_n;V(0,0,G,0,16),V(G,0,G,G,16),V(G,G,0,G,16),V(0,G,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(A),this._tileDebugBuffer=i.createVertexBuffer(E,Ff.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(P,bT.members),this._tileDebugSegments=ui.simpleSegment(0,0,E.length,A.length)}_makeGlobeTileDebugTextBuffer(i,l,h,f,y,x){const E=new un,A=new Qi,P=new nr,V=25;A.reserve(32),E.reserve(V),P.reserve(V);const G=(Z,Y)=>V*Z+Y;for(let Z=0;Z<V;Z++){const Y=2048*Z;for(let Q=0;Q<V;Q++){const ne=2048*Q;E.emplaceBack(ne,Y);const he=this._globePoint(ne,Y,l,h,f,y,x);P.emplaceBack(he[0],he[1],he[2])}}for(let Z=0;Z<4;Z++)for(let Y=0;Y<4;Y++){const Q=G(Z,Y),ne=G(Z,Y+1),he=G(Z+1,Y),we=G(Z+1,Y+1);A.emplaceBack(Q,ne,he),A.emplaceBack(he,ne,we)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(A),this._tileDebugTextBuffer=i.createVertexBuffer(E,Ff.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(P,bT.members),this._tileDebugTextSegments=ui.simpleSegment(0,0,V,32)}}class QF{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,h){const f=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][f]=this.stateChanges[i][f]||{},ct(this.stateChanges[i][f],h),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==f&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][f]===null){this.deletedStates[i][f]={};for(const y in this.state[i][f])h[y]||(this.deletedStates[i][f][y]=null)}else for(const y in h)this.deletedStates[i]&&this.deletedStates[i][f]&&this.deletedStates[i][f][y]===null&&delete this.deletedStates[i][f][y]}removeFeatureState(i,l,h){if(this.deletedStates[i]===null)return;const f=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},h&&l!==void 0)this.deletedStates[i][f]!==null&&(this.deletedStates[i][f]=this.deletedStates[i][f]||{},this.deletedStates[i][f][h]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][f])for(h in this.deletedStates[i][f]={},this.stateChanges[i][f])this.deletedStates[i][f][h]=null;else this.deletedStates[i][f]=null;else this.deletedStates[i]=null}getState(i,l){const h=String(l),f=ct({},(this.state[i]||{})[h],(this.stateChanges[i]||{})[h]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][l];if(y===null)return{};for(const x in y)delete f[x]}return f}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const h={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const x in this.stateChanges[f])this.state[f][x]||(this.state[f][x]={}),ct(this.state[f][x],this.stateChanges[f][x]),y[x]=this.state[f][x];h[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const x in this.state[f])y[x]={},this.state[f][x]={};else for(const x in this.deletedStates[f]){if(this.deletedStates[f][x]===null)this.state[f][x]={};else if(this.state[f][x])for(const E of Object.keys(this.deletedStates[f][x]))delete this.state[f][x][E];y[x]=this.state[f][x]}h[f]=h[f]||{},ct(h[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const f in i)i[f].setFeatureState(h,l)}}class eA{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,l){const h=this.toIdx(i,l);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(i,l){return this.leaves[this.toIdx(i,l)]}toIdx(i,l){return l*this.size+i}}function tA(s,i,l,h){let f=0,y=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(h[x])<1e-15){if(l[x]<s[x]||l[x]>i[x])return null}else{const E=1/h[x];let A=(s[x]-l[x])*E,P=(i[x]-l[x])*E;if(A>P){const V=A;A=P,P=V}if(A>f&&(f=A),P<y&&(y=P),f>y)return null}return f}function nA(s,i,l,h,f,y,x,E,A,P,V){const G=h-s,Z=f-i,Y=y-l,Q=x-s,ne=E-i,he=A-l,we=V[1]*he-V[2]*ne,Re=V[2]*Q-V[0]*he,ye=V[0]*ne-V[1]*Q,Pe=G*we+Z*Re+Y*ye;if(Math.abs(Pe)<1e-15)return null;const Be=1/Pe,Oe=P[0]-s,it=P[1]-i,et=P[2]-l,yt=(Oe*we+it*Re+et*ye)*Be;if(yt<0||yt>1)return null;const Rt=it*Y-et*Z,lt=et*G-Oe*Y,bt=Oe*Z-it*G,Ct=(V[0]*Rt+V[1]*lt+V[2]*bt)*Be;return Ct<0||yt+Ct>1?null:(Q*Rt+ne*lt+he*bt)*Be}function rA(s,i,l){return(s-i)/(l-i)}function iA(s,i,l,h,f,y,x,E,A){const P=1<<l,V=y-h,G=x-f,Z=(s+1)/P*V+h,Y=(i+0)/P*G+f,Q=(i+1)/P*G+f;E[0]=(s+0)/P*V+h,E[1]=Y,A[0]=Z,A[1]=Q}class oA{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(y){const x=Math.ceil(Math.log2(y.dim/8)),E=[];let A=Math.ceil(Math.pow(2,x));const P=1/A,V=(Y,Q,ne,he,we)=>{const Re=he?1:0,ye=(Y+1)*ne-Re,Pe=Q*ne,Be=(Q+1)*ne-Re;we[0]=Y*ne,we[1]=Pe,we[2]=ye,we[3]=Be};let G=new eA(A);const Z=[];for(let Y=0;Y<A*A;Y++){V(Y%A,Math.floor(Y/A),P,!1,Z);const Q=yu(Z[0],Z[1],y),ne=yu(Z[2],Z[1],y),he=yu(Z[2],Z[3],y),we=yu(Z[0],Z[3],y);G.minimums.push(Math.min(Q,ne,he,we)),G.maximums.push(Math.max(Q,ne,he,we)),G.leaves.push(1)}for(E.push(G),A/=2;A>=1;A/=2){const Y=E[E.length-1];G=new eA(A);for(let Q=0;Q<A*A;Q++){V(Q%A,Math.floor(Q/A),2,!0,Z);const ne=Y.getElevation(Z[0],Z[1]),he=Y.getElevation(Z[2],Z[1]),we=Y.getElevation(Z[2],Z[3]),Re=Y.getElevation(Z[0],Z[3]),ye=Y.isLeaf(Z[0],Z[1]),Pe=Y.isLeaf(Z[2],Z[1]),Be=Y.isLeaf(Z[2],Z[3]),Oe=Y.isLeaf(Z[0],Z[3]),it=Math.min(ne.min,he.min,we.min,Re.min),et=Math.max(ne.max,he.max,we.max,Re.max),yt=ye&&Pe&&Be&&Oe;G.maximums.push(et),G.minimums.push(it),G.leaves.push(et-it<=5&&yt?1:0)}E.push(G)}return E}(this.dem),h=l.length-1,f=l[h];this._addNode(f.minimums[0],f.maximums[0],f.leaves[0]),this._construct(l,0,0,h,0)}raycastRoot(i,l,h,f,y,x,E=1){return tA([i,l,-100],[h,f,this.maximums[0]*E],y,x)}raycast(i,l,h,f,y,x,E=1){if(!this.nodeCount)return null;const A=this.raycastRoot(i,l,h,f,y,x,E);if(A==null)return null;const P=[],V=[],G=[],Z=[],Y=[{idx:0,t:A,nodex:0,nodey:0,depth:0}];for(;Y.length>0;){const{idx:Q,t:ne,nodex:he,nodey:we,depth:Re}=Y.pop();if(this.leaves[Q]){iA(he,we,Re,i,l,h,f,G,Z);const Pe=1<<Re,Be=(he+0)/Pe,Oe=(he+1)/Pe,it=(we+0)/Pe,et=(we+1)/Pe,yt=yu(Be,it,this.dem)*E,Rt=yu(Oe,it,this.dem)*E,lt=yu(Oe,et,this.dem)*E,bt=yu(Be,et,this.dem)*E,Ct=nA(G[0],G[1],yt,Z[0],G[1],Rt,Z[0],Z[1],lt,y,x),Mt=nA(Z[0],Z[1],lt,G[0],Z[1],bt,G[0],G[1],yt,y,x),Lt=Math.min(Ct!==null?Ct:Number.MAX_VALUE,Mt!==null?Mt:Number.MAX_VALUE);if(Lt!==Number.MAX_VALUE)return Lt;{const ut=zf([],y,x,ne);if(aA(yt,Rt,bt,lt,rA(ut[0],G[0],Z[0]),rA(ut[1],G[1],Z[1]))>=ut[2])return ne}continue}let ye=0;for(let Pe=0;Pe<this._siblingOffset.length;Pe++){iA((he<<1)+this._siblingOffset[Pe][0],(we<<1)+this._siblingOffset[Pe][1],Re+1,i,l,h,f,G,Z),G[2]=-100,Z[2]=this.maximums[this.childOffsets[Q]+Pe]*E;const Be=tA(G,Z,y,x);if(Be!=null){const Oe=Be;P[Pe]=Oe;let it=!1;for(let et=0;et<ye&&!it;et++)Oe>=P[V[et]]&&(V.splice(et,0,Pe),it=!0);it||(V[ye]=Pe),ye++}}for(let Pe=0;Pe<ye;Pe++){const Be=V[Pe];Y.push({idx:this.childOffsets[Q]+Be,t:P[Be],nodex:(he<<1)+this._siblingOffset[Be][0],nodey:(we<<1)+this._siblingOffset[Be][1],depth:Re+1})}}return null}_addNode(i,l,h){return this.minimums.push(i),this.maximums.push(l),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(i,l,h,f,y){if(i[f].isLeaf(l,h)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const x=f-1,E=i[x];let A=0,P=0;for(let V=0;V<this._siblingOffset.length;V++){const G=2*l+this._siblingOffset[V][0],Z=2*h+this._siblingOffset[V][1],Y=E.getElevation(G,Z),Q=E.isLeaf(G,Z),ne=this._addNode(Y.min,Y.max,Q);Q&&(A|=1<<V),P||(P=ne)}for(let V=0;V<this._siblingOffset.length;V++)A&1<<V||this._construct(i,2*l+this._siblingOffset[V][0],2*h+this._siblingOffset[V][1],x,P+V)}}function aA(s,i,l,h,f,y){return Hn(Hn(s,l,y),Hn(i,h,y),f)}function yu(s,i,l){const h=l.dim,f=Ne(s*h-.5,0,h-1),y=Ne(i*h-.5,0,h-1),x=Math.floor(f),E=Math.floor(y),A=Math.min(x+1,h-1),P=Math.min(E+1,h-1);return aA(l.get(x,E),l.get(A,E),l.get(x,P),l.get(A,P),f-x,y-E)}const sA={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function eN(s,i,l){return(256*s*256+256*i+l)/10-1e4}function tN(s,i,l){return 256*s+i+l/256-32768}class Pv{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,l,h,f=!1,y=!1){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return Ke(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const x=this.dim=l.height-2,E=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=h||"mapbox",this.borderReady=f,!f){for(let A=0;A<x;A++)E[this._idx(-1,A)]=E[this._idx(0,A)],E[this._idx(x,A)]=E[this._idx(x-1,A)],E[this._idx(A,-1)]=E[this._idx(A,0)],E[this._idx(A,x)]=E[this._idx(A,x-1)];E[this._idx(-1,-1)]=E[this._idx(0,0)],E[this._idx(x,-1)]=E[this._idx(x-1,0)],E[this._idx(-1,x)]=E[this._idx(0,x-1)],E[this._idx(x,x)]=E[this._idx(x-1,x-1)],y&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new oA(this)}get(i,l,h=!1){h&&(i=Ne(i,-1,this.dim),l=Ne(l,-1,this.dim));const f=4*this._idx(i,l);return(this.encoding==="terrarium"?tN:eN)(this.pixels[f],this.pixels[f+1],this.pixels[f+2])}static getUnpackVector(i){return sA[i]}get unpackVector(){return sA[this.encoding]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}static pack(i,l){const h=[0,0,0,0],f=Pv.getUnpackVector(l);let y=Math.floor((i+f[3])/f[2]);return h[2]=y%256,y=Math.floor(y/256),h[1]=y%256,y=Math.floor(y/256),h[0]=y,h}getPixels(){return new ta({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,l,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let f=l*this.dim,y=l*this.dim+this.dim,x=h*this.dim,E=h*this.dim+this.dim;switch(l){case-1:f=y-1;break;case 1:y=f+1}switch(h){case-1:x=E-1;break;case 1:E=x+1}const A=-l*this.dim,P=-h*this.dim;for(let V=x;V<E;V++)for(let G=f;G<y;G++){const Z=4*this._idx(G,V),Y=4*this._idx(G+A,V+P);this.pixels[Z+0]=i.pixels[Y+0],this.pixels[Z+1]=i.pixels[Y+1],this.pixels[Z+2]=i.pixels[Y+2],this.pixels[Z+3]=i.pixels[Y+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Jt(Pv,"DEMData"),Jt(oA,"DemMinMaxQuadTree",{omit:["dem"]});class nN{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,h){const f=i.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:l,timeout:void 0};if(h!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},h)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const h=i.wrapped().key,f=l===void 0?0:this.data[h].indexOf(l),y=this.data[h][f];return this.data[h].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(y.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const h in this.data)for(const f of this.data[h])i(f.value)||l.push(f);for(const h of l)this.remove(h.value.tileID,h)}}class Td{constructor(i,l,h){this.func=i,this.mask=l,this.range=h}}Td.ReadOnly=!1,Td.ReadWrite=!0,Td.disabled=new Td(519,Td.ReadOnly,[0,1]);const ab=7680;class sb{constructor(i,l,h,f,y,x){this.test=i,this.ref=l,this.mask=h,this.fail=f,this.depthFail=y,this.pass=x}}sb.disabled=new sb({func:519,mask:0},0,0,ab,ab,ab);class Us{constructor(i,l,h){this.blendFunction=i,this.blendColor=l,this.mask=h}}Us.Replace=[1,0],Us.disabled=new Us(Us.Replace,Qr.transparent,[!1,!1,!1,!1]),Us.unblended=new Us(Us.Replace,Qr.transparent,[!0,!0,!0,!0]),Us.alphaBlended=new Us([1,771],Qr.transparent,[!0,!0,!0,!0]);const lb=1029,ub=2305;class ps{constructor(i,l,h){this.enable=i,this.mode=l,this.frontFace=h}}ps.disabled=new ps(!1,lb,ub),ps.backCCW=new ps(!0,lb,ub),ps.backCW=new ps(!0,lb,2304),ps.frontCW=new ps(!0,1028,2304),ps.frontCCW=new ps(!0,1028,ub);class Uc extends ts{constructor(i,l,h){super(),this.id=i,this._onlySymbols=h,l.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new nN(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new QF,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const h=this._tiles[l];h.upload(i),h.prepare(this.map.style.imageManager)}}getIds(){return Et(this._tiles).map(i=>i.tileID).sort(lA).map(i=>i.key)}getRenderableIds(i){const l=[];for(const h in this._tiles)this._isIdRenderable(+h,i)&&l.push(this._tiles[h]);return i?l.sort((h,f)=>{const y=h.tileID,x=f.tileID,E=new k(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),A=new k(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-x.overscaledZ||A.y-E.y||A.x-E.x}).map(h=>h.tileID.key):l.map(h=>h.tileID).sort(lA).map(h=>h.key)}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,l){const h=this._tiles[i];h&&(h.state!=="loading"&&(h.state=l),this._loadTile(h,this._tileLoaded.bind(this,h,i,l)))}_tileLoaded(i,l,h,f){if(f)if(i.state="errored",f.status!==404)this._source.fire(new Cs(f,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const y=this.map.painter.terrain;this.update(this.transform,y.getScaledDemTileSize(),!0),y.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=Qn.now(),h==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new cr("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const l=this.getRenderableIds();for(let f=0;f<l.length;f++){const y=l[f];if(i.neighboringTiles&&i.neighboringTiles[y]){const x=this.getTileByID(y);h(i,x),h(x,i)}}function h(f,y){if(!f.dem||f.dem.borderReady)return;f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0;let x=y.tileID.canonical.x-f.tileID.canonical.x;const E=y.tileID.canonical.y-f.tileID.canonical.y,A=Math.pow(2,f.tileID.canonical.z),P=y.tileID.key;x===0&&E===0||Math.abs(E)>1||(Math.abs(x)>1&&(Math.abs(x+A)===1?x+=A:Math.abs(x-A)===1&&(x-=A)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,x,E),f.neighboringTiles&&f.neighboringTiles[P]&&(f.neighboringTiles[P].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,h,f){for(const y in this._tiles){let x=this._tiles[y];if(f[y]||!x.hasData()||x.tileID.overscaledZ<=l||x.tileID.overscaledZ>h)continue;let E=x.tileID;for(;x&&x.tileID.overscaledZ>l+1;){const P=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[P.key],x&&x.hasData()&&(E=P)}let A=E;for(;A.overscaledZ>l;)if(A=A.scaledTo(A.overscaledZ-1),i[A.key]){f[E.key]=E;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const h=this._loadedParentTiles[i.key];return h&&h.tileID.overscaledZ>=l?h:null}for(let h=i.overscaledZ-1;h>=l;h--){const f=i.scaledTo(h),y=this._getLoadedTile(f);if(y)return y}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,l){l=l||this._source.tileSize;const h=Math.ceil(i.width/l)+1,f=Math.ceil(i.height/l)+1,y=Math.floor(h*f*5),x=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,y):y,E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(E)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const h={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+l),h[y.tileID.key]=y}this._tiles=h;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(+f,this._tiles[f])}}update(i,l,h){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!h)return;let f;this.updateCacheSize(i,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(E=>new Io(E.canonical.z,E.wrap,E.canonical.z,E.canonical.x,E.canonical.y)):(f=i.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!h,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(E=>this._source.hasTile(E)))):f=[];const y=this._updateRetainedTiles(f);if(uA(this._source.type)&&f.length!==0){const E={},A={},P=Object.keys(y);for(const G of P){const Z=y[G],Y=this._tiles[G];if(!Y||Y.fadeEndTime&&Y.fadeEndTime<=Qn.now())continue;const Q=this.findLoadedParent(Z,Math.max(Z.overscaledZ-Uc.maxOverzooming,this._source.minzoom));Q&&(this._addTile(Q.tileID),E[Q.tileID.key]=Q.tileID),A[G]=Z}const V=f[f.length-1].overscaledZ;for(const G in this._tiles){const Z=this._tiles[G];if(y[G]||!Z.hasData())continue;let Y=Z.tileID;for(;Y.overscaledZ>V;){Y=Y.scaledTo(Y.overscaledZ-1);const Q=this._tiles[Y.key];if(Q&&Q.hasData()&&A[Y.key]){y[G]=Z.tileID;break}}}for(const G in E)y[G]||(this._coveredTiles[G]=!0,y[G]=E[G])}for(const E in y)this._tiles[E].clearFadeHold();const x=function(E,A){const P=[];for(const V in E)V in A||P.push(V);return P}(this._tiles,y);for(const E of x){const A=this._tiles[E];A.hasSymbolBuckets&&!A.holdingForFade()?A.setHoldDuration(this.map._fadeDuration):A.hasSymbolBuckets&&!A.symbolFadeFinished()||this._removeTile(+E)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const l={};if(i.length===0)return l;const h={},f=i.reduce((P,V)=>Math.min(P,V.overscaledZ),1/0),y=i[0].overscaledZ,x=Math.max(y-Uc.maxOverzooming,this._source.minzoom),E=Math.max(y+Uc.maxUnderzooming,this._source.minzoom),A={};for(const P of i){const V=this._addTile(P);l[P.key]=P,V.hasData()||f<this._source.maxzoom&&(A[P.key]=P)}this._retainLoadedChildren(A,f,E,l);for(const P of i){let V=this._tiles[P.key];if(V.hasData())continue;if(P.canonical.z>=this._source.maxzoom){const Z=P.children(this._source.maxzoom)[0],Y=this.getTile(Z);if(Y&&Y.hasData()){l[Z.key]=Z;continue}}else{const Z=P.children(this._source.maxzoom);if(l[Z[0].key]&&l[Z[1].key]&&l[Z[2].key]&&l[Z[3].key])continue}let G=V.wasRequested();for(let Z=P.overscaledZ-1;Z>=x;--Z){const Y=P.scaledTo(Z);if(h[Y.key]||(h[Y.key]=!0,V=this.getTile(Y),!V&&G&&(V=this._addTile(Y)),V&&(l[Y.key]=Y,G=V.wasRequested(),V.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let h,f=this._tiles[i].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){h=this._loadedParentTiles[f.key];break}l.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(h=this._getLoadedTile(y),h)break;f=y}for(const y of l)this._loadedParentTiles[y]=h}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const h=Boolean(l);if(!h){const f=this.map?this.map.painter:null;l=new ob(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,f,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))}return l?(l.uses++,this._tiles[i.key]=l,h||this._source.fire(new cr("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const h=l.getExpiryTimeout();h&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},h))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,l,h){const f=[],y=this.transform;if(!y)return f;const x=y.projection.name==="globe",E=Os(y.center.lng);for(const A in this._tiles){const P=this._tiles[A];if(h&&P.clearQueryDebugViz(),P.holdingForFade())continue;let V;if(x){const G=P.tileID.canonical;if(G.z===0){const Z=[Math.abs(Ne(E,...sm(G,-1))-E),Math.abs(Ne(E,...sm(G,1))-E)];V=[0,2*Z.indexOf(Math.min(...Z))-1]}else{const Z=[Math.abs(Ne(E,...sm(G,-1))-E),Math.abs(Ne(E,...sm(G,0))-E),Math.abs(Ne(E,...sm(G,1))-E)];V=[Z.indexOf(Math.min(...Z))-1]}}else V=[0];for(const G of V){const Z=i.containsTile(P,y,l,G);Z&&f.push(Z)}}return f}getVisibleCoordinates(i){const l=this.getRenderableIds(i).map(h=>this._tiles[h].tileID);for(const h of l)h.projMatrix=this.transform.calculateProjMatrix(h.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(uA(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=Qn.now())return!0}return!1}setFeatureState(i,l,h){this._state.updateState(i=i||"_geojsonTileLayer",l,h)}removeFeatureState(i,l,h){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,h)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,h){const f=this._tiles[i];f&&f.setDependencies(l,h)}reloadTilesForDependencies(i,l){for(const h in this._tiles)this._tiles[h].hasDependency(i,l)&&this._reloadTile(+h,"reloading");this._cache.filter(h=>!h.hasDependency(i,l))}_preloadTiles(i,l){const h=new Map,f=Array.isArray(i)?i:[i],y=this.map.painter.terrain,x=this.usedForTerrain&&y?y.getScaledDemTileSize():this._source.tileSize;for(const E of f){const A=E.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const P of A)h.set(P.key,P);this.usedForTerrain&&E.updateElevation(!1)}We(Array.from(h.values()),(E,A)=>{const P=new ob(E,this._source.tileSize*E.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(P,V=>{this._source.type==="raster-dem"&&P.dem&&this._backfillDEM(P),A(V,P)})},l)}}function lA(s,i){const l=Math.abs(2*s.wrap)-+(s.wrap<0),h=Math.abs(2*i.wrap)-+(i.wrap<0);return s.overscaledZ-i.overscaledZ||h-l||i.canonical.y-s.canonical.y||i.canonical.x-s.canonical.x}function uA(s){return s==="raster"||s==="image"||s==="video"||s==="custom"}function sm(s,i){const l=1<<s.z;return[s.x/l+i,(s.x+1)/l+i]}Uc.maxOverzooming=10,Uc.maxUnderzooming=3;class Dv{constructor(i,l,h){this._demTile=i,this._dem=this._demTile.dem,this._scale=l,this._offset=h}static create(i,l,h){const f=h||i.findDEMTileFor(l);if(!f||!f.dem)return;const y=f.dem,x=f.tileID,E=1<<l.canonical.z-x.canonical.z;return new Dv(f,f.tileSize/_n/E,[(l.canonical.x/E-x.canonical.x)*y.dim,(l.canonical.y/E-x.canonical.y)*y.dim])}tileCoordToPixel(i,l){const h=l*this._scale+this._offset[1],f=Math.floor(i*this._scale+this._offset[0]),y=Math.floor(h);return new k(f,y)}getElevationAt(i,l,h,f){const y=i*this._scale+this._offset[0],x=l*this._scale+this._offset[1],E=Math.floor(y),A=Math.floor(x),P=this._dem;return f=!!f,h?Hn(Hn(P.get(E,A,f),P.get(E,A+1,f),x-A),Hn(P.get(E+1,A,f),P.get(E+1,A+1,f),x-A),y-E):P.get(E,A,f)}getElevationAtPixel(i,l,h){return this._dem.get(i,l,!!h)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*ds(1,i)*this._dem.stride}}class cA{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new ou(_n,16,0),this.featureIndexArray=new eT,this.promoteId=l}insert(i,l,h,f,y,x=0){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,f,y,x);const A=this.grid;for(let P=0;P<l.length;P++){const V=l[P],G=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<V.length;Z++){const Y=V[Z];G[0]=Math.min(G[0],Y.x),G[1]=Math.min(G[1],Y.y),G[2]=Math.max(G[2],Y.x),G[3]=Math.max(G[3],Y.y)}G[0]<_n&&G[1]<_n&&G[2]>=0&&G[3]>=0&&A.insert(E,G[0],G[1],G[2],G[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new H1(new Qf(this.rawTileData)).layers,this.sourceLayerCoder=new X2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,l,h,f){this.loadVTLayers();const y=i.params||{},x=Jh(y.filter),E=i.tileResult,A=i.transform,P=E.bufferedTilespaceBounds,V=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,(Q,ne,he,we)=>FT(E.bufferedTilespaceGeometry,Q,ne,he,we));V.sort(rN);let G=null;A.elevation&&V.length>0&&(G=Dv.create(A.elevation,this.tileID));const Z={};let Y;for(let Q=0;Q<V.length;Q++){const ne=V[Q];if(ne===Y)continue;Y=ne;const he=this.featureIndexArray.get(ne);let we=null;this.loadMatchingFeature(Z,he,x,y.layers,y.availableImages,l,h,f,(Re,ye,Pe,Be=0)=>(we||(we=pl(Re,this.tileID.canonical,i.tileTransform)),ye.queryIntersectsFeature(E,Re,Pe,we,this.z,i.transform,i.pixelPosMatrix,G,Be)))}return Z}loadMatchingFeature(i,l,h,f,y,x,E,A,P){const{featureIndex:V,bucketIndex:G,sourceLayerIndex:Z,layoutVertexArrayOffset:Y}=l,Q=this.bucketLayerIDs[G];if(f&&!function(Re,ye){for(let Pe=0;Pe<Re.length;Pe++)if(ye.indexOf(Re[Pe])>=0)return!0;return!1}(f,Q))return;const ne=this.sourceLayerCoder.decode(Z),he=this.vtLayers[ne].feature(V);if(h.needGeometry){const Re=zc(he,!0);if(!h.filter(new qe(this.tileID.overscaledZ),Re,this.tileID.canonical))return}else if(!h.filter(new qe(this.tileID.overscaledZ),he))return;const we=this.getId(he,ne);for(let Re=0;Re<Q.length;Re++){const ye=Q[Re];if(f&&f.indexOf(ye)<0)continue;const Pe=x[ye];if(!Pe)continue;let Be={};we!==void 0&&A&&(Be=A.getState(Pe.sourceLayer||"_geojsonTileLayer",we));const Oe=ct({},E[ye]);Oe.paint=hA(Oe.paint,Pe.paint,he,Be,y),Oe.layout=hA(Oe.layout,Pe.layout,he,Be,y);const it=!P||P(he,Pe,Be,Y);if(!it)continue;const et=new K2(he,this.z,this.x,this.y,we);et.layer=Oe;let yt=i[ye];yt===void 0&&(yt=i[ye]=[]),yt.push({featureIndex:V,feature:et,intersectionZ:it})}}lookupSymbolFeatures(i,l,h,f,y,x,E,A){const P={};this.loadVTLayers();const V=Jh(y);for(const G of i)this.loadMatchingFeature(P,{bucketIndex:h,sourceLayerIndex:f,featureIndex:G,layoutVertexArrayOffset:0},V,x,E,A,l);return P}loadFeature(i){const{featureIndex:l,sourceLayerIndex:h}=i;this.loadVTLayers();const f=this.sourceLayerCoder.decode(h),y=this.vtFeatures[f];if(y[l])return y[l];const x=this.vtLayers[f].feature(l);return y[l]=x,x}hasLayer(i){for(const l of this.bucketLayerIDs)for(const h of l)if(i===h)return!0;return!1}getId(i,l){let h=i.id;if(this.promoteId){const f=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];f!=null&&(h=i.properties[f]),typeof h=="boolean"&&(h=Number(h))}return h}}function hA(s,i,l,h,f){return Nn(s,(y,x)=>{const E=i instanceof rt?i.get(x):null;return E&&E.evaluate?E.evaluate(l,h,f):E})}function rN(s,i){return i-s}Jt(cA,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class dA{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.image=new fl({width:i,height:l}),this.positions={},this.uploaded=!1}getDash(i,l){const h=this.getKey(i,l);return this.positions[h]}trim(){const i=this.width,l=this.height=Qt(this.nextRow);this.image.resize({width:i,height:l})}getKey(i,l){return i.join(",")+l}getDashRanges(i,l,h){const f=[];let y=i.length%2==1?-i[i.length-1]*h:0,x=i[0]*h,E=!0;f.push({left:y,right:x,isDash:E,zeroLength:i[0]===0});let A=i[0];for(let P=1;P<i.length;P++){E=!E;const V=i[P];y=A*h,A+=V,x=A*h,f.push({left:y,right:x,isDash:E,zeroLength:V===0})}return f}addRoundDash(i,l,h){const f=l/2;for(let y=-h;y<=h;y++){const x=this.width*(this.nextRow+h+y);let E=0,A=i[E];for(let P=0;P<this.width;P++){P/A.right>1&&(A=i[++E]);const V=Math.abs(P-A.left),G=Math.abs(P-A.right),Z=Math.min(V,G);let Y;const Q=y/h*(f+1);if(A.isDash){const ne=f-Math.abs(Q);Y=Math.sqrt(Z*Z+ne*ne)}else Y=f-Math.sqrt(Z*Z+Q*Q);this.image.data[x+P]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(i,l){for(let A=i.length-1;A>=0;--A){const P=i[A],V=i[A+1];P.zeroLength?i.splice(A,1):V&&V.isDash===P.isDash&&(V.left=P.left,i.splice(A,1))}const h=i[0],f=i[i.length-1];h.isDash===f.isDash&&(h.left=f.left-this.width,f.right=h.right+this.width);const y=this.width*this.nextRow;let x=0,E=i[x];for(let A=0;A<this.width;A++){A/E.right>1&&(E=i[++x]);const P=Math.abs(A-E.left),V=Math.abs(A-E.right),G=Math.min(P,V);this.image.data[y+A]=Math.max(0,Math.min(255,(E.isDash?G:-G)+l+128))}}addDash(i,l){const h=this.getKey(i,l);if(this.positions[h])return this.positions[h];const f=l==="round",y=f?7:0,x=2*y+1;if(this.nextRow+x>this.height)return Ke("LineAtlas out of space"),null;i.length===0&&i.push(1);let E=0;for(let V=0;V<i.length;V++)i[V]<0&&(Ke("Negative value is found in line dasharray, replacing values with 0"),i[V]=0),E+=i[V];if(E!==0){const V=this.width/E,G=this.getDashRanges(i,this.width,V);f?this.addRoundDash(G,V,y):this.addRegularDash(G,l==="square"?.5*V:0)}const A=this.nextRow+y;this.nextRow+=x;const P={tl:[A,y],br:[E,0]};return this.positions[h]=P,P}}Jt(dA,"LineAtlas");class pA{constructor(i){const l={},h=[];for(const E in i){const A=i[E],P=l[E]={};for(const V in A.glyphs){const G=A.glyphs[+V];if(!G||G.bitmap.width===0||G.bitmap.height===0)continue;const Z=G.metrics.localGlyph?2:1,Y={x:0,y:0,w:G.bitmap.width+2*Z,h:G.bitmap.height+2*Z};h.push(Y),P[V]=Y}}const{w:f,h:y}=q1(h),x=new fl({width:f||1,height:y||1});for(const E in i){const A=i[E];for(const P in A.glyphs){const V=A.glyphs[+P];if(!V||V.bitmap.width===0||V.bitmap.height===0)continue;const G=l[E][P],Z=V.metrics.localGlyph?2:1;fl.copy(V.bitmap,x,{x:0,y:0},{x:G.x+Z,y:G.y+Z},V.bitmap)}}this.image=x,this.positions=l}}Jt(pA,"GlyphAtlas");class iN{constructor(i){this.tileID=new Io(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=Nc(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,l,h,f,y){this.status="parsing",this.data=i,this.collisionBoxArray=new d1;const x=new X2(Object.keys(i.layers).sort()),E=new cA(this.tileID,this.promoteId);E.bucketLayerIDs=[];const A={},P=new dA(256,256),V={featureIndex:E,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:P,availableImages:h},G=l.familiesBySource[this.source];for(const Be in G){const Oe=i.layers[Be];if(!Oe)continue;let it=!1,et=!1;for(const lt of G[Be])lt[0].type==="symbol"?it=!0:et=!0;if(this.isSymbolTile===!0&&!it||this.isSymbolTile===!1&&!et)continue;Oe.version===1&&Ke(`Vector tile source "${this.source}" layer "${Be}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const yt=x.encode(Be),Rt=[];for(let lt=0;lt<Oe.length;lt++){const bt=Oe.feature(lt),Ct=E.getId(bt,Be);Rt.push({feature:bt,id:Ct,index:lt,sourceLayerIndex:yt})}for(const lt of G[Be]){const bt=lt[0];this.isSymbolTile!==void 0&&bt.type==="symbol"!==this.isSymbolTile||bt.minzoom&&this.zoom<Math.floor(bt.minzoom)||bt.maxzoom&&this.zoom>=bt.maxzoom||bt.visibility!=="none"&&(cb(lt,this.zoom,h),(A[bt.id]=bt.createBucket({index:E.bucketLayerIDs.length,layers:lt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:yt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:h})).populate(Rt,V,this.tileID.canonical,this.tileTransform),E.bucketLayerIDs.push(lt.map(Ct=>Ct.id)))}}let Z,Y,Q,ne;P.trim();const he={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},we=Nn(V.glyphDependencies,Be=>Object.keys(Be).map(Number));Object.keys(we).length?f.send("getGlyphs",{uid:this.uid,stacks:we},(Be,Oe)=>{Z||(Z=Be,Y=Oe,Pe.call(this))},void 0,!1,he):Y={};const Re=Object.keys(V.iconDependencies);Re.length?f.send("getImages",{icons:Re,source:this.source,tileID:this.tileID,type:"icons"},(Be,Oe)=>{Z||(Z=Be,Q=Oe,Pe.call(this))},void 0,!1,he):Q={};const ye=Object.keys(V.patternDependencies);function Pe(){if(Z)return y(Z);if(Y&&Q&&ne){const Be=new pA(Y),Oe=new w2(Q,ne);for(const it in A){const et=A[it];et instanceof fu?(cb(et.layers,this.zoom,h),IF(et,Y,Be.positions,Q,Oe.iconPositions,this.showCollisionBoxes,h,this.tileID.canonical,this.tileZoom,this.projection)):et.hasPattern&&(et instanceof gv||et instanceof hv||et instanceof Xf)&&(cb(et.layers,this.zoom,h),et.addFeatures(V,this.tileID.canonical,Oe.patternPositions,h,this.tileTransform))}this.status="done",y(null,{buckets:Et(A).filter(it=>!it.isEmpty()),featureIndex:E,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Be.image,lineAtlas:P,imageAtlas:Oe,glyphMap:this.returnDependencies?Y:null,iconMap:this.returnDependencies?Q:null,glyphPositions:this.returnDependencies?Be.positions:null})}}ye.length?f.send("getImages",{icons:ye,source:this.source,tileID:this.tileID,type:"patterns"},(Be,Oe)=>{Z||(Z=Be,ne=Oe,Pe.call(this))},void 0,!1,he):ne={},Pe.call(this)}}function cb(s,i,l){const h=new qe(i);for(const f of s)f.recalculate(h,l)}class fA{constructor(i){this.entries={},this.scheduler=i}request(i,l,h,f){const y=this.entries[i]=this.entries[i]||{callbacks:[]};if(y.result){const[x,E]=y.result;return this.scheduler?this.scheduler.add(()=>{f(x,E)},l):f(x,E),()=>{}}return y.callbacks.push(f),y.cancel||(y.cancel=h((x,E)=>{y.result=[x,E];for(const A of y.callbacks)this.scheduler?this.scheduler.add(()=>{A(x,E)},l):A(x,E);setTimeout(()=>delete this.entries[i],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(x=>x!==f),y.callbacks.length||(y.cancel(),delete this.entries[i]))}}}function mA(s,i,l){const h=JSON.stringify(s.request);return s.data&&(this.deduped.entries[h]={result:[null,s.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},f=>{const y=In(s.request,(x,E,A,P)=>{x?f(x):E&&f(null,{vectorTile:l?void 0:new H1(new Qf(E)),rawData:E,cacheControl:A,expires:P})});return()=>{y.cancel(),f()}},i)}o.ARRAY_TYPE=ea,o.AUTH_ERR_MSG=Jr,o.Aabb=Mo,o.Actor=class{constructor(s,i,l){this.target=s,this.parent=i,this.mapId=l,this.callbacks={},this.cancelCallbacks={},on(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ft()?s:v,this.scheduler=new YF}send(s,i,l,h,f=!1,y){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=y,this.callbacks[x]=l);const E=wn(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:s,hasCallback:!!l,targetMapId:h,mustQueue:f,sourceMapId:this.mapId,data:Cc(i,E)},E),{cancel:()=>{l&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(s){const i=s.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const h=this.cancelCallbacks[l];delete this.cancelCallbacks[l],h&&h.cancel()}else if(i.mustQueue||Ft()){const h=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,i),h&&h.metadata||{type:"message"})}else this.processTask(l,i)}processTask(s,i){if(i.type==="<response>"){const l=this.callbacks[s];delete this.callbacks[s],l&&(i.error?l(Sc(i.error)):l(null,Sc(i.data)))}else{const l=wn(this.globalScope)?void 0:[],h=i.hasCallback?(y,x)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:y?Cc(y):null,data:Cc(x,l)},l)}:y=>{},f=Sc(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,f,h);else if(this.parent.getWorkerSource){const y=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,y[0],f.source)[y[1]](f,h)}else h(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=mv,o.Color=Qr,o.ColorMode=Us,o.CullFaceMode=ps,o.DEMData=Pv,o.DataConstantProperty=Ge,o.DedupedRequest=fA,o.DepthMode=Td,o.EXTENT=_n,o.Elevation=class{isDataAvailableAtPoint(s){const i=this._source();if(this.isUsingMockSource()||!i||s.y<0||s.y>1)return!1;const l=i.getSource().maxzoom,h=1<<l,f=Math.floor(s.x),y=Math.floor((s.x-f)*h),x=Math.floor(s.y*h),E=this.findDEMTileFor(new Io(l,f,l,y,x));return!(!E||!E.dem)}getAtPointOrZero(s,i=0){return this.getAtPoint(s,i)||0}getAtPoint(s,i,l=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const h=this._source();if(!h||s.y<0||s.y>1)return i;const f=h.getSource().maxzoom,y=1<<f,x=Math.floor(s.x),E=s.x-x,A=new Io(f,x,f,Math.floor(E*y),Math.floor(s.y*y)),P=this.findDEMTileFor(A);if(!P||!P.dem)return i;const V=P.dem,G=1<<P.tileID.canonical.z,Z=(E*G-P.tileID.canonical.x)*V.dim,Y=(s.y*G-P.tileID.canonical.y)*V.dim,Q=Math.floor(Z),ne=Math.floor(Y);return(l?this.exaggeration():1)*Hn(Hn(V.get(Q,ne),V.get(Q,ne+1),Y-ne),Hn(V.get(Q+1,ne),V.get(Q+1,ne+1),Y-ne),Z-Q)}getAtTileOffset(s,i,l){const h=1<<s.canonical.z;return this.getAtPointOrZero(new fd(s.wrap+(s.canonical.x+i/_n)/h,(s.canonical.y+l/_n)/h))}getAtTileOffsetFunc(s,i,l,h){return f=>{const y=this.getAtTileOffset(s,f.x,f.y),x=h.upVector(s.canonical,f.x,f.y);return ma(x,x,y*h.upVectorScale(s.canonical,i,l).metersToTile),x}}getForTilePoints(s,i,l,h){if(this.isUsingMockSource())return!1;const f=Dv.create(this,s,h);return!!f&&(i.forEach(y=>{y[2]=this.exaggeration()*f.getElevationAt(y[0],y[1],l)}),!0)}getMinMaxForTile(s){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(s);if(!i||!i.dem)return null;const l=i.dem.tree,h=i.tileID,f=1<<s.canonical.z-h.canonical.z;let y=s.canonical.x/f-h.canonical.x,x=s.canonical.y/f-h.canonical.y,E=0;for(let A=0;A<s.canonical.z-h.canonical.z&&!l.leaves[E];A++){y*=2,x*=2;const P=2*Math.floor(x)+Math.floor(y);E=l.childOffsets[E]+P,y%=1,x%=1}return{min:this.exaggeration()*l.minimums[E],max:this.exaggeration()*l.maximums[E]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,i,l){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Cs,o.EvaluationParameters=qe,o.Event=cr,o.Evented=ts,o.FillExtrusionBucket=Xf,o.Frustum=C1,o.FrustumCorners=E1,o.GLOBE_RADIUS=Rs,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(s){this._createGrid(s),this._createPoles(s)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const s of this._poleSegments)s.destroy();for(const s of this._gridSegments)s.withSkirts.destroy(),s.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const s of this._wireframeSegments)s.destroy()}}_fillGridMeshWithLods(s,i){const l=new un,h=new Qi,f=[],y=s+1+2,x=i[0]+1,E=i[0]+1+(1+i.length),A=(P,V,G)=>{let Z=P===y-1?P-2:P===0?P:P-1;return Z+=G?24575:0,[Z,V]};for(let P=0;P<y;++P)l.emplaceBack(...A(P,0,!0));for(let P=0;P<x;++P)for(let V=0;V<y;++V)l.emplaceBack(...A(V,P,(V===0||V===y-1)&&!0));for(let P=0;P<i.length;++P){const V=i[P];for(let G=0;G<y;++G)l.emplaceBack(...A(G,V,!0))}for(let P=0;P<i.length;++P){const V=h.length,G=i[P]+1+2,Z=new Qi;for(let ne=0;ne<G-1;ne++){const he=ne===G-2,we=he?y*(E-i.length+P-ne):y;for(let Re=0;Re<y-1;Re++){const ye=ne*y+Re;ne===0||he||Re===0||Re===y-2?(Z.emplaceBack(ye+1,ye,ye+we),Z.emplaceBack(ye+we,ye+we+1,ye+1)):(h.emplaceBack(ye+1,ye,ye+we),h.emplaceBack(ye+we,ye+we+1,ye+1))}}const Y=ui.simpleSegment(0,V,l.length,h.length-V);for(let ne=0;ne<Z.uint16.length;ne+=3)h.emplaceBack(Z.uint16[ne],Z.uint16[ne+1],Z.uint16[ne+2]);const Q=ui.simpleSegment(0,V,l.length,h.length-V);f.push({withoutSkirts:Y,withSkirts:Q})}return{vertices:l,indices:h,segments:f}}_createGrid(s){const i=this._fillGridMeshWithLods(Lc,Nf);this._gridSegments=i.segments,this._gridBuffer=s.createVertexBuffer(i.vertices,Ff.members),this._gridIndexBuffer=s.createIndexBuffer(i.indices,!0)}_createPoles(s){const i=new Qi;for(let f=0;f<=Lc;f++)i.emplaceBack(0,f+1,f+2);this._poleIndexBuffer=s.createIndexBuffer(i,!0);const l=new Qo,h=new Qo;this._poleSegments=[];for(let f=0,y=0;f<5;f++){const x=360/(1<<f);l.emplaceBack(0,-Rs,0,.5,0),h.emplaceBack(0,-Rs,0,.5,1);for(let E=0;E<=Lc;E++){const A=E/Lc,P=Hn(0,x,A),[V,G,Z]=hd(Y5,J5,P,Rs);l.emplaceBack(V,G,Z,A,0),h.emplaceBack(V,G,Z,A,1)}this._poleSegments.push(ui.simpleSegment(y,0,66,64)),y+=66}this._poleNorthVertexBuffer=s.createVertexBuffer(l,xT,!1),this._poleSouthVertexBuffer=s.createVertexBuffer(h,xT,!1)}getGridBuffers(s,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[s].withSkirts:this._gridSegments[s].withoutSkirts]}getPoleBuffers(s){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[s]]}getWirefameBuffers(s,i){if(!this._wireframeSegments){const l=new Ps,h=Lc,f=h+1+2,y=1;this._wireframeSegments=[];for(let x=0,E=0;x<Nf.length;x++){const A=Nf[x];for(let V=y;V<A+y;V++)for(let G=y;G<h+y;G++){const Z=V*f+G;l.emplaceBack(Z,Z+1),l.emplaceBack(Z,Z+f),l.emplaceBack(Z,Z+f+1)}const P=A*h*3;this._wireframeSegments.push(ui.simpleSegment(0,E,(A+1)*f,P)),E+=P}this._wireframeIndexBuffer=s.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=Cd,o.ImagePosition=Z1,o.LivePerformanceUtils=Tt,o.LngLat=Xn,o.LngLatBounds=hu,o.LocalGlyphMode=Y1,o.MAX_MERCATOR_LATITUDE=to,o.MercatorCoordinate=fd,o.ONE_EM=no,o.OverscaledTileID=Io,o.PerformanceMarkers=Qe,o.Properties=It,o.RGBAImage=ta,o.Ray=w1,o.RequestManager=class{constructor(s,i,l){this._transformRequestFn=s,this._customAccessToken=i,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const s=function(){let i="";for(let l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",q,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,i){return this._transformRequestFn&&this._transformRequestFn(s,i)||{url:s}}normalizeStyleURL(s,i){if(!gi(s))return s;const l=vi(s);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeGlyphsURL(s,i){if(!gi(s))return s;const l=vi(s);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeSourceURL(s,i,l,h){if(!gi(s))return s;const f=vi(s);return f.path=`/v4/${f.authority}.json`,f.params.push("secure"),l&&f.params.push(`language=${l}`),h&&f.params.push(`worldview=${h}`),this._makeAPIURL(f,this._customAccessToken||i)}normalizeSpriteURL(s,i,l,h){const f=vi(s);return gi(s)?(f.path=`/styles/v1${f.path}/sprite${i}${l}`,this._makeAPIURL(f,this._customAccessToken||h)):(f.path+=`${i}${l}`,Di(f))}normalizeTileURL(s,i,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!gi(s))return s;const h=vi(s);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||l&&h.authority!=="raster"&&l===512?"@2x":""}${F.supported?".webp":"$1"}`),h.authority==="raster"?h.path=`/${D.RASTER_URL_PREFIX}${h.path}`:(h.path=h.path.replace(/^.+\/v4\//,"/"),h.path=`/${D.TILE_URL_VERSION}${h.path}`);const f=this._customAccessToken||function(y){for(const x of y){const E=x.match(/^access_token=(.*)$/);if(E)return E[1]}return null}(h.params)||D.ACCESS_TOKEN;return D.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&h.params.push(`sku=${this._skuToken}`),this._makeAPIURL(h,f)}canonicalizeTileURL(s,i){const l=vi(s);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return s;let h="mapbox://";l.path.match(/^\/raster\/v1\//)?h+=`raster/${l.path.replace(`/${D.RASTER_URL_PREFIX}/`,"")}`:h+=`tiles/${l.path.replace(`/${D.TILE_URL_VERSION}/`,"")}`;let f=l.params;return i&&(f=f.filter(y=>!y.match(/^access_token=/))),f.length&&(h+=`?${f.join("&")}`),h}canonicalizeTileset(s,i){const l=!!i&&gi(i),h=[];for(const f of s.tiles||[])yi(f)?h.push(this.canonicalizeTileURL(f,l)):h.push(f);return h}_makeAPIURL(s,i){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",h=vi(D.API_URL);if(s.protocol=h.protocol,s.authority=h.authority,s.protocol==="http"){const f=s.params.indexOf("secure");f>=0&&s.params.splice(f,1)}if(h.path!=="/"&&(s.path=`${h.path}${s.path}`),!D.REQUIRE_ACCESS_TOKEN)return Di(s);if(i=i||D.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return s.params=s.params.filter(f=>f.indexOf("access_token")===-1),s.params.push(`access_token=${i||""}`),Di(s)}},o.ResourceType=mt,o.SegmentVector=ui,o.SourceCache=Uc,o.StencilMode=sb,o.StructArrayLayout1ui2=Ds,o.StructArrayLayout2f1f2i16=Yi,o.StructArrayLayout2i4=un,o.StructArrayLayout2ui4=Ps,o.StructArrayLayout3f12=Ji,o.StructArrayLayout3ui6=Qi,o.StructArrayLayout4i8=ir,o.StructArrayLayout5f20=Qo,o.Texture=am,o.Tile=ob,o.Transitionable=Ot,o.Uniform1f=Yy,o.Uniform1i=class extends cl{constructor(s){super(s),this.current=0}set(s,i,l){this.fetchUniformLocation(s,i)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.Uniform2f=class extends cl{constructor(s){super(s),this.current=[0,0]}set(s,i,l){this.fetchUniformLocation(s,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},o.Uniform3f=class extends cl{constructor(s){super(s),this.current=[0,0,0]}set(s,i,l){this.fetchUniformLocation(s,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},o.Uniform4f=iT,o.UniformColor=oT,o.UniformMatrix2f=class extends cl{constructor(s){super(s),this.current=z5}set(s,i,l){if(this.fetchUniformLocation(s,i)){for(let h=0;h<4;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}}},o.UniformMatrix3f=class extends cl{constructor(s){super(s),this.current=O5}set(s,i,l){if(this.fetchUniformLocation(s,i)){for(let h=0;h<9;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.UniformMatrix4f=class extends cl{constructor(s){super(s),this.current=L5}set(s,i,l){if(this.fetchUniformLocation(s,i)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let h=1;h<16;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},o.UnwrappedTileID=u2,o.ValidationError=Zt,o.VectorTileFeature=pv,o.VectorTileWorkerSource=class extends ts{constructor(s,i,l,h,f){super(),this.actor=s,this.layerIndex=i,this.availableImages=l,this.loadVectorData=f||mA,this.loading={},this.loaded={},this.deduped=new fA(s.scheduler),this.isSpriteLoaded=h,this.scheduler=s.scheduler}loadTile(s,i){const l=s.uid,h=s&&s.request,f=h&&h.collectResourceTiming,y=this.loading[l]=new iN(s);y.abort=this.loadVectorData(s,(x,E)=>{const A=!this.loading[l];if(delete this.loading[l],A||x||!E)return y.status="done",A||(this.loaded[l]=y),i(x);const P=E.rawData,V={};E.expires&&(V.expires=E.expires),E.cacheControl&&(V.cacheControl=E.cacheControl),y.vectorTile=E.vectorTile||new H1(new Qf(P));const G=()=>{y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,(Z,Y)=>{if(Z||!Y)return i(Z);const Q={};if(f){const ne=hn(h);ne.length>0&&(Q.resourceTiming=JSON.parse(JSON.stringify(ne)))}i(null,ct({rawTileData:P.slice(0)},Y,V,Q))})};this.isSpriteLoaded?G():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(G,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):G()}),this.loaded=this.loaded||{},this.loaded[l]=y})}reloadTile(s,i){const l=this.loaded,h=s.uid,f=this;if(l&&l[h]){const y=l[h];y.showCollisionBoxes=s.showCollisionBoxes,y.enableTerrain=!!s.enableTerrain,y.projection=s.projection,y.tileTransform=Nc(s.tileID.canonical,s.projection);const x=(E,A)=>{const P=y.reloadCallback;P&&(delete y.reloadCallback,y.parse(y.vectorTile,f.layerIndex,this.availableImages,f.actor,P)),i(E,A)};y.status==="parsing"?y.reloadCallback=x:y.status==="done"&&(y.vectorTile?y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(s,i){const l=s.uid,h=this.loading[l];h&&(h.abort&&h.abort(),delete this.loading[l]),i()}removeTile(s,i){const l=this.loaded,h=s.uid;l&&l[h]&&delete l[h],i()}},o.WritingMode=ya,o.ZoomDependentExpression=ll,o.add=dl,o.addDynamicAttributes=Av,o.adjoint=function(s,i){var l=i[0],h=i[1],f=i[2],y=i[3],x=i[4],E=i[5],A=i[6],P=i[7],V=i[8];return s[0]=x*V-E*P,s[1]=f*P-h*V,s[2]=h*E-f*x,s[3]=E*A-y*V,s[4]=l*V-f*A,s[5]=f*y-l*E,s[6]=y*P-x*A,s[7]=h*A-l*P,s[8]=l*x-h*y,s},o.asyncAll=We,o.bezier=Ue,o.bindAll=on,o.boundsAttributes=J2,o.bufferConvexPolygon=function(s,i){const l=[];for(let h=0;h<s.length;h++){const f=xt(h-1,-1,s.length-1),y=xt(h+1,-1,s.length-1),x=s[h],E=s[y],A=s[f].sub(x).unit(),P=E.sub(x).unit(),V=P.angleWithSep(A.x,A.y),G=A.add(P).unit().mult(-1*i/Math.sin(V/2));l.push(x.add(G))}return l},o.cacheEntryPossiblyAdded=function(s){Te++,Te>re&&(s.getActor().send("enforceCacheSizeLimit",Ye),Te=0)},o.calculateGlobeLabelMatrix=function(s,i){const{x:l,y:h}=s.point,f=kT(l,h,s.worldSize/s._pixelsPerMercatorPixel,0,0);return Pc(f,f,T1(Ls(i)))},o.calculateGlobeMatrix=function(s){const{x:i,y:l}=s.point,{lng:h,lat:f}=s._center;return kT(i,l,s.worldSize,h,f)},o.calculateGlobeMercatorMatrix=function(s){const i=s.pixelsPerMeter,l=i/ds(1,s.center.lat),h=cs(new Float64Array(16));return Df(h,h,[s.point.x,s.point.y,0]),Dc(h,h,[l,l,i]),Float32Array.from(h)},o.circumferenceAtLatitude=M1,o.clamp=Ne,o.clearTileCache=function(s){if(!ce())return;const i=v.caches.delete(Un);s&&i.catch(s).then(()=>s())},o.clipLine=L2,o.clone=function(s){var i=new ea(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},o.clone$1=kn,o.collisionCircleLayout=nF,o.config=D,o.conjugate=function(s,i){return s[0]=-i[0],s[1]=-i[1],s[2]=-i[2],s[3]=i[3],s},o.create=function(){var s=new ea(16);return ea!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},o.create$1=sT,o.createExpression=tu,o.createLayout=an,o.createStyleLayer=function(s){return s.type==="custom"?new qF(s):new XF[s.type](s)},o.cross=b1,o.degToRad=ie,o.distance=function(s,i){return Math.hypot(i[0]-s[0],i[1]-s[1],i[2]-s[2])},o.div=function(s,i,l){return s[0]=i[0]/l[0],s[1]=i[1]/l[1],s[2]=i[2]/l[2],s},o.dot=za,o.earthRadius=Vf,o.ease=je,o.easeCubicInOut=_e,o.ecefToLatLng=function([s,i,l]){const h=Math.hypot(s,i,l),f=Math.atan2(s,l),y=.5*Math.PI-Math.acos(-i/h);return new Xn(ue(f),ue(y))},o.emitValidationErrors=zy,o.endsWith=Sn,o.enforceCacheSizeLimit=function(s){De(),xr&&xr.then(i=>{i.keys().then(l=>{for(let h=0;h<l.length-s;h++)i.delete(l[h])})})},o.evaluateSizeForFeature=yv,o.evaluateSizeForZoom=xd,o.evaluateVariableOffset=N2,o.evented=ke,o.exactEquals=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]},o.exactEquals$1=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]},o.exported=Qn,o.exported$1=F,o.extend=ct,o.extend$1=ns,o.fillExtrusionHeightLift=a2,o.filterObject=bn,o.fromMat4=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[4],s[4]=i[5],s[5]=i[6],s[6]=i[8],s[7]=i[9],s[8]=i[10],s},o.fromQuat=function(s,i){var l=i[0],h=i[1],f=i[2],y=i[3],x=l+l,E=h+h,A=f+f,P=l*x,V=h*x,G=h*E,Z=f*x,Y=f*E,Q=f*A,ne=y*x,he=y*E,we=y*A;return s[0]=1-G-Q,s[1]=V+we,s[2]=Z-he,s[3]=0,s[4]=V-we,s[5]=1-P-Q,s[6]=Y+ne,s[7]=0,s[8]=Z+he,s[9]=Y-ne,s[10]=1-P-G,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},o.fromRotation=function(s,i){var l=Math.sin(i),h=Math.cos(i);return s[0]=h,s[1]=l,s[2]=0,s[3]=-l,s[4]=h,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},o.fromScaling=uT,o.furthestTileCorner=function(s){const i=Math.round((s+45+360)%360/90)%4;return se[i]},o.getAABBPointSquareDist=function(s,i,l){let h=0;for(let f=0;f<2;++f){const y=l?l[f]:0;s[f]>y&&(h+=(s[f]-y)*(s[f]-y)),i[f]<y&&(h+=(y-i[f])*(y-i[f]))}return h},o.getAnchorAlignment=K1,o.getAnchorJustification=Q1,o.getBounds=function(s){let i=1/0,l=1/0,h=-1/0,f=-1/0;for(const y of s)i=Math.min(i,y.x),l=Math.min(l,y.y),h=Math.max(h,y.x),f=Math.max(f,y.y);return{min:new k(i,l),max:new k(h,f)}},o.getColumn=qn,o.getGridMatrix=function(s,i,l,h){const f=i.getNorth(),y=i.getSouth(),x=i.getWest(),E=i.getEast(),A=1<<s.z,P=E-x,V=f-y,G=P/Lc,Z=-V/Nf[l],Y=[0,G,0,Z,0,0,f,x,0];if(s.z>0){const Q=180/h;lT(Y,Y,[Q/P+1,0,0,0,Q/V+1,0,-.5*Q/G,.5*Q/Z,1])}return Y[2]=A,Y[5]=s.x,Y[8]=s.y,Y},o.getImage=Ti,o.getJSON=function(s,i){return er(ct(s,{type:"json"}),i)},o.getLatitudinalLod=function(s){const i=to-5;s=Ne(s,-i,i)/i*90;const l=Math.pow(Math.abs(Math.sin(ie(s))),3);return Math.round(l*(Nf.length-1))},o.getMapSessionAPI=Ze,o.getPerformanceMeasurement=hn,o.getProjection=q2,o.getRTLTextPluginStatus=Fe,o.getReferrer=Kt,o.getTilePoint=function(s,{x:i,y:l},h=0){return new k(((i-h)*s.scale-s.x)*_n,(l*s.scale-s.y)*_n)},o.getTileVec3=function(s,i,l=0){return cd(((i.x-l)*s.scale-s.x)*_n,(i.y*s.scale-s.y)*_n,IT(i.z,i.y))},o.getVideo=function(s,i){const l=v.document.createElement("video");l.muted=!0,l.onloadstart=function(){i(null,l)};for(let h=0;h<s.length;h++){const f=v.document.createElement("source");$t(s[h])||(l.crossOrigin="Anonymous"),f.src=s[h],l.appendChild(f)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(s){const i=[0,0,0],l=cs(new Float64Array(16));return Pc(l,s.pixelMatrix,s.globeMatrix),ei(i,i,l),new k(i[0],i[1])},o.globeDenormalizeECEF=T1,o.globeECEFOrigin=function(s,i){const l=[0,0,0];return ei(l,l,jf(Ls(i.canonical))),ei(l,l,s),l},o.globeMetersToEcef=tv,o.globeNormalizeECEF=jf,o.globePixelsToTileUnits=function(s,i){return _n/(512*Math.pow(2,s))*rv(Ls(i))},o.globePoleMatrixForTile=function(s,i,l){const h=cs(new Float64Array(16)),f=(i/(1<<s)-.5)*Math.PI*2;return ev(h,l.globeMatrix,f),Float32Array.from(h)},o.globeTileBounds=Ls,o.globeTiltAtLngLat=TT,o.globeToMercatorTransition=pd,o.globeUseCustomAntiAliasing=function(s,i,l){const h=pd(l.zoom),f=s.style.map._antialias,y=!!i.extStandardDerivatives,x=i.extStandardDerivativesForceOff||s.terrain&&s.terrain.exaggeration()>0;return h===0&&!f&&!x&&y},o.identity=cs,o.identity$1=yT,o.invert=y1,o.isFullscreen=function(){return!!v.document.fullscreenElement||!!v.document.webkitFullscreenElement},o.isLngLatBehindGlobe=A1,o.isMapAuthenticated=function(s){return He.has(s)},o.isMapboxURL=gi,o.isSafariWithAntialiasingBug=function(s){const i=s.navigator?s.navigator.userAgent:null;return!!wn(s)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=eo,o.latLngToECEF=dd,o.len=W5,o.length=Rf,o.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},o.lngFromMercatorX=ga,o.loadVectorTile=mA,o.makeRequest=er,o.mapValue=function(s,i,l,h,f){return Ne((s-i)/(l-i)*(f-h)+h,h,f)},o.mercatorScale=PT,o.mercatorXfromLng=Os,o.mercatorYfromLat=zs,o.mercatorZfromAltitude=ds,o.mul=$5,o.mul$1=H5,o.multiply=Pc,o.multiply$1=lT,o.multiply$2=dT,o.nextPowerOfTwo=Qt,o.normalize=Ao,o.normalize$1=G5,o.normalize$2=mT,o.number=Hn,o.ortho=function(s,i,l,h,f,y,x){var E=1/(i-l),A=1/(h-f),P=1/(y-x);return s[0]=-2*E,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*A,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*P,s[11]=0,s[12]=(i+l)*E,s[13]=(f+h)*A,s[14]=(x+y)*P,s[15]=1,s},o.pbf=Qf,o.perspective=function(s,i,l,h,f){var y,x=1/Math.tan(i/2);return s[0]=x/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,f!=null&&f!==1/0?(s[10]=(f+h)*(y=1/(h-f)),s[14]=2*f*h*y):(s[10]=-1,s[14]=-2*h),s},o.pick=function(s,i){const l={};for(let h=0;h<i.length;h++){const f=i[h];f in s&&(l[f]=s[f])}return l},o.plugin=$e,o.pointGeometry=k,o.polesInViewport=function(s){const i=cs(new Float64Array(16));Pc(i,s.pixelMatrix,s.globeMatrix);const l=[0,Ba,0],h=[0,Fa,0];return ei(l,l,i),ei(h,h,i),[l[0]>0&&l[0]<=s.width&&l[1]>0&&l[1]<=s.height&&!A1(s,new Xn(s.center.lat,90)),h[0]>0&&h[0]<=s.width&&h[1]>0&&h[1]<=s.height&&!A1(s,new Xn(s.center.lat,-90))]},o.polygonContainsPoint=Bc,o.polygonIntersectsBox=FT,o.polygonIntersectsPolygon=LT,o.polygonizeBounds=function(s,i,l=0,h=!0){const f=new k(l,l),y=s.sub(f),x=i.add(f),E=[y,new k(x.x,y.y),x,new k(y.x,x.y)];return h&&E.push(y.clone()),E},o.posAttributes=Ff,o.postMapLoadEvent=ve,o.postPerformanceEvent=Ve,o.postTurnstileEvent=te,o.potpack=q1,o.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},o.radToDeg=ue,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(s){return s({pluginStatus:me,pluginURL:ae}),ke.on("pluginStateChange",s),s},o.removeAuthState=function(s){He.delete(s)},o.renderColorRamp=B1,o.resample=DT,o.rotateX=v1,o.rotateX$1=vT,o.rotateY=ev,o.rotateY$1=_T,o.rotateZ=function(s,i,l){var h=Math.sin(l),f=Math.cos(l),y=i[0],x=i[1],E=i[2],A=i[3],P=i[4],V=i[5],G=i[6],Z=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*f+P*h,s[1]=x*f+V*h,s[2]=E*f+G*h,s[3]=A*f+Z*h,s[4]=P*f-y*h,s[5]=V*f-x*h,s[6]=G*f-E*h,s[7]=Z*f-A*h,s},o.rotateZ$1=function(s,i,l){l*=.5;var h=i[0],f=i[1],y=i[2],x=i[3],E=Math.sin(l),A=Math.cos(l);return s[0]=h*A+f*E,s[1]=f*A-h*E,s[2]=y*A+x*E,s[3]=x*A-y*E,s},o.scale=Dc,o.scale$1=fT,o.scale$2=ma,o.scaleAndAdd=zf,o.set=function(s,i,l,h){return s[0]=i,s[1]=l,s[2]=h,s},o.setCacheLimits=function(s,i){Ye=s,re=i},o.setColumn=function(s,i,l){s[4*i+0]=l[0],s[4*i+1]=l[1],s[4*i+2]=l[2],s[4*i+3]=l[3]},o.setRTLTextPlugin=function(s,i,l=!1){if(me===le||me===de||me===pe)throw new Error("setRTLTextPlugin cannot be called multiple times.");ae=Qn.resolveURL(s),me=le,fe=i,Ce(),l||ze()},o.smoothstep=Ie,o.spec=gt,o.squaredLength=function(s){var i=s[0],l=s[1],h=s[2];return i*i+l*l+h*h},o.storeAuthState=function(s,i){i?He.add(s):He.delete(s)},o.sub=hs,o.subtract=x1,o.symbolSize=rF,o.tileAABB=function(s,i,l,h,f,y,x,E,A){if(A.name==="globe")return K5(s,i,new mv(l,h,f));const P=Nc({z:l,x:h,y:f},A);return new Mo([(y+P.x/P.scale)*i,i*(P.y/P.scale),x],[(y+P.x2/P.scale)*i,i*(P.y2/P.scale),E])},o.tileCornersToBounds=nv,o.tileTransform=Nc,o.transformMat3=function(s,i,l){var h=i[0],f=i[1],y=i[2];return s[0]=h*l[0]+f*l[3]+y*l[6],s[1]=h*l[1]+f*l[4]+y*l[7],s[2]=h*l[2]+f*l[5]+y*l[8],s},o.transformMat4=ei,o.transformMat4$1=Rc,o.transformQuat=pT,o.transitionTileAABBinECEF=ET,o.translate=Df,o.transpose=function(s,i){if(s===i){var l=i[1],h=i[2],f=i[5];s[1]=i[3],s[2]=i[6],s[3]=l,s[5]=i[7],s[6]=h,s[7]=f}else s[0]=i[0],s[1]=i[3],s[2]=i[6],s[3]=i[1],s[4]=i[4],s[5]=i[7],s[6]=i[2],s[7]=i[5],s[8]=i[8];return s},o.triggerPluginCompletionEvent=Se,o.uniqueId=Ee,o.updateGlobeVertexNormal=function(s,i,l,h,f){const y=5*i+2;s.float32[y+0]=l,s.float32[y+1]=h,s.float32[y+2]=f},o.validateCustomStyleLayer=function(s){const i=[],l=s.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=s=>os(wf(s)),o.validateFog=s=>os(Ry(s)),o.validateLayer=s=>os(Cf(s)),o.validateLight=s=>os(Dy(s)),o.validateSource=s=>os(wc(s)),o.validateStyle=Ly,o.validateTerrain=s=>os(Sf(s)),o.values=Et,o.vectorTile=dv,o.version=C,o.warnOnce=Ke,o.window=v,o.wrap=xt}),c(["./shared"],function(o){function v(ge){if(typeof ge=="number"||typeof ge=="boolean"||typeof ge=="string"||ge==null)return JSON.stringify(ge);if(Array.isArray(ge)){let oe="[";for(const ve of ge)oe+=`${v(ve)},`;return`${oe}]`}let te="{";for(const oe of Object.keys(ge).sort())te+=`${oe}:${v(ge[oe])},`;return`${te}}`}function C(ge){let te="";for(const oe of o.refProperties)te+=`/${v(ge[oe])}`;return te}class I{constructor(te){this.keyCache={},te&&this.replace(te)}replace(te){this._layerConfigs={},this._layers={},this.update(te,[])}update(te,oe){for(const Me of te)this._layerConfigs[Me.id]=Me,(this._layers[Me.id]=o.createStyleLayer(Me)).compileFilter(),this.keyCache[Me.id]&&delete this.keyCache[Me.id];for(const Me of oe)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const ve=function(Me,Ve){const Xe={};for(let He=0;He<Me.length;He++){const Qe=Ve&&Ve[Me[He].id]||C(Me[He]);Ve&&(Ve[Me[He].id]=Qe);let Tt=Xe[Qe];Tt||(Tt=Xe[Qe]=[]),Tt.push(Me[He])}const Ze=[];for(const He in Xe)Ze.push(Xe[He]);return Ze}(o.values(this._layerConfigs),this.keyCache);for(const Me of ve){const Ve=Me.map(qt=>this._layers[qt.id]),Xe=Ve[0];if(Xe.visibility==="none")continue;const Ze=Xe.source||"";let He=this.familiesBySource[Ze];He||(He=this.familiesBySource[Ze]={});const Qe=Xe.sourceLayer||"_geojsonTileLayer";let Tt=He[Qe];Tt||(Tt=He[Qe]=[]),Tt.push(Ve)}}}class D{loadTile(te,oe){const{uid:ve,encoding:Me,rawImageData:Ve,padding:Xe,buildQuadTree:Ze}=te,He=o.window.ImageBitmap&&Ve instanceof o.window.ImageBitmap?this.getImageData(Ve,Xe):Ve;oe(null,new o.DEMData(ve,He,Me,Xe<1,Ze))}getImageData(te,oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(te.width,te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=te.width,this.offscreenCanvas.height=te.height,this.offscreenCanvasContext.drawImage(te,0,0,te.width,te.height);const ve=this.offscreenCanvasContext.getImageData(-oe,-oe,te.width+2*oe,te.height+2*oe);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ve}}var F=function ge(te,oe){var ve,Me=te&&te.type;if(Me==="FeatureCollection")for(ve=0;ve<te.features.length;ve++)ge(te.features[ve],oe);else if(Me==="GeometryCollection")for(ve=0;ve<te.geometries.length;ve++)ge(te.geometries[ve],oe);else if(Me==="Feature")ge(te.geometry,oe);else if(Me==="Polygon")U(te.coordinates,oe);else if(Me==="MultiPolygon")for(ve=0;ve<te.coordinates.length;ve++)U(te.coordinates[ve],oe);return te};function U(ge,te){if(ge.length!==0){j(ge[0],te);for(var oe=1;oe<ge.length;oe++)j(ge[oe],!te)}}function j(ge,te){for(var oe=0,ve=0,Me=0,Ve=ge.length,Xe=Ve-1;Me<Ve;Xe=Me++){var Ze=(ge[Me][0]-ge[Xe][0])*(ge[Xe][1]+ge[Me][1]),He=oe+Ze;ve+=Math.abs(oe)>=Math.abs(Ze)?oe-He+Ze:Ze-He+oe,oe=He}oe+ve>=0!=!!te&&ge.reverse()}const T=o.VectorTileFeature.prototype.toGeoJSON;class H{constructor(te){this._feature=te,this.extent=o.EXTENT,this.type=te.type,this.properties=te.tags,"id"in te&&!isNaN(te.id)&&(this.id=parseInt(te.id,10))}loadGeometry(){if(this._feature.type===1){const te=[];for(const oe of this._feature.geometry)te.push([new o.pointGeometry(oe[0],oe[1])]);return te}{const te=[];for(const oe of this._feature.geometry){const ve=[];for(const Me of oe)ve.push(new o.pointGeometry(Me[0],Me[1]));te.push(ve)}return te}}toGeoJSON(te,oe,ve){return T.call(this,te,oe,ve)}}class N{constructor(te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=te.length,this._features=te}feature(te){return new H(this._features[te])}}var q={},z={get exports(){return q},set exports(ge){q=ge}},B=o.pointGeometry,k=o.vectorTile.VectorTileFeature,w=R;function R(ge,te){this.options=te||{},this.features=ge,this.length=ge.length}function J(ge,te){this.id=typeof ge.id=="number"?ge.id:void 0,this.type=ge.type,this.rawGeometry=ge.type===1?[ge.geometry]:ge.geometry,this.properties=ge.tags,this.extent=te||4096}R.prototype.feature=function(ge){return new J(this.features[ge],this.options.extent)},J.prototype.loadGeometry=function(){var ge=this.rawGeometry;this.geometry=[];for(var te=0;te<ge.length;te++){for(var oe=ge[te],ve=[],Me=0;Me<oe.length;Me++)ve.push(new B(oe[Me][0],oe[Me][1]));this.geometry.push(ve)}return this.geometry},J.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ge=this.geometry,te=1/0,oe=-1/0,ve=1/0,Me=-1/0,Ve=0;Ve<ge.length;Ve++)for(var Xe=ge[Ve],Ze=0;Ze<Xe.length;Ze++){var He=Xe[Ze];te=Math.min(te,He.x),oe=Math.max(oe,He.x),ve=Math.min(ve,He.y),Me=Math.max(Me,He.y)}return[te,ve,oe,Me]},J.prototype.toGeoJSON=k.prototype.toGeoJSON;var ie=o.pbf,ue=w;function se(ge){var te=new ie;return function(oe,ve){for(var Me in oe.layers)ve.writeMessage(3,_e,oe.layers[Me])}(ge,te),te.finish()}function _e(ge,te){var oe;te.writeVarintField(15,ge.version||1),te.writeStringField(1,ge.name||""),te.writeVarintField(5,ge.extent||4096);var ve={keys:[],values:[],keycache:{},valuecache:{}};for(oe=0;oe<ge.length;oe++)ve.feature=ge.feature(oe),te.writeMessage(2,Ue,ve);var Me=ve.keys;for(oe=0;oe<Me.length;oe++)te.writeStringField(3,Me[oe]);var Ve=ve.values;for(oe=0;oe<Ve.length;oe++)te.writeMessage(4,We,Ve[oe])}function Ue(ge,te){var oe=ge.feature;oe.id!==void 0&&te.writeVarintField(1,oe.id),te.writeMessage(2,je,ge),te.writeVarintField(3,oe.type),te.writeMessage(4,xt,oe)}function je(ge,te){var oe=ge.feature,ve=ge.keys,Me=ge.values,Ve=ge.keycache,Xe=ge.valuecache;for(var Ze in oe.properties){var He=oe.properties[Ze],Qe=Ve[Ze];if(He!==null){Qe===void 0&&(ve.push(Ze),Ve[Ze]=Qe=ve.length-1),te.writeVarint(Qe);var Tt=typeof He;Tt!=="string"&&Tt!=="boolean"&&Tt!=="number"&&(He=JSON.stringify(He));var qt=Tt+":"+He,Dt=Xe[qt];Dt===void 0&&(Me.push(He),Xe[qt]=Dt=Me.length-1),te.writeVarint(Dt)}}}function Ne(ge,te){return(te<<3)+(7&ge)}function Ie(ge){return ge<<1^ge>>31}function xt(ge,te){for(var oe=ge.loadGeometry(),ve=ge.type,Me=0,Ve=0,Xe=oe.length,Ze=0;Ze<Xe;Ze++){var He=oe[Ze],Qe=1;ve===1&&(Qe=He.length),te.writeVarint(Ne(1,Qe));for(var Tt=ve===3?He.length-1:He.length,qt=0;qt<Tt;qt++){qt===1&&ve!==1&&te.writeVarint(Ne(2,Tt-1));var Dt=He[qt].x-Me,hn=He[qt].y-Ve;te.writeVarint(Ie(Dt)),te.writeVarint(Ie(hn)),Me+=Dt,Ve+=hn}ve===3&&te.writeVarint(Ne(7,1))}}function We(ge,te){var oe=typeof ge;oe==="string"?te.writeStringField(1,ge):oe==="boolean"?te.writeBooleanField(7,ge):oe==="number"&&(ge%1!=0?te.writeDoubleField(3,ge):ge<0?te.writeSVarintField(6,ge):te.writeVarintField(5,ge))}function Et(ge,te,oe,ve,Me,Ve){if(Me-ve<=oe)return;const Xe=ve+Me>>1;ct(ge,te,Xe,ve,Me,Ve%2),Et(ge,te,oe,ve,Xe-1,Ve+1),Et(ge,te,oe,Xe+1,Me,Ve+1)}function ct(ge,te,oe,ve,Me,Ve){for(;Me>ve;){if(Me-ve>600){const Qe=Me-ve+1,Tt=oe-ve+1,qt=Math.log(Qe),Dt=.5*Math.exp(2*qt/3),hn=.5*Math.sqrt(qt*Dt*(Qe-Dt)/Qe)*(Tt-Qe/2<0?-1:1);ct(ge,te,oe,Math.max(ve,Math.floor(oe-Tt*Dt/Qe+hn)),Math.min(Me,Math.floor(oe+(Qe-Tt)*Dt/Qe+hn)),Ve)}const Xe=te[2*oe+Ve];let Ze=ve,He=Me;for(xe(ge,te,ve,oe),te[2*Me+Ve]>Xe&&xe(ge,te,ve,Me);Ze<He;){for(xe(ge,te,Ze,He),Ze++,He--;te[2*Ze+Ve]<Xe;)Ze++;for(;te[2*He+Ve]>Xe;)He--}te[2*ve+Ve]===Xe?xe(ge,te,ve,He):(He++,xe(ge,te,He,Me)),He<=oe&&(ve=He+1),oe<=He&&(Me=He-1)}}function xe(ge,te,oe,ve){Ee(ge,oe,ve),Ee(te,2*oe,2*ve),Ee(te,2*oe+1,2*ve+1)}function Ee(ge,te,oe){const ve=ge[te];ge[te]=ge[oe],ge[oe]=ve}function xn(ge,te,oe,ve){const Me=ge-oe,Ve=te-ve;return Me*Me+Ve*Ve}z.exports=se,q.fromVectorTileJs=se,q.fromGeojsonVt=function(ge,te){te=te||{};var oe={};for(var ve in ge)oe[ve]=new ue(ge[ve].features,te),oe[ve].name=ve,oe[ve].version=te.version,oe[ve].extent=te.extent;return se({layers:oe})},q.GeoJSONWrapper=ue;const Qt=ge=>ge[0],yn=ge=>ge[1];class on{constructor(te,oe=Qt,ve=yn,Me=64,Ve=Float64Array){this.nodeSize=Me,this.points=te;const Xe=te.length<65536?Uint16Array:Uint32Array,Ze=this.ids=new Xe(te.length),He=this.coords=new Ve(2*te.length);for(let Qe=0;Qe<te.length;Qe++)Ze[Qe]=Qe,He[2*Qe]=oe(te[Qe]),He[2*Qe+1]=ve(te[Qe]);Et(Ze,He,Me,0,Ze.length-1,0)}range(te,oe,ve,Me){return function(Ve,Xe,Ze,He,Qe,Tt,qt){const Dt=[0,Ve.length-1,0],hn=[];let ln,sn;for(;Dt.length;){const vn=Dt.pop(),An=Dt.pop(),Qn=Dt.pop();if(An-Qn<=qt){for(let cr=Qn;cr<=An;cr++)ln=Xe[2*cr],sn=Xe[2*cr+1],ln>=Ze&&ln<=Qe&&sn>=He&&sn<=Tt&&hn.push(Ve[cr]);continue}const pn=Math.floor((Qn+An)/2);ln=Xe[2*pn],sn=Xe[2*pn+1],ln>=Ze&&ln<=Qe&&sn>=He&&sn<=Tt&&hn.push(Ve[pn]);const ur=(vn+1)%2;(vn===0?Ze<=ln:He<=sn)&&(Dt.push(Qn),Dt.push(pn-1),Dt.push(ur)),(vn===0?Qe>=ln:Tt>=sn)&&(Dt.push(pn+1),Dt.push(An),Dt.push(ur))}return hn}(this.ids,this.coords,te,oe,ve,Me,this.nodeSize)}within(te,oe,ve){return function(Me,Ve,Xe,Ze,He,Qe){const Tt=[0,Me.length-1,0],qt=[],Dt=He*He;for(;Tt.length;){const hn=Tt.pop(),ln=Tt.pop(),sn=Tt.pop();if(ln-sn<=Qe){for(let ur=sn;ur<=ln;ur++)xn(Ve[2*ur],Ve[2*ur+1],Xe,Ze)<=Dt&&qt.push(Me[ur]);continue}const vn=Math.floor((sn+ln)/2),An=Ve[2*vn],Qn=Ve[2*vn+1];xn(An,Qn,Xe,Ze)<=Dt&&qt.push(Me[vn]);const pn=(hn+1)%2;(hn===0?Xe-He<=An:Ze-He<=Qn)&&(Tt.push(sn),Tt.push(vn-1),Tt.push(pn)),(hn===0?Xe+He>=An:Ze+He>=Qn)&&(Tt.push(vn+1),Tt.push(ln),Tt.push(pn))}return qt}(this.ids,this.coords,te,oe,ve,this.nodeSize)}}const Sn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ge=>ge},Nn=Math.fround||(bn=new Float32Array(1),ge=>(bn[0]=+ge,bn[0]));var bn;class kn{constructor(te){this.options=wn(Object.create(Sn),te),this.trees=new Array(this.options.maxZoom+1)}load(te){const{log:oe,minZoom:ve,maxZoom:Me,nodeSize:Ve}=this.options;oe&&console.time("total time");const Xe=`prepare ${te.length} points`;oe&&console.time(Xe),this.points=te;let Ze=[];for(let He=0;He<te.length;He++)te[He].geometry&&Ze.push(Ke(te[He],He));this.trees[Me+1]=new on(Ze,Gn,qn,Ve,Float32Array),oe&&console.timeEnd(Xe);for(let He=Me;He>=ve;He--){const Qe=+Date.now();Ze=this._cluster(Ze,He),this.trees[He]=new on(Ze,Gn,qn,Ve,Float32Array),oe&&console.log("z%d: %d clusters in %dms",He,Ze.length,+Date.now()-Qe)}return oe&&console.timeEnd("total time"),this}getClusters(te,oe){let ve=((te[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,te[1]));let Ve=te[2]===180?180:((te[2]+180)%360+360)%360-180;const Xe=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)ve=-180,Ve=180;else if(ve>Ve){const Tt=this.getClusters([ve,Me,180,Xe],oe),qt=this.getClusters([-180,Me,Ve,Xe],oe);return Tt.concat(qt)}const Ze=this.trees[this._limitZoom(oe)],He=Ze.range(Ft(ve),ht(Xe),Ft(Ve),ht(Me)),Qe=[];for(const Tt of He){const qt=Ze.points[Tt];Qe.push(qt.numPoints?pt(qt):this.points[qt.index])}return Qe}getChildren(te){const oe=this._getOriginId(te),ve=this._getOriginZoom(te),Me="No cluster with the specified id.",Ve=this.trees[ve];if(!Ve)throw new Error(Me);const Xe=Ve.points[oe];if(!Xe)throw new Error(Me);const Ze=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),He=Ve.within(Xe.x,Xe.y,Ze),Qe=[];for(const Tt of He){const qt=Ve.points[Tt];qt.parentId===te&&Qe.push(qt.numPoints?pt(qt):this.points[qt.index])}if(Qe.length===0)throw new Error(Me);return Qe}getLeaves(te,oe,ve){const Me=[];return this._appendLeaves(Me,te,oe=oe||10,ve=ve||0,0),Me}getTile(te,oe,ve){const Me=this.trees[this._limitZoom(te)],Ve=Math.pow(2,te),{extent:Xe,radius:Ze}=this.options,He=Ze/Xe,Qe=(ve-He)/Ve,Tt=(ve+1+He)/Ve,qt={features:[]};return this._addTileFeatures(Me.range((oe-He)/Ve,Qe,(oe+1+He)/Ve,Tt),Me.points,oe,ve,Ve,qt),oe===0&&this._addTileFeatures(Me.range(1-He/Ve,Qe,1,Tt),Me.points,Ve,ve,Ve,qt),oe===Ve-1&&this._addTileFeatures(Me.range(0,Qe,He/Ve,Tt),Me.points,-1,ve,Ve,qt),qt.features.length?qt:null}getClusterExpansionZoom(te){let oe=this._getOriginZoom(te)-1;for(;oe<=this.options.maxZoom;){const ve=this.getChildren(te);if(oe++,ve.length!==1)break;te=ve[0].properties.cluster_id}return oe}_appendLeaves(te,oe,ve,Me,Ve){const Xe=this.getChildren(oe);for(const Ze of Xe){const He=Ze.properties;if(He&&He.cluster?Ve+He.point_count<=Me?Ve+=He.point_count:Ve=this._appendLeaves(te,He.cluster_id,ve,Me,Ve):Ve<Me?Ve++:te.push(Ze),te.length===ve)break}return Ve}_addTileFeatures(te,oe,ve,Me,Ve,Xe){for(const Ze of te){const He=oe[Ze],Qe=He.numPoints;let Tt,qt,Dt;if(Qe)Tt=St(He),qt=He.x,Dt=He.y;else{const sn=this.points[He.index];Tt=sn.properties,qt=Ft(sn.geometry.coordinates[0]),Dt=ht(sn.geometry.coordinates[1])}const hn={type:1,geometry:[[Math.round(this.options.extent*(qt*Ve-ve)),Math.round(this.options.extent*(Dt*Ve-Me))]],tags:Tt};let ln;Qe?ln=He.id:this.options.generateId?ln=He.index:this.points[He.index].id&&(ln=this.points[He.index].id),ln!==void 0&&(hn.id=ln),Xe.features.push(hn)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,oe){const ve=[],{radius:Me,extent:Ve,reduce:Xe,minPoints:Ze}=this.options,He=Me/(Ve*Math.pow(2,oe));for(let Qe=0;Qe<te.length;Qe++){const Tt=te[Qe];if(Tt.zoom<=oe)continue;Tt.zoom=oe;const qt=this.trees[oe+1],Dt=qt.within(Tt.x,Tt.y,He),hn=Tt.numPoints||1;let ln=hn;for(const sn of Dt){const vn=qt.points[sn];vn.zoom>oe&&(ln+=vn.numPoints||1)}if(ln>hn&&ln>=Ze){let sn=Tt.x*hn,vn=Tt.y*hn,An=Xe&&hn>1?this._map(Tt,!0):null;const Qn=(Qe<<5)+(oe+1)+this.points.length;for(const pn of Dt){const ur=qt.points[pn];if(ur.zoom<=oe)continue;ur.zoom=oe;const cr=ur.numPoints||1;sn+=ur.x*cr,vn+=ur.y*cr,ur.parentId=Qn,Xe&&(An||(An=this._map(Tt,!0)),Xe(An,this._map(ur)))}Tt.parentId=Qn,ve.push(Le(sn/ln,vn/ln,Qn,ln,An))}else if(ve.push(Tt),ln>1)for(const sn of Dt){const vn=qt.points[sn];vn.zoom<=oe||(vn.zoom=oe,ve.push(vn))}}return ve}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,oe){if(te.numPoints)return oe?wn({},te.properties):te.properties;const ve=this.points[te.index].properties,Me=this.options.map(ve);return oe&&Me===ve?wn({},Me):Me}}function Le(ge,te,oe,ve,Me){return{x:Nn(ge),y:Nn(te),zoom:1/0,id:oe,parentId:-1,numPoints:ve,properties:Me}}function Ke(ge,te){const[oe,ve]=ge.geometry.coordinates;return{x:Nn(Ft(oe)),y:Nn(ht(ve)),zoom:1/0,index:te,parentId:-1}}function pt(ge){return{type:"Feature",id:ge.id,properties:St(ge),geometry:{type:"Point",coordinates:[(te=ge.x,360*(te-.5)),Nt(ge.y)]}};var te}function St(ge){const te=ge.numPoints,oe=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te;return wn(wn({},ge.properties),{cluster:!0,cluster_id:ge.id,point_count:te,point_count_abbreviated:oe})}function Ft(ge){return ge/360+.5}function ht(ge){const te=Math.sin(ge*Math.PI/180),oe=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return oe<0?0:oe>1?1:oe}function Nt(ge){const te=(180-360*ge)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function wn(ge,te){for(const oe in te)ge[oe]=te[oe];return ge}function Gn(ge){return ge.x}function qn(ge){return ge.y}function Un(ge,te,oe,ve){for(var Me,Ve=ve,Xe=oe-te>>1,Ze=oe-te,He=ge[te],Qe=ge[te+1],Tt=ge[oe],qt=ge[oe+1],Dt=te+3;Dt<oe;Dt+=3){var hn=xr(ge[Dt],ge[Dt+1],He,Qe,Tt,qt);if(hn>Ve)Me=Dt,Ve=hn;else if(hn===Ve){var ln=Math.abs(Dt-Xe);ln<Ze&&(Me=Dt,Ze=ln)}}Ve>ve&&(Me-te>3&&Un(ge,te,Me,ve),ge[Me+2]=Ve,oe-Me>3&&Un(ge,Me,oe,ve))}function xr(ge,te,oe,ve,Me,Ve){var Xe=Me-oe,Ze=Ve-ve;if(Xe!==0||Ze!==0){var He=((ge-oe)*Xe+(te-ve)*Ze)/(Xe*Xe+Ze*Ze);He>1?(oe=Me,ve=Ve):He>0&&(oe+=Xe*He,ve+=Ze*He)}return(Xe=ge-oe)*Xe+(Ze=te-ve)*Ze}function Ae(ge,te,oe,ve){var Me={id:ge===void 0?null:ge,type:te,geometry:oe,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ve){var Xe=Ve.geometry,Ze=Ve.type;if(Ze==="Point"||Ze==="MultiPoint"||Ze==="LineString")Ye(Ve,Xe);else if(Ze==="Polygon"||Ze==="MultiLineString")for(var He=0;He<Xe.length;He++)Ye(Ve,Xe[He]);else if(Ze==="MultiPolygon")for(He=0;He<Xe.length;He++)for(var Qe=0;Qe<Xe[He].length;Qe++)Ye(Ve,Xe[He][Qe])}(Me),Me}function Ye(ge,te){for(var oe=0;oe<te.length;oe+=3)ge.minX=Math.min(ge.minX,te[oe]),ge.minY=Math.min(ge.minY,te[oe+1]),ge.maxX=Math.max(ge.maxX,te[oe]),ge.maxY=Math.max(ge.maxY,te[oe+1])}function re(ge,te,oe,ve){if(te.geometry){var Me=te.geometry.coordinates,Ve=te.geometry.type,Xe=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),Ze=[],He=te.id;if(oe.promoteId?He=te.properties[oe.promoteId]:oe.generateId&&(He=ve||0),Ve==="Point")ce(Me,Ze);else if(Ve==="MultiPoint")for(var Qe=0;Qe<Me.length;Qe++)ce(Me[Qe],Ze);else if(Ve==="LineString")De(Me,Ze,Xe,!1);else if(Ve==="MultiLineString"){if(oe.lineMetrics){for(Qe=0;Qe<Me.length;Qe++)De(Me[Qe],Ze=[],Xe,!1),ge.push(Ae(He,"LineString",Ze,te.properties));return}be(Me,Ze,Xe,!1)}else if(Ve==="Polygon")be(Me,Ze,Xe,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(Qe=0;Qe<te.geometry.geometries.length;Qe++)re(ge,{id:He,geometry:te.geometry.geometries[Qe],properties:te.properties},oe,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Qe=0;Qe<Me.length;Qe++){var Tt=[];be(Me[Qe],Tt,Xe,!0),Ze.push(Tt)}}ge.push(Ae(He,Ve,Ze,te.properties))}}function ce(ge,te){te.push(Te(ge[0])),te.push(mt(ge[1])),te.push(0)}function De(ge,te,oe,ve){for(var Me,Ve,Xe=0,Ze=0;Ze<ge.length;Ze++){var He=Te(ge[Ze][0]),Qe=mt(ge[Ze][1]);te.push(He),te.push(Qe),te.push(0),Ze>0&&(Xe+=ve?(Me*Qe-He*Ve)/2:Math.sqrt(Math.pow(He-Me,2)+Math.pow(Qe-Ve,2))),Me=He,Ve=Qe}var Tt=te.length-3;te[2]=1,Un(te,0,Tt,oe),te[Tt+2]=1,te.size=Math.abs(Xe),te.start=0,te.end=te.size}function be(ge,te,oe,ve){for(var Me=0;Me<ge.length;Me++){var Ve=[];De(ge[Me],Ve,oe,ve),te.push(Ve)}}function Te(ge){return ge/360+.5}function mt(ge){var te=Math.sin(ge*Math.PI/180),oe=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return oe<0?0:oe>1?1:oe}function Bt(ge,te,oe,ve,Me,Ve,Xe,Ze){if(ve/=te,Ve>=(oe/=te)&&Xe<ve)return ge;if(Xe<oe||Ve>=ve)return null;for(var He=[],Qe=0;Qe<ge.length;Qe++){var Tt=ge[Qe],qt=Tt.geometry,Dt=Tt.type,hn=Me===0?Tt.minX:Tt.minY,ln=Me===0?Tt.maxX:Tt.maxY;if(hn>=oe&&ln<ve)He.push(Tt);else if(!(ln<oe||hn>=ve)){var sn=[];if(Dt==="Point"||Dt==="MultiPoint")Kt(qt,sn,oe,ve,Me);else if(Dt==="LineString")er(qt,sn,oe,ve,Me,!1,Ze.lineMetrics);else if(Dt==="MultiLineString")$t(qt,sn,oe,ve,Me,!1);else if(Dt==="Polygon")$t(qt,sn,oe,ve,Me,!0);else if(Dt==="MultiPolygon")for(var vn=0;vn<qt.length;vn++){var An=[];$t(qt[vn],An,oe,ve,Me,!0),An.length&&sn.push(An)}if(sn.length){if(Ze.lineMetrics&&Dt==="LineString"){for(vn=0;vn<sn.length;vn++)He.push(Ae(Tt.id,Dt,sn[vn],Tt.tags));continue}Dt!=="LineString"&&Dt!=="MultiLineString"||(sn.length===1?(Dt="LineString",sn=sn[0]):Dt="MultiLineString"),Dt!=="Point"&&Dt!=="MultiPoint"||(Dt=sn.length===3?"Point":"MultiPoint"),He.push(Ae(Tt.id,Dt,sn,Tt.tags))}}}return He.length?He:null}function Kt(ge,te,oe,ve,Me){for(var Ve=0;Ve<ge.length;Ve+=3){var Xe=ge[Ve+Me];Xe>=oe&&Xe<=ve&&(te.push(ge[Ve]),te.push(ge[Ve+1]),te.push(ge[Ve+2]))}}function er(ge,te,oe,ve,Me,Ve,Xe){for(var Ze,He,Qe=In(ge),Tt=Me===0?br:Zn,qt=ge.start,Dt=0;Dt<ge.length-3;Dt+=3){var hn=ge[Dt],ln=ge[Dt+1],sn=ge[Dt+2],vn=ge[Dt+3],An=ge[Dt+4],Qn=Me===0?hn:ln,pn=Me===0?vn:An,ur=!1;Xe&&(Ze=Math.sqrt(Math.pow(hn-vn,2)+Math.pow(ln-An,2))),Qn<oe?pn>oe&&(He=Tt(Qe,hn,ln,vn,An,oe),Xe&&(Qe.start=qt+Ze*He)):Qn>ve?pn<ve&&(He=Tt(Qe,hn,ln,vn,An,ve),Xe&&(Qe.start=qt+Ze*He)):Rn(Qe,hn,ln,sn),pn<oe&&Qn>=oe&&(He=Tt(Qe,hn,ln,vn,An,oe),ur=!0),pn>ve&&Qn<=ve&&(He=Tt(Qe,hn,ln,vn,An,ve),ur=!0),!Ve&&ur&&(Xe&&(Qe.end=qt+Ze*He),te.push(Qe),Qe=In(ge)),Xe&&(qt+=Ze)}var cr=ge.length-3;hn=ge[cr],ln=ge[cr+1],sn=ge[cr+2],(Qn=Me===0?hn:ln)>=oe&&Qn<=ve&&Rn(Qe,hn,ln,sn),cr=Qe.length-3,Ve&&cr>=3&&(Qe[cr]!==Qe[0]||Qe[cr+1]!==Qe[1])&&Rn(Qe,Qe[0],Qe[1],Qe[2]),Qe.length&&te.push(Qe)}function In(ge){var te=[];return te.size=ge.size,te.start=ge.start,te.end=ge.end,te}function $t(ge,te,oe,ve,Me,Ve){for(var Xe=0;Xe<ge.length;Xe++)er(ge[Xe],te,oe,ve,Me,Ve,!1)}function Rn(ge,te,oe,ve){ge.push(te),ge.push(oe),ge.push(ve)}function br(ge,te,oe,ve,Me,Ve){var Xe=(Ve-te)/(ve-te);return ge.push(Ve),ge.push(oe+(Me-oe)*Xe),ge.push(1),Xe}function Zn(ge,te,oe,ve,Me,Ve){var Xe=(Ve-oe)/(Me-oe);return ge.push(te+(ve-te)*Xe),ge.push(Ve),ge.push(1),Xe}function Ti(ge,te){for(var oe=[],ve=0;ve<ge.length;ve++){var Me,Ve=ge[ve],Xe=Ve.type;if(Xe==="Point"||Xe==="MultiPoint"||Xe==="LineString")Me=Jr(Ve.geometry,te);else if(Xe==="MultiLineString"||Xe==="Polygon"){Me=[];for(var Ze=0;Ze<Ve.geometry.length;Ze++)Me.push(Jr(Ve.geometry[Ze],te))}else if(Xe==="MultiPolygon")for(Me=[],Ze=0;Ze<Ve.geometry.length;Ze++){for(var He=[],Qe=0;Qe<Ve.geometry[Ze].length;Qe++)He.push(Jr(Ve.geometry[Ze][Qe],te));Me.push(He)}oe.push(Ae(Ve.id,Xe,Me,Ve.tags))}return oe}function Jr(ge,te){var oe=[];oe.size=ge.size,ge.start!==void 0&&(oe.start=ge.start,oe.end=ge.end);for(var ve=0;ve<ge.length;ve+=3)oe.push(ge[ve]+te,ge[ve+1],ge[ve+2]);return oe}function gi(ge,te){if(ge.transformed)return ge;var oe,ve,Me,Ve=1<<ge.z,Xe=ge.x,Ze=ge.y;for(oe=0;oe<ge.features.length;oe++){var He=ge.features[oe],Qe=He.geometry,Tt=He.type;if(He.geometry=[],Tt===1)for(ve=0;ve<Qe.length;ve+=2)He.geometry.push(yi(Qe[ve],Qe[ve+1],te,Ve,Xe,Ze));else for(ve=0;ve<Qe.length;ve++){var qt=[];for(Me=0;Me<Qe[ve].length;Me+=2)qt.push(yi(Qe[ve][Me],Qe[ve][Me+1],te,Ve,Xe,Ze));He.geometry.push(qt)}}return ge.transformed=!0,ge}function yi(ge,te,oe,ve,Me,Ve){return[Math.round(oe*(ge*ve-Me)),Math.round(oe*(te*ve-Ve))]}function Ai(ge,te,oe,ve,Me){for(var Ve=te===Me.maxZoom?0:Me.tolerance/((1<<te)*Me.extent),Xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:oe,y:ve,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ze=0;Ze<ge.length;Ze++){Xe.numFeatures++,uo(Xe,ge[Ze],Ve,Me);var He=ge[Ze].minX,Qe=ge[Ze].minY,Tt=ge[Ze].maxX,qt=ge[Ze].maxY;He<Xe.minX&&(Xe.minX=He),Qe<Xe.minY&&(Xe.minY=Qe),Tt>Xe.maxX&&(Xe.maxX=Tt),qt>Xe.maxY&&(Xe.maxY=qt)}return Xe}function uo(ge,te,oe,ve){var Me=te.geometry,Ve=te.type,Xe=[];if(Ve==="Point"||Ve==="MultiPoint")for(var Ze=0;Ze<Me.length;Ze+=3)Xe.push(Me[Ze]),Xe.push(Me[Ze+1]),ge.numPoints++,ge.numSimplified++;else if(Ve==="LineString")wr(Xe,Me,ge,oe,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(Ze=0;Ze<Me.length;Ze++)wr(Xe,Me[Ze],ge,oe,Ve==="Polygon",Ze===0);else if(Ve==="MultiPolygon")for(var He=0;He<Me.length;He++){var Qe=Me[He];for(Ze=0;Ze<Qe.length;Ze++)wr(Xe,Qe[Ze],ge,oe,!0,Ze===0)}if(Xe.length){var Tt=te.tags||null;if(Ve==="LineString"&&ve.lineMetrics){for(var qt in Tt={},te.tags)Tt[qt]=te.tags[qt];Tt.mapbox_clip_start=Me.start/Me.size,Tt.mapbox_clip_end=Me.end/Me.size}var Dt={geometry:Xe,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:Tt};te.id!==null&&(Dt.id=te.id),ge.features.push(Dt)}}function wr(ge,te,oe,ve,Me,Ve){var Xe=ve*ve;if(ve>0&&te.size<(Me?Xe:ve))oe.numPoints+=te.length/3;else{for(var Ze=[],He=0;He<te.length;He+=3)(ve===0||te[He+2]>Xe)&&(oe.numSimplified++,Ze.push(te[He]),Ze.push(te[He+1])),oe.numPoints++;Me&&function(Qe,Tt){for(var qt=0,Dt=0,hn=Qe.length,ln=hn-2;Dt<hn;ln=Dt,Dt+=2)qt+=(Qe[Dt]-Qe[ln])*(Qe[Dt+1]+Qe[ln+1]);if(qt>0===Tt)for(Dt=0,hn=Qe.length;Dt<hn/2;Dt+=2){var sn=Qe[Dt],vn=Qe[Dt+1];Qe[Dt]=Qe[hn-2-Dt],Qe[Dt+1]=Qe[hn-1-Dt],Qe[hn-2-Dt]=sn,Qe[hn-1-Dt]=vn}}(Ze,Ve),ge.push(Ze)}}function co(ge,te){var oe=(te=this.options=function(Me,Ve){for(var Xe in Ve)Me[Xe]=Ve[Xe];return Me}(Object.create(this.options),te)).debug;if(oe&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");var ve=function(Me,Ve){var Xe=[];if(Me.type==="FeatureCollection")for(var Ze=0;Ze<Me.features.length;Ze++)re(Xe,Me.features[Ze],Ve,Ze);else re(Xe,Me.type==="Feature"?Me:{geometry:Me},Ve);return Xe}(ge,te);this.tiles={},this.tileCoords=[],oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ve=function(Me,Ve){var Xe=Ve.buffer/Ve.extent,Ze=Me,He=Bt(Me,1,-1-Xe,Xe,0,-1,2,Ve),Qe=Bt(Me,1,1-Xe,2+Xe,0,-1,2,Ve);return(He||Qe)&&(Ze=Bt(Me,1,-Xe,1+Xe,0,-1,2,Ve)||[],He&&(Ze=Ti(He,1).concat(Ze)),Qe&&(Ze=Ze.concat(Ti(Qe,-1)))),Ze}(ve,te),ve.length&&this.splitTile(ve,0,0,0),oe&&(ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function vi(ge,te,oe){return 32*((1<<ge)*oe+te)+ge}function Di(ge,te){const oe=ge.tileID.canonical;if(!this._geoJSONIndex)return te(null,null);const ve=this._geoJSONIndex.getTile(oe.z,oe.x,oe.y);if(!ve)return te(null,null);const Me=new N(ve.features);let Ve=q(Me);Ve.byteOffset===0&&Ve.byteLength===Ve.buffer.byteLength||(Ve=new Uint8Array(Ve)),te(null,{vectorTile:Me,rawData:Ve.buffer})}co.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},co.prototype.splitTile=function(ge,te,oe,ve,Me,Ve,Xe){for(var Ze=[ge,te,oe,ve],He=this.options,Qe=He.debug;Ze.length;){ve=Ze.pop(),oe=Ze.pop(),te=Ze.pop(),ge=Ze.pop();var Tt=1<<te,qt=vi(te,oe,ve),Dt=this.tiles[qt];if(!Dt&&(Qe>1&&console.time("creation"),Dt=this.tiles[qt]=Ai(ge,te,oe,ve,He),this.tileCoords.push({z:te,x:oe,y:ve}),Qe)){Qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,oe,ve,Dt.numFeatures,Dt.numPoints,Dt.numSimplified),console.timeEnd("creation"));var hn="z"+te;this.stats[hn]=(this.stats[hn]||0)+1,this.total++}if(Dt.source=ge,Me){if(te===He.maxZoom||te===Me)continue;var ln=1<<Me-te;if(oe!==Math.floor(Ve/ln)||ve!==Math.floor(Xe/ln))continue}else if(te===He.indexMaxZoom||Dt.numPoints<=He.indexMaxPoints)continue;if(Dt.source=null,ge.length!==0){Qe>1&&console.time("clipping");var sn,vn,An,Qn,pn,ur,cr=.5*He.buffer/He.extent,Cs=.5-cr,ts=.5+cr,gt=1+cr;sn=vn=An=Qn=null,pn=Bt(ge,Tt,oe-cr,oe+ts,0,Dt.minX,Dt.maxX,He),ur=Bt(ge,Tt,oe+Cs,oe+gt,0,Dt.minX,Dt.maxX,He),ge=null,pn&&(sn=Bt(pn,Tt,ve-cr,ve+ts,1,Dt.minY,Dt.maxY,He),vn=Bt(pn,Tt,ve+Cs,ve+gt,1,Dt.minY,Dt.maxY,He),pn=null),ur&&(An=Bt(ur,Tt,ve-cr,ve+ts,1,Dt.minY,Dt.maxY,He),Qn=Bt(ur,Tt,ve+Cs,ve+gt,1,Dt.minY,Dt.maxY,He),ur=null),Qe>1&&console.timeEnd("clipping"),Ze.push(sn||[],te+1,2*oe,2*ve),Ze.push(vn||[],te+1,2*oe,2*ve+1),Ze.push(An||[],te+1,2*oe+1,2*ve),Ze.push(Qn||[],te+1,2*oe+1,2*ve+1)}}},co.prototype.getTile=function(ge,te,oe){var ve=this.options,Me=ve.extent,Ve=ve.debug;if(ge<0||ge>24)return null;var Xe=1<<ge,Ze=vi(ge,te=(te%Xe+Xe)%Xe,oe);if(this.tiles[Ze])return gi(this.tiles[Ze],Me);Ve>1&&console.log("drilling down to z%d-%d-%d",ge,te,oe);for(var He,Qe=ge,Tt=te,qt=oe;!He&&Qe>0;)Qe--,Tt=Math.floor(Tt/2),qt=Math.floor(qt/2),He=this.tiles[vi(Qe,Tt,qt)];return He&&He.source?(Ve>1&&console.log("found parent tile z%d-%d-%d",Qe,Tt,qt),Ve>1&&console.time("drilling down"),this.splitTile(He.source,Qe,Tt,qt,ge,te,oe),Ve>1&&console.timeEnd("drilling down"),this.tiles[Ze]?gi(this.tiles[Ze],Me):null):null};class Eo extends o.VectorTileWorkerSource{constructor(te,oe,ve,Me,Ve){super(te,oe,ve,Me,Di),Ve&&(this.loadGeoJSON=Ve)}loadData(te,oe){const ve=te&&te.request,Me=ve&&ve.collectResourceTiming;this.loadGeoJSON(te,(Ve,Xe)=>{if(Ve||!Xe)return oe(Ve);if(typeof Xe!="object")return oe(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`));{F(Xe,!0);try{if(te.filter){const He=o.createExpression(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(He.result==="error")throw new Error(He.value.map(Tt=>`${Tt.key}: ${Tt.message}`).join(", "));const Qe=Xe.features.filter(Tt=>He.value.evaluate({zoom:0},Tt));Xe={type:"FeatureCollection",features:Qe}}this._geoJSONIndex=te.cluster?new kn(function({superclusterOptions:He,clusterProperties:Qe}){if(!Qe||!He)return He;const Tt={},qt={},Dt={accumulated:null,zoom:0},hn={properties:null},ln=Object.keys(Qe);for(const sn of ln){const[vn,An]=Qe[sn],Qn=o.createExpression(An),pn=o.createExpression(typeof vn=="string"?[vn,["accumulated"],["get",sn]]:vn);Tt[sn]=Qn.value,qt[sn]=pn.value}return He.map=sn=>{hn.properties=sn;const vn={};for(const An of ln)vn[An]=Tt[An].evaluate(Dt,hn);return vn},He.reduce=(sn,vn)=>{hn.properties=vn;for(const An of ln)Dt.accumulated=sn[An],sn[An]=qt[An].evaluate(Dt,hn)},He}(te)).load(Xe.features):function(He,Qe){return new co(He,Qe)}(Xe,te.geojsonVtOptions)}catch(He){return oe(He)}this.loaded={};const Ze={};if(Me){const He=o.getPerformanceMeasurement(ve);He&&(Ze.resourceTiming={},Ze.resourceTiming[te.source]=JSON.parse(JSON.stringify(He)))}oe(null,Ze)}})}reloadTile(te,oe){const ve=this.loaded;return ve&&ve[te.uid]?super.reloadTile(te,oe):this.loadTile(te,oe)}loadGeoJSON(te,oe){if(te.request)o.getJSON(te.request,oe);else{if(typeof te.data!="string")return oe(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`));try{return oe(null,JSON.parse(te.data))}catch{return oe(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(te,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(te.clusterId))}catch(ve){oe(ve)}}getClusterChildren(te,oe){try{oe(null,this._geoJSONIndex.getChildren(te.clusterId))}catch(ve){oe(ve)}}getClusterLeaves(te,oe){try{oe(null,this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset))}catch(ve){oe(ve)}}}class Pa{constructor(te){this.self=te,this.actor=new o.Actor(te,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Eo},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(oe,ve)=>{if(this.workerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.workerSourceTypes[oe]=ve},this.self.registerRTLTextPlugin=oe=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=oe.applyArabicShaping,o.plugin.processBidirectionalText=oe.processBidirectionalText,o.plugin.processStyledBidirectionalText=oe.processStyledBidirectionalText}}clearCaches(te,oe,ve){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te],ve()}checkIfReady(te,oe,ve){ve()}setReferrer(te,oe){this.referrer=oe}spriteLoaded(te,oe){this.isSpriteLoaded[te]=oe;for(const ve in this.workerSources[te]){const Me=this.workerSources[te][ve];for(const Ve in Me)Me[Ve]instanceof o.VectorTileWorkerSource&&(Me[Ve].isSpriteLoaded=oe,Me[Ve].fire(new o.Event("isSpriteLoaded")))}}setImages(te,oe,ve){this.availableImages[te]=oe;for(const Me in this.workerSources[te]){const Ve=this.workerSources[te][Me];for(const Xe in Ve)Ve[Xe].availableImages=oe}ve()}enableTerrain(te,oe,ve){this.terrain=oe,ve()}setProjection(te,oe){this.projections[te]=o.getProjection(oe)}setLayers(te,oe,ve){this.getLayerIndex(te).replace(oe),ve()}updateLayers(te,oe,ve){this.getLayerIndex(te).update(oe.layers,oe.removedIds),ve()}loadTile(te,oe,ve){const Me=this.enableTerrain?o.extend({enableTerrain:this.terrain},oe):oe;Me.projection=this.projections[te]||this.defaultProjection,this.getWorkerSource(te,oe.type,oe.source).loadTile(Me,ve)}loadDEMTile(te,oe,ve){const Me=this.enableTerrain?o.extend({buildQuadTree:this.terrain},oe):oe;this.getDEMWorkerSource(te,oe.source).loadTile(Me,ve)}reloadTile(te,oe,ve){const Me=this.enableTerrain?o.extend({enableTerrain:this.terrain},oe):oe;Me.projection=this.projections[te]||this.defaultProjection,this.getWorkerSource(te,oe.type,oe.source).reloadTile(Me,ve)}abortTile(te,oe,ve){this.getWorkerSource(te,oe.type,oe.source).abortTile(oe,ve)}removeTile(te,oe,ve){this.getWorkerSource(te,oe.type,oe.source).removeTile(oe,ve)}removeSource(te,oe,ve){if(!this.workerSources[te]||!this.workerSources[te][oe.type]||!this.workerSources[te][oe.type][oe.source])return;const Me=this.workerSources[te][oe.type][oe.source];delete this.workerSources[te][oe.type][oe.source],Me.removeSource!==void 0?Me.removeSource(oe,ve):ve()}loadWorkerSource(te,oe,ve){try{this.self.importScripts(oe.url),ve()}catch(Me){ve(Me.toString())}}syncRTLPluginState(te,oe,ve){try{o.plugin.setState(oe);const Me=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Me!=null){this.self.importScripts(Me);const Ve=o.plugin.isParsed();ve(Ve?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Me}`),Ve)}}catch(Me){ve(Me.toString())}}getAvailableImages(te){let oe=this.availableImages[te];return oe||(oe=[]),oe}getLayerIndex(te){let oe=this.layerIndexes[te];return oe||(oe=this.layerIndexes[te]=new I),oe}getWorkerSource(te,oe,ve){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][oe]||(this.workerSources[te][oe]={}),!this.workerSources[te][oe][ve]){const Me={send:(Ve,Xe,Ze,He,Qe,Tt)=>{this.actor.send(Ve,Xe,Ze,te,Qe,Tt)},scheduler:this.actor.scheduler};this.workerSources[te][oe][ve]=new this.workerSourceTypes[oe](Me,this.getLayerIndex(te),this.getAvailableImages(te),this.isSpriteLoaded[te])}return this.workerSources[te][oe][ve]}getDEMWorkerSource(te,oe){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][oe]||(this.demWorkerSources[te][oe]=new D),this.demWorkerSources[te][oe]}enforceCacheSizeLimit(te,oe){o.enforceCacheSizeLimit(oe)}getWorkerPerformanceMetrics(te,oe,ve){ve(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Pa(self)),Pa}),c(["./shared"],function(o){function v(g,u){if(Array.isArray(g)){if(!Array.isArray(u)||g.length!==u.length)return!1;for(let p=0;p<g.length;p++)if(!v(g[p],u[p]))return!1;return!0}if(typeof g=="object"&&g!==null&&u!==null){if(typeof u!="object"||Object.keys(g).length!==Object.keys(u).length)return!1;for(const p in g)if(!v(g[p],u[p]))return!1;return!0}return g===u}var C=I;function I(g){return!function(u){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,b,S=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(S);try{b=new Worker(L),_=!0}catch{_=!1}return b&&b.terminate(),URL.revokeObjectURL(L),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var b=_.getContext("2d");if(!b)return!1;var S=b.getImageData(0,0,1,1);return S&&S.width===_.width}()?(D[p=u&&u.failIfMajorPerformanceCaveat]===void 0&&(D[p]=function(_){var b,S=function(L){var O=document.createElement("canvas"),W=Object.create(I.webGLContextAttributes);return W.failIfMajorPerformanceCaveat=L,O.getContext("webgl",W)||O.getContext("experimental-webgl",W)}(_);if(!S)return!1;try{b=S.createShader(S.VERTEX_SHADER)}catch{return!1}return!(!b||S.isContextLost())&&(S.shaderSource(b,"void main() {}"),S.compileShader(b),S.getShaderParameter(b,S.COMPILE_STATUS)===!0)}(p)),D[p]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var p}(g)}var D={};function F(g,u,p){const _=o.window.document.createElement(g);return u!==void 0&&(_.className=u),p&&p.appendChild(_),_}function U(g,u,p){const _=o.window.document.createElementNS("http://www.w3.org/2000/svg",g);for(const b of Object.keys(u))_.setAttributeNS(null,b,u[b]);return p&&p.appendChild(_),_}I.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const j=o.window.document&&o.window.document.documentElement.style,T=j&&j.userSelect!==void 0?"userSelect":"WebkitUserSelect";let H;function N(){j&&T&&(H=j[T],j[T]="none")}function q(){j&&T&&(j[T]=H)}function z(g){g.preventDefault(),g.stopPropagation(),o.window.removeEventListener("click",z,!0)}function B(){o.window.addEventListener("click",z,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",z,!0)},0)}function k(g,u){const p=g.getBoundingClientRect();return J(g,p,u)}function w(g,u){const p=g.getBoundingClientRect(),_=[];for(let b=0;b<u.length;b++)_.push(J(g,p,u[b]));return _}function R(g){return o.window.InstallTrigger!==void 0&&g.button===2&&g.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:g.button}function J(g,u,p){const _=g.offsetWidth===u.width?1:g.offsetWidth/u.width;return new o.pointGeometry((p.clientX-u.left)*_,(p.clientY-u.top)*_)}function ie(g,u){var p=u[0],_=u[1],b=u[2],S=u[3],L=p*S-b*_;return L?(g[0]=S*(L=1/L),g[1]=-_*L,g[2]=-b*L,g[3]=p*L,g):null}function ue(g){const{userImage:u}=g;return!!(u&&u.render&&u.render())&&(g.data.replace(new Uint8Array(u.data.buffer)),!0)}class se extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,callback:_}of this.requestors)this._notify(p,_);this.requestors=[]}}hasImage(u){return!!this.getImage(u)}getImage(u){return this.images[u]}addImage(u,p){this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let _=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),_=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),_=!1),this._validateContent(p.content,p)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),_=!1),_}_validateStretch(u,p){if(!u)return!0;let _=0;for(const b of u){if(b[0]<_||b[1]<b[0]||p<b[1])return!1;_=b[1]}return!0}_validateContent(u,p){return!(u&&(u.length!==4||u[0]<0||p.data.width<u[0]||u[1]<0||p.data.height<u[1]||u[2]<0||p.data.width<u[2]||u[3]<0||p.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,p){p.version=this.images[u].version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,p){let _=!0;if(!this.isLoaded())for(const b of u)this.images[b]||(_=!1);this.isLoaded()||_?this._notify(u,p):this.requestors.push({ids:u,callback:p})}_notify(u,p){const _={};for(const b of u){this.images[b]||this.fire(new o.Event("styleimagemissing",{id:b}));const S=this.images[b];S?_[b]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:o.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,_)}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],_=this.getImage(u);if(!_)return null;if(p&&p.position.version===_.version)return p.position;if(p)p.position.version=_.version;else{const b={w:_.data.width+2,h:_.data.height+2,x:0,y:0},S=new o.ImagePosition(b,_);this.patterns[u]={bin:b,position:S}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(u,this.atlasImage,p.RGBA),this.atlasTexture&&this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const S in this.patterns)u.push(this.patterns[S].bin);const{w:p,h:_}=o.potpack(u),b=this.atlasImage;b.resize({width:p||1,height:_||1});for(const S in this.patterns){const{bin:L}=this.patterns[S],O=L.x+1,W=L.y+1,K=this.images[S].data,X=K.width,ee=K.height;o.RGBAImage.copy(K,b,{x:0,y:0},{x:O,y:W},{width:X,height:ee}),o.RGBAImage.copy(K,b,{x:0,y:ee-1},{x:O,y:W-1},{width:X,height:1}),o.RGBAImage.copy(K,b,{x:0,y:0},{x:O,y:W+ee},{width:X,height:1}),o.RGBAImage.copy(K,b,{x:X-1,y:0},{x:O-1,y:W},{width:1,height:ee}),o.RGBAImage.copy(K,b,{x:0,y:0},{x:O+X,y:W},{width:1,height:ee})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const _=this.images[p];ue(_)&&this.updateImage(p,_)}}}const _e=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(g,u){return function([p,_,b]){const S=o.degToRad(_+90),L=o.degToRad(b);return{x:p*Math.cos(S)*Math.sin(L),y:p*Math.sin(S)*Math.sin(L),z:p*Math.cos(L),azimuthal:_,polar:b}}(g.expression.evaluate(u))}interpolate(g,u,p){return{x:o.number(g.x,u.x,p),y:o.number(g.y,u.y,p),z:o.number(g.z,u.z,p),azimuthal:o.number(g.azimuthal,u.azimuthal,p),polar:o.number(g.polar,u.polar,p)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),Ue="-transition";class je extends o.Evented{constructor(u){super(),this._transitionable=new o.Transitionable(_e),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(o.validateLight,u,p))for(const _ in u){const b=u[_];o.endsWith(_,Ue)?this._transitionable.setTransition(_.slice(0,-Ue.length),b):this._transitionable.setValue(_,b)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Ne=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),Ie="-transition";class xt extends o.Evented{constructor(u,p){super(),this._transitionable=new o.Transitionable(Ne),this.set(u),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=p}get(){return this._transitionable.serialize()}set(u){for(const p in u){const _=u[p];o.endsWith(p,Ie)?this._transitionable.setTransition(p.slice(0,-Ie.length),_):this._transitionable.setValue(p,_)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}}function We(g,u,p,_){const b=o.smoothstep(45,65,p),[S,L]=Et(g,_),O=o.length(u);let W=1-Math.min(1,Math.exp((O-S)/(L-S)*-6));return W*=W*W,W=Math.min(1,1.00747*W),W*b*g.alpha}function Et(g,u){const p=.5/Math.tan(.5*u);return[g.range[0]+p,g.range[1]+p]}const ct=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),xe="-transition";class Ee extends o.Evented{constructor(u,p){super(),this._transitionable=new o.Transitionable(ct),this.set(u),this._transitioning=this._transitionable.untransitioned(),this._transform=p}get state(){const u=this._transform,p=u.projection.name==="globe",_=o.globeToMercatorTransition(u.zoom),b=this.properties.get("range"),S=[.5,3];return{range:p?[o.number(S[0],b[0],_),o.number(S[1],b[1],_)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(u,p={}){if(!this._validate(o.validateFog,u,p)){for(const _ of Object.keys(o.spec.fog))u&&u[_]===void 0&&(u[_]=o.spec.fog[_].default);for(const _ in u){const b=u[_];o.endsWith(_,xe)?this._transitionable.setTransition(_.slice(0,-xe.length),b):this._transitionable.setValue(_,b)}}}getOpacity(u){if(!this._transform.projection.supportsFog)return 0;const p=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,u))*p.a}getOpacityAtLatLng(u,p){return this._transform.projection.supportsFog?function(_,b,S){const L=o.MercatorCoordinate.fromLngLat(b),O=S.elevation?S.elevation.getAtPointOrZero(L):0,W=[L.x,L.y,O];return o.transformMat4(W,W,S.mercatorFogMatrix),We(_,W,S.pitch,S._fov)}(this.state,u,p):0}getFovAdjustedRange(u){return this._transform.projection.supportsFog?Et(this.state,u):[0,1]}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class xn{constructor(u,p){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const _=this.workerPool.acquire(this.id);for(let b=0;b<_.length;b++){const S=new xn.Actor(_[b],p,this.id);S.name=`Worker ${b}`,this.actors.push(S)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(u,p,_){o.asyncAll(this.actors,(b,S)=>{b.send(u,p,S)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(u=>{u.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Qt(g,u,p){return u*(o.EXTENT/(g.tileSize*Math.pow(2,p-g.tileID.overscaledZ)))}xn.Actor=o.Actor;class yn{constructor(u,p,_,b){this.screenBounds=u,this.cameraPoint=p,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(u,p){let _,b;if(u instanceof o.pointGeometry||typeof u[0]=="number"){const S=o.pointGeometry.convert(u);_=[S],b=p.isPointAboveHorizon(S)}else{const S=o.pointGeometry.convert(u[0]),L=o.pointGeometry.convert(u[1]);_=[S,L],b=o.polygonizeBounds(S,L).every(O=>p.isPointAboveHorizon(O))}return new yn(_,p.getCameraPoint(),b,p)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(u){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],u)}bufferedCameraGeometry(u){const p=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],b=o.polygonizeBounds(p,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>p.x&&this.cameraPoint.x<_.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?b[2]=this.cameraPoint:this.cameraPoint.x<=p.x&&(b[3]=this.cameraPoint)),o.bufferConvexPolygon(b,u)}bufferedCameraGeometryGlobe(u){const p=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],b=o.polygonizeBounds(p,_,u),S=this.cameraPoint.clone();switch(3*((S.y>p.y)+(S.y>_.y))+((S.x>p.x)+(S.x>_.x))){case 0:b[0]=S,b[4]=S.clone();break;case 1:b.splice(1,0,S);break;case 2:b[1]=S;break;case 3:b.splice(4,0,S);break;case 5:b.splice(2,0,S);break;case 6:b[3]=S;break;case 7:b.splice(3,0,S);break;case 8:b[2]=S}return b}containsTile(u,p,_,b=0){const S=u.queryPadding/p._pixelsPerMercatorPixel+1,L=_?this._bufferedCameraMercator(S,p):this._bufferedScreenMercator(S,p);let O=u.tileID.wrap+(L.unwrapped?b:0);const W=L.polygon.map(me=>o.getTilePoint(u.tileTransform,me,O));if(!o.polygonIntersectsBox(W,0,0,o.EXTENT,o.EXTENT))return;O=u.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const K=this.screenGeometryMercator.polygon.map(me=>o.getTileVec3(u.tileTransform,me,O)),X=K.map(me=>new o.pointGeometry(me[0],me[1])),ee=p.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),le=o.getTileVec3(u.tileTransform,ee,O),de=K.map(me=>{const ae=o.sub(me,me,le);return o.normalize(ae,ae),new o.Ray(le,ae)}),pe=Qt(u,1,p.zoom)*p._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:X,tilespaceRays:de,bufferedTilespaceGeometry:W,bufferedTilespaceBounds:(fe=o.getBounds(W),fe.min.x=o.clamp(fe.min.x,0,o.EXTENT),fe.min.y=o.clamp(fe.min.y,0,o.EXTENT),fe.max.x=o.clamp(fe.max.x,0,o.EXTENT),fe.max.y=o.clamp(fe.max.y,0,o.EXTENT),fe),tile:u,tileID:u.tileID,pixelToTileUnitsFactor:pe};var fe}_bufferedScreenMercator(u,p){const _=Nn(u);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let b;return b=p.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(u),p):{polygon:this.bufferedScreenGeometry(u).map(S=>p.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[_]=b,b}}_bufferedCameraMercator(u,p){const _=Nn(u);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let b;return b=p.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(u),p):{polygon:this.bufferedCameraGeometry(u).map(S=>p.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[_]=b,b}}_projectAndResample(u,p){const _=function(S,L){const O=o.multiply([],L.pixelMatrix,L.globeMatrix),W=[0,-o.GLOBE_RADIUS,0,1],K=[0,o.GLOBE_RADIUS,0,1],X=[0,0,0,1];o.transformMat4$1(W,W,O),o.transformMat4$1(K,K,O),o.transformMat4$1(X,X,O);const ee=new o.pointGeometry(W[0]/W[3],W[1]/W[3]),le=new o.pointGeometry(K[0]/K[3],K[1]/K[3]),de=o.polygonContainsPoint(S,ee)&&W[3]<X[3],pe=o.polygonContainsPoint(S,le)&&K[3]<X[3];if(!de&&!pe)return null;const fe=function($e,qe,tt){for(let ot=1;ot<$e.length;ot++){const Ot=Sn(qe.pointCoordinate3D($e[ot-1]).x),Je=Sn(qe.pointCoordinate3D($e[ot]).x);if(tt<0){if(Ot<Je)return{idx:ot,t:-Ot/(Je-1-Ot)}}else if(Je<Ot)return{idx:ot,t:(1-Ot)/(Je+1-Ot)}}return null}(S,L,de?-1:1);if(!fe)return null;const{idx:me,t:ae}=fe;let Se=me>1?on(S.slice(0,me),L):[],Ce=me<S.length?on(S.slice(me),L):[];Se=Se.map($e=>new o.pointGeometry(Sn($e.x),$e.y)),Ce=Ce.map($e=>new o.pointGeometry(Sn($e.x),$e.y));const ke=[...Se];ke.length===0&&ke.push(Ce[Ce.length-1]);const Fe=o.number(ke[ke.length-1].y,(Ce.length===0?Se[0]:Ce[0]).y,ae);let ze;return ze=de?[new o.pointGeometry(0,Fe),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,Fe)]:[new o.pointGeometry(1,Fe),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,Fe)],ke.push(...ze),Ce.length===0?ke.push(Se[0]):ke.push(...Ce),{polygon:ke.map($e=>new o.MercatorCoordinate($e.x,$e.y)),unwrapped:!1}}(u,p);if(_)return _;const b=function(S,L){let O=!1,W=-1/0,K=0;for(let ee=0;ee<S.length-1;ee++)S[ee].x>W&&(W=S[ee].x,K=ee);for(let ee=0;ee<S.length-1;ee++){const le=(K+ee)%(S.length-1),de=S[le],pe=S[le+1];Math.abs(de.x-pe.x)>.5&&(de.x<pe.x?(de.x+=1,le===0&&(S[S.length-1].x+=1)):(pe.x+=1,le+1===S.length-1&&(S[0].x+=1)),O=!0)}const X=o.mercatorXfromLng(L.center.lng);return O&&X<Math.abs(X-1)&&S.forEach(ee=>{ee.x-=1}),{polygon:S,unwrapped:O}}(on(u,p).map(S=>new o.pointGeometry(Sn(S.x),S.y)),p);return{polygon:b.polygon.map(S=>new o.MercatorCoordinate(S.x,S.y)),unwrapped:b.unwrapped}}}function on(g,u){return o.resample(g,p=>{const _=u.pointCoordinate3D(p);p.x=_.x,p.y=_.y},1/256)}function Sn(g){return g<0?1+g%1:g%1}function Nn(g){return 100*g|0}function bn(g,u,p,_,b){const S=function(L,O){if(L)return b(L);if(O){g.url&&O.tiles&&g.tiles&&delete g.tiles;const W=o.pick(o.extend(O,g),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(W.vectorLayers=O.vector_layers,W.vectorLayerIds=W.vectorLayers.map(K=>K.id)),W.tiles=u.canonicalizeTileset(W,g.url),b(null,W)}};return g.url?o.getJSON(u.transformRequest(u.normalizeSourceURL(g.url,null,p,_),o.ResourceType.Source),S):o.exported.frame(()=>S(null,g))}class kn{constructor(u,p,_){this.bounds=o.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=_||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),_=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),b=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),S=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),L=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return u.x>=_&&u.x<S&&u.y>=b&&u.y<L}}class Le{constructor(u,p,_){this.context=u;const b=u.gl;this.buffer=b.createBuffer(),this.dynamicDraw=Boolean(_),this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ke={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class pt{constructor(u,p,_,b){this.length=p.length,this.attributes=_,this.itemSize=p.bytesPerElement,this.dynamicDraw=b,this.context=u;const S=u.gl;this.buffer=S.createBuffer(),u.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let _=0;_<this.attributes.length;_++){const b=p.attributes[this.attributes[_].name];b!==void 0&&u.enableVertexAttribArray(b)}}setVertexAttribPointers(u,p,_){for(let b=0;b<this.attributes.length;b++){const S=this.attributes[b],L=p.attributes[S.name];L!==void 0&&u.vertexAttribPointer(L,S.components,u[Ke[S.type]],!1,this.itemSize,S.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class St{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ft extends St{getDefault(){return o.Color.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class ht extends St{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Nt extends St{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class wn extends St{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Gn extends St{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class qn extends St{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class Un extends St{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class xr extends St{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Ae extends St{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class Ye extends St{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class re extends St{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class ce extends St{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class De extends St{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class be extends St{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Te extends St{getDefault(){return o.Color.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class mt extends St{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Bt extends St{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class Kt extends St{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class er extends St{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class In extends St{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class $t extends St{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Rn extends St{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class br extends St{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Zn extends St{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Ti extends St{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Jr extends St{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class gi extends St{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class yi extends St{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class Ai extends St{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class uo extends St{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class wr extends St{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class co extends St{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class vi extends co{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Di extends co{attachment(){return this.gl.DEPTH_ATTACHMENT}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,this.attachment(),p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Eo extends Di{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Pa{constructor(u,p,_,b){this.context=u,this.width=p,this.height=_;const S=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new vi(u,S),b&&(this.depthAttachment=new Di(u,S))}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const _=this.depthAttachment.get();_&&u.deleteRenderbuffer(_)}u.deleteFramebuffer(this.framebuffer)}}class ge{constructor(u,p=!1){if(this.gl=u,this.isWebGL2=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),p){const _=u;this.extVertexArrayObject={createVertexArrayOES:_.createVertexArray.bind(u),deleteVertexArrayOES:_.deleteVertexArray.bind(u),bindVertexArrayOES:_.bindVertexArray.bind(u)}}this.clearColor=new Ft(this),this.clearDepth=new ht(this),this.clearStencil=new Nt(this),this.colorMask=new wn(this),this.depthMask=new Gn(this),this.stencilMask=new qn(this),this.stencilFunc=new Un(this),this.stencilOp=new xr(this),this.stencilTest=new Ae(this),this.depthRange=new Ye(this),this.depthTest=new re(this),this.depthFunc=new ce(this),this.blend=new De(this),this.blendFunc=new be(this),this.blendColor=new Te(this),this.blendEquation=new mt(this),this.cullFace=new Bt(this),this.cullFaceSide=new Kt(this),this.frontFace=new er(this),this.program=new In(this),this.activeTexture=new $t(this),this.viewport=new Rn(this),this.bindFramebuffer=new br(this),this.bindRenderbuffer=new Zn(this),this.bindTexture=new Ti(this),this.bindVertexBuffer=new Jr(this),this.bindElementBuffer=new gi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yi(this),this.pixelStoreUnpack=new Ai(this),this.pixelStoreUnpackPremultiplyAlpha=new uo(this),this.pixelStoreUnpackFlipY=new wr(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=u.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=u.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=u.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),p||(this.extTextureHalfFloat=u.getExtension("OES_texture_half_float")),(p||this.extTextureHalfFloat&&u.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=p||u.getExtension("OES_standard_derivatives"),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new Le(this,u,p)}createVertexBuffer(u,p,_){return new pt(this,u,p,_)}createRenderbuffer(u,p,_){const b=this.gl,S=b.createRenderbuffer();return this.bindRenderbuffer.set(S),b.renderbufferStorage(b.RENDERBUFFER,u,p,_),this.bindRenderbuffer.set(null),S}createFramebuffer(u,p,_){return new Pa(this,u,p,_)}clear({color:u,depth:p,stencil:_}){const b=this.gl;let S=0;u&&(S|=b.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(S|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),_!==void 0&&(S|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),b.clear(S)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){v(u.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class te extends o.Evented{constructor(u,p,_,b){if(super(),this.id=u,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(p,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(u){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const p=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=bn(this._options,this.map._requestManager,p,_,(b,S)=>{this._tileJSONRequest=null,this._loaded=!0,b?(p&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${p}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new o.ErrorEvent(b))):S&&(o.extend(this,S),S.bounds&&(this.tileBounds=new kn(S.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(S.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(b)})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(u,p){const _=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(_,o.ResourceType.Tile),data:void 0,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:u.isSymbolTile};if(b.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired")u.state==="loading"?u.reloadCallback=p:u.request=u.actor.send("reloadTile",b,S.bind(this));else if(u.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)u.request=u.actor.send("loadTile",b,S.bind(this),void 0,!0);else{const L=o.loadVectorTile.call({deduped:this._deduped},b,(O,W)=>{O||!W?S.call(this,O):(b.data={cacheControl:W.cacheControl,expires:W.expires,rawData:W.rawData.slice(0)},u.actor&&u.actor.send("loadTile",b,S.bind(this),void 0,!0))},!0);u.request={cancel:L}}function S(L,O){return delete u.request,u.aborted?p(null):L&&L.status!==404?p(L):(O&&O.resourceTiming&&(u.resourceTiming=O.resourceTiming),this.map._refreshExpiredTiles&&O&&u.setExpiryData(O),u.loadVectorData(O,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id})}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class oe extends o.Evented{constructor(u,p,_,b){super(),this.id=u,this.dispatcher=_,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},p),o.extend(this,o.pick(p,["url","scheme","tileSize"]))}load(u){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=bn(this._options,this.map._requestManager,null,null,(p,_)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new o.ErrorEvent(p)):_&&(o.extend(this,_),_.bounds&&(this.tileBounds=new kn(_.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(_.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(p)})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,p){const _=o.exported.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);u.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(S,L,O,W)=>(delete u.request,u.aborted?(u.state="unloaded",p(null)):S?(u.state="errored",p(S)):L?(this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:O,expires:W}),u.setTexture(L,this.map.painter),u.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void p(null)):p(null)))}static loadTileData(u,p,_){u.setTexture(p,_)}static unloadTileData(u,p){u.texture&&p.saveTileTexture(u.texture)}abortTile(u,p){u.request&&(u.request.cancel(),delete u.request),p()}unloadTile(u,p){u.texture&&this.map.painter.saveTileTexture(u.texture),p()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let ve;function Me(g,u,p,_,b,S,L,O){const W=[g,p,b,u,_,S,1,1,1],K=[L,O,1],X=o.adjoint([],W),[ee,le,de]=o.transformMat3(K,K,o.transpose(X,X));return o.multiply$1(W,[ee,0,0,0,le,0,0,0,de],W)}class Ve extends o.Evented{constructor(u,p,_,b){super(),this.id=u,this.dispatcher=_,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=p,this._dirty=!1}load(u,p){this._loaded=p||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(_,b)=>{if(this._imageRequest=null,this._loaded=!0,_)this.fire(new o.ErrorEvent(_));else if(b){const{HTMLImageElement:S}=o.window;this.image=b instanceof S?o.exported.getImageData(b):b,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,u&&(this.coordinates=u),this._finishLoading()}})}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this._imageRequest&&u.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=u.url,this.load(u.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(u){this.coordinates=u,this._boundsArray=void 0;const p=u.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let b=1/0,S=1/0,L=-1/0,O=-1/0;for(const ee of _)b=Math.min(b,ee.x),S=Math.min(S,ee.y),L=Math.max(L,ee.x),O=Math.max(O,ee.y);const W=Math.max(L-b,O-S),K=Math.max(0,Math.floor(-Math.log(W)/Math.LN2)),X=Math.pow(2,K);return new o.CanonicalTileID(K,Math.floor((b+L)/2*X),Math.floor((S+O)/2*X))}(p),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(u){for(const W in this.tiles){const K=this.tiles[W];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture)}if(this._boundsArray)return;const p=o.tileTransform(this.tileID,this.map.transform.projection),[_,b,S,L]=this.coordinates.map(W=>{const K=p.projection.project(W[0],W[1]);return o.getTilePoint(p,K)._round()});this.perspectiveTransform=function(W,K,X,ee,le,de,pe,fe,me,ae){const Se=Me(0,0,W,0,0,K,W,K),Ce=Me(X,ee,le,de,pe,fe,me,ae);return o.multiply$1(Ce,o.adjoint(Se,Se),Ce),[Ce[6]/Ce[8]*W/o.EXTENT,Ce[7]/Ce[8]*K/o.EXTENT]}(this.width,this.height,_.x,_.y,b.x,b.y,L.x,L.y,S.x,S.y);const O=this._boundsArray=new o.StructArrayLayout4i8;O.emplaceBack(_.x,_.y,0,0),O.emplaceBack(b.x,b.y,o.EXTENT,0),O.emplaceBack(L.x,L.y,0,o.EXTENT),O.emplaceBack(S.x,S.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=u.createVertexBuffer(O,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,p=u.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(u,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(u)}loadTile(u,p){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},p(null)):(u.state="errored",p(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Xe={vector:te,raster:oe,"raster-dem":class extends oe{constructor(g,u,p,_){super(g,u,p,_),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}loadTile(g,u){const p=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(b,S){b&&(g.state="errored",u(b)),S&&(g.dem=S,g.dem.onDeserialize(),g.needsHillshadePrepare=!0,g.needsDEMTextureUpload=!0,g.state="loaded",u(null))}g.request=o.getImage(this.map._requestManager.transformRequest(p,o.ResourceType.Tile),function(b,S,L,O){if(delete g.request,g.aborted)g.state="unloaded",u(null);else if(b)g.state="errored",u(b);else if(S){this.map._refreshExpiredTiles&&g.setExpiryData({cacheControl:L,expires:O});const W=o.window.ImageBitmap&&S instanceof o.window.ImageBitmap&&(ve==null&&(ve=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),ve),K=1-(S.width-o.prevPowerOfTwo(S.width))/2;K<1||g.neighboringTiles||(g.neighboringTiles=this._getNeighboringTiles(g.tileID));const X=W?S:o.exported.getImageData(S,K),ee={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:X,encoding:this.encoding,padding:K};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",ee,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(g){const u=g.canonical,p=Math.pow(2,u.z),_=(u.x-1+p)%p,b=u.x===0?g.wrap-1:g.wrap,S=(u.x+1+p)%p,L=u.x+1===p?g.wrap+1:g.wrap,O={};return O[new o.OverscaledTileID(g.overscaledZ,b,u.z,_,u.y).key]={backfilled:!1},O[new o.OverscaledTileID(g.overscaledZ,L,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(O[new o.OverscaledTileID(g.overscaledZ,b,u.z,_,u.y-1).key]={backfilled:!1},O[new o.OverscaledTileID(g.overscaledZ,g.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},O[new o.OverscaledTileID(g.overscaledZ,L,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<p&&(O[new o.OverscaledTileID(g.overscaledZ,b,u.z,_,u.y+1).key]={backfilled:!1},O[new o.OverscaledTileID(g.overscaledZ,g.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},O[new o.OverscaledTileID(g.overscaledZ,L,u.z,S,u.y+1).key]={backfilled:!1}),O}unloadTile(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded"}},geojson:class extends o.Evented{constructor(g,u,p,_){super(),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=p.getActor(),this.setEventedParent(_),this._data=u.data,this._options=o.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const b=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*b,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*b,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.EXTENT,radius:(u.clusterRadius!==void 0?u.clusterRadius:50)*b,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}onAdd(g){this.map=g,this.setData(this._data)}setData(g){return this._data=g,this._updateWorkerData(),this}getClusterExpansionZoom(g,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},u),this}getClusterChildren(g,u){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},u),this}getClusterLeaves(g,u,p,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:u,offset:p},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const g=o.extend({},this.workerOptions),u=this._data;typeof u=="string"?(g.request=this.map._requestManager.transformRequest(o.exported.resolveURL(u),o.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,g,(p,_)=>{if(this._loaded=!0,this._pendingLoad=null,p)this.fire(new o.ErrorEvent(p));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(b.resourceTiming=_.resourceTiming[this.id]),this.fire(new o.Event("data",b)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(g,u){const p=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(p,{type:this.type,uid:g.uid,tileID:g.tileID,tileZoom:g.tileZoom,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,b)=>(delete g.request,g.unloadVectorData(),g.aborted?u(null):_?u(_):(g.loadVectorData(b,this.map.painter,p==="reloadTile"),u(null))),void 0,p==="loadTile")}abortTile(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0}unloadTile(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ve{constructor(g,u,p,_){super(g,u,p,_),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const g=this.options;this.urls=[];for(const u of g.urls)this.urls.push(this.map._requestManager.transformRequest(u,o.ResourceType.Source).url);o.getVideo(this.urls,(u,p)=>{this._loaded=!0,u?this.fire(new o.ErrorEvent(u)):p&&(this.video=p,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(g){if(this.video){const u=this.video.seekable;g<u.start(0)||g>u.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=g}}getVideo(){return this.video}onAdd(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const g=this.map.painter.context,u=g.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(g,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(g)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ve,canvas:class extends Ve{constructor(g,u,p,_){super(g,u,p,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(S=>typeof S!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${g}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context;this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(u,this.canvas,u.gl.RGBA,{premultiply:!0}),this._prepareData(u)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const g of[this.canvas.width,this.canvas.height])if(isNaN(g)||g<=0)return!0;return!1}},custom:class extends o.Evented{constructor(g,u,p,_){super(),this.id=g,this.type="custom",this._dataType="raster",this._dispatcher=p,this._implementation=u,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new kn(this._implementation.bounds,this.minzoom,this.maxzoom)),u.update=this._update.bind(this),u.clearTiles=this._clearTiles.bind(this),u.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(u,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(g){this._map=g,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(g),this.load()}onRemove(g){this._implementation.onRemove&&this._implementation.onRemove(g)}hasTile(g){if(this._implementation.hasTile){const{x:u,y:p,z:_}=g.canonical;return this._implementation.hasTile({x:u,y:p,z:_})}return!this.tileBounds||this.tileBounds.contains(g.canonical)}loadTile(g,u){const{x:p,y:_,z:b}=g.tileID.canonical,S=new o.window.AbortController;g.request=Promise.resolve(this._implementation.loadTile({x:p,y:_,z:b},{signal:S.signal})).then(function(L){return delete g.request,g.aborted?(g.state="unloaded",u(null)):L===void 0?(g.state="errored",u(null)):L===null?(this.loadTileData(g,{width:this.tileSize,height:this.tileSize,data:null}),g.state="loaded",u(null)):function(O){return O instanceof o.window.ImageData||O instanceof o.window.HTMLCanvasElement||O instanceof o.window.ImageBitmap||O instanceof o.window.HTMLImageElement}(L)?(this.loadTileData(g,L),g.state="loaded",void u(null)):(g.state="errored",u(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(L=>{L.code!==20&&(g.state="errored",u(L))}),g.request.cancel=()=>S.abort()}loadTileData(g,u){oe.loadTileData(g,u,this._map.painter)}unloadTileData(g){oe.unloadTileData(g,this._map.painter)}unloadTile(g,u){if(this.unloadTileData(g),this._implementation.unloadTile){const{x:p,y:_,z:b}=g.tileID.canonical;this._implementation.unloadTile({x:p,y:_,z:b})}u()}abortTile(g,u){g.request&&g.request.cancel&&(g.request.cancel(),delete g.request),u()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(g=>({x:g.canonical.x,y:g.canonical.y,z:g.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ze=function(g,u,p,_){const b=new Xe[u.type](g,u,p,_);if(b.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${b.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],b),b};function He(g,u){const p=o.identity([]);return o.scale(p,p,[.5*g.width,.5*-g.height,1]),o.translate(p,p,[1,-1,0]),o.multiply(p,p,g.calculateProjMatrix(u.toUnwrapped())),Float32Array.from(p)}function Qe(g,u,p,_,b,S,L,O=!1){const W=g.tilesIn(_,L,O);W.sort(qt);const K=[];for(const ee of W)K.push({wrappedTileID:ee.tile.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(u,p,g._state,ee,b,S,He(g.transform,ee.tile.tileID),O)});const X=function(ee){const le={},de={};for(const pe of ee){const fe=pe.queryResults,me=pe.wrappedTileID,ae=de[me]=de[me]||{};for(const Se in fe){const Ce=fe[Se],ke=ae[Se]=ae[Se]||{},Fe=le[Se]=le[Se]||[];for(const ze of Ce)ke[ze.featureIndex]||(ke[ze.featureIndex]=!0,Fe.push(ze))}}return le}(K);for(const ee in X)X[ee].forEach(le=>{const de=le.feature,pe=de.layer;pe&&pe.type!=="background"&&pe.type!=="sky"&&(de.source=pe.source,pe["source-layer"]&&(de.sourceLayer=pe["source-layer"]),de.state=de.id!==void 0?g.getFeatureState(pe["source-layer"],de.id):{})});return X}function Tt(g,u){const p=g.getRenderableIds().map(S=>g.getTileByID(S)),_=[],b={};for(let S=0;S<p.length;S++){const L=p[S],O=L.tileID.canonical.key;b[O]||(b[O]=!0,L.querySourceFeatures(_,u))}return _}function qt(g,u){const p=g.tileID,_=u.tileID;return p.overscaledZ-_.overscaledZ||p.canonical.y-_.canonical.y||p.wrap-_.wrap||p.canonical.x-_.canonical.x}function Dt(){return Ac.workerClass!=null?new Ac.workerClass:new o.window.Worker(Ac.workerUrl)}const hn="mapboxgl_preloaded_worker_pool";class ln{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<ln.workerCount;)this.workers.push(new Dt);return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[hn]}numActive(){return Object.keys(this.active).length}}let sn;function vn(){return sn||(sn=new ln),sn}function An(g,u){const p={};for(const _ in g)_!=="ref"&&(p[_]=g[_]);return o.refProperties.forEach(_=>{_ in u&&(p[_]=u[_])}),p}function Qn(g){g=g.slice();const u=Object.create(null);for(let p=0;p<g.length;p++)u[g[p].id]=g[p];for(let p=0;p<g.length;p++)"ref"in g[p]&&(g[p]=An(g[p],u[g[p].ref]));return g}ln.workerCount=2;const pn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function ur(g,u,p){p.push({command:pn.addSource,args:[g,u[g]]})}function cr(g,u,p){u.push({command:pn.removeSource,args:[g]}),p[g]=!0}function Cs(g,u,p,_){cr(g,p,_),ur(g,u,p)}function ts(g,u,p){let _;for(_ in g[p])if(g[p].hasOwnProperty(_)&&_!=="data"&&!v(g[p][_],u[p][_]))return!1;for(_ in u[p])if(u[p].hasOwnProperty(_)&&_!=="data"&&!v(g[p][_],u[p][_]))return!1;return!0}function gt(g,u,p,_,b,S){let L;for(L in u=u||{},g=g||{})g.hasOwnProperty(L)&&(v(g[L],u[L])||p.push({command:S,args:[_,L,u[L],b]}));for(L in u)u.hasOwnProperty(L)&&!g.hasOwnProperty(L)&&(v(g[L],u[L])||p.push({command:S,args:[_,L,u[L],b]}))}function ns(g){return g.id}function si(g,u){return g[u.id]=u,g}class Ss{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=o.clamp(u,0,1);let p=1,_=this._distances[p];const b=u*this.paddedLength+this.padding;for(;_<b&&p<this._distances.length;)_=this._distances[++p];const S=p-1,L=this._distances[S],O=_-L,W=O>0?(b-L)/O:0;return this.points[S].mult(1-W).add(this.points[p].mult(W))}}class Yg{constructor(u,p,_){const b=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(u/_),this.yCellCount=Math.ceil(p/_);for(let L=0;L<this.xCellCount*this.yCellCount;L++)b.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,_,b,S){this._forEachCell(p,_,b,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(b),this.bboxes.push(S)}insertCircle(u,p,_,b){this._forEachCell(p-b,_-b,p+b,_+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(_),this.circles.push(b)}_insertBoxCell(u,p,_,b,S,L){this.boxCells[S].push(L)}_insertCircleCell(u,p,_,b,S,L){this.circleCells[S].push(L)}_query(u,p,_,b,S,L){if(_<0||u>this.width||b<0||p>this.height)return!S&&[];const O=[];if(u<=0&&p<=0&&this.width<=_&&this.height<=b){if(S)return!0;for(let W=0;W<this.boxKeys.length;W++)O.push({key:this.boxKeys[W],x1:this.bboxes[4*W],y1:this.bboxes[4*W+1],x2:this.bboxes[4*W+2],y2:this.bboxes[4*W+3]});for(let W=0;W<this.circleKeys.length;W++){const K=this.circles[3*W],X=this.circles[3*W+1],ee=this.circles[3*W+2];O.push({key:this.circleKeys[W],x1:K-ee,y1:X-ee,x2:K+ee,y2:X+ee})}return L?O.filter(L):O}return this._forEachCell(u,p,_,b,this._queryCell,O,{hitTest:S,seenUids:{box:{},circle:{}}},L),S?O.length>0:O}_queryCircle(u,p,_,b,S){const L=u-_,O=u+_,W=p-_,K=p+_;if(O<0||L>this.width||K<0||W>this.height)return!b&&[];const X=[];return this._forEachCell(L,W,O,K,this._queryCellCircle,X,{hitTest:b,circle:{x:u,y:p,radius:_},seenUids:{box:{},circle:{}}},S),b?X.length>0:X}query(u,p,_,b,S){return this._query(u,p,_,b,!1,S)}hitTest(u,p,_,b,S){return this._query(u,p,_,b,!0,S)}hitTestCircle(u,p,_,b){return this._queryCircle(u,p,_,!0,b)}_queryCell(u,p,_,b,S,L,O,W){const K=O.seenUids,X=this.boxCells[S];if(X!==null){const le=this.bboxes;for(const de of X)if(!K.box[de]){K.box[de]=!0;const pe=4*de;if(u<=le[pe+2]&&p<=le[pe+3]&&_>=le[pe+0]&&b>=le[pe+1]&&(!W||W(this.boxKeys[de]))){if(O.hitTest)return L.push(!0),!0;L.push({key:this.boxKeys[de],x1:le[pe],y1:le[pe+1],x2:le[pe+2],y2:le[pe+3]})}}}const ee=this.circleCells[S];if(ee!==null){const le=this.circles;for(const de of ee)if(!K.circle[de]){K.circle[de]=!0;const pe=3*de;if(this._circleAndRectCollide(le[pe],le[pe+1],le[pe+2],u,p,_,b)&&(!W||W(this.circleKeys[de]))){if(O.hitTest)return L.push(!0),!0;{const fe=le[pe],me=le[pe+1],ae=le[pe+2];L.push({key:this.circleKeys[de],x1:fe-ae,y1:me-ae,x2:fe+ae,y2:me+ae})}}}}}_queryCellCircle(u,p,_,b,S,L,O,W){const K=O.circle,X=O.seenUids,ee=this.boxCells[S];if(ee!==null){const de=this.bboxes;for(const pe of ee)if(!X.box[pe]){X.box[pe]=!0;const fe=4*pe;if(this._circleAndRectCollide(K.x,K.y,K.radius,de[fe+0],de[fe+1],de[fe+2],de[fe+3])&&(!W||W(this.boxKeys[pe])))return L.push(!0),!0}}const le=this.circleCells[S];if(le!==null){const de=this.circles;for(const pe of le)if(!X.circle[pe]){X.circle[pe]=!0;const fe=3*pe;if(this._circlesCollide(de[fe],de[fe+1],de[fe+2],K.x,K.y,K.radius)&&(!W||W(this.circleKeys[pe])))return L.push(!0),!0}}}_forEachCell(u,p,_,b,S,L,O,W){const K=this._convertToXCellCoord(u),X=this._convertToYCellCoord(p),ee=this._convertToXCellCoord(_),le=this._convertToYCellCoord(b);for(let de=K;de<=ee;de++)for(let pe=X;pe<=le;pe++)if(S.call(this,u,p,_,b,this.xCellCount*pe+de,L,O,W))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,_,b,S,L){const O=b-u,W=S-p,K=_+L;return K*K>O*O+W*W}_circleAndRectCollide(u,p,_,b,S,L,O){const W=(L-b)/2,K=Math.abs(u-(b+W));if(K>W+_)return!1;const X=(O-S)/2,ee=Math.abs(p-(S+X));if(ee>X+_)return!1;if(K<=W||ee<=X)return!0;const le=K-W,de=ee-X;return le*le+de*de<=_*_}}const Da=Math.tan(85*Math.PI/180);function jl(g,u,p,_,b,S,L){const O=o.create();if(p)if(S.name==="globe"){const W=o.calculateGlobeLabelMatrix(b,u);o.multiply(O,O,W)}else{const W=ie([],L);O[0]=W[0],O[1]=W[1],O[4]=W[2],O[5]=W[3],_||o.rotateZ(O,O,b.angle)}else o.multiply(O,b.labelPlaneMatrix,g);return O}function Jg(g,u,p,_,b,S,L){const O=jl(g,u,p,_,b,S,L);return S.name==="globe"&&p||(O[2]=O[6]=O[10]=O[14]=0),O}function Vl(g,u,p,_,b,S,L){if(p){if(S.name==="globe"){const O=jl(g,u,p,_,b,S,L);return o.invert(O,O),o.multiply(O,g,O),O}{const O=o.clone(g),W=o.identity([]);return W[0]=L[0],W[1]=L[1],W[4]=L[2],W[5]=L[3],o.multiply(O,O,W),_||o.rotateZ(O,O,-b.angle),O}}return b.glCoordMatrix}function Ut(g,u,p,_){const b=[g,u,p,1];p?o.transformMat4$1(b,b,_):Qg(b,b,_);const S=b[3];return b[0]/=S,b[1]/=S,b[2]/=S,b}function jn(g,u){return Math.min(.5+g/u*.5,1.5)}function Ln(g,u){const p=g[0]/g[3],_=g[1]/g[3];return p>=-u[0]&&p<=u[0]&&_>=-u[1]&&_<=u[1]}function Ra(g,u,p,_,b,S,L,O,W,K){const X=p.transform,ee=_?g.textSizeData:g.iconSizeData,le=o.evaluateSizeForZoom(ee,p.transform.zoom),de=X.projection.name==="globe",pe=[256/p.width*2+1,256/p.height*2+1],fe=_?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;fe.clear();let me=null;de&&(me=_?g.text.globeExtVertexArray:g.icon.globeExtVertexArray);const ae=g.lineVertexArray,Se=_?g.text.placedSymbolArray:g.icon.placedSymbolArray,Ce=p.transform.width/p.transform.height;let ke,Fe=!1;for(let ze=0;ze<Se.length;ze++){const $e=Se.get(ze),{numGlyphs:qe,writingMode:tt}=$e;if(tt!==o.WritingMode.vertical||Fe||ke===o.WritingMode.horizontal||(Fe=!0),ke=tt,($e.hidden||tt===o.WritingMode.vertical)&&!Fe){Er(qe,fe);continue}Fe=!1;const ot=new o.pointGeometry($e.tileAnchorX,$e.tileAnchorY);let{x:Ot,y:Je,z:wt}=X.projection.projectTilePoint(ot.x,ot.y,K.canonical);if(W){const[Tn,en,Xt]=W(ot);Ot+=Tn,Je+=en,wt+=Xt}const dt=[Ot,Je,wt,1];if(o.transformMat4$1(dt,dt,u),!Ln(dt,pe)){Er(qe,fe);continue}const At=jn(p.transform.cameraToCenterDistance,dt[3]),rt=o.evaluateSizeForFeature(ee,le,$e),Ge=L?rt/At:rt*At,at=Ut(Ot,Je,wt,b);if(at[3]<=0){Er(qe,fe);continue}let kt={};const It=L?null:W,rn=Qu($e,Ge,!1,O,u,b,S,g.glyphOffsetArray,ae,fe,me,at,ot,kt,Ce,It,X.projection,K,L);Fe=rn.useVertical,It&&rn.needsFlipping&&(kt={}),(rn.notEnoughRoom||Fe||rn.needsFlipping&&Qu($e,Ge,!0,O,u,b,S,g.glyphOffsetArray,ae,fe,me,at,ot,kt,Ce,It,X.projection,K,L).notEnoughRoom)&&Er(qe,fe)}_?(g.text.dynamicLayoutVertexBuffer.updateData(fe),me&&g.text.globeExtVertexBuffer.updateData(me)):(g.icon.dynamicLayoutVertexBuffer.updateData(fe),me&&g.icon.globeExtVertexBuffer.updateData(me))}function nl(g,u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe){const{lineStartIndex:me,glyphStartIndex:ae,segment:Se}=O,Ce=ae+O.numGlyphs,ke=me+O.lineLength,Fe=u.getoffsetX(ae),ze=u.getoffsetX(Ce-1),$e=ho(g*Fe,p,_,b,S,L,Se,me,ke,W,K,X,ee,le,!0,de,pe,fe);if(!$e)return null;const qe=ho(g*ze,p,_,b,S,L,Se,me,ke,W,K,X,ee,le,!0,de,pe,fe);return qe?{first:$e,last:qe}:null}function Pn(g,u,p,_){return g===o.WritingMode.horizontal&&Math.abs(_)>Math.abs(p)?{useVertical:!0}:g===o.WritingMode.vertical?_>0?{needsFlipping:!0}:null:u!==0&&function(b,S){return b===0||Math.abs(S/b)>Da}(p,_)?u===1?{needsFlipping:!0}:null:p<0?{needsFlipping:!0}:null}function Qu(g,u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe,me,ae,Se){const Ce=u/24,ke=g.lineOffsetX*Ce,Fe=g.lineOffsetY*Ce,{lineStartIndex:ze,glyphStartIndex:$e,numGlyphs:qe,segment:tt,writingMode:ot,flipState:Ot}=g,Je=ze+g.lineLength,wt=dt=>{if(X){const[at,kt,It]=dt.up,rn=K.length;o.updateGlobeVertexNormal(X,rn+0,at,kt,It),o.updateGlobeVertexNormal(X,rn+1,at,kt,It),o.updateGlobeVertexNormal(X,rn+2,at,kt,It),o.updateGlobeVertexNormal(X,rn+3,at,kt,It)}const[At,rt,Ge]=dt.point;o.addDynamicAttributes(K,At,rt,Ge,dt.angle)};if(qe>1){const dt=nl(Ce,O,ke,Fe,p,ee,le,g,W,S,de,fe,!1,me,ae,Se);if(!dt)return{notEnoughRoom:!0};if(_&&!p){let[At,rt,Ge]=dt.first.point,[at,kt,It]=dt.last.point;[At,rt]=Ut(At,rt,Ge,L),[at,kt]=Ut(at,kt,It,L);const rn=Pn(ot,Ot,(at-At)*pe,kt-rt);if(g.flipState=rn&&rn.needsFlipping?1:2,rn)return rn}wt(dt.first);for(let At=$e+1;At<$e+qe-1;At++){const rt=ho(Ce*O.getoffsetX(At),ke,Fe,p,ee,le,tt,ze,Je,W,S,de,fe,!1,!1,me,ae,Se);if(!rt)return K.length-=4*(At-$e),{notEnoughRoom:!0};wt(rt)}wt(dt.last)}else{if(_&&!p){const At=Ut(le.x,le.y,0,b),rt=ze+tt+1,Ge=new o.pointGeometry(W.getx(rt),W.gety(rt)),at=Ut(Ge.x,Ge.y,0,b),kt=at[3]>0?at:Hl(le,Ge,At,1,b,void 0,me,ae.canonical),It=Pn(ot,Ot,(kt[0]-At[0])*pe,kt[1]-At[1]);if(g.flipState=It&&It.needsFlipping?1:2,It)return It}const dt=ho(Ce*O.getoffsetX($e),ke,Fe,p,ee,le,tt,ze,Je,W,S,de,fe,!1,!1,me,ae,Se);if(!dt)return{notEnoughRoom:!0};wt(dt)}return{}}function $l(g,u,p,_,b){const{x:S,y:L,z:O}=_.projectTilePoint(g.x,g.y,u);if(!b)return Ut(S,L,O,p);const[W,K,X]=b(g);return Ut(S+W,L+K,O+X,p)}function Hl(g,u,p,_,b,S,L,O){const W=$l(g.sub(u)._unit()._add(g),O,b,L,S);return o.sub(W,p,W),o.normalize(W,W),o.scaleAndAdd(W,p,W,_)}function ho(g,u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe,me,ae){const Se=_?g-u:g+u;let Ce=Se>0?1:-1,ke=0;_&&(Ce*=-1,ke=Math.PI),Ce<0&&(ke+=Math.PI);let Fe=O+L+(Ce>0?0:1)|0,ze=b,$e=b,qe=0,tt=0;const ot=Math.abs(Se),Ot=[],Je=[];let wt=S,dt=wt;const At=()=>Hl(dt,wt,$e,ot-qe+1,X,le,fe,me.canonical);for(;qe+tt<=ot;){if(Fe+=Ce,Fe<O||Fe>=W)return null;if($e=ze,dt=wt,Ot.push($e),de&&Je.push(dt),wt=new o.pointGeometry(K.getx(Fe),K.gety(Fe)),ze=ee[Fe],!ze){const Xt=$l(wt,me.canonical,X,fe,le);ze=Xt[3]>0?ee[Fe]=Xt:At()}qe+=tt,tt=o.distance($e,ze)}pe&&le&&(ee[Fe]&&(ze=At(),tt=o.distance($e,ze)),ee[Fe]=ze);const rt=(ot-qe)/tt,Ge=wt.sub(dt)._mult(rt)._add(dt),at=o.sub([],ze,$e),kt=o.scaleAndAdd([],$e,at,rt);let It=[0,0,1],rn=at[0],Tn=at[1];if(ae&&(It=fe.upVector(me.canonical,Ge.x,Ge.y),It[0]!==0||It[1]!==0||It[2]!==1)){const Xt=[It[2],0,-It[0]],an=o.cross([],It,Xt);o.normalize(Xt,Xt),o.normalize(an,an),rn=o.dot(at,Xt),Tn=o.dot(at,an)}if(p){const Xt=o.cross([],It,at);o.normalize(Xt,Xt),o.scaleAndAdd(kt,kt,Xt,p*Ce)}const en=ke+Math.atan2(Tn,rn);return Ot.push(kt),de&&Je.push(Ge),{point:kt,angle:en,path:Ot,tilePath:Je,up:It}}function Er(g,u){const p=u.length,_=p+4*g;u.resize(_),u.float32.fill(-1/0,4*p,4*_)}function Qg(g,u,p){const _=u[0],b=u[1];return g[0]=p[0]*_+p[4]*b+p[12],g[1]=p[1]*_+p[5]*b+p[13],g[3]=p[3]*_+p[7]*b+p[15],g}const Co=100;class $p{constructor(u,p,_=new Yg(u.width+200,u.height+200,25),b=new Yg(u.width+200,u.height+200,25)){this.transform=u,this.grid=_,this.ignoredGrid=b,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Co,this.screenBottomBoundary=u.height+Co,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.fogState=p}placeCollisionBox(u,p,_,b,S,L,O,W){let K=_.projectedAnchorX,X=_.projectedAnchorY,ee=_.projectedAnchorZ;const le=_.elevation,de=_.tileID,pe=u.getProjection();if(le&&de){const[ze,$e,qe]=pe.upVector(de.canonical,_.tileAnchorX,_.tileAnchorY),tt=pe.upVectorScale(de.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;K+=ze*le*tt,X+=$e*le*tt,ee+=qe*le*tt}const fe=this.projectAndGetPerspectiveRatio(O,K,X,ee,_.tileID,pe.name==="globe"||!!le||this.transform.pitch>0,pe),me=L*fe.perspectiveRatio,ae=(_.x1*p+b.x-_.padding)*me+fe.point.x,Se=(_.y1*p+b.y-_.padding)*me+fe.point.y,Ce=(_.x2*p+b.x+_.padding)*me+fe.point.x,ke=(_.y2*p+b.y+_.padding)*me+fe.point.y,Fe=fe.perspectiveRatio<=.55||fe.occluded;return!this.isInsideGrid(ae,Se,Ce,ke)||!S&&this.grid.hitTest(ae,Se,Ce,ke,W)||Fe?{box:[],offscreen:!1,occluded:fe.occluded}:{box:[ae,Se,Ce,ke],offscreen:this.isOffscreen(ae,Se,Ce,ke),occluded:!1}}placeCollisionCircles(u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe){const me=[],ae=this.transform.elevation,Se=u.getProjection(),Ce=ae?ae.getAtTileOffsetFunc(fe,this.transform.center.lat,this.transform.worldSize,Se):null,ke=new o.pointGeometry(_.tileAnchorX,_.tileAnchorY);let{x:Fe,y:ze,z:$e}=Se.projectTilePoint(ke.x,ke.y,fe.canonical);if(Ce){const[Ge,at,kt]=Ce(ke);Fe+=Ge,ze+=at,$e+=kt}const qe=Se.name==="globe",tt=this.projectAndGetPerspectiveRatio(O,Fe,ze,$e,fe,qe||!!ae||this.transform.pitch>0,Se),{perspectiveRatio:ot}=tt,Ot=(ee?L/ot:L*ot)/o.ONE_EM,Je=Ut(Fe,ze,$e,W),wt=tt.signedDistanceFromCamera>0?nl(Ot,S,_.lineOffsetX*Ot,_.lineOffsetY*Ot,!1,Je,ke,_,b,W,{},ae&&!ee?Ce:null,ee&&!!ae,Se,fe,ee):null;let dt=!1,At=!1,rt=!0;if(wt&&!tt.occluded){const Ge=.5*de*ot+pe,at=new o.pointGeometry(-100,-100),kt=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),It=new Ss,{first:rn,last:Tn}=wt,en=rn.path.length;let Xt=[];for(let un=en-1;un>=1;un--)Xt.push(rn.path[un]);for(let un=1;un<Tn.path.length;un++)Xt.push(Tn.path[un]);const an=2.5*Ge;K&&(Xt=Xt.map(([un,nr,ir],Cr)=>(Ce&&!qe&&(ir=Ce(Cr<en-1?rn.tilePath[en-1-Cr]:Tn.tilePath[Cr-en+2])[2]),Ut(un,nr,ir,K))),Xt.some(un=>un[3]<=0)&&(Xt=[]));let On=[];if(Xt.length>0){let un=1/0,nr=-1/0,ir=1/0,Cr=-1/0;for(const gr of Xt)un=Math.min(un,gr[0]),ir=Math.min(ir,gr[1]),nr=Math.max(nr,gr[0]),Cr=Math.max(Cr,gr[1]);nr>=at.x&&un<=kt.x&&Cr>=at.y&&ir<=kt.y&&(On=[Xt.map(gr=>new o.pointGeometry(gr[0],gr[1]))],(un<at.x||nr>kt.x||ir<at.y||Cr>kt.y)&&(On=o.clipLine(On,at.x,at.y,kt.x,kt.y)))}for(const un of On){It.reset(un,.25*Ge);let nr=0;nr=It.length<=.5*Ge?1:Math.ceil(It.paddedLength/an)+1;for(let ir=0;ir<nr;ir++){const Cr=ir/Math.max(nr-1,1),gr=It.lerp(Cr),li=gr.x+Co,To=gr.y+Co;me.push(li,To,Ge,0);const fa=li-Ge,as=To-Ge,zr=li+Ge,yr=To+Ge;if(rt=rt&&this.isOffscreen(fa,as,zr,yr),At=At||this.isInsideGrid(fa,as,zr,yr),!p&&this.grid.hitTestCircle(li,To,Ge,le)&&(dt=!0,!X))return{circles:[],offscreen:!1,collisionDetected:dt,occluded:!1}}}}return{circles:!X&&dt||!At?[]:me,offscreen:rt,collisionDetected:dt,occluded:tt.occluded}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let _=1/0,b=1/0,S=-1/0,L=-1/0;for(const X of u){const ee=new o.pointGeometry(X.x+Co,X.y+Co);_=Math.min(_,ee.x),b=Math.min(b,ee.y),S=Math.max(S,ee.x),L=Math.max(L,ee.y),p.push(ee)}const O=this.grid.query(_,b,S,L).concat(this.ignoredGrid.query(_,b,S,L)),W={},K={};for(const X of O){const ee=X.key;if(W[ee.bucketInstanceId]===void 0&&(W[ee.bucketInstanceId]={}),W[ee.bucketInstanceId][ee.featureIndex])continue;const le=[new o.pointGeometry(X.x1,X.y1),new o.pointGeometry(X.x2,X.y1),new o.pointGeometry(X.x2,X.y2),new o.pointGeometry(X.x1,X.y2)];o.polygonIntersectsPolygon(p,le)&&(W[ee.bucketInstanceId][ee.featureIndex]=!0,K[ee.bucketInstanceId]===void 0&&(K[ee.bucketInstanceId]=[]),K[ee.bucketInstanceId].push(ee.featureIndex))}return K}insertCollisionBox(u,p,_,b,S){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:b,collisionGroupID:S},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,_,b,S){const L=p?this.ignoredGrid:this.grid,O={bucketInstanceId:_,featureIndex:b,collisionGroupID:S};for(let W=0;W<u.length;W+=4)L.insertCircle(O,u[W],u[W+1],u[W+2])}projectAndGetPerspectiveRatio(u,p,_,b,S,L,O){const W=[p,_,b,1];let K=!1;if(b||this.transform.pitch>0){o.transformMat4$1(W,W,u);const ee=O.name==="globe";this.fogState&&S&&!ee&&(K=function(de,pe,fe,me,ae,Se){const Ce=Se.calculateFogTileMatrix(ae),ke=[pe,fe,me];return o.transformMat4(ke,ke,Ce),We(de,ke,Se.pitch,Se._fov)}(this.fogState,p,_,b,S.toUnwrapped(),this.transform)>.9)}else Qg(W,W,u);const X=W[3];return{point:new o.pointGeometry((W[0]/X+1)/2*this.transform.width+Co,(-W[1]/X+1)/2*this.transform.height+Co),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(O)/X*.5,1.5),signedDistanceFromCamera:X,occluded:L&&W[2]>X||K}}isOffscreen(u,p,_,b){return _<Co||u>=this.screenRightBoundary||b<Co||p>this.screenBottomBoundary}isInsideGrid(u,p,_,b){return _>=0&&u<this.gridRightBoundary&&b>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=o.identity([]);return o.translate(u,u,[-100,-100,0]),u}}function rl(g,u,p){const _=u.createTileMatrix(g,g.worldSize,p.toUnwrapped());return o.multiply(new Float32Array(16),g.projMatrix,_)}function Hp(g,u,p){if(u.projection.name===p.projection.name)return g.projMatrix;const _=p.clone();return _.setProjection(u.projection),rl(_,u.getProjection(),g)}function Ah(g,u,p){return u.name===p.projection.name?g.projMatrix:rl(p,u,g)}class ec{constructor(u,p,_,b){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):b&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class il{constructor(u,p,_,b,S,L=!1){this.text=new ec(u?u.text:null,p,_,S),this.icon=new ec(u?u.icon:null,p,b,S),this.clipped=L}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Wl{constructor(u,p,_,b=!1){this.text=u,this.icon=p,this.skipFade=_,this.clipped=b}}class Wp{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class So{constructor(u,p,_,b,S){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=_,this.bucketIndex=b,this.tileID=S}}class Qr{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:_=>_.collisionGroupID===p}}return this.collisionGroups[u]}}function Mh(g,u,p,_,b){const{horizontalAlign:S,verticalAlign:L}=o.getAnchorAlignment(g),O=-(S-.5)*u,W=-(L-.5)*p,K=o.evaluateVariableOffset(g,_);return new o.pointGeometry(O+K[0]*b,W+K[1]*b)}function tc(g,u,p,_,b){const S=new o.pointGeometry(g,u);return p&&S._rotate(_?b:-b),S}class ko{constructor(u,p,_,b,S){this.transform=u.clone(),this.projection=u.projection.name,this.collisionIndex=new $p(this.transform,S),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Qr(_),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,p,_,b){const S=_.getBucket(p),L=_.latestFeatureIndex;if(!S||!L||p.id!==S.layerIds[0])return;const O=S.layers[0].layout,W=_.collisionBoxArray,K=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),X=_.tileSize/o.EXTENT,ee=_.tileID.toUnwrapped();this.transform.setProjection(S.projection);const le=(de=_.tileID,pe=S.getProjection(),fe=this.transform,pe.name===this.projection?fe.calculateProjMatrix(de.toUnwrapped()):rl(fe,pe,de));var de,pe,fe;const me=O.get("text-pitch-alignment")==="map",ae=O.get("text-rotation-alignment")==="map";p.compileFilter();const Se=p.dynamicFilter(),Ce=p.dynamicFilterNeedsFeature(),ke=this.transform.calculatePixelsToTileUnitsMatrix(_),Fe=Jg(le,_.tileID.canonical,me,ae,this.transform,S.getProjection(),ke);let ze=null;if(me){const tt=Vl(le,_.tileID.canonical,me,ae,this.transform,S.getProjection(),ke);ze=o.multiply([],this.transform.labelPlaneMatrix,tt)}let $e=null;Se&&_.latestFeatureIndex&&($e={unwrappedTileID:ee,dynamicFilter:Se,dynamicFilterNeedsFeature:Ce,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[S.bucketInstanceId]=new So(S.bucketInstanceId,L,S.sourceLayerIndex,S.index,_.tileID);const qe={bucket:S,layout:O,posMatrix:le,textLabelPlaneMatrix:Fe,labelToScreenMatrix:ze,clippingData:$e,scale:K,textPixelRatio:X,holdingForFade:_.holdingForFade(),collisionBoxArray:W,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(S.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(b)for(const tt of S.sortKeyRanges){const{sortKey:ot,symbolInstanceStart:Ot,symbolInstanceEnd:Je}=tt;u.push({sortKey:ot,symbolInstanceStart:Ot,symbolInstanceEnd:Je,parameters:qe})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:qe})}attemptAnchorPlacement(u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe,me,ae,Se){const{textOffset0:Ce,textOffset1:ke,crossTileID:Fe}=le,ze=[Ce,ke],$e=Mh(u,_,b,ze,S),qe=this.collisionIndex.placeCollisionBox(pe,S,p,tc($e.x,$e.y,L,O,this.transform.angle),ee,W,K,X.predicate);if(me){const tt=pe.getSymbolInstanceIconSize(Se,this.transform.zoom,le.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(pe,tt,me,tc($e.x,$e.y,L,O,this.transform.angle),ee,W,K,X.predicate).box.length===0)return}if(qe.box.length>0){let tt;return this.prevPlacement&&this.prevPlacement.variableOffsets[Fe]&&this.prevPlacement.placements[Fe]&&this.prevPlacement.placements[Fe].text&&(tt=this.prevPlacement.variableOffsets[Fe].anchor),this.variableOffsets[Fe]={textOffset:ze,width:_,height:b,anchor:u,textScale:S,prevAnchor:tt},this.markUsedJustification(pe,u,le,fe),pe.allowVerticalPlacement&&(this.markUsedOrientation(pe,fe,le),this.placedOrientations[Fe]=fe),{shift:$e,placedGlyphBoxes:qe}}}placeLayerBucketPart(u,p,_,b){const{bucket:S,layout:L,posMatrix:O,textLabelPlaneMatrix:W,labelToScreenMatrix:K,clippingData:X,textPixelRatio:ee,holdingForFade:le,collisionBoxArray:de,partiallyEvaluatedTextSize:pe,partiallyEvaluatedIconSize:fe,collisionGroup:me}=u.parameters,ae=L.get("text-optional"),Se=L.get("icon-optional"),Ce=L.get("text-allow-overlap"),ke=L.get("icon-allow-overlap"),Fe=L.get("text-rotation-alignment")==="map",ze=L.get("text-pitch-alignment")==="map",$e=L.get("icon-text-fit")!=="none",qe=L.get("symbol-z-order")==="viewport-y";this.transform.setProjection(S.projection);let tt=Ce&&(ke||!S.hasIconData()||Se),ot=ke&&(Ce||!S.hasTextData()||ae);!S.collisionArrays&&de&&S.deserializeCollisionBoxes(de),_&&b&&S.updateCollisionDebugBuffers(this.transform.zoom,de);const Ot=(Je,wt,dt)=>{const{crossTileID:At,numVerticalGlyphVertices:rt}=Je;if(X){const zr={zoom:this.transform.zoom,pitch:this.transform.pitch};let yr=null;if(X.dynamicFilterNeedsFeature){const Kn=this.retainedQueryData[S.bucketInstanceId];yr=X.featureIndex.loadFeature({featureIndex:Je.featureIndex,bucketIndex:Kn.bucketIndex,sourceLayerIndex:Kn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,X.dynamicFilter)(zr,yr,this.retainedQueryData[S.bucketInstanceId].tileID.canonical,new o.pointGeometry(Je.tileAnchorX,Je.tileAnchorY),this.transform.calculateDistanceTileData(X.unwrappedTileID)))return this.placements[At]=new Wl(!1,!1,!1,!0),void(p[At]=!0)}if(p[At])return;if(le)return void(this.placements[At]=new Wl(!1,!1,!1));let Ge=!1,at=!1,kt=!0,It=!1,rn=!1,Tn=null,en={box:null,offscreen:null,occluded:null},Xt={box:null,offscreen:null,occluded:null},an=null,On=null,un=null,nr=0,ir=0,Cr=0;dt.textFeatureIndex?nr=dt.textFeatureIndex:Je.useRuntimeCollisionCircles&&(nr=Je.featureIndex),dt.verticalTextFeatureIndex&&(ir=dt.verticalTextFeatureIndex);const gr=zr=>{zr.tileID=this.retainedQueryData[S.bucketInstanceId].tileID;const yr=this.transform.elevation;(yr||zr.elevation)&&(zr.elevation=yr?yr.getAtTileOffset(zr.tileID,zr.tileAnchorX,zr.tileAnchorY):0)},li=dt.textBox;if(li){gr(li);const zr=Kn=>{let qr=o.WritingMode.horizontal;if(S.allowVerticalPlacement&&!Kn&&this.prevPlacement){const Yi=this.prevPlacement.placedOrientations[At];Yi&&(this.placedOrientations[At]=Yi,qr=Yi,this.markUsedOrientation(S,qr,Je))}return qr},yr=(Kn,qr)=>{if(S.allowVerticalPlacement&&rt>0&&dt.verticalTextBox){for(const Yi of S.writingModes)if(Yi===o.WritingMode.vertical?(en=qr(),Xt=en):en=Kn(),en&&en.box&&en.box.length)break}else en=Kn()};if(L.get("text-variable-anchor")){let Kn=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[At]){const Pr=this.prevPlacement.variableOffsets[At];Kn.indexOf(Pr.anchor)>0&&(Kn=Kn.filter(Ji=>Ji!==Pr.anchor),Kn.unshift(Pr.anchor))}const qr=(Pr,Ji,Qi)=>{const Is=S.getSymbolInstanceTextSize(pe,Je,this.transform.zoom,wt),su=(Pr.x2-Pr.x1)*Is+2*Pr.padding,jo=(Pr.y2-Pr.y1)*Is+2*Pr.padding,Qo=$e&&!ke?Ji:null;Qo&&gr(Qo);let ss={box:[],offscreen:!1,occluded:!1};const Ps=Ce?2*Kn.length:Kn.length;for(let Ds=0;Ds<Ps;++Ds){const lu=this.attemptAnchorPlacement(Kn[Ds%Kn.length],Pr,su,jo,Is,Fe,ze,ee,O,me,Ds>=Kn.length,Je,wt,S,Qi,Qo,pe,fe);if(lu&&(ss=lu.placedGlyphBoxes,ss&&ss.box&&ss.box.length)){Ge=!0,Tn=lu.shift;break}}return ss};yr(()=>qr(li,dt.iconBox,o.WritingMode.horizontal),()=>{const Pr=dt.verticalTextBox;return Pr&&gr(Pr),S.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&rt>0&&Pr?qr(Pr,dt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),en&&(Ge=en.box,kt=en.offscreen,It=en.occluded);const Yi=zr(en&&en.box);if(!Ge&&this.prevPlacement){const Pr=this.prevPlacement.variableOffsets[At];Pr&&(this.variableOffsets[At]=Pr,this.markUsedJustification(S,Pr.anchor,Je,Yi))}}else{const Kn=(qr,Yi)=>{const Pr=S.getSymbolInstanceTextSize(pe,Je,this.transform.zoom,wt),Ji=this.collisionIndex.placeCollisionBox(S,Pr,qr,new o.pointGeometry(0,0),Ce,ee,O,me.predicate);return Ji&&Ji.box&&Ji.box.length&&(this.markUsedOrientation(S,Yi,Je),this.placedOrientations[At]=Yi),Ji};yr(()=>Kn(li,o.WritingMode.horizontal),()=>{const qr=dt.verticalTextBox;return S.allowVerticalPlacement&&rt>0&&qr?(gr(qr),Kn(qr,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),zr(en&&en.box&&en.box.length)}}if(an=en,Ge=an&&an.box&&an.box.length>0,kt=an&&an.offscreen,It=an&&an.occluded,Je.useRuntimeCollisionCircles){const zr=S.text.placedSymbolArray.get(Je.centerJustifiedTextSymbolIndex>=0?Je.centerJustifiedTextSymbolIndex:Je.verticalPlacedTextSymbolIndex),yr=o.evaluateSizeForFeature(S.textSizeData,pe,zr),Kn=L.get("text-padding");On=this.collisionIndex.placeCollisionCircles(S,Ce,zr,S.lineVertexArray,S.glyphOffsetArray,yr,O,W,K,_,ze,me.predicate,Je.collisionCircleDiameter*yr/o.ONE_EM,Kn,this.retainedQueryData[S.bucketInstanceId].tileID),Ge=Ce||On.circles.length>0&&!On.collisionDetected,kt=kt&&On.offscreen,It=On.occluded}if(dt.iconFeatureIndex&&(Cr=dt.iconFeatureIndex),dt.iconBox){const zr=yr=>{gr(yr);const Kn=$e&&Tn?tc(Tn.x,Tn.y,Fe,ze,this.transform.angle):new o.pointGeometry(0,0),qr=S.getSymbolInstanceIconSize(fe,this.transform.zoom,Je.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(S,qr,yr,Kn,ke,ee,O,me.predicate)};Xt&&Xt.box&&Xt.box.length&&dt.verticalIconBox?(un=zr(dt.verticalIconBox),at=un.box.length>0):(un=zr(dt.iconBox),at=un.box.length>0),kt=kt&&un.offscreen,rn=un.occluded}const To=ae||Je.numHorizontalGlyphVertices===0&&rt===0,fa=Se||Je.numIconVertices===0;if(To||fa?fa?To||(at=at&&Ge):Ge=at&&Ge:at=Ge=at&&Ge,Ge&&an&&an.box&&this.collisionIndex.insertCollisionBox(an.box,L.get("text-ignore-placement"),S.bucketInstanceId,Xt&&Xt.box&&ir?ir:nr,me.ID),at&&un&&this.collisionIndex.insertCollisionBox(un.box,L.get("icon-ignore-placement"),S.bucketInstanceId,Cr,me.ID),On&&(Ge&&this.collisionIndex.insertCollisionCircles(On.circles,L.get("text-ignore-placement"),S.bucketInstanceId,nr,me.ID),_)){const zr=S.bucketInstanceId;let yr=this.collisionCircleArrays[zr];yr===void 0&&(yr=this.collisionCircleArrays[zr]=new Wp);for(let Kn=0;Kn<On.circles.length;Kn+=4)yr.circles.push(On.circles[Kn+0]),yr.circles.push(On.circles[Kn+1]),yr.circles.push(On.circles[Kn+2]),yr.circles.push(On.collisionDetected?1:0)}const as=S.projection.name!=="globe";tt=tt&&(as||!It),ot=ot&&(as||!rn),this.placements[At]=new Wl(Ge||tt,at||ot,kt||S.justReloaded),p[At]=!0};if(qe){const Je=S.getSortedSymbolIndexes(this.transform.angle);for(let wt=Je.length-1;wt>=0;--wt){const dt=Je[wt];Ot(S.symbolInstances.get(dt),dt,S.collisionArrays[dt])}}else for(let Je=u.symbolInstanceStart;Je<u.symbolInstanceEnd;Je++)Ot(S.symbolInstances.get(Je),Je,S.collisionArrays[Je]);if(_&&S.bucketInstanceId in this.collisionCircleArrays){const Je=this.collisionCircleArrays[S.bucketInstanceId];o.invert(Je.invProjMatrix,O),Je.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(u,p,_,b){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:W,crossTileID:K}=_,X=o.getAnchorJustification(p),ee=b===o.WritingMode.vertical?W:X==="left"?S:X==="center"?L:X==="right"?O:-1;S>=0&&(u.text.placedSymbolArray.get(S).crossTileID=ee>=0&&S!==ee?0:K),L>=0&&(u.text.placedSymbolArray.get(L).crossTileID=ee>=0&&L!==ee?0:K),O>=0&&(u.text.placedSymbolArray.get(O).crossTileID=ee>=0&&O!==ee?0:K),W>=0&&(u.text.placedSymbolArray.get(W).crossTileID=ee>=0&&W!==ee?0:K)}markUsedOrientation(u,p,_){const b=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,S=p===o.WritingMode.vertical?p:0,{leftJustifiedTextSymbolIndex:L,centerJustifiedTextSymbolIndex:O,rightJustifiedTextSymbolIndex:W,verticalPlacedTextSymbolIndex:K}=_,X=u.text.placedSymbolArray;L>=0&&(X.get(L).placedOrientation=b),O>=0&&(X.get(O).placedOrientation=b),W>=0&&(X.get(W).placedOrientation=b),K>=0&&(X.get(K).placedOrientation=S)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let _=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const b=p?p.symbolFadeChange(u):1,S=p?p.opacities:{},L=p?p.variableOffsets:{},O=p?p.placedOrientations:{};for(const W in this.placements){const K=this.placements[W],X=S[W];X?(this.opacities[W]=new il(X,b,K.text,K.icon,null,K.clipped),_=_||K.text!==X.text.placed||K.icon!==X.icon.placed):(this.opacities[W]=new il(null,b,K.text,K.icon,K.skipFade,K.clipped),_=_||K.text||K.icon)}for(const W in S){const K=S[W];if(!this.opacities[W]){const X=new il(K,b,!1,!1);X.isHidden()||(this.opacities[W]=X,_=_||K.text.placed||K.icon.placed)}}for(const W in L)this.variableOffsets[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.variableOffsets[W]=L[W]);for(const W in O)this.placedOrientations[W]||!this.opacities[W]||this.opacities[W].isHidden()||(this.placedOrientations[W]=O[W]);_?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const _={};for(const b of p){const S=b.getBucket(u);S&&b.latestFeatureIndex&&u.id===S.layerIds[0]&&this.updateBucketOpacities(S,_,b.collisionBoxArray)}}updateBucketOpacities(u,p,_){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const b=u.layers[0].layout,S=!!u.layers[0].dynamicFilter(),L=new il(null,0,!1,!1,!0),O=b.get("text-allow-overlap"),W=b.get("icon-allow-overlap"),K=b.get("text-variable-anchor"),X=b.get("text-rotation-alignment")==="map",ee=b.get("text-pitch-alignment")==="map",le=b.get("icon-text-fit")!=="none",de=new il(null,0,O&&(W||!u.hasIconData()||b.get("icon-optional")),W&&(O||!u.hasTextData()||b.get("text-optional")),!0);!u.collisionArrays&&_&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(_);const pe=(me,ae,Se)=>{for(let Ce=0;Ce<ae/4;Ce++)me.opacityVertexArray.emplaceBack(Se)};let fe=0;for(let me=0;me<u.symbolInstances.length;me++){const ae=u.symbolInstances.get(me),{numHorizontalGlyphVertices:Se,numVerticalGlyphVertices:Ce,crossTileID:ke,numIconVertices:Fe}=ae;let ze=this.opacities[ke];p[ke]?ze=L:ze||(ze=de,this.opacities[ke]=ze),p[ke]=!0;const $e=Se>0||Ce>0,qe=Fe>0,tt=this.placedOrientations[ke],ot=tt===o.WritingMode.vertical,Ot=tt===o.WritingMode.horizontal||tt===o.WritingMode.horizontalOnly;if(!$e&&!qe||ze.isHidden()||fe++,$e){const Je=Ph(ze.text);pe(u.text,Se,ot?Gl:Je),pe(u.text,Ce,Ot?Gl:Je);const wt=ze.text.isHidden(),{leftJustifiedTextSymbolIndex:dt,centerJustifiedTextSymbolIndex:At,rightJustifiedTextSymbolIndex:rt,verticalPlacedTextSymbolIndex:Ge}=ae,at=u.text.placedSymbolArray,kt=wt||ot?1:0;dt>=0&&(at.get(dt).hidden=kt),At>=0&&(at.get(At).hidden=kt),rt>=0&&(at.get(rt).hidden=kt),Ge>=0&&(at.get(Ge).hidden=wt||Ot?1:0);const It=this.variableOffsets[ke];It&&this.markUsedJustification(u,It.anchor,ae,tt);const rn=this.placedOrientations[ke];rn&&(this.markUsedJustification(u,"left",ae,rn),this.markUsedOrientation(u,rn,ae))}if(qe){const Je=Ph(ze.icon),{placedIconSymbolIndex:wt,verticalPlacedIconSymbolIndex:dt}=ae,At=u.icon.placedSymbolArray,rt=ze.icon.isHidden()?1:0;wt>=0&&(pe(u.icon,Fe,ot?Gl:Je),At.get(wt).hidden=rt),dt>=0&&(pe(u.icon,ae.numVerticalIconVertices,Ot?Gl:Je),At.get(dt).hidden=rt)}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const Je=u.collisionArrays[me];if(Je){let wt=new o.pointGeometry(0,0),dt=!0;if(Je.textBox||Je.verticalTextBox){if(K){const rt=this.variableOffsets[ke];rt?(wt=Mh(rt.anchor,rt.width,rt.height,rt.textOffset,rt.textScale),X&&wt._rotate(ee?this.transform.angle:-this.transform.angle)):dt=!1}S&&(dt=!ze.clipped),Je.textBox&&po(u.textCollisionBox.collisionVertexArray,ze.text.placed,!dt||ot,wt.x,wt.y),Je.verticalTextBox&&po(u.textCollisionBox.collisionVertexArray,ze.text.placed,!dt||Ot,wt.x,wt.y)}const At=dt&&Boolean(!Ot&&Je.verticalIconBox);Je.iconBox&&po(u.iconCollisionBox.collisionVertexArray,ze.icon.placed,At,le?wt.x:0,le?wt.y:0),Je.verticalIconBox&&po(u.iconCollisionBox.collisionVertexArray,ze.icon.placed,!At,le?wt.x:0,le?wt.y:0)}}}if(u.fullyClipped=fe===0,u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=me.invProjMatrix,u.placementViewportMatrix=me.viewportMatrix,u.collisionCircleArray=me.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const _=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*_>u}setStale(){this.stale=!0}}function po(g,u,p,_,b){g.emplaceBack(u?1:0,p?1:0,_||0,b||0),g.emplaceBack(u?1:0,p?1:0,_||0,b||0),g.emplaceBack(u?1:0,p?1:0,_||0,b||0),g.emplaceBack(u?1:0,p?1:0,_||0,b||0)}const ey=Math.pow(2,25),Ih=Math.pow(2,24),_i=Math.pow(2,17),nc=Math.pow(2,16),Gp=Math.pow(2,9),rc=Math.pow(2,8),Ni=Math.pow(2,1);function Ph(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const u=g.placed?1:0,p=Math.floor(127*g.opacity);return p*ey+u*Ih+p*_i+u*nc+p*Gp+u*rc+p*Ni+u}const Gl=0;class rs{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,_,b,S){const L=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(L,b,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((O,W)=>O.sortKey-W.sortKey));this._currentPartIndex<L.length;){const O=L[this._currentPartIndex];if(p.placeLayerBucketPart(O,this._seenCrossTileIDs,_,O.symbolInstanceStart===0),this._currentPartIndex++,S())return!0}return!1}}class ic{constructor(u,p,_,b,S,L,O,W){this.placement=new ko(u,S,L,O,W),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(u,p,_){const b=o.exported.now(),S=()=>{const L=o.exported.now()-b;return!this._forceFullPlacement&&L>2};for(;this._currentPlacementIndex>=0;){const L=p[u[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=O)&&(!L.maxzoom||L.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new rs(L)),this._inProgressLayer.continuePlacement(_[L.source],this.placement,this._showCollisionBoxes,L,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Dh=512/o.EXTENT/2;class e1{constructor(u,p,_){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let b=0;b<p.length;b++){const S=p.get(b),L=S.key;this.indexedSymbolInstances[L]||(this.indexedSymbolInstances[L]=[]),this.indexedSymbolInstances[L].push({crossTileID:S.crossTileID,coord:this.getScaledCoordinates(S,u)})}}getScaledCoordinates(u,p){const _=Dh/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+u.tileAnchorX)*_),y:Math.floor((p.canonical.y*o.EXTENT+u.tileAnchorY)*_)}}findMatches(u,p,_){const b=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let S=0;S<u.length;S++){const L=u.get(S);if(L.crossTileID)continue;const O=this.indexedSymbolInstances[L.key];if(!O)continue;const W=this.getScaledCoordinates(L,p);for(const K of O)if(Math.abs(K.coord.x-W.x)<=b&&Math.abs(K.coord.y-W.y)<=b&&!_[K.crossTileID]){_[K.crossTileID]=!0,L.crossTileID=K.crossTileID;break}}}}class qp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ql{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const _ in this.indexes){const b=this.indexes[_],S={};for(const L in b){const O=b[L];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+p),S[O.tileID.key]=O}this.indexes[_]=S}this.lng=u}addBucket(u,p,_){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let S=0;S<p.symbolInstances.length;S++)p.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const b=this.usedCrossTileIDs[u.overscaledZ];for(const S in this.indexes){const L=this.indexes[S];if(Number(S)>u.overscaledZ)for(const O in L){const W=L[O];W.tileID.isChildOf(u)&&W.findMatches(p.symbolInstances,u,b)}else{const O=L[u.scaledTo(Number(S)).key];O&&O.findMatches(p.symbolInstances,u,b)}}for(let S=0;S<p.symbolInstances.length;S++){const L=p.symbolInstances.get(S);L.crossTileID||(L.crossTileID=_.generate(),b[L.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new e1(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const _ in p.indexedSymbolInstances)for(const b of p.indexedSymbolInstances[_])delete this.usedCrossTileIDs[u][b.crossTileID]}removeStaleBuckets(u){let p=!1;for(const _ in this.indexes){const b=this.indexes[_];for(const S in b)u[b[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,b[S]),delete b[S],p=!0)}return p}}class ty{constructor(){this.layerIndexes={},this.crossTileIDs=new qp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,_,b){let S=this.layerIndexes[u.id];S===void 0&&(S=this.layerIndexes[u.id]=new ql);let L=!1;const O={};b.name!=="globe"&&S.handleWrapJump(_);for(const W of p){const K=W.getBucket(u);K&&u.id===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(W.tileID,K,this.crossTileIDs)&&(L=!0),O[K.bucketInstanceId]=!0)}return S.removeStaleBuckets(O)&&(L=!0),L}pruneUnusedLayers(u){const p={};u.forEach(_=>{p[_]=!0});for(const _ in this.layerIndexes)p[_]||delete this.layerIndexes[_]}}const oc=(g,u)=>o.emitValidationErrors(g,u&&u.filter(p=>p.identifier!=="source.canvas")),Zl=o.pick(pn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),ks=o.pick(pn,["setCenter","setZoom","setBearing","setPitch"]),Rh={version:8,layers:[],sources:{}},Ts={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Yo extends o.Evented{constructor(u,p={}){super(),this.map=u,this.dispatcher=new xn(vn(),this),this.imageManager=new se,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(u._requestManager,p.localFontFamily?o.LocalGlyphMode.all:p.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,p.localFontFamily||p.localIdeographFontFamily),this.crossTileSymbolIndex=new ty,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const _=this;this._rtlTextPluginCallback=Yo.registerForPluginStateChange(b=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(S,L)=>{if(o.triggerPluginCompletionEvent(S),L&&L.every(O=>O))for(const O in _._sourceCaches){const W=_._sourceCaches[O],K=W.getSource().type;K!=="vector"&&K!=="geojson"||W.reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const S=this.getSource(b.sourceId);if(S&&S.vectorLayerIds)for(const L in this._layers){const O=this._layers[L];O.source===S.id&&this._validateLayer(O)}})}loadURL(u,p={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const _=typeof p.validate=="boolean"?p.validate:!o.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,p.accessToken);const b=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(b,(S,L)=>{this._request=null,S?this.fire(new o.ErrorEvent(S)):L&&this._load(L,_)})}loadJSON(u,p={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(u,p.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Rh,!1)}_updateLayerCount(u,p){const _=p?1:-1;u.is3D()&&(this._num3DLayers+=_),u.type==="circle"&&(this._numCircleLayers+=_),u.type==="symbol"&&(this._numSymbolLayers+=_)}_load(u,p){if(p&&oc(this,o.validateStyle(u)))return;this._loaded=!0,this.stylesheet=o.clone$1(u),this._updateMapProjection();for(const b in u.sources)this.addSource(b,u.sources[b],{validate:!1});this._changed=!1,u.sprite?this._loadSprite(u.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(u.glyphs);const _=Qn(this.stylesheet.layers);this._order=_.map(b=>b.id),this._layers={},this._serializedLayers={};for(const b of _){const S=o.createStyleLayer(b);S.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=S,this._serializedLayers[S.id]=S.serialize(),this._updateLayerCount(S,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new je(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(u){u?this.stylesheet.projection=u:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(u){this._spriteRequest=function(p,_,b){let S,L,O;const W=o.exported.devicePixelRatio>1?"@2x":"";let K=o.getJSON(_.transformRequest(_.normalizeSpriteURL(p,W,".json"),o.ResourceType.SpriteJSON),(le,de)=>{K=null,O||(O=le,S=de,ee())}),X=o.getImage(_.transformRequest(_.normalizeSpriteURL(p,W,".png"),o.ResourceType.SpriteImage),(le,de)=>{X=null,O||(O=le,L=de,ee())});function ee(){if(O)b(O);else if(S&&L){const le=o.exported.getImageData(L),de={};for(const pe in S){const{width:fe,height:me,x:ae,y:Se,sdf:Ce,pixelRatio:ke,stretchX:Fe,stretchY:ze,content:$e}=S[pe],qe=new o.RGBAImage({width:fe,height:me});o.RGBAImage.copy(le,qe,{x:ae,y:Se},{x:0,y:0},{width:fe,height:me}),de[pe]={data:qe,pixelRatio:ke,sdf:Ce,stretchX:Fe,stretchY:ze,content:$e}}b(null,de)}}return{cancel(){K&&(K.cancel(),K=null),X&&(X.cancel(),X=null)}}}(u,this.map._requestManager,(p,_)=>{if(this._spriteRequest=null,p)this.fire(new o.ErrorEvent(p));else if(_)for(const b in _)this.imageManager.addImage(b,_[b]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(u){const p=this.getSource(u.source);if(!p)return;const _=u.sourceLayer;_&&(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${p.id}" as specified by style layer "${u.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this._sourceCaches)if(!this._sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const p=[];for(const _ of u){const b=this._layers[_];b.type!=="custom"&&p.push(b.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const u in this._sourceCaches)if(this._sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(u){return!!this.terrain&&(typeof u.isLayerDraped=="function"?u.isLayerDraped():Ts[u.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(u){if(!this._loaded)return;const p=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(b.length||S.length)&&this._updateWorkerLayers(b,S);for(const L in this._updatedSources){const O=this._updatedSources[L];O==="reload"?this._reloadSource(L):O==="clear"&&this._clearSource(L)}this._updateTilesForChangedImages();for(const L in this._updatedPaintProps)this._layers[L].updateTransitions(u);this.light.updateTransitions(u),this.fog&&this.fog.updateTransitions(u),this._resetUpdates()}const _={};for(const b in this._sourceCaches){const S=this._sourceCaches[b];_[b]=S.used,S.used=!1}for(const b of this._order){const S=this._layers[b];if(S.recalculate(u,this._availableImages),!S.isHidden(u.zoom)){const O=this._getLayerSourceCache(S);O&&(O.used=!0)}const L=this.map.painter;if(L){const O=S.getProgramIds();if(!O)continue;const W=S.getProgramConfiguration(u.zoom);for(const K of O)L.useProgram(K,W)}}for(const b in _){const S=this._sourceCaches[b];_[b]!==S.used&&S.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S.getSource().id}))}this.light.recalculate(u),this.terrain&&this.terrain.recalculate(u),this.fog&&this.fog.recalculate(u),this.z=u.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),p&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this._sourceCaches)this._sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(u){if(this._checkLoaded(),oc(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=Qn(u.layers);const p=function(b,S){if(!b)return[{command:pn.setStyle,args:[S]}];let L=[];try{if(!v(b.version,S.version))return[{command:pn.setStyle,args:[S]}];v(b.center,S.center)||L.push({command:pn.setCenter,args:[S.center]}),v(b.zoom,S.zoom)||L.push({command:pn.setZoom,args:[S.zoom]}),v(b.bearing,S.bearing)||L.push({command:pn.setBearing,args:[S.bearing]}),v(b.pitch,S.pitch)||L.push({command:pn.setPitch,args:[S.pitch]}),v(b.sprite,S.sprite)||L.push({command:pn.setSprite,args:[S.sprite]}),v(b.glyphs,S.glyphs)||L.push({command:pn.setGlyphs,args:[S.glyphs]}),v(b.transition,S.transition)||L.push({command:pn.setTransition,args:[S.transition]}),v(b.light,S.light)||L.push({command:pn.setLight,args:[S.light]}),v(b.fog,S.fog)||L.push({command:pn.setFog,args:[S.fog]}),v(b.projection,S.projection)||L.push({command:pn.setProjection,args:[S.projection]});const O={},W=[];(function(ee,le,de,pe){let fe;for(fe in le=le||{},ee=ee||{})ee.hasOwnProperty(fe)&&(le.hasOwnProperty(fe)||cr(fe,de,pe));for(fe in le){if(!le.hasOwnProperty(fe))continue;const me=le[fe];ee.hasOwnProperty(fe)?v(ee[fe],me)||(ee[fe].type==="geojson"&&me.type==="geojson"&&ts(ee,le,fe)?de.push({command:pn.setGeoJSONSourceData,args:[fe,me.data]}):Cs(fe,le,de,pe)):ur(fe,le,de)}})(b.sources,S.sources,W,O);const K=[];b.layers&&b.layers.forEach(ee=>{ee.source&&O[ee.source]?L.push({command:pn.removeLayer,args:[ee.id]}):K.push(ee)});let X=b.terrain;X&&O[X.source]&&(L.push({command:pn.setTerrain,args:[void 0]}),X=void 0),L=L.concat(W),v(X,S.terrain)||L.push({command:pn.setTerrain,args:[S.terrain]}),function(ee,le,de){le=le||[];const pe=(ee=ee||[]).map(ns),fe=le.map(ns),me=ee.reduce(si,{}),ae=le.reduce(si,{}),Se=pe.slice(),Ce=Object.create(null);let ke,Fe,ze,$e,qe,tt,ot;for(ke=0,Fe=0;ke<pe.length;ke++)ze=pe[ke],ae.hasOwnProperty(ze)?Fe++:(de.push({command:pn.removeLayer,args:[ze]}),Se.splice(Se.indexOf(ze,Fe),1));for(ke=0,Fe=0;ke<fe.length;ke++)ze=fe[fe.length-1-ke],Se[Se.length-1-ke]!==ze&&(me.hasOwnProperty(ze)?(de.push({command:pn.removeLayer,args:[ze]}),Se.splice(Se.lastIndexOf(ze,Se.length-Fe),1)):Fe++,tt=Se[Se.length-ke],de.push({command:pn.addLayer,args:[ae[ze],tt]}),Se.splice(Se.length-ke,0,ze),Ce[ze]=!0);for(ke=0;ke<fe.length;ke++)if(ze=fe[ke],$e=me[ze],qe=ae[ze],!Ce[ze]&&!v($e,qe))if(v($e.source,qe.source)&&v($e["source-layer"],qe["source-layer"])&&v($e.type,qe.type)){for(ot in gt($e.layout,qe.layout,de,ze,null,pn.setLayoutProperty),gt($e.paint,qe.paint,de,ze,null,pn.setPaintProperty),v($e.filter,qe.filter)||de.push({command:pn.setFilter,args:[ze,qe.filter]}),v($e.minzoom,qe.minzoom)&&v($e.maxzoom,qe.maxzoom)||de.push({command:pn.setLayerZoomRange,args:[ze,qe.minzoom,qe.maxzoom]}),$e)$e.hasOwnProperty(ot)&&ot!=="layout"&&ot!=="paint"&&ot!=="filter"&&ot!=="metadata"&&ot!=="minzoom"&&ot!=="maxzoom"&&(ot.indexOf("paint.")===0?gt($e[ot],qe[ot],de,ze,ot.slice(6),pn.setPaintProperty):v($e[ot],qe[ot])||de.push({command:pn.setLayerProperty,args:[ze,ot,qe[ot]]}));for(ot in qe)qe.hasOwnProperty(ot)&&!$e.hasOwnProperty(ot)&&ot!=="layout"&&ot!=="paint"&&ot!=="filter"&&ot!=="metadata"&&ot!=="minzoom"&&ot!=="maxzoom"&&(ot.indexOf("paint.")===0?gt($e[ot],qe[ot],de,ze,ot.slice(6),pn.setPaintProperty):v($e[ot],qe[ot])||de.push({command:pn.setLayerProperty,args:[ze,ot,qe[ot]]}))}else de.push({command:pn.removeLayer,args:[ze]}),tt=Se[Se.lastIndexOf(ze)+1],de.push({command:pn.addLayer,args:[qe,tt]})}(K,S.layers,L)}catch(O){console.warn("Unable to compute style diff:",O),L=[{command:pn.setStyle,args:[S]}]}return L}(this.serialize(),u).filter(b=>!(b.command in ks));if(p.length===0)return!1;const _=p.filter(b=>!(b.command in Zl));if(_.length>0)throw new Error(`Unimplemented: ${_.map(b=>b.command).join(", ")}.`);return p.forEach(b=>{b.command!=="setTransition"&&b.command!=="setProjection"&&this[b.command].apply(this,b.args)}),this.stylesheet=u,this._updateMapProjection(),!0}addImage(u,p){return this.getImage(u)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(u,p),this._afterImageUpdated(u),this)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){return this.getImage(u)?(this.imageManager.removeImage(u),this._afterImageUpdated(u),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(u,p,_={}){if(this._checkLoaded(),this.getSource(u)!==void 0)throw new Error("There is already a source with this ID");if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.validateSource,`sources.${u}`,p,null,_))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const b=Ze(u,p,this.dispatcher,this);b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(u),source:b.serialize(),sourceId:u}));const S=L=>{const O=(L?"symbol:":"other:")+u,W=this._sourceCaches[O]=new o.SourceCache(O,b,L);(L?this._symbolSourceCaches:this._otherSourceCaches)[u]=W,W.style=this,W.onAdd(this.map)};S(!1),p.type!=="vector"&&p.type!=="geojson"||S(!0),b.onAdd&&b.onAdd(this.map),this._changed=!0}removeSource(u){this._checkLoaded();const p=this.getSource(u);if(!p)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===u)return this.fire(new o.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.get().source===u)return this.fire(new o.ErrorEvent(new Error(`Source "${u}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(u);for(const b of _)delete this._sourceCaches[b.id],delete this._updatedSources[b.id],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles();return delete this._otherSourceCaches[u],delete this._symbolSourceCaches[u],p.setEventedParent(null),p.onRemove&&p.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(u,p){this._checkLoaded(),this.getSource(u).setData(p),this._changed=!0}getSource(u){const p=this._getSourceCache(u);return p&&p.getSource()}_getSources(){const u=[];for(const p in this._otherSourceCaches){const _=this._getSourceCache(p);_&&u.push(_.getSource())}return u}addLayer(u,p,_={}){this._checkLoaded();const b=u.id;if(this.getLayer(b))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${b}" already exists on this map`)));let S;if(u.type==="custom"){if(oc(this,o.validateCustomStyleLayer(u)))return;S=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(b,u.source),u=o.clone$1(u),u=o.extend(u,{source:b})),this._validate(o.validateLayer,`layers.${b}`,u,{arrayIndex:-1},_))return;S=o.createStyleLayer(u),this._validateLayer(S),S.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[S.id]=S.serialize(),this._updateLayerCount(S,!0)}const L=p?this._order.indexOf(p):this._order.length;if(p&&L===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`)));this._order.splice(L,0,b),this._layerOrderChanged=!0,this._layers[b]=S;const O=this._getLayerSourceCache(S);if(this._removedLayers[b]&&S.source&&O&&S.type!=="custom"){const W=this._removedLayers[b];delete this._removedLayers[b],W.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",O.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const _=this._order.indexOf(u);this._order.splice(_,1);const b=p?this._order.indexOf(p):this._order.length;p&&b===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`))):(this._order.splice(b,0,u),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be removed.`)));p.setEventedParent(null),this._updateLayerCount(p,!1);const _=this._order.indexOf(u);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}hasLayerType(u){for(const p in this._layers)if(this._layers[p].type===u)return!0;return!1}setLayerZoomRange(u,p,_){this._checkLoaded();const b=this.getLayer(u);b?b.minzoom===p&&b.maxzoom===_||(p!=null&&(b.minzoom=p),_!=null&&(b.maxzoom=_),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(u,p,_={}){this._checkLoaded();const b=this.getLayer(u);if(b){if(!v(b.filter,p))return p==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateFilter,`layers.${b.id}.filter`,p,{layerType:b.type},_)||(b.filter=o.clone$1(p),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be filtered.`)))}getFilter(u){const p=this.getLayer(u);return p&&o.clone$1(p.filter)}setLayoutProperty(u,p,_,b={}){this._checkLoaded();const S=this.getLayer(u);S?v(S.getLayoutProperty(p),_)||(S.setLayoutProperty(p,_,b),this._updateLayer(S)):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(u,p){const _=this.getLayer(u);if(_)return _.getLayoutProperty(p);this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style.`)))}setPaintProperty(u,p,_,b={}){this._checkLoaded();const S=this.getLayer(u);S?v(S.getPaintProperty(p),_)||(S.setPaintProperty(p,_,b)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(u,p){const _=this.getLayer(u);return _&&_.getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const _=u.source,b=u.sourceLayer,S=this.getSource(_);if(!S)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const L=S.type;if(L==="geojson"&&b)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(L==="vector"&&!b)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const O=this._getSourceCaches(_);for(const W of O)W.setFeatureState(b,u.id,p)}removeFeatureState(u,p){this._checkLoaded();const _=u.source,b=this.getSource(_);if(!b)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const S=b.type,L=S==="vector"?u.sourceLayer:void 0;if(S==="vector"&&!L)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(p&&typeof u.id!="string"&&typeof u.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const O=this._getSourceCaches(_);for(const W of O)W.removeFeatureState(L,u.id,p)}getFeatureState(u){this._checkLoaded();const p=u.source,_=u.sourceLayer,b=this.getSource(p);if(b){if(b.type!=="vector"||_)return u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(p)[0].getFeatureState(_,u.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const u={};for(const p in this._sourceCaches){const _=this._sourceCaches[p].getSource();u[_.id]||(u[_.id]=_.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:u,layers:this._serializeLayers(this._order)},p=>p!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0;const p=this._getLayerSourceCache(u);u.source&&!this._updatedSources[u.source]&&p&&p.getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",p.pause()),this._changed=!0,u.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(u){const p=L=>this._layers[L].type==="fill-extrusion",_={},b=[];for(let L=this._order.length-1;L>=0;L--){const O=this._order[L];if(p(O)){_[O]=L;for(const W of u){const K=W[O];if(K)for(const X of K)b.push(X)}}}b.sort((L,O)=>O.intersectionZ-L.intersectionZ);const S=[];for(let L=this._order.length-1;L>=0;L--){const O=this._order[L];if(p(O))for(let W=b.length-1;W>=0;W--){const K=b[W].feature;if(_[K.layer.id]<L)break;S.push(K),b.pop()}else for(const W of u){const K=W[O];if(K)for(const X of K)S.push(X.feature)}}return S}queryRenderedFeatures(u,p,_){p&&p.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",p.filter,null,p);const b={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const W of p.layers){const K=this._layers[W];if(!K)return this.fire(new o.ErrorEvent(new Error(`The layer '${W}' does not exist in the map's style and cannot be queried for features.`))),[];b[K.source]=!0}}const S=[];p.availableImages=this._availableImages;const L=p&&p.layers?p.layers.some(W=>{const K=this.getLayer(W);return K&&K.is3D()}):this.has3DLayers(),O=yn.createFromScreenPoints(u,_);for(const W in this._sourceCaches){const K=this._sourceCaches[W].getSource().id;p.layers&&!b[K]||S.push(Qe(this._sourceCaches[W],this._layers,this._serializedLayers,O,p,_,L,!!this.map._showQueryGeometry))}return this.placement&&S.push(function(W,K,X,ee,le,de,pe){const fe={},me=de.queryRenderedSymbols(ee),ae=[];for(const Se of Object.keys(me).map(Number))ae.push(pe[Se]);ae.sort(qt);for(const Se of ae){const Ce=Se.featureIndex.lookupSymbolFeatures(me[Se.bucketInstanceId],K,Se.bucketIndex,Se.sourceLayerIndex,le.filter,le.layers,le.availableImages,W);for(const ke in Ce){const Fe=fe[ke]=fe[ke]||[],ze=Ce[ke];ze.sort(($e,qe)=>{const tt=Se.featureSortOrder;if(tt){const ot=tt.indexOf($e.featureIndex);return tt.indexOf(qe.featureIndex)-ot}return qe.featureIndex-$e.featureIndex});for(const $e of ze)Fe.push($e)}}for(const Se in fe)fe[Se].forEach(Ce=>{const ke=Ce.feature,Fe=X(W[Se]);if(!Fe)return;const ze=Fe.getFeatureState(ke.layer["source-layer"],ke.id);ke.source=ke.layer.source,ke.layer["source-layer"]&&(ke.sourceLayer=ke.layer["source-layer"]),ke.state=ze});return fe}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),O.screenGeometry,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(u,p){p&&p.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",p.filter,null,p);const _=this._getSourceCaches(u);let b=[];for(const S of _)b=b.concat(Tt(S,p));return b}addSourceType(u,p,_){return Yo.getSourceType(u)?_(new Error(`A source type called "${u}" already exists.`)):(Yo.setSourceType(u,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:p.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const _=this.light.getLight();let b=!1;for(const L in u)if(!v(u[L],_[L])){b=!0;break}if(!b)return;const S=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(u,p),this.light.updateTransitions(S)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(u,p=1){if(this._checkLoaded(),!u)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=u;if(p===1){if(typeof _.source=="object"){const b="terrain-dem-src";this.addSource(b,_.source),_=o.clone$1(_),_=o.extend(_,{source:b})}if(this._validate(o.validateTerrain,"terrain",_))return}if(!this.terrain||this.terrain&&p!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,p)}else{const b=this.terrain,S=b.get();for(const L of Object.keys(o.spec.terrain))!_.hasOwnProperty(L)&&o.spec.terrain[L].default&&(_[L]=o.spec.terrain[L].default);for(const L in _)if(!v(_[L],S[L])){b.set(_),this.stylesheet.terrain=_;const O=this._setTransitionParameters({duration:0});b.updateTransitions(O);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(u){const p=this.fog=new Ee(u,this.map.transform);this.stylesheet.fog=u;const _=this._setTransitionParameters({duration:0});p.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const u of this.map._markers)u._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(u){if(this._checkLoaded(),!u)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const p=this.fog,_=p.get();Object.keys(u).length===0&&p.set(u);for(const b in u)if(!v(u[b],_[b])){p.set(u),this.stylesheet.fog=u;const S=this._setTransitionParameters({duration:0});p.updateTransitions(S);break}}else this._createFog(u);this._markersNeedUpdate=!0}_setTransitionParameters(u){return{now:o.exported.now(),transition:o.extend(u,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const u=this._order.filter(_=>this.isLayerDraped(this._layers[_])),p=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...u),this._drapedFirstOrder.push(...p)}_createTerrain(u,p){const _=this.terrain=new xt(u,p);this.stylesheet.terrain=u,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const b=this._setTransitionParameters({duration:0});_.updateTransitions(b)}_force3DLayerUpdate(){for(const u in this._layers){const p=this._layers[u];p.type==="fill-extrusion"&&this._updateLayer(p)}}_forceSymbolLayerUpdate(){for(const u in this._layers){const p=this._layers[u];p.type==="symbol"&&this._updateLayer(p)}}_validate(u,p,_,b,S={}){return(!S||S.validate!==!1)&&oc(this,u.call(o.validateStyle,o.extend({key:p,style:this.serialize(),value:_,styleSpec:o.spec},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this._sourceCaches)this._sourceCaches[u].clearTiles(),this._sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){const p=this._getSourceCaches(u);for(const _ of p)_.clearTiles()}_reloadSource(u){const p=this._getSourceCaches(u);for(const _ of p)_.resume(),_.reload()}_reloadSources(){for(const u of this._getSources())u.reload&&u.reload()}_updateSources(u){for(const p in this._sourceCaches)this._sourceCaches[p].update(u)}_generateCollisionBoxes(){for(const u in this._sourceCaches){const p=this._sourceCaches[u];p.resume(),p.reload()}}_updatePlacement(u,p,_,b,S=!1){let L=!1,O=!1;const W={};for(const K of this._order){const X=this._layers[K];if(X.type!=="symbol")continue;if(!W[X.source]){const le=this._getLayerSourceCache(X);if(!le)continue;W[X.source]=le.getRenderableIds(!0).map(de=>le.getTileByID(de)).sort((de,pe)=>pe.tileID.overscaledZ-de.tileID.overscaledZ||(de.tileID.isLessThan(pe.tileID)?-1:1))}const ee=this.crossTileSymbolIndex.addLayer(X,W[X.source],u.center.lng,u.projection);L=L||ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),S=S||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(S||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),u.zoom))&&(this.pauseablePlacement=new ic(u,this._order,S,p,_,b,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,W),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),O=!0),L&&this.pauseablePlacement.placement.setStale()),O||L)for(const K of this._order){const X=this._layers[K];X.type==="symbol"&&this.placement.updateLayerOpacities(X,W[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const u in this._sourceCaches)this._sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,p,_){this.imageManager.getImages(p.icons,_),this._updateTilesForChangedImages();const b=S=>{S&&S.setDependencies(p.tileID.key,p.type,p.icons)};b(this._otherSourceCaches[p.source]),b(this._symbolSourceCaches[p.source])}getGlyphs(u,p,_){this.glyphManager.getGlyphs(p.stacks,_)}getResource(u,p,_){return o.makeRequest(p,_)}_getSourceCache(u){return this._otherSourceCaches[u]}_getLayerSourceCache(u){return u.type==="symbol"?this._symbolSourceCaches[u.source]:this._otherSourceCaches[u.source]}_getSourceCaches(u){const p=[];return this._otherSourceCaches[u]&&p.push(this._otherSourceCaches[u]),this._symbolSourceCaches[u]&&p.push(this._symbolSourceCaches[u]),p}_isSourceCacheLoaded(u){const p=this._getSourceCaches(u);return p.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${u}'`))),!1):p.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Yo.getSourceType=function(g){return Xe[g]},Yo.setSourceType=function(g,u){Xe[g]=u},Yo.registerForPluginStateChange=o.registerForPluginStateChange;var ac=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,ny="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",ry=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Lh=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,iy=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Zp={},Xp={};const Xl=[];ol(ac,Xl),ol(ry,Xl),ol(Lh,Xl),ol(iy,Xl),Zp=tr("",ry),Xp=tr(iy,Lh);const oy=tr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Oh=ac,zh=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Kp={background:tr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:tr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:tr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:tr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:tr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:tr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:tr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:tr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:tr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:tr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:tr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:tr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:tr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:tr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ny),skyboxGradient:tr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ny),skyboxCapture:tr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:tr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:tr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function ol(g,u){const p=g.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of p)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=_.split(" ");for(const S of b)u.includes(S)||u.push(S)}}function tr(g,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=u.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),b={},S=[...Xl];return ol(g,S),ol(u,S),{fragmentSource:g=g.replace(p,(L,O,W,K,X)=>(b[X]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${W} ${K} ${X};
#else
uniform ${W} ${K} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${W} ${K} ${X} = u_${X};
#endif
`)),vertexSource:u=u.replace(p,(L,O,W,K,X)=>{const ee=K==="float"?"vec2":"vec4",le=X.match(/color/)?"color":ee;return b[X]?O==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${W} ${ee} a_${X};
varying ${W} ${K} ${X};
#else
uniform ${W} ${K} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${W} ${K} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${W} ${K} ${X} = u_${X};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${W} ${ee} a_${X};
#else
uniform ${W} ${K} u_${X};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${W} ${K} ${X} = a_${X};
#else
    ${W} ${K} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${W} ${K} ${X} = unpack_mix_${le}(a_${X}, u_${X}_t);
#else
    ${W} ${K} ${X} = u_${X};
#endif
`}),staticAttributes:_,usedDefines:S}}class sc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(u,p,_,b,S,L,O){this.context=u;let W=this.boundPaintVertexBuffers.length!==b.length;for(let X=0;!W&&X<b.length;X++)this.boundPaintVertexBuffers[X]!==b[X]&&(W=!0);let K=this.boundDynamicVertexBuffers.length!==O.length;for(let X=0;!K&&X<O.length;X++)this.boundDynamicVertexBuffers[X]!==O[X]&&(K=!0);if(!u.extVertexArrayObject||!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==_||W||K||this.boundIndexBuffer!==S||this.boundVertexOffset!==L)this.freshBind(p,_,b,S,L,O);else{u.bindVertexArrayOES.set(this.vao);for(const X of O)X&&X.bind();S&&S.dynamicDraw&&S.bind()}}freshBind(u,p,_,b,S,L){let O;const W=u.numAttributes,K=this.context,X=K.gl;if(K.extVertexArrayObject)this.vao&&this.destroy(),this.vao=K.extVertexArrayObject.createVertexArrayOES(),K.bindVertexArrayOES.set(this.vao),O=0,this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=b,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=L;else{O=K.currentNumAttributes||0;for(let ee=W;ee<O;ee++)X.disableVertexAttribArray(ee)}p.enableAttributes(X,u),p.bind(),p.setVertexAttribPointers(X,u,S);for(const ee of _)ee.enableAttributes(X,u),ee.bind(),ee.setVertexAttribPointers(X,u,S);for(const ee of L)ee&&(ee.enableAttributes(X,u),ee.bind(),ee.setVertexAttribPointers(X,u,S));b&&b.bind(),K.currentNumAttributes=W}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Yp(g,u){const p=Math.pow(2,u.canonical.z),_=u.canonical.y;return[new o.MercatorCoordinate(0,_/p).toLngLat().lat,new o.MercatorCoordinate(0,(_+1)/p).toLngLat().lat]}function lc(g,u,p,_,b,S,L){const O=g.context,W=O.gl,K=p.fbo;if(!K)return;g.prepareDrawTile();const X=g.useProgram("hillshade");O.activeTexture.set(W.TEXTURE0),W.bindTexture(W.TEXTURE_2D,K.colorAttachment.get());const ee=((fe,me,ae,Se)=>{const Ce=ae.paint.get("hillshade-shadow-color"),ke=ae.paint.get("hillshade-highlight-color"),Fe=ae.paint.get("hillshade-accent-color");let ze=ae.paint.get("hillshade-illumination-direction")*(Math.PI/180);ae.paint.get("hillshade-illumination-anchor")==="viewport"&&(ze-=fe.transform.angle);const $e=!fe.options.moving;return{u_matrix:Se||fe.transform.calculateProjMatrix(me.tileID.toUnwrapped(),$e),u_image:0,u_latrange:Yp(0,me.tileID),u_light:[ae.paint.get("hillshade-exaggeration"),ze],u_shadow:Ce,u_highlight:ke,u_accent:Fe}})(g,p,_,g.terrain?u.projMatrix:null);g.prepareDrawProgram(O,X,u.toUnwrapped());const{tileBoundsBuffer:le,tileBoundsIndexBuffer:de,tileBoundsSegments:pe}=g.getTileBoundsBuffers(p);X.draw(O,W.TRIANGLES,b,S,L,o.CullFaceMode.disabled,ee,_.id,le,de,pe)}function uc(g,u,p){if(!u.needsDEMTextureUpload)return;const _=g.context,b=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||g.getTileTexture(p.stride);const S=p.getPixels();u.demTexture?u.demTexture.update(S,{premultiply:!1}):u.demTexture=new o.Texture(_,S,b.RGBA,{premultiply:!1}),u.needsDEMTextureUpload=!1}function Bh(g,u,p,_,b,S){const L=g.context,O=L.gl;if(!u.dem)return;const W=u.dem;if(L.activeTexture.set(O.TEXTURE1),uc(g,u,W),!u.demTexture)return;u.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);const K=W.dim;L.activeTexture.set(O.TEXTURE0);let X=u.fbo;if(!X){const pe=new o.Texture(L,{width:K,height:K,data:null},O.RGBA);pe.bind(O.LINEAR,O.CLAMP_TO_EDGE),X=u.fbo=L.createFramebuffer(K,K,!0),X.colorAttachment.set(pe.texture)}L.bindFramebuffer.set(X.framebuffer),L.viewport.set([0,0,K,K]);const{tileBoundsBuffer:ee,tileBoundsIndexBuffer:le,tileBoundsSegments:de}=g.getMercatorTileBoundsBuffers();g.useProgram("hillshadePrepare").draw(L,O.TRIANGLES,_,b,S,o.CullFaceMode.disabled,((pe,fe)=>{const me=fe.stride,ae=o.create();return o.ortho(ae,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(ae,ae,[0,-o.EXTENT,0]),{u_matrix:ae,u_image:1,u_dimension:[me,me],u_zoom:pe.overscaledZ,u_unpack:fe.unpackVector}})(u.tileID,W),p.id,ee,le,de),u.needsHillshadePrepare=!1}const Fh=g=>({u_matrix:new o.UniformMatrix4f(g),u_image0:new o.Uniform1i(g),u_skirt_height:new o.Uniform1f(g)}),Jp=(g,u)=>({u_matrix:g,u_image0:0,u_skirt_height:u}),Nh=(g,u,p,_,b,S,L,O,W,K,X,ee,le,de,pe)=>({u_proj_matrix:Float32Array.from(g),u_globe_matrix:u,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:p,u_zoom_transition:b,u_merc_center:S,u_image0:0,u_frustum_tl:L,u_frustum_tr:O,u_frustum_br:W,u_frustum_bl:K,u_globe_pos:X,u_globe_radius:ee,u_viewport:le,u_grid_matrix:pe?Float32Array.from(pe):new Float32Array(9),u_skirt_height:de});function Qp(g,u){return g!=null&&u!=null&&!(!g.hasData()||!u.hasData())&&g.demTexture!=null&&u.demTexture!=null&&g.tileID.key!==u.tileID.key}const As=new class{constructor(){this.operations={}}newMorphing(g,u,p,_,b){if(g in this.operations){const S=this.operations[g];S.to.tileID.key!==p.tileID.key&&(S.queued=p)}else this.operations[g]={startTime:_,phase:0,duration:b,from:u,to:p,queued:null}}getMorphValuesForProxy(g){if(!(g in this.operations))return null;const u=this.operations[g];return{from:u.from,to:u.to,phase:u.phase}}update(g){for(const u in this.operations){const p=this.operations[u];for(p.phase=(g-p.startTime)/p.duration;p.phase>=1||!this._validOp(p);)if(!this._nextOp(p,g)){delete this.operations[u];break}}}_nextOp(g,u){return!!g.queued&&(g.from=g.to,g.to=g.queued,g.queued=null,g.phase=0,g.startTime=u,!0)}_validOp(g){return g.from.hasData()&&g.to.hasData()}},al={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Uh(g){return 6*Math.pow(1.5,22-g)}function ef(g,u){const p=1<<g.z;return!u&&(g.x===0||g.x===p-1)||g.y===0||g.y===p-1}const Hn=g=>({u_matrix:g});function cc(g,u,p,_,b){if(b>0){const S=o.exported.now(),L=(S-g.timeAdded)/b,O=u?(S-u.timeAdded)/b:-1,W=p.getSource(),K=_.coveringZoomLevel({tileSize:W.tileSize,roundZoom:W.roundZoom}),X=!u||Math.abs(u.tileID.overscaledZ-K)>Math.abs(g.tileID.overscaledZ-K),ee=X&&g.refreshedUponExpiration?1:o.clamp(X?L:1-O,0,1);return g.refreshedUponExpiration&&L>=1&&(g.refreshedUponExpiration=!1),u?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}class ay extends o.SourceCache{constructor(u){const p={type:"raster-dem",maxzoom:u.transform.maxZoom},_=new xn(vn(),null),b=Ze("mock-dem",p,_,u.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(u,p){u.state="loaded",p(null)}}class sy extends o.SourceCache{constructor(u){const p=Ze("proxy",{type:"geojson",maxzoom:u.transform.maxZoom},new xn(vn(),null),u.style);super("proxy",p,!1),p.setEventedParent(this),this.map=this.getSource().map=u,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(u,p,_){if(u.freezeTileCoverage)return;this.transform=u;const b=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,L)=>{if(S[L.key]="",!this._tiles[L.key]){const O=new o.Tile(L,this._source.tileSize*L.overscaleFactor(),u.tileZoom);O.state="loaded",this._tiles[L.key]=O}return S},{});for(const S in this._tiles)S in b||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(u){const p=this.proxyCachedFBO[u];if(p!==void 0){const _=Object.values(p);this.renderCachePool.push(..._),delete this.proxyCachedFBO[u]}}deallocRenderCache(){this.renderCache.forEach(u=>u.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class tf extends o.OverscaledTileID{constructor(u,p,_){super(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y),this.proxyTileKey=p,this.projMatrix=_}}class nf extends o.Elevation{constructor(u,p){super(),this.painter=u,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,b,S]=function(W){const K=new o.StructArrayLayout2i4,X=new o.StructArrayLayout3ui6,ee=131;K.reserve(17161),X.reserve(33800);const le=o.EXTENT/128,de=o.EXTENT+le/2,pe=de+le;for(let me=-le;me<pe;me+=le)for(let ae=-le;ae<pe;ae+=le){const Se=ae<0||ae>de||me<0||me>de?24575:0,Ce=o.clamp(Math.round(ae),0,o.EXTENT),ke=o.clamp(Math.round(me),0,o.EXTENT);K.emplaceBack(Ce+Se,ke)}const fe=(me,ae)=>{const Se=ae*ee+me;X.emplaceBack(Se+1,Se,Se+ee),X.emplaceBack(Se+ee,Se+ee+1,Se+1)};for(let me=1;me<129;me++)for(let ae=1;ae<129;ae++)fe(ae,me);return[0,129].forEach(me=>{for(let ae=0;ae<130;ae++)fe(ae,me),fe(me,ae)}),[K,X,32768]}(),L=u.context;this.gridBuffer=L.createVertexBuffer(_,o.posAttributes.members),this.gridIndexBuffer=L.createIndexBuffer(b),this.gridSegments=o.SegmentVector.simpleSegment(0,0,_.length,b.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,_.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new sy(p.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const O=L.gl;this._overlapStencilMode=new o.StencilMode({func:O.GEQUAL,mask:255},0,255,O.KEEP,O.KEEP,O.REPLACE),this._previousZoom=u.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=p,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ay(p.map)}set style(u){u.on("data",this._onStyleDataEvent.bind(this)),u.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=u,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(u,p,_){if(u&&u.terrain){this._style!==u&&(this.style=u),this.enabled=!0;const b=u.terrain.properties;this.sourceCache=u.terrain.drapeRenderMode===0?this._mockSourceCache:u._getSourceCache(b.get("source")),this._exaggeration=b.get("exaggeration");const S=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const L=this.getScaledDemTileSize();this.sourceCache.update(p,L,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,S(),this._initializing=!0),S(),p.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(p),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(u){this._findCoveringTileCache[u]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const u=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||u.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${u.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${u.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(u){u.coord&&u.dataType==="source"?this._clearRenderCacheForTile(u.sourceCacheId,u.coord):u.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const u in this._style._sourceCaches)this._style._sourceCaches[u].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(u=>u.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const u=2*this.proxySourceCache.getSource().tileSize;return[u,u]}set useVertexMorphing(u){this._useVertexMorphing=u}updateTileBinding(u){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const p=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=p.getIds().map(W=>{const K=p.getTileByID(W).tileID;return K.projMatrix=_.calculateProjMatrix(K.toUnwrapped()),K});(function(W,K){const X=K.transform.pointCoordinate(K.transform.getCameraPoint()),ee=new o.pointGeometry(X.x,X.y);W.sort((le,de)=>{if(de.overscaledZ-le.overscaledZ)return de.overscaledZ-le.overscaledZ;const pe=new o.pointGeometry(le.canonical.x+(1<<le.canonical.z)*le.wrap,le.canonical.y),fe=new o.pointGeometry(de.canonical.x+(1<<de.canonical.z)*de.wrap,de.canonical.y),me=ee.mult(1<<le.canonical.z);return me.x-=.5,me.y-=.5,me.distSqr(pe)-me.distSqr(fe)})})(b,this.painter),this._previousZoom=_.zoom;const S=this.proxyToSource||{};this.proxyToSource={},b.forEach(W=>{this.proxyToSource[W.key]={}}),this.terrainTileForTile={};const L=this._style._sourceCaches;for(const W in L){const K=L[W];if(!K.used||(K!==this.sourceCache&&this.resetTileLookupCache(K.id),this._setupProxiedCoordsForOrtho(K,u[W],S),K.usedForTerrain))continue;const X=u[W];K.getSource().reparseOverscaled&&this._assignTerrainTiles(X)}this.proxiedCoords[p.id]=b.map(W=>new tf(W,W.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const O={};this._visibleDemTiles=[];for(const W of this.proxyCoords){const K=this.terrainTileForTile[W.key];if(!K)continue;const X=K.tileID.key;X in O||(this._visibleDemTiles.push(K),O[X]=X)}}_assignTerrainTiles(u){this._initializing||u.forEach(p=>{if(this.terrainTileForTile[p.key])return;const _=this._findTileCoveringTileID(p,this.sourceCache);_&&(this.terrainTileForTile[p.key]=_)})}_prepareDEMTextures(){const u=this.painter.context,p=u.gl;for(const _ in this.terrainTileForTile){const b=this.terrainTileForTile[_],S=b.dem;!S||b.demTexture&&!b.needsDEMTextureUpload||(u.activeTexture.set(p.TEXTURE1),uc(this.painter,b,S))}}_prepareDemTileUniforms(u,p,_,b){if(!p||p.demTexture==null)return!1;const S=u.tileID.canonical,L=Math.pow(2,p.tileID.canonical.z-S.z),O=b||"";return _[`u_dem_tl${O}`]=[S.x*L%1,S.y*L%1],_[`u_dem_scale${O}`]=L,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const u=this.painter.context,p=u.gl;if(!this._emptyDepthBufferTexture){const _=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(u,_,p.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let u=0;const p=this._visibleDemTiles.reduce((_,b)=>{if(!b.dem)return _;const S=b.dem.tree.minimums[0];return S>0&&u++,_+S},0);return u?p/u:0}_updateEmptyDEMTexture(){const u=this.painter.context,p=u.gl;u.activeTexture.set(p.TEXTURE2);const _=this._getLoadedAreaMinimum(),b=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(b,{premultiply:!1}):S=this._emptyDEMTexture=new o.Texture(u,b,p.RGBA,{premultiply:!1}),S}setupElevationDraw(u,p,_){const b=this.painter.context,S=b.gl,L=(O=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(O),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var O;L.u_dem_size=this.sourceCache.getSource().tileSize,L.u_exaggeration=this.exaggeration();let W=null,K=null,X=1;if(_&&_.morphing&&this._useVertexMorphing){const ee=_.morphing.srcDemTile,le=_.morphing.dstDemTile;X=_.morphing.phase,ee&&le&&(this._prepareDemTileUniforms(u,ee,L,"_prev")&&(K=ee),this._prepareDemTileUniforms(u,le,L)&&(W=le))}if(K&&W?(b.activeTexture.set(S.TEXTURE2),W.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE,S.NEAREST),b.activeTexture.set(S.TEXTURE4),K.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE,S.NEAREST),L.u_dem_lerp=X):(W=this.terrainTileForTile[u.tileID.key],b.activeTexture.set(S.TEXTURE2),(this._prepareDemTileUniforms(u,W,L)?W.demTexture:this.emptyDEMTexture).bind(S.NEAREST,S.CLAMP_TO_EDGE)),b.activeTexture.set(S.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),this._depthFBO&&(L.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),L.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&W){const ee=(1<<W.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;L.u_meter_to_dem=ee}if(_&&_.labelPlaneMatrixInv&&(L.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),p.setTerrainUniformValues(b,L),this.painter.transform.projection.name==="globe"){const ee=this.globeUniformValues(this.painter.transform,u.tileID.canonical,_&&_.useDenormalizedUpVectorScale);p.setGlobeUniformValues(b,ee)}}globeUniformValues(u,p,_){const b=u.projection;return{u_tile_tl_up:b.upVector(p,0,0),u_tile_tr_up:b.upVector(p,o.EXTENT,0),u_tile_br_up:b.upVector(p,o.EXTENT,o.EXTENT),u_tile_bl_up:b.upVector(p,0,o.EXTENT),u_tile_up_scale:_?o.globeMetersToEcef(1):b.upVectorScale(p,u.center.lat,u.worldSize).metersToTile}}renderToBackBuffer(u){const p=this.painter,_=this.painter.context;u.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,p.width,p.height]),p.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,S,L,O,W){if(b.transform.projection.name==="globe")(function(K,X,ee,le,de){const pe=K.context,fe=pe.gl;let me,ae;const Se=K.options.showTerrainWireframe?2:0,Ce=K.transform,ke=o.globeUseCustomAntiAliasing(K,pe,Ce),Fe=(At,rt)=>{if(ae===At)return;const Ge=[al[At],"PROJECTION_GLOBE_VIEW"];ke&&Ge.push("CUSTOM_ANTIALIASING"),rt&&Ge.push(al[Se]),me=K.useProgram("globeRaster",null,Ge),ae=At},ze=K.colorModeForRenderPass(),$e=new o.DepthMode(fe.LEQUAL,o.DepthMode.ReadWrite,K.depthRangeFor3D);As.update(de);const qe=o.calculateGlobeMercatorMatrix(Ce),tt=[o.mercatorXfromLng(Ce.center.lng),o.mercatorYfromLat(Ce.center.lat)],ot=Se?[!1,!0]:[!1],Ot=K.globeSharedBuffers,Je=[Ce.width*o.exported.devicePixelRatio,Ce.height*o.exported.devicePixelRatio],wt=Float32Array.from(Ce.globeMatrix),dt={useDenormalizedUpVectorScale:!0};if(ot.forEach(At=>{const rt=K.transform,Ge=Uh(rt.zoom)*X.exaggeration();ae=-1;const at=At?fe.LINES:fe.TRIANGLES;for(const kt of le){const It=ee.getTile(kt),rn=o.StencilMode.disabled,Tn=X.prevTerrainTileForTile[kt.key],en=X.terrainTileForTile[kt.key];Qp(Tn,en)&&As.newMorphing(kt.key,Tn,en,de,250),pe.activeTexture.set(fe.TEXTURE0),It.texture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE);const Xt=As.getMorphValuesForProxy(kt.key),an=Xt?1:0;Xt&&o.extend$1(dt,{morphing:{srcDemTile:Xt.from,dstDemTile:Xt.to,phase:o.easeCubicInOut(Xt.phase)}});const On=o.tileCornersToBounds(kt.canonical),un=o.getLatitudinalLod(On.getCenter().lat),nr=o.getGridMatrix(kt.canonical,On,un,rt.worldSize/rt._pixelsPerMercatorPixel),ir=o.globeNormalizeECEF(o.globeTileBounds(kt.canonical)),Cr=Nh(rt.projMatrix,wt,qe,ir,o.globeToMercatorTransition(rt.zoom),tt,rt.frustumCorners.TL,rt.frustumCorners.TR,rt.frustumCorners.BR,rt.frustumCorners.BL,rt.globeCenterInViewSpace,rt.globeRadius,Je,Ge,nr);if(Fe(an,At),X.setupElevationDraw(It,me,dt),K.prepareDrawProgram(pe,me,kt.toUnwrapped()),Ot){const[gr,li,To]=At?Ot.getWirefameBuffers(K.context,un):Ot.getGridBuffers(un,Ge!==0);me.draw(pe,at,$e,rn,ze,o.CullFaceMode.backCCW,Cr,"globe_raster",gr,li,To)}}}),Ot){const At=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ke&&At.push("CUSTOM_ANTIALIASING"),me=K.useProgram("globeRaster",null,At);for(const rt of le){const{x:Ge,y:at,z:kt}=rt.canonical,It=at===0,rn=at===(1<<kt)-1,[Tn,en,Xt,an]=Ot.getPoleBuffers(kt);if(an&&(It||rn)){const On=ee.getTile(rt);pe.activeTexture.set(fe.TEXTURE0),On.texture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE);let un=o.globePoleMatrixForTile(kt,Ge,Ce);const nr=o.globeNormalizeECEF(o.globeTileBounds(rt.canonical)),ir=(Cr,gr)=>Cr.draw(pe,fe.TRIANGLES,$e,o.StencilMode.disabled,ze,o.CullFaceMode.disabled,Nh(Ce.projMatrix,un,un,nr,0,tt,Ce.frustumCorners.TL,Ce.frustumCorners.TR,Ce.frustumCorners.BR,Ce.frustumCorners.BL,Ce.globeCenterInViewSpace,Ce.globeRadius,Je,0),"globe_pole_raster",gr,Xt,an);X.setupElevationDraw(On,me,dt),K.prepareDrawProgram(pe,me,rt.toUnwrapped()),It&&ir(me,Tn),rn&&(un=o.scale(o.create(),un,[1,-1,1]),ir(me,en))}}}})(b,S,L,O,W);else{const K=b.context,X=K.gl;let ee,le;const de=b.options.showTerrainWireframe?2:0,pe=(Ce,ke)=>{if(le===Ce)return;const Fe=[al[Ce]];ke&&Fe.push(al[de]),ee=b.useProgram("terrainRaster",null,Fe),le=Ce},fe=b.colorModeForRenderPass(),me=new o.DepthMode(X.LEQUAL,o.DepthMode.ReadWrite,b.depthRangeFor3D);As.update(W);const ae=b.transform,Se=Uh(ae.zoom)*S.exaggeration();(de?[!1,!0]:[!1]).forEach(Ce=>{le=-1;const ke=Ce?X.LINES:X.TRIANGLES,[Fe,ze]=Ce?S.getWirefameBuffer():[S.gridIndexBuffer,S.gridSegments];for(const $e of O){const qe=L.getTile($e),tt=o.StencilMode.disabled,ot=S.prevTerrainTileForTile[$e.key],Ot=S.terrainTileForTile[$e.key];Qp(ot,Ot)&&As.newMorphing($e.key,ot,Ot,W,250),K.activeTexture.set(X.TEXTURE0),qe.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const Je=As.getMorphValuesForProxy($e.key),wt=Je?1:0;let dt;Je&&(dt={morphing:{srcDemTile:Je.from,dstDemTile:Je.to,phase:o.easeCubicInOut(Je.phase)}});const At=Jp($e.projMatrix,ef($e.canonical,ae.renderWorldCopies)?Se/10:Se);pe(wt,Ce),S.setupElevationDraw(qe,ee,dt),b.prepareDrawProgram(K,ee,$e.toUnwrapped()),ee.draw(K,ke,me,tt,fe,o.CullFaceMode.backCCW,At,"terrain_raster",S.gridBuffer,Fe,ze)}})}}(p,this,this.proxySourceCache,u,this._updateTimestamp),this.renderingToTexture=!0,p.gpuTimingDeferredRenderEnd(),u.splice(0,u.length))}renderBatch(u){if(this._drapedRenderBatches.length===0)return u+1;this.renderingToTexture=!0;const p=this.painter,_=this.painter.context,b=this.proxySourceCache,S=this.proxiedCoords[b.id],L=this._drapedRenderBatches.shift(),O=[],W=p.style.order;let K=0;for(const X of S){const ee=b.getTileByID(X.proxyTileKey),le=b.proxyCachedFBO[X.key]?b.proxyCachedFBO[X.key][u]:void 0,de=le!==void 0?b.renderCache[le]:this.pool[K++],pe=le!==void 0;if(ee.texture=de.tex,pe&&!de.dirty){O.push(ee.tileID);continue}let fe;_.bindFramebuffer.set(de.fb.framebuffer),this.renderedToTile=!1,de.dirty&&(_.clear({color:o.Color.transparent,stencil:0}),de.dirty=!1);for(let me=L.start;me<=L.end;++me){const ae=p.style._layers[W[me]];if(ae.isHidden(p.transform.zoom))continue;const Se=p.style._getLayerSourceCache(ae),Ce=Se?this.proxyToSource[X.key][Se.id]:[X];if(!Ce)continue;const ke=Ce;_.viewport.set([0,0,de.fb.width,de.fb.height]),fe!==(Se?Se.id:null)&&(this._setupStencil(de,Ce,ae,Se),fe=Se?Se.id:null),p.renderLayer(p,Se,ae,ke)}this.renderedToTile?(de.dirty=!0,O.push(ee.tileID)):pe||--K,K===5&&(K=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,p.width,p.height]),L.end+1}postRender(){}renderCacheEfficiency(u){const p=u.order.length;if(p===0)return{efficiency:100};let _,b=0,S=0,L=!1;for(let O=0;O<p;++O){const W=u._layers[u.order[O]];this._style.isLayerDraped(W)?(L&&++b,++S):L||(L=!0,_=W.id)}return S===0?{efficiency:100}:{efficiency:100*(1-b/S),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let u=0;return this._visibleDemTiles.filter(p=>p.dem).forEach(p=>{u=Math.min(u,p.dem.tree.minimums[0])}),u===0?u:(u-30)*this._exaggeration}raycast(u,p,_){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const L=S.tileID,O=1<<L.overscaledZ,{x:W,y:K}=L.canonical,X=W/O,ee=(W+1)/O,le=K/O,de=(K+1)/O;return{minx:X,miny:le,maxx:ee,maxy:de,t:S.dem.tree.raycastRoot(X,le,ee,de,u,p,_),tile:S}});b.sort((S,L)=>(S.t!==null?S.t:Number.MAX_VALUE)-(L.t!==null?L.t:Number.MAX_VALUE));for(const S of b){if(S.t==null)return null;const L=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,u,p,_);if(L!=null)return L}return null}_createFBO(){const u=this.painter.context,p=u.gl,_=this.drapeBufferSize;u.activeTexture.set(p.TEXTURE0);const b=new o.Texture(u,{width:_[0],height:_[1],data:null},p.RGBA);b.bind(p.LINEAR,p.CLAMP_TO_EDGE);const S=u.createFramebuffer(_[0],_[1],!1);return S.colorAttachment.set(b.texture),S.depthAttachment=new Eo(u,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=u.createRenderbuffer(u.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),u.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),u.extTextureFilterAnisotropic&&!u.extTextureFilterAnisotropicForceOff&&p.texParameterf(p.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax),{fb:S,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u].hasTransition())return!0;return this._style.order.some(u=>{const p=this._style._layers[u],_=p.isHidden(this.painter.transform.zoom);return p.type==="custom"?!_&&p.shouldRedrape():!_&&p.hasTransition()})}_clearLineLayersFromRenderCache(){let u=!1;for(const _ of this._style._getSources())if(_ instanceof te){u=!0;break}if(!u)return;const p={};for(let _=0;_<this._style.order.length;++_){const b=this._style._layers[this._style.order[_]],S=this._style._getLayerSourceCache(b);if(S&&!p[S.id]&&!b.isHidden(this.painter.transform.zoom)&&b.type==="line"&&b.widthExpression()instanceof o.ZoomDependentExpression){p[S.id]=!0;for(const L of this.proxyCoords){const O=this.proxyToSource[L.key][S.id];if(O)for(const W of O)this._clearRenderCacheForTile(S.id,W)}}}}_clearRasterLayersFromRenderCache(){let u=!1;for(const _ in this._style._sourceCaches)if(this._style._sourceCaches[_]._source instanceof oe){u=!0;break}if(!u)return;const p={};for(let _=0;_<this._style.order.length;++_){const b=this._style._layers[this._style.order[_]],S=this._style._getLayerSourceCache(b);if(!S||p[S.id]||b.isHidden(this.painter.transform.zoom)||b.type!=="raster")continue;const L=b.paint.get("raster-fade-duration");for(const O of this.proxyCoords){const W=this.proxyToSource[O.key][S.id];if(W)for(const K of W){const X=cc(S.getTile(K),S.findLoadedParent(K,0),S,this.painter.transform,L);(X.opacity!==1||X.mix!==0)&&this._clearRenderCacheForTile(S.id,K)}}}}_setupDrapedRenderBatches(){const u=this._style.order,p=u.length;if(p===0)return;const _=[];let b,S=0,L=this._style._layers[u[S]];for(;!this._style.isLayerDraped(L)&&L.isHidden(this.painter.transform.zoom)&&++S<p;)L=this._style._layers[u[S]];for(;S<p;++S){const O=this._style._layers[u[S]];O.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(O)?b===void 0&&(b=S):b!==void 0&&(_.push({start:b,end:S-1}),b=void 0))}b!==void 0&&_.push({start:b,end:S-1}),this._drapedRenderBatches=_}_setupRenderCache(u){const p=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,p.renderCache.length>p.renderCachePool.length){const L=Object.values(p.proxyCachedFBO);p.proxyCachedFBO={};for(let O=0;O<L.length;++O){const W=Object.values(L[O]);p.renderCachePool.push(...W)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,b=this._tilesDirty;for(let L=_.length-1;L>=0;L--){const O=_[L];if(p.getTileByID(O.key),p.proxyCachedFBO[O.key]!==void 0){const W=u[O.key],K=this.proxyToSource[O.key];let X=0;for(const ee in K){const le=K[ee],de=W[ee];if(!de||de.length!==le.length||le.some((pe,fe)=>pe!==de[fe]||b[ee]&&b[ee].hasOwnProperty(pe.key))){X=-1;break}++X}for(const ee in p.proxyCachedFBO[O.key])p.renderCache[p.proxyCachedFBO[O.key][ee]].dirty=X<0||X!==Object.values(W).length}}const S=[...this._drapedRenderBatches];S.sort((L,O)=>O.end-O.start-(L.end-L.start));for(const L of S)for(const O of _){if(p.proxyCachedFBO[O.key])continue;let W=p.renderCachePool.pop();W===void 0&&p.renderCache.length<50&&(W=p.renderCache.length,p.renderCache.push(this._createFBO())),W!==void 0&&(p.proxyCachedFBO[O.key]={},p.proxyCachedFBO[O.key][L.start]=W,p.renderCache[W].dirty=!0)}this._tilesDirty={}}_setupStencil(u,p,_,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,L=S.gl;if(p.length<=1)return void(this._overlapStencilType=!1);let O;if(_.isTileClipped())O=p.length,this._overlapStencilMode.test={func:L.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(p[0].overscaledZ>p[p.length-1].overscaledZ))return void(this._overlapStencilType=!1);O=1,this._overlapStencilMode.test={func:L.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+O>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=O,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(p,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(u){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[u.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(u,p){const _=this.painter,b=this.painter.context,S=b.gl;_._tileClippingMaskIDs={},b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const L=_.useProgram("clippingMask");for(const O of u){const W=_._tileClippingMaskIDs[O.key]=--p;L.draw(b,S.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:S.ALWAYS,mask:0},W,255,S.KEEP,S.KEEP,S.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Hn(O.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(u){const p=this.painter.transform;if(u.x<0||u.x>p.width||u.y<0||u.y>p.height)return null;const _=[u.x,u.y,1,1];o.transformMat4$1(_,_,p.pixelMatrixInverse),o.scale$1(_,_,1/_[3]),_[0]/=p.worldSize,_[1]/=p.worldSize;const b=p._camera.position,S=o.mercatorZfromAltitude(1,p.center.lat),L=[b[0],b[1],b[2]/S,0],O=o.subtract([],_.slice(0,3),L);o.normalize(O,O);const W=this.raycast(L,O,this._exaggeration);return W!==null&&W?(o.scaleAndAdd(L,L,O,W),L[3]=L[2],L[2]*=S,L):null}drawDepth(){const u=this.painter,p=u.context,_=this.proxySourceCache,b=Math.ceil(u.width),S=Math.ceil(u.height);if(!this._depthFBO||this._depthFBO.width===b&&this._depthFBO.height===S||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const L=p.gl,O=p.createFramebuffer(b,S,!0);p.activeTexture.set(L.TEXTURE0);const W=new o.Texture(p,{width:b,height:S,data:null},L.RGBA);W.bind(L.NEAREST,L.CLAMP_TO_EDGE),O.colorAttachment.set(W.texture);const K=p.createRenderbuffer(p.gl.DEPTH_COMPONENT16,b,S);O.depthAttachment.set(K),this._depthFBO=O,this._depthTexture=W}p.bindFramebuffer.set(this._depthFBO.framebuffer),p.viewport.set([0,0,b,S]),function(L,O,W,K){if(L.transform.projection.name==="globe")return;const X=L.context,ee=X.gl;X.clear({depth:1});const le=L.useProgram("terrainDepth"),de=new o.DepthMode(ee.LESS,o.DepthMode.ReadWrite,L.depthRangeFor3D);for(const pe of K){const fe=W.getTile(pe),me=Jp(pe.projMatrix,0);O.setupElevationDraw(fe,le),le.draw(X,ee.TRIANGLES,de,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,me,"terrain_depth",O.gridBuffer,O.gridIndexBuffer,O.gridNoSkirtSegments)}}(u,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(u,p,_){if(u.getSource()instanceof Ve)return this._setupProxiedCoordsForImageSource(u,p,_);this._findCoveringTileCache[u.id]=this._findCoveringTileCache[u.id]||{};const b=this.proxiedCoords[u.id]=[],S=this.proxyCoords;for(let O=0;O<S.length;O++){const W=S[O],K=this._findTileCoveringTileID(W,u);if(K){const X=this._createProxiedId(W,K,_[W.key]&&_[W.key][u.id]);b.push(X),this.proxyToSource[W.key][u.id]=[X]}}let L=!1;for(let O=0;O<p.length;O++){const W=u.getTile(p[O]);if(!W||!W.hasData())continue;const K=this._findTileCoveringTileID(W.tileID,this.proxySourceCache);if(K&&K.tileID.canonical.z!==W.tileID.canonical.z){const X=this.proxyToSource[K.tileID.key][u.id],ee=this._createProxiedId(K.tileID,W,_[K.tileID.key]&&_[K.tileID.key][u.id]);X?X.splice(X.length-1,0,ee):this.proxyToSource[K.tileID.key][u.id]=[ee],b.push(ee),L=!0}}this._sourceTilesOverlap[u.id]=L}_setupProxiedCoordsForImageSource(u,p,_){if(!u.getSource().loaded())return;const b=this.proxiedCoords[u.id]=[],S=this.proxyCoords,L=u.getSource(),O=new o.pointGeometry(L.tileID.x,L.tileID.y)._div(1<<L.tileID.z),W=L.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((X,ee)=>(X.min.x=Math.min(X.min.x,ee.x-O.x),X.min.y=Math.min(X.min.y,ee.y-O.y),X.max.x=Math.max(X.max.x,ee.x-O.x),X.max.y=Math.max(X.max.y,ee.y-O.y),X),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),K=(X,ee)=>{const le=X.wrap+X.canonical.x/(1<<X.canonical.z),de=X.canonical.y/(1<<X.canonical.z),pe=o.EXTENT/(1<<X.canonical.z),fe=ee.wrap+ee.canonical.x/(1<<ee.canonical.z),me=ee.canonical.y/(1<<ee.canonical.z);return le+pe<fe+W.min.x||le>fe+W.max.x||de+pe<me+W.min.y||de>me+W.max.y};for(let X=0;X<S.length;X++){const ee=S[X];for(let le=0;le<p.length;le++){const de=u.getTile(p[le]);if(!de||!de.hasData()||K(ee,de.tileID))continue;const pe=this._createProxiedId(ee,de,_[ee.key]&&_[ee.key][u.id]),fe=this.proxyToSource[ee.key][u.id];fe?fe.push(pe):this.proxyToSource[ee.key][u.id]=[pe],b.push(pe)}}}_createProxiedId(u,p,_){let b=this.orthoMatrix;if(_){const S=_.find(L=>L.key===p.tileID.key);if(S)return S}if(p.tileID.key!==u.key){const S=u.canonical.z-p.tileID.canonical.z;let L,O,W;b=o.create();const K=p.tileID.wrap-u.wrap<<u.overscaledZ;S>0?(L=o.EXTENT>>S,O=L*((p.tileID.canonical.x<<S)-u.canonical.x+K),W=L*((p.tileID.canonical.y<<S)-u.canonical.y)):(L=o.EXTENT<<-S,O=o.EXTENT*(p.tileID.canonical.x-(u.canonical.x+K<<-S)),W=o.EXTENT*(p.tileID.canonical.y-(u.canonical.y<<-S))),o.ortho(b,0,L,0,L,0,1),o.translate(b,b,[O,W,0])}return new tf(p.tileID,u.key,b)}_findTileCoveringTileID(u,p){let _=p.getTile(u);if(_&&_.hasData())return _;const b=this._findCoveringTileCache[p.id],S=b[u.key];if(_=S?p.getTileByID(S):null,_&&_.hasData()||S===null)return _;let L=_?_.tileID:u,O=L.overscaledZ;const W=p.getSource().minzoom,K=[];if(!S){const ee=p.getSource().maxzoom;if(u.canonical.z>=ee){const le=u.canonical.z-ee;p.getSource().reparseOverscaled?(O=Math.max(u.canonical.z+2,p.transform.tileZoom),L=new o.OverscaledTileID(O,u.wrap,ee,u.canonical.x>>le,u.canonical.y>>le)):le!==0&&(O=ee,L=new o.OverscaledTileID(O,u.wrap,ee,u.canonical.x>>le,u.canonical.y>>le))}L.key!==u.key&&(K.push(L.key),_=p.getTile(L))}const X=ee=>{K.forEach(le=>{b[le]=ee}),K.length=0};for(O-=1;O>=W&&(!_||!_.hasData());O--){_&&X(_.tileID.key);const ee=L.calculateScaledKey(O);if(_=p.getTileByID(ee),_&&_.hasData())break;const le=b[ee];if(le===null)break;le===void 0?K.push(ee):_=p.getTileByID(le)}return X(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(u){return this.enabled?this._findTileCoveringTileID(u,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(u,p){let _=this._tilesDirty[u];_||(_=this._tilesDirty[u]={}),_[p.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const u=function(p){let _=0;const b=new o.StructArrayLayout2ui4,S=131;for(let L=1;L<129;L++){for(let O=1;O<129;O++)_=L*S+O,b.emplaceBack(_,_+1),b.emplaceBack(_,_+S),b.emplaceBack(_+1,_+S),L===128&&b.emplaceBack(_+S,_+S+1);b.emplaceBack(_+1,_+1+S)}return b}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(u),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,u.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class rf{static cacheKey(u,p,_,b){let S=`${p}${b?b.cacheKey:""}`;for(const L of _)u.usedDefines.includes(L)&&(S+=`/${L}`);return S}constructor(u,p,_,b,S,L){const O=u.gl;this.program=O.createProgram();const W=function(ae){const Se=[];for(let Ce=0;Ce<ae.length;Ce++){if(ae[Ce]===null)continue;const ke=ae[Ce].split(" ");Se.push(ke.pop())}return Se}(_.staticAttributes),K=b?b.getBinderAttributes():[],X=W.concat(K);let ee=b?b.defines():[];ee=ee.concat(L.map(ae=>`#define ${ae}`));const le=u.isWebGL2?`#version 300 es
`:"",de=le+ee.concat(u.extStandardDerivatives&&le.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(zh):zh,zh,Oh,oy.fragmentSource,Xp.fragmentSource,_.fragmentSource).join(`
`),pe=le+ee.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Oh,oy.vertexSource,Xp.vertexSource,Zp.vertexSource,_.vertexSource).join(`
`),fe=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);O.shaderSource(fe,de),O.compileShader(fe),O.attachShader(this.program,fe);const me=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())this.failedToCreate=!0;else{O.shaderSource(me,pe),O.compileShader(me),O.attachShader(this.program,me),this.attributes={},this.numAttributes=X.length;for(let ae=0;ae<this.numAttributes;ae++)X[ae]&&(O.bindAttribLocation(this.program,ae,X[ae]),this.attributes[X[ae]]=ae);O.linkProgram(this.program),O.deleteShader(me),O.deleteShader(fe),this.fixedUniforms=S(u),this.binderUniforms=b?b.getUniforms(u):[],L.includes("TERRAIN")&&(this.terrainUniforms=(ae=>({u_dem:new o.Uniform1i(ae),u_dem_prev:new o.Uniform1i(ae),u_dem_unpack:new o.Uniform4f(ae),u_dem_tl:new o.Uniform2f(ae),u_dem_scale:new o.Uniform1f(ae),u_dem_tl_prev:new o.Uniform2f(ae),u_dem_scale_prev:new o.Uniform1f(ae),u_dem_size:new o.Uniform1f(ae),u_dem_lerp:new o.Uniform1f(ae),u_exaggeration:new o.Uniform1f(ae),u_depth:new o.Uniform1i(ae),u_depth_size_inv:new o.Uniform2f(ae),u_meter_to_dem:new o.Uniform1f(ae),u_label_plane_matrix_inv:new o.UniformMatrix4f(ae)}))(u)),L.includes("GLOBE")&&(this.globeUniforms=(ae=>({u_tile_tl_up:new o.Uniform3f(ae),u_tile_tr_up:new o.Uniform3f(ae),u_tile_br_up:new o.Uniform3f(ae),u_tile_bl_up:new o.Uniform3f(ae),u_tile_up_scale:new o.Uniform1f(ae)}))(u)),L.includes("FOG")&&(this.fogUniforms=(ae=>({u_fog_matrix:new o.UniformMatrix4f(ae),u_fog_range:new o.Uniform2f(ae),u_fog_color:new o.Uniform4f(ae),u_fog_horizon_blend:new o.Uniform1f(ae),u_fog_temporal_offset:new o.Uniform1f(ae),u_frustum_tl:new o.Uniform3f(ae),u_frustum_tr:new o.Uniform3f(ae),u_frustum_br:new o.Uniform3f(ae),u_frustum_bl:new o.Uniform3f(ae),u_globe_pos:new o.Uniform3f(ae),u_globe_radius:new o.Uniform1f(ae),u_globe_transition:new o.Uniform1f(ae),u_is_globe:new o.Uniform1i(ae),u_viewport:new o.Uniform2f(ae)}))(u))}}setTerrainUniformValues(u,p){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const b in p)_[b]&&_[b].set(this.program,b,p[b])}}setGlobeUniformValues(u,p){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const b in p)_[b]&&_[b].set(this.program,b,p[b])}}setFogUniformValues(u,p){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const b in p)_[b].set(this.program,b,p[b])}}draw(u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe){const me=u.gl;if(this.failedToCreate)return;u.program.set(this.program),u.setDepthMode(_),u.setStencilMode(b),u.setColorMode(S),u.setCullFace(L);for(const Se of Object.keys(this.fixedUniforms))this.fixedUniforms[Se].set(this.program,Se,O[Se]);pe&&pe.setUniforms(this.program,u,this.binderUniforms,le,{zoom:de});const ae={[me.LINES]:2,[me.TRIANGLES]:3,[me.LINE_STRIP]:1}[p];for(const Se of ee.get()){const Ce=Se.vaos||(Se.vaos={});(Ce[W]||(Ce[W]=new sc)).bind(u,this,K,pe?pe.getPaintVertexBuffers():[],X,Se.vertexOffset,fe||[]),me.drawElements(p,Se.primitiveLength*ae,me.UNSIGNED_SHORT,Se.primitiveOffset*ae*2)}}}function ly(g,u){const p=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,g.transform.tileZoom)/p,b=_*(u.tileID.canonical.x+u.tileID.wrap*p),S=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_tile_units_to_pixels:1/Qt(u,1,g.transform.tileZoom),u_pixel_coord_upper:[b>>16,S>>16],u_pixel_coord_lower:[65535&b,65535&S]}}const t1=o.create(),jh=(g,u,p,_,b,S,L,O,W,K,X)=>{const ee=u.style.light,le=ee.properties.get("position"),de=[le.x,le.y,le.z],pe=o.create$1();ee.properties.get("anchor")==="viewport"&&(o.fromRotation(pe,-u.transform.angle),o.transformMat3(de,de,pe));const fe=ee.properties.get("color"),me=u.transform,ae={u_matrix:g,u_lightpos:de,u_lightintensity:ee.properties.get("intensity"),u_lightcolor:[fe.r,fe.g,fe.b],u_vertical_gradient:+p,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:t1,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:b,u_edge_radius:S};return me.projection.name==="globe"&&(ae.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],ae.u_zoom_transition=W,ae.u_inv_rot_matrix=X,ae.u_merc_center=K,ae.u_up_dir=me.projection.upVector(new o.CanonicalTileID(0,0,0),K[0]*o.EXTENT,K[1]*o.EXTENT),ae.u_height_lift=O),ae},of=(g,u,p,_,b,S,L,O,W,K,X,ee)=>{const le=jh(g,u,p,_,b,S,L,W,K,X,ee),de={u_height_factor:-Math.pow(2,L.overscaledZ)/O.tileSize/8};return o.extend(le,ly(u,O),de)},Vh=g=>({u_matrix:g}),$h=(g,u,p)=>o.extend(Vh(g),ly(u,p)),uy=(g,u)=>({u_matrix:g,u_world:u}),cy=(g,u,p,_)=>o.extend($h(g,u,p),{u_world:_}),n1=o.create(),hc=(g,u,p,_,b,S)=>{const L=g.transform,O=L.projection.name==="globe";let W;if(S.paint.get("circle-pitch-alignment")==="map")if(O){const X=o.globePixelsToTileUnits(L.zoom,u.canonical)*L._pixelsPerMercatorPixel;W=Float32Array.from([X,0,0,X])}else W=L.calculatePixelsToTileUnitsMatrix(p);else W=new Float32Array([L.pixelsToGLUnits[0],0,0,L.pixelsToGLUnits[1]]);const K={u_camera_to_center_distance:L.cameraToCenterDistance,u_matrix:g.translatePosMatrix(u.projMatrix,p,S.paint.get("circle-translate"),S.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:W,u_inv_rot_matrix:n1,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){K.u_inv_rot_matrix=_,K.u_merc_center=b,K.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],K.u_zoom_transition=o.globeToMercatorTransition(L.zoom);const X=b[0]*o.EXTENT,ee=b[1]*o.EXTENT;K.u_up_dir=L.projection.upVector(new o.CanonicalTileID(0,0,0),X,ee)}return K},dc=g=>{const u=[];return g.paint.get("circle-pitch-alignment")==="map"&&u.push("PITCH_WITH_MAP"),g.paint.get("circle-pitch-scale")==="map"&&u.push("SCALE_WITH_MAP"),u},hy=(g,u,p,_)=>{const b=o.EXTENT/p.tileSize;return{u_matrix:g,u_camera_to_center_distance:u.getCameraToCenterDistance(_),u_extrude_scale:[u.pixelsToGLUnits[0]/b,u.pixelsToGLUnits[1]/b]}},pc=(g,u,p=1)=>({u_matrix:g,u_color:u,u_overlay:0,u_overlay_scale:p}),af=o.create(),La=(g,u,p,_,b,S,L)=>{const O=g.transform,W=O.projection.name==="globe",K=W?o.globePixelsToTileUnits(O.zoom,u.canonical)*O._pixelsPerMercatorPixel:Qt(p,1,S),X={u_matrix:u.projMatrix,u_extrude_scale:K,u_intensity:L,u_inv_rot_matrix:af,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(W){X.u_inv_rot_matrix=_,X.u_merc_center=b,X.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],X.u_zoom_transition=o.globeToMercatorTransition(O.zoom);const ee=b[0]*o.EXTENT,le=b[1]*o.EXTENT;X.u_up_dir=O.projection.upVector(new o.CanonicalTileID(0,0,0),ee,le)}return X},sf=(g,u,p,_,b,S,L)=>{const O=g.transform,W=O.calculatePixelsToTileUnitsMatrix(u);return{u_matrix:lf(g,u,p,_),u_pixels_to_tile_units:W,u_device_pixel_ratio:S,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:b,u_texsize:Wh(p)?u.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Hh(u,g.transform),u_alpha_discard_threshold:0,u_trim_offset:L}},dy=(g,u,p,_,b)=>{const S=g.transform;return{u_matrix:lf(g,u,p,_),u_texsize:u.imageAtlasTexture.size,u_pixels_to_tile_units:S.calculatePixelsToTileUnitsMatrix(u),u_device_pixel_ratio:b,u_image:0,u_tile_units_to_pixels:Hh(u,S),u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Hh(g,u){return 1/Qt(g,1,u.tileZoom)}function lf(g,u,p,_){return g.translatePosMatrix(_||u.tileID.projMatrix,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}function Wh(g){const u=g.paint.get("line-dasharray").value;return u.value||u.kind!=="constant"}const r1=(g,u,p,_,b,S)=>{return{u_matrix:g,u_tl_parent:u,u_scale_parent:p,u_fade_t:_.mix,u_opacity:_.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(O=b.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(L=b.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:uf(b.paint.get("raster-hue-rotate")),u_perspective_transform:S};var L,O};function uf(g){g*=Math.PI/180;const u=Math.sin(g),p=Math.cos(g);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const py=o.create(),fc=(g,u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe)=>{const me=b.transform,ae={u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:me.cameraToCenterDistance,u_rotate_symbol:+p,u_aspect_ratio:me.width/me.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:L,u_coord_matrix:O,u_is_text:+W,u_pitch_with_map:+_,u_texsize:K,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:py,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:py,u_up_vector:[0,-1,0]};return fe.name==="globe"&&(ae.u_tile_id=[X.canonical.x,X.canonical.y,1<<X.canonical.z],ae.u_zoom_transition=ee,ae.u_inv_rot_matrix=de,ae.u_merc_center=le,ae.u_camera_forward=me._camera.forward(),ae.u_ecef_origin=o.globeECEFOrigin(me.globeMatrix,X.toUnwrapped()),ae.u_tile_matrix=Float32Array.from(me.globeMatrix),ae.u_up_vector=pe),ae},fy=(g,u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe,me)=>o.extend(fc(g,u,p,_,b,S,L,O,W,K,ee,le,de,pe,fe,me),{u_gamma_scale:_?b.transform.cameraToCenterDistance*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+X}),cf=(g,u,p,_,b,S,L,O,W,K,X,ee,le,de,pe,fe)=>o.extend(fy(g,u,p,_,b,S,L,O,!0,W,!0,X,ee,le,de,pe,fe),{u_texsize_icon:K,u_texture_icon:1}),i1=(g,u,p)=>({u_matrix:g,u_opacity:u,u_color:p}),hf=(g,u,p,_,b)=>o.extend(function(S,L,O){const W=L.imageManager.getPattern(S.toString()),{width:K,height:X}=L.imageManager.getPixelSize(),ee=Math.pow(2,O.tileID.overscaledZ),le=O.tileSize*Math.pow(2,L.transform.tileZoom)/ee,de=le*(O.tileID.canonical.x+O.tileID.wrap*ee),pe=le*O.tileID.canonical.y;return{u_image:0,u_pattern_tl:W.tl,u_pattern_br:W.br,u_texsize:[K,X],u_pattern_size:W.displaySize,u_tile_units_to_pixels:1/Qt(O,1,L.transform.tileZoom),u_pixel_coord_upper:[de>>16,pe>>16],u_pixel_coord_lower:[65535&de,65535&pe]}}(_,p,b),{u_matrix:g,u_opacity:u}),o1={fillExtrusion:g=>({u_matrix:new o.UniformMatrix4f(g),u_lightpos:new o.Uniform3f(g),u_lightintensity:new o.Uniform1f(g),u_lightcolor:new o.Uniform3f(g),u_vertical_gradient:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_edge_radius:new o.Uniform1f(g),u_ao:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_up_dir:new o.Uniform3f(g),u_height_lift:new o.Uniform1f(g)}),fillExtrusionPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_lightpos:new o.Uniform3f(g),u_lightintensity:new o.Uniform1f(g),u_lightcolor:new o.Uniform3f(g),u_vertical_gradient:new o.Uniform1f(g),u_height_factor:new o.Uniform1f(g),u_edge_radius:new o.Uniform1f(g),u_ao:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_up_dir:new o.Uniform3f(g),u_height_lift:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g)}),fill:g=>({u_matrix:new o.UniformMatrix4f(g)}),fillPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),fillOutline:g=>({u_matrix:new o.UniformMatrix4f(g),u_world:new o.Uniform2f(g)}),fillOutlinePattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_world:new o.Uniform2f(g),u_image:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),circle:g=>({u_camera_to_center_distance:new o.Uniform1f(g),u_extrude_scale:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_up_dir:new o.Uniform3f(g)}),collisionBox:g=>({u_matrix:new o.UniformMatrix4f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_extrude_scale:new o.Uniform2f(g)}),collisionCircle:g=>({u_matrix:new o.UniformMatrix4f(g),u_inv_matrix:new o.UniformMatrix4f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_viewport_size:new o.Uniform2f(g)}),debug:g=>({u_color:new o.UniformColor(g),u_matrix:new o.UniformMatrix4f(g),u_overlay:new o.Uniform1i(g),u_overlay_scale:new o.Uniform1f(g)}),clippingMask:g=>({u_matrix:new o.UniformMatrix4f(g)}),heatmap:g=>({u_extrude_scale:new o.Uniform1f(g),u_intensity:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_up_dir:new o.Uniform3f(g)}),heatmapTexture:g=>({u_image:new o.Uniform1i(g),u_color_ramp:new o.Uniform1i(g),u_opacity:new o.Uniform1f(g)}),hillshade:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_latrange:new o.Uniform2f(g),u_light:new o.Uniform2f(g),u_shadow:new o.UniformColor(g),u_highlight:new o.UniformColor(g),u_accent:new o.UniformColor(g)}),hillshadePrepare:g=>({u_matrix:new o.UniformMatrix4f(g),u_image:new o.Uniform1i(g),u_dimension:new o.Uniform2f(g),u_zoom:new o.Uniform1f(g),u_unpack:new o.Uniform4f(g)}),line:g=>({u_matrix:new o.UniformMatrix4f(g),u_pixels_to_tile_units:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_units_to_pixels:new o.Uniform2f(g),u_dash_image:new o.Uniform1i(g),u_gradient_image:new o.Uniform1i(g),u_image_height:new o.Uniform1f(g),u_texsize:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_alpha_discard_threshold:new o.Uniform1f(g),u_trim_offset:new o.Uniform2f(g)}),linePattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_texsize:new o.Uniform2f(g),u_pixels_to_tile_units:new o.UniformMatrix2f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_units_to_pixels:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g),u_alpha_discard_threshold:new o.Uniform1f(g)}),raster:g=>({u_matrix:new o.UniformMatrix4f(g),u_tl_parent:new o.Uniform2f(g),u_scale_parent:new o.Uniform1f(g),u_fade_t:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_image0:new o.Uniform1i(g),u_image1:new o.Uniform1i(g),u_brightness_low:new o.Uniform1f(g),u_brightness_high:new o.Uniform1f(g),u_saturation_factor:new o.Uniform1f(g),u_contrast_factor:new o.Uniform1f(g),u_spin_weights:new o.Uniform3f(g),u_perspective_transform:new o.Uniform2f(g)}),symbolIcon:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_camera_forward:new o.Uniform3f(g),u_tile_matrix:new o.UniformMatrix4f(g),u_up_vector:new o.Uniform3f(g),u_ecef_origin:new o.Uniform3f(g),u_texture:new o.Uniform1i(g)}),symbolSDF:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_texture:new o.Uniform1i(g),u_gamma_scale:new o.Uniform1f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_tile_id:new o.Uniform3f(g),u_zoom_transition:new o.Uniform1f(g),u_inv_rot_matrix:new o.UniformMatrix4f(g),u_merc_center:new o.Uniform2f(g),u_camera_forward:new o.Uniform3f(g),u_tile_matrix:new o.UniformMatrix4f(g),u_up_vector:new o.Uniform3f(g),u_ecef_origin:new o.Uniform3f(g),u_is_halo:new o.Uniform1i(g)}),symbolTextAndIcon:g=>({u_is_size_zoom_constant:new o.Uniform1i(g),u_is_size_feature_constant:new o.Uniform1i(g),u_size_t:new o.Uniform1f(g),u_size:new o.Uniform1f(g),u_camera_to_center_distance:new o.Uniform1f(g),u_rotate_symbol:new o.Uniform1i(g),u_aspect_ratio:new o.Uniform1f(g),u_fade_change:new o.Uniform1f(g),u_matrix:new o.UniformMatrix4f(g),u_label_plane_matrix:new o.UniformMatrix4f(g),u_coord_matrix:new o.UniformMatrix4f(g),u_is_text:new o.Uniform1i(g),u_pitch_with_map:new o.Uniform1i(g),u_texsize:new o.Uniform2f(g),u_texsize_icon:new o.Uniform2f(g),u_texture:new o.Uniform1i(g),u_texture_icon:new o.Uniform1i(g),u_gamma_scale:new o.Uniform1f(g),u_device_pixel_ratio:new o.Uniform1f(g),u_is_halo:new o.Uniform1i(g)}),background:g=>({u_matrix:new o.UniformMatrix4f(g),u_opacity:new o.Uniform1f(g),u_color:new o.UniformColor(g)}),backgroundPattern:g=>({u_matrix:new o.UniformMatrix4f(g),u_opacity:new o.Uniform1f(g),u_image:new o.Uniform1i(g),u_pattern_tl:new o.Uniform2f(g),u_pattern_br:new o.Uniform2f(g),u_texsize:new o.Uniform2f(g),u_pattern_size:new o.Uniform2f(g),u_pixel_coord_upper:new o.Uniform2f(g),u_pixel_coord_lower:new o.Uniform2f(g),u_tile_units_to_pixels:new o.Uniform1f(g)}),terrainRaster:Fh,terrainDepth:Fh,skybox:g=>({u_matrix:new o.UniformMatrix4f(g),u_sun_direction:new o.Uniform3f(g),u_cubemap:new o.Uniform1i(g),u_opacity:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g)}),skyboxGradient:g=>({u_matrix:new o.UniformMatrix4f(g),u_color_ramp:new o.Uniform1i(g),u_center_direction:new o.Uniform3f(g),u_radius:new o.Uniform1f(g),u_opacity:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g)}),skyboxCapture:g=>({u_matrix_3f:new o.UniformMatrix3f(g),u_sun_direction:new o.Uniform3f(g),u_sun_intensity:new o.Uniform1f(g),u_color_tint_r:new o.Uniform4f(g),u_color_tint_m:new o.Uniform4f(g),u_luminance:new o.Uniform1f(g)}),globeRaster:g=>({u_proj_matrix:new o.UniformMatrix4f(g),u_globe_matrix:new o.UniformMatrix4f(g),u_normalize_matrix:new o.UniformMatrix4f(g),u_merc_matrix:new o.UniformMatrix4f(g),u_zoom_transition:new o.Uniform1f(g),u_merc_center:new o.Uniform2f(g),u_image0:new o.Uniform1i(g),u_grid_matrix:new o.UniformMatrix3f(g),u_skirt_height:new o.Uniform1f(g),u_frustum_tl:new o.Uniform3f(g),u_frustum_tr:new o.Uniform3f(g),u_frustum_br:new o.Uniform3f(g),u_frustum_bl:new o.Uniform3f(g),u_globe_pos:new o.Uniform3f(g),u_globe_radius:new o.Uniform1f(g),u_viewport:new o.Uniform2f(g)}),globeAtmosphere:g=>({u_frustum_tl:new o.Uniform3f(g),u_frustum_tr:new o.Uniform3f(g),u_frustum_br:new o.Uniform3f(g),u_frustum_bl:new o.Uniform3f(g),u_horizon:new o.Uniform1f(g),u_transition:new o.Uniform1f(g),u_fadeout_range:new o.Uniform1f(g),u_color:new o.Uniform4f(g),u_high_color:new o.Uniform4f(g),u_space_color:new o.Uniform4f(g),u_star_intensity:new o.Uniform1f(g),u_star_density:new o.Uniform1f(g),u_star_size:new o.Uniform1f(g),u_temporal_offset:new o.Uniform1f(g),u_horizon_angle:new o.Uniform1f(g),u_rotation_matrix:new o.UniformMatrix4f(g)})};let sl;function my(g,u,p,_,b,S,L){const O=g.context,W=O.gl,K=g.transform,X=g.useProgram("collisionBox"),ee=[];let le=0,de=0;for(let ke=0;ke<_.length;ke++){const Fe=_[ke],ze=u.getTile(Fe),$e=ze.getBucket(p);if(!$e)continue;const qe=Hp(Fe,$e,K);let tt=qe;b[0]===0&&b[1]===0||(tt=g.translatePosMatrix(qe,ze,b,S));const ot=L?$e.textCollisionBox:$e.iconCollisionBox,Ot=$e.collisionCircleArray;if(Ot.length>0){const Je=o.create(),wt=tt;o.mul(Je,$e.placementInvProjMatrix,K.glCoordMatrix),o.mul(Je,Je,$e.placementViewportMatrix),ee.push({circleArray:Ot,circleOffset:de,transform:wt,invTransform:Je,projection:$e.getProjection()}),le+=Ot.length/4,de=le}ot&&(g.terrain&&g.terrain.setupElevationDraw(ze,X),X.draw(O,W.LINES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,hy(tt,K,ze,$e.getProjection()),p.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,null,K.zoom,null,[ot.collisionVertexBuffer,ot.collisionVertexBufferExt]))}if(!L||!ee.length)return;const pe=g.useProgram("collisionCircle"),fe=new o.StructArrayLayout2f1f2i16;fe.resize(4*le),fe._trim();let me=0;for(const ke of ee)for(let Fe=0;Fe<ke.circleArray.length/4;Fe++){const ze=4*Fe,$e=ke.circleArray[ze+0],qe=ke.circleArray[ze+1],tt=ke.circleArray[ze+2],ot=ke.circleArray[ze+3];fe.emplace(me++,$e,qe,tt,ot,0),fe.emplace(me++,$e,qe,tt,ot,1),fe.emplace(me++,$e,qe,tt,ot,2),fe.emplace(me++,$e,qe,tt,ot,3)}(!sl||sl.length<2*le)&&(sl=function(ke){const Fe=2*ke,ze=new o.StructArrayLayout3ui6;ze.resize(Fe),ze._trim();for(let $e=0;$e<Fe;$e++){const qe=6*$e;ze.uint16[qe+0]=4*$e+0,ze.uint16[qe+1]=4*$e+1,ze.uint16[qe+2]=4*$e+2,ze.uint16[qe+3]=4*$e+2,ze.uint16[qe+4]=4*$e+3,ze.uint16[qe+5]=4*$e+0}return ze}(le));const ae=O.createIndexBuffer(sl,!0),Se=O.createVertexBuffer(fe,o.collisionCircleLayout.members,!0);for(const ke of ee){const Fe={u_matrix:ke.transform,u_inv_matrix:ke.invTransform,u_camera_to_center_distance:(Ce=K).getCameraToCenterDistance(ke.projection),u_viewport_size:[Ce.width,Ce.height]};pe.draw(O,W.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,g.colorModeForRenderPass(),o.CullFaceMode.disabled,Fe,p.id,Se,ae,o.SegmentVector.simpleSegment(0,2*ke.circleOffset,ke.circleArray.length,ke.circleArray.length/2),null,K.zoom)}var Ce;Se.destroy(),ae.destroy()}const df=o.create();function gy({width:g,height:u,anchor:p,textOffset:_,textScale:b},S){const{horizontalAlign:L,verticalAlign:O}=o.getAnchorAlignment(p),W=-(L-.5)*g,K=-(O-.5)*u,X=o.evaluateVariableOffset(p,_);return new o.pointGeometry((W/b+X[0])*S,(K/b+X[1])*S)}function Kl(g,u,p,_,b,S,L,O,W,K,X){const ee=g.text.placedSymbolArray,le=g.text.dynamicLayoutVertexArray,de=g.icon.dynamicLayoutVertexArray,pe={},fe=g.getProjection(),me=Ah(O,fe,S),ae=S.elevation,Se=fe.upVectorScale(O.canonical,S.center.lat,S.worldSize).metersToTile;le.clear();for(let Ce=0;Ce<ee.length;Ce++){const ke=ee.get(Ce),{tileAnchorX:Fe,tileAnchorY:ze,numGlyphs:$e}=ke,qe=g.allowVerticalPlacement&&!ke.placedOrientation,tt=ke.hidden||!ke.crossTileID||qe?null:_[ke.crossTileID];if(tt){let ot=0,Ot=0,Je=0;if(ae){const rn=ae?ae.getAtTileOffset(O,Fe,ze):0,[Tn,en,Xt]=fe.upVector(O.canonical,Fe,ze);ot=rn*Tn*Se,Ot=rn*en*Se,Je=rn*Xt*Se}let[wt,dt,At,rt]=Ut(ke.projectedAnchorX+ot,ke.projectedAnchorY+Ot,ke.projectedAnchorZ+Je,p?me:L);const Ge=jn(S.getCameraToCenterDistance(fe),rt);let at=b.evaluateSizeForFeature(g.textSizeData,K,ke)*Ge/o.ONE_EM;p&&(at*=g.tilePixelRatio/W);const kt=gy(tt,at);p?({x:wt,y:dt,z:At}=fe.projectTilePoint(Fe+kt.x,ze+kt.y,O.canonical),[wt,dt,At]=Ut(wt+ot,dt+Ot,At+Je,L)):(u&&kt._rotate(-S.angle),wt+=kt.x,dt+=kt.y,At=0);const It=g.allowVerticalPlacement&&ke.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let rn=0;rn<$e;rn++)o.addDynamicAttributes(le,wt,dt,At,It);X&&ke.associatedIconIndex>=0&&(pe[ke.associatedIconIndex]={x:wt,y:dt,z:At,angle:It})}else Er($e,le)}if(X){de.clear();const Ce=g.icon.placedSymbolArray;for(let ke=0;ke<Ce.length;ke++){const Fe=Ce.get(ke),{numGlyphs:ze}=Fe,$e=pe[ke];if(Fe.hidden||!$e)Er(ze,de);else{const{x:qe,y:tt,z:ot,angle:Ot}=$e;for(let Je=0;Je<ze;Je++)o.addDynamicAttributes(de,qe,tt,ot,Ot)}}g.icon.dynamicLayoutVertexBuffer.updateData(de)}g.text.dynamicLayoutVertexBuffer.updateData(le)}function a1(g,u,p){return p.iconsInText&&u?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function yy(g,u,p,_,b,S,L,O,W,K,X,ee){const le=g.context,de=le.gl,pe=g.transform,fe=O==="map",me=W==="map",ae=fe&&p.layout.get("symbol-placement")!=="point",Se=fe&&!me&&!ae,Ce=p.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ke=!1;const Fe=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),ze=[o.mercatorXfromLng(pe.center.lng),o.mercatorYfromLat(pe.center.lat)],$e=p.layout.get("text-variable-anchor"),qe=pe.projection.name==="globe",tt=[],ot=[0,-1,0];let Ot=ot;!qe&&!pe.mercatorFromTransition||fe||(Ot=function(Je){const wt=Je._camera.getWorldToCamera(Je.worldSize,1),dt=o.multiply([],wt,Je.globeMatrix);o.invert(dt,dt);const At=[0,0,0],rt=[0,1,0,0];return o.transformMat4$1(rt,rt,dt),At[0]=rt[0],At[1]=rt[1],At[2]=rt[2],o.normalize(At,At),At}(pe));for(const Je of _){const wt=u.getTile(Je),dt=wt.getBucket(p);if(!dt||dt.projection.name==="mercator"&&qe)continue;const At=b?dt.text:dt.icon;if(!At||dt.fullyClipped||!At.segments.get().length)continue;const rt=At.programConfigurations.get(p.id),Ge=b||dt.sdfIcons,at=b?dt.textSizeData:dt.iconSizeData,kt=me||pe.pitch!==0,It=o.evaluateSizeForZoom(at,pe.zoom);let rn,Tn,en,Xt,an=[0,0],On=null;if(b){if(Tn=wt.glyphAtlasTexture,en=de.LINEAR,rn=wt.glyphAtlasTexture.size,dt.iconsInText){an=wt.imageAtlasTexture.size,On=wt.imageAtlasTexture;const jo=at.kind==="composite"||at.kind==="camera";Xt=kt||g.options.rotating||g.options.zooming||jo?de.LINEAR:de.NEAREST}}else{const jo=p.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;Tn=wt.imageAtlasTexture,en=Ge||g.options.rotating||g.options.zooming||jo||kt?de.LINEAR:de.NEAREST,rn=wt.imageAtlasTexture.size}const un=dt.projection.name==="globe",nr=un?Ot:ot,ir=un?o.globeToMercatorTransition(pe.zoom):0,Cr=Ah(Je,dt.getProjection(),pe),gr=pe.calculatePixelsToTileUnitsMatrix(wt),li=jl(Cr,wt.tileID.canonical,me,fe,pe,dt.getProjection(),gr),To=g.terrain&&me&&ae?o.invert(o.create(),li):df,fa=Vl(Cr,wt.tileID.canonical,me,fe,pe,dt.getProjection(),gr),as=$e&&dt.hasTextData(),zr=p.layout.get("icon-text-fit")!=="none"&&as&&dt.hasIconData();if(ae){const jo=pe.elevation,Qo=jo?jo.getAtTileOffsetFunc(Je,pe.center.lat,pe.worldSize,dt.getProjection()):null,ss=Jg(Cr,wt.tileID.canonical,me,fe,pe,dt.getProjection(),gr);Ra(dt,Cr,g,b,ss,fa,me,K,Qo,Je)}const yr=ae||b&&$e||zr,Kn=g.translatePosMatrix(Cr,wt,S,L),qr=yr?df:li,Yi=g.translatePosMatrix(fa,wt,S,L,!0),Pr=dt.getProjection().createInversionMatrix(pe,Je.canonical),Ji=[];g.terrainRenderModeElevated()&&me&&Ji.push("PITCH_WITH_MAP_TERRAIN"),un&&Ji.push("PROJECTION_GLOBE_VIEW"),yr&&Ji.push("PROJECTED_POS_ON_VIEWPORT");const Qi=Ge&&p.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Is;Is=Ge?dt.iconsInText?cf(at.kind,It,Se,me,g,Kn,qr,Yi,rn,an,Je,ir,ze,Pr,nr,dt.getProjection()):fy(at.kind,It,Se,me,g,Kn,qr,Yi,b,rn,!0,Je,ir,ze,Pr,nr,dt.getProjection()):fc(at.kind,It,Se,me,g,Kn,qr,Yi,b,rn,Je,ir,ze,Pr,nr,dt.getProjection());const su={program:g.useProgram(a1(Ge,b,dt),rt,Ji),buffers:At,uniformValues:Is,atlasTexture:Tn,atlasTextureIcon:On,atlasInterpolation:en,atlasInterpolationIcon:Xt,isSDF:Ge,hasHalo:Qi,tile:wt,labelPlaneMatrixInv:To};if(Ce&&dt.canOverlap){ke=!0;const jo=At.segments.get();for(const Qo of jo)tt.push({segments:new o.SegmentVector([Qo]),sortKey:Qo.sortKey,state:su})}else tt.push({segments:At.segments,sortKey:0,state:su})}ke&&tt.sort((Je,wt)=>Je.sortKey-wt.sortKey);for(const Je of tt){const wt=Je.state;if(g.terrain&&g.terrain.setupElevationDraw(wt.tile,wt.program,{useDepthForOcclusion:!qe,labelPlaneMatrixInv:wt.labelPlaneMatrixInv}),le.activeTexture.set(de.TEXTURE0),wt.atlasTexture.bind(wt.atlasInterpolation,de.CLAMP_TO_EDGE),wt.atlasTextureIcon&&(le.activeTexture.set(de.TEXTURE1),wt.atlasTextureIcon&&wt.atlasTextureIcon.bind(wt.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),wt.isSDF){const dt=wt.uniformValues;wt.hasHalo&&(dt.u_is_halo=1,vy(wt.buffers,Je.segments,p,g,wt.program,Fe,X,ee,dt)),dt.u_is_halo=0}vy(wt.buffers,Je.segments,p,g,wt.program,Fe,X,ee,wt.uniformValues)}}function vy(g,u,p,_,b,S,L,O,W){const K=_.context,X=[g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer,g.globeExtVertexBuffer];b.draw(K,K.gl.TRIANGLES,S,L,O,o.CullFaceMode.disabled,W,p.id,g.layoutVertexBuffer,g.indexBuffer,u,p.paint,_.transform.zoom,g.programConfigurations.get(p.id),X)}function _y(g,u,p,_,b,S,L){const O=g.context.gl,W=p.paint.get("fill-pattern"),K=W&&W.constantOr(1);let X,ee,le,de,pe;L?(ee=K&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=O.LINES):(ee=K?"fillPattern":"fill",X=O.TRIANGLES);for(const fe of _){const me=u.getTile(fe);if(K&&!me.patternsLoaded())continue;const ae=me.getBucket(p);if(!ae)continue;g.prepareDrawTile();const Se=ae.programConfigurations.get(p.id),Ce=g.useProgram(ee,Se);K&&(g.context.activeTexture.set(O.TEXTURE0),me.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Se.updatePaintBuffers());const ke=W.constantOr(null);if(ke&&me.imageAtlas){const ze=me.imageAtlas.patternPositions[ke.toString()];ze&&Se.setConstantPatternPositions(ze)}const Fe=g.translatePosMatrix(fe.projMatrix,me,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(L){de=ae.indexBuffer2,pe=ae.segments2;const ze=g.terrain&&g.terrain.renderingToTexture?g.terrain.drapeBufferSize:[O.drawingBufferWidth,O.drawingBufferHeight];le=ee==="fillOutlinePattern"&&K?cy(Fe,g,me,ze):uy(Fe,ze)}else de=ae.indexBuffer,pe=ae.segments,le=K?$h(Fe,g,me):Vh(Fe);g.prepareDrawProgram(g.context,Ce,fe.toUnwrapped()),Ce.draw(g.context,X,b,g.stencilModeForClipping(fe),S,o.CullFaceMode.disabled,le,p.id,ae.layoutVertexBuffer,de,pe,p.paint,g.transform.zoom,Se)}}function pf(g,u,p,_,b,S,L){const O=g.context,W=O.gl,K=g.transform,X=p.paint.get("fill-extrusion-pattern"),ee=X.constantOr(1),le=p.paint.get("fill-extrusion-opacity"),de=[p.paint.get("fill-extrusion-ambient-occlusion-intensity"),p.paint.get("fill-extrusion-ambient-occlusion-radius")],pe=p.layout.get("fill-extrusion-edge-radius"),fe=K.projection.name==="globe"?o.fillExtrusionHeightLift():0,me=K.projection.name==="globe",ae=me?o.globeToMercatorTransition(K.zoom):0,Se=[o.mercatorXfromLng(K.center.lng),o.mercatorYfromLat(K.center.lat)],Ce=[];me&&Ce.push("PROJECTION_GLOBE_VIEW"),de[0]>0&&Ce.push("FAUX_AO");for(const ke of _){const Fe=u.getTile(ke),ze=Fe.getBucket(p);if(!ze||ze.projection.name!==K.projection.name)continue;const $e=ze.programConfigurations.get(p.id),qe=g.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",$e,Ce);if(g.terrain){const At=g.terrain;if(g.style.terrainSetForDrapingOnly())At.setupElevationDraw(Fe,qe,{useMeterToDem:!0});else{if(!ze.enableTerrain)continue;if(At.setupElevationDraw(Fe,qe,{useMeterToDem:!0}),s1(O,u,ke,ze,p,At),!ze.centroidVertexBuffer){const rt=qe.attributes.a_centroid_pos;rt!==void 0&&W.vertexAttrib2f(rt,0,0)}}}ee&&(g.context.activeTexture.set(W.TEXTURE0),Fe.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),$e.updatePaintBuffers());const tt=X.constantOr(null);if(tt&&Fe.imageAtlas){const At=Fe.imageAtlas.patternPositions[tt.toString()];At&&$e.setConstantPatternPositions(At)}const ot=g.translatePosMatrix(ke.projMatrix,Fe,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Ot=K.projection.createInversionMatrix(K,ke.canonical),Je=p.paint.get("fill-extrusion-vertical-gradient"),wt=ee?of(ot,g,Je,le,de,pe,ke,Fe,fe,ae,Se,Ot):jh(ot,g,Je,le,de,pe,ke,fe,ae,Se,Ot);g.prepareDrawProgram(O,qe,ke.toUnwrapped());const dt=[];g.terrain&&dt.push(ze.centroidVertexBuffer),me&&dt.push(ze.layoutVertexExtBuffer),qe.draw(O,O.gl.TRIANGLES,b,S,L,o.CullFaceMode.backCCW,wt,p.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,p.paint,g.transform.zoom,$e,dt)}}function s1(g,u,p,_,b,S){const L=[ae=>{let Se=ae.canonical.x-1,Ce=ae.wrap;return Se<0&&(Se=(1<<ae.canonical.z)-1,Ce--),new o.OverscaledTileID(ae.overscaledZ,Ce,ae.canonical.z,Se,ae.canonical.y)},ae=>{let Se=ae.canonical.x+1,Ce=ae.wrap;return Se===1<<ae.canonical.z&&(Se=0,Ce++),new o.OverscaledTileID(ae.overscaledZ,Ce,ae.canonical.z,Se,ae.canonical.y)},ae=>new o.OverscaledTileID(ae.overscaledZ,ae.wrap,ae.canonical.z,ae.canonical.x,(ae.canonical.y===0?1<<ae.canonical.z:ae.canonical.y)-1),ae=>new o.OverscaledTileID(ae.overscaledZ,ae.wrap,ae.canonical.z,ae.canonical.x,ae.canonical.y===(1<<ae.canonical.z)-1?0:ae.canonical.y+1)],O=ae=>{const Se=u.getSource().minzoom,Ce=Fe=>{const ze=u.getTileByID(Fe);if(ze&&ze.hasData())return ze.getBucket(b)},ke=[0,-1,1];for(const Fe of ke){if(ae.overscaledZ+Fe<Se)continue;const ze=Ce(ae.calculateScaledKey(ae.overscaledZ+Fe));if(ze)return ze}},W=[0,0,0],K=(ae,Se)=>(W[0]=Math.min(ae.min.y,Se.min.y),W[1]=Math.max(ae.max.y,Se.max.y),W[2]=o.EXTENT-Se.min.x>ae.max.x?Se.min.x-o.EXTENT:ae.max.x,W),X=(ae,Se)=>(W[0]=Math.min(ae.min.x,Se.min.x),W[1]=Math.max(ae.max.x,Se.max.x),W[2]=o.EXTENT-Se.min.y>ae.max.y?Se.min.y-o.EXTENT:ae.max.y,W),ee=[(ae,Se)=>K(ae,Se),(ae,Se)=>K(Se,ae),(ae,Se)=>X(ae,Se),(ae,Se)=>X(Se,ae)],le=new o.pointGeometry(0,0);let de,pe,fe;const me=(ae,Se,Ce,ke,Fe)=>{const ze=[[ke?Ce:ae,ke?ae:Ce,0],[ke?Ce:Se,ke?Se:Ce,0]],$e=Fe<0?o.EXTENT+Fe:Fe,qe=[ke?$e:(ae+Se)/2,ke?(ae+Se)/2:$e,0];return Ce===0&&Fe<0||Ce!==0&&Fe>0?S.getForTilePoints(fe,[qe],!0,pe):ze.push(qe),S.getForTilePoints(p,ze,!0,de),Math.max(ze[0][2],ze[1][2],qe[2])/S.exaggeration()};for(let ae=0;ae<4;ae++){const Se=(ae<2?1:5)-ae,Ce=_.borders[ae];if(Ce.length===0)continue;const ke=fe=L[ae](p),Fe=O(ke);if(!(Fe&&Fe instanceof o.FillExtrusionBucket&&Fe.enableTerrain)||_.borderDoneWithNeighborZ[ae]===Fe.canonical.z&&Fe.borderDoneWithNeighborZ[Se]===_.canonical.z||(pe=S.findDEMTileFor(ke),!pe||!pe.dem))continue;if(!de){const tt=S.findDEMTileFor(p);if(!tt||!tt.dem)return;de=tt}const ze=Fe.borders[Se];let $e=0;const qe=Fe.borderDoneWithNeighborZ[Se]!==_.canonical.z;if(_.canonical.z===Fe.canonical.z){for(let tt=0;tt<Ce.length;tt++){const ot=_.featuresOnBorder[Ce[tt]],Ot=ot.borders[ae];let Je;for(;$e<ze.length&&(Je=Fe.featuresOnBorder[ze[$e]],!(Je.borders[Se][1]>Ot[0]+3));)qe&&Fe.encodeCentroid(void 0,Je,!1),$e++;if(Je&&$e<ze.length){const wt=$e;let dt=0;for(;!(Je.borders[Se][0]>Ot[1]-3)&&(dt++,++$e!==ze.length);)Je=Fe.featuresOnBorder[ze[$e]];if(Je=Fe.featuresOnBorder[ze[wt]],ot.intersectsCount()>1||Je.intersectsCount()>1||dt!==1){dt!==1&&($e=wt),_.encodeCentroid(void 0,ot,!1),qe&&Fe.encodeCentroid(void 0,Je,!1);continue}const At=ee[ae](ot,Je),rt=ae%2?o.EXTENT-1:0;le.x=me(At[0],Math.min(o.EXTENT-1,At[1]),rt,ae<2,At[2]),le.y=0,_.encodeCentroid(le,ot,!1),qe&&Fe.encodeCentroid(le,Je,!1)}else _.encodeCentroid(void 0,ot,!1)}_.borderDoneWithNeighborZ[ae]=Fe.canonical.z,_.needsCentroidUpdate=!0,qe&&(Fe.borderDoneWithNeighborZ[Se]=_.canonical.z,Fe.needsCentroidUpdate=!0)}else{for(const tt of Ce)_.encodeCentroid(void 0,_.featuresOnBorder[tt],!1);if(qe){for(const tt of ze)Fe.encodeCentroid(void 0,Fe.featuresOnBorder[tt],!1);Fe.borderDoneWithNeighborZ[Se]=_.canonical.z,Fe.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[ae]=Fe.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(g)}const ff=new o.Color(1,0,0,1),mf=new o.Color(0,1,0,1),xy=new o.Color(0,0,1,1),by=new o.Color(1,0,1,1),wy=new o.Color(0,1,1,1);function gf(g,u,p){const _=g.context,b=g.transform,S=_.gl,L=b.projection.name==="globe",O=L?["PROJECTION_GLOBE_VIEW"]:null;let W=p.projMatrix;if(L&&o.globeToMercatorTransition(b.zoom)>0){const ot=o.transitionTileAABBinECEF(p.canonical,b),Ot=o.globeDenormalizeECEF(ot);W=o.multiply(new Float32Array(16),b.globeMatrix,Ot),o.multiply(W,b.projMatrix,W)}const K=g.useProgram("debug",null,O),X=u.getTileByID(p.key);g.terrain&&g.terrain.setupElevationDraw(X,K);const ee=o.DepthMode.disabled,le=o.StencilMode.disabled,de=g.colorModeForRenderPass(),pe="$debug";_.activeTexture.set(S.TEXTURE0),g.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),L?X._makeGlobeTileDebugBuffers(g.context,b):X._makeDebugTileBoundsBuffers(g.context,b.projection);const fe=X._tileDebugBuffer||g.debugBuffer,me=X._tileDebugIndexBuffer||g.debugIndexBuffer,ae=X._tileDebugSegments||g.debugSegments;K.draw(_,S.LINE_STRIP,ee,le,de,o.CullFaceMode.disabled,pc(W,o.Color.red),pe,fe,me,ae,null,null,null,[X._globeTileDebugBorderBuffer]);const Se=X.latestRawTileData,Ce=Math.floor((Se&&Se.byteLength||0)/1024),ke=u.getTile(p).tileSize,Fe=512/Math.min(ke,512)*(p.overscaledZ/b.zoom)*.5;let ze=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(ze+=` => ${p.overscaledZ}`),ze+=` ${Ce}kb`,function(ot,Ot){ot.initDebugOverlayCanvas();const Je=ot.debugOverlayCanvas,wt=ot.context.gl,dt=ot.debugOverlayCanvas.getContext("2d");dt.clearRect(0,0,Je.width,Je.height),dt.shadowColor="white",dt.shadowBlur=2,dt.lineWidth=1.5,dt.strokeStyle="white",dt.textBaseline="top",dt.font="bold 36px Open Sans, sans-serif",dt.fillText(Ot,5,5),dt.strokeText(Ot,5,5),ot.debugOverlayTexture.update(Je),ot.debugOverlayTexture.bind(wt.LINEAR,wt.CLAMP_TO_EDGE)}(g,ze);const $e=X._tileDebugTextBuffer||g.debugBuffer,qe=X._tileDebugTextIndexBuffer||g.quadTriangleIndexBuffer,tt=X._tileDebugTextSegments||g.debugSegments;K.draw(_,S.TRIANGLES,ee,le,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,pc(W,o.Color.transparent,Fe),pe,$e,qe,tt,null,null,null,[X._globeTileDebugTextBuffer])}function Ms(g,u,p,_){mc(g,0,u+p/2,g.transform.width,p,_)}function Yl(g,u,p,_){mc(g,u-p/2,0,p,g.transform.height,_)}function mc(g,u,p,_,b,S){const L=g.context,O=L.gl;O.enable(O.SCISSOR_TEST),O.scissor(u*o.exported.devicePixelRatio,p*o.exported.devicePixelRatio,_*o.exported.devicePixelRatio,b*o.exported.devicePixelRatio),L.clear({color:S}),O.disable(O.SCISSOR_TEST)}const Jl=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ql}=Jl;function is(g,u,p,_){g.emplaceBack(u,p,_)}class Gh{constructor(u){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,is(this.vertexArray,-1,-1,1),is(this.vertexArray,1,-1,1),is(this.vertexArray,-1,1,1),is(this.vertexArray,1,1,1),is(this.vertexArray,-1,-1,-1),is(this.vertexArray,1,-1,-1),is(this.vertexArray,-1,1,-1),is(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=u.createVertexBuffer(this.vertexArray,Ql),this.indexBuffer=u.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function $n(g,u,p,_,b,S){const L=g.gl,O=u.paint.get("sky-atmosphere-color"),W=u.paint.get("sky-atmosphere-halo-color"),K=u.paint.get("sky-atmosphere-sun-intensity"),X=((ee,le,de,pe,fe)=>({u_matrix_3f:ee,u_sun_direction:le,u_sun_intensity:de,u_color_tint_r:[pe.r,pe.g,pe.b,pe.a],u_color_tint_m:[fe.r,fe.g,fe.b,fe.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),_),b,K,O,W);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+S,u.skyboxTexture,0),p.draw(g,L.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,X,"skyboxCapture",u.skyboxGeometry.vertexBuffer,u.skyboxGeometry.indexBuffer,u.skyboxGeometry.segment)}const qh=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class l1{constructor(u){const p=new o.StructArrayLayout5f20;p.emplaceBack(-1,1,1,0,0),p.emplaceBack(1,1,1,1,0),p.emplaceBack(1,-1,1,1,1),p.emplaceBack(-1,-1,1,0,1);const _=new o.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=u.createVertexBuffer(p,qh.members),this.indexBuffer=u.createIndexBuffer(_),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const yf={symbol:function(g,u,p,_,b){if(g.renderPass!=="translucent")return;const S=o.StencilMode.disabled,L=g.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(O,W,K,X,ee,le,de){const pe=W.transform,fe=ee==="map",me=le==="map";for(const ae of O){const Se=X.getTile(ae),Ce=Se.getBucket(K);if(!Ce||!Ce.text||!Ce.text.segments.get().length)continue;const ke=o.evaluateSizeForZoom(Ce.textSizeData,pe.zoom),Fe=Ah(ae,Ce.getProjection(),pe),ze=pe.calculatePixelsToTileUnitsMatrix(Se),$e=jl(Fe,Se.tileID.canonical,me,fe,pe,Ce.getProjection(),ze),qe=K.layout.get("icon-text-fit")!=="none"&&Ce.hasIconData();if(ke){const tt=Math.pow(2,pe.zoom-Se.tileID.overscaledZ);Kl(Ce,fe,me,de,o.symbolSize,pe,$e,ae,tt,ke,qe)}}}(_,g,p,u,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),b),p.paint.get("icon-opacity").constantOr(1)!==0&&yy(g,u,p,_,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),S,L),p.paint.get("text-opacity").constantOr(1)!==0&&yy(g,u,p,_,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),S,L),u.map.showCollisionBoxes&&(my(g,u,p,_,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),my(g,u,p,_,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))},circle:function(g,u,p,_){if(g.renderPass!=="translucent")return;const b=p.paint.get("circle-opacity"),S=p.paint.get("circle-stroke-width"),L=p.paint.get("circle-stroke-opacity"),O=p.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)===0&&(S.constantOr(1)===0||L.constantOr(1)===0))return;const W=g.context,K=W.gl,X=g.transform,ee=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),le=o.StencilMode.disabled,de=g.colorModeForRenderPass(),pe=X.projection.name==="globe",fe=[o.mercatorXfromLng(X.center.lng),o.mercatorYfromLat(X.center.lat)],me=[];for(let Se=0;Se<_.length;Se++){const Ce=_[Se],ke=u.getTile(Ce),Fe=ke.getBucket(p);if(!Fe||Fe.projection.name!==X.projection.name)continue;const ze=Fe.programConfigurations.get(p.id),$e=dc(p);pe&&$e.push("PROJECTION_GLOBE_VIEW");const qe=g.useProgram("circle",ze,$e),tt=Fe.layoutVertexBuffer,ot=Fe.globeExtVertexBuffer,Ot=Fe.indexBuffer,Je=X.projection.createInversionMatrix(X,Ce.canonical),wt={programConfiguration:ze,program:qe,layoutVertexBuffer:tt,globeExtVertexBuffer:ot,indexBuffer:Ot,uniformValues:hc(g,Ce,ke,Je,fe,p),tile:ke};if(O){const dt=Fe.segments.get();for(const At of dt)me.push({segments:new o.SegmentVector([At]),sortKey:At.sortKey,state:wt})}else me.push({segments:Fe.segments,sortKey:0,state:wt})}O&&me.sort((Se,Ce)=>Se.sortKey-Ce.sortKey);const ae={useDepthForOcclusion:!pe};for(const Se of me){const{programConfiguration:Ce,program:ke,layoutVertexBuffer:Fe,globeExtVertexBuffer:ze,indexBuffer:$e,uniformValues:qe,tile:tt}=Se.state,ot=Se.segments;g.terrain&&g.terrain.setupElevationDraw(tt,ke,ae),g.prepareDrawProgram(W,ke,tt.tileID.toUnwrapped()),ke.draw(W,K.TRIANGLES,ee,le,de,o.CullFaceMode.disabled,qe,p.id,Fe,$e,ot,p.paint,X.zoom,Ce,[ze])}},heatmap:function(g,u,p,_){if(p.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const b=g.context,S=b.gl,L=o.StencilMode.disabled,O=new o.ColorMode([S.ONE,S.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(de,pe,fe,me){const ae=de.gl,Se=pe.width*me,Ce=pe.height*me;de.activeTexture.set(ae.TEXTURE1),de.viewport.set([0,0,Se,Ce]);let ke=fe.heatmapFbo;if(!ke||ke&&(ke.width!==Se||ke.height!==Ce)){ke&&ke.destroy();const Fe=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,Fe),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),ke=fe.heatmapFbo=de.createFramebuffer(Se,Ce,!1),function(ze,$e,qe,tt,ot,Ot){const Je=ze.gl;Je.texImage2D(Je.TEXTURE_2D,0,ze.isWebGL2&&ze.extRenderToTextureHalfFloat?Je.RGBA16F:Je.RGBA,ot,Ot,0,Je.RGBA,ze.extRenderToTextureHalfFloat?ze.isWebGL2?Je.HALF_FLOAT:ze.extTextureHalfFloat.HALF_FLOAT_OES:Je.UNSIGNED_BYTE,null),tt.colorAttachment.set(qe)}(de,0,Fe,ke,Se,Ce)}else ae.bindTexture(ae.TEXTURE_2D,ke.colorAttachment.get()),de.bindFramebuffer.set(ke.framebuffer)})(b,g,p,g.transform.projection.name==="globe"?.5:.25),b.clear({color:o.Color.transparent});const W=g.transform,K=W.projection.name==="globe",X=K?["PROJECTION_GLOBE_VIEW"]:null,ee=K?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,le=[o.mercatorXfromLng(W.center.lng),o.mercatorYfromLat(W.center.lat)];for(let de=0;de<_.length;de++){const pe=_[de];if(u.hasRenderableParent(pe))continue;const fe=u.getTile(pe),me=fe.getBucket(p);if(!me||me.projection.name!==W.projection.name)continue;const ae=me.programConfigurations.get(p.id),Se=g.useProgram("heatmap",ae,X),{zoom:Ce}=g.transform;g.terrain&&g.terrain.setupElevationDraw(fe,Se),g.prepareDrawProgram(b,Se,pe.toUnwrapped());const ke=W.projection.createInversionMatrix(W,pe.canonical);Se.draw(b,S.TRIANGLES,o.DepthMode.disabled,L,O,ee,La(g,pe,fe,ke,le,Ce,p.paint.get("heatmap-intensity")),p.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,p.paint,g.transform.zoom,ae,K?[me.globeExtVertexBuffer]:null)}b.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(b,S){const L=b.context,O=L.gl,W=S.heatmapFbo;if(!W)return;L.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,W.colorAttachment.get()),L.activeTexture.set(O.TEXTURE1);let K=S.colorRampTexture;K||(K=S.colorRampTexture=new o.Texture(L,S.colorRamp,O.RGBA)),K.bind(O.LINEAR,O.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(L,O.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,b.colorModeForRenderPass(),o.CullFaceMode.disabled,((X,ee,le,de)=>({u_image:0,u_color_ramp:1,u_opacity:ee.paint.get("heatmap-opacity")}))(0,S),S.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,S.paint,b.transform.zoom)}(g,p))},line:function(g,u,p,_){if(g.renderPass!=="translucent")return;const b=p.paint.get("line-opacity"),S=p.paint.get("line-width");if(b.constantOr(1)===0||S.constantOr(1)===0)return;const L=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),O=g.colorModeForRenderPass(),W=g.terrain&&g.terrain.renderingToTexture?1:o.exported.devicePixelRatio,K=p.paint.get("line-dasharray"),X=K.constantOr(1),ee=p.layout.get("line-cap"),le=p.paint.get("line-pattern"),de=le.constantOr(1),pe=p.paint.get("line-gradient"),fe=de?"linePattern":"line",me=g.context,ae=me.gl,Se=(ke=>{const Fe=[];Wh(ke)&&Fe.push("RENDER_LINE_DASH"),ke.paint.get("line-gradient")&&Fe.push("RENDER_LINE_GRADIENT");const ze=ke.paint.get("line-trim-offset");ze[0]===0&&ze[1]===0||Fe.push("RENDER_LINE_TRIM_OFFSET");const $e=ke.paint.get("line-pattern").constantOr(1),qe=ke.paint.get("line-opacity").constantOr(1)!==1;return!$e&&qe&&Fe.push("RENDER_LINE_ALPHA_DISCARD"),Fe})(p);let Ce=Se.includes("RENDER_LINE_ALPHA_DISCARD");g.terrain&&g.terrain.clipOrMaskOverlapStencilType()&&(Ce=!1);for(const ke of _){const Fe=u.getTile(ke);if(de&&!Fe.patternsLoaded())continue;const ze=Fe.getBucket(p);if(!ze)continue;g.prepareDrawTile();const $e=ze.programConfigurations.get(p.id),qe=g.useProgram(fe,$e,Se),tt=le.constantOr(null);if(tt&&Fe.imageAtlas){const Ge=Fe.imageAtlas.patternPositions[tt.toString()];Ge&&$e.setConstantPatternPositions(Ge)}const ot=K.constantOr(null),Ot=ee.constantOr(null);if(!de&&ot&&Ot&&Fe.lineAtlas){const Ge=Fe.lineAtlas.getDash(ot,Ot);Ge&&$e.setConstantPatternPositions(Ge)}let[Je,wt]=p.paint.get("line-trim-offset");(Ot==="round"||Ot==="square")&&Je!==wt&&(Je===0&&(Je-=1),wt===1&&(wt+=1));const dt=g.terrain?ke.projMatrix:null,At=de?dy(g,Fe,p,dt,W):sf(g,Fe,p,dt,ze.lineClipsArray.length,W,[Je,wt]);if(pe){const Ge=ze.gradients[p.id];let at=Ge.texture;if(p.gradientVersion!==Ge.version){let kt=256;if(p.stepInterpolant){const It=u.getSource().maxzoom,rn=ke.canonical.z===It?Math.ceil(1<<g.transform.maxZoom-ke.canonical.z):1;kt=o.clamp(o.nextPowerOfTwo(ze.maxLineLength/o.EXTENT*1024*rn),256,me.maxTextureSize)}Ge.gradient=o.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:kt,image:Ge.gradient||void 0,clips:ze.lineClipsArray}),Ge.texture?Ge.texture.update(Ge.gradient):Ge.texture=new o.Texture(me,Ge.gradient,ae.RGBA),Ge.version=p.gradientVersion,at=Ge.texture}me.activeTexture.set(ae.TEXTURE1),at.bind(p.stepInterpolant?ae.NEAREST:ae.LINEAR,ae.CLAMP_TO_EDGE)}X&&(me.activeTexture.set(ae.TEXTURE0),Fe.lineAtlasTexture.bind(ae.LINEAR,ae.REPEAT),$e.updatePaintBuffers()),de&&(me.activeTexture.set(ae.TEXTURE0),Fe.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),$e.updatePaintBuffers()),g.prepareDrawProgram(me,qe,ke.toUnwrapped());const rt=Ge=>{qe.draw(me,ae.TRIANGLES,L,Ge,O,o.CullFaceMode.disabled,At,p.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,p.paint,g.transform.zoom,$e,[ze.layoutVertexBuffer2])};if(Ce){const Ge=g.stencilModeForClipping(ke).ref;Ge===0&&g.terrain&&me.clear({stencil:0});const at={func:ae.EQUAL,mask:255};At.u_alpha_discard_threshold=.8,rt(new o.StencilMode(at,Ge,255,ae.KEEP,ae.KEEP,ae.INVERT)),At.u_alpha_discard_threshold=0,rt(new o.StencilMode(at,Ge,255,ae.KEEP,ae.KEEP,ae.KEEP))}else rt(g.stencilModeForClipping(ke))}Ce&&(g.resetStencilClippingMasks(),g.terrain&&me.clear({stencil:0}))},fill:function(g,u,p,_){const b=p.paint.get("fill-color"),S=p.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const L=g.colorModeForRenderPass(),O=p.paint.get("fill-pattern"),W=g.opaquePassEnabledForLayer()&&!O.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===W){const K=g.depthModeForSublayer(1,g.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);_y(g,u,p,_,K,L,!1)}if(g.renderPass==="translucent"&&p.paint.get("fill-antialias")){const K=g.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);_y(g,u,p,_,K,L,!0)}},"fill-extrusion":function(g,u,p,_){const b=p.paint.get("fill-extrusion-opacity");if(b!==0&&g.renderPass==="translucent"){const S=new o.DepthMode(g.context.gl.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D);if(b!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))pf(g,u,p,_,S,o.StencilMode.disabled,o.ColorMode.disabled),pf(g,u,p,_,S,g.stencilModeFor3D(),g.colorModeForRenderPass()),g.resetStencilClippingMasks();else{const L=g.colorModeForRenderPass();pf(g,u,p,_,S,o.StencilMode.disabled,L)}}},hillshade:function(g,u,p,_){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const b=g.context,S=g.depthModeForSublayer(0,o.DepthMode.ReadOnly),L=g.colorModeForRenderPass(),O=g.terrain&&g.terrain.renderingToTexture,[W,K]=g.renderPass!=="translucent"||O?[{},_]:g.stencilConfigForOverlap(_);for(const X of K){const ee=u.getTile(X);if(ee.needsHillshadePrepare&&g.renderPass==="offscreen")Bh(g,ee,p,S,o.StencilMode.disabled,L);else if(g.renderPass==="translucent"){const le=O&&g.terrain?g.terrain.stencilModeForRTTOverlap(X):W[X.overscaledZ];lc(g,X,ee,p,S,le,L)}}b.viewport.set([0,0,g.width,g.height]),g.resetStencilClippingMasks()},raster:function(g,u,p,_,b,S){if(g.renderPass!=="translucent"||p.paint.get("raster-opacity")===0||!_.length)return;const L=g.context,O=L.gl,W=u.getSource(),K=g.useProgram("raster"),X=g.colorModeForRenderPass(),ee=g.terrain&&g.terrain.renderingToTexture,[le,de]=W instanceof Ve||ee?[{},_]:g.stencilConfigForOverlap(_),pe=de[de.length-1].overscaledZ,fe=!g.options.moving;for(const me of de){const ae=ee?o.DepthMode.disabled:g.depthModeForSublayer(me.overscaledZ-pe,p.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,O.LESS),Se=me.toUnwrapped(),Ce=u.getTile(me);if(ee&&(!Ce||!Ce.hasData()))continue;const ke=ee?me.projMatrix:g.transform.calculateProjMatrix(Se,fe),Fe=g.terrain&&ee?g.terrain.stencilModeForRTTOverlap(me):le[me.overscaledZ],ze=S?0:p.paint.get("raster-fade-duration");Ce.registerFadeDuration(ze);const $e=u.findLoadedParent(me,0),qe=cc(Ce,$e,u,g.transform,ze);let tt,ot;g.terrain&&g.terrain.prepareDrawTile();const Ot=p.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;L.activeTexture.set(O.TEXTURE0),Ce.texture.bind(Ot,O.CLAMP_TO_EDGE),L.activeTexture.set(O.TEXTURE1),$e?($e.texture.bind(Ot,O.CLAMP_TO_EDGE),tt=Math.pow(2,$e.tileID.overscaledZ-Ce.tileID.overscaledZ),ot=[Ce.tileID.canonical.x*tt%1,Ce.tileID.canonical.y*tt%1]):Ce.texture.bind(Ot,O.CLAMP_TO_EDGE),Ce.texture.useMipmap&&L.extTextureFilterAnisotropic&&g.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax);const Je=r1(ke,ot||[0,0],tt||1,qe,p,W instanceof Ve?W.perspectiveTransform:[0,0]);if(g.prepareDrawProgram(L,K,Se),W instanceof Ve)W.boundsBuffer&&W.boundsSegments&&K.draw(L,O.TRIANGLES,ae,o.StencilMode.disabled,X,o.CullFaceMode.disabled,Je,p.id,W.boundsBuffer,g.quadTriangleIndexBuffer,W.boundsSegments);else{const{tileBoundsBuffer:wt,tileBoundsIndexBuffer:dt,tileBoundsSegments:At}=g.getTileBoundsBuffers(Ce);K.draw(L,O.TRIANGLES,ae,Fe,X,o.CullFaceMode.disabled,Je,p.id,wt,dt,At)}}g.resetStencilClippingMasks()},background:function(g,u,p,_){const b=p.paint.get("background-color"),S=p.paint.get("background-opacity");if(S===0)return;const L=g.context,O=L.gl,W=g.transform,K=W.tileSize,X=p.paint.get("background-pattern");if(g.isPatternMissing(X))return;const ee=!X&&b.a===1&&S===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==ee)return;const le=o.StencilMode.disabled,de=g.depthModeForSublayer(0,ee==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),pe=g.colorModeForRenderPass(),fe=g.useProgram(X?"backgroundPattern":"background");let me,ae=_;ae||(me=g.getBackgroundTiles(),ae=Object.values(me).map(Se=>Se.tileID)),X&&(L.activeTexture.set(O.TEXTURE0),g.imageManager.bind(g.context));for(const Se of ae){const Ce=Se.toUnwrapped(),ke=_?Se.projMatrix:g.transform.calculateProjMatrix(Ce);g.prepareDrawTile();const Fe=u?u.getTile(Se):me?me[Se.key]:new o.Tile(Se,K,W.zoom,g),ze=X?hf(ke,S,g,X,{tileID:Se,tileSize:K}):i1(ke,S,b);g.prepareDrawProgram(L,fe,Ce);const{tileBoundsBuffer:$e,tileBoundsIndexBuffer:qe,tileBoundsSegments:tt}=g.getTileBoundsBuffers(Fe);fe.draw(L,O.TRIANGLES,de,le,pe,o.CullFaceMode.disabled,ze,p.id,$e,qe,tt)}},sky:function(g,u,p){const _=g.transform,b=_.projection.name==="mercator"||_.projection.name==="globe"?1:o.smoothstep(7,8,_.zoom),S=p.paint.get("sky-opacity")*b;if(S===0)return;const L=g.context,O=p.paint.get("sky-type"),W=new o.DepthMode(L.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),K=g.frameCounter/1e3%1;O==="atmosphere"?g.renderPass==="offscreen"?p.needsSkyboxCapture(g)&&(function(X,ee,le,de){const pe=X.context,fe=pe.gl;let me=ee.skyboxFbo;if(!me){me=ee.skyboxFbo=pe.createFramebuffer(32,32,!1),ee.skyboxGeometry=new Gh(pe),ee.skyboxTexture=pe.gl.createTexture(),fe.bindTexture(fe.TEXTURE_CUBE_MAP,ee.skyboxTexture),fe.texParameteri(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_WRAP_S,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_WRAP_T,fe.CLAMP_TO_EDGE),fe.texParameteri(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_MIN_FILTER,fe.LINEAR),fe.texParameteri(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_MAG_FILTER,fe.LINEAR);for(let ke=0;ke<6;++ke)fe.texImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,fe.RGBA,32,32,0,fe.RGBA,fe.UNSIGNED_BYTE,null)}pe.bindFramebuffer.set(me.framebuffer),pe.viewport.set([0,0,32,32]);const ae=ee.getCenter(X,!0),Se=X.useProgram("skyboxCapture"),Ce=new Float64Array(16);o.identity(Ce),o.rotateY(Ce,Ce,.5*-Math.PI),$n(pe,ee,Se,Ce,ae,0),o.identity(Ce),o.rotateY(Ce,Ce,.5*Math.PI),$n(pe,ee,Se,Ce,ae,1),o.identity(Ce),o.rotateX(Ce,Ce,.5*-Math.PI),$n(pe,ee,Se,Ce,ae,2),o.identity(Ce),o.rotateX(Ce,Ce,.5*Math.PI),$n(pe,ee,Se,Ce,ae,3),o.identity(Ce),$n(pe,ee,Se,Ce,ae,4),o.identity(Ce),o.rotateY(Ce,Ce,Math.PI),$n(pe,ee,Se,Ce,ae,5),pe.viewport.set([0,0,X.width,X.height])}(g,p),p.markSkyboxValid(g)):g.renderPass==="sky"&&function(X,ee,le,de,pe){const fe=X.context,me=fe.gl,ae=X.transform,Se=X.useProgram("skybox");fe.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_CUBE_MAP,ee.skyboxTexture);const Ce=((ke,Fe,ze,$e,qe)=>({u_matrix:ke,u_sun_direction:Fe,u_cubemap:0,u_opacity:$e,u_temporal_offset:qe}))(ae.skyboxMatrix,ee.getCenter(X,!1),0,de,pe);X.prepareDrawProgram(fe,Se),Se.draw(fe,me.TRIANGLES,le,o.StencilMode.disabled,X.colorModeForRenderPass(),o.CullFaceMode.backCW,Ce,"skybox",ee.skyboxGeometry.vertexBuffer,ee.skyboxGeometry.indexBuffer,ee.skyboxGeometry.segment)}(g,p,W,S,K):O==="gradient"&&g.renderPass==="sky"&&function(X,ee,le,de,pe){const fe=X.context,me=fe.gl,ae=X.transform,Se=X.useProgram("skyboxGradient");ee.skyboxGeometry||(ee.skyboxGeometry=new Gh(fe)),fe.activeTexture.set(me.TEXTURE0);let Ce=ee.colorRampTexture;Ce||(Ce=ee.colorRampTexture=new o.Texture(fe,ee.colorRamp,me.RGBA)),Ce.bind(me.LINEAR,me.CLAMP_TO_EDGE);const ke=((Fe,ze,$e,qe,tt)=>({u_matrix:Fe,u_color_ramp:0,u_center_direction:ze,u_radius:o.degToRad($e),u_opacity:qe,u_temporal_offset:tt}))(ae.skyboxMatrix,ee.getCenter(X,!1),ee.paint.get("sky-gradient-radius"),de,pe);X.prepareDrawProgram(fe,Se),Se.draw(fe,me.TRIANGLES,le,o.StencilMode.disabled,X.colorModeForRenderPass(),o.CullFaceMode.backCW,ke,"skyboxGradient",ee.skyboxGeometry.vertexBuffer,ee.skyboxGeometry.indexBuffer,ee.skyboxGeometry.segment)}(g,p,W,S,K)},debug:function(g,u,p){for(let _=0;_<p.length;_++)gf(g,u,p[_])},custom:function(g,u,p,_){const b=g.context,S=p.implementation;if(!g.transform.projection.unsupportedLayers||!g.transform.projection.unsupportedLayers.includes("custom")||g.terrain&&(g.terrain.renderingToTexture||g.renderPass==="offscreen")&&p.isLayerDraped()){if(g.renderPass==="offscreen"){const L=S.prerender;if(L){if(g.setCustomLayerDefaults(),b.setColorMode(g.colorModeForRenderPass()),g.transform.projection.name==="globe"){const O=g.transform.pointMerc;L.call(S,b.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(g.transform.zoom),[O.x,O.y],g.transform.pixelsPerMeterRatio)}else L.call(S,b.gl,g.transform.customLayerMatrix());b.setDirty(),g.setBaseState()}}else if(g.renderPass==="translucent"){if(g.terrain&&g.terrain.renderingToTexture){const O=S.renderToTile;if(O){const W=_[0].canonical,K=new o.MercatorCoordinate(W.x+_[0].wrap*(1<<W.z),W.y,W.z);b.setDepthMode(o.DepthMode.disabled),b.setStencilMode(o.StencilMode.disabled),b.setColorMode(g.colorModeForRenderPass()),g.setCustomLayerDefaults(),O.call(S,b.gl,K),b.setDirty(),g.setBaseState()}return}g.setCustomLayerDefaults(),b.setColorMode(g.colorModeForRenderPass()),b.setStencilMode(o.StencilMode.disabled);const L=S.renderingMode==="3d"?new o.DepthMode(g.context.gl.LEQUAL,o.DepthMode.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(b.setDepthMode(L),g.transform.projection.name==="globe"){const O=g.transform.pointMerc;S.render(b.gl,g.transform.customLayerMatrix(),g.transform.getProjection(),g.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(g.transform.zoom),[O.x,O.y],g.transform.pixelsPerMeterRatio)}else S.render(b.gl,g.transform.customLayerMatrix());b.setDirty(),g.setBaseState(),b.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class gc{constructor(u,p,_=!1){this.context=new ge(u,_),this.transform=p,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ty,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(u,p){const _=!!u&&!!u.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new nf(this,u));const b=this._terrain;this.transform.elevation=_?b:null,b.update(u,this.transform,p)}_updateFog(u){const p=u.fog;if(!p||this.transform.projection.name==="globe"||p.getOpacity(this.transform.pitch)<1||p.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,b]=p.getFovAdjustedRange(this.transform._fov);if(_>b)return void(this.transform.fogCullDistSq=null);const S=_+.78*(b-_);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(u,p){if(this.width=u*o.exported.devicePixelRatio,this.height=p*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const u=this.context,p=new o.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(p,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const _=new o.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(o.EXTENT,0),_.emplaceBack(0,o.EXTENT),_.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=u.createVertexBuffer(_,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const b=new o.StructArrayLayout2i4;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(b,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const S=new o.StructArrayLayout4i8;S.emplaceBack(0,0,0,0),S.emplaceBack(o.EXTENT,0,o.EXTENT,0),S.emplaceBack(0,o.EXTENT,0,o.EXTENT),S.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=u.createVertexBuffer(S,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const L=new o.StructArrayLayout3ui6;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(L);const O=new o.StructArrayLayout1ui2;for(const K of[0,1,3,2,0])O.emplaceBack(K);this.debugIndexBuffer=u.createIndexBuffer(O),this.emptyTexture=new o.Texture(u,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),u.gl.RGBA),this.identityMat=o.create();const W=this.context.gl;this.stencilClearMode=new o.StencilMode({func:W.ALWAYS,mask:0},0,255,W.ZERO,W.ZERO,W.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new l1(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(u){return u._makeTileBoundsBuffers(this.context,this.transform.projection),u._tileBoundsBuffer?{tileBoundsBuffer:u._tileBoundsBuffer,tileBoundsIndexBuffer:u._tileBoundsIndexBuffer,tileBoundsSegments:u._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(u,p.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,Hn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(u,p,_){if(!p||this.currentStencilSource===p.id||!u.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let O=!1;for(const W of _)if(this._tileClippingMaskIDs[W.key]===void 0){O=!0;break}if(!O)return}this.currentStencilSource=p.id;const b=this.context,S=b.gl;this.nextStencilID+_.length>256&&this.clearStencil(),b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const L=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of _){const W=p.getTile(O),K=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,{tileBoundsBuffer:X,tileBoundsIndexBuffer:ee,tileBoundsSegments:le}=this.getTileBoundsBuffers(W);L.draw(b,S.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:S.ALWAYS,mask:0},K,255,S.KEEP,S.KEEP,S.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Hn(O.projMatrix),"$clipping",X,ee,le)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new o.StencilMode({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(u);const p=this.context.gl;return new o.StencilMode({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(u){const p=this.context.gl,_=u.sort((L,O)=>O.overscaledZ-L.overscaledZ),b=_[_.length-1].overscaledZ,S=_[0].overscaledZ-b+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const L={};for(let O=0;O<S;O++)L[O+b]=new o.StencilMode({func:p.GEQUAL,mask:255},O+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=S,[L,_]}return[{[b]:o.StencilMode.disabled},_]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([u.CONSTANT_COLOR,u.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(u,p,_){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new o.DepthMode(_||this.context.gl.LEQUAL,p,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){this.style=u,this.options=p,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const _=this.style.order,b=this.style._sourceCaches;for(const K in b){const X=b[K];X.used&&X.prepare(this.context)}const S={},L={},O={};for(const K in b){const X=b[K];S[K]=X.getVisibleCoordinates(),L[K]=S[K].slice().reverse(),O[K]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let K=0;K<_.length;K++)if(this.style._layers[_[K]].is3D()){this.opaquePassCutoff=K;break}if(this.terrain&&(this.terrain.updateTileBinding(O),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const K of _){const X=this.style._layers[K],ee=u._getLayerSourceCache(X);if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const le=ee?L[ee.id]:void 0;(X.type==="custom"||X.isSky()||le&&le.length)&&this.renderLayer(this,ee,X,le)}this.depthRangeFor3D=[0,1-(u.order.length+2)*this.numSublayers*this.depthEpsilon];const W=this.terrain;if(W&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&W.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const K=this.style._layers[_[this.currentLayer]],X=u._getLayerSourceCache(K);if(K.isSky())continue;const ee=X?L[X.id]:void 0;this._renderTileClippingMasks(K,X,ee),this.renderLayer(this,X,K,ee)}if(this.style.fog&&this.transform.projection.supportsFog&&function(K,X){const ee=K.context,le=ee.gl,de=K.transform,pe=new o.DepthMode(le.LEQUAL,o.DepthMode.ReadOnly,[0,1]),fe=K.useProgram("globeAtmosphere",null,de.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),me=o.globeToMercatorTransition(de.zoom),ae=X.properties.get("color").toArray01(),Se=X.properties.get("high-color").toArray01(),Ce=X.properties.get("space-color").toArray01PremultipliedAlpha(),ke=o.identity$1([]);o.rotateY$1(ke,ke,-o.degToRad(de._center.lng)),o.rotateX$1(ke,ke,o.degToRad(de._center.lat)),o.rotateZ$1(ke,ke,de.angle),o.rotateX$1(ke,ke,-de._pitch);const Fe=o.fromQuat(new Float32Array(16),ke),ze=o.mapValue(X.properties.get("star-intensity"),0,1,0,.25),$e=5e-4,qe=o.mapValue(X.properties.get("horizon-blend"),0,1,$e,.25),tt=o.globeUseCustomAntiAliasing(K,ee,de)&&qe===$e?de.worldSize/(2*Math.PI*1.025)-1:de.globeRadius,ot=K.frameCounter/1e3%1,Ot=o.length(de.globeCenterInViewSpace),Je=Math.sqrt(Math.pow(Ot,2)-Math.pow(tt,2)),wt=Math.acos(Je/Ot),dt=((rt,Ge,at,kt,It,rn,Tn,en,Xt,an,On,un,nr,ir)=>({u_frustum_tl:rt,u_frustum_tr:Ge,u_frustum_br:at,u_frustum_bl:kt,u_horizon:It,u_transition:rn,u_fadeout_range:Tn,u_color:en,u_high_color:Xt,u_space_color:an,u_star_intensity:On,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:un,u_horizon_angle:nr,u_rotation_matrix:ir}))(de.frustumCorners.TL,de.frustumCorners.TR,de.frustumCorners.BR,de.frustumCorners.BL,de.frustumCorners.horizon,me,qe,ae,Se,Ce,ze,ot,wt,Fe);K.prepareDrawProgram(ee,fe);const At=K.atmosphereBuffer;At&&fe.draw(ee,le.TRIANGLES,pe,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,dt,"skybox",At.vertexBuffer,At.indexBuffer,At.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const K=this.style._layers[_[this.currentLayer]],X=u._getLayerSourceCache(K);K.isSky()&&this.renderLayer(this,X,K,X?L[X.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const K=this.style._layers[_[this.currentLayer]],X=u._getLayerSourceCache(K);if(K.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(K)){if(K.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ee=X?(K.type==="symbol"?O:L)[X.id]:void 0;this._renderTileClippingMasks(K,X,X?S[X.id]:void 0),this.renderLayer(this,X,K,ee),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let K=null;o.values(this.style._layers).forEach(X=>{const ee=u._getLayerSourceCache(X);ee&&!X.isHidden(this.transform.zoom)&&(!K||K.getSource().maxzoom<ee.getSource().maxzoom)&&(K=ee)}),K&&this.options.showTileBoundaries&&yf.debug(this,K,K.getVisibleCoordinates())}this.options.showPadding&&function(K){const X=K.transform.padding;Ms(K,K.transform.height-(X.top||0),3,ff),Ms(K,X.bottom||0,3,mf),Yl(K,X.left||0,3,xy),Yl(K,K.transform.width-(X.right||0),3,by);const ee=K.transform.centerPoint;(function(le,de,pe,fe){mc(le,de-1,pe-10,2,20,fe),mc(le,de-10,pe-1,20,2,fe)})(K,ee.x,K.transform.height-ee.y,wy)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(u,p,_,b){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||b&&b.length)&&(this.id=_.id,this.gpuTimingStart(_),(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes(_.type)||u.terrain&&_.type==="custom")&&yf[_.type](u,p,_,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const p=this.context.extTimerQuery;let _=this.gpuTimers[u.id];_||(_=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),_.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const u=this.context.extTimerQuery,p=u.createQueryEXT();this.deferredRenderGpuTimeQueries.push(p),u.beginQueryEXT(u.TIME_ELAPSED_EXT,p)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}collectDeferredRenderGpuQueries(){const u=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],u}queryGpuTimers(u){const p={};for(const _ in u){const b=u[_],S=this.context.extTimerQuery,L=S.getQueryObjectEXT(b.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(b.query),p[_]=L}return p}queryGpuTimeDeferredRender(u){if(!this.options.gpuTimingDeferredRender)return 0;const p=this.context.extTimerQuery;let _=0;for(const b of u)_+=p.getQueryObjectEXT(b,p.QUERY_RESULT_EXT)/1e6,p.deleteQueryEXT(b);return _}translatePosMatrix(u,p,_,b,S){if(!_[0]&&!_[1])return u;const L=S?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(L){const K=Math.sin(L),X=Math.cos(L);_=[_[0]*X-_[1]*K,_[0]*K+_[1]*X]}const O=[S?_[0]:Qt(p,_[0],this.transform.zoom),S?_[1]:Qt(p,_[1],this.transform.zoom),0],W=new Float32Array(16);return o.translate(W,u,O),W}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){return u===null||u!==void 0&&!this.imageManager.getPattern(u.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const u=this.terrain&&this.terrain.renderingToTexture,p=this.terrain&&this.terrain.exaggeration()===0,_=this.style&&this.style.fog,b=[];return this.terrainRenderModeElevated()&&b.push("TERRAIN"),this.transform.projection.name==="globe"&&b.push("GLOBE"),p&&b.push("ZERO_EXAGGERATION"),_&&!u&&_.getOpacity(this.transform.pitch)!==0&&b.push("FOG"),u&&b.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&b.push("OVERDRAW_INSPECTOR"),b}useProgram(u,p,_){this.cache=this.cache||{};const b=_||[],S=this.currentGlobalDefines().concat(b),L=rf.cacheKey(Kp[u],u,S,p);return this.cache[L]||(this.cache[L]=new rf(this.context,u,Kp[u],p,o1[u],S)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(u,p,_){if(this.terrain&&this.terrain.renderingToTexture)return;const b=this.style.fog;if(b){const S=b.getOpacity(this.transform.pitch),L=((O,W,K,X,ee,le,de,pe,fe,me,ae)=>{const Se=O.transform,Ce=W.properties.get("color").toArray01();Ce[3]=X;const ke=O.frameCounter/1e3%1;return{u_fog_matrix:K?Se.calculateFogTileMatrix(K):O.identityMat,u_fog_range:W.getFovAdjustedRange(Se._fov),u_fog_color:Ce,u_fog_horizon_blend:W.properties.get("horizon-blend"),u_fog_temporal_offset:ke,u_frustum_tl:ee,u_frustum_tr:le,u_frustum_br:de,u_frustum_bl:pe,u_globe_pos:fe,u_globe_radius:me,u_viewport:ae,u_globe_transition:o.globeToMercatorTransition(Se.zoom),u_is_globe:+(Se.projection.name==="globe")}})(this,b,_,S,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);p.setFogUniformValues(u,L)}}setTileLoadedFlag(u){this.tileLoaded=u}saveCanvasCopy(){const u=this.canvasCopy();u&&(this.frameCopies.push(u),this.tileLoaded=!1)}canvasCopy(){const u=this.context.gl,p=u.createTexture();return u.bindTexture(u.TEXTURE_2D,p),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,0,0,u.drawingBufferWidth,u.drawingBufferHeight,0),p}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const u=this.style&&this.style.fog;return!!u&&u.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const u=this._backgroundTiles,p=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const b of _)p[b.key]=u[b.key]||new o.Tile(b,512,this.transform.tileZoom,this);return p}clearBackgroundTiles(){this._backgroundTiles={}}}class vf{constructor(u=0,p=0,_=0,b=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(_)||_<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=_,this.right=b}interpolate(u,p,_){return p.top!=null&&u.top!=null&&(this.top=o.number(u.top,p.top,_)),p.bottom!=null&&u.bottom!=null&&(this.bottom=o.number(u.bottom,p.bottom,_)),p.left!=null&&u.left!=null&&(this.left=o.number(u.left,p.left,_)),p.right!=null&&u.right!=null&&(this.right=o.number(u.right,p.right,_)),this}getCenter(u,p){const _=o.clamp((this.left+u-this.right)/2,0,u),b=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.pointGeometry(_,b)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new vf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ey(g,u){const p=o.getColumn(g,3);o.fromQuat(g,u),o.setColumn(g,3,p)}function Zh(g,u){const p=o.identity$1([]);return o.rotateZ$1(p,p,-u),o.rotateX$1(p,p,-g),p}function Cy(g,u){const p=[g[0],g[1],0],_=[u[0],u[1],0];if(o.length(p)>=1e-15){const L=o.normalize([],p);o.scale$2(_,L,o.dot(_,L)),u[0]=_[0],u[1]=_[1]}const b=o.cross([],u,g);if(o.len(b)<1e-15)return null;const S=Math.atan2(-b[1],b[0]);return Zh(Math.atan2(Math.sqrt(g[0]*g[0]+g[1]*g[1]),-g[2]),S)}class Xh{constructor(u,p){this.position=u,this.orientation=p}get position(){return this._position}set position(u){if(u){const p=u instanceof o.MercatorCoordinate?u:new o.MercatorCoordinate(u[0],u[1],u[2]);this._renderWorldCopies&&(p.x=o.wrap(p.x,0,1)),this._position=p}else this._position=null}lookAtPoint(u,p){if(this.orientation=null,!this.position)return;const _=this.position,b=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(u)):0,S=o.MercatorCoordinate.fromLngLat(u,b),L=[S.x-_.x,S.y-_.y,S.z-_.z];p||(p=[0,0,1]),p[2]=Math.abs(p[2]),this.orientation=Cy(L,p)}setPitchBearing(u,p){this.orientation=Zh(o.degToRad(u),o.degToRad(-p))}}class eu{constructor(u,p){this._transform=o.identity([]),this.orientation=p,this.position=u}get mercatorPosition(){const u=this.position;return new o.MercatorCoordinate(u[0],u[1],u[2])}get position(){const u=o.getColumn(this._transform,3);return[u[0],u[1],u[2]]}set position(u){var p;u&&o.setColumn(this._transform,3,[(p=u)[0],p[1],p[2],1])}get orientation(){return this._orientation}set orientation(u){this._orientation=u||o.identity$1([]),u&&Ey(this._transform,this._orientation)}getPitchBearing(){const u=this.forward(),p=this.right();return{bearing:Math.atan2(-p[1],p[0]),pitch:Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2])}}setPitchBearing(u,p){this._orientation=Zh(u,p),Ey(this._transform,this._orientation)}forward(){const u=o.getColumn(this._transform,2);return[-u[0],-u[1],-u[2]]}up(){const u=o.getColumn(this._transform,1);return[-u[0],-u[1],-u[2]]}right(){const u=o.getColumn(this._transform,0);return[u[0],u[1],u[2]]}getCameraToWorld(u,p){const _=new Float64Array(16);return o.invert(_,this.getWorldToCamera(u,p)),_}getWorldToCameraPosition(u,p,_){const b=this.position;o.scale$2(b,b,-u);const S=new Float64Array(16);return o.fromScaling(S,[_,_,_]),o.translate(S,S,b),S[10]*=p,S}getWorldToCamera(u,p){const _=new Float64Array(16),b=new Float64Array(4),S=this.position;return o.conjugate(b,this._orientation),o.scale$2(S,S,-u),o.fromQuat(_,b),o.translate(_,_,S),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=p,_[9]*=p,_[10]*=p,_[11]*=p,_}getCameraToClipPerspective(u,p,_,b){const S=new Float64Array(16);return o.perspective(S,u,p,_,b),S}getDistanceToElevation(u,p=!1){const _=u===0?0:o.mercatorZfromAltitude(u,p?o.latFromMercatorY(this.position[1]):this.position[1]),b=this.forward();return(_-this.position[2])/b[2]}clone(){return new eu([...this.position],[...this.orientation])}}function tu(g,u){const p=ll(g.projection,g.zoom,g.width,g.height),_=function(S,L,O,W,K){const X=new o.LngLat(O.lng-180*ul,O.lat),ee=new o.LngLat(O.lng+180*ul,O.lat),le=S.project(X.lng,X.lat),de=S.project(ee.lng,ee.lat),pe=-Math.atan2(de.y-le.y,de.x-le.x),fe=o.MercatorCoordinate.fromLngLat(O);fe.y=o.clamp(fe.y,-.999975,.999975);const me=fe.toLngLat(),ae=S.project(me.lng,me.lat),Se=o.MercatorCoordinate.fromLngLat(me);Se.x+=ul;const Ce=Se.toLngLat(),ke=S.project(Ce.lng,Ce.lat),Fe=vc(ke.x-ae.x,ke.y-ae.y,pe),ze=o.MercatorCoordinate.fromLngLat(me);ze.y+=ul;const $e=ze.toLngLat(),qe=S.project($e.lng,$e.lat),tt=vc(qe.x-ae.x,qe.y-ae.y,pe),ot=Math.abs(Fe.x)/Math.abs(tt.y),Ot=o.identity([]);o.rotateZ(Ot,Ot,-pe*(1-(K?0:W)));const Je=o.identity([]);return o.scale(Je,Je,[1,1-(1-ot)*W,1]),Je[4]=-tt.x/tt.y*W,o.rotateZ(Je,Je,pe),o.multiply(Je,Ot,Je),Je}(g.projection,0,g.center,p,u),b=Kh(g);return o.scale(_,_,[b,b,1]),_}function Kh(g){const u=g.projection,p=ll(g.projection,g.zoom,g.width,g.height),_=yc(u,g.center),b=yc(u,o.LngLat.convert(u.center));return Math.pow(2,_*p+(1-p)*b)}function ll(g,u,p,_,b=1/0){const S=g.range;if(!S)return 0;const L=Math.min(b,Math.max(p,_)),O=Math.log(L/1024)/Math.LN2;return o.smoothstep(S[0]+O,S[1]+O,u)}const ul=1/4e4;function yc(g,u){const p=o.clamp(u.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=new o.LngLat(u.lng-180*ul,p),b=new o.LngLat(u.lng+180*ul,p),S=g.project(_.lng,p),L=g.project(b.lng,p),O=o.MercatorCoordinate.fromLngLat(_),W=o.MercatorCoordinate.fromLngLat(b),K=L.x-S.x,X=L.y-S.y,ee=W.x-O.x,le=W.y-O.y,de=Math.sqrt((ee*ee+le*le)/(K*K+X*X));return Math.log(de)/Math.LN2}function vc(g,u,p){const _=Math.cos(p),b=Math.sin(p);return{x:g*_-u*b,y:g*b+u*_}}class Zt{constructor(u,p,_,b,S,L,O){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=_==null?0:_,this._maxPitch=b==null?60:b,this.setProjection(L),this.setMaxBounds(O),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new vf,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new eu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const u=new Zt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return u._elevation=this._elevation,u._centerAltitude=this._centerAltitude,u._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,u.tileSize=this.tileSize,u.mercatorFromTransition=this.mercatorFromTransition,u.width=this.width,u.height=this.height,u.cameraElevationReference=this.cameraElevationReference,u._center=this._center,u._setZoom(this.zoom),u._seaLevelZoom=this._seaLevelZoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._nearZ=this._nearZ,u._farZ=this._farZ,u._averageElevation=this._averageElevation,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._camera=this._camera.clone(),u._calcMatrices(),u.freezeTileCoverage=this.freezeTileCoverage,u.frustumCorners=this.frustumCorners,u}get elevation(){return this._elevation}set elevation(u){this._elevation!==u&&(this._elevation=u,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(u,p=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(u||_)&&this._constrainCamera(p),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(u){this.projectionOptions=u||{name:"mercator"};const p=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const _=!v(p,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const u=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const p=u!==this.projection.name;return p&&this._calcMatrices(),p}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get cameraWorldSize(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(u){this.rotation=u}get rotation(){return-this.angle/Math.PI*180}set rotation(u){const p=-u*Math.PI/180;var _;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(_=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(b,S,L){var O=S[0],W=S[1],K=S[2],X=S[3],ee=Math.sin(L),le=Math.cos(L);b[0]=O*le+K*ee,b[1]=W*le+X*ee,b[2]=O*-ee+K*le,b[3]=W*-ee+X*le}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const p=o.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const u=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/u)}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=o.degToRad(u),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(u){this._averageElevation=u,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(u){const p=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._setZoom(p),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(u){this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const u=this._elevation;this._centerAltitude=u.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=u.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const u=this._elevation,p=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let b=0,S=0;for(let L=0;L<p.length;L++){const O=new o.pointGeometry(p[L][0]*this.width,_+p[L][1]*(this.height-_)),W=u.pointCoordinate(O);if(!W)continue;const K=1/Math.hypot(W[0]-this._camera.position[0],W[1]-this._camera.position[1]);b+=W[3]*K,S+=K}return S===0?NaN:b/S}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const u=this._seaLevelZoom,p=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*p,b=this._mercatorZfromZoom(u),S=this._mercatorZfromZoom(this._maxZoom),L=Math.max(b-_,S);this._setZoom(this._zoomFromMercatorZ(L))}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}computeZoomRelativeTo(u){const p=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,u.toAltitude()));let _;_=u.z<this._camera.position[2]?[p.x,p.y,p.z]:[u.x,u.y,u.z];const b=o.length(o.sub([],this._camera.position,_));return o.clamp(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(u){if(!this.height||!u.position&&!u.orientation)return;this._updateCameraState();let p=!1;if(u.orientation&&!o.exactEquals(u.orientation,this._camera.orientation)&&(p=this._setCameraOrientation(u.orientation)),u.position){const _=[u.position.x,u.position.y,u.position.z];o.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),p=!0)}p&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const u=this._camera.position,p=new Xh;return p.position=new o.MercatorCoordinate(u[0],u[1],u[2]),p.orientation=this._camera.orientation,p._elevation=this.elevation,p._renderWorldCopies=this.renderWorldCopies,p}_setCameraOrientation(u){if(!o.length$1(u))return!1;o.normalize$1(u,u);const p=o.transformQuat([],[0,0,-1],u),_=o.transformQuat([],[0,-1,0],u);if(_[2]<0)return!1;const b=Cy(p,_);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(u){const p=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;u[2]=o.clamp(u[2],b/_,b/p),this._camera.position=u}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,_){this._unmodified=!1,this._edgeInsets.interpolate(u,p,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const p=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(u){const p=[new o.UnwrappedTileID(0,u)];if(this.renderWorldCopies){const _=this.pointCoordinate(new o.pointGeometry(0,0)),b=this.pointCoordinate(new o.pointGeometry(this.width,0)),S=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),L=this.pointCoordinate(new o.pointGeometry(0,this.height)),O=Math.floor(Math.min(_.x,b.x,S.x,L.x)),W=Math.floor(Math.max(_.x,b.x,S.x,L.x)),K=1;for(let X=O-K;X<=W+K;X++)X!==0&&p.push(new o.UnwrappedTileID(X,u))}return p}coveringTiles(u){let p=this.coveringZoomLevel(u);const _=p,b=this.elevation&&!u.isTerrainDEM,S=this.projection.name==="mercator";if(u.minzoom!==void 0&&p<u.minzoom)return[];u.maxzoom!==void 0&&p>u.maxzoom&&(p=u.maxzoom);const L=this.locationCoordinate(this.center),O=this.center.lat,W=1<<p,K=[W*L.x,W*L.y,0],X=this.projection.name==="globe",ee=!X,le=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p,ee),de=X?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),pe=W*o.mercatorZfromAltitude(1,this.center.lat),fe=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),me=[W*de.x,W*de.y,fe*(ee?1:pe)],ae=this.cameraToCenterDistance/u.tileSize*(u.roundZoom?1:.502),Se=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?p:0,Ce=u.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ke=u.isTerrainDEM?-Ce:this._elevation?this._elevation.getMinElevationBelowMSL():0,Fe=this.projection.isReprojectedInTileSpace?Kh(this):1,ze=rt=>{const at=new o.MercatorCoordinate(rt.x+25e-6,rt.y,rt.z),kt=new o.MercatorCoordinate(rt.x,rt.y+25e-6,rt.z),It=rt.toLngLat(),rn=at.toLngLat(),Tn=kt.toLngLat(),en=this.locationCoordinate(It),Xt=this.locationCoordinate(rn),an=this.locationCoordinate(Tn),On=Math.hypot(Xt.x-en.x,Xt.y-en.y),un=Math.hypot(an.x-en.x,an.y-en.y);return Math.sqrt(On*un)*Fe/25e-6},$e=rt=>{const Ge=Ce,at=ke;return{aabb:o.tileAABB(this,W,0,0,0,rt,at,Ge,this.projection),zoom:0,x:0,y:0,minZ:at,maxZ:Ge,wrap:rt,fullyVisible:!1}},qe=[];let tt=[];const ot=p,Ot=u.reparseOverscaled?_:p,Je=rt=>rt*rt,wt=Je((fe-this._centerAltitude)*pe),dt=rt=>{if(!this._elevation||!rt.tileID||!S)return;const Ge=this._elevation.getMinMaxForTile(rt.tileID),at=rt.aabb;Ge?(at.min[2]=Ge.min,at.max[2]=Ge.max,at.center[2]=(at.min[2]+at.max[2])/2):(rt.shouldSplit=At(rt),rt.shouldSplit||(at.min[2]=at.max[2]=at.center[2]=this._centerAltitude))},At=rt=>{if(rt.zoom<Se)return!0;if(rt.zoom===ot)return!1;if(rt.shouldSplit!=null)return rt.shouldSplit;const Ge=rt.aabb.distanceX(me),at=rt.aabb.distanceY(me);let kt=wt,It=1;if(X){kt=Je(rt.aabb.distanceZ(me));const en=Math.pow(2,rt.zoom),Xt=o.latFromMercatorY((rt.y+1)/en),an=o.latFromMercatorY(rt.y/en),On=Math.min(Math.max(O,Xt),an),un=o.circumferenceAtLatitude(On)/o.circumferenceAtLatitude(O);if(It=On===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,un/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&rt.zoom===ot-1&&un>=.9)return!0}else if(b&&(kt=Je(rt.aabb.distanceZ(me)*pe)),this.projection.isReprojectedInTileSpace&&_<=5){const en=Math.pow(2,rt.zoom),Xt=ze(new o.MercatorCoordinate((rt.x+.5)/en,(rt.y+.5)/en));It=Xt>.85?1:Xt}const rn=Ge*Ge+at*at+kt,Tn=Je((1<<ot-rt.zoom)*ae*It*((en,Xt)=>{if(Xt*Je(.707)<en)return 1;const an=Math.sqrt(Xt/en);return an/(1.4144271570014144+(Math.pow(1.1,an-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(kt,wt),rn));return rn<Tn};if(this.renderWorldCopies)for(let rt=1;rt<=3;rt++)qe.push($e(-rt)),qe.push($e(rt));for(qe.push($e(0));qe.length>0;){const rt=qe.pop(),Ge=rt.x,at=rt.y;let kt=rt.fullyVisible;if(!kt){const It=rt.aabb.intersects(le);if(It===0)continue;kt=It===2}if(rt.zoom!==ot&&At(rt))for(let It=0;It<4;It++){const rn=(Ge<<1)+It%2,Tn=(at<<1)+(It>>1),en={aabb:S?rt.aabb.quadrant(It):o.tileAABB(this,W,rt.zoom+1,rn,Tn,rt.wrap,rt.minZ,rt.maxZ,this.projection),zoom:rt.zoom+1,x:rn,y:Tn,wrap:rt.wrap,fullyVisible:kt,tileID:void 0,shouldSplit:void 0,minZ:rt.minZ,maxZ:rt.maxZ};b&&!X&&(en.tileID=new o.OverscaledTileID(rt.zoom+1===ot?Ot:rt.zoom+1,rt.wrap,rt.zoom+1,rn,Tn),dt(en)),qe.push(en)}else{const It=rt.zoom===ot?Ot:rt.zoom;if(u.minzoom&&u.minzoom>It)continue;const rn=K[0]-(.5+Ge+(rt.wrap<<rt.zoom))*(1<<p-rt.zoom),Tn=K[1]-.5-at,en=rt.tileID?rt.tileID:new o.OverscaledTileID(It,rt.wrap,rt.zoom,Ge,at);tt.push({tileID:en,distanceSq:rn*rn+Tn*Tn})}}if(this.fogCullDistSq){const rt=this.fogCullDistSq,Ge=this.horizonLineFromTop();tt=tt.filter(at=>{const kt=[0,0,0,1],It=[o.EXTENT,o.EXTENT,0,1],rn=this.calculateFogTileMatrix(at.tileID.toUnwrapped());o.transformMat4$1(kt,kt,rn),o.transformMat4$1(It,It,rn);const Tn=o.getAABBPointSquareDist(kt,It);if(Tn===0)return!0;let en=!1;const Xt=this._elevation;if(Xt&&Tn>rt&&Ge!==0){const an=this.calculateProjMatrix(at.tileID.toUnwrapped());let On;u.isTerrainDEM||(On=Xt.getMinMaxForTile(at.tileID)),On||(On={min:ke,max:Ce});const un=o.furthestTileCorner(this.rotation),nr=[un[0]*o.EXTENT,un[1]*o.EXTENT,On.max];o.transformMat4(nr,nr,an),en=(1-nr[1])*this.height*.5<Ge}return Tn<rt||en})}return tt.sort((rt,Ge)=>rt.distanceSq-Ge.distanceSq).map(rt=>rt.tileID)}resize(u,p){this.width=u,this.height=p,this.pixelsToGLUnits=[2/u,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const p=o.clamp(u.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=this.projection.project(u.lng,p);return new o.pointGeometry(_.x*this.worldSize,_.y*this.worldSize)}unproject(u){return this.projection.unproject(u.x/this.worldSize,u.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(u,p){let _,b;const S=this.centerPoint;if(this.projection.name==="globe"){const O=this.worldSize;_=(p.x-S.x)/O,b=(p.y-S.y)/O}else{const O=this.pointCoordinate(p),W=this.pointCoordinate(S);_=O.x-W.x,b=O.y-W.y}const L=this.locationCoordinate(u);this.setLocation(new o.MercatorCoordinate(L.x-_,L.y-b))}setLocation(u){this.center=this.coordinateLocation(u),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(u){return this.projection.locationPoint(this,u)}locationPoint3D(u){return this.projection.locationPoint(this,u,!0)}pointLocation(u){return this.coordinateLocation(this.pointCoordinate(u))}pointLocation3D(u){return this.coordinateLocation(this.pointCoordinate3D(u))}locationCoordinate(u,p){const _=p?o.mercatorZfromAltitude(p,u.lat):void 0,b=this.projection.project(u.lng,u.lat);return new o.MercatorCoordinate(b.x,b.y,_)}coordinateLocation(u){return this.projection.unproject(u.x,u.y)}pointRayIntersection(u,p){const _=p!=null?p:this._centerAltitude,b=[u.x,u.y,0,1],S=[u.x,u.y,1,1];o.transformMat4$1(b,b,this.pixelMatrixInverse),o.transformMat4$1(S,S,this.pixelMatrixInverse);const L=S[3];o.scale$1(b,b,1/b[3]),o.scale$1(S,S,1/L);const O=b[2],W=S[2];return{p0:b,p1:S,t:O===W?0:(_-O)/(W-O)}}screenPointToMercatorRay(u){const p=[u.x,u.y,0,1],_=[u.x,u.y,1,1];return o.transformMat4$1(p,p,this.pixelMatrixInverse),o.transformMat4$1(_,_,this.pixelMatrixInverse),o.scale$1(p,p,1/p[3]),o.scale$1(_,_,1/_[3]),p[2]=o.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,_[2]=o.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,o.scale$1(p,p,1/this.worldSize),o.scale$1(_,_,1/this.worldSize),new o.Ray([p[0],p[1],p[2]],o.normalize([],o.sub([],_,p)))}rayIntersectionCoordinate(u){const{p0:p,p1:_,t:b}=u,S=o.mercatorZfromAltitude(p[2],this._center.lat),L=o.mercatorZfromAltitude(_[2],this._center.lat);return new o.MercatorCoordinate(o.number(p[0],_[0],b)/this.worldSize,o.number(p[1],_[1],b)/this.worldSize,o.number(S,L,b))}pointCoordinate(u,p=this._centerAltitude){return this.projection.pointCoordinate(this,u.x,u.y,p)}pointCoordinate3D(u){if(!this.elevation)return this.pointCoordinate(u);let p=this.projection.pointCoordinate3D(this,u.x,u.y);if(p)return new o.MercatorCoordinate(p[0],p[1],p[2]);let _=0,b=this.horizonLineFromTop();if(u.y>b)return this.pointCoordinate(u);const S=.02*b,L=u.clone();for(let O=0;O<10&&b-_>S;O++){L.y=o.number(_,b,.66);const W=this.projection.pointCoordinate3D(this,L.x,L.y);W?(b=L.y,p=W):_=L.y}return p?new o.MercatorCoordinate(p[0],p[1],p[2]):this.pointCoordinate(u)}isPointAboveHorizon(u){return this.projection.isPointAboveHorizon(this,u)}_coordinatePoint(u,p){const _=p&&this.elevation?this.elevation.getAtPointOrZero(u,this._centerAltitude):this._centerAltitude,b=[u.x*this.worldSize,u.y*this.worldSize,_+u.toAltitude(),1];return o.transformMat4$1(b,b,this.pixelMatrix),b[3]>0?new o.pointGeometry(b[0]/b[3],b[1]/b[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:u,left:p}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,b=this.width-this._edgeInsets.right,S=this.pointLocation3D(new o.pointGeometry(p,u)),L=this.pointLocation3D(new o.pointGeometry(b,u)),O=this.pointLocation3D(new o.pointGeometry(b,_)),W=this.pointLocation3D(new o.pointGeometry(p,_));let K=Math.min(S.lng,L.lng,O.lng,W.lng),X=Math.max(S.lng,L.lng,O.lng,W.lng),ee=Math.min(S.lat,L.lat,O.lat,W.lat),le=Math.max(S.lat,L.lat,O.lat,W.lat);const de=Math.pow(2,-this.zoom)/16*270,pe=this.projection.name==="globe"?1:4,fe=(me,ae,Se,Ce,ke)=>{const Fe=(me+Se)/2,ze=(ae+Ce)/2,$e=new o.pointGeometry(Fe,ze),{lng:qe,lat:tt}=this.pointLocation3D($e),ot=Math.max(0,K-qe,ee-tt,qe-X,tt-le);K=Math.min(K,qe),X=Math.max(X,qe),ee=Math.min(ee,tt),le=Math.max(le,tt),(ke<pe||ot>de)&&(fe(me,ae,Fe,ze,ke+1),fe(Fe,ze,Se,Ce,ke+1))};if(fe(p,u,b,u,1),fe(b,u,b,_,1),fe(b,_,p,_,1),fe(p,_,p,u,1),this.projection.name==="globe"){const[me,ae]=o.polesInViewport(this);me?(le=90,X=180,K=-180):ae&&(ee=-90,X=180,K=-180)}return new o.LngLatBounds(new o.LngLat(K,ee),new o.LngLat(X,le))}_getBoundsRectangular(u,p){const{top:_,left:b}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,L=this.width-this._edgeInsets.right,O=new o.pointGeometry(b,_),W=new o.pointGeometry(L,_),K=new o.pointGeometry(L,S),X=new o.pointGeometry(b,S);let ee=this.pointCoordinate(O,u),le=this.pointCoordinate(W,u);const de=this.pointCoordinate(K,p),pe=this.pointCoordinate(X,p),fe=(me,ae)=>(ae.y-me.y)/(ae.x-me.x);return ee.y>1&&le.y>=0?ee=new o.MercatorCoordinate((1-pe.y)/fe(pe,ee)+pe.x,1):ee.y<0&&le.y<=1&&(ee=new o.MercatorCoordinate(-pe.y/fe(pe,ee)+pe.x,0)),le.y>1&&ee.y>=0?le=new o.MercatorCoordinate((1-de.y)/fe(de,le)+de.x,1):le.y<0&&ee.y<=1&&(le=new o.MercatorCoordinate(-de.y/fe(de,le)+de.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(ee)).extend(this.coordinateLocation(le)).extend(this.coordinateLocation(pe)).extend(this.coordinateLocation(de))}_getBoundsRectangularTerrain(){const u=this.elevation;if(!u.visibleDemTiles.length||u.isUsingMockSource())return this._getBoundsRectangular(0,0);const p=u.visibleDemTiles.reduce((_,b)=>{if(b.dem){const S=b.dem.tree;_.min=Math.min(_.min,S.minimums[0]),_.max=Math.max(_.max,S.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(p.min*u.exaggeration(),p.max*u.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(u=!0){const p=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-p*(1-this._horizonShift);return u?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(u){this.maxBounds=u,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,u&&(this.minLat=u.getSouth(),this.maxLat=u.getNorth(),this.minLng=u.getWest(),this.maxLng=u.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(u,p){return this.projection.createTileMatrix(this,p,u)}calculateDistanceTileData(u){const p=u.key,_=this._distanceTileDataCache;if(_[p])return _[p];const b=u.canonical,S=1/this.height,L=this.cameraWorldSize,O=L/this.zoomScale(b.z),W=(b.x+Math.pow(2,b.z)*u.wrap)*O,K=b.y*O,X=this.point;X.x*=L/this.worldSize,X.y*=L/this.worldSize;const ee=this.angle,le=Math.sin(-ee),de=-Math.cos(-ee);return _[p]={bearing:[le,de],center:[(X.x-W)*S,(X.y-K)*S],scale:O/o.EXTENT*S},_[p]}calculateFogTileMatrix(u){const p=u.key,_=this._fogTileMatrixCache;if(_[p])return _[p];const b=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,u);return o.multiply(b,this.worldToFogMatrix,b),_[p]=new Float32Array(b),_[p]}calculateProjMatrix(u,p=!1){const _=u.key,b=p?this._alignedProjMatrixCache:this._projMatrixCache;if(b[_])return b[_];const S=this.calculatePosMatrix(u,this.worldSize);return o.multiply(S,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:p?this.alignedProjMatrix:this.projMatrix,S),b[_]=new Float32Array(S),b[_]}calculatePixelsToTileUnitsMatrix(u){const p=u.tileID.key,_=this._pixelsToTileUnitsCache;if(_[p])return _[p];const b=function(S,L){const{scale:O}=S.tileTransform,W=O*o.EXTENT/(S.tileSize*Math.pow(2,L.zoom-S.tileID.overscaledZ+S.tileID.canonical.z));return K=new Float32Array(4),le=(X=L.inverseAdjustmentMatrix)[1],de=X[2],pe=X[3],me=(ee=[W,W])[1],K[0]=X[0]*(fe=ee[0]),K[1]=le*fe,K[2]=de*me,K[3]=pe*me,K;var K,X,ee,le,de,pe,fe,me}(u,this);return _[p]=b,_[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const u=1/this.worldSize,p=o.fromScaling([],[u,u,u]);return o.multiply(p,p,this.globeMatrix),p}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const u=this._elevation;this._updateCameraState();const p=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(p),b=this._camera.forward(),S=o.mercatorZfromAltitude(1,this._center.lat);_[2]/=S,b[2]/=S,o.normalize(b,b);const L=u.raycast(_,b,u.exaggeration());if(L){const O=o.scaleAndAdd([],_,b,L),W=new o.MercatorCoordinate(O[0],O[1],o.mercatorZfromAltitude(O[2],o.latFromMercatorY(O[1]))),K=(W.z+o.length([W.x-_[0],W.y-_[1],W.z-_[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(K),this._centerAltitude=W.toAltitude(),this._center=this.coordinateLocation(W),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(u=!1){if(!this._elevation)return;const p=this._elevation,_=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,b=this._computeCameraPosition(_),S=p.getAtPointOrZero(new o.MercatorCoordinate(...b)),L=this.pixelsPerMeter/this.worldSize*S,O=this._minimumHeightOverTerrain(),W=b[2]-L;if(W<=O)if(W<0||u){const K=this.locationCoordinate(this._center,this._centerAltitude),X=[b[0],b[1],K.z-b[2]],ee=o.length(X);X[2]-=(O-W)/this._pixelsPerMercatorPixel;const le=o.length(X);if(le===0)return;o.scale$2(X,X,ee/le*this._pixelsPerMercatorPixel),this._camera.position=[b[0],b[1],K.z*this._pixelsPerMercatorPixel-X[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||u){const le=this.center;return le.lat=o.clamp(le.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!u)&&(le.lng=o.clamp(le.lng,this.minLng,this.maxLng)),this.center=le,void(this._constraining=!1)}const p=this._unmodified,{x:_,y:b}=this.point;let S=0,L=_,O=b;const W=this.width/2,K=this.height/2,X=this.worldMinY*this.scale,ee=this.worldMaxY*this.scale;if(b-K<X&&(O=X+K),b+K>ee&&(O=ee-K),ee-X<this.height&&(S=Math.max(S,this.height/(ee-X)),O=(ee+X)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const le=this.worldMinX*this.scale,de=this.worldMaxX*this.scale,pe=this.worldSize/2-(le+de)/2;L=(_+pe+this.worldSize)%this.worldSize-pe,L-W<le&&(L=le+W),L+W>de&&(L=de-W),de-le<this.width&&(S=Math.max(S,this.width/(de-le)),L=(de+le)/2)}L===_&&O===b||(this.center=this.unproject(new o.pointGeometry(L,O))),S&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=p,this._constraining=!1}_minZoomForBounds(){let u=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(u=Math.max(u,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),u}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,p=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const _=ll(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this.projection.zAxisUnit==="meters"?p:1,S=this._camera.getWorldToCamera(this.worldSize,b),L=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);L[8]=2*-u.x/this.width,L[9]=2*u.y/this.height;let O=o.mul([],L,S);if(this.projection.isReprojectedInTileSpace){const ze=this.locationCoordinate(this.center),$e=o.identity([]);o.translate($e,$e,[ze.x*this.worldSize,ze.y*this.worldSize,0]),o.multiply($e,$e,tu(this)),o.translate($e,$e,[-ze.x*this.worldSize,-ze.y*this.worldSize,0]),o.multiply(O,O,$e),this.inverseAdjustmentMatrix=function(qe){const tt=tu(qe,!0);return ie([],[tt[0],tt[1],tt[4],tt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],O,[this.worldSize,this.worldSize,this.worldSize/b,1]),this.projMatrix=O,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const W=o.invert([],L);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(W,this.horizonLineFromTop(),this.height);const K=new Float32Array(16);o.identity(K),o.scale(K,K,[1,-1,1]),o.rotateX(K,K,this._pitch),o.rotateZ(K,K,this.angle);const X=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ee=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;X[8]=2*-u.x/this.width,X[9]=2*(u.y+ee)/this.height,this.skyboxMatrix=o.multiply(K,X,K);const le=this.point,de=le.x,pe=le.y,fe=this.width%2/2,me=this.height%2/2,ae=Math.cos(this.angle),Se=Math.sin(this.angle),Ce=de-Math.round(de)+ae*fe+Se*me,ke=pe-Math.round(pe)+ae*me+Se*fe,Fe=new Float64Array(O);if(o.translate(Fe,Fe,[Ce>.5?Ce-1:Ce,ke>.5?ke-1:ke,0]),this.alignedProjMatrix=Fe,O=o.create(),o.scale(O,O,[this.width/2,-this.height/2,1]),o.translate(O,O,[1,-1,0]),this.labelPlaneMatrix=O,O=o.create(),o.scale(O,O,[1,-1,1]),o.translate(O,O,[-1,-1,0]),o.scale(O,O,[2/this.width,2/this.height,1]),this.glCoordMatrix=O,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},O=o.invert(new Float64Array(16),this.pixelMatrix),!O)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=O,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const ze=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(ze,ze,S),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=O;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const u=this.cameraWorldSizeForFog,p=this.cameraPixelsPerMeter,_=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,S=[u,u,p];o.scale$2(S,S,b),o.scale$2(_,_,-1),o.multiply$2(_,_,S);const L=o.create();o.translate(L,L,_),o.scale(L,L,S),this.mercatorFogMatrix=L,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(u,p,b)}_computeCameraPosition(u){const p=(u=u||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),b=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*p-u/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-_[0]*S,b.y/this.worldSize-_[1]*S,u/this.worldSize*this._centerAltitude-_[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(u){const p=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],b=u[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),b>0&&(S=Math.min((p-_)/b,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,u,S),this._updateStateFromCamera()}_updateStateFromCamera(){const u=this._camera.position,p=this._camera.forward(),{pitch:_,bearing:b}=this._camera.getPitchBearing(),S=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,L=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),O=Math.max((u[2]-S)/Math.cos(_),L),W=this._zoomFromMercatorZ(O);o.scaleAndAdd(u,u,p,O),this._pitch=o.clamp(_,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(b,-Math.PI,Math.PI),this._setZoom(o.clamp(W,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(u[0],u[1],u[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(u){return Math.pow(2,u)*this.tileSize}_mercatorZfromZoom(u){return this.cameraToCenterDistance/this._worldSizeFromZoom(u)}_minimumHeightOverTerrain(){const u=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(u)}_zoomFromMercatorZ(u){return this.scaleZoom(this.cameraToCenterDistance/(u*this.tileSize))}zoomFromMercatorZAdjusted(u){let p=0,_=o.GLOBE_ZOOM_THRESHOLD_MAX,b=0,S=1/0;for(;_-p>1e-6&&_>p;){const L=p+.5*(_-p),O=this.tileSize*Math.pow(2,L),W=this.getCameraToCenterDistance(this.projection,L,O),K=this.scaleZoom(W/(u*this.tileSize)),X=Math.abs(L-K);X<S&&(S=X,b=L),L<K?p=L:_=L}return b}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(u,p){const _=Math.min(u.x,p.x),b=Math.max(u.x,p.x),S=Math.min(u.y,p.y),L=Math.max(u.y,p.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const O=[new o.pointGeometry(_,S),new o.pointGeometry(b,L),new o.pointGeometry(_,L),new o.pointGeometry(b,S)],W=this.renderWorldCopies?-3:0,K=this.renderWorldCopies?4:1;for(const X of O){const ee=this.pointRayIntersection(X);if(ee.t<0)return!0;const le=this.rayIntersectionCoordinate(ee);if(le.x<W||le.y<0||le.x>K||le.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(u,p){const _=o.length(o.sub([],this._camera.position,u)),b=this._zoomFromMercatorZ(_)+p;return _-this._mercatorZfromZoom(b)}getCameraPoint(){if(this.projection.name==="globe"){const u=function([p,_,b],S){const L=[p,_,b,1];o.transformMat4$1(L,L,S);const O=L[3]=Math.max(L[3],1e-6);return L[0]/=O,L[1]/=O,L[2]/=O,L}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(u[0],u[1])}{const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,u))}}getCameraToCenterDistance(u,p=this.zoom,_=this.worldSize){const b=ll(u,p,this.width,this.height,1024),S=u.pixelSpaceConversion(this.center.lat,_,b);return .5/Math.tan(.5*this._fov)*this.height*S}getWorldToCameraMatrix(){const u=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(u,u,this.globeMatrix),u}}function Jo(g,u){let p=!1,_=null;const b=()=>{_=null,p&&(g(),_=setTimeout(b,u),p=!1)};return()=>(p=!0,_||b(),_)}class Sy{constructor(u){this._hashName=u&&encodeURIComponent(u),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Jo(this._updateHashUnthrottled.bind(this),300)}addTo(u){return this._map=u,o.window.addEventListener("hashchange",this._onHashChange,!1),u.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const u=this._map;if(!u)return"";const p=_f(u);if(this._hashName){const _=this._hashName;let b=!1;const S=o.window.location.hash.slice(1).split("&").map(L=>{const O=L.split("=")[0];return O===_?(b=!0,`${O}=${p}`):L}).filter(L=>L);return b||S.push(`${_}=${p}`),`#${S.join("&")}`}return`#${p}`}_getCurrentHash(){const u=o.window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(p=_)}),(p&&p[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._map;if(!u)return!1;const p=this._getCurrentHash();if(p.length>=3&&!p.some(_=>isNaN(_))){const _=u.dragRotate.isEnabled()&&u.touchZoomRotate.isEnabled()?+(p[3]||0):u.getBearing();return u.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:_,pitch:+(p[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,u)}}function _f(g,u){const p=g.getCenter(),_=Math.round(100*g.getZoom())/100,b=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,b),L=Math.round(p.lng*S)/S,O=Math.round(p.lat*S)/S,W=g.getBearing(),K=g.getPitch();let X=u?`/${L}/${O}/${_}`:`${_}/${O}/${L}`;return(W||K)&&(X+="/"+Math.round(10*W)/10),K&&(X+=`/${Math.round(K)}`),X}const _c={linearity:.3,easing:o.bezier(0,0,.3,1)},nu=o.extend({deceleration:2500,maxSpeed:1400},_c),ky=o.extend({deceleration:20,maxSpeed:1400},_c),Yh=o.extend({deceleration:1e3,maxSpeed:360},_c),xf=o.extend({deceleration:1e3,maxSpeed:90},_c);class Jh{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=o.exported.now();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(o.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const p={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)p.zoom+=S.zoomDelta||0,p.bearing+=S.bearingDelta||0,p.pitch+=S.pitchDelta||0,S.panDelta&&p.pan._add(S.panDelta),S.around&&(p.around=S.around),S.pinchAround&&(p.pinchAround=S.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(p.pan.mag()){const S=bc(p.pan.mag(),_,o.extend({},nu,u||{}));b.offset=p.pan.mult(S.amount/p.pan.mag()),b.center=this._map.transform.center,xc(b,S)}if(p.zoom){const S=bc(p.zoom,_,ky);b.zoom=this._map.transform.zoom+S.amount,xc(b,S)}if(p.bearing){const S=bc(p.bearing,_,Yh);b.bearing=this._map.transform.bearing+o.clamp(S.amount,-179,179),xc(b,S)}if(p.pitch){const S=bc(p.pitch,_,xf);b.pitch=this._map.transform.pitch+S.amount,xc(b,S)}if(b.zoom||b.bearing){const S=p.pinchAround===void 0?p.around:p.pinchAround;b.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function xc(g,u){(!g.duration||g.duration<u.duration)&&(g.duration=u.duration,g.easing=u.easing)}function bc(g,u,p){const{maxSpeed:_,linearity:b,deceleration:S}=p,L=o.clamp(g*b/(u/1e3),-_,_),O=Math.abs(L)/(S*b);return{easing:p.easing,duration:1e3*O,amount:L*(O/2)}}class Ri extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,_,b={}){const S=k(p.getCanvasContainer(),_),L=p.unproject(S);super(u,o.extend({point:S,lngLat:L,originalEvent:_},b)),this._defaultPrevented=!1,this.target=p}}class Qh extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,_){const b=u==="touchend"?_.changedTouches:_.touches,S=w(p.getCanvasContainer(),b),L=S.map(W=>p.unproject(W)),O=S.reduce((W,K,X,ee)=>W.add(K.div(ee.length)),new o.pointGeometry(0,0));super(u,{points:S,point:O,lngLats:L,lngLat:p.unproject(O),originalEvent:_}),this._defaultPrevented=!1}}class u1 extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,_){super(u,{originalEvent:_}),this._defaultPrevented=!1}}class Ty{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){this._mousedownPos=void 0}wheel(u){return this._firePreventable(new u1(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new Ri(u.type,this._map,u))}mouseup(u){this._map.fire(new Ri(u.type,this._map,u))}preclick(u){const p=o.extend({},u);p.type="preclick",this._map.fire(new Ri(p.type,this._map,p))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||(this.preclick(u),this._map.fire(new Ri(u.type,this._map,u)))}dblclick(u){return this._firePreventable(new Ri(u.type,this._map,u))}mouseover(u){this._map.fire(new Ri(u.type,this._map,u))}mouseout(u){this._map.fire(new Ri(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Qh(u.type,this._map,u))}touchmove(u){this._map.fire(new Qh(u.type,this._map,u))}touchend(u){this._map.fire(new Qh(u.type,this._map,u))}touchcancel(u){this._map.fire(new Qh(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ed{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(u){this._map.fire(new Ri(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ri("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new Ri(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bf{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(N(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const _=p,b=this._startPos,S=this._lastPos;if(!b||!S||S.equals(_)||!this._box&&_.dist(b)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=F("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const L=Math.min(b.x,_.x),O=Math.max(b.x,_.x),W=Math.min(b.y,_.y),K=Math.max(b.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${L}px,${W}px)`,this._box.style.width=O-L+"px",this._box.style.height=K-W+"px")})}mouseupWindow(u,p){if(!this._active)return;const _=this._startPos,b=p;if(_&&u.button===0){if(this.reset(),B(),_.x!==b.x||_.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:S=>S.fitScreenCoordinates(_,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",u)}}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),q(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new o.Event(u,{originalEvent:p}))}}function td(g,u){const p={};for(let _=0;_<g.length;_++)p[g[_].identifier]=u[_];return p}class Ay{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(u,p,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=u.timeStamp),_.length===this.numTouches&&(this.centroid=function(b){const S=new o.pointGeometry(0,0);for(const L of b)S._add(L);return S.div(b.length)}(p),this.touches=td(_,p)))}touchmove(u,p,_){if(this.aborted||!this.centroid)return;const b=td(_,p);for(const S in this.touches){const L=this.touches[S],O=b[S];(!O||O.dist(L)>30)&&(this.aborted=!0)}}touchend(u,p,_){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class ru{constructor(u){this.singleTap=new Ay(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(u,p,_){this.singleTap.touchstart(u,p,_)}touchmove(u,p,_){this.singleTap.touchmove(u,p,_)}touchend(u,p,_){const b=this.singleTap.touchend(u,p,_);if(b){const S=u.timeStamp-this.lastTime<500,L=!this.lastTap||this.lastTap.dist(b)<30;if(S&&L||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class wf{constructor(){this._zoomIn=new ru({numTouches:1,numTaps:2}),this._zoomOut=new ru({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,_){this._zoomIn.touchstart(u,p,_),this._zoomOut.touchstart(u,p,_)}touchmove(u,p,_){this._zoomIn.touchmove(u,p,_),this._zoomOut.touchmove(u,p,_)}touchend(u,p,_){const b=this._zoomIn.touchend(u,p,_),S=this._zoomOut.touchend(u,p,_);return b?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()+1,around:L.unproject(b)},{originalEvent:u})}):S?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()-1,around:L.unproject(S)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const My={0:1,2:2};class nd{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(u,p){return!1}_move(u,p){return{}}mousedown(u,p){if(this._lastPoint)return;const _=R(u);this._correctButton(u,_)&&(this._lastPoint=p,this._eventButton=_)}mousemoveWindow(u,p){const _=this._lastPoint;if(_){if(u.preventDefault(),this._eventButton!=null&&function(b,S){const L=My[S];return b.buttons===void 0||(b.buttons&L)!==L}(u,this._eventButton))this.reset();else if(this._moved||!(p.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(_,p)}}mouseupWindow(u){this._lastPoint&&R(u)===this._eventButton&&(this._moved&&B(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Iy extends nd{mousedown(u,p){super.mousedown(u,p),this._lastPoint&&(this._active=!0)}_correctButton(u,p){return p===0&&!u.ctrlKey}_move(u,p){return{around:p,panDelta:p.sub(u)}}}class Ef extends nd{_correctButton(u,p){return p===0&&u.ctrlKey||p===2}_move(u,p){const _=.8*(p.x-u.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(u){u.preventDefault()}}class Cf extends nd{_correctButton(u,p){return p===0&&u.ctrlKey||p===2}_move(u,p){const _=-.5*(p.y-u.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(u){u.preventDefault()}}class iu{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(u,p,_){return this._calculateTransform(u,p,_)}touchmove(u,p,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return u.cancelable&&u.preventDefault(),this._calculateTransform(u,p,_)}}touchend(u,p,_){this._calculateTransform(u,p,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,_){_.length>0&&(this._active=!0);const b=td(_,p),S=new o.pointGeometry(0,0),L=new o.pointGeometry(0,0);let O=0;for(const K in b){const X=b[K],ee=this._touches[K];ee&&(S._add(X),L._add(X.sub(ee)),O++,b[K]=X)}if(this._touches=b,O<this._minTouches||!L.mag())return;const W=L.div(O);return this._sum._add(W),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(O),panDelta:W}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class rd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(u){}_move(u,p,_){return{}}touchstart(u,p,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,_){const b=this._firstTwoTouches;if(!b)return;u.preventDefault();const[S,L]=b,O=wc(_,p,S),W=wc(_,p,L);if(!O||!W)return;const K=this._aroundCenter?null:O.add(W).div(2);return this._move([O,W],K,u)}touchend(u,p,_){if(!this._firstTwoTouches)return;const[b,S]=this._firstTwoTouches,L=wc(_,p,b),O=wc(_,p,S);L&&O||(this._active&&B(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function wc(g,u,p){for(let _=0;_<g.length;_++)if(g[_].identifier===p)return u[_]}function Py(g,u){return Math.log(g/u)/Math.LN2}class Dy extends rd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const _=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Py(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Py(this._distance,_),pinchAround:p}}}function Sf(g,u){return 180*g.angleWith(u)/Math.PI}class Ry extends rd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p){const _=this._vector;if(this._vector=u[0].sub(u[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Sf(this._vector,_),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const b=Sf(u,_);return Math.abs(b)<p}}function id(g){return Math.abs(g.y)>Math.abs(g.x)}class Ki extends rd{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(u){this._lastPoints=u,id(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,_){const b=this._lastPoints;if(!b)return;const S=u[0].sub(b[0]),L=u[1].sub(b[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(S,L,_.timeStamp),!this._valid)?void 0:(this._lastPoints=u,this._active=!0,{pitchDelta:(S.y+L.y)/2*-.5})}gestureBeginsVertically(u,p,_){if(this._valid!==void 0)return this._valid;const b=u.mag()>=2,S=p.mag()>=2;if(!b&&!S)return;if(!b||!S)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const L=u.y>0==p.y>0;return id(u)&&id(p)&&L}}const c1={panStep:100,bearingStep:15,pitchStep:10};class Ly{constructor(){const u=c1;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,_=0,b=0,S=0,L=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?_=-1:(u.preventDefault(),S=-1);break;case 39:u.shiftKey?_=1:(u.preventDefault(),S=1);break;case 38:u.shiftKey?b=1:(u.preventDefault(),L=-1);break;case 40:u.shiftKey?b=-1:(u.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(_=0,b=0),{cameraAnimation:O=>{const W=O.getZoom();O.easeTo({duration:300,easeId:"keyboardHandler",easing:h1,zoom:p?Math.round(W)+p*(u.shiftKey?2:1):W,bearing:O.getBearing()+_*this._bearingStep,pitch:O.getPitch()+b*this._pitchStep,offset:[-S*this._panStep,-L*this._panStep],center:O.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function h1(g){return g*(2-g)}const Oy=4.000244140625;class os{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(u.ctrlKey||u.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let p=u.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const _=o.exported.now(),b=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,p!==0&&p%Oy==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(b*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=k(this._el,u);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:p,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;this._type==="wheel"&&u.projection.wrap&&(u._center.lng>=180||u._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const p=()=>u._terrainEnabled()&&this._aroundCoord?u.computeZoomRelativeTo(this._aroundCoord):u.zoom;if(this._delta!==0){const W=this._type==="wheel"&&Math.abs(this._delta)>Oy?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*W)));this._delta<0&&K!==0&&(K=1/K);const X=p(),ee=Math.pow(2,X),le=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):ee;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(le*K))),this._type==="wheel"&&(this._startZoom=X,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:p(),b=this._startZoom,S=this._easing;let L,O=!1;if(this._type==="wheel"&&b&&S){const W=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),K=S(W);L=o.number(b,_,K),W<1?this._frameId||(this._frameId=!0):O=!0}else L=_,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:L-p(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=o.ease;if(this._prevEase){const _=this._prevEase,b=(o.exported.now()-_.start)/_.duration,S=_.easing(b+.01)-_.easing(b),L=.27/Math.sqrt(S*S+1e-4)*.01,O=Math.sqrt(.0729-L*L);p=o.bezier(L,O,.25,1)}return this._prevEase={start:o.exported.now(),duration:u,easing:p},p}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=F("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class zy{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ou{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(u,p){return u.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(u.shiftKey?-1:1),around:_.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oa{constructor(){this._tap=new ru({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(u,p,_){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=p[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(u,p,_))}touchmove(u,p,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const b=p[0],S=b.y-this._swipePoint.y;return this._swipePoint=b,u.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(u,p,_)}touchend(u,p,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(u,p,_)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class od{constructor(u,p,_){this._el=u,this._mousePan=p,this._touchPan=_}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Jt{constructor(u,p,_){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=p,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class By{constructor(u,p,_,b){this._el=u,this._touchZoom=p,this._touchRotate=_,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ec=g=>g.zoom||g.drag||g.pitch||g.rotate;class Cc extends o.Event{}class Sc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(u,p){const _=o.sub([],p,u);this.radius=o.length(_[2]<0?o.div([],_,this.constants):[_[0],_[1],0])}projectRay(u){o.div(u,u,this.constants),o.normalize(u,u),o.mul$1(u,u,this.constants);const p=o.scale$2([],u,this.radius);if(p[2]>0){const _=o.scale$2([],[0,0,1],o.dot(p,[0,0,1])),b=o.scale$2([],o.normalize([],[p[0],p[1],0]),this.radius),S=o.add([],p,o.scale$2([],o.sub([],o.add([],b,_),p),2));p[0]=S[0],p[1]=S[1]}return p}}function kc(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class Fy{constructor(u,p){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jh(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Sc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[b,S,L]of this._listeners)b.addEventListener(S,b===o.window.document?this.handleWindowEvent:this.handleEvent,L)}destroy(){for(const[u,p,_]of this._listeners)u.removeEventListener(p,u===o.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(u){const p=this._map,_=p.getCanvasContainer();this._add("mapEvent",new Ty(p,u));const b=p.boxZoom=new bf(p,u);this._add("boxZoom",b);const S=new wf,L=new ou;p.doubleClickZoom=new zy(L,S),this._add("tapZoom",S),this._add("clickZoom",L);const O=new Oa;this._add("tapDragZoom",O);const W=p.touchPitch=new Ki(p);this._add("touchPitch",W);const K=new Ef(u),X=new Cf(u);p.dragRotate=new Jt(u,K,X),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]);const ee=new Iy(u),le=new iu(p,u);p.dragPan=new od(_,ee,le),this._add("mousePan",ee),this._add("touchPan",le,["touchZoom","touchRotate"]);const de=new Ry,pe=new Dy;p.touchZoomRotate=new By(_,pe,de,O),this._add("touchRotate",de,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ed(p));const fe=p.scrollZoom=new os(p,this);this._add("scrollZoom",fe,["mousePan"]);const me=p.keyboard=new Ly;this._add("keyboard",me);for(const ae of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[ae]&&p[ae].enable(u[ae])}_add(u,p,_){this._handlers.push({handlerName:u,handler:p,allowed:_}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ec(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(u,p,_){for(const b in u)if(b!==_&&(!p||p.indexOf(b)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const p=[];for(const _ of u)this._el.contains(_.target)&&p.push(_);return p}handleEvent(u,p){this._updatingCamera=!0;const _=u.type==="renderFrame",b=_?void 0:u,S={needsRenderFrame:!1},L={},O={},W=u.touches?this._getMapTouches(u.touches):void 0,K=W?w(this._el,W):_?void 0:k(this._el,u);for(const{handlerName:le,handler:de,allowed:pe}of this._handlers){if(!de.isEnabled())continue;let fe;this._blockedByActive(O,pe,le)?de.reset():de[p||u.type]&&(fe=de[p||u.type](u,K,W),this.mergeHandlerResult(S,L,fe,le,b),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||de.isActive())&&(O[le]=de)}const X={};for(const le in this._previousActiveHandlers)O[le]||(X[le]=b);this._previousActiveHandlers=O,(Object.keys(X).length||kc(S))&&(this._changes.push([S,L,X]),this._triggerRenderFrame()),(Object.keys(O).length||kc(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ee}=S;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))}mergeHandlerResult(u,p,_,b,S){if(!_)return;o.extend(u,_);const L={handlerName:b,originalEvent:_.originalEvent||S};_.zoomDelta!==void 0&&(p.zoom=L),_.panDelta!==void 0&&(p.drag=L),_.pitchDelta!==void 0&&(p.pitch=L),_.bearingDelta!==void 0&&(p.rotate=L)}_applyChanges(){const u={},p={},_={};for(const[b,S,L]of this._changes)b.panDelta&&(u.panDelta=(u.panDelta||new o.pointGeometry(0,0))._add(b.panDelta)),b.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(u.around=b.around),b.aroundCoord!==void 0&&(u.aroundCoord=b.aroundCoord),b.pinchAround!==void 0&&(u.pinchAround=b.pinchAround),b.noInertia&&(u.noInertia=b.noInertia),o.extend(p,S),o.extend(_,L);this._updateMapTransform(u,p,_),this._changes=[]}_updateMapTransform(u,p,_){const b=this._map,S=b.transform,L=Se=>[Se.x,Se.y,Se.z];if((Se=>{const Ce=this._eventsInProgress.drag;return Ce&&!this._handlersById[Ce.handlerName].isActive()})()&&!kc(u)){const Se=S.zoom;S.cameraElevationReference="sea",S.recenterOnTerrain(),S.cameraElevationReference="ground",Se!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&b._stop(!0),!kc(u))return void this._fireEvents(p,_,!0);let{panDelta:O,zoomDelta:W,bearingDelta:K,pitchDelta:X,around:ee,aroundCoord:le,pinchAround:de}=u;S._isCameraConstrained&&(W>0&&(W=0),S._isCameraConstrained=!1),de!==void 0&&(ee=de),(W||(Se=>p.drag&&!this._eventsInProgress.drag)())&&ee&&(this._dragOrigin=L(S.pointCoordinate3D(ee)),this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",b._stop(!0),ee=ee||b.transform.centerPoint,K&&(S.bearing+=K),X&&(S.pitch+=X),S._updateCameraState();const pe=[0,0,0];if(O)if(S.projection.name==="mercator"){const Se=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(ee).dir),Ce=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(ee.sub(O)).dir);pe[0]=Ce[0]-Se[0],pe[1]=Ce[1]-Se[1]}else{const Se=S.pointCoordinate(ee);if(S.projection.name==="globe"){O=O.rotate(-S.angle);const Ce=S._pixelsPerMercatorPixel/S.worldSize;pe[0]=-O.x*o.mercatorScale(o.latFromMercatorY(Se.y))*Ce,pe[1]=-O.y*o.mercatorScale(S.center.lat)*Ce}else{const Ce=S.pointCoordinate(ee.sub(O));Se&&Ce&&(pe[0]=Ce.x-Se.x,pe[1]=Ce.y-Se.y)}}const fe=S.zoom,me=[0,0,0];if(W){const Se=L(le||S.pointCoordinate3D(ee)),Ce={dir:o.normalize([],o.sub([],Se,S._camera.position))};if(Ce.dir[2]<0){const ke=S.zoomDeltaToMovement(Se,W);o.scale$2(me,Ce.dir,ke)}}const ae=o.add(pe,pe,me);S._translateCameraConstrained(ae),W&&Math.abs(S.zoom-fe)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,_,!0)}_fireEvents(u,p,_){const b=Ec(this._eventsInProgress),S=Ec(u),L={};for(const X in u){const{originalEvent:ee}=u[X];this._eventsInProgress[X]||(L[`${X}start`]=ee),this._eventsInProgress[X]=u[X]}!b&&S&&this._fireEvent("movestart",S.originalEvent);for(const X in L)this._fireEvent(X,L[X]);S&&this._fireEvent("move",S.originalEvent);for(const X in u){const{originalEvent:ee}=u[X];this._fireEvent(X,ee)}const O={};let W;for(const X in this._eventsInProgress){const{handlerName:ee,originalEvent:le}=this._eventsInProgress[X];this._handlersById[ee].isActive()||(delete this._eventsInProgress[X],W=p[ee]||le,O[`${X}end`]=W)}for(const X in O)this._fireEvent(X,O[X]);const K=Ec(this._eventsInProgress);if(_&&(b||S)&&!K){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=le=>le!==0&&-this._bearingSnap<le&&le<this._bearingSnap;X?(ee(X.bearing||this._map.getBearing())&&(X.bearing=0),this._map.easeTo(X,{originalEvent:W})):(this._map.fire(new o.Event("moveend",{originalEvent:W})),ee(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new o.Event(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{this._frameId=void 0,this.handleEvent(new Cc("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const kf="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ny extends o.Evented{constructor(u,p){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=p.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}panBy(u,p,_){return u=o.pointGeometry.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},p),_)}panTo(u,p,_){return this.easeTo(o.extend({center:u},p),_)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,_){return this.easeTo(o.extend({zoom:u},p),_)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,_){return this.easeTo(o.extend({bearing:u},p),_)}resetNorth(u,p){return this.rotateTo(0,o.extend({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}cameraForBounds(u,p){u=o.LngLatBounds.convert(u);const _=p&&p.bearing||0,b=p&&p.pitch||0,S=u.getNorthWest(),L=u.getSouthEast();return this._cameraForBounds(this.transform,S,L,_,b,p)}_extendCameraOptions(u){const p={top:0,bottom:0,right:0,left:0};if(typeof(u=o.extend({padding:p,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const _=u.padding;u.padding={top:_,bottom:_,right:_,left:_}}return u.padding=o.extend(p,u.padding),u}_minimumAABBFrustumDistance(u,p){const _=p.max[0]-p.min[0],b=p.max[1]-p.min[1];return _/b>u.aspect?_/(2*Math.tan(.5*u.fovX)*u.aspect):b/(2*Math.tan(.5*u.fovY)*u.aspect)}_cameraForBoundsOnGlobe(u,p,_,b,S,L){const O=u.clone(),W=this._extendCameraOptions(L);O.bearing=b,O.pitch=S;const K=o.LngLat.convert(p),X=o.LngLat.convert(_),ee=.5*(K.lat+X.lat),le=.5*(K.lng+X.lng),de=o.latLngToECEF(ee,le),pe=o.normalize([],de),fe=o.normalize([],o.cross([],pe,[0,1,0])),me=o.cross([],fe,pe),ae=[fe[0],fe[1],fe[2],0,me[0],me[1],me[2],0,pe[0],pe[1],pe[2],0,0,0,0,1],Se=[de,o.latLngToECEF(K.lat,K.lng),o.latLngToECEF(X.lat,K.lng),o.latLngToECEF(X.lat,X.lng),o.latLngToECEF(K.lat,X.lng),o.latLngToECEF(ee,K.lng),o.latLngToECEF(ee,X.lng),o.latLngToECEF(K.lat,le),o.latLngToECEF(X.lat,le)];let Ce=o.Aabb.fromPoints(Se.map(kt=>[o.dot(fe,kt),o.dot(me,kt),o.dot(pe,kt)]));const ke=o.transformMat4([],Ce.center,ae);o.squaredLength(ke)===0&&o.set(ke,0,0,1),o.normalize(ke,ke),o.scale$2(ke,ke,o.GLOBE_RADIUS),O.center=o.ecefToLatLng(ke);const Fe=O.getWorldToCameraMatrix(),ze=o.invert(new Float64Array(16),Fe);Ce=o.Aabb.applyTransform(Ce,o.multiply([],Fe,ae)),o.transformMat4(ke,ke,Fe);const $e=.5*(Ce.max[2]-Ce.min[2]),qe=this._minimumAABBFrustumDistance(O,Ce),tt=o.scale$2([],[0,0,1],$e),ot=o.add(tt,ke,tt),Ot=qe+(O.pitch===0?0:o.distance(ke,ot)),Je=O.globeCenterInViewSpace,wt=o.sub([],ke,[Je[0],Je[1],Je[2]]);o.normalize(wt,wt),o.scale$2(wt,wt,Ot);const dt=o.add([],ke,wt);o.transformMat4(dt,dt,ze);const At=o.earthRadius/o.GLOBE_RADIUS,rt=o.length(dt),Ge=o.mercatorZfromAltitude(Math.max(rt*At-o.earthRadius,Number.EPSILON),0),at=Math.min(O.zoomFromMercatorZAdjusted(Ge),W.maxZoom);return at>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"mercator"}),O.zoom=at,this._cameraForBounds(O,p,_,b,S,L)):{center:O.center,zoom:at,bearing:b,pitch:S}}queryTerrainElevation(u,p){const _=this.transform.elevation;return _?(p=o.extend({},{exaggerated:!0},p),_.getAtPoint(o.MercatorCoordinate.fromLngLat(u),null,p.exaggerated)):null}_cameraForBounds(u,p,_,b,S,L){if(u.projection.name==="globe")return this._cameraForBoundsOnGlobe(u,p,_,b,S,L);const O=u.clone(),W=this._extendCameraOptions(L),K=O.padding;O.bearing=b,O.pitch=S;const X=o.LngLat.convert(p),ee=o.LngLat.convert(_),le=new o.LngLat(X.lng,ee.lat),de=new o.LngLat(ee.lng,X.lat),pe=O.project(X),fe=O.project(ee),me=this.queryTerrainElevation(X),ae=this.queryTerrainElevation(ee),Se=this.queryTerrainElevation(le),Ce=this.queryTerrainElevation(de),ke=[[pe.x,pe.y,Math.min(me||0,ae||0,Se||0,Ce||0)],[fe.x,fe.y,Math.max(me||0,ae||0,Se||0,Ce||0)]];let Fe=o.Aabb.fromPoints(ke);const ze=O.getWorldToCameraMatrix(),$e=o.invert(new Float64Array(16),ze);Fe=o.Aabb.applyTransform(Fe,ze);const qe=o.sub([],Fe.max,Fe.min),tt=K.left||0,ot=K.right||0,Ot=K.bottom||0,Je=K.top||0,{left:wt,right:dt,top:At,bottom:rt}=W.padding,Ge=.5*(tt+ot),at=.5*(Je+Ot),kt=Math.min(O.scaleZoom(O.scale*Math.min((O.width-(tt+ot+wt+dt))/qe[0],(O.height-(Ot+Je+rt+At))/qe[1])),W.maxZoom),It=O.scale/O.zoomScale(kt);Fe=new o.Aabb([Fe.min[0]-(wt+Ge)*It,Fe.min[1]-(rt+at)*It,Fe.min[2]],[Fe.max[0]+(dt+Ge)*It,Fe.max[1]+(At+at)*It,Fe.max[2]]);const rn=.5*qe[2],Tn=this._minimumAABBFrustumDistance(O,Fe),en=[0,0,1,0];o.transformMat4$1(en,en,ze),o.normalize$2(en,en);const Xt=o.scale$2([],en,Tn+rn),an=o.add([],Fe.center,Xt),On=(typeof W.offset.x=="number"&&typeof W.offset.y=="number"?new o.pointGeometry(W.offset.x,W.offset.y):o.pointGeometry.convert(W.offset)).rotate(-o.degToRad(b));Fe.center[0]-=On.x*It,Fe.center[1]+=On.y*It,o.transformMat4(Fe.center,Fe.center,$e),o.transformMat4(an,an,$e);const un=[Fe.center[0],Fe.center[1],an[2]*O.pixelsPerMeter];o.scale$2(un,un,1/O.worldSize);const nr=o.lngFromMercatorX(un[0]),ir=o.latFromMercatorY(un[1]),Cr=Math.min(O._zoomFromMercatorZ(un[2]),W.maxZoom),gr=new o.LngLat(nr,ir);return O.mercatorFromTransition&&Cr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(O.setProjection({name:"globe"}),O.zoom=Cr,this._cameraForBounds(O,p,_,b,S,L)):{center:gr,zoom:Cr,bearing:b,pitch:S}}fitBounds(u,p,_){const b=this.cameraForBounds(u,p);return this._fitInternal(b,p,_)}fitScreenCoordinates(u,p,_,b,S){const L=o.pointGeometry.convert(u),O=o.pointGeometry.convert(p),W=new o.pointGeometry(Math.min(L.x,O.x),Math.min(L.y,O.y)),K=new o.pointGeometry(Math.max(L.x,O.x),Math.max(L.y,O.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(L,O))return this;const X=this.transform.pointLocation3D(W),ee=this.transform.pointLocation3D(K),le=this.transform.pointLocation3D(new o.pointGeometry(W.x,K.y)),de=this.transform.pointLocation3D(new o.pointGeometry(K.x,W.y)),pe=[Math.min(X.lng,ee.lng,le.lng,de.lng),Math.min(X.lat,ee.lat,le.lat,de.lat)],fe=[Math.max(X.lng,ee.lng,le.lng,de.lng),Math.max(X.lat,ee.lat,le.lat,de.lat)],me=b&&b.pitch?b.pitch:this.getPitch(),ae=this._cameraForBounds(this.transform,pe,fe,_,me,b);return this._fitInternal(ae,b,S)}_fitInternal(u,p,_){return u?(delete(p=o.extend(u,p)).padding,p.linear?this.easeTo(p,_):this.flyTo(p,_)):this}jumpTo(u,p){this.stop();const _=u.preloadOnly?this.transform.clone():this.transform;let b=!1,S=!1,L=!1;return"zoom"in u&&_.zoom!==+u.zoom&&(b=!0,_.zoom=+u.zoom),u.center!==void 0&&(_.center=o.LngLat.convert(u.center)),"bearing"in u&&_.bearing!==+u.bearing&&(S=!0,_.bearing=+u.bearing),"pitch"in u&&_.pitch!==+u.pitch&&(L=!0,_.pitch=+u.pitch),u.padding==null||_.isPaddingEqual(u.padding)||(_.padding=u.padding),u.preloadOnly?(this._preloadTiles(_),this):(this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),b&&this.fire(new o.Event("zoomstart",p)).fire(new o.Event("zoom",p)).fire(new o.Event("zoomend",p)),S&&this.fire(new o.Event("rotatestart",p)).fire(new o.Event("rotate",p)).fire(new o.Event("rotateend",p)),L&&this.fire(new o.Event("pitchstart",p)).fire(new o.Event("pitch",p)).fire(new o.Event("pitchend",p)),this.fire(new o.Event("moveend",p)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(kf),this.transform.getFreeCameraOptions()}setFreeCameraOptions(u,p){const _=this.transform;if(!_.projection.supportsFreeCamera)return o.warnOnce(kf),this;this.stop();const b=_.zoom,S=_.pitch,L=_.bearing;_.setFreeCameraOptions(u);const O=b!==_.zoom,W=S!==_.pitch,K=L!==_.bearing;return this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),O&&this.fire(new o.Event("zoomstart",p)).fire(new o.Event("zoom",p)).fire(new o.Event("zoomend",p)),K&&this.fire(new o.Event("rotatestart",p)).fire(new o.Event("rotate",p)).fire(new o.Event("rotateend",p)),W&&this.fire(new o.Event("pitchstart",p)).fire(new o.Event("pitch",p)).fire(new o.Event("pitchend",p)),this.fire(new o.Event("moveend",p)),this}easeTo(u,p){this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.exported.prefersReducedMotion)&&(u.duration=0);const _=this.transform,b=this.getZoom(),S=this.getBearing(),L=this.getPitch(),O=this.getPadding(),W="zoom"in u?+u.zoom:b,K="bearing"in u?this._normalizeBearing(u.bearing,S):S,X="pitch"in u?+u.pitch:L,ee="padding"in u?u.padding:_.padding,le=o.pointGeometry.convert(u.offset);let de,pe,fe;if(_.projection.name==="globe"){const tt=o.MercatorCoordinate.fromLngLat(_.center),ot=le.rotate(-_.angle);tt.x+=ot.x/_.worldSize,tt.y+=ot.y/_.worldSize;const Ot=tt.toLngLat(),Je=o.LngLat.convert(u.center||Ot);this._normalizeCenter(Je),de=_.centerPoint.add(ot),pe=new o.pointGeometry(tt.x,tt.y).mult(_.worldSize),fe=new o.pointGeometry(o.mercatorXfromLng(Je.lng),o.mercatorYfromLat(Je.lat)).mult(_.worldSize).sub(pe)}else{de=_.centerPoint.add(le);const tt=_.pointLocation(de),ot=o.LngLat.convert(u.center||tt);this._normalizeCenter(ot),pe=_.project(tt),fe=_.project(ot).sub(pe)}const me=_.zoomScale(W-b);let ae,Se;u.around&&(ae=o.LngLat.convert(u.around),Se=_.locationPoint(ae));const Ce=this._zooming||W!==b,ke=this._rotating||S!==K,Fe=this._pitching||X!==L,ze=!_.isPaddingEqual(ee),$e=tt=>ot=>{if(Ce&&(tt.zoom=o.number(b,W,ot)),ke&&(tt.bearing=o.number(S,K,ot)),Fe&&(tt.pitch=o.number(L,X,ot)),ze&&(tt.interpolatePadding(O,ee,ot),de=tt.centerPoint.add(le)),ae)tt.setLocationAtPoint(ae,Se);else{const Ot=tt.zoomScale(tt.zoom-b),Je=W>b?Math.min(2,me):Math.max(.5,me),wt=Math.pow(Je,1-ot),dt=tt.unproject(pe.add(fe.mult(ot*wt)).mult(Ot));tt.setLocationAtPoint(tt.renderWorldCopies?dt.wrap():dt,de)}return u.preloadOnly||this._fireMoveEvents(p),tt};if(u.preloadOnly){const tt=this._emulate($e,u.duration,_);return this._preloadTiles(tt),this}const qe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ce,this._rotating=ke,this._pitching=Fe,this._padding=ze,this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,qe),this._ease($e(_),tt=>{_.recenterOnTerrain(),this._afterEase(p,tt)},u),this}_prepareEase(u,p,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",p||_.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!_.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!_.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!_.pitching&&this.fire(new o.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,b=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new o.Event("zoomend",u)),b&&this.fire(new o.Event("rotateend",u)),S&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}flyTo(u,p){if(!u.essential&&o.exported.prefersReducedMotion){const kt=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(kt,p)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);const _=this.transform,b=this.getZoom(),S=this.getBearing(),L=this.getPitch(),O=this.getPadding(),W="zoom"in u?o.clamp(+u.zoom,_.minZoom,_.maxZoom):b,K="bearing"in u?this._normalizeBearing(u.bearing,S):S,X="pitch"in u?+u.pitch:L,ee="padding"in u?u.padding:_.padding,le=_.zoomScale(W-b),de=o.pointGeometry.convert(u.offset);let pe=_.centerPoint.add(de);const fe=_.pointLocation(pe),me=o.LngLat.convert(u.center||fe);this._normalizeCenter(me);const ae=_.project(fe),Se=_.project(me).sub(ae);let Ce=u.curve;const ke=Math.max(_.width,_.height),Fe=ke/le,ze=Se.mag();if("minZoom"in u){const kt=o.clamp(Math.min(u.minZoom,b,W),_.minZoom,_.maxZoom),It=ke/_.zoomScale(kt-b);Ce=Math.sqrt(It/ze*2)}const $e=Ce*Ce;function qe(kt){const It=(Fe*Fe-ke*ke+(kt?-1:1)*$e*$e*ze*ze)/(2*(kt?Fe:ke)*$e*ze);return Math.log(Math.sqrt(It*It+1)-It)}function tt(kt){return(Math.exp(kt)-Math.exp(-kt))/2}function ot(kt){return(Math.exp(kt)+Math.exp(-kt))/2}const Ot=qe(0);let Je=function(kt){return ot(Ot)/ot(Ot+Ce*kt)},wt=function(kt){return ke*((ot(Ot)*(tt(It=Ot+Ce*kt)/ot(It))-tt(Ot))/$e)/ze;var It},dt=(qe(1)-Ot)/Ce;if(Math.abs(ze)<1e-6||!isFinite(dt)){if(Math.abs(ke-Fe)<1e-6)return this.easeTo(u,p);const kt=Fe<ke?-1:1;dt=Math.abs(Math.log(Fe/ke))/Ce,wt=function(){return 0},Je=function(It){return Math.exp(kt*Ce*It)}}u.duration="duration"in u?+u.duration:1e3*dt/("screenSpeed"in u?+u.screenSpeed/Ce:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0);const At=S!==K,rt=X!==L,Ge=!_.isPaddingEqual(ee),at=kt=>It=>{const rn=It*dt,Tn=1/Je(rn);kt.zoom=It===1?W:b+kt.scaleZoom(Tn),At&&(kt.bearing=o.number(S,K,It)),rt&&(kt.pitch=o.number(L,X,It)),Ge&&(kt.interpolatePadding(O,ee,It),pe=kt.centerPoint.add(de));const en=It===1?me:kt.unproject(ae.add(Se.mult(wt(rn))).mult(Tn));return kt.setLocationAtPoint(kt.renderWorldCopies?en.wrap():en,pe),kt._updateCameraOnTerrain(),u.preloadOnly||this._fireMoveEvents(p),kt};if(u.preloadOnly){const kt=this._emulate(at,u.duration,_);return this._preloadTiles(kt),this}return this._zooming=!0,this._rotating=At,this._pitching=rt,this._padding=Ge,this._prepareEase(p,!1),this._ease(at(_),()=>this._afterEase(p),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,p)}if(!u){const _=this.handlers;_&&_.stop(!1)}return this}_ease(u,p,_){_.animate===!1||_.duration===0?(u(1),p()):(this._easeStart=o.exported.now(),this._easeOptions=_,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),p=this._onEaseFrame;p&&p(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,p){u=o.wrap(u,-180,180);const _=Math.abs(u-p);return Math.abs(u-360-p)<_&&(u-=360),Math.abs(u+360-p)<_&&(u+=360),u}_normalizeCenter(u){const p=this.transform;if(!p.renderWorldCopies||p.maxBounds)return;const _=u.lng-p.center.lng;u.lng+=_>180?-360:_<-180?360:0}_emulate(u,p,_){const b=Math.ceil(15*p/1e3),S=[],L=u(_.clone());for(let O=0;O<=b;O++){const W=L(O/b);S.push(W.clone())}return S}}class Tf{constructor(u={}){this.options=u,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){const p=this.options&&this.options.compact;return this._map=u,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=F("button","mapboxgl-ctrl-attrib-button",this._container),F("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=F("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const _=this._map._getUIString(`AttributionControl.${p}`);u.setAttribute("aria-label",_),u.removeAttribute("title"),u.firstElementChild&&u.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));const p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(u){const _=p.reduce((b,S,L)=>(S.value&&(b+=`${S.key}=${S.value}${L<p.length-1?"&":""}`),b),"?");u.href=`${o.config.FEEDBACK_URL}/${_}#${_f(this._map,!0)}`,u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let u=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const p=this._map.style._sourceCaches;for(const b in p){const S=p[b];if(S.used){const L=S.getSource();L.attribution&&u.indexOf(L.attribution)<0&&u.push(L.attribution)}}u.sort((b,S)=>b.length-S.length),u=u.filter((b,S)=>{for(let L=S+1;L<u.length;L++)if(u[L].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=[...this.options.customAttribution,...u]:u.unshift(this.options.customAttribution));const _=u.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,u.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Af{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(u){this._map=u,this._container=F("div","mapboxgl-ctrl");const p=F("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const u=this._map.style._sourceCaches;if(Object.entries(u).length===0)return!0;for(const p in u){const _=u[p].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}}}class Tc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,_=p?this._queue.concat(p):this._queue;for(const b of _)if(b.id===u)return void(b.cancelled=!0)}run(u=0){const p=this._currentlyRunning=this._queue;this._queue=[];for(const _ of p)if(!_.cancelled&&(_.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function ad(g,u,p){if(g=new o.LngLat(g.lng,g.lat),u){const _=new o.LngLat(g.lng-360,g.lat),b=new o.LngLat(g.lng+360,g.lat),S=360*Math.ceil(Math.abs(g.lng-p.center.lng)/360),L=p.locationPoint(g).distSqr(u),O=u.x<0||u.y<0||u.x>p.width||u.y>p.height;p.locationPoint(_).distSqr(u)<L&&(O||Math.abs(_.lng-p.center.lng)<S)?g=_:p.locationPoint(b).distSqr(u)<L&&(O||Math.abs(b.lng-p.center.lng)<S)&&(g=b)}for(;Math.abs(g.lng-p.center.lng)>180;){const _=p.locationPoint(g);if(_.x>=0&&_.y>=0&&_.x<=p.width&&_.y<=p.height)break;g.lng>p.center.lng?g.lng-=360:g.lng+=360}return g}const au={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class sd extends o.Evented{constructor(u,p){if(super(),(u instanceof o.window.HTMLElement||p)&&(u=o.extend({element:u},p)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=u&&u.occludedOpacity||.2,u&&u.element)this._element=u.element,this._offset=o.pointGeometry.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=F("div");const b=41,S=27,L=U("svg",{display:"block",height:b*this._scale+"px",width:S*this._scale+"px",viewBox:`0 0 ${S} ${b}`},this._element),O=U("radialGradient",{id:"shadowGradient"},U("defs",{},L));U("stop",{offset:"10%","stop-opacity":.4},O),U("stop",{offset:"100%","stop-opacity":.05},O),U("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},L),U("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},L),U("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},L),U("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},L),this._offset=o.pointGeometry.convert(u&&u.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const _=this._element.classList;for(const b in au)_.remove(`mapboxgl-marker-anchor-${b}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(u){return u===this._map||(this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._updateMoving),u.on("moveend",this._update),u.on("remove",this._clearFadeTimer),u._addMarker(this),this.setDraggable(this._draggable),this._update(),u.on("click",this._onMapClick)),this}remove(){const u=this._map;return u&&(u.off("click",this._onMapClick),u.off("move",this._updateMoving),u.off("moveend",this._update),u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler),u.off("mouseup",this._onUp),u.off("touchend",this._onUp),u.off("mousemove",this._onMove),u.off("touchmove",this._onMove),u.off("remove",this._clearFadeTimer),u._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const b=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,u._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(u){const p=u.code,_=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(u){const p=u.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?(u.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(u.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const u=this._map,p=this._pos;if(!u||!p)return!1;const _=u.unproject(p),b=u.getFreeCameraOptions();if(!b.position)return!1;const S=b.position.toLngLat();return S.distanceTo(_)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const u=this._map;if(!u)return;const p=this._pos;if(!p||p.x<0||p.x>u.transform.width||p.y<0||p.y>u.transform.height)return void this._clearFadeTimer();const _=u.unproject(p);let b;u._showingGlobe()&&o.isLngLatBehindGlobe(u.transform,this._lngLat)?b=0:(b=1-u._queryFogOpacity(_),u.transform._terrainEnabled()&&u.getTerrain()&&this._behindTerrain()&&(b*=this._occludedOpacity)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const u=this._pos;if(!u||!this._map)return;const p=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${u.x}px,${u.y}px)
            ${au[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${p.x}px,${p.y}px)
        `}_calculateXYTransform(){const u=this._pos,p=this._map,_=this.getPitchAlignment();if(!p||!u||_!=="map")return"";if(!p._showingGlobe()){const W=p.getPitch();return W?`rotateX(${W}deg)`:""}const b=o.radToDeg(o.globeTiltAtLngLat(p.transform,this._lngLat)),S=u.sub(o.globeCenterToScreenPoint(p.transform)),L=Math.abs(S.x)+Math.abs(S.y);if(L===0)return"";const O=b/L;return`rotateX(${-S.y*O}deg) rotateY(${S.x*O}deg)`}_calculateZTransform(){const u=this._pos,p=this._map;if(!p||!u)return"";let _=0;const b=this.getRotationAlignment();if(b==="map")if(p._showingGlobe()){const S=p.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),L=p.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(S);_=o.radToDeg(Math.atan2(L.y,L.x))-90}else _=-p.getBearing();else if(b==="horizon"){const S=o.smoothstep(4,6,p.getZoom()),L=o.globeCenterToScreenPoint(p.transform);L.y+=S*p.transform.height;const O=u.sub(L),W=o.radToDeg(Math.atan2(O.y,O.x));_=(W>90?W-270:W+90)*(1-S)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(u){o.window.cancelAnimationFrame(this._updateFrameId);const p=this._map;p&&(p.transform.renderWorldCopies&&(this._lngLat=ad(this._lngLat,this._pos,p.transform)),this._pos=p.project(this._lngLat),u===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),p._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(p._showingGlobe()||p.getTerrain()||p.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(u){return this._offset=o.pointGeometry.convert(u),this._update(),this}_onMove(u){const p=this._map;if(!p)return;const _=this._pointerdownPos,b=this._positionDelta;if(_&&b){if(!this._isDragging){const S=this._clickTolerance||p._clickTolerance;if(u.point.dist(_)<S)return;this._isDragging=!0}this._pos=u.point.sub(b),this._lngLat=p.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const u=this._map;u&&(u.off("mousemove",this._onMove),u.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(u){const p=this._map,_=this._pos;p&&_&&this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(_),this._pointerdownPos=u.point,this._state="pending",p.on("mousemove",this._onMove),p.on("touchmove",this._onMove),p.once("mouseup",this._onUp),p.once("touchend",this._onUp))}setDraggable(u){this._draggable=!!u;const p=this._map;return p&&(u?(p.on("mousedown",this._addDragHandler),p.on("touchstart",this._addDragHandler)):(p.off("mousedown",this._addDragHandler),p.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(u){return this._occludedOpacity=u||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Uy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jy=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Mf(g=new o.pointGeometry(0,0),u="bottom"){if(typeof g=="number"){const p=Math.round(Math.sqrt(.5*Math.pow(g,2)));switch(u){case"top":return new o.pointGeometry(0,g);case"top-left":return new o.pointGeometry(p,p);case"top-right":return new o.pointGeometry(-p,p);case"bottom":return new o.pointGeometry(0,-g);case"bottom-left":return new o.pointGeometry(p,-p);case"bottom-right":return new o.pointGeometry(-p,-p);case"left":return new o.pointGeometry(g,0);case"right":return new o.pointGeometry(-g,0)}return new o.pointGeometry(0,0)}return g instanceof o.pointGeometry||Array.isArray(g)?o.pointGeometry.convert(g):o.pointGeometry.convert(g[u]||[0,0])}class Vy{constructor(u){this.jumpTo(u)}getValue(u){if(u<=this._startTime)return this._start;if(u>=this._endTime)return this._end;const p=o.easeCubicInOut((u-this._startTime)/(this._endTime-this._startTime));return this._start*(1-p)+this._end*p}isEasing(u){return u>=this._startTime&&u<=this._endTime}jumpTo(u){this._startTime=-1/0,this._endTime=-1/0,this._start=u,this._end=u}easeTo(u,p,_){this._start=this.getValue(p),this._end=u,this._startTime=p,this._endTime=p+_}}const $y={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Hy={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},If={showCompass:!0,showZoom:!0,visualizePitch:!1};class Wy{constructor(u,p,_=!1){this._clickTolerance=10,this.element=p,this.mouseRotate=new Ef({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,_&&(this.mousePitch=new Cf({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),p.addEventListener("mousedown",this.mousedown),p.addEventListener("touchstart",this.touchstart,{passive:!1}),p.addEventListener("touchmove",this.touchmove),p.addEventListener("touchend",this.touchend),p.addEventListener("touchcancel",this.reset)}down(u,p){this.mouseRotate.mousedown(u,p),this.mousePitch&&this.mousePitch.mousedown(u,p),N()}move(u,p){const _=this.map,b=this.mouseRotate.mousemoveWindow(u,p),S=b&&b.bearingDelta;if(S&&_.setBearing(_.getBearing()+S),this.mousePitch){const L=this.mousePitch.mousemoveWindow(u,p),O=L&&L.pitchDelta;O&&_.setPitch(_.getPitch()+O)}}off(){const u=this.element;u.removeEventListener("mousedown",this.mousedown),u.removeEventListener("touchstart",this.touchstart,{passive:!1}),u.removeEventListener("touchmove",this.touchmove),u.removeEventListener("touchend",this.touchend),u.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){q(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(u){this.down(o.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),k(this.element,u)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(u){this.move(u,k(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=w(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Gy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},qy={maxWidth:100,unit:"metric"};function Zy(g,u,p){const _=ld(u),b=_/u,S={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[p];this._map._requestDomTask(()=>{this._container.style.width=g*b+"px",this._container.innerHTML=`${_}&nbsp;${S}`})}function ld(g){const u=Math.pow(10,`${Math.floor(g)}`.length-1);let p=g/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:p>=1?1:function(_){const b=Math.pow(10,Math.ceil(-Math.log(_)/Math.LN10));return Math.round(_*b)/b}(p),u*p}const Ac={version:o.version,supported:C,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends Ny{constructor(g){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(g=o.extend({},Hy,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(g.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(g.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Zt(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),g),this._interactive=g.interactive,this._minTileCacheSize=g.minTileCacheSize,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._useWebGL2=g.useWebGL2,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=g.crossSourceCollisions,this._collectResourceTiming=g.collectResourceTiming,this._optimizeForTerrain=g.optimizeForTerrain,this._language=this._parseLanguage(g.language),this._worldview=g.worldview,this._renderTaskQueue=new Tc,this._domRenderTaskQueue=new Tc,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},$y,g.locale),this._clickTolerance=g.clickTolerance,this._cooperativeGestures=g.cooperativeGestures,this._performanceMetricsCollection=g.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Vy(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(g.transformRequest,g.accessToken,g.testMode),this._silenceAuthErrors=!!g.testMode,typeof g.container=="string"){if(this._container=o.window.document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),g.maxBounds&&this.setMaxBounds(g.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Fy(this,g),this._localFontFamily=g.localFontFamily,this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),g.projection&&this.setProjection(g.projection),this._hash=g.hash&&new Sy(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,o.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),g.attributionControl&&this.addControl(new Tf({customAttribution:g.customAttribution})),this._logoControl=new Af,this.addControl(this._logoControl,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new o.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new o.Event(`${u.dataType}dataloading`,u))})}_getMapId(){return this._mapId}addControl(g,u){if(u===void 0&&(u=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=g.onAdd(this);this._controls.push(g);const _=this._controlPositions[u];return u.indexOf("bottom")!==-1?_.insertBefore(p,_.firstChild):_.appendChild(p),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(g);return u>-1&&this._controls.splice(u,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(g){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const u=!this._moving;return u&&this.fire(new o.Event("movestart",g)).fire(new o.Event("move",g)),this.fire(new o.Event("resize",g)),u&&this.fire(new o.Event("moveend",g)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(g){return this.transform.setMaxBounds(o.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g==null?-2:g)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g?this.setZoom(g):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g==null?22:g)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g?this.setZoom(g):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g==null?0:g)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g?this.setPitch(g):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g==null?85:g)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g?this.setPitch(g):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(g){return g==="auto"?o.window.navigator.language:Array.isArray(g)?g.length===0?void 0:g.map(u=>u==="auto"?o.window.navigator.language:u):g}setLanguage(g){const u=this._parseLanguage(g);if(!this.style||u===this._language)return this;this._language=u,this.style._reloadSources();for(const p of this._controls)p._setLanguage&&p._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(g){return this.style&&g!==this._worldview?(this._worldview=g,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(g){return this._lazyInitEmptyStyle(),g?typeof g=="string"&&(g={name:g}):g=null,this._useExplicitProjection=!!g,this._prioritizeAndUpdateProjection(g,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const g=this.transform,u=g.projection.name;let p;u==="globe"&&g.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(g.setMercatorFromTransition(),p=!0):u==="mercator"&&g.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(g.setProjection({name:"globe"}),p=!0),p&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(g,u){return this._updateProjection(g||u||{name:"mercator"})}_updateProjection(g){let u;if(u=g.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(g),this.style.applyProjectionUpdate(),u){this.painter.clearBackgroundTiles();for(const p in this.style._sourceCaches)this.style._sourceCaches[p].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(g){return this.transform.locationPoint3D(o.LngLat.convert(g))}unproject(g){return this.transform.pointLocation3D(o.pointGeometry.convert(g))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(g,u,p){if(g==="mouseenter"||g==="mouseover"){let _=!1;const b=L=>{const O=u.filter(K=>this.getLayer(K)),W=O.length?this.queryRenderedFeatures(L.point,{layers:O}):[];W.length?_||(_=!0,p.call(this,new Ri(g,this,L.originalEvent,{features:W}))):_=!1},S=()=>{_=!1};return{layers:new Set(u),listener:p,delegates:{mousemove:b,mouseout:S}}}if(g==="mouseleave"||g==="mouseout"){let _=!1;const b=L=>{const O=u.filter(W=>this.getLayer(W));(O.length?this.queryRenderedFeatures(L.point,{layers:O}):[]).length?_=!0:_&&(_=!1,p.call(this,new Ri(g,this,L.originalEvent)))},S=L=>{_&&(_=!1,p.call(this,new Ri(g,this,L.originalEvent)))};return{layers:new Set(u),listener:p,delegates:{mousemove:b,mouseout:S}}}{const _=b=>{const S=u.filter(O=>this.getLayer(O)),L=S.length?this.queryRenderedFeatures(b.point,{layers:S}):[];L.length&&(b.features=L,p.call(this,b),delete b.features)};return{layers:new Set(u),listener:p,delegates:{[g]:_}}}}on(g,u,p){if(p===void 0)return super.on(g,u);Array.isArray(u)||(u=[u]);const _=this._createDelegatedListener(g,u,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(_);for(const b in _.delegates)this.on(b,_.delegates[b]);return this}once(g,u,p){if(p===void 0)return super.once(g,u);Array.isArray(u)||(u=[u]);const _=this._createDelegatedListener(g,u,p);for(const b in _.delegates)this.once(b,_.delegates[b]);return this}off(g,u,p){if(p===void 0)return super.off(g,u);u=new Set(Array.isArray(u)?u:[u]);const _=(S,L)=>{if(S.size!==L.size)return!1;for(const O of S)if(!L.has(O))return!1;return!0},b=this._delegatedListeners?this._delegatedListeners[g]:void 0;return b&&(S=>{for(let L=0;L<S.length;L++){const O=S[L];if(O.listener===p&&_(O.layers,u)){for(const W in O.delegates)this.off(W,O.delegates[W]);return S.splice(L,1),this}}})(b),this}queryRenderedFeatures(g,u){return this.style?(u!==void 0||g===void 0||g instanceof o.pointGeometry||Array.isArray(g)||(u=g,g=void 0),this.style.queryRenderedFeatures(g=g||[[0,0],[this.transform.width,this.transform.height]],u=u||{},this.transform)):[]}querySourceFeatures(g,u){return this.style.querySourceFeatures(g,u)}setStyle(g,u){return(u=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&u.localFontFamily===this._localFontFamily&&this.style&&g?(this._diffStyle(g,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._localFontFamily=u.localFontFamily,this._updateStyle(g,u))}_getUIString(g){const u=this._locale[g];if(u==null)throw new Error(`Missing UI string '${g}'`);return u}_updateStyle(g,u){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),g&&(this.style=new Yo(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Yo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,u){if(typeof g=="string"){const p=this._requestManager.normalizeStyleURL(g),_=this._requestManager.transformRequest(p,o.ResourceType.Style);o.getJSON(_,(b,S)=>{b?this.fire(new o.ErrorEvent(b)):S&&this._updateDiff(S,u)})}else typeof g=="object"&&this._updateDiff(g,u)}_updateDiff(g,u){try{this.style.setState(g)&&this._update(!0)}catch(p){o.warnOnce(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(g,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(g,u){return this._lazyInitEmptyStyle(),this.style.addSource(g,u),this._update(!0)}isSourceLoaded(g){return!!this.style&&this.style._isSourceCacheLoaded(g)}areTilesLoaded(){const g=this.style&&this.style._sourceCaches;for(const u in g){const p=g[u]._tiles;for(const _ in p){const b=p[_];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(g,u,p){this._lazyInitEmptyStyle(),this.style.addSourceType(g,u,p)}removeSource(g){return this.style.removeSource(g),this._updateTerrain(),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,u,{pixelRatio:p=1,sdf:_=!1,stretchX:b,stretchY:S,content:L}={}){if(this._lazyInitEmptyStyle(),u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap){const{width:O,height:W,data:K}=o.exported.getImageData(u);this.style.addImage(g,{data:new o.RGBAImage({width:O,height:W},K),pixelRatio:p,stretchX:b,stretchY:S,content:L,sdf:_,version:0})}else if(u.width===void 0||u.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:O,height:W}=u,K=u;this.style.addImage(g,{data:new o.RGBAImage({width:O,height:W},new Uint8Array(K.data)),pixelRatio:p,stretchX:b,stretchY:S,content:L,sdf:_,version:0,userImage:K}),K.onAdd&&K.onAdd(this,g)}}updateImage(g,u){const p=this.style.getImage(g);if(!p)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap?o.exported.getImageData(u):u,{width:b,height:S}=_;b!==void 0&&S!==void 0?b===p.data.width&&S===p.data.height?(p.data.replace(_.data,!(u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap)),this.style.updateImage(g,p)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${b}, ${S})
                must be that same as the previous version of the image
                (${p.data.width}, ${p.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,u){o.getImage(this._requestManager.transformRequest(g,o.ResourceType.Image),(p,_)=>{u(p,_ instanceof o.window.HTMLImageElement?o.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(g,u){return this._lazyInitEmptyStyle(),this.style.addLayer(g,u),this._update(!0)}moveLayer(g,u){return this.style.moveLayer(g,u),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,u,p){return this.style.setLayerZoomRange(g,u,p),this._update(!0)}setFilter(g,u,p={}){return this.style.setFilter(g,u,p),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,u,p,_={}){return this.style.setPaintProperty(g,u,p,_),this._update(!0)}getPaintProperty(g,u){return this.style.getPaintProperty(g,u)}setLayoutProperty(g,u,p,_={}){return this.style.setLayoutProperty(g,u,p,_),this._update(!0)}getLayoutProperty(g,u){return this.style.getLayoutProperty(g,u)}setLight(g,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,u),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(g){return this._lazyInitEmptyStyle(),!g&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(g),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(g){return this._lazyInitEmptyStyle(),this.style.setFog(g),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(g){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(g),this.transform):0}setFeatureState(g,u){return this.style.setFeatureState(g,u),this._update()}removeFeatureState(g,u){return this.style.removeFeatureState(g,u),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}_updateContainerDimensions(){if(!this._container)return;const g=this._container.getBoundingClientRect().width||400,u=this._container.getBoundingClientRect().height||300;let p,_,b,S=this._container;for(;S&&(!_||!b);){const L=o.window.getComputedStyle(S).transform;L&&L!=="none"&&(p=L.match(/matrix.*\((.+)\)/)[1].split(", "),p[0]&&p[0]!=="0"&&p[0]!=="1"&&(_=p[0]),p[3]&&p[3]!=="0"&&p[3]!=="1"&&(b=p[3])),S=S.parentElement}this._containerWidth=_?Math.abs(g/_):g,this._containerHeight=b?Math.abs(u/b):u}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const g=this._container;g.classList.add("mapboxgl-map"),(this._missingCSSCanary=F("div","mapboxgl-canary",g)).style.visibility="hidden",this._detectMissingCSS();const u=this._canvasContainer=F("div","mapboxgl-canvas-container",g);this._interactive&&u.classList.add("mapboxgl-interactive"),this._canvas=F("canvas","mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const p=this._controlContainer=F("div","mapboxgl-control-container",g),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=F("div",`mapboxgl-ctrl-${b}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,u){const p=o.exported.devicePixelRatio||1;this._canvas.width=p*Math.ceil(g),this._canvas.height=p*Math.ceil(u),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${u}px`}_addMarker(g){this._markers.push(g)}_removeMarker(g){const u=this._markers.indexOf(g);u!==-1&&this._markers.splice(u,1)}_addPopup(g){this._popups.push(g)}_removePopup(g){const u=this._popups.indexOf(g);u!==-1&&this._popups.splice(u,1)}_setupPainter(){const g=o.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._useWebGL2&&this._canvas.getContext("webgl2",g),p=u||this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);p?(this._useWebGL2&&!u&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(p,!0),this.painter=new gc(p,this.transform,!!u),this.on("data",_=>{_.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(p)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_requestDomTask(g){!this.loaded()||this.loaded()&&!this.isMoving()?g():this._domRenderTaskQueue.add(g)}_render(g){let u;const p=this.painter.context.extTimerQuery,_=o.exported.now();if(this.listens("gpu-timing-frame")&&(u=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,u)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(g),this._domRenderTaskQueue.run(g),this._removed)return;this._updateProjectionTransition();const b=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const O=this.transform.zoom,W=this.transform.pitch,K=o.exported.now(),X=new o.EvaluationParameters(O,{now:K,fadeDuration:b,pitch:W,transition:this.style.getTransition()});this.style.update(X)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let S=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),S=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):S=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,b,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),u){const O=o.exported.now()-_;p.endQueryEXT(p.TIME_ELAPSED_EXT,u),setTimeout(()=>{const W=p.getQueryObjectEXT(u,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(u),this.fire(new o.Event("gpu-timing-frame",{cpuTime:O,gpuTime:W})),o.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:W}})},50)}if(this.listens("gpu-timing-layer")){const O=this.painter.collectGpuTimers();setTimeout(()=>{const W=this.painter.queryGpuTimers(O);this.fire(new o.Event("gpu-timing-layer",{layerTimes:W}))},50)}if(this.listens("gpu-timing-deferred-render")){const O=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const W=this.painter.queryGpuTimeDeferredRender(O);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:W}))},50)}const L=this._sourcesDirty||this._styleDirty||this._placementDirty||S;if(L||this._repaint)this.triggerRepaint();else{const O=!this.isMoving()&&this.loaded();if(O&&(S=this._updateAverageElevation(_,!0)),S)this.triggerRepaint();else if(this._triggerFrame(!1),O&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const W=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:W})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(g){for(const u of this._markers)g&&!this.getRenderWorldCopies()&&(u._lngLat=u._lngLat.wrap()),u._update();for(const u of this._popups)!g||this.getRenderWorldCopies()||u._trackPointer||(u._lngLat=u._lngLat.wrap()),u._update()}_updateAverageElevation(g,u=!1){const p=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&p(0);if((u||g-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(g)){const _=this.transform.averageElevation;let b=this.transform.sampleAverageElevation(),S=!1;this.transform.elevation&&(S=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=g;const L=Math.abs(_-b);if(L>1){if(this._isInitialLoad||S)return this._averageElevation.jumpTo(b),p(b);this._averageElevation.easeTo(b,g,300)}else if(L>1e-4)return this._averageElevation.jumpTo(b),p(b)}return!!this._averageElevation.isEasing(g)&&p(this._averageElevation.getValue(g))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,g=>{if(g&&(g.message===o.AUTH_ERR_MSG||g.status===401)){const u=this.painter.context.gl;o.storeAuthState(u,!1),this._logoControl instanceof Af&&this._logoControl._updateLogo(),u&&u.clear(u.DEPTH_BUFFER_BIT|u.COLOR_BUFFER_BIT|u.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const g=this._isDragging();this.painter.updateTerrain(this.style,g)}_calculateSpeedIndex(){const g=this.painter.canvasCopy(),u=this.painter.getCanvasCopiesAndTimestamps();u.timeStamps.push(performance.now());const p=this.painter.context.gl,_=p.createFramebuffer();function b(S){p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,S,0);const L=new Uint8Array(p.drawingBufferWidth*p.drawingBufferHeight*4);return p.readPixels(0,0,p.drawingBufferWidth,p.drawingBufferHeight,p.RGBA,p.UNSIGNED_BYTE,L),L}return p.bindFramebuffer(p.FRAMEBUFFER,_),this._canvasPixelComparison(b(g),u.canvasCopies.map(b),u.timeStamps)}_canvasPixelComparison(g,u,p){let _=p[1]-p[0];const b=g.length/4;for(let S=0;S<u.length;S++){const L=u[S];let O=0;for(let W=0;W<L.length;W+=4)L[W]===g[W]&&L[W+1]===g[W+1]&&L[W+2]===g[W+2]&&L[W+3]===g[W+3]&&(O+=1);_+=(p[S+2]-p[S+1])*(1-O/b)}return _}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(g){this._renderNextFrame=this._renderNextFrame||g,this.style&&!this._frame&&(this._frame=o.exported.frame(u=>{const p=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,p&&this._render(u)}))}_preloadTiles(g){const u=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(u,(p,_)=>p._preloadTiles(g,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(g){this._showTerrainWireframe!==g&&(this._showTerrainWireframe=g,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(g){this._speedIndexTiming!==g&&(this._speedIndexTiming=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(g){this._showTileAABBs!==g&&(this._showTileAABBs=g,g&&this._update())}_setCacheLimits(g,u){o.setCacheLimits(g,u)}get version(){return o.version}},NavigationControl:class{constructor(g){this.options=o.extend({},If,g),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",u=>{this._map&&this._map.zoomIn({},{originalEvent:u})}),F("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",u=>{this._map&&this._map.zoomOut({},{originalEvent:u})}),F("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",u=>{const p=this._map;p&&(this.options.visualizePitch?p.resetNorthPitch({},{originalEvent:u}):p.resetNorth({},{originalEvent:u}))}),this._compassIcon=F("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map;if(!g)return;const u=g.getZoom(),p=u===g.getMaxZoom(),_=u===g.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const g=this._map;if(!g)return;const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(g.transform.pitch*(Math.PI/180)),.5)}) rotateX(${g.transform.pitch}deg) rotateZ(${g.transform.angle*(180/Math.PI)}deg)`:`rotate(${g.transform.angle*(180/Math.PI)}deg)`;g._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=u)})}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),g.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&g.on("pitch",this._rotateCompassArrow),g.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Wy(g,this._compass,this.options.visualizePitch)),this._container}onRemove(){const g=this._map;g&&(this._container.remove(),this.options.showZoom&&g.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&g.off("pitch",this._rotateCompassArrow),g.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(g,u){const p=F("button",g,this._container);return p.type="button",p.addEventListener("click",u),p}_setButtonTitle(g,u){if(!this._map)return;const p=this._map._getUIString(`NavigationControl.${u}`);g.setAttribute("aria-label",p),g.firstElementChild&&g.firstElementChild.setAttribute("title",p)}},GeolocateControl:class extends o.Evented{constructor(g){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},Gy,g),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Jo(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(g){return this._map=g,this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(g){const u=(p=!!this.options.geolocation)=>{this._supportsGeolocation=p,g(p)};this._supportsGeolocation!==void 0?g(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(p=>u(p.state!=="denied")).catch(()=>u()):u()}_isOutOfMapMaxBounds(g){const u=this._map.getMaxBounds(),p=g.coords;return!!u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",g)),this._finish()}}_updateCamera(g){const u=new o.LngLat(g.coords.longitude,g.coords.latitude),p=g.coords.accuracy,_=this._map.getBearing(),b=o.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(p),b,{geolocateSource:!0})}_updateMarker(g){if(g){const u=new o.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map.transform,u=o.mercatorZfromAltitude(1,g._center.lat)*g.worldSize,p=Math.ceil(2*this._accuracy*u);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=F("button","mapboxgl-ctrl-geolocate",this._container),F("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=F("div","mapboxgl-user-location"),this._dotElement.appendChild(F("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(F("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new sd({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=F("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(g){this._userLocationDotMarker&&(g.webkitCompassHeading?this._heading=g.webkitCompassHeading:g.absolute===!0&&(this._heading=-1*g.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(g={maximumAge:6e5,timeout:0},this._noTimeout=!0):(g=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,g),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const g=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(u=>{u==="granted"&&g()}).catch(console.error):g()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Tf,ScaleControl:class{constructor(g){this.options=o.extend({},qy,g),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Zy.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const g=this.options.maxWidth||100,u=this._map,p=u._containerHeight/2,_=u._containerWidth/2-g/2,b=u.unproject([_,p]),S=u.unproject([_+g,p]),L=b.distanceTo(S);if(this.options.unit==="imperial"){const O=3.2808*L;O>5280?this._setScale(g,O/5280,"mile"):this._setScale(g,O,"foot")}else this.options.unit==="nautical"?this._setScale(g,L/1852,"nautical-mile"):L>=1e3?this._setScale(g,L/1e3,"kilometer"):this._setScale(g,L,"meter")}_setScale(g,u,p){const _=ld(u),b=_/u;this._map._requestDomTask(()=>{this._container.style.width=g*b+"px",this._container.innerHTML=p!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:p}).format(_):`${_}&nbsp;nm`})}onAdd(g){return this._map=g,this._language=g.getLanguage(),this._container=F("div","mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(g){this._language=g,this._update()}setUnit(g){this.options.unit=g,this._update()}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof o.window.HTMLElement?this._container=g.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=F("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=F("button","mapboxgl-ctrl-fullscreen",this._controlContainer);F("span","mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",g)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(g){super(),this.options=o.extend(Object.create(Uy),g),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(g&&g.className?g.className.trim().split(/\s+/):[])}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&g.on("preclick",this._onClose),this.options.closeOnMove&&g.on("move",this._onClose),g.on("remove",this.remove),this._update(),g._addPopup(this),this._focusFirstElement(),this._trackPointer?(g.on("mousemove",this._onMouseEvent),g.on("mouseup",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")):g.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const g=this._map;return g&&(g.off("move",this._update),g.off("move",this._onClose),g.off("preclick",this._onClose),g.off("click",this._onClose),g.off("remove",this.remove),g.off("mousemove",this._onMouseEvent),g.off("mouseup",this._onMouseEvent),g.off("drag",this._onMouseEvent),g._canvasContainer&&g._canvasContainer.classList.remove("mapboxgl-track-pointer"),g._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){this._lngLat=o.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update();const u=this._map;return u&&(u.on("move",this._update),u.off("mousemove",this._onMouseEvent),u._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const g=this._map;return g&&(g.off("move",this._update),g.on("mousemove",this._onMouseEvent),g.on("drag",this._onMouseEvent),g._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(o.window.document.createTextNode(g))}setHTML(g){const u=o.window.document.createDocumentFragment(),p=o.window.document.createElement("body");let _;for(p.innerHTML=g;_=p.firstChild,_;)u.appendChild(_);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){let u=this._content;if(u)for(;u.hasChildNodes();)u.firstChild&&u.removeChild(u.firstChild);else u=this._content=F("div","mapboxgl-popup-content",this._container||void 0);if(u.appendChild(g),this.options.closeButton){const p=this._closeButton=F("button","mapboxgl-popup-close-button",u);p.type="button",p.setAttribute("aria-label","Close popup"),p.setAttribute("aria-hidden","true"),p.innerHTML="&#215;",p.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(g){return this._classList.add(g),this._updateClassList(),this}removeClassName(g){return this._classList.delete(g),this._updateClassList(),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){let u;return this._classList.delete(g)?u=!1:(this._classList.add(g),u=!0),this._updateClassList(),u}_onMouseEvent(g){this._update(g.point)}_getAnchor(g){if(this.options.anchor)return this.options.anchor;const u=this._map,p=this._container,_=this._pos;if(!u||!p||!_)return"bottom";const b=p.offsetWidth,S=p.offsetHeight,L=_.x<b/2,O=_.x>u.transform.width-b/2;if(_.y+g<S)return L?"top-left":O?"top-right":"top";if(_.y>u.transform.height-S){if(L)return"bottom-left";if(O)return"bottom-right"}return L?"left":O?"right":"bottom"}_updateClassList(){const g=this._container;if(!g)return;const u=[...this._classList];u.push("mapboxgl-popup"),this._anchor&&u.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&u.push("mapboxgl-popup-track-pointer"),g.className=u.join(" ")}_update(g){const u=this._map,p=this._content;if(!u||!this._lngLat&&!this._trackPointer||!p)return;let _=this._container;if(_||(_=this._container=F("div","mapboxgl-popup",u.getContainer()),this._tip=F("div","mapboxgl-popup-tip",_),_.appendChild(p)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),u.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ad(this._lngLat,this._pos,u.transform)),!this._trackPointer||g){const b=this._pos=this._trackPointer&&g?g:u.project(this._lngLat),S=Mf(this.options.offset),L=this._anchor=this._getAnchor(S.y),O=Mf(this.options.offset,L),W=b.add(O).round();u._requestDomTask(()=>{this._container&&L&&(this._container.style.transform=`${au[L]} translate(${W.x}px,${W.y}px)`)})}if(!this._marker&&u._showingGlobe()){const b=o.isLngLatBehindGlobe(u.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(jy);g&&g.focus()}_onClose(){this.remove()}_setOpacity(g){this._container&&(this._container.style.opacity=`${g}`),this._content&&(this._content.style.pointerEvents=g?"auto":"none")}},Marker:sd,Style:Yo,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:Xh,Evented:o.Evented,config:o.config,prewarm:function(){vn().acquire(hn)},clearPrewarmedResources:function(){const g=sn;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(hn),sn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(g){o.config.ACCESS_TOKEN=g},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(g){o.config.API_URL=g},get workerCount(){return ln.workerCount},set workerCount(g){ln.workerCount=g},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){o.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){o.clearTileCache(g)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Ac});var d=a;return d})})(qz);var rp=qz.exports,Vp=Jie,Yie=Object.prototype.hasOwnProperty;function Jie(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)Yie.call(n,r)&&(e[r]=n[r])}return e}var Xz={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,a){return a.filter(function(c){return n.test(r,c)})},n.test=function(r,a){return n.match(r,a)!==null},n.match=function(r,a,c){c=c||{};var d=0,o=[],v=a.length,C=0,I=0,D=c.pre||"",F=c.post||"",U=c.caseSensitive&&a||a.toLowerCase(),j;r=c.caseSensitive&&r||r.toLowerCase();for(var T=0;T<v;T++)j=a[T],U[T]===r[d]?(j=D+j+F,d+=1,I+=1+I):I=0,C+=I,o[o.length]=j;return d===r.length?(C=U===r?1/0:C,{rendered:o.join(""),score:C}):null},n.filter=function(r,a,c){return!a||a.length===0?[]:typeof r!="string"?a:(c=c||{},a.reduce(function(d,o,v,C){var I=o;c.extract&&(I=c.extract(o));var D=n.match(r,I,c);return D!=null&&(d[d.length]={string:D.rendered,score:D.score,index:v,original:o}),d},[]).sort(function(d,o){var v=o.score-d.score;return v||d.index-o.index}))}})()})(Xz);var pa=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};pa.prototype.show=function(){this.element.style.display="block"};pa.prototype.hide=function(){this.element.style.display="none"};pa.prototype.add=function(e){this.items.push(e)};pa.prototype.clear=function(){this.items=[],this.active=0};pa.prototype.isEmpty=function(){return!this.items.length};pa.prototype.isVisible=function(){return this.element.style.display==="block"};pa.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};pa.prototype.drawItem=function(e,t){var n=document.createElement("li"),r=document.createElement("a");t&&(n.className+=" active"),r.innerHTML=e.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};pa.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};pa.prototype.move=function(e){this.active=e,this.draw()};pa.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};pa.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};pa.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var Qie=pa,eoe=Vp,toe=Xz.exports,noe=Qie,Uo=function(e,t,n){return n=n||{},this.options=eoe({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new noe(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(r){this.handleKeyUp(r.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(r){this.handleKeyDown(r)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(r){this.handlePaste(r)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Uo.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};Uo.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Uo.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Uo.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};Uo.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};Uo.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Uo.prototype.update=function(e){this.data=e,this.handleKeyUp()};Uo.prototype.clear=function(){this.data=[],this.list.clear()};Uo.prototype.normalize=function(e){return e=e.toLowerCase(),e};Uo.prototype.match=function(e,t){return e.indexOf(t)>-1};Uo.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};Uo.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(r){return this.getItemValue(r)}.bind(this)},n;this.options.filter?(n=toe.filter(this.query,this.data,t),n=n.map(function(r){return{original:r.original,string:this.render(r.original,r.string)}}.bind(this))):n=this.data.map(function(r){var a=this.render(r);return{original:r,string:a}}.bind(this)),e(n)};Uo.prototype.getItemValue=function(e){return e};Uo.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),r=this.normalize(n),a=r.lastIndexOf(this.query);a>-1;){var c=a+this.query.length;n=n.slice(0,a)+"<strong>"+n.slice(a,c)+"</strong>"+n.slice(c),a=r.slice(0,a).lastIndexOf(this.query)}return n};Uo.prototype.renderError=function(e){this.list.drawError(e)};var roe=Uo,Kz=roe,ioe=Kz;typeof window!="undefined"&&(window.Suggestions=Kz);var ooe="Expected a function",zD=0/0,aoe="[object Symbol]",soe=/^\s+|\s+$/g,loe=/^[-+]0x[0-9a-f]+$/i,uoe=/^0b[01]+$/i,coe=/^0o[0-7]+$/i,hoe=parseInt,doe=typeof zo=="object"&&zo&&zo.Object===Object&&zo,poe=typeof self=="object"&&self&&self.Object===Object&&self,foe=doe||poe||Function("return this")(),moe=Object.prototype,goe=moe.toString,yoe=Math.max,voe=Math.min,Lw=function(){return foe.Date.now()};function _oe(e,t,n){var r,a,c,d,o,v,C=0,I=!1,D=!1,F=!0;if(typeof e!="function")throw new TypeError(ooe);t=BD(t)||0,SC(n)&&(I=!!n.leading,D="maxWait"in n,c=D?yoe(BD(n.maxWait)||0,t):c,F="trailing"in n?!!n.trailing:F);function U(w){var R=r,J=a;return r=a=void 0,C=w,d=e.apply(J,R),d}function j(w){return C=w,o=setTimeout(N,t),I?U(w):d}function T(w){var R=w-v,J=w-C,ie=t-R;return D?voe(ie,c-J):ie}function H(w){var R=w-v,J=w-C;return v===void 0||R>=t||R<0||D&&J>=c}function N(){var w=Lw();if(H(w))return q(w);o=setTimeout(N,T(w))}function q(w){return o=void 0,F&&r?U(w):(r=a=void 0,d)}function z(){o!==void 0&&clearTimeout(o),C=0,r=v=a=o=void 0}function B(){return o===void 0?d:q(Lw())}function k(){var w=Lw(),R=H(w);if(r=arguments,a=this,v=w,R){if(o===void 0)return j(v);if(D)return o=setTimeout(N,t),U(v)}return o===void 0&&(o=setTimeout(N,t)),d}return k.cancel=z,k.flush=B,k}function SC(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function xoe(e){return!!e&&typeof e=="object"}function boe(e){return typeof e=="symbol"||xoe(e)&&goe.call(e)==aoe}function BD(e){if(typeof e=="number")return e;if(boe(e))return zD;if(SC(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=SC(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(soe,"");var n=uoe.test(e);return n||coe.test(e)?hoe(e.slice(2),n?2:8):loe.test(e)?zD:+e}var woe=_oe,jk={exports:{}},gp=typeof Reflect=="object"?Reflect:null,FD=gp&&typeof gp.apply=="function"?gp.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},D_;gp&&typeof gp.ownKeys=="function"?D_=gp.ownKeys:Object.getOwnPropertySymbols?D_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:D_=function(t){return Object.getOwnPropertyNames(t)};function Eoe(e){console&&console.warn&&console.warn(e)}var Yz=Number.isNaN||function(t){return t!==t};function jr(){jr.init.call(this)}jk.exports=jr;jk.exports.once=Toe;jr.EventEmitter=jr;jr.prototype._events=void 0;jr.prototype._eventsCount=0;jr.prototype._maxListeners=void 0;var ND=10;function J0(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(jr,"defaultMaxListeners",{enumerable:!0,get:function(){return ND},set:function(e){if(typeof e!="number"||e<0||Yz(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");ND=e}});jr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Yz(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Jz(e){return e._maxListeners===void 0?jr.defaultMaxListeners:e._maxListeners}jr.prototype.getMaxListeners=function(){return Jz(this)};jr.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var a=t==="error",c=this._events;if(c!==void 0)a=a&&c.error===void 0;else if(!a)return!1;if(a){var d;if(n.length>0&&(d=n[0]),d instanceof Error)throw d;var o=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw o.context=d,o}var v=c[t];if(v===void 0)return!1;if(typeof v=="function")FD(v,this,n);else for(var C=v.length,I=r5(v,C),r=0;r<C;++r)FD(I[r],this,n);return!0};function Qz(e,t,n,r){var a,c,d;if(J0(n),c=e._events,c===void 0?(c=e._events=Object.create(null),e._eventsCount=0):(c.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),c=e._events),d=c[t]),d===void 0)d=c[t]=n,++e._eventsCount;else if(typeof d=="function"?d=c[t]=r?[n,d]:[d,n]:r?d.unshift(n):d.push(n),a=Jz(e),a>0&&d.length>a&&!d.warned){d.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=d.length,Eoe(o)}return e}jr.prototype.addListener=function(t,n){return Qz(this,t,n,!1)};jr.prototype.on=jr.prototype.addListener;jr.prototype.prependListener=function(t,n){return Qz(this,t,n,!0)};function Coe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function e5(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=Coe.bind(r);return a.listener=n,r.wrapFn=a,a}jr.prototype.once=function(t,n){return J0(n),this.on(t,e5(this,t,n)),this};jr.prototype.prependOnceListener=function(t,n){return J0(n),this.prependListener(t,e5(this,t,n)),this};jr.prototype.removeListener=function(t,n){var r,a,c,d,o;if(J0(n),a=this._events,a===void 0)return this;if(r=a[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(c=-1,d=r.length-1;d>=0;d--)if(r[d]===n||r[d].listener===n){o=r[d].listener,c=d;break}if(c<0)return this;c===0?r.shift():Soe(r,c),r.length===1&&(a[t]=r[0]),a.removeListener!==void 0&&this.emit("removeListener",t,o||n)}return this};jr.prototype.off=jr.prototype.removeListener;jr.prototype.removeAllListeners=function(t){var n,r,a;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var c=Object.keys(r),d;for(a=0;a<c.length;++a)d=c[a],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(t,n[a]);return this};function t5(e,t,n){var r=e._events;if(r===void 0)return[];var a=r[t];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?koe(a):r5(a,a.length)}jr.prototype.listeners=function(t){return t5(this,t,!0)};jr.prototype.rawListeners=function(t){return t5(this,t,!1)};jr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):n5.call(e,t)};jr.prototype.listenerCount=n5;function n5(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}jr.prototype.eventNames=function(){return this._eventsCount>0?D_(this._events):[]};function r5(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Soe(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function koe(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Toe(e,t){return new Promise(function(n,r){function a(d){e.removeListener(t,c),r(d)}function c(){typeof e.removeListener=="function"&&e.removeListener("error",a),n([].slice.call(arguments))}i5(e,t,c,{once:!0}),t!=="error"&&Aoe(e,a,{once:!0})})}function Aoe(e,t,n){typeof e.on=="function"&&i5(e,"error",t,n)}function i5(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(c){r.once&&e.removeEventListener(t,a),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Moe={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function Ioe(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function Poe(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],r=t[2].split(";"),a=null,c=r.reduce(function(d,o){var v=Ioe(o);return v?v.key==="rel"?(a||(a=v.value),d):(d[v.key]=v.value,d):d},{});return a?{url:n,rel:a,params:c}:null}function Doe(e){return e?e.split(/,\s*</).reduce(function(t,n){var r=Poe(n);if(!r)return t;var a=r.rel.split(/\s+/);return a.forEach(function(c){t[c]||(t[c]={url:r.url,params:r.params})}),t},{}):{}}var Roe=Doe,Loe=Roe;function Vk(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=Loe(this.headers.link)}Vk.prototype.hasNextPage=function(){return!!this.links.next};Vk.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var Ooe=Vk,Q0={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},UD=Q0;function zoe(e){var t=e.type||UD.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var r=e.message||null;r||(typeof n=="string"?r=n:n&&typeof n.message=="string"?r=n.message:t===UD.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var Boe=zoe;function Foe(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),r=e.substring(t+1).trim();return{name:n,value:r}}function Noe(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var r=Foe(n);t[r.name]=r.value}),t}var Uoe=Noe,joe=Ooe,jD=Boe,Ow=Q0,Voe=Uoe,Mx={};function $oe(e){var t=Mx[e.id];!t||(t.abort(),delete Mx[e.id])}function Hoe(e,t){return new joe(e,{body:t.response,headers:Voe(t.getAllResponseHeaders()),statusCode:t.status})}function VD(e){var t=e.total,n=e.loaded,r=100*n/t;return{total:t,transferred:n,percent:r}}function o5(e,t){return new Promise(function(n,r){t.onprogress=function(d){e.emitter.emit(Ow.EVENT_PROGRESS_DOWNLOAD,VD(d))};var a=e.file;a&&(t.upload.onprogress=function(d){e.emitter.emit(Ow.EVENT_PROGRESS_UPLOAD,VD(d))}),t.onerror=function(d){r(d)},t.onabort=function(){var d=new jD({request:e,type:Ow.ERROR_REQUEST_ABORTED});r(d)},t.onload=function(){if(delete Mx[e.id],t.status<200||t.status>=400){var d=new jD({request:e,body:t.response,statusCode:t.status});r(d);return}n(t)};var c=e.body;typeof c=="string"?t.send(c):c?t.send(JSON.stringify(c)):a?t.send(a):t.send(),Mx[e.id]=t}).then(function(n){return Hoe(e,n)})}function a5(e,t){var n=e.url(t),r=new window.XMLHttpRequest;return r.open(e.method,n),Object.keys(e.headers).forEach(function(a){r.setRequestHeader(a,e.headers[a])}),r}function Woe(e){return Promise.resolve().then(function(){var t=a5(e,e.client.accessToken);return o5(e,t)})}var Goe={browserAbort:$oe,sendRequestXhr:o5,browserSend:Woe,createRequestXhr:a5},kC={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(e,t){(function(n){var r=t,a=e&&e.exports==r&&e,c=typeof zo=="object"&&zo;(c.global===c||c.window===c)&&(n=c);var d=function(j){this.message=j};d.prototype=new Error,d.prototype.name="InvalidCharacterError";var o=function(j){throw new d(j)},v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=/[\t\n\f\r ]/g,I=function(j){j=String(j).replace(C,"");var T=j.length;T%4==0&&(j=j.replace(/==?$/,""),T=j.length),(T%4==1||/[^+a-zA-Z0-9/]/.test(j))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var H=0,N,q,z="",B=-1;++B<T;)q=v.indexOf(j.charAt(B)),N=H%4?N*64+q:q,H++%4&&(z+=String.fromCharCode(255&N>>(-2*H&6)));return z},D=function(j){j=String(j),/[^\0-\xFF]/.test(j)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var T=j.length%3,H="",N=-1,q,z,B,k,w=j.length-T;++N<w;)q=j.charCodeAt(N)<<16,z=j.charCodeAt(++N)<<8,B=j.charCodeAt(++N),k=q+z+B,H+=v.charAt(k>>18&63)+v.charAt(k>>12&63)+v.charAt(k>>6&63)+v.charAt(k&63);return T==2?(q=j.charCodeAt(N)<<8,z=j.charCodeAt(++N),k=q+z,H+=v.charAt(k>>10)+v.charAt(k>>4&63)+v.charAt(k<<2&63)+"="):T==1&&(k=j.charCodeAt(N),H+=v.charAt(k>>2)+v.charAt(k<<4&63)+"=="),H},F={encode:D,decode:I,version:"0.1.0"};if(r&&!r.nodeType)if(a)a.exports=F;else for(var U in F)F.hasOwnProperty(U)&&(r[U]=F[U]);else n.base64=F})(zo)})(kC,kC.exports);var qoe=kC.exports,zw={};function Zoe(e){if(zw[e])return zw[e];var t=e.split("."),n=t[0],r=t[1];if(!r)throw new Error("Invalid token");var a=Xoe(r),c={usage:n,user:a.u};return Wc(a,"a")&&(c.authorization=a.a),Wc(a,"exp")&&(c.expires=a.exp*1e3),Wc(a,"iat")&&(c.created=a.iat*1e3),Wc(a,"scopes")&&(c.scopes=a.scopes),Wc(a,"client")&&(c.client=a.client),Wc(a,"ll")&&(c.lastLogin=a.ll),Wc(a,"iu")&&(c.impersonator=a.iu),zw[e]=c,c}function Xoe(e){try{return JSON.parse(qoe.decode(e))}catch{throw new Error("Invalid token")}}function Wc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var s5=Zoe,l5={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(v,C,I){this.fn=v,this.context=C,this.once=I||!1}function c(v,C,I,D,F){if(typeof I!="function")throw new TypeError("The listener must be a function");var U=new a(I,D||v,F),j=n?n+C:C;return v._events[j]?v._events[j].fn?v._events[j]=[v._events[j],U]:v._events[j].push(U):(v._events[j]=U,v._eventsCount++),v}function d(v,C){--v._eventsCount===0?v._events=new r:delete v._events[C]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var C=[],I,D;if(this._eventsCount===0)return C;for(D in I=this._events)t.call(I,D)&&C.push(n?D.slice(1):D);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(I)):C},o.prototype.listeners=function(C){var I=n?n+C:C,D=this._events[I];if(!D)return[];if(D.fn)return[D.fn];for(var F=0,U=D.length,j=new Array(U);F<U;F++)j[F]=D[F].fn;return j},o.prototype.listenerCount=function(C){var I=n?n+C:C,D=this._events[I];return D?D.fn?1:D.length:0},o.prototype.emit=function(C,I,D,F,U,j){var T=n?n+C:C;if(!this._events[T])return!1;var H=this._events[T],N=arguments.length,q,z;if(H.fn){switch(H.once&&this.removeListener(C,H.fn,void 0,!0),N){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,I),!0;case 3:return H.fn.call(H.context,I,D),!0;case 4:return H.fn.call(H.context,I,D,F),!0;case 5:return H.fn.call(H.context,I,D,F,U),!0;case 6:return H.fn.call(H.context,I,D,F,U,j),!0}for(z=1,q=new Array(N-1);z<N;z++)q[z-1]=arguments[z];H.fn.apply(H.context,q)}else{var B=H.length,k;for(z=0;z<B;z++)switch(H[z].once&&this.removeListener(C,H[z].fn,void 0,!0),N){case 1:H[z].fn.call(H[z].context);break;case 2:H[z].fn.call(H[z].context,I);break;case 3:H[z].fn.call(H[z].context,I,D);break;case 4:H[z].fn.call(H[z].context,I,D,F);break;default:if(!q)for(k=1,q=new Array(N-1);k<N;k++)q[k-1]=arguments[k];H[z].fn.apply(H[z].context,q)}}return!0},o.prototype.on=function(C,I,D){return c(this,C,I,D,!1)},o.prototype.once=function(C,I,D){return c(this,C,I,D,!0)},o.prototype.removeListener=function(C,I,D,F){var U=n?n+C:C;if(!this._events[U])return this;if(!I)return d(this,U),this;var j=this._events[U];if(j.fn)j.fn===I&&(!F||j.once)&&(!D||j.context===D)&&d(this,U);else{for(var T=0,H=[],N=j.length;T<N;T++)(j[T].fn!==I||F&&!j[T].once||D&&j[T].context!==D)&&H.push(j[T]);H.length?this._events[U]=H.length===1?H[0]:H:d(this,U)}return this},o.prototype.removeAllListeners=function(C){var I;return C?(I=n?n+C:C,this._events[I]&&d(this,I)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(l5);function Koe(e){return e.map(encodeURIComponent).join(",")}function u5(e){return Array.isArray(e)?Koe(e):encodeURIComponent(String(e))}function c5(e,t,n){if(n===!1||n===null)return e;var r=/\?/.test(e)?"&":"?",a=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(a+="="+u5(n)),""+e+r+a}function Yoe(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(r){var a=t[r];a!==void 0&&(Array.isArray(a)&&(a=a.filter(function(c){return c!=null}).join(",")),n=c5(n,r,a))}),n}function Joe(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function Qoe(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,r){var a=t[r];if(a===void 0)throw new Error("Unspecified route parameter "+r);var c=u5(a);return"/"+c}):e}var eae={appendQueryObject:Yoe,appendQueryParam:c5,prependOrigin:Joe,interpolateRouteParams:Qoe},tae=s5,$k=Vp,nae=l5.exports,a_=eae,$D=Q0,rae=1;function Wu(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var r=$k(n,t.headers),a=Object.keys(r).reduce(function(c,d){return c[d.toLowerCase()]=r[d],c},{});this.id=rae++,this._options=t,this.emitter=new nae,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=a}Wu.prototype.url=function(t){var n=a_.prependOrigin(this.path,this.origin);n=a_.appendQueryObject(n,this.query);var r=this.params,a=t==null?this.client.accessToken:t;if(a){n=a_.appendQueryParam(n,"access_token",a);var c=tae(a).user;r=$k({ownerId:c},r)}return n=a_.interpolateRouteParams(n,r),n};Wu.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit($D.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit($D.EVENT_ERROR,n),n})};Wu.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Wu.prototype.eachPage=function(t){var n=this;function r(d){function o(){delete n._nextPageRequest;var v=d.nextPage();v&&(n._nextPageRequest=v,c(v))}t(null,d,o)}function a(d){t(d,null,function(){})}function c(d){d.send().then(r,a)}c(this)};Wu.prototype.clone=function(){return this._extend()};Wu.prototype._extend=function(t){var n=$k(this._options,t);return new Wu(this.client,n)};var iae=Wu,oae=s5,aae=iae,sae=Q0;function h5(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");oae(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||sae.API_ORIGIN}h5.prototype.createRequest=function(t){return new aae(this,t)};var d5=h5,p5=Goe,f5=d5;function Mp(e){f5.call(this,e)}Mp.prototype=Object.create(f5.prototype);Mp.prototype.constructor=Mp;Mp.prototype.sendRequest=p5.browserSend;Mp.prototype.abortRequest=p5.browserAbort;function lae(e){return new Mp(e)}var m5=lae,uae=m5,cae=uae,hae=Object.prototype.toString,dae=function(e){var t;return hae.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},pae=dae,fae=Vp,g5="value",Bw=`
  `,Gr={};Gr.assert=function(e,t){return t=t||{},function(n){var r=Gu(e,n);if(!!r){var a=Hk(r,t);throw t.apiName&&(a=t.apiName+": "+a),new Error(a)}}};Gr.shape=function(t){var n=vae(t);return function(a){var c=Gu(Gr.plainObject,a);if(c)return c;for(var d,o,v=[],C=0;C<n.length;C++)d=n[C].key,o=n[C].value,c=Gu(o,a[d]),c&&v.push([d].concat(c));return v.length<2?v[0]:function(I){v=v.map(function(U){var j=U[0],T=Hk(U,I).split(`
`).join(Bw);return"- "+j+": "+T});var D=I.path.join("."),F=D===g5?"":" of "+D;return"The following properties"+F+" have invalid values:"+Bw+v.join(Bw)}}};Gr.strictShape=function(t){var n=Gr.shape(t);return function(a){var c=n(a);if(c)return c;var d=Object.keys(a).reduce(function(o,v){return t[v]===void 0&&o.push(v),o},[]);if(d.length!==0)return function(){return"The following keys are invalid: "+d.join(", ")}}};Gr.arrayOf=function(t){return y5(t)};Gr.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return y5(t)};function y5(e){var t=Array.isArray(e),n=function(r){return t?e[r]:e};return function(a){var c=Gu(Gr.plainArray,a);if(c)return c;if(t&&a.length!==e.length)return"an array with "+e.length+" items";for(var d=0;d<a.length;d++)if(c=Gu(n(d),a[d]),c)return[d].concat(c)}}Gr.required=function(t){function n(r){return r==null?function(a){return v5(a,_5(a.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};Gr.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(r){var a=t.map(function(c){return Gu(c,r)}).filter(Boolean);if(a.length===t.length)return a.every(function(c){return c.length===1&&typeof c[0]=="string"})?mae(a.map(function(c){return c[0]})):a.reduce(function(c,d){return d.length>c.length?d:c})}};Gr.equal=function(t){return function(r){if(r!==t)return JSON.stringify(t)}};Gr.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(r){return Gr.equal(r)});return Gr.oneOfType.apply(this,n)};Gr.range=function(t){var n=t[0],r=t[1];return function(c){var d=Gu(Gr.number,c);if(d||c<n||c>r)return"number between "+n+" & "+r+" (inclusive)"}};Gr.any=function(){};Gr.boolean=function(t){if(typeof t!="boolean")return"boolean"};Gr.number=function(t){if(typeof t!="number")return"number"};Gr.plainArray=function(t){if(!Array.isArray(t))return"array"};Gr.plainObject=function(t){if(!pae(t))return"object"};Gr.string=function(t){if(typeof t!="string")return"string"};Gr.func=function(t){if(typeof t!="function")return"function"};function Gu(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function Hk(e,t){var n=e.length,r=e[n-1],a=e.slice(0,n-1);return a.length===0&&(a=[g5]),t=fae(t,{path:a}),typeof r=="function"?r(t):v5(t,gae(r))}function mae(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function gae(e){return"must be "+yae(e)+"."}function yae(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function v5(e,t){var n=_5(e.path),r=e.path.join(".")+" "+t,a=n?"Item at position ":"";return a+r}function _5(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function vae(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}Gr.validate=Gu;Gr.processMessage=Hk;var _ae=Gr,xae=Vp,yp=_ae;function bae(e){if(typeof window!="undefined")return e instanceof zo.Blob||e instanceof zo.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function wae(e,t){return yp.assert(yp.strictShape(e),t)}function Eae(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function Cae(e){return yp.tuple(yp.number,yp.number)(e)}var Sae=xae(yp,{file:bae,date:Eae,coordinates:Cae,assertShape:wae});function kae(e,t){var n=function(r,a){return t.indexOf(r)!==-1&&a!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(r){return n(r,e[r])}).reduce(function(r,a){return r[a]=e[a],r},{})}var Tae=kae;function Aae(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(r,e[r]),n},{})}var Mae=Aae,Iae=Mae;function Pae(e){return Iae(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var Dae=Pae,Rae=d5,Lae=m5;function Oae(e){return function(t){var n;Rae.prototype.isPrototypeOf(t)?n=t:n=Lae(t);var r=Object.create(e);return r.client=n,r}}var zae=Oae,x5=Vp,or=Sae,Ix=Tae,b5=Dae,Bae=zae,Wk={},w5=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Wk.forwardGeocode=function(e){or.assertShape({query:or.required(or.string),mode:or.oneOf("mapbox.places","mapbox.places-permanent"),countries:or.arrayOf(or.string),proximity:or.oneOf(or.coordinates,"ip"),types:or.arrayOf(or.oneOf(w5)),autocomplete:or.boolean,bbox:or.arrayOf(or.number),limit:or.number,language:or.arrayOf(or.string),routing:or.boolean,fuzzyMatch:or.boolean,worldview:or.string})(e),e.mode=e.mode||"mapbox.places";var t=b5(x5({country:e.countries},Ix(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Ix(e,["mode","query"]),query:t})};Wk.reverseGeocode=function(e){or.assertShape({query:or.required(or.coordinates),mode:or.oneOf("mapbox.places","mapbox.places-permanent"),countries:or.arrayOf(or.string),types:or.arrayOf(or.oneOf(w5)),bbox:or.arrayOf(or.number),limit:or.number,language:or.arrayOf(or.string),reverseMode:or.oneOf("distance","score"),routing:or.boolean,worldview:or.string})(e),e.mode=e.mode||"mapbox.places";var t=b5(x5({country:e.countries},Ix(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Ix(e,["mode","query"]),query:t})};var Fae=Bae(Wk);let Nae="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",E5=e=>crypto.getRandomValues(new Uint8Array(e)),C5=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*r*t/e.length);return(c=t)=>{let d="";for(;;){let o=n(a),v=a;for(;v--;)if(d+=e[o[v]&r]||"",d.length===c)return d}}},Uae=(e,t=21)=>C5(e,t,E5),jae=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var Vae=Object.freeze(Object.defineProperty({__proto__:null,nanoid:jae,customAlphabet:Uae,customRandom:C5,urlAlphabet:Nae,random:E5},Symbol.toStringTag,{value:"Module"})),$ae=lN(Vae),Hae=$ae.nanoid;function S5(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}S5.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),r=this.getEventPayload("search.select",t);if(r.resultIndex=n,r.resultPlaceName=e.place_name,r.resultId=e.id,!(n===this.lastSentIndex&&r.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,!!r.queryString))return this.push(r)},start:function(e){var t=this.getEventPayload("search.start",e);if(!!t.queryString)return this.push(t)},keyevent:function(e,t){if(!!e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(r){if(r)return this.handleError(r,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var r=t._map?t._map.getZoom():void 0,a={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:r,keyboardLocale:this.locale};return e==="search.select"?a.queryString=t.inputString:e!="search.select"&&t._inputEl?a.queryString=t._inputEl.value:a.queryString=t.inputString,a},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var r in e.headers){var a=e.headers[r];n.setRequestHeader(r,a)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return Hae()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(!!t._typeahead){var n=t._typeahead.data,r=e.id,a=n.map(function(d){return d.id}),c=a.indexOf(r);return c}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var Wae=S5,Gae={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},qae={placeholder:Gae},k5={exports:{}};(function(e){(function(t,n,r){e.exports?e.exports=r():t[n]=r()})(zo,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(v){return v.match(n)||[]}function a(v){return r(v).filter(function(C,I){return C&&I})}function c(v){return v=r(v),{language:v[1]||t,extlang:v[2]||t,script:v[3]||t,region:v[4]||t}}function d(v,C,I){Object.defineProperty(v,C,{value:I,enumerable:!0})}function o(v,C,I){function D(F){return r(F)[v]||t}d(D,"pattern",C),d(c,I,D)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),d(c,"split",a),c})})(k5);function T5(){}T5.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var Zae=T5;function Xae(e,t){const n=A5(e),r=["address","street","place","country"];var a;if(typeof t=="function")return t(n);const c=r.indexOf(t);return c===-1?a=r:a=r.slice(c),a.reduce(function(d,o){return n[o]?(d!==""&&(d=d+", "),d+n[o]):d},"")}function A5(e){const t=e.address||"",n=e.text||"",r=e.place_name||"",c={address:r.split(",")[0],houseNumber:t,street:n,placeName:r};return e.context.forEach(function(d){const o=d.id.split(".")[0];c[o]=d.text}),c}const Kae=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var Yae={transformFeatureToGeolocationText:Xae,getAddressInfo:A5,REVERSE_GEOCODE_COORD_RGX:Kae},Jae=ioe,Qae=woe,Jc=Vp,ese=jk.exports.EventEmitter,HD=Moe,Fw=cae,Nw=Fae,tse=Wae,nse=qae,rse=k5.exports,ise=Zae,WD=Yae;const wu={FORWARD:0,LOCAL:1,REVERSE:2};function ose(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function M5(e){this._eventEmitter=new ese,this.options=Jc({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new ise}M5.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const a=n.onAdd();r.appendChild(a)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=Nw(Fw({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new tse(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Qae(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(C){this.eventManager.keyevent(C,this)}.bind(this));var r=document.createElement("div");r.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(a),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(r),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var c=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(c),r.appendChild(this._geolocateEl),this._showGeolocateButton()}var d=this._typeahead=new Jae(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),d.getItemValue=this.options.getItemValue;var o=d.list.draw,v=this._footerNode=ose();return d.list.draw=function(){o.call(this),v.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),v.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(v)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const r=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(r),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(r){const a=r.body.features[0];if(a){const c=WD.transformFeatureToGeolocationText(a,this.options.addressAccuracy);this._setInputValue(c),a.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:a})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var r=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,a=r?r.value:"";if(!a)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&HD[e.properties.short_code])t=Jc({},this.options.flyTo),this._map&&this._map.fitBounds(HD[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=Jc({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var r={zoom:this.options.zoom};t=Jc({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=wu.LOCAL:e.reverseGeocode&&WD.REVERSE_GEOCODE_COORD_RGX.test(t)?n=wu.REVERSE:n=wu.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],r=/[\s,]+/;var a=this,c=n.reduce(function(o,v){if(a.options[v]===void 0||a.options[v]===null)return o;["countries","types","language"].indexOf(v)>-1?o[v]=a.options[v].split(r):o[v]=a.options[v];const C=typeof a.options[v].longitude=="number"&&typeof a.options[v].latitude=="number";if(v==="proximity"&&C){const I=a.options[v].longitude,D=a.options[v].latitude;o[v]=[I,D]}return o},{});switch(e){case wu.REVERSE:{var d=t.split(r).map(function(o){return parseFloat(o,10)});a.options.flipCoordinates||d.reverse(),c.types&&c.types[0],c=Jc(c,{query:d,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(o){o in c&&delete c[o]})}break;case wu.FORWARD:{const o=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(o)&&(t=t.replace(/,/g," ")),c=Jc(c,{query:t})}break}return c},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var r;switch(t){case wu.LOCAL:r=Promise.resolve();break;case wu.FORWARD:r=this.geocoderService.forwardGeocode(n).send();break;case wu.REVERSE:r=this.geocoderService.reverseGeocode(n).send();break}var a=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],c=[],d=null;return r.catch(function(o){d=o}.bind(this)).then(function(o){this._hideLoadingIcon();var v={};return o?o.statusCode=="200"&&(v=o.body,v.request=o.request,v.headers=o.headers):v={type:"FeatureCollection",features:[]},v.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),v.features=v.features?a.concat(v.features):a,this.options.externalGeocoder?(c=this.options.externalGeocoder(e,v.features)||Promise.resolve([]),c.then(function(C){return v.features=v.features?C.concat(v.features):C,v},function(){return v})):v}.bind(this)).then(function(o){if(d)throw d;this.options.filter&&o.features.length&&(o.features=o.features.filter(this.options.filter)),o.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",o),this._typeahead.update(o.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",o))}.bind(this)).catch(function(o){this._hideLoadingIcon(),this._hideAttribution(),a.length&&this.options.localGeocoder||c.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(a)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:a}),this._eventEmitter.emit("error",{error:o})}.bind(this)),r},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(!!t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=rse.language(e),n=nse.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=Nw(Fw({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=Nw(Fw({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(!!this._map){this._removeMarker();var t={color:"#4668F2"},n=Jc({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var ase=M5;function sse(e){document.getElementById("coordinates");const t={features:[{type:"Feature",geometry:{type:"Point",coordinates:[-79.46242786599252,43.75383226893149]},properties:{title:"Portable 1",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46243325527307,43.753970965485735]},properties:{title:"Portable 2",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46221099031513,43.75317237412631]},properties:{title:"Portable 3",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4624108175995,43.75314428115445]},properties:{title:"Portable 4",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46218818873812,43.75305128362666]},properties:{title:"Portable 5",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238399545628,43.753030941531875]},properties:{title:"Portable 6",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46256102100658,43.75326634251712]},properties:{title:"Portable 7",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462327663467,43.75335158721401]},properties:{title:"Room 119",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46234644222046,43.753461051808415]},properties:{title:"Room 121",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46236521768313,43.75354726659225]},properties:{title:"Room 123",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238265202406,43.75363735643279]},properties:{title:"Room 125",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462198032334,43.75360889118667]},properties:{title:"small gym (124)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46207609586855,43.75347184182684]},properties:{title:"fitness centre (124c)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46208442599088,43.75363465159106]},properties:{title:"team change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46199855338851,43.753670911751186]},properties:{title:"girls change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46195099685673,43.753506785659]},properties:{title:"boys change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46193094840253,43.75359351676818]},properties:{title:"equipment office (127D)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46188333944669,43.75353345567834]},properties:{title:"gym office (127E)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46191351470047,43.75364049932426]},properties:{title:"gym office (127A)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46172911873167,43.75361606821852]},properties:{title:"large gym (127)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4621022029668,43.75382222066108]},properties:{title:"Room 118T",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46215856297853,43.753759532291014]},properties:{title:"Room 118C",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46195278569445,43.75379119907919]},properties:{title:"Room 118E",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4618069554343,43.75382092588782]},properties:{title:"Room 114",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46167722609954,43.7537957223808]},properties:{title:"music office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145355825836,43.753934020553146]},properties:{title:"dance room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46121179888955,43.75373700003314]},properties:{title:"cafeteria/cafetorium",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46105544571898,43.75333204884339]},properties:{title:"library (134)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46107005200406,43.75322380678202]},properties:{title:"special education resource",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46104008434995,43.753229743456245]},properties:{title:"SAC room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100721719883,43.75323148904425]},properties:{title:"cyw",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46098063358639,43.753235329484454]},properties:{title:"library office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100511477736,43.75357005485046]},properties:{title:"staff room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4611868324436,43.75348515432293]},properties:{title:"student services",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4613271203871,43.7535216196801]},properties:{title:"Main Office (116)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612725332962,43.75326367491422]},properties:{title:"Room 108b",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46127074403375,43.75321326924049]},properties:{title:"Room 108a",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46128058522986,43.75315898346079]},properties:{title:"Room 106",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46125649284252,43.75304288437272]},properties:{title:"Room 104",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46122382537122,43.752906633057165]},properties:{title:"Room 102",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46136354515774,43.752898126964254]},properties:{title:"Room 101",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139777712486,43.753043114903306]},properties:{title:"Room 103",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46140380351744,43.75312579142903]},properties:{title:"Science Office (105)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145048325354,43.753248299164255]},properties:{title:"Room 107",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4614761683771,43.75338955719843]},properties:{title:"Room 109",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46164036883964,43.75341958509614]},properties:{title:"Room 111",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4617811841459,43.75340328772481]},properties:{title:"Room 113",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4618675399702,43.75338755291526]},properties:{title:"business office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4619749024224,43.753384181329636]},properties:{title:"Room 117",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238565237367,43.75363361197046]},properties:{title:"Room 231",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46236964343728,43.75353590861371]},properties:{title:"Room 229",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46235355018324,43.7534516311066]},properties:{title:"Room 227",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46233057723609,43.753381976637144]},properties:{title:"co-op office (226)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46232115842207,43.75333592207335]},properties:{title:"Room 225",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46218059901656,43.75335319315036]},properties:{title:"Room 223",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46211394375436,43.75346309583611]},properties:{title:"computer office (233)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46199367203847,43.753379882216166]},properties:{title:"Room 222",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46186832688937,43.75339349079542]},properties:{title:"Room 221",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46175240183594,43.75340709778331]},properties:{title:"Room 220",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163140622886,43.75342489140834]},properties:{title:"Room 219",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46148515501359,43.75340071235618]},properties:{title:"Room 213",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46146486998195,43.75331017352619]},properties:{title:"Room 211",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46144603105236,43.753222249695966]},properties:{title:"Room 209",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46142791795658,43.753137991624214]},properties:{title:"Room 207",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139302860175,43.75298885245036]},properties:{title:"Room 203",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46136767069875,43.75288156880836]},properties:{title:"Room 201",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46122821655393,43.752901057246845]},properties:{title:"Room 202",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612506789127,43.75298740995075]},properties:{title:"Room 204",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46126661842634,43.75306957486865]},properties:{title:"Room 206",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46128545635727,43.75315802234198]},properties:{title:"Room 208",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46130284491909,43.75324332707672]},properties:{title:"Room 210",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46132168256682,43.75332549164267]},properties:{title:"Room 212",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46134559208431,43.75341393834546]},properties:{title:"Room 214",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154185196188,43.75361634427]},properties:{title:"dark room",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46144650667092,43.75375052923056]},properties:{title:"dark room (216A)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4615603074014,43.75358834987574]},properties:{title:"book room",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4614354341234,43.753830952741794]},properties:{title:"Room 216",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46158008591014,43.753810213485025]},properties:{title:"Room 215",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145890294959,43.75391685074018]},properties:{title:"Room 218",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46160715142894,43.75393995400347]},properties:{title:"Room 217",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46138769422942,43.75345548469946]},properties:{title:"modern languages office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139276605106,43.753478131876875]},properties:{title:"history office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139737638734,43.75350077690234]},properties:{title:"geography office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46140705817172,43.753543403070495]},properties:{title:"english office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46141581781006,43.75359668555146]},properties:{title:"math office (238)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46150331164226,43.753973545031556]},properties:{title:"art office (218A)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100506863056,43.75350601053009]},properties:{title:"library room A",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46098927243114,43.753440973854964]},properties:{title:"library room B",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.461073977011,43.75360391989807]},properties:{title:"Exit 1",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612968674094,43.7528424736621]},properties:{title:"Exit 2",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154945637606,43.75343068463039]},properties:{title:"Exit 3",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46207053027169,43.753387916496564]},properties:{title:"Exit 4",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462225356633,43.75329998220087]},properties:{title:"Exit 5",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4623567892464,43.75368485054281]},properties:{title:"Exit 6",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46225551171938,43.753697201431095]},properties:{title:"Exit 7",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4616471361122,43.753852812405086]},properties:{title:"Exit 7C",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163294208165,43.75396385435636]},properties:{title:"Exit 7D",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163524982596,43.753980964854605]},properties:{title:"Exit 7E",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4616518679316,43.75403205707923]},properties:{title:"Exit 7F",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154103707552,43.754010022029945]},properties:{title:"Exit 8",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46143369162724,43.75400234476848]},properties:{title:"Exit 8A",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139309605415,43.75381129680861]},properties:{title:"Exit 8B",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46109108651713,43.75380139567167]},properties:{title:"Exit 8C",floor:1}},{type:"Feature",properties:{title:"Stage",floor:1},geometry:{type:"Point",coordinates:[-79.46198968848333,43.75325517632149]}},{type:"Feature",properties:{title:"Booth 13",floor:1},geometry:{type:"Point",coordinates:[-79.46219738125589,43.75323295523572]}},{type:"Feature",properties:{title:"Booth 12",floor:1},geometry:{type:"Point",coordinates:[-79.46207866115284,43.75318521982399]}},{type:"Feature",properties:{title:"Booth 11",floor:1},geometry:{type:"Point",coordinates:[-79.46165706009798,43.75321935736699]}},{type:"Feature",properties:{title:"Booth 10",floor:1},geometry:{type:"Point",coordinates:[-79.4618750685682,43.75311118946689]}},{type:"Feature",properties:{title:"Booth 14",floor:1},geometry:{type:"Point",coordinates:[-79.46209468956859,43.753125035135554]}},{type:"Feature",properties:{title:"Booth 15",floor:1},geometry:{type:"Point",coordinates:[-79.46207501005615,43.753063291649454]}},{type:"Feature",properties:{title:"Booth 08",floor:1},geometry:{type:"Point",coordinates:[-79.46204669592589,43.75298912538665]}},{type:"Feature",properties:{title:"Booth 07",floor:1},geometry:{type:"Point",coordinates:[-79.46193911779909,43.75295355028311]}},{type:"Feature",properties:{title:"Booth 06",floor:1},geometry:{type:"Point",coordinates:[-79.46181749497252,43.752941266286854]}},{type:"Feature",properties:{title:"Booth 05",floor:1},geometry:{type:"Point",coordinates:[-79.46170511120118,43.75294733544803]}},{type:"Feature",properties:{title:"Booth 04",floor:1},geometry:{type:"Point",coordinates:[-79.46146134490077,43.75285072422923]}},{type:"Feature",properties:{title:"Booth 03",floor:1},geometry:{type:"Point",coordinates:[-79.46147604027834,43.75293562803412]}},{type:"Feature",properties:{title:"Booth 02",floor:1},geometry:{type:"Point",coordinates:[-79.46150013755523,43.753062392390746]}},{type:"Feature",properties:{title:"Booth 01",floor:1},geometry:{type:"Point",coordinates:[-79.46151085321212,43.753155288730596]}},{type:"Feature",properties:{title:"Booth 09",floor:1},geometry:{type:"Point",coordinates:[-79.46168273591726,43.7530478330533]}}],type:"FeatureCollection"};function n(a){const c=[];for(const d of t.features)d.properties.title.toLowerCase().includes(a.toLowerCase())&&(d.place_name=`${d.properties.title}`,d.center=d.geometry.coordinates,c.push(d));return c}const r=new ase({accessToken:rp.accessToken,localGeocoder:n,localGeocoderOnly:!0,zoom:19,placeholder:"Search School",marker:{color:"red"},mapboxgl:rp,render:function(a){return`<div class='geocoder-dropdown-item'>
    <span class='geocoder-dropdown-text'>
    ${a.properties.title}
    </span>
    </div>`}});e.addControl(r),e.on("load",()=>{e.addSource("floorOne",{type:"image",url:"../static/img/FloorOne.jpg",coordinates:[[-79.46270547634776,43.75413886166868],[-79.46072668772469,43.75413886166868],[-79.46072668772469,43.75274955916902],[-79.46270547634776,43.75274955916902]]}),e.addSource("floorTwo",{type:"image",url:"../static/img/FloorTwo.jpg",coordinates:[[-79.46270547634776,43.75413886166868],[-79.46072668772469,43.75413886166868],[-79.46072668772469,43.75274955916902],[-79.46270547634776,43.75274955916902]]}),e.addSource("outline",{type:"image",url:"../static/img/booths/booths.jpg",coordinates:[[-79.46155542041252,43.7538999252219],[-79.46100243451043,43.75394902268886],[-79.46092763227323,43.7535715308978],[-79.46146639944199,43.75351043643877]]}),e.addControl(new rp.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),e.addLayer({id:"floorOne",source:"floorOne",type:"raster",layout:{visibility:"visible"}}),e.addLayer({id:"floorTwo",source:"floorTwo",type:"raster",layout:{visibility:"none"}}),e.addLayer({id:"outline",source:"outline",type:"raster",layout:{visibility:"none"}}),e.addSource("booths",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:1,description:' <b> Mackenzie Science Club </b><p><a href="https://maclyonsden.com/club/msc" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4613942054596,43.75355665507274]}},{type:"Feature",properties:{id:2,description:'<b>ACED Team</b><p><a href="https://maclyonsden.com/club/aced" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46135445939534,43.75356090732248]}},{type:"Feature",properties:{id:3,description:'<b>MCPT</b><p><a href="https://maclyonsden.com/club/mcpt" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46140496158867,43.75360322941137]}},{type:"Feature",properties:{id:4,description:'<b>HOSA Team</b><p><a href="https://maclyonsden.com/club/hosa" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46136381338786,43.75360627182371]}},{type:"Feature",properties:{id:5,description:'<b>Animanga Club</b><p><a href="https://maclyonsden.com/club/animanga-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46128489186641,43.75364329694912]}},{type:"Feature",properties:{id:6,description:'<b>Cubing Club</b><p><a href="https://maclyonsden.com/club/cubing-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46128608332647,43.75365481503346]}},{type:"Feature",properties:{id:7,description:'<b>Linguistics Club</b><p><a href="https://maclyonsden.com/club/linguistics" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4612909873974,43.75367164651922]}},{type:"Feature",properties:{id:8,description:'<b>Chess Club</b><p><a href="https://maclyonsden.com/club/chess-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129246204951,43.75368139874675]}},{type:"Feature",properties:{id:9,description:'<b>Book Club</b><p><a href="https://maclyonsden.com/club/book-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129614052039,43.75369893721205]}},{type:"Feature",properties:{id:10,description:'<b>3D Design Club</b><p><a href="https://maclyonsden.com/club/3d-design-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129823092178,43.753710973343345]}},{type:"Feature",properties:{id:11,description:'<b>History Club</b><p><a href="https://maclyonsden.com/club/history-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46130174953414,43.75372861925064]}},{type:"Feature",properties:{id:12,description:'<b>French Club</b><p><a href="https://maclyonsden.com/club/french-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46130560495627,43.75373952230913]}},{type:"Feature",properties:{id:13,description:'<b>The Lyon</b><p><a href="https://maclyonsden.com/club/the-lyon" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46125581707167,43.75362888910291]}},{type:"Feature",properties:{id:14,description:'<b>Tree Huggers</b><p><a href="https://maclyonsden.com/club/treehuggers" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124157189129,43.75363030445041]}},{type:"Feature",properties:{id:15,description:'<b>Mac Radio Annoucners</b><p><a href="https://maclyonsden.com/club/mac-radio-announcers" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46121714530972,43.753632722096654]}},{type:"Feature",properties:{id:16,description:`<b>Let's Talk Now Club</b><p><a href="https://maclyonsden.com/club/lets-talk-now" target="_blank" title="Opens in a new window">Club Page</a></p>`,icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46120288834399,43.7536349018703]}},{type:"Feature",properties:{id:17,description:'<b>UNICEF</b><p><a href="https://maclyonsden.com/club/unicef" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46117691331494,43.753637686444335]}},{type:"Feature",properties:{id:18,description:'<b>Rainbow Club</b><p><a href="https://maclyonsden.com/club/rainbow-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116265520898,43.75363938250496]}},{type:"Feature",properties:{id:19,description:'<b>UNI-talk</b><p><a href="https://maclyonsden.com/club/UNI-talk" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46113823553753,43.75364216826375]}},{type:"Feature",properties:{id:20,description:'<b>Wellness @ Mac</b><p><a href="https://maclyonsden.com/club/wellness-at-mac" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112314101545,43.75364398532042]}},{type:"Feature",properties:{id:21,description:'<b>Gardening Club</b><p><a href="https://maclyonsden.com/club/gardening-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46109867295455,43.75364676961962]}},{type:"Feature",properties:{id:22,description:'<b>Key Club</b><p><a href="https://maclyonsden.com/club/key-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46108357843245,43.75364846567999]}},{type:"Feature",properties:{id:23,description:'<b>Careers in Design</b><p><a href="https://maclyonsden.com/club/careers-in-design" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46105850701775,43.753651482449214]}},{type:"Feature",properties:{id:24,description:'<b>The Flounder</b><p><a href="https://maclyonsden.com/club/flounder" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46104391452232,43.753652694705266]}},{type:"Feature",properties:{id:25,description:'<b>Cybersecurity Club</b><p><a href="https://maclyonsden.com/club/cybersecurity-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46126130154995,43.75369496490765]}},{type:"Feature",properties:{id:26,description:'<b>Mackenzie Engineeering Club</b><p><a href="https://maclyonsden.com/club/MEC" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46125836307769,43.75368385665968]}},{type:"Feature",properties:{id:27,description:'<b>MEDLIFE</b><p><a href="https://maclyonsden.com/club/medlife" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46123535767697,43.7536597356675]}},{type:"Feature",properties:{id:28,description:'<b>Baycrest-Mackenzie Partnership</b><p><a href="https://maclyonsden.com/club/mackenzie-baycrest-partnership" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46121946489153,43.75366139859827]}},{type:"Feature",properties:{id:29,description:'<b>Women in STEM</b><p><a href="https://maclyonsden.com/club/women-in-stem" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119664892562,43.75366456109961]}},{type:"Feature",properties:{id:30,description:'<b>Math Club</b><p><a href="https://maclyonsden.com/club/math-club" target="_blank" title="Math Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46118165938897,43.7536663936842]}},{type:"Feature",properties:{id:31,description:'<b>Physics Club</b><p><a href="https://maclyonsden.com/club/physics-club" target="_blank" title="Physics Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116413872673,43.75369319879434]}},{type:"Feature",properties:{id:32,description:'<b>Chemistry Club</b><p><a href="https://maclyonsden.com/club/chemistry-club" target="_blank" title="Chemistry Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116782229596,43.75370450389764]}},{type:"Feature",properties:{id:33,description:'<b>Muslim Culture Club</b><p><a href="https://maclyonsden.com/club/muslim-culture-club" target="_blank" title="Muslim Culture Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119500554012,43.75372414542039]}},{type:"Feature",properties:{id:34,description:'<b>Biology Club</b><p><a href="https://maclyonsden.com/club/bio-club" target="_blank" title="Biology Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46120953770222,43.75372133179536]}},{type:"Feature",properties:{id:35,description:"helk",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46123327399353,43.75371816841607]}},{type:"Feature",properties:{id:36,description:'<b>Jewish Culture Club</b><p><a href="https://maclyonsden.com/club/jewish-culture-club" target="_blank" title="Jewish Culture Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124826422738,43.75371650221419]}},{type:"Feature",properties:{id:37,description:'<b>Dance Team</b><p><a href="https://www.instagram.com/wlmac.danceteam/" target="_blank" title="Dance Teal">@wlmac.danceteam</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46114243759361,43.75370838709108]}},{type:"Feature",properties:{id:38,description:'<b>Central Arts Council</b><p><a href="https://maclyonsden.com/club/artscouncil" target="_blank" title="Central Arts Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46113955168924,43.75369793518965]}},{type:"Feature",properties:{id:39,description:'<b>Mackenzie Calligraphy Club</b><p><a href="https://maclyonsden.com/club/mackenzie-calligraphy-club" target="_blank" title="Mackenzie Calligraphy Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46111398384248,43.753675016730824]}},{type:"Feature",properties:{id:40,description:'<b>Creator\u2019s Joy</b><p><a href="https://maclyonsden.com/club/creators-joy" target="_blank" title="Creator\u2019s Joy">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46109894955666,43.75367648606982]}},{type:"Feature",properties:{id:41,description:'<b>Creative Arts Alliance</b><p><a href="https://maclyonsden.com/club/creative-arts-alliance" target="_blank" title="Creative Arts Alliance">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46107682531661,43.75367831739524]}},{type:"Feature",properties:{id:42,description:'<b>Creative Writing Club</b><p><a href="https://maclyonsden.com/club/mackenzie-creative-writing-club" target="_blank" title="Creative Writing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4610616059595,43.75367998259105]}},{type:"Feature",properties:{id:43,description:"kgjhy",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46107528243958,43.753688731082434]}},{type:"Feature",properties:{id:44,description:"jhfjhg",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46107528243958,43.753688731082434]}},{type:"Feature",properties:{id:45,description:'<b>Visual Arts Council</b><p><a href="https://maclyonsden.com/club/visual-arts-council" target="_blank" title="Visual Arts Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4610749649739,43.75373709635679]}},{type:"Feature",properties:{id:46,description:'<b>Drama Council</b><p><a href="https://maclyonsden.com/club/drama-concil" target="_blank" title="Drama Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46108924570751,43.753734932774734]}},{type:"Feature",properties:{id:47,description:'<b>Composing Club</b><p><a href="https://maclyonsden.com/club/composing-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46111252113948,43.753732934566415]}},{type:"Feature",properties:{id:48,description:'<b>Music Council</b></b><p><a href="https://maclyonsden.com/club/music-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112774136735,43.753731102865345]}},{type:"Feature",properties:{id:49,description:'<b>Model United Nations</b></b><p><a href="https://maclyonsden.com/club/mun" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46127993280194,43.75374969548815]}},{type:"Feature",properties:{id:50,description:'<b>Mackenzie Athletic Council</b></b><p><a href="https://maclyonsden.com/club/athletic-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46126622741446,43.75375153977589]}},{type:"Feature",properties:{id:51,description:'<b>Mock Trials</b></b><p><a href="https://maclyonsden.com/club/mock-trials" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124041855968,43.75375353773157]}},{type:"Feature",properties:{id:52,description:'<b>Business Council</b></b><p><a href="https://maclyonsden.com/club/business-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46122634812941,43.7537552030515]}},{type:"Feature",properties:{id:53,description:'<b>NBA Fan Club</b></b><p><a href="https://maclyonsden.com/club/nba-fan-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119984807186,43.7537563689765]}},{type:"Feature",properties:{id:54,description:'<b>Debate Club</b></b><p><a href="https://maclyonsden.com/club/debate-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46118508608991,43.753758865571655]}},{type:"Feature",properties:{id:55,description:'<b>Kinesiology and Fitness</b></b><p><a href="https://maclyonsden.com/club/kinesiology-and-fitness" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46115973722371,43.75376186231631]}},{type:"Feature",properties:{id:56,description:'<b>Esports Club</b></b><p><a href="https://maclyonsden.com/club/esports-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46114658851327,43.753762862867404]}},{type:"Feature",properties:{id:57,description:'<b>TED Club</b></b><p><a href="https://maclyonsden.com/club/ted-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}},{type:"Feature",properties:{id:58,description:"sdfsd",icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}},{type:"Feature",properties:{id:59,description:"<b>BILT</b><p>No Information Avalible</p>",icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}}]}}),e.addSource("mactoberfest",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:1,description:"Stage",icon:"castle"},geometry:{type:"Point",coordinates:[-79.46198968848333,43.75325517632149]}},{type:"Feature",properties:{id:13,description:"<b>Booth 12</b><p>Drama Council (Goodie Bags + Rice Crispies + Improv Costume Contest)</p> ",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46219738125589,43.75323295523572]}},{type:"Feature",properties:{id:12,description:"<b>Booth 11</b> <p>Gardening Club (Cookies)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46207866115284,43.75318521982399]}},{type:"Feature",properties:{id:11,description:"<b>Booth 10</b> <p>Music Council (Musical Chairs)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46165706009798,43.75321935736699]}},{type:"Feature",properties:{id:10,description:"<b>Booth 09</b> <p>MCPT (Games)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.4618750685682,43.75311118946689]}},{type:"Feature",properties:{id:14,description:"<b>Booth 13</b> <p>Photo Booth</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46209468956859,43.753125035135554]}},{type:"Feature",properties:{id:15,description:"<b>Booth 14</b> <p>DJ</p>",icon:"music"},geometry:{type:"Point",coordinates:[-79.46207501005615,43.753063291649454]}},{type:"Feature",properties:{id:8,description:"<b>Booth 07</b> <p>Let' Talk Now (Timbits)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46193911779909,43.75295355028311]}},{type:"Feature",properties:{id:7,description:"<b>Booth 06</b> <p>MSC (Chips, Cotton Candy, Tic Tac)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46181749497252,43.752941266286854]}},{type:"Feature",properties:{id:6,description:"<b>Booth 05</b> <p>UNICEF (Junior Chickens + Dounuts)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46170511120118,43.75294733544803]}},{type:"Feature",properties:{id:5,description:"<b>Booth 04 </b> <p>Creator's Joy (Juice Boxes)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46159780966113,43.7528969650275]}},{type:"Feature",properties:{id:4,description:"<b>Booth 03 </b> <p>Book Club (Bookmarks + Baked Goods)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46147604027834,43.75293562803412]}},{type:"Feature",properties:{id:2,description:"<b>Booth 02 </b> <p> Dance Team (Popcorn)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46150013755523,43.753062392390746]}},{type:"Feature",properties:{id:1,description:"<b>Booth 01 </b> <p>Athletic Council (Hot Chocolate)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46151085321212,43.753155288730596]}},{type:"Feature",properties:{id:9,description:"<b>Booth 08 </b> <p>Dance Council (Instax Photo Booth)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46168273591726,43.7530478330533]}}]}}),e.on("click","mactoberfest",c=>{const d=c.features[0].geometry.coordinates.slice(),o=c.features[0].properties.description;new rp.Popup().setLngLat(d).setHTML(o).addTo(e)}),e.on("mouseenter","mactoberfest",()=>{e.getCanvas().style.cursor="pointer"}),e.on("mouseleave","mactoberfest",()=>{e.getCanvas().style.cursor=""});var a=document.querySelector("input[name=checkbox]");a.addEventListener("change",function(){this.checked?(console.log("Checkbox is checked.."),e.setLayoutProperty("floorTwo","visibility","visible"),e.setLayoutProperty("floorOne","visibility","none"),e.setLayoutProperty("booths","visibility","none")):(console.log("Checkbox is not checked.."),e.setLayoutProperty("floorOne","visibility","visible"),e.setLayoutProperty("floorTwo","visibility","none"),e.setLayoutProperty("booths","visibility","visible"))}),r.on("result",({result:c})=>{console.log(c.properties.title),c.properties.floor==1?(a.checked=!1,e.setLayoutProperty("floorOne","visibility","visible"),e.setLayoutProperty("floorTwo","visibility","none"),e.setLayoutProperty("booths","visibility","visible")):(a.checked=!0,e.setLayoutProperty("floorTwo","visibility","visible"),e.setLayoutProperty("floorOne","visibility","none"),e.setLayoutProperty("booths","visibility","none"))})})}rp.accessToken="pk.eyJ1IjoibmlraXN1IiwiYSI6ImNrc3A3c2FieTAwM3kybnA3anNjY2c3MXMifQ.T_8vAyTc4PMuGUC23vIOhA";const lse=()=>{const e=m.exports.useRef(null),[t,n]=m.exports.useState(-79.46155348420591),[r,a]=m.exports.useState(43.753374130758445),[c,d]=m.exports.useState(19);return m.exports.useEffect(()=>{const o=new rp.Map({container:e.current,style:"mapbox://styles/nikisu/cktk76xy90rgm17s7q7pg0g55",center:[t,r],zoom:c});return sse(o),()=>o.remove()},[]),nt.createElement(nt.Fragment,null,nt.createElement("link",{rel:"stylesheet",href:"/static/css/map.css"}),nt.createElement("link",{rel:"stylesheet",href:"/static/css/mapbox-gl-geocoder.css"}),nt.createElement("link",{rel:"stylesheet",href:"/static/css/mapbox-gl.css"}),nt.createElement("script",{src:"/static/js/mapbox-gl-geocoder.min.js"}),nt.createElement("script",{src:"/static/js/mapbox-gl.js"}),nt.createElement("div",{className:"container"},nt.createElement("div",{className:"map-container"},nt.createElement("div",{className:"heading"},nt.createElement("div",{className:"legend"},nt.createElement("div",{className:"legend-items"},nt.createElement("div",{className:"legend-square",style:{backgroundColor:"#946987"}}),nt.createElement("span",null,"General Spaces")),nt.createElement("div",{className:"legend-items"},nt.createElement("div",{className:"legend-square",style:{backgroundColor:"#946469"}}),nt.createElement("span",null,"Washrooms + Change Rooms")),nt.createElement("div",{className:"legend-items"},nt.createElement("div",{className:"legend-square",style:{backgroundColor:"#b0a169"}}),nt.createElement("span",null,"Offices")),nt.createElement("div",{className:"legend-items"},nt.createElement("div",{className:"legend-square",style:{backgroundColor:"#68936f"}}),nt.createElement("span",null,"Classrooms + Labs")),nt.createElement("div",{className:"legend-items"},nt.createElement("div",{className:"legend-square",style:{backgroundColor:"#5d97d1"}}),nt.createElement("span",null,"Stairways")),nt.createElement("div",{className:"legend-items"},nt.createElement("div",{className:"legend-square",style:{backgroundColor:"#3774b2"}}),nt.createElement("span",null,"Hallways")),nt.createElement("div",{className:"legend-items"},nt.createElement("div",{className:"legend-square",style:{backgroundColor:"#646d78"}}),nt.createElement("span",null,"Miscellaneous")))),nt.createElement("div",{style:{margin:0}},nt.createElement("a",{href:"#help"},nt.createElement("i",{className:"small material-icons icon-blue"},"help"))),nt.createElement("div",{className:"switch-container"},nt.createElement("div",{className:"switch",id:"floor"},nt.createElement("label",{style:{fontSize:"1rem"}},"Floor One",nt.createElement("input",{type:"checkbox",name:"checkbox",id:"checkbox"}),nt.createElement("span",{className:"lever"}),"Floor Two"))),nt.createElement("pre",{id:"coordinates",className:"coordinates"}),nt.createElement("div",{className:"map mapboxgl-map",id:"map",ref:e},nt.createElement("div",{className:"mapboxgl-canary",style:{visibility:"hidden"}}),nt.createElement("div",{className:"mapboxgl-canvas-container mapboxgl-interactive mapboxgl-touch-drag-pan mapboxgl-touch-zoom-rotate"},nt.createElement("canvas",{className:"mapboxgl-canvas",tabIndex:0,"aria-label":"Map",role:"region",width:"998",height:"532",style:{width:"998px",height:"532px"}})),nt.createElement("div",{className:"mapboxgl-control-container"},nt.createElement("div",{className:"mapboxgl-ctrl-top-left"}),nt.createElement("div",{className:"mapboxgl-ctrl-top-right"},nt.createElement("div",{className:"mapboxgl-ctrl-geocoder mapboxgl-ctrl"},nt.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},nt.createElement("path",{d:"M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"})),nt.createElement("input",{type:"text",className:"mapboxgl-ctrl-geocoder--input",placeholder:"Search School","aria-label":"Search School"}),nt.createElement("div",{className:"suggestions-wrapper"},nt.createElement("ul",{className:"suggestions",style:{display:"none"}})),nt.createElement("div",{className:"mapboxgl-ctrl-geocoder--pin-right"},nt.createElement("button",{"aria-label":"Clear",className:"mapboxgl-ctrl-geocoder--button"},nt.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-close",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},nt.createElement("path",{d:"M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"}))),nt.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-loading",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},nt.createElement("path",{fill:"#333",d:"M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"}),nt.createElement("path",{opacity:".1",d:"M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"})))),nt.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group"},nt.createElement("button",{className:"mapboxgl-ctrl-geolocate",type:"button",title:"Find my location","aria-label":"Find my location","aria-pressed":"false"},nt.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"})))),nt.createElement("div",{className:"mapboxgl-ctrl-bottom-left"},nt.createElement("div",{className:"mapboxgl-ctrl",style:{display:"block"}},nt.createElement("a",{className:"mapboxgl-ctrl-logo",target:"_blank",rel:"noopener nofollow",href:"https://www.mapbox.com/","aria-label":"Mapbox logo"}))),nt.createElement("div",{className:"mapboxgl-ctrl-bottom-right"},nt.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-attrib"},nt.createElement("button",{className:"mapboxgl-ctrl-attrib-button",type:"button",title:"Toggle attribution","aria-label":"Toggle attribution"}),nt.createElement("div",{className:"mapboxgl-ctrl-attrib-inner",role:"list"},nt.createElement("a",{href:"https://www.mapbox.com/about/maps/",target:"_blank",title:"Mapbox","aria-label":"Mapbox",role:"listitem"},"\xA9 Mapbox")," ",nt.createElement("a",{href:"https://www.openstreetmap.org/about/",target:"_blank",title:"OpenStreetMap","aria-label":"OpenStreetMap",role:"listitem"},"\xA9 OpenStreetMap")," ",nt.createElement("a",{className:"mapbox-improve-map",href:"https://apps.mapbox.com/feedback/?owner=nikisu&id=cktk76xy90rgm17s7q7pg0g55&access_token=pk.eyJ1IjoibmlraXN1IiwiYSI6ImNrc3A3c2FieTAwM3kybnA3anNjY2c3MXMifQ.T_8vAyTc4PMuGUC23vIOhA",target:"_blank",title:"Map feedback","aria-label":"Map feedback",role:"listitem",rel:"noopener nofollow"},"Improve this map")))))),nt.createElement("div",{className:"controls",id:"help"},nt.createElement("div",{className:"mobile-controls"},nt.createElement("details",null,nt.createElement("summary",null,nt.createElement("h6",null,nt.createElement("strong",null," Mobile Controls"))),nt.createElement("ul",null,nt.createElement("li",null,nt.createElement("strong",null,"Pan screen:"),"1 finger + drag"),nt.createElement("li",null,nt.createElement("strong",null,"Zoom In/Out:"),"2 fingers + pinch screen"),nt.createElement("li",null,nt.createElement("strong",null,"Perspective:"),"2 fingers + drag")))),nt.createElement("div",{className:"computer-controls"},nt.createElement("details",null,nt.createElement("summary",null,nt.createElement("h6",null,nt.createElement("strong",null," Computer Controls"))),nt.createElement("ul",null,nt.createElement("li",null,nt.createElement("strong",null,"Pan screen:"),"drag screen"),nt.createElement("li",null,nt.createElement("strong",null,"Zoom In/Out:"),"double click OR scroll up or down"),nt.createElement("li",null,nt.createElement("strong",null,"Perspective:"),"Ctrl + drag"))))))))},use=()=>{const e=m.exports.useContext(Hr);let t=e.user;const[n,r]=m.exports.useState("");return m.exports.useEffect(()=>{const a=[];e.allOrgs.forEach(c=>{t.organizations.find(d=>d===c.id)&&a.push(c.name)}),r(a.join(", "))},[e.allOrgs]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("div",{className:"header"},m.exports.createElement("img",{className:"circle responsive-img profile-picture",src:t.gravatar_url,alt:`${t.username}'s profile picture`}),m.exports.createElement("div",{className:"name-info"},m.exports.createElement("h5",{className:"full-name"},t.first_name," ",t.last_name),m.exports.createElement("h6",{className:"username"},t.username)),m.exports.createElement("div",{className:"edit-button"},m.exports.createElement("i",{className:"zmdi zmdi-fw-3x zmdi-edit"}),m.exports.createElement(Yt,{to:"/accounts/profile/update"},"Edit"))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"body"},m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},"Graduating"),m.exports.createElement("div",null,t.graduating_year)),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},"Executive of"),n),m.exports.createElement("br",null),m.exports.createElement("div",null,t.bio?m.exports.createElement("p",null,t.bio):m.exports.createElement("p",null,"This user has not shared any information."))))},cse=()=>{const e=Si(),t=m.exports.useContext(Hr);let n=t.user;m.exports.useEffect(()=>{go()||e("/accounts/login")});const{register:r,handleSubmit:a,watch:c,reset:d,formState:{errors:o}}=LS();m.exports.useEffect(()=>{"username"in n&&(console.log("User:",{...t.user,graduating_year:t.user.graduating_year.toString()}),d({...t.user,graduating_year:t.user.graduating_year.toString()}))},[t.user]);const v=C=>{console.log(C),t.putAPI(`${lr.POST.USER_UPDATE}/${n.id}`,C).then(I=>{console.log("Successfully updated user"),e("/accounts/login")}).catch(I=>{console.log("Failed to update user"),t.refreshAuth()})};return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/profile/update.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/base.css"}),m.exports.createElement("div",{className:"header"},m.exports.createElement("img",{className:"circle responsive-img profile-picture",src:n.gravatar_url,alt:`${n.username}'s profile picture`}),m.exports.createElement("div",{className:"name-info"},m.exports.createElement("h5",{className:"full-name"},`${n.first_name} ${n.last_name}`),m.exports.createElement("h6",{className:"username"},n.username))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"body"},m.exports.createElement("div",{className:"avatar"},m.exports.createElement("a",{href:"https://gravatar.com/",target:"_blank"},"Edit profile photo"),m.exports.createElement("br",null)),m.exports.createElement("form",{onSubmit:a(v)},m.exports.createElement("div",{className:"field bio"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_bio"},"Bio:")),m.exports.createElement("span",null,m.exports.createElement("textarea",{...r("bio"),name:"bio",cols:40,rows:10,id:"id_bio"}))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_timezone"},"Timezone:")),m.exports.createElement("span",null,m.exports.createElement("select",{...r("timezone"),name:"timezone",className:"browser-default",id:"id_timezone"},m.exports.createElement("option",{value:"Africa/Abidjan"},"Africa/Abidjan"),m.exports.createElement("option",{value:"Africa/Accra"},"Africa/Accra"),m.exports.createElement("option",{value:"Africa/Addis_Ababa"},"Africa/Addis_Ababa"),m.exports.createElement("option",{value:"Africa/Algiers"},"Africa/Algiers"),m.exports.createElement("option",{value:"Africa/Asmara"},"Africa/Asmara"),m.exports.createElement("option",{value:"Africa/Bamako"},"Africa/Bamako"),m.exports.createElement("option",{value:"Africa/Bangui"},"Africa/Bangui"),m.exports.createElement("option",{value:"Africa/Banjul"},"Africa/Banjul"),m.exports.createElement("option",{value:"Africa/Bissau"},"Africa/Bissau"),m.exports.createElement("option",{value:"Africa/Blantyre"},"Africa/Blantyre"),m.exports.createElement("option",{value:"Africa/Brazzaville"},"Africa/Brazzaville"),m.exports.createElement("option",{value:"Africa/Bujumbura"},"Africa/Bujumbura"),m.exports.createElement("option",{value:"Africa/Cairo"},"Africa/Cairo"),m.exports.createElement("option",{value:"Africa/Casablanca"},"Africa/Casablanca"),m.exports.createElement("option",{value:"Africa/Ceuta"},"Africa/Ceuta"),m.exports.createElement("option",{value:"Africa/Conakry"},"Africa/Conakry"),m.exports.createElement("option",{value:"Africa/Dakar"},"Africa/Dakar"),m.exports.createElement("option",{value:"Africa/Dar_es_Salaam"},"Africa/Dar_es_Salaam"),m.exports.createElement("option",{value:"Africa/Djibouti"},"Africa/Djibouti"),m.exports.createElement("option",{value:"Africa/Douala"},"Africa/Douala"),m.exports.createElement("option",{value:"Africa/El_Aaiun"},"Africa/El_Aaiun"),m.exports.createElement("option",{value:"Africa/Freetown"},"Africa/Freetown"),m.exports.createElement("option",{value:"Africa/Gaborone"},"Africa/Gaborone"),m.exports.createElement("option",{value:"Africa/Harare"},"Africa/Harare"),m.exports.createElement("option",{value:"Africa/Johannesburg"},"Africa/Johannesburg"),m.exports.createElement("option",{value:"Africa/Juba"},"Africa/Juba"),m.exports.createElement("option",{value:"Africa/Kampala"},"Africa/Kampala"),m.exports.createElement("option",{value:"Africa/Khartoum"},"Africa/Khartoum"),m.exports.createElement("option",{value:"Africa/Kigali"},"Africa/Kigali"),m.exports.createElement("option",{value:"Africa/Kinshasa"},"Africa/Kinshasa"),m.exports.createElement("option",{value:"Africa/Lagos"},"Africa/Lagos"),m.exports.createElement("option",{value:"Africa/Libreville"},"Africa/Libreville"),m.exports.createElement("option",{value:"Africa/Lome"},"Africa/Lome"),m.exports.createElement("option",{value:"Africa/Luanda"},"Africa/Luanda"),m.exports.createElement("option",{value:"Africa/Lubumbashi"},"Africa/Lubumbashi"),m.exports.createElement("option",{value:"Africa/Lusaka"},"Africa/Lusaka"),m.exports.createElement("option",{value:"Africa/Malabo"},"Africa/Malabo"),m.exports.createElement("option",{value:"Africa/Maputo"},"Africa/Maputo"),m.exports.createElement("option",{value:"Africa/Maseru"},"Africa/Maseru"),m.exports.createElement("option",{value:"Africa/Mbabane"},"Africa/Mbabane"),m.exports.createElement("option",{value:"Africa/Mogadishu"},"Africa/Mogadishu"),m.exports.createElement("option",{value:"Africa/Monrovia"},"Africa/Monrovia"),m.exports.createElement("option",{value:"Africa/Nairobi"},"Africa/Nairobi"),m.exports.createElement("option",{value:"Africa/Ndjamena"},"Africa/Ndjamena"),m.exports.createElement("option",{value:"Africa/Niamey"},"Africa/Niamey"),m.exports.createElement("option",{value:"Africa/Nouakchott"},"Africa/Nouakchott"),m.exports.createElement("option",{value:"Africa/Ouagadougou"},"Africa/Ouagadougou"),m.exports.createElement("option",{value:"Africa/Porto-Novo"},"Africa/Porto-Novo"),m.exports.createElement("option",{value:"Africa/Sao_Tome"},"Africa/Sao_Tome"),m.exports.createElement("option",{value:"Africa/Tripoli"},"Africa/Tripoli"),m.exports.createElement("option",{value:"Africa/Tunis"},"Africa/Tunis"),m.exports.createElement("option",{value:"Africa/Windhoek"},"Africa/Windhoek"),m.exports.createElement("option",{value:"America/Adak"},"America/Adak"),m.exports.createElement("option",{value:"America/Anchorage"},"America/Anchorage"),m.exports.createElement("option",{value:"America/Anguilla"},"America/Anguilla"),m.exports.createElement("option",{value:"America/Antigua"},"America/Antigua"),m.exports.createElement("option",{value:"America/Araguaina"},"America/Araguaina"),m.exports.createElement("option",{value:"America/Argentina/Buenos_Aires"},"America/Argentina/Buenos_Aires"),m.exports.createElement("option",{value:"America/Argentina/Catamarca"},"America/Argentina/Catamarca"),m.exports.createElement("option",{value:"America/Argentina/Cordoba"},"America/Argentina/Cordoba"),m.exports.createElement("option",{value:"America/Argentina/Jujuy"},"America/Argentina/Jujuy"),m.exports.createElement("option",{value:"America/Argentina/La_Rioja"},"America/Argentina/La_Rioja"),m.exports.createElement("option",{value:"America/Argentina/Mendoza"},"America/Argentina/Mendoza"),m.exports.createElement("option",{value:"America/Argentina/Rio_Gallegos"},"America/Argentina/Rio_Gallegos"),m.exports.createElement("option",{value:"America/Argentina/Salta"},"America/Argentina/Salta"),m.exports.createElement("option",{value:"America/Argentina/San_Juan"},"America/Argentina/San_Juan"),m.exports.createElement("option",{value:"America/Argentina/San_Luis"},"America/Argentina/San_Luis"),m.exports.createElement("option",{value:"America/Argentina/Tucuman"},"America/Argentina/Tucuman"),m.exports.createElement("option",{value:"America/Argentina/Ushuaia"},"America/Argentina/Ushuaia"),m.exports.createElement("option",{value:"America/Aruba"},"America/Aruba"),m.exports.createElement("option",{value:"America/Asuncion"},"America/Asuncion"),m.exports.createElement("option",{value:"America/Atikokan"},"America/Atikokan"),m.exports.createElement("option",{value:"America/Bahia"},"America/Bahia"),m.exports.createElement("option",{value:"America/Bahia_Banderas"},"America/Bahia_Banderas"),m.exports.createElement("option",{value:"America/Barbados"},"America/Barbados"),m.exports.createElement("option",{value:"America/Belem"},"America/Belem"),m.exports.createElement("option",{value:"America/Belize"},"America/Belize"),m.exports.createElement("option",{value:"America/Blanc-Sablon"},"America/Blanc-Sablon"),m.exports.createElement("option",{value:"America/Boa_Vista"},"America/Boa_Vista"),m.exports.createElement("option",{value:"America/Bogota"},"America/Bogota"),m.exports.createElement("option",{value:"America/Boise"},"America/Boise"),m.exports.createElement("option",{value:"America/Cambridge_Bay"},"America/Cambridge_Bay"),m.exports.createElement("option",{value:"America/Campo_Grande"},"America/Campo_Grande"),m.exports.createElement("option",{value:"America/Cancun"},"America/Cancun"),m.exports.createElement("option",{value:"America/Caracas"},"America/Caracas"),m.exports.createElement("option",{value:"America/Cayenne"},"America/Cayenne"),m.exports.createElement("option",{value:"America/Cayman"},"America/Cayman"),m.exports.createElement("option",{value:"America/Chicago"},"America/Chicago"),m.exports.createElement("option",{value:"America/Chihuahua"},"America/Chihuahua"),m.exports.createElement("option",{value:"America/Costa_Rica"},"America/Costa_Rica"),m.exports.createElement("option",{value:"America/Creston"},"America/Creston"),m.exports.createElement("option",{value:"America/Cuiaba"},"America/Cuiaba"),m.exports.createElement("option",{value:"America/Curacao"},"America/Curacao"),m.exports.createElement("option",{value:"America/Danmarkshavn"},"America/Danmarkshavn"),m.exports.createElement("option",{value:"America/Dawson"},"America/Dawson"),m.exports.createElement("option",{value:"America/Dawson_Creek"},"America/Dawson_Creek"),m.exports.createElement("option",{value:"America/Denver"},"America/Denver"),m.exports.createElement("option",{value:"America/Detroit"},"America/Detroit"),m.exports.createElement("option",{value:"America/Dominica"},"America/Dominica"),m.exports.createElement("option",{value:"America/Edmonton"},"America/Edmonton"),m.exports.createElement("option",{value:"America/Eirunepe"},"America/Eirunepe"),m.exports.createElement("option",{value:"America/El_Salvador"},"America/El_Salvador"),m.exports.createElement("option",{value:"America/Fort_Nelson"},"America/Fort_Nelson"),m.exports.createElement("option",{value:"America/Fortaleza"},"America/Fortaleza"),m.exports.createElement("option",{value:"America/Glace_Bay"},"America/Glace_Bay"),m.exports.createElement("option",{value:"America/Goose_Bay"},"America/Goose_Bay"),m.exports.createElement("option",{value:"America/Grand_Turk"},"America/Grand_Turk"),m.exports.createElement("option",{value:"America/Grenada"},"America/Grenada"),m.exports.createElement("option",{value:"America/Guadeloupe"},"America/Guadeloupe"),m.exports.createElement("option",{value:"America/Guatemala"},"America/Guatemala"),m.exports.createElement("option",{value:"America/Guayaquil"},"America/Guayaquil"),m.exports.createElement("option",{value:"America/Guyana"},"America/Guyana"),m.exports.createElement("option",{value:"America/Halifax"},"America/Halifax"),m.exports.createElement("option",{value:"America/Havana"},"America/Havana"),m.exports.createElement("option",{value:"America/Hermosillo"},"America/Hermosillo"),m.exports.createElement("option",{value:"America/Indiana/Indianapolis"},"America/Indiana/Indianapolis"),m.exports.createElement("option",{value:"America/Indiana/Knox"},"America/Indiana/Knox"),m.exports.createElement("option",{value:"America/Indiana/Marengo"},"America/Indiana/Marengo"),m.exports.createElement("option",{value:"America/Indiana/Petersburg"},"America/Indiana/Petersburg"),m.exports.createElement("option",{value:"America/Indiana/Tell_City"},"America/Indiana/Tell_City"),m.exports.createElement("option",{value:"America/Indiana/Vevay"},"America/Indiana/Vevay"),m.exports.createElement("option",{value:"America/Indiana/Vincennes"},"America/Indiana/Vincennes"),m.exports.createElement("option",{value:"America/Indiana/Winamac"},"America/Indiana/Winamac"),m.exports.createElement("option",{value:"America/Inuvik"},"America/Inuvik"),m.exports.createElement("option",{value:"America/Iqaluit"},"America/Iqaluit"),m.exports.createElement("option",{value:"America/Jamaica"},"America/Jamaica"),m.exports.createElement("option",{value:"America/Juneau"},"America/Juneau"),m.exports.createElement("option",{value:"America/Kentucky/Louisville"},"America/Kentucky/Louisville"),m.exports.createElement("option",{value:"America/Kentucky/Monticello"},"America/Kentucky/Monticello"),m.exports.createElement("option",{value:"America/Kralendijk"},"America/Kralendijk"),m.exports.createElement("option",{value:"America/La_Paz"},"America/La_Paz"),m.exports.createElement("option",{value:"America/Lima"},"America/Lima"),m.exports.createElement("option",{value:"America/Los_Angeles"},"America/Los_Angeles"),m.exports.createElement("option",{value:"America/Lower_Princes"},"America/Lower_Princes"),m.exports.createElement("option",{value:"America/Maceio"},"America/Maceio"),m.exports.createElement("option",{value:"America/Managua"},"America/Managua"),m.exports.createElement("option",{value:"America/Manaus"},"America/Manaus"),m.exports.createElement("option",{value:"America/Marigot"},"America/Marigot"),m.exports.createElement("option",{value:"America/Martinique"},"America/Martinique"),m.exports.createElement("option",{value:"America/Matamoros"},"America/Matamoros"),m.exports.createElement("option",{value:"America/Mazatlan"},"America/Mazatlan"),m.exports.createElement("option",{value:"America/Menominee"},"America/Menominee"),m.exports.createElement("option",{value:"America/Merida"},"America/Merida"),m.exports.createElement("option",{value:"America/Metlakatla"},"America/Metlakatla"),m.exports.createElement("option",{value:"America/Mexico_City"},"America/Mexico_City"),m.exports.createElement("option",{value:"America/Miquelon"},"America/Miquelon"),m.exports.createElement("option",{value:"America/Moncton"},"America/Moncton"),m.exports.createElement("option",{value:"America/Monterrey"},"America/Monterrey"),m.exports.createElement("option",{value:"America/Montevideo"},"America/Montevideo"),m.exports.createElement("option",{value:"America/Montserrat"},"America/Montserrat"),m.exports.createElement("option",{value:"America/Nassau"},"America/Nassau"),m.exports.createElement("option",{value:"America/New_York"},"America/New_York"),m.exports.createElement("option",{value:"America/Nipigon"},"America/Nipigon"),m.exports.createElement("option",{value:"America/Nome"},"America/Nome"),m.exports.createElement("option",{value:"America/Noronha"},"America/Noronha"),m.exports.createElement("option",{value:"America/North_Dakota/Beulah"},"America/North_Dakota/Beulah"),m.exports.createElement("option",{value:"America/North_Dakota/Center"},"America/North_Dakota/Center"),m.exports.createElement("option",{value:"America/North_Dakota/New_Salem"},"America/North_Dakota/New_Salem"),m.exports.createElement("option",{value:"America/Nuuk"},"America/Nuuk"),m.exports.createElement("option",{value:"America/Ojinaga"},"America/Ojinaga"),m.exports.createElement("option",{value:"America/Panama"},"America/Panama"),m.exports.createElement("option",{value:"America/Pangnirtung"},"America/Pangnirtung"),m.exports.createElement("option",{value:"America/Paramaribo"},"America/Paramaribo"),m.exports.createElement("option",{value:"America/Phoenix"},"America/Phoenix"),m.exports.createElement("option",{value:"America/Port-au-Prince"},"America/Port-au-Prince"),m.exports.createElement("option",{value:"America/Port_of_Spain"},"America/Port_of_Spain"),m.exports.createElement("option",{value:"America/Porto_Velho"},"America/Porto_Velho"),m.exports.createElement("option",{value:"America/Puerto_Rico"},"America/Puerto_Rico"),m.exports.createElement("option",{value:"America/Punta_Arenas"},"America/Punta_Arenas"),m.exports.createElement("option",{value:"America/Rainy_River"},"America/Rainy_River"),m.exports.createElement("option",{value:"America/Rankin_Inlet"},"America/Rankin_Inlet"),m.exports.createElement("option",{value:"America/Recife"},"America/Recife"),m.exports.createElement("option",{value:"America/Regina"},"America/Regina"),m.exports.createElement("option",{value:"America/Resolute"},"America/Resolute"),m.exports.createElement("option",{value:"America/Rio_Branco"},"America/Rio_Branco"),m.exports.createElement("option",{value:"America/Santarem"},"America/Santarem"),m.exports.createElement("option",{value:"America/Santiago"},"America/Santiago"),m.exports.createElement("option",{value:"America/Santo_Domingo"},"America/Santo_Domingo"),m.exports.createElement("option",{value:"America/Sao_Paulo"},"America/Sao_Paulo"),m.exports.createElement("option",{value:"America/Scoresbysund"},"America/Scoresbysund"),m.exports.createElement("option",{value:"America/Sitka"},"America/Sitka"),m.exports.createElement("option",{value:"America/St_Barthelemy"},"America/St_Barthelemy"),m.exports.createElement("option",{value:"America/St_Johns"},"America/St_Johns"),m.exports.createElement("option",{value:"America/St_Kitts"},"America/St_Kitts"),m.exports.createElement("option",{value:"America/St_Lucia"},"America/St_Lucia"),m.exports.createElement("option",{value:"America/St_Thomas"},"America/St_Thomas"),m.exports.createElement("option",{value:"America/St_Vincent"},"America/St_Vincent"),m.exports.createElement("option",{value:"America/Swift_Current"},"America/Swift_Current"),m.exports.createElement("option",{value:"America/Tegucigalpa"},"America/Tegucigalpa"),m.exports.createElement("option",{value:"America/Thule"},"America/Thule"),m.exports.createElement("option",{value:"America/Thunder_Bay"},"America/Thunder_Bay"),m.exports.createElement("option",{value:"America/Tijuana"},"America/Tijuana"),m.exports.createElement("option",{value:"America/Toronto"},"America/Toronto"),m.exports.createElement("option",{value:"America/Tortola"},"America/Tortola"),m.exports.createElement("option",{value:"America/Vancouver"},"America/Vancouver"),m.exports.createElement("option",{value:"America/Whitehorse"},"America/Whitehorse"),m.exports.createElement("option",{value:"America/Winnipeg"},"America/Winnipeg"),m.exports.createElement("option",{value:"America/Yakutat"},"America/Yakutat"),m.exports.createElement("option",{value:"America/Yellowknife"},"America/Yellowknife"),m.exports.createElement("option",{value:"Antarctica/Casey"},"Antarctica/Casey"),m.exports.createElement("option",{value:"Antarctica/Davis"},"Antarctica/Davis"),m.exports.createElement("option",{value:"Antarctica/DumontDUrville"},"Antarctica/DumontDUrville"),m.exports.createElement("option",{value:"Antarctica/Macquarie"},"Antarctica/Macquarie"),m.exports.createElement("option",{value:"Antarctica/Mawson"},"Antarctica/Mawson"),m.exports.createElement("option",{value:"Antarctica/McMurdo"},"Antarctica/McMurdo"),m.exports.createElement("option",{value:"Antarctica/Palmer"},"Antarctica/Palmer"),m.exports.createElement("option",{value:"Antarctica/Rothera"},"Antarctica/Rothera"),m.exports.createElement("option",{value:"Antarctica/Syowa"},"Antarctica/Syowa"),m.exports.createElement("option",{value:"Antarctica/Troll"},"Antarctica/Troll"),m.exports.createElement("option",{value:"Antarctica/Vostok"},"Antarctica/Vostok"),m.exports.createElement("option",{value:"Arctic/Longyearbyen"},"Arctic/Longyearbyen"),m.exports.createElement("option",{value:"Asia/Aden"},"Asia/Aden"),m.exports.createElement("option",{value:"Asia/Almaty"},"Asia/Almaty"),m.exports.createElement("option",{value:"Asia/Amman"},"Asia/Amman"),m.exports.createElement("option",{value:"Asia/Anadyr"},"Asia/Anadyr"),m.exports.createElement("option",{value:"Asia/Aqtau"},"Asia/Aqtau"),m.exports.createElement("option",{value:"Asia/Aqtobe"},"Asia/Aqtobe"),m.exports.createElement("option",{value:"Asia/Ashgabat"},"Asia/Ashgabat"),m.exports.createElement("option",{value:"Asia/Atyrau"},"Asia/Atyrau"),m.exports.createElement("option",{value:"Asia/Baghdad"},"Asia/Baghdad"),m.exports.createElement("option",{value:"Asia/Bahrain"},"Asia/Bahrain"),m.exports.createElement("option",{value:"Asia/Baku"},"Asia/Baku"),m.exports.createElement("option",{value:"Asia/Bangkok"},"Asia/Bangkok"),m.exports.createElement("option",{value:"Asia/Barnaul"},"Asia/Barnaul"),m.exports.createElement("option",{value:"Asia/Beirut"},"Asia/Beirut"),m.exports.createElement("option",{value:"Asia/Bishkek"},"Asia/Bishkek"),m.exports.createElement("option",{value:"Asia/Brunei"},"Asia/Brunei"),m.exports.createElement("option",{value:"Asia/Chita"},"Asia/Chita"),m.exports.createElement("option",{value:"Asia/Choibalsan"},"Asia/Choibalsan"),m.exports.createElement("option",{value:"Asia/Colombo"},"Asia/Colombo"),m.exports.createElement("option",{value:"Asia/Damascus"},"Asia/Damascus"),m.exports.createElement("option",{value:"Asia/Dhaka"},"Asia/Dhaka"),m.exports.createElement("option",{value:"Asia/Dili"},"Asia/Dili"),m.exports.createElement("option",{value:"Asia/Dubai"},"Asia/Dubai"),m.exports.createElement("option",{value:"Asia/Dushanbe"},"Asia/Dushanbe"),m.exports.createElement("option",{value:"Asia/Famagusta"},"Asia/Famagusta"),m.exports.createElement("option",{value:"Asia/Gaza"},"Asia/Gaza"),m.exports.createElement("option",{value:"Asia/Hebron"},"Asia/Hebron"),m.exports.createElement("option",{value:"Asia/Ho_Chi_Minh"},"Asia/Ho_Chi_Minh"),m.exports.createElement("option",{value:"Asia/Hong_Kong"},"Asia/Hong_Kong"),m.exports.createElement("option",{value:"Asia/Hovd"},"Asia/Hovd"),m.exports.createElement("option",{value:"Asia/Irkutsk"},"Asia/Irkutsk"),m.exports.createElement("option",{value:"Asia/Jakarta"},"Asia/Jakarta"),m.exports.createElement("option",{value:"Asia/Jayapura"},"Asia/Jayapura"),m.exports.createElement("option",{value:"Asia/Jerusalem"},"Asia/Jerusalem"),m.exports.createElement("option",{value:"Asia/Kabul"},"Asia/Kabul"),m.exports.createElement("option",{value:"Asia/Kamchatka"},"Asia/Kamchatka"),m.exports.createElement("option",{value:"Asia/Karachi"},"Asia/Karachi"),m.exports.createElement("option",{value:"Asia/Kathmandu"},"Asia/Kathmandu"),m.exports.createElement("option",{value:"Asia/Khandyga"},"Asia/Khandyga"),m.exports.createElement("option",{value:"Asia/Kolkata"},"Asia/Kolkata"),m.exports.createElement("option",{value:"Asia/Krasnoyarsk"},"Asia/Krasnoyarsk"),m.exports.createElement("option",{value:"Asia/Kuala_Lumpur"},"Asia/Kuala_Lumpur"),m.exports.createElement("option",{value:"Asia/Kuching"},"Asia/Kuching"),m.exports.createElement("option",{value:"Asia/Kuwait"},"Asia/Kuwait"),m.exports.createElement("option",{value:"Asia/Macau"},"Asia/Macau"),m.exports.createElement("option",{value:"Asia/Magadan"},"Asia/Magadan"),m.exports.createElement("option",{value:"Asia/Makassar"},"Asia/Makassar"),m.exports.createElement("option",{value:"Asia/Manila"},"Asia/Manila"),m.exports.createElement("option",{value:"Asia/Muscat"},"Asia/Muscat"),m.exports.createElement("option",{value:"Asia/Nicosia"},"Asia/Nicosia"),m.exports.createElement("option",{value:"Asia/Novokuznetsk"},"Asia/Novokuznetsk"),m.exports.createElement("option",{value:"Asia/Novosibirsk"},"Asia/Novosibirsk"),m.exports.createElement("option",{value:"Asia/Omsk"},"Asia/Omsk"),m.exports.createElement("option",{value:"Asia/Oral"},"Asia/Oral"),m.exports.createElement("option",{value:"Asia/Phnom_Penh"},"Asia/Phnom_Penh"),m.exports.createElement("option",{value:"Asia/Pontianak"},"Asia/Pontianak"),m.exports.createElement("option",{value:"Asia/Pyongyang"},"Asia/Pyongyang"),m.exports.createElement("option",{value:"Asia/Qatar"},"Asia/Qatar"),m.exports.createElement("option",{value:"Asia/Qostanay"},"Asia/Qostanay"),m.exports.createElement("option",{value:"Asia/Qyzylorda"},"Asia/Qyzylorda"),m.exports.createElement("option",{value:"Asia/Riyadh"},"Asia/Riyadh"),m.exports.createElement("option",{value:"Asia/Sakhalin"},"Asia/Sakhalin"),m.exports.createElement("option",{value:"Asia/Samarkand"},"Asia/Samarkand"),m.exports.createElement("option",{value:"Asia/Seoul"},"Asia/Seoul"),m.exports.createElement("option",{value:"Asia/Shanghai"},"Asia/Shanghai"),m.exports.createElement("option",{value:"Asia/Singapore"},"Asia/Singapore"),m.exports.createElement("option",{value:"Asia/Srednekolymsk"},"Asia/Srednekolymsk"),m.exports.createElement("option",{value:"Asia/Taipei"},"Asia/Taipei"),m.exports.createElement("option",{value:"Asia/Tashkent"},"Asia/Tashkent"),m.exports.createElement("option",{value:"Asia/Tbilisi"},"Asia/Tbilisi"),m.exports.createElement("option",{value:"Asia/Tehran"},"Asia/Tehran"),m.exports.createElement("option",{value:"Asia/Thimphu"},"Asia/Thimphu"),m.exports.createElement("option",{value:"Asia/Tokyo"},"Asia/Tokyo"),m.exports.createElement("option",{value:"Asia/Tomsk"},"Asia/Tomsk"),m.exports.createElement("option",{value:"Asia/Ulaanbaatar"},"Asia/Ulaanbaatar"),m.exports.createElement("option",{value:"Asia/Urumqi"},"Asia/Urumqi"),m.exports.createElement("option",{value:"Asia/Ust-Nera"},"Asia/Ust-Nera"),m.exports.createElement("option",{value:"Asia/Vientiane"},"Asia/Vientiane"),m.exports.createElement("option",{value:"Asia/Vladivostok"},"Asia/Vladivostok"),m.exports.createElement("option",{value:"Asia/Yakutsk"},"Asia/Yakutsk"),m.exports.createElement("option",{value:"Asia/Yangon"},"Asia/Yangon"),m.exports.createElement("option",{value:"Asia/Yekaterinburg"},"Asia/Yekaterinburg"),m.exports.createElement("option",{value:"Asia/Yerevan"},"Asia/Yerevan"),m.exports.createElement("option",{value:"Atlantic/Azores"},"Atlantic/Azores"),m.exports.createElement("option",{value:"Atlantic/Bermuda"},"Atlantic/Bermuda"),m.exports.createElement("option",{value:"Atlantic/Canary"},"Atlantic/Canary"),m.exports.createElement("option",{value:"Atlantic/Cape_Verde"},"Atlantic/Cape_Verde"),m.exports.createElement("option",{value:"Atlantic/Faroe"},"Atlantic/Faroe"),m.exports.createElement("option",{value:"Atlantic/Madeira"},"Atlantic/Madeira"),m.exports.createElement("option",{value:"Atlantic/Reykjavik"},"Atlantic/Reykjavik"),m.exports.createElement("option",{value:"Atlantic/South_Georgia"},"Atlantic/South_Georgia"),m.exports.createElement("option",{value:"Atlantic/St_Helena"},"Atlantic/St_Helena"),m.exports.createElement("option",{value:"Atlantic/Stanley"},"Atlantic/Stanley"),m.exports.createElement("option",{value:"Australia/Adelaide"},"Australia/Adelaide"),m.exports.createElement("option",{value:"Australia/Brisbane"},"Australia/Brisbane"),m.exports.createElement("option",{value:"Australia/Broken_Hill"},"Australia/Broken_Hill"),m.exports.createElement("option",{value:"Australia/Darwin"},"Australia/Darwin"),m.exports.createElement("option",{value:"Australia/Eucla"},"Australia/Eucla"),m.exports.createElement("option",{value:"Australia/Hobart"},"Australia/Hobart"),m.exports.createElement("option",{value:"Australia/Lindeman"},"Australia/Lindeman"),m.exports.createElement("option",{value:"Australia/Lord_Howe"},"Australia/Lord_Howe"),m.exports.createElement("option",{value:"Australia/Melbourne"},"Australia/Melbourne"),m.exports.createElement("option",{value:"Australia/Perth"},"Australia/Perth"),m.exports.createElement("option",{value:"Australia/Sydney"},"Australia/Sydney"),m.exports.createElement("option",{value:"Canada/Atlantic"},"Canada/Atlantic"),m.exports.createElement("option",{value:"Canada/Central"},"Canada/Central"),m.exports.createElement("option",{value:"Canada/Eastern"},"Canada/Eastern"),m.exports.createElement("option",{value:"Canada/Mountain"},"Canada/Mountain"),m.exports.createElement("option",{value:"Canada/Newfoundland"},"Canada/Newfoundland"),m.exports.createElement("option",{value:"Canada/Pacific"},"Canada/Pacific"),m.exports.createElement("option",{value:"Europe/Amsterdam"},"Europe/Amsterdam"),m.exports.createElement("option",{value:"Europe/Andorra"},"Europe/Andorra"),m.exports.createElement("option",{value:"Europe/Astrakhan"},"Europe/Astrakhan"),m.exports.createElement("option",{value:"Europe/Athens"},"Europe/Athens"),m.exports.createElement("option",{value:"Europe/Belgrade"},"Europe/Belgrade"),m.exports.createElement("option",{value:"Europe/Berlin"},"Europe/Berlin"),m.exports.createElement("option",{value:"Europe/Bratislava"},"Europe/Bratislava"),m.exports.createElement("option",{value:"Europe/Brussels"},"Europe/Brussels"),m.exports.createElement("option",{value:"Europe/Bucharest"},"Europe/Bucharest"),m.exports.createElement("option",{value:"Europe/Budapest"},"Europe/Budapest"),m.exports.createElement("option",{value:"Europe/Busingen"},"Europe/Busingen"),m.exports.createElement("option",{value:"Europe/Chisinau"},"Europe/Chisinau"),m.exports.createElement("option",{value:"Europe/Copenhagen"},"Europe/Copenhagen"),m.exports.createElement("option",{value:"Europe/Dublin"},"Europe/Dublin"),m.exports.createElement("option",{value:"Europe/Gibraltar"},"Europe/Gibraltar"),m.exports.createElement("option",{value:"Europe/Guernsey"},"Europe/Guernsey"),m.exports.createElement("option",{value:"Europe/Helsinki"},"Europe/Helsinki"),m.exports.createElement("option",{value:"Europe/Isle_of_Man"},"Europe/Isle_of_Man"),m.exports.createElement("option",{value:"Europe/Istanbul"},"Europe/Istanbul"),m.exports.createElement("option",{value:"Europe/Jersey"},"Europe/Jersey"),m.exports.createElement("option",{value:"Europe/Kaliningrad"},"Europe/Kaliningrad"),m.exports.createElement("option",{value:"Europe/Kiev"},"Europe/Kiev"),m.exports.createElement("option",{value:"Europe/Kirov"},"Europe/Kirov"),m.exports.createElement("option",{value:"Europe/Lisbon"},"Europe/Lisbon"),m.exports.createElement("option",{value:"Europe/Ljubljana"},"Europe/Ljubljana"),m.exports.createElement("option",{value:"Europe/London"},"Europe/London"),m.exports.createElement("option",{value:"Europe/Luxembourg"},"Europe/Luxembourg"),m.exports.createElement("option",{value:"Europe/Madrid"},"Europe/Madrid"),m.exports.createElement("option",{value:"Europe/Malta"},"Europe/Malta"),m.exports.createElement("option",{value:"Europe/Mariehamn"},"Europe/Mariehamn"),m.exports.createElement("option",{value:"Europe/Minsk"},"Europe/Minsk"),m.exports.createElement("option",{value:"Europe/Monaco"},"Europe/Monaco"),m.exports.createElement("option",{value:"Europe/Moscow"},"Europe/Moscow"),m.exports.createElement("option",{value:"Europe/Oslo"},"Europe/Oslo"),m.exports.createElement("option",{value:"Europe/Paris"},"Europe/Paris"),m.exports.createElement("option",{value:"Europe/Podgorica"},"Europe/Podgorica"),m.exports.createElement("option",{value:"Europe/Prague"},"Europe/Prague"),m.exports.createElement("option",{value:"Europe/Riga"},"Europe/Riga"),m.exports.createElement("option",{value:"Europe/Rome"},"Europe/Rome"),m.exports.createElement("option",{value:"Europe/Samara"},"Europe/Samara"),m.exports.createElement("option",{value:"Europe/San_Marino"},"Europe/San_Marino"),m.exports.createElement("option",{value:"Europe/Sarajevo"},"Europe/Sarajevo"),m.exports.createElement("option",{value:"Europe/Saratov"},"Europe/Saratov"),m.exports.createElement("option",{value:"Europe/Simferopol"},"Europe/Simferopol"),m.exports.createElement("option",{value:"Europe/Skopje"},"Europe/Skopje"),m.exports.createElement("option",{value:"Europe/Sofia"},"Europe/Sofia"),m.exports.createElement("option",{value:"Europe/Stockholm"},"Europe/Stockholm"),m.exports.createElement("option",{value:"Europe/Tallinn"},"Europe/Tallinn"),m.exports.createElement("option",{value:"Europe/Tirane"},"Europe/Tirane"),m.exports.createElement("option",{value:"Europe/Ulyanovsk"},"Europe/Ulyanovsk"),m.exports.createElement("option",{value:"Europe/Uzhgorod"},"Europe/Uzhgorod"),m.exports.createElement("option",{value:"Europe/Vaduz"},"Europe/Vaduz"),m.exports.createElement("option",{value:"Europe/Vatican"},"Europe/Vatican"),m.exports.createElement("option",{value:"Europe/Vienna"},"Europe/Vienna"),m.exports.createElement("option",{value:"Europe/Vilnius"},"Europe/Vilnius"),m.exports.createElement("option",{value:"Europe/Volgograd"},"Europe/Volgograd"),m.exports.createElement("option",{value:"Europe/Warsaw"},"Europe/Warsaw"),m.exports.createElement("option",{value:"Europe/Zagreb"},"Europe/Zagreb"),m.exports.createElement("option",{value:"Europe/Zaporozhye"},"Europe/Zaporozhye"),m.exports.createElement("option",{value:"Europe/Zurich"},"Europe/Zurich"),m.exports.createElement("option",{value:"GMT"},"GMT"),m.exports.createElement("option",{value:"Indian/Antananarivo"},"Indian/Antananarivo"),m.exports.createElement("option",{value:"Indian/Chagos"},"Indian/Chagos"),m.exports.createElement("option",{value:"Indian/Christmas"},"Indian/Christmas"),m.exports.createElement("option",{value:"Indian/Cocos"},"Indian/Cocos"),m.exports.createElement("option",{value:"Indian/Comoro"},"Indian/Comoro"),m.exports.createElement("option",{value:"Indian/Kerguelen"},"Indian/Kerguelen"),m.exports.createElement("option",{value:"Indian/Mahe"},"Indian/Mahe"),m.exports.createElement("option",{value:"Indian/Maldives"},"Indian/Maldives"),m.exports.createElement("option",{value:"Indian/Mauritius"},"Indian/Mauritius"),m.exports.createElement("option",{value:"Indian/Mayotte"},"Indian/Mayotte"),m.exports.createElement("option",{value:"Indian/Reunion"},"Indian/Reunion"),m.exports.createElement("option",{value:"Pacific/Apia"},"Pacific/Apia"),m.exports.createElement("option",{value:"Pacific/Auckland"},"Pacific/Auckland"),m.exports.createElement("option",{value:"Pacific/Bougainville"},"Pacific/Bougainville"),m.exports.createElement("option",{value:"Pacific/Chatham"},"Pacific/Chatham"),m.exports.createElement("option",{value:"Pacific/Chuuk"},"Pacific/Chuuk"),m.exports.createElement("option",{value:"Pacific/Easter"},"Pacific/Easter"),m.exports.createElement("option",{value:"Pacific/Efate"},"Pacific/Efate"),m.exports.createElement("option",{value:"Pacific/Fakaofo"},"Pacific/Fakaofo"),m.exports.createElement("option",{value:"Pacific/Fiji"},"Pacific/Fiji"),m.exports.createElement("option",{value:"Pacific/Funafuti"},"Pacific/Funafuti"),m.exports.createElement("option",{value:"Pacific/Galapagos"},"Pacific/Galapagos"),m.exports.createElement("option",{value:"Pacific/Gambier"},"Pacific/Gambier"),m.exports.createElement("option",{value:"Pacific/Guadalcanal"},"Pacific/Guadalcanal"),m.exports.createElement("option",{value:"Pacific/Guam"},"Pacific/Guam"),m.exports.createElement("option",{value:"Pacific/Honolulu"},"Pacific/Honolulu"),m.exports.createElement("option",{value:"Pacific/Kanton"},"Pacific/Kanton"),m.exports.createElement("option",{value:"Pacific/Kiritimati"},"Pacific/Kiritimati"),m.exports.createElement("option",{value:"Pacific/Kosrae"},"Pacific/Kosrae"),m.exports.createElement("option",{value:"Pacific/Kwajalein"},"Pacific/Kwajalein"),m.exports.createElement("option",{value:"Pacific/Majuro"},"Pacific/Majuro"),m.exports.createElement("option",{value:"Pacific/Marquesas"},"Pacific/Marquesas"),m.exports.createElement("option",{value:"Pacific/Midway"},"Pacific/Midway"),m.exports.createElement("option",{value:"Pacific/Nauru"},"Pacific/Nauru"),m.exports.createElement("option",{value:"Pacific/Niue"},"Pacific/Niue"),m.exports.createElement("option",{value:"Pacific/Norfolk"},"Pacific/Norfolk"),m.exports.createElement("option",{value:"Pacific/Noumea"},"Pacific/Noumea"),m.exports.createElement("option",{value:"Pacific/Pago_Pago"},"Pacific/Pago_Pago"),m.exports.createElement("option",{value:"Pacific/Palau"},"Pacific/Palau"),m.exports.createElement("option",{value:"Pacific/Pitcairn"},"Pacific/Pitcairn"),m.exports.createElement("option",{value:"Pacific/Pohnpei"},"Pacific/Pohnpei"),m.exports.createElement("option",{value:"Pacific/Port_Moresby"},"Pacific/Port_Moresby"),m.exports.createElement("option",{value:"Pacific/Rarotonga"},"Pacific/Rarotonga"),m.exports.createElement("option",{value:"Pacific/Saipan"},"Pacific/Saipan"),m.exports.createElement("option",{value:"Pacific/Tahiti"},"Pacific/Tahiti"),m.exports.createElement("option",{value:"Pacific/Tarawa"},"Pacific/Tarawa"),m.exports.createElement("option",{value:"Pacific/Tongatapu"},"Pacific/Tongatapu"),m.exports.createElement("option",{value:"Pacific/Wake"},"Pacific/Wake"),m.exports.createElement("option",{value:"Pacific/Wallis"},"Pacific/Wallis"),m.exports.createElement("option",{value:"US/Alaska"},"US/Alaska"),m.exports.createElement("option",{value:"US/Arizona"},"US/Arizona"),m.exports.createElement("option",{value:"US/Central"},"US/Central"),m.exports.createElement("option",{value:"US/Eastern"},"US/Eastern"),m.exports.createElement("option",{value:"US/Hawaii"},"US/Hawaii"),m.exports.createElement("option",{value:"US/Mountain"},"US/Mountain"),m.exports.createElement("option",{value:"US/Pacific"},"US/Pacific"),m.exports.createElement("option",{value:"UTC"},"UTC")),m.exports.createElement("input",{type:"hidden",name:"initial-timezone",value:"America/Toronto",id:"initial-id_timezone"}))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_first_name"},"First name:")),m.exports.createElement("span",null,m.exports.createElement("input",{...r("first_name"),type:"text",name:"first_name",value:"Jimmy",maxLength:150,id:"id_first_name"}),m.exports.createElement("div",{"data-lastpass-icon-root":"true",style:{position:"relative",height:"0px",width:"0px",float:"left"}},m.exports.createElement("template",null,m.exports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","data-lastpass-icon":"true",style:{position:"absolute",cursor:"pointer",height:"22px",maxHeight:"22px",width:"22px",maxWidth:"22px",top:"11.5px",left:"154px",zIndex:"auto",color:"rgb(215, 64, 58)"}},m.exports.createElement("rect",{x:"0.680176",y:"0.763062",width:"22.6392",height:"22.4737",rx:"4",fill:"currentColor"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7935 7.9516C19.7935 7.64414 20.0427 7.3949 20.3502 7.3949C20.6576 7.3949 20.9069 7.64414 20.9069 7.9516V16.0487C20.9069 16.3562 20.6576 16.6054 20.3502 16.6054C20.0427 16.6054 19.7935 16.3562 19.7935 16.0487V7.9516Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.76288 13.6577C5.68525 13.6577 6.43298 12.9154 6.43298 11.9998C6.43298 11.0842 5.68525 10.3419 4.76288 10.3419C3.8405 10.3419 3.09277 11.0842 3.09277 11.9998C3.09277 12.9154 3.8405 13.6577 4.76288 13.6577Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3298 13.6577C11.2521 13.6577 11.9999 12.9154 11.9999 11.9998C11.9999 11.0842 11.2521 10.3419 10.3298 10.3419C9.4074 10.3419 8.65967 11.0842 8.65967 11.9998C8.65967 12.9154 9.4074 13.6577 10.3298 13.6577Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8964 13.6577C16.8188 13.6577 17.5665 12.9154 17.5665 11.9998C17.5665 11.0842 16.8188 10.3419 15.8964 10.3419C14.974 10.3419 14.2263 11.0842 14.2263 11.9998C14.2263 12.9154 14.974 13.6577 15.8964 13.6577Z",fill:"white"})))))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_last_name"},"Last name:")),m.exports.createElement("span",null,m.exports.createElement("input",{...r("last_name"),type:"text",name:"last_name",value:"Liu",maxLength:150,id:"id_last_name"}),m.exports.createElement("div",{"data-lastpass-icon-root":"true",style:{position:"relative",height:"0px",width:"0px",float:"left"}},m.exports.createElement("template",null,m.exports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","data-lastpass-icon":"true",style:{position:"absolute",cursor:"pointer",height:"22px",maxHeight:"22px",width:"22px",maxWidth:"22px",top:"11.5px",left:"154px",zIndex:"auto",color:"rgb(215, 64, 58)"}},m.exports.createElement("rect",{x:"0.680176",y:"0.763062",width:"22.6392",height:"22.4737",rx:"4",fill:"currentColor"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7935 7.9516C19.7935 7.64414 20.0427 7.3949 20.3502 7.3949C20.6576 7.3949 20.9069 7.64414 20.9069 7.9516V16.0487C20.9069 16.3562 20.6576 16.6054 20.3502 16.6054C20.0427 16.6054 19.7935 16.3562 19.7935 16.0487V7.9516Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.76288 13.6577C5.68525 13.6577 6.43298 12.9154 6.43298 11.9998C6.43298 11.0842 5.68525 10.3419 4.76288 10.3419C3.8405 10.3419 3.09277 11.0842 3.09277 11.9998C3.09277 12.9154 3.8405 13.6577 4.76288 13.6577Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3298 13.6577C11.2521 13.6577 11.9999 12.9154 11.9999 11.9998C11.9999 11.0842 11.2521 10.3419 10.3298 10.3419C9.4074 10.3419 8.65967 11.0842 8.65967 11.9998C8.65967 12.9154 9.4074 13.6577 10.3298 13.6577Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8964 13.6577C16.8188 13.6577 17.5665 12.9154 17.5665 11.9998C17.5665 11.0842 16.8188 10.3419 15.8964 10.3419C14.974 10.3419 14.2263 11.0842 14.2263 11.9998C14.2263 12.9154 14.974 13.6577 15.8964 13.6577Z",fill:"white"})))))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_graduating_year"},"Graduating year:")),m.exports.createElement("span",null,m.exports.createElement("select",{...r("graduating_year"),className:"browser-default",id:"id_graduating_year"},m.exports.createElement("option",{value:""},"Does not apply"),m.exports.createElement("option",{value:"2023"},"2023"),m.exports.createElement("option",{value:"2024"},"2024"),m.exports.createElement("option",{value:"2025"},"2025"),m.exports.createElement("option",{value:"2026"},"2026")))),m.exports.createElement("div",{style:{display:"flex",alignItems:"center",gap:"3px"}},m.exports.createElement("button",{type:"submit",className:"btn"},"Submit"),m.exports.createElement(rU,{to:`/user/${n.id}`,className:"btn",role:"button","aria-pressed":"true"},"Cancel")))))},hse=()=>(Si(),m.exports.useEffect(()=>{rG.AutoInit()}),m.exports.createElement("div",{className:"page"},m.exports.createElement(w7,null),m.exports.createElement("div",{className:"router-outlet"},m.exports.createElement(J9,null,m.exports.createElement(Li,{path:"/",element:m.exports.createElement(C7,null)}),m.exports.createElement(Li,{path:"/announcements",element:m.exports.createElement(u8,null)}),m.exports.createElement(Li,{path:"/announcement/:id",element:m.exports.createElement(kY,null)}),m.exports.createElement(Li,{path:"/calendar",element:m.exports.createElement(KW,null)}),m.exports.createElement(Li,{path:"/clubs",element:m.exports.createElement(v8,null)}),m.exports.createElement(Li,{path:"/club/:id",element:m.exports.createElement(EY,null)}),m.exports.createElement(Li,{path:"/club/edit/:id",element:m.exports.createElement(CY,null)}),m.exports.createElement(Li,{path:"/blog",element:m.exports.createElement(iG,null)}),m.exports.createElement(Li,{path:"/blog/:id",element:m.exports.createElement(SY,null)}),m.exports.createElement(Li,{path:"/about",element:m.exports.createElement(uI,null)},m.exports.createElement(Li,{path:":page",element:m.exports.createElement(uI,null)})),m.exports.createElement(Li,{path:"/map",element:m.exports.createElement(lse,null)}),m.exports.createElement(Li,{path:"/accounts/login",element:m.exports.createElement(tG,null)}),m.exports.createElement(Li,{path:"/accounts/signup",element:m.exports.createElement(nG,null)}),m.exports.createElement(Li,{path:"/accounts/logout",element:m.exports.createElement(TY,null)}),m.exports.createElement(Li,{path:"/timetable",element:m.exports.createElement(Kie,null)}),m.exports.createElement(Li,{path:"/user/:userID",element:m.exports.createElement($I,null,m.exports.createElement(use,null))}),m.exports.createElement(Li,{path:"/accounts/profile/update",element:m.exports.createElement($I,null,m.exports.createElement(cse,null))}),m.exports.createElement(Li,{path:"*",element:m.exports.createElement(wY,null)}))),m.exports.createElement(E7,null))),dse=()=>m.exports.createElement(tU,null,m.exports.createElement(b7,null,m.exports.createElement(hse,null))),pse=t3(document.getElementById("root"));pse.render(m.exports.createElement(dse,null));
