function W6(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const G6=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerpolicy&&(u.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?u.credentials="include":a.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}};G6();var $o=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function q6(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var m={exports:{}},cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv=Symbol.for("react.element"),Z6=Symbol.for("react.portal"),X6=Symbol.for("react.fragment"),K6=Symbol.for("react.strict_mode"),Y6=Symbol.for("react.profiler"),J6=Symbol.for("react.provider"),Q6=Symbol.for("react.context"),e9=Symbol.for("react.forward_ref"),t9=Symbol.for("react.suspense"),n9=Symbol.for("react.memo"),r9=Symbol.for("react.lazy"),yM=Symbol.iterator;function i9(e){return e===null||typeof e!="object"?null:(e=yM&&e[yM]||e["@@iterator"],typeof e=="function"?e:null)}var sL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lL=Object.assign,cL={};function Kp(e,t,n){this.props=e,this.context=t,this.refs=cL,this.updater=n||sL}Kp.prototype.isReactComponent={};Kp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uL(){}uL.prototype=Kp.prototype;function vS(e,t,n){this.props=e,this.context=t,this.refs=cL,this.updater=n||sL}var yS=vS.prototype=new uL;yS.constructor=vS;lL(yS,Kp.prototype);yS.isPureReactComponent=!0;var _M=Array.isArray,dL=Object.prototype.hasOwnProperty,_S={current:null},hL={key:!0,ref:!0,__self:!0,__source:!0};function pL(e,t,n){var r,a={},u=null,h=null;if(t!=null)for(r in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(u=""+t.key),t)dL.call(t,r)&&!hL.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var g=Array(o),b=0;b<o;b++)g[b]=arguments[b+2];a.children=g}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:rv,type:e,key:u,ref:h,props:a,_owner:_S.current}}function o9(e,t){return{$$typeof:rv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xS(e){return typeof e=="object"&&e!==null&&e.$$typeof===rv}function a9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xM=/\/+/g;function tw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?a9(""+e.key):t.toString(36)}function z_(e,t,n,r,a){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case rv:case Z6:h=!0}}if(h)return h=e,a=a(h),e=r===""?"."+tw(h,0):r,_M(a)?(n="",e!=null&&(n=e.replace(xM,"$&/")+"/"),z_(a,t,n,"",function(b){return b})):a!=null&&(xS(a)&&(a=o9(a,n+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(xM,"$&/")+"/")+e)),t.push(a)),1;if(h=0,r=r===""?".":r+":",_M(e))for(var o=0;o<e.length;o++){u=e[o];var g=r+tw(u,o);h+=z_(u,t,n,g,a)}else if(g=i9(e),typeof g=="function")for(e=g.call(e),o=0;!(u=e.next()).done;)u=u.value,g=r+tw(u,o++),h+=z_(u,t,n,g,a);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function s_(e,t,n){if(e==null)return e;var r=[],a=0;return z_(e,r,"","",function(u){return t.call(n,u,a++)}),r}function s9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ea={current:null},B_={transition:null},l9={ReactCurrentDispatcher:ea,ReactCurrentBatchConfig:B_,ReactCurrentOwner:_S};cr.Children={map:s_,forEach:function(e,t,n){s_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return s_(e,function(){t++}),t},toArray:function(e){return s_(e,function(t){return t})||[]},only:function(e){if(!xS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};cr.Component=Kp;cr.Fragment=X6;cr.Profiler=Y6;cr.PureComponent=vS;cr.StrictMode=K6;cr.Suspense=t9;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l9;cr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=lL({},e.props),a=e.key,u=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,h=_S.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(g in t)dL.call(t,g)&&!hL.hasOwnProperty(g)&&(r[g]=t[g]===void 0&&o!==void 0?o[g]:t[g])}var g=arguments.length-2;if(g===1)r.children=n;else if(1<g){o=Array(g);for(var b=0;b<g;b++)o[b]=arguments[b+2];r.children=o}return{$$typeof:rv,type:e.type,key:a,ref:u,props:r,_owner:h}};cr.createContext=function(e){return e={$$typeof:Q6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:J6,_context:e},e.Consumer=e};cr.createElement=pL;cr.createFactory=function(e){var t=pL.bind(null,e);return t.type=e,t};cr.createRef=function(){return{current:null}};cr.forwardRef=function(e){return{$$typeof:e9,render:e}};cr.isValidElement=xS;cr.lazy=function(e){return{$$typeof:r9,_payload:{_status:-1,_result:e},_init:s9}};cr.memo=function(e,t){return{$$typeof:n9,type:e,compare:t===void 0?null:t}};cr.startTransition=function(e){var t=B_.transition;B_.transition={};try{e()}finally{B_.transition=t}};cr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};cr.useCallback=function(e,t){return ea.current.useCallback(e,t)};cr.useContext=function(e){return ea.current.useContext(e)};cr.useDebugValue=function(){};cr.useDeferredValue=function(e){return ea.current.useDeferredValue(e)};cr.useEffect=function(e,t){return ea.current.useEffect(e,t)};cr.useId=function(){return ea.current.useId()};cr.useImperativeHandle=function(e,t,n){return ea.current.useImperativeHandle(e,t,n)};cr.useInsertionEffect=function(e,t){return ea.current.useInsertionEffect(e,t)};cr.useLayoutEffect=function(e,t){return ea.current.useLayoutEffect(e,t)};cr.useMemo=function(e,t){return ea.current.useMemo(e,t)};cr.useReducer=function(e,t,n){return ea.current.useReducer(e,t,n)};cr.useRef=function(e){return ea.current.useRef(e)};cr.useState=function(e){return ea.current.useState(e)};cr.useSyncExternalStore=function(e,t,n){return ea.current.useSyncExternalStore(e,t,n)};cr.useTransition=function(){return ea.current.useTransition()};cr.version="18.2.0";m.exports=cr;var ot=m.exports,kE=W6({__proto__:null,default:ot},[m.exports]),Zc={exports:{}},za={},fL={exports:{}},mL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ze,ct){var nt=Ze.length;Ze.push(ct);e:for(;0<nt;){var xe=nt-1>>>1,be=Ze[xe];if(0<a(be,ct))Ze[xe]=ct,Ze[nt]=be,nt=xe;else break e}}function n(Ze){return Ze.length===0?null:Ze[0]}function r(Ze){if(Ze.length===0)return null;var ct=Ze[0],nt=Ze.pop();if(nt!==ct){Ze[0]=nt;e:for(var xe=0,be=Ze.length,on=be>>>1;xe<on;){var Ut=2*(xe+1)-1,ln=Ze[Ut],tn=Ut+1,un=Ze[tn];if(0>a(ln,nt))tn<be&&0>a(un,ln)?(Ze[xe]=un,Ze[tn]=nt,xe=tn):(Ze[xe]=ln,Ze[Ut]=nt,xe=Ut);else if(tn<be&&0>a(un,nt))Ze[xe]=un,Ze[tn]=nt,xe=tn;else break e}}return ct}function a(Ze,ct){var nt=Ze.sortIndex-ct.sortIndex;return nt!==0?nt:Ze.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var h=Date,o=h.now();e.unstable_now=function(){return h.now()-o}}var g=[],b=[],A=1,D=null,z=3,F=!1,N=!1,T=!1,H=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(Ze){for(var ct=n(b);ct!==null;){if(ct.callback===null)r(b);else if(ct.startTime<=Ze)r(b),ct.sortIndex=ct.expirationTime,t(g,ct);else break;ct=n(b)}}function O(Ze){if(T=!1,B(Ze),!N)if(n(g)!==null)N=!0,Ee(S);else{var ct=n(b);ct!==null&&pt(O,ct.startTime-Ze)}}function S(Ze,ct){N=!1,T&&(T=!1,j(Y),Y=-1),F=!0;var nt=z;try{for(B(ct),D=n(g);D!==null&&(!(D.expirationTime>ct)||Ze&&!oe());){var xe=D.callback;if(typeof xe=="function"){D.callback=null,z=D.priorityLevel;var be=xe(D.expirationTime<=ct);ct=e.unstable_now(),typeof be=="function"?D.callback=be:D===n(g)&&r(g),B(ct)}else r(g);D=n(g)}if(D!==null)var on=!0;else{var Ut=n(b);Ut!==null&&pt(O,Ut.startTime-ct),on=!1}return on}finally{D=null,z=nt,F=!1}}var w=!1,P=null,Y=-1,ne=5,ae=-1;function oe(){return!(e.unstable_now()-ae<ne)}function fe(){if(P!==null){var Ze=e.unstable_now();ae=Ze;var ct=!0;try{ct=P(!0,Ze)}finally{ct?Re():(w=!1,P=null)}}else w=!1}var Re;if(typeof W=="function")Re=function(){W(fe)};else if(typeof MessageChannel!="undefined"){var Be=new MessageChannel,Oe=Be.port2;Be.port1.onmessage=fe,Re=function(){Oe.postMessage(null)}}else Re=function(){H(fe,0)};function Ee(Ze){P=Ze,w||(w=!0,Re())}function pt(Ze,ct){Y=H(function(){Ze(e.unstable_now())},ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ze){Ze.callback=null},e.unstable_continueExecution=function(){N||F||(N=!0,Ee(S))},e.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<Ze?Math.floor(1e3/Ze):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return n(g)},e.unstable_next=function(Ze){switch(z){case 1:case 2:case 3:var ct=3;break;default:ct=z}var nt=z;z=ct;try{return Ze()}finally{z=nt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ze,ct){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var nt=z;z=Ze;try{return ct()}finally{z=nt}},e.unstable_scheduleCallback=function(Ze,ct,nt){var xe=e.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?xe+nt:xe):nt=xe,Ze){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=nt+be,Ze={id:A++,callback:ct,priorityLevel:Ze,startTime:nt,expirationTime:be,sortIndex:-1},nt>xe?(Ze.sortIndex=nt,t(b,Ze),n(g)===null&&Ze===n(b)&&(T?(j(Y),Y=-1):T=!0,pt(O,nt-xe))):(Ze.sortIndex=be,t(g,Ze),N||F||(N=!0,Ee(S))),Ze},e.unstable_shouldYield=oe,e.unstable_wrapCallback=function(Ze){var ct=z;return function(){var nt=z;z=ct;try{return Ze.apply(this,arguments)}finally{z=nt}}}})(mL);fL.exports=mL;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gL=m.exports,Oa=fL.exports;function qt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vL=new Set,Tg={};function Ud(e,t){Op(e,t),Op(e+"Capture",t)}function Op(e,t){for(Tg[e]=t,e=0;e<t.length;e++)vL.add(t[e])}var Hl=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),TE=Object.prototype.hasOwnProperty,c9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bM={},wM={};function u9(e){return TE.call(wM,e)?!0:TE.call(bM,e)?!1:c9.test(e)?wM[e]=!0:(bM[e]=!0,!1)}function d9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function h9(e,t,n,r){if(t===null||typeof t=="undefined"||d9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ta(e,t,n,r,a,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var To={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){To[e]=new ta(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];To[t]=new ta(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){To[e]=new ta(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){To[e]=new ta(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){To[e]=new ta(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){To[e]=new ta(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){To[e]=new ta(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){To[e]=new ta(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){To[e]=new ta(e,5,!1,e.toLowerCase(),null,!1,!1)});var bS=/[\-:]([a-z])/g;function wS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bS,wS);To[t]=new ta(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bS,wS);To[t]=new ta(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bS,wS);To[t]=new ta(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){To[e]=new ta(e,1,!1,e.toLowerCase(),null,!1,!1)});To.xlinkHref=new ta("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){To[e]=new ta(e,1,!1,e.toLowerCase(),null,!0,!0)});function ES(e,t,n,r){var a=To.hasOwnProperty(t)?To[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(h9(t,n,a,r)&&(n=null),r||a===null?u9(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Jl=gL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l_=Symbol.for("react.element"),op=Symbol.for("react.portal"),ap=Symbol.for("react.fragment"),CS=Symbol.for("react.strict_mode"),AE=Symbol.for("react.profiler"),yL=Symbol.for("react.provider"),_L=Symbol.for("react.context"),SS=Symbol.for("react.forward_ref"),ME=Symbol.for("react.suspense"),IE=Symbol.for("react.suspense_list"),kS=Symbol.for("react.memo"),Nc=Symbol.for("react.lazy"),xL=Symbol.for("react.offscreen"),EM=Symbol.iterator;function Om(e){return e===null||typeof e!="object"?null:(e=EM&&e[EM]||e["@@iterator"],typeof e=="function"?e:null)}var Mi=Object.assign,nw;function Qm(e){if(nw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);nw=t&&t[1]||""}return`
`+nw+e}var rw=!1;function iw(e,t){if(!e||rw)return"";rw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(b){var r=b}Reflect.construct(e,[],t)}else{try{t.call()}catch(b){r=b}e.call(t.prototype)}else{try{throw Error()}catch(b){r=b}e()}}catch(b){if(b&&r&&typeof b.stack=="string"){for(var a=b.stack.split(`
`),u=r.stack.split(`
`),h=a.length-1,o=u.length-1;1<=h&&0<=o&&a[h]!==u[o];)o--;for(;1<=h&&0<=o;h--,o--)if(a[h]!==u[o]){if(h!==1||o!==1)do if(h--,o--,0>o||a[h]!==u[o]){var g=`
`+a[h].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=h&&0<=o);break}}}finally{rw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Qm(e):""}function p9(e){switch(e.tag){case 5:return Qm(e.type);case 16:return Qm("Lazy");case 13:return Qm("Suspense");case 19:return Qm("SuspenseList");case 0:case 2:case 15:return e=iw(e.type,!1),e;case 11:return e=iw(e.type.render,!1),e;case 1:return e=iw(e.type,!0),e;default:return""}}function PE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ap:return"Fragment";case op:return"Portal";case AE:return"Profiler";case CS:return"StrictMode";case ME:return"Suspense";case IE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _L:return(e.displayName||"Context")+".Consumer";case yL:return(e._context.displayName||"Context")+".Provider";case SS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kS:return t=e.displayName||null,t!==null?t:PE(e.type)||"Memo";case Nc:t=e._payload,e=e._init;try{return PE(e(t))}catch{}}return null}function f9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PE(t);case 8:return t===CS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function iu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function m9(e){var t=bL(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(h){r=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function c_(e){e._valueTracker||(e._valueTracker=m9(e))}function wL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bL(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function cx(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function DE(e,t){var n=t.checked;return Mi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function CM(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=iu(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function EL(e,t){t=t.checked,t!=null&&ES(e,"checked",t,!1)}function RE(e,t){EL(e,t);var n=iu(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?LE(e,t.type,n):t.hasOwnProperty("defaultValue")&&LE(e,t.type,iu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function SM(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function LE(e,t,n){(t!=="number"||cx(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var eg=Array.isArray;function bp(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+iu(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function OE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(qt(91));return Mi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kM(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(qt(92));if(eg(n)){if(1<n.length)throw Error(qt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:iu(n)}}function CL(e,t){var n=iu(t.value),r=iu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function TM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function SL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var u_,kL=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(u_=u_||document.createElement("div"),u_.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=u_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ag(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ig={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g9=["Webkit","ms","Moz","O"];Object.keys(ig).forEach(function(e){g9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ig[t]=ig[e]})});function TL(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ig.hasOwnProperty(e)&&ig[e]?(""+t).trim():t+"px"}function AL(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=TL(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var v9=Mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function BE(e,t){if(t){if(v9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(qt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(qt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(qt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(qt(62))}}function FE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NE=null;function TS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var UE=null,wp=null,Ep=null;function AM(e){if(e=av(e)){if(typeof UE!="function")throw Error(qt(280));var t=e.stateNode;t&&(t=v0(t),UE(e.stateNode,e.type,t))}}function ML(e){wp?Ep?Ep.push(e):Ep=[e]:wp=e}function IL(){if(wp){var e=wp,t=Ep;if(Ep=wp=null,AM(e),t)for(e=0;e<t.length;e++)AM(t[e])}}function PL(e,t){return e(t)}function DL(){}var ow=!1;function RL(e,t,n){if(ow)return e(t,n);ow=!0;try{return PL(e,t,n)}finally{ow=!1,(wp!==null||Ep!==null)&&(DL(),IL())}}function Mg(e,t){var n=e.stateNode;if(n===null)return null;var r=v0(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(qt(231,t,typeof n));return n}var jE=!1;if(Hl)try{var zm={};Object.defineProperty(zm,"passive",{get:function(){jE=!0}}),window.addEventListener("test",zm,zm),window.removeEventListener("test",zm,zm)}catch{jE=!1}function y9(e,t,n,r,a,u,h,o,g){var b=Array.prototype.slice.call(arguments,3);try{t.apply(n,b)}catch(A){this.onError(A)}}var og=!1,ux=null,dx=!1,$E=null,_9={onError:function(e){og=!0,ux=e}};function x9(e,t,n,r,a,u,h,o,g){og=!1,ux=null,y9.apply(_9,arguments)}function b9(e,t,n,r,a,u,h,o,g){if(x9.apply(this,arguments),og){if(og){var b=ux;og=!1,ux=null}else throw Error(qt(198));dx||(dx=!0,$E=b)}}function jd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function LL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function MM(e){if(jd(e)!==e)throw Error(qt(188))}function w9(e){var t=e.alternate;if(!t){if(t=jd(e),t===null)throw Error(qt(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var u=a.alternate;if(u===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===n)return MM(a),e;if(u===r)return MM(a),t;u=u.sibling}throw Error(qt(188))}if(n.return!==r.return)n=a,r=u;else{for(var h=!1,o=a.child;o;){if(o===n){h=!0,n=a,r=u;break}if(o===r){h=!0,r=a,n=u;break}o=o.sibling}if(!h){for(o=u.child;o;){if(o===n){h=!0,n=u,r=a;break}if(o===r){h=!0,r=u,n=a;break}o=o.sibling}if(!h)throw Error(qt(189))}}if(n.alternate!==r)throw Error(qt(190))}if(n.tag!==3)throw Error(qt(188));return n.stateNode.current===n?e:t}function OL(e){return e=w9(e),e!==null?zL(e):null}function zL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zL(e);if(t!==null)return t;e=e.sibling}return null}var BL=Oa.unstable_scheduleCallback,IM=Oa.unstable_cancelCallback,E9=Oa.unstable_shouldYield,C9=Oa.unstable_requestPaint,Vi=Oa.unstable_now,S9=Oa.unstable_getCurrentPriorityLevel,AS=Oa.unstable_ImmediatePriority,FL=Oa.unstable_UserBlockingPriority,hx=Oa.unstable_NormalPriority,k9=Oa.unstable_LowPriority,NL=Oa.unstable_IdlePriority,p0=null,ul=null;function T9(e){if(ul&&typeof ul.onCommitFiberRoot=="function")try{ul.onCommitFiberRoot(p0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ps=Math.clz32?Math.clz32:I9,A9=Math.log,M9=Math.LN2;function I9(e){return e>>>=0,e===0?32:31-(A9(e)/M9|0)|0}var d_=64,h_=4194304;function tg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function px(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,u=e.pingedLanes,h=n&268435455;if(h!==0){var o=h&~a;o!==0?r=tg(o):(u&=h,u!==0&&(r=tg(u)))}else h=n&~a,h!==0?r=tg(h):u!==0&&(r=tg(u));if(r===0)return 0;if(t!==0&&t!==r&&(t&a)===0&&(a=r&-r,u=t&-t,a>=u||a===16&&(u&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ps(t),a=1<<n,r|=e[n],t&=~a;return r}function P9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D9(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-Ps(u),o=1<<h,g=a[h];g===-1?((o&n)===0||(o&r)!==0)&&(a[h]=P9(o,t)):g<=t&&(e.expiredLanes|=o),u&=~o}}function VE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function UL(){var e=d_;return d_<<=1,(d_&4194240)===0&&(d_=64),e}function aw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function iv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ps(t),e[t]=n}function R9(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ps(n),u=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~u}}function MS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ps(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Zr=0;function jL(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var $L,IS,VL,HL,WL,HE=!1,p_=[],Xc=null,Kc=null,Yc=null,Ig=new Map,Pg=new Map,jc=[],L9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PM(e,t){switch(e){case"focusin":case"focusout":Xc=null;break;case"dragenter":case"dragleave":Kc=null;break;case"mouseover":case"mouseout":Yc=null;break;case"pointerover":case"pointerout":Ig.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pg.delete(t.pointerId)}}function Bm(e,t,n,r,a,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[a]},t!==null&&(t=av(t),t!==null&&IS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function O9(e,t,n,r,a){switch(t){case"focusin":return Xc=Bm(Xc,e,t,n,r,a),!0;case"dragenter":return Kc=Bm(Kc,e,t,n,r,a),!0;case"mouseover":return Yc=Bm(Yc,e,t,n,r,a),!0;case"pointerover":var u=a.pointerId;return Ig.set(u,Bm(Ig.get(u)||null,e,t,n,r,a)),!0;case"gotpointercapture":return u=a.pointerId,Pg.set(u,Bm(Pg.get(u)||null,e,t,n,r,a)),!0}return!1}function GL(e){var t=yd(e.target);if(t!==null){var n=jd(t);if(n!==null){if(t=n.tag,t===13){if(t=LL(n),t!==null){e.blockedOn=t,WL(e.priority,function(){VL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function F_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=WE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);NE=r,n.target.dispatchEvent(r),NE=null}else return t=av(n),t!==null&&IS(t),e.blockedOn=n,!1;t.shift()}return!0}function DM(e,t,n){F_(e)&&n.delete(t)}function z9(){HE=!1,Xc!==null&&F_(Xc)&&(Xc=null),Kc!==null&&F_(Kc)&&(Kc=null),Yc!==null&&F_(Yc)&&(Yc=null),Ig.forEach(DM),Pg.forEach(DM)}function Fm(e,t){e.blockedOn===t&&(e.blockedOn=null,HE||(HE=!0,Oa.unstable_scheduleCallback(Oa.unstable_NormalPriority,z9)))}function Dg(e){function t(a){return Fm(a,e)}if(0<p_.length){Fm(p_[0],e);for(var n=1;n<p_.length;n++){var r=p_[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Xc!==null&&Fm(Xc,e),Kc!==null&&Fm(Kc,e),Yc!==null&&Fm(Yc,e),Ig.forEach(t),Pg.forEach(t),n=0;n<jc.length;n++)r=jc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<jc.length&&(n=jc[0],n.blockedOn===null);)GL(n),n.blockedOn===null&&jc.shift()}var Cp=Jl.ReactCurrentBatchConfig,fx=!0;function B9(e,t,n,r){var a=Zr,u=Cp.transition;Cp.transition=null;try{Zr=1,PS(e,t,n,r)}finally{Zr=a,Cp.transition=u}}function F9(e,t,n,r){var a=Zr,u=Cp.transition;Cp.transition=null;try{Zr=4,PS(e,t,n,r)}finally{Zr=a,Cp.transition=u}}function PS(e,t,n,r){if(fx){var a=WE(e,t,n,r);if(a===null)gw(e,t,r,mx,n),PM(e,r);else if(O9(a,e,t,n,r))r.stopPropagation();else if(PM(e,r),t&4&&-1<L9.indexOf(e)){for(;a!==null;){var u=av(a);if(u!==null&&$L(u),u=WE(e,t,n,r),u===null&&gw(e,t,r,mx,n),u===a)break;a=u}a!==null&&r.stopPropagation()}else gw(e,t,r,null,n)}}var mx=null;function WE(e,t,n,r){if(mx=null,e=TS(r),e=yd(e),e!==null)if(t=jd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=LL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mx=e,null}function qL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S9()){case AS:return 1;case FL:return 4;case hx:case k9:return 16;case NL:return 536870912;default:return 16}default:return 16}}var Hc=null,DS=null,N_=null;function ZL(){if(N_)return N_;var e,t=DS,n=t.length,r,a="value"in Hc?Hc.value:Hc.textContent,u=a.length;for(e=0;e<n&&t[e]===a[e];e++);var h=n-e;for(r=1;r<=h&&t[n-r]===a[u-r];r++);return N_=a.slice(e,1<r?1-r:void 0)}function U_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function f_(){return!0}function RM(){return!1}function Ba(e){function t(n,r,a,u,h){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?f_:RM,this.isPropagationStopped=RM,this}return Mi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=f_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=f_)},persist:function(){},isPersistent:f_}),t}var Yp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RS=Ba(Yp),ov=Mi({},Yp,{view:0,detail:0}),N9=Ba(ov),sw,lw,Nm,f0=Mi({},ov,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:LS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nm&&(Nm&&e.type==="mousemove"?(sw=e.screenX-Nm.screenX,lw=e.screenY-Nm.screenY):lw=sw=0,Nm=e),sw)},movementY:function(e){return"movementY"in e?e.movementY:lw}}),LM=Ba(f0),U9=Mi({},f0,{dataTransfer:0}),j9=Ba(U9),$9=Mi({},ov,{relatedTarget:0}),cw=Ba($9),V9=Mi({},Yp,{animationName:0,elapsedTime:0,pseudoElement:0}),H9=Ba(V9),W9=Mi({},Yp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),G9=Ba(W9),q9=Mi({},Yp,{data:0}),OM=Ba(q9),Z9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=K9[e])?!!t[e]:!1}function LS(){return Y9}var J9=Mi({},ov,{key:function(e){if(e.key){var t=Z9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=U_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?X9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:LS,charCode:function(e){return e.type==="keypress"?U_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?U_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Q9=Ba(J9),eU=Mi({},f0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zM=Ba(eU),tU=Mi({},ov,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:LS}),nU=Ba(tU),rU=Mi({},Yp,{propertyName:0,elapsedTime:0,pseudoElement:0}),iU=Ba(rU),oU=Mi({},f0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aU=Ba(oU),sU=[9,13,27,32],OS=Hl&&"CompositionEvent"in window,ag=null;Hl&&"documentMode"in document&&(ag=document.documentMode);var lU=Hl&&"TextEvent"in window&&!ag,XL=Hl&&(!OS||ag&&8<ag&&11>=ag),BM=String.fromCharCode(32),FM=!1;function KL(e,t){switch(e){case"keyup":return sU.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sp=!1;function cU(e,t){switch(e){case"compositionend":return YL(t);case"keypress":return t.which!==32?null:(FM=!0,BM);case"textInput":return e=t.data,e===BM&&FM?null:e;default:return null}}function uU(e,t){if(sp)return e==="compositionend"||!OS&&KL(e,t)?(e=ZL(),N_=DS=Hc=null,sp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return XL&&t.locale!=="ko"?null:t.data;default:return null}}var dU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!dU[e.type]:t==="textarea"}function JL(e,t,n,r){ML(r),t=gx(t,"onChange"),0<t.length&&(n=new RS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var sg=null,Rg=null;function hU(e){cO(e,0)}function m0(e){var t=up(e);if(wL(t))return e}function pU(e,t){if(e==="change")return t}var QL=!1;if(Hl){var uw;if(Hl){var dw="oninput"in document;if(!dw){var UM=document.createElement("div");UM.setAttribute("oninput","return;"),dw=typeof UM.oninput=="function"}uw=dw}else uw=!1;QL=uw&&(!document.documentMode||9<document.documentMode)}function jM(){sg&&(sg.detachEvent("onpropertychange",eO),Rg=sg=null)}function eO(e){if(e.propertyName==="value"&&m0(Rg)){var t=[];JL(t,Rg,e,TS(e)),RL(hU,t)}}function fU(e,t,n){e==="focusin"?(jM(),sg=t,Rg=n,sg.attachEvent("onpropertychange",eO)):e==="focusout"&&jM()}function mU(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return m0(Rg)}function gU(e,t){if(e==="click")return m0(t)}function vU(e,t){if(e==="input"||e==="change")return m0(t)}function yU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Os=typeof Object.is=="function"?Object.is:yU;function Lg(e,t){if(Os(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!TE.call(t,a)||!Os(e[a],t[a]))return!1}return!0}function $M(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function VM(e,t){var n=$M(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$M(n)}}function tO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nO(){for(var e=window,t=cx();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=cx(e.document)}return t}function zS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _U(e){var t=nO(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tO(n.ownerDocument.documentElement,n)){if(r!==null&&zS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,u=Math.min(r.start,a);r=r.end===void 0?u:Math.min(r.end,a),!e.extend&&u>r&&(a=r,r=u,u=a),a=VM(n,u);var h=VM(n,r);a&&h&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),u>r?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var xU=Hl&&"documentMode"in document&&11>=document.documentMode,lp=null,GE=null,lg=null,qE=!1;function HM(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qE||lp==null||lp!==cx(r)||(r=lp,"selectionStart"in r&&zS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lg&&Lg(lg,r)||(lg=r,r=gx(GE,"onSelect"),0<r.length&&(t=new RS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=lp)))}function m_(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cp={animationend:m_("Animation","AnimationEnd"),animationiteration:m_("Animation","AnimationIteration"),animationstart:m_("Animation","AnimationStart"),transitionend:m_("Transition","TransitionEnd")},hw={},rO={};Hl&&(rO=document.createElement("div").style,"AnimationEvent"in window||(delete cp.animationend.animation,delete cp.animationiteration.animation,delete cp.animationstart.animation),"TransitionEvent"in window||delete cp.transitionend.transition);function g0(e){if(hw[e])return hw[e];if(!cp[e])return e;var t=cp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rO)return hw[e]=t[n];return e}var iO=g0("animationend"),oO=g0("animationiteration"),aO=g0("animationstart"),sO=g0("transitionend"),lO=new Map,WM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uu(e,t){lO.set(e,t),Ud(t,[e])}for(var pw=0;pw<WM.length;pw++){var fw=WM[pw],bU=fw.toLowerCase(),wU=fw[0].toUpperCase()+fw.slice(1);uu(bU,"on"+wU)}uu(iO,"onAnimationEnd");uu(oO,"onAnimationIteration");uu(aO,"onAnimationStart");uu("dblclick","onDoubleClick");uu("focusin","onFocus");uu("focusout","onBlur");uu(sO,"onTransitionEnd");Op("onMouseEnter",["mouseout","mouseover"]);Op("onMouseLeave",["mouseout","mouseover"]);Op("onPointerEnter",["pointerout","pointerover"]);Op("onPointerLeave",["pointerout","pointerover"]);Ud("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ud("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ud("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ud("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ud("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ud("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ng="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EU=new Set("cancel close invalid load scroll toggle".split(" ").concat(ng));function GM(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,b9(r,t,void 0,e),e.currentTarget=null}function cO(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var h=r.length-1;0<=h;h--){var o=r[h],g=o.instance,b=o.currentTarget;if(o=o.listener,g!==u&&a.isPropagationStopped())break e;GM(a,o,b),u=g}else for(h=0;h<r.length;h++){if(o=r[h],g=o.instance,b=o.currentTarget,o=o.listener,g!==u&&a.isPropagationStopped())break e;GM(a,o,b),u=g}}}if(dx)throw e=$E,dx=!1,$E=null,e}function ui(e,t){var n=t[JE];n===void 0&&(n=t[JE]=new Set);var r=e+"__bubble";n.has(r)||(uO(t,e,2,!1),n.add(r))}function mw(e,t,n){var r=0;t&&(r|=4),uO(n,e,r,t)}var g_="_reactListening"+Math.random().toString(36).slice(2);function Og(e){if(!e[g_]){e[g_]=!0,vL.forEach(function(n){n!=="selectionchange"&&(EU.has(n)||mw(n,!1,e),mw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[g_]||(t[g_]=!0,mw("selectionchange",!1,t))}}function uO(e,t,n,r){switch(qL(t)){case 1:var a=B9;break;case 4:a=F9;break;default:a=PS}n=a.bind(null,t,n,e),a=void 0,!jE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function gw(e,t,n,r,a){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(h===4)for(h=r.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;h=h.return}for(;o!==null;){if(h=yd(o),h===null)return;if(g=h.tag,g===5||g===6){r=u=h;continue e}o=o.parentNode}}r=r.return}RL(function(){var b=u,A=TS(n),D=[];e:{var z=lO.get(e);if(z!==void 0){var F=RS,N=e;switch(e){case"keypress":if(U_(n)===0)break e;case"keydown":case"keyup":F=Q9;break;case"focusin":N="focus",F=cw;break;case"focusout":N="blur",F=cw;break;case"beforeblur":case"afterblur":F=cw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=LM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=j9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=nU;break;case iO:case oO:case aO:F=H9;break;case sO:F=iU;break;case"scroll":F=N9;break;case"wheel":F=aU;break;case"copy":case"cut":case"paste":F=G9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=zM}var T=(t&4)!==0,H=!T&&e==="scroll",j=T?z!==null?z+"Capture":null:z;T=[];for(var W=b,B;W!==null;){B=W;var O=B.stateNode;if(B.tag===5&&O!==null&&(B=O,j!==null&&(O=Mg(W,j),O!=null&&T.push(zg(W,O,B)))),H)break;W=W.return}0<T.length&&(z=new F(z,N,null,n,A),D.push({event:z,listeners:T}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",z&&n!==NE&&(N=n.relatedTarget||n.fromElement)&&(yd(N)||N[Wl]))break e;if((F||z)&&(z=A.window===A?A:(z=A.ownerDocument)?z.defaultView||z.parentWindow:window,F?(N=n.relatedTarget||n.toElement,F=b,N=N?yd(N):null,N!==null&&(H=jd(N),N!==H||N.tag!==5&&N.tag!==6)&&(N=null)):(F=null,N=b),F!==N)){if(T=LM,O="onMouseLeave",j="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(T=zM,O="onPointerLeave",j="onPointerEnter",W="pointer"),H=F==null?z:up(F),B=N==null?z:up(N),z=new T(O,W+"leave",F,n,A),z.target=H,z.relatedTarget=B,O=null,yd(A)===b&&(T=new T(j,W+"enter",N,n,A),T.target=B,T.relatedTarget=H,O=T),H=O,F&&N)t:{for(T=F,j=N,W=0,B=T;B;B=Zh(B))W++;for(B=0,O=j;O;O=Zh(O))B++;for(;0<W-B;)T=Zh(T),W--;for(;0<B-W;)j=Zh(j),B--;for(;W--;){if(T===j||j!==null&&T===j.alternate)break t;T=Zh(T),j=Zh(j)}T=null}else T=null;F!==null&&qM(D,z,F,T,!1),N!==null&&H!==null&&qM(D,H,N,T,!0)}}e:{if(z=b?up(b):window,F=z.nodeName&&z.nodeName.toLowerCase(),F==="select"||F==="input"&&z.type==="file")var S=pU;else if(NM(z))if(QL)S=vU;else{S=mU;var w=fU}else(F=z.nodeName)&&F.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(S=gU);if(S&&(S=S(e,b))){JL(D,S,n,A);break e}w&&w(e,z,b),e==="focusout"&&(w=z._wrapperState)&&w.controlled&&z.type==="number"&&LE(z,"number",z.value)}switch(w=b?up(b):window,e){case"focusin":(NM(w)||w.contentEditable==="true")&&(lp=w,GE=b,lg=null);break;case"focusout":lg=GE=lp=null;break;case"mousedown":qE=!0;break;case"contextmenu":case"mouseup":case"dragend":qE=!1,HM(D,n,A);break;case"selectionchange":if(xU)break;case"keydown":case"keyup":HM(D,n,A)}var P;if(OS)e:{switch(e){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else sp?KL(e,n)&&(Y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Y="onCompositionStart");Y&&(XL&&n.locale!=="ko"&&(sp||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&sp&&(P=ZL()):(Hc=A,DS="value"in Hc?Hc.value:Hc.textContent,sp=!0)),w=gx(b,Y),0<w.length&&(Y=new OM(Y,e,null,n,A),D.push({event:Y,listeners:w}),P?Y.data=P:(P=YL(n),P!==null&&(Y.data=P)))),(P=lU?cU(e,n):uU(e,n))&&(b=gx(b,"onBeforeInput"),0<b.length&&(A=new OM("onBeforeInput","beforeinput",null,n,A),D.push({event:A,listeners:b}),A.data=P))}cO(D,t)})}function zg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gx(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=Mg(e,n),u!=null&&r.unshift(zg(e,u,a)),u=Mg(e,t),u!=null&&r.push(zg(e,u,a))),e=e.return}return r}function Zh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qM(e,t,n,r,a){for(var u=t._reactName,h=[];n!==null&&n!==r;){var o=n,g=o.alternate,b=o.stateNode;if(g!==null&&g===r)break;o.tag===5&&b!==null&&(o=b,a?(g=Mg(n,u),g!=null&&h.unshift(zg(n,g,o))):a||(g=Mg(n,u),g!=null&&h.push(zg(n,g,o)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var CU=/\r\n?/g,SU=/\u0000|\uFFFD/g;function ZM(e){return(typeof e=="string"?e:""+e).replace(CU,`
`).replace(SU,"")}function v_(e,t,n){if(t=ZM(t),ZM(e)!==t&&n)throw Error(qt(425))}function vx(){}var ZE=null,XE=null;function KE(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var YE=typeof setTimeout=="function"?setTimeout:void 0,kU=typeof clearTimeout=="function"?clearTimeout:void 0,XM=typeof Promise=="function"?Promise:void 0,TU=typeof queueMicrotask=="function"?queueMicrotask:typeof XM!="undefined"?function(e){return XM.resolve(null).then(e).catch(AU)}:YE;function AU(e){setTimeout(function(){throw e})}function vw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Dg(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Dg(t)}function Jc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function KM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jp=Math.random().toString(36).slice(2),sl="__reactFiber$"+Jp,Bg="__reactProps$"+Jp,Wl="__reactContainer$"+Jp,JE="__reactEvents$"+Jp,MU="__reactListeners$"+Jp,IU="__reactHandles$"+Jp;function yd(e){var t=e[sl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wl]||n[sl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=KM(e);e!==null;){if(n=e[sl])return n;e=KM(e)}return t}e=n,n=e.parentNode}return null}function av(e){return e=e[sl]||e[Wl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function up(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(qt(33))}function v0(e){return e[Bg]||null}var QE=[],dp=-1;function du(e){return{current:e}}function hi(e){0>dp||(e.current=QE[dp],QE[dp]=null,dp--)}function ii(e,t){dp++,QE[dp]=e.current,e.current=t}var ou={},Ho=du(ou),fa=du(!1),Md=ou;function zp(e,t){var n=e.type.contextTypes;if(!n)return ou;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in n)a[u]=t[u];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ma(e){return e=e.childContextTypes,e!=null}function yx(){hi(fa),hi(Ho)}function YM(e,t,n){if(Ho.current!==ou)throw Error(qt(168));ii(Ho,t),ii(fa,n)}function dO(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(qt(108,f9(e)||"Unknown",a));return Mi({},n,r)}function _x(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ou,Md=Ho.current,ii(Ho,e),ii(fa,fa.current),!0}function JM(e,t,n){var r=e.stateNode;if(!r)throw Error(qt(169));n?(e=dO(e,t,Md),r.__reactInternalMemoizedMergedChildContext=e,hi(fa),hi(Ho),ii(Ho,e)):hi(fa),ii(fa,n)}var zl=null,y0=!1,yw=!1;function hO(e){zl===null?zl=[e]:zl.push(e)}function PU(e){y0=!0,hO(e)}function hu(){if(!yw&&zl!==null){yw=!0;var e=0,t=Zr;try{var n=zl;for(Zr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zl=null,y0=!1}catch(a){throw zl!==null&&(zl=zl.slice(e+1)),BL(AS,hu),a}finally{Zr=t,yw=!1}}return null}var hp=[],pp=0,xx=null,bx=0,Ka=[],Ya=0,Id=null,Fl=1,Nl="";function cd(e,t){hp[pp++]=bx,hp[pp++]=xx,xx=e,bx=t}function pO(e,t,n){Ka[Ya++]=Fl,Ka[Ya++]=Nl,Ka[Ya++]=Id,Id=e;var r=Fl;e=Nl;var a=32-Ps(r)-1;r&=~(1<<a),n+=1;var u=32-Ps(t)+a;if(30<u){var h=a-a%5;u=(r&(1<<h)-1).toString(32),r>>=h,a-=h,Fl=1<<32-Ps(t)+a|n<<a|r,Nl=u+e}else Fl=1<<u|n<<a|r,Nl=e}function BS(e){e.return!==null&&(cd(e,1),pO(e,1,0))}function FS(e){for(;e===xx;)xx=hp[--pp],hp[pp]=null,bx=hp[--pp],hp[pp]=null;for(;e===Id;)Id=Ka[--Ya],Ka[Ya]=null,Nl=Ka[--Ya],Ka[Ya]=null,Fl=Ka[--Ya],Ka[Ya]=null}var Da=null,Ia=null,yi=!1,Ms=null;function fO(e,t){var n=es(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function QM(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Da=e,Ia=Jc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Da=e,Ia=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Id!==null?{id:Fl,overflow:Nl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=es(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Da=e,Ia=null,!0):!1;default:return!1}}function eC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tC(e){if(yi){var t=Ia;if(t){var n=t;if(!QM(e,t)){if(eC(e))throw Error(qt(418));t=Jc(n.nextSibling);var r=Da;t&&QM(e,t)?fO(r,n):(e.flags=e.flags&-4097|2,yi=!1,Da=e)}}else{if(eC(e))throw Error(qt(418));e.flags=e.flags&-4097|2,yi=!1,Da=e}}}function eI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Da=e}function y_(e){if(e!==Da)return!1;if(!yi)return eI(e),yi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!KE(e.type,e.memoizedProps)),t&&(t=Ia)){if(eC(e))throw mO(),Error(qt(418));for(;t;)fO(e,t),t=Jc(t.nextSibling)}if(eI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(qt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ia=Jc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ia=null}}else Ia=Da?Jc(e.stateNode.nextSibling):null;return!0}function mO(){for(var e=Ia;e;)e=Jc(e.nextSibling)}function Bp(){Ia=Da=null,yi=!1}function NS(e){Ms===null?Ms=[e]:Ms.push(e)}var DU=Jl.ReactCurrentBatchConfig;function Ts(e,t){if(e&&e.defaultProps){t=Mi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var wx=du(null),Ex=null,fp=null,US=null;function jS(){US=fp=Ex=null}function $S(e){var t=wx.current;hi(wx),e._currentValue=t}function nC(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sp(e,t){Ex=e,US=fp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ha=!0),e.firstContext=null)}function is(e){var t=e._currentValue;if(US!==e)if(e={context:e,memoizedValue:t,next:null},fp===null){if(Ex===null)throw Error(qt(308));fp=e,Ex.dependencies={lanes:0,firstContext:e}}else fp=fp.next=e;return t}var _d=null;function VS(e){_d===null?_d=[e]:_d.push(e)}function gO(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,VS(t)):(n.next=a.next,a.next=n),t.interleaved=n,Gl(e,r)}function Gl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Uc=!1;function HS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Er&2)!==0){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Gl(e,n)}return a=r.interleaved,a===null?(t.next=t,VS(r)):(t.next=a.next,a.next=t),r.interleaved=t,Gl(e,n)}function j_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,MS(e,n)}}function tI(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?a=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?a=u=t:u=u.next=t}else a=u=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Cx(e,t,n,r){var a=e.updateQueue;Uc=!1;var u=a.firstBaseUpdate,h=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var g=o,b=g.next;g.next=null,h===null?u=b:h.next=b,h=g;var A=e.alternate;A!==null&&(A=A.updateQueue,o=A.lastBaseUpdate,o!==h&&(o===null?A.firstBaseUpdate=b:o.next=b,A.lastBaseUpdate=g))}if(u!==null){var D=a.baseState;h=0,A=b=g=null,o=u;do{var z=o.lane,F=o.eventTime;if((r&z)===z){A!==null&&(A=A.next={eventTime:F,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=e,T=o;switch(z=t,F=n,T.tag){case 1:if(N=T.payload,typeof N=="function"){D=N.call(F,D,z);break e}D=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=T.payload,z=typeof N=="function"?N.call(F,D,z):N,z==null)break e;D=Mi({},D,z);break e;case 2:Uc=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,z=a.effects,z===null?a.effects=[o]:z.push(o))}else F={eventTime:F,lane:z,tag:o.tag,payload:o.payload,callback:o.callback,next:null},A===null?(b=A=F,g=D):A=A.next=F,h|=z;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;z=o,o=z.next,z.next=null,a.lastBaseUpdate=z,a.shared.pending=null}}while(1);if(A===null&&(g=D),a.baseState=g,a.firstBaseUpdate=b,a.lastBaseUpdate=A,t=a.shared.interleaved,t!==null){a=t;do h|=a.lane,a=a.next;while(a!==t)}else u===null&&(a.shared.lanes=0);Dd|=h,e.lanes=h,e.memoizedState=D}}function nI(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(qt(191,a));a.call(r)}}}var yO=new gL.Component().refs;function rC(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Mi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _0={isMounted:function(e){return(e=e._reactInternals)?jd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Jo(),a=tu(e),u=jl(r,a);u.payload=t,n!=null&&(u.callback=n),t=Qc(e,u,a),t!==null&&(Ds(t,e,a,r),j_(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Jo(),a=tu(e),u=jl(r,a);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=Qc(e,u,a),t!==null&&(Ds(t,e,a,r),j_(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jo(),r=tu(e),a=jl(n,r);a.tag=2,t!=null&&(a.callback=t),t=Qc(e,a,r),t!==null&&(Ds(t,e,r,n),j_(t,e,r))}};function rI(e,t,n,r,a,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,h):t.prototype&&t.prototype.isPureReactComponent?!Lg(n,r)||!Lg(a,u):!0}function _O(e,t,n){var r=!1,a=ou,u=t.contextType;return typeof u=="object"&&u!==null?u=is(u):(a=ma(t)?Md:Ho.current,r=t.contextTypes,u=(r=r!=null)?zp(e,a):ou),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_0,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=u),t}function iI(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_0.enqueueReplaceState(t,t.state,null)}function iC(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=yO,HS(e);var u=t.contextType;typeof u=="object"&&u!==null?a.context=is(u):(u=ma(t)?Md:Ho.current,a.context=zp(e,u)),a.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(rC(e,t,u,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&_0.enqueueReplaceState(a,a.state,null),Cx(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Um(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(qt(309));var r=n.stateNode}if(!r)throw Error(qt(147,e));var a=r,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var o=a.refs;o===yO&&(o=a.refs={}),h===null?delete o[u]:o[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(qt(284));if(!n._owner)throw Error(qt(290,e))}return e}function __(e,t){throw e=Object.prototype.toString.call(t),Error(qt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oI(e){var t=e._init;return t(e._payload)}function xO(e){function t(j,W){if(e){var B=j.deletions;B===null?(j.deletions=[W],j.flags|=16):B.push(W)}}function n(j,W){if(!e)return null;for(;W!==null;)t(j,W),W=W.sibling;return null}function r(j,W){for(j=new Map;W!==null;)W.key!==null?j.set(W.key,W):j.set(W.index,W),W=W.sibling;return j}function a(j,W){return j=nu(j,W),j.index=0,j.sibling=null,j}function u(j,W,B){return j.index=B,e?(B=j.alternate,B!==null?(B=B.index,B<W?(j.flags|=2,W):B):(j.flags|=2,W)):(j.flags|=1048576,W)}function h(j){return e&&j.alternate===null&&(j.flags|=2),j}function o(j,W,B,O){return W===null||W.tag!==6?(W=Sw(B,j.mode,O),W.return=j,W):(W=a(W,B),W.return=j,W)}function g(j,W,B,O){var S=B.type;return S===ap?A(j,W,B.props.children,O,B.key):W!==null&&(W.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nc&&oI(S)===W.type)?(O=a(W,B.props),O.ref=Um(j,W,B),O.return=j,O):(O=q_(B.type,B.key,B.props,null,j.mode,O),O.ref=Um(j,W,B),O.return=j,O)}function b(j,W,B,O){return W===null||W.tag!==4||W.stateNode.containerInfo!==B.containerInfo||W.stateNode.implementation!==B.implementation?(W=kw(B,j.mode,O),W.return=j,W):(W=a(W,B.children||[]),W.return=j,W)}function A(j,W,B,O,S){return W===null||W.tag!==7?(W=Sd(B,j.mode,O,S),W.return=j,W):(W=a(W,B),W.return=j,W)}function D(j,W,B){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Sw(""+W,j.mode,B),W.return=j,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case l_:return B=q_(W.type,W.key,W.props,null,j.mode,B),B.ref=Um(j,null,W),B.return=j,B;case op:return W=kw(W,j.mode,B),W.return=j,W;case Nc:var O=W._init;return D(j,O(W._payload),B)}if(eg(W)||Om(W))return W=Sd(W,j.mode,B,null),W.return=j,W;__(j,W)}return null}function z(j,W,B,O){var S=W!==null?W.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return S!==null?null:o(j,W,""+B,O);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case l_:return B.key===S?g(j,W,B,O):null;case op:return B.key===S?b(j,W,B,O):null;case Nc:return S=B._init,z(j,W,S(B._payload),O)}if(eg(B)||Om(B))return S!==null?null:A(j,W,B,O,null);__(j,B)}return null}function F(j,W,B,O,S){if(typeof O=="string"&&O!==""||typeof O=="number")return j=j.get(B)||null,o(W,j,""+O,S);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case l_:return j=j.get(O.key===null?B:O.key)||null,g(W,j,O,S);case op:return j=j.get(O.key===null?B:O.key)||null,b(W,j,O,S);case Nc:var w=O._init;return F(j,W,B,w(O._payload),S)}if(eg(O)||Om(O))return j=j.get(B)||null,A(W,j,O,S,null);__(W,O)}return null}function N(j,W,B,O){for(var S=null,w=null,P=W,Y=W=0,ne=null;P!==null&&Y<B.length;Y++){P.index>Y?(ne=P,P=null):ne=P.sibling;var ae=z(j,P,B[Y],O);if(ae===null){P===null&&(P=ne);break}e&&P&&ae.alternate===null&&t(j,P),W=u(ae,W,Y),w===null?S=ae:w.sibling=ae,w=ae,P=ne}if(Y===B.length)return n(j,P),yi&&cd(j,Y),S;if(P===null){for(;Y<B.length;Y++)P=D(j,B[Y],O),P!==null&&(W=u(P,W,Y),w===null?S=P:w.sibling=P,w=P);return yi&&cd(j,Y),S}for(P=r(j,P);Y<B.length;Y++)ne=F(P,j,Y,B[Y],O),ne!==null&&(e&&ne.alternate!==null&&P.delete(ne.key===null?Y:ne.key),W=u(ne,W,Y),w===null?S=ne:w.sibling=ne,w=ne);return e&&P.forEach(function(oe){return t(j,oe)}),yi&&cd(j,Y),S}function T(j,W,B,O){var S=Om(B);if(typeof S!="function")throw Error(qt(150));if(B=S.call(B),B==null)throw Error(qt(151));for(var w=S=null,P=W,Y=W=0,ne=null,ae=B.next();P!==null&&!ae.done;Y++,ae=B.next()){P.index>Y?(ne=P,P=null):ne=P.sibling;var oe=z(j,P,ae.value,O);if(oe===null){P===null&&(P=ne);break}e&&P&&oe.alternate===null&&t(j,P),W=u(oe,W,Y),w===null?S=oe:w.sibling=oe,w=oe,P=ne}if(ae.done)return n(j,P),yi&&cd(j,Y),S;if(P===null){for(;!ae.done;Y++,ae=B.next())ae=D(j,ae.value,O),ae!==null&&(W=u(ae,W,Y),w===null?S=ae:w.sibling=ae,w=ae);return yi&&cd(j,Y),S}for(P=r(j,P);!ae.done;Y++,ae=B.next())ae=F(P,j,Y,ae.value,O),ae!==null&&(e&&ae.alternate!==null&&P.delete(ae.key===null?Y:ae.key),W=u(ae,W,Y),w===null?S=ae:w.sibling=ae,w=ae);return e&&P.forEach(function(fe){return t(j,fe)}),yi&&cd(j,Y),S}function H(j,W,B,O){if(typeof B=="object"&&B!==null&&B.type===ap&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case l_:e:{for(var S=B.key,w=W;w!==null;){if(w.key===S){if(S=B.type,S===ap){if(w.tag===7){n(j,w.sibling),W=a(w,B.props.children),W.return=j,j=W;break e}}else if(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Nc&&oI(S)===w.type){n(j,w.sibling),W=a(w,B.props),W.ref=Um(j,w,B),W.return=j,j=W;break e}n(j,w);break}else t(j,w);w=w.sibling}B.type===ap?(W=Sd(B.props.children,j.mode,O,B.key),W.return=j,j=W):(O=q_(B.type,B.key,B.props,null,j.mode,O),O.ref=Um(j,W,B),O.return=j,j=O)}return h(j);case op:e:{for(w=B.key;W!==null;){if(W.key===w)if(W.tag===4&&W.stateNode.containerInfo===B.containerInfo&&W.stateNode.implementation===B.implementation){n(j,W.sibling),W=a(W,B.children||[]),W.return=j,j=W;break e}else{n(j,W);break}else t(j,W);W=W.sibling}W=kw(B,j.mode,O),W.return=j,j=W}return h(j);case Nc:return w=B._init,H(j,W,w(B._payload),O)}if(eg(B))return N(j,W,B,O);if(Om(B))return T(j,W,B,O);__(j,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,W!==null&&W.tag===6?(n(j,W.sibling),W=a(W,B),W.return=j,j=W):(n(j,W),W=Sw(B,j.mode,O),W.return=j,j=W),h(j)):n(j,W)}return H}var Fp=xO(!0),bO=xO(!1),sv={},dl=du(sv),Fg=du(sv),Ng=du(sv);function xd(e){if(e===sv)throw Error(qt(174));return e}function WS(e,t){switch(ii(Ng,t),ii(Fg,e),ii(dl,sv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:zE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=zE(t,e)}hi(dl),ii(dl,t)}function Np(){hi(dl),hi(Fg),hi(Ng)}function wO(e){xd(Ng.current);var t=xd(dl.current),n=zE(t,e.type);t!==n&&(ii(Fg,e),ii(dl,n))}function GS(e){Fg.current===e&&(hi(dl),hi(Fg))}var ki=du(0);function Sx(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _w=[];function qS(){for(var e=0;e<_w.length;e++)_w[e]._workInProgressVersionPrimary=null;_w.length=0}var $_=Jl.ReactCurrentDispatcher,xw=Jl.ReactCurrentBatchConfig,Pd=0,Ai=null,to=null,fo=null,kx=!1,cg=!1,Ug=0,RU=0;function Fo(){throw Error(qt(321))}function ZS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Os(e[n],t[n]))return!1;return!0}function XS(e,t,n,r,a,u){if(Pd=u,Ai=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$_.current=e===null||e.memoizedState===null?BU:FU,e=n(r,a),cg){u=0;do{if(cg=!1,Ug=0,25<=u)throw Error(qt(301));u+=1,fo=to=null,t.updateQueue=null,$_.current=NU,e=n(r,a)}while(cg)}if($_.current=Tx,t=to!==null&&to.next!==null,Pd=0,fo=to=Ai=null,kx=!1,t)throw Error(qt(300));return e}function KS(){var e=Ug!==0;return Ug=0,e}function nl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fo===null?Ai.memoizedState=fo=e:fo=fo.next=e,fo}function os(){if(to===null){var e=Ai.alternate;e=e!==null?e.memoizedState:null}else e=to.next;var t=fo===null?Ai.memoizedState:fo.next;if(t!==null)fo=t,to=e;else{if(e===null)throw Error(qt(310));to=e,e={memoizedState:to.memoizedState,baseState:to.baseState,baseQueue:to.baseQueue,queue:to.queue,next:null},fo===null?Ai.memoizedState=fo=e:fo=fo.next=e}return fo}function jg(e,t){return typeof t=="function"?t(e):t}function bw(e){var t=os(),n=t.queue;if(n===null)throw Error(qt(311));n.lastRenderedReducer=e;var r=to,a=r.baseQueue,u=n.pending;if(u!==null){if(a!==null){var h=a.next;a.next=u.next,u.next=h}r.baseQueue=a=u,n.pending=null}if(a!==null){u=a.next,r=r.baseState;var o=h=null,g=null,b=u;do{var A=b.lane;if((Pd&A)===A)g!==null&&(g=g.next={lane:0,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null}),r=b.hasEagerState?b.eagerState:e(r,b.action);else{var D={lane:A,action:b.action,hasEagerState:b.hasEagerState,eagerState:b.eagerState,next:null};g===null?(o=g=D,h=r):g=g.next=D,Ai.lanes|=A,Dd|=A}b=b.next}while(b!==null&&b!==u);g===null?h=r:g.next=o,Os(r,t.memoizedState)||(ha=!0),t.memoizedState=r,t.baseState=h,t.baseQueue=g,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do u=a.lane,Ai.lanes|=u,Dd|=u,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ww(e){var t=os(),n=t.queue;if(n===null)throw Error(qt(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,u=t.memoizedState;if(a!==null){n.pending=null;var h=a=a.next;do u=e(u,h.action),h=h.next;while(h!==a);Os(u,t.memoizedState)||(ha=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,r]}function EO(){}function CO(e,t){var n=Ai,r=os(),a=t(),u=!Os(r.memoizedState,a);if(u&&(r.memoizedState=a,ha=!0),r=r.queue,YS(TO.bind(null,n,r,e),[e]),r.getSnapshot!==t||u||fo!==null&&fo.memoizedState.tag&1){if(n.flags|=2048,$g(9,kO.bind(null,n,r,a,t),void 0,null),go===null)throw Error(qt(349));(Pd&30)!==0||SO(n,t,a)}return a}function SO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ai.updateQueue,t===null?(t={lastEffect:null,stores:null},Ai.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function kO(e,t,n,r){t.value=n,t.getSnapshot=r,AO(t)&&MO(e)}function TO(e,t,n){return n(function(){AO(t)&&MO(e)})}function AO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Os(e,n)}catch{return!0}}function MO(e){var t=Gl(e,1);t!==null&&Ds(t,e,1,-1)}function aI(e){var t=nl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jg,lastRenderedState:e},t.queue=e,e=e.dispatch=zU.bind(null,Ai,e),[t.memoizedState,e]}function $g(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ai.updateQueue,t===null?(t={lastEffect:null,stores:null},Ai.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function IO(){return os().memoizedState}function V_(e,t,n,r){var a=nl();Ai.flags|=e,a.memoizedState=$g(1|t,n,void 0,r===void 0?null:r)}function x0(e,t,n,r){var a=os();r=r===void 0?null:r;var u=void 0;if(to!==null){var h=to.memoizedState;if(u=h.destroy,r!==null&&ZS(r,h.deps)){a.memoizedState=$g(t,n,u,r);return}}Ai.flags|=e,a.memoizedState=$g(1|t,n,u,r)}function sI(e,t){return V_(8390656,8,e,t)}function YS(e,t){return x0(2048,8,e,t)}function PO(e,t){return x0(4,2,e,t)}function DO(e,t){return x0(4,4,e,t)}function RO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function LO(e,t,n){return n=n!=null?n.concat([e]):null,x0(4,4,RO.bind(null,t,e),n)}function JS(){}function OO(e,t){var n=os();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ZS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zO(e,t){var n=os();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ZS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function BO(e,t,n){return(Pd&21)===0?(e.baseState&&(e.baseState=!1,ha=!0),e.memoizedState=n):(Os(n,t)||(n=UL(),Ai.lanes|=n,Dd|=n,e.baseState=!0),t)}function LU(e,t){var n=Zr;Zr=n!==0&&4>n?n:4,e(!0);var r=xw.transition;xw.transition={};try{e(!1),t()}finally{Zr=n,xw.transition=r}}function FO(){return os().memoizedState}function OU(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},NO(e))UO(t,n);else if(n=gO(e,t,n,r),n!==null){var a=Jo();Ds(n,e,r,a),jO(n,t,r)}}function zU(e,t,n){var r=tu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(NO(e))UO(t,a);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,o=u(h,n);if(a.hasEagerState=!0,a.eagerState=o,Os(o,h)){var g=t.interleaved;g===null?(a.next=a,VS(t)):(a.next=g.next,g.next=a),t.interleaved=a;return}}catch{}finally{}n=gO(e,t,a,r),n!==null&&(a=Jo(),Ds(n,e,r,a),jO(n,t,r))}}function NO(e){var t=e.alternate;return e===Ai||t!==null&&t===Ai}function UO(e,t){cg=kx=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jO(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,MS(e,n)}}var Tx={readContext:is,useCallback:Fo,useContext:Fo,useEffect:Fo,useImperativeHandle:Fo,useInsertionEffect:Fo,useLayoutEffect:Fo,useMemo:Fo,useReducer:Fo,useRef:Fo,useState:Fo,useDebugValue:Fo,useDeferredValue:Fo,useTransition:Fo,useMutableSource:Fo,useSyncExternalStore:Fo,useId:Fo,unstable_isNewReconciler:!1},BU={readContext:is,useCallback:function(e,t){return nl().memoizedState=[e,t===void 0?null:t],e},useContext:is,useEffect:sI,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,V_(4194308,4,RO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return V_(4194308,4,e,t)},useInsertionEffect:function(e,t){return V_(4,2,e,t)},useMemo:function(e,t){var n=nl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=nl();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=OU.bind(null,Ai,e),[r.memoizedState,e]},useRef:function(e){var t=nl();return e={current:e},t.memoizedState=e},useState:aI,useDebugValue:JS,useDeferredValue:function(e){return nl().memoizedState=e},useTransition:function(){var e=aI(!1),t=e[0];return e=LU.bind(null,e[1]),nl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ai,a=nl();if(yi){if(n===void 0)throw Error(qt(407));n=n()}else{if(n=t(),go===null)throw Error(qt(349));(Pd&30)!==0||SO(r,t,n)}a.memoizedState=n;var u={value:n,getSnapshot:t};return a.queue=u,sI(TO.bind(null,r,u,e),[e]),r.flags|=2048,$g(9,kO.bind(null,r,u,n,t),void 0,null),n},useId:function(){var e=nl(),t=go.identifierPrefix;if(yi){var n=Nl,r=Fl;n=(r&~(1<<32-Ps(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ug++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=RU++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},FU={readContext:is,useCallback:OO,useContext:is,useEffect:YS,useImperativeHandle:LO,useInsertionEffect:PO,useLayoutEffect:DO,useMemo:zO,useReducer:bw,useRef:IO,useState:function(){return bw(jg)},useDebugValue:JS,useDeferredValue:function(e){var t=os();return BO(t,to.memoizedState,e)},useTransition:function(){var e=bw(jg)[0],t=os().memoizedState;return[e,t]},useMutableSource:EO,useSyncExternalStore:CO,useId:FO,unstable_isNewReconciler:!1},NU={readContext:is,useCallback:OO,useContext:is,useEffect:YS,useImperativeHandle:LO,useInsertionEffect:PO,useLayoutEffect:DO,useMemo:zO,useReducer:ww,useRef:IO,useState:function(){return ww(jg)},useDebugValue:JS,useDeferredValue:function(e){var t=os();return to===null?t.memoizedState=e:BO(t,to.memoizedState,e)},useTransition:function(){var e=ww(jg)[0],t=os().memoizedState;return[e,t]},useMutableSource:EO,useSyncExternalStore:CO,useId:FO,unstable_isNewReconciler:!1};function Up(e,t){try{var n="",r=t;do n+=p9(r),r=r.return;while(r);var a=n}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:a,digest:null}}function Ew(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function oC(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var UU=typeof WeakMap=="function"?WeakMap:Map;function $O(e,t,n){n=jl(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Mx||(Mx=!0,mC=r),oC(e,t)},n}function VO(e,t,n){n=jl(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){oC(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){oC(e,t),typeof r!="function"&&(eu===null?eu=new Set([this]):eu.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),n}function lI(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new UU;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=ej.bind(null,e,t,n),t.then(e,e))}function cI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uI(e,t,n,r,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jl(-1,1),t.tag=2,Qc(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var jU=Jl.ReactCurrentOwner,ha=!1;function Xo(e,t,n,r){t.child=e===null?bO(t,null,n,r):Fp(t,e.child,n,r)}function dI(e,t,n,r,a){n=n.render;var u=t.ref;return Sp(t,a),r=XS(e,t,n,r,u,a),n=KS(),e!==null&&!ha?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ql(e,t,a)):(yi&&n&&BS(t),t.flags|=1,Xo(e,t,r,a),t.child)}function hI(e,t,n,r,a){if(e===null){var u=n.type;return typeof u=="function"&&!ak(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,HO(e,t,u,r,a)):(e=q_(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,(e.lanes&a)===0){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:Lg,n(h,r)&&e.ref===t.ref)return ql(e,t,a)}return t.flags|=1,e=nu(u,r),e.ref=t.ref,e.return=t,t.child=e}function HO(e,t,n,r,a){if(e!==null){var u=e.memoizedProps;if(Lg(u,r)&&e.ref===t.ref)if(ha=!1,t.pendingProps=r=u,(e.lanes&a)!==0)(e.flags&131072)!==0&&(ha=!0);else return t.lanes=e.lanes,ql(e,t,a)}return aC(e,t,n,r,a)}function WO(e,t,n){var r=t.pendingProps,a=r.children,u=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ii(gp,ka),ka|=n;else{if((n&1073741824)===0)return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ii(gp,ka),ka|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=u!==null?u.baseLanes:n,ii(gp,ka),ka|=r}else u!==null?(r=u.baseLanes|n,t.memoizedState=null):r=n,ii(gp,ka),ka|=r;return Xo(e,t,a,n),t.child}function GO(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function aC(e,t,n,r,a){var u=ma(n)?Md:Ho.current;return u=zp(t,u),Sp(t,a),n=XS(e,t,n,r,u,a),r=KS(),e!==null&&!ha?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ql(e,t,a)):(yi&&r&&BS(t),t.flags|=1,Xo(e,t,n,a),t.child)}function pI(e,t,n,r,a){if(ma(n)){var u=!0;_x(t)}else u=!1;if(Sp(t,a),t.stateNode===null)H_(e,t),_O(t,n,r),iC(t,n,r,a),r=!0;else if(e===null){var h=t.stateNode,o=t.memoizedProps;h.props=o;var g=h.context,b=n.contextType;typeof b=="object"&&b!==null?b=is(b):(b=ma(n)?Md:Ho.current,b=zp(t,b));var A=n.getDerivedStateFromProps,D=typeof A=="function"||typeof h.getSnapshotBeforeUpdate=="function";D||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==r||g!==b)&&iI(t,h,r,b),Uc=!1;var z=t.memoizedState;h.state=z,Cx(t,r,h,a),g=t.memoizedState,o!==r||z!==g||fa.current||Uc?(typeof A=="function"&&(rC(t,n,A,r),g=t.memoizedState),(o=Uc||rI(t,n,o,r,z,g,b))?(D||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=g),h.props=r,h.state=g,h.context=b,r=o):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{h=t.stateNode,vO(e,t),o=t.memoizedProps,b=t.type===t.elementType?o:Ts(t.type,o),h.props=b,D=t.pendingProps,z=h.context,g=n.contextType,typeof g=="object"&&g!==null?g=is(g):(g=ma(n)?Md:Ho.current,g=zp(t,g));var F=n.getDerivedStateFromProps;(A=typeof F=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==D||z!==g)&&iI(t,h,r,g),Uc=!1,z=t.memoizedState,h.state=z,Cx(t,r,h,a);var N=t.memoizedState;o!==D||z!==N||fa.current||Uc?(typeof F=="function"&&(rC(t,n,F,r),N=t.memoizedState),(b=Uc||rI(t,n,b,r,z,N,g)||!1)?(A||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,N,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,N,g)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),h.props=r,h.state=N,h.context=g,r=b):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),r=!1)}return sC(e,t,n,r,u,a)}function sC(e,t,n,r,a,u){GO(e,t);var h=(t.flags&128)!==0;if(!r&&!h)return a&&JM(t,n,!1),ql(e,t,u);r=t.stateNode,jU.current=t;var o=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&h?(t.child=Fp(t,e.child,null,u),t.child=Fp(t,null,o,u)):Xo(e,t,o,u),t.memoizedState=r.state,a&&JM(t,n,!0),t.child}function qO(e){var t=e.stateNode;t.pendingContext?YM(e,t.pendingContext,t.pendingContext!==t.context):t.context&&YM(e,t.context,!1),WS(e,t.containerInfo)}function fI(e,t,n,r,a){return Bp(),NS(a),t.flags|=256,Xo(e,t,n,r),t.child}var lC={dehydrated:null,treeContext:null,retryLane:0};function cC(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZO(e,t,n){var r=t.pendingProps,a=ki.current,u=!1,h=(t.flags&128)!==0,o;if((o=h)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ii(ki,a&1),e===null)return tC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(h=r.children,e=r.fallback,u?(r=t.mode,u=t.child,h={mode:"hidden",children:h},(r&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=h):u=E0(h,r,0,null),e=Sd(e,r,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=cC(n),t.memoizedState=lC,e):QS(t,h));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return $U(e,t,h,r,o,a,n);if(u){u=r.fallback,h=t.mode,a=e.child,o=a.sibling;var g={mode:"hidden",children:r.children};return(h&1)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=g,t.deletions=null):(r=nu(a,g),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?u=nu(o,u):(u=Sd(u,h,n,null),u.flags|=2),u.return=t,r.return=t,r.sibling=u,t.child=r,r=u,u=t.child,h=e.child.memoizedState,h=h===null?cC(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~n,t.memoizedState=lC,r}return u=e.child,e=u.sibling,r=nu(u,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function QS(e,t){return t=E0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function x_(e,t,n,r){return r!==null&&NS(r),Fp(t,e.child,null,n),e=QS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $U(e,t,n,r,a,u,h){if(n)return t.flags&256?(t.flags&=-257,r=Ew(Error(qt(422))),x_(e,t,h,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=r.fallback,a=t.mode,r=E0({mode:"visible",children:r.children},a,0,null),u=Sd(u,a,h,null),u.flags|=2,r.return=t,u.return=t,r.sibling=u,t.child=r,(t.mode&1)!==0&&Fp(t,e.child,null,h),t.child.memoizedState=cC(h),t.memoizedState=lC,u);if((t.mode&1)===0)return x_(e,t,h,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,u=Error(qt(419)),r=Ew(u,r,void 0),x_(e,t,h,r)}if(o=(h&e.childLanes)!==0,ha||o){if(r=go,r!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(r.suspendedLanes|h))!==0?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,Gl(e,a),Ds(r,e,a,-1))}return ok(),r=Ew(Error(qt(421))),x_(e,t,h,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=tj.bind(null,e),a._reactRetry=t,null):(e=u.treeContext,Ia=Jc(a.nextSibling),Da=t,yi=!0,Ms=null,e!==null&&(Ka[Ya++]=Fl,Ka[Ya++]=Nl,Ka[Ya++]=Id,Fl=e.id,Nl=e.overflow,Id=t),t=QS(t,r.children),t.flags|=4096,t)}function mI(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nC(e.return,t,n)}function Cw(e,t,n,r,a){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=a)}function XO(e,t,n){var r=t.pendingProps,a=r.revealOrder,u=r.tail;if(Xo(e,t,r.children,n),r=ki.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mI(e,n,t);else if(e.tag===19)mI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ii(ki,r),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Sx(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Cw(t,!1,a,n,u);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Sx(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Cw(t,!0,n,null,u);break;case"together":Cw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function H_(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ql(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dd|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(qt(153));if(t.child!==null){for(e=t.child,n=nu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function VU(e,t,n){switch(t.tag){case 3:qO(t),Bp();break;case 5:wO(t);break;case 1:ma(t.type)&&_x(t);break;case 4:WS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;ii(wx,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ii(ki,ki.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?ZO(e,t,n):(ii(ki,ki.current&1),e=ql(e,t,n),e!==null?e.sibling:null);ii(ki,ki.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return XO(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ii(ki,ki.current),r)break;return null;case 22:case 23:return t.lanes=0,WO(e,t,n)}return ql(e,t,n)}var KO,uC,YO,JO;KO=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uC=function(){};YO=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,xd(dl.current);var u=null;switch(n){case"input":a=DE(e,a),r=DE(e,r),u=[];break;case"select":a=Mi({},a,{value:void 0}),r=Mi({},r,{value:void 0}),u=[];break;case"textarea":a=OE(e,a),r=OE(e,r),u=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=vx)}BE(n,r);var h;n=null;for(b in a)if(!r.hasOwnProperty(b)&&a.hasOwnProperty(b)&&a[b]!=null)if(b==="style"){var o=a[b];for(h in o)o.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else b!=="dangerouslySetInnerHTML"&&b!=="children"&&b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(Tg.hasOwnProperty(b)?u||(u=[]):(u=u||[]).push(b,null));for(b in r){var g=r[b];if(o=a!=null?a[b]:void 0,r.hasOwnProperty(b)&&g!==o&&(g!=null||o!=null))if(b==="style")if(o){for(h in o)!o.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in g)g.hasOwnProperty(h)&&o[h]!==g[h]&&(n||(n={}),n[h]=g[h])}else n||(u||(u=[]),u.push(b,n)),n=g;else b==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,o=o?o.__html:void 0,g!=null&&o!==g&&(u=u||[]).push(b,g)):b==="children"?typeof g!="string"&&typeof g!="number"||(u=u||[]).push(b,""+g):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&(Tg.hasOwnProperty(b)?(g!=null&&b==="onScroll"&&ui("scroll",e),u||o===g||(u=[])):(u=u||[]).push(b,g))}n&&(u=u||[]).push("style",n);var b=u;(t.updateQueue=b)&&(t.flags|=4)}};JO=function(e,t,n,r){n!==r&&(t.flags|=4)};function jm(e,t){if(!yi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function No(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function HU(e,t,n){var r=t.pendingProps;switch(FS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return No(t),null;case 1:return ma(t.type)&&yx(),No(t),null;case 3:return r=t.stateNode,Np(),hi(fa),hi(Ho),qS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(y_(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ms!==null&&(yC(Ms),Ms=null))),uC(e,t),No(t),null;case 5:GS(t);var a=xd(Ng.current);if(n=t.type,e!==null&&t.stateNode!=null)YO(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(qt(166));return No(t),null}if(e=xd(dl.current),y_(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[sl]=t,r[Bg]=u,e=(t.mode&1)!==0,n){case"dialog":ui("cancel",r),ui("close",r);break;case"iframe":case"object":case"embed":ui("load",r);break;case"video":case"audio":for(a=0;a<ng.length;a++)ui(ng[a],r);break;case"source":ui("error",r);break;case"img":case"image":case"link":ui("error",r),ui("load",r);break;case"details":ui("toggle",r);break;case"input":CM(r,u),ui("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},ui("invalid",r);break;case"textarea":kM(r,u),ui("invalid",r)}BE(n,u),a=null;for(var h in u)if(u.hasOwnProperty(h)){var o=u[h];h==="children"?typeof o=="string"?r.textContent!==o&&(u.suppressHydrationWarning!==!0&&v_(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(u.suppressHydrationWarning!==!0&&v_(r.textContent,o,e),a=["children",""+o]):Tg.hasOwnProperty(h)&&o!=null&&h==="onScroll"&&ui("scroll",r)}switch(n){case"input":c_(r),SM(r,u,!0);break;case"textarea":c_(r),TM(r);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(r.onclick=vx)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=SL(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(n,{is:r.is}):(e=h.createElement(n),n==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,n),e[sl]=t,e[Bg]=r,KO(e,t,!1,!1),t.stateNode=e;e:{switch(h=FE(n,r),n){case"dialog":ui("cancel",e),ui("close",e),a=r;break;case"iframe":case"object":case"embed":ui("load",e),a=r;break;case"video":case"audio":for(a=0;a<ng.length;a++)ui(ng[a],e);a=r;break;case"source":ui("error",e),a=r;break;case"img":case"image":case"link":ui("error",e),ui("load",e),a=r;break;case"details":ui("toggle",e),a=r;break;case"input":CM(e,r),a=DE(e,r),ui("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Mi({},r,{value:void 0}),ui("invalid",e);break;case"textarea":kM(e,r),a=OE(e,r),ui("invalid",e);break;default:a=r}BE(n,a),o=a;for(u in o)if(o.hasOwnProperty(u)){var g=o[u];u==="style"?AL(e,g):u==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&kL(e,g)):u==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&Ag(e,g):typeof g=="number"&&Ag(e,""+g):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Tg.hasOwnProperty(u)?g!=null&&u==="onScroll"&&ui("scroll",e):g!=null&&ES(e,u,g,h))}switch(n){case"input":c_(e),SM(e,r,!1);break;case"textarea":c_(e),TM(e);break;case"option":r.value!=null&&e.setAttribute("value",""+iu(r.value));break;case"select":e.multiple=!!r.multiple,u=r.value,u!=null?bp(e,!!r.multiple,u,!1):r.defaultValue!=null&&bp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=vx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return No(t),null;case 6:if(e&&t.stateNode!=null)JO(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(qt(166));if(n=xd(Ng.current),xd(dl.current),y_(t)){if(r=t.stateNode,n=t.memoizedProps,r[sl]=t,(u=r.nodeValue!==n)&&(e=Da,e!==null))switch(e.tag){case 3:v_(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&v_(r.nodeValue,n,(e.mode&1)!==0)}u&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sl]=t,t.stateNode=r}return No(t),null;case 13:if(hi(ki),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(yi&&Ia!==null&&(t.mode&1)!==0&&(t.flags&128)===0)mO(),Bp(),t.flags|=98560,u=!1;else if(u=y_(t),r!==null&&r.dehydrated!==null){if(e===null){if(!u)throw Error(qt(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(qt(317));u[sl]=t}else Bp(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;No(t),u=!1}else Ms!==null&&(yC(Ms),Ms=null),u=!0;if(!u)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(ki.current&1)!==0?no===0&&(no=3):ok())),t.updateQueue!==null&&(t.flags|=4),No(t),null);case 4:return Np(),uC(e,t),e===null&&Og(t.stateNode.containerInfo),No(t),null;case 10:return $S(t.type._context),No(t),null;case 17:return ma(t.type)&&yx(),No(t),null;case 19:if(hi(ki),u=t.memoizedState,u===null)return No(t),null;if(r=(t.flags&128)!==0,h=u.rendering,h===null)if(r)jm(u,!1);else{if(no!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Sx(e),h!==null){for(t.flags|=128,jm(u,!1),r=h.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)u=n,e=r,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ii(ki,ki.current&1|2),t.child}e=e.sibling}u.tail!==null&&Vi()>jp&&(t.flags|=128,r=!0,jm(u,!1),t.lanes=4194304)}else{if(!r)if(e=Sx(h),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jm(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!yi)return No(t),null}else 2*Vi()-u.renderingStartTime>jp&&n!==1073741824&&(t.flags|=128,r=!0,jm(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(n=u.last,n!==null?n.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Vi(),t.sibling=null,n=ki.current,ii(ki,r?n&1|2:n&1),t):(No(t),null);case 22:case 23:return ik(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(ka&1073741824)!==0&&(No(t),t.subtreeFlags&6&&(t.flags|=8192)):No(t),null;case 24:return null;case 25:return null}throw Error(qt(156,t.tag))}function WU(e,t){switch(FS(t),t.tag){case 1:return ma(t.type)&&yx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Np(),hi(fa),hi(Ho),qS(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return GS(t),null;case 13:if(hi(ki),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(qt(340));Bp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hi(ki),null;case 4:return Np(),null;case 10:return $S(t.type._context),null;case 22:case 23:return ik(),null;case 24:return null;default:return null}}var b_=!1,jo=!1,GU=typeof WeakSet=="function"?WeakSet:Set,vn=null;function mp(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oi(e,t,r)}else n.current=null}function dC(e,t,n){try{n()}catch(r){Oi(e,t,r)}}var gI=!1;function qU(e,t){if(ZE=fx,e=nO(),zS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var h=0,o=-1,g=-1,b=0,A=0,D=e,z=null;t:for(;;){for(var F;D!==n||a!==0&&D.nodeType!==3||(o=h+a),D!==u||r!==0&&D.nodeType!==3||(g=h+r),D.nodeType===3&&(h+=D.nodeValue.length),(F=D.firstChild)!==null;)z=D,D=F;for(;;){if(D===e)break t;if(z===n&&++b===a&&(o=h),z===u&&++A===r&&(g=h),(F=D.nextSibling)!==null)break;D=z,z=D.parentNode}D=F}n=o===-1||g===-1?null:{start:o,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(XE={focusedElem:e,selectionRange:n},fx=!1,vn=t;vn!==null;)if(t=vn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,vn=e;else for(;vn!==null;){t=vn;try{var N=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var T=N.memoizedProps,H=N.memoizedState,j=t.stateNode,W=j.getSnapshotBeforeUpdate(t.elementType===t.type?T:Ts(t.type,T),H);j.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var B=t.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qt(163))}}catch(O){Oi(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,vn=e;break}vn=t.return}return N=gI,gI=!1,N}function ug(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var u=a.destroy;a.destroy=void 0,u!==void 0&&dC(t,n,u)}a=a.next}while(a!==r)}}function b0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function hC(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function QO(e){var t=e.alternate;t!==null&&(e.alternate=null,QO(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sl],delete t[Bg],delete t[JE],delete t[MU],delete t[IU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function e3(e){return e.tag===5||e.tag===3||e.tag===4}function vI(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||e3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=vx));else if(r!==4&&(e=e.child,e!==null))for(pC(e,t,n),e=e.sibling;e!==null;)pC(e,t,n),e=e.sibling}function fC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(fC(e,t,n),e=e.sibling;e!==null;)fC(e,t,n),e=e.sibling}var wo=null,As=!1;function zc(e,t,n){for(n=n.child;n!==null;)t3(e,t,n),n=n.sibling}function t3(e,t,n){if(ul&&typeof ul.onCommitFiberUnmount=="function")try{ul.onCommitFiberUnmount(p0,n)}catch{}switch(n.tag){case 5:jo||mp(n,t);case 6:var r=wo,a=As;wo=null,zc(e,t,n),wo=r,As=a,wo!==null&&(As?(e=wo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wo.removeChild(n.stateNode));break;case 18:wo!==null&&(As?(e=wo,n=n.stateNode,e.nodeType===8?vw(e.parentNode,n):e.nodeType===1&&vw(e,n),Dg(e)):vw(wo,n.stateNode));break;case 4:r=wo,a=As,wo=n.stateNode.containerInfo,As=!0,zc(e,t,n),wo=r,As=a;break;case 0:case 11:case 14:case 15:if(!jo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var u=a,h=u.destroy;u=u.tag,h!==void 0&&((u&2)!==0||(u&4)!==0)&&dC(n,t,h),a=a.next}while(a!==r)}zc(e,t,n);break;case 1:if(!jo&&(mp(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Oi(n,t,o)}zc(e,t,n);break;case 21:zc(e,t,n);break;case 22:n.mode&1?(jo=(r=jo)||n.memoizedState!==null,zc(e,t,n),jo=r):zc(e,t,n);break;default:zc(e,t,n)}}function yI(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new GU),t.forEach(function(r){var a=nj.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function ks(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var u=e,h=t,o=h;e:for(;o!==null;){switch(o.tag){case 5:wo=o.stateNode,As=!1;break e;case 3:wo=o.stateNode.containerInfo,As=!0;break e;case 4:wo=o.stateNode.containerInfo,As=!0;break e}o=o.return}if(wo===null)throw Error(qt(160));t3(u,h,a),wo=null,As=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(b){Oi(a,t,b)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)n3(t,e),t=t.sibling}function n3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ks(t,e),el(e),r&4){try{ug(3,e,e.return),b0(3,e)}catch(T){Oi(e,e.return,T)}try{ug(5,e,e.return)}catch(T){Oi(e,e.return,T)}}break;case 1:ks(t,e),el(e),r&512&&n!==null&&mp(n,n.return);break;case 5:if(ks(t,e),el(e),r&512&&n!==null&&mp(n,n.return),e.flags&32){var a=e.stateNode;try{Ag(a,"")}catch(T){Oi(e,e.return,T)}}if(r&4&&(a=e.stateNode,a!=null)){var u=e.memoizedProps,h=n!==null?n.memoizedProps:u,o=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{o==="input"&&u.type==="radio"&&u.name!=null&&EL(a,u),FE(o,h);var b=FE(o,u);for(h=0;h<g.length;h+=2){var A=g[h],D=g[h+1];A==="style"?AL(a,D):A==="dangerouslySetInnerHTML"?kL(a,D):A==="children"?Ag(a,D):ES(a,A,D,b)}switch(o){case"input":RE(a,u);break;case"textarea":CL(a,u);break;case"select":var z=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var F=u.value;F!=null?bp(a,!!u.multiple,F,!1):z!==!!u.multiple&&(u.defaultValue!=null?bp(a,!!u.multiple,u.defaultValue,!0):bp(a,!!u.multiple,u.multiple?[]:"",!1))}a[Bg]=u}catch(T){Oi(e,e.return,T)}}break;case 6:if(ks(t,e),el(e),r&4){if(e.stateNode===null)throw Error(qt(162));a=e.stateNode,u=e.memoizedProps;try{a.nodeValue=u}catch(T){Oi(e,e.return,T)}}break;case 3:if(ks(t,e),el(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dg(t.containerInfo)}catch(T){Oi(e,e.return,T)}break;case 4:ks(t,e),el(e);break;case 13:ks(t,e),el(e),a=e.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(nk=Vi())),r&4&&yI(e);break;case 22:if(A=n!==null&&n.memoizedState!==null,e.mode&1?(jo=(b=jo)||A,ks(t,e),jo=b):ks(t,e),el(e),r&8192){if(b=e.memoizedState!==null,(e.stateNode.isHidden=b)&&!A&&(e.mode&1)!==0)for(vn=e,A=e.child;A!==null;){for(D=vn=A;vn!==null;){switch(z=vn,F=z.child,z.tag){case 0:case 11:case 14:case 15:ug(4,z,z.return);break;case 1:mp(z,z.return);var N=z.stateNode;if(typeof N.componentWillUnmount=="function"){r=z,n=z.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(T){Oi(r,n,T)}}break;case 5:mp(z,z.return);break;case 22:if(z.memoizedState!==null){xI(D);continue}}F!==null?(F.return=z,vn=F):xI(D)}A=A.sibling}e:for(A=null,D=e;;){if(D.tag===5){if(A===null){A=D;try{a=D.stateNode,b?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(o=D.stateNode,g=D.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null,o.style.display=TL("display",h))}catch(T){Oi(e,e.return,T)}}}else if(D.tag===6){if(A===null)try{D.stateNode.nodeValue=b?"":D.memoizedProps}catch(T){Oi(e,e.return,T)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;A===D&&(A=null),D=D.return}A===D&&(A=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:ks(t,e),el(e),r&4&&yI(e);break;case 21:break;default:ks(t,e),el(e)}}function el(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(e3(n)){var r=n;break e}n=n.return}throw Error(qt(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ag(a,""),r.flags&=-33);var u=vI(e);fC(e,u,a);break;case 3:case 4:var h=r.stateNode.containerInfo,o=vI(e);pC(e,o,h);break;default:throw Error(qt(161))}}catch(g){Oi(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ZU(e,t,n){vn=e,r3(e)}function r3(e,t,n){for(var r=(e.mode&1)!==0;vn!==null;){var a=vn,u=a.child;if(a.tag===22&&r){var h=a.memoizedState!==null||b_;if(!h){var o=a.alternate,g=o!==null&&o.memoizedState!==null||jo;o=b_;var b=jo;if(b_=h,(jo=g)&&!b)for(vn=a;vn!==null;)h=vn,g=h.child,h.tag===22&&h.memoizedState!==null?bI(a):g!==null?(g.return=h,vn=g):bI(a);for(;u!==null;)vn=u,r3(u),u=u.sibling;vn=a,b_=o,jo=b}_I(e)}else(a.subtreeFlags&8772)!==0&&u!==null?(u.return=a,vn=u):_I(e)}}function _I(e){for(;vn!==null;){var t=vn;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:jo||b0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!jo)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ts(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&nI(t,u,r);break;case 3:var h=t.updateQueue;if(h!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}nI(t,h,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var b=t.alternate;if(b!==null){var A=b.memoizedState;if(A!==null){var D=A.dehydrated;D!==null&&Dg(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qt(163))}jo||t.flags&512&&hC(t)}catch(z){Oi(t,t.return,z)}}if(t===e){vn=null;break}if(n=t.sibling,n!==null){n.return=t.return,vn=n;break}vn=t.return}}function xI(e){for(;vn!==null;){var t=vn;if(t===e){vn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,vn=n;break}vn=t.return}}function bI(e){for(;vn!==null;){var t=vn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{b0(4,t)}catch(g){Oi(t,n,g)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(g){Oi(t,a,g)}}var u=t.return;try{hC(t)}catch(g){Oi(t,u,g)}break;case 5:var h=t.return;try{hC(t)}catch(g){Oi(t,h,g)}}}catch(g){Oi(t,t.return,g)}if(t===e){vn=null;break}var o=t.sibling;if(o!==null){o.return=t.return,vn=o;break}vn=t.return}}var XU=Math.ceil,Ax=Jl.ReactCurrentDispatcher,ek=Jl.ReactCurrentOwner,ts=Jl.ReactCurrentBatchConfig,Er=0,go=null,qi=null,ko=0,ka=0,gp=du(0),no=0,Vg=null,Dd=0,w0=0,tk=0,dg=null,ua=null,nk=0,jp=1/0,Ol=null,Mx=!1,mC=null,eu=null,w_=!1,Wc=null,Ix=0,hg=0,gC=null,W_=-1,G_=0;function Jo(){return(Er&6)!==0?Vi():W_!==-1?W_:W_=Vi()}function tu(e){return(e.mode&1)===0?1:(Er&2)!==0&&ko!==0?ko&-ko:DU.transition!==null?(G_===0&&(G_=UL()),G_):(e=Zr,e!==0||(e=window.event,e=e===void 0?16:qL(e.type)),e)}function Ds(e,t,n,r){if(50<hg)throw hg=0,gC=null,Error(qt(185));iv(e,n,r),((Er&2)===0||e!==go)&&(e===go&&((Er&2)===0&&(w0|=n),no===4&&$c(e,ko)),ga(e,r),n===1&&Er===0&&(t.mode&1)===0&&(jp=Vi()+500,y0&&hu()))}function ga(e,t){var n=e.callbackNode;D9(e,t);var r=px(e,e===go?ko:0);if(r===0)n!==null&&IM(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&IM(n),t===1)e.tag===0?PU(wI.bind(null,e)):hO(wI.bind(null,e)),TU(function(){(Er&6)===0&&hu()}),n=null;else{switch(jL(r)){case 1:n=AS;break;case 4:n=FL;break;case 16:n=hx;break;case 536870912:n=NL;break;default:n=hx}n=d3(n,i3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function i3(e,t){if(W_=-1,G_=0,(Er&6)!==0)throw Error(qt(327));var n=e.callbackNode;if(kp()&&e.callbackNode!==n)return null;var r=px(e,e===go?ko:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Px(e,r);else{t=r;var a=Er;Er|=2;var u=a3();(go!==e||ko!==t)&&(Ol=null,jp=Vi()+500,Cd(e,t));do try{JU();break}catch(o){o3(e,o)}while(1);jS(),Ax.current=u,Er=a,qi!==null?t=0:(go=null,ko=0,t=no)}if(t!==0){if(t===2&&(a=VE(e),a!==0&&(r=a,t=vC(e,a))),t===1)throw n=Vg,Cd(e,0),$c(e,r),ga(e,Vi()),n;if(t===6)$c(e,r);else{if(a=e.current.alternate,(r&30)===0&&!KU(a)&&(t=Px(e,r),t===2&&(u=VE(e),u!==0&&(r=u,t=vC(e,u))),t===1))throw n=Vg,Cd(e,0),$c(e,r),ga(e,Vi()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(qt(345));case 2:ud(e,ua,Ol);break;case 3:if($c(e,r),(r&130023424)===r&&(t=nk+500-Vi(),10<t)){if(px(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Jo(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=YE(ud.bind(null,e,ua,Ol),t);break}ud(e,ua,Ol);break;case 4:if($c(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var h=31-Ps(r);u=1<<h,h=t[h],h>a&&(a=h),r&=~u}if(r=a,r=Vi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XU(r/1960))-r,10<r){e.timeoutHandle=YE(ud.bind(null,e,ua,Ol),r);break}ud(e,ua,Ol);break;case 5:ud(e,ua,Ol);break;default:throw Error(qt(329))}}}return ga(e,Vi()),e.callbackNode===n?i3.bind(null,e):null}function vC(e,t){var n=dg;return e.current.memoizedState.isDehydrated&&(Cd(e,t).flags|=256),e=Px(e,t),e!==2&&(t=ua,ua=n,t!==null&&yC(t)),e}function yC(e){ua===null?ua=e:ua.push.apply(ua,e)}function KU(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],u=a.getSnapshot;a=a.value;try{if(!Os(u(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t){for(t&=~tk,t&=~w0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ps(t),r=1<<n;e[n]=-1,t&=~r}}function wI(e){if((Er&6)!==0)throw Error(qt(327));kp();var t=px(e,0);if((t&1)===0)return ga(e,Vi()),null;var n=Px(e,t);if(e.tag!==0&&n===2){var r=VE(e);r!==0&&(t=r,n=vC(e,r))}if(n===1)throw n=Vg,Cd(e,0),$c(e,t),ga(e,Vi()),n;if(n===6)throw Error(qt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ud(e,ua,Ol),ga(e,Vi()),null}function rk(e,t){var n=Er;Er|=1;try{return e(t)}finally{Er=n,Er===0&&(jp=Vi()+500,y0&&hu())}}function Rd(e){Wc!==null&&Wc.tag===0&&(Er&6)===0&&kp();var t=Er;Er|=1;var n=ts.transition,r=Zr;try{if(ts.transition=null,Zr=1,e)return e()}finally{Zr=r,ts.transition=n,Er=t,(Er&6)===0&&hu()}}function ik(){ka=gp.current,hi(gp)}function Cd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,kU(n)),qi!==null)for(n=qi.return;n!==null;){var r=n;switch(FS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yx();break;case 3:Np(),hi(fa),hi(Ho),qS();break;case 5:GS(r);break;case 4:Np();break;case 13:hi(ki);break;case 19:hi(ki);break;case 10:$S(r.type._context);break;case 22:case 23:ik()}n=n.return}if(go=e,qi=e=nu(e.current,null),ko=ka=t,no=0,Vg=null,tk=w0=Dd=0,ua=dg=null,_d!==null){for(t=0;t<_d.length;t++)if(n=_d[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,u=n.pending;if(u!==null){var h=u.next;u.next=a,r.next=h}n.pending=r}_d=null}return e}function o3(e,t){do{var n=qi;try{if(jS(),$_.current=Tx,kx){for(var r=Ai.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}kx=!1}if(Pd=0,fo=to=Ai=null,cg=!1,Ug=0,ek.current=null,n===null||n.return===null){no=1,Vg=t,qi=null;break}e:{var u=e,h=n.return,o=n,g=t;if(t=ko,o.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var b=g,A=o,D=A.tag;if((A.mode&1)===0&&(D===0||D===11||D===15)){var z=A.alternate;z?(A.updateQueue=z.updateQueue,A.memoizedState=z.memoizedState,A.lanes=z.lanes):(A.updateQueue=null,A.memoizedState=null)}var F=cI(h);if(F!==null){F.flags&=-257,uI(F,h,o,u,t),F.mode&1&&lI(u,b,t),t=F,g=b;var N=t.updateQueue;if(N===null){var T=new Set;T.add(g),t.updateQueue=T}else N.add(g);break e}else{if((t&1)===0){lI(u,b,t),ok();break e}g=Error(qt(426))}}else if(yi&&o.mode&1){var H=cI(h);if(H!==null){(H.flags&65536)===0&&(H.flags|=256),uI(H,h,o,u,t),NS(Up(g,o));break e}}u=g=Up(g,o),no!==4&&(no=2),dg===null?dg=[u]:dg.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var j=$O(u,g,t);tI(u,j);break e;case 1:o=g;var W=u.type,B=u.stateNode;if((u.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(eu===null||!eu.has(B)))){u.flags|=65536,t&=-t,u.lanes|=t;var O=VO(u,o,t);tI(u,O);break e}}u=u.return}while(u!==null)}l3(n)}catch(S){t=S,qi===n&&n!==null&&(qi=n=n.return);continue}break}while(1)}function a3(){var e=Ax.current;return Ax.current=Tx,e===null?Tx:e}function ok(){(no===0||no===3||no===2)&&(no=4),go===null||(Dd&268435455)===0&&(w0&268435455)===0||$c(go,ko)}function Px(e,t){var n=Er;Er|=2;var r=a3();(go!==e||ko!==t)&&(Ol=null,Cd(e,t));do try{YU();break}catch(a){o3(e,a)}while(1);if(jS(),Er=n,Ax.current=r,qi!==null)throw Error(qt(261));return go=null,ko=0,no}function YU(){for(;qi!==null;)s3(qi)}function JU(){for(;qi!==null&&!E9();)s3(qi)}function s3(e){var t=u3(e.alternate,e,ka);e.memoizedProps=e.pendingProps,t===null?l3(e):qi=t,ek.current=null}function l3(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=HU(n,t,ka),n!==null){qi=n;return}}else{if(n=WU(n,t),n!==null){n.flags&=32767,qi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{no=6,qi=null;return}}if(t=t.sibling,t!==null){qi=t;return}qi=t=e}while(t!==null);no===0&&(no=5)}function ud(e,t,n){var r=Zr,a=ts.transition;try{ts.transition=null,Zr=1,QU(e,t,n,r)}finally{ts.transition=a,Zr=r}return null}function QU(e,t,n,r){do kp();while(Wc!==null);if((Er&6)!==0)throw Error(qt(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(qt(177));e.callbackNode=null,e.callbackPriority=0;var u=n.lanes|n.childLanes;if(R9(e,u),e===go&&(qi=go=null,ko=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||w_||(w_=!0,d3(hx,function(){return kp(),null})),u=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||u){u=ts.transition,ts.transition=null;var h=Zr;Zr=1;var o=Er;Er|=4,ek.current=null,qU(e,n),n3(n,e),_U(XE),fx=!!ZE,XE=ZE=null,e.current=n,ZU(n),C9(),Er=o,Zr=h,ts.transition=u}else e.current=n;if(w_&&(w_=!1,Wc=e,Ix=a),u=e.pendingLanes,u===0&&(eu=null),T9(n.stateNode),ga(e,Vi()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Mx)throw Mx=!1,e=mC,mC=null,e;return(Ix&1)!==0&&e.tag!==0&&kp(),u=e.pendingLanes,(u&1)!==0?e===gC?hg++:(hg=0,gC=e):hg=0,hu(),null}function kp(){if(Wc!==null){var e=jL(Ix),t=ts.transition,n=Zr;try{if(ts.transition=null,Zr=16>e?16:e,Wc===null)var r=!1;else{if(e=Wc,Wc=null,Ix=0,(Er&6)!==0)throw Error(qt(331));var a=Er;for(Er|=4,vn=e.current;vn!==null;){var u=vn,h=u.child;if((vn.flags&16)!==0){var o=u.deletions;if(o!==null){for(var g=0;g<o.length;g++){var b=o[g];for(vn=b;vn!==null;){var A=vn;switch(A.tag){case 0:case 11:case 15:ug(8,A,u)}var D=A.child;if(D!==null)D.return=A,vn=D;else for(;vn!==null;){A=vn;var z=A.sibling,F=A.return;if(QO(A),A===b){vn=null;break}if(z!==null){z.return=F,vn=z;break}vn=F}}}var N=u.alternate;if(N!==null){var T=N.child;if(T!==null){N.child=null;do{var H=T.sibling;T.sibling=null,T=H}while(T!==null)}}vn=u}}if((u.subtreeFlags&2064)!==0&&h!==null)h.return=u,vn=h;else e:for(;vn!==null;){if(u=vn,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:ug(9,u,u.return)}var j=u.sibling;if(j!==null){j.return=u.return,vn=j;break e}vn=u.return}}var W=e.current;for(vn=W;vn!==null;){h=vn;var B=h.child;if((h.subtreeFlags&2064)!==0&&B!==null)B.return=h,vn=B;else e:for(h=W;vn!==null;){if(o=vn,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:b0(9,o)}}catch(S){Oi(o,o.return,S)}if(o===h){vn=null;break e}var O=o.sibling;if(O!==null){O.return=o.return,vn=O;break e}vn=o.return}}if(Er=a,hu(),ul&&typeof ul.onPostCommitFiberRoot=="function")try{ul.onPostCommitFiberRoot(p0,e)}catch{}r=!0}return r}finally{Zr=n,ts.transition=t}}return!1}function EI(e,t,n){t=Up(n,t),t=$O(e,t,1),e=Qc(e,t,1),t=Jo(),e!==null&&(iv(e,1,t),ga(e,t))}function Oi(e,t,n){if(e.tag===3)EI(e,e,n);else for(;t!==null;){if(t.tag===3){EI(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(eu===null||!eu.has(r))){e=Up(n,e),e=VO(t,e,1),t=Qc(t,e,1),e=Jo(),t!==null&&(iv(t,1,e),ga(t,e));break}}t=t.return}}function ej(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Jo(),e.pingedLanes|=e.suspendedLanes&n,go===e&&(ko&n)===n&&(no===4||no===3&&(ko&130023424)===ko&&500>Vi()-nk?Cd(e,0):tk|=n),ga(e,t)}function c3(e,t){t===0&&((e.mode&1)===0?t=1:(t=h_,h_<<=1,(h_&130023424)===0&&(h_=4194304)));var n=Jo();e=Gl(e,t),e!==null&&(iv(e,t,n),ga(e,n))}function tj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),c3(e,n)}function nj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(qt(314))}r!==null&&r.delete(t),c3(e,n)}var u3;u3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||fa.current)ha=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ha=!1,VU(e,t,n);ha=(e.flags&131072)!==0}else ha=!1,yi&&(t.flags&1048576)!==0&&pO(t,bx,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;H_(e,t),e=t.pendingProps;var a=zp(t,Ho.current);Sp(t,n),a=XS(null,t,r,e,a,n);var u=KS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ma(r)?(u=!0,_x(t)):u=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,HS(t),a.updater=_0,t.stateNode=a,a._reactInternals=t,iC(t,r,e,n),t=sC(null,t,r,!0,u,n)):(t.tag=0,yi&&u&&BS(t),Xo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(H_(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=ij(r),e=Ts(r,e),a){case 0:t=aC(null,t,r,e,n);break e;case 1:t=pI(null,t,r,e,n);break e;case 11:t=dI(null,t,r,e,n);break e;case 14:t=hI(null,t,r,Ts(r.type,e),n);break e}throw Error(qt(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ts(r,a),aC(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ts(r,a),pI(e,t,r,a,n);case 3:e:{if(qO(t),e===null)throw Error(qt(387));r=t.pendingProps,u=t.memoizedState,a=u.element,vO(e,t),Cx(t,r,null,n);var h=t.memoizedState;if(r=h.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){a=Up(Error(qt(423)),t),t=fI(e,t,r,n,a);break e}else if(r!==a){a=Up(Error(qt(424)),t),t=fI(e,t,r,n,a);break e}else for(Ia=Jc(t.stateNode.containerInfo.firstChild),Da=t,yi=!0,Ms=null,n=bO(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bp(),r===a){t=ql(e,t,n);break e}Xo(e,t,r,n)}t=t.child}return t;case 5:return wO(t),e===null&&tC(t),r=t.type,a=t.pendingProps,u=e!==null?e.memoizedProps:null,h=a.children,KE(r,a)?h=null:u!==null&&KE(r,u)&&(t.flags|=32),GO(e,t),Xo(e,t,h,n),t.child;case 6:return e===null&&tC(t),null;case 13:return ZO(e,t,n);case 4:return WS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fp(t,null,r,n):Xo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ts(r,a),dI(e,t,r,a,n);case 7:return Xo(e,t,t.pendingProps,n),t.child;case 8:return Xo(e,t,t.pendingProps.children,n),t.child;case 12:return Xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,u=t.memoizedProps,h=a.value,ii(wx,r._currentValue),r._currentValue=h,u!==null)if(Os(u.value,h)){if(u.children===a.children&&!fa.current){t=ql(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var o=u.dependencies;if(o!==null){h=u.child;for(var g=o.firstContext;g!==null;){if(g.context===r){if(u.tag===1){g=jl(-1,n&-n),g.tag=2;var b=u.updateQueue;if(b!==null){b=b.shared;var A=b.pending;A===null?g.next=g:(g.next=A.next,A.next=g),b.pending=g}}u.lanes|=n,g=u.alternate,g!==null&&(g.lanes|=n),nC(u.return,n,t),o.lanes|=n;break}g=g.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(qt(341));h.lanes|=n,o=h.alternate,o!==null&&(o.lanes|=n),nC(h,n,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}Xo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Sp(t,n),a=is(a),r=r(a),t.flags|=1,Xo(e,t,r,n),t.child;case 14:return r=t.type,a=Ts(r,t.pendingProps),a=Ts(r.type,a),hI(e,t,r,a,n);case 15:return HO(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ts(r,a),H_(e,t),t.tag=1,ma(r)?(e=!0,_x(t)):e=!1,Sp(t,n),_O(t,r,a),iC(t,r,a,n),sC(null,t,r,!0,e,n);case 19:return XO(e,t,n);case 22:return WO(e,t,n)}throw Error(qt(156,t.tag))};function d3(e,t){return BL(e,t)}function rj(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(e,t,n,r){return new rj(e,t,n,r)}function ak(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ij(e){if(typeof e=="function")return ak(e)?1:0;if(e!=null){if(e=e.$$typeof,e===SS)return 11;if(e===kS)return 14}return 2}function nu(e,t){var n=e.alternate;return n===null?(n=es(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function q_(e,t,n,r,a,u){var h=2;if(r=e,typeof e=="function")ak(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case ap:return Sd(n.children,a,u,t);case CS:h=8,a|=8;break;case AE:return e=es(12,n,t,a|2),e.elementType=AE,e.lanes=u,e;case ME:return e=es(13,n,t,a),e.elementType=ME,e.lanes=u,e;case IE:return e=es(19,n,t,a),e.elementType=IE,e.lanes=u,e;case xL:return E0(n,a,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yL:h=10;break e;case _L:h=9;break e;case SS:h=11;break e;case kS:h=14;break e;case Nc:h=16,r=null;break e}throw Error(qt(130,e==null?e:typeof e,""))}return t=es(h,n,t,a),t.elementType=e,t.type=r,t.lanes=u,t}function Sd(e,t,n,r){return e=es(7,e,r,t),e.lanes=n,e}function E0(e,t,n,r){return e=es(22,e,r,t),e.elementType=xL,e.lanes=n,e.stateNode={isHidden:!1},e}function Sw(e,t,n){return e=es(6,e,null,t),e.lanes=n,e}function kw(e,t,n){return t=es(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function oj(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aw(0),this.expirationTimes=aw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aw(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function sk(e,t,n,r,a,u,h,o,g){return e=new oj(e,t,n,o,g),t===1?(t=1,u===!0&&(t|=8)):t=0,u=es(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HS(u),e}function aj(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:op,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function h3(e){if(!e)return ou;e=e._reactInternals;e:{if(jd(e)!==e||e.tag!==1)throw Error(qt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(qt(171))}if(e.tag===1){var n=e.type;if(ma(n))return dO(e,n,t)}return t}function p3(e,t,n,r,a,u,h,o,g){return e=sk(n,r,!0,e,a,u,h,o,g),e.context=h3(null),n=e.current,r=Jo(),a=tu(n),u=jl(r,a),u.callback=t!=null?t:null,Qc(n,u,a),e.current.lanes=a,iv(e,a,r),ga(e,r),e}function C0(e,t,n,r){var a=t.current,u=Jo(),h=tu(a);return n=h3(n),t.context===null?t.context=n:t.pendingContext=n,t=jl(u,h),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Qc(a,t,h),e!==null&&(Ds(e,a,h,u),j_(e,a,h)),h}function Dx(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function CI(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lk(e,t){CI(e,t),(e=e.alternate)&&CI(e,t)}function sj(){return null}var f3=typeof reportError=="function"?reportError:function(e){console.error(e)};function ck(e){this._internalRoot=e}S0.prototype.render=ck.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(qt(409));C0(e,t,null,null)};S0.prototype.unmount=ck.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rd(function(){C0(null,e,null,null)}),t[Wl]=null}};function S0(e){this._internalRoot=e}S0.prototype.unstable_scheduleHydration=function(e){if(e){var t=HL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jc.length&&t!==0&&t<jc[n].priority;n++);jc.splice(n,0,e),n===0&&GL(e)}};function uk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function k0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function SI(){}function lj(e,t,n,r,a){if(a){if(typeof r=="function"){var u=r;r=function(){var b=Dx(h);u.call(b)}}var h=p3(t,r,e,0,null,!1,!1,"",SI);return e._reactRootContainer=h,e[Wl]=h.current,Og(e.nodeType===8?e.parentNode:e),Rd(),h}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var b=Dx(g);o.call(b)}}var g=sk(e,0,!1,null,null,!1,!1,"",SI);return e._reactRootContainer=g,e[Wl]=g.current,Og(e.nodeType===8?e.parentNode:e),Rd(function(){C0(t,g,n,r)}),g}function T0(e,t,n,r,a){var u=n._reactRootContainer;if(u){var h=u;if(typeof a=="function"){var o=a;a=function(){var g=Dx(h);o.call(g)}}C0(t,h,e,a)}else h=lj(n,t,e,a,r);return Dx(h)}$L=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tg(t.pendingLanes);n!==0&&(MS(t,n|1),ga(t,Vi()),(Er&6)===0&&(jp=Vi()+500,hu()))}break;case 13:Rd(function(){var r=Gl(e,1);if(r!==null){var a=Jo();Ds(r,e,1,a)}}),lk(e,1)}};IS=function(e){if(e.tag===13){var t=Gl(e,134217728);if(t!==null){var n=Jo();Ds(t,e,134217728,n)}lk(e,134217728)}};VL=function(e){if(e.tag===13){var t=tu(e),n=Gl(e,t);if(n!==null){var r=Jo();Ds(n,e,t,r)}lk(e,t)}};HL=function(){return Zr};WL=function(e,t){var n=Zr;try{return Zr=e,t()}finally{Zr=n}};UE=function(e,t,n){switch(t){case"input":if(RE(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=v0(r);if(!a)throw Error(qt(90));wL(r),RE(r,a)}}}break;case"textarea":CL(e,n);break;case"select":t=n.value,t!=null&&bp(e,!!n.multiple,t,!1)}};PL=rk;DL=Rd;var cj={usingClientEntryPoint:!1,Events:[av,up,v0,ML,IL,rk]},$m={findFiberByHostInstance:yd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},uj={bundleType:$m.bundleType,version:$m.version,rendererPackageName:$m.rendererPackageName,rendererConfig:$m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=OL(e),e===null?null:e.stateNode},findFiberByHostInstance:$m.findFiberByHostInstance||sj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var E_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!E_.isDisabled&&E_.supportsFiber)try{p0=E_.inject(uj),ul=E_}catch{}}za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cj;za.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uk(t))throw Error(qt(200));return aj(e,t,null,n)};za.createRoot=function(e,t){if(!uk(e))throw Error(qt(299));var n=!1,r="",a=f3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=sk(e,1,!1,null,null,n,!1,r,a),e[Wl]=t.current,Og(e.nodeType===8?e.parentNode:e),new ck(t)};za.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(qt(188)):(e=Object.keys(e).join(","),Error(qt(268,e)));return e=OL(t),e=e===null?null:e.stateNode,e};za.flushSync=function(e){return Rd(e)};za.hydrate=function(e,t,n){if(!k0(t))throw Error(qt(200));return T0(null,e,t,!0,n)};za.hydrateRoot=function(e,t,n){if(!uk(e))throw Error(qt(405));var r=n!=null&&n.hydratedSources||null,a=!1,u="",h=f3;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),t=p3(t,null,e,1,n!=null?n:null,a,!1,u,h),e[Wl]=t.current,Og(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new S0(t)};za.render=function(e,t,n){if(!k0(t))throw Error(qt(200));return T0(null,e,t,!1,n)};za.unmountComponentAtNode=function(e){if(!k0(e))throw Error(qt(40));return e._reactRootContainer?(Rd(function(){T0(null,null,e,!1,function(){e._reactRootContainer=null,e[Wl]=null})}),!0):!1};za.unstable_batchedUpdates=rk;za.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!k0(n))throw Error(qt(200));if(e==null||e._reactInternals===void 0)throw Error(qt(38));return T0(e,t,n,!1,r)};za.version="18.2.0-next-9e3b772b8-20220608";function m3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m3)}catch(e){console.error(e)}}m3(),Zc.exports=za;var C_=Zc.exports,g3,kI=Zc.exports;g3=kI.createRoot,kI.hydrateRoot;function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ve.apply(this,arguments)}var bd;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bd||(bd={}));var TI=function(e){return e},AI="beforeunload",dj="popstate";function hj(e){e===void 0&&(e={});var t=e,n=t.window,r=n===void 0?document.defaultView:n,a=r.history;function u(){var P=r.location,Y=P.pathname,ne=P.search,ae=P.hash,oe=a.state||{};return[oe.idx,TI({pathname:Y,search:ne,hash:ae,state:oe.usr||null,key:oe.key||"default"})]}var h=null;function o(){if(h)F.call(h),h=null;else{var P=bd.Pop,Y=u(),ne=Y[0],ae=Y[1];if(F.length){if(ne!=null){var oe=A-ne;oe&&(h={action:P,location:ae,retry:function(){S(oe*-1)}},S(oe))}}else W(P)}}r.addEventListener(dj,o);var g=bd.Pop,b=u(),A=b[0],D=b[1],z=II(),F=II();A==null&&(A=0,a.replaceState(Ve({},a.state,{idx:A}),""));function N(P){return typeof P=="string"?P:_C(P)}function T(P,Y){return Y===void 0&&(Y=null),TI(Ve({pathname:D.pathname,hash:"",search:""},typeof P=="string"?$d(P):P,{state:Y,key:pj()}))}function H(P,Y){return[{usr:P.state,key:P.key,idx:Y},N(P)]}function j(P,Y,ne){return!F.length||(F.call({action:P,location:Y,retry:ne}),!1)}function W(P){g=P;var Y=u();A=Y[0],D=Y[1],z.call({action:g,location:D})}function B(P,Y){var ne=bd.Push,ae=T(P,Y);function oe(){B(P,Y)}if(j(ne,ae,oe)){var fe=H(ae,A+1),Re=fe[0],Be=fe[1];try{a.pushState(Re,"",Be)}catch{r.location.assign(Be)}W(ne)}}function O(P,Y){var ne=bd.Replace,ae=T(P,Y);function oe(){O(P,Y)}if(j(ne,ae,oe)){var fe=H(ae,A),Re=fe[0],Be=fe[1];a.replaceState(Re,"",Be),W(ne)}}function S(P){a.go(P)}var w={get action(){return g},get location(){return D},createHref:N,push:B,replace:O,go:S,back:function(){S(-1)},forward:function(){S(1)},listen:function(Y){return z.push(Y)},block:function(Y){var ne=F.push(Y);return F.length===1&&r.addEventListener(AI,MI),function(){ne(),F.length||r.removeEventListener(AI,MI)}}};return w}function MI(e){e.preventDefault(),e.returnValue=""}function II(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(r){return r!==n})}},call:function(n){e.forEach(function(r){return r&&r(n)})}}}function pj(){return Math.random().toString(36).substr(2,8)}function _C(e){var t=e.pathname,n=t===void 0?"/":t,r=e.search,a=r===void 0?"":r,u=e.hash,h=u===void 0?"":u;return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),h&&h!=="#"&&(n+=h.charAt(0)==="#"?h:"#"+h),n}function $d(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const dk=m.exports.createContext(null),hk=m.exports.createContext(null),lv=m.exports.createContext({outlet:null,matches:[]});function fl(e,t){if(!e)throw new Error(t)}function fj(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?$d(t):t,a=_3(r.pathname||"/",n);if(a==null)return null;let u=v3(e);mj(u);let h=null;for(let o=0;h==null&&o<u.length;++o)h=Cj(u[o],a);return h}function v3(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((a,u)=>{let h={relativePath:a.path||"",caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};h.relativePath.startsWith("/")&&(h.relativePath.startsWith(r)||fl(!1),h.relativePath=h.relativePath.slice(r.length));let o=ru([r,h.relativePath]),g=n.concat(h);a.children&&a.children.length>0&&(a.index===!0&&fl(!1),v3(a.children,t,g,o)),!(a.path==null&&!a.index)&&t.push({path:o,score:wj(o,a.index),routesMeta:g})}),t}function mj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ej(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gj=/^:\w+$/,vj=3,yj=2,_j=1,xj=10,bj=-2,PI=e=>e==="*";function wj(e,t){let n=e.split("/"),r=n.length;return n.some(PI)&&(r+=bj),t&&(r+=yj),n.filter(a=>!PI(a)).reduce((a,u)=>a+(gj.test(u)?vj:u===""?_j:xj),r)}function Ej(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function Cj(e,t){let{routesMeta:n}=e,r={},a="/",u=[];for(let h=0;h<n.length;++h){let o=n[h],g=h===n.length-1,b=a==="/"?t:t.slice(a.length)||"/",A=Sj({path:o.relativePath,caseSensitive:o.caseSensitive,end:g},b);if(!A)return null;Object.assign(r,A.params);let D=o.route;u.push({params:r,pathname:ru([a,A.pathname]),pathnameBase:x3(ru([a,A.pathnameBase])),route:D}),A.pathnameBase!=="/"&&(a=ru([a,A.pathnameBase]))}return u}function Sj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=kj(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((b,A,D)=>{if(A==="*"){let z=o[D]||"";h=u.slice(0,u.length-z.length).replace(/(.)\/+$/,"$1")}return b[A]=Tj(o[D]||""),b},{}),pathname:u,pathnameBase:h,pattern:e}}function kj(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(h,o)=>(r.push(o),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(a,t?void 0:"i"),r]}function Tj(e,t){try{return decodeURIComponent(e)}catch{return e}}function Aj(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?$d(e):e;return{pathname:n?n.startsWith("/")?n:Mj(n,t):t,search:Pj(r),hash:Dj(a)}}function Mj(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function y3(e,t,n){let r=typeof e=="string"?$d(e):e,a=e===""||r.pathname===""?"/":r.pathname,u;if(a==null)u=n;else{let o=t.length-1;if(a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),o-=1;r.pathname=g.join("/")}u=o>=0?t[o]:"/"}let h=Aj(r,u);return a&&a!=="/"&&a.endsWith("/")&&!h.pathname.endsWith("/")&&(h.pathname+="/"),h}function Ij(e){return e===""||e.pathname===""?"/":typeof e=="string"?$d(e).pathname:e.pathname}function _3(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&n!=="/"?null:e.slice(t.length)||"/"}const ru=e=>e.join("/").replace(/\/\/+/g,"/"),x3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Pj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Dj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Rj(e){cv()||fl(!1);let{basename:t,navigator:n}=m.exports.useContext(dk),{hash:r,pathname:a,search:u}=pk(e),h=a;if(t!=="/"){let o=Ij(e),g=o!=null&&o.endsWith("/");h=a==="/"?t+(g?"/":""):ru([t,a])}return n.createHref({pathname:h,search:u,hash:r})}function cv(){return m.exports.useContext(hk)!=null}function Qp(){return cv()||fl(!1),m.exports.useContext(hk).location}function Ii(){cv()||fl(!1);let{basename:e,navigator:t}=m.exports.useContext(dk),{matches:n}=m.exports.useContext(lv),{pathname:r}=Qp(),a=JSON.stringify(n.map(o=>o.pathnameBase)),u=m.exports.useRef(!1);return m.exports.useEffect(()=>{u.current=!0}),m.exports.useCallback(function(o,g){if(g===void 0&&(g={}),!u.current)return;if(typeof o=="number"){t.go(o);return}let b=y3(o,JSON.parse(a),r);e!=="/"&&(b.pathname=ru([e,b.pathname])),(g.replace?t.replace:t.push)(b,g.state)},[e,t,a,r])}function ef(){let{matches:e}=m.exports.useContext(lv),t=e[e.length-1];return t?t.params:{}}function pk(e){let{matches:t}=m.exports.useContext(lv),{pathname:n}=Qp(),r=JSON.stringify(t.map(a=>a.pathnameBase));return m.exports.useMemo(()=>y3(e,JSON.parse(r),n),[e,r,n])}function Lj(e,t){cv()||fl(!1);let{matches:n}=m.exports.useContext(lv),r=n[n.length-1],a=r?r.params:{};r&&r.pathname;let u=r?r.pathnameBase:"/";r&&r.route;let h=Qp(),o;if(t){var g;let z=typeof t=="string"?$d(t):t;u==="/"||((g=z.pathname)==null?void 0:g.startsWith(u))||fl(!1),o=z}else o=h;let b=o.pathname||"/",A=u==="/"?b:b.slice(u.length)||"/",D=fj(e,{pathname:A});return Oj(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},a,z.params),pathname:ru([u,z.pathname]),pathnameBase:z.pathnameBase==="/"?u:ru([u,z.pathnameBase])})),n)}function Oj(e,t){return t===void 0&&(t=[]),e==null?null:e.reduceRight((n,r,a)=>m.exports.createElement(lv.Provider,{children:r.route.element!==void 0?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}}),null)}function Ui(e){fl(!1)}function zj(e){let{basename:t="/",children:n=null,location:r,navigationType:a=bd.Pop,navigator:u,static:h=!1}=e;cv()&&fl(!1);let o=x3(t),g=m.exports.useMemo(()=>({basename:o,navigator:u,static:h}),[o,u,h]);typeof r=="string"&&(r=$d(r));let{pathname:b="/",search:A="",hash:D="",state:z=null,key:F="default"}=r,N=m.exports.useMemo(()=>{let T=_3(b,o);return T==null?null:{pathname:T,search:A,hash:D,state:z,key:F}},[o,b,A,D,z,F]);return N==null?null:m.exports.createElement(dk.Provider,{value:g},m.exports.createElement(hk.Provider,{children:n,value:{location:N,navigationType:a}}))}function Bj(e){let{children:t,location:n}=e;return Lj(xC(t),n)}function xC(e){let t=[];return m.exports.Children.forEach(e,n=>{if(!m.exports.isValidElement(n))return;if(n.type===m.exports.Fragment){t.push.apply(t,xC(n.props.children));return}n.type!==Ui&&fl(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=xC(n.props.children)),t.push(r)}),t}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rx(){return Rx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rx.apply(this,arguments)}function b3(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,u;for(u=0;u<r.length;u++)a=r[u],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}const Fj=["onClick","reloadDocument","replace","state","target","to"],Nj=["aria-current","caseSensitive","className","end","style","to","children"];function Uj(e){let{basename:t,children:n,window:r}=e,a=m.exports.useRef();a.current==null&&(a.current=hj({window:r}));let u=a.current,[h,o]=m.exports.useState({action:u.action,location:u.location});return m.exports.useLayoutEffect(()=>u.listen(o),[u]),m.exports.createElement(zj,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:u})}function jj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const nn=m.exports.forwardRef(function(t,n){let{onClick:r,reloadDocument:a,replace:u=!1,state:h,target:o,to:g}=t,b=b3(t,Fj),A=Rj(g),D=Vj(g,{replace:u,state:h,target:o});function z(F){r&&r(F),!F.defaultPrevented&&!a&&D(F)}return m.exports.createElement("a",Rx({},b,{href:A,onClick:z,ref:n,target:o}))}),$j=m.exports.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:u="",end:h=!1,style:o,to:g,children:b}=t,A=b3(t,Nj),D=Qp(),z=pk(g),F=D.pathname,N=z.pathname;a||(F=F.toLowerCase(),N=N.toLowerCase());let T=F===N||!h&&F.startsWith(N)&&F.charAt(N.length)==="/",H=T?r:void 0,j;typeof u=="function"?j=u({isActive:T}):j=[u,T?"active":null].filter(Boolean).join(" ");let W=typeof o=="function"?o({isActive:T}):o;return m.exports.createElement(nn,Rx({},A,{"aria-current":H,className:j,ref:n,style:W,to:g}),typeof b=="function"?b({isActive:T}):b)});function Vj(e,t){let{target:n,replace:r,state:a}=t===void 0?{}:t,u=Ii(),h=Qp(),o=pk(e);return m.exports.useCallback(g=>{if(g.button===0&&(!n||n==="_self")&&!jj(g)){g.preventDefault();let b=!!r||_C(h)===_C(o);u(e,{replace:b,state:a})}},[h,u,o,r,a,n,e])}const Vm=()=>localStorage.getItem("token"),Hj=e=>{localStorage.setItem("token",e)},Wj=()=>localStorage.getItem("refresh"),w3=e=>{localStorage.setItem("refresh",e)},Eo=()=>!!localStorage.getItem("token"),Gj=()=>{localStorage.removeItem("token"),localStorage.removeItem("refresh")};function bC(e){this.message=e}bC.prototype=new Error,bC.prototype.name="InvalidCharacterError";var DI=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new bC("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,a=0,u=0,h="";r=t.charAt(u++);~r&&(n=a%4?64*n+r:r,a++%4)?h+=String.fromCharCode(255&n>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return h};function qj(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(DI(n).replace(/(.)/g,function(r,a){var u=a.charCodeAt(0).toString(16).toUpperCase();return u.length<2&&(u="0"+u),"%"+u}))}(t)}catch{return DI(t)}}function Lx(e){this.message=e}function Zj(e,t){if(typeof e!="string")throw new Lx("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(qj(e.split(".")[n]))}catch(r){throw new Lx("Invalid token specified: "+r.message)}}Lx.prototype=new Error,Lx.prototype.name="InvalidTokenError";function E3(e,t){return function(){return e.apply(t,arguments)}}const{toString:C3}=Object.prototype,{getPrototypeOf:fk}=Object,mk=(e=>t=>{const n=C3.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ql=e=>(e=e.toLowerCase(),t=>mk(t)===e),A0=e=>t=>typeof t===e,{isArray:tf}=Array,Hg=A0("undefined");function Xj(e){return e!==null&&!Hg(e)&&e.constructor!==null&&!Hg(e.constructor)&&Ld(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const S3=Ql("ArrayBuffer");function Kj(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&S3(e.buffer),t}const Yj=A0("string"),Ld=A0("function"),k3=A0("number"),gk=e=>e!==null&&typeof e=="object",Jj=e=>e===!0||e===!1,Z_=e=>{if(mk(e)!=="object")return!1;const t=fk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Qj=Ql("Date"),e7=Ql("File"),t7=Ql("Blob"),n7=Ql("FileList"),r7=e=>gk(e)&&Ld(e.pipe),i7=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||C3.call(e)===t||Ld(e.toString)&&e.toString()===t)},o7=Ql("URLSearchParams"),a7=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uv(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e=="undefined")return;let r,a;if(typeof e!="object"&&(e=[e]),tf(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{const u=n?Object.getOwnPropertyNames(e):Object.keys(e),h=u.length;let o;for(r=0;r<h;r++)o=u[r],t.call(null,e[o],o,e)}}function T3(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const A3=typeof self=="undefined"?typeof global=="undefined"?globalThis:global:self,M3=e=>!Hg(e)&&e!==A3;function wC(){const{caseless:e}=M3(this)&&this||{},t={},n=(r,a)=>{const u=e&&T3(t,a)||a;Z_(t[u])&&Z_(r)?t[u]=wC(t[u],r):Z_(r)?t[u]=wC({},r):tf(r)?t[u]=r.slice():t[u]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&uv(arguments[r],n);return t}const s7=(e,t,n,{allOwnKeys:r}={})=>(uv(t,(a,u)=>{n&&Ld(a)?e[u]=E3(a,n):e[u]=a},{allOwnKeys:r}),e),l7=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),c7=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},u7=(e,t,n,r)=>{let a,u,h;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),u=a.length;u-- >0;)h=a[u],(!r||r(h,e,t))&&!o[h]&&(t[h]=e[h],o[h]=!0);e=n!==!1&&fk(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},d7=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},h7=e=>{if(!e)return null;if(tf(e))return e;let t=e.length;if(!k3(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},p7=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&fk(Uint8Array)),f7=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=r.next())&&!a.done;){const u=a.value;t.call(e,u[0],u[1])}},m7=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},g7=Ql("HTMLFormElement"),v7=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),RI=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),y7=Ql("RegExp"),I3=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};uv(n,(a,u)=>{t(a,u,e)!==!1&&(r[u]=a)}),Object.defineProperties(e,r)},_7=e=>{I3(e,(t,n)=>{if(Ld(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(!!Ld(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},x7=(e,t)=>{const n={},r=a=>{a.forEach(u=>{n[u]=!0})};return tf(e)?r(e):r(String(e).split(t)),n},b7=()=>{},w7=(e,t)=>(e=+e,Number.isFinite(e)?e:t),E7=e=>{const t=new Array(10),n=(r,a)=>{if(gk(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[a]=r;const u=tf(r)?[]:{};return uv(r,(h,o)=>{const g=n(h,a+1);!Hg(g)&&(u[o]=g)}),t[a]=void 0,u}}return r};return n(e,0)};var zt={isArray:tf,isArrayBuffer:S3,isBuffer:Xj,isFormData:i7,isArrayBufferView:Kj,isString:Yj,isNumber:k3,isBoolean:Jj,isObject:gk,isPlainObject:Z_,isUndefined:Hg,isDate:Qj,isFile:e7,isBlob:t7,isRegExp:y7,isFunction:Ld,isStream:r7,isURLSearchParams:o7,isTypedArray:p7,isFileList:n7,forEach:uv,merge:wC,extend:s7,trim:a7,stripBOM:l7,inherits:c7,toFlatObject:u7,kindOf:mk,kindOfTest:Ql,endsWith:d7,toArray:h7,forEachEntry:f7,matchAll:m7,isHTMLForm:g7,hasOwnProperty:RI,hasOwnProp:RI,reduceDescriptors:I3,freezeMethods:_7,toObjectSet:x7,toCamelCase:v7,noop:b7,toFiniteNumber:w7,findKey:T3,global:A3,isContextDefined:M3,toJSONObject:E7};function wr(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}zt.inherits(wr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:zt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const P3=wr.prototype,D3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{D3[e]={value:e}});Object.defineProperties(wr,D3);Object.defineProperty(P3,"isAxiosError",{value:!0});wr.from=(e,t,n,r,a,u)=>{const h=Object.create(P3);return zt.toFlatObject(e,h,function(g){return g!==Error.prototype},o=>o!=="isAxiosError"),wr.call(h,e.message,t,n,r,a),h.cause=e,h.name=e.name,u&&Object.assign(h,u),h};var C7=typeof self=="object"?self.FormData:window.FormData,S7=C7;function EC(e){return zt.isPlainObject(e)||zt.isArray(e)}function R3(e){return zt.endsWith(e,"[]")?e.slice(0,-2):e}function LI(e,t,n){return e?e.concat(t).map(function(a,u){return a=R3(a),!n&&u?"["+a+"]":a}).join(n?".":""):t}function k7(e){return zt.isArray(e)&&!e.some(EC)}const T7=zt.toFlatObject(zt,{},null,function(t){return/^is[A-Z]/.test(t)});function A7(e){return e&&zt.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function M0(e,t,n){if(!zt.isObject(e))throw new TypeError("target must be an object");t=t||new(S7||FormData),n=zt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,H){return!zt.isUndefined(H[T])});const r=n.metaTokens,a=n.visitor||A,u=n.dots,h=n.indexes,g=(n.Blob||typeof Blob!="undefined"&&Blob)&&A7(t);if(!zt.isFunction(a))throw new TypeError("visitor must be a function");function b(N){if(N===null)return"";if(zt.isDate(N))return N.toISOString();if(!g&&zt.isBlob(N))throw new wr("Blob is not supported. Use a Buffer instead.");return zt.isArrayBuffer(N)||zt.isTypedArray(N)?g&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function A(N,T,H){let j=N;if(N&&!H&&typeof N=="object"){if(zt.endsWith(T,"{}"))T=r?T:T.slice(0,-2),N=JSON.stringify(N);else if(zt.isArray(N)&&k7(N)||zt.isFileList(N)||zt.endsWith(T,"[]")&&(j=zt.toArray(N)))return T=R3(T),j.forEach(function(B,O){!(zt.isUndefined(B)||B===null)&&t.append(h===!0?LI([T],O,u):h===null?T:T+"[]",b(B))}),!1}return EC(N)?!0:(t.append(LI(H,T,u),b(N)),!1)}const D=[],z=Object.assign(T7,{defaultVisitor:A,convertValue:b,isVisitable:EC});function F(N,T){if(!zt.isUndefined(N)){if(D.indexOf(N)!==-1)throw Error("Circular reference detected in "+T.join("."));D.push(N),zt.forEach(N,function(j,W){(!(zt.isUndefined(j)||j===null)&&a.call(t,j,zt.isString(W)?W.trim():W,T,z))===!0&&F(j,T?T.concat(W):[W])}),D.pop()}}if(!zt.isObject(e))throw new TypeError("data must be an object");return F(e),t}function OI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function vk(e,t){this._pairs=[],e&&M0(e,this,t)}const L3=vk.prototype;L3.append=function(t,n){this._pairs.push([t,n])};L3.toString=function(t){const n=t?function(r){return t.call(this,r,OI)}:OI;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function M7(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function O3(e,t,n){if(!t)return e;const r=n&&n.encode||M7,a=n&&n.serialize;let u;if(a?u=a(t,n):u=zt.isURLSearchParams(t)?t.toString():new vk(t,n).toString(r),u){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class I7{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){zt.forEach(this.handlers,function(r){r!==null&&t(r)})}}var zI=I7,z3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},P7=typeof URLSearchParams!="undefined"?URLSearchParams:vk,D7=FormData;const R7=(()=>{let e;return typeof navigator!="undefined"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"})();var $l={isBrowser:!0,classes:{URLSearchParams:P7,FormData:D7,Blob},isStandardBrowserEnv:R7,protocols:["http","https","file","blob","url","data"]};function L7(e,t){return M0(e,new $l.classes.URLSearchParams,Object.assign({visitor:function(n,r,a,u){return $l.isNode&&zt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function O7(e){return zt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function z7(e){const t={},n=Object.keys(e);let r;const a=n.length;let u;for(r=0;r<a;r++)u=n[r],t[u]=e[u];return t}function B3(e){function t(n,r,a,u){let h=n[u++];const o=Number.isFinite(+h),g=u>=n.length;return h=!h&&zt.isArray(a)?a.length:h,g?(zt.hasOwnProp(a,h)?a[h]=[a[h],r]:a[h]=r,!o):((!a[h]||!zt.isObject(a[h]))&&(a[h]=[]),t(n,r,a[h],u)&&zt.isArray(a[h])&&(a[h]=z7(a[h])),!o)}if(zt.isFormData(e)&&zt.isFunction(e.entries)){const n={};return zt.forEachEntry(e,(r,a)=>{t(O7(r),a,n,0)}),n}return null}const B7={"Content-Type":void 0};function F7(e,t,n){if(zt.isString(e))try{return(t||JSON.parse)(e),zt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const I0={transitional:z3,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,u=zt.isObject(t);if(u&&zt.isHTMLForm(t)&&(t=new FormData(t)),zt.isFormData(t))return a&&a?JSON.stringify(B3(t)):t;if(zt.isArrayBuffer(t)||zt.isBuffer(t)||zt.isStream(t)||zt.isFile(t)||zt.isBlob(t))return t;if(zt.isArrayBufferView(t))return t.buffer;if(zt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(u){if(r.indexOf("application/x-www-form-urlencoded")>-1)return L7(t,this.formSerializer).toString();if((o=zt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return M0(o?{"files[]":t}:t,g&&new g,this.formSerializer)}}return u||a?(n.setContentType("application/json",!1),F7(t)):t}],transformResponse:[function(t){const n=this.transitional||I0.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(t&&zt.isString(t)&&(r&&!this.responseType||a)){const h=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(o){if(h)throw o.name==="SyntaxError"?wr.from(o,wr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$l.classes.FormData,Blob:$l.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};zt.forEach(["delete","get","head"],function(t){I0.headers[t]={}});zt.forEach(["post","put","patch"],function(t){I0.headers[t]=zt.merge(B7)});var yk=I0;const N7=zt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var U7=e=>{const t={};let n,r,a;return e&&e.split(`
`).forEach(function(h){a=h.indexOf(":"),n=h.substring(0,a).trim().toLowerCase(),r=h.substring(a+1).trim(),!(!n||t[n]&&N7[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t};const BI=Symbol("internals");function Hm(e){return e&&String(e).trim().toLowerCase()}function X_(e){return e===!1||e==null?e:zt.isArray(e)?e.map(X_):String(e)}function j7(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}function $7(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function FI(e,t,n,r){if(zt.isFunction(r))return r.call(this,t,n);if(!!zt.isString(t)){if(zt.isString(r))return t.indexOf(r)!==-1;if(zt.isRegExp(r))return r.test(t)}}function V7(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function H7(e,t){const n=zt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,u,h){return this[r].call(this,t,a,u,h)},configurable:!0})})}class P0{constructor(t){t&&this.set(t)}set(t,n,r){const a=this;function u(o,g,b){const A=Hm(g);if(!A)throw new Error("header name must be a non-empty string");const D=zt.findKey(a,A);(!D||a[D]===void 0||b===!0||b===void 0&&a[D]!==!1)&&(a[D||g]=X_(o))}const h=(o,g)=>zt.forEach(o,(b,A)=>u(b,A,g));return zt.isPlainObject(t)||t instanceof this.constructor?h(t,n):zt.isString(t)&&(t=t.trim())&&!$7(t)?h(U7(t),n):t!=null&&u(n,t,r),this}get(t,n){if(t=Hm(t),t){const r=zt.findKey(this,t);if(r){const a=this[r];if(!n)return a;if(n===!0)return j7(a);if(zt.isFunction(n))return n.call(this,a,r);if(zt.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Hm(t),t){const r=zt.findKey(this,t);return!!(r&&(!n||FI(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let a=!1;function u(h){if(h=Hm(h),h){const o=zt.findKey(r,h);o&&(!n||FI(r,r[o],o,n))&&(delete r[o],a=!0)}}return zt.isArray(t)?t.forEach(u):u(t),a}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){const n=this,r={};return zt.forEach(this,(a,u)=>{const h=zt.findKey(r,u);if(h){n[h]=X_(a),delete n[u];return}const o=t?V7(u):String(u).trim();o!==u&&delete n[u],n[o]=X_(a),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return zt.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=t&&zt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[BI]=this[BI]={accessors:{}}).accessors,a=this.prototype;function u(h){const o=Hm(h);r[o]||(H7(a,h),r[o]=!0)}return zt.isArray(t)?t.forEach(u):u(t),this}}P0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);zt.freezeMethods(P0.prototype);zt.freezeMethods(P0);var Vl=P0;function Tw(e,t){const n=this||yk,r=t||n,a=Vl.from(r.headers);let u=r.data;return zt.forEach(e,function(o){u=o.call(n,u,a.normalize(),t?t.status:void 0)}),a.normalize(),u}function F3(e){return!!(e&&e.__CANCEL__)}function dv(e,t,n){wr.call(this,e==null?"canceled":e,wr.ERR_CANCELED,t,n),this.name="CanceledError"}zt.inherits(dv,wr,{__CANCEL__:!0});var W7=null;function G7(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new wr("Request failed with status code "+n.status,[wr.ERR_BAD_REQUEST,wr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var q7=$l.isStandardBrowserEnv?function(){return{write:function(n,r,a,u,h,o){const g=[];g.push(n+"="+encodeURIComponent(r)),zt.isNumber(a)&&g.push("expires="+new Date(a).toGMTString()),zt.isString(u)&&g.push("path="+u),zt.isString(h)&&g.push("domain="+h),o===!0&&g.push("secure"),document.cookie=g.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Z7(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function X7(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function N3(e,t){return e&&!Z7(t)?X7(e,t):t}var K7=$l.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function a(u){let h=u;return t&&(n.setAttribute("href",h),h=n.href),n.setAttribute("href",h),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=a(window.location.href),function(h){const o=zt.isString(h)?a(h):h;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}();function Y7(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function J7(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a=0,u=0,h;return t=t!==void 0?t:1e3,function(g){const b=Date.now(),A=r[u];h||(h=b),n[a]=g,r[a]=b;let D=u,z=0;for(;D!==a;)z+=n[D++],D=D%e;if(a=(a+1)%e,a===u&&(u=(u+1)%e),b-h<t)return;const F=A&&b-A;return F?Math.round(z*1e3/F):void 0}}function NI(e,t){let n=0;const r=J7(50,250);return a=>{const u=a.loaded,h=a.lengthComputable?a.total:void 0,o=u-n,g=r(o),b=u<=h;n=u;const A={loaded:u,total:h,progress:h?u/h:void 0,bytes:o,rate:g||void 0,estimated:g&&h&&b?(h-u)/g:void 0,event:a};A[t?"download":"upload"]=!0,e(A)}}const Q7=typeof XMLHttpRequest!="undefined";var e$=Q7&&function(e){return new Promise(function(n,r){let a=e.data;const u=Vl.from(e.headers).normalize(),h=e.responseType;let o;function g(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}zt.isFormData(a)&&$l.isStandardBrowserEnv&&u.setContentType(!1);let b=new XMLHttpRequest;if(e.auth){const F=e.auth.username||"",N=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.set("Authorization","Basic "+btoa(F+":"+N))}const A=N3(e.baseURL,e.url);b.open(e.method.toUpperCase(),O3(A,e.params,e.paramsSerializer),!0),b.timeout=e.timeout;function D(){if(!b)return;const F=Vl.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),T={data:!h||h==="text"||h==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:F,config:e,request:b};G7(function(j){n(j),g()},function(j){r(j),g()},T),b=null}if("onloadend"in b?b.onloadend=D:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(D)},b.onabort=function(){!b||(r(new wr("Request aborted",wr.ECONNABORTED,e,b)),b=null)},b.onerror=function(){r(new wr("Network Error",wr.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let N=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const T=e.transitional||z3;e.timeoutErrorMessage&&(N=e.timeoutErrorMessage),r(new wr(N,T.clarifyTimeoutError?wr.ETIMEDOUT:wr.ECONNABORTED,e,b)),b=null},$l.isStandardBrowserEnv){const F=(e.withCredentials||K7(A))&&e.xsrfCookieName&&q7.read(e.xsrfCookieName);F&&u.set(e.xsrfHeaderName,F)}a===void 0&&u.setContentType(null),"setRequestHeader"in b&&zt.forEach(u.toJSON(),function(N,T){b.setRequestHeader(T,N)}),zt.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),h&&h!=="json"&&(b.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&b.addEventListener("progress",NI(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",NI(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=F=>{!b||(r(!F||F.type?new dv(null,e,b):F),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const z=Y7(A);if(z&&$l.protocols.indexOf(z)===-1){r(new wr("Unsupported protocol "+z+":",wr.ERR_BAD_REQUEST,e));return}b.send(a||null)})};const K_={http:W7,xhr:e$};zt.forEach(K_,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var t$={getAdapter:e=>{e=zt.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let a=0;a<t&&(n=e[a],!(r=zt.isString(n)?K_[n.toLowerCase()]:n));a++);if(!r)throw r===!1?new wr(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(zt.hasOwnProp(K_,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!zt.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:K_};function Aw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dv}function UI(e){return Aw(e),e.headers=Vl.from(e.headers),e.data=Tw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),t$.getAdapter(e.adapter||yk.adapter)(e).then(function(r){return Aw(e),r.data=Tw.call(e,e.transformResponse,r),r.headers=Vl.from(r.headers),r},function(r){return F3(r)||(Aw(e),r&&r.response&&(r.response.data=Tw.call(e,e.transformResponse,r.response),r.response.headers=Vl.from(r.response.headers))),Promise.reject(r)})}const jI=e=>e instanceof Vl?e.toJSON():e;function Wg(e,t){t=t||{};const n={};function r(b,A,D){return zt.isPlainObject(b)&&zt.isPlainObject(A)?zt.merge.call({caseless:D},b,A):zt.isPlainObject(A)?zt.merge({},A):zt.isArray(A)?A.slice():A}function a(b,A,D){if(zt.isUndefined(A)){if(!zt.isUndefined(b))return r(void 0,b,D)}else return r(b,A,D)}function u(b,A){if(!zt.isUndefined(A))return r(void 0,A)}function h(b,A){if(zt.isUndefined(A)){if(!zt.isUndefined(b))return r(void 0,b)}else return r(void 0,A)}function o(b,A,D){if(D in t)return r(b,A);if(D in e)return r(void 0,b)}const g={url:u,method:u,data:u,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:o,headers:(b,A)=>a(jI(b),jI(A),!0)};return zt.forEach(Object.keys(e).concat(Object.keys(t)),function(A){const D=g[A]||a,z=D(e[A],t[A],A);zt.isUndefined(z)&&D!==o||(n[A]=z)}),n}const U3="1.2.0",_k={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_k[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const $I={};_k.transitional=function(t,n,r){function a(u,h){return"[Axios v"+U3+"] Transitional option '"+u+"'"+h+(r?". "+r:"")}return(u,h,o)=>{if(t===!1)throw new wr(a(h," has been removed"+(n?" in "+n:"")),wr.ERR_DEPRECATED);return n&&!$I[h]&&($I[h]=!0,console.warn(a(h," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(u,h,o):!0}};function n$(e,t,n){if(typeof e!="object")throw new wr("options must be an object",wr.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const u=r[a],h=t[u];if(h){const o=e[u],g=o===void 0||h(o,u,e);if(g!==!0)throw new wr("option "+u+" must be "+g,wr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new wr("Unknown option "+u,wr.ERR_BAD_OPTION)}}var CC={assertOptions:n$,validators:_k};const Bc=CC.validators;class Ox{constructor(t){this.defaults=t,this.interceptors={request:new zI,response:new zI}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Wg(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:u}=n;r!==void 0&&CC.assertOptions(r,{silentJSONParsing:Bc.transitional(Bc.boolean),forcedJSONParsing:Bc.transitional(Bc.boolean),clarifyTimeoutError:Bc.transitional(Bc.boolean)},!1),a!==void 0&&CC.assertOptions(a,{encode:Bc.function,serialize:Bc.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h;h=u&&zt.merge(u.common,u[n.method]),h&&zt.forEach(["delete","get","head","post","put","patch","common"],N=>{delete u[N]}),n.headers=Vl.concat(h,u);const o=[];let g=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(g=g&&T.synchronous,o.unshift(T.fulfilled,T.rejected))});const b=[];this.interceptors.response.forEach(function(T){b.push(T.fulfilled,T.rejected)});let A,D=0,z;if(!g){const N=[UI.bind(this),void 0];for(N.unshift.apply(N,o),N.push.apply(N,b),z=N.length,A=Promise.resolve(n);D<z;)A=A.then(N[D++],N[D++]);return A}z=o.length;let F=n;for(D=0;D<z;){const N=o[D++],T=o[D++];try{F=N(F)}catch(H){T.call(this,H);break}}try{A=UI.call(this,F)}catch(N){return Promise.reject(N)}for(D=0,z=b.length;D<z;)A=A.then(b[D++],b[D++]);return A}getUri(t){t=Wg(this.defaults,t);const n=N3(t.baseURL,t.url);return O3(n,t.params,t.paramsSerializer)}}zt.forEach(["delete","get","head","options"],function(t){Ox.prototype[t]=function(n,r){return this.request(Wg(r||{},{method:t,url:n,data:(r||{}).data}))}});zt.forEach(["post","put","patch"],function(t){function n(r){return function(u,h,o){return this.request(Wg(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:u,data:h}))}}Ox.prototype[t]=n(),Ox.prototype[t+"Form"]=n(!0)});var Y_=Ox;class xk{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const r=this;this.promise.then(a=>{if(!r._listeners)return;let u=r._listeners.length;for(;u-- >0;)r._listeners[u](a);r._listeners=null}),this.promise.then=a=>{let u;const h=new Promise(o=>{r.subscribe(o),u=o}).then(a);return h.cancel=function(){r.unsubscribe(u)},h},t(function(u,h,o){r.reason||(r.reason=new dv(u,h,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new xk(function(a){t=a}),cancel:t}}}var r$=xk;function i$(e){return function(n){return e.apply(null,n)}}function o$(e){return zt.isObject(e)&&e.isAxiosError===!0}function j3(e){const t=new Y_(e),n=E3(Y_.prototype.request,t);return zt.extend(n,Y_.prototype,t,{allOwnKeys:!0}),zt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return j3(Wg(e,a))},n}const Ao=j3(yk);Ao.Axios=Y_;Ao.CanceledError=dv;Ao.CancelToken=r$;Ao.isCancel=F3;Ao.VERSION=U3;Ao.toFormData=M0;Ao.AxiosError=wr;Ao.Cancel=Ao.CanceledError;Ao.all=function(t){return Promise.all(t)};Ao.spread=i$;Ao.isAxiosError=o$;Ao.AxiosHeaders=Vl;Ao.formToJSON=e=>B3(zt.isHTMLForm(e)?new FormData(e):e);Ao.default=Ao;var Bl=Ao;const tl="https://maclyonsden.com",mr={BASEURL:tl,AUTH:{LOGIN:`${tl}/api/auth/token`,REFRESH:`${tl}/api/auth/token/refresh`},POST:{USER:`${tl}/api/v3/obj/user/retrieve`,USER_UPDATE:`${tl}/api/v3/obj/user/single`,ANNOUNCEMENT:`${tl}/api/v3/announcement`},USER:`${tl}/api/v3/obj/user/retrieve`,TIMETABLE:`${tl}/api/me/timetable`,COURSES:`${tl}/api/v3/obj/course`,OBJECT:`${tl}/api/v3/obj`},Xr=m.exports.createContext({user:{},allUsers:[],allOrgs:[],allTags:[],setUser:e=>{},updateToken:e=>{},getAPI:(e,t)=>({}),postAPI:(e,t)=>({}),putAPI:(e,t)=>({}),patchAPI:(e,t)=>({}),refreshAuth:()=>{},logout:()=>{},notify:(e,t)=>{},notification:{},closeNotif:()=>{}}),a$=e=>{let[t,n]=m.exports.useState({});const[r,a]=m.exports.useState([]),[u,h]=m.exports.useState([]),[o,g]=m.exports.useState([]),b=Ii(),[A,D]=m.exports.useState({open:!1,type:"",message:""}),z=(P,Y)=>{D({open:!0,type:Y,message:P})},F=(P,Y)=>{Y!=="clickaway"&&D({...A,open:!1})},N=P=>{t=P,n(P)},T=()=>{Eo()&&j(`${mr.USER}/${t.id}`).then(P=>{N({...t,...P.data})}).catch(P=>{S()})};m.exports.useEffect(()=>{Eo()&&(H(Vm()),T()),j(`${mr.OBJECT}/user`).then(P=>{a(P.data.results)}).catch(P=>{}),j(`${mr.OBJECT}/organization`).then(P=>{h(P.data.results)}).catch(P=>{}),j(`${mr.OBJECT}/tag`).then(P=>{g(P.data.results)}).catch(P=>{})},[]);const H=P=>{if(Hj(P),P!==""){let Y=Zj(P);N({...t,id:Y.user_id,registertime:Y.iat}),T()}else N({})};function j(P,Y){Y&&!Eo()&&b("/accounts/login");const ne=Vm();return Bl.get(P,Y?{headers:{Authorization:`Bearer ${ne}`}}:{})}const W=(P,Y)=>{Eo()||b("/accounts/login");const ne=Vm();return Bl.post(P,Y,{headers:{Authorization:`Bearer ${ne}`}})},B=(P,Y)=>{Eo()||b("/accounts/login");const ne=Vm();return Bl.put(P,Y,{headers:{Authorization:`Bearer ${ne}`}})},O=(P,Y)=>{const ne=Vm();return Bl.patch(P,Y,{headers:{Authorization:`Bearer ${ne}`}})},S=()=>{!Eo()||Bl.post(mr.AUTH.REFRESH,{refresh:Wj()},{}).then(P=>{H(P.data.access),w3(P.data.refresh)}).catch(P=>{console.log("Refresh expired. Logging out."),w()})},w=()=>{!Eo()||(N({}),localStorage.removeItem("token"),localStorage.removeItem("refresh"),b("/accounts/login"))};return m.exports.createElement(Xr.Provider,{value:{user:t,allUsers:r,allOrgs:u,allTags:o,setUser:N,updateToken:H,getAPI:j,postAPI:W,putAPI:B,patchAPI:O,refreshAuth:S,logout:w,notify:z,notification:A,closeNotif:F}},e.children)},s$=()=>{const e=Ii(),t=m.exports.useContext(Xr);return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("ul",{className:"sidenav",id:"slide-out",style:{transform:"translateX(-105%)"}},m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/announcements?feed=all"},"All")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/announcements?feed=school"},"School")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/announcements?feed=sac"},"Student Council")),m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/calendar",className:"sidenav-close"},"Calendar")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/clubs",className:"sidenav-close"},"Clubs")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/blog",className:"sidenav-close"},"Content")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/resources",className:"sidenav-close"},"Resources")),m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=history"},"WLMCI")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=about"},"About")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=team"},"Team")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/map"},"Map")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=school"},"Contact WLMCI")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=contact"},"Contact Us")),m.exports.createElement("li",{className:"divider"}),Eo()?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("li",null,m.exports.createElement(zr,{href:`/user/${t.user.id}`,className:"sidenav-close"},"Profile")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/timetable",className:"sidenav-close"},"Timetable")),m.exports.createElement("li",null,m.exports.createElement("a",{className:"nav-link",onClick:n=>{n.preventDefault(),Gj(),e("/accounts/login")}},"Logout"))):m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/accounts/login/?next=/",className:"sidenav-close"},"Login")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/accounts/signup/?next=/",className:"sidenav-close"},"Sign Up")))),m.exports.createElement("nav",null,m.exports.createElement("div",{className:"nav-wrapper"},m.exports.createElement(zr,{href:"/"},m.exports.createElement("div",{className:"brand-logo"},m.exports.createElement("img",{className:"img-logo",src:"/static/img/themes/logos/dark-transparent.png"}))),m.exports.createElement("a",{href:"#","data-target":"slide-out",className:"sidenav-trigger"},m.exports.createElement("i",{className:"zmdi zmdi-menu"})),m.exports.createElement("ul",{className:"right hide-on-med-and-down"},m.exports.createElement("li",null,m.exports.createElement("a",{className:"dropdown-trigger","data-target":"dropdownAnnouncements"},"Announcements",m.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),m.exports.createElement("ul",{id:"dropdownAnnouncements",className:"dropdown-content"},m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/announcements?feed=all"},"All")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/announcements?feed=school"},"School")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/announcements?feed=sac"},"Student Council")))),m.exports.createElement("li",{className:"nav-item"},m.exports.createElement(zr,{href:"/calendar"},"Calendar")),m.exports.createElement("li",{className:"nav-item"},m.exports.createElement(zr,{href:"/clubs"},"Clubs")),m.exports.createElement("li",{className:"nav-item"},m.exports.createElement(zr,{href:"/blog"},"Content")),m.exports.createElement("li",{className:"nav-item"},m.exports.createElement(zr,{href:"/resources"},"Resources")),m.exports.createElement("li",null,m.exports.createElement("a",{className:"dropdown-trigger",href:"/#!","data-target":"dropdownAbout"},"About",m.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),m.exports.createElement("ul",{id:"dropdownAbout",className:"dropdown-content"},m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=history"},"WLMCI")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=about"},"About")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=team"},"Team")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/map"},"Map")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=school"},"Contact WLMCI")),m.exports.createElement("li",null,m.exports.createElement(zr,{href:"/about?tab=contact"},"Contact Us")))),m.exports.createElement("li",null,Eo()?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("a",{className:"dropdown-trigger",href:"https://maclyonsden.com/user/ji.mmyliu#!","data-target":"dropdownAcc"},"Account",m.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),m.exports.createElement("ul",{id:"dropdownAcc",className:"dropdown-content",tabIndex:0},m.exports.createElement("li",{tabIndex:0},m.exports.createElement(nn,{to:`/user/${t.user.id}`},"Profile")),m.exports.createElement("li",{tabIndex:0},m.exports.createElement(nn,{to:"/timetable"},"Timetable")),t.user.is_staff&&m.exports.createElement("li",{tabIndex:0},m.exports.createElement("a",{href:"/admin/"},"Admin")),m.exports.createElement("li",{tabIndex:0},m.exports.createElement(nn,{to:"/accounts/logout"},"Logout")))):m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("a",{className:"dropdown-trigger",href:"/#!","data-target":"dropdownAcc"},"Login/Sign Up",m.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),m.exports.createElement("ul",{id:"dropdownAcc",className:"dropdown-content"},m.exports.createElement("li",null,m.exports.createElement(zx,{href:"/accounts/login/?next=/"},"Login")),m.exports.createElement("li",null,m.exports.createElement(zx,{href:"/accounts/signup/?next=/"},"Sign Up")))))))))},zr=e=>{const t=Ii();return m.exports.createElement("a",{className:"nav-link",href:e.href,onClick:n=>{n.preventDefault(),t(e.href)}},e.children)},zx=e=>{const t=Ii();return m.exports.createElement("a",{href:e.href,className:e.className,onClick:n=>{n.preventDefault(),t(e.href)}},e.children)},l$=()=>(Ii(),m.exports.createElement("div",{className:"footer"},m.exports.createElement("div",{className:"footer-title-par"},m.exports.createElement("p",{className:"footer-title"},"William Lyon Mackenzie's online hub for announcements, calendar events, clubs, and timetables."),m.exports.createElement("p",{className:"footer-title"},m.exports.createElement(nn,{to:"/terms"},"Terms of Service")," and ",m.exports.createElement(nn,{to:"/privacy"},"Privacy Policy"))),m.exports.createElement("hr",{className:"footer-bar"}),m.exports.createElement("div",{className:"foooter-icon-par"},m.exports.createElement("a",{className:"footer-name",href:"https://github.com/wlmac/metropolis",rel:"noreferrer",target:"_blank"},m.exports.createElement("i",{className:"footer-icon zmdi zmdi-hc-3x zmdi-github"}))))),c$=()=>{Ii(),m.exports.useEffect(()=>{document.title="Home | Metropolis"},[]);const[e,t]=m.exports.useState({});return m.exports.useEffect(()=>{const n=`${mr.OBJECT}/blog-post`;Bl.get(n).then(r=>{t(r.data.results[0])})},[]),m.exports.createElement("div",{id:"content-container"},m.exports.createElement("div",{className:"banner"},m.exports.createElement("div",{className:"background"},m.exports.createElement("img",{src:"/static/img/themes/banners/summer.jpg"})),m.exports.createElement("div",{className:"overlay-container valign-wrapper"},m.exports.createElement("div",{className:"next-class center-align"},m.exports.createElement("h4",{className:"schedule-course"},"No School"),m.exports.createElement("span",{className:"schedule-description"},"Enjoy your day!"))),m.exports.createElement("div",{className:"schedule-today-overlay hide-on-small-and-down"},m.exports.createElement("div",{className:"schedule-today-overlay-container"},m.exports.createElement("h4",{className:"schedule-cycle"}),m.exports.createElement("div",{className:"schedule-today-courses"}))),m.exports.createElement("div",{className:"overlay-container"},m.exports.createElement("div",{className:"banner-message center-align"},m.exports.createElement("span",null,m.exports.createElement(nn,{to:"/accounts/signup/"},"Sign up")," and add your timetable to see a personalized schedule here.")))),m.exports.createElement("div",{id:"main-container"},m.exports.createElement(u$,{post:e}),m.exports.createElement("div",{id:"recent-events",className:"card-list center-align"},m.exports.createElement("div",{className:"cards-container"},"There are no events at this time."),m.exports.createElement(nn,{className:"full-content-page link",to:"/calendar"},"View all events ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))),m.exports.createElement("hr",{style:{margin:"10px calc(2% + 10px)",borderTopWidth:"2.5px",borderColor:"#d9d9d9"}}),m.exports.createElement("div",{id:"recent-announcements",className:"center-align"},m.exports.createElement("div",{id:"announcements",className:"cards-container"},d$()),m.exports.createElement(nn,{className:"full-content-page link",to:"/announcements"},"View all announcements ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"})))))},u$=e=>{const t=e.post;return m.exports.createElement("div",{className:"blog row"},m.exports.createElement("div",{className:"blog-content s5 col valign-wrapper left-align s5"},m.exports.createElement("div",{className:"blog-content-container"},m.exports.createElement("h4",{className:"title"},t.title),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"blog-body markdown-container"},m.exports.createElement("p",null,t.body),m.exports.createElement(nn,{className:"full-content-page link",to:`/blog/${t.id}`},"Read full blog post ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))))),m.exports.createElement("img",{className:"blog-image hide-on-small-and-down col s7",src:t.featured_image+"?fmt=webp&w=1280"}))},d$=()=>{const[e,t]=m.exports.useState([]);return m.exports.useEffect(()=>{const n=`${mr.OBJECT}/announcement`;Bl.get(n).then(r=>{t(r.data.results.slice(0,3))})},[]),e.map(n=>m.exports.createElement(h$,{key:n.id,announcement:n}))},h$=e=>{const t=m.exports.useContext(Xr),n=e.announcement;let r=t.allOrgs.find(a=>a.id===n.organization);return r?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("div",{className:"announcement-card card left-align",style:{borderColor:"#ffccce"}},m.exports.createElement("h5",{className:"title truncate"},n.title),m.exports.createElement("div",{className:"authors"},m.exports.createElement("div",{className:"authors-image"},m.exports.createElement(nn,{to:`/club/${n.organization}`},m.exports.createElement("img",{className:"circle",src:r&&r.banner}))),m.exports.createElement("div",{className:"authors-text"},m.exports.createElement(nn,{to:`/club/${n.organization}`},r.name))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"announcement-description markdown-container"},m.exports.createElement("p",null,n.body),m.exports.createElement(nn,{className:"link",to:`/announcement/${n.id}`},"See announcement ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))))):m.exports.createElement(m.exports.Fragment,null)},D0=()=>{const{search:e}=Qp();return m.exports.useMemo(()=>new URLSearchParams(e),[e])},$3=[{id:"all",text:"ALL",filters:null},{id:"school",text:"SCHOOL",filters:null},{id:"sac",text:"STUDENT COUNCIL",filters:null}],Gg=e=>m.exports.createElement("p",{className:"tag",style:{backgroundColor:e.tag.color}},e.tag.name);var hv=e=>e.type==="checkbox",vp=e=>e instanceof Date,Ko=e=>e==null;const V3=e=>typeof e=="object";var Mo=e=>!Ko(e)&&!Array.isArray(e)&&V3(e)&&!vp(e),p$=e=>Mo(e)&&e.target?hv(e.target)?e.target.checked:e.target.value:e,f$=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,m$=(e,t)=>e.has(f$(t)),pv=e=>Array.isArray(e)?e.filter(Boolean):[],mo=e=>e===void 0,Cn=(e,t,n)=>{if(!t||!Mo(e))return n;const r=pv(t.split(/[,[\].]+?/)).reduce((a,u)=>Ko(a)?a:a[u],e);return mo(r)||r===e?mo(e[t])?n:e[t]:r};const VI={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Is={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ll={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};ot.createContext(null);var g$=(e,t,n,r=!0)=>{const a={defaultValues:t._defaultValues};for(const u in e)Object.defineProperty(a,u,{get:()=>{const h=u;return t._proxyFormState[h]!==Is.all&&(t._proxyFormState[h]=!r||Is.all),n&&(n[h]=!0),e[h]}});return a},Za=e=>Mo(e)&&!Object.keys(e).length,v$=(e,t,n)=>{const{name:r,...a}=e;return Za(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(u=>t[u]===(!n||Is.all))},Mw=e=>Array.isArray(e)?e:[e];function y$(e){const t=ot.useRef(e);t.current=e,ot.useEffect(()=>{const n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>{n&&n.unsubscribe()}},[e.disabled])}var cl=e=>typeof e=="string",_$=(e,t,n,r)=>{const a=Array.isArray(e);return cl(e)?(r&&t.watch.add(e),Cn(n,e)):a?e.map(u=>(r&&t.watch.add(u),Cn(n,u))):(r&&(t.watchAll=!0),n)},Bx=e=>typeof e=="function",H3=e=>{for(const t in e)if(Bx(e[t]))return!0;return!1},x$=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},bk=e=>/^\w*$/.test(e),W3=e=>pv(e.replace(/["|']|\]/g,"").split(/\.|\[/));function vi(e,t,n){let r=-1;const a=bk(t)?[t]:W3(t),u=a.length,h=u-1;for(;++r<u;){const o=a[r];let g=n;if(r!==h){const b=e[o];g=Mo(b)||Array.isArray(b)?b:isNaN(+a[r+1])?{}:[]}e[o]=g,e=e[o]}return e}const SC=(e,t,n)=>{for(const r of n||Object.keys(e)){const a=Cn(e,r);if(a){const{_f:u,...h}=a;if(u&&t(u.name)){if(u.ref.focus){u.ref.focus();break}else if(u.refs&&u.refs[0].focus){u.refs[0].focus();break}}else Mo(h)&&SC(h,t)}}};var HI=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length)))),b$=(e,t,n)=>{const r=pv(Cn(e,n));return vi(r,"root",t[n]),vi(e,n,r),e},Fx=e=>typeof e=="boolean",wk=e=>e.type==="file",J_=e=>cl(e)||ot.isValidElement(e),Ek=e=>e.type==="radio",Nx=e=>e instanceof RegExp;const WI={value:!1,isValid:!1},GI={value:!0,isValid:!0};var G3=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!mo(e[0].attributes.value)?mo(e[0].value)||e[0].value===""?GI:{value:e[0].value,isValid:!0}:GI:WI}return WI};const qI={isValid:!1,value:null};var q3=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,qI):qI;function ZI(e,t,n="validate"){if(J_(e)||Array.isArray(e)&&e.every(J_)||Fx(e)&&!e)return{type:n,message:J_(e)?e:"",ref:t}}var Xh=e=>Mo(e)&&!Nx(e)?e:{value:e,message:""},XI=async(e,t,n,r,a)=>{const{ref:u,refs:h,required:o,maxLength:g,minLength:b,min:A,max:D,pattern:z,validate:F,name:N,valueAsNumber:T,mount:H,disabled:j}=e._f;if(!H||j)return{};const W=h?h[0]:u,B=oe=>{r&&W.reportValidity&&(W.setCustomValidity(Fx(oe)?"":oe||" "),W.reportValidity())},O={},S=Ek(u),w=hv(u),P=S||w,Y=(T||wk(u))&&!u.value||t===""||Array.isArray(t)&&!t.length,ne=x$.bind(null,N,n,O),ae=(oe,fe,Re,Be=Ll.maxLength,Oe=Ll.minLength)=>{const Ee=oe?fe:Re;O[N]={type:oe?Be:Oe,message:Ee,ref:u,...ne(oe?Be:Oe,Ee)}};if(a?!Array.isArray(t)||!t.length:o&&(!P&&(Y||Ko(t))||Fx(t)&&!t||w&&!G3(h).isValid||S&&!q3(h).isValid)){const{value:oe,message:fe}=J_(o)?{value:!!o,message:o}:Xh(o);if(oe&&(O[N]={type:Ll.required,message:fe,ref:W,...ne(Ll.required,fe)},!n))return B(fe),O}if(!Y&&(!Ko(A)||!Ko(D))){let oe,fe;const Re=Xh(D),Be=Xh(A);if(!Ko(t)&&!isNaN(t)){const Oe=u.valueAsNumber||t&&+t;Ko(Re.value)||(oe=Oe>Re.value),Ko(Be.value)||(fe=Oe<Be.value)}else{const Oe=u.valueAsDate||new Date(t);cl(Re.value)&&(oe=Oe>new Date(Re.value)),cl(Be.value)&&(fe=Oe<new Date(Be.value))}if((oe||fe)&&(ae(!!oe,Re.message,Be.message,Ll.max,Ll.min),!n))return B(O[N].message),O}if((g||b)&&!Y&&(cl(t)||a&&Array.isArray(t))){const oe=Xh(g),fe=Xh(b),Re=!Ko(oe.value)&&t.length>oe.value,Be=!Ko(fe.value)&&t.length<fe.value;if((Re||Be)&&(ae(Re,oe.message,fe.message),!n))return B(O[N].message),O}if(z&&!Y&&cl(t)){const{value:oe,message:fe}=Xh(z);if(Nx(oe)&&!t.match(oe)&&(O[N]={type:Ll.pattern,message:fe,ref:u,...ne(Ll.pattern,fe)},!n))return B(fe),O}if(F){if(Bx(F)){const oe=await F(t),fe=ZI(oe,W);if(fe&&(O[N]={...fe,...ne(Ll.validate,fe.message)},!n))return B(fe.message),O}else if(Mo(F)){let oe={};for(const fe in F){if(!Za(oe)&&!n)break;const Re=ZI(await F[fe](t),W,fe);Re&&(oe={...Re,...ne(fe,Re.message)},B(Re.message),n&&(O[N]=oe))}if(!Za(oe)&&(O[N]={ref:W,...oe},!n))return O}}return B(!0),O},w$=e=>{const t=e.constructor&&e.constructor.prototype;return Mo(t)&&t.hasOwnProperty("isPrototypeOf")},kC=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function dd(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(kC&&(e instanceof Blob||e instanceof FileList))&&(n||Mo(e)))if(t=n?[]:{},!Array.isArray(e)&&!w$(e))t=e;else for(const r in e)t[r]=dd(e[r]);else return e;return t}var KI=e=>({isOnSubmit:!e||e===Is.onSubmit,isOnBlur:e===Is.onBlur,isOnChange:e===Is.onChange,isOnAll:e===Is.all,isOnTouch:e===Is.onTouched});function E$(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=mo(e)?r++:e[t[r++]];return e}function C$(e){for(const t in e)if(!mo(e[t]))return!1;return!0}function Zo(e,t){const n=bk(t)?[t]:W3(t),r=n.length==1?e:E$(e,n),a=n[n.length-1];let u;r&&delete r[a];for(let h=0;h<n.slice(0,-1).length;h++){let o=-1,g;const b=n.slice(0,-(h+1)),A=b.length-1;for(h>0&&(u=e);++o<b.length;){const D=b[o];g=g?g[D]:e[D],A===o&&(Mo(g)&&Za(g)||Array.isArray(g)&&C$(g))&&(u?delete u[D]:delete e[D]),u=g}}return e}function Iw(){let e=[];return{get observers(){return e},next:a=>{for(const u of e)u.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(u=>u!==a)}}),unsubscribe:()=>{e=[]}}}var Ux=e=>Ko(e)||!V3(e);function yp(e,t){if(Ux(e)||Ux(t))return e===t;if(vp(e)&&vp(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const a of n){const u=e[a];if(!r.includes(a))return!1;if(a!=="ref"){const h=t[a];if(vp(u)&&vp(h)||Mo(u)&&Mo(h)||Array.isArray(u)&&Array.isArray(h)?!yp(u,h):u!==h)return!1}}return!0}var TC=e=>{const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof n},Z3=e=>e.type==="select-multiple",S$=e=>Ek(e)||hv(e),Pw=e=>TC(e)&&e.isConnected;function jx(e,t={}){const n=Array.isArray(e);if(Mo(e)||n)for(const r in e)Array.isArray(e[r])||Mo(e[r])&&!H3(e[r])?(t[r]=Array.isArray(e[r])?[]:{},jx(e[r],t[r])):Ko(e[r])||(t[r]=!0);return t}function X3(e,t,n){const r=Array.isArray(e);if(Mo(e)||r)for(const a in e)Array.isArray(e[a])||Mo(e[a])&&!H3(e[a])?mo(t)||Ux(n[a])?n[a]=Array.isArray(e[a])?jx(e[a],[]):{...jx(e[a])}:X3(e[a],Ko(t)?{}:t[a],n[a]):n[a]=!yp(e[a],t[a]);return n}var Dw=(e,t)=>X3(e,t,jx(t)),K3=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>mo(e)?e:t?e===""?NaN:e&&+e:n&&cl(e)?new Date(e):r?r(e):e;function Rw(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return wk(t)?t.files:Ek(t)?q3(e.refs).value:Z3(t)?[...t.selectedOptions].map(({value:n})=>n):hv(t)?G3(e.refs).value:K3(mo(t.value)?e.ref.value:t.value,e)}var k$=(e,t,n,r)=>{const a={};for(const u of e){const h=Cn(t,u);h&&vi(a,u,h._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}},Wm=e=>mo(e)?void 0:Nx(e)?e.source:Mo(e)?Nx(e.value)?e.value.source:e.value:e,T$=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function YI(e,t,n){const r=Cn(e,n);if(r||bk(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const u=a.join("."),h=Cn(t,u),o=Cn(e,u);if(h&&!Array.isArray(h)&&n!==u)return{name:n};if(o&&o.type)return{name:u,error:o};a.pop()}return{name:n}}var A$=(e,t,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:(n?r.isOnChange:a.isOnChange)?e:!0,M$=(e,t)=>!pv(Cn(e,t)).length&&Zo(e,t);const I$={mode:Is.onSubmit,reValidateMode:Is.onChange,shouldFocusError:!0};function P$(e={}){let t={...I$,...e},n={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},r={},a=dd(t.defaultValues)||{},u=t.shouldUnregister?{}:dd(a),h={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},g,b=0,A={};const D={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},z={watch:Iw(),array:Iw(),state:Iw()},F=KI(t.mode),N=KI(t.reValidateMode),T=t.criteriaMode===Is.all,H=Le=>Xe=>{clearTimeout(b),b=window.setTimeout(Le,Xe)},j=async Le=>{let Xe=!1;return D.isValid&&(Xe=t.resolver?Za((await P()).errors):await ne(r,!0),!Le&&Xe!==n.isValid&&(n.isValid=Xe,z.state.next({isValid:Xe}))),Xe},W=(Le,Xe=[],ft,wt,_t=!0,dt=!0)=>{if(wt&&ft){if(h.action=!0,dt&&Array.isArray(Cn(r,Le))){const Pt=ft(Cn(r,Le),wt.argA,wt.argB);_t&&vi(r,Le,Pt)}if(D.errors&&dt&&Array.isArray(Cn(n.errors,Le))){const Pt=ft(Cn(n.errors,Le),wt.argA,wt.argB);_t&&vi(n.errors,Le,Pt),M$(n.errors,Le)}if(D.touchedFields&&dt&&Array.isArray(Cn(n.touchedFields,Le))){const Pt=ft(Cn(n.touchedFields,Le),wt.argA,wt.argB);_t&&vi(n.touchedFields,Le,Pt)}D.dirtyFields&&(n.dirtyFields=Dw(a,u)),z.state.next({isDirty:oe(Le,Xe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else vi(u,Le,Xe)},B=(Le,Xe)=>{vi(n.errors,Le,Xe),z.state.next({errors:n.errors})},O=(Le,Xe,ft,wt)=>{const _t=Cn(r,Le);if(_t){const dt=Cn(u,Le,mo(ft)?Cn(a,Le):ft);mo(dt)||wt&&wt.defaultChecked||Xe?vi(u,Le,Xe?dt:Rw(_t._f)):Be(Le,dt),h.mount&&j()}},S=(Le,Xe,ft,wt,_t)=>{let dt=!1;const Pt={name:Le},yn=Cn(n.touchedFields,Le);if(D.isDirty){const On=n.isDirty;n.isDirty=Pt.isDirty=oe(),dt=On!==Pt.isDirty}if(D.dirtyFields&&(!ft||wt)){const On=Cn(n.dirtyFields,Le);yp(Cn(a,Le),Xe)?Zo(n.dirtyFields,Le):vi(n.dirtyFields,Le,!0),Pt.dirtyFields=n.dirtyFields,dt=dt||On!==Cn(n.dirtyFields,Le)}return ft&&!yn&&(vi(n.touchedFields,Le,ft),Pt.touchedFields=n.touchedFields,dt=dt||D.touchedFields&&yn!==ft),dt&&_t&&z.state.next(Pt),dt?Pt:{}},w=async(Le,Xe,ft,wt)=>{const _t=Cn(n.errors,Le),dt=D.isValid&&n.isValid!==Xe;if(e.delayError&&ft?(g=H(()=>B(Le,ft)),g(e.delayError)):(clearTimeout(b),g=null,ft?vi(n.errors,Le,ft):Zo(n.errors,Le)),(ft?!yp(_t,ft):_t)||!Za(wt)||dt){const Pt={...wt,...dt?{isValid:Xe}:{},errors:n.errors,name:Le};n={...n,...Pt},z.state.next(Pt)}A[Le]--,D.isValidating&&!Object.values(A).some(Pt=>Pt)&&(z.state.next({isValidating:!1}),A={})},P=async Le=>t.resolver?await t.resolver({...u},t.context,k$(Le||o.mount,r,t.criteriaMode,t.shouldUseNativeValidation)):{},Y=async Le=>{const{errors:Xe}=await P();if(Le)for(const ft of Le){const wt=Cn(Xe,ft);wt?vi(n.errors,ft,wt):Zo(n.errors,ft)}else n.errors=Xe;return Xe},ne=async(Le,Xe,ft={valid:!0})=>{for(const wt in Le){const _t=Le[wt];if(_t){const{_f:dt,...Pt}=_t;if(dt){const yn=o.array.has(dt.name),On=await XI(_t,Cn(u,dt.name),T,t.shouldUseNativeValidation,yn);if(On[dt.name]&&(ft.valid=!1,Xe))break;!Xe&&(Cn(On,dt.name)?yn?b$(n.errors,On,dt.name):vi(n.errors,dt.name,On[dt.name]):Zo(n.errors,dt.name))}Pt&&await ne(Pt,Xe,ft)}}return ft.valid},ae=()=>{for(const Le of o.unMount){const Xe=Cn(r,Le);Xe&&(Xe._f.refs?Xe._f.refs.every(ft=>!Pw(ft)):!Pw(Xe._f.ref))&&Ut(Le)}o.unMount=new Set},oe=(Le,Xe)=>(Le&&Xe&&vi(u,Le,Xe),!yp(ct(),a)),fe=(Le,Xe,ft)=>{const wt={...h.mount?u:mo(Xe)?a:cl(Le)?{[Le]:Xe}:Xe};return _$(Le,o,wt,ft)},Re=Le=>pv(Cn(h.mount?u:a,Le,e.shouldUnregister?Cn(a,Le,[]):[])),Be=(Le,Xe,ft={})=>{const wt=Cn(r,Le);let _t=Xe;if(wt){const dt=wt._f;dt&&(!dt.disabled&&vi(u,Le,K3(Xe,dt)),_t=kC&&TC(dt.ref)&&Ko(Xe)?"":Xe,Z3(dt.ref)?[...dt.ref.options].forEach(Pt=>Pt.selected=_t.includes(Pt.value)):dt.refs?hv(dt.ref)?dt.refs.length>1?dt.refs.forEach(Pt=>(!Pt.defaultChecked||!Pt.disabled)&&(Pt.checked=Array.isArray(_t)?!!_t.find(yn=>yn===Pt.value):_t===Pt.value)):dt.refs[0]&&(dt.refs[0].checked=!!_t):dt.refs.forEach(Pt=>Pt.checked=Pt.value===_t):wk(dt.ref)?dt.ref.value="":(dt.ref.value=_t,dt.ref.type||z.watch.next({name:Le})))}(ft.shouldDirty||ft.shouldTouch)&&S(Le,_t,ft.shouldTouch,ft.shouldDirty,!0),ft.shouldValidate&&Ze(Le)},Oe=(Le,Xe,ft)=>{for(const wt in Xe){const _t=Xe[wt],dt=`${Le}.${wt}`,Pt=Cn(r,dt);(o.array.has(Le)||!Ux(_t)||Pt&&!Pt._f)&&!vp(_t)?Oe(dt,_t,ft):Be(dt,_t,ft)}},Ee=(Le,Xe,ft={})=>{const wt=Cn(r,Le),_t=o.array.has(Le),dt=dd(Xe);vi(u,Le,dt),_t?(z.array.next({name:Le,values:u}),(D.isDirty||D.dirtyFields)&&ft.shouldDirty&&(n.dirtyFields=Dw(a,u),z.state.next({name:Le,dirtyFields:n.dirtyFields,isDirty:oe(Le,dt)}))):wt&&!wt._f&&!Ko(dt)?Oe(Le,dt,ft):Be(Le,dt,ft),HI(Le,o)&&z.state.next({}),z.watch.next({name:Le})},pt=async Le=>{const Xe=Le.target;let ft=Xe.name;const wt=Cn(r,ft);if(wt){let _t,dt;const Pt=Xe.type?Rw(wt._f):p$(Le),yn=Le.type===VI.BLUR||Le.type===VI.FOCUS_OUT,On=!T$(wt._f)&&!t.resolver&&!Cn(n.errors,ft)&&!wt._f.deps||A$(yn,Cn(n.touchedFields,ft),n.isSubmitted,N,F),Ln=HI(ft,o,yn);vi(u,ft,Pt),yn?(wt._f.onBlur&&wt._f.onBlur(Le),g&&g(0)):wt._f.onChange&&wt._f.onChange(Le);const In=S(ft,Pt,yn,!1),Xn=!Za(In)||Ln;if(!yn&&z.watch.next({name:ft,type:Le.type}),On)return Xn&&z.state.next({name:ft,...Ln?{}:In});if(!yn&&Ln&&z.state.next({}),A[ft]=(A[ft],1),z.state.next({isValidating:!0}),t.resolver){const{errors:Ie}=await P([ft]),Je=YI(n.errors,r,ft),re=YI(Ie,r,Je.name||ft);_t=re.error,ft=re.name,dt=Za(Ie)}else _t=(await XI(wt,Cn(u,ft),T,t.shouldUseNativeValidation))[ft],dt=await j(!0);wt._f.deps&&Ze(wt._f.deps),w(ft,dt,_t,In)}},Ze=async(Le,Xe={})=>{let ft,wt;const _t=Mw(Le);if(z.state.next({isValidating:!0}),t.resolver){const dt=await Y(mo(Le)?Le:_t);ft=Za(dt),wt=Le?!_t.some(Pt=>Cn(dt,Pt)):ft}else Le?(wt=(await Promise.all(_t.map(async dt=>{const Pt=Cn(r,dt);return await ne(Pt&&Pt._f?{[dt]:Pt}:Pt)}))).every(Boolean),!(!wt&&!n.isValid)&&j()):wt=ft=await ne(r);return z.state.next({...!cl(Le)||D.isValid&&ft!==n.isValid?{}:{name:Le},...t.resolver?{isValid:ft}:{},errors:n.errors,isValidating:!1}),Xe.shouldFocus&&!wt&&SC(r,dt=>Cn(n.errors,dt),Le?_t:o.mount),wt},ct=Le=>{const Xe={...a,...h.mount?u:{}};return mo(Le)?Xe:cl(Le)?Cn(Xe,Le):Le.map(ft=>Cn(Xe,ft))},nt=(Le,Xe)=>({invalid:!!Cn((Xe||n).errors,Le),isDirty:!!Cn((Xe||n).dirtyFields,Le),isTouched:!!Cn((Xe||n).touchedFields,Le),error:Cn((Xe||n).errors,Le)}),xe=Le=>{Le?Mw(Le).forEach(Xe=>Zo(n.errors,Xe)):n.errors={},z.state.next({errors:n.errors})},be=(Le,Xe,ft)=>{const wt=(Cn(r,Le,{_f:{}})._f||{}).ref;vi(n.errors,Le,{...Xe,ref:wt}),z.state.next({name:Le,errors:n.errors,isValid:!1}),ft&&ft.shouldFocus&&wt&&wt.focus&&wt.focus()},on=(Le,Xe)=>Bx(Le)?z.watch.subscribe({next:ft=>Le(fe(void 0,Xe),ft)}):fe(Le,Xe,!0),Ut=(Le,Xe={})=>{for(const ft of Le?Mw(Le):o.mount)o.mount.delete(ft),o.array.delete(ft),Cn(r,ft)&&(Xe.keepValue||(Zo(r,ft),Zo(u,ft)),!Xe.keepError&&Zo(n.errors,ft),!Xe.keepDirty&&Zo(n.dirtyFields,ft),!Xe.keepTouched&&Zo(n.touchedFields,ft),!t.shouldUnregister&&!Xe.keepDefaultValue&&Zo(a,ft));z.watch.next({}),z.state.next({...n,...Xe.keepDirty?{isDirty:oe()}:{}}),!Xe.keepIsValid&&j()},ln=(Le,Xe={})=>{let ft=Cn(r,Le);const wt=Fx(Xe.disabled);return vi(r,Le,{...ft||{},_f:{...ft&&ft._f?ft._f:{ref:{name:Le}},name:Le,mount:!0,...Xe}}),o.mount.add(Le),ft?wt&&vi(u,Le,Xe.disabled?void 0:Cn(u,Le,Rw(ft._f))):O(Le,!0,Xe.value),{...wt?{disabled:Xe.disabled}:{},...t.shouldUseNativeValidation?{required:!!Xe.required,min:Wm(Xe.min),max:Wm(Xe.max),minLength:Wm(Xe.minLength),maxLength:Wm(Xe.maxLength),pattern:Wm(Xe.pattern)}:{},name:Le,onChange:pt,onBlur:pt,ref:_t=>{if(_t){ln(Le,Xe),ft=Cn(r,Le);const dt=mo(_t.value)&&_t.querySelectorAll&&_t.querySelectorAll("input,select,textarea")[0]||_t,Pt=S$(dt),yn=ft._f.refs||[];if(Pt?yn.find(On=>On===dt):dt===ft._f.ref)return;vi(r,Le,{_f:{...ft._f,...Pt?{refs:[...yn.filter(Pw),dt,...Array.isArray(Cn(a,Le))?[{}]:[]],ref:{type:dt.type,name:Le}}:{ref:dt}}}),O(Le,!1,void 0,dt)}else ft=Cn(r,Le,{}),ft._f&&(ft._f.mount=!1),(t.shouldUnregister||Xe.shouldUnregister)&&!(m$(o.array,Le)&&h.action)&&o.unMount.add(Le)}}},tn=(Le,Xe)=>async ft=>{ft&&(ft.preventDefault&&ft.preventDefault(),ft.persist&&ft.persist());let wt=!0,_t=dd(u);z.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:dt,values:Pt}=await P();n.errors=dt,_t=Pt}else await ne(r);Za(n.errors)?(z.state.next({errors:{},isSubmitting:!0}),await Le(_t,ft)):(Xe&&await Xe({...n.errors},ft),t.shouldFocusError&&SC(r,dt=>Cn(n.errors,dt),o.mount))}catch(dt){throw wt=!1,dt}finally{n.isSubmitted=!0,z.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Za(n.errors)&&wt,submitCount:n.submitCount+1,errors:n.errors})}},un=(Le,Xe={})=>{Cn(r,Le)&&(mo(Xe.defaultValue)?Ee(Le,Cn(a,Le)):(Ee(Le,Xe.defaultValue),vi(a,Le,Xe.defaultValue)),Xe.keepTouched||Zo(n.touchedFields,Le),Xe.keepDirty||(Zo(n.dirtyFields,Le),n.isDirty=Xe.defaultValue?oe(Le,Cn(a,Le)):oe()),Xe.keepError||(Zo(n.errors,Le),D.isValid&&j()),z.state.next({...n}))},mn=(Le,Xe={})=>{const ft=Le||a,wt=dd(ft),_t=Le&&!Za(Le)?wt:a;if(Xe.keepDefaultValues||(a=ft),!Xe.keepValues){if(Xe.keepDirtyValues)for(const dt of o.mount)Cn(n.dirtyFields,dt)?vi(_t,dt,Cn(u,dt)):Ee(dt,Cn(_t,dt));else{if(kC&&mo(Le))for(const dt of o.mount){const Pt=Cn(r,dt);if(Pt&&Pt._f){const yn=Array.isArray(Pt._f.refs)?Pt._f.refs[0]:Pt._f.ref;try{if(TC(yn)){yn.closest("form").reset();break}}catch{}}}r={}}u=e.shouldUnregister?Xe.keepDefaultValues?dd(a):{}:wt,z.array.next({values:_t}),z.watch.next({values:_t})}o={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!D.isValid||!!Xe.keepIsValid,h.watch=!!e.shouldUnregister,z.state.next({submitCount:Xe.keepSubmitCount?n.submitCount:0,isDirty:Xe.keepDirty||Xe.keepDirtyValues?n.isDirty:!!(Xe.keepDefaultValues&&!yp(Le,a)),isSubmitted:Xe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Xe.keepDirty||Xe.keepDirtyValues?n.dirtyFields:Xe.keepDefaultValues&&Le?Dw(a,Le):{},touchedFields:Xe.keepTouched?n.touchedFields:{},errors:Xe.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:ln,unregister:Ut,getFieldState:nt,_executeSchema:P,_getWatch:fe,_getDirty:oe,_updateValid:j,_removeUnmounted:ae,_updateFieldArray:W,_getFieldArray:Re,_subjects:z,_proxyFormState:D,get _fields(){return r},get _formValues(){return u},get _stateFlags(){return h},set _stateFlags(Le){h=Le},get _defaultValues(){return a},get _names(){return o},set _names(Le){o=Le},get _formState(){return n},set _formState(Le){n=Le},get _options(){return t},set _options(Le){t={...t,...Le}}},trigger:Ze,register:ln,handleSubmit:tn,watch:on,setValue:Ee,getValues:ct,reset:(Le,Xe)=>mn(Bx(Le)?Le(u):Le,Xe),resetField:un,clearErrors:xe,unregister:Ut,setError:be,setFocus:(Le,Xe={})=>{const ft=Cn(r,Le),wt=ft&&ft._f;if(wt){const _t=wt.refs?wt.refs[0]:wt.ref;_t.focus&&(_t.focus(),Xe.shouldSelect&&_t.select())}},getFieldState:nt}}function Ck(e={}){const t=ot.useRef(),[n,r]=ot.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});t.current||(t.current={...P$(e),formState:n});const a=t.current.control;return a._options=e,y$({subject:a._subjects.state,callback:ot.useCallback(u=>{v$(u,a._proxyFormState,!0)&&(a._formState={...a._formState,...u},r({...a._formState}))},[a])}),ot.useEffect(()=>{a._stateFlags.mount||(a._proxyFormState.isValid&&a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()}),t.current.formState=g$(n,a),t.current}const R0={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};var $t={exports:{}},D$="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",R$=D$,L$=R$;function Y3(){}function J3(){}J3.resetWarningCache=Y3;var O$=function(){function e(r,a,u,h,o,g){if(g!==L$){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:J3,resetWarningCache:Y3};return n.PropTypes=n,n};$t.exports=O$();var Zn=$t.exports,AC=globalThis&&globalThis.__assign||function(){return AC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},AC.apply(this,arguments)},Q3={onActivate:$t.exports.func,onAddUndo:$t.exports.func,onBeforeAddUndo:$t.exports.func,onBeforeExecCommand:$t.exports.func,onBeforeGetContent:$t.exports.func,onBeforeRenderUI:$t.exports.func,onBeforeSetContent:$t.exports.func,onBeforePaste:$t.exports.func,onBlur:$t.exports.func,onChange:$t.exports.func,onClearUndos:$t.exports.func,onClick:$t.exports.func,onContextMenu:$t.exports.func,onCommentChange:$t.exports.func,onCopy:$t.exports.func,onCut:$t.exports.func,onDblclick:$t.exports.func,onDeactivate:$t.exports.func,onDirty:$t.exports.func,onDrag:$t.exports.func,onDragDrop:$t.exports.func,onDragEnd:$t.exports.func,onDragGesture:$t.exports.func,onDragOver:$t.exports.func,onDrop:$t.exports.func,onExecCommand:$t.exports.func,onFocus:$t.exports.func,onFocusIn:$t.exports.func,onFocusOut:$t.exports.func,onGetContent:$t.exports.func,onHide:$t.exports.func,onInit:$t.exports.func,onKeyDown:$t.exports.func,onKeyPress:$t.exports.func,onKeyUp:$t.exports.func,onLoadContent:$t.exports.func,onMouseDown:$t.exports.func,onMouseEnter:$t.exports.func,onMouseLeave:$t.exports.func,onMouseMove:$t.exports.func,onMouseOut:$t.exports.func,onMouseOver:$t.exports.func,onMouseUp:$t.exports.func,onNodeChange:$t.exports.func,onObjectResizeStart:$t.exports.func,onObjectResized:$t.exports.func,onObjectSelected:$t.exports.func,onPaste:$t.exports.func,onPostProcess:$t.exports.func,onPostRender:$t.exports.func,onPreProcess:$t.exports.func,onProgressState:$t.exports.func,onRedo:$t.exports.func,onRemove:$t.exports.func,onReset:$t.exports.func,onSaveContent:$t.exports.func,onSelectionChange:$t.exports.func,onSetAttrib:$t.exports.func,onSetContent:$t.exports.func,onShow:$t.exports.func,onSubmit:$t.exports.func,onUndo:$t.exports.func,onVisualAid:$t.exports.func,onSkinLoadError:$t.exports.func,onThemeLoadError:$t.exports.func,onModelLoadError:$t.exports.func,onPluginLoadError:$t.exports.func,onIconsLoadError:$t.exports.func,onLanguageLoadError:$t.exports.func,onScriptsLoad:$t.exports.func,onScriptsLoadError:$t.exports.func},z$=AC({apiKey:$t.exports.string,id:$t.exports.string,inline:$t.exports.bool,init:$t.exports.object,initialValue:$t.exports.string,onEditorChange:$t.exports.func,value:$t.exports.string,tagName:$t.exports.string,cloudChannel:$t.exports.string,plugins:$t.exports.oneOfType([$t.exports.string,$t.exports.array]),toolbar:$t.exports.oneOfType([$t.exports.string,$t.exports.array]),disabled:$t.exports.bool,textareaName:$t.exports.string,tinymceScriptSrc:$t.exports.oneOfType([$t.exports.string,$t.exports.arrayOf($t.exports.string),$t.exports.arrayOf($t.exports.shape({src:$t.exports.string,async:$t.exports.bool,defer:$t.exports.bool}))]),rollback:$t.exports.oneOfType([$t.exports.number,$t.exports.oneOf([!1])]),scriptLoading:$t.exports.shape({async:$t.exports.bool,defer:$t.exports.bool,delay:$t.exports.number})},Q3),Lw=function(e){return typeof e=="function"},JI=function(e){return e in Q3},QI=function(e){return e.substr(2)},B$=function(e,t,n,r,a,u,h){var o=Object.keys(a).filter(JI),g=Object.keys(u).filter(JI),b=o.filter(function(D){return u[D]===void 0}),A=g.filter(function(D){return a[D]===void 0});b.forEach(function(D){var z=QI(D),F=h[z];n(z,F),delete h[z]}),A.forEach(function(D){var z=r(e,D),F=QI(D);h[F]=z,t(F,z)})},F$=function(e,t,n,r,a){return B$(a,e.on.bind(e),e.off.bind(e),function(u,h){return function(o){var g;return(g=u(h))===null||g===void 0?void 0:g(o,e)}},t,n,r)},eP=0,e4=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return eP++,e+"_"+n+eP+String(t)},tP=function(e){return e!==null&&(e.tagName.toLowerCase()==="textarea"||e.tagName.toLowerCase()==="input")},nP=function(e){return typeof e=="undefined"||e===""?[]:Array.isArray(e)?e:e.split(" ")},N$=function(e,t){return nP(e).concat(nP(t))},U$=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},j$=function(e){if(!("isConnected"in Node.prototype)){for(var t=e,n=e.parentNode;n!=null;)t=n,n=t.parentNode;return t===e.ownerDocument}return e.isConnected},rP=function(e,t){e!==void 0&&(e.mode!=null&&typeof e.mode=="object"&&typeof e.mode.set=="function"?e.mode.set(t):e.setMode(t))},MC=globalThis&&globalThis.__assign||function(){return MC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},MC.apply(this,arguments)},$$=function(e,t,n){var r,a,u=e.createElement("script");u.referrerPolicy="origin",u.type="application/javascript",u.id=t.id,u.src=t.src,u.async=(r=t.async)!==null&&r!==void 0?r:!1,u.defer=(a=t.defer)!==null&&a!==void 0?a:!1;var h=function(){u.removeEventListener("load",h),u.removeEventListener("error",o),n(t.src)},o=function(g){u.removeEventListener("load",h),u.removeEventListener("error",o),n(t.src,g)};u.addEventListener("load",h),u.addEventListener("error",o),e.head&&e.head.appendChild(u)},V$=function(e){var t={},n=function(h,o){var g=t[h];g.done=!0,g.error=o;for(var b=0,A=g.handlers;b<A.length;b++){var D=A[b];D(h,o)}g.handlers=[]},r=function(h,o,g){var b=function(W){return g!==void 0?g(W):console.error(W)};if(h.length===0){b(new Error("At least one script must be provided"));return}for(var A=0,D=!1,z=function(W,B){D||(B?(D=!0,b(B)):++A===h.length&&o())},F=0,N=h;F<N.length;F++){var T=N[F],H=t[T.src];if(H)H.done?z(T.src,H.error):H.handlers.push(z);else{var j=e4("tiny-");t[T.src]={id:j,src:T.src,done:!1,error:null,handlers:[z]},$$(e,MC({id:j},T),n)}}},a=function(){for(var h,o=0,g=Object.values(t);o<g.length;o++){var b=g[o],A=e.getElementById(b.id);A!=null&&A.tagName==="SCRIPT"&&((h=A.parentNode)===null||h===void 0||h.removeChild(A))}t={}},u=function(){return e};return{loadScripts:r,deleteScripts:a,getDocument:u}},H$=function(){var e=[],t=function(a){var u=e.find(function(h){return h.getDocument()===a});return u===void 0&&(u=V$(a),e.push(u)),u},n=function(a,u,h,o,g){var b=function(){return t(a).loadScripts(u,o,g)};h>0?setTimeout(b,h):b()},r=function(){for(var a=e.pop();a!=null;a=e.pop())a.deleteScripts()};return{loadList:n,reinitialize:r}},W$=H$(),Ow=function(e){var t=e;return t&&t.tinymce?t.tinymce:null},G$=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(r[u]=a[u])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$x=globalThis&&globalThis.__assign||function(){return $x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$x.apply(this,arguments)},q$=function(e){G$(t,e);function t(n){var r=this,a,u,h;return r=e.call(this,n)||this,r.rollbackTimer=void 0,r.valueCursor=void 0,r.rollbackChange=function(){var o=r.editor,g=r.props.value;o&&g&&g!==r.currentContent&&o.undoManager.ignore(function(){if(o.setContent(g),r.valueCursor&&(!r.inline||o.hasFocus()))try{o.selection.moveToBookmark(r.valueCursor)}catch{}}),r.rollbackTimer=void 0},r.handleBeforeInput=function(o){if(r.props.value!==void 0&&r.props.value===r.currentContent&&r.editor&&(!r.inline||r.editor.hasFocus()))try{r.valueCursor=r.editor.selection.getBookmark(3)}catch{}},r.handleBeforeInputSpecial=function(o){(o.key==="Enter"||o.key==="Backspace"||o.key==="Delete")&&r.handleBeforeInput(o)},r.handleEditorChange=function(o){var g=r.editor;if(g&&g.initialized){var b=g.getContent();r.props.value!==void 0&&r.props.value!==b&&r.props.rollback!==!1&&(r.rollbackTimer||(r.rollbackTimer=window.setTimeout(r.rollbackChange,typeof r.props.rollback=="number"?r.props.rollback:200))),b!==r.currentContent&&(r.currentContent=b,Lw(r.props.onEditorChange)&&r.props.onEditorChange(b,g))}},r.handleEditorChangeSpecial=function(o){(o.key==="Backspace"||o.key==="Delete")&&r.handleEditorChange(o)},r.initialise=function(o){var g,b,A;o===void 0&&(o=0);var D=r.elementRef.current;if(!!D){if(!j$(D)){if(o===0)setTimeout(function(){return r.initialise(1)},1);else if(o<100)setTimeout(function(){return r.initialise(o+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var z=Ow(r.view);if(!z)throw new Error("tinymce should have been loaded into global scope");var F=$x($x({},r.props.init),{selector:void 0,target:D,readonly:r.props.disabled,inline:r.inline,plugins:N$((g=r.props.init)===null||g===void 0?void 0:g.plugins,r.props.plugins),toolbar:(b=r.props.toolbar)!==null&&b!==void 0?b:(A=r.props.init)===null||A===void 0?void 0:A.toolbar,setup:function(N){r.editor=N,r.bindHandlers({}),r.inline&&!tP(D)&&N.once("PostRender",function(T){N.setContent(r.getInitialValue(),{no_events:!0})}),r.props.init&&Lw(r.props.init.setup)&&r.props.init.setup(N)},init_instance_callback:function(N){var T,H,j=r.getInitialValue();r.currentContent=(T=r.currentContent)!==null&&T!==void 0?T:N.getContent(),r.currentContent!==j&&(r.currentContent=j,N.setContent(j),N.undoManager.clear(),N.undoManager.add(),N.setDirty(!1));var W=(H=r.props.disabled)!==null&&H!==void 0?H:!1;rP(r.editor,W?"readonly":"design"),r.props.init&&Lw(r.props.init.init_instance_callback)&&r.props.init.init_instance_callback(N)}});r.inline||(D.style.visibility=""),tP(D)&&(D.value=r.getInitialValue()),z.init(F)}},r.id=r.props.id||e4("tiny-react"),r.elementRef=m.exports.createRef(),r.inline=(h=(a=r.props.inline)!==null&&a!==void 0?a:(u=r.props.init)===null||u===void 0?void 0:u.inline)!==null&&h!==void 0?h:!1,r.boundHandlers={},r}return Object.defineProperty(t.prototype,"view",{get:function(){var n,r;return(r=(n=this.elementRef.current)===null||n===void 0?void 0:n.ownerDocument.defaultView)!==null&&r!==void 0?r:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(n){var r=this,a,u;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(n),this.editor.initialized)){if(this.currentContent=(a=this.currentContent)!==null&&a!==void 0?a:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==n.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var h=this.editor;h.undoManager.transact(function(){var g;if(!r.inline||h.hasFocus())try{g=h.selection.getBookmark(3)}catch{}var b=r.valueCursor;if(h.setContent(r.props.value),!r.inline||h.hasFocus())for(var A=0,D=[g,b];A<D.length;A++){var z=D[A];if(z)try{h.selection.moveToBookmark(z),r.valueCursor=z;break}catch{}}})}if(this.props.disabled!==n.disabled){var o=(u=this.props.disabled)!==null&&u!==void 0?u:!1;rP(this.editor,o?"readonly":"design")}}},t.prototype.componentDidMount=function(){var n=this,r,a,u,h,o;if(Ow(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(a=(r=this.props).onScriptsLoadError)===null||a===void 0||a.call(r,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((u=this.elementRef.current)===null||u===void 0)&&u.ownerDocument){var g=function(){var A,D;(D=(A=n.props).onScriptsLoad)===null||D===void 0||D.call(A),n.initialise()},b=function(A){var D,z;(z=(D=n.props).onScriptsLoadError)===null||z===void 0||z.call(D,A)};W$.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(o=(h=this.props.scriptLoading)===null||h===void 0?void 0:h.delay)!==null&&o!==void 0?o:0,g,b)}},t.prototype.componentWillUnmount=function(){var n=this,r=this.editor;r&&(r.off(this.changeEvents(),this.handleEditorChange),r.off(this.beforeInputEvent(),this.handleBeforeInput),r.off("keypress",this.handleEditorChangeSpecial),r.off("keydown",this.handleBeforeInputSpecial),r.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(a){r.off(a,n.boundHandlers[a])}),this.boundHandlers={},r.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.changeEvents=function(){var n,r,a,u=(a=(r=(n=Ow(this.view))===null||n===void 0?void 0:n.Env)===null||r===void 0?void 0:r.browser)===null||a===void 0?void 0:a.isIE();return u?"change keyup compositionend setcontent CommentChange":"change input compositionend setcontent CommentChange"},t.prototype.beforeInputEvent=function(){return U$()?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var n=this.props.tagName,r=n===void 0?"div":n;return m.exports.createElement(r,{ref:this.elementRef,id:this.id})},t.prototype.renderIframe=function(){return m.exports.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},t.prototype.getScriptSources=function(){var n,r,a=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.async,u=(r=this.props.scriptLoading)===null||r===void 0?void 0:r.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:a,defer:u}]:this.props.tinymceScriptSrc.map(function(b){return typeof b=="string"?{src:b,async:a,defer:u}:b});var h=this.props.cloudChannel,o=this.props.apiKey?this.props.apiKey:"no-api-key",g="https://cdn.tiny.cloud/1/".concat(o,"/tinymce/").concat(h,"/tinymce.min.js");return[{src:g,async:a,defer:u}]},t.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},t.prototype.bindHandlers=function(n){var r=this;if(this.editor!==void 0){F$(this.editor,n,this.props,this.boundHandlers,function(o){return r.props[o]});var a=function(o){return o.onEditorChange!==void 0||o.value!==void 0},u=a(n),h=a(this.props);!u&&h?(this.editor.on(this.changeEvents(),this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):u&&!h&&(this.editor.off(this.changeEvents(),this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=z$,t.defaultProps={cloudChannel:"6"},t}(m.exports.Component);const Z$=()=>{const e=D0(),t=Ii(),n=e.get("feed"),[r,a]=m.exports.useState(!1);m.exports.useRef(null),m.exports.useEffect(()=>{document.title="Announcements | Metropolis"},[]);const u=h=>$3.map(o=>{const g=o.id===h?"header header-active":"header";return m.exports.createElement("li",{key:o.id,className:g,onClick:()=>t(`/announcements?feed=${o.id}`)},o.text)});return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"static/css/announcement-list.css"}),m.exports.createElement(Y$,{openCreator:r,setOpenCreator:a}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"headers header-row"},m.exports.createElement("ul",null,u(n)),m.exports.createElement("a",{className:"btn-small waves-light red",href:"#modal1",onClick:h=>{if(h.preventDefault(),!Eo()){t("/accounts/login");return}M.Modal.getInstance(document.getElementById("announcement-creator")).open()}},m.exports.createElement("i",{className:"material-icons"},"add"))),m.exports.createElement("div",{className:"card-container"},m.exports.createElement("div",{className:"cards",id:"cards-all"},X$()))))},X$=()=>{const e=m.exports.useContext(Xr);m.exports.useEffect(()=>{const u=`${mr.OBJECT}/announcement`;e.getAPI(u,!1).then(h=>{n(h.data.results)}).catch(h=>{e.refreshAuth()}),e.getAPI(`${mr.OBJECT}/tag`,!1).then(h=>{const o=h.data.results;a(o)}).catch(()=>{e.refreshAuth()})},[]);const[t,n]=m.exports.useState([]),[r,a]=m.exports.useState([]);return t.map(u=>{let h=[];for(let o=0;o<u.tags.length;o++)for(let g=0;g<r.length;g++)u.tags[o]==r[g].id&&h.push(r[g]);return m.exports.createElement(K$,{key:u.id,announcement:u,tags:h})})},K$=e=>{const t=e.announcement,n=m.exports.useContext(Xr);let r=n.allOrgs.find(u=>u.id===t.organization),a=n.allUsers.find(u=>u.id===t.author);return r&&a?m.exports.createElement("div",{className:"card"},m.exports.createElement("div",{className:"card-headers"},m.exports.createElement("div",{className:"tag-section"},e.tags.map(u=>m.exports.createElement(Gg,{key:u.id,tag:u}))),m.exports.createElement("h1",{className:"title"},t.title),m.exports.createElement("div",{className:"card-authors"},m.exports.createElement("div",{className:"card-authors-image"},m.exports.createElement(nn,{to:`/club/${t.organization}`},m.exports.createElement("img",{className:"circle",src:a.gravatar_url}))),m.exports.createElement("div",{className:"card-authors-text"},m.exports.createElement(nn,{to:`/club/${t.organization}`,className:"link"},r.name),",",m.exports.createElement(nn,{to:`/user/${t.author}`,className:"link"},`${a.first_name} ${a.last_name}`),m.exports.createElement("br",null),"\u2022 ",new Date(t.created_date).toLocaleTimeString(void 0,R0)))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"card-body"},t.body),m.exports.createElement("br",null),m.exports.createElement(nn,{className:"link",to:`/announcement/${t.id}`},"See announcement ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))):m.exports.createElement(m.exports.Fragment,null)},Y$=e=>{e.openCreator,e.setOpenCreator,m.exports.useState(!1);const t=m.exports.useContext(Xr),{register:n,handleSubmit:r,watch:a,formState:{errors:u}}=Ck(),[h,o]=m.exports.useState("");m.exports.useState([]),t.allOrgs.map(b=>b.name);const g=b=>{t.postAPI(`${mr.OBJECT}/announcement/new`,{...b}).then(()=>{console.log("Announcement created successfully")}).catch(A=>{console.log("Error:",A)})};return m.exports.createElement("div",{id:"announcement-creator",className:"modal"},m.exports.createElement("div",{className:"modal-top modal-header"},m.exports.createElement("h5",{className:"header-announcement"},"Add Announcement")),m.exports.createElement("form",{className:"signup",onSubmit:r(g),style:{paddingLeft:"1rem",paddingTop:"1rem"}},m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_title"},"Title:"),m.exports.createElement("input",{...n("title"),type:"text",name:"title",required:!0,id:"id_title",style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABHklEQVQ4EaVTO26DQBD1ohQWaS2lg9JybZ+AK7hNwx2oIoVf4UPQ0Lj1FdKktevIpel8AKNUkDcWMxpgSaIEaTVv3sx7uztiTdu2s/98DywOw3Dued4Who/M2aIx5lZV1aEsy0+qiwHELyi+Ytl0PQ69SxAxkWIA4RMRTdNsKE59juMcuZd6xIAFeZ6fGCdJ8kY4y7KAuTRNGd7jyEBXsdOPE3a0QGPsniOnnYMO67LgSQN9T41F2QGrQRRFCwyzoIF2qyBuKKbcOgPXdVeY9rMWgNsjf9ccYesJhk3f5dYT1HX9gR0LLQR30TnjkUEcx2uIuS4RnI+aj6sJR0AM8AaumPaM/rRehyWhXqbFAA9kh3/8/NvHxAYGAsZ/il8IalkCLBfNVAAAAABJRU5ErkJggg==&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement(m.exports.Fragment,null,m.exports.createElement(q$,{apiKey:"your-api-key",onInit:(b,A)=>{},init:{height:500,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_org"},"Organization:"),m.exports.createElement("br",null),m.exports.createElement("select",{...n("organization"),className:"browser-default"},t.allOrgs.map(b=>m.exports.createElement("option",{key:b.id,value:b.id},b.name))))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_show_after"},"Show After:"),m.exports.createElement("input",{...n("show_after"),type:"text",name:"show_after",minLength:1,required:!0,id:"id_show_after"}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_supervisor"},"Supervisor:"),m.exports.createElement("input",{...n("supervisor"),type:"text",name:"supervisor",minLength:1,required:!0,id:"id_supervisor"}))),h&&m.exports.createElement("span",{className:"form-error"},m.exports.createElement("div",{className:"form-errors"},m.exports.createElement("i",{className:"material-icons"},"warning"),m.exports.createElement(m.exports.Fragment,null,h))),m.exports.createElement("div",{className:"modal-footer"},m.exports.createElement("a",{href:"#!",className:"modal-close waves-effect waves-red btn-flat"},"Cancel"),m.exports.createElement("button",{className:"waves-effect waves-green btn",type:"submit"},"Create!"))))},iP=()=>m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("div",{className:"content",id:"content-history"},m.exports.createElement("h1",{className:"title"},"Welcome to the Lyon's Den"),m.exports.createElement("hr",null),m.exports.createElement("h2",{className:"subtitle"},"Home and Pride of the Mackenzie Lyons circa 1960"),m.exports.createElement("p",{className:"text"},"William Lyon Mackenzie C. I. is a Toronto District Secondary School opened in 1960 and located in North York. Mackenzie was named after the historical prowess William Lyon Mackenzie, the political agitator who led the government revolt in Toronto in 1837. In its years of establishing a home of blue and gold, William Lyon Mackenzie Collegiate not only built an incredible student body of 1500 strong, but also a strong, tight knit community that prides itself on multicultural diversity, inclusion, creativity and academic innovation. And, here is where the heart and soul of the Lyon Pride resound."),m.exports.createElement("p",{className:"text"},"William Lyon Mackenzie Collegiate boasts scholastic excellence in its academic programing: the MaCS enrichment program, the Gifted Program, the ELL program, the Advanced Placement Program, and the FIT program. Collectively, these programs have helped nurture student voice and advocacy and inspire a variety of extracurricular opportunities from clubs and councils to intramurals and athletics, to school-wide events and initiatives, all of which beautifully reflect the spirit of membership - the roar of the Lyon Pride."))),J$=()=>m.exports.createElement("div",{className:"content",id:"content-about"},m.exports.createElement("h1",{className:"title"},"Our Vision"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"By definition, a metropolis is a significant cultural center of a country or region and a central hub for regional connections and communications. Likewise, it is our goal at Project Metropolis to create a centralized website at WLMAC where all students can easily access and share information with their peers, making this our own, online metropolis."),m.exports.createElement("h1",{className:"title"},"About the Site"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"The Mackenzie Lyon's Den (Project Metropolis) is a student-driven website that showcases the best of Mackenzie's pride; a central microcosm and communication hub, rich in representing the diverse facets of student life. Welcome to the Lyon's Den, the first stop to find out more about Mackenzie, its school-wide activities, events, initiatives, clubs and councils, Student Council offerings, creative student voice and essential resources to enrich Mackenzie student life!"),m.exports.createElement("p",{className:"text"},"Our site will continue to roll out new features and updates in the coming months. Users can look forward to a notification system, searching system, and a mobile app.")),Q$=()=>m.exports.createElement("div",{className:"content",id:"content-team"},m.exports.createElement("h1",{className:"title"},"Our Team"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"A diverse group of 28 developers, artists, and creators worked in tandem to build this site."),m.exports.createElement("h1",{className:"title"},"Members"),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Project Manager"),m.exports.createElement(nn,{to:"/user/justinlu"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/7fdefdebc57e64f410fc3b750fcd9c3b.jpeg"})),m.exports.createElement("div",{className:"member-text"},"Justin Lu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Saying Justin Lu is only the project manager would be an understatement. He has worked at all ends of development: designed the overall website, recruited/selected other team members, created front-end pages, and as a whole has championed Project Metropolis since its inception in May. When Justin's not dealing with Vice-President responsibilities or schoolwork, he fanboys Johnny Harris (like a true Canadian), grinds the heck out of Genshin Impact, and tries to "live without regret," to varying degrees of success. He's also obsessed with macOS keyboard shortcuts - some of his favourites are CMD + OPT + SHIFT + V and KLDSJFSDF.`)))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Frontend Developers"),m.exports.createElement(nn,{to:"/user/toaster203"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/9754b27ccb9a2ac1215d2386fddeb9b5"})),m.exports.createElement("div",{className:"member-text"},"Hazel Guo")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Just like her valued (and preferably spicy) noodles, Hazel is brimming with warmth, solace, and a dash of ardor. She is as relatable as a frontend developer can get, with her acknowledgement of procrastination and zeal for grinding Monkeytype. She is also as cool as one gets, being a spirited chess player and hockey fan. No true Canadian, nor Lyon for that matter, will ever feel lonely at a hockey game with Hazel who supports the Leafs (and especially enjoys watching them throw leads!) with all her heart."))),m.exports.createElement(nn,{to:"/user/lindiana"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/86b23d037b2c9a97930f1d6e727f87bd"})),m.exports.createElement("div",{className:"member-text"},"Diana Lin")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Just like her work, Diana's taste is authentic; for her, life just wouldn't be the same without peanut sauce and noodles. Neither can she go without highly recommending Mini Motorways to anyone with an assignment due tomorrow."))),m.exports.createElement(nn,{to:"/user/ji.mmyliu"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/df0681c6201aa5fb2928af7bf9b02019"})),m.exports.createElement("div",{className:"member-text"},"Jimmy Liu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},'If one is in search of a teenager who manifests the spirit of a fresh, ambitious adolescent all with wholesomeness, they need not look further than Jimmy. An admirable conqueror of math, chess, competitive programming, and software development, Jimmy is also a badminton enthusiast. He takes his athletic abilities on screen too, surfing Nintendo Wii, and Mario Kart with a particular drive. On a final note, Jimmy, whose opinions are justified by his loving of sushi, lives by the words, "Try your best and forget the rest."'))),m.exports.createElement(nn,{to:"/user/AavaSapkota"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/9e6b8d23f6da43a8c4537b2272166622"})),m.exports.createElement("div",{className:"member-text"},"Aava Sapkota")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Passionate, avid, and bearing a sharp eye for masterful world-building and science, Aava designed the school map and its remarkable features. In addition, she is an adamant advocate of sci-fi fantasy author Brandon Sanderson and cherishes WLMAC's science and math teachers for their efforts and talents. Alas, physics lessons aren't enough to ward one away from daredevil stunts; Aava has bungee jumping on her bucket list."))),m.exports.createElement(nn,{to:"/user/rcshim04"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/0eeae9c7eeb7bb5ecb6e0ae45d1462a7.jpeg"})),m.exports.createElement("div",{className:"member-text"},"Eric Shim")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Eric Shim may be the closest person within our staff to a weeb. He is somehow so sharp witted and sui generis that his talents would be wasted if he were not here, tasked with creating the announcement and blog pages as well as fixing much of the errors found during QA (quality assurance) testing. Eric is easygoing, knowledgeable, and a great source of inside jokes (case in point: \u591C\u6838). He spends his spare time writing music arrangements, reading manga and light novels, regularly updating his Discord statuses and names in Japanese, and immersing himself in new languages."))),m.exports.createElement(nn,{to:"/user/V1ad20"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/f757e632464313749ed5aaf28af2027f"})),m.exports.createElement("div",{className:"member-text"},"Vlad Surdu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Considering his breadth of initiatives and values, Vlad is at once human and superhuman. He applied his knowledge of HTML/CSS/JS and React Native to a broad range of tasks involving the styling of the app's window screens as well as polishing styles and functionalities pertaining to the website's map and calendar. Often you will find Vlad on a bike ride, at the gym, or in his room developing a website for his international students."))),m.exports.createElement(nn,{to:"/user/Trentium"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/8d43abe4e1b9edf939344283117aa5c9.png"})),m.exports.createElement("div",{className:"member-text"},"Daniel Ye")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Although Daniel first joined the staff team as a learning experience, he has become someone reliable and integral to the development of Metropolis. Web development aside, he is not afraid to meet new people and help others, though he innately wishes for better social skills (and unlimited white tuna sushi, but that's beside the point). You can find Daniel on the Valorant grind with his friends or binging three anime seasons in one sitting."))),m.exports.createElement(nn,{to:"/user/justinzhu"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/232c935ad6695b64b3e703edbca9bd1e.png"})),m.exports.createElement("div",{className:"member-text"},"Justin Zhu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"With wishes of becoming a video game director, Justin joined the team with the intentions of helping out and practicing his programming. Justin is the main developer behind the club pages, but he regularly assists with all parts of web development, spreading the twin gospels of Pokemon and anime along the way.")))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Backend Developers"),m.exports.createElement(nn,{to:"/user/4yfc"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/a307bdbc3b0ca9ec1b0168324a82b514.png"})),m.exports.createElement("div",{className:"member-text"},"Ivy Fan-Chiang")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Ivy's back-end development duties entail some incredibly immersive work such as dealing with the site's REST API, database models, and calendar. A loyal and supportive friend through and through, Ivy joined the initiative upon hearing the call. They also save time for playing the flute and 3-D printing."))),m.exports.createElement(nn,{to:"/user/enigma"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/35ff3331dedfa13707c8a63f450d4f0c"})),m.exports.createElement("div",{className:"member-text"},"Paul Lee")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Regarded as a central member of the team and known as a full stack developer, Paul is responsible for bringing the site and app to life through his work in API development and in the back-end framework Django. Paul's ingenuity and intelligence is matched with patience and a willingness to help others with whatever they need. He is not only a valuable member of Project Metropolis, but also a reliable friend to go to when you have absolutely no clue about how a database works. Aside from the outstanding work he does, Paul can be found on Discord using :monkey: to describe a variety of complex emotions."))),m.exports.createElement(nn,{to:"/user/nyiyui"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/b2849e92834ef2f2525b035525308d59"})),m.exports.createElement("div",{className:"member-text"},"Ken Shibata")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Ken is "someone who tries to keep things unambiguous." The aspiring software developer is straightforward and ambitious in all his conquests. If he could retake a course, he would go for French to improve his past performance, and the man makes a habit of reading one book per two days; 240,000 English words, hence his mastery of sporadically using oxford commas. If you'd like to obtain guidance from this tech, EDM, and literature lover, Ken would recommend K-On!, The Last Human, and \u541B\u306E\u540D\u306F.`))),m.exports.createElement(nn,{to:"/user/retep"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/1a6513ef7af252142ae6a434a9d65afe.png"})),m.exports.createElement("div",{className:"member-text"},"Peter Ye")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`A man of classic and contemporary taste, Peter's all-time favourite music consists of "Bohemian Rhapsody" by Queen and "Night Burn" by Ben Segev. His wide range of interests, from "Lord of the Rings" and roller skating to coding and all boils down to dreams of being a software developer. He's certainly getting his training in - you can thank Peter for the timetable banner and authentication page updates. Being a Toronto Argonauts fan, one may find him throwing and kicking footballs during wellness breaks. In the meanwhile, he'll be relishing his dumplings and praying in advance to pass Grade 12 Chemistry next year.`)))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"App Developers"),m.exports.createElement(nn,{to:"/user/ApocalypseCalculator"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/be07132d1837e31b9e123913dc261ffe.png"})),m.exports.createElement("div",{className:"member-text"},"Patrick Lin")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Patrick Lin is the main developer of the Metropolis app. An individual with distinct tastes and self-understanding, Patrick is both wildly talented and opinionated. His dev experience (and tech rep responsibilities) compelled him to join Project Metropolis, where he's managed to share his LEGO expertise and his love-hate relationship with programming. For Patrick, the greatest inventions of all time include hockey, science fiction dystopias, and thin-crust pizza (meat required)."))),m.exports.createElement(nn,{to:"/user/AZron"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/4ae56b64044b964f90cad0ee61ad9999"})),m.exports.createElement("div",{className:"member-text"},"Aaron Zhu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Aaron is chivalrous, knowing and respecting his values, interests, and disinterests. He fittingly describes himself as outgoing - he likes being around other people and is passionate about what he pursues, so much so that on his bucket list is travelling the world. Currently, Aaron has taken on the excellent development opportunity that encompasses building Project Metropolis' mobile app. He loves programming (and school!) so much that his favourite subjects are ICS and TEJ, and he would even take ICS2 again, partial credits to Mr. Wong. A man who would wish for "more time" if he could, Aaron un(ironically) lives by the words "seek discomfort" and "work smart, not hard." You can find him playing Tetris, enjoying noodles and dumplings, listening to radio and Chinese pop, all while dreaming of being CEO of a company he founded and having a dog.`)))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Graphic Designers"),m.exports.createElement(nn,{to:"/user/aliciachung"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/09dd528b306ef4dd7c8758708f708f96"})),m.exports.createElement("div",{className:"member-text"},"Alicia Chung")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Just as her artistic touch is perfectly poignant, Alicia knows how to paint between the lines of on-point and venturesome; She has the drive and confidence to pursue her passions and yearnings given that they are genuinely her heart's desires. As of now, her affections lie with the book that enkindled 35 straight minutes of tears, "The Book Thief," and pho. In the future, Alicia intends to travel the world, alone or with company, and broaden her horizons of diverse cultures, foods, and landscapes.`))),m.exports.createElement(nn,{to:"/user/nisu"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/5f2df3b2844836244aa1f93f3b033166.jpeg"})),m.exports.createElement("div",{className:"member-text"},"Nicole Cui")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Mind constantly brimming with a myriad of ideas along with the drive to make them happen, Nicole yearns to both reach for heaven (see the northern lights) and stay grounded (go camping in Algonquin Park), all while keeping up to date with her MasterChef videos. She's also passionate about digital art and multiplayer video games like Overcooked, Stardew Valley, and (like half our staff) Valorant."))),m.exports.createElement(nn,{to:"/user/zozoe_fc"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/97c77dfe5e67cc2c4c30e15f51facaa8.png"})),m.exports.createElement("div",{className:"member-text"},"Zoe Fan-Chiang")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`To put it simply, Zoe knows what she's doing. Already a master of balancing when to listen to others and when to follow her own path, Zoe's joining Project Metropolis was a decision our dear graphic designer made because "Chelc said join and i listened because it's Chelc :D" A true Canadian, Zoe curls too, and a true artist with soul, she is also the only oboeist at WLMAC. Zoe intends to continue living her life listening (to Chelc), doing her best, and designing graphics.`))),m.exports.createElement(nn,{to:"/user/SidewalkSkunk"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/f10c88679075d6b1aab0aa27f6023c26"})),m.exports.createElement("div",{className:"member-text"},"Derek Ma")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Derek Ma has such a bland personality he knows it. While others describe him as intimidating, Derek uses his suspiciously unsourced British-ism to describe himself as "conscientious"  and embrace his appreciation for good manners. Jokes aside, Derek's a genuinely good person. Like anyone with decent taste, his favourite food is lasagna. Like any true WLMAC patriot, his favourite part about the school is the geese. And like any stereotypical tryhard, Derek would retake ICS if he could and he dreams of being an investment banker. On his bucket list, constructed from his stonks, cinematography, and computer hardware interests is building a computer, whaling on at least one character in Genshin Impact, and making it to retirement. Old age seems to be a genuine fear since Derek would wish, if he could, to advance healthcare to the point of curing ageing. However, we'll never know too much about the man who claims a cool fact about himself is that he likes starting fires. In a fireplace.`))),m.exports.createElement(nn,{to:"/user/cheollie"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/07eb7d43c09e6a8b541b0113846d41fa.png"})),m.exports.createElement("div",{className:"member-text"},"Chelsea W")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Chelsea is the shortest person in our staff. All illustrations on the website, from the map to the login graphics, are her original work, truly a testament to how height doesn't mean everything. All jokes aside, Chelsea also runs her own music corner, creates her own calligraphy, and wastes her own life away watching cheesy K-dramas."))),m.exports.createElement(nn,{to:"/user/Neko"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/3ce2bd07d903482f99d0a111913f5b68"})),m.exports.createElement("div",{className:"member-text"},"Connie Zhang")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Connie Zhang is a fine example of someone who knows where and if her tastes lie, and based on that, makes the decisions that shape her authenticity. According to she who describes herself as "incredibly passive," Connie applied to Project Metropolis half-expecting to get rejected. However, her passion, including her fondness of horror, is exactly what our team values. Her spicy fancies, from dying her hair pastel pink to eating instant noodles so hot she can't taste anything else, make Connie super cool. If that isn't enough to get you to stop and stare, Connie's art is so good the artist herself states that she'd rather the fashion of the clothes she likes drawing over the world's mode manias.`)))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Content Creators"),m.exports.createElement(nn,{to:"/user/misheel.bt"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/ee83f2c6818c6891b878d44f25f7ba3a.jpeg"})),m.exports.createElement("div",{className:"member-text"},"Misheel Batkhuu")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"The resident writer of Project Metropolis, Misheel has also taken up the role of 'chief tormentor of Bernie' within the Metropolis staff. Overwhelmingly brimming with energy and positivity, she sets herself apart from others not because of academic skill, but because of her willingness to try anything and everything. Not to say that she's academically lacking, however\u2014her love of science would say otherwise. If you want to talk about karate, yoga, oatmeal, or are just a diehard romantic, Misheel is here for you."))),m.exports.createElement(nn,{to:"/user/carminite"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/c643df5412333b47a4d948c9f1712fa2.png"})),m.exports.createElement("div",{className:"member-text"},"Bernie Chen")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Although Bernie has a tendency to portray himself as a typical nerd, one look at his character would suffice to prove he is anything but inauthentic. With a genuine love for the piano and sandbox games, he dreams of being a video game composer. However, just like the rest of us, Bernie admits WLMAC deserves what Project Metropolis will foster\u2026 in the meantime, he recommends broadening your horizons by trying some \u5C0F\u7B3C\u5305."))),m.exports.createElement(nn,{to:"/user/julianne.ylh"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/e682d8fe14389324d47019ca3a4dd625"})),m.exports.createElement("div",{className:"member-text"},"Julianne Ho")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"A baker, gardener, painter, birdER, And dancer with five years of rhythmic gymnastics background, Julianne is raging with talent and passion of a caliber one would only believe if they saw it with their own eyes. Bright-eyed herself, Julianne describes herself as \u201Ca person who really enjoys the little things in life.\u201D Diligent as she is, Julianne\u2019s bucket list actually stands a chance at being realized because she\u2019s already on it: getting back to rock climbing and learning ASL. If the girl is starting to look too intimidating, she offers her comfort song: Castle Town by Toby Fox. As for why she\u2019s here on Project Metropolis, the Laufey lover intends to give WLMAC some fun content to enjoy and, definitely not more importantly, help the team get sleep."))),m.exports.createElement(nn,{to:"/user/celine_celestium"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/98bdd04ab9b2ac08c35f133ee2493cb8"})),m.exports.createElement("div",{className:"member-text"},"Celine Hwang")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`With her soulful heart, Celine is sure to make a lasting impact wherever she sets foot; quite literally, as she is a cardinal member of the Mac Dance Team. Her favourite movies are empowering rom-com hits from the 90s/200s, including Mean Girls and Legally Blonde, and her music taste extends from Ariana Grande to Blackpink. For Celine, Project Metropolis means an opportunity, not only to work with fellow (math) savants but to ensure WLMAC's ears are open to good music. For now, she would highly recommend listening to Eighteen by Key. To reinforce her wish for everyone to look back on life with no regrets, here are the song lyrics Celine lives by, "My mama said I'm living today for tomorrow, my daddy said it won't be easy but that's life, you only live once."`))),m.exports.createElement(nn,{to:"/user/hassankhan8868"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/16eee7097593979cb312ab378cddb9e3"})),m.exports.createElement("div",{className:"member-text"},"Hassan Khan")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},"Wholesome and compassionate, Hassan is a cinnamon bun that makes sweetness all but natural and life hopeful. He joined Project Metropolis because he wanted to contribute to a place that genuinely informs and connects students. To thank him for his heroism, or just to hear about his endeavours, you can find Hassan chilling with music - likely soft indie, - dystopian lits, thrillers, or, if you're lucky enough to find him tired, a cheesy romance. In the future, though, you'll be more likely to find the man a journalist or professor, living his dream.")))),m.exports.createElement("div",{className:"member-list"},m.exports.createElement("h2",{className:"subtitle"},"Game Developers"),m.exports.createElement(nn,{to:"/user/3xp3rtz"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/a02b6f6eef8301cdbee1b398bec869a8"})),m.exports.createElement("div",{className:"member-text"},"Caleb Chue")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`Caleb is special in many ways, most good, some cool, and others still, merely special. There's the honest confession that he measures 154cm in height. Then there's the "orz"-inducing declaration that he spends his spare time programming, creating minigames like Mahjong and Tetris, and dedicating/sacrificing some more time/sleep to perfecting them. The most wonderful part about Caleb, though, asides from his love of glitch-hop/jpop, badminton, and curling, is that he is one of those rare golden souls that genuinely lives by words like, "treat others the way you want to be treated" and " you fail, you forget." Welp, everyone will be failing to forget Caleb.`))),m.exports.createElement(nn,{to:"/user/Maplefin"},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-name"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:"./About _ Metropolis_files/1a67ed933f725ecacab937b65c2fb9e2.jpeg"})),m.exports.createElement("div",{className:"member-text"},"James Huynh")),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"member-bio"},`A video game and keyboard hobbyist, the things that make James James are also what make him a slick game developer for Mac Lyons' Den. His favourite game is "Control" and he immerses himself wholeheartedly in the realm of alternative/modern rock like Twenty One Pilots, Half-Alive, and Weathers. He interestingly and genuinely considers ICS his favourite subject. Most fascinating, however, James proclaims a passionate food predilection for all vegetables, raw or cooked.`))))),e8=()=>m.exports.createElement("div",{className:"content",id:"content-school"},m.exports.createElement("h1",{className:"title"},"Contact the School"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"Project Metropolis is a site affiliated with William Lyon Mackenzie Collegiate Institute. To contact the school, please refer to the channels of communication listed below."),m.exports.createElement("ul",{className:"link-section"},m.exports.createElement("div",null,m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"https://wlmac.ca/",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-link zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"WLMCI Offical Website"))),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"https://goo.gl/maps/WyfTKUqKrbecU4RE9",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-map zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"20 Tillplain Road, North York, ON M3H 5R2"))),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"tel:4163953330"},m.exports.createElement("i",{className:"zmdi zmdi-phone zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"(416) 395-3330"))))),m.exports.createElement("h2",{className:"subtitle"},"Admin"),m.exports.createElement("hr",null),m.exports.createElement("ul",{className:"link-section"},m.exports.createElement("div",null,m.exports.createElement("h3",{className:"section-title"},"Principal"),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"mailto:keith.johnson@tdsb.on.ca",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"Keith Johnson (keith.johnson@tdsb.on.ca)"))),m.exports.createElement("h3",{className:"section-title"},"Vice Principals"),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"mailto:joanne.d'addio@tdsb.on.ca",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"Joanne D'Addio (joanne.d'addio@tdsb.on.ca)"))),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"mailto:stephen.morris@tdsb.on.ca",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"Stephen Morris (stephen.morris@tdsb.on.ca)")))))),t8=()=>m.exports.createElement("div",{className:"content",id:"content-contact"},m.exports.createElement("h1",{className:"title"},"Contact Us"),m.exports.createElement("hr",null),m.exports.createElement("p",{className:"text"},"If you ever find bugs or problems with the site, or need to be granted the staff status, feel free to ",m.exports.createElement(nn,{className:"link",to:"mailto:hello@maclyonsden.com",target:"_blank"},"email")," us or use the form below."),m.exports.createElement("ul",{className:"link-section"},m.exports.createElement("div",null,m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"mailto:hello@maclyonsden.com",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"hello@maclyonsden.com"))),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"https://github.com/wlmac",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-github zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"wlmac"))),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"https://www.instagram.com/wlmac.sac/",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-instagram zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"@wlmac.sac"))),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"https://www.facebook.com/groups/keeptrackofmac",target:"_blank"},m.exports.createElement("i",{className:"zmdi zmdi-facebook-box zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("p",null,"Keep Track of MAC"))))),m.exports.createElement("br",null),m.exports.createElement("div",{className:"content-embed"},m.exports.createElement("iframe",{src:"./About _ Metropolis_files/viewform.html",frameBorder:0,marginHeight:0,marginWidth:0},"Loading\u2026"))),IC=[{id:"history",text:"WLMCI",path:"/about?tab=history",component:iP},{id:"about",text:"ABOUT",path:"/about?tab=about",component:J$},{id:"team",text:"TEAM",path:"/about?tab=team",component:Q$},{id:"map",text:"MAP",path:"/map",component:iP},{id:"school",text:"CONTACT WLMCI",path:"/about?tab=school",component:e8},{id:"contact",text:"CONTACT US",path:"/about?tab=contact",component:t8}],oP=()=>{const t=D0().get("tab"),n=Ii();m.exports.useEffect(()=>{document.title="About | Metropolis"},[]);const r=a=>IC.map(u=>{const h=a===u.id?"header active":"header";return m.exports.createElement("li",{key:u.id,className:h,onClick:()=>n(u.path)},u.text)});return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"static/css/about.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"headers"},m.exports.createElement("ul",null,r(t))),m.exports.createElement("div",{className:"content-container"},m.exports.createElement(n8,{page:t}))))},n8=e=>{for(let t of IC)if(t.id===e.page)return m.exports.createElement(t.component);return m.exports.createElement(IC[0].component)},r8=()=>(m.exports.useEffect(()=>{document.title="Clubs | Metropolis"},[]),Ii(),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/club-list.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"card-container"},m.exports.createElement("div",{className:"legend"},m.exports.createElement("div",{className:"legend-items"},m.exports.createElement("div",{className:"green-square"}),m.exports.createElement("span",null,"Open Membership")),m.exports.createElement("div",{className:"legend-items"},m.exports.createElement("div",{className:"yellow-square"}," "),m.exports.createElement("span",null,"Accepting Applications")),m.exports.createElement("div",{className:"legend-items"},m.exports.createElement("div",{className:"red-square"}," "),m.exports.createElement("span",null,"Closed Applications"))),m.exports.createElement("div",{className:"cards"},i8()))))),i8=()=>{const e=m.exports.useContext(Xr),[t,n]=m.exports.useState([]),[r,a]=m.exports.useState([]);return m.exports.useEffect(()=>{const u=`${mr.OBJECT}/organization`;e.getAPI(u,!1).then(h=>{n(h.data.results)}).catch(h=>{e.refreshAuth()}),e.getAPI(`${mr.OBJECT}/tag`,!1).then(h=>{const o=h.data.results;a(o)}).catch(()=>{e.refreshAuth()})},[]),t.map(u=>{let h=[];for(let o=0;o<u.tags.length;o++)for(let g=0;g<r.length;g++)u.tags[o]==r[g].id&&h.push(r[g]);return m.exports.createElement(o8,{club:u,tags:h,key:u.id})})},o8=e=>{const t=e.club,[n,r]=m.exports.useState([]),a=m.exports.useContext(Xr),u=()=>t.is_open?"green":t.applications_open?"yellow":"red";return m.exports.useEffect(()=>{a.getAPI(`${mr.OBJECT}/tag`,!1).then(h=>{const o=h.data.results;r(o.map(g=>m.exports.createElement(Gg,{tag:g})))}).catch(()=>{a.refreshAuth()})},[]),m.exports.createElement("div",{className:`card ${u()}-status`},m.exports.createElement("div",{className:"valign-wrapper"},m.exports.createElement("div",{className:"club-logo"},m.exports.createElement("img",{className:"circle",src:t.icon})),m.exports.createElement("h1",{className:"title link"},m.exports.createElement(nn,{to:`/club/${t.id}`},t.name))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"club-description"},m.exports.createElement("p",null,t.bio)),m.exports.createElement("div",{className:"tag-section"},e.tags.map(h=>m.exports.createElement(Gg,{key:h.id,tag:h}))))};(typeof globalThis!="undefined"?globalThis:window).FullCalendarVDom={Component:m.exports.Component,createElement:m.exports.createElement,render:Zc.exports.render,createRef:m.exports.createRef,Fragment:m.exports.Fragment,createContext:m.exports.createContext,createPortal:Zc.exports.createPortal,flushSync:a8,unmountComponentAtNode:Zc.exports.unmountComponentAtNode};function a8(e){e()}var PC=function(e,t){return PC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},PC(e,t)};function s8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");PC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var DC=function(){return DC=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},DC.apply(this,arguments)};var RC=function(e,t){return RC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},RC(e,t)};function Nr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");RC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var xt=function(){return xt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},xt.apply(this,arguments)};function $i(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,u;r<a;r++)(u||!(r in t))&&(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return e.concat(u||Array.prototype.slice.call(t))}if(typeof FullCalendarVDom=="undefined")throw new Error("Please import the top-level fullcalendar lib before attempting to import a plugin.");var Sk=FullCalendarVDom.Component,kt=FullCalendarVDom.createElement;FullCalendarVDom.render;var as=FullCalendarVDom.createRef,da=FullCalendarVDom.Fragment,t4=FullCalendarVDom.createContext,l8=FullCalendarVDom.createPortal;FullCalendarVDom.flushSync;FullCalendarVDom.unmountComponentAtNode;/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/var rp=function(){function e(t,n){this.context=t,this.internalEventSource=n}return e.prototype.remove=function(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})},e.prototype.refetch=function(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})},Object.defineProperty(e.prototype,"id",{get:function(){return this.internalEventSource.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.internalEventSource.meta.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.internalEventSource.meta.format},enumerable:!1,configurable:!0}),e}();function kk(e){e.parentNode&&e.parentNode.removeChild(e)}function Vo(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(c8(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}function c8(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector;return n.call(e,t)}function u8(e,t){for(var n=e instanceof HTMLElement?[e]:e,r=[],a=0;a<n.length;a+=1)for(var u=n[a].querySelectorAll(t),h=0;h<u.length;h+=1)r.push(u[h]);return r}var d8=/(top|left|right|bottom|width|height)$/i;function pg(e,t){for(var n in t)h8(e,n,t[n])}function h8(e,t,n){n==null?e.style[t]="":typeof n=="number"&&d8.test(t)?e.style[t]=n+"px":e.style[t]=n}function n4(e){var t,n;return(n=(t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])!==null&&n!==void 0?n:e.target}function r4(e){return e.getRootNode?e.getRootNode():document}var aP=0;function L0(){return aP+=1,"fc-dom-"+aP}function O0(e){e.preventDefault()}function p8(e,t){return function(n){var r=Vo(n.target,e);r&&t.call(r,n,r)}}function i4(e,t,n,r){var a=p8(n,r);return e.addEventListener(t,a),function(){e.removeEventListener(t,a)}}function f8(e,t,n,r){var a;return i4(e,"mouseover",t,function(u,h){if(h!==a){a=h,n(u,h);var o=function(g){a=null,r(g,h),h.removeEventListener("mouseleave",o)};h.addEventListener("mouseleave",o)}})}var sP=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function m8(e,t){var n=function(r){t(r),sP.forEach(function(a){e.removeEventListener(a,n)})};sP.forEach(function(r){e.addEventListener(r,n)})}function o4(e){return xt({onClick:e},a4(e))}function a4(e){return{tabIndex:0,onKeyDown:function(t){(t.key==="Enter"||t.key===" ")&&(e(t),t.preventDefault())}}}var lP=0;function nf(){return lP+=1,String(lP)}function Tk(){document.body.classList.add("fc-not-allowed")}function Ak(){document.body.classList.remove("fc-not-allowed")}function g8(e){e.classList.add("fc-unselectable"),e.addEventListener("selectstart",O0)}function v8(e){e.classList.remove("fc-unselectable"),e.removeEventListener("selectstart",O0)}function y8(e){e.addEventListener("contextmenu",O0)}function _8(e){e.removeEventListener("contextmenu",O0)}function x8(e){var t=[],n=[],r,a;for(typeof e=="string"?n=e.split(/\s*,\s*/):typeof e=="function"?n=[e]:Array.isArray(e)&&(n=e),r=0;r<n.length;r+=1)a=n[r],typeof a=="string"?t.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&t.push({func:a});return t}function b8(e,t,n){var r,a;for(r=0;r<n.length;r+=1)if(a=w8(e,t,n[r]),a)return a;return 0}function w8(e,t,n){return n.func?n.func(e,t):E8(e[n.field],t[n.field])*(n.order||1)}function E8(e,t){return!e&&!t?0:t==null?-1:e==null?1:typeof e=="string"||typeof t=="string"?String(e).localeCompare(String(t)):e-t}function zw(e,t){var n=String(e);return"000".substr(0,t-n.length)+n}function fg(e,t,n){return typeof e=="function"?e.apply(void 0,t):typeof e=="string"?t.reduce(function(r,a,u){return r.replace("$"+u,a||"")},e):n}function C8(e,t){return e-t}function Bw(e){return e%1===0}function S8(e){var t=e.querySelector(".fc-scrollgrid-shrink-frame"),n=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+n.getBoundingClientRect().width}var k8=["sun","mon","tue","wed","thu","fri","sat"];function cP(e,t){var n=Gc(e);return n[2]+=t*7,pa(n)}function Qo(e,t){var n=Gc(e);return n[2]+=t,pa(n)}function Od(e,t){var n=Gc(e);return n[6]+=t,pa(n)}function T8(e,t){return rf(e,t)/7}function rf(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60*24)}function A8(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60)}function M8(e,t){return(t.valueOf()-e.valueOf())/(1e3*60)}function I8(e,t){return(t.valueOf()-e.valueOf())/1e3}function P8(e,t){var n=_i(e),r=_i(t);return{years:0,months:0,days:Math.round(rf(n,r)),milliseconds:t.valueOf()-r.valueOf()-(e.valueOf()-n.valueOf())}}function D8(e,t){var n=Vx(e,t);return n!==null&&n%7===0?n/7:null}function Vx(e,t){return qc(e)===qc(t)?Math.round(rf(e,t)):null}function _i(e){return pa([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function R8(e){return pa([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}function L8(e){return pa([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}function O8(e){return pa([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}function z8(e,t,n){var r=e.getUTCFullYear(),a=Fw(e,r,t,n);if(a<1)return Fw(e,r-1,t,n);var u=Fw(e,r+1,t,n);return u>=1?Math.min(a,u):a}function Fw(e,t,n,r){var a=pa([t,0,1+B8(t,n,r)]),u=_i(e),h=Math.round(rf(a,u));return Math.floor(h/7)+1}function B8(e,t,n){var r=7+t-n,a=(7+pa([e,0,r]).getUTCDay()-t)%7;return-a+r-1}function uP(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function dP(e){return new Date(e[0],e[1]||0,e[2]==null?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function Gc(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function pa(e){return e.length===1&&(e=e.concat([0])),new Date(Date.UTC.apply(Date,e))}function s4(e){return!isNaN(e.valueOf())}function qc(e){return e.getUTCHours()*1e3*60*60+e.getUTCMinutes()*1e3*60+e.getUTCSeconds()*1e3+e.getUTCMilliseconds()}function Mk(e,t,n,r){return{instanceId:nf(),defId:e,range:t,forcedStartTzo:n==null?null:n,forcedEndTzo:r==null?null:r}}var Hx=Object.prototype.hasOwnProperty;function Ik(e,t){var n={};if(t)for(var r in t){for(var a=[],u=e.length-1;u>=0;u-=1){var h=e[u][r];if(typeof h=="object"&&h)a.unshift(h);else if(h!==void 0){n[r]=h;break}}a.length&&(n[r]=Ik(a))}for(var u=e.length-1;u>=0;u-=1){var o=e[u];for(var g in o)g in n||(n[g]=o[g])}return n}function zd(e,t){var n={};for(var r in e)t(e[r],r)&&(n[r]=e[r]);return n}function Vd(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}function l4(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a]=!0}return t}function Pk(e){var t=[];for(var n in e)t.push(e[n]);return t}function Zl(e,t){if(e===t)return!0;for(var n in e)if(Hx.call(e,n)&&!(n in t))return!1;for(var n in t)if(Hx.call(t,n)&&e[n]!==t[n])return!1;return!0}function hP(e,t){var n=[];for(var r in e)Hx.call(e,r)&&(r in t||n.push(r));for(var r in t)Hx.call(t,r)&&e[r]!==t[r]&&n.push(r);return n}function Nw(e,t,n){if(n===void 0&&(n={}),e===t)return!0;for(var r in t)if(!(r in e&&F8(e[r],t[r],n[r])))return!1;for(var r in e)if(!(r in t))return!1;return!0}function F8(e,t,n){return e===t||n===!0?!0:n?n(e,t):!1}function N8(e,t,n,r){t===void 0&&(t=0),r===void 0&&(r=1);var a=[];n==null&&(n=Object.keys(e).length);for(var u=t;u<n;u+=r){var h=e[u];h!==void 0&&a.push(h)}return a}function U8(e,t,n,r){for(var a=0;a<r.length;a+=1){var u=r[a].parse(e,n);if(u){var h=e.allDay;return h==null&&(h=t,h==null&&(h=u.allDayGuess,h==null&&(h=!1))),{allDay:h,duration:u.duration,typeData:u.typeData,typeId:a}}}return null}function $p(e,t,n){var r=n.dateEnv,a=n.pluginHooks,u=n.options,h=e.defs,o=e.instances;o=zd(o,function(H){return!h[H.defId].recurringDef});for(var g in h){var b=h[g];if(b.recurringDef){var A=b.recurringDef.duration;A||(A=b.allDay?u.defaultAllDayEventDuration:u.defaultTimedEventDuration);for(var D=j8(b,A,t,r,a.recurringTypes),z=0,F=D;z<F.length;z++){var N=F[z],T=Mk(g,{start:N,end:r.add(N,A)});o[T.instanceId]=T}}}return{defs:h,instances:o}}function j8(e,t,n,r,a){var u=a[e.recurringDef.typeId],h=u.expand(e.recurringDef.typeData,{start:r.subtract(n.start,t),end:n.end},r);return e.allDay&&(h=h.map(_i)),h}var $8=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Fr(e,t){var n;return typeof e=="string"?V8(e):typeof e=="object"&&e?pP(e):typeof e=="number"?pP((n={},n[t||"milliseconds"]=e,n)):null}function V8(e){var t=$8.exec(e);if(t){var n=t[1]?-1:1;return{years:0,months:0,days:n*(t[2]?parseInt(t[2],10):0),milliseconds:n*((t[3]?parseInt(t[3],10):0)*60*60*1e3+(t[4]?parseInt(t[4],10):0)*60*1e3+(t[5]?parseInt(t[5],10):0)*1e3+(t[6]?parseInt(t[6],10):0))}}return null}function pP(e){var t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:(e.hours||e.hour||0)*60*60*1e3+(e.minutes||e.minute||0)*60*1e3+(e.seconds||e.second||0)*1e3+(e.milliseconds||e.millisecond||e.ms||0)},n=e.weeks||e.week;return n&&(t.days+=n*7,t.specifiedWeeks=!0),t}function H8(e,t){return e.years===t.years&&e.months===t.months&&e.days===t.days&&e.milliseconds===t.milliseconds}function W8(e,t){return{years:e.years-t.years,months:e.months-t.months,days:e.days-t.days,milliseconds:e.milliseconds-t.milliseconds}}function G8(e){return Tp(e)/365}function q8(e){return Tp(e)/30}function Tp(e){return qg(e)/864e5}function qg(e){return e.years*(365*864e5)+e.months*(30*864e5)+e.days*864e5+e.milliseconds}function LC(e){var t=e.milliseconds;if(t){if(t%1e3!==0)return{unit:"millisecond",value:t};if(t%(1e3*60)!==0)return{unit:"second",value:t/1e3};if(t%(1e3*60*60)!==0)return{unit:"minute",value:t/(1e3*60)};if(t)return{unit:"hour",value:t/(1e3*60*60)}}return e.days?e.specifiedWeeks&&e.days%7===0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function Z8(e,t,n){n===void 0&&(n=!1);var r=e.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(t==null?r=r.replace("Z",""):t!==0&&(r=r.replace("Z",Dk(t,!0)))),r}function c4(e){return e.toISOString().replace(/T.*$/,"")}function Dk(e,t){t===void 0&&(t=!1);var n=e<0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),u=Math.round(r%60);return t?n+zw(a,2)+":"+zw(u,2):"GMT"+n+a+(u?":"+zw(u,2):"")}function Zg(e,t,n){if(e===t)return!0;var r=e.length,a;if(r!==t.length)return!1;for(a=0;a<r;a+=1)if(!(n?n(e[a],t[a]):e[a]===t[a]))return!1;return!0}function Mr(e,t,n){var r,a;return function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];if(!r)a=e.apply(this,u);else if(!Zg(r,u)){n&&n(a);var o=e.apply(this,u);(!t||!t(o,a))&&(a=o)}return r=u,a}}function Q_(e,t,n){var r=this,a,u;return function(h){if(!a)u=e.call(r,h);else if(!Zl(a,h)){n&&n(u);var o=e.call(r,h);(!t||!t(o,u))&&(u=o)}return a=h,u}}var fP={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},Wx={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},S_=/\s*([ap])\.?m\.?/i,X8=/,/g,K8=/\s+/g,Y8=/\u200e/g,J8=/UTC|GMT/,Q8=function(){function e(t){var n={},r={},a=0;for(var u in t)u in fP?(r[u]=t[u],a=Math.max(fP[u],a)):(n[u]=t[u],u in Wx&&(a=Math.max(Wx[u],a)));this.standardDateProps=n,this.extendedSettings=r,this.severity=a,this.buildFormattingFunc=Mr(mP)}return e.prototype.format=function(t,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(t)},e.prototype.formatRange=function(t,n,r,a){var u=this,h=u.standardDateProps,o=u.extendedSettings,g=oV(t.marker,n.marker,r.calendarSystem);if(!g)return this.format(t,r);var b=g;b>1&&(h.year==="numeric"||h.year==="2-digit")&&(h.month==="numeric"||h.month==="2-digit")&&(h.day==="numeric"||h.day==="2-digit")&&(b=1);var A=this.format(t,r),D=this.format(n,r);if(A===D)return A;var z=aV(h,b),F=mP(z,o,r),N=F(t),T=F(n),H=sV(A,N,D,T),j=o.separator||a||r.defaultSeparator||"";return H?H.before+N+j+T+H.after:A+j+D},e.prototype.getLargestUnit=function(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}},e}();function mP(e,t,n){var r=Object.keys(e).length;return r===1&&e.timeZoneName==="short"?function(a){return Dk(a.timeZoneOffset)}:r===0&&t.week?function(a){return iV(n.computeWeekNumber(a.marker),n.weekText,n.weekTextLong,n.locale,t.week)}:eV(e,t,n)}function eV(e,t,n){e=xt({},e),t=xt({},t),tV(e,t),e.timeZone="UTC";var r=new Intl.DateTimeFormat(n.locale.codes,e),a;if(t.omitZeroMinute){var u=xt({},e);delete u.minute,a=new Intl.DateTimeFormat(n.locale.codes,u)}return function(h){var o=h.marker,g;a&&!o.getUTCMinutes()?g=a:g=r;var b=g.format(o);return nV(b,h,e,t,n)}}function tV(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit")),e.timeZoneName==="long"&&(e.timeZoneName="short"),t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}function nV(e,t,n,r,a){return e=e.replace(Y8,""),n.timeZoneName==="short"&&(e=rV(e,a.timeZone==="UTC"||t.timeZoneOffset==null?"UTC":Dk(t.timeZoneOffset))),r.omitCommas&&(e=e.replace(X8,"").trim()),r.omitZeroMinute&&(e=e.replace(":00","")),r.meridiem===!1?e=e.replace(S_,"").trim():r.meridiem==="narrow"?e=e.replace(S_,function(u,h){return h.toLocaleLowerCase()}):r.meridiem==="short"?e=e.replace(S_,function(u,h){return h.toLocaleLowerCase()+"m"}):r.meridiem==="lowercase"&&(e=e.replace(S_,function(u){return u.toLocaleLowerCase()})),e=e.replace(K8," "),e=e.trim(),e}function rV(e,t){var n=!1;return e=e.replace(J8,function(){return n=!0,t}),n||(e+=" "+t),e}function iV(e,t,n,r,a){var u=[];return a==="long"?u.push(n):(a==="short"||a==="narrow")&&u.push(t),(a==="long"||a==="short")&&u.push(" "),u.push(r.simpleNumberFormat.format(e)),r.options.direction==="rtl"&&u.reverse(),u.join("")}function oV(e,t,n){return n.getMarkerYear(e)!==n.getMarkerYear(t)?5:n.getMarkerMonth(e)!==n.getMarkerMonth(t)?4:n.getMarkerDay(e)!==n.getMarkerDay(t)?2:qc(e)!==qc(t)?1:0}function aV(e,t){var n={};for(var r in e)(!(r in Wx)||Wx[r]<=t)&&(n[r]=e[r]);return n}function sV(e,t,n,r){for(var a=0;a<e.length;){var u=e.indexOf(t,a);if(u===-1)break;var h=e.substr(0,u);a=u+t.length;for(var o=e.substr(a),g=0;g<n.length;){var b=n.indexOf(r,g);if(b===-1)break;var A=n.substr(0,b);g=b+r.length;var D=n.substr(g);if(h===A&&o===D)return{before:h,after:o}}}return null}function gP(e,t){var n=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Gx(e,t,n,r){var a=gP(e,n.calendarSystem),u=t?gP(t,n.calendarSystem):null;return{date:a,start:a,end:u,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}var lV=function(){function e(t){this.cmdStr=t}return e.prototype.format=function(t,n,r){return n.cmdFormatter(this.cmdStr,Gx(t,null,n,r))},e.prototype.formatRange=function(t,n,r,a){return r.cmdFormatter(this.cmdStr,Gx(t,n,r,a))},e}(),cV=function(){function e(t){this.func=t}return e.prototype.format=function(t,n,r){return this.func(Gx(t,null,n,r))},e.prototype.formatRange=function(t,n,r,a){return this.func(Gx(t,n,r,a))},e}();function So(e){return typeof e=="object"&&e?new Q8(e):typeof e=="string"?new lV(e):typeof e=="function"?new cV(e):null}var vP={navLinkDayClick:St,navLinkWeekClick:St,duration:Fr,bootstrapFontAwesome:St,buttonIcons:St,customButtons:St,defaultAllDayEventDuration:Fr,defaultTimedEventDuration:Fr,nextDayThreshold:Fr,scrollTime:Fr,scrollTimeReset:Boolean,slotMinTime:Fr,slotMaxTime:Fr,dayPopoverFormat:So,slotDuration:Fr,snapDuration:Fr,headerToolbar:St,footerToolbar:St,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:So,dayHeaderClassNames:St,dayHeaderContent:St,dayHeaderDidMount:St,dayHeaderWillUnmount:St,dayCellClassNames:St,dayCellContent:St,dayCellDidMount:St,dayCellWillUnmount:St,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:St,weekNumbers:Boolean,weekNumberClassNames:St,weekNumberContent:St,weekNumberDidMount:St,weekNumberWillUnmount:St,editable:Boolean,viewClassNames:St,viewDidMount:St,viewWillUnmount:St,nowIndicator:Boolean,nowIndicatorClassNames:St,nowIndicatorContent:St,nowIndicatorDidMount:St,nowIndicatorWillUnmount:St,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:St,locale:St,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:St,eventOrder:x8,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:St,contentHeight:St,direction:String,weekNumberFormat:So,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:St,initialDate:St,now:St,eventDataTransform:St,stickyHeaderDates:St,stickyFooterScrollbar:St,viewHeight:St,defaultAllDay:Boolean,eventSourceFailure:St,eventSourceSuccess:St,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:St,eventConstraint:St,eventAllow:St,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:St,eventContent:St,eventDidMount:St,eventWillUnmount:St,selectConstraint:St,selectOverlap:St,selectAllow:St,droppable:Boolean,unselectCancel:String,slotLabelFormat:St,slotLaneClassNames:St,slotLaneContent:St,slotLaneDidMount:St,slotLaneWillUnmount:St,slotLabelClassNames:St,slotLabelContent:St,slotLabelDidMount:St,slotLabelWillUnmount:St,dayMaxEvents:St,dayMaxEventRows:St,dayMinWidth:Number,slotLabelInterval:Fr,allDayText:String,allDayClassNames:St,allDayContent:St,allDayDidMount:St,allDayWillUnmount:St,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:So,rerenderDelay:Number,moreLinkText:St,moreLinkHint:St,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:St,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Fr,hiddenDays:St,monthMode:Boolean,fixedWeekCount:Boolean,validRange:St,visibleRange:St,titleFormat:St,eventInteractive:Boolean,noEventsText:String,viewHint:St,navLinkHint:St,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:St,moreLinkClassNames:St,moreLinkContent:St,moreLinkDidMount:St,moreLinkWillUnmount:St},mg={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30},yP={datesSet:St,eventsSet:St,eventAdd:St,eventChange:St,eventRemove:St,windowResize:St,eventClick:St,eventMouseEnter:St,eventMouseLeave:St,select:St,unselect:St,loading:St,_unmount:St,_beforeprint:St,_afterprint:St,_noEventDrop:St,_noEventResize:St,_resize:St,_scrollRequest:St},_P={buttonText:St,buttonHints:St,views:St,plugins:St,initialEvents:St,events:St,eventSources:St},hd={headerToolbar:Kh,footerToolbar:Kh,buttonText:Kh,buttonHints:Kh,buttonIcons:Kh,dateIncrement:Kh};function Kh(e,t){return typeof e=="object"&&typeof t=="object"&&e&&t?Zl(e,t):e===t}var uV={type:String,component:St,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:St,usesMinMaxTime:Boolean,classNames:St,content:St,didMount:St,willUnmount:St};function Uw(e){return Ik(e,hd)}function Rk(e,t){var n={},r={};for(var a in t)a in e&&(n[a]=t[a](e[a]));for(var a in e)a in t||(r[a]=e[a]);return{refined:n,extra:r}}function St(e){return e}function qx(e,t,n,r){for(var a=Rs(),u=zk(n),h=0,o=e;h<o.length;h++){var g=o[h],b=d4(g,t,n,r,u);b&&OC(b,a)}return a}function OC(e,t){return t===void 0&&(t=Rs()),t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function Lk(e,t){var n=e.instances[t];if(n){var r=e.defs[n.defId],a=z0(e,function(u){return dV(r,u)});return a.defs[r.defId]=r,a.instances[n.instanceId]=n,a}return Rs()}function dV(e,t){return Boolean(e.groupId&&e.groupId===t.groupId)}function Rs(){return{defs:{},instances:{}}}function Ok(e,t){return{defs:xt(xt({},e.defs),t.defs),instances:xt(xt({},e.instances),t.instances)}}function z0(e,t){var n=zd(e.defs,t),r=zd(e.instances,function(a){return n[a.defId]});return{defs:n,instances:r}}function hV(e,t){var n=e.defs,r=e.instances,a={},u={};for(var h in n)t.defs[h]||(a[h]=n[h]);for(var o in r)!t.instances[o]&&a[r[o].defId]&&(u[o]=r[o]);return{defs:a,instances:u}}function pV(e,t){return Array.isArray(e)?qx(e,null,t,!0):typeof e=="object"&&e?qx([e],null,t,!0):e!=null?String(e):null}function zC(e){return Array.isArray(e)?e:typeof e=="string"?e.split(/\s+/):[]}var Zx={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:St,overlap:St,allow:St,className:zC,classNames:zC,color:String,backgroundColor:String,borderColor:String,textColor:String},fV={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Xx(e,t){var n=pV(e.constraint,t);return{display:e.display||null,startEditable:e.startEditable!=null?e.startEditable:e.editable,durationEditable:e.durationEditable!=null?e.durationEditable:e.editable,constraints:n!=null?[n]:[],overlap:e.overlap!=null?e.overlap:null,allows:e.allow!=null?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function mV(e){return e.reduce(gV,fV)}function gV(e,t){return{display:t.display!=null?t.display:e.display,startEditable:t.startEditable!=null?t.startEditable:e.startEditable,durationEditable:t.durationEditable!=null?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:typeof t.overlap=="boolean"?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}var ex={id:String,groupId:String,title:String,url:String,interactive:Boolean},u4={start:St,end:St,date:St,allDay:Boolean},vV=xt(xt(xt({},ex),u4),{extendedProps:St});function d4(e,t,n,r,a){a===void 0&&(a=zk(n));var u=h4(e,n,a),h=u.refined,o=u.extra,g=_V(t,n),b=U8(h,g,n.dateEnv,n.pluginHooks.recurringTypes);if(b){var A=BC(h,o,t?t.sourceId:"",b.allDay,Boolean(b.duration),n);return A.recurringDef={typeId:b.typeId,typeData:b.typeData,duration:b.duration},{def:A,instance:null}}var D=yV(h,g,n,r);if(D){var A=BC(h,o,t?t.sourceId:"",D.allDay,D.hasEnd,n),z=Mk(A.defId,D.range,D.forcedStartTzo,D.forcedEndTzo);return{def:A,instance:z}}return null}function h4(e,t,n){return n===void 0&&(n=zk(t)),Rk(e,n)}function zk(e){return xt(xt(xt({},Zx),vV),e.pluginHooks.eventRefiners)}function BC(e,t,n,r,a,u){for(var h={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:nf(),sourceId:n,allDay:r,hasEnd:a,interactive:e.interactive,ui:Xx(e,u),extendedProps:xt(xt({},e.extendedProps||{}),t)},o=0,g=u.pluginHooks.eventDefMemberAdders;o<g.length;o++){var b=g[o];xt(h,b(e))}return Object.freeze(h.ui.classNames),Object.freeze(h.extendedProps),h}function yV(e,t,n,r){var a=e.allDay,u,h=null,o=!1,g,b=null,A=e.start!=null?e.start:e.date;if(u=n.dateEnv.createMarkerMeta(A),u)h=u.marker;else if(!r)return null;return e.end!=null&&(g=n.dateEnv.createMarkerMeta(e.end)),a==null&&(t!=null?a=t:a=(!u||u.isTimeUnspecified)&&(!g||g.isTimeUnspecified)),a&&h&&(h=_i(h)),g&&(b=g.marker,a&&(b=_i(b)),h&&b<=h&&(b=null)),b?o=!0:r||(o=n.options.forceEventDuration||!1,b=n.dateEnv.add(h,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:a,hasEnd:o,range:{start:h,end:b},forcedStartTzo:u?u.forcedTzo:null,forcedEndTzo:g?g.forcedTzo:null}}function _V(e,t){var n=null;return e&&(n=e.defaultAllDay),n==null&&(n=t.options.defaultAllDay),n}function p4(e){var t=Math.floor(rf(e.start,e.end))||1,n=_i(e.start),r=Qo(n,t);return{start:n,end:r}}function f4(e,t){t===void 0&&(t=Fr(0));var n=null,r=null;if(e.end){r=_i(e.end);var a=e.end.valueOf()-r.valueOf();a&&a>=qg(t)&&(r=Qo(r,1))}return e.start&&(n=_i(e.start),r&&r<=n&&(r=Qo(n,1))),{start:n,end:r}}function _p(e,t,n,r){return r==="year"?Fr(n.diffWholeYears(e,t),"year"):r==="month"?Fr(n.diffWholeMonths(e,t),"month"):P8(e,t)}function xV(e,t){var n=null,r=null;return e.start&&(n=t.createMarker(e.start)),e.end&&(r=t.createMarker(e.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function xP(e,t){var n=[],r=t.start,a,u;for(e.sort(bV),a=0;a<e.length;a+=1)u=e[a],u.start>r&&n.push({start:r,end:u.start}),u.end>r&&(r=u.end);return r<t.end&&n.push({start:r,end:t.end}),n}function bV(e,t){return e.start.valueOf()-t.start.valueOf()}function Xg(e,t){var n=e.start,r=e.end,a=null;return t.start!==null&&(n===null?n=t.start:n=new Date(Math.max(n.valueOf(),t.start.valueOf()))),t.end!=null&&(r===null?r=t.end:r=new Date(Math.min(r.valueOf(),t.end.valueOf()))),(n===null||r===null||n<r)&&(a={start:n,end:r}),a}function wV(e,t){return(e.start===null?null:e.start.valueOf())===(t.start===null?null:t.start.valueOf())&&(e.end===null?null:e.end.valueOf())===(t.end===null?null:t.end.valueOf())}function Bk(e,t){return(e.end===null||t.start===null||e.end>t.start)&&(e.start===null||t.end===null||e.start<t.end)}function B0(e,t){return(e.start===null||t.start!==null&&t.start>=e.start)&&(e.end===null||t.end!==null&&t.end<=e.end)}function kd(e,t){return(e.start===null||t>=e.start)&&(e.end===null||t<e.end)}function EV(e,t){return t.start!=null&&e<t.start?t.start:t.end!=null&&e>=t.end?new Date(t.end.valueOf()-1):e}function bP(e,t,n,r){var a={},u={},h={},o=[],g=[],b=Kx(e.defs,t);for(var A in e.defs){var D=e.defs[A],z=b[D.defId];z.display==="inverse-background"&&(D.groupId?(a[D.groupId]=[],h[D.groupId]||(h[D.groupId]=D)):u[A]=[])}for(var F in e.instances){var N=e.instances[F],D=e.defs[N.defId],z=b[D.defId],T=N.range,H=!D.allDay&&r?f4(T,r):T,j=Xg(H,n);j&&(z.display==="inverse-background"?D.groupId?a[D.groupId].push(j):u[N.defId].push(j):z.display!=="none"&&(z.display==="background"?o:g).push({def:D,ui:z,instance:N,range:j,isStart:H.start&&H.start.valueOf()===j.start.valueOf(),isEnd:H.end&&H.end.valueOf()===j.end.valueOf()}))}for(var W in a)for(var B=a[W],O=xP(B,n),S=0,w=O;S<w.length;S++){var P=w[S],D=h[W],z=b[D.defId];o.push({def:D,ui:z,instance:null,range:P,isStart:!1,isEnd:!1})}for(var A in u)for(var B=u[A],O=xP(B,n),Y=0,ne=O;Y<ne.length;Y++){var P=ne[Y];o.push({def:e.defs[A],ui:b[A],instance:null,range:P,isStart:!1,isEnd:!1})}return{bg:o,fg:g}}function wP(e,t){e.fcSeg=t}function Vp(e){return e.fcSeg||e.parentNode.fcSeg||null}function Kx(e,t){return Vd(e,function(n){return m4(n,t)})}function m4(e,t){var n=[];return t[""]&&n.push(t[""]),t[e.defId]&&n.push(t[e.defId]),n.push(e.ui),mV(n)}function CV(e,t){var n=e.map(SV);return n.sort(function(r,a){return b8(r,a,t)}),n.map(function(r){return r._seg})}function SV(e){var t=e.eventRange,n=t.def,r=t.instance?t.instance.range:t.range,a=r.start?r.start.valueOf():0,u=r.end?r.end.valueOf():0;return xt(xt(xt({},n.extendedProps),n),{id:n.publicId,start:a,end:u,duration:u-a,allDay:Number(n.allDay),_seg:e})}function kV(e,t){for(var n=t.pluginHooks,r=n.isDraggableTransformers,a=e.eventRange,u=a.def,h=a.ui,o=h.startEditable,g=0,b=r;g<b.length;g++){var A=b[g];o=A(o,u,h,t)}return o}function TV(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function AV(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function g4(e,t,n,r,a,u,h){var o=n.dateEnv,g=n.options,b=g.displayEventTime,A=g.displayEventEnd,D=e.eventRange.def,z=e.eventRange.instance;b==null&&(b=r!==!1),A==null&&(A=a!==!1);var F=z.range.start,N=z.range.end,T=u||e.start||e.eventRange.range.start,H=h||e.end||e.eventRange.range.end,j=_i(F).valueOf()===_i(T).valueOf(),W=_i(Od(N,-1)).valueOf()===_i(Od(H,-1)).valueOf();return b&&!D.allDay&&(j||W)?(T=j?F:T,H=W?N:H,A&&D.hasEnd?o.formatRange(T,H,t,{forcedStartTzo:u?null:z.forcedStartTzo,forcedEndTzo:h?null:z.forcedEndTzo}):o.format(T,t,{forcedTzo:u?null:z.forcedStartTzo})):""}function gg(e,t,n){var r=e.eventRange.range;return{isPast:r.end<(n||t.start),isFuture:r.start>=(n||t.end),isToday:t&&kd(t,r.start)}}function MV(e){var t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}function IV(e){return e.instance?e.instance.instanceId:e.def.defId+":"+e.range.start.toISOString()}function v4(e,t){var n=e.eventRange,r=n.def,a=n.instance,u=r.url;if(u)return{href:u};var h=t.emitter,o=t.options,g=o.eventInteractive;return g==null&&(g=r.interactive,g==null&&(g=Boolean(h.hasHandlers("eventClick")))),g?a4(function(b){h.trigger("eventClick",{el:b.target,event:new zi(t,r,a),jsEvent:b,view:t.viewApi})}):{}}var PV={start:St,end:St,allDay:Boolean};function DV(e,t,n){var r=RV(e,t),a=r.range;if(!a.start)return null;if(!a.end){if(n==null)return null;a.end=t.add(a.start,n)}return r}function RV(e,t){var n=Rk(e,PV),r=n.refined,a=n.extra,u=r.start?t.createMarkerMeta(r.start):null,h=r.end?t.createMarkerMeta(r.end):null,o=r.allDay;return o==null&&(o=u&&u.isTimeUnspecified&&(!h||h.isTimeUnspecified)),xt({range:{start:u?u.marker:null,end:h?h.marker:null},allDay:o},a)}function LV(e,t){return wV(e.range,t.range)&&e.allDay===t.allDay&&OV(e,t)}function OV(e,t){for(var n in t)if(n!=="range"&&n!=="allDay"&&e[n]!==t[n])return!1;for(var n in e)if(!(n in t))return!1;return!0}function zV(e,t){return xt(xt({},_4(e.range,t,e.allDay)),{allDay:e.allDay})}function y4(e,t,n){return xt(xt({},_4(e,t,n)),{timeZone:t.timeZone})}function _4(e,t,n){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:n}),endStr:t.formatIso(e.end,{omitTime:n})}}function BV(e,t,n){var r=h4({editable:!1},n),a=BC(r.refined,r.extra,"",e.allDay,!0,n);return{def:a,ui:m4(a,t),instance:Mk(a.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}function x4(e,t,n){n.emitter.trigger("select",xt(xt({},Fk(e,n)),{jsEvent:t?t.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function FV(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}function Fk(e,t){for(var n={},r=0,a=t.pluginHooks.dateSpanTransforms;r<a.length;r++){var u=a[r];xt(n,u(e,t))}return xt(n,zV(e,t.dateEnv)),n}function EP(e,t,n){var r=n.dateEnv,a=n.options,u=t;return e?(u=_i(u),u=r.add(u,a.defaultAllDayEventDuration)):u=r.add(u,a.defaultTimedEventDuration),u}function Nk(e,t,n,r){var a=Kx(e.defs,t),u=Rs();for(var h in e.defs){var o=e.defs[h];u.defs[h]=NV(o,a[h],n,r)}for(var g in e.instances){var b=e.instances[g],o=u.defs[b.defId];u.instances[g]=UV(b,o,a[b.defId],n,r)}return u}function NV(e,t,n,r){var a=n.standardProps||{};a.hasEnd==null&&t.durationEditable&&(n.startDelta||n.endDelta)&&(a.hasEnd=!0);var u=xt(xt(xt({},e),a),{ui:xt(xt({},e.ui),a.ui)});n.extendedProps&&(u.extendedProps=xt(xt({},u.extendedProps),n.extendedProps));for(var h=0,o=r.pluginHooks.eventDefMutationAppliers;h<o.length;h++){var g=o[h];g(u,n,r)}return!u.hasEnd&&r.options.forceEventDuration&&(u.hasEnd=!0),u}function UV(e,t,n,r,a){var u=a.dateEnv,h=r.standardProps&&r.standardProps.allDay===!0,o=r.standardProps&&r.standardProps.hasEnd===!1,g=xt({},e);return h&&(g.range=p4(g.range)),r.datesDelta&&n.startEditable&&(g.range={start:u.add(g.range.start,r.datesDelta),end:u.add(g.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(g.range={start:u.add(g.range.start,r.startDelta),end:g.range.end}),r.endDelta&&n.durationEditable&&(g.range={start:g.range.start,end:u.add(g.range.end,r.endDelta)}),o&&(g.range={start:g.range.start,end:EP(t.allDay,g.range.start,a)}),t.allDay&&(g.range={start:_i(g.range.start),end:_i(g.range.end)}),g.range.end<g.range.start&&(g.range.end=EP(t.allDay,g.range.start,a)),g}var jV=function(){function e(t,n,r){this.type=t,this.getCurrentData=n,this.dateEnv=r}return Object.defineProperty(e.prototype,"calendar",{get:function(){return this.getCurrentData().calendarApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.getCurrentData().viewTitle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)},enumerable:!1,configurable:!0}),e.prototype.getOption=function(t){return this.getCurrentData().options[t]},e}(),$V={id:String,defaultAllDay:Boolean,url:String,format:String,events:St,eventDataTransform:St,success:St,failure:St};function b4(e,t,n){n===void 0&&(n=w4(t));var r;if(typeof e=="string"?r={url:e}:typeof e=="function"||Array.isArray(e)?r={events:e}:typeof e=="object"&&e&&(r=e),r){var a=Rk(r,n),u=a.refined,h=a.extra,o=VV(u,t);if(o)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:u.defaultAllDay,eventDataTransform:u.eventDataTransform,success:u.success,failure:u.failure,publicId:u.id||"",sourceId:nf(),sourceDefId:o.sourceDefId,meta:o.meta,ui:Xx(u,t),extendedProps:h}}return null}function w4(e){return xt(xt(xt({},Zx),$V),e.pluginHooks.eventSourceRefiners)}function VV(e,t){for(var n=t.pluginHooks.eventSourceDefs,r=n.length-1;r>=0;r-=1){var a=n[r],u=a.parseMeta(e);if(u)return{sourceDefId:r,meta:u}}return null}function HV(e,t){switch(t.type){case"CHANGE_DATE":return t.dateMarker;default:return e}}function WV(e,t){var n=e.initialDate;return n!=null?t.createMarker(n):fv(e.now,t)}function fv(e,t){return typeof e=="function"&&(e=e()),e==null?t.createNowMarker():t.createMarker(e)}var GV=function(){function e(){}return e.prototype.getCurrentData=function(){return this.currentDataManager.getCurrentData()},e.prototype.dispatch=function(t){return this.currentDataManager.dispatch(t)},Object.defineProperty(e.prototype,"view",{get:function(){return this.getCurrentData().viewApi},enumerable:!1,configurable:!0}),e.prototype.batchRendering=function(t){t()},e.prototype.updateSize=function(){this.trigger("_resize",!0)},e.prototype.setOption=function(t,n){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:n})},e.prototype.getOption=function(t){return this.currentDataManager.currentCalendarOptionsInput[t]},e.prototype.getAvailableLocaleCodes=function(){return Object.keys(this.getCurrentData().availableRawLocales)},e.prototype.on=function(t,n){var r=this.currentDataManager;r.currentCalendarOptionsRefiners[t]?r.emitter.on(t,n):console.warn("Unknown listener name '"+t+"'")},e.prototype.off=function(t,n){this.currentDataManager.emitter.off(t,n)},e.prototype.trigger=function(t){for(var n,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];(n=this.currentDataManager.emitter).trigger.apply(n,$i([t],r))},e.prototype.changeView=function(t,n){var r=this;this.batchRendering(function(){if(r.unselect(),n)if(n.start&&n.end)r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),r.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{var a=r.getCurrentData().dateEnv;r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:a.createMarker(n)})}else r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})},e.prototype.zoomTo=function(t,n){var r=this.getCurrentData(),a;n=n||"day",a=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:t}):this.dispatch({type:"CHANGE_DATE",dateMarker:t})},e.prototype.getUnitViewSpec=function(t){var n=this.getCurrentData(),r=n.viewSpecs,a=n.toolbarConfig,u=[].concat(a.header?a.header.viewsWithButtons:[],a.footer?a.footer.viewsWithButtons:[]),h,o;for(var g in r)u.push(g);for(h=0;h<u.length;h+=1)if(o=r[u[h]],o&&o.singleUnit===t)return o;return null},e.prototype.prev=function(){this.unselect(),this.dispatch({type:"PREV"})},e.prototype.next=function(){this.unselect(),this.dispatch({type:"NEXT"})},e.prototype.prevYear=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})},e.prototype.nextYear=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})},e.prototype.today=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:fv(t.calendarOptions.now,t.dateEnv)})},e.prototype.gotoDate=function(t){var n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(t)})},e.prototype.incrementDate=function(t){var n=this.getCurrentData(),r=Fr(t);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))},e.prototype.getDate=function(){var t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)},e.prototype.formatDate=function(t,n){var r=this.getCurrentData().dateEnv;return r.format(r.createMarker(t),So(n))},e.prototype.formatRange=function(t,n,r){var a=this.getCurrentData().dateEnv;return a.formatRange(a.createMarker(t),a.createMarker(n),So(r),r)},e.prototype.formatIso=function(t,n){var r=this.getCurrentData().dateEnv;return r.formatIso(r.createMarker(t),{omitTime:n})},e.prototype.select=function(t,n){var r;n==null?t.start!=null?r=t:r={start:t,end:null}:r={start:t,end:n};var a=this.getCurrentData(),u=DV(r,a.dateEnv,Fr({days:1}));u&&(this.dispatch({type:"SELECT_DATES",selection:u}),x4(u,null,a))},e.prototype.unselect=function(t){var n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),FV(t,n))},e.prototype.addEvent=function(t,n){if(t instanceof zi){var r=t._def,a=t._instance,u=this.getCurrentData();return u.eventStore.defs[r.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:OC({def:r,instance:a})}),this.triggerEventAdd(t)),t}var h=this.getCurrentData(),o;if(n instanceof rp)o=n.internalEventSource;else if(typeof n=="boolean")n&&(o=Pk(h.eventSources)[0]);else if(n!=null){var g=this.getEventSourceById(n);if(!g)return console.warn('Could not find an event source with ID "'+n+'"'),null;o=g.internalEventSource}var b=d4(t,o,h,!1);if(b){var A=new zi(h,b.def,b.def.recurringDef?null:b.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:OC(b)}),this.triggerEventAdd(A),A}return null},e.prototype.triggerEventAdd=function(t){var n=this,r=this.getCurrentData().emitter;r.trigger("eventAdd",{event:t,relatedEvents:[],revert:function(){n.dispatch({type:"REMOVE_EVENTS",eventStore:E4(t)})}})},e.prototype.getEventById=function(t){var n=this.getCurrentData(),r=n.eventStore,a=r.defs,u=r.instances;t=String(t);for(var h in a){var o=a[h];if(o.publicId===t){if(o.recurringDef)return new zi(n,o,null);for(var g in u){var b=u[g];if(b.defId===o.defId)return new zi(n,o,b)}}}return null},e.prototype.getEvents=function(){var t=this.getCurrentData();return Td(t.eventStore,t)},e.prototype.removeAllEvents=function(){this.dispatch({type:"REMOVE_ALL_EVENTS"})},e.prototype.getEventSources=function(){var t=this.getCurrentData(),n=t.eventSources,r=[];for(var a in n)r.push(new rp(t,n[a]));return r},e.prototype.getEventSourceById=function(t){var n=this.getCurrentData(),r=n.eventSources;t=String(t);for(var a in r)if(r[a].publicId===t)return new rp(n,r[a]);return null},e.prototype.addEventSource=function(t){var n=this.getCurrentData();if(t instanceof rp)return n.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;var r=b4(t,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new rp(n,r)):null},e.prototype.removeAllEventSources=function(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})},e.prototype.refetchEvents=function(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})},e.prototype.scrollToTime=function(t){var n=Fr(t);n&&this.trigger("_scrollRequest",{time:n})},e}(),zi=function(){function e(t,n,r){this._context=t,this._def=n,this._instance=r||null}return e.prototype.setProp=function(t,n){var r,a;if(t in u4)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(t==="id")n=ex[t](n),this.mutate({standardProps:{publicId:n}});else if(t in ex)n=ex[t](n),this.mutate({standardProps:(r={},r[t]=n,r)});else if(t in Zx){var u=Zx[t](n);t==="color"?u={backgroundColor:n,borderColor:n}:t==="editable"?u={startEditable:n,durationEditable:n}:u=(a={},a[t]=n,a),this.mutate({standardProps:{ui:u}})}else console.warn("Could not set prop '"+t+"'. Use setExtendedProp instead.")},e.prototype.setExtendedProp=function(t,n){var r;this.mutate({extendedProps:(r={},r[t]=n,r)})},e.prototype.setStart=function(t,n){n===void 0&&(n={});var r=this._context.dateEnv,a=r.createMarker(t);if(a&&this._instance){var u=this._instance.range,h=_p(u.start,a,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:h}):this.mutate({startDelta:h})}},e.prototype.setEnd=function(t,n){n===void 0&&(n={});var r=this._context.dateEnv,a;if(!(t!=null&&(a=r.createMarker(t),!a))&&this._instance)if(a){var u=_p(this._instance.range.end,a,r,n.granularity);this.mutate({endDelta:u})}else this.mutate({standardProps:{hasEnd:!1}})},e.prototype.setDates=function(t,n,r){r===void 0&&(r={});var a=this._context.dateEnv,u={allDay:r.allDay},h=a.createMarker(t),o;if(!!h&&!(n!=null&&(o=a.createMarker(n),!o))&&this._instance){var g=this._instance.range;r.allDay===!0&&(g=p4(g));var b=_p(g.start,h,a,r.granularity);if(o){var A=_p(g.end,o,a,r.granularity);H8(b,A)?this.mutate({datesDelta:b,standardProps:u}):this.mutate({startDelta:b,endDelta:A,standardProps:u})}else u.hasEnd=!1,this.mutate({datesDelta:b,standardProps:u})}},e.prototype.moveStart=function(t){var n=Fr(t);n&&this.mutate({startDelta:n})},e.prototype.moveEnd=function(t){var n=Fr(t);n&&this.mutate({endDelta:n})},e.prototype.moveDates=function(t){var n=Fr(t);n&&this.mutate({datesDelta:n})},e.prototype.setAllDay=function(t,n){n===void 0&&(n={});var r={allDay:t},a=n.maintainDuration;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(r.hasEnd=a),this.mutate({standardProps:r})},e.prototype.formatRange=function(t){var n=this._context.dateEnv,r=this._instance,a=So(t);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,a,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,a,{forcedTzo:r.forcedStartTzo})},e.prototype.mutate=function(t){var n=this._instance;if(n){var r=this._def,a=this._context,u=a.getCurrentData().eventStore,h=Lk(u,n.instanceId),o={"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}};h=Nk(h,o,t,a);var g=new e(a,r,n);this._def=h.defs[r.defId],this._instance=h.instances[n.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:h}),a.emitter.trigger("eventChange",{oldEvent:g,event:this,relatedEvents:Td(h,a,n),revert:function(){a.dispatch({type:"RESET_EVENTS",eventStore:u})}})}},e.prototype.remove=function(){var t=this._context,n=E4(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:n}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert:function(){t.dispatch({type:"MERGE_EVENTS",eventStore:n})}})},Object.defineProperty(e.prototype,"source",{get:function(){var t=this._def.sourceId;return t?new rp(this._context,this._context.getCurrentData().eventSources[t]):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startStr",{get:function(){var t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endStr",{get:function(){var t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._def.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return this._def.groupId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allDay",{get:function(){return this._def.allDay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._def.title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._def.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this._def.ui.display||"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startEditable",{get:function(){return this._def.ui.startEditable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationEditable",{get:function(){return this._def.ui.durationEditable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"constraint",{get:function(){return this._def.ui.constraints[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlap",{get:function(){return this._def.ui.overlap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allow",{get:function(){return this._def.ui.allows[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._def.ui.backgroundColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._def.ui.borderColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._def.ui.textColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNames",{get:function(){return this._def.ui.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extendedProps",{get:function(){return this._def.extendedProps},enumerable:!1,configurable:!0}),e.prototype.toPlainObject=function(t){t===void 0&&(t={});var n=this._def,r=n.ui,a=this,u=a.startStr,h=a.endStr,o={};return n.title&&(o.title=n.title),u&&(o.start=u),h&&(o.end=h),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),r.display&&r.display!=="auto"&&(o.display=r.display),t.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?o.color=r.backgroundColor:(r.backgroundColor&&(o.backgroundColor=r.backgroundColor),r.borderColor&&(o.borderColor=r.borderColor)),r.textColor&&(o.textColor=r.textColor),r.classNames.length&&(o.classNames=r.classNames),Object.keys(n.extendedProps).length&&(t.collapseExtendedProps?xt(o,n.extendedProps):o.extendedProps=n.extendedProps),o},e.prototype.toJSON=function(){return this.toPlainObject()},e}();function E4(e){var t,n,r=e._def,a=e._instance;return{defs:(t={},t[r.defId]=r,t),instances:a?(n={},n[a.instanceId]=a,n):{}}}function Td(e,t,n){var r=e.defs,a=e.instances,u=[],h=n?n.instanceId:"";for(var o in a){var g=a[o],b=r[g.defId];g.instanceId!==h&&u.push(new zi(t,b,g))}return u}var C4={};function qV(e,t){C4[e]=t}function ZV(e){return new C4[e]}var XV=function(){function e(){}return e.prototype.getMarkerYear=function(t){return t.getUTCFullYear()},e.prototype.getMarkerMonth=function(t){return t.getUTCMonth()},e.prototype.getMarkerDay=function(t){return t.getUTCDate()},e.prototype.arrayToMarker=function(t){return pa(t)},e.prototype.markerToArray=function(t){return Gc(t)},e}();qV("gregory",XV);var KV=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function YV(e){var t=KV.exec(e);if(t){var n=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?Number("0."+t[12])*1e3:0));if(s4(n)){var r=null;return t[13]&&(r=(t[15]==="-"?-1:1)*(Number(t[16]||0)*60+Number(t[18]||0))),{marker:n,isTimeUnspecified:!t[6],timeZoneOffset:r}}}return null}var JV=function(){function e(t){var n=this.timeZone=t.timeZone,r=n!=="local"&&n!=="UTC";t.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(n)),this.canComputeOffset=Boolean(!r||this.namedTimeZoneImpl),this.calendarSystem=ZV(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,t.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof t.firstDay=="number"&&(this.weekDow=t.firstDay),typeof t.weekNumberCalculation=="function"&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=t.weekText!=null?t.weekText:t.locale.options.weekText,this.weekTextLong=(t.weekTextLong!=null?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}return e.prototype.createMarker=function(t){var n=this.createMarkerMeta(t);return n===null?null:n.marker},e.prototype.createNowMarker=function(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):pa(uP(new Date))},e.prototype.createMarkerMeta=function(t){if(typeof t=="string")return this.parse(t);var n=null;return typeof t=="number"?n=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(n=this.timestampToMarker(t))):Array.isArray(t)&&(n=pa(t)),n===null||!s4(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}},e.prototype.parse=function(t){var n=YV(t);if(n===null)return null;var r=n.marker,a=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):a=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:a}},e.prototype.getYear=function(t){return this.calendarSystem.getMarkerYear(t)},e.prototype.getMonth=function(t){return this.calendarSystem.getMarkerMonth(t)},e.prototype.add=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)},e.prototype.subtract=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)},e.prototype.addYears=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]+=n,this.calendarSystem.arrayToMarker(r)},e.prototype.addMonths=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[1]+=n,this.calendarSystem.arrayToMarker(r)},e.prototype.diffWholeYears=function(t,n){var r=this.calendarSystem;return qc(t)===qc(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)&&r.getMarkerMonth(t)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(t):null},e.prototype.diffWholeMonths=function(t,n){var r=this.calendarSystem;return qc(t)===qc(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(t)+(r.getMarkerYear(n)-r.getMarkerYear(t))*12:null},e.prototype.greatestWholeUnit=function(t,n){var r=this.diffWholeYears(t,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(t,n),r!==null?{unit:"month",value:r}:(r=D8(t,n),r!==null?{unit:"week",value:r}:(r=Vx(t,n),r!==null?{unit:"day",value:r}:(r=A8(t,n),Bw(r)?{unit:"hour",value:r}:(r=M8(t,n),Bw(r)?{unit:"minute",value:r}:(r=I8(t,n),Bw(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-t.valueOf()}))))))},e.prototype.countDurationsBetween=function(t,n,r){var a;return r.years&&(a=this.diffWholeYears(t,n),a!==null)?a/G8(r):r.months&&(a=this.diffWholeMonths(t,n),a!==null)?a/q8(r):r.days&&(a=Vx(t,n),a!==null)?a/Tp(r):(n.valueOf()-t.valueOf())/qg(r)},e.prototype.startOf=function(t,n){return n==="year"?this.startOfYear(t):n==="month"?this.startOfMonth(t):n==="week"?this.startOfWeek(t):n==="day"?_i(t):n==="hour"?R8(t):n==="minute"?L8(t):n==="second"?O8(t):null},e.prototype.startOfYear=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])},e.prototype.startOfMonth=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])},e.prototype.startOfWeek=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])},e.prototype.computeWeekNumber=function(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):z8(t,this.weekDow,this.weekDoy)},e.prototype.format=function(t,n,r){return r===void 0&&(r={}),n.format({marker:t,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(t)},this)},e.prototype.formatRange=function(t,n,r,a){return a===void 0&&(a={}),a.isEndExclusive&&(n=Od(n,-1)),r.formatRange({marker:t,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(t)},{marker:n,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(n)},this,a.defaultSeparator)},e.prototype.formatIso=function(t,n){n===void 0&&(n={});var r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(t)),Z8(t,r,n.omitTime)},e.prototype.timestampToMarker=function(t){return this.timeZone==="local"?pa(uP(new Date(t))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(t):pa(this.namedTimeZoneImpl.timestampToArray(t))},e.prototype.offsetForMarker=function(t){return this.timeZone==="local"?-dP(Gc(t)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Gc(t)):null},e.prototype.toDate=function(t,n){return this.timeZone==="local"?dP(Gc(t)):this.timeZone==="UTC"?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-this.namedTimeZoneImpl.offsetForArray(Gc(t))*1e3*60):new Date(t.valueOf()-(n||0))},e}(),QV=[],S4={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},k4=xt(xt({},S4),{buttonHints:{prev:"Previous $0",next:"Next $0",today:function(e,t){return t==="day"?"Today":"This "+e}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:function(e){return"Show "+e+" more event"+(e===1?"":"s")}});function eH(e){for(var t=e.length>0?e[0].code:"en",n=QV.concat(e),r={en:k4},a=0,u=n;a<u.length;a++){var h=u[a];r[h.code]=h}return{map:r,defaultCode:t}}function T4(e,t){return typeof e=="object"&&!Array.isArray(e)?A4(e.code,[e.code],e):tH(e,t)}function tH(e,t){var n=[].concat(e||[]),r=nH(n,t)||k4;return A4(e,n,r)}function nH(e,t){for(var n=0;n<e.length;n+=1)for(var r=e[n].toLocaleLowerCase().split("-"),a=r.length;a>0;a-=1){var u=r.slice(0,a).join("-");if(t[u])return t[u]}return null}function A4(e,t,n){var r=Ik([S4,n],["buttonText"]);delete r.code;var a=r.week;return delete r.week,{codeArg:e,codes:t,week:a,simpleNumberFormat:new Intl.NumberFormat(e),options:r}}var rH={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function iH(e,t){return qx(oH(e),null,t)}function oH(e){var t;return e===!0?t=[{}]:Array.isArray(e)?t=e.filter(function(n){return n.daysOfWeek}):typeof e=="object"&&e?t=[e]:t=[],t=t.map(function(n){return xt(xt({},rH),n)}),t}function aH(e,t){return e.left>=t.left&&e.left<t.right&&e.top>=t.top&&e.top<t.bottom}function M4(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function sH(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function lH(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function cH(e,t){return{left:e.left-t.left,top:e.top-t.top}}var jw;function I4(){return jw==null&&(jw=uH()),jw}function uH(){if(typeof document=="undefined")return!0;var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);var t=e.querySelector("div"),n=t.offsetHeight>0;return document.body.removeChild(e),n}function P4(e,t,n,r){return{dow:e.getUTCDay(),isDisabled:Boolean(r&&!kd(r.activeRange,e)),isOther:Boolean(r&&!kd(r.currentRange,e)),isToday:Boolean(t&&kd(t,e)),isPast:Boolean(n?e<n:t?e<t.start:!1),isFuture:Boolean(n?e>n:t?e>=t.end:!1)}}function Uk(e,t){var n=["fc-day","fc-day-"+k8[e.dow]];return e.isDisabled?n.push("fc-day-disabled"):(e.isToday&&(n.push("fc-day-today"),n.push(t.getClass("today"))),e.isPast&&n.push("fc-day-past"),e.isFuture&&n.push("fc-day-future"),e.isOther&&n.push("fc-day-other")),n}var dH=So({year:"numeric",month:"long",day:"numeric"}),hH=So({week:"long"});function jk(e,t,n,r){n===void 0&&(n="day"),r===void 0&&(r=!0);var a=e.dateEnv,u=e.options,h=e.calendarApi,o=a.format(t,n==="week"?hH:dH);if(u.navLinks){var g=a.toDate(t),b=function(A){var D=n==="day"?u.navLinkDayClick:n==="week"?u.navLinkWeekClick:null;typeof D=="function"?D.call(h,a.toDate(t),A):(typeof D=="string"&&(n=D),h.zoomTo(t,n))};return xt({title:fg(u.navLinkHint,[o,g],o),"data-navlink":""},r?o4(b):{onClick:b})}return{"aria-label":o}}var $w=null;function pH(){return $w===null&&($w=fH()),$w}function fH(){var e=document.createElement("div");pg(e,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),e.innerHTML="<div></div>",document.body.appendChild(e);var t=e.firstChild,n=t.getBoundingClientRect().left>e.getBoundingClientRect().left;return kk(e),n}var Vw;function mH(){return Vw||(Vw=gH()),Vw}function gH(){var e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);var t=D4(e);return document.body.removeChild(e),t}function D4(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function vH(e,t){t===void 0&&(t=!1);var n=window.getComputedStyle(e),r=parseInt(n.borderLeftWidth,10)||0,a=parseInt(n.borderRightWidth,10)||0,u=parseInt(n.borderTopWidth,10)||0,h=parseInt(n.borderBottomWidth,10)||0,o=D4(e),g=o.y-r-a,b=o.x-u-h,A={borderLeft:r,borderRight:a,borderTop:u,borderBottom:h,scrollbarBottom:b,scrollbarLeft:0,scrollbarRight:0};return pH()&&n.direction==="rtl"?A.scrollbarLeft=g:A.scrollbarRight=g,t&&(A.paddingLeft=parseInt(n.paddingLeft,10)||0,A.paddingRight=parseInt(n.paddingRight,10)||0,A.paddingTop=parseInt(n.paddingTop,10)||0,A.paddingBottom=parseInt(n.paddingBottom,10)||0),A}function yH(e,t,n){t===void 0&&(t=!1);var r=n?e.getBoundingClientRect():$k(e),a=vH(e,t),u={left:r.left+a.borderLeft+a.scrollbarLeft,right:r.right-a.borderRight-a.scrollbarRight,top:r.top+a.borderTop,bottom:r.bottom-a.borderBottom-a.scrollbarBottom};return t&&(u.left+=a.paddingLeft,u.right-=a.paddingRight,u.top+=a.paddingTop,u.bottom-=a.paddingBottom),u}function $k(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset}}function _H(e){for(var t=R4(e),n=e.getBoundingClientRect(),r=0,a=t;r<a.length;r++){var u=a[r],h=M4(n,u.getBoundingClientRect());if(h)n=h;else return null}return n}function R4(e){for(var t=[];e instanceof HTMLElement;){var n=window.getComputedStyle(e);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&t.push(e),e=e.parentNode}return t}function xH(e,t,n){var r=!1,a=function(){r||(r=!0,t.apply(this,arguments))},u=function(){r||(r=!0,n&&n.apply(this,arguments))},h=e(a,u);h&&typeof h.then=="function"&&h.then(a,u)}var F0=function(){function e(){this.handlers={},this.thisContext=null}return e.prototype.setThisContext=function(t){this.thisContext=t},e.prototype.setOptions=function(t){this.options=t},e.prototype.on=function(t,n){bH(this.handlers,t,n)},e.prototype.off=function(t,n){wH(this.handlers,t,n)},e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var a=this.handlers[t]||[],u=this.options&&this.options[t],h=[].concat(u||[],a),o=0,g=h;o<g.length;o++){var b=g[o];b.apply(this.thisContext,n)}},e.prototype.hasHandlers=function(t){return Boolean(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])},e}();function bH(e,t,n){(e[t]||(e[t]=[])).push(n)}function wH(e,t,n){n?e[t]&&(e[t]=e[t].filter(function(r){return r!==n})):delete e[t]}var FC=function(){function e(t,n,r,a){this.els=n;var u=this.originClientRect=t.getBoundingClientRect();r&&this.buildElHorizontals(u.left),a&&this.buildElVerticals(u.top)}return e.prototype.buildElHorizontals=function(t){for(var n=[],r=[],a=0,u=this.els;a<u.length;a++){var h=u[a],o=h.getBoundingClientRect();n.push(o.left-t),r.push(o.right-t)}this.lefts=n,this.rights=r},e.prototype.buildElVerticals=function(t){for(var n=[],r=[],a=0,u=this.els;a<u.length;a++){var h=u[a],o=h.getBoundingClientRect();n.push(o.top-t),r.push(o.bottom-t)}this.tops=n,this.bottoms=r},e.prototype.leftToIndex=function(t){var n=this,r=n.lefts,a=n.rights,u=r.length,h;for(h=0;h<u;h+=1)if(t>=r[h]&&t<a[h])return h},e.prototype.topToIndex=function(t){var n=this,r=n.tops,a=n.bottoms,u=r.length,h;for(h=0;h<u;h+=1)if(t>=r[h]&&t<a[h])return h},e.prototype.getWidth=function(t){return this.rights[t]-this.lefts[t]},e.prototype.getHeight=function(t){return this.bottoms[t]-this.tops[t]},e}(),Vk=function(){function e(){}return e.prototype.getMaxScrollTop=function(){return this.getScrollHeight()-this.getClientHeight()},e.prototype.getMaxScrollLeft=function(){return this.getScrollWidth()-this.getClientWidth()},e.prototype.canScrollVertically=function(){return this.getMaxScrollTop()>0},e.prototype.canScrollHorizontally=function(){return this.getMaxScrollLeft()>0},e.prototype.canScrollUp=function(){return this.getScrollTop()>0},e.prototype.canScrollDown=function(){return this.getScrollTop()<this.getMaxScrollTop()},e.prototype.canScrollLeft=function(){return this.getScrollLeft()>0},e.prototype.canScrollRight=function(){return this.getScrollLeft()<this.getMaxScrollLeft()},e}(),EH=function(e){Nr(t,e);function t(n){var r=e.call(this)||this;return r.el=n,r}return t.prototype.getScrollTop=function(){return this.el.scrollTop},t.prototype.getScrollLeft=function(){return this.el.scrollLeft},t.prototype.setScrollTop=function(n){this.el.scrollTop=n},t.prototype.setScrollLeft=function(n){this.el.scrollLeft=n},t.prototype.getScrollWidth=function(){return this.el.scrollWidth},t.prototype.getScrollHeight=function(){return this.el.scrollHeight},t.prototype.getClientHeight=function(){return this.el.clientHeight},t.prototype.getClientWidth=function(){return this.el.clientWidth},t}(Vk),CH=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getScrollTop=function(){return window.pageYOffset},t.prototype.getScrollLeft=function(){return window.pageXOffset},t.prototype.setScrollTop=function(n){window.scroll(window.pageXOffset,n)},t.prototype.setScrollLeft=function(n){window.scroll(n,window.pageYOffset)},t.prototype.getScrollWidth=function(){return document.documentElement.scrollWidth},t.prototype.getScrollHeight=function(){return document.documentElement.scrollHeight},t.prototype.getClientHeight=function(){return document.documentElement.clientHeight},t.prototype.getClientWidth=function(){return document.documentElement.clientWidth},t}(Vk),mv=function(){function e(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}return e.prototype.setIconOverride=function(t){var n,r;if(typeof t=="object"&&t){n=xt({},this.iconClasses);for(r in t)n[r]=this.applyIconOverridePrefix(t[r]);this.iconClasses=n}else t===!1&&(this.iconClasses={})},e.prototype.applyIconOverridePrefix=function(t){var n=this.iconOverridePrefix;return n&&t.indexOf(n)!==0&&(t=n+t),t},e.prototype.getClass=function(t){return this.classes[t]||""},e.prototype.getIconClass=function(t,n){var r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[t]||this.iconClasses[t]:r=this.iconClasses[t],r?this.baseIconClass+" "+r:""},e.prototype.getCustomButtonIconClass=function(t){var n;return this.iconOverrideCustomButtonOption&&(n=t[this.iconOverrideCustomButtonOption],n)?this.baseIconClass+" "+this.applyIconOverridePrefix(n):""},e}();mv.prototype.classes={};mv.prototype.iconClasses={};mv.prototype.baseIconClass="";mv.prototype.iconOverridePrefix="";var SH=function(){function e(t,n,r,a){var u=this;this.execFunc=t,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=a,this.handleScrollRequest=function(h){u.queuedRequest=xt({},u.queuedRequest||{},h),u.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}return e.prototype.detach=function(){this.emitter.off("_scrollRequest",this.handleScrollRequest)},e.prototype.update=function(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()},e.prototype.fireInitialScroll=function(){this.handleScrollRequest({time:this.scrollTime})},e.prototype.drain=function(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)},e}(),Hd=t4({});function kH(e,t,n,r,a,u,h,o,g,b,A,D,z){return{dateEnv:a,options:n,pluginHooks:h,emitter:b,dispatch:o,getCurrentData:g,calendarApi:A,viewSpec:e,viewApi:t,dateProfileGenerator:r,theme:u,isRtl:n.direction==="rtl",addResizeHandler:function(F){b.on("_resize",F)},removeResizeHandler:function(F){b.off("_resize",F)},createScrollResponder:function(F){return new SH(F,b,Fr(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:D,unregisterInteractiveComponent:z}}var N0=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.shouldComponentUpdate=function(n,r){return this.debug&&console.log(hP(n,this.props),hP(r,this.state)),!Nw(this.props,n,this.propEquality)||!Nw(this.state,r,this.stateEquality)},t.prototype.safeSetState=function(n){Nw(this.state,xt(xt({},this.state),n),this.stateEquality)||this.setState(n)},t.addPropsEquality=TH,t.addStateEquality=AH,t.contextType=Hd,t}(Sk);N0.prototype.propEquality={};N0.prototype.stateEquality={};var xi=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.contextType=Hd,t}(N0);function TH(e){var t=Object.create(this.prototype.propEquality);xt(t,e),this.prototype.propEquality=t}function AH(e){var t=Object.create(this.prototype.stateEquality);xt(t,e),this.prototype.stateEquality=t}function Xl(e,t){typeof e=="function"?e(t):e&&(e.current=t)}var of=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.uid=nf(),n}return t.prototype.prepareHits=function(){},t.prototype.queryHit=function(n,r,a,u){return null},t.prototype.isValidSegDownEl=function(n){return!this.props.eventDrag&&!this.props.eventResize&&!Vo(n,".fc-event-mirror")},t.prototype.isValidDateDownEl=function(n){return!Vo(n,".fc-event:not(.fc-bg-event)")&&!Vo(n,".fc-more-link")&&!Vo(n,"a[data-navlink]")&&!Vo(n,".fc-popover")},t}(xi);function pu(e){return{id:nf(),deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,contentTypeHandlers:e.contentTypeHandlers||{},listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function MH(e,t){var n={},r={reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,contentTypeHandlers:{},listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(u){for(var h=0,o=u;h<o.length;h++){var g=o[h];n[g.id]||(n[g.id]=!0,a(g.deps),r=PH(r,g))}}return e&&a(e),a(t),r}function IH(){var e=[],t=[],n;return function(r,a){return(!n||!Zg(r,e)||!Zg(a,t))&&(n=MH(r,a)),e=r,t=a,n}}function PH(e,t){return{reducers:e.reducers.concat(t.reducers),isLoadingFuncs:e.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:e.contextInit.concat(t.contextInit),eventRefiners:xt(xt({},e.eventRefiners),t.eventRefiners),eventDefMemberAdders:e.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:xt(xt({},e.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:e.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:e.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:e.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:e.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:e.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:e.dateSpanTransforms.concat(t.dateSpanTransforms),views:xt(xt({},e.views),t.views),viewPropsTransformers:e.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||e.isPropsValid,externalDefTransforms:e.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:e.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:e.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:e.calendarInteractions.concat(t.calendarInteractions),componentInteractions:e.componentInteractions.concat(t.componentInteractions),themeClasses:xt(xt({},e.themeClasses),t.themeClasses),eventSourceDefs:e.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||e.cmdFormatter,recurringTypes:e.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||e.namedTimeZonedImpl,initialView:e.initialView||t.initialView,elementDraggingImpl:e.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:xt(xt({},e.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||e.scrollGridImpl,contentTypeHandlers:xt(xt({},e.contentTypeHandlers),t.contentTypeHandlers),listenerRefiners:xt(xt({},e.listenerRefiners),t.listenerRefiners),optionRefiners:xt(xt({},e.optionRefiners),t.optionRefiners),propSetHandlers:xt(xt({},e.propSetHandlers),t.propSetHandlers)}}var fu=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(mv);fu.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};fu.prototype.baseIconClass="fc-icon";fu.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};fu.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};fu.prototype.iconOverrideOption="buttonIcons";fu.prototype.iconOverrideCustomButtonOption="icon";fu.prototype.iconOverridePrefix="fc-icon-";function DH(e,t){var n={},r;for(r in e)NC(r,n,e,t);for(r in t)NC(r,n,e,t);return n}function NC(e,t,n,r){if(t[e])return t[e];var a=RH(e,t,n,r);return a&&(t[e]=a),a}function RH(e,t,n,r){var a=n[e],u=r[e],h=function(A){return a&&a[A]!==null?a[A]:u&&u[A]!==null?u[A]:null},o=h("component"),g=h("superType"),b=null;if(g){if(g===e)throw new Error("Can't have a custom view type that references itself");b=NC(g,t,n,r)}return!o&&b&&(o=b.component),o?{type:e,component:o,defaults:xt(xt({},b?b.defaults:{}),a?a.rawOptions:{}),overrides:xt(xt({},b?b.overrides:{}),u?u.rawOptions:{})}:null}var af=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.rootElRef=as(),n.handleRootEl=function(r){Xl(n.rootElRef,r),n.props.elRef&&Xl(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this,r=this.props,a=r.hookProps;return kt(Hk,{hookProps:a,didMount:r.didMount,willUnmount:r.willUnmount,elRef:this.handleRootEl},function(u){return kt(L4,{hookProps:a,content:r.content,defaultContent:r.defaultContent,backupElRef:n.rootElRef},function(h,o){return r.children(u,z4(r.classNames,a),h,o)})})},t}(xi),LH=t4(0);function L4(e){return kt(LH.Consumer,null,function(t){return kt(OH,xt({renderId:t},e))})}var OH=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.innerElRef=as(),n}return t.prototype.render=function(){return this.props.children(this.innerElRef,this.renderInnerContent())},t.prototype.componentDidMount=function(){this.updateCustomContent()},t.prototype.componentDidUpdate=function(){this.updateCustomContent()},t.prototype.componentWillUnmount=function(){this.customContentInfo&&this.customContentInfo.destroy&&this.customContentInfo.destroy()},t.prototype.renderInnerContent=function(){var n=this.customContentInfo,r=this.getInnerContent(),a=this.getContentMeta(r);return!n||n.contentKey!==a.contentKey?(n&&(n.destroy&&n.destroy(),n=this.customContentInfo=null),a.contentKey&&(n=this.customContentInfo=xt({contentKey:a.contentKey,contentVal:r[a.contentKey]},a.buildLifecycleFuncs()))):n&&(n.contentVal=r[a.contentKey]),n?[]:r},t.prototype.getInnerContent=function(){var n=this.props,r=CP(n.content,n.hookProps);return r===void 0&&(r=CP(n.defaultContent,n.hookProps)),r==null?null:r},t.prototype.getContentMeta=function(n){var r=this.context.pluginHooks.contentTypeHandlers,a="",u=null;if(n){for(var h in r)if(n[h]!==void 0){a=h,u=r[h];break}}return{contentKey:a,buildLifecycleFuncs:u}},t.prototype.updateCustomContent=function(){this.customContentInfo&&this.customContentInfo.render(this.innerElRef.current||this.props.backupElRef.current,this.customContentInfo.contentVal)},t}(xi),Hk=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleRootEl=function(r){n.rootEl=r,n.props.elRef&&Xl(n.props.elRef,r)},n}return t.prototype.render=function(){return this.props.children(this.handleRootEl)},t.prototype.componentDidMount=function(){var n=this.props.didMount;n&&n(xt(xt({},this.props.hookProps),{el:this.rootEl}))},t.prototype.componentWillUnmount=function(){var n=this.props.willUnmount;n&&n(xt(xt({},this.props.hookProps),{el:this.rootEl}))},t}(xi);function O4(){var e,t,n=[];return function(r,a){return(!t||!Zl(t,a)||r!==e)&&(e=r,t=a,n=z4(r,a)),n}}function z4(e,t){return typeof e=="function"&&(e=e(t)),zC(e)}function CP(e,t){return typeof e=="function"?e(t,kt):e}var UC=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.normalizeClassNames=O4(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,u=a.options,h={view:a.viewApi},o=this.normalizeClassNames(u.viewClassNames,h);return kt(Hk,{hookProps:h,didMount:u.viewDidMount,willUnmount:u.viewWillUnmount,elRef:r.elRef},function(g){return r.children(g,["fc-"+r.viewSpec.type+"-view","fc-view"].concat(o))})},t}(xi);function SP(e){return Vd(e,zH)}function zH(e){var t=typeof e=="function"?{component:e}:e,n=t.component;return t.content&&(n=BH(t)),{superType:t.type,component:n,rawOptions:t}}function BH(e){return function(t){return kt(Hd.Consumer,null,function(n){return kt(UC,{viewSpec:n.viewSpec},function(r,a){var u=xt(xt({},t),{nextDayThreshold:n.options.nextDayThreshold});return kt(af,{hookProps:u,classNames:e.classNames,content:e.content,didMount:e.didMount,willUnmount:e.willUnmount,elRef:r},function(h,o,g,b){return kt("div",{className:a.concat(o).join(" "),ref:h},b)})})})}}function FH(e,t,n,r){var a=SP(e),u=SP(t.views),h=DH(a,u);return Vd(h,function(o){return NH(o,u,t,n,r)})}function NH(e,t,n,r,a){var u=e.overrides.duration||e.defaults.duration||r.duration||n.duration,h=null,o="",g="",b={};if(u&&(h=UH(u),h)){var A=LC(h);o=A.unit,A.value===1&&(g=o,b=t[o]?t[o].rawOptions:{})}var D=function(F){var N=F.buttonText||{},T=e.defaults.buttonTextKey;return T!=null&&N[T]!=null?N[T]:N[e.type]!=null?N[e.type]:N[g]!=null?N[g]:null},z=function(F){var N=F.buttonHints||{},T=e.defaults.buttonTextKey;return T!=null&&N[T]!=null?N[T]:N[e.type]!=null?N[e.type]:N[g]!=null?N[g]:null};return{type:e.type,component:e.component,duration:h,durationUnit:o,singleUnit:g,optionDefaults:e.defaults,optionOverrides:xt(xt({},b),e.overrides),buttonTextOverride:D(r)||D(n)||e.overrides.buttonText,buttonTextDefault:D(a)||e.defaults.buttonText||D(mg)||e.type,buttonTitleOverride:z(r)||z(n)||e.overrides.buttonHint,buttonTitleDefault:z(a)||e.defaults.buttonHint||z(mg)}}var kP={};function UH(e){var t=JSON.stringify(e),n=kP[t];return n===void 0&&(n=Fr(e),kP[t]=n),n}var B4=function(){function e(t){this.props=t,this.nowDate=fv(t.nowInput,t.dateEnv),this.initHiddenDays()}return e.prototype.buildPrev=function(t,n,r){var a=this.props.dateEnv,u=a.subtract(a.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(u,-1,r)},e.prototype.buildNext=function(t,n,r){var a=this.props.dateEnv,u=a.add(a.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(u,1,r)},e.prototype.build=function(t,n,r){r===void 0&&(r=!0);var a=this.props,u,h,o,g,b,A;return u=this.buildValidRange(),u=this.trimHiddenDays(u),r&&(t=EV(t,u)),h=this.buildCurrentRangeInfo(t,n),o=/^(year|month|week|day)$/.test(h.unit),g=this.buildRenderRange(this.trimHiddenDays(h.range),h.unit,o),g=this.trimHiddenDays(g),b=g,a.showNonCurrentDates||(b=Xg(b,h.range)),b=this.adjustActiveRange(b),b=Xg(b,u),A=Bk(h.range,u),{validRange:u,currentRange:h.range,currentRangeUnit:h.unit,isRangeAllDay:o,activeRange:b,renderRange:g,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:A,dateIncrement:this.buildDateIncrement(h.duration)}},e.prototype.buildValidRange=function(){var t=this.props.validRangeInput,n=typeof t=="function"?t.call(this.props.calendarApi,this.nowDate):t;return this.refineRange(n)||{start:null,end:null}},e.prototype.buildCurrentRangeInfo=function(t,n){var r=this.props,a=null,u=null,h=null,o;return r.duration?(a=r.duration,u=r.durationUnit,h=this.buildRangeFromDuration(t,n,a,u)):(o=this.props.dayCount)?(u="day",h=this.buildRangeFromDayCount(t,n,o)):(h=this.buildCustomVisibleRange(t))?u=r.dateEnv.greatestWholeUnit(h.start,h.end).unit:(a=this.getFallbackDuration(),u=LC(a).unit,h=this.buildRangeFromDuration(t,n,a,u)),{duration:a,unit:u,range:h}},e.prototype.getFallbackDuration=function(){return Fr({day:1})},e.prototype.adjustActiveRange=function(t){var n=this.props,r=n.dateEnv,a=n.usesMinMaxTime,u=n.slotMinTime,h=n.slotMaxTime,o=t.start,g=t.end;return a&&(Tp(u)<0&&(o=_i(o),o=r.add(o,u)),Tp(h)>1&&(g=_i(g),g=Qo(g,-1),g=r.add(g,h))),{start:o,end:g}},e.prototype.buildRangeFromDuration=function(t,n,r,a){var u=this.props,h=u.dateEnv,o=u.dateAlignment,g,b,A;if(!o){var D=this.props.dateIncrement;D&&qg(D)<qg(r)?o=LC(D).unit:o=a}Tp(r)<=1&&this.isHiddenDay(g)&&(g=this.skipHiddenDays(g,n),g=_i(g));function z(){g=h.startOf(t,o),b=h.add(g,r),A={start:g,end:b}}return z(),this.trimHiddenDays(A)||(t=this.skipHiddenDays(t,n),z()),A},e.prototype.buildRangeFromDayCount=function(t,n,r){var a=this.props,u=a.dateEnv,h=a.dateAlignment,o=0,g=t,b;h&&(g=u.startOf(g,h)),g=_i(g),g=this.skipHiddenDays(g,n),b=g;do b=Qo(b,1),this.isHiddenDay(b)||(o+=1);while(o<r);return{start:g,end:b}},e.prototype.buildCustomVisibleRange=function(t){var n=this.props,r=n.visibleRangeInput,a=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(t)):r,u=this.refineRange(a);return u&&(u.start==null||u.end==null)?null:u},e.prototype.buildRenderRange=function(t,n,r){return t},e.prototype.buildDateIncrement=function(t){var n=this.props.dateIncrement,r;return n||((r=this.props.dateAlignment)?Fr(1,r):t||Fr({days:1}))},e.prototype.refineRange=function(t){if(t){var n=xV(t,this.props.dateEnv);return n&&(n=f4(n)),n}return null},e.prototype.initHiddenDays=function(){var t=this.props.hiddenDays||[],n=[],r=0,a;for(this.props.weekends===!1&&t.push(0,6),a=0;a<7;a+=1)(n[a]=t.indexOf(a)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n},e.prototype.trimHiddenDays=function(t){var n=t.start,r=t.end;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null},e.prototype.isHiddenDay=function(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]},e.prototype.skipHiddenDays=function(t,n,r){for(n===void 0&&(n=1),r===void 0&&(r=!1);this.isHiddenDayHash[(t.getUTCDay()+(r?n:0)+7)%7];)t=Qo(t,n);return t},e}();function jH(e,t){switch(t.type){case"CHANGE_VIEW_TYPE":e=t.viewType}return e}function $H(e,t){var n;switch(t.type){case"SET_OPTION":return xt(xt({},e),(n={},n[t.optionName]=t.rawOptionValue,n));default:return e}}function VH(e,t,n,r){var a;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||n);case"CHANGE_DATE":return r.build(t.dateMarker);case"PREV":if(a=r.buildPrev(e,n),a.isValid)return a;break;case"NEXT":if(a=r.buildNext(e,n),a.isValid)return a;break}return e}function HH(e,t,n){var r=t?t.activeRange:null;return N4({},YH(e,n),r,n)}function WH(e,t,n,r){var a=n?n.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return N4(e,t.sources,a,r);case"REMOVE_EVENT_SOURCE":return qH(e,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?U4(e,a,r):e;case"FETCH_EVENT_SOURCES":return Wk(e,t.sourceIds?l4(t.sourceIds):j4(e,r),a,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return KH(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}}function GH(e,t,n){var r=t?t.activeRange:null;return Wk(e,j4(e,n),r,!0,n)}function F4(e){for(var t in e)if(e[t].isFetching)return!0;return!1}function N4(e,t,n,r){for(var a={},u=0,h=t;u<h.length;u++){var o=h[u];a[o.sourceId]=o}return n&&(a=U4(a,n,r)),xt(xt({},e),a)}function qH(e,t){return zd(e,function(n){return n.sourceId!==t})}function U4(e,t,n){return Wk(e,zd(e,function(r){return ZH(r,t,n)}),t,!1,n)}function ZH(e,t,n){return $4(e,n)?!n.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end:!e.latestFetchId}function Wk(e,t,n,r,a){var u={};for(var h in e){var o=e[h];t[h]?u[h]=XH(o,n,r,a):u[h]=o}return u}function XH(e,t,n,r){var a=r.options,u=r.calendarApi,h=r.pluginHooks.eventSourceDefs[e.sourceDefId],o=nf();return h.fetch({eventSource:e,range:t,isRefetch:n,context:r},function(g){var b=g.rawEvents;a.eventSourceSuccess&&(b=a.eventSourceSuccess.call(u,b,g.xhr)||b),e.success&&(b=e.success.call(u,b,g.xhr)||b),r.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:o,fetchRange:t,rawEvents:b})},function(g){console.warn(g.message,g),a.eventSourceFailure&&a.eventSourceFailure.call(u,g),e.failure&&e.failure(g),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:o,fetchRange:t,error:g})}),xt(xt({},e),{isFetching:!0,latestFetchId:o})}function KH(e,t,n,r){var a,u=e[t];return u&&n===u.latestFetchId?xt(xt({},e),(a={},a[t]=xt(xt({},u),{isFetching:!1,fetchRange:r}),a)):e}function j4(e,t){return zd(e,function(n){return $4(n,t)})}function YH(e,t){var n=w4(t),r=[].concat(e.eventSources||[]),a=[];e.initialEvents&&r.unshift(e.initialEvents),e.events&&r.unshift(e.events);for(var u=0,h=r;u<h.length;u++){var o=h[u],g=b4(o,t,n);g&&a.push(g)}return a}function $4(e,t){var n=t.pluginHooks.eventSourceDefs;return!n[e.sourceDefId].ignoreRange}function JH(e,t,n,r,a){switch(t.type){case"RECEIVE_EVENTS":return QH(e,n[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,a);case"ADD_EVENTS":return tW(e,t.eventStore,r?r.activeRange:null,a);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return Ok(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?$p(e,r.activeRange,a):e;case"REMOVE_EVENTS":return hV(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return V4(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return z0(e,function(u){return!u.sourceId});case"REMOVE_ALL_EVENTS":return Rs();default:return e}}function QH(e,t,n,r,a,u){if(t&&n===t.latestFetchId){var h=qx(eW(a,t,u),t,u);return r&&(h=$p(h,r,u)),Ok(V4(e,t.sourceId),h)}return e}function eW(e,t,n){var r=n.options.eventDataTransform,a=t?t.eventDataTransform:null;return a&&(e=TP(e,a)),r&&(e=TP(e,r)),e}function TP(e,t){var n;if(!t)n=e;else{n=[];for(var r=0,a=e;r<a.length;r++){var u=a[r],h=t(u);h?n.push(h):h==null&&n.push(u)}}return n}function tW(e,t,n,r){return n&&(t=$p(t,n,r)),Ok(e,t)}function nW(e,t,n){var r=e.defs,a=Vd(e.instances,function(u){var h=r[u.defId];return h.allDay||h.recurringDef?u:xt(xt({},u),{range:{start:n.createMarker(t.toDate(u.range.start,u.forcedStartTzo)),end:n.createMarker(t.toDate(u.range.end,u.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:u.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:u.forcedEndTzo})});return{defs:r,instances:a}}function V4(e,t){return z0(e,function(n){return n.sourceId!==t})}function rW(e,t){return{defs:e.defs,instances:zd(e.instances,function(n){return!t[n.instanceId]})}}function iW(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function oW(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function aW(e,t){var n;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function sW(e,t){var n;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function lW(e,t,n,r,a){var u=e.headerToolbar?AP(e.headerToolbar,e,t,n,r,a):null,h=e.footerToolbar?AP(e.footerToolbar,e,t,n,r,a):null;return{header:u,footer:h}}function AP(e,t,n,r,a,u){var h={},o=[],g=!1;for(var b in e){var A=e[b],D=cW(A,t,n,r,a,u);h[b]=D.widgets,o.push.apply(o,D.viewsWithButtons),g=g||D.hasTitle}return{sectionWidgets:h,viewsWithButtons:o,hasTitle:g}}function cW(e,t,n,r,a,u){var h=t.direction==="rtl",o=t.customButtons||{},g=n.buttonText||{},b=t.buttonText||{},A=n.buttonHints||{},D=t.buttonHints||{},z=e?e.split(" "):[],F=[],N=!1,T=z.map(function(H){return H.split(",").map(function(j){if(j==="title")return N=!0,{buttonName:j};var W,B,O,S,w,P;if(W=o[j])O=function(ae){W.click&&W.click.call(ae.target,ae,ae.target)},(S=r.getCustomButtonIconClass(W))||(S=r.getIconClass(j,h))||(w=W.text),P=W.hint||W.text;else if(B=a[j]){F.push(j),O=function(){u.changeView(j)},(w=B.buttonTextOverride)||(S=r.getIconClass(j,h))||(w=B.buttonTextDefault);var Y=B.buttonTextOverride||B.buttonTextDefault;P=fg(B.buttonTitleOverride||B.buttonTitleDefault||t.viewHint,[Y,j],Y)}else if(u[j])if(O=function(){u[j]()},(w=g[j])||(S=r.getIconClass(j,h))||(w=b[j]),j==="prevYear"||j==="nextYear"){var ne=j==="prevYear"?"prev":"next";P=fg(A[ne]||D[ne],[b.year||"year","year"],b[j])}else P=function(ae){return fg(A[j]||D[j],[b[ae]||ae,ae],b[j])};return{buttonName:j,buttonClick:O,buttonIcon:S,buttonText:w,buttonHint:P}})});return{widgets:T,viewsWithButtons:F,hasTitle:N}}var uW={ignoreRange:!0,parseMeta:function(e){return Array.isArray(e.events)?e.events:null},fetch:function(e,t){t({rawEvents:e.eventSource.meta})}},dW=pu({eventSourceDefs:[uW]}),hW={parseMeta:function(e){return typeof e.events=="function"?e.events:null},fetch:function(e,t,n){var r=e.context.dateEnv,a=e.eventSource.meta;xH(a.bind(null,y4(e.range,r)),function(u){t({rawEvents:u})},n)}},pW=pu({eventSourceDefs:[hW]});function fW(e,t,n,r,a){e=e.toUpperCase();var u=null;e==="GET"?t=mW(t,n):u=H4(n);var h=new XMLHttpRequest;h.open(e,t,!0),e!=="GET"&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.onload=function(){if(h.status>=200&&h.status<400){var o=!1,g=void 0;try{g=JSON.parse(h.responseText),o=!0}catch{}o?r(g,h):a("Failure parsing JSON",h)}else a("Request failed",h)},h.onerror=function(){a("Request failed",h)},h.send(u)}function mW(e,t){return e+(e.indexOf("?")===-1?"?":"&")+H4(t)}function H4(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var gW={method:String,extraParams:St,startParam:String,endParam:String,timeZoneParam:String},vW={parseMeta:function(e){return e.url&&(e.format==="json"||!e.format)?{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}:null},fetch:function(e,t,n){var r=e.eventSource.meta,a=_W(r,e.range,e.context);fW(r.method,r.url,a,function(u,h){t({rawEvents:u,xhr:h})},function(u,h){n({message:u,xhr:h})})}},yW=pu({eventSourceRefiners:gW,eventSourceDefs:[vW]});function _W(e,t,n){var r=n.dateEnv,a=n.options,u,h,o,g,b={};return u=e.startParam,u==null&&(u=a.startParam),h=e.endParam,h==null&&(h=a.endParam),o=e.timeZoneParam,o==null&&(o=a.timeZoneParam),typeof e.extraParams=="function"?g=e.extraParams():g=e.extraParams||{},xt(b,g),b[u]=r.formatIso(t.start),b[h]=r.formatIso(t.end),r.timeZone!=="local"&&(b[o]=r.timeZone),b}var xW={daysOfWeek:St,startTime:Fr,endTime:Fr,duration:Fr,startRecur:St,endRecur:St},bW={parse:function(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){var n={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null},r=void 0;return e.duration&&(r=e.duration),!r&&e.startTime&&e.endTime&&(r=W8(e.endTime,e.startTime)),{allDayGuess:Boolean(!e.startTime&&!e.endTime),duration:r,typeData:n}}return null},expand:function(e,t,n){var r=Xg(t,{start:e.startRecur,end:e.endRecur});return r?EW(e.daysOfWeek,e.startTime,r,n):[]}},wW=pu({recurringTypes:[bW],eventRefiners:xW});function EW(e,t,n,r){for(var a=e?l4(e):null,u=_i(n.start),h=n.end,o=[];u<h;){var g=void 0;(!a||a[u.getUTCDay()])&&(t?g=r.add(u,t):g=u,o.push(g)),u=Qo(u,1)}return o}var CW=pu({optionChangeHandlers:{events:function(e,t){MP([e],t)},eventSources:MP}});function MP(e,t){for(var n=Pk(t.getCurrentData().eventSources),r=[],a=0,u=e;a<u.length;a++){for(var h=u[a],o=!1,g=0;g<n.length;g+=1)if(n[g]._raw===h){n.splice(g,1),o=!0;break}o||r.push(h)}for(var b=0,A=n;b<A.length;b++){var D=A[b];t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:D.sourceId})}for(var z=0,F=r;z<F.length;z++){var N=F[z];t.calendarApi.addEventSource(N)}}function SW(e,t){t.emitter.trigger("datesSet",xt(xt({},y4(e.activeRange,t.dateEnv)),{view:t.viewApi}))}function kW(e,t){var n=t.emitter;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Td(e,t))}var TW=[dW,pW,yW,wW,CW,pu({isLoadingFuncs:[function(e){return F4(e.eventSources)}],contentTypeHandlers:{html:AW,domNodes:MW},propSetHandlers:{dateProfile:SW,eventStore:kW}})];function AW(){var e=null,t="";function n(a,u){(a!==e||u!==t)&&(a.innerHTML=u),e=a,t=u}function r(){e.innerHTML="",e=null,t=""}return{render:n,destroy:r}}function MW(){var e=null,t=[];function n(a,u){var h=Array.prototype.slice.call(u);if(a!==e||!Zg(t,h)){for(var o=0,g=h;o<g.length;o++){var b=g[o];a.appendChild(b)}r()}e=a,t=h}function r(){t.forEach(kk),t=[],e=null}return{render:n,destroy:r}}var W4=function(){function e(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}return e.prototype.request=function(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),t==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))},e.prototype.pause=function(t){t===void 0&&(t="");var n=this.pauseDepths;n[t]=(n[t]||0)+1,this.clearTimeout()},e.prototype.resume=function(t,n){t===void 0&&(t="");var r=this.pauseDepths;if(t in r){if(n)delete r[t];else{r[t]-=1;var a=r[t];a<=0&&delete r[t]}this.tryDrain()}},e.prototype.isPaused=function(){return Object.keys(this.pauseDepths).length},e.prototype.tryDrain=function(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}},e.prototype.clear=function(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}},e.prototype.clearTimeout=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},e.prototype.drained=function(){this.drainedOption&&this.drainedOption()},e}(),IW=function(){function e(t,n){this.runTaskOption=t,this.drainedOption=n,this.queue=[],this.delayedRunner=new W4(this.drain.bind(this))}return e.prototype.request=function(t,n){this.queue.push(t),this.delayedRunner.request(n)},e.prototype.pause=function(t){this.delayedRunner.pause(t)},e.prototype.resume=function(t,n){this.delayedRunner.resume(t,n)},e.prototype.drain=function(){for(var t=this.queue;t.length;){for(var n=[],r=void 0;r=t.shift();)this.runTask(r),n.push(r);this.drained(n)}},e.prototype.runTask=function(t){this.runTaskOption&&this.runTaskOption(t)},e.prototype.drained=function(t){this.drainedOption&&this.drainedOption(t)},e}();function PW(e,t,n){var r;return/^(year|month)$/.test(e.currentRangeUnit)?r=e.currentRange:r=e.activeRange,n.formatRange(r.start,r.end,So(t.titleFormat||DW(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}function DW(e){var t=e.currentRangeUnit;if(t==="year")return{year:"numeric"};if(t==="month")return{year:"numeric",month:"long"};var n=Vx(e.currentRange.start,e.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}var RW=function(){function e(t){var n=this;this.computeOptionsData=Mr(this._computeOptionsData),this.computeCurrentViewData=Mr(this._computeCurrentViewData),this.organizeRawLocales=Mr(eH),this.buildLocale=Mr(T4),this.buildPluginHooks=IH(),this.buildDateEnv=Mr(LW),this.buildTheme=Mr(OW),this.parseToolbars=Mr(lW),this.buildViewSpecs=Mr(FH),this.buildDateProfileGenerator=Q_(zW),this.buildViewApi=Mr(BW),this.buildViewUiProps=Q_(UW),this.buildEventUiBySource=Mr(FW,Zl),this.buildEventUiBases=Mr(NW),this.parseContextBusinessHours=Q_(jW),this.buildTitle=Mr(PW),this.emitter=new F0,this.actionRunner=new IW(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.getCurrentData=function(){return n.data},this.dispatch=function(B){n.actionRunner.request(B)},this.props=t,this.actionRunner.pause();var r={},a=this.computeOptionsData(t.optionOverrides,r,t.calendarApi),u=a.calendarOptions.initialView||a.pluginHooks.initialView,h=this.computeCurrentViewData(u,a,t.optionOverrides,r);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(h.options);var o=WV(a.calendarOptions,a.dateEnv),g=h.dateProfileGenerator.build(o);kd(g.activeRange,o)||(o=g.currentRange.start);for(var b={dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},A=0,D=a.pluginHooks.contextInit;A<D.length;A++){var z=D[A];z(b)}for(var F=HH(a.calendarOptions,g,b),N={dynamicOptionOverrides:r,currentViewType:u,currentDate:o,dateProfile:g,businessHours:this.parseContextBusinessHours(b),eventSources:F,eventUiBases:{},eventStore:Rs(),renderableEventStore:Rs(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(b).selectionConfig},T=xt(xt({},b),N),H=0,j=a.pluginHooks.reducers;H<j.length;H++){var W=j[H];xt(N,W(null,null,T))}Hw(N,b)&&this.emitter.trigger("loading",!0),this.state=N,this.updateData(),this.actionRunner.resume()}return e.prototype.resetOptions=function(t,n){var r=this.props;r.optionOverrides=n?xt(xt({},r.optionOverrides),t):t,this.actionRunner.request({type:"NOTHING"})},e.prototype._handleAction=function(t){var n=this,r=n.props,a=n.state,u=n.emitter,h=$H(a.dynamicOptionOverrides,t),o=this.computeOptionsData(r.optionOverrides,h,r.calendarApi),g=jH(a.currentViewType,t),b=this.computeCurrentViewData(g,o,r.optionOverrides,h);r.calendarApi.currentDataManager=this,u.setThisContext(r.calendarApi),u.setOptions(b.options);var A={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:r.calendarApi,dispatch:this.dispatch,emitter:u,getCurrentData:this.getCurrentData},D=a.currentDate,z=a.dateProfile;this.data&&this.data.dateProfileGenerator!==b.dateProfileGenerator&&(z=b.dateProfileGenerator.build(D)),D=HV(D,t),z=VH(z,t,D,b.dateProfileGenerator),(t.type==="PREV"||t.type==="NEXT"||!kd(z.currentRange,D))&&(D=z.currentRange.start);for(var F=WH(a.eventSources,t,z,A),N=JH(a.eventStore,t,F,z,A),T=F4(F),H=T&&!b.options.progressiveEventRendering&&a.renderableEventStore||N,j=this.buildViewUiProps(A),W=j.eventUiSingleBase,B=j.selectionConfig,O=this.buildEventUiBySource(F),S=this.buildEventUiBases(H.defs,W,O),w={dynamicOptionOverrides:h,currentViewType:g,currentDate:D,dateProfile:z,eventSources:F,eventStore:N,renderableEventStore:H,selectionConfig:B,eventUiBases:S,businessHours:this.parseContextBusinessHours(A),dateSelection:iW(a.dateSelection,t),eventSelection:oW(a.eventSelection,t),eventDrag:aW(a.eventDrag,t),eventResize:sW(a.eventResize,t)},P=xt(xt({},A),w),Y=0,ne=o.pluginHooks.reducers;Y<ne.length;Y++){var ae=ne[Y];xt(w,ae(a,t,P))}var oe=Hw(a,A),fe=Hw(w,A);!oe&&fe?u.trigger("loading",!0):oe&&!fe&&u.trigger("loading",!1),this.state=w,r.onAction&&r.onAction(t)},e.prototype.updateData=function(){var t=this,n=t.props,r=t.state,a=this.data,u=this.computeOptionsData(n.optionOverrides,r.dynamicOptionOverrides,n.calendarApi),h=this.computeCurrentViewData(r.currentViewType,u,n.optionOverrides,r.dynamicOptionOverrides),o=this.data=xt(xt(xt({viewTitle:this.buildTitle(r.dateProfile,h.options,u.dateEnv),calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},u),h),r),g=u.pluginHooks.optionChangeHandlers,b=a&&a.calendarOptions,A=u.calendarOptions;if(b&&b!==A){b.timeZone!==A.timeZone&&(r.eventSources=o.eventSources=GH(o.eventSources,r.dateProfile,o),r.eventStore=o.eventStore=nW(o.eventStore,a.dateEnv,o.dateEnv));for(var D in g)b[D]!==A[D]&&g[D](A[D],o)}n.onData&&n.onData(o)},e.prototype._computeOptionsData=function(t,n,r){var a=this.processRawCalendarOptions(t,n),u=a.refinedOptions,h=a.pluginHooks,o=a.localeDefaults,g=a.availableLocaleData,b=a.extra;IP(b);var A=this.buildDateEnv(u.timeZone,u.locale,u.weekNumberCalculation,u.firstDay,u.weekText,h,g,u.defaultRangeSeparator),D=this.buildViewSpecs(h.views,t,n,o),z=this.buildTheme(u,h),F=this.parseToolbars(u,t,z,D,r);return{calendarOptions:u,pluginHooks:h,dateEnv:A,viewSpecs:D,theme:z,toolbarConfig:F,localeDefaults:o,availableRawLocales:g.map}},e.prototype.processRawCalendarOptions=function(t,n){var r=Uw([mg,t,n]),a=r.locales,u=r.locale,h=this.organizeRawLocales(a),o=h.map,g=this.buildLocale(u||h.defaultCode,o).options,b=this.buildPluginHooks(t.plugins||[],TW),A=this.currentCalendarOptionsRefiners=xt(xt(xt(xt(xt({},vP),yP),_P),b.listenerRefiners),b.optionRefiners),D={},z=Uw([mg,g,t,n]),F={},N=this.currentCalendarOptionsInput,T=this.currentCalendarOptionsRefined,H=!1;for(var j in z)j!=="plugins"&&(z[j]===N[j]||hd[j]&&j in N&&hd[j](N[j],z[j])?F[j]=T[j]:A[j]?(F[j]=A[j](z[j]),H=!0):D[j]=N[j]);return H&&(this.currentCalendarOptionsInput=z,this.currentCalendarOptionsRefined=F),{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:b,availableLocaleData:h,localeDefaults:g,extra:D}},e.prototype._computeCurrentViewData=function(t,n,r,a){var u=n.viewSpecs[t];if(!u)throw new Error('viewType "'+t+`" is not available. Please make sure you've loaded all neccessary plugins`);var h=this.processRawViewOptions(u,n.pluginHooks,n.localeDefaults,r,a),o=h.refinedOptions,g=h.extra;IP(g);var b=this.buildDateProfileGenerator({dateProfileGeneratorClass:u.optionDefaults.dateProfileGeneratorClass,duration:u.duration,durationUnit:u.durationUnit,usesMinMaxTime:u.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,nowInput:o.now,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,monthMode:o.monthMode,fixedWeekCount:o.fixedWeekCount}),A=this.buildViewApi(t,this.getCurrentData,n.dateEnv);return{viewSpec:u,options:o,dateProfileGenerator:b,viewApi:A}},e.prototype.processRawViewOptions=function(t,n,r,a,u){var h=Uw([mg,t.optionDefaults,r,a,t.optionOverrides,u]),o=xt(xt(xt(xt(xt(xt({},vP),yP),_P),uV),n.listenerRefiners),n.optionRefiners),g={},b=this.currentViewOptionsInput,A=this.currentViewOptionsRefined,D=!1,z={};for(var F in h)h[F]===b[F]||hd[F]&&hd[F](h[F],b[F])?g[F]=A[F]:(h[F]===this.currentCalendarOptionsInput[F]||hd[F]&&hd[F](h[F],this.currentCalendarOptionsInput[F])?F in this.currentCalendarOptionsRefined&&(g[F]=this.currentCalendarOptionsRefined[F]):o[F]?g[F]=o[F](h[F]):z[F]=h[F],D=!0);return D&&(this.currentViewOptionsInput=h,this.currentViewOptionsRefined=g),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:z}},e}();function LW(e,t,n,r,a,u,h,o){var g=T4(t||h.defaultCode,h.map);return new JV({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:u.namedTimeZonedImpl,locale:g,weekNumberCalculation:n,firstDay:r,weekText:a,cmdFormatter:u.cmdFormatter,defaultSeparator:o})}function OW(e,t){var n=t.themeClasses[e.themeSystem]||fu;return new n(e)}function zW(e){var t=e.dateProfileGeneratorClass||B4;return new t(e)}function BW(e,t,n){return new jV(e,t,n)}function FW(e){return Vd(e,function(t){return t.ui})}function NW(e,t,n){var r={"":t};for(var a in e){var u=e[a];u.sourceId&&n[u.sourceId]&&(r[a]=n[u.sourceId])}return r}function UW(e){var t=e.options;return{eventUiSingleBase:Xx({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:typeof t.eventOverlap=="boolean"?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:Xx({constraint:t.selectConstraint,overlap:typeof t.selectOverlap=="boolean"?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function Hw(e,t){for(var n=0,r=t.pluginHooks.isLoadingFuncs;n<r.length;n++){var a=r[n];if(a(e))return!0}return!1}function jW(e){return iH(e.options.businessHours,e)}function IP(e,t){for(var n in e)console.warn("Unknown option '"+n+"'"+(t?" for view '"+t+"'":""))}var $W=function(e){Nr(t,e);function t(n){var r=e.call(this,n)||this;return r.handleData=function(a){r.dataManager?r.setState(a):r.state=a},r.dataManager=new RW({optionOverrides:n.optionOverrides,calendarApi:n.calendarApi,onData:r.handleData}),r}return t.prototype.render=function(){return this.props.children(this.state)},t.prototype.componentDidUpdate=function(n){var r=this.props.optionOverrides;r!==n.optionOverrides&&this.dataManager.resetOptions(r)},t}(Sk),VW=function(){function e(){this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}return e.prototype.addSegs=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var u=a[r];this.insertEntry(u,n)}return n},e.prototype.insertEntry=function(t,n){var r=this.findInsertion(t);return this.isInsertionValid(r,t)?(this.insertEntryAt(t,r),1):this.handleInvalidInsertion(r,t,n)},e.prototype.isInsertionValid=function(t,n){return(this.maxCoord===-1||t.levelCoord+n.thickness<=this.maxCoord)&&(this.maxStackCnt===-1||t.stackCnt<this.maxStackCnt)},e.prototype.handleInvalidInsertion=function(t,n,r){return this.allowReslicing&&t.touchingEntry?this.splitEntry(n,t.touchingEntry,r):(r.push(n),0)},e.prototype.splitEntry=function(t,n,r){var a=0,u=[],h=t.span,o=n.span;return h.start<o.start&&(a+=this.insertEntry({index:t.index,thickness:t.thickness,span:{start:h.start,end:o.start}},u)),h.end>o.end&&(a+=this.insertEntry({index:t.index,thickness:t.thickness,span:{start:o.end,end:h.end}},u)),a?(r.push.apply(r,$i([{index:t.index,thickness:t.thickness,span:G4(o,h)}],u)),a):(r.push(t),0)},e.prototype.insertEntryAt=function(t,n){var r=this,a=r.entriesByLevel,u=r.levelCoords;n.lateral===-1?(Ww(u,n.level,n.levelCoord),Ww(a,n.level,[t])):Ww(a[n.level],n.lateral,t),this.stackCnts[vg(t)]=n.stackCnt},e.prototype.findInsertion=function(t){for(var n=this,r=n.levelCoords,a=n.entriesByLevel,u=n.strictOrder,h=n.stackCnts,o=r.length,g=0,b=-1,A=-1,D=null,z=0,F=0;F<o;F+=1){var N=r[F];if(!u&&N>=g+t.thickness)break;for(var T=a[F],H=void 0,j=DP(T,t.span.start,PP),W=j[0]+j[1];(H=T[W])&&H.span.start<t.span.end;){var B=N+H.thickness;B>g&&(g=B,D=H,b=F,A=W),B===g&&(z=Math.max(z,h[vg(H)]+1)),W+=1}}var O=0;if(D)for(O=b+1;O<o&&r[O]<g;)O+=1;var S=-1;return O<o&&r[O]===g&&(S=DP(a[O],t.span.end,PP)[0]),{touchingLevel:b,touchingLateral:A,touchingEntry:D,stackCnt:z,levelCoord:g,level:O,lateral:S}},e.prototype.toRects=function(){for(var t=this,n=t.entriesByLevel,r=t.levelCoords,a=n.length,u=[],h=0;h<a;h+=1)for(var o=n[h],g=r[h],b=0,A=o;b<A.length;b++){var D=A[b];u.push(xt(xt({},D),{levelCoord:g}))}return u},e}();function PP(e){return e.span.end}function vg(e){return e.index+":"+e.span.start}function G4(e,t){var n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return n<r?{start:n,end:r}:null}function Ww(e,t,n){e.splice(t,0,n)}function DP(e,t,n){var r=0,a=e.length;if(!a||t<n(e[r]))return[0,0];if(t>n(e[a-1]))return[a,0];for(;r<a;){var u=Math.floor(r+(a-r)/2),h=n(e[u]);if(t<h)a=u;else if(t>h)r=u+1;else return[u,1]}return[r,0]}var sf=function(){function e(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}return e.prototype.destroy=function(){},e}();function HW(e,t){return{component:e,el:t.el,useEventCenter:t.useEventCenter!=null?t.useEventCenter:!0,isHitComboAllowed:t.isHitComboAllowed||null}}function Gk(e){var t;return t={},t[e.component.uid]=e,t}var jC={},q4=function(){function e(t,n){this.emitter=new F0}return e.prototype.destroy=function(){},e.prototype.setMirrorIsVisible=function(t){},e.prototype.setMirrorNeedsRevert=function(t){},e.prototype.setAutoScrollEnabled=function(t){},e}(),qk={},WW=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=this.props.widgetGroups.map(function(a){return n.renderWidgetGroup(a)});return kt.apply(void 0,$i(["div",{className:"fc-toolbar-chunk"}],r))},t.prototype.renderWidgetGroup=function(n){for(var r=this.props,a=this.context.theme,u=[],h=!0,o=0,g=n;o<g.length;o++){var b=g[o],A=b.buttonName,D=b.buttonClick,z=b.buttonText,F=b.buttonIcon,N=b.buttonHint;if(A==="title")h=!1,u.push(kt("h2",{className:"fc-toolbar-title",id:r.titleId},r.title));else{var T=A===r.activeButton,H=!r.isTodayEnabled&&A==="today"||!r.isPrevEnabled&&A==="prev"||!r.isNextEnabled&&A==="next",j=["fc-"+A+"-button",a.getClass("button")];T&&j.push(a.getClass("buttonActive")),u.push(kt("button",{type:"button",title:typeof N=="function"?N(r.navUnit):N,disabled:H,"aria-pressed":T,className:j.join(" "),onClick:D},z||(F?kt("span",{className:F}):"")))}}if(u.length>1){var W=h&&a.getClass("buttonGroup")||"";return kt.apply(void 0,$i(["div",{className:W}],u))}return u[0]},t}(xi),RP=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=n.model,a=n.extraClassName,u=!1,h,o,g=r.sectionWidgets,b=g.center;g.left?(u=!0,h=g.left):h=g.start,g.right?(u=!0,o=g.right):o=g.end;var A=[a||"","fc-toolbar",u?"fc-toolbar-ltr":""];return kt("div",{className:A.join(" ")},this.renderSection("start",h||[]),this.renderSection("center",b||[]),this.renderSection("end",o||[]))},t.prototype.renderSection=function(n,r){var a=this.props;return kt(WW,{key:n,widgetGroups:r,title:a.title,navUnit:a.navUnit,activeButton:a.activeButton,isTodayEnabled:a.isTodayEnabled,isPrevEnabled:a.isPrevEnabled,isNextEnabled:a.isNextEnabled,titleId:a.titleId})},t}(xi),GW=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={availableWidth:null},n.handleEl=function(r){n.el=r,Xl(n.props.elRef,r),n.updateAvailableWidth()},n.handleResize=function(){n.updateAvailableWidth()},n}return t.prototype.render=function(){var n=this,r=n.props,a=n.state,u=r.aspectRatio,h=["fc-view-harness",u||r.liquid||r.height?"fc-view-harness-active":"fc-view-harness-passive"],o="",g="";return u?a.availableWidth!==null?o=a.availableWidth/u:g=1/u*100+"%":o=r.height||"",kt("div",{"aria-labelledby":r.labeledById,ref:this.handleEl,className:h.join(" "),style:{height:o,paddingBottom:g}},r.children)},t.prototype.componentDidMount=function(){this.context.addResizeHandler(this.handleResize)},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleResize)},t.prototype.updateAvailableWidth=function(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})},t}(xi),qW=function(e){Nr(t,e);function t(n){var r=e.call(this,n)||this;return r.handleSegClick=function(a,u){var h=r.component,o=h.context,g=Vp(u);if(g&&h.isValidSegDownEl(a.target)){var b=Vo(a.target,".fc-event-forced-url"),A=b?b.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:u,event:new zi(h.context,g.eventRange.def,g.eventRange.instance),jsEvent:a,view:o.viewApi}),A&&!a.defaultPrevented&&(window.location.href=A)}},r.destroy=i4(n.el,"click",".fc-event",r.handleSegClick),r}return t}(sf),ZW=function(e){Nr(t,e);function t(n){var r=e.call(this,n)||this;return r.handleEventElRemove=function(a){a===r.currentSegEl&&r.handleSegLeave(null,r.currentSegEl)},r.handleSegEnter=function(a,u){Vp(u)&&(r.currentSegEl=u,r.triggerEvent("eventMouseEnter",a,u))},r.handleSegLeave=function(a,u){r.currentSegEl&&(r.currentSegEl=null,r.triggerEvent("eventMouseLeave",a,u))},r.removeHoverListeners=f8(n.el,".fc-event",r.handleSegEnter,r.handleSegLeave),r}return t.prototype.destroy=function(){this.removeHoverListeners()},t.prototype.triggerEvent=function(n,r,a){var u=this.component,h=u.context,o=Vp(a);(!r||u.isValidSegDownEl(r.target))&&h.emitter.trigger(n,{el:a,event:new zi(h,o.eventRange.def,o.eventRange.instance),jsEvent:r,view:h.viewApi})},t}(sf),XW=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.buildViewContext=Mr(kH),n.buildViewPropTransformers=Mr(YW),n.buildToolbarProps=Mr(KW),n.headerRef=as(),n.footerRef=as(),n.interactionsStore={},n.state={viewLabelId:L0()},n.registerInteractiveComponent=function(r,a){var u=HW(r,a),h=[qW,ZW],o=h.concat(n.props.pluginHooks.componentInteractions),g=o.map(function(b){return new b(u)});n.interactionsStore[r.uid]=g,jC[r.uid]=u},n.unregisterInteractiveComponent=function(r){var a=n.interactionsStore[r.uid];if(a){for(var u=0,h=a;u<h.length;u++){var o=h[u];o.destroy()}delete n.interactionsStore[r.uid]}delete jC[r.uid]},n.resizeRunner=new W4(function(){n.props.emitter.trigger("_resize",!0),n.props.emitter.trigger("windowResize",{view:n.props.viewApi})}),n.handleWindowResize=function(r){var a=n.props.options;a.handleWindowResize&&r.target===window&&n.resizeRunner.request(a.windowResizeDelay)},n}return t.prototype.render=function(){var n=this.props,r=n.toolbarConfig,a=n.options,u=this.buildToolbarProps(n.viewSpec,n.dateProfile,n.dateProfileGenerator,n.currentDate,fv(n.options.now,n.dateEnv),n.viewTitle),h=!1,o="",g;n.isHeightAuto||n.forPrint?o="":a.height!=null?h=!0:a.contentHeight!=null?o=a.contentHeight:g=Math.max(a.aspectRatio,.5);var b=this.buildViewContext(n.viewSpec,n.viewApi,n.options,n.dateProfileGenerator,n.dateEnv,n.theme,n.pluginHooks,n.dispatch,n.getCurrentData,n.emitter,n.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),A=r.header&&r.header.hasTitle?this.state.viewLabelId:"";return kt(Hd.Provider,{value:b},r.header&&kt(RP,xt({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:r.header,titleId:A},u)),kt(GW,{liquid:h,height:o,aspectRatio:g,labeledById:A},this.renderView(n),this.buildAppendContent()),r.footer&&kt(RP,xt({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:r.footer,titleId:""},u)))},t.prototype.componentDidMount=function(){var n=this.props;this.calendarInteractions=n.pluginHooks.calendarInteractions.map(function(u){return new u(n)}),window.addEventListener("resize",this.handleWindowResize);var r=n.pluginHooks.propSetHandlers;for(var a in r)r[a](n[a],n)},t.prototype.componentDidUpdate=function(n){var r=this.props,a=r.pluginHooks.propSetHandlers;for(var u in a)r[u]!==n[u]&&a[u](r[u],r)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(var n=0,r=this.calendarInteractions;n<r.length;n++){var a=r[n];a.destroy()}this.props.emitter.trigger("_unmount")},t.prototype.buildAppendContent=function(){var n=this.props,r=n.pluginHooks.viewContainerAppends.map(function(a){return a(n)});return kt.apply(void 0,$i([da,{}],r))},t.prototype.renderView=function(n){for(var r=n.pluginHooks,a=n.viewSpec,u={dateProfile:n.dateProfile,businessHours:n.businessHours,eventStore:n.renderableEventStore,eventUiBases:n.eventUiBases,dateSelection:n.dateSelection,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,isHeightAuto:n.isHeightAuto,forPrint:n.forPrint},h=this.buildViewPropTransformers(r.viewPropsTransformers),o=0,g=h;o<g.length;o++){var b=g[o];xt(u,b.transform(u,n))}var A=a.component;return kt(A,xt({},u))},t}(N0);function KW(e,t,n,r,a,u){var h=n.build(a,void 0,!1),o=n.buildPrev(t,r,!1),g=n.buildNext(t,r,!1);return{title:u,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:h.isValid&&!kd(t.currentRange,a),isPrevEnabled:o.isValid,isNextEnabled:g.isValid}}function YW(e){return e.map(function(t){return new t})}var JW=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={forPrint:!1},n.handleBeforePrint=function(){n.setState({forPrint:!0})},n.handleAfterPrint=function(){n.setState({forPrint:!1})},n}return t.prototype.render=function(){var n=this.props,r=n.options,a=this.state.forPrint,u=a||r.height==="auto"||r.contentHeight==="auto",h=!u&&r.height!=null?r.height:"",o=["fc",a?"fc-media-print":"fc-media-screen","fc-direction-"+r.direction,n.theme.getClass("root")];return I4()||o.push("fc-liquid-hack"),n.children(o,h,u,a)},t.prototype.componentDidMount=function(){var n=this.props.emitter;n.on("_beforeprint",this.handleBeforePrint),n.on("_afterprint",this.handleAfterPrint)},t.prototype.componentWillUnmount=function(){var n=this.props.emitter;n.off("_beforeprint",this.handleBeforePrint),n.off("_afterprint",this.handleAfterPrint)},t}(xi);function QW(e,t){return!e||t>10?So({weekday:"short"}):t>1?So({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):So({weekday:"long"})}var Z4="fc-col-header-cell";function X4(e){return e.text}var eG=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.context,r=n.dateEnv,a=n.options,u=n.theme,h=n.viewApi,o=this.props,g=o.date,b=o.dateProfile,A=P4(g,o.todayRange,null,b),D=[Z4].concat(Uk(A,u)),z=r.format(g,o.dayHeaderFormat),F=!A.isDisabled&&o.colCnt>1?jk(this.context,g):{},N=xt(xt(xt({date:r.toDate(g),view:h},o.extraHookProps),{text:z}),A);return kt(af,{hookProps:N,classNames:a.dayHeaderClassNames,content:a.dayHeaderContent,defaultContent:X4,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},function(T,H,j,W){return kt("th",xt({ref:T,role:"columnheader",className:D.concat(H).join(" "),"data-date":A.isDisabled?void 0:c4(g),colSpan:o.colSpan},o.extraDataAttrs),kt("div",{className:"fc-scrollgrid-sync-inner"},!A.isDisabled&&kt("a",xt({ref:j,className:["fc-col-header-cell-cushion",o.isSticky?"fc-sticky":""].join(" ")},F),W)))})},t}(xi),tG=So({weekday:"long"}),nG=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=this.context,a=r.dateEnv,u=r.theme,h=r.viewApi,o=r.options,g=Qo(new Date(2592e5),n.dow),b={dow:n.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},A=[Z4].concat(Uk(b,u),n.extraClassNames||[]),D=a.format(g,n.dayHeaderFormat),z=xt(xt(xt(xt({date:g},b),{view:h}),n.extraHookProps),{text:D});return kt(af,{hookProps:z,classNames:o.dayHeaderClassNames,content:o.dayHeaderContent,defaultContent:X4,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},function(F,N,T,H){return kt("th",xt({ref:F,role:"columnheader",className:A.concat(N).join(" "),colSpan:n.colSpan},n.extraDataAttrs),kt("div",{className:"fc-scrollgrid-sync-inner"},kt("a",{"aria-label":a.format(g,tG),className:["fc-col-header-cell-cushion",n.isSticky?"fc-sticky":""].join(" "),ref:T},H)))})},t}(xi),K4=function(e){Nr(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.initialNowDate=fv(r.options.now,r.dateEnv),a.initialNowQueriedMs=new Date().valueOf(),a.state=a.computeTiming().currentState,a}return t.prototype.render=function(){var n=this,r=n.props,a=n.state;return r.children(a.nowDate,a.todayRange)},t.prototype.componentDidMount=function(){this.setTimeout()},t.prototype.componentDidUpdate=function(n){n.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())},t.prototype.componentWillUnmount=function(){this.clearTimeout()},t.prototype.computeTiming=function(){var n=this,r=n.props,a=n.context,u=Od(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),h=a.dateEnv.startOf(u,r.unit),o=a.dateEnv.add(h,Fr(1,r.unit)),g=o.valueOf()-u.valueOf();return g=Math.min(1e3*60*60*24,g),{currentState:{nowDate:h,todayRange:LP(h)},nextState:{nowDate:o,todayRange:LP(o)},waitMs:g}},t.prototype.setTimeout=function(){var n=this,r=this.computeTiming(),a=r.nextState,u=r.waitMs;this.timeoutId=setTimeout(function(){n.setState(a,function(){n.setTimeout()})},u)},t.prototype.clearTimeout=function(){this.timeoutId&&clearTimeout(this.timeoutId)},t.contextType=Hd,t}(Sk);function LP(e){var t=_i(e),n=Qo(t,1);return{start:t,end:n}}var rG=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.createDayHeaderFormatter=Mr(iG),n}return t.prototype.render=function(){var n=this.context,r=this.props,a=r.dates,u=r.dateProfile,h=r.datesRepDistinctDays,o=r.renderIntro,g=this.createDayHeaderFormatter(n.options.dayHeaderFormat,h,a.length);return kt(K4,{unit:"day"},function(b,A){return kt("tr",{role:"row"},o&&o("day"),a.map(function(D){return h?kt(eG,{key:D.toISOString(),date:D,dateProfile:u,todayRange:A,colCnt:a.length,dayHeaderFormat:g}):kt(nG,{key:D.getUTCDay(),dow:D.getUTCDay(),dayHeaderFormat:g})}))})},t}(xi);function iG(e,t,n){return e||QW(t,n)}var oG=function(){function e(t,n){for(var r=t.start,a=t.end,u=[],h=[],o=-1;r<a;)n.isHiddenDay(r)?u.push(o+.5):(o+=1,u.push(o),h.push(r)),r=Qo(r,1);this.dates=h,this.indices=u,this.cnt=h.length}return e.prototype.sliceRange=function(t){var n=this.getDateDayIndex(t.start),r=this.getDateDayIndex(Qo(t.end,-1)),a=Math.max(0,n),u=Math.min(this.cnt-1,r);return a=Math.ceil(a),u=Math.floor(u),a<=u?{firstIndex:a,lastIndex:u,isStart:n===a,isEnd:r===u}:null},e.prototype.getDateDayIndex=function(t){var n=this.indices,r=Math.floor(rf(this.dates[0],t));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]},e}(),aG=function(){function e(t,n){var r=t.dates,a,u,h;if(n){for(u=r[0].getUTCDay(),a=1;a<r.length&&r[a].getUTCDay()!==u;a+=1);h=Math.ceil(r.length/a)}else h=1,a=r.length;this.rowCnt=h,this.colCnt=a,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}return e.prototype.buildCells=function(){for(var t=[],n=0;n<this.rowCnt;n+=1){for(var r=[],a=0;a<this.colCnt;a+=1)r.push(this.buildCell(n,a));t.push(r)}return t},e.prototype.buildCell=function(t,n){var r=this.daySeries.dates[t*this.colCnt+n];return{key:r.toISOString(),date:r}},e.prototype.buildHeaderDates=function(){for(var t=[],n=0;n<this.colCnt;n+=1)t.push(this.cells[0][n].date);return t},e.prototype.sliceRange=function(t){var n=this.colCnt,r=this.daySeries.sliceRange(t),a=[];if(r)for(var u=r.firstIndex,h=r.lastIndex,o=u;o<=h;){var g=Math.floor(o/n),b=Math.min((g+1)*n,h+1);a.push({row:g,firstCol:o%n,lastCol:(b-1)%n,isStart:r.isStart&&o===u,isEnd:r.isEnd&&b-1===h}),o=b}return a},e}(),sG=function(){function e(){this.sliceBusinessHours=Mr(this._sliceBusinessHours),this.sliceDateSelection=Mr(this._sliceDateSpan),this.sliceEventStore=Mr(this._sliceEventStore),this.sliceEventDrag=Mr(this._sliceInteraction),this.sliceEventResize=Mr(this._sliceInteraction),this.forceDayIfListItem=!1}return e.prototype.sliceProps=function(t,n,r,a){for(var u=[],h=4;h<arguments.length;h++)u[h-4]=arguments[h];var o=t.eventUiBases,g=this.sliceEventStore.apply(this,$i([t.eventStore,o,n,r],u));return{dateSelectionSegs:this.sliceDateSelection.apply(this,$i([t.dateSelection,o,a],u)),businessHourSegs:this.sliceBusinessHours.apply(this,$i([t.businessHours,n,r,a],u)),fgEventSegs:g.fg,bgEventSegs:g.bg,eventDrag:this.sliceEventDrag.apply(this,$i([t.eventDrag,o,n,r],u)),eventResize:this.sliceEventResize.apply(this,$i([t.eventResize,o,n,r],u)),eventSelection:t.eventSelection}},e.prototype.sliceNowDate=function(t,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return this._sliceDateSpan.apply(this,$i([{range:{start:t,end:Od(t,1)},allDay:!1},{},n],r))},e.prototype._sliceBusinessHours=function(t,n,r,a){for(var u=[],h=4;h<arguments.length;h++)u[h-4]=arguments[h];return t?this._sliceEventStore.apply(this,$i([$p(t,Gw(n,Boolean(r)),a),{},n,r],u)).bg:[]},e.prototype._sliceEventStore=function(t,n,r,a){for(var u=[],h=4;h<arguments.length;h++)u[h-4]=arguments[h];if(t){var o=bP(t,n,Gw(r,Boolean(a)),a);return{bg:this.sliceEventRanges(o.bg,u),fg:this.sliceEventRanges(o.fg,u)}}return{bg:[],fg:[]}},e.prototype._sliceInteraction=function(t,n,r,a){for(var u=[],h=4;h<arguments.length;h++)u[h-4]=arguments[h];if(!t)return null;var o=bP(t.mutatedEvents,n,Gw(r,Boolean(a)),a);return{segs:this.sliceEventRanges(o.fg,u),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}},e.prototype._sliceDateSpan=function(t,n,r){for(var a=[],u=3;u<arguments.length;u++)a[u-3]=arguments[u];if(!t)return[];for(var h=BV(t,n,r),o=this.sliceRange.apply(this,$i([t.range],a)),g=0,b=o;g<b.length;g++){var A=b[g];A.eventRange=h}return o},e.prototype.sliceEventRanges=function(t,n){for(var r=[],a=0,u=t;a<u.length;a++){var h=u[a];r.push.apply(r,this.sliceEventRange(h,n))}return r},e.prototype.sliceEventRange=function(t,n){var r=t.range;this.forceDayIfListItem&&t.ui.display==="list-item"&&(r={start:r.start,end:Qo(r.start,1)});for(var a=this.sliceRange.apply(this,$i([r],n)),u=0,h=a;u<h.length;u++){var o=h[u];o.eventRange=t,o.isStart=t.isStart&&o.isStart,o.isEnd=t.isEnd&&o.isEnd}return a},e}();function Gw(e,t){var n=e.activeRange;return t?n:{start:Od(n.start,e.slotMinTime.milliseconds),end:Od(n.end,e.slotMaxTime.milliseconds-864e5)}}function Y4(e,t,n){var r=e.mutatedEvents.instances;for(var a in r)if(!B0(t.validRange,r[a].range))return!1;return J4({eventDrag:e},n)}function lG(e,t,n){return B0(t.validRange,e.range)?J4({dateSelection:e},n):!1}function J4(e,t){var n=t.getCurrentData(),r=xt({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},e);return(t.pluginHooks.isPropsValid||cG)(r,t)}function cG(e,t,n,r){return n===void 0&&(n={}),!(e.eventDrag&&!uG(e,t,n,r)||e.dateSelection&&!dG(e,t,n,r))}function uG(e,t,n,r){var a=t.getCurrentData(),u=e.eventDrag,h=u.mutatedEvents,o=h.defs,g=h.instances,b=Kx(o,u.isEvent?e.eventUiBases:{"":a.selectionConfig});r&&(b=Vd(b,r));var A=rW(e.eventStore,u.affectedEvents.instances),D=A.defs,z=A.instances,F=Kx(D,e.eventUiBases);for(var N in g){var T=g[N],H=T.range,j=b[T.defId],W=o[T.defId];if(!Q4(j.constraints,H,A,e.businessHours,t))return!1;var B=t.options.eventOverlap,O=typeof B=="function"?B:null;for(var S in z){var w=z[S];if(Bk(H,w.range)){var P=F[w.defId].overlap;if(P===!1&&u.isEvent||j.overlap===!1||O&&!O(new zi(t,D[w.defId],w),new zi(t,W,T)))return!1}}for(var Y=a.eventStore,ne=0,ae=j.allows;ne<ae.length;ne++){var oe=ae[ne],fe=xt(xt({},n),{range:T.range,allDay:W.allDay}),Re=Y.defs[W.defId],Be=Y.instances[N],Oe=void 0;if(Re?Oe=new zi(t,Re,Be):Oe=new zi(t,W),!oe(Fk(fe,t),Oe))return!1}}return!0}function dG(e,t,n,r){var a=e.eventStore,u=a.defs,h=a.instances,o=e.dateSelection,g=o.range,b=t.getCurrentData().selectionConfig;if(r&&(b=r(b)),!Q4(b.constraints,g,a,e.businessHours,t))return!1;var A=t.options.selectOverlap,D=typeof A=="function"?A:null;for(var z in h){var F=h[z];if(Bk(g,F.range)&&(b.overlap===!1||D&&!D(new zi(t,u[F.defId],F),null)))return!1}for(var N=0,T=b.allows;N<T.length;N++){var H=T[N],j=xt(xt({},n),o);if(!H(Fk(j,t),null))return!1}return!0}function Q4(e,t,n,r,a){for(var u=0,h=e;u<h.length;u++){var o=h[u];if(!pG(hG(o,t,n,r,a),t))return!1}return!0}function hG(e,t,n,r,a){return e==="businessHours"?qw($p(r,t,a)):typeof e=="string"?qw(z0(n,function(u){return u.groupId===e})):typeof e=="object"&&e?qw($p(e,t,a)):[]}function qw(e){var t=e.instances,n=[];for(var r in t)n.push(t[r].range);return n}function pG(e,t){for(var n=0,r=e;n<r.length;n++){var a=r[n];if(B0(a,t))return!0}return!1}var k_=/^(visible|hidden)$/,fG=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleEl=function(r){n.el=r,Xl(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this.props,r=n.liquid,a=n.liquidIsAbsolute,u=r&&a,h=["fc-scroller"];return r&&(a?h.push("fc-scroller-liquid-absolute"):h.push("fc-scroller-liquid")),kt("div",{ref:this.handleEl,className:h.join(" "),style:{overflowX:n.overflowX,overflowY:n.overflowY,left:u&&-(n.overcomeLeft||0)||"",right:u&&-(n.overcomeRight||0)||"",bottom:u&&-(n.overcomeBottom||0)||"",marginLeft:!u&&-(n.overcomeLeft||0)||"",marginRight:!u&&-(n.overcomeRight||0)||"",marginBottom:!u&&-(n.overcomeBottom||0)||"",maxHeight:n.maxHeight||""}},n.children)},t.prototype.needsXScrolling=function(){if(k_.test(this.props.overflowX))return!1;for(var n=this.el,r=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),a=n.children,u=0;u<a.length;u+=1){var h=a[u];if(h.getBoundingClientRect().width>r)return!0}return!1},t.prototype.needsYScrolling=function(){if(k_.test(this.props.overflowY))return!1;for(var n=this.el,r=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),a=n.children,u=0;u<a.length;u+=1){var h=a[u];if(h.getBoundingClientRect().height>r)return!0}return!1},t.prototype.getXScrollbarWidth=function(){return k_.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight},t.prototype.getYScrollbarWidth=function(){return k_.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth},t}(xi),wd=function(){function e(t){var n=this;this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=function(r,a){var u=n,h=u.depths,o=u.currentMap,g=!1,b=!1;r!==null?(g=a in o,o[a]=r,h[a]=(h[a]||0)+1,b=!0):(h[a]-=1,h[a]||(delete o[a],delete n.callbackMap[a],g=!0)),n.masterCallback&&(g&&n.masterCallback(null,String(a)),b&&n.masterCallback(r,String(a)))}}return e.prototype.createRef=function(t){var n=this,r=this.callbackMap[t];return r||(r=this.callbackMap[t]=function(a){n.handleValue(a,String(t))}),r},e.prototype.collect=function(t,n,r){return N8(this.currentMap,t,n,r)},e.prototype.getAll=function(){return Pk(this.currentMap)},e}();function mG(e){for(var t=u8(e,".fc-scrollgrid-shrink"),n=0,r=0,a=t;r<a.length;r++){var u=a[r];n=Math.max(n,S8(u))}return Math.ceil(n)}function ez(e,t){return e.liquid&&t.liquid}function gG(e,t){return t.maxHeight!=null||ez(e,t)}function vG(e,t,n,r){var a=n.expandRows,u=typeof t.content=="function"?t.content(n):kt("table",{role:"presentation",className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:a?n.clientHeight:""}},n.tableColGroupNode,kt(r?"thead":"tbody",{role:"presentation"},typeof t.rowContent=="function"?t.rowContent(n):t.rowContent));return u}function yG(e,t){return Zg(e,t,Zl)}function _G(e,t){for(var n=[],r=0,a=e;r<a.length;r++)for(var u=a[r],h=u.span||1,o=0;o<h;o+=1)n.push(kt("col",{style:{width:u.width==="shrink"?xG(t):u.width||"",minWidth:u.minWidth||""}}));return kt.apply(void 0,$i(["colgroup",{}],n))}function xG(e){return e==null?4:e}function bG(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r.width==="shrink")return!0}return!1}function wG(e,t){var n=["fc-scrollgrid",t.theme.getClass("table")];return e&&n.push("fc-scrollgrid-liquid"),n}function EG(e,t){var n=["fc-scrollgrid-section","fc-scrollgrid-section-"+e.type,e.className];return t&&e.liquid&&e.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),e.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function CG(e){return kt("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function OP(e){var t=e.stickyHeaderDates;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}function SG(e){var t=e.stickyFooterScrollbar;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}var tz=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.processCols=Mr(function(r){return r},yG),n.renderMicroColGroup=Mr(_G),n.scrollerRefs=new wd,n.scrollerElRefs=new wd(n._handleScrollerEl.bind(n)),n.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},n.handleSizing=function(){n.safeSetState(xt({shrinkWidth:n.computeShrinkWidth()},n.computeScrollerDims()))},n}return t.prototype.render=function(){var n=this,r=n.props,a=n.state,u=n.context,h=r.sections||[],o=this.processCols(r.cols),g=this.renderMicroColGroup(o,a.shrinkWidth),b=wG(r.liquid,u);r.collapsibleWidth&&b.push("fc-scrollgrid-collapsible");for(var A=h.length,D=0,z,F=[],N=[],T=[];D<A&&(z=h[D]).type==="header";)F.push(this.renderSection(z,g,!0)),D+=1;for(;D<A&&(z=h[D]).type==="body";)N.push(this.renderSection(z,g,!1)),D+=1;for(;D<A&&(z=h[D]).type==="footer";)T.push(this.renderSection(z,g,!0)),D+=1;var H=!I4(),j={role:"rowgroup"};return kt("table",{role:"grid",className:b.join(" "),style:{height:r.height}},Boolean(!H&&F.length)&&kt.apply(void 0,$i(["thead",j],F)),Boolean(!H&&N.length)&&kt.apply(void 0,$i(["tbody",j],N)),Boolean(!H&&T.length)&&kt.apply(void 0,$i(["tfoot",j],T)),H&&kt.apply(void 0,$i($i($i(["tbody",j],F),N),T)))},t.prototype.renderSection=function(n,r,a){return"outerContent"in n?kt(da,{key:n.key},n.outerContent):kt("tr",{key:n.key,role:"presentation",className:EG(n,this.props.liquid).join(" ")},this.renderChunkTd(n,r,n.chunk,a))},t.prototype.renderChunkTd=function(n,r,a,u){if("outerContent"in a)return a.outerContent;var h=this.props,o=this.state,g=o.forceYScrollbars,b=o.scrollerClientWidths,A=o.scrollerClientHeights,D=gG(h,n),z=ez(h,n),F=h.liquid?g?"scroll":D?"auto":"hidden":"visible",N=n.key,T=vG(n,a,{tableColGroupNode:r,tableMinWidth:"",clientWidth:!h.collapsibleWidth&&b[N]!==void 0?b[N]:null,clientHeight:A[N]!==void 0?A[N]:null,expandRows:n.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:function(){}},u);return kt(u?"th":"td",{ref:a.elRef,role:"presentation"},kt("div",{className:"fc-scroller-harness"+(z?" fc-scroller-harness-liquid":"")},kt(fG,{ref:this.scrollerRefs.createRef(N),elRef:this.scrollerElRefs.createRef(N),overflowY:F,overflowX:h.liquid?"hidden":"visible",maxHeight:n.maxHeight,liquid:z,liquidIsAbsolute:!0},T)))},t.prototype._handleScrollerEl=function(n,r){var a=kG(this.props.sections,r);a&&Xl(a.chunk.scrollerElRef,n)},t.prototype.componentDidMount=function(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)},t.prototype.componentDidUpdate=function(){this.handleSizing()},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleSizing)},t.prototype.computeShrinkWidth=function(){return bG(this.props.cols)?mG(this.scrollerElRefs.getAll()):0},t.prototype.computeScrollerDims=function(){var n=mH(),r=this,a=r.scrollerRefs,u=r.scrollerElRefs,h=!1,o={},g={};for(var b in a.currentMap){var A=a.currentMap[b];if(A&&A.needsYScrolling()){h=!0;break}}for(var D=0,z=this.props.sections;D<z.length;D++){var F=z[D],b=F.key,N=u.currentMap[b];if(N){var T=N.parentNode;o[b]=Math.floor(T.getBoundingClientRect().width-(h?n.y:0)),g[b]=Math.floor(T.getBoundingClientRect().height)}}return{forceYScrollbars:h,scrollerClientWidths:o,scrollerClientHeights:g}},t}(xi);tz.addStateEquality({scrollerClientWidths:Zl,scrollerClientHeights:Zl});function kG(e,t){for(var n=0,r=e;n<r.length;n++){var a=r[n];if(a.key===t)return a}return null}var Zk=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.elRef=as(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,u=a.options,h=r.seg,o=h.eventRange,g=o.ui,b={event:new zi(a,o.def,o.instance),view:a.viewApi,timeText:r.timeText,textColor:g.textColor,backgroundColor:g.backgroundColor,borderColor:g.borderColor,isDraggable:!r.disableDragging&&kV(h,a),isStartResizable:!r.disableResizing&&TV(h,a),isEndResizable:!r.disableResizing&&AV(h),isMirror:Boolean(r.isDragging||r.isResizing||r.isDateSelecting),isStart:Boolean(h.isStart),isEnd:Boolean(h.isEnd),isPast:Boolean(r.isPast),isFuture:Boolean(r.isFuture),isToday:Boolean(r.isToday),isSelected:Boolean(r.isSelected),isDragging:Boolean(r.isDragging),isResizing:Boolean(r.isResizing)},A=MV(b).concat(g.classNames);return kt(af,{hookProps:b,classNames:u.eventClassNames,content:u.eventContent,defaultContent:r.defaultContent,didMount:u.eventDidMount,willUnmount:u.eventWillUnmount,elRef:this.elRef},function(D,z,F,N){return r.children(D,A.concat(z),F,N,b)})},t.prototype.componentDidMount=function(){wP(this.elRef.current,this.props.seg)},t.prototype.componentDidUpdate=function(n){var r=this.props.seg;r!==n.seg&&wP(this.elRef.current,r)},t}(xi),TG=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,u=r.seg,h=a.options.eventTimeFormat||r.defaultTimeFormat,o=g4(u,h,a,r.defaultDisplayEventTime,r.defaultDisplayEventEnd);return kt(Zk,{seg:u,timeText:o,disableDragging:r.disableDragging,disableResizing:r.disableResizing,defaultContent:r.defaultContent||AG,isDragging:r.isDragging,isResizing:r.isResizing,isDateSelecting:r.isDateSelecting,isSelected:r.isSelected,isPast:r.isPast,isFuture:r.isFuture,isToday:r.isToday},function(g,b,A,D,z){return kt("a",xt({className:r.extraClassNames.concat(b).join(" "),style:{borderColor:z.borderColor,backgroundColor:z.backgroundColor},ref:g},v4(u,a)),kt("div",{className:"fc-event-main",ref:A,style:{color:z.textColor}},D),z.isStartResizable&&kt("div",{className:"fc-event-resizer fc-event-resizer-start"}),z.isEndResizable&&kt("div",{className:"fc-event-resizer fc-event-resizer-end"}))})},t}(xi);function AG(e){return kt("div",{className:"fc-event-main-frame"},e.timeText&&kt("div",{className:"fc-event-time"},e.timeText),kt("div",{className:"fc-event-title-container"},kt("div",{className:"fc-event-title fc-sticky"},e.event.title||kt(da,null,"\xA0"))))}var MG=So({day:"numeric"}),nz=function(e){Nr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,u=a.options,h=rz({date:r.date,dateProfile:r.dateProfile,todayRange:r.todayRange,showDayNumber:r.showDayNumber,extraProps:r.extraHookProps,viewApi:a.viewApi,dateEnv:a.dateEnv});return kt(L4,{hookProps:h,content:u.dayCellContent,defaultContent:r.defaultContent},r.children)},t}(xi);function rz(e){var t=e.date,n=e.dateEnv,r=P4(t,e.todayRange,null,e.dateProfile);return xt(xt(xt({date:n.toDate(t),view:e.viewApi},r),{dayNumberText:e.showDayNumber?n.format(t,MG):""}),e.extraProps)}var iz=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.refineHookProps=Q_(rz),n.normalizeClassNames=O4(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,u=a.options,h=this.refineHookProps({date:r.date,dateProfile:r.dateProfile,todayRange:r.todayRange,showDayNumber:r.showDayNumber,extraProps:r.extraHookProps,viewApi:a.viewApi,dateEnv:a.dateEnv}),o=Uk(h,a.theme).concat(h.isDisabled?[]:this.normalizeClassNames(u.dayCellClassNames,h)),g=h.isDisabled?{}:{"data-date":c4(r.date)};return kt(Hk,{hookProps:h,didMount:u.dayCellDidMount,willUnmount:u.dayCellWillUnmount,elRef:r.elRef},function(b){return r.children(b,o,g,h.isDisabled)})},t}(xi);function IG(e){return kt("div",{className:"fc-"+e})}var PG=function(e){return kt(Zk,{defaultContent:DG,seg:e.seg,timeText:"",disableDragging:!0,disableResizing:!0,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday},function(t,n,r,a,u){return kt("div",{ref:t,className:["fc-bg-event"].concat(n).join(" "),style:{backgroundColor:u.backgroundColor}},a)})};function DG(e){var t=e.event.title;return t&&kt("div",{className:"fc-event-title"},e.event.title)}var RG=function(e){return kt(Hd.Consumer,null,function(t){var n=t.dateEnv,r=t.options,a=e.date,u=r.weekNumberFormat||e.defaultFormat,h=n.computeWeekNumber(a),o=n.format(a,u),g={num:h,text:o,date:a};return kt(af,{hookProps:g,classNames:r.weekNumberClassNames,content:r.weekNumberContent,defaultContent:LG,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},e.children)})};function LG(e){return e.text}var Zw=10,OG=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={titleId:L0()},n.handleRootEl=function(r){n.rootEl=r,n.props.elRef&&Xl(n.props.elRef,r)},n.handleDocumentMouseDown=function(r){var a=n4(r);n.rootEl.contains(a)||n.handleCloseClick()},n.handleDocumentKeyDown=function(r){r.key==="Escape"&&n.handleCloseClick()},n.handleCloseClick=function(){var r=n.props.onClose;r&&r()},n}return t.prototype.render=function(){var n=this.context,r=n.theme,a=n.options,u=this,h=u.props,o=u.state,g=["fc-popover",r.getClass("popover")].concat(h.extraClassNames||[]);return l8(kt("div",xt({id:h.id,className:g.join(" "),"aria-labelledby":o.titleId},h.extraAttrs,{ref:this.handleRootEl}),kt("div",{className:"fc-popover-header "+r.getClass("popoverHeader")},kt("span",{className:"fc-popover-title",id:o.titleId},h.title),kt("span",{className:"fc-popover-close "+r.getIconClass("close"),title:a.closeHint,onClick:this.handleCloseClick})),kt("div",{className:"fc-popover-body "+r.getClass("popoverContent")},h.children)),h.parentEl)},t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)},t.prototype.updateSize=function(){var n=this.context.isRtl,r=this.props,a=r.alignmentEl,u=r.alignGridTop,h=this.rootEl,o=_H(a);if(o){var g=h.getBoundingClientRect(),b=u?Vo(a,".fc-scrollgrid").getBoundingClientRect().top:o.top,A=n?o.right-g.width:o.left;b=Math.max(b,Zw),A=Math.min(A,document.documentElement.clientWidth-Zw-g.width),A=Math.max(A,Zw);var D=h.offsetParent.getBoundingClientRect();pg(h,{top:b-D.top,left:A-D.left})}},t}(xi),zG=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleRootEl=function(r){n.rootEl=r,r?n.context.registerInteractiveComponent(n,{el:r,useEventCenter:!1}):n.context.unregisterInteractiveComponent(n)},n}return t.prototype.render=function(){var n=this.context,r=n.options,a=n.dateEnv,u=this.props,h=u.startDate,o=u.todayRange,g=u.dateProfile,b=a.format(h,r.dayPopoverFormat);return kt(iz,{date:h,dateProfile:g,todayRange:o,elRef:this.handleRootEl},function(A,D,z){return kt(OG,{elRef:A,id:u.id,title:b,extraClassNames:["fc-more-popover"].concat(D),extraAttrs:z,parentEl:u.parentEl,alignmentEl:u.alignmentEl,alignGridTop:u.alignGridTop,onClose:u.onClose},kt(nz,{date:h,dateProfile:g,todayRange:o},function(F,N){return N&&kt("div",{className:"fc-more-popover-misc",ref:F},N)}),u.children)})},t.prototype.queryHit=function(n,r,a,u){var h=this,o=h.rootEl,g=h.props;return n>=0&&n<a&&r>=0&&r<u?{dateProfile:g.dateProfile,dateSpan:xt({allDay:!0,range:{start:g.startDate,end:g.endDate}},g.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:a,bottom:u},layer:1}:null},t}(of),BG=function(e){Nr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.linkElRef=as(),n.state={isPopoverOpen:!1,popoverId:L0()},n.handleClick=function(r){var a=n,u=a.props,h=a.context,o=h.options.moreLinkClick,g=zP(u).start;function b(A){var D=A.eventRange,z=D.def,F=D.instance,N=D.range;return{event:new zi(h,z,F),start:h.dateEnv.toDate(N.start),end:h.dateEnv.toDate(N.end),isStart:A.isStart,isEnd:A.isEnd}}typeof o=="function"&&(o=o({date:g,allDay:Boolean(u.allDayDate),allSegs:u.allSegs.map(b),hiddenSegs:u.hiddenSegs.map(b),jsEvent:r,view:h.viewApi})),!o||o==="popover"?n.setState({isPopoverOpen:!0}):typeof o=="string"&&h.calendarApi.zoomTo(g,o)},n.handlePopoverClose=function(){n.setState({isPopoverOpen:!1})},n}return t.prototype.render=function(){var n=this,r=this,a=r.props,u=r.state;return kt(Hd.Consumer,null,function(h){var o=h.viewApi,g=h.options,b=h.calendarApi,A=g.moreLinkText,D=a.moreCnt,z=zP(a),F=typeof A=="function"?A.call(b,D):"+"+D+" "+A,N=fg(g.moreLinkHint,[D],F),T={num:D,shortText:"+"+D,text:F,view:o};return kt(da,null,Boolean(a.moreCnt)&&kt(af,{elRef:n.linkElRef,hookProps:T,classNames:g.moreLinkClassNames,content:g.moreLinkContent,defaultContent:a.defaultContent||FG,didMount:g.moreLinkDidMount,willUnmount:g.moreLinkWillUnmount},function(H,j,W,B){return a.children(H,["fc-more-link"].concat(j),W,B,n.handleClick,N,u.isPopoverOpen,u.isPopoverOpen?u.popoverId:"")}),u.isPopoverOpen&&kt(zG,{id:u.popoverId,startDate:z.start,endDate:z.end,dateProfile:a.dateProfile,todayRange:a.todayRange,extraDateSpan:a.extraDateSpan,parentEl:n.parentEl,alignmentEl:a.alignmentElRef.current,alignGridTop:a.alignGridTop,onClose:n.handlePopoverClose},a.popoverContent()))})},t.prototype.componentDidMount=function(){this.updateParentEl()},t.prototype.componentDidUpdate=function(){this.updateParentEl()},t.prototype.updateParentEl=function(){this.linkElRef.current&&(this.parentEl=Vo(this.linkElRef.current,".fc-view-harness"))},t}(xi);function FG(e){return e.text}function zP(e){if(e.allDayDate)return{start:e.allDayDate,end:Qo(e.allDayDate,1)};var t=e.hiddenSegs;return{start:NG(t),end:jG(t)}}function NG(e){return e.reduce(UG).eventRange.range.start}function UG(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function jG(e){return e.reduce($G).eventRange.range.end}function $G(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}var VG=function(e){s8(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._calendarApi=new GV,n}return t.prototype.render=function(){return m.exports.createElement($W,{optionOverrides:this.props,calendarApi:this._calendarApi},function(n){return m.exports.createElement(JW,{options:n.calendarOptions,theme:n.theme,emitter:n.emitter},function(r,a,u,h){return m.exports.createElement("div",{className:r.join(" "),style:{height:a}},m.exports.createElement(XW,DC({isHeightAuto:u,forPrint:h},n)))})})},t.prototype.getApi=function(){return this._calendarApi},t}(m.exports.Component);var $C=function(e,t){return $C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},$C(e,t)};function Fa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$C(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ti=function(){return Ti=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},Ti.apply(this,arguments)};function HG(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,u;r<a;r++)(u||!(r in t))&&(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return e.concat(u||Array.prototype.slice.call(t))}/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/var WG=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.headerElRef=as(),n}return t.prototype.renderSimpleLayout=function(n,r){var a=this,u=a.props,h=a.context,o=[],g=OP(h.options);return n&&o.push({type:"header",key:"header",isSticky:g,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:n}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:r}}),kt(UC,{viewSpec:h.viewSpec},function(b,A){return kt("div",{ref:b,className:["fc-daygrid"].concat(A).join(" ")},kt(tz,{liquid:!u.isHeightAuto&&!u.forPrint,collapsibleWidth:u.forPrint,cols:[],sections:o}))})},t.prototype.renderHScrollLayout=function(n,r,a,u){var h=this.context.pluginHooks.scrollGridImpl;if(!h)throw new Error("No ScrollGrid implementation");var o=this,g=o.props,b=o.context,A=!g.forPrint&&OP(b.options),D=!g.forPrint&&SG(b.options),z=[];return n&&z.push({type:"header",key:"header",isSticky:A,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:n}]}),z.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:r}]}),D&&z.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:CG}]}),kt(UC,{viewSpec:b.viewSpec},function(F,N){return kt("div",{ref:F,className:["fc-daygrid"].concat(N).join(" ")},kt(h,{liquid:!g.isHeightAuto&&!g.forPrint,collapsibleWidth:g.forPrint,colGroups:[{cols:[{span:a,minWidth:u}]}],sections:z}))})},t}(of);function T_(e,t){for(var n=[],r=0;r<t;r+=1)n[r]=[];for(var a=0,u=e;a<u.length;a++){var h=u[a];n[h.row].push(h)}return n}function A_(e,t){for(var n=[],r=0;r<t;r+=1)n[r]=[];for(var a=0,u=e;a<u.length;a++){var h=u[a];n[h.firstCol].push(h)}return n}function BP(e,t){var n=[];if(e){for(var r=0;r<t;r+=1)n[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(var a=0,u=e.segs;a<u.length;a++){var h=u[a];n[h.row].segs.push(h)}}else for(var r=0;r<t;r+=1)n[r]=null;return n}var GG=function(e){Fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=jk(this.context,n.date);return kt(nz,{date:n.date,dateProfile:n.dateProfile,todayRange:n.todayRange,showDayNumber:n.showDayNumber,extraHookProps:n.extraHookProps,defaultContent:qG},function(a,u){return(u||n.forceDayTop)&&kt("div",{className:"fc-daygrid-day-top",ref:a},kt("a",Ti({id:n.dayNumberId,className:"fc-daygrid-day-number"},r),u||kt(da,null,"\xA0")))})},t}(xi);function qG(e){return e.dayNumberText}var oz=So({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function az(e){var t=e.eventRange.ui.display;return t==="list-item"||t==="auto"&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}var sz=function(e){Fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props;return kt(TG,Ti({},n,{extraClassNames:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:oz,defaultDisplayEventEnd:n.defaultDisplayEventEnd,disableResizing:!n.seg.eventRange.def.allDay}))},t}(xi),lz=function(e){Fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,u=a.options.eventTimeFormat||oz,h=g4(r.seg,u,a,!0,r.defaultDisplayEventEnd);return kt(Zk,{seg:r.seg,timeText:h,defaultContent:ZG,isDragging:r.isDragging,isResizing:!1,isDateSelecting:!1,isSelected:r.isSelected,isPast:r.isPast,isFuture:r.isFuture,isToday:r.isToday},function(o,g,b,A){return kt("a",Ti({className:["fc-daygrid-event","fc-daygrid-dot-event"].concat(g).join(" "),ref:o},v4(r.seg,a)),A)})},t}(xi);function ZG(e){return kt(da,null,kt("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&kt("div",{className:"fc-event-time"},e.timeText),kt("div",{className:"fc-event-title"},e.event.title||kt(da,null,"\xA0")))}var XG=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.compileSegs=Mr(KG),n}return t.prototype.render=function(){var n=this.props,r=this.compileSegs(n.singlePlacements),a=r.allSegs,u=r.invisibleSegs;return kt(BG,{dateProfile:n.dateProfile,todayRange:n.todayRange,allDayDate:n.allDayDate,moreCnt:n.moreCnt,allSegs:a,hiddenSegs:u,alignmentElRef:n.alignmentElRef,alignGridTop:n.alignGridTop,extraDateSpan:n.extraDateSpan,popoverContent:function(){var h=(n.eventDrag?n.eventDrag.affectedInstances:null)||(n.eventResize?n.eventResize.affectedInstances:null)||{};return kt(da,null,a.map(function(o){var g=o.eventRange.instance.instanceId;return kt("div",{className:"fc-daygrid-event-harness",key:g,style:{visibility:h[g]?"hidden":""}},az(o)?kt(lz,Ti({seg:o,isDragging:!1,isSelected:g===n.eventSelection,defaultDisplayEventEnd:!1},gg(o,n.todayRange))):kt(sz,Ti({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:g===n.eventSelection,defaultDisplayEventEnd:!1},gg(o,n.todayRange))))}))}},function(h,o,g,b,A,D,z,F){return kt("a",Ti({ref:h,className:["fc-daygrid-more-link"].concat(o).join(" "),title:D,"aria-expanded":z,"aria-controls":F},o4(A)),b)})},t}(xi);function KG(e){for(var t=[],n=[],r=0,a=e;r<a.length;r++){var u=a[r];t.push(u.seg),u.isVisible||n.push(u.seg)}return{allSegs:t,invisibleSegs:n}}var YG=So({week:"narrow"}),JG=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.rootElRef=as(),n.state={dayNumberId:L0()},n.handleRootEl=function(r){Xl(n.rootElRef,r),Xl(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this,r=n.context,a=n.props,u=n.state,h=n.rootElRef,o=a.date,g=a.dateProfile,b=jk(r,o,"week");return kt(iz,{date:o,dateProfile:g,todayRange:a.todayRange,showDayNumber:a.showDayNumber,extraHookProps:a.extraHookProps,elRef:this.handleRootEl},function(A,D,z,F){return kt("td",Ti({ref:A,role:"gridcell",className:["fc-daygrid-day"].concat(D,a.extraClassNames||[]).join(" ")},z,a.extraDataAttrs,a.showDayNumber?{"aria-labelledby":u.dayNumberId}:{}),kt("div",{className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",ref:a.innerElRef},a.showWeekNumber&&kt(RG,{date:o,defaultFormat:YG},function(N,T,H,j){return kt("a",Ti({ref:N,className:["fc-daygrid-week-number"].concat(T).join(" ")},b),j)}),!F&&kt(GG,{date:o,dateProfile:g,showDayNumber:a.showDayNumber,dayNumberId:u.dayNumberId,forceDayTop:a.forceDayTop,todayRange:a.todayRange,extraHookProps:a.extraHookProps}),kt("div",{className:"fc-daygrid-day-events",ref:a.fgContentElRef},a.fgContent,kt("div",{className:"fc-daygrid-day-bottom",style:{marginTop:a.moreMarginTop}},kt(XG,{allDayDate:o,singlePlacements:a.singlePlacements,moreCnt:a.moreCnt,alignmentElRef:h,alignGridTop:!a.showDayNumber,extraDateSpan:a.extraDateSpan,dateProfile:a.dateProfile,eventSelection:a.eventSelection,eventDrag:a.eventDrag,eventResize:a.eventResize,todayRange:a.todayRange}))),kt("div",{className:"fc-daygrid-day-bg"},a.bgContent)))})},t}(of);function QG(e,t,n,r,a,u,h){var o=new nq;o.allowReslicing=!0,o.strictOrder=r,t===!0||n===!0?(o.maxCoord=u,o.hiddenConsumes=!0):typeof t=="number"?o.maxStackCnt=t:typeof n=="number"&&(o.maxStackCnt=n,o.hiddenConsumes=!0);for(var g=[],b=[],A=0;A<e.length;A+=1){var D=e[A],z=D.eventRange.instance.instanceId,F=a[z];F!=null?g.push({index:A,thickness:F,span:{start:D.firstCol,end:D.lastCol+1}}):b.push(D)}for(var N=o.addSegs(g),T=o.toRects(),H=eq(T,e,h),j=H.singleColPlacements,W=H.multiColPlacements,B=H.leftoverMargins,O=[],S=[],w=0,P=b;w<P.length;w++){var D=P[w];W[D.firstCol].push({seg:D,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var Y=D.firstCol;Y<=D.lastCol;Y+=1)j[Y].push({seg:Ap(D,Y,Y+1,h),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(var Y=0;Y<h.length;Y+=1)O.push(0);for(var ne=0,ae=N;ne<ae.length;ne++){var oe=ae[ne],D=e[oe.index],fe=oe.span;W[fe.start].push({seg:Ap(D,fe.start,fe.end,h),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var Y=fe.start;Y<fe.end;Y+=1)O[Y]+=1,j[Y].push({seg:Ap(D,Y,Y+1,h),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(var Y=0;Y<h.length;Y+=1)S.push(B[Y]);return{singleColPlacements:j,multiColPlacements:W,moreCnts:O,moreMarginTops:S}}function eq(e,t,n){for(var r=tq(e,n.length),a=[],u=[],h=[],o=0;o<n.length;o+=1){for(var g=r[o],b=[],A=0,D=0,z=0,F=g;z<F.length;z++){var N=F[z],T=t[N.index];b.push({seg:Ap(T,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:N.levelCoord-A}),A=N.levelCoord+N.thickness}var H=[];A=0,D=0;for(var j=0,W=g;j<W.length;j++){var N=W[j],T=t[N.index],B=N.span.end-N.span.start>1,O=N.span.start===o;D+=N.levelCoord-A,A=N.levelCoord+N.thickness,B?(D+=N.thickness,O&&H.push({seg:Ap(T,N.span.start,N.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:N.levelCoord,marginTop:0})):O&&(H.push({seg:Ap(T,N.span.start,N.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:D}),D=0)}a.push(b),u.push(H),h.push(D)}return{singleColPlacements:a,multiColPlacements:u,leftoverMargins:h}}function tq(e,t){for(var n=[],r=0;r<t;r+=1)n.push([]);for(var a=0,u=e;a<u.length;a++)for(var h=u[a],r=h.span.start;r<h.span.end;r+=1)n[r].push(h);return n}function Ap(e,t,n,r){if(e.firstCol===t&&e.lastCol===n-1)return e;var a=e.eventRange,u=a.range,h=Xg(u,{start:r[t].date,end:Qo(r[n-1].date,1)});return Ti(Ti({},e),{firstCol:t,lastCol:n-1,eventRange:{def:a.def,ui:Ti(Ti({},a.ui),{durationEditable:!1}),instance:a.instance,range:h},isStart:e.isStart&&h.start.valueOf()===u.start.valueOf(),isEnd:e.isEnd&&h.end.valueOf()===u.end.valueOf()})}var nq=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.hiddenConsumes=!1,n.forceHidden={},n}return t.prototype.addSegs=function(n){for(var r=this,a=e.prototype.addSegs.call(this,n),u=this.entriesByLevel,h=function(g){return!r.forceHidden[vg(g)]},o=0;o<u.length;o+=1)u[o]=u[o].filter(h);return a},t.prototype.handleInvalidInsertion=function(n,r,a){var u=this,h=u.entriesByLevel,o=u.forceHidden,g=n.touchingEntry,b=n.touchingLevel,A=n.touchingLateral;if(this.hiddenConsumes&&g){var D=vg(g);if(!o[D])if(this.allowReslicing){var z=Ti(Ti({},g),{span:G4(g.span,r.span)}),F=vg(z);o[F]=!0,h[b][A]=z,this.splitEntry(g,r,a)}else o[D]=!0,a.push(g)}return e.prototype.handleInvalidInsertion.call(this,n,r,a)},t}(VW),cz=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.cellElRefs=new wd,n.frameElRefs=new wd,n.fgElRefs=new wd,n.segHarnessRefs=new wd,n.rootElRef=as(),n.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},n}return t.prototype.render=function(){var n=this,r=this,a=r.props,u=r.state,h=r.context,o=h.options,g=a.cells.length,b=A_(a.businessHourSegs,g),A=A_(a.bgEventSegs,g),D=A_(this.getHighlightSegs(),g),z=A_(this.getMirrorSegs(),g),F=QG(CV(a.fgEventSegs,o.eventOrder),a.dayMaxEvents,a.dayMaxEventRows,o.eventOrderStrict,u.eventInstanceHeights,u.maxContentHeight,a.cells),N=F.singleColPlacements,T=F.multiColPlacements,H=F.moreCnts,j=F.moreMarginTops,W=a.eventDrag&&a.eventDrag.affectedInstances||a.eventResize&&a.eventResize.affectedInstances||{};return kt("tr",{ref:this.rootElRef,role:"row"},a.renderIntro&&a.renderIntro(),a.cells.map(function(B,O){var S=n.renderFgSegs(O,a.forPrint?N[O]:T[O],a.todayRange,W),w=n.renderFgSegs(O,rq(z[O],T),a.todayRange,{},Boolean(a.eventDrag),Boolean(a.eventResize),!1);return kt(JG,{key:B.key,elRef:n.cellElRefs.createRef(B.key),innerElRef:n.frameElRefs.createRef(B.key),dateProfile:a.dateProfile,date:B.date,showDayNumber:a.showDayNumbers,showWeekNumber:a.showWeekNumbers&&O===0,forceDayTop:a.showWeekNumbers,todayRange:a.todayRange,eventSelection:a.eventSelection,eventDrag:a.eventDrag,eventResize:a.eventResize,extraHookProps:B.extraHookProps,extraDataAttrs:B.extraDataAttrs,extraClassNames:B.extraClassNames,extraDateSpan:B.extraDateSpan,moreCnt:H[O],moreMarginTop:j[O],singlePlacements:N[O],fgContentElRef:n.fgElRefs.createRef(B.key),fgContent:kt(da,null,kt(da,null,S),kt(da,null,w)),bgContent:kt(da,null,n.renderFillSegs(D[O],"highlight"),n.renderFillSegs(b[O],"non-business"),n.renderFillSegs(A[O],"bg-event"))})}))},t.prototype.componentDidMount=function(){this.updateSizing(!0)},t.prototype.componentDidUpdate=function(n,r){var a=this.props;this.updateSizing(!Zl(n,a))},t.prototype.getHighlightSegs=function(){var n=this.props;return n.eventDrag&&n.eventDrag.segs.length?n.eventDrag.segs:n.eventResize&&n.eventResize.segs.length?n.eventResize.segs:n.dateSelectionSegs},t.prototype.getMirrorSegs=function(){var n=this.props;return n.eventResize&&n.eventResize.segs.length?n.eventResize.segs:[]},t.prototype.renderFgSegs=function(n,r,a,u,h,o,g){var b=this.context,A=this.props.eventSelection,D=this.state.framePositions,z=this.props.cells.length===1,F=h||o||g,N=[];if(D)for(var T=0,H=r;T<H.length;T++){var j=H[T],W=j.seg,B=W.eventRange.instance.instanceId,O=B+":"+n,S=j.isVisible&&!u[B],w=j.isAbsolute,P="",Y="";w&&(b.isRtl?(Y=0,P=D.lefts[W.lastCol]-D.lefts[W.firstCol]):(P=0,Y=D.rights[W.firstCol]-D.rights[W.lastCol])),N.push(kt("div",{className:"fc-daygrid-event-harness"+(w?" fc-daygrid-event-harness-abs":""),key:O,ref:F?null:this.segHarnessRefs.createRef(O),style:{visibility:S?"":"hidden",marginTop:w?"":j.marginTop,top:w?j.absoluteTop:"",left:P,right:Y}},az(W)?kt(lz,Ti({seg:W,isDragging:h,isSelected:B===A,defaultDisplayEventEnd:z},gg(W,a))):kt(sz,Ti({seg:W,isDragging:h,isResizing:o,isDateSelecting:g,isSelected:B===A,defaultDisplayEventEnd:z},gg(W,a)))))}return N},t.prototype.renderFillSegs=function(n,r){var a=this.context.isRtl,u=this.props.todayRange,h=this.state.framePositions,o=[];if(h)for(var g=0,b=n;g<b.length;g++){var A=b[g],D=a?{right:0,left:h.lefts[A.lastCol]-h.lefts[A.firstCol]}:{left:0,right:h.rights[A.firstCol]-h.rights[A.lastCol]};o.push(kt("div",{key:IV(A.eventRange),className:"fc-daygrid-bg-harness",style:D},r==="bg-event"?kt(PG,Ti({seg:A},gg(A,u))):IG(r)))}return kt.apply(void 0,HG([da,{}],o))},t.prototype.updateSizing=function(n){var r=this,a=r.props,u=r.frameElRefs;if(!a.forPrint&&a.clientWidth!==null){if(n){var h=a.cells.map(function(D){return u.currentMap[D.key]});if(h.length){var o=this.rootElRef.current;this.setState({framePositions:new FC(o,h,!0,!1)})}}var g=this.state.eventInstanceHeights,b=this.queryEventInstanceHeights(),A=a.dayMaxEvents===!0||a.dayMaxEventRows===!0;this.safeSetState({eventInstanceHeights:Ti(Ti({},g),b),maxContentHeight:A?this.computeMaxContentHeight():null})}},t.prototype.queryEventInstanceHeights=function(){var n=this.segHarnessRefs.currentMap,r={};for(var a in n){var u=Math.round(n[a].getBoundingClientRect().height),h=a.split(":")[0];r[h]=Math.max(r[h]||0,u)}return r},t.prototype.computeMaxContentHeight=function(){var n=this.props.cells[0].key,r=this.cellElRefs.currentMap[n],a=this.fgElRefs.currentMap[n];return r.getBoundingClientRect().bottom-a.getBoundingClientRect().top},t.prototype.getCellEls=function(){var n=this.cellElRefs.currentMap;return this.props.cells.map(function(r){return n[r.key]})},t}(of);cz.addStateEquality({eventInstanceHeights:Zl});function rq(e,t){if(!e.length)return[];var n=iq(t);return e.map(function(r){return{seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}})}function iq(e){for(var t={},n=0,r=e;n<r.length;n++)for(var a=r[n],u=0,h=a;u<h.length;u++){var o=h[u];t[o.seg.eventRange.instance.instanceId]=o.absoluteTop}return t}var oq=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.splitBusinessHourSegs=Mr(T_),n.splitBgEventSegs=Mr(T_),n.splitFgEventSegs=Mr(T_),n.splitDateSelectionSegs=Mr(T_),n.splitEventDrag=Mr(BP),n.splitEventResize=Mr(BP),n.rowRefs=new wd,n.handleRootEl=function(r){n.rootEl=r,r?n.context.registerInteractiveComponent(n,{el:r,isHitComboAllowed:n.props.isHitComboAllowed}):n.context.unregisterInteractiveComponent(n)},n}return t.prototype.render=function(){var n=this,r=this.props,a=r.dateProfile,u=r.dayMaxEventRows,h=r.dayMaxEvents,o=r.expandRows,g=r.cells.length,b=this.splitBusinessHourSegs(r.businessHourSegs,g),A=this.splitBgEventSegs(r.bgEventSegs,g),D=this.splitFgEventSegs(r.fgEventSegs,g),z=this.splitDateSelectionSegs(r.dateSelectionSegs,g),F=this.splitEventDrag(r.eventDrag,g),N=this.splitEventResize(r.eventResize,g),T=h===!0||u===!0;T&&!o&&(T=!1,u=null,h=null);var H=["fc-daygrid-body",T?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",o?"":"fc-daygrid-body-natural"];return kt("div",{className:H.join(" "),ref:this.handleRootEl,style:{width:r.clientWidth,minWidth:r.tableMinWidth}},kt(K4,{unit:"day"},function(j,W){return kt(da,null,kt("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:r.clientWidth,minWidth:r.tableMinWidth,height:o?r.clientHeight:""}},r.colGroupNode,kt("tbody",{role:"presentation"},r.cells.map(function(B,O){return kt(cz,{ref:n.rowRefs.createRef(O),key:B.length?B[0].date.toISOString():O,showDayNumbers:g>1,showWeekNumbers:r.showWeekNumbers,todayRange:W,dateProfile:a,cells:B,renderIntro:r.renderRowIntro,businessHourSegs:b[O],eventSelection:r.eventSelection,bgEventSegs:A[O].filter(aq),fgEventSegs:D[O],dateSelectionSegs:z[O],eventDrag:F[O],eventResize:N[O],dayMaxEvents:h,dayMaxEventRows:u,clientWidth:r.clientWidth,clientHeight:r.clientHeight,forPrint:r.forPrint})}))))}))},t.prototype.prepareHits=function(){this.rowPositions=new FC(this.rootEl,this.rowRefs.collect().map(function(n){return n.getCellEls()[0]}),!1,!0),this.colPositions=new FC(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)},t.prototype.queryHit=function(n,r){var a=this,u=a.colPositions,h=a.rowPositions,o=u.leftToIndex(n),g=h.topToIndex(r);if(g!=null&&o!=null){var b=this.props.cells[g][o];return{dateProfile:this.props.dateProfile,dateSpan:Ti({range:this.getCellRange(g,o),allDay:!0},b.extraDateSpan),dayEl:this.getCellEl(g,o),rect:{left:u.lefts[o],right:u.rights[o],top:h.tops[g],bottom:h.bottoms[g]},layer:0}}return null},t.prototype.getCellEl=function(n,r){return this.rowRefs.currentMap[n].getCellEls()[r]},t.prototype.getCellRange=function(n,r){var a=this.props.cells[n][r].date,u=Qo(a,1);return{start:a,end:u}},t}(of);function aq(e){return e.eventRange.def.allDay}var sq=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.forceDayIfListItem=!0,n}return t.prototype.sliceRange=function(n,r){return r.sliceRange(n)},t}(sG),lq=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.slicer=new sq,n.tableRef=as(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context;return kt(oq,Ti({ref:this.tableRef},this.slicer.sliceProps(r,r.dateProfile,r.nextDayThreshold,a,r.dayTableModel),{dateProfile:r.dateProfile,cells:r.dayTableModel.cells,colGroupNode:r.colGroupNode,tableMinWidth:r.tableMinWidth,renderRowIntro:r.renderRowIntro,dayMaxEvents:r.dayMaxEvents,dayMaxEventRows:r.dayMaxEventRows,showWeekNumbers:r.showWeekNumbers,expandRows:r.expandRows,headerAlignElRef:r.headerAlignElRef,clientWidth:r.clientWidth,clientHeight:r.clientHeight,forPrint:r.forPrint}))},t}(of),cq=function(e){Fa(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.buildDayTableModel=Mr(uq),n.headerRef=as(),n.tableRef=as(),n}return t.prototype.render=function(){var n=this,r=this.context,a=r.options,u=r.dateProfileGenerator,h=this.props,o=this.buildDayTableModel(h.dateProfile,u),g=a.dayHeaders&&kt(rG,{ref:this.headerRef,dateProfile:h.dateProfile,dates:o.headerDates,datesRepDistinctDays:o.rowCnt===1}),b=function(A){return kt(lq,{ref:n.tableRef,dateProfile:h.dateProfile,dayTableModel:o,businessHours:h.businessHours,dateSelection:h.dateSelection,eventStore:h.eventStore,eventUiBases:h.eventUiBases,eventSelection:h.eventSelection,eventDrag:h.eventDrag,eventResize:h.eventResize,nextDayThreshold:a.nextDayThreshold,colGroupNode:A.tableColGroupNode,tableMinWidth:A.tableMinWidth,dayMaxEvents:a.dayMaxEvents,dayMaxEventRows:a.dayMaxEventRows,showWeekNumbers:a.weekNumbers,expandRows:!h.isHeightAuto,headerAlignElRef:n.headerElRef,clientWidth:A.clientWidth,clientHeight:A.clientHeight,forPrint:h.forPrint})};return a.dayMinWidth?this.renderHScrollLayout(g,b,o.colCnt,a.dayMinWidth):this.renderSimpleLayout(g,b)},t}(WG);function uq(e,t){var n=new oG(e.renderRange,t);return new aG(n,/year|month|week/.test(e.currentRangeUnit))}var dq=function(e){Fa(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.buildRenderRange=function(n,r,a){var u=this.props.dateEnv,h=e.prototype.buildRenderRange.call(this,n,r,a),o=h.start,g=h.end,b;if(/^(year|month)$/.test(r)&&(o=u.startOfWeek(o),b=u.startOfWeek(g),b.valueOf()!==g.valueOf()&&(g=cP(b,1))),this.props.monthMode&&this.props.fixedWeekCount){var A=Math.ceil(T8(o,g));g=cP(g,6-A)}return{start:o,end:g}},t}(B4),hq=pu({initialView:"dayGridMonth",views:{dayGrid:{component:cq,dateProfileGeneratorClass:dq},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}}),VC=function(e,t){return VC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},VC(e,t)};function ec(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");VC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var eo=function(){return eo=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(t[u]=n[u])}return t},eo.apply(this,arguments)};/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/qk.touchMouseIgnoreWait=500;var HC=0,Yx=0,WC=!1,Xk=function(){function e(t){var n=this;this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(r){if(!n.shouldIgnoreMouse()&&pq(r)&&n.tryStart(r)){var a=n.createEventFromMouse(r,!0);n.emitter.trigger("pointerdown",a),n.initScrollWatch(a),n.shouldIgnoreMove||document.addEventListener("mousemove",n.handleMouseMove),document.addEventListener("mouseup",n.handleMouseUp)}},this.handleMouseMove=function(r){var a=n.createEventFromMouse(r);n.recordCoords(a),n.emitter.trigger("pointermove",a)},this.handleMouseUp=function(r){document.removeEventListener("mousemove",n.handleMouseMove),document.removeEventListener("mouseup",n.handleMouseUp),n.emitter.trigger("pointerup",n.createEventFromMouse(r)),n.cleanup()},this.handleTouchStart=function(r){if(n.tryStart(r)){n.isTouchDragging=!0;var a=n.createEventFromTouch(r,!0);n.emitter.trigger("pointerdown",a),n.initScrollWatch(a);var u=r.target;n.shouldIgnoreMove||u.addEventListener("touchmove",n.handleTouchMove),u.addEventListener("touchend",n.handleTouchEnd),u.addEventListener("touchcancel",n.handleTouchEnd),window.addEventListener("scroll",n.handleTouchScroll,!0)}},this.handleTouchMove=function(r){var a=n.createEventFromTouch(r);n.recordCoords(a),n.emitter.trigger("pointermove",a)},this.handleTouchEnd=function(r){if(n.isDragging){var a=r.target;a.removeEventListener("touchmove",n.handleTouchMove),a.removeEventListener("touchend",n.handleTouchEnd),a.removeEventListener("touchcancel",n.handleTouchEnd),window.removeEventListener("scroll",n.handleTouchScroll,!0),n.emitter.trigger("pointerup",n.createEventFromTouch(r)),n.cleanup(),n.isTouchDragging=!1,fq()}},this.handleTouchScroll=function(){n.wasTouchScroll=!0},this.handleScroll=function(r){if(!n.shouldIgnoreMove){var a=window.pageXOffset-n.prevScrollX+n.prevPageX,u=window.pageYOffset-n.prevScrollY+n.prevPageY;n.emitter.trigger("pointermove",{origEvent:r,isTouch:n.isTouchDragging,subjectEl:n.subjectEl,pageX:a,pageY:u,deltaX:a-n.origPageX,deltaY:u-n.origPageY})}},this.containerEl=t,this.emitter=new F0,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),mq()}return e.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),gq()},e.prototype.tryStart=function(t){var n=this.querySubjectEl(t),r=t.target;return n&&(!this.handleSelector||Vo(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1},e.prototype.cleanup=function(){WC=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()},e.prototype.querySubjectEl=function(t){return this.selector?Vo(t.target,this.selector):this.containerEl},e.prototype.shouldIgnoreMouse=function(){return HC||this.isTouchDragging},e.prototype.cancelTouchScroll=function(){this.isDragging&&(WC=!0)},e.prototype.initScrollWatch=function(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))},e.prototype.recordCoords=function(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},e.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},e.prototype.createEventFromMouse=function(t,n){var r=0,a=0;return n?(this.origPageX=t.pageX,this.origPageY=t.pageY):(r=t.pageX-this.origPageX,a=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:r,deltaY:a}},e.prototype.createEventFromTouch=function(t,n){var r=t.touches,a,u,h=0,o=0;return r&&r.length?(a=r[0].pageX,u=r[0].pageY):(a=t.pageX,u=t.pageY),n?(this.origPageX=a,this.origPageY=u):(h=a-this.origPageX,o=u-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:u,deltaX:h,deltaY:o}},e}();function pq(e){return e.button===0&&!e.ctrlKey}function fq(){HC+=1,setTimeout(function(){HC-=1},qk.touchMouseIgnoreWait)}function mq(){Yx+=1,Yx===1&&window.addEventListener("touchmove",uz,{passive:!1})}function gq(){Yx-=1,Yx||window.removeEventListener("touchmove",uz,{passive:!1})}function uz(e){WC&&e.preventDefault()}var vq=function(){function e(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return e.prototype.start=function(t,n,r){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.pageXOffset,this.origScreenY=r-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},e.prototype.handleMove=function(t,n){this.deltaX=t-window.pageXOffset-this.origScreenX,this.deltaY=n-window.pageYOffset-this.origScreenY,this.updateElPosition()},e.prototype.setIsVisible=function(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)},e.prototype.stop=function(t,n){var r=this,a=function(){r.cleanup(),n()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(a,this.revertDuration):setTimeout(a,0)},e.prototype.doRevertAnimation=function(t,n){var r=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",pg(r,{left:a.left,top:a.top}),m8(r,function(){r.style.transition="",t()})},e.prototype.cleanup=function(){this.mirrorEl&&(kk(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},e.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&pg(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},e.prototype.getMirrorEl=function(){var t=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.classList.add("fc-unselectable"),n.classList.add("fc-event-dragging"),pg(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n},e}(),dz=function(e){ec(t,e);function t(n,r){var a=e.call(this)||this;return a.handleScroll=function(){a.scrollTop=a.scrollController.getScrollTop(),a.scrollLeft=a.scrollController.getScrollLeft(),a.handleScrollChange()},a.scrollController=n,a.doesListening=r,a.scrollTop=a.origScrollTop=n.getScrollTop(),a.scrollLeft=a.origScrollLeft=n.getScrollLeft(),a.scrollWidth=n.getScrollWidth(),a.scrollHeight=n.getScrollHeight(),a.clientWidth=n.getClientWidth(),a.clientHeight=n.getClientHeight(),a.clientRect=a.computeClientRect(),a.doesListening&&a.getEventTarget().addEventListener("scroll",a.handleScroll),a}return t.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},t.prototype.getScrollTop=function(){return this.scrollTop},t.prototype.getScrollLeft=function(){return this.scrollLeft},t.prototype.setScrollTop=function(n){this.scrollController.setScrollTop(n),this.doesListening||(this.scrollTop=Math.max(Math.min(n,this.getMaxScrollTop()),0),this.handleScrollChange())},t.prototype.setScrollLeft=function(n){this.scrollController.setScrollLeft(n),this.doesListening||(this.scrollLeft=Math.max(Math.min(n,this.getMaxScrollLeft()),0),this.handleScrollChange())},t.prototype.getClientWidth=function(){return this.clientWidth},t.prototype.getClientHeight=function(){return this.clientHeight},t.prototype.getScrollWidth=function(){return this.scrollWidth},t.prototype.getScrollHeight=function(){return this.scrollHeight},t.prototype.handleScrollChange=function(){},t}(Vk),hz=function(e){ec(t,e);function t(n,r){return e.call(this,new EH(n),r)||this}return t.prototype.getEventTarget=function(){return this.scrollController.el},t.prototype.computeClientRect=function(){return yH(this.scrollController.el)},t}(dz),yq=function(e){ec(t,e);function t(n){return e.call(this,new CH,n)||this}return t.prototype.getEventTarget=function(){return window},t.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},t.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},t}(dz),FP=typeof performance=="function"?performance.now:Date.now,_q=function(){function e(){var t=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(t.isAnimating){var n=t.computeBestEdge(t.pointerScreenX+window.pageXOffset,t.pointerScreenY+window.pageYOffset);if(n){var r=FP();t.handleSide(n,(r-t.msSinceRequest)/1e3),t.requestAnimation(r)}else t.isAnimating=!1}}}return e.prototype.start=function(t,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,n))},e.prototype.handleMove=function(t,n){if(this.isEnabled){var r=t-window.pageXOffset,a=n-window.pageYOffset,u=this.pointerScreenY===null?0:a-this.pointerScreenY,h=this.pointerScreenX===null?0:r-this.pointerScreenX;u<0?this.everMovedUp=!0:u>0&&(this.everMovedDown=!0),h<0?this.everMovedLeft=!0:h>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(FP()))}},e.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];r.destroy()}this.scrollCaches=null}},e.prototype.requestAnimation=function(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)},e.prototype.handleSide=function(t,n){var r=t.scrollCache,a=this.edgeThreshold,u=a-t.distance,h=u*u/(a*a)*this.maxVelocity*n,o=1;switch(t.name){case"left":o=-1;case"right":r.setScrollLeft(r.getScrollLeft()+h*o);break;case"top":o=-1;case"bottom":r.setScrollTop(r.getScrollTop()+h*o);break}},e.prototype.computeBestEdge=function(t,n){for(var r=this.edgeThreshold,a=null,u=this.scrollCaches||[],h=0,o=u;h<o.length;h++){var g=o[h],b=g.clientRect,A=t-b.left,D=b.right-t,z=n-b.top,F=b.bottom-n;A>=0&&D>=0&&z>=0&&F>=0&&(z<=r&&this.everMovedUp&&g.canScrollUp()&&(!a||a.distance>z)&&(a={scrollCache:g,name:"top",distance:z}),F<=r&&this.everMovedDown&&g.canScrollDown()&&(!a||a.distance>F)&&(a={scrollCache:g,name:"bottom",distance:F}),A<=r&&this.everMovedLeft&&g.canScrollLeft()&&(!a||a.distance>A)&&(a={scrollCache:g,name:"left",distance:A}),D<=r&&this.everMovedRight&&g.canScrollRight()&&(!a||a.distance>D)&&(a={scrollCache:g,name:"right",distance:D}))}return a},e.prototype.buildCaches=function(t){return this.queryScrollEls(t).map(function(n){return n===window?new yq(!1):new hz(n,!1)})},e.prototype.queryScrollEls=function(t){for(var n=[],r=0,a=this.scrollQuery;r<a.length;r++){var u=a[r];typeof u=="object"?n.push(u):n.push.apply(n,Array.prototype.slice.call(r4(t).querySelectorAll(u)))}return n},e}(),gv=function(e){ec(t,e);function t(n,r){var a=e.call(this,n)||this;a.containerEl=n,a.delay=null,a.minDistance=0,a.touchScrollAllowed=!0,a.mirrorNeedsRevert=!1,a.isInteracting=!1,a.isDragging=!1,a.isDelayEnded=!1,a.isDistanceSurpassed=!1,a.delayTimeoutId=null,a.onPointerDown=function(h){a.isDragging||(a.isInteracting=!0,a.isDelayEnded=!1,a.isDistanceSurpassed=!1,g8(document.body),y8(document.body),h.isTouch||h.origEvent.preventDefault(),a.emitter.trigger("pointerdown",h),a.isInteracting&&!a.pointer.shouldIgnoreMove&&(a.mirror.setIsVisible(!1),a.mirror.start(h.subjectEl,h.pageX,h.pageY),a.startDelay(h),a.minDistance||a.handleDistanceSurpassed(h)))},a.onPointerMove=function(h){if(a.isInteracting){if(a.emitter.trigger("pointermove",h),!a.isDistanceSurpassed){var o=a.minDistance,g=void 0,b=h.deltaX,A=h.deltaY;g=b*b+A*A,g>=o*o&&a.handleDistanceSurpassed(h)}a.isDragging&&(h.origEvent.type!=="scroll"&&(a.mirror.handleMove(h.pageX,h.pageY),a.autoScroller.handleMove(h.pageX,h.pageY)),a.emitter.trigger("dragmove",h))}},a.onPointerUp=function(h){a.isInteracting&&(a.isInteracting=!1,v8(document.body),_8(document.body),a.emitter.trigger("pointerup",h),a.isDragging&&(a.autoScroller.stop(),a.tryStopDrag(h)),a.delayTimeoutId&&(clearTimeout(a.delayTimeoutId),a.delayTimeoutId=null))};var u=a.pointer=new Xk(n);return u.emitter.on("pointerdown",a.onPointerDown),u.emitter.on("pointermove",a.onPointerMove),u.emitter.on("pointerup",a.onPointerUp),r&&(u.selector=r),a.mirror=new vq,a.autoScroller=new _q,a}return t.prototype.destroy=function(){this.pointer.destroy(),this.onPointerUp({})},t.prototype.startDelay=function(n){var r=this;typeof this.delay=="number"?this.delayTimeoutId=setTimeout(function(){r.delayTimeoutId=null,r.handleDelayEnd(n)},this.delay):this.handleDelayEnd(n)},t.prototype.handleDelayEnd=function(n){this.isDelayEnded=!0,this.tryStartDrag(n)},t.prototype.handleDistanceSurpassed=function(n){this.isDistanceSurpassed=!0,this.tryStartDrag(n)},t.prototype.tryStartDrag=function(n){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(n.pageX,n.pageY,this.containerEl),this.emitter.trigger("dragstart",n),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())},t.prototype.tryStopDrag=function(n){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,n))},t.prototype.stopDrag=function(n){this.isDragging=!1,this.emitter.trigger("dragend",n)},t.prototype.setIgnoreMove=function(n){this.pointer.shouldIgnoreMove=n},t.prototype.setMirrorIsVisible=function(n){this.mirror.setIsVisible(n)},t.prototype.setMirrorNeedsRevert=function(n){this.mirrorNeedsRevert=n},t.prototype.setAutoScrollEnabled=function(n){this.autoScroller.isEnabled=n},t}(q4),xq=function(){function e(t){this.origRect=$k(t),this.scrollCaches=R4(t).map(function(n){return new hz(n,!0)})}return e.prototype.destroy=function(){for(var t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];r.destroy()}},e.prototype.computeLeft=function(){for(var t=this.origRect.left,n=0,r=this.scrollCaches;n<r.length;n++){var a=r[n];t+=a.origScrollLeft-a.getScrollLeft()}return t},e.prototype.computeTop=function(){for(var t=this.origRect.top,n=0,r=this.scrollCaches;n<r.length;n++){var a=r[n];t+=a.origScrollTop-a.getScrollTop()}return t},e.prototype.isWithinClipping=function(t,n){for(var r={left:t,top:n},a=0,u=this.scrollCaches;a<u.length;a++){var h=u[a];if(!bq(h.getEventTarget())&&!aH(r,h.clientRect))return!1}return!0},e}();function bq(e){var t=e.tagName;return t==="HTML"||t==="BODY"}var U0=function(){function e(t,n){var r=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(a){var u=r.dragging;r.initialHit=null,r.movingHit=null,r.finalHit=null,r.prepareHits(),r.processFirstCoord(a),r.initialHit||!r.requireInitial?(u.setIgnoreMove(!1),r.emitter.trigger("pointerdown",a)):u.setIgnoreMove(!0)},this.handleDragStart=function(a){r.emitter.trigger("dragstart",a),r.handleMove(a,!0)},this.handleDragMove=function(a){r.emitter.trigger("dragmove",a),r.handleMove(a)},this.handlePointerUp=function(a){r.releaseHits(),r.emitter.trigger("pointerup",a)},this.handleDragEnd=function(a){r.movingHit&&r.emitter.trigger("hitupdate",null,!0,a),r.finalHit=r.movingHit,r.movingHit=null,r.emitter.trigger("dragend",a)},this.droppableStore=n,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new F0}return e.prototype.processFirstCoord=function(t){var n={left:t.pageX,top:t.pageY},r=n,a=t.subjectEl,u;a instanceof HTMLElement&&(u=$k(a),r=sH(r,u));var h=this.initialHit=this.queryHitForOffset(r.left,r.top);if(h){if(this.useSubjectCenter&&u){var o=M4(u,h.rect);o&&(r=lH(o))}this.coordAdjust=cH(r,n)}else this.coordAdjust={left:0,top:0}},e.prototype.handleMove=function(t,n){var r=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);(n||!j0(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,t))},e.prototype.prepareHits=function(){this.offsetTrackers=Vd(this.droppableStore,function(t){return t.component.prepareHits(),new xq(t.el)})},e.prototype.releaseHits=function(){var t=this.offsetTrackers;for(var n in t)t[n].destroy();this.offsetTrackers={}},e.prototype.queryHitForOffset=function(t,n){var r=this,a=r.droppableStore,u=r.offsetTrackers,h=null;for(var o in a){var g=a[o].component,b=u[o];if(b&&b.isWithinClipping(t,n)){var A=b.computeLeft(),D=b.computeTop(),z=t-A,F=n-D,N=b.origRect,T=N.right-N.left,H=N.bottom-N.top;if(z>=0&&z<T&&F>=0&&F<H){var j=g.queryHit(z,F,T,H);j&&B0(j.dateProfile.activeRange,j.dateSpan.range)&&(!h||j.layer>h.layer)&&(j.componentId=o,j.context=g.context,j.rect.left+=A,j.rect.right+=A,j.rect.top+=D,j.rect.bottom+=D,h=j)}}}return h},e}();function j0(e,t){return!e&&!t?!0:Boolean(e)!==Boolean(t)?!1:LV(e.dateSpan,t.dateSpan)}function pz(e,t){for(var n={},r=0,a=t.pluginHooks.datePointTransforms;r<a.length;r++){var u=a[r];eo(n,u(e,t))}return eo(n,wq(e,t.dateEnv)),n}function wq(e,t){return{date:t.toDate(e.range.start),dateStr:t.formatIso(e.range.start,{omitTime:e.allDay}),allDay:e.allDay}}var Eq=function(e){ec(t,e);function t(n){var r=e.call(this,n)||this;r.handlePointerDown=function(u){var h=r.dragging,o=u.origEvent.target;h.setIgnoreMove(!r.component.isValidDateDownEl(o))},r.handleDragEnd=function(u){var h=r.component,o=r.dragging.pointer;if(!o.wasTouchScroll){var g=r.hitDragging,b=g.initialHit,A=g.finalHit;if(b&&A&&j0(b,A)){var D=h.context,z=eo(eo({},pz(b.dateSpan,D)),{dayEl:b.dayEl,jsEvent:u.origEvent,view:D.viewApi||D.calendarApi.view});D.emitter.trigger("dateClick",z)}}},r.dragging=new gv(n.el),r.dragging.autoScroller.isEnabled=!1;var a=r.hitDragging=new U0(r.dragging,Gk(n));return a.emitter.on("pointerdown",r.handlePointerDown),a.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t}(sf),Cq=function(e){ec(t,e);function t(n){var r=e.call(this,n)||this;r.dragSelection=null,r.handlePointerDown=function(g){var b=r,A=b.component,D=b.dragging,z=A.context.options,F=z.selectable&&A.isValidDateDownEl(g.origEvent.target);D.setIgnoreMove(!F),D.delay=g.isTouch?Sq(A):null},r.handleDragStart=function(g){r.component.context.calendarApi.unselect(g)},r.handleHitUpdate=function(g,b){var A=r.component.context,D=null,z=!1;if(g){var F=r.hitDragging.initialHit,N=g.componentId===F.componentId&&r.isHitComboAllowed&&!r.isHitComboAllowed(F,g);N||(D=kq(F,g,A.pluginHooks.dateSelectionTransformers)),(!D||!lG(D,g.dateProfile,A))&&(z=!0,D=null)}D?A.dispatch({type:"SELECT_DATES",selection:D}):b||A.dispatch({type:"UNSELECT_DATES"}),z?Tk():Ak(),b||(r.dragSelection=D)},r.handlePointerUp=function(g){r.dragSelection&&(x4(r.dragSelection,g,r.component.context),r.dragSelection=null)};var a=n.component,u=a.context.options,h=r.dragging=new gv(n.el);h.touchScrollAllowed=!1,h.minDistance=u.selectMinDistance||0,h.autoScroller.isEnabled=u.dragScroll;var o=r.hitDragging=new U0(r.dragging,Gk(n));return o.emitter.on("pointerdown",r.handlePointerDown),o.emitter.on("dragstart",r.handleDragStart),o.emitter.on("hitupdate",r.handleHitUpdate),o.emitter.on("pointerup",r.handlePointerUp),r}return t.prototype.destroy=function(){this.dragging.destroy()},t}(sf);function Sq(e){var t=e.context.options,n=t.selectLongPressDelay;return n==null&&(n=t.longPressDelay),n}function kq(e,t,n){var r=e.dateSpan,a=t.dateSpan,u=[r.range.start,r.range.end,a.range.start,a.range.end];u.sort(C8);for(var h={},o=0,g=n;o<g.length;o++){var b=g[o],A=b(e,t);if(A===!1)return null;A&&eo(h,A)}return h.range={start:u[0],end:u[3]},h.allDay=r.allDay,h}var fz=function(e){ec(t,e);function t(n){var r=e.call(this,n)||this;r.subjectEl=null,r.subjectSeg=null,r.isDragging=!1,r.eventRange=null,r.relevantEvents=null,r.receivingContext=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(g){var b=g.origEvent.target,A=r,D=A.component,z=A.dragging,F=z.mirror,N=D.context.options,T=D.context;r.subjectEl=g.subjectEl;var H=r.subjectSeg=Vp(g.subjectEl),j=r.eventRange=H.eventRange,W=j.instance.instanceId;r.relevantEvents=Lk(T.getCurrentData().eventStore,W),z.minDistance=g.isTouch?0:N.eventDragMinDistance,z.delay=g.isTouch&&W!==D.props.eventSelection?Aq(D):null,N.fixedMirrorParent?F.parentNode=N.fixedMirrorParent:F.parentNode=Vo(b,".fc"),F.revertDuration=N.dragRevertDuration;var B=D.isValidSegDownEl(b)&&!Vo(b,".fc-event-resizer");z.setIgnoreMove(!B),r.isDragging=B&&g.subjectEl.classList.contains("fc-event-draggable")},r.handleDragStart=function(g){var b=r.component.context,A=r.eventRange,D=A.instance.instanceId;g.isTouch?D!==r.component.props.eventSelection&&b.dispatch({type:"SELECT_EVENT",eventInstanceId:D}):b.dispatch({type:"UNSELECT_EVENT"}),r.isDragging&&(b.calendarApi.unselect(g),b.emitter.trigger("eventDragStart",{el:r.subjectEl,event:new zi(b,A.def,A.instance),jsEvent:g.origEvent,view:b.viewApi}))},r.handleHitUpdate=function(g,b){if(!!r.isDragging){var A=r.relevantEvents,D=r.hitDragging.initialHit,z=r.component.context,F=null,N=null,T=null,H=!1,j={affectedEvents:A,mutatedEvents:Rs(),isEvent:!0};if(g){F=g.context;var W=F.options;z===F||W.editable&&W.droppable?(N=Tq(D,g,F.getCurrentData().pluginHooks.eventDragMutationMassagers),N&&(T=Nk(A,F.getCurrentData().eventUiBases,N,F),j.mutatedEvents=T,Y4(j,g.dateProfile,F)||(H=!0,N=null,T=null,j.mutatedEvents=Rs()))):F=null}r.displayDrag(F,j),H?Tk():Ak(),b||(z===F&&j0(D,g)&&(N=null),r.dragging.setMirrorNeedsRevert(!N),r.dragging.setMirrorIsVisible(!g||!r4(r.subjectEl).querySelector(".fc-event-mirror")),r.receivingContext=F,r.validMutation=N,r.mutatedRelevantEvents=T)}},r.handlePointerUp=function(){r.isDragging||r.cleanup()},r.handleDragEnd=function(g){if(r.isDragging){var b=r.component.context,A=b.viewApi,D=r,z=D.receivingContext,F=D.validMutation,N=r.eventRange.def,T=r.eventRange.instance,H=new zi(b,N,T),j=r.relevantEvents,W=r.mutatedRelevantEvents,B=r.hitDragging.finalHit;if(r.clearDrag(),b.emitter.trigger("eventDragStop",{el:r.subjectEl,event:H,jsEvent:g.origEvent,view:A}),F){if(z===b){var O=new zi(b,W.defs[N.defId],T?W.instances[T.instanceId]:null);b.dispatch({type:"MERGE_EVENTS",eventStore:W});for(var S={oldEvent:H,event:O,relatedEvents:Td(W,b,T),revert:function(){b.dispatch({type:"MERGE_EVENTS",eventStore:j})}},w={},P=0,Y=b.getCurrentData().pluginHooks.eventDropTransformers;P<Y.length;P++){var ne=Y[P];eo(w,ne(F,b))}b.emitter.trigger("eventDrop",eo(eo(eo({},S),w),{el:g.subjectEl,delta:F.datesDelta,jsEvent:g.origEvent,view:A})),b.emitter.trigger("eventChange",S)}else if(z){var ae={event:H,relatedEvents:Td(j,b,T),revert:function(){b.dispatch({type:"MERGE_EVENTS",eventStore:j})}};b.emitter.trigger("eventLeave",eo(eo({},ae),{draggedEl:g.subjectEl,view:A})),b.dispatch({type:"REMOVE_EVENTS",eventStore:j}),b.emitter.trigger("eventRemove",ae);var oe=W.defs[N.defId],fe=W.instances[T.instanceId],Re=new zi(z,oe,fe);z.dispatch({type:"MERGE_EVENTS",eventStore:W});var Be={event:Re,relatedEvents:Td(W,z,fe),revert:function(){z.dispatch({type:"REMOVE_EVENTS",eventStore:W})}};z.emitter.trigger("eventAdd",Be),g.isTouch&&z.dispatch({type:"SELECT_EVENT",eventInstanceId:T.instanceId}),z.emitter.trigger("drop",eo(eo({},pz(B.dateSpan,z)),{draggedEl:g.subjectEl,jsEvent:g.origEvent,view:B.context.viewApi})),z.emitter.trigger("eventReceive",eo(eo({},Be),{draggedEl:g.subjectEl,view:B.context.viewApi}))}}else b.emitter.trigger("_noEventDrop")}r.cleanup()};var a=r.component,u=a.context.options,h=r.dragging=new gv(n.el);h.pointer.selector=t.SELECTOR,h.touchScrollAllowed=!1,h.autoScroller.isEnabled=u.dragScroll;var o=r.hitDragging=new U0(r.dragging,jC);return o.useSubjectCenter=n.useEventCenter,o.emitter.on("pointerdown",r.handlePointerDown),o.emitter.on("dragstart",r.handleDragStart),o.emitter.on("hitupdate",r.handleHitUpdate),o.emitter.on("pointerup",r.handlePointerUp),o.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t.prototype.displayDrag=function(n,r){var a=this.component.context,u=this.receivingContext;u&&u!==n&&(u===a?u.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:Rs(),isEvent:!0}}):u.dispatch({type:"UNSET_EVENT_DRAG"})),n&&n.dispatch({type:"SET_EVENT_DRAG",state:r})},t.prototype.clearDrag=function(){var n=this.component.context,r=this.receivingContext;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),n!==r&&n.dispatch({type:"UNSET_EVENT_DRAG"})},t.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null},t.SELECTOR=".fc-event-draggable, .fc-event-resizable",t}(sf);function Tq(e,t,n){var r=e.dateSpan,a=t.dateSpan,u=r.range.start,h=a.range.start,o={};r.allDay!==a.allDay&&(o.allDay=a.allDay,o.hasEnd=t.context.options.allDayMaintainDuration,a.allDay&&(u=_i(u)));var g=_p(u,h,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);g.milliseconds&&(o.allDay=!1);for(var b={datesDelta:g,standardProps:o},A=0,D=n;A<D.length;A++){var z=D[A];z(b,e,t)}return b}function Aq(e){var t=e.context.options,n=t.eventLongPressDelay;return n==null&&(n=t.longPressDelay),n}var Mq=function(e){ec(t,e);function t(n){var r=e.call(this,n)||this;r.draggingSegEl=null,r.draggingSeg=null,r.eventRange=null,r.relevantEvents=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(o){var g=r.component,b=r.querySegEl(o),A=Vp(b),D=r.eventRange=A.eventRange;r.dragging.minDistance=g.context.options.eventDragMinDistance,r.dragging.setIgnoreMove(!r.component.isValidSegDownEl(o.origEvent.target)||o.isTouch&&r.component.props.eventSelection!==D.instance.instanceId)},r.handleDragStart=function(o){var g=r.component.context,b=r.eventRange;r.relevantEvents=Lk(g.getCurrentData().eventStore,r.eventRange.instance.instanceId);var A=r.querySegEl(o);r.draggingSegEl=A,r.draggingSeg=Vp(A),g.calendarApi.unselect(),g.emitter.trigger("eventResizeStart",{el:A,event:new zi(g,b.def,b.instance),jsEvent:o.origEvent,view:g.viewApi})},r.handleHitUpdate=function(o,g,b){var A=r.component.context,D=r.relevantEvents,z=r.hitDragging.initialHit,F=r.eventRange.instance,N=null,T=null,H=!1,j={affectedEvents:D,mutatedEvents:Rs(),isEvent:!0};if(o){var W=o.componentId===z.componentId&&r.isHitComboAllowed&&!r.isHitComboAllowed(z,o);W||(N=Iq(z,o,b.subjectEl.classList.contains("fc-event-resizer-start"),F.range))}N&&(T=Nk(D,A.getCurrentData().eventUiBases,N,A),j.mutatedEvents=T,Y4(j,o.dateProfile,A)||(H=!0,N=null,T=null,j.mutatedEvents=null)),T?A.dispatch({type:"SET_EVENT_RESIZE",state:j}):A.dispatch({type:"UNSET_EVENT_RESIZE"}),H?Tk():Ak(),g||(N&&j0(z,o)&&(N=null),r.validMutation=N,r.mutatedRelevantEvents=T)},r.handleDragEnd=function(o){var g=r.component.context,b=r.eventRange.def,A=r.eventRange.instance,D=new zi(g,b,A),z=r.relevantEvents,F=r.mutatedRelevantEvents;if(g.emitter.trigger("eventResizeStop",{el:r.draggingSegEl,event:D,jsEvent:o.origEvent,view:g.viewApi}),r.validMutation){var N=new zi(g,F.defs[b.defId],A?F.instances[A.instanceId]:null);g.dispatch({type:"MERGE_EVENTS",eventStore:F});var T={oldEvent:D,event:N,relatedEvents:Td(F,g,A),revert:function(){g.dispatch({type:"MERGE_EVENTS",eventStore:z})}};g.emitter.trigger("eventResize",eo(eo({},T),{el:r.draggingSegEl,startDelta:r.validMutation.startDelta||Fr(0),endDelta:r.validMutation.endDelta||Fr(0),jsEvent:o.origEvent,view:g.viewApi})),g.emitter.trigger("eventChange",T)}else g.emitter.trigger("_noEventResize");r.draggingSeg=null,r.relevantEvents=null,r.validMutation=null};var a=n.component,u=r.dragging=new gv(n.el);u.pointer.selector=".fc-event-resizer",u.touchScrollAllowed=!1,u.autoScroller.isEnabled=a.context.options.dragScroll;var h=r.hitDragging=new U0(r.dragging,Gk(n));return h.emitter.on("pointerdown",r.handlePointerDown),h.emitter.on("dragstart",r.handleDragStart),h.emitter.on("hitupdate",r.handleHitUpdate),h.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t.prototype.querySegEl=function(n){return Vo(n.subjectEl,".fc-event")},t}(sf);function Iq(e,t,n,r){var a=e.context.dateEnv,u=e.dateSpan.range.start,h=t.dateSpan.range.start,o=_p(u,h,a,e.largeUnit);if(n){if(a.add(r.start,o)<r.end)return{startDelta:o}}else if(a.add(r.end,o)>r.start)return{endDelta:o};return null}var Pq=function(){function e(t){var n=this;this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=function(a){a.jsEvent&&(n.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=function(a){var u=n.context.options.unselectCancel,h=n4(a.origEvent);n.matchesCancel=!!Vo(h,u),n.matchesEvent=!!Vo(h,fz.SELECTOR)},this.onDocumentPointerUp=function(a){var u=n.context,h=n.documentPointer,o=u.getCurrentData();if(!h.wasTouchScroll){if(o.dateSelection&&!n.isRecentPointerDateSelect){var g=u.options.unselectAuto;g&&(!g||!n.matchesCancel)&&u.calendarApi.unselect(a)}o.eventSelection&&!n.matchesEvent&&u.dispatch({type:"UNSELECT_EVENT"})}n.isRecentPointerDateSelect=!1};var r=this.documentPointer=new Xk(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerdown",this.onDocumentPointerDown),r.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}return e.prototype.destroy=function(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()},e}(),Dq={fixedMirrorParent:St},Rq={dateClick:St,eventDragStart:St,eventDragStop:St,eventDrop:St,eventResizeStart:St,eventResizeStop:St,eventResize:St,drop:St,eventReceive:St,eventLeave:St};qk.dataAttrPrefix="";(function(e){ec(t,e);function t(n){var r=e.call(this,n)||this;r.shouldIgnoreMove=!1,r.mirrorSelector="",r.currentMirrorEl=null,r.handlePointerDown=function(u){r.emitter.trigger("pointerdown",u),r.shouldIgnoreMove||r.emitter.trigger("dragstart",u)},r.handlePointerMove=function(u){r.shouldIgnoreMove||r.emitter.trigger("dragmove",u)},r.handlePointerUp=function(u){r.emitter.trigger("pointerup",u),r.shouldIgnoreMove||r.emitter.trigger("dragend",u)};var a=r.pointer=new Xk(n);return a.emitter.on("pointerdown",r.handlePointerDown),a.emitter.on("pointermove",r.handlePointerMove),a.emitter.on("pointerup",r.handlePointerUp),r}return t.prototype.destroy=function(){this.pointer.destroy()},t.prototype.setIgnoreMove=function(n){this.shouldIgnoreMove=n},t.prototype.setMirrorIsVisible=function(n){if(n)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var r=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;r&&(this.currentMirrorEl=r,r.style.visibility="hidden")}},t})(q4);var Lq=pu({componentInteractions:[Eq,Cq,fz,Mq],calendarInteractions:[Pq],elementDraggingImpl:gv,optionRefiners:Dq,listenerRefiners:Rq});const Oq=()=>{const[e,t]=m.exports.useState([]),[n,r]=m.exports.useState([]),[a,u]=m.exports.useState(""),[h,o]=m.exports.useState(void 0),[g,b]=m.exports.useState([]),A=ot.useContext(Xr),D=T=>T.split("T")[0];ot.useEffect(()=>{function T(H){return Object.assign(Object.assign({},H),{organization:A.allOrgs.find(j=>j.id===H.organization),tags:H.tags.map(j=>A.allTags.find(W=>W.id===j)).filter(j=>!!j)})}r(e.map(T))},[A,e]);const z=(T,H,j)=>{let W=JSON.stringify(T);if(a!==W){const B=`${mr.BASEURL}/api/v3/obj/event?start=${D(T.startStr)}&end=${D(T.endStr)}`;console.log(B),A.getAPI(B,!1).then(O=>{O.status!==200?j(new Error("Returned status "+O.status)):(u(W),t(O.data.results),H(n))})}else H(n)},F=T=>{if(o(T),T===void 0)b([]);else{let H=T,j=[],W=new Date(H.getTime()+24*60*60*1e3);for(let B of n){let O=new Date(B.start_date),S=new Date(B.end_date);O<W&&S>=H&&j.push(B)}b(j)}};let N="";return h!==void 0&&(N=h.toLocaleDateString(void 0,{day:"numeric",year:"numeric",weekday:"long",month:"long"})),ot.createElement(ot.Fragment,null,ot.createElement("link",{rel:"stylesheet",href:"static/css/fullcalendar.min.css",type:"text/css"}),ot.createElement("link",{rel:"stylesheet",href:"static/css/calendar/view.css",type:"text/css"}),ot.createElement("div",{className:"container"},ot.createElement(zq,{updateEvents:z,selectedDate:h,setSelectedDate:F}),ot.createElement("div",{id:"details"},ot.createElement("div",{className:"container"},ot.createElement("a",{href:"url_to_calendar"},"URL to iCalendar (use this to add to Google Calendar, not yet implemented sry :/)"),ot.createElement("h3",{id:"detailsCurrentDay"},N),ot.createElement("p",{id:"detailsCurrentWeek"}),ot.createElement("hr",null),ot.createElement("p",{className:"no-event-inform"},"No events on this day"),ot.createElement("div",{id:"eventDetails"},ot.createElement(Bq,{eventsToday:g,date:h}))))))},zq=e=>{const t=e.updateEvents,n=e.selectedDate,r=e.setSelectedDate,a=1.7,u="var(--dark-colour)";ot.useContext(Xr);const h=A=>{A.clientHeight<A.clientWidth/a&&(A.style.height=A.clientWidth/a+"px");let D=A.querySelector(".fc-daygrid-day-top");if(D===null)throw"rendering error";let z=document.createElement("div");z.classList.add("fc-daygrid-day-number-circle"),document.createElement("li");const F=D.querySelector(".fc-daygrid-day-number");F!=null&&z.appendChild(F),D.innerHTML="",D.appendChild(z),z.style.width=z.clientHeight+"px"},o=A=>{var z;const D=[];for(let F of A)D.push({title:F.name,start:F.start_date,end:F.end_date,color:((z=F.tags[0])!=null?z:{color:"lightblue"}).color,textColor:"#434343"});return D};(()=>{var A;if(document.querySelectorAll(".fc-daygrid-day").forEach(D=>{var F;const z=D.querySelector(".fc-daygrid-day-number-circle");z!=null&&(z.style.background=""),(F=D.querySelector(".fc-daygrid-day-number"))==null||F.removeAttribute("selected")}),n!==void 0){let D=document.querySelector("[data-date='"+n.toISOString().split("T")[0]+"']");if(D!=null){let z=D.querySelector(".fc-daygrid-day-top");if(z==null)throw"reformat error";(z.children.length!==1||!z.children[0].classList.contains(".fc-daygrid-day-number-circle"))&&h(D);const F=z.querySelector(".fc-daygrid-day-number-circle");F!=null&&(F.style.backgroundColor=u),(A=z.querySelector(".fc-daygrid-day-number"))==null||A.setAttribute("selected","true")}}})();var b=ot.createElement(VG,{plugins:[hq,Lq],initialView:"dayGridMonth",headerToolbar:{right:"today prev,next"},views:{dayGridMonth:{dayCellDidMount:A=>{h(A.el)},aspectRatio:1.7}},selectable:!0,selectAllow:A=>A.end.getTime()-A.start.getTime()<=24*60*60*1e3,select:A=>{r(new Date(A.start.setHours(0,0,0,0)))},unselect:()=>{r(void 0)},events:(A,D,z)=>{t(A,F=>{D(o(F))},z)},height:"auto",selectLongPressDelay:0});return ot.createElement(ot.Fragment,null,ot.createElement("div",{id:"calendar"},b))},Bq=e=>{const t=e.eventsToday,n=e.date,r=n==null?[]:t.map(a=>ot.createElement(Fq,{key:a.id,curEvent:a,date:n}));return r.length===0?ot.createElement(ot.Fragment,null):ot.createElement(ot.Fragment,null,r)},Fq=e=>{var z;const t=e.curEvent,n=e.date;let r=new Date(t.start_date),a=new Date(t.end_date);ot.useContext(Xr);const u=F=>{let N=F.getHours(),T=F.getMinutes();const H=N>=12?"pm":"am";N=N%12,N=N||12;let j=T<10?"0"+T:""+T;return[N+":"+j,H]},h=F=>{let N=new Intl.DateTimeFormat().format(F),[T,H]=u(F);return[N+" "+T,H]};let[o,g]=r<n?h(r):u(r),[b,A]=a>=new Date(n.getTime()+24*60*60*1e3)?h(a):u(a);const D=t.tags.map(F=>ot.createElement("p",{key:t.name+"|"+F.name,className:"tag",style:{backgroundColor:(F!=null?F:{color:"lightblue"}).color}},F.name));return ot.createElement("table",{className:"dayEvent"},ot.createElement("tbody",null,ot.createElement("tr",null,ot.createElement("td",{className:"leftPanel",style:{backgroundColor:((z=t.tags[0])!=null?z:{color:"lightblue"}).color}},ot.createElement("span",{className:"timeDisplay",id:"event_start"},o),ot.createElement("span",{className:"ampm",id:"event_start_ampm"},g),ot.createElement("br",null),ot.createElement("span",{className:"intermediate_to"},"to"),ot.createElement("br",null),ot.createElement("span",{className:"timeDisplay",id:"event_end"},b),ot.createElement("span",{className:"ampm",id:"event_end_ampm"},A)),ot.createElement(Nq,{curEvent:t,tagEls:D}))))},Nq=e=>{var u;const[t,n]=m.exports.useState(!0),r=e.curEvent,a=e.tagEls;return ot.useContext(Xr),ot.createElement("td",{className:"detailPanel"},ot.createElement("h4",{className:"event_title"},r.name),ot.createElement("em",null,ot.createElement("a",{className:"eventHost event_host_name"},((u=r.organization)!=null?u:{name:""}).name)),ot.createElement("hr",null),ot.createElement("p",{className:"event_description "+(t?"truncate-100":""),onClick:()=>n(!t)},r.description.replace(/(?:\r\n|\r|\n)/g,"<br>")),ot.createElement("div",{className:"tag-section"},a))},Uq=()=>{const e=Ii(),t=m.exports.useContext(Xr),r=D0().get("next");m.exports.useState("");const[a,u]=m.exports.useState(""),[h,o]=m.exports.useState(""),[g,b]=m.exports.useState(!1),[A,D]=m.exports.useState("");m.exports.useEffect(()=>{Eo()&&e(r||"/"),F("id_login"),F("id_password"),F("id_remember"),document.title="Login | Metropolis"},[]);const z=()=>{window.history.back()},F=T=>{document.getElementById(T).removeAttribute("placeholder")},N=T=>{T.preventDefault(),console.log("Logging in 3"),b(!0),Bl.post(mr.AUTH.LOGIN,{username:a,password:h},{}).then(H=>{H.data.access?(console.log(`Success: ${H.data.access}`),t.updateToken(H.data.access),w3(H.data.refresh),b(!1),t.notify("Successfully logged in!","success"),e(r||"/")):(console.log("Error"),D(H.data.error),b(!1))}).catch(H=>{D(H.response.data.detail),b(!1)})};return m.exports.createElement("div",{className:"login-page"},m.exports.createElement("a",{id:"back",onClick:z},m.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"row wrapper"},m.exports.createElement("div",{className:"col m12 l6 hide-on-med-and-down"},m.exports.createElement("img",{className:"responsive-img account-art",src:"/static/img/log-in.png"})),m.exports.createElement("div",{className:"col m12 l6"},m.exports.createElement("div",{className:"form-wrapper"},m.exports.createElement("div",{className:"tab-wrapper row"},m.exports.createElement("div",{className:"col s6"},m.exports.createElement(nn,{to:"/accounts/login/"},m.exports.createElement("div",{className:"tab current"},"Log In"))),m.exports.createElement("div",{className:"col s6"},m.exports.createElement(nn,{to:"/accounts/signup/"},m.exports.createElement("div",{className:"tab"},"Sign Up")))),m.exports.createElement("form",{className:"login",onSubmit:N},m.exports.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:"CSRFSECRET123"}),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_login",className:"active"},"Login:"),m.exports.createElement("input",{type:"text",name:"login",autoComplete:"off",required:!0,id:"id_login",onChange:T=>{u(T.target.value)},style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=&quot;)"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_password",className:"active"},"Password:"),m.exports.createElement("input",{type:"password",name:"password",autoComplete:"off",required:!0,id:"id_password",onChange:T=>{o(T.target.value)},style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=&quot;)"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"col s12"},m.exports.createElement("label",{htmlFor:"id_remember",className:"valign-wrapper"},m.exports.createElement("input",{className:"filled-in checkbox-blue",type:"checkbox",name:"remember",id:"id_remember"}),m.exports.createElement("span",null,"Remember Me")))),!!A&&m.exports.createElement("ul",{className:"errorlist nonfield"},m.exports.createElement("li",null,"The username and/or password you specified are not correct.")),m.exports.createElement("div",null,m.exports.createElement("button",{className:"btn login-btn",type:"submit"},"Sign In")),m.exports.createElement("p",null,"Forgot your password? Click ",m.exports.createElement(nn,{className:"link",to:"/accounts/password/reset/"},"here")," to reset.")))))))},jq=()=>{const e=Ii();m.exports.useContext(Xr);const{register:t,handleSubmit:n,watch:r,formState:{errors:a}}=Ck(),[u,h]=m.exports.useState("");m.exports.useEffect(()=>{document.title="Sign Up | Metropolis"},[]),m.exports.useEffect(()=>{Eo()&&e("/")});const o=()=>{window.history.back()},g=b=>{if(console.log("Submitted data:",b),b.password!==b.confirm_password){h("Passwords do not match");return}const A={first_name:b.first_name,last_name:b.last_name,graduating_year:b.graduating_year,email:b.email,username:b.username,password:b.password};Bl.post(mr.USER,{new_user:A}).then(D=>{console.log("Successfully registered user"),e("/accounts/login")}).catch(D=>{console.log("Failed to register user"),h("An internal error occurred. Please contact an admin to get it fixed.")})};return m.exports.createElement("div",{className:"register-page"},m.exports.createElement("a",{id:"back",onClick:o},m.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"row wrapper"},m.exports.createElement("div",{className:"graphic col m12 l6 hide-on-med-and-down account-art",style:{backgroundImage:"url('/static/img/sign-up.png')"}}),m.exports.createElement("div",{className:"col m12 l6"},m.exports.createElement("div",{className:"form-wrapper"},m.exports.createElement("div",{className:"tab-wrapper row"},m.exports.createElement("div",{className:"col s6"},m.exports.createElement(zx,{href:"/accounts/login/"},m.exports.createElement("div",{className:"tab"},"Log In"))),m.exports.createElement("div",{className:"col s6"},m.exports.createElement(zx,{href:"/accounts/signup/"},m.exports.createElement("div",{className:"tab current"},"Sign Up")))),m.exports.createElement("form",{className:"signup",onSubmit:n(g)},m.exports.createElement("input",{...t("CSRF_TOKEN"),type:"hidden",name:"csrfmiddlewaretoken",value:"CSRFSECRET"}),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_email",className:"active"},"TDSB Email:"),m.exports.createElement("input",{...t("email"),type:"email",name:"email",autoComplete:"email",required:!0,id:"id_email",style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABHklEQVQ4EaVTO26DQBD1ohQWaS2lg9JybZ+AK7hNwx2oIoVf4UPQ0Lj1FdKktevIpel8AKNUkDcWMxpgSaIEaTVv3sx7uztiTdu2s/98DywOw3Dued4Who/M2aIx5lZV1aEsy0+qiwHELyi+Ytl0PQ69SxAxkWIA4RMRTdNsKE59juMcuZd6xIAFeZ6fGCdJ8kY4y7KAuTRNGd7jyEBXsdOPE3a0QGPsniOnnYMO67LgSQN9T41F2QGrQRRFCwyzoIF2qyBuKKbcOgPXdVeY9rMWgNsjf9ccYesJhk3f5dYT1HX9gR0LLQR30TnjkUEcx2uIuS4RnI+aj6sJR0AM8AaumPaM/rRehyWhXqbFAA9kh3/8/NvHxAYGAsZ/il8IalkCLBfNVAAAAABJRU5ErkJggg==&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_username",className:"active"},"Username:"),m.exports.createElement("input",{...t("username"),type:"text",name:"username",autoComplete:"username",minLength:1,maxLength:150,required:!0,id:"id_username"}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_first_name",className:"active"},"First Name:"),m.exports.createElement("input",{...t("first_name"),type:"text",name:"first_name",autoComplete:"given-name",maxLength:30,required:!0,id:"id_first_name"}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_last_name",className:"active"},"Last Name:"),m.exports.createElement("input",{...t("last_name"),type:"text",name:"last_name",autoComplete:"family-name",maxLength:30,required:!0,id:"id_last_name"}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("span",{className:"grad-year"},"Graduating Year:"),m.exports.createElement("select",{...t("graduating_year"),className:"browser-default"},m.exports.createElement("option",{value:""},"Does not apply"),m.exports.createElement("option",{value:"2022"},"2022"),m.exports.createElement("option",{value:"2023"},"2023"),m.exports.createElement("option",{value:"2024"},"2024"),m.exports.createElement("option",{value:"2025"},"2025")))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_password1",className:"active"},"Password:"),m.exports.createElement("input",{...t("password"),type:"password",required:!0,style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACIUlEQVQ4EX2TOYhTURSG87IMihDsjGghBhFBmHFDHLWwSqcikk4RRKJgk0KL7C8bMpWpZtIqNkEUl1ZCgs0wOo0SxiLMDApWlgOPrH7/5b2QkYwX7jvn/uc//zl3edZ4PPbNGvF4fC4ajR5VrNvt/mo0Gr1ZPOtfgWw2e9Lv9+chX7cs64CS4Oxg3o9GI7tUKv0Q5o1dAiTfCgQCLwnOkfQOu+oSLyJ2A783HA7vIPLGxX0TgVwud4HKn0nc7Pf7N6vV6oZHkkX8FPG3uMfgXC0Wi2vCg/poUKGGcagQI3k7k8mcp5slcGswGDwpl8tfwGJg3xB6Dvey8vz6oH4C3iXcFYjbwiDeo1KafafkC3NjK7iL5ESFGQEUF7Sg+ifZdDp9GnMF/KGmfBdT2HCwZ7TwtrBPC7rQaav6Iv48rqZwg+F+p8hOMBj0IbxfMdMBrW5pAVGV/ztINByENkU0t5BIJEKRSOQ3Aj+Z57iFs1R5NK3EQS6HQqF1zmQdzpFWq3W42WwOTAf1er1PF2USFlC+qxMvFAr3HcexWX+QX6lUvsKpkTyPSEXJkw6MQ4S38Ljdbi8rmM/nY+CvgNcQqdH6U/xrYK9t244jZv6ByUOSiDdIfgBZ12U6dHEHu9TpdIr8F0OP692CtzaW/a6y3y0Wx5kbFHvGuXzkgf0xhKnPzA4UTyaTB8Ph8AvcHi3fnsrZ7Wore02YViqVOrRXXPhfqP8j6MYlawoAAAAASUVORK5CYII=&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"}}))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"input-field col s12"},m.exports.createElement("label",{htmlFor:"id_password2",className:"active"},"Password (again):"),m.exports.createElement("input",{...t("confirm_password"),type:"password",required:!0,style:{backgroundImage:"url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACIUlEQVQ4EX2TOYhTURSG87IMihDsjGghBhFBmHFDHLWwSqcikk4RRKJgk0KL7C8bMpWpZtIqNkEUl1ZCgs0wOo0SxiLMDApWlgOPrH7/5b2QkYwX7jvn/uc//zl3edZ4PPbNGvF4fC4ajR5VrNvt/mo0Gr1ZPOtfgWw2e9Lv9+chX7cs64CS4Oxg3o9GI7tUKv0Q5o1dAiTfCgQCLwnOkfQOu+oSLyJ2A783HA7vIPLGxX0TgVwud4HKn0nc7Pf7N6vV6oZHkkX8FPG3uMfgXC0Wi2vCg/poUKGGcagQI3k7k8mcp5slcGswGDwpl8tfwGJg3xB6Dvey8vz6oH4C3iXcFYjbwiDeo1KafafkC3NjK7iL5ESFGQEUF7Sg+ifZdDp9GnMF/KGmfBdT2HCwZ7TwtrBPC7rQaav6Iv48rqZwg+F+p8hOMBj0IbxfMdMBrW5pAVGV/ztINByENkU0t5BIJEKRSOQ3Aj+Z57iFs1R5NK3EQS6HQqF1zmQdzpFWq3W42WwOTAf1er1PF2USFlC+qxMvFAr3HcexWX+QX6lUvsKpkTyPSEXJkw6MQ4S38Ljdbi8rmM/nY+CvgNcQqdH6U/xrYK9t244jZv6ByUOSiDdIfgBZ12U6dHEHu9TpdIr8F0OP692CtzaW/a6y3y0Wx5kbFHvGuXzkgf0xhKnPzA4UTyaTB8Ph8AvcHi3fnsrZ7Wore02YViqVOrRXXPhfqP8j6MYlawoAAAAASUVORK5CYII=&quot;); background-repeat: no-repeat; background-attachment: scroll; background-size: 16px 18px; background-position: 98% 50%;"}}))),m.exports.createElement("p",null,"By clicking this button, you agree to our ",m.exports.createElement(nn,{to:"/terms/"},"terms")," and ",m.exports.createElement(nn,{className:"link",to:"/privacy/"},"privacy policy"),"."),u&&m.exports.createElement("span",{className:"form-error"},m.exports.createElement("div",{className:"form-errors"},m.exports.createElement("i",{className:"material-icons"},"warning"),m.exports.createElement(m.exports.Fragment,null,u))),m.exports.createElement("button",{type:"submit",className:"btn login-btn"},"Sign Up")))))))};var GC={exports:{}};/*!
 * Materialize v1.0.0 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */(function(e,t){var n=function T(H,j,W){H===null&&(H=Function.prototype);var B=Object.getOwnPropertyDescriptor(H,j);if(B===void 0){var O=Object.getPrototypeOf(H);return O===null?void 0:T(O,j,W)}else{if("value"in B)return B.value;var S=B.get;return S===void 0?void 0:S.call(W)}},r=function(){function T(H,j){for(var W=0;W<j.length;W++){var B=j[W];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(H,B.key,B)}}return function(H,j,W){return j&&T(H.prototype,j),W&&T(H,W),H}}();function a(T,H){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:T}function u(T,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);T.prototype=Object.create(H&&H.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(T,H):T.__proto__=H)}function h(T,H){if(!(T instanceof H))throw new TypeError("Cannot call a class as a function")}/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */(function(T){window.cash=T()})(function(){var T=document,H=window,j=Array.prototype,W=j.slice,B=j.filter,O=j.push,S=function(){},w=function(re){return typeof re==typeof S&&re.call},P=function(re){return typeof re=="string"},Y=/^#[\w-]*$/,ne=/^\.[\w-]*$/,ae=/<.+>/,oe=/^\w+$/;function fe(re,ce){ce=ce||T;var Pe=ne.test(re)?ce.getElementsByClassName(re.slice(1)):oe.test(re)?ce.getElementsByTagName(re):ce.querySelectorAll(re);return Pe}var Re;function Be(re){if(!Re){Re=T.implementation.createHTMLDocument(null);var ce=Re.createElement("base");ce.href=T.location.href,Re.head.appendChild(ce)}return Re.body.innerHTML=re,Re.body.childNodes}function Oe(re){T.readyState!=="loading"?re():T.addEventListener("DOMContentLoaded",re)}function Ee(re,ce){if(!re)return this;if(re.cash&&re!==H)return re;var Pe=re,ve=0,Se;if(P(re))Pe=Y.test(re)?T.getElementById(re.slice(1)):ae.test(re)?Be(re):fe(re,ce);else if(w(re))return Oe(re),this;if(!Pe)return this;if(Pe.nodeType||Pe===H)this[0]=Pe,this.length=1;else for(Se=this.length=Pe.length;ve<Se;ve++)this[ve]=Pe[ve];return this}function pt(re,ce){return new Ee(re,ce)}var Ze=pt.fn=pt.prototype=Ee.prototype={cash:!0,length:0,push:O,splice:j.splice,map:j.map,init:Ee};Object.defineProperty(Ze,"constructor",{value:pt}),pt.parseHTML=Be,pt.noop=S,pt.isFunction=w,pt.isString=P,pt.extend=Ze.extend=function(re){re=re||{};var ce=W.call(arguments),Pe=ce.length,ve=1;for(ce.length===1&&(re=this,ve=0);ve<Pe;ve++)if(!!ce[ve])for(var Se in ce[ve])ce[ve].hasOwnProperty(Se)&&(re[Se]=ce[ve][Se]);return re};function ct(re,ce){for(var Pe=re.length,ve=0;ve<Pe&&ce.call(re[ve],re[ve],ve,re)!==!1;ve++);}function nt(re,ce){var Pe=re&&(re.matches||re.webkitMatchesSelector||re.mozMatchesSelector||re.msMatchesSelector||re.oMatchesSelector);return!!Pe&&Pe.call(re,ce)}function xe(re){return P(re)?nt:re.cash?function(ce){return re.is(ce)}:function(ce,Pe){return ce===Pe}}function be(re){return pt(W.call(re).filter(function(ce,Pe,ve){return ve.indexOf(ce)===Pe}))}pt.extend({merge:function(re,ce){for(var Pe=+ce.length,ve=re.length,Se=0;Se<Pe;ve++,Se++)re[ve]=ce[Se];return re.length=ve,re},each:ct,matches:nt,unique:be,isArray:Array.isArray,isNumeric:function(re){return!isNaN(parseFloat(re))&&isFinite(re)}});var on=pt.uid="_cash"+Date.now();function Ut(re){return re[on]=re[on]||{}}function ln(re,ce,Pe){return Ut(re)[ce]=Pe}function tn(re,ce){var Pe=Ut(re);return Pe[ce]===void 0&&(Pe[ce]=re.dataset?re.dataset[ce]:pt(re).attr("data-"+ce)),Pe[ce]}function un(re,ce){var Pe=Ut(re);Pe?delete Pe[ce]:re.dataset?delete re.dataset[ce]:pt(re).removeAttr("data-"+name)}Ze.extend({data:function(re,ce){if(P(re))return ce===void 0?tn(this[0],re):this.each(function(ve){return ln(ve,re,ce)});for(var Pe in re)this.data(Pe,re[Pe]);return this},removeData:function(re){return this.each(function(ce){return un(ce,re)})}});var mn=/\S+/g;function fn(re){return P(re)&&re.match(mn)}function An(re,ce){return re.classList?re.classList.contains(ce):new RegExp("(^| )"+ce+"( |$)","gi").test(re.className)}function Le(re,ce,Pe){re.classList?re.classList.add(ce):Pe.indexOf(" "+ce+" ")&&(re.className+=" "+ce)}function Xe(re,ce){re.classList?re.classList.remove(ce):re.className=re.className.replace(ce,"")}Ze.extend({addClass:function(re){var ce=fn(re);return ce?this.each(function(Pe){var ve=" "+Pe.className+" ";ct(ce,function(Se){Le(Pe,Se,ve)})}):this},attr:function(re,ce){if(!!re){if(P(re))return ce===void 0?this[0]?this[0].getAttribute?this[0].getAttribute(re):this[0][re]:void 0:this.each(function(ve){ve.setAttribute?ve.setAttribute(re,ce):ve[re]=ce});for(var Pe in re)this.attr(Pe,re[Pe]);return this}},hasClass:function(re){var ce=!1,Pe=fn(re);return Pe&&Pe.length&&this.each(function(ve){return ce=An(ve,Pe[0]),!ce}),ce},prop:function(re,ce){if(P(re))return ce===void 0?this[0][re]:this.each(function(ve){ve[re]=ce});for(var Pe in re)this.prop(Pe,re[Pe]);return this},removeAttr:function(re){return this.each(function(ce){ce.removeAttribute?ce.removeAttribute(re):delete ce[re]})},removeClass:function(re){if(!arguments.length)return this.attr("class","");var ce=fn(re);return ce?this.each(function(Pe){ct(ce,function(ve){Xe(Pe,ve)})}):this},removeProp:function(re){return this.each(function(ce){delete ce[re]})},toggleClass:function(re,ce){if(ce!==void 0)return this[ce?"addClass":"removeClass"](re);var Pe=fn(re);return Pe?this.each(function(ve){var Se=" "+ve.className+" ";ct(Pe,function(yt){An(ve,yt)?Xe(ve,yt):Le(ve,yt,Se)})}):this}}),Ze.extend({add:function(re,ce){return be(pt.merge(this,pt(re,ce)))},each:function(re){return ct(this,re),this},eq:function(re){return pt(this.get(re))},filter:function(re){if(!re)return this;var ce=w(re)?re:xe(re);return pt(B.call(this,function(Pe){return ce(Pe,re)}))},first:function(){return this.eq(0)},get:function(re){return re===void 0?W.call(this):re<0?this[re+this.length]:this[re]},index:function(re){var ce=re?pt(re)[0]:this[0],Pe=re?this:pt(ce).parent().children();return W.call(Pe).indexOf(ce)},last:function(){return this.eq(-1)}});var ft=function(){var re=/(?:^\w|[A-Z]|\b\w)/g,ce=/[\s-_]+/g;return function(Pe){return Pe.replace(re,function(ve,Se){return ve[Se===0?"toLowerCase":"toUpperCase"]()}).replace(ce,"")}}(),wt=function(){var re={},ce=document,Pe=ce.createElement("div"),ve=Pe.style;return function(Se){if(Se=ft(Se),re[Se])return re[Se];var yt=Se.charAt(0).toUpperCase()+Se.slice(1),Nt=["webkit","moz","ms","o"],Kt=(Se+" "+Nt.join(yt+" ")+yt).split(" ");return ct(Kt,function(Bn){if(Bn in ve)return re[Bn]=Se=re[Se]=Bn,!1}),re[Se]}}();pt.prefixedProp=wt,pt.camelCase=ft,Ze.extend({css:function(re,ce){if(P(re))return re=wt(re),arguments.length>1?this.each(function(ve){return ve.style[re]=ce}):H.getComputedStyle(this[0])[re];for(var Pe in re)this.css(Pe,re[Pe]);return this}});function _t(re,ce){return parseInt(H.getComputedStyle(re[0],null)[ce],10)||0}ct(["Width","Height"],function(re){var ce=re.toLowerCase();Ze[ce]=function(){return this[0].getBoundingClientRect()[ce]},Ze["inner"+re]=function(){return this[0]["client"+re]},Ze["outer"+re]=function(Pe){return this[0]["offset"+re]+(Pe?_t(this,"margin"+(re==="Width"?"Left":"Top"))+_t(this,"margin"+(re==="Width"?"Right":"Bottom")):0)}});function dt(re,ce,Pe){var ve=tn(re,"_cashEvents")||ln(re,"_cashEvents",{});ve[ce]=ve[ce]||[],ve[ce].push(Pe),re.addEventListener(ce,Pe)}function Pt(re,ce,Pe){var ve=tn(re,"_cashEvents"),Se=ve&&ve[ce],yt;!Se||(Pe?(re.removeEventListener(ce,Pe),yt=Se.indexOf(Pe),yt>=0&&Se.splice(yt,1)):(ct(Se,function(Nt){re.removeEventListener(ce,Nt)}),Se=[]))}Ze.extend({off:function(re,ce){return this.each(function(Pe){return Pt(Pe,re,ce)})},on:function(re,ce,Pe,ve){var Se;if(!P(re)){for(var yt in re)this.on(yt,ce,re[yt]);return this}return w(ce)&&(Pe=ce,ce=null),re==="ready"?(Oe(Pe),this):(ce&&(Se=Pe,Pe=function(Nt){for(var Kt=Nt.target;!nt(Kt,ce);){if(Kt===this||Kt===null)return Kt=!1;Kt=Kt.parentNode}Kt&&Se.call(Kt,Nt)}),this.each(function(Nt){var Kt=Pe;ve&&(Kt=function(){Pe.apply(this,arguments),Pt(Nt,re,Kt)}),dt(Nt,re,Kt)}))},one:function(re,ce,Pe){return this.on(re,ce,Pe,!0)},ready:Oe,trigger:function(re,ce){if(document.createEvent){var Pe=document.createEvent("HTMLEvents");return Pe.initEvent(re,!0,!1),Pe=this.extend(Pe,ce),this.each(function(ve){return ve.dispatchEvent(Pe)})}}});function yn(re,ce){return"&"+encodeURIComponent(re)+"="+encodeURIComponent(ce).replace(/%20/g,"+")}function On(re){var ce=[];return ct(re.options,function(Pe){Pe.selected&&ce.push(Pe.value)}),ce.length?ce:null}function Ln(re){var ce=re.selectedIndex;return ce>=0?re.options[ce].value:null}function In(re){var ce=re.type;if(!ce)return null;switch(ce.toLowerCase()){case"select-one":return Ln(re);case"select-multiple":return On(re);case"radio":return re.checked?re.value:null;case"checkbox":return re.checked?re.value:null;default:return re.value?re.value:null}}Ze.extend({serialize:function(){var re="";return ct(this[0].elements||this,function(ce){if(!(ce.disabled||ce.tagName==="FIELDSET")){var Pe=ce.name;switch(ce.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var ve=In(ce);ve!==null&&ct(ve,function(yt){re+=yn(Pe,yt)});break;default:var Se=In(ce);Se!==null&&(re+=yn(Pe,Se))}}}),re.substr(1)},val:function(re){return re===void 0?In(this[0]):this.each(function(ce){return ce.value=re})}});function Xn(re,ce,Pe){if(Pe){var ve=re.childNodes[0];re.insertBefore(ce,ve)}else re.appendChild(ce)}function Ie(re,ce,Pe){var ve=P(ce);if(!ve&&ce.length){ct(ce,function(Se){return Ie(re,Se,Pe)});return}ct(re,ve?function(Se){return Se.insertAdjacentHTML(Pe?"afterbegin":"beforeend",ce)}:function(Se,yt){return Xn(Se,yt===0?ce:ce.cloneNode(!0),Pe)})}Ze.extend({after:function(re){return pt(re).insertAfter(this),this},append:function(re){return Ie(this,re),this},appendTo:function(re){return Ie(pt(re),this),this},before:function(re){return pt(re).insertBefore(this),this},clone:function(){return pt(this.map(function(re){return re.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(re){if(re===void 0)return this[0].innerHTML;var ce=re.nodeType?re[0].outerHTML:re;return this.each(function(Pe){return Pe.innerHTML=ce})},insertAfter:function(re){var ce=this;return pt(re).each(function(Pe,ve){var Se=Pe.parentNode,yt=Pe.nextSibling;ce.each(function(Nt){Se.insertBefore(ve===0?Nt:Nt.cloneNode(!0),yt)})}),this},insertBefore:function(re){var ce=this;return pt(re).each(function(Pe,ve){var Se=Pe.parentNode;ce.each(function(yt){Se.insertBefore(ve===0?yt:yt.cloneNode(!0),Pe)})}),this},prepend:function(re){return Ie(this,re,!0),this},prependTo:function(re){return Ie(pt(re),this,!0),this},remove:function(){return this.each(function(re){if(re.parentNode)return re.parentNode.removeChild(re)})},text:function(re){return re===void 0?this[0].textContent:this.each(function(ce){return ce.textContent=re})}});var Je=T.documentElement;return Ze.extend({position:function(){var re=this[0];return{left:re.offsetLeft,top:re.offsetTop}},offset:function(){var re=this[0].getBoundingClientRect();return{top:re.top+H.pageYOffset-Je.clientTop,left:re.left+H.pageXOffset-Je.clientLeft}},offsetParent:function(){return pt(this[0].offsetParent)}}),Ze.extend({children:function(re){var ce=[];return this.each(function(Pe){O.apply(ce,Pe.children)}),ce=be(ce),re?ce.filter(function(Pe){return nt(Pe,re)}):ce},closest:function(re){return!re||this.length<1?pt():this.is(re)?this.filter(re):this.parent().closest(re)},is:function(re){if(!re)return!1;var ce=!1,Pe=xe(re);return this.each(function(ve){return ce=Pe(ve,re),!ce}),ce},find:function(re){if(!re||re.nodeType)return pt(re&&this.has(re).length?re:null);var ce=[];return this.each(function(Pe){O.apply(ce,fe(re,Pe))}),be(ce)},has:function(re){var ce=P(re)?function(Pe){return fe(re,Pe).length!==0}:function(Pe){return Pe.contains(re)};return this.filter(ce)},next:function(){return pt(this[0].nextElementSibling)},not:function(re){if(!re)return this;var ce=xe(re);return this.filter(function(Pe){return!ce(Pe,re)})},parent:function(){var re=[];return this.each(function(ce){ce&&ce.parentNode&&re.push(ce.parentNode)}),be(re)},parents:function(re){var ce,Pe=[];return this.each(function(ve){for(ce=ve;ce&&ce.parentNode&&ce!==T.body.parentNode;)ce=ce.parentNode,(!re||re&&nt(ce,re))&&Pe.push(ce)}),be(Pe)},prev:function(){return pt(this[0].previousElementSibling)},siblings:function(re){var ce=this.parent().children(re),Pe=this[0];return ce.filter(function(ve){return ve!==Pe})}}),pt});var o=function(){function T(H,j,W){h(this,T),j instanceof Element||console.error(Error(j+" is not an HTML Element"));var B=H.getInstance(j);B&&B.destroy(),this.el=j,this.$el=cash(j)}return r(T,null,[{key:"init",value:function(j,W,B){var O=null;if(W instanceof Element)O=new j(W,B);else if(!!W&&(W.jquery||W.cash||W instanceof NodeList)){for(var S=[],w=0;w<W.length;w++)S.push(new j(W[w],B));O=S}return O}}]),T}();(function(T){T.Package?M={}:T.M={},M.jQueryLoaded=!!T.jQuery})(window),t.nodeType||(!e.nodeType&&e.exports&&(t=e.exports=M),t.default=M),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var g=function(T){M.keyDown=!0,(T.which===M.keys.TAB||T.which===M.keys.ARROW_DOWN||T.which===M.keys.ARROW_UP)&&(M.tabPressed=!0)},b=function(T){M.keyDown=!1,(T.which===M.keys.TAB||T.which===M.keys.ARROW_DOWN||T.which===M.keys.ARROW_UP)&&(M.tabPressed=!1)},A=function(T){M.keyDown&&document.body.classList.add("keyboard-focused")},D=function(T){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",g,!0),document.addEventListener("keyup",b,!0),document.addEventListener("focus",A,!0),document.addEventListener("blur",D,!0),M.initializeJqueryWrapper=function(T,H,j){jQuery.fn[H]=function(W){if(T.prototype[W]){var B=Array.prototype.slice.call(arguments,1);if(W.slice(0,3)==="get"){var O=this.first()[0][j];return O[W].apply(O,B)}return this.each(function(){var S=this[j];S[W].apply(S,B)})}else if(typeof W=="object"||!W)return T.init(this,arguments[0]),this;jQuery.error("Method "+W+" does not exist on jQuery."+H)}},M.AutoInit=function(T){var H=T||document.body,j={Autocomplete:H.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:H.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:H.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:H.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:H.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:H.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:H.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:H.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:H.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:H.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:H.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:H.querySelectorAll("select:not(.no-autoinit)"),Sidenav:H.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:H.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:H.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:H.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:H.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:H.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var W in j){var B=M[W];B.init(j[W])}},M.objectSelectorString=function(T){var H=T.prop("tagName")||"",j=T.attr("id")||"",W=T.attr("class")||"";return(H+j+W).replace(/\s/g,"")},M.guid=function(){function T(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return T()+T()+"-"+T()+"-"+T()+"-"+T()+"-"+T()+T()+T()}}(),M.escapeHash=function(T){return T.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(T){var H=$(T),j=H.add(H.parents()),W=!1;return j.each(function(){if($(this).css("position")==="fixed")return W=!0,!1}),W},M.checkWithinContainer=function(T,H,j){var W={top:!1,right:!1,bottom:!1,left:!1},B=T.getBoundingClientRect(),O=T===document.body?Math.max(B.bottom,window.innerHeight):B.bottom,S=T.scrollLeft,w=T.scrollTop,P=H.left-S,Y=H.top-w;return(P<B.left+j||P<j)&&(W.left=!0),(P+H.width>B.right-j||P+H.width>window.innerWidth-j)&&(W.right=!0),(Y<B.top+j||Y<j)&&(W.top=!0),(Y+H.height>O-j||Y+H.height>window.innerHeight-j)&&(W.bottom=!0),W},M.checkPossibleAlignments=function(T,H,j,W){var B={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},O=getComputedStyle(H).overflow==="visible",S=H.getBoundingClientRect(),w=Math.min(S.height,window.innerHeight),P=Math.min(S.width,window.innerWidth),Y=T.getBoundingClientRect(),ne=H.scrollLeft,ae=H.scrollTop,oe=j.left-ne,fe=j.top-ae,Re=j.top+Y.height-ae;return B.spaceOnRight=O?window.innerWidth-(Y.left+j.width):P-(oe+j.width),B.spaceOnRight<0&&(B.left=!1),B.spaceOnLeft=O?Y.right-j.width:oe-j.width+Y.width,B.spaceOnLeft<0&&(B.right=!1),B.spaceOnBottom=O?window.innerHeight-(Y.top+j.height+W):w-(fe+j.height+W),B.spaceOnBottom<0&&(B.top=!1),B.spaceOnTop=O?Y.bottom-(j.height+W):Re-(j.height-W),B.spaceOnTop<0&&(B.bottom=!1),B},M.getOverflowParent=function(T){return T==null?null:T===document.body||getComputedStyle(T).overflow!=="visible"?T:M.getOverflowParent(T.parentElement)},M.getIdFromTrigger=function(T){var H=T.getAttribute("data-target");return H||(H=T.getAttribute("href"),H?H=H.slice(1):H=""),H},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};/**
 * Get time in ms
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @type {function}
 * @return {number}
 */var z=Date.now||function(){return new Date().getTime()};/**
 * Returns a function, that, when invoked, will only be triggered at most once
 * during a given window of time. Normally, the throttled function will run
 * as much as it can, without ever going more than once per `wait` duration;
 * but if you'd like to disable the execution on the leading edge, pass
 * `{leading: false}`. To disable execution on the trailing edge, ditto.
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @param {function} func
 * @param {number} wait
 * @param {Object=} options
 * @returns {Function}
 */M.throttle=function(T,H,j){var W=void 0,B=void 0,O=void 0,S=null,w=0;j||(j={});var P=function(){w=j.leading===!1?0:z(),S=null,O=T.apply(W,B),W=B=null};return function(){var Y=z();!w&&j.leading===!1&&(w=Y);var ne=H-(Y-w);return W=this,B=arguments,ne<=0?(clearTimeout(S),S=null,w=Y,O=T.apply(W,B),W=B=null):!S&&j.trailing!==!1&&(S=setTimeout(P,ne)),O}};var F={scope:{}};F.defineProperty=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,H,j){if(j.get||j.set)throw new TypeError("ES3 does not support getters and setters.");T!=Array.prototype&&T!=Object.prototype&&(T[H]=j.value)},F.getGlobal=function(T){return typeof window!="undefined"&&window===T?T:typeof $o!="undefined"&&$o!=null?$o:T},F.global=F.getGlobal($o),F.SYMBOL_PREFIX="jscomp_symbol_",F.initSymbol=function(){F.initSymbol=function(){},F.global.Symbol||(F.global.Symbol=F.Symbol)},F.symbolCounter_=0,F.Symbol=function(T){return F.SYMBOL_PREFIX+(T||"")+F.symbolCounter_++},F.initSymbolIterator=function(){F.initSymbol();var T=F.global.Symbol.iterator;T||(T=F.global.Symbol.iterator=F.global.Symbol("iterator")),typeof Array.prototype[T]!="function"&&F.defineProperty(Array.prototype,T,{configurable:!0,writable:!0,value:function(){return F.arrayIterator(this)}}),F.initSymbolIterator=function(){}},F.arrayIterator=function(T){var H=0;return F.iteratorPrototype(function(){return H<T.length?{done:!1,value:T[H++]}:{done:!0}})},F.iteratorPrototype=function(T){return F.initSymbolIterator(),T={next:T},T[F.global.Symbol.iterator]=function(){return this},T},F.array=F.array||{},F.iteratorFromArray=function(T,H){F.initSymbolIterator(),T instanceof String&&(T+="");var j=0,W={next:function(){if(j<T.length){var B=j++;return{value:H(B,T[B]),done:!1}}return W.next=function(){return{done:!0,value:void 0}},W.next()}};return W[Symbol.iterator]=function(){return W},W},F.polyfill=function(T,H,j,W){if(H){for(j=F.global,T=T.split("."),W=0;W<T.length-1;W++){var B=T[W];B in j||(j[B]={}),j=j[B]}T=T[T.length-1],W=j[T],H=H(W),H!=W&&H!=null&&F.defineProperty(j,T,{configurable:!0,writable:!0,value:H})}},F.polyfill("Array.prototype.keys",function(T){return T||function(){return F.iteratorFromArray(this,function(H){return H})}},"es6-impl","es3");var N=$o;(function(T){M.anime=T()})(function(){function T(Ie){if(!dt.col(Ie))try{return document.querySelectorAll(Ie)}catch{}}function H(Ie,Je){for(var re=Ie.length,ce=2<=arguments.length?arguments[1]:void 0,Pe=[],ve=0;ve<re;ve++)if(ve in Ie){var Se=Ie[ve];Je.call(ce,Se,ve,Ie)&&Pe.push(Se)}return Pe}function j(Ie){return Ie.reduce(function(Je,re){return Je.concat(dt.arr(re)?j(re):re)},[])}function W(Ie){return dt.arr(Ie)?Ie:(dt.str(Ie)&&(Ie=T(Ie)||Ie),Ie instanceof NodeList||Ie instanceof HTMLCollection?[].slice.call(Ie):[Ie])}function B(Ie,Je){return Ie.some(function(re){return re===Je})}function O(Ie){var Je={},re;for(re in Ie)Je[re]=Ie[re];return Je}function S(Ie,Je){var re=O(Ie),ce;for(ce in Ie)re[ce]=Je.hasOwnProperty(ce)?Je[ce]:Ie[ce];return re}function w(Ie,Je){var re=O(Ie),ce;for(ce in Je)re[ce]=dt.und(Ie[ce])?Je[ce]:Ie[ce];return re}function P(Ie){Ie=Ie.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(ce,Pe,ve,Se){return Pe+Pe+ve+ve+Se+Se});var re=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Ie);Ie=parseInt(re[1],16);var Je=parseInt(re[2],16),re=parseInt(re[3],16);return"rgba("+Ie+","+Je+","+re+",1)"}function Y(Ie){function Je(yt,Nt,Kt){return 0>Kt&&(Kt+=1),1<Kt&&--Kt,Kt<1/6?yt+6*(Nt-yt)*Kt:.5>Kt?Nt:Kt<2/3?yt+(Nt-yt)*(2/3-Kt)*6:yt}var Pe=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(Ie)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(Ie);Ie=parseInt(Pe[1])/360;var re=parseInt(Pe[2])/100,ce=parseInt(Pe[3])/100,Pe=Pe[4]||1;if(re==0)ce=re=Ie=ce;else{var ve=.5>ce?ce*(1+re):ce+re-ce*re,Se=2*ce-ve,ce=Je(Se,ve,Ie+1/3),re=Je(Se,ve,Ie);Ie=Je(Se,ve,Ie-1/3)}return"rgba("+255*ce+","+255*re+","+255*Ie+","+Pe+")"}function ne(Ie){if(Ie=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(Ie))return Ie[2]}function ae(Ie){if(-1<Ie.indexOf("translate")||Ie==="perspective")return"px";if(-1<Ie.indexOf("rotate")||-1<Ie.indexOf("skew"))return"deg"}function oe(Ie,Je){return dt.fnc(Ie)?Ie(Je.target,Je.id,Je.total):Ie}function fe(Ie,Je){if(Je in Ie.style)return getComputedStyle(Ie).getPropertyValue(Je.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function Re(Ie,Je){if(dt.dom(Ie)&&B(wt,Je))return"transform";if(dt.dom(Ie)&&(Ie.getAttribute(Je)||dt.svg(Ie)&&Ie[Je]))return"attribute";if(dt.dom(Ie)&&Je!=="transform"&&fe(Ie,Je))return"css";if(Ie[Je]!=null)return"object"}function Be(Ie,Je){var re=ae(Je),re=-1<Je.indexOf("scale")?1:0+re;if(Ie=Ie.style.transform,!Ie)return re;for(var ce=[],Pe=[],ve=[],Se=/(\w+)\((.+?)\)/g;ce=Se.exec(Ie);)Pe.push(ce[1]),ve.push(ce[2]);return Ie=H(ve,function(yt,Nt){return Pe[Nt]===Je}),Ie.length?Ie[0]:re}function Oe(Ie,Je){switch(Re(Ie,Je)){case"transform":return Be(Ie,Je);case"css":return fe(Ie,Je);case"attribute":return Ie.getAttribute(Je)}return Ie[Je]||0}function Ee(Ie,Je){var re=/^(\*=|\+=|-=)/.exec(Ie);if(!re)return Ie;var ce=ne(Ie)||0;switch(Je=parseFloat(Je),Ie=parseFloat(Ie.replace(re[0],"")),re[0][0]){case"+":return Je+Ie+ce;case"-":return Je-Ie+ce;case"*":return Je*Ie+ce}}function pt(Ie,Je){return Math.sqrt(Math.pow(Je.x-Ie.x,2)+Math.pow(Je.y-Ie.y,2))}function Ze(Ie){Ie=Ie.points;for(var Je=0,re,ce=0;ce<Ie.numberOfItems;ce++){var Pe=Ie.getItem(ce);0<ce&&(Je+=pt(re,Pe)),re=Pe}return Je}function ct(Ie){if(Ie.getTotalLength)return Ie.getTotalLength();switch(Ie.tagName.toLowerCase()){case"circle":return 2*Math.PI*Ie.getAttribute("r");case"rect":return 2*Ie.getAttribute("width")+2*Ie.getAttribute("height");case"line":return pt({x:Ie.getAttribute("x1"),y:Ie.getAttribute("y1")},{x:Ie.getAttribute("x2"),y:Ie.getAttribute("y2")});case"polyline":return Ze(Ie);case"polygon":var Je=Ie.points;return Ze(Ie)+pt(Je.getItem(Je.numberOfItems-1),Je.getItem(0))}}function nt(Ie,Je){function re(Se){return Se=Se===void 0?0:Se,Ie.el.getPointAtLength(1<=Je+Se?Je+Se:0)}var ce=re(),Pe=re(-1),ve=re(1);switch(Ie.property){case"x":return ce.x;case"y":return ce.y;case"angle":return 180*Math.atan2(ve.y-Pe.y,ve.x-Pe.x)/Math.PI}}function xe(Ie,Je){var re=/-?\d*\.?\d+/g,ce;if(ce=dt.pth(Ie)?Ie.totalLength:Ie,dt.col(ce))if(dt.rgb(ce)){var Pe=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(ce);ce=Pe?"rgba("+Pe[1]+",1)":ce}else ce=dt.hex(ce)?P(ce):dt.hsl(ce)?Y(ce):void 0;else Pe=(Pe=ne(ce))?ce.substr(0,ce.length-Pe.length):ce,ce=Je&&!/\s/g.test(ce)?Pe+Je:Pe;return ce+="",{original:ce,numbers:ce.match(re)?ce.match(re).map(Number):[0],strings:dt.str(Ie)||Je?ce.split(re):[]}}function be(Ie){return Ie=Ie?j(dt.arr(Ie)?Ie.map(W):W(Ie)):[],H(Ie,function(Je,re,ce){return ce.indexOf(Je)===re})}function on(Ie){var Je=be(Ie);return Je.map(function(re,ce){return{target:re,id:ce,total:Je.length}})}function Ut(Ie,Je){var re=O(Je);if(dt.arr(Ie)){var ce=Ie.length;ce!==2||dt.obj(Ie[0])?dt.fnc(Je.duration)||(re.duration=Je.duration/ce):Ie={value:Ie}}return W(Ie).map(function(Pe,ve){return ve=ve?0:Je.delay,Pe=dt.obj(Pe)&&!dt.pth(Pe)?Pe:{value:Pe},dt.und(Pe.delay)&&(Pe.delay=ve),Pe}).map(function(Pe){return w(Pe,re)})}function ln(Ie,Je){var re={},ce;for(ce in Ie){var Pe=oe(Ie[ce],Je);dt.arr(Pe)&&(Pe=Pe.map(function(ve){return oe(ve,Je)}),Pe.length===1&&(Pe=Pe[0])),re[ce]=Pe}return re.duration=parseFloat(re.duration),re.delay=parseFloat(re.delay),re}function tn(Ie){return dt.arr(Ie)?Pt.apply(this,Ie):yn[Ie]}function un(Ie,Je){var re;return Ie.tweens.map(function(ce){ce=ln(ce,Je);var Pe=ce.value,yt=Oe(Je.target,Ie.name),ve=re?re.to.original:yt,ve=dt.arr(Pe)?Pe[0]:ve,Se=Ee(dt.arr(Pe)?Pe[1]:Pe,ve),yt=ne(Se)||ne(ve)||ne(yt);return ce.from=xe(ve,yt),ce.to=xe(Se,yt),ce.start=re?re.end:Ie.offset,ce.end=ce.start+ce.delay+ce.duration,ce.easing=tn(ce.easing),ce.elasticity=(1e3-Math.min(Math.max(ce.elasticity,1),999))/1e3,ce.isPath=dt.pth(Pe),ce.isColor=dt.col(ce.from.original),ce.isColor&&(ce.round=1),re=ce})}function mn(Ie,Je){return H(j(Ie.map(function(re){return Je.map(function(ce){var Pe=Re(re.target,ce.name);if(Pe){var ve=un(ce,re);ce={type:Pe,property:ce.name,animatable:re,tweens:ve,duration:ve[ve.length-1].end,delay:ve[0].delay}}else ce=void 0;return ce})})),function(re){return!dt.und(re)})}function fn(Ie,Je,re,ce){var Pe=Ie==="delay";return Je.length?(Pe?Math.min:Math.max).apply(Math,Je.map(function(ve){return ve[Ie]})):Pe?ce.delay:re.offset+ce.delay+ce.duration}function An(Ie){var Je=S(Xe,Ie),re=S(ft,Ie),ce=on(Ie.targets),Pe=[],ve=w(Je,re),Se;for(Se in Ie)ve.hasOwnProperty(Se)||Se==="targets"||Pe.push({name:Se,offset:ve.offset,tweens:Ut(Ie[Se],re)});return Ie=mn(ce,Pe),w(Je,{children:[],animatables:ce,animations:Ie,duration:fn("duration",Ie,Je,re),delay:fn("delay",Ie,Je,re)})}function Le(Ie){function Je(){return window.Promise&&new Promise(function(Rn){return Bn=Rn})}function re(Rn){return Vt.reversed?Vt.duration-Rn:Rn}function ce(Rn){for(var ur=0,Fn={},Sr=Vt.animations,dr=Sr.length;ur<dr;){var Pr=Sr[ur],Yn=Pr.animatable,Qn=Pr.tweens,Ur=Qn.length-1,hr=Qn[Ur];Ur&&(hr=H(Qn,function(te){return Rn<te.end})[0]||hr);for(var Qn=Math.min(Math.max(Rn-hr.start-hr.delay,0),hr.duration)/hr.duration,Bi=isNaN(Qn)?1:hr.easing(Qn,hr.elasticity),Qn=hr.to.strings,ai=hr.round,Ur=[],si=void 0,si=hr.to.numbers.length,Fi=0;Fi<si;Fi++){var _e=void 0,_e=hr.to.numbers[Fi],oo=hr.from.numbers[Fi],_e=hr.isPath?nt(hr.value,Bi*_e):oo+Bi*(_e-oo);ai&&(hr.isColor&&2<Fi||(_e=Math.round(_e*ai)/ai)),Ur.push(_e)}if(hr=Qn.length)for(si=Qn[0],Bi=0;Bi<hr;Bi++)ai=Qn[Bi+1],Fi=Ur[Bi],isNaN(Fi)||(si=ai?si+(Fi+ai):si+(Fi+" "));else si=Ur[0];On[Pr.type](Yn.target,Pr.property,si,Fn,Yn.id),Pr.currentValue=si,ur++}if(ur=Object.keys(Fn).length)for(Sr=0;Sr<ur;Sr++)_t||(_t=fe(document.body,"transform")?"transform":"-webkit-transform"),Vt.animatables[Sr].target.style[_t]=Fn[Sr].join(" ");Vt.currentTime=Rn,Vt.progress=Rn/Vt.duration*100}function Pe(Rn){Vt[Rn]&&Vt[Rn](Vt)}function ve(){Vt.remaining&&Vt.remaining!==!0&&Vt.remaining--}function Se(Rn){var ur=Vt.duration,Fn=Vt.offset,Sr=Fn+Vt.delay,dr=Vt.currentTime,Pr=Vt.reversed,Yn=re(Rn);if(Vt.children.length){var Qn=Vt.children,Ur=Qn.length;if(Yn>=Vt.currentTime)for(var hr=0;hr<Ur;hr++)Qn[hr].seek(Yn);else for(;Ur--;)Qn[Ur].seek(Yn)}(Yn>=Sr||!ur)&&(Vt.began||(Vt.began=!0,Pe("begin")),Pe("run")),Yn>Fn&&Yn<ur?ce(Yn):(Yn<=Fn&&dr!==0&&(ce(0),Pr&&ve()),(Yn>=ur&&dr!==ur||!ur)&&(ce(ur),Pr||ve())),Pe("update"),Rn>=ur&&(Vt.remaining?(Nt=yt,Vt.direction==="alternate"&&(Vt.reversed=!Vt.reversed)):(Vt.pause(),Vt.completed||(Vt.completed=!0,Pe("complete"),"Promise"in window&&(Bn(),Tn=Je()))),Kt=0)}Ie=Ie===void 0?{}:Ie;var yt,Nt,Kt=0,Bn=null,Tn=Je(),Vt=An(Ie);return Vt.reset=function(){var Rn=Vt.direction,ur=Vt.loop;for(Vt.currentTime=0,Vt.progress=0,Vt.paused=!0,Vt.began=!1,Vt.completed=!1,Vt.reversed=Rn==="reverse",Vt.remaining=Rn==="alternate"&&ur===1?2:ur,ce(0),Rn=Vt.children.length;Rn--;)Vt.children[Rn].reset()},Vt.tick=function(Rn){yt=Rn,Nt||(Nt=yt),Se((Kt+yt-Nt)*Le.speed)},Vt.seek=function(Rn){Se(re(Rn))},Vt.pause=function(){var Rn=Ln.indexOf(Vt);-1<Rn&&Ln.splice(Rn,1),Vt.paused=!0},Vt.play=function(){Vt.paused&&(Vt.paused=!1,Nt=0,Kt=re(Vt.currentTime),Ln.push(Vt),In||Xn())},Vt.reverse=function(){Vt.reversed=!Vt.reversed,Nt=0,Kt=re(Vt.currentTime)},Vt.restart=function(){Vt.pause(),Vt.reset(),Vt.play()},Vt.finished=Tn,Vt.reset(),Vt.autoplay&&Vt.play(),Vt}var Xe={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},ft={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},wt="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),_t,dt={arr:function(Ie){return Array.isArray(Ie)},obj:function(Ie){return-1<Object.prototype.toString.call(Ie).indexOf("Object")},pth:function(Ie){return dt.obj(Ie)&&Ie.hasOwnProperty("totalLength")},svg:function(Ie){return Ie instanceof SVGElement},dom:function(Ie){return Ie.nodeType||dt.svg(Ie)},str:function(Ie){return typeof Ie=="string"},fnc:function(Ie){return typeof Ie=="function"},und:function(Ie){return typeof Ie=="undefined"},hex:function(Ie){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(Ie)},rgb:function(Ie){return/^rgb/.test(Ie)},hsl:function(Ie){return/^hsl/.test(Ie)},col:function(Ie){return dt.hex(Ie)||dt.rgb(Ie)||dt.hsl(Ie)}},Pt=function(){function Ie(Je,re,ce){return(((1-3*ce+3*re)*Je+(3*ce-6*re))*Je+3*re)*Je}return function(Je,re,ce,Pe){if(0<=Je&&1>=Je&&0<=ce&&1>=ce){var ve=new Float32Array(11);if(Je!==re||ce!==Pe)for(var Se=0;11>Se;++Se)ve[Se]=Ie(.1*Se,Je,ce);return function(yt){if(Je===re&&ce===Pe)return yt;if(yt===0)return 0;if(yt===1)return 1;for(var Nt=0,Kt=1;Kt!==10&&ve[Kt]<=yt;++Kt)Nt+=.1;--Kt;var Kt=Nt+(yt-ve[Kt])/(ve[Kt+1]-ve[Kt])*.1,Bn=3*(1-3*ce+3*Je)*Kt*Kt+2*(3*ce-6*Je)*Kt+3*Je;if(.001<=Bn){for(Nt=0;4>Nt&&(Bn=3*(1-3*ce+3*Je)*Kt*Kt+2*(3*ce-6*Je)*Kt+3*Je,Bn!==0);++Nt)var Tn=Ie(Kt,Je,ce)-yt,Kt=Kt-Tn/Bn;yt=Kt}else if(Bn===0)yt=Kt;else{var Kt=Nt,Nt=Nt+.1,Vt=0;do Tn=Kt+(Nt-Kt)/2,Bn=Ie(Tn,Je,ce)-yt,0<Bn?Nt=Tn:Kt=Tn;while(1e-7<Math.abs(Bn)&&10>++Vt);yt=Tn}return Ie(yt,re,Pe)}}}}(),yn=function(){function Ie(Se,yt){return Se===0||Se===1?Se:-Math.pow(2,10*(Se-1))*Math.sin(2*(Se-1-yt/(2*Math.PI)*Math.asin(1))*Math.PI/yt)}var Je="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),re={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],Ie],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(Se,yt){return 1-Ie(1-Se,yt)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(Se,yt){return .5>Se?Ie(2*Se,yt)/2:1-Ie(-2*Se+2,yt)/2}]},ce={linear:Pt(.25,.25,.75,.75)},Pe={},ve;for(ve in re)Pe.type=ve,re[Pe.type].forEach(function(Se){return function(yt,Nt){ce["ease"+Se.type+Je[Nt]]=dt.fnc(yt)?yt:Pt.apply(N,yt)}}(Pe)),Pe={type:Pe.type};return ce}(),On={css:function(Ie,Je,re){return Ie.style[Je]=re},attribute:function(Ie,Je,re){return Ie.setAttribute(Je,re)},object:function(Ie,Je,re){return Ie[Je]=re},transform:function(Ie,Je,re,ce,Pe){ce[Pe]||(ce[Pe]=[]),ce[Pe].push(Je+"("+re+")")}},Ln=[],In=0,Xn=function(){function Ie(){In=requestAnimationFrame(Je)}function Je(re){var ce=Ln.length;if(ce){for(var Pe=0;Pe<ce;)Ln[Pe]&&Ln[Pe].tick(re),Pe++;Ie()}else cancelAnimationFrame(In),In=0}return Ie}();return Le.version="2.2.0",Le.speed=1,Le.running=Ln,Le.remove=function(Ie){Ie=be(Ie);for(var Je=Ln.length;Je--;)for(var re=Ln[Je],ce=re.animations,Pe=ce.length;Pe--;)B(Ie,ce[Pe].animatable.target)&&(ce.splice(Pe,1),ce.length||re.pause())},Le.getValue=Oe,Le.path=function(Ie,Je){var re=dt.str(Ie)?T(Ie)[0]:Ie,ce=Je||100;return function(Pe){return{el:re,property:Pe,totalLength:ct(re)*(ce/100)}}},Le.setDashoffset=function(Ie){var Je=ct(Ie);return Ie.setAttribute("stroke-dasharray",Je),Je},Le.bezier=Pt,Le.easings=yn,Le.timeline=function(Ie){var Je=Le(Ie);return Je.pause(),Je.duration=0,Je.add=function(re){return Je.children.forEach(function(ce){ce.began=!0,ce.completed=!0}),W(re).forEach(function(ce){var Pe=w(ce,S(ft,Ie||{}));Pe.targets=Pe.targets||Ie.targets,ce=Je.duration;var ve=Pe.offset;Pe.autoplay=!1,Pe.direction=Je.direction,Pe.offset=dt.und(ve)?ce:Ee(ve,ce),Je.began=!0,Je.completed=!0,Je.seek(Pe.offset),Pe=Le(Pe),Pe.began=!0,Pe.completed=!0,Pe.duration>ce&&(Je.duration=Pe.duration),Je.children.push(Pe)}),Je.seek(0),Je.reset(),Je.autoplay&&Je.restart(),Je},Je},Le.random=function(Ie,Je){return Math.floor(Math.random()*(Je-Ie+1))+Ie},Le}),function(T,H){var j={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));P.el.M_Collapsible=P,P.options=T.extend({},O.defaults,w),P.$headers=P.$el.children("li").children(".collapsible-header"),P.$headers.attr("tabindex",0),P._setupEventHandlers();var Y=P.$el.children("li.active").children(".collapsible-body");return P.options.accordion?Y.first().css("display","block"):Y.css("display","block"),P}return r(O,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var w=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(P){P.addEventListener("keydown",w._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var w=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(P){P.removeEventListener("keydown",w._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(w){var P=T(w.target).closest(".collapsible-header");if(w.target&&P.length){var Y=P.closest(".collapsible");if(Y[0]===this.el){var ne=P.closest("li"),ae=Y.children("li"),oe=ne[0].classList.contains("active"),fe=ae.index(ne);oe?this.close(fe):this.open(fe)}}}},{key:"_handleCollapsibleKeydown",value:function(w){w.keyCode===13&&this._handleCollapsibleClickBound(w)}},{key:"_animateIn",value:function(w){var P=this,Y=this.$el.children("li").eq(w);if(Y.length){var ne=Y.children(".collapsible-body");H.remove(ne[0]),ne.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var ae=ne.css("padding-top"),oe=ne.css("padding-bottom"),fe=ne[0].scrollHeight;ne.css({paddingTop:0,paddingBottom:0}),H({targets:ne[0],height:fe,paddingTop:ae,paddingBottom:oe,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(Re){ne.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),typeof P.options.onOpenEnd=="function"&&P.options.onOpenEnd.call(P,Y[0])}})}}},{key:"_animateOut",value:function(w){var P=this,Y=this.$el.children("li").eq(w);if(Y.length){var ne=Y.children(".collapsible-body");H.remove(ne[0]),ne.css("overflow","hidden"),H({targets:ne[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){ne.css({height:"",overflow:"",padding:"",display:""}),typeof P.options.onCloseEnd=="function"&&P.options.onCloseEnd.call(P,Y[0])}})}}},{key:"open",value:function(w){var P=this,Y=this.$el.children("li").eq(w);if(Y.length&&!Y[0].classList.contains("active")){if(typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,Y[0]),this.options.accordion){var ne=this.$el.children("li"),ae=this.$el.children("li.active");ae.each(function(oe){var fe=ne.index(T(oe));P.close(fe)})}Y[0].classList.add("active"),this._animateIn(w)}}},{key:"close",value:function(w){var P=this.$el.children("li").eq(w);P.length&&P[0].classList.contains("active")&&(typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,P[0]),P[0].classList.remove("active"),this._animateOut(w))}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Collapsible}},{key:"defaults",get:function(){return j}}]),O}(o);M.Collapsible=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"collapsible","M_Collapsible")}(cash,M.anime),function(T,H){var j={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_Dropdown=P,O._dropdowns.push(P),P.id=M.getIdFromTrigger(S),P.dropdownEl=document.getElementById(P.id),P.$dropdownEl=T(P.dropdownEl),P.options=T.extend({},O.defaults,w),P.isOpen=!1,P.isScrollable=!1,P.isTouchMoving=!1,P.focusedIndex=-1,P.filterQuery=[],P.options.container?T(P.options.container).append(P.dropdownEl):P.$el.after(P.dropdownEl),P._makeDropdownFocusable(),P._resetFilterQueryBound=P._resetFilterQuery.bind(P),P._handleDocumentClickBound=P._handleDocumentClick.bind(P),P._handleDocumentTouchmoveBound=P._handleDocumentTouchmove.bind(P),P._handleDropdownClickBound=P._handleDropdownClick.bind(P),P._handleDropdownKeydownBound=P._handleDropdownKeydown.bind(P),P._handleTriggerKeydownBound=P._handleTriggerKeydown.bind(P),P._setupEventHandlers(),P}return r(O,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),O._dropdowns.splice(O._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(w){w.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(w){var P=w.toElement||w.relatedTarget,Y=!!T(P).closest(".dropdown-content").length,ne=!1,ae=T(P).closest(".dropdown-trigger");ae.length&&!!ae[0].M_Dropdown&&ae[0].M_Dropdown.isOpen&&(ne=!0),!ne&&!Y&&this.close()}},{key:"_handleDocumentClick",value:function(w){var P=this,Y=T(w.target);this.options.closeOnClick&&Y.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){P.close()},0):(Y.closest(".dropdown-trigger").length||!Y.closest(".dropdown-content").length)&&setTimeout(function(){P.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(w){(w.which===M.keys.ARROW_DOWN||w.which===M.keys.ENTER)&&!this.isOpen&&(w.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(w){var P=T(w.target);P.closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(w){if(typeof this.options.onItemClick=="function"){var P=T(w.target).closest("li")[0];this.options.onItemClick.call(this,P)}}},{key:"_handleDropdownKeydown",value:function(w){if(w.which===M.keys.TAB)w.preventDefault(),this.close();else if((w.which===M.keys.ARROW_DOWN||w.which===M.keys.ARROW_UP)&&this.isOpen){w.preventDefault();var P=w.which===M.keys.ARROW_DOWN?1:-1,Y=this.focusedIndex,ne=!1;do if(Y=Y+P,!!this.dropdownEl.children[Y]&&this.dropdownEl.children[Y].tabIndex!==-1){ne=!0;break}while(Y<this.dropdownEl.children.length&&Y>=0);ne&&(this.focusedIndex=Y,this._focusFocusedItem())}else if(w.which===M.keys.ENTER&&this.isOpen){var ae=this.dropdownEl.children[this.focusedIndex],oe=T(ae).find("a, button").first();oe.length?oe[0].click():ae&&ae.click()}else w.which===M.keys.ESC&&this.isOpen&&(w.preventDefault(),this.close());var fe=String.fromCharCode(w.which).toLowerCase(),Re=[9,13,27,38,40];if(fe&&Re.indexOf(w.which)===-1){this.filterQuery.push(fe);var Be=this.filterQuery.join(""),Oe=T(this.dropdownEl).find("li").filter(function(Ee){return T(Ee).text().toLowerCase().indexOf(Be)===0})[0];Oe&&(this.focusedIndex=T(Oe).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,T(this.dropdownEl).children().each(function(w){w.getAttribute("tabindex")||w.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var w=this.el.getBoundingClientRect(),P=this.dropdownEl.getBoundingClientRect(),Y=P.height,ne=P.width,ae=w.left-P.left,oe=w.top-P.top,fe={left:ae,top:oe,height:Y,width:ne},Re=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,Be=M.checkPossibleAlignments(this.el,Re,fe,this.options.coverTrigger?0:w.height),Oe="top",Ee=this.options.alignment;if(oe+=this.options.coverTrigger?0:w.height,this.isScrollable=!1,Be.top||(Be.bottom?Oe="bottom":(this.isScrollable=!0,Be.spaceOnTop>Be.spaceOnBottom?(Oe="bottom",Y+=Be.spaceOnTop,oe-=Be.spaceOnTop):Y+=Be.spaceOnBottom)),!Be[Ee]){var pt=Ee==="left"?"right":"left";Be[pt]?Ee=pt:Be.spaceOnLeft>Be.spaceOnRight?(Ee="right",ne+=Be.spaceOnLeft,ae-=Be.spaceOnLeft):(Ee="left",ne+=Be.spaceOnRight)}return Oe==="bottom"&&(oe=oe-P.height+(this.options.coverTrigger?w.height:0)),Ee==="right"&&(ae=ae-P.width+w.width),{x:ae,y:oe,verticalAlignment:Oe,horizontalAlignment:Ee,height:Y,width:ne}}},{key:"_animateIn",value:function(){var w=this;H.remove(this.dropdownEl),H({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(P){w.options.autoFocus&&w.dropdownEl.focus(),typeof w.options.onOpenEnd=="function"&&w.options.onOpenEnd.call(w,w.el)}})}},{key:"_animateOut",value:function(){var w=this;H.remove(this.dropdownEl),H({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(P){w._resetDropdownStyles(),typeof w.options.onCloseEnd=="function"&&w.options.onCloseEnd.call(w,w.el)}})}},{key:"_placeDropdown",value:function(){var w=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=w+"px";var P=this._getDropdownPosition();this.dropdownEl.style.left=P.x+"px",this.dropdownEl.style.top=P.y+"px",this.dropdownEl.style.height=P.height+"px",this.dropdownEl.style.width=P.width+"px",this.dropdownEl.style.transformOrigin=(P.horizontalAlignment==="left"?"0":"100%")+" "+(P.verticalAlignment==="top"?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){!this.isOpen||(this.isOpen=!1,this.focusedIndex=-1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Dropdown}},{key:"defaults",get:function(){return j}}]),O}(o);W._dropdowns=[],M.Dropdown=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"dropdown","M_Dropdown")}(cash,M.anime),function(T,H){var j={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_Modal=P,P.options=T.extend({},O.defaults,w),P.isOpen=!1,P.id=P.$el.attr("id"),P._openingTrigger=void 0,P.$overlay=T('<div class="modal-overlay"></div>'),P.el.tabIndex=0,P._nthModalOpened=0,O._count++,P._setupEventHandlers(),P}return r(O,[{key:"destroy",value:function(){O._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),O._count===1&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){O._count===0&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(w){var P=T(w.target).closest(".modal-trigger");if(P.length){var Y=M.getIdFromTrigger(P[0]),ne=document.getElementById(Y).M_Modal;ne&&ne.open(P),w.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(w){var P=T(w.target).closest(".modal-close");P.length&&this.close()}},{key:"_handleKeydown",value:function(w){w.keyCode===27&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(w){!this.el.contains(w.target)&&this._nthModalOpened===O._modalsOpen&&this.el.focus()}},{key:"_animateIn",value:function(){var w=this;T.extend(this.el.style,{display:"block",opacity:0}),T.extend(this.$overlay[0].style,{display:"block",opacity:0}),H({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var P={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){typeof w.options.onOpenEnd=="function"&&w.options.onOpenEnd.call(w,w.el,w._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(T.extend(P,{bottom:0,opacity:1}),H(P)):(T.extend(P,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),H(P))}},{key:"_animateOut",value:function(){var w=this;H({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var P={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){w.el.style.display="none",w.$overlay.remove(),typeof w.options.onCloseEnd=="function"&&w.options.onCloseEnd.call(w,w.el)}};this.el.classList.contains("bottom-sheet")?(T.extend(P,{bottom:"-100%",opacity:0}),H(P)):(T.extend(P,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),H(P))}},{key:"open",value:function(w){if(!this.isOpen)return this.isOpen=!0,O._modalsOpen++,this._nthModalOpened=O._modalsOpen,this.$overlay[0].style.zIndex=1e3+O._modalsOpen*2,this.el.style.zIndex=1e3+O._modalsOpen*2+1,this._openingTrigger=w?w[0]:void 0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),H.remove(this.el),H.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(!!this.isOpen)return this.isOpen=!1,O._modalsOpen--,this._nthModalOpened=0,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),O._modalsOpen===0&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),H.remove(this.el),H.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Modal}},{key:"defaults",get:function(){return j}}]),O}(o);W._modalsOpen=0,W._count=0,M.Modal=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"modal","M_Modal")}(cash,M.anime),function(T,H){var j={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_Materialbox=P,P.options=T.extend({},O.defaults,w),P.overlayActive=!1,P.doneAnimating=!0,P.placeholder=T("<div></div>").addClass("material-placeholder"),P.originalWidth=0,P.originalHeight=0,P.originInlineStyles=P.$el.attr("style"),P.caption=P.el.getAttribute("data-caption")||"",P.$el.before(P.placeholder),P.placeholder.append(P.$el),P._setupEventHandlers(),P}return r(O,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,T(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(w){this.doneAnimating===!1||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(w){w.keyCode===27&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=T();for(var w=this.placeholder[0].parentNode;w!==null&&!T(w).is(document);){var P=T(w);P.css("overflow")!=="visible"&&(P.css("overflow","visible"),this.ancestorsChanged===void 0?this.ancestorsChanged=P:this.ancestorsChanged=this.ancestorsChanged.add(P)),w=w.parentNode}}},{key:"_animateImageIn",value:function(){var w=this,P={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){w.doneAnimating=!0,typeof w.options.onOpenEnd=="function"&&w.options.onOpenEnd.call(w,w.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),this.maxWidth!=="none"&&(P.maxWidth=this.newWidth),this.maxHeight!=="none"&&(P.maxHeight=this.newHeight),H(P)}},{key:"_animateImageOut",value:function(){var w=this,P={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){w.placeholder.css({height:"",width:"",position:"",top:"",left:""}),w.attrWidth&&w.$el.attr("width",w.attrWidth),w.attrHeight&&w.$el.attr("height",w.attrHeight),w.$el.removeAttr("style"),w.originInlineStyles&&w.$el.attr("style",w.originInlineStyles),w.$el.removeClass("active"),w.doneAnimating=!0,w.ancestorsChanged.length&&w.ancestorsChanged.css("overflow",""),typeof w.options.onCloseEnd=="function"&&w.options.onCloseEnd.call(w,w.el)}};H(P)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var w=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=T('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){w.doneAnimating&&w.close()}),this.$el.before(this.$overlay);var P=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*P.left+"px",top:-1*P.top+"px"}),H.remove(this.el),H.remove(this.$overlay[0]),H({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),this.caption!==""&&(this.$photocaption&&H.remove(this.$photoCaption[0]),this.$photoCaption=T('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),T("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),H({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var Y=0,ne=this.originalWidth/this.windowWidth,ae=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,ne>ae?(Y=this.originalHeight/this.originalWidth,this.newWidth=this.windowWidth*.9,this.newHeight=this.windowWidth*.9*Y):(Y=this.originalWidth/this.originalHeight,this.newWidth=this.windowHeight*.9*Y,this.newHeight=this.windowHeight*.9),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var w=this;this._updateVars(),this.doneAnimating=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),H.remove(this.el),H.remove(this.$overlay[0]),this.caption!==""&&H.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),H({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){w.overlayActive=!1,w.$overlay.remove()}}),this._animateImageOut(),this.caption!==""&&H({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){w.$photoCaption.remove()}})}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Materialbox}},{key:"defaults",get:function(){return j}}]),O}(o);M.Materialbox=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"materialbox","M_Materialbox")}(cash,M.anime),function(T){var H={responsiveThreshold:0},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.el.M_Parallax=w,w.options=T.extend({},B.defaults,S),w._enabled=window.innerWidth>w.options.responsiveThreshold,w.$img=w.$el.find("img").first(),w.$img.each(function(){var P=this;P.complete&&T(P).trigger("load")}),w._updateParallax(),w._setupEventHandlers(),w._setupStyles(),B._parallaxes.push(w),w}return r(B,[{key:"destroy",value:function(){B._parallaxes.splice(B._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),B._parallaxes.length===0&&(B._handleScrollThrottled=M.throttle(B._handleScroll,5),window.addEventListener("scroll",B._handleScrollThrottled),B._handleWindowResizeThrottled=M.throttle(B._handleWindowResize,5),window.addEventListener("resize",B._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),B._parallaxes.length===0&&(window.removeEventListener("scroll",B._handleScrollThrottled),window.removeEventListener("resize",B._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var S=this.$el.height()>0?this.el.parentNode.offsetHeight:500,w=this.$img[0].offsetHeight,P=w-S,Y=this.$el.offset().top+S,ne=this.$el.offset().top,ae=M.getDocumentScrollTop(),oe=window.innerHeight,fe=ae+oe,Re=(fe-ne)/(S+oe),Be=P*Re;this._enabled?Y>ae&&ne<ae+oe&&(this.$img[0].style.transform="translate3D(-50%, "+Be+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_Parallax}},{key:"_handleScroll",value:function(){for(var S=0;S<B._parallaxes.length;S++){var w=B._parallaxes[S];w._updateParallax.call(w)}}},{key:"_handleWindowResize",value:function(){for(var S=0;S<B._parallaxes.length;S++){var w=B._parallaxes[S];w._enabled=window.innerWidth>w.options.responsiveThreshold}}},{key:"defaults",get:function(){return H}}]),B}(o);j._parallaxes=[],M.Parallax=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"parallax","M_Parallax")}(cash),function(T,H){var j={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_Tabs=P,P.options=T.extend({},O.defaults,w),P.$tabLinks=P.$el.children("li.tab").children("a"),P.index=0,P._setupActiveTabLink(),P.options.swipeable?P._setupSwipeableTabs():P._setupNormalTabs(),P._setTabsAndTabWidth(),P._createIndicator(),P._setupEventHandlers(),P}return r(O,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),this.tabWidth!==0&&this.tabsWidth!==0&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(w){var P=this,Y=T(w.target).closest("li.tab"),ne=T(w.target).closest("a");if(!(!ne.length||!ne.parent().hasClass("tab"))){if(Y.hasClass("disabled")){w.preventDefault();return}if(!ne.attr("target")){this.$activeTabLink.removeClass("active");var ae=this.$content;this.$activeTabLink=ne,this.$content=T(M.escapeHash(ne[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var oe=this.index;this.index=Math.max(this.$tabLinks.index(ne),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){typeof P.options.onShow=="function"&&P.options.onShow.call(P,P.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),typeof this.options.onShow=="function"&&this.options.onShow.call(this,this.$content[0]),ae.length&&!ae.is(this.$content)&&(ae[0].style.display="none",ae.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(oe),w.preventDefault()}}}},{key:"_createIndicator",value:function(){var w=this,P=document.createElement("li");P.classList.add("indicator"),this.el.appendChild(P),this._indicator=P,setTimeout(function(){w._indicator.style.left=w._calcLeftPos(w.$activeTabLink)+"px",w._indicator.style.right=w._calcRightPos(w.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=T(this.$tabLinks.filter('[href="'+location.hash+'"]')),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=T(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var w=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var P=T();this.$tabLinks.each(function(ae){var oe=T(M.escapeHash(ae.hash));oe.addClass("carousel-item"),P=P.add(oe)});var Y=T('<div class="tabs-content carousel carousel-slider"></div>');P.first().before(Y),Y.append(P),P[0].style.display="";var ne=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(Y[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(ae){var oe=w.index;w.index=T(ae).index(),w.$activeTabLink.removeClass("active"),w.$activeTabLink=w.$tabLinks.eq(w.index),w.$activeTabLink.addClass("active"),w._animateIndicator(oe),typeof w.options.onShow=="function"&&w.options.onShow.call(w,w.$content[0])}}),this._tabsCarousel.set(ne)}},{key:"_teardownSwipeableTabs",value:function(){var w=this._tabsCarousel.$el;this._tabsCarousel.destroy(),w.after(w.children()),w.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(w){if(w.hash){var P=T(M.escapeHash(w.hash));P.length&&(P[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(w){if(w.hash){var P=T(M.escapeHash(w.hash));P.length&&(P[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(w){return Math.ceil(this.tabsWidth-w.position().left-w[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(w){return Math.floor(w.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(w){var P=0,Y=0;this.index-w>=0?P=90:Y=90;var ne={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:P},right:{value:this._calcRightPos(this.$activeTabLink),delay:Y},duration:this.options.duration,easing:"easeOutQuad"};H.remove(this._indicator),H(ne)}},{key:"select",value:function(w){var P=this.$tabLinks.filter('[href="#'+w+'"]');P.length&&P.trigger("click")}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Tabs}},{key:"defaults",get:function(){return j}}]),O}(o);M.Tabs=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"tabs","M_Tabs")}(cash,M.anime),function(T,H){var j={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_Tooltip=P,P.options=T.extend({},O.defaults,w),P.isOpen=!1,P.isHovered=!1,P.isFocused=!1,P._appendTooltipEl(),P._setupEventHandlers(),P}return r(O,[{key:"destroy",value:function(){T(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var w=document.createElement("div");w.classList.add("material-tooltip"),this.tooltipEl=w;var P=document.createElement("div");P.classList.add("tooltip-content"),P.innerHTML=this.options.html,w.appendChild(P),document.body.appendChild(w)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(w){this.isOpen||(w=w===void 0?!0:void 0,this.isOpen=!0,this.options=T.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(w))}},{key:"close",value:function(){!this.isOpen||(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var w=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){w.isHovered||w.isFocused||w._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(w){var P=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){!P.isHovered&&!P.isFocused&&!w||P._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var w=this.el,P=this.tooltipEl,Y=w.offsetHeight,ne=w.offsetWidth,ae=P.offsetHeight,oe=P.offsetWidth,fe=void 0,Re=this.options.margin,Be=void 0,Oe=void 0;this.xMovement=0,this.yMovement=0,Be=w.getBoundingClientRect().top+M.getDocumentScrollTop(),Oe=w.getBoundingClientRect().left+M.getDocumentScrollLeft(),this.options.position==="top"?(Be+=-ae-Re,Oe+=ne/2-oe/2,this.yMovement=-this.options.transitionMovement):this.options.position==="right"?(Be+=Y/2-ae/2,Oe+=ne+Re,this.xMovement=this.options.transitionMovement):this.options.position==="left"?(Be+=Y/2-ae/2,Oe+=-oe-Re,this.xMovement=-this.options.transitionMovement):(Be+=Y+Re,Oe+=ne/2-oe/2,this.yMovement=this.options.transitionMovement),fe=this._repositionWithinScreen(Oe,Be,oe,ae),T(P).css({top:fe.y+"px",left:fe.x+"px"})}},{key:"_repositionWithinScreen",value:function(w,P,Y,ne){var ae=M.getDocumentScrollLeft(),oe=M.getDocumentScrollTop(),fe=w-ae,Re=P-oe,Be={left:fe,top:Re,width:Y,height:ne},Oe=this.options.margin+this.options.transitionMovement,Ee=M.checkWithinContainer(document.body,Be,Oe);return Ee.left?fe=Oe:Ee.right&&(fe-=fe+Y-window.innerWidth),Ee.top?Re=Oe:Ee.bottom&&(Re-=Re+ne-window.innerHeight),{x:fe+ae,y:Re+oe}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",H.remove(this.tooltipEl),H({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){H.remove(this.tooltipEl),H({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var w={},P=this.el.getAttribute("data-tooltip"),Y=this.el.getAttribute("data-position");return P&&(w.html=P),Y&&(w.position=Y),w}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Tooltip}},{key:"defaults",get:function(){return j}}]),O}(o);M.Tooltip=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"tooltip","M_Tooltip")}(cash,M.anime),function(T){var H=H||{},j=document.querySelectorAll.bind(document);function W(ae){return ae!==null&&ae===ae.window}function B(ae){return W(ae)?ae:ae.nodeType===9&&ae.defaultView}function O(ae){var oe,fe,Re={top:0,left:0},Be=ae&&ae.ownerDocument;return oe=Be.documentElement,typeof ae.getBoundingClientRect!="undefined"&&(Re=ae.getBoundingClientRect()),fe=B(Be),{top:Re.top+fe.pageYOffset-oe.clientTop,left:Re.left+fe.pageXOffset-oe.clientLeft}}function S(ae){var oe="";for(var fe in ae)ae.hasOwnProperty(fe)&&(oe+=fe+":"+ae[fe]+";");return oe}var w={duration:750,show:function(ae,oe){if(ae.button===2)return!1;var fe=oe||this,Re=document.createElement("div");Re.className="waves-ripple",fe.appendChild(Re);var Be=O(fe),Oe=ae.pageY-Be.top,Ee=ae.pageX-Be.left,pt="scale("+fe.clientWidth/100*10+")";"touches"in ae&&(Oe=ae.touches[0].pageY-Be.top,Ee=ae.touches[0].pageX-Be.left),Re.setAttribute("data-hold",Date.now()),Re.setAttribute("data-scale",pt),Re.setAttribute("data-x",Ee),Re.setAttribute("data-y",Oe);var Ze={top:Oe+"px",left:Ee+"px"};Re.className=Re.className+" waves-notransition",Re.setAttribute("style",S(Ze)),Re.className=Re.className.replace("waves-notransition",""),Ze["-webkit-transform"]=pt,Ze["-moz-transform"]=pt,Ze["-ms-transform"]=pt,Ze["-o-transform"]=pt,Ze.transform=pt,Ze.opacity="1",Ze["-webkit-transition-duration"]=w.duration+"ms",Ze["-moz-transition-duration"]=w.duration+"ms",Ze["-o-transition-duration"]=w.duration+"ms",Ze["transition-duration"]=w.duration+"ms",Ze["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Ze["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Ze["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Ze["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Re.setAttribute("style",S(Ze))},hide:function(ae){P.touchup(ae);var oe=this;oe.clientWidth*1.4;var fe=null,Re=oe.getElementsByClassName("waves-ripple");if(Re.length>0)fe=Re[Re.length-1];else return!1;var Be=fe.getAttribute("data-x"),Oe=fe.getAttribute("data-y"),Ee=fe.getAttribute("data-scale"),pt=Date.now()-Number(fe.getAttribute("data-hold")),Ze=350-pt;Ze<0&&(Ze=0),setTimeout(function(){var ct={top:Oe+"px",left:Be+"px",opacity:"0","-webkit-transition-duration":w.duration+"ms","-moz-transition-duration":w.duration+"ms","-o-transition-duration":w.duration+"ms","transition-duration":w.duration+"ms","-webkit-transform":Ee,"-moz-transform":Ee,"-ms-transform":Ee,"-o-transform":Ee,transform:Ee};fe.setAttribute("style",S(ct)),setTimeout(function(){try{oe.removeChild(fe)}catch{return!1}},w.duration)},Ze)},wrapInput:function(ae){for(var oe=0;oe<ae.length;oe++){var fe=ae[oe];if(fe.tagName.toLowerCase()==="input"){var Re=fe.parentNode;if(Re.tagName.toLowerCase()==="i"&&Re.className.indexOf("waves-effect")!==-1)continue;var Be=document.createElement("i");Be.className=fe.className+" waves-input-wrapper";var Oe=fe.getAttribute("style");Oe||(Oe=""),Be.setAttribute("style",Oe),fe.className="waves-button-input",fe.removeAttribute("style"),Re.replaceChild(Be,fe),Be.appendChild(fe)}}}},P={touches:0,allowEvent:function(ae){var oe=!0;return ae.type==="touchstart"?P.touches+=1:ae.type==="touchend"||ae.type==="touchcancel"?setTimeout(function(){P.touches>0&&(P.touches-=1)},500):ae.type==="mousedown"&&P.touches>0&&(oe=!1),oe},touchup:function(ae){P.allowEvent(ae)}};function Y(ae){if(P.allowEvent(ae)===!1)return null;for(var oe=null,fe=ae.target||ae.srcElement;fe.parentNode!==null;){if(!(fe instanceof SVGElement)&&fe.className.indexOf("waves-effect")!==-1){oe=fe;break}fe=fe.parentNode}return oe}function ne(ae){var oe=Y(ae);oe!==null&&(w.show(ae,oe),"ontouchstart"in T&&(oe.addEventListener("touchend",w.hide,!1),oe.addEventListener("touchcancel",w.hide,!1)),oe.addEventListener("mouseup",w.hide,!1),oe.addEventListener("mouseleave",w.hide,!1),oe.addEventListener("dragend",w.hide,!1))}H.displayEffect=function(ae){ae=ae||{},"duration"in ae&&(w.duration=ae.duration),w.wrapInput(j(".waves-effect")),"ontouchstart"in T&&document.body.addEventListener("touchstart",ne,!1),document.body.addEventListener("mousedown",ne,!1)},H.attach=function(ae){ae.tagName.toLowerCase()==="input"&&(w.wrapInput([ae]),ae=ae.parentNode),"ontouchstart"in T&&ae.addEventListener("touchstart",ne,!1),ae.addEventListener("mousedown",ne,!1)},T.Waves=H,document.addEventListener("DOMContentLoaded",function(){H.displayEffect()},!1)}(window),function(T,H){var j={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},W=function(){function B(O){h(this,B),this.options=T.extend({},B.defaults,O),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,B._toasts.length===0&&B._createContainer(),B._toasts.push(this);var S=this._createToast();S.M_Toast=this,this.el=S,this.$el=T(S),this._animateIn(),this._setTimer()}return r(B,[{key:"_createToast",value:function(){var S=document.createElement("div");return S.classList.add("toast"),this.options.classes.length&&T(S).addClass(this.options.classes),(typeof HTMLElement=="object"?this.message instanceof HTMLElement:this.message&&typeof this.message=="object"&&this.message!==null&&this.message.nodeType===1&&typeof this.message.nodeName=="string")?S.appendChild(this.message):this.message.jquery?T(S).append(this.message[0]):S.innerHTML=this.message,B._container.appendChild(S),S}},{key:"_animateIn",value:function(){H({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var S=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){S.panning||(S.timeRemaining-=20),S.timeRemaining<=0&&S.dismiss()},20))}},{key:"dismiss",value:function(){var S=this;window.clearInterval(this.counterInterval);var w=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+w+"px)",this.el.style.opacity=0),H({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){typeof S.options.completeCallback=="function"&&S.options.completeCallback(),S.$el.remove(),B._toasts.splice(B._toasts.indexOf(S),1),B._toasts.length===0&&B._removeContainer()}})}}],[{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_Toast}},{key:"_createContainer",value:function(){var S=document.createElement("div");S.setAttribute("id","toast-container"),S.addEventListener("touchstart",B._onDragStart),S.addEventListener("touchmove",B._onDragMove),S.addEventListener("touchend",B._onDragEnd),S.addEventListener("mousedown",B._onDragStart),document.addEventListener("mousemove",B._onDragMove),document.addEventListener("mouseup",B._onDragEnd),document.body.appendChild(S),B._container=S}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",B._onDragMove),document.removeEventListener("mouseup",B._onDragEnd),T(B._container).remove(),B._container=null}},{key:"_onDragStart",value:function(S){if(S.target&&T(S.target).closest(".toast").length){var w=T(S.target).closest(".toast"),P=w[0].M_Toast;P.panning=!0,B._draggedToast=P,P.el.classList.add("panning"),P.el.style.transition="",P.startingXPos=B._xPos(S),P.time=Date.now(),P.xPos=B._xPos(S)}}},{key:"_onDragMove",value:function(S){if(B._draggedToast){S.preventDefault();var w=B._draggedToast;w.deltaX=Math.abs(w.xPos-B._xPos(S)),w.xPos=B._xPos(S),w.velocityX=w.deltaX/(Date.now()-w.time),w.time=Date.now();var P=w.xPos-w.startingXPos,Y=w.el.offsetWidth*w.options.activationPercent;w.el.style.transform="translateX("+P+"px)",w.el.style.opacity=1-Math.abs(P/Y)}}},{key:"_onDragEnd",value:function(){if(B._draggedToast){var S=B._draggedToast;S.panning=!1,S.el.classList.remove("panning");var w=S.xPos-S.startingXPos,P=S.el.offsetWidth*S.options.activationPercent,Y=Math.abs(w)>P||S.velocityX>1;Y?(S.wasSwiped=!0,S.dismiss()):(S.el.style.transition="transform .2s, opacity .2s",S.el.style.transform="",S.el.style.opacity=""),B._draggedToast=null}}},{key:"_xPos",value:function(S){return S.targetTouches&&S.targetTouches.length>=1?S.targetTouches[0].clientX:S.clientX}},{key:"dismissAll",value:function(){for(var S in B._toasts)B._toasts[S].dismiss()}},{key:"defaults",get:function(){return j}}]),B}();W._toasts=[],W._container=null,W._draggedToast=null,M.Toast=W,M.toast=function(B){return new W(B)}}(cash,M.anime),function(T,H){var j={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_Sidenav=P,P.id=P.$el.attr("id"),P.options=T.extend({},O.defaults,w),P.isOpen=!1,P.isFixed=P.el.classList.contains("sidenav-fixed"),P.isDragged=!1,P.lastWindowWidth=window.innerWidth,P.lastWindowHeight=window.innerHeight,P._createOverlay(),P._createDragTarget(),P._setupEventHandlers(),P._setupClasses(),P._setupFixed(),O._sidenavs.push(P),P}return r(O,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var w=O._sidenavs.indexOf(this);w>=0&&O._sidenavs.splice(w,1)}},{key:"_createOverlay",value:function(){var w=document.createElement("div");this._closeBound=this.close.bind(this),w.classList.add("sidenav-overlay"),w.addEventListener("click",this._closeBound),document.body.appendChild(w),this._overlay=w}},{key:"_setupEventHandlers",value:function(){O._sidenavs.length===0&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){O._sidenavs.length===1&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(w){var P=T(w.target).closest(".sidenav-trigger");if(w.target&&P.length){var Y=M.getIdFromTrigger(P[0]),ne=document.getElementById(Y).M_Sidenav;ne&&ne.open(P),w.preventDefault()}}},{key:"_startDrag",value:function(w){var P=w.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=P,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,H.remove(this.el),H.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(w){var P=w.targetTouches[0].clientX,Y=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-P),this._xPos=P,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==Y&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(w){if(!(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)){this.isDragged||this._startDrag(w),this._dragMoveUpdate(w);var P=this._xPos-this._startingXpos,Y=P>0?"right":"left";P=Math.min(this._width,Math.abs(P)),this.options.edge===Y&&(P=0);var ne=P,ae="translateX(-100%)";this.options.edge==="right"&&(ae="translateX(100%)",ne=-ne),this.percentOpen=Math.min(1,P/this._width),this.el.style.transform=ae+" translateX("+ne+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(w){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(w),this._dragMoveUpdate(w);var P=this._xPos-this._startingXpos,Y=P>0?"right":"left";P=Math.min(this._width,Math.abs(P)),this.options.edge!==Y&&(P=0);var ne=-P;this.options.edge==="right"&&(ne=-ne),this.percentOpen=Math.min(1,1-P/this._width),this.el.style.transform="translateX("+ne+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(w){var P=T(w.target).closest(".sidenav-close");P.length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){this.options.edge==="right"&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var w=document.createElement("div");w.classList.add("drag-target"),document.body.appendChild(w),this.dragTarget=w}},{key:"_preventBodyScrolling",value:function(){var w=document.body;w.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){var w=document.body;w.style.overflow=""}},{key:"open",value:function(){this.isOpen!==!0&&(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(H.remove(this.el),H({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),(!this.isDragged||this.percentOpen!=1)&&this._animateIn()))}},{key:"close",value:function(){if(this.isOpen!==!1)if(this.isOpen=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var w=this.options.edge==="left"?"-105%":"105%";this.el.style.transform="translateX("+w+")"}else this._enableBodyScrolling(),!this.isDragged||this.percentOpen!=0?this._animateOut():this._overlay.style.display="none"}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var w=this,P=this.options.edge==="left"?-1:1;this.isDragged&&(P=this.options.edge==="left"?P+this.percentOpen:P-this.percentOpen),H.remove(this.el),H({targets:this.el,translateX:[P*100+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){typeof w.options.onOpenEnd=="function"&&w.options.onOpenEnd.call(w,w.el)}})}},{key:"_animateOverlayIn",value:function(){var w=0;this.isDragged?w=this.percentOpen:T(this._overlay).css({display:"block"}),H.remove(this._overlay),H({targets:this._overlay,opacity:[w,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var w=this,P=this.options.edge==="left"?-1:1,Y=0;this.isDragged&&(Y=this.options.edge==="left"?P+this.percentOpen:P-this.percentOpen),H.remove(this.el),H({targets:this.el,translateX:[Y*100+"%",P*105+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){typeof w.options.onCloseEnd=="function"&&w.options.onCloseEnd.call(w,w.el)}})}},{key:"_animateOverlayOut",value:function(){var w=this;H.remove(this._overlay),H({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){T(w._overlay).css("display","none")}})}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Sidenav}},{key:"defaults",get:function(){return j}}]),O}(o);W._sidenavs=[],M.Sidenav=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"sidenav","M_Sidenav")}(cash,M.anime),function(T,H){var j={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(B){return'a[href="#'+B+'"]'}},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_ScrollSpy=P,P.options=T.extend({},O.defaults,w),O._elements.push(P),O._count++,O._increment++,P.tickId=-1,P.id=O._increment,P._setupEventHandlers(),P._handleWindowScroll(),P}return r(O,[{key:"destroy",value:function(){O._elements.splice(O._elements.indexOf(this),1),O._elementsInView.splice(O._elementsInView.indexOf(this),1),O._visibleElements.splice(O._visibleElements.indexOf(this.$el),1),O._count--,this._removeEventHandlers(),T(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var w=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=w.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),O._count===1&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){O._count===0&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(w){for(var P=T(w.target),Y=O._elements.length-1;Y>=0;Y--){var ne=O._elements[Y];if(P.is('a[href="#'+ne.$el.attr("id")+'"]')){w.preventDefault();var ae=ne.$el.offset().top+1;H({targets:[document.documentElement,document.body],scrollTop:ae-ne.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){O._ticks++;for(var w=M.getDocumentScrollTop(),P=M.getDocumentScrollLeft(),Y=P+window.innerWidth,ne=w+window.innerHeight,ae=O._findElements(w,Y,ne,P),oe=0;oe<ae.length;oe++){var fe=ae[oe],Re=fe.tickId;Re<0&&fe._enter(),fe.tickId=O._ticks}for(var Be=0;Be<O._elementsInView.length;Be++){var Oe=O._elementsInView[Be],Ee=Oe.tickId;Ee>=0&&Ee!==O._ticks&&(Oe._exit(),Oe.tickId=-1)}O._elementsInView=ae}},{key:"_enter",value:function(){O._visibleElements=O._visibleElements.filter(function(w){return w.height()!=0}),O._visibleElements[0]?(T(this.options.getActiveElement(O._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),O._visibleElements[0][0].M_ScrollSpy&&this.id<O._visibleElements[0][0].M_ScrollSpy.id?O._visibleElements.unshift(this.$el):O._visibleElements.push(this.$el)):O._visibleElements.push(this.$el),T(this.options.getActiveElement(O._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var w=this;O._visibleElements=O._visibleElements.filter(function(P){return P.height()!=0}),O._visibleElements[0]&&(T(this.options.getActiveElement(O._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),O._visibleElements=O._visibleElements.filter(function(P){return P.attr("id")!=w.$el.attr("id")}),O._visibleElements[0]&&T(this.options.getActiveElement(O._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_ScrollSpy}},{key:"_findElements",value:function(w,P,Y,ne){for(var ae=[],oe=0;oe<O._elements.length;oe++){var fe=O._elements[oe],Re=w+fe.options.scrollOffset||200;if(fe.$el.height()>0){var Be=fe.$el.offset().top,Oe=fe.$el.offset().left,Ee=Oe+fe.$el.width(),pt=Be+fe.$el.height(),Ze=!(Oe>P||Ee<ne||Be>Y||pt<Re);Ze&&ae.push(fe)}}return ae}},{key:"defaults",get:function(){return j}}]),O}(o);W._elements=[],W._elementsInView=[],W._visibleElements=[],W._count=0,W._increment=0,W._ticks=0,M.ScrollSpy=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(T){var H={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(W,B,O){return W.indexOf(O)-B.indexOf(O)}},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.el.M_Autocomplete=w,w.options=T.extend({},B.defaults,S),w.isOpen=!1,w.count=0,w.activeIndex=-1,w.oldVal,w.$inputField=w.$el.closest(".input-field"),w.$active=T(),w._mousedown=!1,w._setupDropdown(),w._setupEventHandlers(),w}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),typeof window.ontouchstart!="undefined"&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),typeof window.ontouchstart!="undefined"&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var S=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),T(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(w){S.selectOption(T(w))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(S){S.type==="keyup"&&(B._keydown=!1),this.count=0;var w=this.el.value.toLowerCase();S.keyCode===13||S.keyCode===38||S.keyCode===40||(this.oldVal!==w&&(M.tabPressed||S.type!=="focus")&&this.open(),this.oldVal=w)}},{key:"_handleInputKeydown",value:function(S){B._keydown=!0;var w=S.keyCode,P=void 0,Y=T(this.container).children("li").length;if(w===M.keys.ENTER&&this.activeIndex>=0){P=T(this.container).children("li").eq(this.activeIndex),P.length&&(this.selectOption(P),S.preventDefault());return}(w===M.keys.ARROW_UP||w===M.keys.ARROW_DOWN)&&(S.preventDefault(),w===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,w===M.keys.ARROW_DOWN&&this.activeIndex<Y-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=T(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(S){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(S){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(S){this._mousedown=!1}},{key:"_highlight",value:function(S,w){var P=w.find("img"),Y=w.text().toLowerCase().indexOf(""+S.toLowerCase()),ne=Y+S.length-1,ae=w.text().slice(0,Y),oe=w.text().slice(Y,ne+1),fe=w.text().slice(ne+1);w.html("<span>"+ae+"<span class='highlight'>"+oe+"</span>"+fe+"</span>"),P.length&&w.prepend(P)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){T(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(S){var w=S.text().trim();this.el.value=w,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),typeof this.options.onAutocomplete=="function"&&this.options.onAutocomplete.call(this,w)}},{key:"_renderDropdown",value:function(S,w){var P=this;this._resetAutocomplete();var Y=[];for(var ne in S)if(S.hasOwnProperty(ne)&&ne.toLowerCase().indexOf(w)!==-1){if(this.count>=this.options.limit)break;var ae={data:S[ne],key:ne};Y.push(ae),this.count++}if(this.options.sortFunction){var oe=function(Oe,Ee){return P.options.sortFunction(Oe.key.toLowerCase(),Ee.key.toLowerCase(),w.toLowerCase())};Y.sort(oe)}for(var fe=0;fe<Y.length;fe++){var Re=Y[fe],Be=T("<li></li>");Re.data?Be.append('<img src="'+Re.data+'" class="right circle"><span>'+Re.key+"</span>"):Be.append("<span>"+Re.key+"</span>"),T(this.container).append(Be),this._highlight(w,Be)}}},{key:"open",value:function(){var S=this.el.value.toLowerCase();this._resetAutocomplete(),S.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,S)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(S){var w=this.el.value.toLowerCase();this.options.data=S,this.isOpen&&this._renderDropdown(S,w)}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_Autocomplete}},{key:"defaults",get:function(){return H}}]),B}(o);j._keydown=!1,M.Autocomplete=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"autocomplete","M_Autocomplete")}(cash),function(T){M.updateTextFields=function(){var H="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";T(H).each(function(j,W){var B=T(this);j.value.length>0||T(j).is(":focus")||j.autofocus||B.attr("placeholder")!==null?B.siblings("label").addClass("active"):j.validity?B.siblings("label").toggleClass("active",j.validity.badInput===!0):B.siblings("label").removeClass("active")})},M.validate_field=function(H){var j=H.attr("data-length")!==null,W=parseInt(H.attr("data-length")),B=H[0].value.length;B===0&&H[0].validity.badInput===!1&&!H.is(":required")?H.hasClass("validate")&&(H.removeClass("valid"),H.removeClass("invalid")):H.hasClass("validate")&&(H.is(":valid")&&j&&B<=W||H.is(":valid")&&!j?(H.removeClass("invalid"),H.addClass("valid")):(H.removeClass("valid"),H.addClass("invalid")))},M.textareaAutoResize=function(H){if(H instanceof Element&&(H=T(H)),!H.length){console.error("No textarea element found");return}var j=T(".hiddendiv").first();j.length||(j=T('<div class="hiddendiv common"></div>'),T("body").append(j));var W=H.css("font-family"),B=H.css("font-size"),O=H.css("line-height"),S=H.css("padding-top"),w=H.css("padding-right"),P=H.css("padding-bottom"),Y=H.css("padding-left");B&&j.css("font-size",B),W&&j.css("font-family",W),O&&j.css("line-height",O),S&&j.css("padding-top",S),w&&j.css("padding-right",w),P&&j.css("padding-bottom",P),Y&&j.css("padding-left",Y),H.data("original-height")||H.data("original-height",H.height()),H.attr("wrap")==="off"&&j.css("overflow-wrap","normal").css("white-space","pre"),j.text(H[0].value+`
`);var ne=j.html().replace(/\n/g,"<br>");j.html(ne),H[0].offsetWidth>0&&H[0].offsetHeight>0?j.css("width",H.width()+"px"):j.css("width",window.innerWidth/2+"px"),H.data("original-height")<=j.innerHeight()?H.css("height",j.innerHeight()+"px"):H[0].value.length<H.data("previous-length")&&H.css("height",H.data("original-height")+"px"),H.data("previous-length",H[0].value.length)},T(document).ready(function(){var H="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";T(document).on("change",H,function(){(this.value.length!==0||T(this).attr("placeholder")!==null)&&T(this).siblings("label").addClass("active"),M.validate_field(T(this))}),T(document).ready(function(){M.updateTextFields()}),T(document).on("reset",function(B){var O=T(B.target);O.is("form")&&(O.find(H).removeClass("valid").removeClass("invalid"),O.find(H).each(function(S){this.value.length&&T(this).siblings("label").removeClass("active")}),setTimeout(function(){O.find("select").each(function(){this.M_FormSelect&&T(this).trigger("change")})},0))}),document.addEventListener("focus",function(B){T(B.target).is(H)&&T(B.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(B){var O=T(B.target);if(O.is(H)){var S=".prefix";O[0].value.length===0&&O[0].validity.badInput!==!0&&O.attr("placeholder")===null&&(S+=", label"),O.siblings(S).removeClass("active"),M.validate_field(O)}},!0);var j="input[type=radio], input[type=checkbox]";T(document).on("keyup",j,function(B){if(B.which===M.keys.TAB){T(this).addClass("tabbed");var O=T(this);O.one("blur",function(S){T(this).removeClass("tabbed")});return}});var W=".materialize-textarea";T(W).each(function(){var B=T(this);B.data("original-height",B.height()),B.data("previous-length",this.value.length),M.textareaAutoResize(B)}),T(document).on("keyup",W,function(){M.textareaAutoResize(T(this))}),T(document).on("keydown",W,function(){M.textareaAutoResize(T(this))}),T(document).on("change",'.file-field input[type="file"]',function(){for(var B=T(this).closest(".file-field"),O=B.find("input.file-path"),S=T(this)[0].files,w=[],P=0;P<S.length;P++)w.push(S[P].name);O[0].value=w.join(", "),O.trigger("change")})})}(cash),function(T,H){var j={indicators:!0,height:400,duration:500,interval:6e3},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_Slider=P,P.options=T.extend({},O.defaults,w),P.$slider=P.$el.find(".slides"),P.$slides=P.$slider.children("li"),P.activeIndex=P.$slides.filter(function(Y){return T(Y).hasClass("active")}).first().index(),P.activeIndex!=-1&&(P.$active=P.$slides.eq(P.activeIndex)),P._setSliderHeight(),P.$slides.find(".caption").each(function(Y){P._animateCaptionIn(Y,0)}),P.$slides.find("img").each(function(Y){var ne="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";T(Y).attr("src")!==ne&&(T(Y).css("background-image",'url("'+T(Y).attr("src")+'")'),T(Y).attr("src",ne))}),P._setupIndicators(),P.$active?P.$active.css("display","block"):(P.$slides.first().addClass("active"),H({targets:P.$slides.first()[0],opacity:1,duration:P.options.duration,easing:"easeOutQuad"}),P.activeIndex=0,P.$active=P.$slides.eq(P.activeIndex),P.options.indicators&&P.$indicators.eq(P.activeIndex).addClass("active")),P.$active.find("img").each(function(Y){H({targets:P.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:P.options.duration,easing:"easeOutQuad"})}),P._setupEventHandlers(),P.start(),P}return r(O,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var w=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(P){P.addEventListener("click",w._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var w=this;this.options.indicators&&this.$indicators.each(function(P){P.removeEventListener("click",w._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(w){var P=T(w.target).index();this.set(P)}},{key:"_handleInterval",value:function(){var w=this.$slider.find(".active").index();this.$slides.length===w+1?w=0:w+=1,this.set(w)}},{key:"_animateCaptionIn",value:function(w,P){var Y={targets:w,opacity:0,duration:P,easing:"easeOutQuad"};T(w).hasClass("center-align")?Y.translateY=-100:T(w).hasClass("right-align")?Y.translateX=100:T(w).hasClass("left-align")&&(Y.translateX=-100),H(Y)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var w=this;this.options.indicators&&(this.$indicators=T('<ul class="indicators"></ul>'),this.$slides.each(function(P,Y){var ne=T('<li class="indicator-item"></li>');w.$indicators.append(ne[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(w){var P=this;if(w>=this.$slides.length?w=0:w<0&&(w=this.$slides.length-1),this.activeIndex!=w){this.$active=this.$slides.eq(this.activeIndex);var Y=this.$active.find(".caption");this.$active.removeClass("active"),H({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){P.$slides.not(".active").each(function(ne){H({targets:ne,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(Y[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(w).addClass("active")),H({targets:this.$slides.eq(w)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),H({targets:this.$slides.eq(w).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(w).addClass("active"),this.activeIndex=w,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var w=this.activeIndex+1;w>=this.$slides.length?w=0:w<0&&(w=this.$slides.length-1),this.set(w)}},{key:"prev",value:function(){var w=this.activeIndex-1;w>=this.$slides.length?w=0:w<0&&(w=this.$slides.length-1),this.set(w)}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Slider}},{key:"defaults",get:function(){return j}}]),O}(o);M.Slider=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"slider","M_Slider")}(cash,M.anime),function(T,H){T(document).on("click",".card",function(j){if(T(this).children(".card-reveal").length){var W=T(j.target).closest(".card");W.data("initialOverflow")===void 0&&W.data("initialOverflow",W.css("overflow")===void 0?"":W.css("overflow"));var B=T(this).find(".card-reveal");T(j.target).is(T(".card-reveal .card-title"))||T(j.target).is(T(".card-reveal .card-title i"))?H({targets:B[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(O){var S=O.animatables[0].target;T(S).css({display:"none"}),W.css("overflow",W.data("initialOverflow"))}}):(T(j.target).is(T(".card .activator"))||T(j.target).is(T(".card .activator i")))&&(W.css("overflow","hidden"),B.css({display:"block"}),H({targets:B[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(T){var H={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.el.M_Chips=w,w.options=T.extend({},B.defaults,S),w.$el.addClass("chips input-field"),w.chipsData=[],w.$chips=T(),w._setupInput(),w.hasAutocomplete=Object.keys(w.options.autocompleteOptions).length>0,w.$input.attr("id")||w.$input.attr("id",M.guid()),w.options.data.length&&(w.chipsData=w.options.data,w._renderChips(w.chipsData)),w.hasAutocomplete&&w._setupAutocomplete(),w._setPlaceholder(),w._setupLabel(),w._setupEventHandlers(),w}return r(B,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",B._handleChipsKeydown),document.addEventListener("keyup",B._handleChipsKeyup),this.el.addEventListener("blur",B._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",B._handleChipsKeydown),document.removeEventListener("keyup",B._handleChipsKeyup),this.el.removeEventListener("blur",B._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(S){var w=T(S.target).closest(".chip"),P=T(S.target).is(".close");if(w.length){var Y=w.index();P?(this.deleteChip(Y),this.$input[0].focus()):this.selectChip(Y)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(S){if(B._keydown=!0,S.keyCode===13){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;S.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else(S.keyCode===8||S.keyCode===37)&&this.$input[0].value===""&&this.chipsData.length&&(S.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(S){if(!!S.tag){var w=document.createElement("div"),P=document.createElement("i");if(w.classList.add("chip"),w.textContent=S.tag,w.setAttribute("tabindex",0),T(P).addClass("material-icons close"),P.textContent="close",S.image){var Y=document.createElement("img");Y.setAttribute("src",S.image),w.insertBefore(Y,w.firstChild)}return w.appendChild(P),w}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var S=0;S<this.chipsData.length;S++){var w=this._renderChip(this.chipsData[S]);this.$el.append(w),this.$chips.add(w)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var S=this;this.options.autocompleteOptions.onAutocomplete=function(w){S.addChip({tag:w}),S.$input[0].value="",S.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=T("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){this.chipsData!==void 0&&!this.chipsData.length&&this.options.placeholder?T(this.$input).prop("placeholder",this.options.placeholder):(this.chipsData===void 0||!!this.chipsData.length)&&this.options.secondaryPlaceholder&&T(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(S){if(S.hasOwnProperty("tag")&&S.tag!==""){for(var w=!1,P=0;P<this.chipsData.length;P++)if(this.chipsData[P].tag===S.tag){w=!0;break}return!w}return!1}},{key:"addChip",value:function(S){if(!(!this._isValid(S)||this.chipsData.length>=this.options.limit)){var w=this._renderChip(S);this.$chips.add(w),this.chipsData.push(S),T(this.$input).before(w),this._setPlaceholder(),typeof this.options.onChipAdd=="function"&&this.options.onChipAdd.call(this,this.$el,w)}}},{key:"deleteChip",value:function(S){var w=this.$chips.eq(S);this.$chips.eq(S).remove(),this.$chips=this.$chips.filter(function(P){return T(P).index()>=0}),this.chipsData.splice(S,1),this._setPlaceholder(),typeof this.options.onChipDelete=="function"&&this.options.onChipDelete.call(this,this.$el,w[0])}},{key:"selectChip",value:function(S){var w=this.$chips.eq(S);this._selectedChip=w,w[0].focus(),typeof this.options.onChipSelect=="function"&&this.options.onChipSelect.call(this,this.$el,w[0])}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_Chips}},{key:"_handleChipsKeydown",value:function(S){B._keydown=!0;var w=T(S.target).closest(".chips"),P=S.target&&w.length;if(!(T(S.target).is("input, textarea")||!P)){var Y=w[0].M_Chips;if(S.keyCode===8||S.keyCode===46){S.preventDefault();var ne=Y.chipsData.length;if(Y._selectedChip){var ae=Y._selectedChip.index();Y.deleteChip(ae),Y._selectedChip=null,ne=Math.max(ae-1,0)}Y.chipsData.length&&Y.selectChip(ne)}else if(S.keyCode===37){if(Y._selectedChip){var oe=Y._selectedChip.index()-1;if(oe<0)return;Y.selectChip(oe)}}else if(S.keyCode===39&&Y._selectedChip){var fe=Y._selectedChip.index()+1;fe>=Y.chipsData.length?Y.$input[0].focus():Y.selectChip(fe)}}}},{key:"_handleChipsKeyup",value:function(S){B._keydown=!1}},{key:"_handleChipsBlur",value:function(S){if(!B._keydown){var w=T(S.target).closest(".chips"),P=w[0].M_Chips;P._selectedChip=null}}},{key:"defaults",get:function(){return H}}]),B}(o);j._keydown=!1,M.Chips=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"chips","M_Chips"),T(document).ready(function(){T(document.body).on("click",".chip .close",function(){var W=T(this).closest(".chips");W.length&&W[0].M_Chips||T(this).closest(".chip").remove()})})}(cash),function(T){var H={top:0,bottom:1/0,offset:0,onPositionChange:null},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.el.M_Pushpin=w,w.options=T.extend({},B.defaults,S),w.originalOffset=w.el.offsetTop,B._pushpins.push(w),w._setupEventHandlers(),w._updatePosition(),w}return r(B,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var S=B._pushpins.indexOf(this);B._pushpins.splice(S,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",B._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",B._updateElements)}},{key:"_updatePosition",value:function(){var S=M.getDocumentScrollTop()+this.options.offset;this.options.top<=S&&this.options.bottom>=S&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pinned")),S<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-top")),S>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px",typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_Pushpin}},{key:"_updateElements",value:function(){for(var S in B._pushpins){var w=B._pushpins[S];w._updatePosition()}}},{key:"defaults",get:function(){return H}}]),B}(o);j._pushpins=[],M.Pushpin=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"pushpin","M_Pushpin")}(cash),function(T,H){var j={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};T.fn.reverse=[].reverse;var W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_FloatingActionButton=P,P.options=T.extend({},O.defaults,w),P.isOpen=!1,P.$anchor=P.$el.children("a").first(),P.$menu=P.$el.children("ul").first(),P.$floatingBtns=P.$el.find("ul .btn-floating"),P.$floatingBtnsReverse=P.$el.find("ul .btn-floating").reverse(),P.offsetY=0,P.offsetX=0,P.$el.addClass("direction-"+P.options.direction),P.options.direction==="top"?P.offsetY=40:P.options.direction==="right"?P.offsetX=-40:P.options.direction==="bottom"?P.offsetY=-40:P.offsetX=40,P._setupEventHandlers(),P}return r(O,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(w){T(w.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){!this.isOpen||(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var w=this;this.$el.addClass("active");var P=0;this.$floatingBtnsReverse.each(function(Y){H({targets:Y,opacity:1,scale:[.4,1],translateY:[w.offsetY,0],translateX:[w.offsetX,0],duration:275,delay:P,easing:"easeInOutQuad"}),P+=40})}},{key:"_animateOutFAB",value:function(){var w=this;this.$floatingBtnsReverse.each(function(P){H.remove(P),H({targets:P,opacity:0,scale:.4,translateY:w.offsetY,translateX:w.offsetX,duration:175,easing:"easeOutQuad",complete:function(){w.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var w=this,P=void 0,Y=window.innerWidth,ne=window.innerHeight,ae=this.el.getBoundingClientRect(),oe=T('<div class="fab-backdrop"></div>'),fe=this.$anchor.css("background-color");this.$anchor.append(oe),this.offsetX=ae.left-Y/2+ae.width/2,this.offsetY=ne-ae.bottom,P=Y/oe[0].clientWidth,this.btnBottom=ae.bottom,this.btnLeft=ae.left,this.btnWidth=ae.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),oe.css({"background-color":fe}),setTimeout(function(){w.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),w.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){w.$el.css({overflow:"hidden","background-color":fe}),oe.css({transform:"scale("+P+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),w.$menu.children("li").children("a").css({opacity:1}),w._handleDocumentClickBound=w._handleDocumentClick.bind(w),window.addEventListener("scroll",w._handleCloseBound,!0),document.body.addEventListener("click",w._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var w=this,P=window.innerWidth,Y=window.innerHeight,ne=this.$el.find(".fab-backdrop"),ae=this.$anchor.css("background-color");this.offsetX=this.btnLeft-P/2+this.btnWidth/2,this.offsetY=Y-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),ne.css({transform:"scale(0)","background-color":ae}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){ne.remove(),w.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-w.offsetX+"px,0,0)"}),w.$anchor.css({overflow:"",transform:"translate3d(0,"+w.offsetY+"px,0)"}),setTimeout(function(){w.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),w.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_FloatingActionButton}},{key:"defaults",get:function(){return j}}]),O}(o);M.FloatingActionButton=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(T){var H={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203A",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));w.el.M_Datepicker=w,w.options=T.extend({},B.defaults,S),!!S&&S.hasOwnProperty("i18n")&&typeof S.i18n=="object"&&(w.options.i18n=T.extend({},B.defaults.i18n,S.i18n)),w.options.minDate&&w.options.minDate.setHours(0,0,0,0),w.options.maxDate&&w.options.maxDate.setHours(0,0,0,0),w.id=M.guid(),w._setupVariables(),w._insertHTMLIntoDOM(),w._setupModal(),w._setupEventHandlers(),w.options.defaultDate||(w.options.defaultDate=new Date(Date.parse(w.el.value)));var P=w.options.defaultDate;return B._isDate(P)?w.options.setDefaultDate?(w.setDate(P,!0),w.setInputValue()):w.gotoDate(P):w.gotoDate(new Date),w.isOpen=!1,w}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),T(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var S=this.calendarEl.querySelector(".orig-select-year");S&&M.FormSelect.getInstance(S).destroy();var w=this.calendarEl.querySelector(".orig-select-month");w&&M.FormSelect.getInstance(w).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(T(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var S=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){S.isOpen=!1}})}},{key:"toString",value:function(S){var w=this;if(S=S||this.options.format,!B._isDate(this.date))return"";var P=S.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g),Y=P.map(function(ne){return w.formats[ne]?w.formats[ne]():ne}).join("");return Y}},{key:"setDate",value:function(S,w){if(!S)return this.date=null,this._renderDateDisplay(),this.draw();if(typeof S=="string"&&(S=new Date(Date.parse(S))),!!B._isDate(S)){var P=this.options.minDate,Y=this.options.maxDate;B._isDate(P)&&S<P?S=P:B._isDate(Y)&&S>Y&&(S=Y),this.date=new Date(S.getTime()),this._renderDateDisplay(),B._setToStartOfDay(this.date),this.gotoDate(this.date),!w&&typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var S=B._isDate(this.date)?this.date:new Date,w=this.options.i18n,P=w.weekdaysShort[S.getDay()],Y=w.monthsShort[S.getMonth()],ne=S.getDate();this.yearTextEl.innerHTML=S.getFullYear(),this.dateTextEl.innerHTML=P+", "+Y+" "+ne}},{key:"gotoDate",value:function(S){var w=!0;if(!!B._isDate(S)){if(this.calendars){var P=new Date(this.calendars[0].year,this.calendars[0].month,1),Y=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),ne=S.getTime();Y.setMonth(Y.getMonth()+1),Y.setDate(Y.getDate()-1),w=ne<P.getTime()||Y.getTime()<ne}w&&(this.calendars=[{month:S.getMonth(),year:S.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(S){return S.month<0&&(S.year-=Math.ceil(Math.abs(S.month)/12),S.month+=12),S.month>11&&(S.year+=Math.floor(Math.abs(S.month)/12),S.month-=12),S}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(S,w,P){var Y=this.options,ne=new Date,ae=B._getDaysInMonth(S,w),oe=new Date(S,w,1).getDay(),fe=[],Re=[];B._setToStartOfDay(ne),Y.firstDay>0&&(oe-=Y.firstDay,oe<0&&(oe+=7));for(var Be=w===0?11:w-1,Oe=w===11?0:w+1,Ee=w===0?S-1:S,pt=w===11?S+1:S,Ze=B._getDaysInMonth(Ee,Be),ct=ae+oe,nt=ct;nt>7;)nt-=7;ct+=7-nt;for(var xe=!1,be=0,on=0;be<ct;be++){var Ut=new Date(S,w,1+(be-oe)),ln=B._isDate(this.date)?B._compareDates(Ut,this.date):!1,tn=B._compareDates(Ut,ne),un=Y.events.indexOf(Ut.toDateString())!==-1,mn=be<oe||be>=ae+oe,fn=1+(be-oe),An=w,Le=S,Xe=Y.startRange&&B._compareDates(Y.startRange,Ut),ft=Y.endRange&&B._compareDates(Y.endRange,Ut),wt=Y.startRange&&Y.endRange&&Y.startRange<Ut&&Ut<Y.endRange,_t=Y.minDate&&Ut<Y.minDate||Y.maxDate&&Ut>Y.maxDate||Y.disableWeekends&&B._isWeekend(Ut)||Y.disableDayFn&&Y.disableDayFn(Ut);mn&&(be<oe?(fn=Ze+fn,An=Be,Le=Ee):(fn=fn-ae,An=Oe,Le=pt));var dt={day:fn,month:An,year:Le,hasEvent:un,isSelected:ln,isToday:tn,isDisabled:_t,isEmpty:mn,isStartRange:Xe,isEndRange:ft,isInRange:wt,showDaysInNextAndPreviousMonths:Y.showDaysInNextAndPreviousMonths};Re.push(this.renderDay(dt)),++on===7&&(fe.push(this.renderRow(Re,Y.isRTL,xe)),Re=[],on=0,xe=!1)}return this.renderTable(Y,fe,P)}},{key:"renderDay",value:function(S){var w=[],P="false";if(S.isEmpty)if(S.showDaysInNextAndPreviousMonths)w.push("is-outside-current-month"),w.push("is-selection-disabled");else return'<td class="is-empty"></td>';return S.isDisabled&&w.push("is-disabled"),S.isToday&&w.push("is-today"),S.isSelected&&(w.push("is-selected"),P="true"),S.hasEvent&&w.push("has-event"),S.isInRange&&w.push("is-inrange"),S.isStartRange&&w.push("is-startrange"),S.isEndRange&&w.push("is-endrange"),'<td data-day="'+S.day+'" class="'+w.join(" ")+'" aria-selected="'+P+'">'+('<button class="datepicker-day-button" type="button" data-year="'+S.year+'" data-month="'+S.month+'" data-day="'+S.day+'">'+S.day+"</button>")+"</td>"}},{key:"renderRow",value:function(S,w,P){return'<tr class="datepicker-row'+(P?" is-selected":"")+'">'+(w?S.reverse():S).join("")+"</tr>"}},{key:"renderTable",value:function(S,w,P){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+P+'">'+this.renderHead(S)+this.renderBody(w)+"</table></div>"}},{key:"renderHead",value:function(S){var w=void 0,P=[];for(w=0;w<7;w++)P.push('<th scope="col"><abbr title="'+this.renderDayName(S,w)+'">'+this.renderDayName(S,w,!0)+"</abbr></th>");return"<thead><tr>"+(S.isRTL?P.reverse():P).join("")+"</tr></thead>"}},{key:"renderBody",value:function(S){return"<tbody>"+S.join("")+"</tbody>"}},{key:"renderTitle",value:function(S,w,P,Y,ne,ae){var oe=void 0,fe=void 0,Re=void 0,Be=this.options,Oe=P===Be.minYear,Ee=P===Be.maxYear,pt='<div id="'+ae+'" class="datepicker-controls" role="heading" aria-live="assertive">',Ze=void 0,ct=void 0,nt=!0,xe=!0;for(Re=[],oe=0;oe<12;oe++)Re.push('<option value="'+(P===ne?oe-w:12+oe-w)+'"'+(oe===Y?' selected="selected"':"")+(Oe&&oe<Be.minMonth||Ee&&oe>Be.maxMonth?'disabled="disabled"':"")+">"+Be.i18n.months[oe]+"</option>");for(Ze='<select class="datepicker-select orig-select-month" tabindex="-1">'+Re.join("")+"</select>",T.isArray(Be.yearRange)?(oe=Be.yearRange[0],fe=Be.yearRange[1]+1):(oe=P-Be.yearRange,fe=1+P+Be.yearRange),Re=[];oe<fe&&oe<=Be.maxYear;oe++)oe>=Be.minYear&&Re.push('<option value="'+oe+'" '+(oe===P?'selected="selected"':"")+">"+oe+"</option>");ct='<select class="datepicker-select orig-select-year" tabindex="-1">'+Re.join("")+"</select>";var be='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg>';pt+='<button class="month-prev'+(nt?"":" is-disabled")+'" type="button">'+be+"</button>",pt+='<div class="selects-container">',Be.showMonthAfterYear?pt+=ct+Ze:pt+=Ze+ct,pt+="</div>",Oe&&(Y===0||Be.minMonth>=Y)&&(nt=!1),Ee&&(Y===11||Be.maxMonth<=Y)&&(xe=!1);var on='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg>';return pt+='<button class="month-next'+(xe?"":" is-disabled")+'" type="button">'+on+"</button>",pt+="</div>"}},{key:"draw",value:function(S){if(!(!this.isOpen&&!S)){var w=this.options,P=w.minYear,Y=w.maxYear,ne=w.minMonth,ae=w.maxMonth,oe="",fe=void 0;this._y<=P&&(this._y=P,!isNaN(ne)&&this._m<ne&&(this._m=ne)),this._y>=Y&&(this._y=Y,!isNaN(ae)&&this._m>ae&&(this._m=ae)),fe="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var Re=0;Re<1;Re++)this._renderDateDisplay(),oe+=this.renderTitle(this,Re,this.calendars[Re].year,this.calendars[Re].month,this.calendars[0].year,fe)+this.render(this.calendars[Re].year,this.calendars[Re].month,fe);this.destroySelects(),this.calendarEl.innerHTML=oe;var Be=this.calendarEl.querySelector(".orig-select-year"),Oe=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(Be,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(Oe,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),Be.addEventListener("change",this._handleYearChange.bind(this)),Oe.addEventListener("change",this._handleMonthChange.bind(this)),typeof this.options.onDraw=="function"&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var S=this;this.$modalEl=T(B._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return S.date.getDate()},dd:function(){var w=S.date.getDate();return(w<10?"0":"")+w},ddd:function(){return S.options.i18n.weekdaysShort[S.date.getDay()]},dddd:function(){return S.options.i18n.weekdays[S.date.getDay()]},m:function(){return S.date.getMonth()+1},mm:function(){var w=S.date.getMonth()+1;return(w<10?"0":"")+w},mmm:function(){return S.options.i18n.monthsShort[S.date.getMonth()]},mmmm:function(){return S.options.i18n.months[S.date.getMonth()]},yy:function(){return(""+S.date.getFullYear()).slice(2)},yyyy:function(){return S.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(S){S.which===M.keys.ENTER&&(S.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(S){if(!!this.isOpen){var w=T(S.target);w.hasClass("is-disabled")||(w.hasClass("datepicker-day-button")&&!w.hasClass("is-empty")&&!w.parent().hasClass("is-disabled")?(this.setDate(new Date(S.target.getAttribute("data-year"),S.target.getAttribute("data-month"),S.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()):w.closest(".month-prev").length?this.prevMonth():w.closest(".month-next").length&&this.nextMonth())}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(S){this.gotoMonth(S.target.value)}},{key:"_handleYearChange",value:function(S){this.gotoYear(S.target.value)}},{key:"gotoMonth",value:function(S){isNaN(S)||(this.calendars[0].month=parseInt(S,10),this.adjustCalendars())}},{key:"gotoYear",value:function(S){isNaN(S)||(this.calendars[0].year=parseInt(S,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(S){var w=void 0;S.firedBy!==this&&(this.options.parse?w=this.options.parse(this.el.value,this.options.format):w=new Date(Date.parse(this.el.value)),B._isDate(w)&&this.setDate(w))}},{key:"renderDayName",value:function(S,w,P){for(w+=S.firstDay;w>=7;)w-=7;return P?S.i18n.weekdaysAbbrev[w]:S.i18n.weekdays[w]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,typeof this.options.onOpen=="function"&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(!!this.isOpen)return this.isOpen=!1,typeof this.options.onClose=="function"&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"_isDate",value:function(S){return/Date/.test(Object.prototype.toString.call(S))&&!isNaN(S.getTime())}},{key:"_isWeekend",value:function(S){var w=S.getDay();return w===0||w===6}},{key:"_setToStartOfDay",value:function(S){B._isDate(S)&&S.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(S,w){return[31,B._isLeapYear(S)?29:28,31,30,31,30,31,31,30,31,30,31][w]}},{key:"_isLeapYear",value:function(S){return S%4===0&&S%100!==0||S%400===0}},{key:"_compareDates",value:function(S,w){return S.getTime()===w.getTime()}},{key:"_setToStartOfDay",value:function(S){B._isDate(S)&&S.setHours(0,0,0,0)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_Datepicker}},{key:"defaults",get:function(){return H}}]),B}(o);j._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"datepicker","M_Datepicker")}(cash),function(T){var H={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.el.M_Timepicker=w,w.options=T.extend({},B.defaults,S),w.id=M.guid(),w._insertHTMLIntoDOM(),w._setupModal(),w._setupVariables(),w._setupEventHandlers(),w._clockSetup(),w._pickerSetup(),w}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),T(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),T(this.spanHours).on("click",this.showView.bind(this,"hours")),T(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(S){S.which===M.keys.ENTER&&(S.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(S){S.preventDefault();var w=this.plate.getBoundingClientRect(),P={x:w.left,y:w.top};this.x0=P.x+this.options.dialRadius,this.y0=P.y+this.options.dialRadius,this.moved=!1;var Y=B._Pos(S);this.dx=Y.x-this.x0,this.dy=Y.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(S){S.preventDefault();var w=B._Pos(S),P=w.x-this.x0,Y=w.y-this.y0;this.moved=!0,this.setHand(P,Y,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(S){var w=this;S.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var P=B._Pos(S),Y=P.x-this.x0,ne=P.y-this.y0;this.moved&&Y===this.dx&&ne===this.dy&&this.setHand(Y,ne),this.currentView==="hours"?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(T(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){w.done()},this.options.duration/2)),typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=T(B._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var S=document.querySelector(this.options.container);this.options.container&&!!S?this.$modalEl.appendTo(S):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var S=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){typeof S.options.onCloseEnd=="function"&&S.options.onCloseEnd.call(S),S.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var S=T('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&S.css({visibility:""});var w=T('<div class="confirmation-btns"></div>');T('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(w).on("click",this.close.bind(this)),T('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(w).on("click",this.done.bind(this)),w.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=T('<div class="am-btn">AM</div>'),this.$pmBtn=T('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var S=this.options.dialRadius,w=this.options.tickRadius,P=S*2,Y=B._createSVGEl("svg");Y.setAttribute("class","timepicker-svg"),Y.setAttribute("width",P),Y.setAttribute("height",P);var ne=B._createSVGEl("g");ne.setAttribute("transform","translate("+S+","+S+")");var ae=B._createSVGEl("circle");ae.setAttribute("class","timepicker-canvas-bearing"),ae.setAttribute("cx",0),ae.setAttribute("cy",0),ae.setAttribute("r",4);var oe=B._createSVGEl("line");oe.setAttribute("x1",0),oe.setAttribute("y1",0);var fe=B._createSVGEl("circle");fe.setAttribute("class","timepicker-canvas-bg"),fe.setAttribute("r",w),ne.appendChild(oe),ne.appendChild(fe),ne.appendChild(ae),Y.appendChild(ne),this._canvas.appendChild(Y),this.hand=oe,this.bg=fe,this.bearing=ae,this.g=ne}},{key:"_buildHoursView",value:function(){var S=T('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var w=1;w<13;w+=1){var P=S.clone(),Y=w/6*Math.PI,ne=this.options.outerRadius;P.css({left:this.options.dialRadius+Math.sin(Y)*ne-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(Y)*ne-this.options.tickRadius+"px"}),P.html(w===0?"00":w),this.hoursView.appendChild(P[0])}else for(var ae=0;ae<24;ae+=1){var oe=S.clone(),fe=ae/6*Math.PI,Re=ae>0&&ae<13,Be=Re?this.options.innerRadius:this.options.outerRadius;oe.css({left:this.options.dialRadius+Math.sin(fe)*Be-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(fe)*Be-this.options.tickRadius+"px"}),oe.html(ae===0?"00":ae),this.hoursView.appendChild(oe[0])}}},{key:"_buildMinutesView",value:function(){for(var S=T('<div class="timepicker-tick"></div>'),w=0;w<60;w+=5){var P=S.clone(),Y=w/30*Math.PI;P.css({left:this.options.dialRadius+Math.sin(Y)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(Y)*this.options.outerRadius-this.options.tickRadius+"px"}),P.html(B._addLeadingZero(w)),this.minutesView.appendChild(P[0])}}},{key:"_handleAmPmClick",value:function(S){var w=T(S.target);this.amOrPm=w.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary",this.amOrPm==="AM"),this.$pmBtn.toggleClass("text-primary",this.amOrPm==="PM"))}},{key:"_updateTimeFromInput",value:function(){var S=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&typeof S[1]!="undefined"&&(S[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",S[1]=S[1].replace("AM","").replace("PM","")),S[0]==="now"){var w=new Date(+new Date+this.options.fromNow);S=[w.getHours(),w.getMinutes()],this.options.twelveHour&&(this.amOrPm=S[0]>=12&&S[0]<24?"PM":"AM")}this.hours=+S[0]||0,this.minutes=+S[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=B._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(S,w){S==="minutes"&&T(this.hoursView).css("visibility");var P=S==="hours",Y=P?this.hoursView:this.minutesView,ne=P?this.minutesView:this.hoursView;this.currentView=S,T(this.spanHours).toggleClass("text-primary",P),T(this.spanMinutes).toggleClass("text-primary",!P),ne.classList.add("timepicker-dial-out"),T(Y).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(w),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){T(ne).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(S){var w=this.currentView,P=this[w],Y=w==="hours",ne=Math.PI/(Y?6:30),ae=P*ne,oe=Y&&P>0&&P<13?this.options.innerRadius:this.options.outerRadius,fe=Math.sin(ae)*oe,Re=-Math.cos(ae)*oe,Be=this;S?(T(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){T(Be.canvas).removeClass("timepicker-canvas-out"),Be.setHand(fe,Re)},S)):this.setHand(fe,Re)}},{key:"setHand",value:function(S,w,P){var Y=this,ne=Math.atan2(S,-w),ae=this.currentView==="hours",oe=Math.PI/(ae||P?6:30),fe=Math.sqrt(S*S+w*w),Re=ae&&fe<(this.options.outerRadius+this.options.innerRadius)/2,Be=Re?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(Be=this.options.outerRadius),ne<0&&(ne=Math.PI*2+ne);var Oe=Math.round(ne/oe);ne=Oe*oe,this.options.twelveHour?ae?Oe===0&&(Oe=12):(P&&(Oe*=5),Oe===60&&(Oe=0)):ae?(Oe===12&&(Oe=0),Oe=Re?Oe===0?12:Oe:Oe===0?0:Oe+12):(P&&(Oe*=5),Oe===60&&(Oe=0)),this[this.currentView]!==Oe&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){Y.vibrateTimer=null},100))),this[this.currentView]=Oe,ae?this.spanHours.innerHTML=Oe:this.spanMinutes.innerHTML=B._addLeadingZero(Oe);var Ee=Math.sin(ne)*(Be-this.options.tickRadius),pt=-Math.cos(ne)*(Be-this.options.tickRadius),Ze=Math.sin(ne)*Be,ct=-Math.cos(ne)*Be;this.hand.setAttribute("x2",Ee),this.hand.setAttribute("y2",pt),this.bg.setAttribute("cx",Ze),this.bg.setAttribute("cy",ct)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){!this.isOpen||(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(S,w){var P=this.el.value,Y=w?"":B._addLeadingZero(this.hours)+":"+B._addLeadingZero(this.minutes);this.time=Y,!w&&this.options.twelveHour&&(Y=Y+" "+this.amOrPm),this.el.value=Y,Y!==P&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"_addLeadingZero",value:function(S){return(S<10?"0":"")+S}},{key:"_createSVGEl",value:function(S){var w="http://www.w3.org/2000/svg";return document.createElementNS(w,S)}},{key:"_Pos",value:function(S){return S.targetTouches&&S.targetTouches.length>=1?{x:S.targetTouches[0].clientX,y:S.targetTouches[0].clientY}:{x:S.clientX,y:S.clientY}}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_Timepicker}},{key:"defaults",get:function(){return H}}]),B}(o);j._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"timepicker","M_Timepicker")}(cash),function(T){var H={},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.el.M_CharacterCounter=w,w.options=T.extend({},B.defaults,S),w.isInvalid=!1,w.isValidLength=!1,w._setupCounter(),w._setupEventHandlers(),w}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),T(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){T(this.counterEl).remove()}},{key:"updateCounter",value:function(){var S=+this.$el.attr("data-length"),w=this.el.value.length;this.isValidLength=w<=S;var P=w;S&&(P+="/"+S,this._validateInput()),T(this.counterEl).html(P)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):!this.isValidLength&&!this.isInvalid&&(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_CharacterCounter}},{key:"defaults",get:function(){return H}}]),B}(o);M.CharacterCounter=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"characterCounter","M_CharacterCounter")}(cash),function(T){var H={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.el.M_Carousel=w,w.options=T.extend({},B.defaults,S),w.hasMultipleSlides=w.$el.find(".carousel-item").length>1,w.showIndicators=w.options.indicators&&w.hasMultipleSlides,w.noWrap=w.options.noWrap||!w.hasMultipleSlides,w.pressed=!1,w.dragged=!1,w.offset=w.target=0,w.images=[],w.itemWidth=w.$el.find(".carousel-item").first().innerWidth(),w.itemHeight=w.$el.find(".carousel-item").first().innerHeight(),w.dim=w.itemWidth*2+w.options.padding||1,w._autoScrollBound=w._autoScroll.bind(w),w._trackBound=w._track.bind(w),w.options.fullWidth&&(w.options.dist=0,w._setCarouselHeight(),w.showIndicators&&w.$el.find(".carousel-fixed-item").addClass("with-indicators")),w.$indicators=T('<ul class="indicators"></ul>'),w.$el.find(".carousel-item").each(function(P,Y){if(w.images.push(P),w.showIndicators){var ne=T('<li class="indicator-item"></li>');Y===0&&ne[0].classList.add("active"),w.$indicators.append(ne)}}),w.showIndicators&&w.$el.append(w.$indicators),w.count=w.images.length,w.options.numVisible=Math.min(w.count,w.options.numVisible),w.xform="transform",["webkit","Moz","O","ms"].every(function(P){var Y=P+"Transform";return typeof document.body.style[Y]!="undefined"?(w.xform=Y,!1):!0}),w._setupEventHandlers(),w._scroll(w.offset),w}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var S=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),typeof window.ontouchstart!="undefined"&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(P,Y){P.addEventListener("click",S._handleIndicatorClickBound)}));var w=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=w.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var S=this;typeof window.ontouchstart!="undefined"&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(w,P){w.removeEventListener("click",S._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(S){S.type==="mousedown"&&T(S.target).is("img")&&S.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(S),this.referenceY=this._ypos(S),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(S){var w=void 0,P=void 0,Y=void 0,ne=void 0;if(this.pressed)if(w=this._xpos(S),P=this._ypos(S),Y=this.reference-w,ne=Math.abs(this.referenceY-P),ne<30&&!this.verticalDragged)(Y>2||Y<-2)&&(this.dragged=!0,this.reference=w,this._scroll(this.offset+Y));else{if(this.dragged)return S.preventDefault(),S.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return S.preventDefault(),S.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(S){if(this.pressed)this.pressed=!1;else return;return clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(S.preventDefault(),S.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(S){if(this.dragged)return S.preventDefault(),S.stopPropagation(),!1;if(!this.options.fullWidth){var w=T(S.target).closest(".carousel-item").index(),P=this._wrap(this.center)-w;P!==0&&(S.preventDefault(),S.stopPropagation()),this._cycleTo(w)}}},{key:"_handleIndicatorClick",value:function(S){S.stopPropagation();var w=T(S.target).closest(".indicator-item");w.length&&this._cycleTo(w.index())}},{key:"_handleResize",value:function(S){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=this.itemWidth*2+this.options.padding,this.offset=this.center*2*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(S){var w=this,P=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),Y=P.find("img").first();if(Y.length)if(Y[0].complete){var ne=Y.height();if(ne>0)this.$el.css("height",ne+"px");else{var ae=Y[0].naturalWidth,oe=Y[0].naturalHeight,fe=this.$el.width()/ae*oe;this.$el.css("height",fe+"px")}}else Y.one("load",function(Be,Oe){w.$el.css("height",Be.offsetHeight+"px")});else if(!S){var Re=P.height();this.$el.css("height",Re+"px")}}},{key:"_xpos",value:function(S){return S.targetTouches&&S.targetTouches.length>=1?S.targetTouches[0].clientX:S.clientX}},{key:"_ypos",value:function(S){return S.targetTouches&&S.targetTouches.length>=1?S.targetTouches[0].clientY:S.clientY}},{key:"_wrap",value:function(S){return S>=this.count?S%this.count:S<0?this._wrap(this.count+S%this.count):S}},{key:"_track",value:function(){var S=void 0,w=void 0,P=void 0,Y=void 0;S=Date.now(),w=S-this.timestamp,this.timestamp=S,P=this.offset-this.frame,this.frame=this.offset,Y=1e3*P/(1+w),this.velocity=.8*Y+.2*this.velocity}},{key:"_autoScroll",value:function(){var S=void 0,w=void 0;this.amplitude&&(S=Date.now()-this.timestamp,w=this.amplitude*Math.exp(-S/this.options.duration),w>2||w<-2?(this._scroll(this.target-w),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(S){var w=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),this.scrollingTimeout!=null&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){w.$el.removeClass("scrolling")},this.options.duration);var P=void 0,Y=void 0,ne=void 0,ae=void 0,oe=void 0,fe=void 0,Re=void 0,Be=void 0,Oe=void 0,Ee=void 0,pt=this.center,Ze=1/this.options.numVisible;if(this.offset=typeof S=="number"?S:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),ne=this.offset-this.center*this.dim,ae=ne<0?1:-1,oe=-ae*ne*2/this.dim,Y=this.count>>1,this.options.fullWidth?(Re="translateX(0)",Ee=1):(Re="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",Re+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",Ee=1-Ze*oe),this.showIndicators){var ct=this.center%this.count,nt=this.$indicators.find(".indicator-item.active");nt.index()!==ct&&(nt.removeClass("active"),this.$indicators.find(".indicator-item").eq(ct)[0].classList.add("active"))}if(!this.noWrap||this.center>=0&&this.center<this.count){fe=this.images[this._wrap(this.center)],T(fe).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),fe.classList.add("active"));var xe=Re+" translateX("+-ne/2+"px) translateX("+ae*this.options.shift*oe*P+"px) translateZ("+this.options.dist*oe+"px)";this._updateItemStyle(fe,Ee,0,xe)}for(P=1;P<=Y;++P){if(this.options.fullWidth?(Be=this.options.dist,Oe=P===Y&&ne<0?1-oe:1):(Be=this.options.dist*(P*2+oe*ae),Oe=1-Ze*(P*2+oe*ae)),!this.noWrap||this.center+P<this.count){fe=this.images[this._wrap(this.center+P)];var be=Re+" translateX("+(this.options.shift+(this.dim*P-ne)/2)+"px) translateZ("+Be+"px)";this._updateItemStyle(fe,Oe,-P,be)}if(this.options.fullWidth?(Be=this.options.dist,Oe=P===Y&&ne>0?1-oe:1):(Be=this.options.dist*(P*2-oe*ae),Oe=1-Ze*(P*2-oe*ae)),!this.noWrap||this.center-P>=0){fe=this.images[this._wrap(this.center-P)];var on=Re+" translateX("+(-this.options.shift+(-this.dim*P-ne)/2)+"px) translateZ("+Be+"px)";this._updateItemStyle(fe,Oe,-P,on)}}if(!this.noWrap||this.center>=0&&this.center<this.count){fe=this.images[this._wrap(this.center)];var Ut=Re+" translateX("+-ne/2+"px) translateX("+ae*this.options.shift*oe+"px) translateZ("+this.options.dist*oe+"px)";this._updateItemStyle(fe,Ee,0,Ut)}var ln=this.$el.find(".carousel-item").eq(this._wrap(this.center));pt!==this.center&&typeof this.options.onCycleTo=="function"&&this.options.onCycleTo.call(this,ln[0],this.dragged),typeof this.oneTimeCallback=="function"&&(this.oneTimeCallback.call(this,ln[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(S,w,P,Y){S.style[this.xform]=Y,S.style.zIndex=P,S.style.opacity=w,S.style.visibility="visible"}},{key:"_cycleTo",value:function(S,w){var P=this.center%this.count-S;this.noWrap||(P<0?Math.abs(P+this.count)<Math.abs(P)&&(P+=this.count):P>0&&Math.abs(P-this.count)<P&&(P-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),P<0?this.target+=this.dim*Math.abs(P):P>0&&(this.target-=this.dim*P),typeof w=="function"&&(this.oneTimeCallback=w),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(S){(S===void 0||isNaN(S))&&(S=1);var w=this.center+S;if(w>=this.count||w<0){if(this.noWrap)return;w=this._wrap(w)}this._cycleTo(w)}},{key:"prev",value:function(S){(S===void 0||isNaN(S))&&(S=1);var w=this.center-S;if(w>=this.count||w<0){if(this.noWrap)return;w=this._wrap(w)}this._cycleTo(w)}},{key:"set",value:function(S,w){if((S===void 0||isNaN(S))&&(S=0),S>this.count||S<0){if(this.noWrap)return;S=this._wrap(S)}this._cycleTo(S,w)}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_Carousel}},{key:"defaults",get:function(){return H}}]),B}(o);M.Carousel=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"carousel","M_Carousel")}(cash),function(T){var H={onOpen:void 0,onClose:void 0},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.el.M_TapTarget=w,w.options=T.extend({},B.defaults,S),w.isOpen=!1,w.$origin=T("#"+w.$el.attr("data-target")),w._setup(),w._calculatePositioning(),w._setupEventHandlers(),w}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var S=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=S.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(S){this.open()}},{key:"_handleOriginClick",value:function(S){this.close()}},{key:"_handleResize",value:function(S){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(S){T(S.target).closest(".tap-target-wrapper").length||(this.close(),S.preventDefault(),S.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=T(this.wrapper).find(".tap-target-wave")[0],this.originEl=T(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],T(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(T(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var S=this.$origin.css("position")==="fixed";if(!S)for(var w=this.$origin.parents(),P=0;P<w.length&&(S=T(w[P]).css("position")=="fixed",!S);P++);var Y=this.$origin.outerWidth(),ne=this.$origin.outerHeight(),ae=S?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,oe=S?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,fe=window.innerWidth,Re=window.innerHeight,Be=fe/2,Oe=Re/2,Ee=oe<=Be,pt=oe>Be,Ze=ae<=Oe,ct=ae>Oe,nt=oe>=fe*.25&&oe<=fe*.75,xe=this.$el.outerWidth(),be=this.$el.outerHeight(),on=ae+ne/2-be/2,Ut=oe+Y/2-xe/2,ln=S?"fixed":"absolute",tn=nt?xe:xe/2+Y,un=be/2,mn=Ze?be/2:0,fn=0,An=Ee&&!nt?xe/2-Y:0,Le=0,Xe=Y,ft=ct?"bottom":"top",wt=(Y>ne,Y*2),_t=wt,dt=be/2-_t/2,Pt=xe/2-wt/2,yn={};yn.top=Ze?on+"px":"",yn.right=pt?fe-Ut-xe+"px":"",yn.bottom=ct?Re-on-be+"px":"",yn.left=Ee?Ut+"px":"",yn.position=ln,T(this.wrapper).css(yn),T(this.contentEl).css({width:tn+"px",height:un+"px",top:mn+"px",right:Le+"px",bottom:fn+"px",left:An+"px",padding:Xe+"px",verticalAlign:ft}),T(this.waveEl).css({top:dt+"px",left:Pt+"px",width:wt+"px",height:_t+"px"})}},{key:"open",value:function(){this.isOpen||(typeof this.options.onOpen=="function"&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){!this.isOpen||(typeof this.options.onClose=="function"&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_TapTarget}},{key:"defaults",get:function(){return H}}]),B}(o);M.TapTarget=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"tapTarget","M_TapTarget")}(cash),function(T){var H={classes:"",dropdownOptions:{}},j=function(W){u(B,W);function B(O,S){h(this,B);var w=a(this,(B.__proto__||Object.getPrototypeOf(B)).call(this,B,O,S));return w.$el.hasClass("browser-default")?a(w):(w.el.M_FormSelect=w,w.options=T.extend({},B.defaults,S),w.isMultiple=w.$el.prop("multiple"),w.el.tabIndex=-1,w._keysSelected={},w._valueDict={},w._setupDropdown(),w._setupEventHandlers(),w)}return r(B,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var S=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),T(this.dropdownOptions).find("li:not(.optgroup)").each(function(w){w.addEventListener("click",S._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var S=this;T(this.dropdownOptions).find("li:not(.optgroup)").each(function(w){w.removeEventListener("click",S._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(S){this._setValueToInput()}},{key:"_handleOptionClick",value:function(S){S.preventDefault();var w=T(S.target).closest("li")[0],P=w.id;if(!T(w).hasClass("disabled")&&!T(w).hasClass("optgroup")&&P.length){var Y=!0;if(this.isMultiple){var ne=T(this.dropdownOptions).find("li.disabled.selected");ne.length&&(ne.removeClass("selected"),ne.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(ne[0].id)),Y=this._toggleEntryFromArray(P)}else T(this.dropdownOptions).find("li").removeClass("selected"),T(w).toggleClass("selected",Y);var ae=T(this._valueDict[P].el).prop("selected");ae!==Y&&(T(this._valueDict[P].el).prop("selected",Y),this.$el.trigger("change"))}S.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var S=this;this.wrapper=document.createElement("div"),T(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(T(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),T(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(Y){if(T(Y).is("option")){var ne=void 0;S.isMultiple?ne=S._appendOptionWithIcon(S.$el,Y,"multiple"):ne=S._appendOptionWithIcon(S.$el,Y),S._addOptionToValueDict(Y,ne)}else if(T(Y).is("optgroup")){var ae=T(Y).children("option");T(S.dropdownOptions).append(T('<li class="optgroup"><span>'+Y.getAttribute("label")+"</span></li>")[0]),ae.each(function(oe){var fe=S._appendOptionWithIcon(S.$el,oe,"optgroup-option");S._addOptionToValueDict(oe,fe)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),T(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&T(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var w=T('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(w[0]),!this.el.disabled){var P=T.extend({},this.options.dropdownOptions);P.onOpenEnd=function(Y){var ne=T(S.dropdownOptions).find(".selected").first();if(ne.length&&(M.keyDown=!0,S.dropdown.focusedIndex=ne.index(),S.dropdown._focusFocusedItem(),M.keyDown=!1,S.dropdown.isScrollable)){var ae=ne[0].getBoundingClientRect().top-S.dropdownOptions.getBoundingClientRect().top;ae-=S.dropdownOptions.clientHeight/2,S.dropdownOptions.scrollTop=ae}},this.isMultiple&&(P.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,P)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(S,w){var P=Object.keys(this._valueDict).length,Y=this.dropdownOptions.id+P,ne={};w.id=Y,ne.el=S,ne.optionEl=w,this._valueDict[Y]=ne}},{key:"_removeDropdown",value:function(){T(this.wrapper).find(".caret").remove(),T(this.input).remove(),T(this.dropdownOptions).remove(),T(this.wrapper).before(this.$el),T(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(S,w,P){var Y=w.disabled?"disabled ":"",ne=P==="optgroup-option"?"optgroup-option ":"",ae=this.isMultiple?'<label><input type="checkbox"'+Y+'"/><span>'+w.innerHTML+"</span></label>":w.innerHTML,oe=T("<li></li>"),fe=T("<span></span>");fe.html(ae),oe.addClass(Y+" "+ne),oe.append(fe);var Re=w.getAttribute("data-icon");if(Re){var Be=T('<img alt="" src="'+Re+'">');oe.prepend(Be)}return T(this.dropdownOptions).append(oe[0]),oe[0]}},{key:"_toggleEntryFromArray",value:function(S){var w=!this._keysSelected.hasOwnProperty(S),P=T(this._valueDict[S].optionEl);return w?this._keysSelected[S]=!0:delete this._keysSelected[S],P.toggleClass("selected",w),P.find('input[type="checkbox"]').prop("checked",w),P.prop("selected",w),w}},{key:"_setValueToInput",value:function(){var S=[],w=this.$el.find("option");if(w.each(function(Y){if(T(Y).prop("selected")){var ne=T(Y).text();S.push(ne)}}),!S.length){var P=this.$el.find("option:disabled").eq(0);P.length&&P[0].value===""&&S.push(P.text())}this.input.value=S.join(", ")}},{key:"_setSelectedStates",value:function(){this._keysSelected={};for(var S in this._valueDict){var w=this._valueDict[S],P=T(w.el).prop("selected");T(w.optionEl).find('input[type="checkbox"]').prop("checked",P),P?(this._activateOption(T(this.dropdownOptions),T(w.optionEl)),this._keysSelected[S]=!0):T(w.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(S,w){if(w){this.isMultiple||S.find("li.selected").removeClass("selected");var P=T(w);P.addClass("selected")}}},{key:"getSelectedValues",value:function(){var S=[];for(var w in this._keysSelected)S.push(this._valueDict[w].el.value);return S}}],[{key:"init",value:function(S,w){return n(B.__proto__||Object.getPrototypeOf(B),"init",this).call(this,this,S,w)}},{key:"getInstance",value:function(S){var w=S.jquery?S[0]:S;return w.M_FormSelect}},{key:"defaults",get:function(){return H}}]),B}(o);M.FormSelect=j,M.jQueryLoaded&&M.initializeJqueryWrapper(j,"formSelect","M_FormSelect")}(cash),function(T,H){var j={},W=function(B){u(O,B);function O(S,w){h(this,O);var P=a(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,O,S,w));return P.el.M_Range=P,P.options=T.extend({},O.defaults,w),P._mousedown=!1,P._setupThumb(),P._setupEventHandlers(),P}return r(O,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){T(this.value).html(this.$el.val()),T(this.thumb).hasClass("active")||this._showRangeBubble();var w=this._calcRangeOffset();T(this.thumb).addClass("active").css("left",w+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(w){if(T(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),T(this.thumb).hasClass("active")||this._showRangeBubble(),w.type!=="input"){var P=this._calcRangeOffset();T(this.thumb).addClass("active").css("left",P+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){T(this.thumb).hasClass("active")||this._showRangeBubble();var w=this._calcRangeOffset();T(this.thumb).addClass("active").css("left",w+"px"),T(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var w=parseInt(this.$el.css("padding-left")),P=7+w+"px";T(this.thumb).hasClass("active")&&(H.remove(this.thumb),H({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:P,duration:100})),T(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),T(this.thumb).addClass("thumb"),T(this.value).addClass("value"),T(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){T(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var w=parseInt(T(this.thumb).parent().css("padding-left")),P=-7+w+"px";H.remove(this.thumb),H({targets:this.thumb,height:30,width:30,top:-30,marginLeft:P,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var w=this.$el.width()-15,P=parseFloat(this.$el.attr("max"))||100,Y=parseFloat(this.$el.attr("min"))||0,ne=(parseFloat(this.$el.val())-Y)/(P-Y);return ne*w}}],[{key:"init",value:function(w,P){return n(O.__proto__||Object.getPrototypeOf(O),"init",this).call(this,this,w,P)}},{key:"getInstance",value:function(w){var P=w.jquery?w[0]:w;return P.M_Range}},{key:"defaults",get:function(){return j}}]),O}(o);M.Range=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"range","M_Range"),W.init(T("input[type=range]"))}(cash,M.anime)})(GC,GC.exports);var $q=GC.exports;const Vq=()=>{m.exports.useContext(Xr);const e=Ii();return m.exports.useEffect(()=>{Eo||e("/accounts/login?next=/blog")}),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"static/css/blog-list.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"card-container"},Hq())))},Hq=()=>{const[e,t]=m.exports.useState([]),n=m.exports.useContext(Xr),[r,a]=m.exports.useState([]);return m.exports.useEffect(()=>{const u=`${mr.OBJECT}/blog-post`;n.getAPI(u).then(h=>{t(h.data.results)}).catch(h=>{n.refreshAuth()}),n.getAPI(`${mr.OBJECT}/tag`).then(h=>{const o=h.data.results;a(o)}).catch(()=>{n.refreshAuth()})},[]),e.map(u=>{let h=[];for(let o=0;o<u.tags.length;o++)for(let g=0;g<r.length;g++)u.tags[o]==r[g].id&&h.push(r[g]);return m.exports.createElement(Wq,{post:u,tags:h,key:u.id})})},Wq=e=>{const t=e.post;let r=m.exports.useContext(Xr).allUsers.find(a=>a.id===t.author);return r?m.exports.createElement("div",{className:"card"},m.exports.createElement("div",{className:"card-headers"},m.exports.createElement("img",{className:"card-image",src:t.featured_image}),m.exports.createElement("div",{className:"card-text"},m.exports.createElement("div",{className:"tag-section"},e.tags.map(a=>m.exports.createElement(Gg,{key:a.id,tag:a}))),m.exports.createElement("h1",{className:"title"},t.title),m.exports.createElement("div",{className:"card-authors"},m.exports.createElement("div",{className:"card-authors-image"},m.exports.createElement(nn,{to:`/user/${t.author}`},m.exports.createElement("img",{className:"circle",src:r.gravatar_url}))),m.exports.createElement("div",{className:"card-authors-text"},m.exports.createElement(nn,{to:`/user/${t.author}`,className:"link"},r&&`${r.first_name} ${r.last_name}`),m.exports.createElement("br",null),"\u2022 posted ",new Date(t.created_date).toLocaleTimeString(void 0,R0))))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"card-body"},m.exports.createElement("p",null,t.body)),m.exports.createElement("br",null),m.exports.createElement(nn,{className:"link",to:`/blog/${t.id}`},"Read full blog post ",m.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))):m.exports.createElement(m.exports.Fragment,null)},mz=()=>m.exports.createElement("div",{className:"secondary-nav-wrapper"},m.exports.createElement("ul",{className:"secondary-nav"},m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link current",to:"/accounts/profile"},"Profile")),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"/timetable"},"Timetable")),m.exports.createElement("hr",null),m.exports.createElement("li",null,m.exports.createElement("a",{className:"link",href:"/admin/core/announcement/add/"},"Announcements")),m.exports.createElement("li",null,m.exports.createElement("a",{className:"link",href:"/admin/core/event/add/"},"Events")),m.exports.createElement("hr",null),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link",to:"/accounts/logout/"},"Logout")))),Xw=e=>{const{userID:t}=ef(),n=m.exports.useContext(Xr),r=Ii();n.user;const[a,u]=m.exports.useState({});m.exports.useState([]),m.exports.useEffect(()=>{document.title=`User ${a.username} | Metropolis`},[a]);const h=()=>{!t||n.getAPI(`${mr.USER}/${t}`,!0).then(o=>{const g=o.data;u(o.data),console.log("Fetched user:",g),n.getAPI(`${mr.OBJECT}/organization`,!1).then(b=>{b.data.results}).catch(b=>{})}).catch(o=>{console.log(o),n.refreshAuth(),h()})};return m.exports.useEffect(()=>{Eo()||r("/accounts/login")}),m.exports.useEffect(()=>{h()},[]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/profile/detail.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/secondary.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("ul",{className:"sidenav secondnav",id:"secondary-out"},m.exports.createElement("li",null,m.exports.createElement(nn,{className:"sidenav-close",to:"/accounts/profile"},"Profile")),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"sidenav-close",to:"/timetable"},"Timetable")),m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link sidenav-close",to:"/admin/core/announcement/add/"},"Add announcement")),m.exports.createElement("li",null,m.exports.createElement(nn,{className:"link sidenav-close",to:"/admin/core/event/add/"},"Add event")),m.exports.createElement("li",{className:"divider"}),m.exports.createElement("li",null,m.exports.createElement(nn,{to:"/accounts/logout/",className:"sidenav-close"},"Logout"))),m.exports.createElement(mz,null),m.exports.createElement("div",{className:"white-bg"},e.children)))},NP=["http","https","mailto","tel"];function Gq(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let a=-1;for(;++a<NP.length;){const u=NP[a];if(r===u.length&&t.slice(0,u.length).toLowerCase()===u)return t}return a=t.indexOf("?"),a!==-1&&r>a||(a=t.indexOf("#"),a!==-1&&r>a)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var gz=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};function yg(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?UP(e.position):"start"in e||"end"in e?UP(e):"line"in e||"column"in e?qC(e):""}function qC(e){return jP(e&&e.line)+":"+jP(e&&e.column)}function UP(e){return qC(e&&e.start)+"-"+qC(e&&e.end)}function jP(e){return e&&typeof e=="number"?e:1}class cs extends Error{constructor(t,n,r){const a=[null,null];let u={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const h=r.indexOf(":");h===-1?a[1]=r:(a[0]=r.slice(0,h),a[1]=r.slice(h+1))}n&&("type"in n||"position"in n?n.position&&(u=n.position):"start"in n||"end"in n?u=n:("line"in n||"column"in n)&&(u.start=n)),this.name=yg(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack=typeof t=="object"?t.stack:"",this.reason=this.message,this.fatal,this.line=u.start.line,this.column=u.start.column,this.source=a[0],this.ruleId=a[1],this.position=u,this.actual,this.expected,this.file,this.url,this.note}}cs.prototype.file="";cs.prototype.name="";cs.prototype.reason="";cs.prototype.message="";cs.prototype.stack="";cs.prototype.fatal=null;cs.prototype.column=null;cs.prototype.line=null;cs.prototype.source=null;cs.prototype.ruleId=null;cs.prototype.position=null;const rl={basename:qq,dirname:Zq,extname:Xq,join:Kq,sep:"/"};function qq(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');vv(e);let n=0,r=-1,a=e.length,u;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.charCodeAt(a)===47){if(u){n=a+1;break}}else r<0&&(u=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let h=-1,o=t.length-1;for(;a--;)if(e.charCodeAt(a)===47){if(u){n=a+1;break}}else h<0&&(u=!0,h=a+1),o>-1&&(e.charCodeAt(a)===t.charCodeAt(o--)?o<0&&(r=a):(o=-1,r=h));return n===r?r=h:r<0&&(r=e.length),e.slice(n,r)}function Zq(e){if(vv(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Xq(e){vv(e);let t=e.length,n=-1,r=0,a=-1,u=0,h;for(;t--;){const o=e.charCodeAt(t);if(o===47){if(h){r=t+1;break}continue}n<0&&(h=!0,n=t+1),o===46?a<0?a=t:u!==1&&(u=1):a>-1&&(u=-1)}return a<0||n<0||u===0||u===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function Kq(...e){let t=-1,n;for(;++t<e.length;)vv(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Yq(n)}function Yq(e){vv(e);const t=e.charCodeAt(0)===47;let n=Jq(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Jq(e,t){let n="",r=0,a=-1,u=0,h=-1,o,g;for(;++h<=e.length;){if(h<e.length)o=e.charCodeAt(h);else{if(o===47)break;o=47}if(o===47){if(!(a===h-1||u===1))if(a!==h-1&&u===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(g=n.lastIndexOf("/"),g!==n.length-1){g<0?(n="",r=0):(n=n.slice(0,g),r=n.length-1-n.lastIndexOf("/")),a=h,u=0;continue}}else if(n.length>0){n="",r=0,a=h,u=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,h):n=e.slice(a+1,h),r=h-a-1;a=h,u=0}else o===46&&u>-1?u++:u=-1}return n}function vv(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Qq={cwd:eZ};function eZ(){return"/"}function ZC(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function tZ(e){if(typeof e=="string")e=new URL(e);else if(!ZC(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return nZ(e)}function nZ(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const Kw=["history","path","basename","stem","extname","dirname"];class vz{constructor(t){let n;t?typeof t=="string"||gz(t)?n={value:t}:ZC(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=Qq.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<Kw.length;){const u=Kw[r];u in n&&n[u]!==void 0&&(this[u]=u==="history"?[...n[u]]:n[u])}let a;for(a in n)Kw.includes(a)||(this[a]=n[a])}get path(){return this.history[this.history.length-1]}set path(t){ZC(t)&&(t=tZ(t)),Jw(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?rl.dirname(this.path):void 0}set dirname(t){$P(this.basename,"dirname"),this.path=rl.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?rl.basename(this.path):void 0}set basename(t){Jw(t,"basename"),Yw(t,"basename"),this.path=rl.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?rl.extname(this.path):void 0}set extname(t){if(Yw(t,"extname"),$P(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=rl.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?rl.basename(this.path,this.extname):void 0}set stem(t){Jw(t,"stem"),Yw(t,"stem"),this.path=rl.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const a=new cs(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=null,a}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}}function Yw(e,t){if(e&&e.includes(rl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+rl.sep+"`")}function Jw(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function $P(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function VP(e){if(e)throw e}var tx=Object.prototype.hasOwnProperty,yz=Object.prototype.toString,HP=Object.defineProperty,WP=Object.getOwnPropertyDescriptor,GP=function(t){return typeof Array.isArray=="function"?Array.isArray(t):yz.call(t)==="[object Array]"},qP=function(t){if(!t||yz.call(t)!=="[object Object]")return!1;var n=tx.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&tx.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a=="undefined"||tx.call(t,a)},ZP=function(t,n){HP&&n.name==="__proto__"?HP(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},XP=function(t,n){if(n==="__proto__")if(tx.call(t,n)){if(WP)return WP(t,n).value}else return;return t[n]},KP=function e(){var t,n,r,a,u,h,o=arguments[0],g=1,b=arguments.length,A=!1;for(typeof o=="boolean"&&(A=o,o=arguments[1]||{},g=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});g<b;++g)if(t=arguments[g],t!=null)for(n in t)r=XP(o,n),a=XP(t,n),o!==a&&(A&&a&&(qP(a)||(u=GP(a)))?(u?(u=!1,h=r&&GP(r)?r:[]):h=r&&qP(r)?r:{},ZP(o,{name:n,newValue:e(A,h,a)})):typeof a!="undefined"&&ZP(o,{name:n,newValue:a}));return o};function XC(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function rZ(){const e=[],t={run:n,use:r};return t;function n(...a){let u=-1;const h=a.pop();if(typeof h!="function")throw new TypeError("Expected function as last argument, not "+h);o(null,...a);function o(g,...b){const A=e[++u];let D=-1;if(g){h(g);return}for(;++D<a.length;)(b[D]===null||b[D]===void 0)&&(b[D]=a[D]);a=b,A?iZ(A,o)(...b):h(null,...b)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function iZ(e,t){let n;return r;function r(...h){const o=e.length>h.length;let g;o&&h.push(a);try{g=e.apply(this,h)}catch(b){const A=b;if(o&&n)throw A;return a(A)}o||(g instanceof Promise?g.then(u,a):g instanceof Error?a(g):u(g))}function a(h,...o){n||(n=!0,t(h,...o))}function u(h){a(null,h)}}const oZ=xz().freeze(),_z={}.hasOwnProperty;function xz(){const e=rZ(),t=[];let n={},r,a=-1;return u.data=h,u.Parser=void 0,u.Compiler=void 0,u.freeze=o,u.attachers=t,u.use=g,u.parse=b,u.stringify=A,u.run=D,u.runSync=z,u.process=F,u.processSync=N,u;function u(){const T=xz();let H=-1;for(;++H<t.length;)T.use(...t[H]);return T.data(KP(!0,{},n)),T}function h(T,H){return typeof T=="string"?arguments.length===2?(tE("data",r),n[T]=H,u):_z.call(n,T)&&n[T]||null:T?(tE("data",r),n=T,u):n}function o(){if(r)return u;for(;++a<t.length;){const[T,...H]=t[a];if(H[0]===!1)continue;H[0]===!0&&(H[0]=void 0);const j=T.call(u,...H);typeof j=="function"&&e.use(j)}return r=!0,a=Number.POSITIVE_INFINITY,u}function g(T,...H){let j;if(tE("use",r),T!=null)if(typeof T=="function")S(T,...H);else if(typeof T=="object")Array.isArray(T)?O(T):B(T);else throw new TypeError("Expected usable value, not `"+T+"`");return j&&(n.settings=Object.assign(n.settings||{},j)),u;function W(w){if(typeof w=="function")S(w);else if(typeof w=="object")if(Array.isArray(w)){const[P,...Y]=w;S(P,...Y)}else B(w);else throw new TypeError("Expected usable value, not `"+w+"`")}function B(w){O(w.plugins),w.settings&&(j=Object.assign(j||{},w.settings))}function O(w){let P=-1;if(w!=null)if(Array.isArray(w))for(;++P<w.length;){const Y=w[P];W(Y)}else throw new TypeError("Expected a list of plugins, not `"+w+"`")}function S(w,P){let Y=-1,ne;for(;++Y<t.length;)if(t[Y][0]===w){ne=t[Y];break}ne?(XC(ne[1])&&XC(P)&&(P=KP(!0,ne[1],P)),ne[1]=P):t.push([...arguments])}}function b(T){u.freeze();const H=Gm(T),j=u.Parser;return Qw("parse",j),YP(j,"parse")?new j(String(H),H).parse():j(String(H),H)}function A(T,H){u.freeze();const j=Gm(H),W=u.Compiler;return eE("stringify",W),JP(T),YP(W,"compile")?new W(T,j).compile():W(T,j)}function D(T,H,j){if(JP(T),u.freeze(),!j&&typeof H=="function"&&(j=H,H=void 0),!j)return new Promise(W);W(null,j);function W(B,O){e.run(T,Gm(H),S);function S(w,P,Y){P=P||T,w?O(w):B?B(P):j(null,P,Y)}}}function z(T,H){let j,W;return u.run(T,H,B),QP("runSync","run",W),j;function B(O,S){VP(O),j=S,W=!0}}function F(T,H){if(u.freeze(),Qw("process",u.Parser),eE("process",u.Compiler),!H)return new Promise(j);j(null,H);function j(W,B){const O=Gm(T);u.run(u.parse(O),O,(w,P,Y)=>{if(w||!P||!Y)S(w);else{const ne=u.stringify(P,Y);ne==null||(lZ(ne)?Y.value=ne:Y.result=ne),S(w,Y)}});function S(w,P){w||!P?B(w):W?W(P):H(null,P)}}}function N(T){let H;u.freeze(),Qw("processSync",u.Parser),eE("processSync",u.Compiler);const j=Gm(T);return u.process(j,W),QP("processSync","process",H),j;function W(B){H=!0,VP(B)}}}function YP(e,t){return typeof e=="function"&&e.prototype&&(aZ(e.prototype)||t in e.prototype)}function aZ(e){let t;for(t in e)if(_z.call(e,t))return!0;return!1}function Qw(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function eE(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function tE(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function JP(e){if(!XC(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function QP(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Gm(e){return sZ(e)?e:new vz(e)}function sZ(e){return Boolean(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function lZ(e){return typeof e=="string"||gz(e)}function cZ(e,t){var{includeImageAlt:n=!0}=t||{};return bz(e,n)}function bz(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&eD(e.children,t)||Array.isArray(e)&&eD(e,t))||""}function eD(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=bz(e[r],t);return n.join("")}function Ra(e,t,n,r){const a=e.length;let u=0,h;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)h=Array.from(r),h.unshift(t,n),[].splice.apply(e,h);else for(n&&[].splice.apply(e,[t,n]);u<r.length;)h=r.slice(u,u+1e4),h.unshift(t,0),[].splice.apply(e,h),u+=1e4,t+=1e4}function Ja(e,t){return e.length>0?(Ra(e,e.length,0,t),e):t}const tD={}.hasOwnProperty;function wz(e){const t={};let n=-1;for(;++n<e.length;)uZ(t,e[n]);return t}function uZ(e,t){let n;for(n in t){const a=(tD.call(e,n)?e[n]:void 0)||(e[n]={}),u=t[n];let h;for(h in u){tD.call(a,h)||(a[h]=[]);const o=u[h];dZ(a[h],Array.isArray(o)?o:o?[o]:[])}}}function dZ(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ra(e,0,0,r)}const hZ=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Qa=mu(/[A-Za-z]/),Jx=mu(/\d/),pZ=mu(/[\dA-Fa-f]/),Yo=mu(/[\dA-Za-z]/),fZ=mu(/[!-/:-@[-`{-~]/),nD=mu(/[#-'*+\--9=?A-Z^-~]/);function Kg(e){return e!==null&&(e<32||e===127)}function Zi(e){return e!==null&&(e<0||e===32)}function Dn(e){return e!==null&&e<-2}function ri(e){return e===-2||e===-1||e===32}const $0=mu(/\s/),V0=mu(hZ);function mu(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Cr(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let u=0;return h;function h(g){return ri(g)?(e.enter(n),o(g)):t(g)}function o(g){return ri(g)&&u++<a?(e.consume(g),o):(e.exit(n),t(g))}}const mZ={tokenize:gZ};function gZ(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Cr(e,t,"linePrefix")}function a(o){return e.enter("paragraph"),u(o)}function u(o){const g=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=g),n=g,h(o)}function h(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return Dn(o)?(e.consume(o),e.exit("chunkText"),u):(e.consume(o),h)}}const vZ={tokenize:yZ},rD={tokenize:_Z};function yZ(e){const t=this,n=[];let r=0,a,u,h;return o;function o(B){if(r<n.length){const O=n[r];return t.containerState=O[1],e.attempt(O[0].continuation,g,b)(B)}return b(B)}function g(B){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&W();const O=t.events.length;let S=O,w;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){w=t.events[S][1].end;break}j(r);let P=O;for(;P<t.events.length;)t.events[P][1].end=Object.assign({},w),P++;return Ra(t.events,S+1,0,t.events.slice(O)),t.events.length=P,b(B)}return o(B)}function b(B){if(r===n.length){if(!a)return z(B);if(a.currentConstruct&&a.currentConstruct.concrete)return N(B);t.interrupt=Boolean(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(rD,A,D)(B)}function A(B){return a&&W(),j(r),z(B)}function D(B){return t.parser.lazy[t.now().line]=r!==n.length,h=t.now().offset,N(B)}function z(B){return t.containerState={},e.attempt(rD,F,N)(B)}function F(B){return r++,n.push([t.currentConstruct,t.containerState]),z(B)}function N(B){if(B===null){a&&W(),j(0),e.consume(B);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:u,_tokenizer:a}),T(B)}function T(B){if(B===null){H(e.exit("chunkFlow"),!0),j(0),e.consume(B);return}return Dn(B)?(e.consume(B),H(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(B),T)}function H(B,O){const S=t.sliceStream(B);if(O&&S.push(null),B.previous=u,u&&(u.next=B),u=B,a.defineSkip(B.start),a.write(S),t.parser.lazy[B.start.line]){let w=a.events.length;for(;w--;)if(a.events[w][1].start.offset<h&&(!a.events[w][1].end||a.events[w][1].end.offset>h))return;const P=t.events.length;let Y=P,ne,ae;for(;Y--;)if(t.events[Y][0]==="exit"&&t.events[Y][1].type==="chunkFlow"){if(ne){ae=t.events[Y][1].end;break}ne=!0}for(j(r),w=P;w<t.events.length;)t.events[w][1].end=Object.assign({},ae),w++;Ra(t.events,Y+1,0,t.events.slice(P)),t.events.length=w}}function j(B){let O=n.length;for(;O-- >B;){const S=n[O];t.containerState=S[1],S[0].exit.call(t,e)}n.length=B}function W(){a.write([null]),u=void 0,a=void 0,t.containerState._closeFlow=void 0}}function _Z(e,t,n){return Cr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qx(e){if(e===null||Zi(e)||$0(e))return 1;if(V0(e))return 2}function H0(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const u=e[a].resolveAll;u&&!r.includes(u)&&(t=u(t,n),r.push(u))}return t}const KC={name:"attention",tokenize:bZ,resolveAll:xZ};function xZ(e,t){let n=-1,r,a,u,h,o,g,b,A;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;g=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const D=Object.assign({},e[r][1].end),z=Object.assign({},e[n][1].start);iD(D,-g),iD(z,g),h={type:g>1?"strongSequence":"emphasisSequence",start:D,end:Object.assign({},e[r][1].end)},o={type:g>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:z},u={type:g>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a={type:g>1?"strong":"emphasis",start:Object.assign({},h.start),end:Object.assign({},o.end)},e[r][1].end=Object.assign({},h.start),e[n][1].start=Object.assign({},o.end),b=[],e[r][1].end.offset-e[r][1].start.offset&&(b=Ja(b,[["enter",e[r][1],t],["exit",e[r][1],t]])),b=Ja(b,[["enter",a,t],["enter",h,t],["exit",h,t],["enter",u,t]]),b=Ja(b,H0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),b=Ja(b,[["exit",u,t],["enter",o,t],["exit",o,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(A=2,b=Ja(b,[["enter",e[n][1],t],["exit",e[n][1],t]])):A=0,Ra(e,r-1,n-r+3,b),n=r+b.length-A-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function bZ(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Qx(r);let u;return h;function h(g){return e.enter("attentionSequence"),u=g,o(g)}function o(g){if(g===u)return e.consume(g),o;const b=e.exit("attentionSequence"),A=Qx(g),D=!A||A===2&&a||n.includes(g),z=!a||a===2&&A||n.includes(r);return b._open=Boolean(u===42?D:D&&(a||!z)),b._close=Boolean(u===42?z:z&&(A||!D)),t(g)}}function iD(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const wZ={name:"autolink",tokenize:EZ};function EZ(e,t,n){let r=1;return a;function a(N){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(N),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),u}function u(N){return Qa(N)?(e.consume(N),h):nD(N)?b(N):n(N)}function h(N){return N===43||N===45||N===46||Yo(N)?o(N):b(N)}function o(N){return N===58?(e.consume(N),g):(N===43||N===45||N===46||Yo(N))&&r++<32?(e.consume(N),o):b(N)}function g(N){return N===62?(e.exit("autolinkProtocol"),F(N)):N===null||N===32||N===60||Kg(N)?n(N):(e.consume(N),g)}function b(N){return N===64?(e.consume(N),r=0,A):nD(N)?(e.consume(N),b):n(N)}function A(N){return Yo(N)?D(N):n(N)}function D(N){return N===46?(e.consume(N),r=0,A):N===62?(e.exit("autolinkProtocol").type="autolinkEmail",F(N)):z(N)}function z(N){return(N===45||Yo(N))&&r++<63?(e.consume(N),N===45?z:D):n(N)}function F(N){return e.enter("autolinkMarker"),e.consume(N),e.exit("autolinkMarker"),e.exit("autolink"),t}}const yv={tokenize:CZ,partial:!0};function CZ(e,t,n){return Cr(e,r,"linePrefix");function r(a){return a===null||Dn(a)?t(a):n(a)}}const Ez={name:"blockQuote",tokenize:SZ,continuation:{tokenize:kZ},exit:TZ};function SZ(e,t,n){const r=this;return a;function a(h){if(h===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(h),e.exit("blockQuoteMarker"),u}return n(h)}function u(h){return ri(h)?(e.enter("blockQuotePrefixWhitespace"),e.consume(h),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(h))}}function kZ(e,t,n){return Cr(e,e.attempt(Ez,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function TZ(e){e.exit("blockQuote")}const Cz={name:"characterEscape",tokenize:AZ};function AZ(e,t,n){return r;function r(u){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(u),e.exit("escapeMarker"),a}function a(u){return fZ(u)?(e.enter("characterEscapeValue"),e.consume(u),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(u)}}const oD=document.createElement("i");function Kk(e){const t="&"+e+";";oD.innerHTML=t;const n=oD.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const Sz={name:"characterReference",tokenize:MZ};function MZ(e,t,n){const r=this;let a=0,u,h;return o;function o(D){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(D),e.exit("characterReferenceMarker"),g}function g(D){return D===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(D),e.exit("characterReferenceMarkerNumeric"),b):(e.enter("characterReferenceValue"),u=31,h=Yo,A(D))}function b(D){return D===88||D===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(D),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),u=6,h=pZ,A):(e.enter("characterReferenceValue"),u=7,h=Jx,A(D))}function A(D){let z;return D===59&&a?(z=e.exit("characterReferenceValue"),h===Yo&&!Kk(r.sliceSerialize(z))?n(D):(e.enter("characterReferenceMarker"),e.consume(D),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):h(D)&&a++<u?(e.consume(D),A):n(D)}}const aD={name:"codeFenced",tokenize:IZ,concrete:!0};function IZ(e,t,n){const r=this,a={tokenize:S,partial:!0},u={tokenize:O,partial:!0},h=this.events[this.events.length-1],o=h&&h[1].type==="linePrefix"?h[2].sliceSerialize(h[1],!0).length:0;let g=0,b;return A;function A(w){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),b=w,D(w)}function D(w){return w===b?(e.consume(w),g++,D):(e.exit("codeFencedFenceSequence"),g<3?n(w):Cr(e,z,"whitespace")(w))}function z(w){return w===null||Dn(w)?H(w):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),F(w))}function F(w){return w===null||Zi(w)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Cr(e,N,"whitespace")(w)):w===96&&w===b?n(w):(e.consume(w),F)}function N(w){return w===null||Dn(w)?H(w):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),T(w))}function T(w){return w===null||Dn(w)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),H(w)):w===96&&w===b?n(w):(e.consume(w),T)}function H(w){return e.exit("codeFencedFence"),r.interrupt?t(w):j(w)}function j(w){return w===null?B(w):Dn(w)?e.attempt(u,e.attempt(a,B,o?Cr(e,j,"linePrefix",o+1):j),B)(w):(e.enter("codeFlowValue"),W(w))}function W(w){return w===null||Dn(w)?(e.exit("codeFlowValue"),j(w)):(e.consume(w),W)}function B(w){return e.exit("codeFenced"),t(w)}function O(w,P,Y){const ne=this;return ae;function ae(fe){return w.enter("lineEnding"),w.consume(fe),w.exit("lineEnding"),oe}function oe(fe){return ne.parser.lazy[ne.now().line]?Y(fe):P(fe)}}function S(w,P,Y){let ne=0;return Cr(w,ae,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function ae(Re){return w.enter("codeFencedFence"),w.enter("codeFencedFenceSequence"),oe(Re)}function oe(Re){return Re===b?(w.consume(Re),ne++,oe):ne<g?Y(Re):(w.exit("codeFencedFenceSequence"),Cr(w,fe,"whitespace")(Re))}function fe(Re){return Re===null||Dn(Re)?(w.exit("codeFencedFence"),P(Re)):Y(Re)}}}const nE={name:"codeIndented",tokenize:DZ},PZ={tokenize:RZ,partial:!0};function DZ(e,t,n){const r=this;return a;function a(b){return e.enter("codeIndented"),Cr(e,u,"linePrefix",4+1)(b)}function u(b){const A=r.events[r.events.length-1];return A&&A[1].type==="linePrefix"&&A[2].sliceSerialize(A[1],!0).length>=4?h(b):n(b)}function h(b){return b===null?g(b):Dn(b)?e.attempt(PZ,h,g)(b):(e.enter("codeFlowValue"),o(b))}function o(b){return b===null||Dn(b)?(e.exit("codeFlowValue"),h(b)):(e.consume(b),o)}function g(b){return e.exit("codeIndented"),t(b)}}function RZ(e,t,n){const r=this;return a;function a(h){return r.parser.lazy[r.now().line]?n(h):Dn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),a):Cr(e,u,"linePrefix",4+1)(h)}function u(h){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(h):Dn(h)?a(h):n(h)}}const LZ={name:"codeText",tokenize:BZ,resolve:OZ,previous:zZ};function OZ(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function zZ(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function BZ(e,t,n){let r=0,a,u;return h;function h(D){return e.enter("codeText"),e.enter("codeTextSequence"),o(D)}function o(D){return D===96?(e.consume(D),r++,o):(e.exit("codeTextSequence"),g(D))}function g(D){return D===null?n(D):D===96?(u=e.enter("codeTextSequence"),a=0,A(D)):D===32?(e.enter("space"),e.consume(D),e.exit("space"),g):Dn(D)?(e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),g):(e.enter("codeTextData"),b(D))}function b(D){return D===null||D===32||D===96||Dn(D)?(e.exit("codeTextData"),g(D)):(e.consume(D),b)}function A(D){return D===96?(e.consume(D),a++,A):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(D)):(u.type="codeTextData",b(D))}}function kz(e){const t={};let n=-1,r,a,u,h,o,g,b;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(g=r[1]._tokenizer.events,u=0,u<g.length&&g[u][1].type==="lineEndingBlank"&&(u+=2),u<g.length&&g[u][1].type==="content"))for(;++u<g.length&&g[u][1].type!=="content";)g[u][1].type==="chunkText"&&(g[u][1]._isInFirstContentOfListItem=!0,u++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,FZ(e,n)),n=t[n],b=!0);else if(r[1]._container){for(u=n,a=void 0;u--&&(h=e[u],h[1].type==="lineEnding"||h[1].type==="lineEndingBlank");)h[0]==="enter"&&(a&&(e[a][1].type="lineEndingBlank"),h[1].type="lineEnding",a=u);a&&(r[1].end=Object.assign({},e[a][1].start),o=e.slice(a,n),o.unshift(r),Ra(e,a,n-a+1,o))}}return!b}function FZ(e,t){const n=e[t][1],r=e[t][2];let a=t-1;const u=[],h=n._tokenizer||r.parser[n.contentType](n.start),o=h.events,g=[],b={};let A,D,z=-1,F=n,N=0,T=0;const H=[T];for(;F;){for(;e[++a][1]!==F;);u.push(a),F._tokenizer||(A=r.sliceStream(F),F.next||A.push(null),D&&h.defineSkip(F.start),F._isInFirstContentOfListItem&&(h._gfmTasklistFirstContentOfListItem=!0),h.write(A),F._isInFirstContentOfListItem&&(h._gfmTasklistFirstContentOfListItem=void 0)),D=F,F=F.next}for(F=n;++z<o.length;)o[z][0]==="exit"&&o[z-1][0]==="enter"&&o[z][1].type===o[z-1][1].type&&o[z][1].start.line!==o[z][1].end.line&&(T=z+1,H.push(T),F._tokenizer=void 0,F.previous=void 0,F=F.next);for(h.events=[],F?(F._tokenizer=void 0,F.previous=void 0):H.pop(),z=H.length;z--;){const j=o.slice(H[z],H[z+1]),W=u.pop();g.unshift([W,W+j.length-1]),Ra(e,W,2,j)}for(z=-1;++z<g.length;)b[N+g[z][0]]=N+g[z][1],N+=g[z][1]-g[z][0]-1;return b}const NZ={tokenize:$Z,resolve:jZ},UZ={tokenize:VZ,partial:!0};function jZ(e){return kz(e),e}function $Z(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(o)}function a(o){return o===null?u(o):Dn(o)?e.check(UZ,h,u)(o):(e.consume(o),a)}function u(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function h(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function VZ(e,t,n){const r=this;return a;function a(h){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Cr(e,u,"linePrefix")}function u(h){if(h===null||Dn(h))return n(h);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(h):e.interrupt(r.parser.constructs.flow,n,t)(h)}}function Tz(e,t,n,r,a,u,h,o,g){const b=g||Number.POSITIVE_INFINITY;let A=0;return D;function D(j){return j===60?(e.enter(r),e.enter(a),e.enter(u),e.consume(j),e.exit(u),z):j===null||j===41||Kg(j)?n(j):(e.enter(r),e.enter(h),e.enter(o),e.enter("chunkString",{contentType:"string"}),T(j))}function z(j){return j===62?(e.enter(u),e.consume(j),e.exit(u),e.exit(a),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),F(j))}function F(j){return j===62?(e.exit("chunkString"),e.exit(o),z(j)):j===null||j===60||Dn(j)?n(j):(e.consume(j),j===92?N:F)}function N(j){return j===60||j===62||j===92?(e.consume(j),F):F(j)}function T(j){return j===40?++A>b?n(j):(e.consume(j),T):j===41?A--?(e.consume(j),T):(e.exit("chunkString"),e.exit(o),e.exit(h),e.exit(r),t(j)):j===null||Zi(j)?A?n(j):(e.exit("chunkString"),e.exit(o),e.exit(h),e.exit(r),t(j)):Kg(j)?n(j):(e.consume(j),j===92?H:T)}function H(j){return j===40||j===41||j===92?(e.consume(j),T):T(j)}}function Az(e,t,n,r,a,u){const h=this;let o=0,g;return b;function b(F){return e.enter(r),e.enter(a),e.consume(F),e.exit(a),e.enter(u),A}function A(F){return F===null||F===91||F===93&&!g||F===94&&!o&&"_hiddenFootnoteSupport"in h.parser.constructs||o>999?n(F):F===93?(e.exit(u),e.enter(a),e.consume(F),e.exit(a),e.exit(r),t):Dn(F)?(e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),A):(e.enter("chunkString",{contentType:"string"}),D(F))}function D(F){return F===null||F===91||F===93||Dn(F)||o++>999?(e.exit("chunkString"),A(F)):(e.consume(F),g=g||!ri(F),F===92?z:D)}function z(F){return F===91||F===92||F===93?(e.consume(F),o++,D):D(F)}}function Mz(e,t,n,r,a,u){let h;return o;function o(z){return e.enter(r),e.enter(a),e.consume(z),e.exit(a),h=z===40?41:z,g}function g(z){return z===h?(e.enter(a),e.consume(z),e.exit(a),e.exit(r),t):(e.enter(u),b(z))}function b(z){return z===h?(e.exit(u),g(h)):z===null?n(z):Dn(z)?(e.enter("lineEnding"),e.consume(z),e.exit("lineEnding"),Cr(e,b,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),A(z))}function A(z){return z===h||z===null||Dn(z)?(e.exit("chunkString"),b(z)):(e.consume(z),z===92?D:A)}function D(z){return z===h||z===92?(e.consume(z),A):A(z)}}function _g(e,t){let n;return r;function r(a){return Dn(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):ri(a)?Cr(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}function Ls(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const HZ={name:"definition",tokenize:GZ},WZ={tokenize:qZ,partial:!0};function GZ(e,t,n){const r=this;let a;return u;function u(g){return e.enter("definition"),Az.call(r,e,h,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function h(g){return a=Ls(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),_g(e,Tz(e,e.attempt(WZ,Cr(e,o,"whitespace"),Cr(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(g)}function o(g){return g===null||Dn(g)?(e.exit("definition"),r.parser.defined.includes(a)||r.parser.defined.push(a),t(g)):n(g)}}function qZ(e,t,n){return r;function r(h){return Zi(h)?_g(e,a)(h):n(h)}function a(h){return h===34||h===39||h===40?Mz(e,Cr(e,u,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(h):n(h)}function u(h){return h===null||Dn(h)?t(h):n(h)}}const ZZ={name:"hardBreakEscape",tokenize:XZ};function XZ(e,t,n){return r;function r(u){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(u),a}function a(u){return Dn(u)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(u)):n(u)}}const KZ={name:"headingAtx",tokenize:JZ,resolve:YZ};function YZ(e,t){let n=e.length-2,r=3,a,u;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},u={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ra(e,r,n-r+1,[["enter",a,t],["enter",u,t],["exit",u,t],["exit",a,t]])),e}function JZ(e,t,n){const r=this;let a=0;return u;function u(A){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),h(A)}function h(A){return A===35&&a++<6?(e.consume(A),h):A===null||Zi(A)?(e.exit("atxHeadingSequence"),r.interrupt?t(A):o(A)):n(A)}function o(A){return A===35?(e.enter("atxHeadingSequence"),g(A)):A===null||Dn(A)?(e.exit("atxHeading"),t(A)):ri(A)?Cr(e,o,"whitespace")(A):(e.enter("atxHeadingText"),b(A))}function g(A){return A===35?(e.consume(A),g):(e.exit("atxHeadingSequence"),o(A))}function b(A){return A===null||A===35||Zi(A)?(e.exit("atxHeadingText"),o(A)):(e.consume(A),b)}}const QZ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sD=["pre","script","style","textarea"],eX={name:"htmlFlow",tokenize:rX,resolveTo:nX,concrete:!0},tX={tokenize:iX,partial:!0};function nX(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function rX(e,t,n){const r=this;let a,u,h,o,g;return b;function b(be){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(be),A}function A(be){return be===33?(e.consume(be),D):be===47?(e.consume(be),N):be===63?(e.consume(be),a=3,r.interrupt?t:ct):Qa(be)?(e.consume(be),h=String.fromCharCode(be),u=!0,T):n(be)}function D(be){return be===45?(e.consume(be),a=2,z):be===91?(e.consume(be),a=5,h="CDATA[",o=0,F):Qa(be)?(e.consume(be),a=4,r.interrupt?t:ct):n(be)}function z(be){return be===45?(e.consume(be),r.interrupt?t:ct):n(be)}function F(be){return be===h.charCodeAt(o++)?(e.consume(be),o===h.length?r.interrupt?t:oe:F):n(be)}function N(be){return Qa(be)?(e.consume(be),h=String.fromCharCode(be),T):n(be)}function T(be){return be===null||be===47||be===62||Zi(be)?be!==47&&u&&sD.includes(h.toLowerCase())?(a=1,r.interrupt?t(be):oe(be)):QZ.includes(h.toLowerCase())?(a=6,be===47?(e.consume(be),H):r.interrupt?t(be):oe(be)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(be):u?W(be):j(be)):be===45||Yo(be)?(e.consume(be),h+=String.fromCharCode(be),T):n(be)}function H(be){return be===62?(e.consume(be),r.interrupt?t:oe):n(be)}function j(be){return ri(be)?(e.consume(be),j):ne(be)}function W(be){return be===47?(e.consume(be),ne):be===58||be===95||Qa(be)?(e.consume(be),B):ri(be)?(e.consume(be),W):ne(be)}function B(be){return be===45||be===46||be===58||be===95||Yo(be)?(e.consume(be),B):O(be)}function O(be){return be===61?(e.consume(be),S):ri(be)?(e.consume(be),O):W(be)}function S(be){return be===null||be===60||be===61||be===62||be===96?n(be):be===34||be===39?(e.consume(be),g=be,w):ri(be)?(e.consume(be),S):(g=null,P(be))}function w(be){return be===null||Dn(be)?n(be):be===g?(e.consume(be),Y):(e.consume(be),w)}function P(be){return be===null||be===34||be===39||be===60||be===61||be===62||be===96||Zi(be)?O(be):(e.consume(be),P)}function Y(be){return be===47||be===62||ri(be)?W(be):n(be)}function ne(be){return be===62?(e.consume(be),ae):n(be)}function ae(be){return ri(be)?(e.consume(be),ae):be===null||Dn(be)?oe(be):n(be)}function oe(be){return be===45&&a===2?(e.consume(be),Oe):be===60&&a===1?(e.consume(be),Ee):be===62&&a===4?(e.consume(be),nt):be===63&&a===3?(e.consume(be),ct):be===93&&a===5?(e.consume(be),Ze):Dn(be)&&(a===6||a===7)?e.check(tX,nt,fe)(be):be===null||Dn(be)?fe(be):(e.consume(be),oe)}function fe(be){return e.exit("htmlFlowData"),Re(be)}function Re(be){return be===null?xe(be):Dn(be)?e.attempt({tokenize:Be,partial:!0},Re,xe)(be):(e.enter("htmlFlowData"),oe(be))}function Be(be,on,Ut){return ln;function ln(un){return be.enter("lineEnding"),be.consume(un),be.exit("lineEnding"),tn}function tn(un){return r.parser.lazy[r.now().line]?Ut(un):on(un)}}function Oe(be){return be===45?(e.consume(be),ct):oe(be)}function Ee(be){return be===47?(e.consume(be),h="",pt):oe(be)}function pt(be){return be===62&&sD.includes(h.toLowerCase())?(e.consume(be),nt):Qa(be)&&h.length<8?(e.consume(be),h+=String.fromCharCode(be),pt):oe(be)}function Ze(be){return be===93?(e.consume(be),ct):oe(be)}function ct(be){return be===62?(e.consume(be),nt):be===45&&a===2?(e.consume(be),ct):oe(be)}function nt(be){return be===null||Dn(be)?(e.exit("htmlFlowData"),xe(be)):(e.consume(be),nt)}function xe(be){return e.exit("htmlFlow"),t(be)}}function iX(e,t,n){return r;function r(a){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),e.attempt(yv,t,n)}}const oX={name:"htmlText",tokenize:aX};function aX(e,t,n){const r=this;let a,u,h,o;return g;function g(xe){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(xe),b}function b(xe){return xe===33?(e.consume(xe),A):xe===47?(e.consume(xe),P):xe===63?(e.consume(xe),S):Qa(xe)?(e.consume(xe),ae):n(xe)}function A(xe){return xe===45?(e.consume(xe),D):xe===91?(e.consume(xe),u="CDATA[",h=0,H):Qa(xe)?(e.consume(xe),O):n(xe)}function D(xe){return xe===45?(e.consume(xe),z):n(xe)}function z(xe){return xe===null||xe===62?n(xe):xe===45?(e.consume(xe),F):N(xe)}function F(xe){return xe===null||xe===62?n(xe):N(xe)}function N(xe){return xe===null?n(xe):xe===45?(e.consume(xe),T):Dn(xe)?(o=N,Ze(xe)):(e.consume(xe),N)}function T(xe){return xe===45?(e.consume(xe),nt):N(xe)}function H(xe){return xe===u.charCodeAt(h++)?(e.consume(xe),h===u.length?j:H):n(xe)}function j(xe){return xe===null?n(xe):xe===93?(e.consume(xe),W):Dn(xe)?(o=j,Ze(xe)):(e.consume(xe),j)}function W(xe){return xe===93?(e.consume(xe),B):j(xe)}function B(xe){return xe===62?nt(xe):xe===93?(e.consume(xe),B):j(xe)}function O(xe){return xe===null||xe===62?nt(xe):Dn(xe)?(o=O,Ze(xe)):(e.consume(xe),O)}function S(xe){return xe===null?n(xe):xe===63?(e.consume(xe),w):Dn(xe)?(o=S,Ze(xe)):(e.consume(xe),S)}function w(xe){return xe===62?nt(xe):S(xe)}function P(xe){return Qa(xe)?(e.consume(xe),Y):n(xe)}function Y(xe){return xe===45||Yo(xe)?(e.consume(xe),Y):ne(xe)}function ne(xe){return Dn(xe)?(o=ne,Ze(xe)):ri(xe)?(e.consume(xe),ne):nt(xe)}function ae(xe){return xe===45||Yo(xe)?(e.consume(xe),ae):xe===47||xe===62||Zi(xe)?oe(xe):n(xe)}function oe(xe){return xe===47?(e.consume(xe),nt):xe===58||xe===95||Qa(xe)?(e.consume(xe),fe):Dn(xe)?(o=oe,Ze(xe)):ri(xe)?(e.consume(xe),oe):nt(xe)}function fe(xe){return xe===45||xe===46||xe===58||xe===95||Yo(xe)?(e.consume(xe),fe):Re(xe)}function Re(xe){return xe===61?(e.consume(xe),Be):Dn(xe)?(o=Re,Ze(xe)):ri(xe)?(e.consume(xe),Re):oe(xe)}function Be(xe){return xe===null||xe===60||xe===61||xe===62||xe===96?n(xe):xe===34||xe===39?(e.consume(xe),a=xe,Oe):Dn(xe)?(o=Be,Ze(xe)):ri(xe)?(e.consume(xe),Be):(e.consume(xe),a=void 0,pt)}function Oe(xe){return xe===a?(e.consume(xe),Ee):xe===null?n(xe):Dn(xe)?(o=Oe,Ze(xe)):(e.consume(xe),Oe)}function Ee(xe){return xe===62||xe===47||Zi(xe)?oe(xe):n(xe)}function pt(xe){return xe===null||xe===34||xe===39||xe===60||xe===61||xe===96?n(xe):xe===62||Zi(xe)?oe(xe):(e.consume(xe),pt)}function Ze(xe){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(xe),e.exit("lineEnding"),Cr(e,ct,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ct(xe){return e.enter("htmlTextData"),o(xe)}function nt(xe){return xe===62?(e.consume(xe),e.exit("htmlTextData"),e.exit("htmlText"),t):n(xe)}}const Yk={name:"labelEnd",tokenize:hX,resolveTo:dX,resolveAll:uX},sX={tokenize:pX},lX={tokenize:fX},cX={tokenize:mX};function uX(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function dX(e,t){let n=e.length,r=0,a,u,h,o;for(;n--;)if(a=e[n][1],u){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(h){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(u=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(h=n);const g={type:e[u][1].type==="labelLink"?"link":"image",start:Object.assign({},e[u][1].start),end:Object.assign({},e[e.length-1][1].end)},b={type:"label",start:Object.assign({},e[u][1].start),end:Object.assign({},e[h][1].end)},A={type:"labelText",start:Object.assign({},e[u+r+2][1].end),end:Object.assign({},e[h-2][1].start)};return o=[["enter",g,t],["enter",b,t]],o=Ja(o,e.slice(u+1,u+r+3)),o=Ja(o,[["enter",A,t]]),o=Ja(o,H0(t.parser.constructs.insideSpan.null,e.slice(u+r+4,h-3),t)),o=Ja(o,[["exit",A,t],e[h-2],e[h-1],["exit",b,t]]),o=Ja(o,e.slice(h+1)),o=Ja(o,[["exit",g,t]]),Ra(e,u,e.length,o),e}function hX(e,t,n){const r=this;let a=r.events.length,u,h;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){u=r.events[a][1];break}return o;function o(A){return u?u._inactive?b(A):(h=r.parser.defined.includes(Ls(r.sliceSerialize({start:u.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(A),e.exit("labelMarker"),e.exit("labelEnd"),g):n(A)}function g(A){return A===40?e.attempt(sX,t,h?t:b)(A):A===91?e.attempt(lX,t,h?e.attempt(cX,t,b):b)(A):h?t(A):b(A)}function b(A){return u._balanced=!0,n(A)}}function pX(e,t,n){return r;function r(g){return e.enter("resource"),e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),_g(e,a)}function a(g){return g===41?o(g):Tz(e,u,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(g)}function u(g){return Zi(g)?_g(e,h)(g):o(g)}function h(g){return g===34||g===39||g===40?Mz(e,_g(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(g):o(g)}function o(g){return g===41?(e.enter("resourceMarker"),e.consume(g),e.exit("resourceMarker"),e.exit("resource"),t):n(g)}}function fX(e,t,n){const r=this;return a;function a(h){return Az.call(r,e,u,n,"reference","referenceMarker","referenceString")(h)}function u(h){return r.parser.defined.includes(Ls(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(h):n(h)}}function mX(e,t,n){return r;function r(u){return e.enter("reference"),e.enter("referenceMarker"),e.consume(u),e.exit("referenceMarker"),a}function a(u){return u===93?(e.enter("referenceMarker"),e.consume(u),e.exit("referenceMarker"),e.exit("reference"),t):n(u)}}const gX={name:"labelStartImage",tokenize:vX,resolveAll:Yk.resolveAll};function vX(e,t,n){const r=this;return a;function a(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),u}function u(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),h):n(o)}function h(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const yX={name:"labelStartLink",tokenize:_X,resolveAll:Yk.resolveAll};function _X(e,t,n){const r=this;return a;function a(h){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelLink"),u}function u(h){return h===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(h):t(h)}}const rE={name:"lineEnding",tokenize:xX};function xX(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Cr(e,t,"linePrefix")}}const nx={name:"thematicBreak",tokenize:bX};function bX(e,t,n){let r=0,a;return u;function u(g){return e.enter("thematicBreak"),a=g,h(g)}function h(g){return g===a?(e.enter("thematicBreakSequence"),o(g)):ri(g)?Cr(e,h,"whitespace")(g):r<3||g!==null&&!Dn(g)?n(g):(e.exit("thematicBreak"),t(g))}function o(g){return g===a?(e.consume(g),r++,o):(e.exit("thematicBreakSequence"),h(g))}}const ca={name:"list",tokenize:CX,continuation:{tokenize:SX},exit:TX},wX={tokenize:AX,partial:!0},EX={tokenize:kX,partial:!0};function CX(e,t,n){const r=this,a=r.events[r.events.length-1];let u=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,h=0;return o;function o(F){const N=r.containerState.type||(F===42||F===43||F===45?"listUnordered":"listOrdered");if(N==="listUnordered"?!r.containerState.marker||F===r.containerState.marker:Jx(F)){if(r.containerState.type||(r.containerState.type=N,e.enter(N,{_container:!0})),N==="listUnordered")return e.enter("listItemPrefix"),F===42||F===45?e.check(nx,n,b)(F):b(F);if(!r.interrupt||F===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),g(F)}return n(F)}function g(F){return Jx(F)&&++h<10?(e.consume(F),g):(!r.interrupt||h<2)&&(r.containerState.marker?F===r.containerState.marker:F===41||F===46)?(e.exit("listItemValue"),b(F)):n(F)}function b(F){return e.enter("listItemMarker"),e.consume(F),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||F,e.check(yv,r.interrupt?n:A,e.attempt(wX,z,D))}function A(F){return r.containerState.initialBlankLine=!0,u++,z(F)}function D(F){return ri(F)?(e.enter("listItemPrefixWhitespace"),e.consume(F),e.exit("listItemPrefixWhitespace"),z):n(F)}function z(F){return r.containerState.size=u+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(F)}}function SX(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(yv,a,u);function a(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Cr(e,t,"listItemIndent",r.containerState.size+1)(o)}function u(o){return r.containerState.furtherBlankLines||!ri(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,h(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(EX,t,h)(o))}function h(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,Cr(e,e.attempt(ca,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function kX(e,t,n){const r=this;return Cr(e,a,"listItemIndent",r.containerState.size+1);function a(u){const h=r.events[r.events.length-1];return h&&h[1].type==="listItemIndent"&&h[2].sliceSerialize(h[1],!0).length===r.containerState.size?t(u):n(u)}}function TX(e){e.exit(this.containerState.type)}function AX(e,t,n){const r=this;return Cr(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function a(u){const h=r.events[r.events.length-1];return!ri(u)&&h&&h[1].type==="listItemPrefixWhitespace"?t(u):n(u)}}const lD={name:"setextUnderline",tokenize:IX,resolveTo:MX};function MX(e,t){let n=e.length,r,a,u;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!u&&e[n][1].type==="definition"&&(u=n);const h={type:"setextHeading",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[a][1].type="setextHeadingText",u?(e.splice(a,0,["enter",h,t]),e.splice(u+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[u][1].end)):e[r][1]=h,e.push(["exit",h,t]),e}function IX(e,t,n){const r=this;let a=r.events.length,u,h;for(;a--;)if(r.events[a][1].type!=="lineEnding"&&r.events[a][1].type!=="linePrefix"&&r.events[a][1].type!=="content"){h=r.events[a][1].type==="paragraph";break}return o;function o(A){return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),u=A,g(A)):n(A)}function g(A){return A===u?(e.consume(A),g):(e.exit("setextHeadingLineSequence"),Cr(e,b,"lineSuffix")(A))}function b(A){return A===null||Dn(A)?(e.exit("setextHeadingLine"),t(A)):n(A)}}const PX={tokenize:DX};function DX(e){const t=this,n=e.attempt(yv,r,e.attempt(this.parser.constructs.flowInitial,a,Cr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(NZ,a)),"linePrefix")));return n;function r(u){if(u===null){e.consume(u);return}return e.enter("lineEndingBlank"),e.consume(u),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(u){if(u===null){e.consume(u);return}return e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const RX={resolveAll:Pz()},LX=Iz("string"),OX=Iz("text");function Iz(e){return{tokenize:t,resolveAll:Pz(e==="text"?zX:void 0)};function t(n){const r=this,a=this.parser.constructs[e],u=n.attempt(a,h,o);return h;function h(A){return b(A)?u(A):o(A)}function o(A){if(A===null){n.consume(A);return}return n.enter("data"),n.consume(A),g}function g(A){return b(A)?(n.exit("data"),u(A)):(n.consume(A),g)}function b(A){if(A===null)return!0;const D=a[A];let z=-1;if(D)for(;++z<D.length;){const F=D[z];if(!F.previous||F.previous.call(r,r.previous))return!0}return!1}}}function Pz(e){return t;function t(n,r){let a=-1,u;for(;++a<=n.length;)u===void 0?n[a]&&n[a][1].type==="data"&&(u=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==u+2&&(n[u][1].end=n[a-1][1].end,n.splice(u+2,a-u-2),a=u+2),u=void 0);return e?e(n,r):n}}function zX(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let u=a.length,h=-1,o=0,g;for(;u--;){const b=a[u];if(typeof b=="string"){for(h=b.length;b.charCodeAt(h-1)===32;)o++,h--;if(h)break;h=-1}else if(b===-2)g=!0,o++;else if(b!==-1){u++;break}}if(o){const b={type:n===e.length||g||o<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-o,offset:r.end.offset-o,_index:r.start._index+u,_bufferIndex:u?h:r.start._bufferIndex+h},end:Object.assign({},r.end)};r.end=Object.assign({},b.start),r.start.offset===r.end.offset?Object.assign(r,b):(e.splice(n,0,["enter",b,t],["exit",b,t]),n+=2)}n++}return e}function BX(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},u=[];let h=[],o=[];const g={consume:W,enter:B,exit:O,attempt:P(S),check:P(w),interrupt:P(w,{interrupt:!0})},b={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:F,sliceSerialize:z,now:N,defineSkip:T,write:D};let A=t.tokenize.call(b,g);return t.resolveAll&&u.push(t),b;function D(oe){return h=Ja(h,oe),H(),h[h.length-1]!==null?[]:(Y(t,0),b.events=H0(u,b.events,b),b.events)}function z(oe,fe){return NX(F(oe),fe)}function F(oe){return FX(h,oe)}function N(){return Object.assign({},r)}function T(oe){a[oe.line]=oe.column,ae()}function H(){let oe;for(;r._index<h.length;){const fe=h[r._index];if(typeof fe=="string")for(oe=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===oe&&r._bufferIndex<fe.length;)j(fe.charCodeAt(r._bufferIndex));else j(fe)}}function j(oe){A=A(oe)}function W(oe){Dn(oe)?(r.line++,r.column=1,r.offset+=oe===-3?2:1,ae()):oe!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===h[r._index].length&&(r._bufferIndex=-1,r._index++)),b.previous=oe}function B(oe,fe){const Re=fe||{};return Re.type=oe,Re.start=N(),b.events.push(["enter",Re,b]),o.push(Re),Re}function O(oe){const fe=o.pop();return fe.end=N(),b.events.push(["exit",fe,b]),fe}function S(oe,fe){Y(oe,fe.from)}function w(oe,fe){fe.restore()}function P(oe,fe){return Re;function Re(Be,Oe,Ee){let pt,Ze,ct,nt;return Array.isArray(Be)?be(Be):"tokenize"in Be?be([Be]):xe(Be);function xe(tn){return un;function un(mn){const fn=mn!==null&&tn[mn],An=mn!==null&&tn.null,Le=[...Array.isArray(fn)?fn:fn?[fn]:[],...Array.isArray(An)?An:An?[An]:[]];return be(Le)(mn)}}function be(tn){return pt=tn,Ze=0,tn.length===0?Ee:on(tn[Ze])}function on(tn){return un;function un(mn){return nt=ne(),ct=tn,tn.partial||(b.currentConstruct=tn),tn.name&&b.parser.constructs.disable.null.includes(tn.name)?ln():tn.tokenize.call(fe?Object.assign(Object.create(b),fe):b,g,Ut,ln)(mn)}}function Ut(tn){return oe(ct,nt),Oe}function ln(tn){return nt.restore(),++Ze<pt.length?on(pt[Ze]):Ee}}}function Y(oe,fe){oe.resolveAll&&!u.includes(oe)&&u.push(oe),oe.resolve&&Ra(b.events,fe,b.events.length-fe,oe.resolve(b.events.slice(fe),b)),oe.resolveTo&&(b.events=oe.resolveTo(b.events,b))}function ne(){const oe=N(),fe=b.previous,Re=b.currentConstruct,Be=b.events.length,Oe=Array.from(o);return{restore:Ee,from:Be};function Ee(){r=oe,b.previous=fe,b.currentConstruct=Re,b.events.length=Be,o=Oe,ae()}}function ae(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function FX(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,u=t.end._bufferIndex;let h;return n===a?h=[e[n].slice(r,u)]:(h=e.slice(n,a),r>-1&&(h[0]=h[0].slice(r)),u>0&&h.push(e[a].slice(0,u))),h}function NX(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const u=e[n];let h;if(typeof u=="string")h=u;else switch(u){case-5:{h="\r";break}case-4:{h=`
`;break}case-3:{h=`\r
`;break}case-2:{h=t?" ":"	";break}case-1:{if(!t&&a)continue;h=" ";break}default:h=String.fromCharCode(u)}a=u===-2,r.push(h)}return r.join("")}const UX={[42]:ca,[43]:ca,[45]:ca,[48]:ca,[49]:ca,[50]:ca,[51]:ca,[52]:ca,[53]:ca,[54]:ca,[55]:ca,[56]:ca,[57]:ca,[62]:Ez},jX={[91]:HZ},$X={[-2]:nE,[-1]:nE,[32]:nE},VX={[35]:KZ,[42]:nx,[45]:[lD,nx],[60]:eX,[61]:lD,[95]:nx,[96]:aD,[126]:aD},HX={[38]:Sz,[92]:Cz},WX={[-5]:rE,[-4]:rE,[-3]:rE,[33]:gX,[38]:Sz,[42]:KC,[60]:[wZ,oX],[91]:yX,[92]:[ZZ,Cz],[93]:Yk,[95]:KC,[96]:LZ},GX={null:[KC,RX]},qX={null:[42,95]},ZX={null:[]};var XX=Object.freeze(Object.defineProperty({__proto__:null,document:UX,contentInitial:jX,flowInitial:$X,flow:VX,string:HX,text:WX,insideSpan:GX,attentionMarkers:qX,disable:ZX},Symbol.toStringTag,{value:"Module"}));function KX(e={}){const t=wz([XX].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(mZ),document:r(vZ),flow:r(PX),string:r(LX),text:r(OX)};return n;function r(a){return u;function u(h){return BX(n,a,h)}}}const cD=/[\0\t\n\r]/g;function YX(){let e=1,t="",n=!0,r;return a;function a(u,h,o){const g=[];let b,A,D,z,F;for(u=t+u.toString(h),D=0,t="",n&&(u.charCodeAt(0)===65279&&D++,n=void 0);D<u.length;){if(cD.lastIndex=D,b=cD.exec(u),z=b&&b.index!==void 0?b.index:u.length,F=u.charCodeAt(z),!b){t=u.slice(D);break}if(F===10&&D===z&&r)g.push(-3),r=void 0;else switch(r&&(g.push(-5),r=void 0),D<z&&(g.push(u.slice(D,z)),e+=z-D),F){case 0:{g.push(65533),e++;break}case 9:{for(A=Math.ceil(e/4)*4,g.push(-2);e++<A;)g.push(-1);break}case 10:{g.push(-4),e=1;break}default:r=!0,e=1}D=z+1}return o&&(r&&g.push(-5),t&&g.push(t),g.push(null)),g}}function JX(e){for(;!kz(e););return e}function Dz(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCharCode(n)}const QX=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Rz(e){return e.replace(QX,eK)}function eK(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),u=a===120||a===88;return Dz(n.slice(u?2:1),u?16:10)}return Kk(n)||e}const YC={}.hasOwnProperty,tK=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),nK(n)(JX(KX(n).document().write(YX()(e,t,!0))))};function nK(e={}){const t=Lz({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:g(In),autolinkProtocol:fe,autolinkEmail:fe,atxHeading:g(Pt),blockQuote:g(Xe),characterEscape:fe,characterReference:fe,codeFenced:g(ft),codeFencedFenceInfo:b,codeFencedFenceMeta:b,codeIndented:g(ft,b),codeText:g(wt,b),codeTextData:fe,data:fe,codeFlowValue:fe,definition:g(_t),definitionDestinationString:b,definitionLabelString:b,definitionTitleString:b,emphasis:g(dt),hardBreakEscape:g(yn),hardBreakTrailing:g(yn),htmlFlow:g(On,b),htmlFlowData:fe,htmlText:g(On,b),htmlTextData:fe,image:g(Ln),label:b,link:g(In),listItem:g(Ie),listItemValue:T,listOrdered:g(Xn,N),listUnordered:g(Xn),paragraph:g(Je),reference:tn,referenceString:b,resourceDestinationString:b,resourceTitleString:b,setextHeading:g(Pt),strong:g(re),thematicBreak:g(Pe)},exit:{atxHeading:D(),atxHeadingSequence:Y,autolink:D(),autolinkEmail:Le,autolinkProtocol:An,blockQuote:D(),characterEscapeValue:Re,characterReferenceMarkerHexadecimal:mn,characterReferenceMarkerNumeric:mn,characterReferenceValue:fn,codeFenced:D(B),codeFencedFence:W,codeFencedFenceInfo:H,codeFencedFenceMeta:j,codeFlowValue:Re,codeIndented:D(O),codeText:D(Ze),codeTextData:Re,data:Re,definition:D(),definitionDestinationString:P,definitionLabelString:S,definitionTitleString:w,emphasis:D(),hardBreakEscape:D(Oe),hardBreakTrailing:D(Oe),htmlFlow:D(Ee),htmlFlowData:Re,htmlText:D(pt),htmlTextData:Re,image:D(nt),label:be,labelText:xe,lineEnding:Be,link:D(ct),listItem:D(),listOrdered:D(),listUnordered:D(),paragraph:D(),referenceString:un,resourceDestinationString:on,resourceTitleString:Ut,resource:ln,setextHeading:D(oe),setextHeadingLineSequence:ae,setextHeadingText:ne,strong:D(),thematicBreak:D()}},e.mdastExtensions||[]),n={};return r;function r(ve){let Se={type:"root",children:[]};const yt=[Se],Nt=[],Kt=[],Bn={stack:yt,tokenStack:Nt,config:t,enter:A,exit:z,buffer:b,resume:F,setData:u,getData:h};let Tn=-1;for(;++Tn<ve.length;)if(ve[Tn][1].type==="listOrdered"||ve[Tn][1].type==="listUnordered")if(ve[Tn][0]==="enter")Kt.push(Tn);else{const Vt=Kt.pop();Tn=a(ve,Vt,Tn)}for(Tn=-1;++Tn<ve.length;){const Vt=t[ve[Tn][0]];YC.call(Vt,ve[Tn][1].type)&&Vt[ve[Tn][1].type].call(Object.assign({sliceSerialize:ve[Tn][2].sliceSerialize},Bn),ve[Tn][1])}if(Nt.length>0){const Vt=Nt[Nt.length-1];(Vt[1]||uD).call(Bn,void 0,Vt[0])}for(Se.position={start:o(ve.length>0?ve[0][1].start:{line:1,column:1,offset:0}),end:o(ve.length>0?ve[ve.length-2][1].end:{line:1,column:1,offset:0})},Tn=-1;++Tn<t.transforms.length;)Se=t.transforms[Tn](Se)||Se;return Se}function a(ve,Se,yt){let Nt=Se-1,Kt=-1,Bn=!1,Tn,Vt,Rn,ur;for(;++Nt<=yt;){const Fn=ve[Nt];if(Fn[1].type==="listUnordered"||Fn[1].type==="listOrdered"||Fn[1].type==="blockQuote"?(Fn[0]==="enter"?Kt++:Kt--,ur=void 0):Fn[1].type==="lineEndingBlank"?Fn[0]==="enter"&&(Tn&&!ur&&!Kt&&!Rn&&(Rn=Nt),ur=void 0):Fn[1].type==="linePrefix"||Fn[1].type==="listItemValue"||Fn[1].type==="listItemMarker"||Fn[1].type==="listItemPrefix"||Fn[1].type==="listItemPrefixWhitespace"||(ur=void 0),!Kt&&Fn[0]==="enter"&&Fn[1].type==="listItemPrefix"||Kt===-1&&Fn[0]==="exit"&&(Fn[1].type==="listUnordered"||Fn[1].type==="listOrdered")){if(Tn){let Sr=Nt;for(Vt=void 0;Sr--;){const dr=ve[Sr];if(dr[1].type==="lineEnding"||dr[1].type==="lineEndingBlank"){if(dr[0]==="exit")continue;Vt&&(ve[Vt][1].type="lineEndingBlank",Bn=!0),dr[1].type="lineEnding",Vt=Sr}else if(!(dr[1].type==="linePrefix"||dr[1].type==="blockQuotePrefix"||dr[1].type==="blockQuotePrefixWhitespace"||dr[1].type==="blockQuoteMarker"||dr[1].type==="listItemIndent"))break}Rn&&(!Vt||Rn<Vt)&&(Tn._spread=!0),Tn.end=Object.assign({},Vt?ve[Vt][1].start:Fn[1].end),ve.splice(Vt||Nt,0,["exit",Tn,Fn[2]]),Nt++,yt++}Fn[1].type==="listItemPrefix"&&(Tn={type:"listItem",_spread:!1,start:Object.assign({},Fn[1].start)},ve.splice(Nt,0,["enter",Tn,Fn[2]]),Nt++,yt++,Rn=void 0,ur=!0)}}return ve[Se][1]._spread=Bn,yt}function u(ve,Se){n[ve]=Se}function h(ve){return n[ve]}function o(ve){return{line:ve.line,column:ve.column,offset:ve.offset}}function g(ve,Se){return yt;function yt(Nt){A.call(this,ve(Nt),Nt),Se&&Se.call(this,Nt)}}function b(){this.stack.push({type:"fragment",children:[]})}function A(ve,Se,yt){return this.stack[this.stack.length-1].children.push(ve),this.stack.push(ve),this.tokenStack.push([Se,yt]),ve.position={start:o(Se.start)},ve}function D(ve){return Se;function Se(yt){ve&&ve.call(this,yt),z.call(this,yt)}}function z(ve,Se){const yt=this.stack.pop(),Nt=this.tokenStack.pop();if(Nt)Nt[0].type!==ve.type&&(Se?Se.call(this,ve,Nt[0]):(Nt[1]||uD).call(this,ve,Nt[0]));else throw new Error("Cannot close `"+ve.type+"` ("+yg({start:ve.start,end:ve.end})+"): it\u2019s not open");return yt.position.end=o(ve.end),yt}function F(){return cZ(this.stack.pop())}function N(){u("expectingFirstListItemValue",!0)}function T(ve){if(h("expectingFirstListItemValue")){const Se=this.stack[this.stack.length-2];Se.start=Number.parseInt(this.sliceSerialize(ve),10),u("expectingFirstListItemValue")}}function H(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.lang=ve}function j(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.meta=ve}function W(){h("flowCodeInside")||(this.buffer(),u("flowCodeInside",!0))}function B(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u("flowCodeInside")}function O(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve.replace(/(\r?\n|\r)$/g,"")}function S(ve){const Se=this.resume(),yt=this.stack[this.stack.length-1];yt.label=Se,yt.identifier=Ls(this.sliceSerialize(ve)).toLowerCase()}function w(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ve}function P(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ve}function Y(ve){const Se=this.stack[this.stack.length-1];if(!Se.depth){const yt=this.sliceSerialize(ve).length;Se.depth=yt}}function ne(){u("setextHeadingSlurpLineEnding",!0)}function ae(ve){const Se=this.stack[this.stack.length-1];Se.depth=this.sliceSerialize(ve).charCodeAt(0)===61?1:2}function oe(){u("setextHeadingSlurpLineEnding")}function fe(ve){const Se=this.stack[this.stack.length-1];let yt=Se.children[Se.children.length-1];(!yt||yt.type!=="text")&&(yt=ce(),yt.position={start:o(ve.start)},Se.children.push(yt)),this.stack.push(yt)}function Re(ve){const Se=this.stack.pop();Se.value+=this.sliceSerialize(ve),Se.position.end=o(ve.end)}function Be(ve){const Se=this.stack[this.stack.length-1];if(h("atHardBreak")){const yt=Se.children[Se.children.length-1];yt.position.end=o(ve.end),u("atHardBreak");return}!h("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Se.type)&&(fe.call(this,ve),Re.call(this,ve))}function Oe(){u("atHardBreak",!0)}function Ee(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function pt(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function Ze(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ve}function ct(){const ve=this.stack[this.stack.length-1];h("inReference")?(ve.type+="Reference",ve.referenceType=h("referenceType")||"shortcut",delete ve.url,delete ve.title):(delete ve.identifier,delete ve.label),u("referenceType")}function nt(){const ve=this.stack[this.stack.length-1];h("inReference")?(ve.type+="Reference",ve.referenceType=h("referenceType")||"shortcut",delete ve.url,delete ve.title):(delete ve.identifier,delete ve.label),u("referenceType")}function xe(ve){const Se=this.stack[this.stack.length-2],yt=this.sliceSerialize(ve);Se.label=Rz(yt),Se.identifier=Ls(yt).toLowerCase()}function be(){const ve=this.stack[this.stack.length-1],Se=this.resume(),yt=this.stack[this.stack.length-1];u("inReference",!0),yt.type==="link"?yt.children=ve.children:yt.alt=Se}function on(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ve}function Ut(){const ve=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ve}function ln(){u("inReference")}function tn(){u("referenceType","collapsed")}function un(ve){const Se=this.resume(),yt=this.stack[this.stack.length-1];yt.label=Se,yt.identifier=Ls(this.sliceSerialize(ve)).toLowerCase(),u("referenceType","full")}function mn(ve){u("characterReferenceType",ve.type)}function fn(ve){const Se=this.sliceSerialize(ve),yt=h("characterReferenceType");let Nt;yt?(Nt=Dz(Se,yt==="characterReferenceMarkerNumeric"?10:16),u("characterReferenceType")):Nt=Kk(Se);const Kt=this.stack.pop();Kt.value+=Nt,Kt.position.end=o(ve.end)}function An(ve){Re.call(this,ve);const Se=this.stack[this.stack.length-1];Se.url=this.sliceSerialize(ve)}function Le(ve){Re.call(this,ve);const Se=this.stack[this.stack.length-1];Se.url="mailto:"+this.sliceSerialize(ve)}function Xe(){return{type:"blockquote",children:[]}}function ft(){return{type:"code",lang:null,meta:null,value:""}}function wt(){return{type:"inlineCode",value:""}}function _t(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function dt(){return{type:"emphasis",children:[]}}function Pt(){return{type:"heading",depth:void 0,children:[]}}function yn(){return{type:"break"}}function On(){return{type:"html",value:""}}function Ln(){return{type:"image",title:null,url:"",alt:null}}function In(){return{type:"link",title:null,url:"",children:[]}}function Xn(ve){return{type:"list",ordered:ve.type==="listOrdered",start:null,spread:ve._spread,children:[]}}function Ie(ve){return{type:"listItem",spread:ve._spread,checked:null,children:[]}}function Je(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function ce(){return{type:"text",value:""}}function Pe(){return{type:"thematicBreak"}}}function Lz(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Lz(e,r):rK(e,r)}return e}function rK(e,t){let n;for(n in t)if(YC.call(t,n)){const r=n==="canContainEols"||n==="transforms",u=(YC.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),h=t[n];h&&(r?e[n]=[...u,...h]:Object.assign(u,h))}}function uD(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+yg({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+yg({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+yg({start:t.start,end:t.end})+") is still open")}function iK(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return tK(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var ro=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const rx={}.hasOwnProperty;function oK(e,t){const n=t.data||{};return"value"in t&&!(rx.call(n,"hName")||rx.call(n,"hProperties")||rx.call(n,"hChildren"))?e.augment(t,ro("text",t.value)):e(t,"div",Wo(e,t))}function Oz(e,t,n){const r=t&&t.type;let a;if(!r)throw new Error("Expected node, got `"+t+"`");return rx.call(e.handlers,r)?a=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?a=aK:a=e.unknownHandler,(typeof a=="function"?a:oK)(e,t,n)}function aK(e,t){return"children"in t?{...t,children:Wo(e,t)}:t}function Wo(e,t){const n=[];if("children"in t){const r=t.children;let a=-1;for(;++a<r.length;){const u=Oz(e,r[a],t);if(u){if(a&&r[a-1].type==="break"&&(!Array.isArray(u)&&u.type==="text"&&(u.value=u.value.replace(/^\s+/,"")),!Array.isArray(u)&&u.type==="element")){const h=u.children[0];h&&h.type==="text"&&(h.value=h.value.replace(/^\s+/,""))}Array.isArray(u)?n.push(...u):n.push(u)}}}return n}const Jk=function(e){if(e==null)return uK;if(typeof e=="string")return cK(e);if(typeof e=="object")return Array.isArray(e)?sK(e):lK(e);if(typeof e=="function")return W0(e);throw new Error("Expected function, string, or object as test")};function sK(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Jk(e[n]);return W0(r);function r(...a){let u=-1;for(;++u<t.length;)if(t[u].call(this,...a))return!0;return!1}}function lK(e){return W0(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function cK(e){return W0(t);function t(n){return n&&n.type===e}}function W0(e){return t;function t(...n){return Boolean(e.call(this,...n))}}function uK(){return!0}const dK=!0,hK="skip",dD=!1,zz=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const a=Jk(t),u=r?-1:1;h(e,null,[])();function h(o,g,b){const A=typeof o=="object"&&o!==null?o:{};let D;return typeof A.type=="string"&&(D=typeof A.tagName=="string"?A.tagName:typeof A.name=="string"?A.name:void 0,Object.defineProperty(z,"name",{value:"node ("+(A.type+(D?"<"+D+">":""))+")"})),z;function z(){let F=[],N,T,H;if((!t||a(o,g,b[b.length-1]||null))&&(F=pK(n(o,b)),F[0]===dD))return F;if(o.children&&F[0]!==hK)for(T=(r?o.children.length:-1)+u,H=b.concat(o);T>-1&&T<o.children.length;){if(N=h(o.children[T],T,H)(),N[0]===dD)return N;T=typeof N[1]=="number"?N[1]:T+u}return F}}};function pK(e){return Array.isArray(e)?e:typeof e=="number"?[dK,e]:[e]}const Qk=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),zz(e,t,a,r);function a(u,h){const o=h[h.length-1];return n(u,o?o.children.indexOf(u):null,o)}},Bz=Nz("start"),Fz=Nz("end");function Nz(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function fK(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const hD={}.hasOwnProperty;function mK(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return Qk(e,"definition",r=>{const a=pD(r.identifier);a&&!hD.call(t,a)&&(t[a]=r)}),n;function n(r){const a=pD(r);return a&&hD.call(t,a)?t[a]:null}}function pD(e){return String(e||"").toUpperCase()}const gK={'"':"quot","&":"amp","<":"lt",">":"gt"};function vK(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+gK[n]+";"}}function Uz(e,t){const n=vK(yK(e||""));if(!t)return n;const r=n.indexOf(":"),a=n.indexOf("?"),u=n.indexOf("#"),h=n.indexOf("/");return r<0||h>-1&&r>h||a>-1&&r>a||u>-1&&r>u||t.test(n.slice(0,r))?n:""}function yK(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const u=e.charCodeAt(n);let h="";if(u===37&&Yo(e.charCodeAt(n+1))&&Yo(e.charCodeAt(n+2)))a=2;else if(u<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(u))||(h=String.fromCharCode(u));else if(u>55295&&u<57344){const o=e.charCodeAt(n+1);u<56320&&o>56319&&o<57344?(h=String.fromCharCode(u,o),a=1):h="\uFFFD"}else h=String.fromCharCode(u);h&&(t.push(e.slice(r,n),encodeURIComponent(h)),r=n+a+1,h=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Ul(e,t){const n=[];let r=-1;for(t&&n.push(ro("text",`
`));++r<e.length;)r&&n.push(ro("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(ro("text",`
`)),n}function _K(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const a=Wo(e,r),u=String(r.identifier),h=Uz(u.toLowerCase());let o=0;const g=[];for(;++o<=e.footnoteCounts[u];){const D={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+h+(o>1?"-"+o:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"\u21A9"}]};o>1&&D.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(o)}]}),g.length>0&&g.push({type:"text",value:" "}),g.push(D)}const b=a[a.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const D=b.children[b.children.length-1];D&&D.type==="text"?D.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...g)}else a.push(...g);const A={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+h},children:Ul(a,!0)};r.position&&(A.position=r.position),n.push(A)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[ro("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:Ul(n,!0)},{type:"text",value:`
`}]}}function xK(e,t){return e(t,"blockquote",Ul(Wo(e,t),!0))}function bK(e,t){return[e(t,"br"),ro("text",`
`)]}function wK(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),a={};r&&(a.className=["language-"+r]);const u=e(t,"code",a,[ro("text",n)]);return t.meta&&(u.data={meta:t.meta}),e(t.position,"pre",[u])}function EK(e,t){return e(t,"del",Wo(e,t))}function CK(e,t){return e(t,"em",Wo(e,t))}function jz(e,t){const n=String(t.identifier),r=Uz(n.toLowerCase()),a=e.footnoteOrder.indexOf(n);let u;a===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,u=e.footnoteOrder.length):(e.footnoteCounts[n]++,u=a+1);const h=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[ro("text",String(u))])])}function SK(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const a=String(r);return n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},jz(e,{type:"footnoteReference",identifier:a,position:t.position})}function kK(e,t){return e(t,"h"+t.depth,Wo(e,t))}function TK(e,t){return e.dangerous?e.augment(t,ro("raw",t.value)):null}var fD={};function AK(e){var t,n,r=fD[e];if(r)return r;for(r=fD[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}function G0(e,t,n){var r,a,u,h,o,g="";for(typeof t!="string"&&(n=t,t=G0.defaultChars),typeof n=="undefined"&&(n=!0),o=AK(t),r=0,a=e.length;r<a;r++){if(u=e.charCodeAt(r),n&&u===37&&r+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){g+=e.slice(r,r+3),r+=2;continue}if(u<128){g+=o[u];continue}if(u>=55296&&u<=57343){if(u>=55296&&u<=56319&&r+1<a&&(h=e.charCodeAt(r+1),h>=56320&&h<=57343)){g+=encodeURIComponent(e[r]+e[r+1]),r++;continue}g+="%EF%BF%BD";continue}g+=encodeURIComponent(e[r])}return g}G0.defaultChars=";/?:@&=+$,-_.!~*'()#";G0.componentChars="-_.!~*'()";var q0=G0;function $z(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return ro("text","!["+t.alt+r);const a=Wo(e,t),u=a[0];u&&u.type==="text"?u.value="["+u.value:a.unshift(ro("text","["));const h=a[a.length-1];return h&&h.type==="text"?h.value+=r:a.push(ro("text",r)),a}function MK(e,t){const n=e.definition(t.identifier);if(!n)return $z(e,t);const r={src:q0(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function IK(e,t){const n={src:q0(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function PK(e,t){return e(t,"code",[ro("text",t.value.replace(/\r?\n|\r/g," "))])}function DK(e,t){const n=e.definition(t.identifier);if(!n)return $z(e,t);const r={href:q0(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,Wo(e,t))}function RK(e,t){const n={href:q0(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,Wo(e,t))}function LK(e,t,n){const r=Wo(e,t),a=n?OK(n):Vz(t),u={},h=[];if(typeof t.checked=="boolean"){let b;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?b=r[0]:(b=e(null,"p",[]),r.unshift(b)),b.children.length>0&&b.children.unshift(ro("text"," ")),b.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),u.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const b=r[o];(a||o!==0||b.type!=="element"||b.tagName!=="p")&&h.push(ro("text",`
`)),b.type==="element"&&b.tagName==="p"&&!a?h.push(...b.children):h.push(b)}const g=r[r.length-1];return g&&(a||!("tagName"in g)||g.tagName!=="p")&&h.push(ro("text",`
`)),e(t,"li",u,h)}function OK(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Vz(n[r]);return Boolean(t)}function Vz(e){const t=e.spread;return t==null?e.children.length>1:t}function zK(e,t){const n={},r=t.ordered?"ol":"ul",a=Wo(e,t);let u=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++u<a.length;){const h=a[u];if(h.type==="element"&&h.tagName==="li"&&h.properties&&Array.isArray(h.properties.className)&&h.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,Ul(a,!0))}function BK(e,t){return e(t,"p",Wo(e,t))}function FK(e,t){return e.augment(t,ro("root",Ul(Wo(e,t))))}function NK(e,t){return e(t,"strong",Wo(e,t))}function UK(e,t){const n=t.children;let r=-1;const a=t.align||[],u=[];for(;++r<n.length;){const h=n[r].children,o=r===0?"th":"td",g=[];let b=-1;const A=t.align?a.length:h.length;for(;++b<A;){const D=h[b];g.push(e(D,o,{align:a[b]},D?Wo(e,D):[]))}u[r]=e(n[r],"tr",Ul(g,!0))}return e(t,"table",Ul([e(u[0].position,"thead",Ul([u[0]],!0))].concat(u[1]?e({start:Bz(u[1]),end:Fz(u[u.length-1])},"tbody",Ul(u.slice(1),!0)):[]),!0))}const mD=9,gD=32;function jK(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const u=[];for(;r;)u.push(vD(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return u.push(vD(t.slice(a),a>0,!1)),u.join("")}function vD(e,t,n){let r=0,a=e.length;if(t){let u=e.codePointAt(r);for(;u===mD||u===gD;)r++,u=e.codePointAt(r)}if(n){let u=e.codePointAt(a-1);for(;u===mD||u===gD;)a--,u=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function $K(e,t){return e.augment(t,ro("text",jK(String(t.value))))}function VK(e,t){return e(t,"hr")}const HK={blockquote:xK,break:bK,code:wK,delete:EK,emphasis:CK,footnoteReference:jz,footnote:SK,heading:kK,html:TK,imageReference:MK,image:IK,inlineCode:PK,linkReference:DK,link:RK,listItem:LK,list:zK,paragraph:BK,root:FK,strong:NK,table:UK,text:$K,thematicBreak:VK,toml:M_,yaml:M_,definition:M_,footnoteDefinition:M_};function M_(){return null}const WK={}.hasOwnProperty;function GK(e,t){const n=t||{},r=n.allowDangerousHtml||!1,a={};return h.dangerous=r,h.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,h.footnoteLabel=n.footnoteLabel||"Footnotes",h.footnoteLabelTagName=n.footnoteLabelTagName||"h2",h.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},h.footnoteBackLabel=n.footnoteBackLabel||"Back to content",h.definition=mK(e),h.footnoteById=a,h.footnoteOrder=[],h.footnoteCounts={},h.augment=u,h.handlers={...HK,...n.handlers},h.unknownHandler=n.unknownHandler,h.passThrough=n.passThrough,Qk(e,"footnoteDefinition",o=>{const g=String(o.identifier).toUpperCase();WK.call(a,g)||(a[g]=o)}),h;function u(o,g){if(o&&"data"in o&&o.data){const b=o.data;b.hName&&(g.type!=="element"&&(g={type:"element",tagName:"",properties:{},children:[]}),g.tagName=b.hName),g.type==="element"&&b.hProperties&&(g.properties={...g.properties,...b.hProperties}),"children"in g&&g.children&&b.hChildren&&(g.children=b.hChildren)}if(o){const b="type"in o?o:{position:o};fK(b)||(g.position={start:Bz(b),end:Fz(b)})}return g}function h(o,g,b,A){return Array.isArray(b)&&(A=b,b={}),u(o,{type:"element",tagName:g,properties:b||{},children:A||[]})}}function Hz(e,t){const n=GK(e,t),r=Oz(n,e,null),a=_K(n);return a&&r.children.push(ro("text",`
`),a),Array.isArray(r)?{type:"root",children:r}:r}const qK=function(e,t){return e&&"run"in e?XK(e,t):KK(e||t)};var ZK=qK;function XK(e,t){return(n,r,a)=>{e.run(Hz(n,t),r,u=>{a(u)})}}function KK(e){return t=>Hz(t,e)}class _v{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}_v.prototype.property={};_v.prototype.normal={};_v.prototype.space=null;function Wz(e,t){const n={},r={};let a=-1;for(;++a<e.length;)Object.assign(n,e[a].property),Object.assign(r,e[a].normal);return new _v(n,r,t)}function JC(e){return e.toLowerCase()}class us{constructor(t,n){this.property=t,this.attribute=n}}us.prototype.space=null;us.prototype.boolean=!1;us.prototype.booleanish=!1;us.prototype.overloadedBoolean=!1;us.prototype.number=!1;us.prototype.commaSeparated=!1;us.prototype.spaceSeparated=!1;us.prototype.commaOrSpaceSeparated=!1;us.prototype.mustUseProperty=!1;us.prototype.defined=!1;let YK=0;const tr=Wd(),Wi=Wd(),Gz=Wd(),Xt=Wd(),di=Wd(),Mp=Wd(),Sa=Wd();function Wd(){return 2**++YK}var QC=Object.freeze(Object.defineProperty({__proto__:null,boolean:tr,booleanish:Wi,overloadedBoolean:Gz,number:Xt,spaceSeparated:di,commaSeparated:Mp,commaOrSpaceSeparated:Sa},Symbol.toStringTag,{value:"Module"}));const iE=Object.keys(QC);class eT extends us{constructor(t,n,r,a){let u=-1;if(super(t,n),yD(this,"space",a),typeof r=="number")for(;++u<iE.length;){const h=iE[u];yD(this,iE[u],(r&QC[h])===QC[h])}}}eT.prototype.defined=!0;function yD(e,t,n){n&&(e[t]=n)}const JK={}.hasOwnProperty;function lf(e){const t={},n={};let r;for(r in e.properties)if(JK.call(e.properties,r)){const a=e.properties[r],u=new eT(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(u.mustUseProperty=!0),t[r]=u,n[JC(r)]=r,n[JC(u.attribute)]=r}return new _v(t,n,e.space)}const qz=lf({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Zz=lf({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Xz(e,t){return t in e?e[t]:t}function Kz(e,t){return Xz(e,t.toLowerCase())}const Yz=lf({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Kz,properties:{xmlns:null,xmlnsXLink:null}}),Jz=lf({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Wi,ariaAutoComplete:null,ariaBusy:Wi,ariaChecked:Wi,ariaColCount:Xt,ariaColIndex:Xt,ariaColSpan:Xt,ariaControls:di,ariaCurrent:null,ariaDescribedBy:di,ariaDetails:null,ariaDisabled:Wi,ariaDropEffect:di,ariaErrorMessage:null,ariaExpanded:Wi,ariaFlowTo:di,ariaGrabbed:Wi,ariaHasPopup:null,ariaHidden:Wi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:di,ariaLevel:Xt,ariaLive:null,ariaModal:Wi,ariaMultiLine:Wi,ariaMultiSelectable:Wi,ariaOrientation:null,ariaOwns:di,ariaPlaceholder:null,ariaPosInSet:Xt,ariaPressed:Wi,ariaReadOnly:Wi,ariaRelevant:null,ariaRequired:Wi,ariaRoleDescription:di,ariaRowCount:Xt,ariaRowIndex:Xt,ariaRowSpan:Xt,ariaSelected:Wi,ariaSetSize:Xt,ariaSort:null,ariaValueMax:Xt,ariaValueMin:Xt,ariaValueNow:Xt,ariaValueText:null,role:null}}),QK=lf({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Kz,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mp,acceptCharset:di,accessKey:di,action:null,allow:null,allowFullScreen:tr,allowPaymentRequest:tr,allowUserMedia:tr,alt:null,as:null,async:tr,autoCapitalize:null,autoComplete:di,autoFocus:tr,autoPlay:tr,capture:tr,charSet:null,checked:tr,cite:null,className:di,cols:Xt,colSpan:null,content:null,contentEditable:Wi,controls:tr,controlsList:di,coords:Xt|Mp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:tr,defer:tr,dir:null,dirName:null,disabled:tr,download:Gz,draggable:Wi,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:tr,formTarget:null,headers:di,height:Xt,hidden:tr,high:Xt,href:null,hrefLang:null,htmlFor:di,httpEquiv:di,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:tr,itemId:null,itemProp:di,itemRef:di,itemScope:tr,itemType:di,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:tr,low:Xt,manifest:null,max:null,maxLength:Xt,media:null,method:null,min:null,minLength:Xt,multiple:tr,muted:tr,name:null,nonce:null,noModule:tr,noValidate:tr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:tr,optimum:Xt,pattern:null,ping:di,placeholder:null,playsInline:tr,poster:null,preload:null,readOnly:tr,referrerPolicy:null,rel:di,required:tr,reversed:tr,rows:Xt,rowSpan:Xt,sandbox:di,scope:null,scoped:tr,seamless:tr,selected:tr,shape:null,size:Xt,sizes:null,slot:null,span:Xt,spellCheck:Wi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Xt,step:null,style:null,tabIndex:Xt,target:null,title:null,translate:null,type:null,typeMustMatch:tr,useMap:null,value:Wi,width:Xt,wrap:null,align:null,aLink:null,archive:di,axis:null,background:null,bgColor:null,border:Xt,borderColor:null,bottomMargin:Xt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:tr,declare:tr,event:null,face:null,frame:null,frameBorder:null,hSpace:Xt,leftMargin:Xt,link:null,longDesc:null,lowSrc:null,marginHeight:Xt,marginWidth:Xt,noResize:tr,noHref:tr,noShade:tr,noWrap:tr,object:null,profile:null,prompt:null,rev:null,rightMargin:Xt,rules:null,scheme:null,scrolling:Wi,standby:null,summary:null,text:null,topMargin:Xt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Xt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:tr,disableRemotePlayback:tr,prefix:null,property:null,results:Xt,security:null,unselectable:null}}),eY=lf({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Xz,properties:{about:Sa,accentHeight:Xt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Xt,amplitude:Xt,arabicForm:null,ascent:Xt,attributeName:null,attributeType:null,azimuth:Xt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Xt,by:null,calcMode:null,capHeight:Xt,className:di,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Xt,diffuseConstant:Xt,direction:null,display:null,dur:null,divisor:Xt,dominantBaseline:null,download:tr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Xt,enableBackground:null,end:null,event:null,exponent:Xt,externalResourcesRequired:null,fill:null,fillOpacity:Xt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mp,g2:Mp,glyphName:Mp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Xt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Xt,horizOriginX:Xt,horizOriginY:Xt,id:null,ideographic:Xt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Xt,k:Xt,k1:Xt,k2:Xt,k3:Xt,k4:Xt,kernelMatrix:Sa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Xt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Xt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Xt,overlineThickness:Xt,paintOrder:null,panose1:null,path:null,pathLength:Xt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:di,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Xt,pointsAtY:Xt,pointsAtZ:Xt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Sa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Sa,rev:Sa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Sa,requiredFeatures:Sa,requiredFonts:Sa,requiredFormats:Sa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Xt,specularExponent:Xt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Xt,strikethroughThickness:Xt,string:null,stroke:null,strokeDashArray:Sa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Xt,strokeOpacity:Xt,strokeWidth:null,style:null,surfaceScale:Xt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Sa,tabIndex:Xt,tableValues:null,target:null,targetX:Xt,targetY:Xt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Sa,to:null,transform:null,u1:null,u2:null,underlinePosition:Xt,underlineThickness:Xt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Xt,values:null,vAlphabetic:Xt,vMathematical:Xt,vectorEffect:null,vHanging:Xt,vIdeographic:Xt,version:null,vertAdvY:Xt,vertOriginX:Xt,vertOriginY:Xt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Xt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),tY=/^data[-\w.:]+$/i,_D=/-[a-z]/g,nY=/[A-Z]/g;function rY(e,t){const n=JC(t);let r=t,a=us;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&tY.test(t)){if(t.charAt(4)==="-"){const u=t.slice(5).replace(_D,oY);r="data"+u.charAt(0).toUpperCase()+u.slice(1)}else{const u=t.slice(4);if(!_D.test(u)){let h=u.replace(nY,iY);h.charAt(0)!=="-"&&(h="-"+h),t="data"+h}}a=eT}return new a(r,t)}function iY(e){return"-"+e.toLowerCase()}function oY(e){return e.charAt(1).toUpperCase()}const xD={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},aY=Wz([Zz,qz,Yz,Jz,QK],"html"),sY=Wz([Zz,qz,Yz,Jz,eY],"svg");function lY(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{Qk(t,"element",(n,r,a)=>{const u=a;let h;if(e.allowedElements?h=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(h=e.disallowedElements.includes(n.tagName)),!h&&e.allowElement&&typeof r=="number"&&(h=!e.allowElement(n,r,u)),h&&typeof r=="number")return e.unwrapDisallowed&&n.children?u.children.splice(r,1,...n.children):u.children.splice(r,1),r})}}var Qz={exports:{}},Kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT=Symbol.for("react.element"),nT=Symbol.for("react.portal"),Z0=Symbol.for("react.fragment"),X0=Symbol.for("react.strict_mode"),K0=Symbol.for("react.profiler"),Y0=Symbol.for("react.provider"),J0=Symbol.for("react.context"),cY=Symbol.for("react.server_context"),Q0=Symbol.for("react.forward_ref"),eb=Symbol.for("react.suspense"),tb=Symbol.for("react.suspense_list"),nb=Symbol.for("react.memo"),rb=Symbol.for("react.lazy"),uY=Symbol.for("react.offscreen"),e5;e5=Symbol.for("react.module.reference");function ds(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tT:switch(e=e.type,e){case Z0:case K0:case X0:case eb:case tb:return e;default:switch(e=e&&e.$$typeof,e){case cY:case J0:case Q0:case rb:case nb:case Y0:return e;default:return t}}case nT:return t}}}Kr.ContextConsumer=J0;Kr.ContextProvider=Y0;Kr.Element=tT;Kr.ForwardRef=Q0;Kr.Fragment=Z0;Kr.Lazy=rb;Kr.Memo=nb;Kr.Portal=nT;Kr.Profiler=K0;Kr.StrictMode=X0;Kr.Suspense=eb;Kr.SuspenseList=tb;Kr.isAsyncMode=function(){return!1};Kr.isConcurrentMode=function(){return!1};Kr.isContextConsumer=function(e){return ds(e)===J0};Kr.isContextProvider=function(e){return ds(e)===Y0};Kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tT};Kr.isForwardRef=function(e){return ds(e)===Q0};Kr.isFragment=function(e){return ds(e)===Z0};Kr.isLazy=function(e){return ds(e)===rb};Kr.isMemo=function(e){return ds(e)===nb};Kr.isPortal=function(e){return ds(e)===nT};Kr.isProfiler=function(e){return ds(e)===K0};Kr.isStrictMode=function(e){return ds(e)===X0};Kr.isSuspense=function(e){return ds(e)===eb};Kr.isSuspenseList=function(e){return ds(e)===tb};Kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Z0||e===K0||e===X0||e===eb||e===tb||e===uY||typeof e=="object"&&e!==null&&(e.$$typeof===rb||e.$$typeof===nb||e.$$typeof===Y0||e.$$typeof===J0||e.$$typeof===Q0||e.$$typeof===e5||e.getModuleId!==void 0)};Kr.typeOf=ds;Qz.exports=Kr;var dY=Qz.exports;function hY(e){var t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function pY(e){return e.join(" ").trim()}function fY(e,t){var n=t||{};return e[e.length-1]===""&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var bD=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,mY=/\n/g,gY=/^\s*/,vY=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,yY=/^:\s*/,_Y=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,xY=/^[;\s]*/,bY=/^\s+|\s+$/g,wY=`
`,wD="/",ED="*",gd="",EY="comment",CY="declaration",SY=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(N){var T=N.match(mY);T&&(n+=T.length);var H=N.lastIndexOf(wY);r=~H?N.length-H:r+N.length}function u(){var N={line:n,column:r};return function(T){return T.position=new h(N),b(),T}}function h(N){this.start=N,this.end={line:n,column:r},this.source=t.source}h.prototype.content=e;function o(N){var T=new Error(t.source+":"+n+":"+r+": "+N);if(T.reason=N,T.filename=t.source,T.line=n,T.column=r,T.source=e,!t.silent)throw T}function g(N){var T=N.exec(e);if(!!T){var H=T[0];return a(H),e=e.slice(H.length),T}}function b(){g(gY)}function A(N){var T;for(N=N||[];T=D();)T!==!1&&N.push(T);return N}function D(){var N=u();if(!(wD!=e.charAt(0)||ED!=e.charAt(1))){for(var T=2;gd!=e.charAt(T)&&(ED!=e.charAt(T)||wD!=e.charAt(T+1));)++T;if(T+=2,gd===e.charAt(T-1))return o("End of comment missing");var H=e.slice(2,T-2);return r+=2,a(H),e=e.slice(T),r+=2,N({type:EY,comment:H})}}function z(){var N=u(),T=g(vY);if(!!T){if(D(),!g(yY))return o("property missing ':'");var H=g(_Y),j=N({type:CY,property:CD(T[0].replace(bD,gd)),value:H?CD(H[0].replace(bD,gd)):gd});return g(xY),j}}function F(){var N=[];A(N);for(var T;T=z();)T!==!1&&(N.push(T),A(N));return N}return b(),F()};function CD(e){return e?e.replace(bY,gd):gd}var kY=SY;function TY(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,a=kY(e),u=typeof t=="function",h,o,g=0,b=a.length;g<b;g++)r=a[g],h=r.property,o=r.value,u?t(h,o,r):o&&(n||(n={}),n[h]=o);return n}var AY=TY;const eS={}.hasOwnProperty,MY=new Set(["table","thead","tbody","tfoot","tr"]);function t5(e,t){const n=[];let r=-1,a;for(;++r<t.children.length;)a=t.children[r],a.type==="element"?n.push(IY(e,a,r,t)):a.type==="text"?(t.type!=="element"||!MY.has(t.tagName)||!hY(a))&&n.push(a.value):a.type==="raw"&&!e.options.skipHtml&&n.push(a.value);return n}function IY(e,t,n,r){const a=e.options,u=e.schema,h=t.tagName,o={};let g=u,b;if(u.space==="html"&&h==="svg"&&(g=sY,e.schema=g),t.properties)for(b in t.properties)eS.call(t.properties,b)&&DY(o,b,t.properties[b],e);(h==="ol"||h==="ul")&&e.listDepth++;const A=t5(e,t);(h==="ol"||h==="ul")&&e.listDepth--,e.schema=u;const D=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},z=a.components&&eS.call(a.components,h)?a.components[h]:h,F=typeof z=="string"||z===ot.Fragment;if(!dY.isValidElementType(z))throw new TypeError(`Component for name \`${h}\` not defined or is not renderable`);if(o.key=[h,D.start.line,D.start.column,n].join("-"),h==="a"&&a.linkTarget&&(o.target=typeof a.linkTarget=="function"?a.linkTarget(String(o.href||""),t.children,typeof o.title=="string"?o.title:null):a.linkTarget),h==="a"&&a.transformLinkUri&&(o.href=a.transformLinkUri(String(o.href||""),t.children,typeof o.title=="string"?o.title:null)),!F&&h==="code"&&r.type==="element"&&r.tagName!=="pre"&&(o.inline=!0),!F&&(h==="h1"||h==="h2"||h==="h3"||h==="h4"||h==="h5"||h==="h6")&&(o.level=Number.parseInt(h.charAt(1),10)),h==="img"&&a.transformImageUri&&(o.src=a.transformImageUri(String(o.src||""),String(o.alt||""),typeof o.title=="string"?o.title:null)),!F&&h==="li"&&r.type==="element"){const N=PY(t);o.checked=N&&N.properties?Boolean(N.properties.checked):null,o.index=oE(r,t),o.ordered=r.tagName==="ol"}return!F&&(h==="ol"||h==="ul")&&(o.ordered=h==="ol",o.depth=e.listDepth),(h==="td"||h==="th")&&(o.align&&(o.style||(o.style={}),o.style.textAlign=o.align,delete o.align),F||(o.isHeader=h==="th")),!F&&h==="tr"&&r.type==="element"&&(o.isHeader=Boolean(r.tagName==="thead")),a.sourcePos&&(o["data-sourcepos"]=OY(D)),!F&&a.rawSourcePos&&(o.sourcePosition=t.position),!F&&a.includeElementIndex&&(o.index=oE(r,t),o.siblingCount=oE(r)),F||(o.node=t),A.length>0?ot.createElement(z,o,A):ot.createElement(z,o)}function PY(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function oE(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function DY(e,t,n,r){const a=rY(r.schema,t);let u=n;u==null||u!==u||(Array.isArray(u)&&(u=a.commaSeparated?fY(u):pY(u)),a.property==="style"&&typeof u=="string"&&(u=RY(u)),a.space&&a.property?e[eS.call(xD,a.property)?xD[a.property]:a.property]=u:a.attribute&&(e[a.attribute]=u))}function RY(e){const t={};try{AY(e,n)}catch{}return t;function n(r,a){const u=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[u.replace(/-([a-z])/g,LY)]=a}}function LY(e,t){return t.toUpperCase()}function OY(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(t=>String(t)).join("")}const SD={}.hasOwnProperty,zY="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",I_={plugins:{to:"plugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function rT(e){for(const u in I_)if(SD.call(I_,u)&&SD.call(e,u)){const h=I_[u];console.warn(`[react-markdown] Warning: please ${h.to?`use \`${h.to}\` instead of`:"remove"} \`${u}\` (see <${zY}#${h.id}> for more info)`),delete I_[u]}const t=oZ().use(iK).use(e.remarkPlugins||[]).use(ZK,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(lY,e),n=new vz;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let a=ot.createElement(ot.Fragment,{},t5({options:e,schema:aY,listDepth:0},r));return e.className&&(a=ot.createElement("div",{className:e.className},a)),a}rT.defaultProps={transformLinkUri:Gq};rT.propTypes={children:Zn.string,className:Zn.string,allowElement:Zn.func,allowedElements:Zn.arrayOf(Zn.string),disallowedElements:Zn.arrayOf(Zn.string),unwrapDisallowed:Zn.bool,remarkPlugins:Zn.arrayOf(Zn.oneOfType([Zn.object,Zn.func,Zn.arrayOf(Zn.oneOfType([Zn.bool,Zn.string,Zn.object,Zn.func,Zn.arrayOf(Zn.any)]))])),rehypePlugins:Zn.arrayOf(Zn.oneOfType([Zn.object,Zn.func,Zn.arrayOf(Zn.oneOfType([Zn.bool,Zn.string,Zn.object,Zn.func,Zn.arrayOf(Zn.any)]))])),sourcePos:Zn.bool,rawSourcePos:Zn.bool,skipHtml:Zn.bool,includeElementIndex:Zn.bool,transformLinkUri:Zn.oneOfType([Zn.func,Zn.bool]),linkTarget:Zn.oneOfType([Zn.func,Zn.string]),transformImageUri:Zn.func,components:Zn.object};const BY={tokenize:$Y,partial:!0},n5={tokenize:VY,partial:!0},r5={tokenize:HY,partial:!0},Ip={tokenize:GY,partial:!0},i5={tokenize:WY,partial:!0},o5={tokenize:UY,previous:l5},a5={tokenize:jY,previous:oT},tc={tokenize:NY,previous:c5},vl={},FY={text:vl};let sd=48;for(;sd<123;)vl[sd]=tc,sd++,sd===58?sd=65:sd===91&&(sd=97);vl[43]=tc;vl[45]=tc;vl[46]=tc;vl[95]=tc;vl[72]=[tc,a5];vl[104]=[tc,a5];vl[87]=[tc,o5];vl[119]=[tc,o5];function NY(e,t,n){const r=this;let a,u;return h;function h(F){return!kD(F)||!c5(r.previous)||aT(r.events)?n(F):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(F))}function o(F){return kD(F)?(e.consume(F),o):F===64?(e.consume(F),g):n(F)}function g(F){return F===46?e.check(Ip,z,b)(F):F===45||F===95?e.check(Ip,n,A)(F):Yo(F)?(!u&&Jx(F)&&(u=!0),e.consume(F),g):z(F)}function b(F){return e.consume(F),a=!0,u=void 0,g}function A(F){return e.consume(F),D}function D(F){return F===46?e.check(Ip,n,b)(F):g(F)}function z(F){return a&&!u?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(F)):n(F)}}function UY(e,t,n){const r=this;return a;function a(h){return h!==87&&h!==119||!l5(r.previous)||aT(r.events)?n(h):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(BY,e.attempt(n5,e.attempt(r5,u),n),n)(h))}function u(h){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(h)}}function jY(e,t,n){const r=this;return a;function a(N){return N!==72&&N!==104||!oT(r.previous)||aT(r.events)?n(N):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(N),u)}function u(N){return N===84||N===116?(e.consume(N),h):n(N)}function h(N){return N===84||N===116?(e.consume(N),o):n(N)}function o(N){return N===80||N===112?(e.consume(N),g):n(N)}function g(N){return N===83||N===115?(e.consume(N),b):b(N)}function b(N){return N===58?(e.consume(N),A):n(N)}function A(N){return N===47?(e.consume(N),D):n(N)}function D(N){return N===47?(e.consume(N),z):n(N)}function z(N){return N===null||Kg(N)||$0(N)||V0(N)?n(N):e.attempt(n5,e.attempt(r5,F),n)(N)}function F(N){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(N)}}function $Y(e,t,n){return r;function r(g){return e.consume(g),a}function a(g){return g===87||g===119?(e.consume(g),u):n(g)}function u(g){return g===87||g===119?(e.consume(g),h):n(g)}function h(g){return g===46?(e.consume(g),o):n(g)}function o(g){return g===null||Dn(g)?n(g):t(g)}}function VY(e,t,n){let r,a;return u;function u(g){return g===38?e.check(i5,o,h)(g):g===46||g===95?e.check(Ip,o,h)(g):g===null||Kg(g)||$0(g)||g!==45&&V0(g)?o(g):(e.consume(g),u)}function h(g){return g===46?(a=r,r=void 0,e.consume(g),u):(g===95&&(r=!0),e.consume(g),u)}function o(g){return!a&&!r?t(g):n(g)}}function HY(e,t){let n=0;return r;function r(h){return h===38?e.check(i5,t,a)(h):(h===40&&n++,h===41?e.check(Ip,u,a)(h):iT(h)?t(h):s5(h)?e.check(Ip,t,a)(h):(e.consume(h),r))}function a(h){return e.consume(h),r}function u(h){return n--,n<0?t(h):a(h)}}function WY(e,t,n){return r;function r(h){return e.consume(h),a}function a(h){return Qa(h)?(e.consume(h),a):h===59?(e.consume(h),u):n(h)}function u(h){return iT(h)?t(h):n(h)}}function GY(e,t,n){return r;function r(u){return e.consume(u),a}function a(u){return s5(u)?(e.consume(u),a):iT(u)?t(u):n(u)}}function s5(e){return e===33||e===34||e===39||e===41||e===42||e===44||e===46||e===58||e===59||e===60||e===63||e===95||e===126}function iT(e){return e===null||e===60||Zi(e)}function kD(e){return e===43||e===45||e===46||e===95||Yo(e)}function l5(e){return e===null||e===40||e===42||e===95||e===126||Zi(e)}function oT(e){return e===null||!Qa(e)}function c5(e){return e!==47&&oT(e)}function aT(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const qY={tokenize:tJ,partial:!0};function ZY(){return{document:{[91]:{tokenize:JY,continuation:{tokenize:QY},exit:eJ}},text:{[91]:{tokenize:YY},[93]:{add:"after",tokenize:XY,resolveTo:KY}}}}function XY(e,t,n){const r=this;let a=r.events.length;const u=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let h;for(;a--;){const g=r.events[a][1];if(g.type==="labelImage"){h=g;break}if(g.type==="gfmFootnoteCall"||g.type==="labelLink"||g.type==="label"||g.type==="image"||g.type==="link")break}return o;function o(g){if(!h||!h._balanced)return n(g);const b=Ls(r.sliceSerialize({start:h.end,end:r.now()}));return b.charCodeAt(0)!==94||!u.includes(b.slice(1))?n(g):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(g),e.exit("gfmFootnoteCallLabelMarker"),t(g))}}function KY(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const u={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},h={type:"chunkString",contentType:"string",start:Object.assign({},u.start),end:Object.assign({},u.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",u,t],["enter",h,t],["exit",h,t],["exit",u,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function YY(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let u=0,h;return o;function o(z){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(z),e.exit("gfmFootnoteCallLabelMarker"),g}function g(z){return z!==94?n(z):(e.enter("gfmFootnoteCallMarker"),e.consume(z),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",b)}function b(z){let F;return z===null||z===91||u++>999?n(z):z===93?h?(e.exit("chunkString"),F=e.exit("gfmFootnoteCallString"),a.includes(Ls(r.sliceSerialize(F)))?D(z):n(z)):n(z):(e.consume(z),Zi(z)||(h=!0),z===92?A:b)}function A(z){return z===91||z===92||z===93?(e.consume(z),u++,b):b(z)}function D(z){return e.enter("gfmFootnoteCallLabelMarker"),e.consume(z),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t}}function JY(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let u,h=0,o;return g;function g(T){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(T),e.exit("gfmFootnoteDefinitionLabelMarker"),b}function b(T){return T===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(T),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),A):n(T)}function A(T){let H;return T===null||T===91||h>999?n(T):T===93?o?(H=e.exit("gfmFootnoteDefinitionLabelString"),u=Ls(r.sliceSerialize(H)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(T),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),F):n(T):Dn(T)?(e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),h++,A):(e.enter("chunkString").contentType="string",D(T))}function D(T){return T===null||Dn(T)||T===91||T===93||h>999?(e.exit("chunkString"),A(T)):(Zi(T)||(o=!0),h++,e.consume(T),T===92?z:D)}function z(T){return T===91||T===92||T===93?(e.consume(T),h++,D):D(T)}function F(T){return T===58?(e.enter("definitionMarker"),e.consume(T),e.exit("definitionMarker"),Cr(e,N,"gfmFootnoteDefinitionWhitespace")):n(T)}function N(T){return a.includes(u)||a.push(u),t(T)}}function QY(e,t,n){return e.check(yv,t,e.attempt(qY,t,n))}function eJ(e){e.exit("gfmFootnoteDefinition")}function tJ(e,t,n){const r=this;return Cr(e,a,"gfmFootnoteDefinitionIndent",4+1);function a(u){const h=r.events[r.events.length-1];return h&&h[1].type==="gfmFootnoteDefinitionIndent"&&h[2].sliceSerialize(h[1],!0).length===4?t(u):n(u)}}function nJ(e={}){let t=e.singleTilde;const n={tokenize:a,resolveAll:r};return t==null&&(t=!0),{text:{[126]:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(u,h){let o=-1;for(;++o<u.length;)if(u[o][0]==="enter"&&u[o][1].type==="strikethroughSequenceTemporary"&&u[o][1]._close){let g=o;for(;g--;)if(u[g][0]==="exit"&&u[g][1].type==="strikethroughSequenceTemporary"&&u[g][1]._open&&u[o][1].end.offset-u[o][1].start.offset===u[g][1].end.offset-u[g][1].start.offset){u[o][1].type="strikethroughSequence",u[g][1].type="strikethroughSequence";const b={type:"strikethrough",start:Object.assign({},u[g][1].start),end:Object.assign({},u[o][1].end)},A={type:"strikethroughText",start:Object.assign({},u[g][1].end),end:Object.assign({},u[o][1].start)},D=[["enter",b,h],["enter",u[g][1],h],["exit",u[g][1],h],["enter",A,h]];Ra(D,D.length,0,H0(h.parser.constructs.insideSpan.null,u.slice(g+1,o),h)),Ra(D,D.length,0,[["exit",A,h],["enter",u[o][1],h],["exit",u[o][1],h],["exit",b,h]]),Ra(u,g-1,o-g+3,D),o=g+D.length-2;break}}for(o=-1;++o<u.length;)u[o][1].type==="strikethroughSequenceTemporary"&&(u[o][1].type="data");return u}function a(u,h,o){const g=this.previous,b=this.events;let A=0;return D;function D(F){return g===126&&b[b.length-1][1].type!=="characterEscape"?o(F):(u.enter("strikethroughSequenceTemporary"),z(F))}function z(F){const N=Qx(g);if(F===126)return A>1?o(F):(u.consume(F),A++,z);if(A<2&&!t)return o(F);const T=u.exit("strikethroughSequenceTemporary"),H=Qx(F);return T._open=!H||H===2&&Boolean(N),T._close=!N||N===2&&Boolean(H),h(F)}}}const rJ={flow:{null:{tokenize:oJ,resolve:iJ}}},TD={tokenize:aJ,partial:!0};function iJ(e,t){let n=-1,r,a,u,h,o,g,b;for(;++n<e.length;){const A=e[n][1];if(u&&(A.type==="temporaryTableCellContent"&&(h=h||n,o=n),(A.type==="tableCellDivider"||A.type==="tableRow")&&o)){const D={type:"tableContent",start:e[h][1].start,end:e[o][1].end},z={type:"chunkText",start:D.start,end:D.end,contentType:"text"};e.splice(h,o-h+1,["enter",D,t],["enter",z,t],["exit",z,t],["exit",D,t]),n-=o-h-3,h=void 0,o=void 0}if(e[n][0]==="exit"&&g!==void 0&&g+(b?0:1)<n&&(A.type==="tableCellDivider"||A.type==="tableRow"&&(g+3<n||e[g][1].type!=="whitespace"))){const D={type:a?"tableDelimiter":r?"tableHeader":"tableData",start:e[g][1].start,end:e[n][1].end};e.splice(n+(A.type==="tableCellDivider"?1:0),0,["exit",D,t]),e.splice(g,0,["enter",D,t]),n+=2,g=n+1,b=!0}A.type==="tableRow"&&(u=e[n][0]==="enter",u&&(g=n+1,b=!1)),A.type==="tableDelimiterRow"&&(a=e[n][0]==="enter",a&&(g=n+1,b=!1)),A.type==="tableHead"&&(r=e[n][0]==="enter")}return e}function oJ(e,t,n){const r=this,a=[];let u=0,h,o;return g;function g(Ee){return e.enter("table")._align=a,e.enter("tableHead"),e.enter("tableRow"),Ee===124?b(Ee):(u++,e.enter("temporaryTableCellContent"),z(Ee))}function b(Ee){return e.enter("tableCellDivider"),e.consume(Ee),e.exit("tableCellDivider"),h=!0,A}function A(Ee){return Ee===null||Dn(Ee)?N(Ee):ri(Ee)?(e.enter("whitespace"),e.consume(Ee),D):(h&&(h=void 0,u++),Ee===124?b(Ee):(e.enter("temporaryTableCellContent"),z(Ee)))}function D(Ee){return ri(Ee)?(e.consume(Ee),D):(e.exit("whitespace"),A(Ee))}function z(Ee){return Ee===null||Ee===124||Zi(Ee)?(e.exit("temporaryTableCellContent"),A(Ee)):(e.consume(Ee),Ee===92?F:z)}function F(Ee){return Ee===92||Ee===124?(e.consume(Ee),z):z(Ee)}function N(Ee){if(Ee===null)return n(Ee);e.exit("tableRow"),e.exit("tableHead");const pt=r.interrupt;return r.interrupt=!0,e.attempt({tokenize:Oe,partial:!0},function(Ze){return r.interrupt=pt,e.enter("tableDelimiterRow"),T(Ze)},function(Ze){return r.interrupt=pt,n(Ze)})(Ee)}function T(Ee){return Ee===null||Dn(Ee)?O(Ee):ri(Ee)?(e.enter("whitespace"),e.consume(Ee),H):Ee===45?(e.enter("tableDelimiterFiller"),e.consume(Ee),o=!0,a.push("none"),j):Ee===58?(e.enter("tableDelimiterAlignment"),e.consume(Ee),e.exit("tableDelimiterAlignment"),a.push("left"),W):Ee===124?(e.enter("tableCellDivider"),e.consume(Ee),e.exit("tableCellDivider"),T):n(Ee)}function H(Ee){return ri(Ee)?(e.consume(Ee),H):(e.exit("whitespace"),T(Ee))}function j(Ee){return Ee===45?(e.consume(Ee),j):(e.exit("tableDelimiterFiller"),Ee===58?(e.enter("tableDelimiterAlignment"),e.consume(Ee),e.exit("tableDelimiterAlignment"),a[a.length-1]=a[a.length-1]==="left"?"center":"right",B):T(Ee))}function W(Ee){return Ee===45?(e.enter("tableDelimiterFiller"),e.consume(Ee),o=!0,j):n(Ee)}function B(Ee){return Ee===null||Dn(Ee)?O(Ee):ri(Ee)?(e.enter("whitespace"),e.consume(Ee),H):Ee===124?(e.enter("tableCellDivider"),e.consume(Ee),e.exit("tableCellDivider"),T):n(Ee)}function O(Ee){return e.exit("tableDelimiterRow"),!o||u!==a.length?n(Ee):Ee===null?S(Ee):e.check(TD,S,e.attempt({tokenize:Oe,partial:!0},Cr(e,w,"linePrefix",4),S))(Ee)}function S(Ee){return e.exit("table"),t(Ee)}function w(Ee){return e.enter("tableBody"),P(Ee)}function P(Ee){return e.enter("tableRow"),Ee===124?Y(Ee):(e.enter("temporaryTableCellContent"),oe(Ee))}function Y(Ee){return e.enter("tableCellDivider"),e.consume(Ee),e.exit("tableCellDivider"),ne}function ne(Ee){return Ee===null||Dn(Ee)?Re(Ee):ri(Ee)?(e.enter("whitespace"),e.consume(Ee),ae):Ee===124?Y(Ee):(e.enter("temporaryTableCellContent"),oe(Ee))}function ae(Ee){return ri(Ee)?(e.consume(Ee),ae):(e.exit("whitespace"),ne(Ee))}function oe(Ee){return Ee===null||Ee===124||Zi(Ee)?(e.exit("temporaryTableCellContent"),ne(Ee)):(e.consume(Ee),Ee===92?fe:oe)}function fe(Ee){return Ee===92||Ee===124?(e.consume(Ee),oe):oe(Ee)}function Re(Ee){return e.exit("tableRow"),Ee===null?Be(Ee):e.check(TD,Be,e.attempt({tokenize:Oe,partial:!0},Cr(e,P,"linePrefix",4),Be))(Ee)}function Be(Ee){return e.exit("tableBody"),S(Ee)}function Oe(Ee,pt,Ze){return ct;function ct(xe){return Ee.enter("lineEnding"),Ee.consume(xe),Ee.exit("lineEnding"),Cr(Ee,nt,"linePrefix")}function nt(xe){if(r.parser.lazy[r.now().line]||xe===null||Dn(xe))return Ze(xe);const be=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&be&&be[1].type==="linePrefix"&&be[2].sliceSerialize(be[1],!0).length>=4?Ze(xe):(r._gfmTableDynamicInterruptHack=!0,Ee.check(r.parser.constructs.flow,function(on){return r._gfmTableDynamicInterruptHack=!1,Ze(on)},function(on){return r._gfmTableDynamicInterruptHack=!1,pt(on)})(xe))}}}function aJ(e,t,n){let r=0;return a;function a(h){return e.enter("check"),e.consume(h),u}function u(h){return h===-1||h===32?(e.consume(h),r++,r===4?t:u):h===null||Zi(h)?t(h):n(h)}}const sJ={tokenize:cJ},lJ={text:{[91]:sJ}};function cJ(e,t,n){const r=this;return a;function a(o){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(o):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(o),e.exit("taskListCheckMarker"),u)}function u(o){return Zi(o)?(e.enter("taskListCheckValueUnchecked"),e.consume(o),e.exit("taskListCheckValueUnchecked"),h):o===88||o===120?(e.enter("taskListCheckValueChecked"),e.consume(o),e.exit("taskListCheckValueChecked"),h):n(o)}function h(o){return o===93?(e.enter("taskListCheckMarker"),e.consume(o),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:uJ},t,n)):n(o)}}function uJ(e,t,n){const r=this;return Cr(e,a,"whitespace");function a(u){const h=r.events[r.events.length-1];return(h&&h[1].type==="whitespace"||Dn(u))&&u!==null?t(u):n(u)}}function dJ(e){return wz([FY,ZY(),nJ(e),rJ,lJ])}function AD(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function hJ(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const pJ={}.hasOwnProperty,fJ=function(e,t,n,r){let a,u;typeof t=="string"||t instanceof RegExp?(u=[[t,n]],a=r):(u=t,a=n),a||(a={});const h=Jk(a.ignore||[]),o=mJ(u);let g=-1;for(;++g<o.length;)zz(e,"text",b);return e;function b(D,z){let F=-1,N;for(;++F<z.length;){const T=z[F];if(h(T,N?N.children.indexOf(T):void 0,N))return;N=T}if(N)return A(D,z)}function A(D,z){const F=z[z.length-1],N=o[g][0],T=o[g][1];let H=0;const j=F.children.indexOf(D);let W=!1,B=[],O;N.lastIndex=0;let S=N.exec(D.value);for(;S;){O=S.index;const w={index:S.index,input:S.input,stack:[...z,D]};let P=T(...S,w);if(typeof P=="string"&&(P=P.length>0?{type:"text",value:P}:void 0),P!==!1&&(H!==O&&B.push({type:"text",value:D.value.slice(H,O)}),Array.isArray(P)?B.push(...P):P&&B.push(P),H=O+S[0].length,W=!0),!N.global)break;S=N.exec(D.value)}return W?(H<D.value.length&&B.push({type:"text",value:D.value.slice(H)}),F.children.splice(j,1,...B)):B=[D],j+B.length}};function mJ(e){const t=[];if(typeof e!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(e)){let n=-1;for(;++n<e.length;)t.push([MD(e[n][0]),ID(e[n][1])])}else{let n;for(n in e)pJ.call(e,n)&&t.push([MD(n),ID(e[n])])}return t}function MD(e){return typeof e=="string"?new RegExp(hJ(e),"g"):e}function ID(e){return typeof e=="function"?e:()=>e}const aE="phrasing",sE=["autolink","link","image","label"],gJ={transforms:[EJ],enter:{literalAutolink:yJ,literalAutolinkEmail:lE,literalAutolinkHttp:lE,literalAutolinkWww:lE},exit:{literalAutolink:wJ,literalAutolinkEmail:bJ,literalAutolinkHttp:_J,literalAutolinkWww:xJ}},vJ={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:aE,notInConstruct:sE},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:aE,notInConstruct:sE},{character:":",before:"[ps]",after:"\\/",inConstruct:aE,notInConstruct:sE}]};function yJ(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function lE(e){this.config.enter.autolinkProtocol.call(this,e)}function _J(e){this.config.exit.autolinkProtocol.call(this,e)}function xJ(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.url="http://"+this.sliceSerialize(e)}function bJ(e){this.config.exit.autolinkEmail.call(this,e)}function wJ(e){this.exit(e)}function EJ(e){fJ(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,CJ],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,SJ]],{ignore:["link","linkReference"]})}function CJ(e,t,n,r,a){let u="";if(!u5(a)||(/^w/i.test(t)&&(n=t+n,t="",u="http://"),!kJ(n)))return!1;const h=TJ(n+r);if(!h[0])return!1;const o={type:"link",title:null,url:u+t+h[0],children:[{type:"text",value:t+h[0]}]};return h[1]?[o,{type:"text",value:h[1]}]:o}function SJ(e,t,n,r){return!u5(r,!0)||/[_-\d]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function kJ(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function TJ(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);let n,r,a,u;if(t)for(e=e.slice(0,t.index),u=t[0],n=u.indexOf(")"),r=AD(e,"("),a=AD(e,")");n!==-1&&r>a;)e+=u.slice(0,n+1),u=u.slice(n+1),n=u.indexOf(")"),a++;return[e,u]}function u5(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||$0(n)||V0(n))&&(!t||n!==47)}function PD(e){return e.label||!e.identifier?e.label||"":Rz(e.identifier)}function au(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,a=n.line||1,u=n.column||1;return{move:g,current:h,shift:o};function h(){return{now:{line:a,column:u},lineShift:r}}function o(b){r+=b}function g(b=""){const A=b.split(/\r?\n|\r/g),D=A[A.length-1];return a+=A.length-1,u=A.length===1?u+D.length:1+D.length+r,b}}function d5(e,t,n){const r=t.indexStack,a=e.children||[],u=au(n),h=[];let o=-1;for(r.push(-1);++o<a.length;){const b=a[o];r[r.length-1]=o,h.push(u.move(t.handle(b,e,t,{before:`
`,after:`
`,...u.current()}))),b.type!=="list"&&(t.bulletLastUsed=void 0),o<a.length-1&&h.push(u.move(g(b,a[o+1])))}return r.pop(),h.join("");function g(b,A){let D=t.join.length;for(;D--;){const z=t.join[D](b,A,e,t);if(z===!0||z===1)break;if(typeof z=="number")return`
`.repeat(1+z);if(z===!1)return`

<!---->

`}return`

`}}const AJ=/\r?\n|\r/g;function h5(e,t){const n=[];let r=0,a=0,u;for(;u=AJ.exec(e);)h(e.slice(r,u.index)),n.push(u[0]),r=u.index+u[0].length,a++;return h(e.slice(r)),n.join("");function h(o){n.push(t(o,a,!o))}}function p5(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function MJ(e,t){return DD(e,t.inConstruct,!0)&&!DD(e,t.notInConstruct,!1)}function DD(e,t,n){if(!t)return n;typeof t=="string"&&(t=[t]);let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function RD(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),a=[],u=[],h={};let o=-1;for(;++o<e.unsafe.length;){const A=e.unsafe[o];if(!MJ(e.stack,A))continue;const D=p5(A);let z;for(;z=D.exec(r);){const F="before"in A||Boolean(A.atBreak),N="after"in A,T=z.index+(F?z[1].length:0);a.includes(T)?(h[T].before&&!F&&(h[T].before=!1),h[T].after&&!N&&(h[T].after=!1)):(a.push(T),h[T]={before:F,after:N})}}a.sort(IJ);let g=n.before?n.before.length:0;const b=r.length-(n.after?n.after.length:0);for(o=-1;++o<a.length;){const A=a[o];A<g||A>=b||A+1<b&&a[o+1]===A+1&&h[A].after&&!h[A+1].before&&!h[A+1].after||a[o-1]===A-1&&h[A].before&&!h[A-1].before&&!h[A-1].after||(g!==A&&u.push(LD(r.slice(g,A),"\\")),g=A,/[!-/:-@[-`{-~]/.test(r.charAt(A))&&(!n.encode||!n.encode.includes(r.charAt(A)))?u.push("\\"):(u.push("&#x"+r.charCodeAt(A).toString(16).toUpperCase()+";"),g++))}return u.push(LD(r.slice(g,b),n.after)),u.join("")}function IJ(e,t){return e-t}function LD(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],a=[],u=e+t;let h=-1,o=0,g;for(;g=n.exec(u);)r.push(g.index);for(;++h<r.length;)o!==r[h]&&a.push(e.slice(o,r[h])),a.push("\\"),o=r[h];return a.push(e.slice(o)),a.join("")}function PJ(){return{enter:{gfmFootnoteDefinition:e,gfmFootnoteDefinitionLabelString:t,gfmFootnoteCall:a,gfmFootnoteCallString:u},exit:{gfmFootnoteDefinition:r,gfmFootnoteDefinitionLabelString:n,gfmFootnoteCall:o,gfmFootnoteCallString:h}};function e(g){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},g)}function t(){this.buffer()}function n(g){const b=this.resume(),A=this.stack[this.stack.length-1];A.label=b,A.identifier=Ls(this.sliceSerialize(g)).toLowerCase()}function r(g){this.exit(g)}function a(g){this.enter({type:"footnoteReference",identifier:"",label:""},g)}function u(){this.buffer()}function h(g){const b=this.resume(),A=this.stack[this.stack.length-1];A.label=b,A.identifier=Ls(this.sliceSerialize(g)).toLowerCase()}function o(g){this.exit(g)}}function DJ(){return e.peek=t,{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:n,footnoteReference:e}};function e(r,a,u,h){const o=au(h);let g=o.move("[^");const b=u.enter("footnoteReference"),A=u.enter("reference");return g+=o.move(RD(u,PD(r),{...o.current(),before:g,after:"]"})),A(),b(),g+=o.move("]"),g}function t(){return"["}function n(r,a,u,h){const o=au(h);let g=o.move("[^");const b=u.enter("footnoteDefinition"),A=u.enter("label");return g+=o.move(RD(u,PD(r),{...o.current(),before:g,after:"]"})),A(),g+=o.move("]:"+(r.children&&r.children.length>0?" ":"")),o.shift(4),g+=o.move(h5(d5(r,u,o.current()),D)),b(),g;function D(z,F,N){return F?(N?"":"    ")+z:z}}}function f5(e,t,n){const r=t.indexStack,a=e.children||[],u=[];let h=-1,o=n.before;r.push(-1);let g=au(n);for(;++h<a.length;){const b=a[h];let A;if(r[r.length-1]=h,h+1<a.length){let D=t.handle.handlers[a[h+1].type];D&&D.peek&&(D=D.peek),A=D?D(a[h+1],e,t,{before:"",after:"",...g.current()}).charAt(0):""}else A=n.after;u.length>0&&(o==="\r"||o===`
`)&&b.type==="html"&&(u[u.length-1]=u[u.length-1].replace(/(\r?\n|\r)$/," "),o=" ",g=au(n),g.move(u.join(""))),u.push(g.move(t.handle(b,e,t,{...g.current(),before:o,after:A}))),o=u[u.length-1].slice(-1)}return r.pop(),u.join("")}const RJ={canContainEols:["delete"],enter:{strikethrough:OJ},exit:{strikethrough:zJ}},LJ={unsafe:[{character:"~",inConstruct:"phrasing"}],handlers:{delete:m5}};m5.peek=BJ;function OJ(e){this.enter({type:"delete",children:[]},e)}function zJ(e){this.exit(e)}function m5(e,t,n,r){const a=au(r),u=n.enter("emphasis");let h=a.move("~~");return h+=f5(e,n,{...a.current(),before:h,after:"~"}),h+=a.move("~~"),u(),h}function BJ(){return"~"}g5.peek=FJ;function g5(e,t,n){let r=e.value||"",a="`",u=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++u<n.unsafe.length;){const h=n.unsafe[u],o=p5(h);let g;if(!!h.atBreak)for(;g=o.exec(r);){let b=g.index;r.charCodeAt(b)===10&&r.charCodeAt(b-1)===13&&b--,r=r.slice(0,b)+" "+r.slice(g.index+1)}}return a+r+a}function FJ(){return"`"}function NJ(e,t={}){const n=(t.align||[]).concat(),r=t.stringLength||jJ,a=[],u=[],h=[],o=[];let g=0,b=-1;for(;++b<e.length;){const N=[],T=[];let H=-1;for(e[b].length>g&&(g=e[b].length);++H<e[b].length;){const j=UJ(e[b][H]);if(t.alignDelimiters!==!1){const W=r(j);T[H]=W,(o[H]===void 0||W>o[H])&&(o[H]=W)}N.push(j)}u[b]=N,h[b]=T}let A=-1;if(typeof n=="object"&&"length"in n)for(;++A<g;)a[A]=OD(n[A]);else{const N=OD(n);for(;++A<g;)a[A]=N}A=-1;const D=[],z=[];for(;++A<g;){const N=a[A];let T="",H="";N===99?(T=":",H=":"):N===108?T=":":N===114&&(H=":");let j=t.alignDelimiters===!1?1:Math.max(1,o[A]-T.length-H.length);const W=T+"-".repeat(j)+H;t.alignDelimiters!==!1&&(j=T.length+j+H.length,j>o[A]&&(o[A]=j),z[A]=j),D[A]=W}u.splice(1,0,D),h.splice(1,0,z),b=-1;const F=[];for(;++b<u.length;){const N=u[b],T=h[b];A=-1;const H=[];for(;++A<g;){const j=N[A]||"";let W="",B="";if(t.alignDelimiters!==!1){const O=o[A]-(T[A]||0),S=a[A];S===114?W=" ".repeat(O):S===99?O%2?(W=" ".repeat(O/2+.5),B=" ".repeat(O/2-.5)):(W=" ".repeat(O/2),B=W):B=" ".repeat(O)}t.delimiterStart!==!1&&!A&&H.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&j==="")&&(t.delimiterStart!==!1||A)&&H.push(" "),t.alignDelimiters!==!1&&H.push(W),H.push(j),t.alignDelimiters!==!1&&H.push(B),t.padding!==!1&&H.push(" "),(t.delimiterEnd!==!1||A!==g-1)&&H.push("|")}F.push(t.delimiterEnd===!1?H.join("").replace(/ +$/,""):H.join(""))}return F.join(`
`)}function UJ(e){return e==null?"":String(e)}function jJ(e){return e.length}function OD(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const $J={enter:{table:VJ,tableData:zD,tableHeader:zD,tableRow:WJ},exit:{codeText:GJ,table:HJ,tableData:cE,tableHeader:cE,tableRow:cE}};function VJ(e){const t=e._align;this.enter({type:"table",align:t.map(n=>n==="none"?null:n),children:[]},e),this.setData("inTable",!0)}function HJ(e){this.exit(e),this.setData("inTable")}function WJ(e){this.enter({type:"tableRow",children:[]},e)}function cE(e){this.exit(e)}function zD(e){this.enter({type:"tableCell",children:[]},e)}function GJ(e){let t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,qJ));const n=this.stack[this.stack.length-1];n.value=t,this.exit(e)}function qJ(e,t){return t==="|"?t:e}function ZJ(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,u=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:h,tableRow:o,tableCell:g,inlineCode:z}};function h(F,N,T,H){return b(A(F,T,H),F.align)}function o(F,N,T,H){const j=D(F,T,H),W=b([j]);return W.slice(0,W.indexOf(`
`))}function g(F,N,T,H){const j=T.enter("tableCell"),W=T.enter("phrasing"),B=f5(F,T,{...H,before:u,after:u});return W(),j(),B}function b(F,N){return NJ(F,{align:N,alignDelimiters:r,padding:n,stringLength:a})}function A(F,N,T){const H=F.children;let j=-1;const W=[],B=N.enter("table");for(;++j<H.length;)W[j]=D(H[j],N,T);return B(),W}function D(F,N,T){const H=F.children;let j=-1;const W=[],B=N.enter("tableRow");for(;++j<H.length;)W[j]=g(H[j],F,N,T);return B(),W}function z(F,N,T){let H=g5(F,N,T);return T.stack.includes("tableCell")&&(H=H.replace(/\|/g,"\\$&")),H}}function XJ(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function KJ(e){const t=e.options.listItemIndent||"tab";if(t===1||t==="1")return"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function YJ(e,t,n,r){const a=KJ(n);let u=n.bulletCurrent||XJ(n);t&&t.type==="list"&&t.ordered&&(u=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+u);let h=u.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(h=Math.ceil(h/4)*4);const o=au(r);o.move(u+" ".repeat(h-u.length)),o.shift(h);const g=n.enter("listItem"),b=h5(d5(e,n,o.current()),A);return g(),b;function A(D,z,F){return z?(F?"":" ".repeat(h))+D:(F?u:u+" ".repeat(h-u.length))+D}}const JJ={exit:{taskListCheckValueChecked:BD,taskListCheckValueUnchecked:BD,paragraph:eQ}},QJ={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:tQ}};function BD(e){const t=this.stack[this.stack.length-2];t.checked=e.type==="taskListCheckValueChecked"}function eQ(e){const t=this.stack[this.stack.length-2],n=this.stack[this.stack.length-1],r=t.children,a=n.children[0];let u=-1,h;if(t&&t.type==="listItem"&&typeof t.checked=="boolean"&&a&&a.type==="text"){for(;++u<r.length;){const o=r[u];if(o.type==="paragraph"){h=o;break}}h===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}this.exit(e)}function tQ(e,t,n,r){const a=e.children[0],u=typeof e.checked=="boolean"&&a&&a.type==="paragraph",h="["+(e.checked?"x":" ")+"] ",o=au(r);u&&o.move(h);let g=YJ(e,t,n,{...r,...o.current()});return u&&(g=g.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,b)),g;function b(A){return A+h}}function nQ(){return[gJ,PJ(),RJ,$J,JJ]}function rQ(e){return{extensions:[vJ,DJ(),LJ,ZJ(e),QJ]}}function iQ(e={}){const t=this.data();n("micromarkExtensions",dJ(e)),n("fromMarkdownExtensions",nQ()),n("toMarkdownExtensions",rQ(e));function n(r,a){(t[r]?t[r]:t[r]=[]).push(a)}}const sT=({text:e})=>m.exports.createElement(rT,{children:e,remarkPlugins:[iQ],components:{img:t=>oQ(t.src)?m.exports.createElement("iframe",{className:"markdown-embed",frameBorder:0,src:t.src}):m.exports.createElement("img",{src:t.src,alt:t.alt})}});function oQ(e){let t=["https://forms.gle","https://docs.google.com","https://www.youtube.com/embed","https://open.spotify.com/embed"];for(let n=0;n<t.length;n++)if(e.startsWith(t[n]))return!0;return!1}const aQ=()=>{const[e,t]=m.exports.useState(-1);return m.exports.useEffect(()=>{document.title="404 Page Not Found | Metropolis",t(Math.floor(Math.random()*3))},[]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/404.css"}),m.exports.createElement("div",{className:"main-container card"},m.exports.createElement("h2",{className:"center-align message"},"404: Page Not Found"),m.exports.createElement("img",{className:"comic-img",style:{maxWidth:"100%"},src:`/static/img/404-comics/404-${e}.png`}),m.exports.createElement("div",{className:"display-metropolis valign-wrapper"},m.exports.createElement("img",{className:"inline-logo",src:"/static/img/themes/logos/dark-transparent.png"})),m.exports.createElement("div",{className:"game-container",hidden:!0},m.exports.createElement("input",{type:"button",className:"control-button",id:"up-button",value:"W"}),m.exports.createElement("br",null),m.exports.createElement("div",{className:"row valign-wrapper game-mid"},m.exports.createElement("div",{style:{marginLeft:"auto",marginRight:"auto"}},m.exports.createElement("input",{type:"button",className:"col control-button",id:"left-button",value:"A"}),m.exports.createElement("div",{className:"game-content col"},m.exports.createElement("canvas",{id:"game-canvas",style:{backgroundColor:"black"}}),m.exports.createElement("div",{className:"result-container valign-wrapper"},m.exports.createElement("div",{className:"result-display valign-wrapper",hidden:!0},m.exports.createElement("div",{className:"result-display-text"},m.exports.createElement("span",{className:"result-display-message"},"Start Game"),m.exports.createElement("br",null))))),m.exports.createElement("input",{type:"button",className:"col control-button",id:"right-button",value:"D"}),m.exports.createElement("br",null))),m.exports.createElement("input",{type:"button",className:"control-button",id:"down-button",value:"S"})),m.exports.createElement("p",{className:"center-align"},m.exports.createElement(nn,{to:"https://maclyonsden.com/"},"Return Home"))))},sQ=()=>{const e=m.exports.useContext(Xr),[t,n]=m.exports.useState(!1),[r,a]=m.exports.useState({}),u=encodeURIComponent(window.location.pathname+"/");m.exports.useEffect(()=>{e.getAPI(`${mr.OBJECT}/flatpage/retrieve/${u}?lookup=url`,!1).then(o=>{a(o.data),n(!0),document.title=`${o.data.title} | Metropolis`}).catch(o=>{o.response.status!==404&&e.refreshAuth()})},[]);const h=()=>{window.history.back()};return t?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/flatpage.css"}),m.exports.createElement("div",{className:"resources-page"},m.exports.createElement("a",{id:"back",onClick:h},m.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"content"},m.exports.createElement("h1",{className:"title"},"Resources"),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"content-body"},m.exports.createElement(sT,{text:r.content})))))):m.exports.createElement(aQ,null)},lQ=()=>{const{id:e}=ef();Ii();const t=m.exports.useContext(Xr),[n,r]=m.exports.useState({}),[a,u]=m.exports.useState([]),[h,o]=m.exports.useState([]),[g,b]=m.exports.useState([]);m.exports.useEffect(()=>{document.title=`${n.name} | Metropolis`},[n]),m.exports.useEffect(()=>{const D=`${mr.OBJECT}/organization/retrieve/${e}`;t.getAPI(D,!1).then(z=>{const F=z.data;r(F),console.log(D),t.getAPI(`${mr.OBJECT}/tag`,!1).then(N=>{const T=N.data.results;console.log(F.tags);const H=[];for(let j=0;j<F.tags.length;j++)for(let W=0;W<T.length;W++)if(F.tags[j]===T[W].id){H.push(T[W]);break}u(H)}).catch(()=>{t.refreshAuth()}),t.getAPI(`${mr.OBJECT}/user?limit=99999999`,!1).then(N=>{const T=N.data.results;o(F.execs.map(H=>{for(let j=0;j<T.length;j++)if(T[j].id===H)return T[j];return null})),b(F.members.map(H=>{for(let j=0;j<T.length;j++)if(T[j].id===H)return T[j];return null}))}).catch(()=>{t.refreshAuth()})}).catch(z=>{t.refreshAuth()})},[]);const A=D=>m.exports.createElement("li",null,m.exports.createElement("i",{className:"zmdi zmdi-link zmdi-hc-lg","aria-hidden":"true"}),m.exports.createElement("a",{href:D.href,target:"_blank",style:{wordBreak:"break-word"}},D.href));return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/detail.css"}),m.exports.createElement("div",{className:"club"},m.exports.createElement("div",{className:"row"},m.exports.createElement("img",{className:"club-banner responsive-img col s12",src:n.banner,alt:"banner of organization"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"club-detail"},m.exports.createElement("div",{className:"row club-header"},m.exports.createElement("div",{className:"col m3 s12"},m.exports.createElement("div",{className:"club-logo"},m.exports.createElement("img",{className:"circle",src:n.icon,alt:"icon of organization"}))),m.exports.createElement("div",{className:"col m5 s12"},m.exports.createElement("h2",{className:"club-name"},n.name),m.exports.createElement("div",{className:"tag-section"},a.map(D=>m.exports.createElement(Gg,{tag:D})))),m.exports.createElement("div",{className:"col m4 s12"})),m.exports.createElement("div",{className:"row club-info"},m.exports.createElement("div",{className:"col m8"},m.exports.createElement("div",{className:"description"},n.bio,m.exports.createElement("br",null),m.exports.createElement("br",null),n.owner!==t.user.id?m.exports.createElement(nn,{to:`/club/edit/${n.id}`},"Edit club details"):m.exports.createElement(m.exports.Fragment,null))),m.exports.createElement("div",{className:"col m4"},m.exports.createElement("ul",{className:"link-section",style:{display:"inline"}},"links"in n?n.links.map(D=>m.exports.createElement(A,{href:D})):m.exports.createElement(m.exports.Fragment,null)))),m.exports.createElement("div",{className:"row"},m.exports.createElement("div",{className:"col s12"},m.exports.createElement("section",{id:"executives"},m.exports.createElement("h4",null,"Executives"),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"members-list"},h.map(D=>D===null?m.exports.createElement(m.exports.Fragment,null):(console.log(D),m.exports.createElement(nn,{to:`/user/${D.id}`,key:D.id},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:D.gravatar_url,alt:`${D.username}'s profile picture`})),m.exports.createElement("div",{className:"member-text"},`${D.first_name} ${D.last_name}`))))))),m.exports.createElement("section",{id:"members"},m.exports.createElement("h4",null,"Members"),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"members-list"},g.map(D=>D===null?m.exports.createElement(m.exports.Fragment,null):m.exports.createElement("a",{href:`/user/${D.id}`,key:D.id},m.exports.createElement("div",{className:"member"},m.exports.createElement("div",{className:"member-image"},m.exports.createElement("img",{className:"circle",src:D.gravatar_url,alt:`${D.username}'s profile picture`})),m.exports.createElement("div",{className:"member-text"},`${D.first_name} ${D.last_name}`))))))))))))},cQ=()=>{const e=Ii(),{id:t}=ef(),n=m.exports.useContext(Xr),[r,a]=m.exports.useState({}),[u,h]=m.exports.useState(""),[o,g]=m.exports.useState({}),[b,A]=m.exports.useState("");m.exports.useEffect(()=>{const F=`${mr.OBJECT}/organization/retrieve/${t}`;n.getAPI(F,!1).then(N=>{const T=N.data;a(T),g(T)}),A(r.bio)},[]),console.log(`${r.name}'s Bio: ${r.bio}`);const D=F=>{F.preventDefault(),console.log("ogga");const N=`${mr.OBJECT}/organization/single/${r.id}`;n.patchAPI(N,o).then(T=>{console.log(`Successfully changed ${r.name}'s details`),e(`/club/${r.id}`)}).catch(T=>{console.log(`Failed to change ${r.name}'s details`),h("An internal error occured. Please contact an admin to get it fixed.")})},z=F=>{A(F.target.value),console.log(b+" "+r.name)};return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/edit-club.css"}),m.exports.createElement("div",{className:"edit-club"},m.exports.createElement("div",{className:"row"},m.exports.createElement("img",{className:"club-banner responsive-img col s12",src:r.banner,alt:"banner of organization"})),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"white-bg box-center"},m.exports.createElement("div",{className:"row page-title"},m.exports.createElement("h1",null,m.exports.createElement("strong",null,"Edit club details for ",r.name))),m.exports.createElement("form",{onSubmit:D},m.exports.createElement("div",{className:"field"},m.exports.createElement("label",{htmlFor:"edit-club-name-textarea"},"Name:"),m.exports.createElement("div",{className:"row edit-club-name"},m.exports.createElement("input",{type:"text",id:"edit-club-name-textarea",defaultValue:r.name,onChange:z}))),m.exports.createElement("div",{className:"field"},m.exports.createElement("label",{htmlFor:"edit-club-status-dropdown"},"Club Status:"),m.exports.createElement("select",{id:"edit-club-status-dropdown",className:"browser-default"},m.exports.createElement("option",{value:"Open Membership"},"Open Membership"),m.exports.createElement("option",{value:"Accepting Applications"},"Accepting Applications"),m.exports.createElement("option",{value:"Closed Applications"},"Closed Applications"))),m.exports.createElement("div",{className:"field"},m.exports.createElement("label",{htmlFor:"edit-club-bio-textarea"},"Bio:"),m.exports.createElement("div",{className:"row edit-club-bio"},m.exports.createElement("textarea",{id:"edit-club-bio-textarea",defaultValue:r.bio,onChange:z}))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",null,m.exports.createElement("button",{type:"submit",className:"btn"},"Submit"),m.exports.createElement("a",{href:`/club/${r.id}`,className:"btn"},"Cancel"))))))))},uQ=()=>{const{id:e}=ef();Ii();const t=m.exports.useContext(Xr),[n,r]=m.exports.useState({}),[a,u]=m.exports.useState({}),[h,o]=m.exports.useState([]);return m.exports.useState([]),m.exports.useState([]),m.exports.useEffect(()=>{const g=`${mr.OBJECT}/blog-post/retrieve/${e}`;t.getAPI(g).then(b=>{const A=b.data;r(A),t.getAPI(`${mr.USER}/${A.author}`).then(D=>{u(D.data)}).catch(()=>{t.refreshAuth()}),t.getAPI(`${mr.OBJECT}/tag`).then(D=>{const z=D.data.results,F=[];for(let N=0;N<A.tags.length;N++)for(let T=0;T<z.length;T++)if(A.tags[N]===z[T].id){F.push(z[T]);break}o(F)}).catch(()=>{t.refreshAuth()})}).catch(b=>{t.refreshAuth()})},[]),a?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/blog-detail.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement("div",{className:"card-container"},m.exports.createElement("img",{className:"card-image",src:n.featured_image}),m.exports.createElement("div",{className:"tag-section"},m.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ffcced"}},"test tag"),m.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ccffe1"}},"test tag 2")),m.exports.createElement("h1",{className:"title"},n.title),m.exports.createElement("div",{className:"card-authors"},m.exports.createElement("div",{className:"card-authors-image"},m.exports.createElement(nn,{to:`/user/${n.author}`},m.exports.createElement("img",{className:"circle",src:a.gravatar_url}))),m.exports.createElement("div",{className:"card-authors-text"},m.exports.createElement(nn,{to:`/user/${n.author}`,className:"link"},`${a.first_name} ${a.last_name}`),m.exports.createElement("br",null),"\u2022 ",new Date(n.created_date).toLocaleTimeString(void 0,R0))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"card-body"},m.exports.createElement(sT,{text:n.body})),m.exports.createElement("br",null),m.exports.createElement(nn,{className:"link",to:"/blog"},m.exports.createElement("i",{className:"zmdi zmdi-chevron-left"})," Return to Blog Posts")))):m.exports.createElement(m.exports.Fragment,null)},dQ=()=>{const{id:e}=ef(),[t,n]=m.exports.useState({body:""}),r=m.exports.useContext(Xr),a=Ii();m.exports.useState(!0);const[u,h]=m.exports.useState({}),[o,g]=m.exports.useState({});m.exports.useEffect(()=>{r.getAPI(`${mr.OBJECT}/announcement/retrieve/${e}`,!1).then(F=>{n(F.data)}).catch(F=>{console.log(F),r.refreshAuth()})},[]),m.exports.useEffect(()=>{console.log("ORGANIZATIONS UPDATED:",r.allOrgs),h(r.allOrgs.find(F=>F.id===t.organization))},[r.allOrgs,t]),m.exports.useEffect(()=>{console.log("USERS UPDATED:",r.allUsers);let F=r.allUsers.find(N=>N.id===t.author);console.log("Looking for:",t),console.log("Author found:",F),g(F)},[r.allUsers,t]);const b=F=>$3.map(N=>{const T=N.id===F?"header header-active":"header";return m.exports.createElement("li",{key:N.id,className:T,onClick:()=>a(`/announcements?feed=${N.id}`)},N.text)}),A=F=>m.exports.createElement("div",{className:"prompt"},m.exports.createElement("div",{className:"prompt-text"},m.exports.createElement("p",{id:"approvaltop"},"The following announcement is awaiting your approval."),m.exports.createElement("h5",{id:"approvalbot"},"Approve Announcement?")),m.exports.createElement("div",{className:"prompt-buttons"},m.exports.createElement("a",{className:"checkmark",onClick:N=>{r.putAPI(`${mr.OBJECT}/announcement/single/${e}`,{...t,status:"a"}).then(T=>{console.log("Success!")}).catch(T=>{})}},m.exports.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"}},m.exports.createElement("i",{className:"material-icons"},"check"))),m.exports.createElement("a",{className:"reject",onClick:N=>{M.Modal.getInstance(document.getElementById("reject-popup")).open()}},m.exports.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"}},m.exports.createElement("i",{className:"material-icons",style:{color:"red"}},"clear"))))),[D,z]=m.exports.useState("");return console.log("Debug:",u,o),u&&o&&"name"in u&&"username"in o?m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/announcement-detail.css"}),m.exports.createElement("div",{className:"container"},r.user.is_staff&&m.exports.createElement(A,null),m.exports.createElement("div",{id:"reject-popup",className:"modal reject-modal"},m.exports.createElement("div",{className:"modal-top modal-header"},m.exports.createElement("h5",{className:"header-announcement"},"Add Announcement")),m.exports.createElement("div",{className:"modal-content"},m.exports.createElement("div",{className:"form reason"},m.exports.createElement("h6",{className:"form-label"},"Reason for rejection:"),m.exports.createElement("input",{type:"text",onChange:F=>z(F.target.value)}))),m.exports.createElement("div",{className:"modal-footer"},m.exports.createElement("a",{href:"#!",className:"modal-close waves-effect waves-red btn-flat"},"Cancel"),m.exports.createElement("a",{className:"waves-effect waves-light btn",onClick:F=>{r.putAPI(`${mr.OBJECT}/announcement/single/${e}`,{...t,status:"r",rejection_reason:D}).then(N=>{console.log("Success!"),M.Modal.getInstance(document.getElementById("reject-popup")).close()}).catch(N=>{})}},"Submit!"))),m.exports.createElement("div",{className:"headers"},m.exports.createElement("ul",null,b(""))),m.exports.createElement("div",{className:"card-container"},m.exports.createElement("div",{className:"admin"},m.exports.createElement("a",{className:"link",href:`/admin/core/announcement/${e}/change/`},"Edit")),m.exports.createElement("div",{className:"tag-section"},m.exports.createElement("p",{className:"tag",style:{backgroundColor:"#f9ccff"}},"cultural & community"),m.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ffccd0"}},"school")),m.exports.createElement("h1",{className:"title"},t.title),m.exports.createElement("div",{className:"card-authors"},m.exports.createElement("div",{className:"card-authors-image"},m.exports.createElement(nn,{to:`/club/${t.organization}`},m.exports.createElement("img",{className:"circle",src:u&&u.banner}))),m.exports.createElement("div",{className:"card-authors-text"},m.exports.createElement("a",{href:`/club/${t.organization}`,className:"link"},u.name),",",m.exports.createElement("a",{href:`/user/${t.author}`,className:"link"},`${o.first_name} ${o.last_name}`),m.exports.createElement("br",null),"\u2022 ",new Date(t.created_date).toLocaleTimeString(void 0,R0))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"card-body"},!!t.body&&m.exports.createElement(sT,{text:t.body})),m.exports.createElement("br",null),m.exports.createElement(nn,{className:"link",to:"/announcements"},m.exports.createElement("i",{className:"zmdi zmdi-chevron-left"})," Return to Announcements")))):m.exports.createElement(m.exports.Fragment,null)},hQ=()=>{const e=Ii(),t=m.exports.useContext(Xr),r=D0().get("next");return m.exports.useEffect(()=>{document.title="Logout | Metropolis",t.logout(),t.notify("Successfully logged out. See you later!","success"),e(r||"/")}),m.exports.createElement(m.exports.Fragment,null)},pQ={black:"#000",white:"#fff"};var Yg=pQ;const fQ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var Yh=fQ;const mQ={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var Jh=mQ;const gQ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var Qh=gQ;const vQ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var ep=vQ;const yQ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var tp=yQ;const _Q={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var qm=_Q;const xQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var bQ=xQ;function vd(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function v5(e){if(!vd(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=v5(e[n])}),t}function ns(e,t,n={clone:!0}){const r=n.clone?Ve({},e):e;return vd(e)&&vd(t)&&Object.keys(t).forEach(a=>{a!=="__proto__"&&(vd(t[a])&&a in e&&vd(e[a])?r[a]=ns(e[a],t[a],n):n.clone?r[a]=vd(t[a])?v5(t[a]):t[a]:r[a]=t[a])}),r}function su(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function _n(e){if(typeof e!="string")throw new Error(su(7));return e.charAt(0).toUpperCase()+e.slice(1)}function FD(...e){return e.reduce((t,n)=>n==null?t:function(...a){t.apply(this,a),n.apply(this,a)},()=>{})}function y5(e,t=166){let n;function r(...a){const u=()=>{e.apply(this,a)};clearTimeout(n),n=setTimeout(u,t)}return r.clear=()=>{clearTimeout(n)},r}function uE(e,t){return m.exports.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function vo(e){return e&&e.ownerDocument||document}function Bd(e){return vo(e).defaultView||window}function e0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const wQ=typeof window!="undefined"?m.exports.useLayoutEffect:m.exports.useEffect;var Kl=wQ;let ND=0;function EQ(e){const[t,n]=m.exports.useState(e),r=e||t;return m.exports.useEffect(()=>{t==null&&(ND+=1,n(`mui-${ND}`))},[t]),r}const UD=kE["useId"];function _5(e){if(UD!==void 0){const t=UD();return e!=null?e:t}return EQ(e)}function xg({controlled:e,default:t,name:n,state:r="value"}){const{current:a}=m.exports.useRef(e!==void 0),[u,h]=m.exports.useState(t),o=a?e:u,g=m.exports.useCallback(b=>{a||h(b)},[]);return[o,g]}function Pa(e){const t=m.exports.useRef(e);return Kl(()=>{t.current=e}),m.exports.useCallback((...n)=>(0,t.current)(...n),[])}function io(...e){return m.exports.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{e0(n,t)})},e)}let ib=!0,tS=!1,jD;const CQ={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function SQ(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&CQ[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function kQ(e){e.metaKey||e.altKey||e.ctrlKey||(ib=!0)}function dE(){ib=!1}function TQ(){this.visibilityState==="hidden"&&tS&&(ib=!0)}function AQ(e){e.addEventListener("keydown",kQ,!0),e.addEventListener("mousedown",dE,!0),e.addEventListener("pointerdown",dE,!0),e.addEventListener("touchstart",dE,!0),e.addEventListener("visibilitychange",TQ,!0)}function MQ(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return ib||SQ(t)}function IQ(){const e=m.exports.useCallback(a=>{a!=null&&AQ(a.ownerDocument)},[]),t=m.exports.useRef(!1);function n(){return t.current?(tS=!0,window.clearTimeout(jD),jD=window.setTimeout(()=>{tS=!1},100),t.current=!1,!0):!1}function r(a){return MQ(a)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}function x5(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const PQ=e=>{const t=m.exports.useRef({});return m.exports.useEffect(()=>{t.current=e}),t.current};var DQ=PQ;function b5(e,t){const n=Ve({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=Ve({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const a=e[r]||{},u=t[r];n[r]={},!u||!Object.keys(u)?n[r]=a:!a||!Object.keys(a)?n[r]=u:(n[r]=Ve({},u),Object.keys(a).forEach(h=>{n[r][h]=b5(a[h],u[h])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function ei(e,t,n=void 0){const r={};return Object.keys(e).forEach(a=>{r[a]=e[a].reduce((u,h)=>{if(h){const o=t(h);o!==""&&u.push(o),n&&n[h]&&u.push(n[h])}return u},[]).join(" ")}),r}const $D=e=>e,RQ=()=>{let e=$D;return{configure(t){e=t},generate(t){return e(t)},reset(){e=$D}}},LQ=RQ();var w5=LQ;const OQ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function Yr(e,t,n="Mui"){const r=OQ[t];return r?`${n}-${r}`:`${w5.generate(e)}-${t}`}function Ir(e,t,n="Mui"){const r={};return t.forEach(a=>{r[a]=Yr(e,a,n)}),r}function Mn(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,u;for(u=0;u<r.length;u++)a=r[u],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function E5(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var zQ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,BQ=E5(function(e){return zQ.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function FQ(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function NQ(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var UQ=function(){function e(n){var r=this;this._insertTag=function(a){var u;r.tags.length===0?r.insertionPoint?u=r.insertionPoint.nextSibling:r.prepend?u=r.container.firstChild:u=r.before:u=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,u),r.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(NQ(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var u=FQ(a);try{u.insertRule(r,u.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Uo="-ms-",t0="-moz-",Br="-webkit-",C5="comm",lT="rule",cT="decl",jQ="@import",S5="@keyframes",$Q=Math.abs,ob=String.fromCharCode,VQ=Object.assign;function HQ(e,t){return Co(e,0)^45?(((t<<2^Co(e,0))<<2^Co(e,1))<<2^Co(e,2))<<2^Co(e,3):0}function k5(e){return e.trim()}function WQ(e,t){return(e=t.exec(e))?e[0]:e}function Hr(e,t,n){return e.replace(t,n)}function nS(e,t){return e.indexOf(t)}function Co(e,t){return e.charCodeAt(t)|0}function Jg(e,t,n){return e.slice(t,n)}function ol(e){return e.length}function uT(e){return e.length}function P_(e,t){return t.push(e),e}function GQ(e,t){return e.map(t).join("")}var ab=1,Hp=1,T5=0,_a=0,Gi=0,cf="";function sb(e,t,n,r,a,u,h){return{value:e,root:t,parent:n,type:r,props:a,children:u,line:ab,column:Hp,length:h,return:""}}function Zm(e,t){return VQ(sb("",null,null,"",null,null,0),e,{length:-e.length},t)}function qQ(){return Gi}function ZQ(){return Gi=_a>0?Co(cf,--_a):0,Hp--,Gi===10&&(Hp=1,ab--),Gi}function La(){return Gi=_a<T5?Co(cf,_a++):0,Hp++,Gi===10&&(Hp=1,ab++),Gi}function hl(){return Co(cf,_a)}function ix(){return _a}function xv(e,t){return Jg(cf,e,t)}function Qg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A5(e){return ab=Hp=1,T5=ol(cf=e),_a=0,[]}function M5(e){return cf="",e}function ox(e){return k5(xv(_a-1,rS(e===91?e+2:e===40?e+1:e)))}function XQ(e){for(;(Gi=hl())&&Gi<33;)La();return Qg(e)>2||Qg(Gi)>3?"":" "}function KQ(e,t){for(;--t&&La()&&!(Gi<48||Gi>102||Gi>57&&Gi<65||Gi>70&&Gi<97););return xv(e,ix()+(t<6&&hl()==32&&La()==32))}function rS(e){for(;La();)switch(Gi){case e:return _a;case 34:case 39:e!==34&&e!==39&&rS(Gi);break;case 40:e===41&&rS(e);break;case 92:La();break}return _a}function YQ(e,t){for(;La()&&e+Gi!==47+10;)if(e+Gi===42+42&&hl()===47)break;return"/*"+xv(t,_a-1)+"*"+ob(e===47?e:La())}function JQ(e){for(;!Qg(hl());)La();return xv(e,_a)}function QQ(e){return M5(ax("",null,null,null,[""],e=A5(e),0,[0],e))}function ax(e,t,n,r,a,u,h,o,g){for(var b=0,A=0,D=h,z=0,F=0,N=0,T=1,H=1,j=1,W=0,B="",O=a,S=u,w=r,P=B;H;)switch(N=W,W=La()){case 40:if(N!=108&&Co(P,D-1)==58){nS(P+=Hr(ox(W),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:P+=ox(W);break;case 9:case 10:case 13:case 32:P+=XQ(N);break;case 92:P+=KQ(ix()-1,7);continue;case 47:switch(hl()){case 42:case 47:P_(eee(YQ(La(),ix()),t,n),g);break;default:P+="/"}break;case 123*T:o[b++]=ol(P)*j;case 125*T:case 59:case 0:switch(W){case 0:case 125:H=0;case 59+A:F>0&&ol(P)-D&&P_(F>32?HD(P+";",r,n,D-1):HD(Hr(P," ","")+";",r,n,D-2),g);break;case 59:P+=";";default:if(P_(w=VD(P,t,n,b,A,a,o,B,O=[],S=[],D),u),W===123)if(A===0)ax(P,t,w,w,O,u,D,o,S);else switch(z===99&&Co(P,3)===110?100:z){case 100:case 109:case 115:ax(e,w,w,r&&P_(VD(e,w,w,0,0,a,o,B,a,O=[],D),S),a,S,D,o,r?O:S);break;default:ax(P,w,w,w,[""],S,0,o,S)}}b=A=F=0,T=j=1,B=P="",D=h;break;case 58:D=1+ol(P),F=N;default:if(T<1){if(W==123)--T;else if(W==125&&T++==0&&ZQ()==125)continue}switch(P+=ob(W),W*T){case 38:j=A>0?1:(P+="\f",-1);break;case 44:o[b++]=(ol(P)-1)*j,j=1;break;case 64:hl()===45&&(P+=ox(La())),z=hl(),A=D=ol(B=P+=JQ(ix())),W++;break;case 45:N===45&&ol(P)==2&&(T=0)}}return u}function VD(e,t,n,r,a,u,h,o,g,b,A){for(var D=a-1,z=a===0?u:[""],F=uT(z),N=0,T=0,H=0;N<r;++N)for(var j=0,W=Jg(e,D+1,D=$Q(T=h[N])),B=e;j<F;++j)(B=k5(T>0?z[j]+" "+W:Hr(W,/&\f/g,z[j])))&&(g[H++]=B);return sb(e,t,n,a===0?lT:o,g,b,A)}function eee(e,t,n){return sb(e,t,n,C5,ob(qQ()),Jg(e,2,-2),0)}function HD(e,t,n,r){return sb(e,t,n,cT,Jg(e,0,r),Jg(e,r+1,-1),r)}function Pp(e,t){for(var n="",r=uT(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function tee(e,t,n,r){switch(e.type){case jQ:case cT:return e.return=e.return||e.value;case C5:return"";case S5:return e.return=e.value+"{"+Pp(e.children,r)+"}";case lT:e.value=e.props.join(",")}return ol(n=Pp(e.children,r))?e.return=e.value+"{"+n+"}":""}function nee(e){var t=uT(e);return function(n,r,a,u){for(var h="",o=0;o<t;o++)h+=e[o](n,r,a,u)||"";return h}}function ree(e){return function(t){t.root||(t=t.return)&&e(t)}}var iee=function(t,n,r){for(var a=0,u=0;a=u,u=hl(),a===38&&u===12&&(n[r]=1),!Qg(u);)La();return xv(t,_a)},oee=function(t,n){var r=-1,a=44;do switch(Qg(a)){case 0:a===38&&hl()===12&&(n[r]=1),t[r]+=iee(_a-1,n,r);break;case 2:t[r]+=ox(a);break;case 4:if(a===44){t[++r]=hl()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=ob(a)}while(a=La());return t},aee=function(t,n){return M5(oee(A5(t),n))},WD=new WeakMap,see=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,a=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!WD.get(r))&&!a){WD.set(t,!0);for(var u=[],h=aee(n,u),o=r.props,g=0,b=0;g<h.length;g++)for(var A=0;A<o.length;A++,b++)t.props[b]=u[g]?h[g].replace(/&\f/g,o[A]):o[A]+" "+h[g]}}},lee=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function I5(e,t){switch(HQ(e,t)){case 5103:return Br+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Br+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Br+e+t0+e+Uo+e+e;case 6828:case 4268:return Br+e+Uo+e+e;case 6165:return Br+e+Uo+"flex-"+e+e;case 5187:return Br+e+Hr(e,/(\w+).+(:[^]+)/,Br+"box-$1$2"+Uo+"flex-$1$2")+e;case 5443:return Br+e+Uo+"flex-item-"+Hr(e,/flex-|-self/,"")+e;case 4675:return Br+e+Uo+"flex-line-pack"+Hr(e,/align-content|flex-|-self/,"")+e;case 5548:return Br+e+Uo+Hr(e,"shrink","negative")+e;case 5292:return Br+e+Uo+Hr(e,"basis","preferred-size")+e;case 6060:return Br+"box-"+Hr(e,"-grow","")+Br+e+Uo+Hr(e,"grow","positive")+e;case 4554:return Br+Hr(e,/([^-])(transform)/g,"$1"+Br+"$2")+e;case 6187:return Hr(Hr(Hr(e,/(zoom-|grab)/,Br+"$1"),/(image-set)/,Br+"$1"),e,"")+e;case 5495:case 3959:return Hr(e,/(image-set\([^]*)/,Br+"$1$`$1");case 4968:return Hr(Hr(e,/(.+:)(flex-)?(.*)/,Br+"box-pack:$3"+Uo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Br+e+e;case 4095:case 3583:case 4068:case 2532:return Hr(e,/(.+)-inline(.+)/,Br+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ol(e)-1-t>6)switch(Co(e,t+1)){case 109:if(Co(e,t+4)!==45)break;case 102:return Hr(e,/(.+:)(.+)-([^]+)/,"$1"+Br+"$2-$3$1"+t0+(Co(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~nS(e,"stretch")?I5(Hr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Co(e,t+1)!==115)break;case 6444:switch(Co(e,ol(e)-3-(~nS(e,"!important")&&10))){case 107:return Hr(e,":",":"+Br)+e;case 101:return Hr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Br+(Co(e,14)===45?"inline-":"")+"box$3$1"+Br+"$2$3$1"+Uo+"$2box$3")+e}break;case 5936:switch(Co(e,t+11)){case 114:return Br+e+Uo+Hr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Br+e+Uo+Hr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Br+e+Uo+Hr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Br+e+Uo+e+e}return e}var cee=function(t,n,r,a){if(t.length>-1&&!t.return)switch(t.type){case cT:t.return=I5(t.value,t.length);break;case S5:return Pp([Zm(t,{value:Hr(t.value,"@","@"+Br)})],a);case lT:if(t.length)return GQ(t.props,function(u){switch(WQ(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Pp([Zm(t,{props:[Hr(u,/:(read-\w+)/,":"+t0+"$1")]})],a);case"::placeholder":return Pp([Zm(t,{props:[Hr(u,/:(plac\w+)/,":"+Br+"input-$1")]}),Zm(t,{props:[Hr(u,/:(plac\w+)/,":"+t0+"$1")]}),Zm(t,{props:[Hr(u,/:(plac\w+)/,Uo+"input-$1")]})],a)}return""})}},uee=[cee],dee=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(T){var H=T.getAttribute("data-emotion");H.indexOf(" ")!==-1&&(document.head.appendChild(T),T.setAttribute("data-s",""))})}var a=t.stylisPlugins||uee,u={},h,o=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(T){for(var H=T.getAttribute("data-emotion").split(" "),j=1;j<H.length;j++)u[H[j]]=!0;o.push(T)});var g,b=[see,lee];{var A,D=[tee,ree(function(T){A.insert(T)})],z=nee(b.concat(a,D)),F=function(H){return Pp(QQ(H),z)};g=function(H,j,W,B){A=W,F(H?H+"{"+j.styles+"}":j.styles),B&&(N.inserted[j.name]=!0)}}var N={key:n,sheet:new UQ({key:n,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:g};return N.sheet.hydrate(o),N},P5={exports:{}},Jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=typeof Symbol=="function"&&Symbol.for,dT=yo?Symbol.for("react.element"):60103,hT=yo?Symbol.for("react.portal"):60106,lb=yo?Symbol.for("react.fragment"):60107,cb=yo?Symbol.for("react.strict_mode"):60108,ub=yo?Symbol.for("react.profiler"):60114,db=yo?Symbol.for("react.provider"):60109,hb=yo?Symbol.for("react.context"):60110,pT=yo?Symbol.for("react.async_mode"):60111,pb=yo?Symbol.for("react.concurrent_mode"):60111,fb=yo?Symbol.for("react.forward_ref"):60112,mb=yo?Symbol.for("react.suspense"):60113,hee=yo?Symbol.for("react.suspense_list"):60120,gb=yo?Symbol.for("react.memo"):60115,vb=yo?Symbol.for("react.lazy"):60116,pee=yo?Symbol.for("react.block"):60121,fee=yo?Symbol.for("react.fundamental"):60117,mee=yo?Symbol.for("react.responder"):60118,gee=yo?Symbol.for("react.scope"):60119;function Na(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case dT:switch(e=e.type,e){case pT:case pb:case lb:case ub:case cb:case mb:return e;default:switch(e=e&&e.$$typeof,e){case hb:case fb:case vb:case gb:case db:return e;default:return t}}case hT:return t}}}function D5(e){return Na(e)===pb}Jr.AsyncMode=pT;Jr.ConcurrentMode=pb;Jr.ContextConsumer=hb;Jr.ContextProvider=db;Jr.Element=dT;Jr.ForwardRef=fb;Jr.Fragment=lb;Jr.Lazy=vb;Jr.Memo=gb;Jr.Portal=hT;Jr.Profiler=ub;Jr.StrictMode=cb;Jr.Suspense=mb;Jr.isAsyncMode=function(e){return D5(e)||Na(e)===pT};Jr.isConcurrentMode=D5;Jr.isContextConsumer=function(e){return Na(e)===hb};Jr.isContextProvider=function(e){return Na(e)===db};Jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===dT};Jr.isForwardRef=function(e){return Na(e)===fb};Jr.isFragment=function(e){return Na(e)===lb};Jr.isLazy=function(e){return Na(e)===vb};Jr.isMemo=function(e){return Na(e)===gb};Jr.isPortal=function(e){return Na(e)===hT};Jr.isProfiler=function(e){return Na(e)===ub};Jr.isStrictMode=function(e){return Na(e)===cb};Jr.isSuspense=function(e){return Na(e)===mb};Jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===lb||e===pb||e===ub||e===cb||e===mb||e===hee||typeof e=="object"&&e!==null&&(e.$$typeof===vb||e.$$typeof===gb||e.$$typeof===db||e.$$typeof===hb||e.$$typeof===fb||e.$$typeof===fee||e.$$typeof===mee||e.$$typeof===gee||e.$$typeof===pee)};Jr.typeOf=Na;P5.exports=Jr;var R5=P5.exports,vee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},L5={};L5[R5.ForwardRef]=vee;L5[R5.Memo]=yee;var _ee=!0;function xee(e,t,n){var r="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):r+=a+" "}),r}var O5=function(t,n,r){var a=t.key+"-"+n.name;(r===!1||_ee===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},z5=function(t,n,r){O5(t,n,r);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var u=n;do t.insert(n===u?"."+a:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function bee(e){for(var t=0,n,r=0,a=e.length;a>=4;++r,a-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var wee={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Eee=/[A-Z]|^ms/g,Cee=/_EMO_([^_]+?)_([^]*?)_EMO_/g,B5=function(t){return t.charCodeAt(1)===45},GD=function(t){return t!=null&&typeof t!="boolean"},hE=E5(function(e){return B5(e)?e:e.replace(Eee,"-$&").toLowerCase()}),qD=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Cee,function(r,a,u){return al={name:a,styles:u,next:al},a})}return wee[t]!==1&&!B5(t)&&typeof n=="number"&&n!==0?n+"px":n};function ev(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return al={name:n.name,styles:n.styles,next:al},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)al={name:r.name,styles:r.styles,next:al},r=r.next;var a=n.styles+";";return a}return See(e,t,n)}case"function":{if(e!==void 0){var u=al,h=n(e);return al=u,ev(e,t,h)}break}}if(t==null)return n;var o=t[n];return o!==void 0?o:n}function See(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=ev(e,t,n[a])+";";else for(var u in n){var h=n[u];if(typeof h!="object")t!=null&&t[h]!==void 0?r+=u+"{"+t[h]+"}":GD(h)&&(r+=hE(u)+":"+qD(u,h)+";");else if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var o=0;o<h.length;o++)GD(h[o])&&(r+=hE(u)+":"+qD(u,h[o])+";");else{var g=ev(e,t,h);switch(u){case"animation":case"animationName":{r+=hE(u)+":"+g+";";break}default:r+=u+"{"+g+"}"}}}return r}var ZD=/label:\s*([^\s;\n{]+)\s*(;|$)/g,al,fT=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,u="";al=void 0;var h=t[0];h==null||h.raw===void 0?(a=!1,u+=ev(r,n,h)):u+=h[0];for(var o=1;o<t.length;o++)u+=ev(r,n,t[o]),a&&(u+=h[o]);ZD.lastIndex=0;for(var g="",b;(b=ZD.exec(u))!==null;)g+="-"+b[1];var A=bee(u)+g;return{name:A,styles:u,next:al}},kee=function(t){return t()},F5=kE["useInsertionEffect"]?kE["useInsertionEffect"]:!1,Tee=F5||kee,XD=F5||m.exports.useLayoutEffect,N5=m.exports.createContext(typeof HTMLElement!="undefined"?dee({key:"css"}):null);N5.Provider;var U5=function(t){return m.exports.forwardRef(function(n,r){var a=m.exports.useContext(N5);return t(n,a,r)})},j5=m.exports.createContext({}),Aee=U5(function(e,t){var n=e.styles,r=fT([n],void 0,m.exports.useContext(j5)),a=m.exports.useRef();return XD(function(){var u=t.key+"-global",h=new t.sheet.constructor({key:u,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,g=document.querySelector('style[data-emotion="'+u+" "+r.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(o=!0,g.setAttribute("data-emotion",u),h.hydrate([g])),a.current=[h,o],function(){h.flush()}},[t]),XD(function(){var u=a.current,h=u[0],o=u[1];if(o){u[1]=!1;return}if(r.next!==void 0&&z5(t,r.next,!0),h.tags.length){var g=h.tags[h.tags.length-1].nextElementSibling;h.before=g,h.flush()}t.insert("",r,h,!1)},[t,r.name]),null});function Mee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fT(t)}var mT=function(){var t=Mee.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Iee=BQ,Pee=function(t){return t!=="theme"},KD=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Iee:Pee},YD=function(t,n,r){var a;if(n){var u=n.shouldForwardProp;a=t.__emotion_forwardProp&&u?function(h){return t.__emotion_forwardProp(h)&&u(h)}:u}return typeof a!="function"&&r&&(a=t.__emotion_forwardProp),a},Dee=function(t){var n=t.cache,r=t.serialized,a=t.isStringTag;return O5(n,r,a),Tee(function(){return z5(n,r,a)}),null},Ree=function e(t,n){var r=t.__emotion_real===t,a=r&&t.__emotion_base||t,u,h;n!==void 0&&(u=n.label,h=n.target);var o=YD(t,n,r),g=o||KD(a),b=!g("as");return function(){var A=arguments,D=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(u!==void 0&&D.push("label:"+u+";"),A[0]==null||A[0].raw===void 0)D.push.apply(D,A);else{D.push(A[0][0]);for(var z=A.length,F=1;F<z;F++)D.push(A[F],A[0][F])}var N=U5(function(T,H,j){var W=b&&T.as||a,B="",O=[],S=T;if(T.theme==null){S={};for(var w in T)S[w]=T[w];S.theme=m.exports.useContext(j5)}typeof T.className=="string"?B=xee(H.registered,O,T.className):T.className!=null&&(B=T.className+" ");var P=fT(D.concat(O),H.registered,S);B+=H.key+"-"+P.name,h!==void 0&&(B+=" "+h);var Y=b&&o===void 0?KD(W):g,ne={};for(var ae in T)b&&ae==="as"||Y(ae)&&(ne[ae]=T[ae]);return ne.className=B,ne.ref=j,m.exports.createElement(m.exports.Fragment,null,m.exports.createElement(Dee,{cache:H,serialized:P,isStringTag:typeof W=="string"}),m.exports.createElement(W,ne))});return N.displayName=u!==void 0?u:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=a,N.__emotion_styles=D,N.__emotion_forwardProp=o,Object.defineProperty(N,"toString",{value:function(){return"."+h}}),N.withComponent=function(T,H){return e(T,Ve({},n,H,{shouldForwardProp:YD(N,H,!0)})).apply(void 0,D)},N}},Lee=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],iS=Ree.bind();Lee.forEach(function(e){iS[e]=iS(e)});var Oee=iS,At={exports:{}},yb={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zee=m.exports,Bee=Symbol.for("react.element"),Fee=Symbol.for("react.fragment"),Nee=Object.prototype.hasOwnProperty,Uee=zee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jee={key:!0,ref:!0,__self:!0,__source:!0};function $5(e,t,n){var r,a={},u=null,h=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(h=t.ref);for(r in t)Nee.call(t,r)&&!jee.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Bee,type:e,key:u,ref:h,props:a,_owner:Uee.current}}yb.Fragment=Fee;yb.jsx=$5;yb.jsxs=$5;At.exports=yb;function $ee(e){return e==null||Object.keys(e).length===0}function Vee(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?a=>t($ee(a)?n:a):t;return At.exports.jsx(Aee,{styles:r})}/**
 * @mui/styled-engine v5.11.11
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function V5(e,t){return Oee(e,t)}const Hee=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function bg(e,t){return t?ns(e,t,{clone:!1}):e}const gT={xs:0,sm:600,md:900,lg:1200,xl:1536},JD={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${gT[e]}px)`};function ml(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const u=r.breakpoints||JD;return t.reduce((h,o,g)=>(h[u.up(u.keys[g])]=n(t[g]),h),{})}if(typeof t=="object"){const u=r.breakpoints||JD;return Object.keys(t).reduce((h,o)=>{if(Object.keys(u.values||gT).indexOf(o)!==-1){const g=u.up(o);h[g]=n(t[o],o)}else{const g=o;h[g]=t[g]}return h},{})}return n(t)}function Wee(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,a)=>{const u=e.up(a);return r[u]={},r},{}))||{}}function Gee(e,t){return e.reduce((n,r)=>{const a=n[r];return(!a||Object.keys(a).length===0)&&delete n[r],n},t)}function _b(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((a,u)=>a&&a[u]?a[u]:null,e);if(r!=null)return r}return t.split(".").reduce((r,a)=>r&&r[a]!=null?r[a]:null,e)}function n0(e,t,n,r=n){let a;return typeof e=="function"?a=e(n):Array.isArray(e)?a=e[n]||r:a=_b(e,n)||r,t&&(a=t(a,r,e)),a}function Wr(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:a}=e,u=h=>{if(h[t]==null)return null;const o=h[t],g=h.theme,b=_b(g,r)||{};return ml(h,o,D=>{let z=n0(b,a,D);return D===z&&typeof D=="string"&&(z=n0(b,a,`${t}${D==="default"?"":_n(D)}`,D)),n===!1?z:{[n]:z}})};return u.propTypes={},u.filterProps=[t],u}function xb(...e){const t=e.reduce((r,a)=>(a.filterProps.forEach(u=>{r[u]=a}),r),{}),n=r=>Object.keys(r).reduce((a,u)=>t[u]?bg(a,t[u](r)):a,{});return n.propTypes={},n.filterProps=e.reduce((r,a)=>r.concat(a.filterProps),[]),n}function qee(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Zee={m:"margin",p:"padding"},Xee={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},QD={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Kee=qee(e=>{if(e.length>2)if(QD[e])e=QD[e];else return[e];const[t,n]=e.split(""),r=Zee[t],a=Xee[n]||"";return Array.isArray(a)?a.map(u=>r+u):[r+a]}),vT=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],yT=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...vT,...yT];function bv(e,t,n,r){var a;const u=(a=_b(e,t,!1))!=null?a:n;return typeof u=="number"?h=>typeof h=="string"?h:u*h:Array.isArray(u)?h=>typeof h=="string"?h:u[h]:typeof u=="function"?u:()=>{}}function H5(e){return bv(e,"spacing",8)}function wv(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function Yee(e,t){return n=>e.reduce((r,a)=>(r[a]=wv(t,n),r),{})}function Jee(e,t,n,r){if(t.indexOf(n)===-1)return null;const a=Kee(n),u=Yee(a,r),h=e[n];return ml(e,h,u)}function W5(e,t){const n=H5(e.theme);return Object.keys(e).map(r=>Jee(e,t,r,n)).reduce(bg,{})}function Ri(e){return W5(e,vT)}Ri.propTypes={};Ri.filterProps=vT;function Li(e){return W5(e,yT)}Li.propTypes={};Li.filterProps=yT;function ll(e){return typeof e!="number"?e:`${e}px solid`}const Qee=Wr({prop:"border",themeKey:"borders",transform:ll}),ete=Wr({prop:"borderTop",themeKey:"borders",transform:ll}),tte=Wr({prop:"borderRight",themeKey:"borders",transform:ll}),nte=Wr({prop:"borderBottom",themeKey:"borders",transform:ll}),rte=Wr({prop:"borderLeft",themeKey:"borders",transform:ll}),ite=Wr({prop:"borderColor",themeKey:"palette"}),ote=Wr({prop:"borderTopColor",themeKey:"palette"}),ate=Wr({prop:"borderRightColor",themeKey:"palette"}),ste=Wr({prop:"borderBottomColor",themeKey:"palette"}),lte=Wr({prop:"borderLeftColor",themeKey:"palette"}),bb=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=bv(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:wv(t,r)});return ml(e,e.borderRadius,n)}return null};bb.propTypes={};bb.filterProps=["borderRadius"];xb(Qee,ete,tte,nte,rte,ite,ote,ate,ste,lte,bb);const wb=e=>{if(e.gap!==void 0&&e.gap!==null){const t=bv(e.theme,"spacing",8),n=r=>({gap:wv(t,r)});return ml(e,e.gap,n)}return null};wb.propTypes={};wb.filterProps=["gap"];const Eb=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=bv(e.theme,"spacing",8),n=r=>({columnGap:wv(t,r)});return ml(e,e.columnGap,n)}return null};Eb.propTypes={};Eb.filterProps=["columnGap"];const Cb=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=bv(e.theme,"spacing",8),n=r=>({rowGap:wv(t,r)});return ml(e,e.rowGap,n)}return null};Cb.propTypes={};Cb.filterProps=["rowGap"];const cte=Wr({prop:"gridColumn"}),ute=Wr({prop:"gridRow"}),dte=Wr({prop:"gridAutoFlow"}),hte=Wr({prop:"gridAutoColumns"}),pte=Wr({prop:"gridAutoRows"}),fte=Wr({prop:"gridTemplateColumns"}),mte=Wr({prop:"gridTemplateRows"}),gte=Wr({prop:"gridTemplateAreas"}),vte=Wr({prop:"gridArea"});xb(wb,Eb,Cb,cte,ute,dte,hte,pte,fte,mte,gte,vte);function Dp(e,t){return t==="grey"?t:e}const yte=Wr({prop:"color",themeKey:"palette",transform:Dp}),_te=Wr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Dp}),xte=Wr({prop:"backgroundColor",themeKey:"palette",transform:Dp});xb(yte,_te,xte);function Ma(e){return e<=1&&e!==0?`${e*100}%`:e}const bte=Wr({prop:"width",transform:Ma}),_T=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,a,u;return{maxWidth:((r=e.theme)==null||(a=r.breakpoints)==null||(u=a.values)==null?void 0:u[n])||gT[n]||Ma(n)}};return ml(e,e.maxWidth,t)}return null};_T.filterProps=["maxWidth"];const wte=Wr({prop:"minWidth",transform:Ma}),Ete=Wr({prop:"height",transform:Ma}),Cte=Wr({prop:"maxHeight",transform:Ma}),Ste=Wr({prop:"minHeight",transform:Ma});Wr({prop:"size",cssProperty:"width",transform:Ma});Wr({prop:"size",cssProperty:"height",transform:Ma});const kte=Wr({prop:"boxSizing"});xb(bte,_T,wte,Ete,Cte,Ste,kte);const pE=e=>t=>{if(t[e]!==void 0&&t[e]!==null){const n=r=>{var a,u;let h=(a=t.theme.typography)==null?void 0:a[`${e}${t[e]==="default"||t[e]===e?"":_n((u=t[e])==null?void 0:u.toString())}`];if(!h){var o,g;h=(o=t.theme.typography)==null||(g=o[r])==null?void 0:g[e]}return h||(h=r),{[e]:h}};return ml(t,t[e],n)}return null},Tte={border:{themeKey:"borders",transform:ll},borderTop:{themeKey:"borders",transform:ll},borderRight:{themeKey:"borders",transform:ll},borderBottom:{themeKey:"borders",transform:ll},borderLeft:{themeKey:"borders",transform:ll},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:bb},color:{themeKey:"palette",transform:Dp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Dp},backgroundColor:{themeKey:"palette",transform:Dp},p:{style:Li},pt:{style:Li},pr:{style:Li},pb:{style:Li},pl:{style:Li},px:{style:Li},py:{style:Li},padding:{style:Li},paddingTop:{style:Li},paddingRight:{style:Li},paddingBottom:{style:Li},paddingLeft:{style:Li},paddingX:{style:Li},paddingY:{style:Li},paddingInline:{style:Li},paddingInlineStart:{style:Li},paddingInlineEnd:{style:Li},paddingBlock:{style:Li},paddingBlockStart:{style:Li},paddingBlockEnd:{style:Li},m:{style:Ri},mt:{style:Ri},mr:{style:Ri},mb:{style:Ri},ml:{style:Ri},mx:{style:Ri},my:{style:Ri},margin:{style:Ri},marginTop:{style:Ri},marginRight:{style:Ri},marginBottom:{style:Ri},marginLeft:{style:Ri},marginX:{style:Ri},marginY:{style:Ri},marginInline:{style:Ri},marginInlineStart:{style:Ri},marginInlineEnd:{style:Ri},marginBlock:{style:Ri},marginBlockStart:{style:Ri},marginBlockEnd:{style:Ri},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:wb},rowGap:{style:Cb},columnGap:{style:Eb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ma},maxWidth:{style:_T},minWidth:{transform:Ma},height:{transform:Ma},maxHeight:{transform:Ma},minHeight:{transform:Ma},boxSizing:{},fontFamily:{themeKey:"typography",style:pE("fontFamily")},fontSize:{themeKey:"typography",style:pE("fontSize")},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography",style:pE("fontWeight")},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};var Sb=Tte;function Ate(...e){const t=e.reduce((r,a)=>r.concat(Object.keys(a)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function Mte(e,t){return typeof e=="function"?e(t):e}function Ite(){function e(n,r,a,u){const h={[n]:r,theme:a},o=u[n];if(!o)return{[n]:r};const{cssProperty:g=n,themeKey:b,transform:A,style:D}=o;if(r==null)return null;const z=_b(a,b)||{};return D?D(h):ml(h,r,N=>{let T=n0(z,A,N);return N===T&&typeof N=="string"&&(T=n0(z,A,`${n}${N==="default"?"":_n(N)}`,N)),g===!1?T:{[g]:T}})}function t(n){var r;const{sx:a,theme:u={}}=n||{};if(!a)return null;const h=(r=u.unstable_sxConfig)!=null?r:Sb;function o(g){let b=g;if(typeof g=="function")b=g(u);else if(typeof g!="object")return g;if(!b)return null;const A=Wee(u.breakpoints),D=Object.keys(A);let z=A;return Object.keys(b).forEach(F=>{const N=Mte(b[F],u);if(N!=null)if(typeof N=="object")if(h[F])z=bg(z,e(F,N,u,h));else{const T=ml({theme:u},N,H=>({[F]:H}));Ate(T,N)?z[F]=t({sx:N,theme:u}):z=bg(z,T)}else z=bg(z,e(F,N,u,h))}),Gee(D,z)}return Array.isArray(a)?a.map(o):o(a)}return t}const G5=Ite();G5.filterProps=["sx"];var kb=G5;const Pte=["sx"],Dte=e=>{var t,n;const r={systemProps:{},otherProps:{}},a=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Sb;return Object.keys(e).forEach(u=>{a[u]?r.systemProps[u]=e[u]:r.otherProps[u]=e[u]}),r};function Rte(e){const{sx:t}=e,n=Mn(e,Pte),{systemProps:r,otherProps:a}=Dte(n);let u;return Array.isArray(t)?u=[r,...t]:typeof t=="function"?u=(...h)=>{const o=t(...h);return vd(o)?Ve({},r,o):r}:u=Ve({},r,t),Ve({},a,{sx:u})}function q5(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=q5(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function Nn(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=q5(e))&&(r&&(r+=" "),r+=t);return r}const Lte=["values","unit","step"],Ote=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>Ve({},n,{[r.key]:r.val}),{})};function zte(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,a=Mn(e,Lte),u=Ote(t),h=Object.keys(u);function o(z){return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${n})`}function g(z){return`@media (max-width:${(typeof t[z]=="number"?t[z]:z)-r/100}${n})`}function b(z,F){const N=h.indexOf(F);return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${n}) and (max-width:${(N!==-1&&typeof t[h[N]]=="number"?t[h[N]]:F)-r/100}${n})`}function A(z){return h.indexOf(z)+1<h.length?b(z,h[h.indexOf(z)+1]):o(z)}function D(z){const F=h.indexOf(z);return F===0?o(h[1]):F===h.length-1?g(h[F]):b(z,h[h.indexOf(z)+1]).replace("@media","@media not all and")}return Ve({keys:h,values:u,up:o,down:g,between:b,only:A,not:D,unit:n},a)}const Bte={borderRadius:4};var Fte=Bte;function Nte(e=8){if(e.mui)return e;const t=H5({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(u=>{const h=t(u);return typeof h=="number"?`${h}px`:h}).join(" ");return n.mui=!0,n}const Ute=["breakpoints","palette","spacing","shape"];function xT(e={},...t){const{breakpoints:n={},palette:r={},spacing:a,shape:u={}}=e,h=Mn(e,Ute),o=zte(n),g=Nte(a);let b=ns({breakpoints:o,direction:"ltr",components:{},palette:Ve({mode:"light"},r),spacing:g,shape:Ve({},Fte,u)},h);return b=t.reduce((A,D)=>ns(A,D),b),b.unstable_sxConfig=Ve({},Sb,h==null?void 0:h.unstable_sxConfig),b.unstable_sx=function(D){return kb({sx:D,theme:this})},b}const jte=m.exports.createContext(null);var $te=jte;function Vte(){return m.exports.useContext($te)}function Hte(e){return Object.keys(e).length===0}function Z5(e=null){const t=Vte();return!t||Hte(t)?e:t}const Wte=xT();function bT(e=Wte){return Z5(e)}const Gte=["className","component"];function qte(e={}){const{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:r}=e,a=V5("div",{shouldForwardProp:h=>h!=="theme"&&h!=="sx"&&h!=="as"})(kb);return m.exports.forwardRef(function(o,g){const b=bT(t),A=Rte(o),{className:D,component:z="div"}=A,F=Mn(A,Gte);return At.exports.jsx(a,Ve({as:z,ref:g,className:Nn(D,r?r(n):n),theme:b},F))})}const Zte=["variant"];function eR(e){return e.length===0}function X5(e){const{variant:t}=e,n=Mn(e,Zte);let r=t||"";return Object.keys(n).sort().forEach(a=>{a==="color"?r+=eR(r)?e[a]:_n(e[a]):r+=`${eR(r)?a:_n(a)}${_n(e[a].toString())}`}),r}const Xte=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Kte=["theme"],Yte=["theme"];function Xm(e){return Object.keys(e).length===0}function Jte(e){return typeof e=="string"&&e.charCodeAt(0)>96}const Qte=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,ene=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach(a=>{const u=X5(a.props);r[u]=a.style}),r},tne=(e,t,n,r)=>{var a,u;const{ownerState:h={}}=e,o=[],g=n==null||(a=n.components)==null||(u=a[r])==null?void 0:u.variants;return g&&g.forEach(b=>{let A=!0;Object.keys(b.props).forEach(D=>{h[D]!==b.props[D]&&e[D]!==b.props[D]&&(A=!1)}),A&&o.push(t[X5(b.props)])}),o};function wg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const nne=xT();function rne(e={}){const{defaultTheme:t=nne,rootShouldForwardProp:n=wg,slotShouldForwardProp:r=wg}=e,a=u=>{const h=Xm(u.theme)?t:u.theme;return kb(Ve({},u,{theme:h}))};return a.__mui_systemSx=!0,(u,h={})=>{Hee(u,B=>B.filter(O=>!(O!=null&&O.__mui_systemSx)));const{name:o,slot:g,skipVariantsResolver:b,skipSx:A,overridesResolver:D}=h,z=Mn(h,Xte),F=b!==void 0?b:g&&g!=="Root"||!1,N=A||!1;let T,H=wg;g==="Root"?H=n:g?H=r:Jte(u)&&(H=void 0);const j=V5(u,Ve({shouldForwardProp:H,label:T},z)),W=(B,...O)=>{const S=O?O.map(ne=>typeof ne=="function"&&ne.__emotion_real!==ne?ae=>{let{theme:oe}=ae,fe=Mn(ae,Kte);return ne(Ve({theme:Xm(oe)?t:oe},fe))}:ne):[];let w=B;o&&D&&S.push(ne=>{const ae=Xm(ne.theme)?t:ne.theme,oe=Qte(o,ae);if(oe){const fe={};return Object.entries(oe).forEach(([Re,Be])=>{fe[Re]=typeof Be=="function"?Be(Ve({},ne,{theme:ae})):Be}),D(ne,fe)}return null}),o&&!F&&S.push(ne=>{const ae=Xm(ne.theme)?t:ne.theme;return tne(ne,ene(o,ae),ae,o)}),N||S.push(a);const P=S.length-O.length;if(Array.isArray(B)&&P>0){const ne=new Array(P).fill("");w=[...B,...ne],w.raw=[...B.raw,...ne]}else typeof B=="function"&&B.__emotion_real!==B&&(w=ne=>{let{theme:ae}=ne,oe=Mn(ne,Yte);return B(Ve({theme:Xm(ae)?t:ae},oe))});return j(w,...S)};return j.withConfig&&(W.withConfig=j.withConfig),W}}function ine(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:b5(t.components[n].defaultProps,r)}function one({props:e,name:t,defaultTheme:n}){const r=bT(n);return ine({theme:r,name:t,props:e})}function wT(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function ane(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,a)=>a<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Fd(e){if(e.type)return e;if(e.charAt(0)==="#")return Fd(ane(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(su(9,e));let r=e.substring(t+1,e.length-1),a;if(n==="color"){if(r=r.split(" "),a=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a)===-1)throw new Error(su(10,a))}else r=r.split(",");return r=r.map(u=>parseFloat(u)),{type:n,values:r,colorSpace:a}}function Tb(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((a,u)=>u<3?parseInt(a,10):a):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function sne(e){e=Fd(e);const{values:t}=e,n=t[0],r=t[1]/100,a=t[2]/100,u=r*Math.min(a,1-a),h=(b,A=(b+n/30)%12)=>a-u*Math.max(Math.min(A-3,9-A,1),-1);let o="rgb";const g=[Math.round(h(0)*255),Math.round(h(8)*255),Math.round(h(4)*255)];return e.type==="hsla"&&(o+="a",g.push(t[3])),Tb({type:o,values:g})}function oS(e){e=Fd(e);let t=e.type==="hsl"||e.type==="hsla"?Fd(sne(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function lne(e,t){const n=oS(e),r=oS(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function ji(e,t){return e=Fd(e),t=wT(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Tb(e)}function r0(e,t){if(e=Fd(e),t=wT(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Tb(e)}function i0(e,t){if(e=Fd(e),t=wT(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Tb(e)}function cne(e,t=.15){return oS(e)>.5?r0(e,t):i0(e,t)}function une(e,t){return Ve({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const dne=["mode","contrastThreshold","tonalOffset"],tR={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Yg.white,default:Yg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},fE={text:{primary:Yg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Yg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function nR(e,t,n,r){const a=r.light||r,u=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=i0(e.main,a):t==="dark"&&(e.dark=r0(e.main,u)))}function hne(e="light"){return e==="dark"?{main:Qh[200],light:Qh[50],dark:Qh[400]}:{main:Qh[700],light:Qh[400],dark:Qh[800]}}function pne(e="light"){return e==="dark"?{main:Jh[200],light:Jh[50],dark:Jh[400]}:{main:Jh[500],light:Jh[300],dark:Jh[700]}}function fne(e="light"){return e==="dark"?{main:Yh[500],light:Yh[300],dark:Yh[700]}:{main:Yh[700],light:Yh[400],dark:Yh[800]}}function mne(e="light"){return e==="dark"?{main:ep[400],light:ep[300],dark:ep[700]}:{main:ep[700],light:ep[500],dark:ep[900]}}function gne(e="light"){return e==="dark"?{main:tp[400],light:tp[300],dark:tp[700]}:{main:tp[800],light:tp[500],dark:tp[900]}}function vne(e="light"){return e==="dark"?{main:qm[400],light:qm[300],dark:qm[700]}:{main:"#ed6c02",light:qm[500],dark:qm[900]}}function yne(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,a=Mn(e,dne),u=e.primary||hne(t),h=e.secondary||pne(t),o=e.error||fne(t),g=e.info||mne(t),b=e.success||gne(t),A=e.warning||vne(t);function D(T){return lne(T,fE.text.primary)>=n?fE.text.primary:tR.text.primary}const z=({color:T,name:H,mainShade:j=500,lightShade:W=300,darkShade:B=700})=>{if(T=Ve({},T),!T.main&&T[j]&&(T.main=T[j]),!T.hasOwnProperty("main"))throw new Error(su(11,H?` (${H})`:"",j));if(typeof T.main!="string")throw new Error(su(12,H?` (${H})`:"",JSON.stringify(T.main)));return nR(T,"light",W,r),nR(T,"dark",B,r),T.contrastText||(T.contrastText=D(T.main)),T},F={dark:fE,light:tR};return ns(Ve({common:Ve({},Yg),mode:t,primary:z({color:u,name:"primary"}),secondary:z({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:z({color:o,name:"error"}),warning:z({color:A,name:"warning"}),info:z({color:g,name:"info"}),success:z({color:b,name:"success"}),grey:bQ,contrastThreshold:n,getContrastText:D,augmentColor:z,tonalOffset:r},F[t]),a)}const _ne=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function xne(e){return Math.round(e*1e5)/1e5}const rR={textTransform:"uppercase"},iR='"Roboto", "Helvetica", "Arial", sans-serif';function bne(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=iR,fontSize:a=14,fontWeightLight:u=300,fontWeightRegular:h=400,fontWeightMedium:o=500,fontWeightBold:g=700,htmlFontSize:b=16,allVariants:A,pxToRem:D}=n,z=Mn(n,_ne),F=a/14,N=D||(j=>`${j/b*F}rem`),T=(j,W,B,O,S)=>Ve({fontFamily:r,fontWeight:j,fontSize:N(W),lineHeight:B},r===iR?{letterSpacing:`${xne(O/W)}em`}:{},S,A),H={h1:T(u,96,1.167,-1.5),h2:T(u,60,1.2,-.5),h3:T(h,48,1.167,0),h4:T(h,34,1.235,.25),h5:T(h,24,1.334,0),h6:T(o,20,1.6,.15),subtitle1:T(h,16,1.75,.15),subtitle2:T(o,14,1.57,.1),body1:T(h,16,1.5,.15),body2:T(h,14,1.43,.15),button:T(o,14,1.75,.4,rR),caption:T(h,12,1.66,.4),overline:T(h,12,2.66,1,rR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ns(Ve({htmlFontSize:b,pxToRem:N,fontFamily:r,fontSize:a,fontWeightLight:u,fontWeightRegular:h,fontWeightMedium:o,fontWeightBold:g},H),z,{clone:!1})}const wne=.2,Ene=.14,Cne=.12;function gi(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${wne})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Ene})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Cne})`].join(",")}const Sne=["none",gi(0,2,1,-1,0,1,1,0,0,1,3,0),gi(0,3,1,-2,0,2,2,0,0,1,5,0),gi(0,3,3,-2,0,3,4,0,0,1,8,0),gi(0,2,4,-1,0,4,5,0,0,1,10,0),gi(0,3,5,-1,0,5,8,0,0,1,14,0),gi(0,3,5,-1,0,6,10,0,0,1,18,0),gi(0,4,5,-2,0,7,10,1,0,2,16,1),gi(0,5,5,-3,0,8,10,1,0,3,14,2),gi(0,5,6,-3,0,9,12,1,0,3,16,2),gi(0,6,6,-3,0,10,14,1,0,4,18,3),gi(0,6,7,-4,0,11,15,1,0,4,20,3),gi(0,7,8,-4,0,12,17,2,0,5,22,4),gi(0,7,8,-4,0,13,19,2,0,5,24,4),gi(0,7,9,-4,0,14,21,2,0,5,26,4),gi(0,8,9,-5,0,15,22,2,0,6,28,5),gi(0,8,10,-5,0,16,24,2,0,6,30,5),gi(0,8,11,-5,0,17,26,2,0,6,32,5),gi(0,9,11,-5,0,18,28,2,0,7,34,6),gi(0,9,12,-6,0,19,29,2,0,7,36,6),gi(0,10,13,-6,0,20,31,3,0,8,38,7),gi(0,10,13,-6,0,21,33,3,0,8,40,7),gi(0,10,14,-6,0,22,35,3,0,8,42,7),gi(0,11,14,-7,0,23,36,3,0,9,44,8),gi(0,11,15,-7,0,24,38,3,0,9,46,8)];var kne=Sne;const Tne=["duration","easing","delay"],Ane={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Mne={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function oR(e){return`${Math.round(e)}ms`}function Ine(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Pne(e){const t=Ve({},Ane,e.easing),n=Ve({},Mne,e.duration);return Ve({getAutoHeightDuration:Ine,create:(a=["all"],u={})=>{const{duration:h=n.standard,easing:o=t.easeInOut,delay:g=0}=u;return Mn(u,Tne),(Array.isArray(a)?a:[a]).map(b=>`${b} ${typeof h=="string"?h:oR(h)} ${o} ${typeof g=="string"?g:oR(g)}`).join(",")}},e,{easing:t,duration:n})}const Dne={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var Rne=Dne;const Lne=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function K5(e={},...t){const{mixins:n={},palette:r={},transitions:a={},typography:u={}}=e,h=Mn(e,Lne);if(e.vars)throw new Error(su(18));const o=yne(r),g=xT(e);let b=ns(g,{mixins:une(g.breakpoints,n),palette:o,shadows:kne.slice(),typography:bne(o,u),transitions:Pne(a),zIndex:Ve({},Rne)});return b=ns(b,h),b=t.reduce((A,D)=>ns(A,D),b),b.unstable_sxConfig=Ve({},Sb,h==null?void 0:h.unstable_sxConfig),b.unstable_sx=function(D){return kb({sx:D,theme:this})},b}const One=K5();var Ab=One;function Mb(){return bT(Ab)}function ti({props:e,name:t}){return one({props:e,name:t,defaultTheme:Ab})}const nc=e=>wg(e)&&e!=="classes",zne=wg,Bne=rne({defaultTheme:Ab,rootShouldForwardProp:nc});var xn=Bne;const Fne=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var aR=Fne;function o0(e){return typeof e=="string"}function Nne(e,t,n){return e===void 0||o0(e)?t:Ve({},t,{ownerState:Ve({},t.ownerState,n)})}const Une={disableDefaultClasses:!1},jne=m.exports.createContext(Une);function Y5(e){const{disableDefaultClasses:t}=m.exports.useContext(jne);return n=>t?"":e(n)}function J5(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function aS(e,t){return typeof e=="function"?e(t):e}function sR(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function $ne(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:a,className:u}=e;if(!t){const F=Nn(a==null?void 0:a.className,r==null?void 0:r.className,u,n==null?void 0:n.className),N=Ve({},n==null?void 0:n.style,a==null?void 0:a.style,r==null?void 0:r.style),T=Ve({},n,a,r);return F.length>0&&(T.className=F),Object.keys(N).length>0&&(T.style=N),{props:T,internalRef:void 0}}const h=J5(Ve({},a,r)),o=sR(r),g=sR(a),b=t(h),A=Nn(b==null?void 0:b.className,n==null?void 0:n.className,u,a==null?void 0:a.className,r==null?void 0:r.className),D=Ve({},b==null?void 0:b.style,n==null?void 0:n.style,a==null?void 0:a.style,r==null?void 0:r.style),z=Ve({},b,n,g,o);return A.length>0&&(z.className=A),Object.keys(D).length>0&&(z.style=D),{props:z,internalRef:b.ref}}const Vne=["elementType","externalSlotProps","ownerState"];function a0(e){var t;const{elementType:n,externalSlotProps:r,ownerState:a}=e,u=Mn(e,Vne),h=aS(r,a),{props:o,internalRef:g}=$ne(Ve({},u,{externalSlotProps:h})),b=io(g,h==null?void 0:h.ref,(t=e.additionalProps)==null?void 0:t.ref);return Nne(n,Ve({},o,{ref:b}),a)}function lR(e){return e.substring(2).toLowerCase()}function Hne(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Wne(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:a,touchEvent:u="onTouchEnd"}=e,h=m.exports.useRef(!1),o=m.exports.useRef(null),g=m.exports.useRef(!1),b=m.exports.useRef(!1);m.exports.useEffect(()=>(setTimeout(()=>{g.current=!0},0),()=>{g.current=!1}),[]);const A=io(t.ref,o),D=Pa(N=>{const T=b.current;b.current=!1;const H=vo(o.current);if(!g.current||!o.current||"clientX"in N&&Hne(N,H))return;if(h.current){h.current=!1;return}let j;N.composedPath?j=N.composedPath().indexOf(o.current)>-1:j=!H.documentElement.contains(N.target)||o.current.contains(N.target),!j&&(n||!T)&&a(N)}),z=N=>T=>{b.current=!0;const H=t.props[N];H&&H(T)},F={ref:A};return u!==!1&&(F[u]=z(u)),m.exports.useEffect(()=>{if(u!==!1){const N=lR(u),T=vo(o.current),H=()=>{h.current=!0};return T.addEventListener(N,D),T.addEventListener("touchmove",H),()=>{T.removeEventListener(N,D),T.removeEventListener("touchmove",H)}}},[D,u]),r!==!1&&(F[r]=z(r)),m.exports.useEffect(()=>{if(r!==!1){const N=lR(r),T=vo(o.current);return T.addEventListener(N,D),()=>{T.removeEventListener(N,D)}}},[D,r]),At.exports.jsx(m.exports.Fragment,{children:m.exports.cloneElement(t,F)})}const Gne=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function qne(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Zne(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function Xne(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Zne(e))}function Kne(e){const t=[],n=[];return Array.from(e.querySelectorAll(Gne)).forEach((r,a)=>{const u=qne(r);u===-1||!Xne(r)||(u===0?t.push(r):n.push({documentOrder:a,tabIndex:u,node:r}))}),n.sort((r,a)=>r.tabIndex===a.tabIndex?r.documentOrder-a.documentOrder:r.tabIndex-a.tabIndex).map(r=>r.node).concat(t)}function Yne(){return!0}function Jne(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:a=!1,getTabbable:u=Kne,isEnabled:h=Yne,open:o}=e,g=m.exports.useRef(!1),b=m.exports.useRef(null),A=m.exports.useRef(null),D=m.exports.useRef(null),z=m.exports.useRef(null),F=m.exports.useRef(!1),N=m.exports.useRef(null),T=io(t.ref,N),H=m.exports.useRef(null);m.exports.useEffect(()=>{!o||!N.current||(F.current=!n)},[n,o]),m.exports.useEffect(()=>{if(!o||!N.current)return;const B=vo(N.current);return N.current.contains(B.activeElement)||(N.current.hasAttribute("tabIndex")||N.current.setAttribute("tabIndex","-1"),F.current&&N.current.focus()),()=>{a||(D.current&&D.current.focus&&(g.current=!0,D.current.focus()),D.current=null)}},[o]),m.exports.useEffect(()=>{if(!o||!N.current)return;const B=vo(N.current),O=P=>{const{current:Y}=N;if(Y!==null){if(!B.hasFocus()||r||!h()||g.current){g.current=!1;return}if(!Y.contains(B.activeElement)){if(P&&z.current!==P.target||B.activeElement!==z.current)z.current=null;else if(z.current!==null)return;if(!F.current)return;let oe=[];if((B.activeElement===b.current||B.activeElement===A.current)&&(oe=u(N.current)),oe.length>0){var ne,ae;const fe=Boolean(((ne=H.current)==null?void 0:ne.shiftKey)&&((ae=H.current)==null?void 0:ae.key)==="Tab"),Re=oe[0],Be=oe[oe.length-1];typeof Re!="string"&&typeof Be!="string"&&(fe?Be.focus():Re.focus())}else Y.focus()}}},S=P=>{H.current=P,!(r||!h()||P.key!=="Tab")&&B.activeElement===N.current&&P.shiftKey&&(g.current=!0,A.current&&A.current.focus())};B.addEventListener("focusin",O),B.addEventListener("keydown",S,!0);const w=setInterval(()=>{B.activeElement&&B.activeElement.tagName==="BODY"&&O(null)},50);return()=>{clearInterval(w),B.removeEventListener("focusin",O),B.removeEventListener("keydown",S,!0)}},[n,r,a,h,o,u]);const j=B=>{D.current===null&&(D.current=B.relatedTarget),F.current=!0,z.current=B.target;const O=t.props.onFocus;O&&O(B)},W=B=>{D.current===null&&(D.current=B.relatedTarget),F.current=!0};return At.exports.jsxs(m.exports.Fragment,{children:[At.exports.jsx("div",{tabIndex:o?0:-1,onFocus:W,ref:b,"data-testid":"sentinelStart"}),m.exports.cloneElement(t,{ref:T,onFocus:j}),At.exports.jsx("div",{tabIndex:o?0:-1,onFocus:W,ref:A,"data-testid":"sentinelEnd"})]})}var va="top",ss="bottom",ls="right",ya="left",ET="auto",Ev=[va,ss,ls,ya],Wp="start",tv="end",Qne="clippingParents",Q5="viewport",Km="popper",ere="reference",cR=Ev.reduce(function(e,t){return e.concat([t+"-"+Wp,t+"-"+tv])},[]),eB=[].concat(Ev,[ET]).reduce(function(e,t){return e.concat([t,t+"-"+Wp,t+"-"+tv])},[]),tre="beforeRead",nre="read",rre="afterRead",ire="beforeMain",ore="main",are="afterMain",sre="beforeWrite",lre="write",cre="afterWrite",ure=[tre,nre,rre,ire,ore,are,sre,lre,cre];function gl(e){return e?(e.nodeName||"").toLowerCase():null}function hs(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Nd(e){var t=hs(e).Element;return e instanceof t||e instanceof Element}function rs(e){var t=hs(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function CT(e){if(typeof ShadowRoot=="undefined")return!1;var t=hs(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function dre(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},a=t.attributes[n]||{},u=t.elements[n];!rs(u)||!gl(u)||(Object.assign(u.style,r),Object.keys(a).forEach(function(h){var o=a[h];o===!1?u.removeAttribute(h):u.setAttribute(h,o===!0?"":o)}))})}function hre(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var a=t.elements[r],u=t.attributes[r]||{},h=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),o=h.reduce(function(g,b){return g[b]="",g},{});!rs(a)||!gl(a)||(Object.assign(a.style,o),Object.keys(u).forEach(function(g){a.removeAttribute(g)}))})}}var pre={name:"applyStyles",enabled:!0,phase:"write",fn:dre,effect:hre,requires:["computeStyles"]};function pl(e){return e.split("-")[0]}var Ad=Math.max,s0=Math.min,Gp=Math.round;function sS(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tB(){return!/^((?!chrome|android).)*safari/i.test(sS())}function qp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),a=1,u=1;t&&rs(e)&&(a=e.offsetWidth>0&&Gp(r.width)/e.offsetWidth||1,u=e.offsetHeight>0&&Gp(r.height)/e.offsetHeight||1);var h=Nd(e)?hs(e):window,o=h.visualViewport,g=!tB()&&n,b=(r.left+(g&&o?o.offsetLeft:0))/a,A=(r.top+(g&&o?o.offsetTop:0))/u,D=r.width/a,z=r.height/u;return{width:D,height:z,top:A,right:b+D,bottom:A+z,left:b,x:b,y:A}}function ST(e){var t=qp(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function nB(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&CT(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Yl(e){return hs(e).getComputedStyle(e)}function fre(e){return["table","td","th"].indexOf(gl(e))>=0}function gu(e){return((Nd(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ib(e){return gl(e)==="html"?e:e.assignedSlot||e.parentNode||(CT(e)?e.host:null)||gu(e)}function uR(e){return!rs(e)||Yl(e).position==="fixed"?null:e.offsetParent}function mre(e){var t=/firefox/i.test(sS()),n=/Trident/i.test(sS());if(n&&rs(e)){var r=Yl(e);if(r.position==="fixed")return null}var a=Ib(e);for(CT(a)&&(a=a.host);rs(a)&&["html","body"].indexOf(gl(a))<0;){var u=Yl(a);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||t&&u.willChange==="filter"||t&&u.filter&&u.filter!=="none")return a;a=a.parentNode}return null}function Cv(e){for(var t=hs(e),n=uR(e);n&&fre(n)&&Yl(n).position==="static";)n=uR(n);return n&&(gl(n)==="html"||gl(n)==="body"&&Yl(n).position==="static")?t:n||mre(e)||t}function kT(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Eg(e,t,n){return Ad(e,s0(t,n))}function gre(e,t,n){var r=Eg(e,t,n);return r>n?n:r}function rB(){return{top:0,right:0,bottom:0,left:0}}function iB(e){return Object.assign({},rB(),e)}function oB(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var vre=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,iB(typeof t!="number"?t:oB(t,Ev))};function yre(e){var t,n=e.state,r=e.name,a=e.options,u=n.elements.arrow,h=n.modifiersData.popperOffsets,o=pl(n.placement),g=kT(o),b=[ya,ls].indexOf(o)>=0,A=b?"height":"width";if(!(!u||!h)){var D=vre(a.padding,n),z=ST(u),F=g==="y"?va:ya,N=g==="y"?ss:ls,T=n.rects.reference[A]+n.rects.reference[g]-h[g]-n.rects.popper[A],H=h[g]-n.rects.reference[g],j=Cv(u),W=j?g==="y"?j.clientHeight||0:j.clientWidth||0:0,B=T/2-H/2,O=D[F],S=W-z[A]-D[N],w=W/2-z[A]/2+B,P=Eg(O,w,S),Y=g;n.modifiersData[r]=(t={},t[Y]=P,t.centerOffset=P-w,t)}}function _re(e){var t=e.state,n=e.options,r=n.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||!nB(t.elements.popper,a)||(t.elements.arrow=a))}var xre={name:"arrow",enabled:!0,phase:"main",fn:yre,effect:_re,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zp(e){return e.split("-")[1]}var bre={top:"auto",right:"auto",bottom:"auto",left:"auto"};function wre(e){var t=e.x,n=e.y,r=window,a=r.devicePixelRatio||1;return{x:Gp(t*a)/a||0,y:Gp(n*a)/a||0}}function dR(e){var t,n=e.popper,r=e.popperRect,a=e.placement,u=e.variation,h=e.offsets,o=e.position,g=e.gpuAcceleration,b=e.adaptive,A=e.roundOffsets,D=e.isFixed,z=h.x,F=z===void 0?0:z,N=h.y,T=N===void 0?0:N,H=typeof A=="function"?A({x:F,y:T}):{x:F,y:T};F=H.x,T=H.y;var j=h.hasOwnProperty("x"),W=h.hasOwnProperty("y"),B=ya,O=va,S=window;if(b){var w=Cv(n),P="clientHeight",Y="clientWidth";if(w===hs(n)&&(w=gu(n),Yl(w).position!=="static"&&o==="absolute"&&(P="scrollHeight",Y="scrollWidth")),w=w,a===va||(a===ya||a===ls)&&u===tv){O=ss;var ne=D&&w===S&&S.visualViewport?S.visualViewport.height:w[P];T-=ne-r.height,T*=g?1:-1}if(a===ya||(a===va||a===ss)&&u===tv){B=ls;var ae=D&&w===S&&S.visualViewport?S.visualViewport.width:w[Y];F-=ae-r.width,F*=g?1:-1}}var oe=Object.assign({position:o},b&&bre),fe=A===!0?wre({x:F,y:T}):{x:F,y:T};if(F=fe.x,T=fe.y,g){var Re;return Object.assign({},oe,(Re={},Re[O]=W?"0":"",Re[B]=j?"0":"",Re.transform=(S.devicePixelRatio||1)<=1?"translate("+F+"px, "+T+"px)":"translate3d("+F+"px, "+T+"px, 0)",Re))}return Object.assign({},oe,(t={},t[O]=W?T+"px":"",t[B]=j?F+"px":"",t.transform="",t))}function Ere(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=r===void 0?!0:r,u=n.adaptive,h=u===void 0?!0:u,o=n.roundOffsets,g=o===void 0?!0:o,b={placement:pl(t.placement),variation:Zp(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,dR(Object.assign({},b,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:h,roundOffsets:g})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,dR(Object.assign({},b,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:g})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Cre={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Ere,data:{}},D_={passive:!0};function Sre(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,u=a===void 0?!0:a,h=r.resize,o=h===void 0?!0:h,g=hs(t.elements.popper),b=[].concat(t.scrollParents.reference,t.scrollParents.popper);return u&&b.forEach(function(A){A.addEventListener("scroll",n.update,D_)}),o&&g.addEventListener("resize",n.update,D_),function(){u&&b.forEach(function(A){A.removeEventListener("scroll",n.update,D_)}),o&&g.removeEventListener("resize",n.update,D_)}}var kre={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Sre,data:{}},Tre={left:"right",right:"left",bottom:"top",top:"bottom"};function sx(e){return e.replace(/left|right|bottom|top/g,function(t){return Tre[t]})}var Are={start:"end",end:"start"};function hR(e){return e.replace(/start|end/g,function(t){return Are[t]})}function TT(e){var t=hs(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function AT(e){return qp(gu(e)).left+TT(e).scrollLeft}function Mre(e,t){var n=hs(e),r=gu(e),a=n.visualViewport,u=r.clientWidth,h=r.clientHeight,o=0,g=0;if(a){u=a.width,h=a.height;var b=tB();(b||!b&&t==="fixed")&&(o=a.offsetLeft,g=a.offsetTop)}return{width:u,height:h,x:o+AT(e),y:g}}function Ire(e){var t,n=gu(e),r=TT(e),a=(t=e.ownerDocument)==null?void 0:t.body,u=Ad(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),h=Ad(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),o=-r.scrollLeft+AT(e),g=-r.scrollTop;return Yl(a||n).direction==="rtl"&&(o+=Ad(n.clientWidth,a?a.clientWidth:0)-u),{width:u,height:h,x:o,y:g}}function MT(e){var t=Yl(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function aB(e){return["html","body","#document"].indexOf(gl(e))>=0?e.ownerDocument.body:rs(e)&&MT(e)?e:aB(Ib(e))}function Cg(e,t){var n;t===void 0&&(t=[]);var r=aB(e),a=r===((n=e.ownerDocument)==null?void 0:n.body),u=hs(r),h=a?[u].concat(u.visualViewport||[],MT(r)?r:[]):r,o=t.concat(h);return a?o:o.concat(Cg(Ib(h)))}function lS(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Pre(e,t){var n=qp(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function pR(e,t,n){return t===Q5?lS(Mre(e,n)):Nd(t)?Pre(t,n):lS(Ire(gu(e)))}function Dre(e){var t=Cg(Ib(e)),n=["absolute","fixed"].indexOf(Yl(e).position)>=0,r=n&&rs(e)?Cv(e):e;return Nd(r)?t.filter(function(a){return Nd(a)&&nB(a,r)&&gl(a)!=="body"}):[]}function Rre(e,t,n,r){var a=t==="clippingParents"?Dre(e):[].concat(t),u=[].concat(a,[n]),h=u[0],o=u.reduce(function(g,b){var A=pR(e,b,r);return g.top=Ad(A.top,g.top),g.right=s0(A.right,g.right),g.bottom=s0(A.bottom,g.bottom),g.left=Ad(A.left,g.left),g},pR(e,h,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function sB(e){var t=e.reference,n=e.element,r=e.placement,a=r?pl(r):null,u=r?Zp(r):null,h=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2,g;switch(a){case va:g={x:h,y:t.y-n.height};break;case ss:g={x:h,y:t.y+t.height};break;case ls:g={x:t.x+t.width,y:o};break;case ya:g={x:t.x-n.width,y:o};break;default:g={x:t.x,y:t.y}}var b=a?kT(a):null;if(b!=null){var A=b==="y"?"height":"width";switch(u){case Wp:g[b]=g[b]-(t[A]/2-n[A]/2);break;case tv:g[b]=g[b]+(t[A]/2-n[A]/2);break}}return g}function nv(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=r===void 0?e.placement:r,u=n.strategy,h=u===void 0?e.strategy:u,o=n.boundary,g=o===void 0?Qne:o,b=n.rootBoundary,A=b===void 0?Q5:b,D=n.elementContext,z=D===void 0?Km:D,F=n.altBoundary,N=F===void 0?!1:F,T=n.padding,H=T===void 0?0:T,j=iB(typeof H!="number"?H:oB(H,Ev)),W=z===Km?ere:Km,B=e.rects.popper,O=e.elements[N?W:z],S=Rre(Nd(O)?O:O.contextElement||gu(e.elements.popper),g,A,h),w=qp(e.elements.reference),P=sB({reference:w,element:B,strategy:"absolute",placement:a}),Y=lS(Object.assign({},B,P)),ne=z===Km?Y:w,ae={top:S.top-ne.top+j.top,bottom:ne.bottom-S.bottom+j.bottom,left:S.left-ne.left+j.left,right:ne.right-S.right+j.right},oe=e.modifiersData.offset;if(z===Km&&oe){var fe=oe[a];Object.keys(ae).forEach(function(Re){var Be=[ls,ss].indexOf(Re)>=0?1:-1,Oe=[va,ss].indexOf(Re)>=0?"y":"x";ae[Re]+=fe[Oe]*Be})}return ae}function Lre(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=n.boundary,u=n.rootBoundary,h=n.padding,o=n.flipVariations,g=n.allowedAutoPlacements,b=g===void 0?eB:g,A=Zp(r),D=A?o?cR:cR.filter(function(N){return Zp(N)===A}):Ev,z=D.filter(function(N){return b.indexOf(N)>=0});z.length===0&&(z=D);var F=z.reduce(function(N,T){return N[T]=nv(e,{placement:T,boundary:a,rootBoundary:u,padding:h})[pl(T)],N},{});return Object.keys(F).sort(function(N,T){return F[N]-F[T]})}function Ore(e){if(pl(e)===ET)return[];var t=sx(e);return[hR(e),t,hR(t)]}function zre(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,u=a===void 0?!0:a,h=n.altAxis,o=h===void 0?!0:h,g=n.fallbackPlacements,b=n.padding,A=n.boundary,D=n.rootBoundary,z=n.altBoundary,F=n.flipVariations,N=F===void 0?!0:F,T=n.allowedAutoPlacements,H=t.options.placement,j=pl(H),W=j===H,B=g||(W||!N?[sx(H)]:Ore(H)),O=[H].concat(B).reduce(function(Ut,ln){return Ut.concat(pl(ln)===ET?Lre(t,{placement:ln,boundary:A,rootBoundary:D,padding:b,flipVariations:N,allowedAutoPlacements:T}):ln)},[]),S=t.rects.reference,w=t.rects.popper,P=new Map,Y=!0,ne=O[0],ae=0;ae<O.length;ae++){var oe=O[ae],fe=pl(oe),Re=Zp(oe)===Wp,Be=[va,ss].indexOf(fe)>=0,Oe=Be?"width":"height",Ee=nv(t,{placement:oe,boundary:A,rootBoundary:D,altBoundary:z,padding:b}),pt=Be?Re?ls:ya:Re?ss:va;S[Oe]>w[Oe]&&(pt=sx(pt));var Ze=sx(pt),ct=[];if(u&&ct.push(Ee[fe]<=0),o&&ct.push(Ee[pt]<=0,Ee[Ze]<=0),ct.every(function(Ut){return Ut})){ne=oe,Y=!1;break}P.set(oe,ct)}if(Y)for(var nt=N?3:1,xe=function(ln){var tn=O.find(function(un){var mn=P.get(un);if(mn)return mn.slice(0,ln).every(function(fn){return fn})});if(tn)return ne=tn,"break"},be=nt;be>0;be--){var on=xe(be);if(on==="break")break}t.placement!==ne&&(t.modifiersData[r]._skip=!0,t.placement=ne,t.reset=!0)}}var Bre={name:"flip",enabled:!0,phase:"main",fn:zre,requiresIfExists:["offset"],data:{_skip:!1}};function fR(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function mR(e){return[va,ls,ss,ya].some(function(t){return e[t]>=0})}function Fre(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,u=t.modifiersData.preventOverflow,h=nv(t,{elementContext:"reference"}),o=nv(t,{altBoundary:!0}),g=fR(h,r),b=fR(o,a,u),A=mR(g),D=mR(b);t.modifiersData[n]={referenceClippingOffsets:g,popperEscapeOffsets:b,isReferenceHidden:A,hasPopperEscaped:D},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":A,"data-popper-escaped":D})}var Nre={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Fre};function Ure(e,t,n){var r=pl(e),a=[ya,va].indexOf(r)>=0?-1:1,u=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,h=u[0],o=u[1];return h=h||0,o=(o||0)*a,[ya,ls].indexOf(r)>=0?{x:o,y:h}:{x:h,y:o}}function jre(e){var t=e.state,n=e.options,r=e.name,a=n.offset,u=a===void 0?[0,0]:a,h=eB.reduce(function(A,D){return A[D]=Ure(D,t.rects,u),A},{}),o=h[t.placement],g=o.x,b=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=g,t.modifiersData.popperOffsets.y+=b),t.modifiersData[r]=h}var $re={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:jre};function Vre(e){var t=e.state,n=e.name;t.modifiersData[n]=sB({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Hre={name:"popperOffsets",enabled:!0,phase:"read",fn:Vre,data:{}};function Wre(e){return e==="x"?"y":"x"}function Gre(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,u=a===void 0?!0:a,h=n.altAxis,o=h===void 0?!1:h,g=n.boundary,b=n.rootBoundary,A=n.altBoundary,D=n.padding,z=n.tether,F=z===void 0?!0:z,N=n.tetherOffset,T=N===void 0?0:N,H=nv(t,{boundary:g,rootBoundary:b,padding:D,altBoundary:A}),j=pl(t.placement),W=Zp(t.placement),B=!W,O=kT(j),S=Wre(O),w=t.modifiersData.popperOffsets,P=t.rects.reference,Y=t.rects.popper,ne=typeof T=="function"?T(Object.assign({},t.rects,{placement:t.placement})):T,ae=typeof ne=="number"?{mainAxis:ne,altAxis:ne}:Object.assign({mainAxis:0,altAxis:0},ne),oe=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,fe={x:0,y:0};if(!!w){if(u){var Re,Be=O==="y"?va:ya,Oe=O==="y"?ss:ls,Ee=O==="y"?"height":"width",pt=w[O],Ze=pt+H[Be],ct=pt-H[Oe],nt=F?-Y[Ee]/2:0,xe=W===Wp?P[Ee]:Y[Ee],be=W===Wp?-Y[Ee]:-P[Ee],on=t.elements.arrow,Ut=F&&on?ST(on):{width:0,height:0},ln=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:rB(),tn=ln[Be],un=ln[Oe],mn=Eg(0,P[Ee],Ut[Ee]),fn=B?P[Ee]/2-nt-mn-tn-ae.mainAxis:xe-mn-tn-ae.mainAxis,An=B?-P[Ee]/2+nt+mn+un+ae.mainAxis:be+mn+un+ae.mainAxis,Le=t.elements.arrow&&Cv(t.elements.arrow),Xe=Le?O==="y"?Le.clientTop||0:Le.clientLeft||0:0,ft=(Re=oe==null?void 0:oe[O])!=null?Re:0,wt=pt+fn-ft-Xe,_t=pt+An-ft,dt=Eg(F?s0(Ze,wt):Ze,pt,F?Ad(ct,_t):ct);w[O]=dt,fe[O]=dt-pt}if(o){var Pt,yn=O==="x"?va:ya,On=O==="x"?ss:ls,Ln=w[S],In=S==="y"?"height":"width",Xn=Ln+H[yn],Ie=Ln-H[On],Je=[va,ya].indexOf(j)!==-1,re=(Pt=oe==null?void 0:oe[S])!=null?Pt:0,ce=Je?Xn:Ln-P[In]-Y[In]-re+ae.altAxis,Pe=Je?Ln+P[In]+Y[In]-re-ae.altAxis:Ie,ve=F&&Je?gre(ce,Ln,Pe):Eg(F?ce:Xn,Ln,F?Pe:Ie);w[S]=ve,fe[S]=ve-Ln}t.modifiersData[r]=fe}}var qre={name:"preventOverflow",enabled:!0,phase:"main",fn:Gre,requiresIfExists:["offset"]};function Zre(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Xre(e){return e===hs(e)||!rs(e)?TT(e):Zre(e)}function Kre(e){var t=e.getBoundingClientRect(),n=Gp(t.width)/e.offsetWidth||1,r=Gp(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Yre(e,t,n){n===void 0&&(n=!1);var r=rs(t),a=rs(t)&&Kre(t),u=gu(t),h=qp(e,a,n),o={scrollLeft:0,scrollTop:0},g={x:0,y:0};return(r||!r&&!n)&&((gl(t)!=="body"||MT(u))&&(o=Xre(t)),rs(t)?(g=qp(t,!0),g.x+=t.clientLeft,g.y+=t.clientTop):u&&(g.x=AT(u))),{x:h.left+o.scrollLeft-g.x,y:h.top+o.scrollTop-g.y,width:h.width,height:h.height}}function Jre(e){var t=new Map,n=new Set,r=[];e.forEach(function(u){t.set(u.name,u)});function a(u){n.add(u.name);var h=[].concat(u.requires||[],u.requiresIfExists||[]);h.forEach(function(o){if(!n.has(o)){var g=t.get(o);g&&a(g)}}),r.push(u)}return e.forEach(function(u){n.has(u.name)||a(u)}),r}function Qre(e){var t=Jre(e);return ure.reduce(function(n,r){return n.concat(t.filter(function(a){return a.phase===r}))},[])}function eie(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function tie(e){var t=e.reduce(function(n,r){var a=n[r.name];return n[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var gR={placement:"bottom",modifiers:[],strategy:"absolute"};function vR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function nie(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,a=t.defaultOptions,u=a===void 0?gR:a;return function(o,g,b){b===void 0&&(b=u);var A={placement:"bottom",orderedModifiers:[],options:Object.assign({},gR,u),modifiersData:{},elements:{reference:o,popper:g},attributes:{},styles:{}},D=[],z=!1,F={state:A,setOptions:function(j){var W=typeof j=="function"?j(A.options):j;T(),A.options=Object.assign({},u,A.options,W),A.scrollParents={reference:Nd(o)?Cg(o):o.contextElement?Cg(o.contextElement):[],popper:Cg(g)};var B=Qre(tie([].concat(r,A.options.modifiers)));return A.orderedModifiers=B.filter(function(O){return O.enabled}),N(),F.update()},forceUpdate:function(){if(!z){var j=A.elements,W=j.reference,B=j.popper;if(!!vR(W,B)){A.rects={reference:Yre(W,Cv(B),A.options.strategy==="fixed"),popper:ST(B)},A.reset=!1,A.placement=A.options.placement,A.orderedModifiers.forEach(function(ae){return A.modifiersData[ae.name]=Object.assign({},ae.data)});for(var O=0;O<A.orderedModifiers.length;O++){if(A.reset===!0){A.reset=!1,O=-1;continue}var S=A.orderedModifiers[O],w=S.fn,P=S.options,Y=P===void 0?{}:P,ne=S.name;typeof w=="function"&&(A=w({state:A,options:Y,name:ne,instance:F})||A)}}}},update:eie(function(){return new Promise(function(H){F.forceUpdate(),H(A)})}),destroy:function(){T(),z=!0}};if(!vR(o,g))return F;F.setOptions(b).then(function(H){!z&&b.onFirstUpdate&&b.onFirstUpdate(H)});function N(){A.orderedModifiers.forEach(function(H){var j=H.name,W=H.options,B=W===void 0?{}:W,O=H.effect;if(typeof O=="function"){var S=O({state:A,name:j,instance:F,options:B}),w=function(){};D.push(S||w)}})}function T(){D.forEach(function(H){return H()}),D=[]}return F}}var rie=[kre,Hre,Cre,pre,$re,Bre,qre,xre,Nre],iie=nie({defaultModifiers:rie});function oie(e){return typeof e=="function"?e():e}const aie=m.exports.forwardRef(function(t,n){const{children:r,container:a,disablePortal:u=!1}=t,[h,o]=m.exports.useState(null),g=io(m.exports.isValidElement(r)?r.ref:null,n);if(Kl(()=>{u||o(oie(a)||document.body)},[a,u]),Kl(()=>{if(h&&!u)return e0(n,h),()=>{e0(n,null)}},[n,h,u]),u){if(m.exports.isValidElement(r)){const b={ref:g};return m.exports.cloneElement(r,b)}return At.exports.jsx(m.exports.Fragment,{children:r})}return At.exports.jsx(m.exports.Fragment,{children:h&&Zc.exports.createPortal(r,h)})});var lB=aie;function sie(e){return Yr("MuiPopper",e)}Ir("MuiPopper",["root"]);const lie=["anchorEl","children","component","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","slotProps","slots","TransitionProps"],cie=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function uie(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function cS(e){return typeof e=="function"?e():e}function die(e){return e.nodeType!==void 0}const hie=()=>ei({root:["root"]},Y5(sie)),pie={},fie=m.exports.forwardRef(function(t,n){var r;const{anchorEl:a,children:u,component:h,direction:o,disablePortal:g,modifiers:b,open:A,ownerState:D,placement:z,popperOptions:F,popperRef:N,slotProps:T={},slots:H={},TransitionProps:j}=t,W=Mn(t,lie),B=m.exports.useRef(null),O=io(B,n),S=m.exports.useRef(null),w=io(S,N),P=m.exports.useRef(w);Kl(()=>{P.current=w},[w]),m.exports.useImperativeHandle(N,()=>S.current,[]);const Y=uie(z,o),[ne,ae]=m.exports.useState(Y),[oe,fe]=m.exports.useState(cS(a));m.exports.useEffect(()=>{S.current&&S.current.forceUpdate()}),m.exports.useEffect(()=>{a&&fe(cS(a))},[a]),Kl(()=>{if(!oe||!A)return;const pt=nt=>{ae(nt.placement)};let Ze=[{name:"preventOverflow",options:{altBoundary:g}},{name:"flip",options:{altBoundary:g}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:nt})=>{pt(nt)}}];b!=null&&(Ze=Ze.concat(b)),F&&F.modifiers!=null&&(Ze=Ze.concat(F.modifiers));const ct=iie(oe,B.current,Ve({placement:Y},F,{modifiers:Ze}));return P.current(ct),()=>{ct.destroy(),P.current(null)}},[oe,g,b,A,F,Y]);const Re={placement:ne};j!==null&&(Re.TransitionProps=j);const Be=hie(),Oe=(r=h!=null?h:H.root)!=null?r:"div",Ee=a0({elementType:Oe,externalSlotProps:T.root,externalForwardedProps:W,additionalProps:{role:"tooltip",ref:O},ownerState:Ve({},t,D),className:Be.root});return At.exports.jsx(Oe,Ve({},Ee,{children:typeof u=="function"?u(Re):u}))}),mie=m.exports.forwardRef(function(t,n){const{anchorEl:r,children:a,container:u,direction:h="ltr",disablePortal:o=!1,keepMounted:g=!1,modifiers:b,open:A,placement:D="bottom",popperOptions:z=pie,popperRef:F,style:N,transition:T=!1,slotProps:H={},slots:j={}}=t,W=Mn(t,cie),[B,O]=m.exports.useState(!0),S=()=>{O(!1)},w=()=>{O(!0)};if(!g&&!A&&(!T||B))return null;let P;if(u)P=u;else if(r){const ae=cS(r);P=ae&&die(ae)?vo(ae).body:vo(null).body}const Y=!A&&g&&(!T||B)?"none":void 0,ne=T?{in:A,onEnter:S,onExited:w}:void 0;return At.exports.jsx(lB,{disablePortal:o,container:P,children:At.exports.jsx(fie,Ve({anchorEl:r,direction:h,disablePortal:o,modifiers:b,ref:n,open:T?!B:A,placement:D,popperOptions:z,popperRef:F,slotProps:H,slots:j},W,{style:Ve({position:"fixed",top:0,left:0,display:Y},N),TransitionProps:ne,children:a}))})});var gie=mie;function vie(e){const t=vo(e);return t.body===e?Bd(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Sg(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function yR(e){return parseInt(Bd(e).getComputedStyle(e).paddingRight,10)||0}function yie(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function _R(e,t,n,r,a){const u=[t,n,...r];[].forEach.call(e.children,h=>{const o=u.indexOf(h)===-1,g=!yie(h);o&&g&&Sg(h,a)})}function mE(e,t){let n=-1;return e.some((r,a)=>t(r)?(n=a,!0):!1),n}function _ie(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(vie(r)){const h=x5(vo(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${yR(r)+h}px`;const o=vo(r).querySelectorAll(".mui-fixed");[].forEach.call(o,g=>{n.push({value:g.style.paddingRight,property:"padding-right",el:g}),g.style.paddingRight=`${yR(g)+h}px`})}let u;if(r.parentNode instanceof DocumentFragment)u=vo(r).body;else{const h=r.parentElement,o=Bd(r);u=(h==null?void 0:h.nodeName)==="HTML"&&o.getComputedStyle(h).overflowY==="scroll"?h:r}n.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return()=>{n.forEach(({value:u,el:h,property:o})=>{u?h.style.setProperty(o,u):h.style.removeProperty(o)})}}function xie(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class bie{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&Sg(t.modalRef,!1);const a=xie(n);_R(n,t.mount,t.modalRef,a,!0);const u=mE(this.containers,h=>h.container===n);return u!==-1?(this.containers[u].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:a}),r)}mount(t,n){const r=mE(this.containers,u=>u.modals.indexOf(t)!==-1),a=this.containers[r];a.restore||(a.restore=_ie(a,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const a=mE(this.containers,h=>h.modals.indexOf(t)!==-1),u=this.containers[a];if(u.modals.splice(u.modals.indexOf(t),1),this.modals.splice(r,1),u.modals.length===0)u.restore&&u.restore(),t.modalRef&&Sg(t.modalRef,n),_R(u.container,t.mount,t.modalRef,u.hiddenSiblings,!1),this.containers.splice(a,1);else{const h=u.modals[u.modals.length-1];h.modalRef&&Sg(h.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function wie(e){return Yr("MuiModal",e)}Ir("MuiModal",["root","hidden","backdrop"]);const Eie=["children","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],Cie=e=>{const{open:t,exited:n}=e;return ei({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},Y5(wie))};function Sie(e){return typeof e=="function"?e():e}function kie(e){return e?e.props.hasOwnProperty("in"):!1}const Tie=new bie,Aie=m.exports.forwardRef(function(t,n){var r,a;const{children:u,closeAfterTransition:h=!1,component:o,container:g,disableAutoFocus:b=!1,disableEnforceFocus:A=!1,disableEscapeKeyDown:D=!1,disablePortal:z=!1,disableRestoreFocus:F=!1,disableScrollLock:N=!1,hideBackdrop:T=!1,keepMounted:H=!1,manager:j=Tie,onBackdropClick:W,onClose:B,onKeyDown:O,open:S,onTransitionEnter:w,onTransitionExited:P,slotProps:Y={},slots:ne={}}=t,ae=Mn(t,Eie),[oe,fe]=m.exports.useState(!S),Re=m.exports.useRef({}),Be=m.exports.useRef(null),Oe=m.exports.useRef(null),Ee=io(Oe,n),pt=kie(u),Ze=(r=t["aria-hidden"])!=null?r:!0,ct=()=>vo(Be.current),nt=()=>(Re.current.modalRef=Oe.current,Re.current.mountNode=Be.current,Re.current),xe=()=>{j.mount(nt(),{disableScrollLock:N}),Oe.current&&(Oe.current.scrollTop=0)},be=Pa(()=>{const Pt=Sie(g)||ct().body;j.add(nt(),Pt),Oe.current&&xe()}),on=m.exports.useCallback(()=>j.isTopModal(nt()),[j]),Ut=Pa(Pt=>{Be.current=Pt,!(!Pt||!Oe.current)&&(S&&on()?xe():Sg(Oe.current,Ze))}),ln=m.exports.useCallback(()=>{j.remove(nt(),Ze)},[j,Ze]);m.exports.useEffect(()=>()=>{ln()},[ln]),m.exports.useEffect(()=>{S?be():(!pt||!h)&&ln()},[S,ln,pt,h,be]);const tn=Ve({},t,{closeAfterTransition:h,disableAutoFocus:b,disableEnforceFocus:A,disableEscapeKeyDown:D,disablePortal:z,disableRestoreFocus:F,disableScrollLock:N,exited:oe,hideBackdrop:T,keepMounted:H}),un=Cie(tn),mn=()=>{fe(!1),w&&w()},fn=()=>{fe(!0),P&&P(),h&&ln()},An=Pt=>{Pt.target===Pt.currentTarget&&(W&&W(Pt),B&&B(Pt,"backdropClick"))},Le=Pt=>{O&&O(Pt),!(Pt.key!=="Escape"||!on())&&(D||(Pt.stopPropagation(),B&&B(Pt,"escapeKeyDown")))},Xe={};u.props.tabIndex===void 0&&(Xe.tabIndex="-1"),pt&&(Xe.onEnter=FD(mn,u.props.onEnter),Xe.onExited=FD(fn,u.props.onExited));const ft=(a=o!=null?o:ne.root)!=null?a:"div",wt=a0({elementType:ft,externalSlotProps:Y.root,externalForwardedProps:ae,additionalProps:{ref:Ee,role:"presentation",onKeyDown:Le},className:un.root,ownerState:tn}),_t=ne.backdrop,dt=a0({elementType:_t,externalSlotProps:Y.backdrop,additionalProps:{"aria-hidden":!0,onClick:An,open:S},className:un.backdrop,ownerState:tn});return!H&&!S&&(!pt||oe)?null:At.exports.jsx(lB,{ref:Ut,container:g,disablePortal:z,children:At.exports.jsxs(ft,Ve({},wt,{children:[!T&&_t?At.exports.jsx(_t,Ve({},dt)):null,At.exports.jsx(Jne,{disableEnforceFocus:A,disableAutoFocus:b,disableRestoreFocus:F,isEnabled:on,open:S,children:m.exports.cloneElement(u,Xe)})]}))})});var Mie=Aie;function Iie(e){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:a,ref:u,resumeHideDuration:h}=e,o=m.exports.useRef();m.exports.useEffect(()=>{if(!a)return;function W(B){B.defaultPrevented||(B.key==="Escape"||B.key==="Esc")&&(r==null||r(B,"escapeKeyDown"))}return document.addEventListener("keydown",W),()=>{document.removeEventListener("keydown",W)}},[a,r]);const g=Pa((W,B)=>{r==null||r(W,B)}),b=Pa(W=>{!r||W==null||(clearTimeout(o.current),o.current=setTimeout(()=>{g(null,"timeout")},W))});m.exports.useEffect(()=>(a&&b(t),()=>{clearTimeout(o.current)}),[a,t,b]);const A=W=>{r==null||r(W,"clickaway")},D=()=>{clearTimeout(o.current)},z=m.exports.useCallback(()=>{t!=null&&b(h!=null?h:t*.5)},[t,h,b]),F=W=>B=>{const O=W.onBlur;O==null||O(B),z()},N=W=>B=>{const O=W.onFocus;O==null||O(B),D()},T=W=>B=>{const O=W.onMouseEnter;O==null||O(B),D()},H=W=>B=>{const O=W.onMouseLeave;O==null||O(B),z()};return m.exports.useEffect(()=>{if(!n&&a)return window.addEventListener("focus",z),window.addEventListener("blur",D),()=>{window.removeEventListener("focus",z),window.removeEventListener("blur",D)}},[n,z,a]),{getRootProps:(W={})=>{const B=J5(e),O=Ve({},B,W);return Ve({ref:u,role:"presentation"},O,{onBlur:F(O),onFocus:N(O),onMouseEnter:T(O),onMouseLeave:H(O)})},onClickAway:A}}const Pie=["onChange","maxRows","minRows","style","value"];function R_(e){return parseInt(e,10)||0}const Die={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function xR(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const Rie=m.exports.forwardRef(function(t,n){const{onChange:r,maxRows:a,minRows:u=1,style:h,value:o}=t,g=Mn(t,Pie),{current:b}=m.exports.useRef(o!=null),A=m.exports.useRef(null),D=io(n,A),z=m.exports.useRef(null),F=m.exports.useRef(0),[N,T]=m.exports.useState({outerHeightStyle:0}),H=m.exports.useCallback(()=>{const S=A.current,P=Bd(S).getComputedStyle(S);if(P.width==="0px")return{outerHeightStyle:0};const Y=z.current;Y.style.width=P.width,Y.value=S.value||t.placeholder||"x",Y.value.slice(-1)===`
`&&(Y.value+=" ");const ne=P.boxSizing,ae=R_(P.paddingBottom)+R_(P.paddingTop),oe=R_(P.borderBottomWidth)+R_(P.borderTopWidth),fe=Y.scrollHeight;Y.value="x";const Re=Y.scrollHeight;let Be=fe;u&&(Be=Math.max(Number(u)*Re,Be)),a&&(Be=Math.min(Number(a)*Re,Be)),Be=Math.max(Be,Re);const Oe=Be+(ne==="border-box"?ae+oe:0),Ee=Math.abs(Be-fe)<=1;return{outerHeightStyle:Oe,overflow:Ee}},[a,u,t.placeholder]),j=(S,w)=>{const{outerHeightStyle:P,overflow:Y}=w;return F.current<20&&(P>0&&Math.abs((S.outerHeightStyle||0)-P)>1||S.overflow!==Y)?(F.current+=1,{overflow:Y,outerHeightStyle:P}):S},W=m.exports.useCallback(()=>{const S=H();xR(S)||T(w=>j(w,S))},[H]),B=()=>{const S=H();xR(S)||Zc.exports.flushSync(()=>{T(w=>j(w,S))})};m.exports.useEffect(()=>{const S=y5(()=>{F.current=0,A.current&&B()});let w;const P=A.current,Y=Bd(P);return Y.addEventListener("resize",S),typeof ResizeObserver!="undefined"&&(w=new ResizeObserver(S),w.observe(P)),()=>{S.clear(),Y.removeEventListener("resize",S),w&&w.disconnect()}}),Kl(()=>{W()}),m.exports.useEffect(()=>{F.current=0},[o]);const O=S=>{F.current=0,b||W(),r&&r(S)};return At.exports.jsxs(m.exports.Fragment,{children:[At.exports.jsx("textarea",Ve({value:o,onChange:O,ref:D,rows:u,style:Ve({height:N.outerHeightStyle,overflow:N.overflow?"hidden":void 0},h)},g)),At.exports.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:z,tabIndex:-1,style:Ve({},Die.shadow,h,{padding:0})})]})});var Lie=Rie;function bR(e){return typeof e.normalize!="undefined"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function Oie(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:a="any",stringify:u,trim:h=!1}=e;return(o,{inputValue:g,getOptionLabel:b})=>{let A=h?g.trim():g;n&&(A=A.toLowerCase()),t&&(A=bR(A));const D=A?o.filter(z=>{let F=(u||b)(z);return n&&(F=F.toLowerCase()),t&&(F=bR(F)),a==="start"?F.indexOf(A)===0:F.indexOf(A)>-1}):o;return typeof r=="number"?D.slice(0,r):D}}function gE(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const zie=Oie(),wR=5,Bie=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function Fie(e){const{unstable_isActiveElementInListbox:t=Bie,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:a=!1,autoSelect:u=!1,blurOnSelect:h=!1,clearOnBlur:o=!e.freeSolo,clearOnEscape:g=!1,componentName:b="useAutocomplete",defaultValue:A=e.multiple?[]:null,disableClearable:D=!1,disableCloseOnSelect:z=!1,disabled:F,disabledItemsFocusable:N=!1,disableListWrap:T=!1,filterOptions:H=zie,filterSelectedOptions:j=!1,freeSolo:W=!1,getOptionDisabled:B,getOptionLabel:O=Me=>{var Ue;return(Ue=Me.label)!=null?Ue:Me},groupBy:S,handleHomeEndKeys:w=!e.freeSolo,id:P,includeInputInList:Y=!1,inputValue:ne,isOptionEqualToValue:ae=(Me,Ue)=>Me===Ue,multiple:oe=!1,onChange:fe,onClose:Re,onHighlightChange:Be,onInputChange:Oe,onOpen:Ee,open:pt,openOnFocus:Ze=!1,options:ct,readOnly:nt=!1,selectOnFocus:xe=!e.freeSolo,value:be}=e,on=_5(P);let Ut=O;Ut=Me=>{const Ue=O(Me);return typeof Ue!="string"?String(Ue):Ue};const ln=m.exports.useRef(!1),tn=m.exports.useRef(!0),un=m.exports.useRef(null),mn=m.exports.useRef(null),[fn,An]=m.exports.useState(null),[Le,Xe]=m.exports.useState(-1),ft=a?0:-1,wt=m.exports.useRef(ft),[_t,dt]=xg({controlled:be,default:A,name:b}),[Pt,yn]=xg({controlled:ne,default:"",name:b,state:"inputValue"}),[On,Ln]=m.exports.useState(!1),In=m.exports.useCallback((Me,Ue)=>{if(!(oe?_t.length<Ue.length:Ue!==null)&&!o)return;let ht;if(oe)ht="";else if(Ue==null)ht="";else{const Zt=Ut(Ue);ht=typeof Zt=="string"?Zt:""}Pt!==ht&&(yn(ht),Oe&&Oe(Me,ht,"reset"))},[Ut,Pt,oe,Oe,yn,o,_t]),[Xn,Ie]=xg({controlled:pt,default:!1,name:b,state:"open"}),[Je,re]=m.exports.useState(!0),ce=!oe&&_t!=null&&Pt===Ut(_t),Pe=Xn&&!nt,ve=Pe?H(ct.filter(Me=>!(j&&(oe?_t:[_t]).some(Ue=>Ue!==null&&ae(Me,Ue)))),{inputValue:ce&&Je?"":Pt,getOptionLabel:Ut}):[],Se=DQ({filteredOptions:ve,value:_t});m.exports.useEffect(()=>{const Me=_t!==Se.value;On&&!Me||W&&!Me||In(null,_t)},[_t,In,On,Se.value,W]);const yt=Xn&&ve.length>0&&!nt,Nt=Pa(Me=>{Me===-1?un.current.focus():fn.querySelector(`[data-tag-index="${Me}"]`).focus()});m.exports.useEffect(()=>{oe&&Le>_t.length-1&&(Xe(-1),Nt(-1))},[_t,oe,Le,Nt]);function Kt(Me,Ue){if(!mn.current||Me===-1)return-1;let bt=Me;for(;;){if(Ue==="next"&&bt===ve.length||Ue==="previous"&&bt===-1)return-1;const ht=mn.current.querySelector(`[data-option-index="${bt}"]`),Zt=N?!1:!ht||ht.disabled||ht.getAttribute("aria-disabled")==="true";if(ht&&!ht.hasAttribute("tabindex")||Zt)bt+=Ue==="next"?1:-1;else return bt}}const Bn=Pa(({event:Me,index:Ue,reason:bt="auto"})=>{if(wt.current=Ue,Ue===-1?un.current.removeAttribute("aria-activedescendant"):un.current.setAttribute("aria-activedescendant",`${on}-option-${Ue}`),Be&&Be(Me,Ue===-1?null:ve[Ue],bt),!mn.current)return;const ht=mn.current.querySelector(`[role="option"].${n}-focused`);ht&&(ht.classList.remove(`${n}-focused`),ht.classList.remove(`${n}-focusVisible`));const Zt=mn.current.parentElement.querySelector('[role="listbox"]');if(!Zt)return;if(Ue===-1){Zt.scrollTop=0;return}const rn=mn.current.querySelector(`[data-option-index="${Ue}"]`);if(!!rn&&(rn.classList.add(`${n}-focused`),bt==="keyboard"&&rn.classList.add(`${n}-focusVisible`),Zt.scrollHeight>Zt.clientHeight&&bt!=="mouse")){const Jt=rn,pn=Zt.clientHeight+Zt.scrollTop,zn=Jt.offsetTop+Jt.offsetHeight;zn>pn?Zt.scrollTop=zn-Zt.clientHeight:Jt.offsetTop-Jt.offsetHeight*(S?1.3:0)<Zt.scrollTop&&(Zt.scrollTop=Jt.offsetTop-Jt.offsetHeight*(S?1.3:0))}}),Tn=Pa(({event:Me,diff:Ue,direction:bt="next",reason:ht="auto"})=>{if(!Pe)return;const rn=Kt((()=>{const Jt=ve.length-1;if(Ue==="reset")return ft;if(Ue==="start")return 0;if(Ue==="end")return Jt;const pn=wt.current+Ue;return pn<0?pn===-1&&Y?-1:T&&wt.current!==-1||Math.abs(Ue)>1?0:Jt:pn>Jt?pn===Jt+1&&Y?-1:T||Math.abs(Ue)>1?Jt:0:pn})(),bt);if(Bn({index:rn,reason:ht,event:Me}),r&&Ue!=="reset")if(rn===-1)un.current.value=Pt;else{const Jt=Ut(ve[rn]);un.current.value=Jt,Jt.toLowerCase().indexOf(Pt.toLowerCase())===0&&Pt.length>0&&un.current.setSelectionRange(Pt.length,Jt.length)}}),Vt=()=>{const Me=(Ue,bt)=>{const ht=Ue?Ut(Ue):"",Zt=bt?Ut(bt):"";return ht===Zt};if(wt.current!==-1&&Se.filteredOptions&&Se.filteredOptions.length!==ve.length&&(oe?_t.length===Se.value.length&&Se.value.every((Ue,bt)=>Ut(_t[bt])===Ut(Ue)):Me(Se.value,_t))){const Ue=Se.filteredOptions[wt.current];if(Ue&&ve.some(ht=>Ut(ht)===Ut(Ue)))return!0}return!1},Rn=m.exports.useCallback(()=>{if(!Pe||Vt())return;const Me=oe?_t[0]:_t;if(ve.length===0||Me==null){Tn({diff:"reset"});return}if(!!mn.current){if(Me!=null){const Ue=ve[wt.current];if(oe&&Ue&&gE(_t,ht=>ae(Ue,ht))!==-1)return;const bt=gE(ve,ht=>ae(ht,Me));bt===-1?Tn({diff:"reset"}):Bn({index:bt});return}if(wt.current>=ve.length-1){Bn({index:ve.length-1});return}Bn({index:wt.current})}},[ve.length,oe?!1:_t,j,Tn,Bn,Pe,Pt,oe]),ur=Pa(Me=>{e0(mn,Me),Me&&Rn()});m.exports.useEffect(()=>{Rn()},[Rn]);const Fn=Me=>{Xn||(Ie(!0),re(!0),Ee&&Ee(Me))},Sr=(Me,Ue)=>{!Xn||(Ie(!1),Re&&Re(Me,Ue))},dr=(Me,Ue,bt,ht)=>{if(oe){if(_t.length===Ue.length&&_t.every((Zt,rn)=>Zt===Ue[rn]))return}else if(_t===Ue)return;fe&&fe(Me,Ue,bt,ht),dt(Ue)},Pr=m.exports.useRef(!1),Yn=(Me,Ue,bt="selectOption",ht="options")=>{let Zt=bt,rn=Ue;if(oe){rn=Array.isArray(_t)?_t.slice():[];const Jt=gE(rn,pn=>ae(Ue,pn));Jt===-1?rn.push(Ue):ht!=="freeSolo"&&(rn.splice(Jt,1),Zt="removeOption")}In(Me,rn),dr(Me,rn,Zt,{option:Ue}),!z&&(!Me||!Me.ctrlKey&&!Me.metaKey)&&Sr(Me,Zt),(h===!0||h==="touch"&&Pr.current||h==="mouse"&&!Pr.current)&&un.current.blur()};function Qn(Me,Ue){if(Me===-1)return-1;let bt=Me;for(;;){if(Ue==="next"&&bt===_t.length||Ue==="previous"&&bt===-1)return-1;const ht=fn.querySelector(`[data-tag-index="${bt}"]`);if(!ht||!ht.hasAttribute("tabindex")||ht.disabled||ht.getAttribute("aria-disabled")==="true")bt+=Ue==="next"?1:-1;else return bt}}const Ur=(Me,Ue)=>{if(!oe)return;Pt===""&&Sr(Me,"toggleInput");let bt=Le;Le===-1?Pt===""&&Ue==="previous"&&(bt=_t.length-1):(bt+=Ue==="next"?1:-1,bt<0&&(bt=0),bt===_t.length&&(bt=-1)),bt=Qn(bt,Ue),Xe(bt),Nt(bt)},hr=Me=>{ln.current=!0,yn(""),Oe&&Oe(Me,"","clear"),dr(Me,oe?[]:null,"clear")},Bi=Me=>Ue=>{if(Me.onKeyDown&&Me.onKeyDown(Ue),!Ue.defaultMuiPrevented&&(Le!==-1&&["ArrowLeft","ArrowRight"].indexOf(Ue.key)===-1&&(Xe(-1),Nt(-1)),Ue.which!==229))switch(Ue.key){case"Home":Pe&&w&&(Ue.preventDefault(),Tn({diff:"start",direction:"next",reason:"keyboard",event:Ue}));break;case"End":Pe&&w&&(Ue.preventDefault(),Tn({diff:"end",direction:"previous",reason:"keyboard",event:Ue}));break;case"PageUp":Ue.preventDefault(),Tn({diff:-wR,direction:"previous",reason:"keyboard",event:Ue}),Fn(Ue);break;case"PageDown":Ue.preventDefault(),Tn({diff:wR,direction:"next",reason:"keyboard",event:Ue}),Fn(Ue);break;case"ArrowDown":Ue.preventDefault(),Tn({diff:1,direction:"next",reason:"keyboard",event:Ue}),Fn(Ue);break;case"ArrowUp":Ue.preventDefault(),Tn({diff:-1,direction:"previous",reason:"keyboard",event:Ue}),Fn(Ue);break;case"ArrowLeft":Ur(Ue,"previous");break;case"ArrowRight":Ur(Ue,"next");break;case"Enter":if(wt.current!==-1&&Pe){const bt=ve[wt.current],ht=B?B(bt):!1;if(Ue.preventDefault(),ht)return;Yn(Ue,bt,"selectOption"),r&&un.current.setSelectionRange(un.current.value.length,un.current.value.length)}else W&&Pt!==""&&ce===!1&&(oe&&Ue.preventDefault(),Yn(Ue,Pt,"createOption","freeSolo"));break;case"Escape":Pe?(Ue.preventDefault(),Ue.stopPropagation(),Sr(Ue,"escape")):g&&(Pt!==""||oe&&_t.length>0)&&(Ue.preventDefault(),Ue.stopPropagation(),hr(Ue));break;case"Backspace":if(oe&&!nt&&Pt===""&&_t.length>0){const bt=Le===-1?_t.length-1:Le,ht=_t.slice();ht.splice(bt,1),dr(Ue,ht,"removeOption",{option:_t[bt]})}break;case"Delete":if(oe&&!nt&&Pt===""&&_t.length>0&&Le!==-1){const bt=Le,ht=_t.slice();ht.splice(bt,1),dr(Ue,ht,"removeOption",{option:_t[bt]})}break}},ai=Me=>{Ln(!0),Ze&&!ln.current&&Fn(Me)},si=Me=>{if(t(mn)){un.current.focus();return}Ln(!1),tn.current=!0,ln.current=!1,u&&wt.current!==-1&&Pe?Yn(Me,ve[wt.current],"blur"):u&&W&&Pt!==""?Yn(Me,Pt,"blur","freeSolo"):o&&In(Me,_t),Sr(Me,"blur")},Fi=Me=>{const Ue=Me.target.value;Pt!==Ue&&(yn(Ue),re(!1),Oe&&Oe(Me,Ue,"input")),Ue===""?!D&&!oe&&dr(Me,null,"clear"):Fn(Me)},oo=Me=>{Bn({event:Me,index:Number(Me.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},_e=Me=>{Bn({event:Me,index:Number(Me.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Pr.current=!0},te=Me=>{const Ue=Number(Me.currentTarget.getAttribute("data-option-index"));Yn(Me,ve[Ue],"selectOption"),Pr.current=!1},se=Me=>Ue=>{const bt=_t.slice();bt.splice(Me,1),dr(Ue,bt,"removeOption",{option:_t[Me]})},pe=Me=>{Xn?Sr(Me,"toggleInput"):Fn(Me)},Ae=Me=>{Me.target.getAttribute("id")!==on&&Me.preventDefault()},We=()=>{un.current.focus(),xe&&tn.current&&un.current.selectionEnd-un.current.selectionStart===0&&un.current.select(),tn.current=!1},Qe=Me=>{(Pt===""||!Xn)&&pe(Me)};let Ke=W&&Pt.length>0;Ke=Ke||(oe?_t.length>0:_t!==null);let qe=ve;return S&&(qe=ve.reduce((Me,Ue,bt)=>{const ht=S(Ue);return Me.length>0&&Me[Me.length-1].group===ht?Me[Me.length-1].options.push(Ue):Me.push({key:bt,index:bt,group:ht,options:[Ue]}),Me},[])),F&&On&&si(),{getRootProps:(Me={})=>Ve({"aria-owns":yt?`${on}-listbox`:null},Me,{onKeyDown:Bi(Me),onMouseDown:Ae,onClick:We}),getInputLabelProps:()=>({id:`${on}-label`,htmlFor:on}),getInputProps:()=>({id:on,value:Pt,onBlur:si,onFocus:ai,onChange:Fi,onMouseDown:Qe,"aria-activedescendant":Pe?"":null,"aria-autocomplete":r?"both":"list","aria-controls":yt?`${on}-listbox`:void 0,"aria-expanded":yt,autoComplete:"off",ref:un,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:F}),getClearProps:()=>({tabIndex:-1,onClick:hr}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:pe}),getTagProps:({index:Me})=>Ve({key:Me,"data-tag-index":Me,tabIndex:-1},!nt&&{onDelete:se(Me)}),getListboxProps:()=>({role:"listbox",id:`${on}-listbox`,"aria-labelledby":`${on}-label`,ref:ur,onMouseDown:Me=>{Me.preventDefault()}}),getOptionProps:({index:Me,option:Ue})=>{const bt=(oe?_t:[_t]).some(Zt=>Zt!=null&&ae(Ue,Zt)),ht=B?B(Ue):!1;return{key:Ut(Ue),tabIndex:-1,role:"option",id:`${on}-option-${Me}`,onMouseOver:oo,onClick:te,onTouchStart:_e,"data-option-index":Me,"aria-disabled":ht,"aria-selected":bt}},id:on,inputValue:Pt,value:_t,dirty:Ke,expanded:Pe&&fn,popupOpen:Pe,focused:On||Le!==-1,anchorEl:fn,setAnchorEl:An,focusedTag:Le,groupedOptions:qe}}function Nie(e){return Yr("MuiSvgIcon",e)}Ir("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Uie=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],jie=e=>{const{color:t,fontSize:n,classes:r}=e,a={root:["root",t!=="inherit"&&`color${_n(t)}`,`fontSize${_n(n)}`]};return ei(a,Nie,r)},$ie=xn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${_n(n.color)}`],t[`fontSize${_n(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,a,u,h,o,g,b,A,D,z,F,N,T,H,j,W;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(a=e.transitions)==null||(u=a.duration)==null?void 0:u.shorter}),fontSize:{inherit:"inherit",small:((h=e.typography)==null||(o=h.pxToRem)==null?void 0:o.call(h,20))||"1.25rem",medium:((g=e.typography)==null||(b=g.pxToRem)==null?void 0:b.call(g,24))||"1.5rem",large:((A=e.typography)==null||(D=A.pxToRem)==null?void 0:D.call(A,35))||"2.1875rem"}[t.fontSize],color:(z=(F=(e.vars||e).palette)==null||(N=F[t.color])==null?void 0:N.main)!=null?z:{action:(T=(e.vars||e).palette)==null||(H=T.action)==null?void 0:H.active,disabled:(j=(e.vars||e).palette)==null||(W=j.action)==null?void 0:W.disabled,inherit:void 0}[t.color]}}),cB=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiSvgIcon"}),{children:a,className:u,color:h="inherit",component:o="svg",fontSize:g="medium",htmlColor:b,inheritViewBox:A=!1,titleAccess:D,viewBox:z="0 0 24 24"}=r,F=Mn(r,Uie),N=Ve({},r,{color:h,component:o,fontSize:g,instanceFontSize:t.fontSize,inheritViewBox:A,viewBox:z}),T={};A||(T.viewBox=z);const H=jie(N);return At.exports.jsxs($ie,Ve({as:o,className:Nn(H.root,u),focusable:"false",color:b,"aria-hidden":D?void 0:!0,role:D?"img":void 0,ref:n},T,F,{ownerState:N,children:[a,D?At.exports.jsx("title",{children:D}):null]}))});cB.muiName="SvgIcon";var ER=cB;function Gd(e,t){function n(r,a){return At.exports.jsx(ER,Ve({"data-testid":`${t}Icon`,ref:a},r,{children:e}))}return n.muiName=ER.muiName,m.exports.memo(m.exports.forwardRef(n))}function uS(e,t){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},uS(e,t)}function uB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,uS(e,t)}var CR={disabled:!1},l0=ot.createContext(null),Vie=function(t){return t.scrollTop},rg="unmounted",pd="exited",fd="entering",ip="entered",dS="exiting",rc=function(e){uB(t,e);function t(r,a){var u;u=e.call(this,r,a)||this;var h=a,o=h&&!h.isMounting?r.enter:r.appear,g;return u.appearStatus=null,r.in?o?(g=pd,u.appearStatus=fd):g=ip:r.unmountOnExit||r.mountOnEnter?g=rg:g=pd,u.state={status:g},u.nextCallback=null,u}t.getDerivedStateFromProps=function(a,u){var h=a.in;return h&&u.status===rg?{status:pd}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var u=null;if(a!==this.props){var h=this.state.status;this.props.in?h!==fd&&h!==ip&&(u=fd):(h===fd||h===ip)&&(u=dS)}this.updateStatus(!1,u)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,u,h,o;return u=h=o=a,a!=null&&typeof a!="number"&&(u=a.exit,h=a.enter,o=a.appear!==void 0?a.appear:h),{exit:u,enter:h,appear:o}},n.updateStatus=function(a,u){if(a===void 0&&(a=!1),u!==null)if(this.cancelNextCallback(),u===fd){if(this.props.unmountOnExit||this.props.mountOnEnter){var h=this.props.nodeRef?this.props.nodeRef.current:C_.findDOMNode(this);h&&Vie(h)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===pd&&this.setState({status:rg})},n.performEnter=function(a){var u=this,h=this.props.enter,o=this.context?this.context.isMounting:a,g=this.props.nodeRef?[o]:[C_.findDOMNode(this),o],b=g[0],A=g[1],D=this.getTimeouts(),z=o?D.appear:D.enter;if(!a&&!h||CR.disabled){this.safeSetState({status:ip},function(){u.props.onEntered(b)});return}this.props.onEnter(b,A),this.safeSetState({status:fd},function(){u.props.onEntering(b,A),u.onTransitionEnd(z,function(){u.safeSetState({status:ip},function(){u.props.onEntered(b,A)})})})},n.performExit=function(){var a=this,u=this.props.exit,h=this.getTimeouts(),o=this.props.nodeRef?void 0:C_.findDOMNode(this);if(!u||CR.disabled){this.safeSetState({status:pd},function(){a.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:dS},function(){a.props.onExiting(o),a.onTransitionEnd(h.exit,function(){a.safeSetState({status:pd},function(){a.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,u){u=this.setNextCallback(u),this.setState(a,u)},n.setNextCallback=function(a){var u=this,h=!0;return this.nextCallback=function(o){h&&(h=!1,u.nextCallback=null,a(o))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},n.onTransitionEnd=function(a,u){this.setNextCallback(u);var h=this.props.nodeRef?this.props.nodeRef.current:C_.findDOMNode(this),o=a==null&&!this.props.addEndListener;if(!h||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var g=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],b=g[0],A=g[1];this.props.addEndListener(b,A)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===rg)return null;var u=this.props,h=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var o=Mn(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ot.createElement(l0.Provider,{value:null},typeof h=="function"?h(a,o):ot.cloneElement(ot.Children.only(h),o))},t}(ot.Component);rc.contextType=l0;rc.propTypes={};function np(){}rc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:np,onEntering:np,onEntered:np,onExit:np,onExiting:np,onExited:np};rc.UNMOUNTED=rg;rc.EXITED=pd;rc.ENTERING=fd;rc.ENTERED=ip;rc.EXITING=dS;var dB=rc;function Hie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IT(e,t){var n=function(u){return t&&m.exports.isValidElement(u)?t(u):u},r=Object.create(null);return e&&m.exports.Children.map(e,function(a){return a}).forEach(function(a){r[a.key]=n(a)}),r}function Wie(e,t){e=e||{},t=t||{};function n(A){return A in t?t[A]:e[A]}var r=Object.create(null),a=[];for(var u in e)u in t?a.length&&(r[u]=a,a=[]):a.push(u);var h,o={};for(var g in t){if(r[g])for(h=0;h<r[g].length;h++){var b=r[g][h];o[r[g][h]]=n(b)}o[g]=n(g)}for(h=0;h<a.length;h++)o[a[h]]=n(a[h]);return o}function Ed(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Gie(e,t){return IT(e.children,function(n){return m.exports.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Ed(n,"appear",e),enter:Ed(n,"enter",e),exit:Ed(n,"exit",e)})})}function qie(e,t,n){var r=IT(e.children),a=Wie(t,r);return Object.keys(a).forEach(function(u){var h=a[u];if(!!m.exports.isValidElement(h)){var o=u in t,g=u in r,b=t[u],A=m.exports.isValidElement(b)&&!b.props.in;g&&(!o||A)?a[u]=m.exports.cloneElement(h,{onExited:n.bind(null,h),in:!0,exit:Ed(h,"exit",e),enter:Ed(h,"enter",e)}):!g&&o&&!A?a[u]=m.exports.cloneElement(h,{in:!1}):g&&o&&m.exports.isValidElement(b)&&(a[u]=m.exports.cloneElement(h,{onExited:n.bind(null,h),in:b.props.in,exit:Ed(h,"exit",e),enter:Ed(h,"enter",e)}))}}),a}var Zie=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Xie={component:"div",childFactory:function(t){return t}},PT=function(e){uB(t,e);function t(r,a){var u;u=e.call(this,r,a)||this;var h=u.handleExited.bind(Hie(u));return u.state={contextValue:{isMounting:!0},handleExited:h,firstRender:!0},u}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,u){var h=u.children,o=u.handleExited,g=u.firstRender;return{children:g?Gie(a,o):qie(a,h,o),firstRender:!1}},n.handleExited=function(a,u){var h=IT(this.props.children);a.key in h||(a.props.onExited&&a.props.onExited(u),this.mounted&&this.setState(function(o){var g=Ve({},o.children);return delete g[a.key],{children:g}}))},n.render=function(){var a=this.props,u=a.component,h=a.childFactory,o=Mn(a,["component","childFactory"]),g=this.state.contextValue,b=Zie(this.state.children).map(h);return delete o.appear,delete o.enter,delete o.exit,u===null?ot.createElement(l0.Provider,{value:g},b):ot.createElement(l0.Provider,{value:g},ot.createElement(u,o,b))},t}(ot.Component);PT.propTypes={};PT.defaultProps=Xie;var Kie=PT;const hB=e=>e.scrollTop;function c0(e,t){var n,r;const{timeout:a,easing:u,style:h={}}=e;return{duration:(n=h.transitionDuration)!=null?n:typeof a=="number"?a:a[t.mode]||0,easing:(r=h.transitionTimingFunction)!=null?r:typeof u=="object"?u[t.mode]:u,delay:h.transitionDelay}}function Yie(e){return Yr("MuiPaper",e)}Ir("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Jie=["className","component","elevation","square","variant"],Qie=e=>{const{square:t,elevation:n,variant:r,classes:a}=e,u={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return ei(u,Yie,a)},eoe=xn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return Ve({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Ve({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${ji("#fff",aR(t.elevation))}, ${ji("#fff",aR(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),toe=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiPaper"}),{className:a,component:u="div",elevation:h=1,square:o=!1,variant:g="elevation"}=r,b=Mn(r,Jie),A=Ve({},r,{component:u,elevation:h,square:o,variant:g}),D=Qie(A);return At.exports.jsx(eoe,Ve({as:u,ownerState:A,className:Nn(D.root,a),ref:n},b))});var uf=toe;function noe(e){const{className:t,classes:n,pulsate:r=!1,rippleX:a,rippleY:u,rippleSize:h,in:o,onExited:g,timeout:b}=e,[A,D]=m.exports.useState(!1),z=Nn(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),F={width:h,height:h,top:-(h/2)+u,left:-(h/2)+a},N=Nn(n.child,A&&n.childLeaving,r&&n.childPulsate);return!o&&!A&&D(!0),m.exports.useEffect(()=>{if(!o&&g!=null){const T=setTimeout(g,b);return()=>{clearTimeout(T)}}},[g,o,b]),At.exports.jsx("span",{className:z,style:F,children:At.exports.jsx("span",{className:N})})}const roe=Ir("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var Xa=roe;const ioe=["center","classes","className"];let Pb=e=>e,SR,kR,TR,AR;const hS=550,ooe=80,aoe=mT(SR||(SR=Pb`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),soe=mT(kR||(kR=Pb`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),loe=mT(TR||(TR=Pb`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),coe=xn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),uoe=xn(noe,{name:"MuiTouchRipple",slot:"Ripple"})(AR||(AR=Pb`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Xa.rippleVisible,aoe,hS,({theme:e})=>e.transitions.easing.easeInOut,Xa.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Xa.child,Xa.childLeaving,soe,hS,({theme:e})=>e.transitions.easing.easeInOut,Xa.childPulsate,loe,({theme:e})=>e.transitions.easing.easeInOut),doe=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:u={},className:h}=r,o=Mn(r,ioe),[g,b]=m.exports.useState([]),A=m.exports.useRef(0),D=m.exports.useRef(null);m.exports.useEffect(()=>{D.current&&(D.current(),D.current=null)},[g]);const z=m.exports.useRef(!1),F=m.exports.useRef(null),N=m.exports.useRef(null),T=m.exports.useRef(null);m.exports.useEffect(()=>()=>{clearTimeout(F.current)},[]);const H=m.exports.useCallback(O=>{const{pulsate:S,rippleX:w,rippleY:P,rippleSize:Y,cb:ne}=O;b(ae=>[...ae,At.exports.jsx(uoe,{classes:{ripple:Nn(u.ripple,Xa.ripple),rippleVisible:Nn(u.rippleVisible,Xa.rippleVisible),ripplePulsate:Nn(u.ripplePulsate,Xa.ripplePulsate),child:Nn(u.child,Xa.child),childLeaving:Nn(u.childLeaving,Xa.childLeaving),childPulsate:Nn(u.childPulsate,Xa.childPulsate)},timeout:hS,pulsate:S,rippleX:w,rippleY:P,rippleSize:Y},A.current)]),A.current+=1,D.current=ne},[u]),j=m.exports.useCallback((O={},S={},w=()=>{})=>{const{pulsate:P=!1,center:Y=a||S.pulsate,fakeElement:ne=!1}=S;if((O==null?void 0:O.type)==="mousedown"&&z.current){z.current=!1;return}(O==null?void 0:O.type)==="touchstart"&&(z.current=!0);const ae=ne?null:T.current,oe=ae?ae.getBoundingClientRect():{width:0,height:0,left:0,top:0};let fe,Re,Be;if(Y||O===void 0||O.clientX===0&&O.clientY===0||!O.clientX&&!O.touches)fe=Math.round(oe.width/2),Re=Math.round(oe.height/2);else{const{clientX:Oe,clientY:Ee}=O.touches&&O.touches.length>0?O.touches[0]:O;fe=Math.round(Oe-oe.left),Re=Math.round(Ee-oe.top)}if(Y)Be=Math.sqrt((2*oe.width**2+oe.height**2)/3),Be%2===0&&(Be+=1);else{const Oe=Math.max(Math.abs((ae?ae.clientWidth:0)-fe),fe)*2+2,Ee=Math.max(Math.abs((ae?ae.clientHeight:0)-Re),Re)*2+2;Be=Math.sqrt(Oe**2+Ee**2)}O!=null&&O.touches?N.current===null&&(N.current=()=>{H({pulsate:P,rippleX:fe,rippleY:Re,rippleSize:Be,cb:w})},F.current=setTimeout(()=>{N.current&&(N.current(),N.current=null)},ooe)):H({pulsate:P,rippleX:fe,rippleY:Re,rippleSize:Be,cb:w})},[a,H]),W=m.exports.useCallback(()=>{j({},{pulsate:!0})},[j]),B=m.exports.useCallback((O,S)=>{if(clearTimeout(F.current),(O==null?void 0:O.type)==="touchend"&&N.current){N.current(),N.current=null,F.current=setTimeout(()=>{B(O,S)});return}N.current=null,b(w=>w.length>0?w.slice(1):w),D.current=S},[]);return m.exports.useImperativeHandle(n,()=>({pulsate:W,start:j,stop:B}),[W,j,B]),At.exports.jsx(coe,Ve({className:Nn(Xa.root,u.root,h),ref:T},o,{children:At.exports.jsx(Kie,{component:null,exit:!0,children:g})}))});var hoe=doe;function poe(e){return Yr("MuiButtonBase",e)}const foe=Ir("MuiButtonBase",["root","disabled","focusVisible"]);var moe=foe;const goe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],voe=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:a}=e,h=ei({root:["root",t&&"disabled",n&&"focusVisible"]},poe,a);return n&&r&&(h.root+=` ${r}`),h},yoe=xn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${moe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),_oe=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:u=!1,children:h,className:o,component:g="button",disabled:b=!1,disableRipple:A=!1,disableTouchRipple:D=!1,focusRipple:z=!1,LinkComponent:F="a",onBlur:N,onClick:T,onContextMenu:H,onDragLeave:j,onFocus:W,onFocusVisible:B,onKeyDown:O,onKeyUp:S,onMouseDown:w,onMouseLeave:P,onMouseUp:Y,onTouchEnd:ne,onTouchMove:ae,onTouchStart:oe,tabIndex:fe=0,TouchRippleProps:Re,touchRippleRef:Be,type:Oe}=r,Ee=Mn(r,goe),pt=m.exports.useRef(null),Ze=m.exports.useRef(null),ct=io(Ze,Be),{isFocusVisibleRef:nt,onFocus:xe,onBlur:be,ref:on}=IQ(),[Ut,ln]=m.exports.useState(!1);b&&Ut&&ln(!1),m.exports.useImperativeHandle(a,()=>({focusVisible:()=>{ln(!0),pt.current.focus()}}),[]);const[tn,un]=m.exports.useState(!1);m.exports.useEffect(()=>{un(!0)},[]);const mn=tn&&!A&&!b;m.exports.useEffect(()=>{Ut&&z&&!A&&tn&&Ze.current.pulsate()},[A,z,Ut,tn]);function fn(Se,yt,Nt=D){return Pa(Kt=>(yt&&yt(Kt),!Nt&&Ze.current&&Ze.current[Se](Kt),!0))}const An=fn("start",w),Le=fn("stop",H),Xe=fn("stop",j),ft=fn("stop",Y),wt=fn("stop",Se=>{Ut&&Se.preventDefault(),P&&P(Se)}),_t=fn("start",oe),dt=fn("stop",ne),Pt=fn("stop",ae),yn=fn("stop",Se=>{be(Se),nt.current===!1&&ln(!1),N&&N(Se)},!1),On=Pa(Se=>{pt.current||(pt.current=Se.currentTarget),xe(Se),nt.current===!0&&(ln(!0),B&&B(Se)),W&&W(Se)}),Ln=()=>{const Se=pt.current;return g&&g!=="button"&&!(Se.tagName==="A"&&Se.href)},In=m.exports.useRef(!1),Xn=Pa(Se=>{z&&!In.current&&Ut&&Ze.current&&Se.key===" "&&(In.current=!0,Ze.current.stop(Se,()=>{Ze.current.start(Se)})),Se.target===Se.currentTarget&&Ln()&&Se.key===" "&&Se.preventDefault(),O&&O(Se),Se.target===Se.currentTarget&&Ln()&&Se.key==="Enter"&&!b&&(Se.preventDefault(),T&&T(Se))}),Ie=Pa(Se=>{z&&Se.key===" "&&Ze.current&&Ut&&!Se.defaultPrevented&&(In.current=!1,Ze.current.stop(Se,()=>{Ze.current.pulsate(Se)})),S&&S(Se),T&&Se.target===Se.currentTarget&&Ln()&&Se.key===" "&&!Se.defaultPrevented&&T(Se)});let Je=g;Je==="button"&&(Ee.href||Ee.to)&&(Je=F);const re={};Je==="button"?(re.type=Oe===void 0?"button":Oe,re.disabled=b):(!Ee.href&&!Ee.to&&(re.role="button"),b&&(re["aria-disabled"]=b));const ce=io(n,on,pt),Pe=Ve({},r,{centerRipple:u,component:g,disabled:b,disableRipple:A,disableTouchRipple:D,focusRipple:z,tabIndex:fe,focusVisible:Ut}),ve=voe(Pe);return At.exports.jsxs(yoe,Ve({as:Je,className:Nn(ve.root,o),ownerState:Pe,onBlur:yn,onClick:T,onContextMenu:Le,onFocus:On,onKeyDown:Xn,onKeyUp:Ie,onMouseDown:An,onMouseLeave:wt,onMouseUp:ft,onDragLeave:Xe,onTouchEnd:dt,onTouchMove:Pt,onTouchStart:_t,ref:ce,tabIndex:b?-1:fe,type:Oe},re,Ee,{children:[h,mn?At.exports.jsx(hoe,Ve({ref:ct,center:u},Re)):null]}))});var u0=_oe;function xoe(e){return Yr("MuiAlert",e)}const boe=Ir("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var MR=boe;function woe(e){return Yr("MuiIconButton",e)}const Eoe=Ir("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var Coe=Eoe;const Soe=["edge","children","className","color","disabled","disableFocusRipple","size"],koe=e=>{const{classes:t,disabled:n,color:r,edge:a,size:u}=e,h={root:["root",n&&"disabled",r!=="default"&&`color${_n(r)}`,a&&`edge${_n(a)}`,`size${_n(u)}`]};return ei(h,woe,t)},Toe=xn(u0,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${_n(n.color)}`],n.edge&&t[`edge${_n(n.edge)}`],t[`size${_n(n.size)}`]]}})(({theme:e,ownerState:t})=>Ve({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ji(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const r=(n=(e.vars||e).palette)==null?void 0:n[t.color];return Ve({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&Ve({color:r==null?void 0:r.main},!t.disableRipple&&{"&:hover":Ve({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ji(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${Coe.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),Aoe=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiIconButton"}),{edge:a=!1,children:u,className:h,color:o="default",disabled:g=!1,disableFocusRipple:b=!1,size:A="medium"}=r,D=Mn(r,Soe),z=Ve({},r,{edge:a,color:o,disabled:g,disableFocusRipple:b,size:A}),F=koe(z);return At.exports.jsx(Toe,Ve({className:Nn(F.root,h),centerRipple:!0,focusRipple:!b,disabled:g,ref:n,ownerState:z},D,{children:u}))});var DT=Aoe,Moe=Gd(At.exports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Ioe=Gd(At.exports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Poe=Gd(At.exports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Doe=Gd(At.exports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),pB=Gd(At.exports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const Roe=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Loe=e=>{const{variant:t,color:n,severity:r,classes:a}=e,u={root:["root",`${t}${_n(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return ei(u,xoe,a)},Ooe=xn(uf,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${_n(n.color||n.severity)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?r0:i0,r=e.palette.mode==="light"?i0:r0,a=t.color||t.severity;return Ve({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},a&&t.variant==="standard"&&{color:e.vars?e.vars.palette.Alert[`${a}Color`]:n(e.palette[a].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${a}StandardBg`]:r(e.palette[a].light,.9),[`& .${MR.icon}`]:e.vars?{color:e.vars.palette.Alert[`${a}IconColor`]}:{color:e.palette[a].main}},a&&t.variant==="outlined"&&{color:e.vars?e.vars.palette.Alert[`${a}Color`]:n(e.palette[a].light,.6),border:`1px solid ${(e.vars||e).palette[a].light}`,[`& .${MR.icon}`]:e.vars?{color:e.vars.palette.Alert[`${a}IconColor`]}:{color:e.palette[a].main}},a&&t.variant==="filled"&&Ve({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${a}FilledColor`],backgroundColor:e.vars.palette.Alert[`${a}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[a].dark:e.palette[a].main,color:e.palette.getContrastText(e.palette[a].main)}))}),zoe=xn("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Boe=xn("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),IR=xn("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),PR={success:At.exports.jsx(Moe,{fontSize:"inherit"}),warning:At.exports.jsx(Ioe,{fontSize:"inherit"}),error:At.exports.jsx(Poe,{fontSize:"inherit"}),info:At.exports.jsx(Doe,{fontSize:"inherit"})},Foe=m.exports.forwardRef(function(t,n){var r,a,u,h,o,g;const b=ti({props:t,name:"MuiAlert"}),{action:A,children:D,className:z,closeText:F="Close",color:N,components:T={},componentsProps:H={},icon:j,iconMapping:W=PR,onClose:B,role:O="alert",severity:S="success",slotProps:w={},slots:P={},variant:Y="standard"}=b,ne=Mn(b,Roe),ae=Ve({},b,{color:N,severity:S,variant:Y}),oe=Loe(ae),fe=(r=(a=P.closeButton)!=null?a:T.CloseButton)!=null?r:DT,Re=(u=(h=P.closeIcon)!=null?h:T.CloseIcon)!=null?u:pB,Be=(o=w.closeButton)!=null?o:H.closeButton,Oe=(g=w.closeIcon)!=null?g:H.closeIcon;return At.exports.jsxs(Ooe,Ve({role:O,elevation:0,ownerState:ae,className:Nn(oe.root,z),ref:n},ne,{children:[j!==!1?At.exports.jsx(zoe,{ownerState:ae,className:oe.icon,children:j||W[S]||PR[S]}):null,At.exports.jsx(Boe,{ownerState:ae,className:oe.message,children:D}),A!=null?At.exports.jsx(IR,{ownerState:ae,className:oe.action,children:A}):null,A==null&&B?At.exports.jsx(IR,{ownerState:ae,className:oe.action,children:At.exports.jsx(fe,Ve({size:"small","aria-label":F,title:F,color:"inherit",onClick:B},Be,{children:At.exports.jsx(Re,Ve({fontSize:"small"},Oe))}))}):null]}))});var Noe=Foe;const Uoe=["components","componentsProps","slots","slotProps"],joe=xn(gie,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),$oe=m.exports.forwardRef(function(t,n){var r;const a=Z5(),u=ti({props:t,name:"MuiPopper"}),{components:h,componentsProps:o,slots:g,slotProps:b}=u,A=Mn(u,Uoe),D=(r=g==null?void 0:g.root)!=null?r:h==null?void 0:h.Root;return At.exports.jsx(joe,Ve({direction:a==null?void 0:a.direction,slots:{root:D},slotProps:b!=null?b:o},A,{ref:n}))});var fB=$oe;function Voe(e){return Yr("MuiListSubheader",e)}Ir("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Hoe=["className","color","component","disableGutters","disableSticky","inset"],Woe=e=>{const{classes:t,color:n,disableGutters:r,inset:a,disableSticky:u}=e,h={root:["root",n!=="default"&&`color${_n(n)}`,!r&&"gutters",a&&"inset",!u&&"sticky"]};return ei(h,Voe,t)},Goe=xn("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${_n(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>Ve({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),mB=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiListSubheader"}),{className:a,color:u="default",component:h="li",disableGutters:o=!1,disableSticky:g=!1,inset:b=!1}=r,A=Mn(r,Hoe),D=Ve({},r,{color:u,component:h,disableGutters:o,disableSticky:g,inset:b}),z=Woe(D);return At.exports.jsx(Goe,Ve({as:h,className:Nn(z.root,a),ref:n,ownerState:D},A))});mB.muiSkipListHighlight=!0;var qoe=mB,Zoe=Gd(At.exports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Xoe(e){return Yr("MuiChip",e)}const Koe=Ir("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]);var Ar=Koe;const Yoe=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Joe=e=>{const{classes:t,disabled:n,size:r,color:a,iconColor:u,onDelete:h,clickable:o,variant:g}=e,b={root:["root",g,n&&"disabled",`size${_n(r)}`,`color${_n(a)}`,o&&"clickable",o&&`clickableColor${_n(a)}`,h&&"deletable",h&&`deletableColor${_n(a)}`,`${g}${_n(a)}`],label:["label",`label${_n(r)}`],avatar:["avatar",`avatar${_n(r)}`,`avatarColor${_n(a)}`],icon:["icon",`icon${_n(r)}`,`iconColor${_n(u)}`],deleteIcon:["deleteIcon",`deleteIcon${_n(r)}`,`deleteIconColor${_n(a)}`,`deleteIcon${_n(g)}Color${_n(a)}`]};return ei(b,Xoe,t)},Qoe=xn("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:a,clickable:u,onDelete:h,size:o,variant:g}=n;return[{[`& .${Ar.avatar}`]:t.avatar},{[`& .${Ar.avatar}`]:t[`avatar${_n(o)}`]},{[`& .${Ar.avatar}`]:t[`avatarColor${_n(r)}`]},{[`& .${Ar.icon}`]:t.icon},{[`& .${Ar.icon}`]:t[`icon${_n(o)}`]},{[`& .${Ar.icon}`]:t[`iconColor${_n(a)}`]},{[`& .${Ar.deleteIcon}`]:t.deleteIcon},{[`& .${Ar.deleteIcon}`]:t[`deleteIcon${_n(o)}`]},{[`& .${Ar.deleteIcon}`]:t[`deleteIconColor${_n(r)}`]},{[`& .${Ar.deleteIcon}`]:t[`deleteIcon${_n(g)}Color${_n(r)}`]},t.root,t[`size${_n(o)}`],t[`color${_n(r)}`],u&&t.clickable,u&&r!=="default"&&t[`clickableColor${_n(r)})`],h&&t.deletable,h&&r!=="default"&&t[`deletableColor${_n(r)}`],t[g],t[`${g}${_n(r)}`]]}})(({theme:e,ownerState:t})=>{const n=ji(e.palette.text.primary,.26),r=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return Ve({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Ar.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Ar.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:r,fontSize:e.typography.pxToRem(12)},[`& .${Ar.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Ar.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Ar.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Ar.icon}`]:Ve({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&Ve({color:e.vars?e.vars.palette.Chip.defaultIconColor:r},t.color!=="default"&&{color:"inherit"})),[`& .${Ar.deleteIcon}`]:Ve({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:n,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:ji(n,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:ji(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${Ar.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ji(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${Ar.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>Ve({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ji(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Ar.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ji(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${Ar.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>Ve({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Ar.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Ar.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Ar.avatar}`]:{marginLeft:4},[`& .${Ar.avatarSmall}`]:{marginLeft:2},[`& .${Ar.icon}`]:{marginLeft:4},[`& .${Ar.iconSmall}`]:{marginLeft:2},[`& .${Ar.deleteIcon}`]:{marginRight:5},[`& .${Ar.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:ji(e.palette[t.color].main,.7)}`,[`&.${Ar.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ji(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${Ar.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:ji(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${Ar.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:ji(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),eae=xn("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${_n(r)}`]]}})(({ownerState:e})=>Ve({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function DR(e){return e.key==="Backspace"||e.key==="Delete"}const tae=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiChip"}),{avatar:a,className:u,clickable:h,color:o="default",component:g,deleteIcon:b,disabled:A=!1,icon:D,label:z,onClick:F,onDelete:N,onKeyDown:T,onKeyUp:H,size:j="medium",variant:W="filled",tabIndex:B,skipFocusWhenDisabled:O=!1}=r,S=Mn(r,Yoe),w=m.exports.useRef(null),P=io(w,n),Y=ct=>{ct.stopPropagation(),N&&N(ct)},ne=ct=>{ct.currentTarget===ct.target&&DR(ct)&&ct.preventDefault(),T&&T(ct)},ae=ct=>{ct.currentTarget===ct.target&&(N&&DR(ct)?N(ct):ct.key==="Escape"&&w.current&&w.current.blur()),H&&H(ct)},oe=h!==!1&&F?!0:h,fe=oe||N?u0:g||"div",Re=Ve({},r,{component:fe,disabled:A,size:j,color:o,iconColor:m.exports.isValidElement(D)&&D.props.color||o,onDelete:!!N,clickable:oe,variant:W}),Be=Joe(Re),Oe=fe===u0?Ve({component:g||"div",focusVisibleClassName:Be.focusVisible},N&&{disableRipple:!0}):{};let Ee=null;N&&(Ee=b&&m.exports.isValidElement(b)?m.exports.cloneElement(b,{className:Nn(b.props.className,Be.deleteIcon),onClick:Y}):At.exports.jsx(Zoe,{className:Nn(Be.deleteIcon),onClick:Y}));let pt=null;a&&m.exports.isValidElement(a)&&(pt=m.exports.cloneElement(a,{className:Nn(Be.avatar,a.props.className)}));let Ze=null;return D&&m.exports.isValidElement(D)&&(Ze=m.exports.cloneElement(D,{className:Nn(Be.icon,D.props.className)})),At.exports.jsxs(Qoe,Ve({as:fe,className:Nn(Be.root,u),disabled:oe&&A?!0:void 0,onClick:F,onKeyDown:ne,onKeyUp:ae,ref:P,tabIndex:O&&A?-1:B,ownerState:Re},Oe,S,{children:[pt||Ze,At.exports.jsx(eae,{className:Nn(Be.label),ownerState:Re,children:z}),Ee]}))});var nae=tae;function df({props:e,states:t,muiFormControl:n}){return t.reduce((r,a)=>(r[a]=e[a],n&&typeof e[a]=="undefined"&&(r[a]=n[a]),r),{})}const rae=m.exports.createContext(void 0);var RT=rae;function hf(){return m.exports.useContext(RT)}function iae(e){return At.exports.jsx(Vee,Ve({},e,{defaultTheme:Ab}))}function RR(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function LT(e,t=!1){return e&&(RR(e.value)&&e.value!==""||t&&RR(e.defaultValue)&&e.defaultValue!=="")}function oae(e){return e.startAdornment}function aae(e){return Yr("MuiInputBase",e)}const sae=Ir("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Ta=sae;const lae=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Db=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${_n(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Rb=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},cae=e=>{const{classes:t,color:n,disabled:r,error:a,endAdornment:u,focused:h,formControl:o,fullWidth:g,hiddenLabel:b,multiline:A,readOnly:D,size:z,startAdornment:F,type:N}=e,T={root:["root",`color${_n(n)}`,r&&"disabled",a&&"error",g&&"fullWidth",h&&"focused",o&&"formControl",z==="small"&&"sizeSmall",A&&"multiline",F&&"adornedStart",u&&"adornedEnd",b&&"hiddenLabel",D&&"readOnly"],input:["input",r&&"disabled",N==="search"&&"inputTypeSearch",A&&"inputMultiline",z==="small"&&"inputSizeSmall",b&&"inputHiddenLabel",F&&"inputAdornedStart",u&&"inputAdornedEnd",D&&"readOnly"]};return ei(T,aae,t)},Lb=xn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Db})(({theme:e,ownerState:t})=>Ve({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ta.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&Ve({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Ob=xn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Rb})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=Ve({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),a={opacity:"0 !important"},u=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return Ve({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ta.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":u,"&:focus::-moz-placeholder":u,"&:focus:-ms-input-placeholder":u,"&:focus::-ms-input-placeholder":u},[`&.${Ta.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),uae=At.exports.jsx(iae,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),dae=m.exports.forwardRef(function(t,n){var r;const a=ti({props:t,name:"MuiInputBase"}),{"aria-describedby":u,autoComplete:h,autoFocus:o,className:g,components:b={},componentsProps:A={},defaultValue:D,disabled:z,disableInjectingGlobalStyles:F,endAdornment:N,fullWidth:T=!1,id:H,inputComponent:j="input",inputProps:W={},inputRef:B,maxRows:O,minRows:S,multiline:w=!1,name:P,onBlur:Y,onChange:ne,onClick:ae,onFocus:oe,onKeyDown:fe,onKeyUp:Re,placeholder:Be,readOnly:Oe,renderSuffix:Ee,rows:pt,slotProps:Ze={},slots:ct={},startAdornment:nt,type:xe="text",value:be}=a,on=Mn(a,lae),Ut=W.value!=null?W.value:be,{current:ln}=m.exports.useRef(Ut!=null),tn=m.exports.useRef(),un=m.exports.useCallback(ve=>{},[]),mn=io(tn,B,W.ref,un),[fn,An]=m.exports.useState(!1),Le=hf(),Xe=df({props:a,muiFormControl:Le,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Xe.focused=Le?Le.focused:fn,m.exports.useEffect(()=>{!Le&&z&&fn&&(An(!1),Y&&Y())},[Le,z,fn,Y]);const ft=Le&&Le.onFilled,wt=Le&&Le.onEmpty,_t=m.exports.useCallback(ve=>{LT(ve)?ft&&ft():wt&&wt()},[ft,wt]);Kl(()=>{ln&&_t({value:Ut})},[Ut,_t,ln]);const dt=ve=>{if(Xe.disabled){ve.stopPropagation();return}oe&&oe(ve),W.onFocus&&W.onFocus(ve),Le&&Le.onFocus?Le.onFocus(ve):An(!0)},Pt=ve=>{Y&&Y(ve),W.onBlur&&W.onBlur(ve),Le&&Le.onBlur?Le.onBlur(ve):An(!1)},yn=(ve,...Se)=>{if(!ln){const yt=ve.target||tn.current;if(yt==null)throw new Error(su(1));_t({value:yt.value})}W.onChange&&W.onChange(ve,...Se),ne&&ne(ve,...Se)};m.exports.useEffect(()=>{_t(tn.current)},[]);const On=ve=>{tn.current&&ve.currentTarget===ve.target&&tn.current.focus(),ae&&ae(ve)};let Ln=j,In=W;w&&Ln==="input"&&(pt?In=Ve({type:void 0,minRows:pt,maxRows:pt},In):In=Ve({type:void 0,maxRows:O,minRows:S},In),Ln=Lie);const Xn=ve=>{_t(ve.animationName==="mui-auto-fill-cancel"?tn.current:{value:"x"})};m.exports.useEffect(()=>{Le&&Le.setAdornedStart(Boolean(nt))},[Le,nt]);const Ie=Ve({},a,{color:Xe.color||"primary",disabled:Xe.disabled,endAdornment:N,error:Xe.error,focused:Xe.focused,formControl:Le,fullWidth:T,hiddenLabel:Xe.hiddenLabel,multiline:w,size:Xe.size,startAdornment:nt,type:xe}),Je=cae(Ie),re=ct.root||b.Root||Lb,ce=Ze.root||A.root||{},Pe=ct.input||b.Input||Ob;return In=Ve({},In,(r=Ze.input)!=null?r:A.input),At.exports.jsxs(m.exports.Fragment,{children:[!F&&uae,At.exports.jsxs(re,Ve({},ce,!o0(re)&&{ownerState:Ve({},Ie,ce.ownerState)},{ref:n,onClick:On},on,{className:Nn(Je.root,ce.className,g,Oe&&"MuiInputBase-readOnly"),children:[nt,At.exports.jsx(RT.Provider,{value:null,children:At.exports.jsx(Pe,Ve({ownerState:Ie,"aria-invalid":Xe.error,"aria-describedby":u,autoComplete:h,autoFocus:o,defaultValue:D,disabled:Xe.disabled,id:H,onAnimationStart:Xn,name:P,placeholder:Be,readOnly:Oe,required:Xe.required,rows:pt,value:Ut,onKeyDown:fe,onKeyUp:Re,type:xe},In,!o0(Pe)&&{as:Ln,ownerState:Ve({},Ie,In.ownerState)},{ref:mn,className:Nn(Je.input,In.className,Oe&&"MuiInputBase-readOnly"),onBlur:Pt,onChange:yn,onFocus:dt}))}),N,Ee?Ee(Ve({},Xe,{startAdornment:nt})):null]}))]})});var OT=dae;function hae(e){return Yr("MuiInput",e)}const pae=Ve({},Ta,Ir("MuiInput",["root","underline","input"]));var Vc=pae;function fae(e){return Yr("MuiOutlinedInput",e)}const mae=Ve({},Ta,Ir("MuiOutlinedInput",["root","notchedOutline","input"]));var il=mae;function gae(e){return Yr("MuiFilledInput",e)}const vae=Ve({},Ta,Ir("MuiFilledInput",["root","underline","input"]));var Aa=vae,gB=Gd(At.exports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function yae(e){return Yr("MuiAutocomplete",e)}const _ae=Ir("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var ar=_ae,LR,OR;const xae=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],bae=e=>{const{classes:t,disablePortal:n,expanded:r,focused:a,fullWidth:u,hasClearIcon:h,hasPopupIcon:o,inputFocused:g,popupOpen:b,size:A}=e,D={root:["root",r&&"expanded",a&&"focused",u&&"fullWidth",h&&"hasClearIcon",o&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",g&&"inputFocused"],tag:["tag",`tagSize${_n(A)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",b&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return ei(D,yae,t)},wae=xn("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:a,hasPopupIcon:u,inputFocused:h,size:o}=n;return[{[`& .${ar.tag}`]:t.tag},{[`& .${ar.tag}`]:t[`tagSize${_n(o)}`]},{[`& .${ar.inputRoot}`]:t.inputRoot},{[`& .${ar.input}`]:t.input},{[`& .${ar.input}`]:h&&t.inputFocused},t.root,r&&t.fullWidth,u&&t.hasPopupIcon,a&&t.hasClearIcon]}})(({ownerState:e})=>Ve({[`&.${ar.focused} .${ar.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${ar.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${ar.tag}`]:Ve({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${ar.inputRoot}`]:{flexWrap:"wrap",[`.${ar.hasPopupIcon}&, .${ar.hasClearIcon}&`]:{paddingRight:26+4},[`.${ar.hasPopupIcon}.${ar.hasClearIcon}&`]:{paddingRight:52+4},[`& .${ar.input}`]:{width:0,minWidth:30}},[`& .${Vc.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Vc.root}.${Ta.sizeSmall}`]:{[`& .${Vc.input}`]:{padding:"2px 4px 3px 0"}},[`& .${il.root}`]:{padding:9,[`.${ar.hasPopupIcon}&, .${ar.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${ar.hasPopupIcon}.${ar.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${ar.input}`]:{padding:"7.5px 4px 7.5px 6px"},[`& .${ar.endAdornment}`]:{right:9}},[`& .${il.root}.${Ta.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${ar.input}`]:{padding:"2.5px 4px 2.5px 6px"}},[`& .${Aa.root}`]:{paddingTop:19,paddingLeft:8,[`.${ar.hasPopupIcon}&, .${ar.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${ar.hasPopupIcon}.${ar.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${Aa.input}`]:{padding:"7px 4px"},[`& .${ar.endAdornment}`]:{right:9}},[`& .${Aa.root}.${Ta.sizeSmall}`]:{paddingBottom:1,[`& .${Aa.input}`]:{padding:"2.5px 4px"}},[`& .${Ta.hiddenLabel}`]:{paddingTop:8},[`& .${Aa.root}.${Ta.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${ar.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Aa.root}.${Ta.hiddenLabel}.${Ta.sizeSmall}`]:{[`& .${ar.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${ar.input}`]:Ve({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),Eae=xn("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),Cae=xn(DT,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Sae=xn(DT,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>Ve({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>Ve({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),kae=xn(fB,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ar.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>Ve({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),Tae=xn(uf,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>Ve({},e.typography.body1,{overflow:"auto"})),Aae=xn("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Mae=xn("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Iae=xn("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${ar.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${ar.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${ar.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ji(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${ar.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ji(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${ar.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ji(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),Pae=xn(qoe,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),Dae=xn("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${ar.option}`]:{paddingLeft:24}}),Rae=m.exports.forwardRef(function(t,n){var r,a,u,h;const o=ti({props:t,name:"MuiAutocomplete"}),{autoComplete:g=!1,autoHighlight:b=!1,autoSelect:A=!1,blurOnSelect:D=!1,ChipProps:z,className:F,clearIcon:N=LR||(LR=At.exports.jsx(pB,{fontSize:"small"})),clearOnBlur:T=!o.freeSolo,clearOnEscape:H=!1,clearText:j="Clear",closeText:W="Close",componentsProps:B={},defaultValue:O=o.multiple?[]:null,disableClearable:S=!1,disableCloseOnSelect:w=!1,disabled:P=!1,disabledItemsFocusable:Y=!1,disableListWrap:ne=!1,disablePortal:ae=!1,filterSelectedOptions:oe=!1,forcePopupIcon:fe="auto",freeSolo:Re=!1,fullWidth:Be=!1,getLimitTagsText:Oe=pe=>`+${pe}`,getOptionLabel:Ee=pe=>{var Ae;return(Ae=pe.label)!=null?Ae:pe},groupBy:pt,handleHomeEndKeys:Ze=!o.freeSolo,includeInputInList:ct=!1,limitTags:nt=-1,ListboxComponent:xe="ul",ListboxProps:be,loading:on=!1,loadingText:Ut="Loading\u2026",multiple:ln=!1,noOptionsText:tn="No options",openOnFocus:un=!1,openText:mn="Open",PaperComponent:fn=uf,PopperComponent:An=fB,popupIcon:Le=OR||(OR=At.exports.jsx(gB,{})),readOnly:Xe=!1,renderGroup:ft,renderInput:wt,renderOption:_t,renderTags:dt,selectOnFocus:Pt=!o.freeSolo,size:yn="medium",slotProps:On={}}=o,Ln=Mn(o,xae),{getRootProps:In,getInputProps:Xn,getInputLabelProps:Ie,getPopupIndicatorProps:Je,getClearProps:re,getTagProps:ce,getListboxProps:Pe,getOptionProps:ve,value:Se,dirty:yt,expanded:Nt,id:Kt,popupOpen:Bn,focused:Tn,focusedTag:Vt,anchorEl:Rn,setAnchorEl:ur,inputValue:Fn,groupedOptions:Sr}=Fie(Ve({},o,{componentName:"Autocomplete"})),dr=!S&&!P&&yt&&!Xe,Pr=(!Re||fe===!0)&&fe!==!1,Yn=Ve({},o,{disablePortal:ae,expanded:Nt,focused:Tn,fullWidth:Be,hasClearIcon:dr,hasPopupIcon:Pr,inputFocused:Vt===-1,popupOpen:Bn,size:yn}),Qn=bae(Yn);let Ur;if(ln&&Se.length>0){const pe=Ae=>Ve({className:Qn.tag,disabled:P},ce(Ae));dt?Ur=dt(Se,pe,Yn):Ur=Se.map((Ae,We)=>At.exports.jsx(nae,Ve({label:Ee(Ae),size:yn},pe({index:We}),z)))}if(nt>-1&&Array.isArray(Ur)){const pe=Ur.length-nt;!Tn&&pe>0&&(Ur=Ur.splice(0,nt),Ur.push(At.exports.jsx("span",{className:Qn.tag,children:Oe(pe)},Ur.length)))}const Bi=ft||(pe=>At.exports.jsxs("li",{children:[At.exports.jsx(Pae,{className:Qn.groupLabel,ownerState:Yn,component:"div",children:pe.group}),At.exports.jsx(Dae,{className:Qn.groupUl,ownerState:Yn,children:pe.children})]},pe.key)),si=_t||((pe,Ae)=>At.exports.jsx("li",Ve({},pe,{children:Ee(Ae)}))),Fi=(pe,Ae)=>{const We=ve({option:pe,index:Ae});return si(Ve({},We,{className:Qn.option}),pe,{selected:We["aria-selected"],index:Ae,inputValue:Fn})},oo=(r=On.clearIndicator)!=null?r:B.clearIndicator,_e=(a=On.paper)!=null?a:B.paper,te=(u=On.popper)!=null?u:B.popper,se=(h=On.popupIndicator)!=null?h:B.popupIndicator;return At.exports.jsxs(m.exports.Fragment,{children:[At.exports.jsx(wae,Ve({ref:n,className:Nn(Qn.root,F),ownerState:Yn},In(Ln),{children:wt({id:Kt,disabled:P,fullWidth:!0,size:yn==="small"?"small":void 0,InputLabelProps:Ie(),InputProps:Ve({ref:ur,className:Qn.inputRoot,startAdornment:Ur},(dr||Pr)&&{endAdornment:At.exports.jsxs(Eae,{className:Qn.endAdornment,ownerState:Yn,children:[dr?At.exports.jsx(Cae,Ve({},re(),{"aria-label":j,title:j,ownerState:Yn},oo,{className:Nn(Qn.clearIndicator,oo==null?void 0:oo.className),children:N})):null,Pr?At.exports.jsx(Sae,Ve({},Je(),{disabled:P,"aria-label":Bn?W:mn,title:Bn?W:mn,ownerState:Yn},se,{className:Nn(Qn.popupIndicator,se==null?void 0:se.className),children:Le})):null]})}),inputProps:Ve({className:Qn.input,disabled:P,readOnly:Xe},Xn())})})),Rn?At.exports.jsx(kae,Ve({as:An,disablePortal:ae,style:{width:Rn?Rn.clientWidth:null},ownerState:Yn,role:"presentation",anchorEl:Rn,open:Bn},te,{className:Nn(Qn.popper,te==null?void 0:te.className),children:At.exports.jsxs(Tae,Ve({ownerState:Yn,as:fn},_e,{className:Nn(Qn.paper,_e==null?void 0:_e.className),children:[on&&Sr.length===0?At.exports.jsx(Aae,{className:Qn.loading,ownerState:Yn,children:Ut}):null,Sr.length===0&&!Re&&!on?At.exports.jsx(Mae,{className:Qn.noOptions,ownerState:Yn,role:"presentation",onMouseDown:pe=>{pe.preventDefault()},children:tn}):null,Sr.length>0?At.exports.jsx(Iae,Ve({as:xe,className:Qn.listbox,ownerState:Yn},Pe(),be,{children:Sr.map((pe,Ae)=>pt?Bi({key:pe.key,group:pe.group,children:pe.options.map((We,Qe)=>Fi(We,pe.index+Qe))}):Fi(pe,Ae))})):null]}))})):null]})});var Lae=Rae;const Oae=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],zae={entering:{opacity:1},entered:{opacity:1}},Bae=m.exports.forwardRef(function(t,n){const r=Mb(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:u,appear:h=!0,children:o,easing:g,in:b,onEnter:A,onEntered:D,onEntering:z,onExit:F,onExited:N,onExiting:T,style:H,timeout:j=a,TransitionComponent:W=dB}=t,B=Mn(t,Oae),O=m.exports.useRef(null),S=io(O,o.ref,n),w=Be=>Oe=>{if(Be){const Ee=O.current;Oe===void 0?Be(Ee):Be(Ee,Oe)}},P=w(z),Y=w((Be,Oe)=>{hB(Be);const Ee=c0({style:H,timeout:j,easing:g},{mode:"enter"});Be.style.webkitTransition=r.transitions.create("opacity",Ee),Be.style.transition=r.transitions.create("opacity",Ee),A&&A(Be,Oe)}),ne=w(D),ae=w(T),oe=w(Be=>{const Oe=c0({style:H,timeout:j,easing:g},{mode:"exit"});Be.style.webkitTransition=r.transitions.create("opacity",Oe),Be.style.transition=r.transitions.create("opacity",Oe),F&&F(Be)}),fe=w(N),Re=Be=>{u&&u(O.current,Be)};return At.exports.jsx(W,Ve({appear:h,in:b,nodeRef:O,onEnter:Y,onEntered:ne,onEntering:P,onExit:oe,onExited:fe,onExiting:ae,addEndListener:Re,timeout:j},B,{children:(Be,Oe)=>m.exports.cloneElement(o,Ve({style:Ve({opacity:0,visibility:Be==="exited"&&!b?"hidden":void 0},zae[Be],H,o.props.style),ref:S},Oe))}))});var Fae=Bae;function Nae(e){return Yr("MuiBackdrop",e)}Ir("MuiBackdrop",["root","invisible"]);const Uae=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],jae=e=>{const{classes:t,invisible:n}=e;return ei({root:["root",n&&"invisible"]},Nae,t)},$ae=xn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>Ve({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),Vae=m.exports.forwardRef(function(t,n){var r,a,u;const h=ti({props:t,name:"MuiBackdrop"}),{children:o,className:g,component:b="div",components:A={},componentsProps:D={},invisible:z=!1,open:F,slotProps:N={},slots:T={},TransitionComponent:H=Fae,transitionDuration:j}=h,W=Mn(h,Uae),B=Ve({},h,{component:b,invisible:z}),O=jae(B),S=(r=N.root)!=null?r:D.root;return At.exports.jsx(H,Ve({in:F,timeout:j},W,{children:At.exports.jsx($ae,Ve({"aria-hidden":!0},S,{as:(a=(u=T.root)!=null?u:A.Root)!=null?a:b,className:Nn(O.root,g,S==null?void 0:S.className),ownerState:Ve({},B,S==null?void 0:S.ownerState),classes:O,ref:n,children:o}))}))});var Hae=Vae;const Wae=K5(),Gae=qte({defaultTheme:Wae,defaultClassName:"MuiBox-root",generateClassName:w5.generate});var qae=Gae;const Zae=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],Xae=xn("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>Ve({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),Kae=xn(Hae,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),Yae=m.exports.forwardRef(function(t,n){var r,a,u,h,o,g;const b=ti({name:"MuiModal",props:t}),{BackdropComponent:A=Kae,BackdropProps:D,classes:z,className:F,closeAfterTransition:N=!1,children:T,component:H,components:j={},componentsProps:W={},disableAutoFocus:B=!1,disableEnforceFocus:O=!1,disableEscapeKeyDown:S=!1,disablePortal:w=!1,disableRestoreFocus:P=!1,disableScrollLock:Y=!1,hideBackdrop:ne=!1,keepMounted:ae=!1,slotProps:oe,slots:fe,theme:Re}=b,Be=Mn(b,Zae),[Oe,Ee]=m.exports.useState(!0),pt={closeAfterTransition:N,disableAutoFocus:B,disableEnforceFocus:O,disableEscapeKeyDown:S,disablePortal:w,disableRestoreFocus:P,disableScrollLock:Y,hideBackdrop:ne,keepMounted:ae},Ze=Ve({},b,pt,{exited:Oe}),ct=(r=(a=fe==null?void 0:fe.root)!=null?a:j.Root)!=null?r:Xae,nt=(u=(h=fe==null?void 0:fe.backdrop)!=null?h:j.Backdrop)!=null?u:A,xe=(o=oe==null?void 0:oe.root)!=null?o:W.root,be=(g=oe==null?void 0:oe.backdrop)!=null?g:W.backdrop;return At.exports.jsx(Mie,Ve({slots:{root:ct,backdrop:nt},slotProps:{root:()=>Ve({},aS(xe,Ze),!o0(ct)&&{as:H,theme:Re},{className:Nn(F,xe==null?void 0:xe.className,z==null?void 0:z.root,!Ze.open&&Ze.exited&&(z==null?void 0:z.hidden))}),backdrop:()=>Ve({},D,aS(be,Ze),{className:Nn(be==null?void 0:be.className,z==null?void 0:z.backdrop)})},onTransitionEnter:()=>Ee(!1),onTransitionExited:()=>Ee(!0),ref:n},Be,pt,{children:T}))});var Jae=Yae;const Qae=Ir("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var zR=Qae;const ese=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],tse=e=>{const{classes:t,disableUnderline:n}=e,a=ei({root:["root",!n&&"underline"],input:["input"]},gae,t);return Ve({},t,a)},nse=xn(Lb,{shouldForwardProp:e=>nc(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Db(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const r=e.palette.mode==="light",a=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",u=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",h=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Ve({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:h,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u}},[`&.${Aa.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:u},[`&.${Aa.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Aa.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Aa.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Aa.disabled}, .${Aa.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Aa.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&Ve({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),rse=xn(Ob,{name:"MuiFilledInput",slot:"Input",overridesResolver:Rb})(({theme:e,ownerState:t})=>Ve({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),vB=m.exports.forwardRef(function(t,n){var r,a,u,h;const o=ti({props:t,name:"MuiFilledInput"}),{components:g={},componentsProps:b,fullWidth:A=!1,inputComponent:D="input",multiline:z=!1,slotProps:F,slots:N={},type:T="text"}=o,H=Mn(o,ese),j=Ve({},o,{fullWidth:A,inputComponent:D,multiline:z,type:T}),W=tse(o),B={root:{ownerState:j},input:{ownerState:j}},O=(F!=null?F:b)?ns(F!=null?F:b,B):B,S=(r=(a=N.root)!=null?a:g.Root)!=null?r:nse,w=(u=(h=N.input)!=null?h:g.Input)!=null?u:rse;return At.exports.jsx(OT,Ve({slots:{root:S,input:w},componentsProps:O,fullWidth:A,inputComponent:D,multiline:z,ref:n,type:T},H,{classes:W}))});vB.muiName="Input";var yB=vB;function ise(e){return Yr("MuiFormControl",e)}Ir("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const ose=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],ase=e=>{const{classes:t,margin:n,fullWidth:r}=e,a={root:["root",n!=="none"&&`margin${_n(n)}`,r&&"fullWidth"]};return ei(a,ise,t)},sse=xn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>Ve({},t.root,t[`margin${_n(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>Ve({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),lse=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiFormControl"}),{children:a,className:u,color:h="primary",component:o="div",disabled:g=!1,error:b=!1,focused:A,fullWidth:D=!1,hiddenLabel:z=!1,margin:F="none",required:N=!1,size:T="medium",variant:H="outlined"}=r,j=Mn(r,ose),W=Ve({},r,{color:h,component:o,disabled:g,error:b,fullWidth:D,hiddenLabel:z,margin:F,required:N,size:T,variant:H}),B=ase(W),[O,S]=m.exports.useState(()=>{let Re=!1;return a&&m.exports.Children.forEach(a,Be=>{if(!uE(Be,["Input","Select"]))return;const Oe=uE(Be,["Select"])?Be.props.input:Be;Oe&&oae(Oe.props)&&(Re=!0)}),Re}),[w,P]=m.exports.useState(()=>{let Re=!1;return a&&m.exports.Children.forEach(a,Be=>{!uE(Be,["Input","Select"])||LT(Be.props,!0)&&(Re=!0)}),Re}),[Y,ne]=m.exports.useState(!1);g&&Y&&ne(!1);const ae=A!==void 0&&!g?A:Y;let oe;const fe=m.exports.useMemo(()=>({adornedStart:O,setAdornedStart:S,color:h,disabled:g,error:b,filled:w,focused:ae,fullWidth:D,hiddenLabel:z,size:T,onBlur:()=>{ne(!1)},onEmpty:()=>{P(!1)},onFilled:()=>{P(!0)},onFocus:()=>{ne(!0)},registerEffect:oe,required:N,variant:H}),[O,h,g,b,w,ae,D,z,oe,N,T,H]);return At.exports.jsx(RT.Provider,{value:fe,children:At.exports.jsx(sse,Ve({as:o,ownerState:W,className:Nn(B.root,u),ref:n},j,{children:a}))})});var _B=lse;function cse(e){return Yr("MuiFormHelperText",e)}const use=Ir("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var BR=use,FR;const dse=["children","className","component","disabled","error","filled","focused","margin","required","variant"],hse=e=>{const{classes:t,contained:n,size:r,disabled:a,error:u,filled:h,focused:o,required:g}=e,b={root:["root",a&&"disabled",u&&"error",r&&`size${_n(r)}`,n&&"contained",o&&"focused",h&&"filled",g&&"required"]};return ei(b,cse,t)},pse=xn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${_n(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>Ve({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${BR.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${BR.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),fse=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiFormHelperText"}),{children:a,className:u,component:h="p"}=r,o=Mn(r,dse),g=hf(),b=df({props:r,muiFormControl:g,states:["variant","size","disabled","error","filled","focused","required"]}),A=Ve({},r,{component:h,contained:b.variant==="filled"||b.variant==="outlined",variant:b.variant,size:b.size,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required}),D=hse(A);return At.exports.jsx(pse,Ve({as:h,ownerState:A,className:Nn(D.root,u),ref:n},o,{children:a===" "?FR||(FR=At.exports.jsx("span",{className:"notranslate",children:"\u200B"})):a}))});var mse=fse;function gse(e){return Yr("MuiFormLabel",e)}const vse=Ir("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);var kg=vse;const yse=["children","className","color","component","disabled","error","filled","focused","required"],_se=e=>{const{classes:t,color:n,focused:r,disabled:a,error:u,filled:h,required:o}=e,g={root:["root",`color${_n(n)}`,a&&"disabled",u&&"error",h&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",u&&"error"]};return ei(g,gse,t)},xse=xn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>Ve({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>Ve({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${kg.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${kg.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${kg.error}`]:{color:(e.vars||e).palette.error.main}})),bse=xn("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${kg.error}`]:{color:(e.vars||e).palette.error.main}})),wse=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiFormLabel"}),{children:a,className:u,component:h="label"}=r,o=Mn(r,yse),g=hf(),b=df({props:r,muiFormControl:g,states:["color","required","focused","disabled","error","filled"]}),A=Ve({},r,{color:b.color||"primary",component:h,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required}),D=_se(A);return At.exports.jsxs(xse,Ve({as:h,ownerState:A,className:Nn(D.root,u),ref:n},o,{children:[a,b.required&&At.exports.jsxs(bse,{ownerState:A,"aria-hidden":!0,className:D.asterisk,children:["\u2009","*"]})]}))});var Ese=wse;const Cse=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function pS(e){return`scale(${e}, ${e**2})`}const Sse={entering:{opacity:1,transform:pS(1)},entered:{opacity:1,transform:"none"}},vE=typeof navigator!="undefined"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),xB=m.exports.forwardRef(function(t,n){const{addEndListener:r,appear:a=!0,children:u,easing:h,in:o,onEnter:g,onEntered:b,onEntering:A,onExit:D,onExited:z,onExiting:F,style:N,timeout:T="auto",TransitionComponent:H=dB}=t,j=Mn(t,Cse),W=m.exports.useRef(),B=m.exports.useRef(),O=Mb(),S=m.exports.useRef(null),w=io(S,u.ref,n),P=Oe=>Ee=>{if(Oe){const pt=S.current;Ee===void 0?Oe(pt):Oe(pt,Ee)}},Y=P(A),ne=P((Oe,Ee)=>{hB(Oe);const{duration:pt,delay:Ze,easing:ct}=c0({style:N,timeout:T,easing:h},{mode:"enter"});let nt;T==="auto"?(nt=O.transitions.getAutoHeightDuration(Oe.clientHeight),B.current=nt):nt=pt,Oe.style.transition=[O.transitions.create("opacity",{duration:nt,delay:Ze}),O.transitions.create("transform",{duration:vE?nt:nt*.666,delay:Ze,easing:ct})].join(","),g&&g(Oe,Ee)}),ae=P(b),oe=P(F),fe=P(Oe=>{const{duration:Ee,delay:pt,easing:Ze}=c0({style:N,timeout:T,easing:h},{mode:"exit"});let ct;T==="auto"?(ct=O.transitions.getAutoHeightDuration(Oe.clientHeight),B.current=ct):ct=Ee,Oe.style.transition=[O.transitions.create("opacity",{duration:ct,delay:pt}),O.transitions.create("transform",{duration:vE?ct:ct*.666,delay:vE?pt:pt||ct*.333,easing:Ze})].join(","),Oe.style.opacity=0,Oe.style.transform=pS(.75),D&&D(Oe)}),Re=P(z),Be=Oe=>{T==="auto"&&(W.current=setTimeout(Oe,B.current||0)),r&&r(S.current,Oe)};return m.exports.useEffect(()=>()=>{clearTimeout(W.current)},[]),At.exports.jsx(H,Ve({appear:a,in:o,nodeRef:S,onEnter:ne,onEntered:ae,onEntering:Y,onExit:fe,onExited:Re,onExiting:oe,addEndListener:Be,timeout:T==="auto"?null:T},j,{children:(Oe,Ee)=>m.exports.cloneElement(u,Ve({style:Ve({opacity:0,transform:pS(.75),visibility:Oe==="exited"&&!o?"hidden":void 0},Sse[Oe],N,u.props.style),ref:w},Ee))}))});xB.muiSupportAuto=!0;var bB=xB;const kse=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Tse=e=>{const{classes:t,disableUnderline:n}=e,a=ei({root:["root",!n&&"underline"],input:["input"]},hae,t);return Ve({},t,a)},Ase=xn(Lb,{shouldForwardProp:e=>nc(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Db(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),Ve({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Vc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Vc.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Vc.disabled}, .${Vc.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Vc.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Mse=xn(Ob,{name:"MuiInput",slot:"Input",overridesResolver:Rb})({}),wB=m.exports.forwardRef(function(t,n){var r,a,u,h;const o=ti({props:t,name:"MuiInput"}),{disableUnderline:g,components:b={},componentsProps:A,fullWidth:D=!1,inputComponent:z="input",multiline:F=!1,slotProps:N,slots:T={},type:H="text"}=o,j=Mn(o,kse),W=Tse(o),O={root:{ownerState:{disableUnderline:g}}},S=(N!=null?N:A)?ns(N!=null?N:A,O):O,w=(r=(a=T.root)!=null?a:b.Root)!=null?r:Ase,P=(u=(h=T.input)!=null?h:b.Input)!=null?u:Mse;return At.exports.jsx(OT,Ve({slots:{root:w,input:P},slotProps:S,fullWidth:D,inputComponent:z,multiline:F,ref:n,type:H},j,{classes:W}))});wB.muiName="Input";var EB=wB;function Ise(e){return Yr("MuiInputLabel",e)}Ir("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Pse=["disableAnimation","margin","shrink","variant","className"],Dse=e=>{const{classes:t,formControl:n,size:r,shrink:a,disableAnimation:u,variant:h,required:o}=e,b=ei({root:["root",n&&"formControl",!u&&"animated",a&&"shrink",r==="small"&&"sizeSmall",h],asterisk:[o&&"asterisk"]},Ise,t);return Ve({},t,b)},Rse=xn(Ese,{shouldForwardProp:e=>nc(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${kg.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(({theme:e,ownerState:t})=>Ve({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&Ve({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&Ve({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&Ve({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Lse=m.exports.forwardRef(function(t,n){const r=ti({name:"MuiInputLabel",props:t}),{disableAnimation:a=!1,shrink:u,className:h}=r,o=Mn(r,Pse),g=hf();let b=u;typeof b=="undefined"&&g&&(b=g.filled||g.focused||g.adornedStart);const A=df({props:r,muiFormControl:g,states:["size","variant","required"]}),D=Ve({},r,{disableAnimation:a,formControl:g,shrink:b,size:A.size,variant:A.variant,required:A.required}),z=Dse(D);return At.exports.jsx(Rse,Ve({"data-shrink":b,ownerState:D,ref:n,className:Nn(z.root,h)},o,{classes:z}))});var CB=Lse;const Ose=m.exports.createContext({});var fS=Ose;function zse(e){return Yr("MuiList",e)}Ir("MuiList",["root","padding","dense","subheader"]);const Bse=["children","className","component","dense","disablePadding","subheader"],Fse=e=>{const{classes:t,disablePadding:n,dense:r,subheader:a}=e;return ei({root:["root",!n&&"padding",r&&"dense",a&&"subheader"]},zse,t)},Nse=xn("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>Ve({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),Use=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiList"}),{children:a,className:u,component:h="ul",dense:o=!1,disablePadding:g=!1,subheader:b}=r,A=Mn(r,Bse),D=m.exports.useMemo(()=>({dense:o}),[o]),z=Ve({},r,{component:h,dense:o,disablePadding:g}),F=Fse(z);return At.exports.jsx(fS.Provider,{value:D,children:At.exports.jsxs(Nse,Ve({as:h,className:Nn(F.root,u),ref:n,ownerState:z},A,{children:[b,a]}))})});var jse=Use;const $se=Ir("MuiListItemIcon",["root","alignItemsFlexStart"]);var NR=$se;const Vse=Ir("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var UR=Vse;const Hse=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function yE(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function jR(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function SB(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Ym(e,t,n,r,a,u){let h=!1,o=a(e,t,t?n:!1);for(;o;){if(o===e.firstChild){if(h)return!1;h=!0}const g=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!SB(o,u)||g)o=a(e,o,n);else return o.focus(),!0}return!1}const Wse=m.exports.forwardRef(function(t,n){const{actions:r,autoFocus:a=!1,autoFocusItem:u=!1,children:h,className:o,disabledItemsFocusable:g=!1,disableListWrap:b=!1,onKeyDown:A,variant:D="selectedMenu"}=t,z=Mn(t,Hse),F=m.exports.useRef(null),N=m.exports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Kl(()=>{a&&F.current.focus()},[a]),m.exports.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(B,O)=>{const S=!F.current.style.width;if(B.clientHeight<F.current.clientHeight&&S){const w=`${x5(vo(B))}px`;F.current.style[O.direction==="rtl"?"paddingLeft":"paddingRight"]=w,F.current.style.width=`calc(100% + ${w})`}return F.current}}),[]);const T=B=>{const O=F.current,S=B.key,w=vo(O).activeElement;if(S==="ArrowDown")B.preventDefault(),Ym(O,w,b,g,yE);else if(S==="ArrowUp")B.preventDefault(),Ym(O,w,b,g,jR);else if(S==="Home")B.preventDefault(),Ym(O,null,b,g,yE);else if(S==="End")B.preventDefault(),Ym(O,null,b,g,jR);else if(S.length===1){const P=N.current,Y=S.toLowerCase(),ne=performance.now();P.keys.length>0&&(ne-P.lastTime>500?(P.keys=[],P.repeating=!0,P.previousKeyMatched=!0):P.repeating&&Y!==P.keys[0]&&(P.repeating=!1)),P.lastTime=ne,P.keys.push(Y);const ae=w&&!P.repeating&&SB(w,P);P.previousKeyMatched&&(ae||Ym(O,w,!1,g,yE,P))?B.preventDefault():P.previousKeyMatched=!1}A&&A(B)},H=io(F,n);let j=-1;m.exports.Children.forEach(h,(B,O)=>{!m.exports.isValidElement(B)||(B.props.disabled||(D==="selectedMenu"&&B.props.selected||j===-1)&&(j=O),j===O&&(B.props.disabled||B.props.muiSkipListHighlight||B.type.muiSkipListHighlight)&&(j+=1,j>=h.length&&(j=-1)))});const W=m.exports.Children.map(h,(B,O)=>{if(O===j){const S={};return u&&(S.autoFocus=!0),B.props.tabIndex===void 0&&D==="selectedMenu"&&(S.tabIndex=0),m.exports.cloneElement(B,S)}return B});return At.exports.jsx(jse,Ve({role:"menu",ref:H,className:o,onKeyDown:T,tabIndex:a?0:-1},z,{children:W}))});var Gse=Wse;function qse(e){return Yr("MuiPopover",e)}Ir("MuiPopover",["root","paper"]);const Zse=["onEntering"],Xse=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function $R(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function VR(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function HR(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function _E(e){return typeof e=="function"?e():e}const Kse=e=>{const{classes:t}=e;return ei({root:["root"],paper:["paper"]},qse,t)},Yse=xn(Jae,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Jse=xn(uf,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Qse=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiPopover"}),{action:a,anchorEl:u,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:g="anchorEl",children:b,className:A,container:D,elevation:z=8,marginThreshold:F=16,open:N,PaperProps:T={},transformOrigin:H={vertical:"top",horizontal:"left"},TransitionComponent:j=bB,transitionDuration:W="auto",TransitionProps:{onEntering:B}={}}=r,O=Mn(r.TransitionProps,Zse),S=Mn(r,Xse),w=m.exports.useRef(),P=io(w,T.ref),Y=Ve({},r,{anchorOrigin:h,anchorReference:g,elevation:z,marginThreshold:F,PaperProps:T,transformOrigin:H,TransitionComponent:j,transitionDuration:W,TransitionProps:O}),ne=Kse(Y),ae=m.exports.useCallback(()=>{if(g==="anchorPosition")return o;const nt=_E(u),be=(nt&&nt.nodeType===1?nt:vo(w.current).body).getBoundingClientRect();return{top:be.top+$R(be,h.vertical),left:be.left+VR(be,h.horizontal)}},[u,h.horizontal,h.vertical,o,g]),oe=m.exports.useCallback(nt=>({vertical:$R(nt,H.vertical),horizontal:VR(nt,H.horizontal)}),[H.horizontal,H.vertical]),fe=m.exports.useCallback(nt=>{const xe={width:nt.offsetWidth,height:nt.offsetHeight},be=oe(xe);if(g==="none")return{top:null,left:null,transformOrigin:HR(be)};const on=ae();let Ut=on.top-be.vertical,ln=on.left-be.horizontal;const tn=Ut+xe.height,un=ln+xe.width,mn=Bd(_E(u)),fn=mn.innerHeight-F,An=mn.innerWidth-F;if(Ut<F){const Le=Ut-F;Ut-=Le,be.vertical+=Le}else if(tn>fn){const Le=tn-fn;Ut-=Le,be.vertical+=Le}if(ln<F){const Le=ln-F;ln-=Le,be.horizontal+=Le}else if(un>An){const Le=un-An;ln-=Le,be.horizontal+=Le}return{top:`${Math.round(Ut)}px`,left:`${Math.round(ln)}px`,transformOrigin:HR(be)}},[u,g,ae,oe,F]),[Re,Be]=m.exports.useState(N),Oe=m.exports.useCallback(()=>{const nt=w.current;if(!nt)return;const xe=fe(nt);xe.top!==null&&(nt.style.top=xe.top),xe.left!==null&&(nt.style.left=xe.left),nt.style.transformOrigin=xe.transformOrigin,Be(!0)},[fe]),Ee=(nt,xe)=>{B&&B(nt,xe),Oe()},pt=()=>{Be(!1)};m.exports.useEffect(()=>{N&&Oe()}),m.exports.useImperativeHandle(a,()=>N?{updatePosition:()=>{Oe()}}:null,[N,Oe]),m.exports.useEffect(()=>{if(!N)return;const nt=y5(()=>{Oe()}),xe=Bd(u);return xe.addEventListener("resize",nt),()=>{nt.clear(),xe.removeEventListener("resize",nt)}},[u,N,Oe]);let Ze=W;W==="auto"&&!j.muiSupportAuto&&(Ze=void 0);const ct=D||(u?vo(_E(u)).body:void 0);return At.exports.jsx(Yse,Ve({BackdropProps:{invisible:!0},className:Nn(ne.root,A),container:ct,open:N,ref:n,ownerState:Y},S,{children:At.exports.jsx(j,Ve({appear:!0,in:N,onEntering:Ee,onExited:pt,timeout:Ze},O,{children:At.exports.jsx(Jse,Ve({elevation:z},T,{ref:P,className:Nn(ne.paper,T.className)},Re?void 0:{style:Ve({},T.style,{opacity:0})},{ownerState:Y,children:b}))}))}))});var ele=Qse;function tle(e){return Yr("MuiMenu",e)}Ir("MuiMenu",["root","paper","list"]);const nle=["onEntering"],rle=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],ile={vertical:"top",horizontal:"right"},ole={vertical:"top",horizontal:"left"},ale=e=>{const{classes:t}=e;return ei({root:["root"],paper:["paper"],list:["list"]},tle,t)},sle=xn(ele,{shouldForwardProp:e=>nc(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lle=xn(uf,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),cle=xn(Gse,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),ule=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:u,disableAutoFocusItem:h=!1,MenuListProps:o={},onClose:g,open:b,PaperProps:A={},PopoverClasses:D,transitionDuration:z="auto",TransitionProps:{onEntering:F}={},variant:N="selectedMenu"}=r,T=Mn(r.TransitionProps,nle),H=Mn(r,rle),j=Mb(),W=j.direction==="rtl",B=Ve({},r,{autoFocus:a,disableAutoFocusItem:h,MenuListProps:o,onEntering:F,PaperProps:A,transitionDuration:z,TransitionProps:T,variant:N}),O=ale(B),S=a&&!h&&b,w=m.exports.useRef(null),P=(ae,oe)=>{w.current&&w.current.adjustStyleForScrollbar(ae,j),F&&F(ae,oe)},Y=ae=>{ae.key==="Tab"&&(ae.preventDefault(),g&&g(ae,"tabKeyDown"))};let ne=-1;return m.exports.Children.map(u,(ae,oe)=>{!m.exports.isValidElement(ae)||ae.props.disabled||(N==="selectedMenu"&&ae.props.selected||ne===-1)&&(ne=oe)}),At.exports.jsx(sle,Ve({onClose:g,anchorOrigin:{vertical:"bottom",horizontal:W?"right":"left"},transformOrigin:W?ile:ole,PaperProps:Ve({as:lle},A,{classes:Ve({},A.classes,{root:O.paper})}),className:O.root,open:b,ref:n,transitionDuration:z,TransitionProps:Ve({onEntering:P},T),ownerState:B},H,{classes:D,children:At.exports.jsx(cle,Ve({onKeyDown:Y,actions:w,autoFocus:a&&(ne===-1||h),autoFocusItem:S,variant:N},o,{className:Nn(O.list,o.className),children:u}))}))});var dle=ule;function hle(e){return Yr("MuiMenuItem",e)}const ple=Ir("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var Jm=ple;const fle=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],mle=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},gle=e=>{const{disabled:t,dense:n,divider:r,disableGutters:a,selected:u,classes:h}=e,g=ei({root:["root",n&&"dense",t&&"disabled",!a&&"gutters",r&&"divider",u&&"selected"]},hle,h);return Ve({},h,g)},vle=xn(u0,{shouldForwardProp:e=>nc(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:mle})(({theme:e,ownerState:t})=>Ve({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Jm.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ji(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Jm.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ji(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Jm.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ji(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:ji(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Jm.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Jm.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${zR.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${zR.inset}`]:{marginLeft:52},[`& .${UR.root}`]:{marginTop:0,marginBottom:0},[`& .${UR.inset}`]:{paddingLeft:36},[`& .${NR.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&Ve({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${NR.root} svg`]:{fontSize:"1.25rem"}}))),yle=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiMenuItem"}),{autoFocus:a=!1,component:u="li",dense:h=!1,divider:o=!1,disableGutters:g=!1,focusVisibleClassName:b,role:A="menuitem",tabIndex:D,className:z}=r,F=Mn(r,fle),N=m.exports.useContext(fS),T=m.exports.useMemo(()=>({dense:h||N.dense||!1,disableGutters:g}),[N.dense,h,g]),H=m.exports.useRef(null);Kl(()=>{a&&H.current&&H.current.focus()},[a]);const j=Ve({},r,{dense:T.dense,divider:o,disableGutters:g}),W=gle(r),B=io(H,n);let O;return r.disabled||(O=D!==void 0?D:-1),At.exports.jsx(fS.Provider,{value:T,children:At.exports.jsx(vle,Ve({ref:B,role:A,tabIndex:O,component:u,focusVisibleClassName:Nn(W.focusVisible,b),className:Nn(W.root,z)},F,{ownerState:j,classes:W}))})});var _le=yle;function xle(e){return Yr("MuiNativeSelect",e)}const ble=Ir("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var zT=ble;const wle=["className","disabled","IconComponent","inputRef","variant"],Ele=e=>{const{classes:t,variant:n,disabled:r,multiple:a,open:u}=e,h={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon",`icon${_n(n)}`,u&&"iconOpen",r&&"disabled"]};return ei(h,xle,t)},kB=({ownerState:e,theme:t})=>Ve({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Ve({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${zT.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),Cle=xn("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:nc,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],{[`&.${zT.multiple}`]:t.multiple}]}})(kB),TB=({ownerState:e,theme:t})=>Ve({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${zT.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),Sle=xn("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${_n(n.variant)}`],n.open&&t.iconOpen]}})(TB),kle=m.exports.forwardRef(function(t,n){const{className:r,disabled:a,IconComponent:u,inputRef:h,variant:o="standard"}=t,g=Mn(t,wle),b=Ve({},t,{disabled:a,variant:o}),A=Ele(b);return At.exports.jsxs(m.exports.Fragment,{children:[At.exports.jsx(Cle,Ve({ownerState:b,className:Nn(A.select,r),disabled:a,ref:h||n},g)),t.multiple?null:At.exports.jsx(Sle,{as:u,ownerState:b,className:A.icon})]})});var Tle=kle,WR;const Ale=["children","classes","className","label","notched"],Mle=xn("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Ile=xn("legend")(({ownerState:e,theme:t})=>Ve({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&Ve({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function Ple(e){const{className:t,label:n,notched:r}=e,a=Mn(e,Ale),u=n!=null&&n!=="",h=Ve({},e,{notched:r,withLabel:u});return At.exports.jsx(Mle,Ve({"aria-hidden":!0,className:t,ownerState:h},a,{children:At.exports.jsx(Ile,{ownerState:h,children:u?At.exports.jsx("span",{children:n}):WR||(WR=At.exports.jsx("span",{className:"notranslate",children:"\u200B"}))})}))}const Dle=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Rle=e=>{const{classes:t}=e,r=ei({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},fae,t);return Ve({},t,r)},Lle=xn(Lb,{shouldForwardProp:e=>nc(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Db})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Ve({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${il.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${il.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${il.focused} .${il.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${il.error} .${il.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${il.disabled} .${il.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&Ve({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),Ole=xn(Ple,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),zle=xn(Ob,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Rb})(({theme:e,ownerState:t})=>Ve({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),AB=m.exports.forwardRef(function(t,n){var r,a,u,h,o;const g=ti({props:t,name:"MuiOutlinedInput"}),{components:b={},fullWidth:A=!1,inputComponent:D="input",label:z,multiline:F=!1,notched:N,slots:T={},type:H="text"}=g,j=Mn(g,Dle),W=Rle(g),B=hf(),O=df({props:g,muiFormControl:B,states:["required"]}),S=Ve({},g,{color:O.color||"primary",disabled:O.disabled,error:O.error,focused:O.focused,formControl:B,fullWidth:A,hiddenLabel:O.hiddenLabel,multiline:F,size:O.size,type:H}),w=(r=(a=T.root)!=null?a:b.Root)!=null?r:Lle,P=(u=(h=T.input)!=null?h:b.Input)!=null?u:zle;return At.exports.jsx(OT,Ve({slots:{root:w,input:P},renderSuffix:Y=>At.exports.jsx(Ole,{ownerState:S,className:W.notchedOutline,label:z!=null&&z!==""&&O.required?o||(o=At.exports.jsxs(m.exports.Fragment,{children:[z,"\u2009","*"]})):z,notched:typeof N!="undefined"?N:Boolean(Y.startAdornment||Y.filled||Y.focused)}),fullWidth:A,inputComponent:D,multiline:F,ref:n,type:H},j,{classes:Ve({},W,{notchedOutline:null})}))});AB.muiName="Input";var MB=AB;function Ble(e){return Yr("MuiSelect",e)}const Fle=Ir("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var L_=Fle,GR;const Nle=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Ule=xn("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${L_.select}`]:t.select},{[`&.${L_.select}`]:t[n.variant]},{[`&.${L_.multiple}`]:t.multiple}]}})(kB,{[`&.${L_.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),jle=xn("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${_n(n.variant)}`],n.open&&t.iconOpen]}})(TB),$le=xn("input",{shouldForwardProp:e=>zne(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function qR(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Vle(e){return e==null||typeof e=="string"&&!e.trim()}const Hle=e=>{const{classes:t,variant:n,disabled:r,multiple:a,open:u}=e,h={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon",`icon${_n(n)}`,u&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return ei(h,Ble,t)},Wle=m.exports.forwardRef(function(t,n){const{"aria-describedby":r,"aria-label":a,autoFocus:u,autoWidth:h,children:o,className:g,defaultOpen:b,defaultValue:A,disabled:D,displayEmpty:z,IconComponent:F,inputRef:N,labelId:T,MenuProps:H={},multiple:j,name:W,onBlur:B,onChange:O,onClose:S,onFocus:w,onOpen:P,open:Y,readOnly:ne,renderValue:ae,SelectDisplayProps:oe={},tabIndex:fe,value:Re,variant:Be="standard"}=t,Oe=Mn(t,Nle),[Ee,pt]=xg({controlled:Re,default:A,name:"Select"}),[Ze,ct]=xg({controlled:Y,default:b,name:"Select"}),nt=m.exports.useRef(null),xe=m.exports.useRef(null),[be,on]=m.exports.useState(null),{current:Ut}=m.exports.useRef(Y!=null),[ln,tn]=m.exports.useState(),un=io(n,N),mn=m.exports.useCallback(Se=>{xe.current=Se,Se&&on(Se)},[]),fn=be==null?void 0:be.parentNode;m.exports.useImperativeHandle(un,()=>({focus:()=>{xe.current.focus()},node:nt.current,value:Ee}),[Ee]),m.exports.useEffect(()=>{b&&Ze&&be&&!Ut&&(tn(h?null:fn.clientWidth),xe.current.focus())},[be,h]),m.exports.useEffect(()=>{u&&xe.current.focus()},[u]),m.exports.useEffect(()=>{if(!T)return;const Se=vo(xe.current).getElementById(T);if(Se){const yt=()=>{getSelection().isCollapsed&&xe.current.focus()};return Se.addEventListener("click",yt),()=>{Se.removeEventListener("click",yt)}}},[T]);const An=(Se,yt)=>{Se?P&&P(yt):S&&S(yt),Ut||(tn(h?null:fn.clientWidth),ct(Se))},Le=Se=>{Se.button===0&&(Se.preventDefault(),xe.current.focus(),An(!0,Se))},Xe=Se=>{An(!1,Se)},ft=m.exports.Children.toArray(o),wt=Se=>{const yt=ft.map(Kt=>Kt.props.value).indexOf(Se.target.value);if(yt===-1)return;const Nt=ft[yt];pt(Nt.props.value),O&&O(Se,Nt)},_t=Se=>yt=>{let Nt;if(!!yt.currentTarget.hasAttribute("tabindex")){if(j){Nt=Array.isArray(Ee)?Ee.slice():[];const Kt=Ee.indexOf(Se.props.value);Kt===-1?Nt.push(Se.props.value):Nt.splice(Kt,1)}else Nt=Se.props.value;if(Se.props.onClick&&Se.props.onClick(yt),Ee!==Nt&&(pt(Nt),O)){const Kt=yt.nativeEvent||yt,Bn=new Kt.constructor(Kt.type,Kt);Object.defineProperty(Bn,"target",{writable:!0,value:{value:Nt,name:W}}),O(Bn,Se)}j||An(!1,yt)}},dt=Se=>{ne||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Se.key)!==-1&&(Se.preventDefault(),An(!0,Se))},Pt=be!==null&&Ze,yn=Se=>{!Pt&&B&&(Object.defineProperty(Se,"target",{writable:!0,value:{value:Ee,name:W}}),B(Se))};delete Oe["aria-invalid"];let On,Ln;const In=[];let Xn=!1;(LT({value:Ee})||z)&&(ae?On=ae(Ee):Xn=!0);const Ie=ft.map(Se=>{if(!m.exports.isValidElement(Se))return null;let yt;if(j){if(!Array.isArray(Ee))throw new Error(su(2));yt=Ee.some(Nt=>qR(Nt,Se.props.value)),yt&&Xn&&In.push(Se.props.children)}else yt=qR(Ee,Se.props.value),yt&&Xn&&(Ln=Se.props.children);return m.exports.cloneElement(Se,{"aria-selected":yt?"true":"false",onClick:_t(Se),onKeyUp:Nt=>{Nt.key===" "&&Nt.preventDefault(),Se.props.onKeyUp&&Se.props.onKeyUp(Nt)},role:"option",selected:yt,value:void 0,"data-value":Se.props.value})});Xn&&(j?In.length===0?On=null:On=In.reduce((Se,yt,Nt)=>(Se.push(yt),Nt<In.length-1&&Se.push(", "),Se),[]):On=Ln);let Je=ln;!h&&Ut&&be&&(Je=fn.clientWidth);let re;typeof fe!="undefined"?re=fe:re=D?null:0;const ce=oe.id||(W?`mui-component-select-${W}`:void 0),Pe=Ve({},t,{variant:Be,value:Ee,open:Pt}),ve=Hle(Pe);return At.exports.jsxs(m.exports.Fragment,{children:[At.exports.jsx(Ule,Ve({ref:mn,tabIndex:re,role:"button","aria-disabled":D?"true":void 0,"aria-expanded":Pt?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[T,ce].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:dt,onMouseDown:D||ne?null:Le,onBlur:yn,onFocus:w},oe,{ownerState:Pe,className:Nn(oe.className,ve.select,g),id:ce,children:Vle(On)?GR||(GR=At.exports.jsx("span",{className:"notranslate",children:"\u200B"})):On})),At.exports.jsx($le,Ve({value:Array.isArray(Ee)?Ee.join(","):Ee,name:W,ref:nt,"aria-hidden":!0,onChange:wt,tabIndex:-1,disabled:D,className:ve.nativeInput,autoFocus:u,ownerState:Pe},Oe)),At.exports.jsx(jle,{as:F,className:ve.icon,ownerState:Pe}),At.exports.jsx(dle,Ve({id:`menu-${W||""}`,anchorEl:fn,open:Pt,onClose:Xe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},H,{MenuListProps:Ve({"aria-labelledby":T,role:"listbox",disableListWrap:!0},H.MenuListProps),PaperProps:Ve({},H.PaperProps,{style:Ve({minWidth:Je},H.PaperProps!=null?H.PaperProps.style:null)}),children:Ie}))]})});var Gle=Wle,ZR,XR;const qle=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Zle=e=>{const{classes:t}=e;return t},BT={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>nc(e)&&e!=="variant",slot:"Root"},Xle=xn(EB,BT)(""),Kle=xn(MB,BT)(""),Yle=xn(yB,BT)(""),IB=m.exports.forwardRef(function(t,n){const r=ti({name:"MuiSelect",props:t}),{autoWidth:a=!1,children:u,classes:h={},className:o,defaultOpen:g=!1,displayEmpty:b=!1,IconComponent:A=gB,id:D,input:z,inputProps:F,label:N,labelId:T,MenuProps:H,multiple:j=!1,native:W=!1,onClose:B,onOpen:O,open:S,renderValue:w,SelectDisplayProps:P,variant:Y="outlined"}=r,ne=Mn(r,qle),ae=W?Tle:Gle,oe=hf(),Re=df({props:r,muiFormControl:oe,states:["variant"]}).variant||Y,Be=z||{standard:ZR||(ZR=At.exports.jsx(Xle,{})),outlined:At.exports.jsx(Kle,{label:N}),filled:XR||(XR=At.exports.jsx(Yle,{}))}[Re],Oe=Ve({},r,{variant:Re,classes:h}),Ee=Zle(Oe),pt=io(n,Be.ref);return At.exports.jsx(m.exports.Fragment,{children:m.exports.cloneElement(Be,Ve({inputComponent:ae,inputProps:Ve({children:u,IconComponent:A,variant:Re,type:void 0,multiple:j},W?{id:D}:{autoWidth:a,defaultOpen:g,displayEmpty:b,labelId:T,MenuProps:H,onClose:B,onOpen:O,open:S,renderValue:w,SelectDisplayProps:Ve({id:D},P)},F,{classes:F?ns(Ee,F.classes):Ee},z?z.props.inputProps:{})},j&&W&&Re==="outlined"?{notched:!0}:{},{ref:pt,className:Nn(Be.props.className,o)},!z&&{variant:Re},ne))})});IB.muiName="Select";var PB=IB;function Jle(e){return Yr("MuiSnackbarContent",e)}Ir("MuiSnackbarContent",["root","message","action"]);const Qle=["action","className","message","role"],ece=e=>{const{classes:t}=e;return ei({root:["root"],action:["action"],message:["message"]},Jle,t)},tce=xn(uf,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=cne(e.palette.background.default,t);return Ve({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),nce=xn("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),rce=xn("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),ice=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiSnackbarContent"}),{action:a,className:u,message:h,role:o="alert"}=r,g=Mn(r,Qle),b=r,A=ece(b);return At.exports.jsxs(tce,Ve({role:o,square:!0,elevation:6,className:Nn(A.root,u),ownerState:b,ref:n},g,{children:[At.exports.jsx(nce,{className:A.message,ownerState:b,children:h}),a?At.exports.jsx(rce,{className:A.action,ownerState:b,children:a}):null]}))});var oce=ice;function ace(e){return Yr("MuiSnackbar",e)}Ir("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const sce=["onEnter","onExited"],lce=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],cce=e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${_n(n.vertical)}${_n(n.horizontal)}`]};return ei(r,ace,t)},KR=xn("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${_n(n.anchorOrigin.vertical)}${_n(n.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return Ve({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:Ve({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&n,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),uce=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiSnackbar"}),a=Mb(),u={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:h,anchorOrigin:{vertical:o,horizontal:g}={vertical:"bottom",horizontal:"left"},autoHideDuration:b=null,children:A,className:D,ClickAwayListenerProps:z,ContentProps:F,disableWindowBlurListener:N=!1,message:T,open:H,TransitionComponent:j=bB,transitionDuration:W=u,TransitionProps:{onEnter:B,onExited:O}={}}=r,S=Mn(r.TransitionProps,sce),w=Mn(r,lce),P=Ve({},r,{anchorOrigin:{vertical:o,horizontal:g},autoHideDuration:b,disableWindowBlurListener:N,TransitionComponent:j,transitionDuration:W}),Y=cce(P),{getRootProps:ne,onClickAway:ae}=Iie(Ve({},P,{ref:n})),[oe,fe]=m.exports.useState(!0),Re=a0({elementType:KR,getSlotProps:ne,externalForwardedProps:w,ownerState:P,className:[Y.root,D]}),Be=Ee=>{fe(!0),O&&O(Ee)},Oe=(Ee,pt)=>{fe(!1),B&&B(Ee,pt)};return!H&&oe?null:At.exports.jsx(Wne,Ve({onClickAway:ae},z,{children:At.exports.jsx(KR,Ve({},Re,{children:At.exports.jsx(j,Ve({appear:!0,in:H,timeout:W,direction:o==="top"?"down":"up",onEnter:Oe,onExited:Be},S,{children:A||At.exports.jsx(oce,Ve({message:T,action:h},F))}))}))}))});var dce=uce;function hce(e){return Yr("MuiTextField",e)}Ir("MuiTextField",["root"]);const pce=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],fce={standard:EB,filled:yB,outlined:MB},mce=e=>{const{classes:t}=e;return ei({root:["root"]},hce,t)},gce=xn(_B,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),vce=m.exports.forwardRef(function(t,n){const r=ti({props:t,name:"MuiTextField"}),{autoComplete:a,autoFocus:u=!1,children:h,className:o,color:g="primary",defaultValue:b,disabled:A=!1,error:D=!1,FormHelperTextProps:z,fullWidth:F=!1,helperText:N,id:T,InputLabelProps:H,inputProps:j,InputProps:W,inputRef:B,label:O,maxRows:S,minRows:w,multiline:P=!1,name:Y,onBlur:ne,onChange:ae,onFocus:oe,placeholder:fe,required:Re=!1,rows:Be,select:Oe=!1,SelectProps:Ee,type:pt,value:Ze,variant:ct="outlined"}=r,nt=Mn(r,pce),xe=Ve({},r,{autoFocus:u,color:g,disabled:A,error:D,fullWidth:F,multiline:P,required:Re,select:Oe,variant:ct}),be=mce(xe),on={};ct==="outlined"&&(H&&typeof H.shrink!="undefined"&&(on.notched=H.shrink),on.label=O),Oe&&((!Ee||!Ee.native)&&(on.id=void 0),on["aria-describedby"]=void 0);const Ut=_5(T),ln=N&&Ut?`${Ut}-helper-text`:void 0,tn=O&&Ut?`${Ut}-label`:void 0,un=fce[ct],mn=At.exports.jsx(un,Ve({"aria-describedby":ln,autoComplete:a,autoFocus:u,defaultValue:b,fullWidth:F,multiline:P,name:Y,rows:Be,maxRows:S,minRows:w,type:pt,value:Ze,id:Ut,inputRef:B,onBlur:ne,onChange:ae,onFocus:oe,placeholder:fe,inputProps:j},on,W));return At.exports.jsxs(gce,Ve({className:Nn(be.root,o),disabled:A,error:D,fullWidth:F,ref:n,required:Re,color:g,variant:ct,ownerState:xe},nt,{children:[O!=null&&O!==""&&At.exports.jsx(CB,Ve({htmlFor:Ut,id:tn},H,{children:O})),Oe?At.exports.jsx(PB,Ve({"aria-describedby":ln,id:Ut,labelId:tn,value:Ze,input:mn},Ee,{children:h})):mn,N&&At.exports.jsx(mse,Ve({id:ln},z,{children:N}))]}))});var yce=vce;const _ce=e=>{const t=u=>{const h=u.course_1,o=u.course_2;return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("td",null,h?h.code:"-"),m.exports.createElement("td",null,o?o.code:"-"))},n=e.timetable,[r,a]=m.exports.useState(Array(5));return m.exports.useEffect(()=>{for(let u=0;u<n.courses.length;u++){const h=n.courses[u];r[h.position]=h}a([...r])},[]),m.exports.createElement("details",{className:"mb-3"},m.exports.createElement("summary",{className:"card-top"},m.exports.createElement("span",{className:"card-title"},m.exports.createElement("strong",null,n.term.name))),m.exports.createElement("div",{className:"card-body timetable-details",id:"card-body-1",hidden:!1},m.exports.createElement("p",{className:"card-text"}),m.exports.createElement("table",{className:"table"},m.exports.createElement("thead",null,m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"col"},"Period"),m.exports.createElement("th",{scope:"col"},"Day 1"),m.exports.createElement("th",{scope:"col"},"Day 2"))),m.exports.createElement("tbody",null,m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"row"},"09:00 am - 10:15 am"),m.exports.createElement(t,{course_1:r[1],course_2:r[1]})),m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"row"},"10:20 am - 11:35 am"),m.exports.createElement(t,{course_1:r[2],course_2:r[2]})),m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"row"},"12:20 pm - 01:35 pm"),m.exports.createElement(t,{course_1:r[3],course_2:r[4]})),m.exports.createElement("tr",null,m.exports.createElement("th",{scope:"row"},"01:40 pm - 02:55 pm"),m.exports.createElement(t,{course_1:r[4],course_2:r[3]})))),m.exports.createElement("p",null),m.exports.createElement(nn,{to:`/timetable/edit/${n.id}`,className:"card-link"},"Edit timetable")))},xce=()=>{const e=Ii(),[t,n]=m.exports.useState({}),r=m.exports.useContext(Xr);m.exports.useEffect(()=>{Eo()||e("/accounts/login")});const a=()=>{Eo()&&r.getAPI(mr.TIMETABLE,!0).then(u=>{n(u.data)}).catch(u=>{u.response.status!==404&&(r.refreshAuth(),a())})};return m.exports.useEffect(()=>{a()},[]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/list.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/main.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/base.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/secondary.css"}),m.exports.createElement("div",{className:"container"},m.exports.createElement(mz,null),m.exports.createElement("div",{className:"white-bg"},"id"in t?m.exports.createElement(_ce,{timetable:t}):m.exports.createElement("div",{className:"timetable-add-container"},m.exports.createElement("div",{className:"card-body"},m.exports.createElement("form",{onSubmit:u=>{u.preventDefault(),console.log("Submitted")}},m.exports.createElement("h5",{className:"card-title"},"Add timetable"),m.exports.createElement("hr",null),m.exports.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:"M5IY2bEzx9c5zEI25e3yzsF7XGycqazLGhT6fs8hrUw5fUunY4kgQZETZDpblGVm"}),m.exports.createElement(qae,{sx:{minWidth:120}},m.exports.createElement(_B,{fullWidth:!0},m.exports.createElement(CB,{id:"demo-simple-select-label"},"Term"),m.exports.createElement(PB,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:0,label:"Term",onChange:()=>{}},m.exports.createElement(_le,{value:0},"---------")))),m.exports.createElement("div",{className:"mt-3"},m.exports.createElement("button",{type:"submit",id:"continue-button",className:"btn btn-primary mr-2",style:{letterSpacing:0}},"Continue"),m.exports.createElement(nn,{to:"/user/1",className:"btn btn-primary",role:"button","aria-pressed":"true"},"Cancel"))))))))};var DB={exports:{}};(function(e,t){(function(n,r){e.exports=r()})($o,function(){var n,r,a;function u(o,g){if(!n)n=g;else if(!r)r=g;else{var b="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",A={};n(A),a=g(A),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([b],{type:"text/javascript"})))}}u(["exports"],function(o){var g=typeof self!="undefined"?self:{},b="2.14.1";let A;const D={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(A==null){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{A={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):s}catch{A=s}}return A},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!D.API_URL)return null;try{const s=new URL(D.API_URL);return s.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":s.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},z={supported:!1,testSupport:function(s){!T&&N&&(H?j(s):F=s)}};let F,N,T=!1,H=!1;function j(s){const i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,N),s.isContextLost())return;z.supported=!0}catch{}s.deleteTexture(i),T=!0}g.document&&(N=g.document.createElement("img"),N.onload=function(){F&&j(F),F=null,H=!0},N.onerror=function(){T=!0,F=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const W="01";var B=O;function O(s,i,l,d){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(d-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=l,this.p2y=d}O.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,d=0;d<8;d++){var f=this.sampleCurveX(l)-s;if(Math.abs(f)<i)return l;var y=this.sampleCurveDerivativeX(l);if(Math.abs(y)<1e-6)break;l-=f/y}var x=0,C=1;for(l=s,d=0;d<20&&(f=this.sampleCurveX(l),!(Math.abs(f-s)<i));d++)s>f?x=l:C=l,l=.5*(C-x)+x;return l},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var S=w;function w(s,i){this.x=s,this.y=i}w.prototype={clone:function(){return new w(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,l=s.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),l=Math.sin(s),d=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=d,this},_rotateAround:function(s,i){var l=Math.cos(s),d=Math.sin(s),f=i.y+d*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-d*(this.y-i.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},w.convert=function(s){return s instanceof w?s:Array.isArray(s)?new w(s[0],s[1]):s};const P=Math.PI/180,Y=180/Math.PI;function ne(s){return s*P}function ae(s){return s*Y}const oe=[[0,0],[1,0],[1,1],[0,1]];function fe(s){if(s<=0)return 0;if(s>=1)return 1;const i=s*s,l=i*s;return 4*(s<.5?l:3*(s-i)+l-.75)}function Re(s,i,l,d){const f=new B(s,i,l,d);return function(y){return f.solve(y)}}const Be=Re(.25,.1,.25,1);function Oe(s,i,l){return Math.min(l,Math.max(i,s))}function Ee(s,i,l){return(l=Oe((l-s)/(i-s),0,1))*l*(3-2*l)}function pt(s,i,l){const d=l-i,f=((s-i)%d+d)%d+i;return f===i?l:f}function Ze(s,i,l){if(!s.length)return l(null,[]);let d=s.length;const f=new Array(s.length);let y=null;s.forEach((x,C)=>{i(x,(I,R)=>{I&&(y=I),f[C]=R,--d==0&&l(y,f)})})}function ct(s){const i=[];for(const l in s)i.push(s[l]);return i}function nt(s,...i){for(const l of i)for(const d in l)s[d]=l[d];return s}let xe=1;function be(){return xe++}function on(){return function s(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function Ut(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function ln(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function tn(s,i){s.forEach(l=>{i[l]&&(i[l]=i[l].bind(i))})}function un(s,i){return s.indexOf(i,s.length-i.length)!==-1}function mn(s,i,l){const d={};for(const f in s)d[f]=i.call(l||this,s[f],f,s);return d}function fn(s,i,l){const d={};for(const f in s)i.call(l||this,s[f],f,s)&&(d[f]=s[f]);return d}function An(s){return Array.isArray(s)?s.map(An):typeof s=="object"&&s?mn(s,An):s}const Le={};function Xe(s){Le[s]||(typeof console!="undefined"&&console.warn(s),Le[s]=!0)}function ft(s,i,l){return(l.y-s.y)*(i.x-s.x)>(i.y-s.y)*(l.x-s.x)}function wt(s){let i=0;for(let l,d,f=0,y=s.length,x=y-1;f<y;x=f++)l=s[f],d=s[x],i+=(d.x-l.x)*(l.y+d.y);return i}function _t(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function dt(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,f,y)=>{const x=f||y;return i[d]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}let Pt=null;function yn(s){if(Pt==null){const i=s.navigator?s.navigator.userAgent:null;Pt=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Pt}function On(s){try{const i=g[s];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function Ln(s,i){return[s[4*i],s[4*i+1],s[4*i+2],s[4*i+3]]}const In="mapbox-tiles";let Xn,Ie,Je=500,re=50;function ce(){try{return g.caches}catch{}}function Pe(){ce()&&!Xn&&(Xn=g.caches.open(In))}function ve(s){const i=s.indexOf("?");if(i<0)return s;const l=function(f){const y=f.indexOf("?");return y>0?f.slice(y+1).split("&"):[]}(s),d=l.filter(f=>{const y=f.split("=");return y[0]==="language"||y[0]==="worldview"});return d.length?`${s.slice(0,i)}?${d.join("&")}`:s.slice(0,i)}let Se=1/0;const yt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(yt);class Nt extends Error{constructor(i,l,d){l===401&&Yn(d)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=l,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Kt=_t()?()=>self.worker&&self.worker.referrer:()=>(g.location.protocol==="blob:"?g.parent:g).location.href,Bn=function(s,i){if(!(/^file:/.test(l=s.url)||/^file:/.test(Kt())&&!/^\w+:/.test(l))){if(g.fetch&&g.Request&&g.AbortController&&g.Request.prototype.hasOwnProperty("signal"))return function(d,f){const y=new g.AbortController,x=new g.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:Kt(),referrerPolicy:d.referrerPolicy,signal:y.signal});let C=!1,I=!1;const R=(V=x.url).indexOf("sku=")>0&&Yn(V);var V;d.type==="json"&&x.headers.set("Accept","application/json");const q=(J,Q,ie)=>{if(I)return;if(J&&J.message!=="SecurityError"&&Xe(J),Q&&ie)return Z(Q);const de=Date.now();g.fetch(x).then(Ce=>{if(Ce.ok){const Fe=R?Ce.clone():null;return Z(Ce,Fe,de)}return f(new Nt(Ce.statusText,Ce.status,d.url))}).catch(Ce=>{Ce.name!=="AbortError"&&f(new Error(`${Ce.message} ${d.url}`))})},Z=(J,Q,ie)=>{(d.type==="arrayBuffer"?J.arrayBuffer():d.type==="json"?J.json():J.text()).then(de=>{I||(Q&&ie&&function(Ce,Fe,we){if(Pe(),!Xn)return;const ze={status:Fe.status,statusText:Fe.statusText,headers:new g.Headers};Fe.headers.forEach((st,rt)=>ze.headers.set(rt,st));const $e=dt(Fe.headers.get("Cache-Control")||"");if($e["no-store"])return;$e["max-age"]&&ze.headers.set("Expires",new Date(we+1e3*$e["max-age"]).toUTCString());const Ne=ze.headers.get("Expires");Ne&&(new Date(Ne).getTime()-we<42e4||function(st,rt){if(Ie===void 0)try{new Response(new ReadableStream),Ie=!0}catch{Ie=!1}Ie?rt(st.body):st.blob().then(rt)}(Fe,st=>{const rt=new g.Response(st,ze);Pe(),Xn&&Xn.then(Ct=>Ct.put(ve(Ce.url),rt)).catch(Ct=>Xe(Ct.message))}))}(x,Q,ie),C=!0,f(null,de,J.headers.get("Cache-Control"),J.headers.get("Expires")))}).catch(de=>{I||f(new Error(de.message))})};return R?function(J,Q){if(Pe(),!Xn)return Q(null);const ie=ve(J.url);Xn.then(de=>{de.match(ie).then(Ce=>{const Fe=function(we){if(!we)return!1;const ze=new Date(we.headers.get("Expires")||0),$e=dt(we.headers.get("Cache-Control")||"");return ze>Date.now()&&!$e["no-cache"]}(Ce);de.delete(ie),Fe&&de.put(ie,Ce.clone()),Q(null,Ce,Fe)}).catch(Q)}).catch(Q)}(x,q):q(null,null),{cancel:()=>{I=!0,C||y.abort()}}}(s,i);if(_t()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i,void 0,!0)}var l;return function(d,f){const y=new g.XMLHttpRequest;y.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(y.responseType="arraybuffer");for(const x in d.headers)y.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=d.credentials==="include",y.onerror=()=>{f(new Error(y.statusText))},y.onload=()=>{if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){let x=y.response;if(d.type==="json")try{x=JSON.parse(y.response)}catch(C){return f(C)}f(null,x,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else f(new Nt(y.statusText,y.status,d.url))},y.send(d.body),{cancel:()=>y.abort()}}(s,i)},Tn=function(s,i){return Bn(nt(s,{type:"arrayBuffer"}),i)};function Vt(s){const i=g.document.createElement("a");return i.href=s,i.protocol===g.document.location.protocol&&i.host===g.document.location.host}const Rn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ur,Fn;ur=[],Fn=0;const Sr=function(s,i){if(z.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),Fn>=D.MAX_PARALLEL_IMAGE_REQUESTS){const y={requestParameters:s,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return ur.push(y),y}Fn++;let l=!1;const d=()=>{if(!l)for(l=!0,Fn--;ur.length&&Fn<D.MAX_PARALLEL_IMAGE_REQUESTS;){const y=ur.shift(),{requestParameters:x,callback:C,cancelled:I}=y;I||(y.cancel=Sr(x,C).cancel)}},f=Tn(s,(y,x,C,I)=>{d(),y?i(y):x&&(g.createImageBitmap?function(R,V){const q=new g.Blob([new Uint8Array(R)],{type:"image/png"});g.createImageBitmap(q).then(Z=>{V(null,Z)}).catch(Z=>{V(new Error(`Could not load image because of ${Z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(R,V)=>i(R,V,C,I)):function(R,V){const q=new g.Image,Z=g.URL;q.onload=()=>{V(null,q),Z.revokeObjectURL(q.src),q.onload=null,g.requestAnimationFrame(()=>{q.src=Rn})},q.onerror=()=>V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const J=new g.Blob([new Uint8Array(R)],{type:"image/png"});q.src=R.byteLength?Z.createObjectURL(J):Rn}(x,(R,V)=>i(R,V,C,I)))});return{cancel:()=>{f.cancel(),d()}}},dr="NO_ACCESS_TOKEN";function Pr(s){return s.indexOf("mapbox:")===0}function Yn(s){return D.API_URL_REGEX.test(s)}function Qn(s){return D.API_CDN_URL_REGEX.test(s)}function Ur(s){return D.API_STYLE_REGEX.test(s)&&!hr(s)}function hr(s){return D.API_SPRITE_REGEX.test(s)}const Bi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ai(s){const i=s.match(Bi);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function si(s){const i=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${i}`}function Fi(s){if(!s)return null;const i=s.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(g.atob(i[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class oo{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const l=Fi(D.ACCESS_TOKEN);let d="";return d=l&&l.u?g.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(f,y)=>String.fromCharCode(Number("0x"+y)))):D.ACCESS_TOKEN||"",i?`mapbox.eventData.${i}:${d}`:`mapbox.eventData:${d}`}fetchEventData(){const i=On("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(i)try{const f=g.localStorage.getItem(l);f&&(this.eventData=JSON.parse(f));const y=g.localStorage.getItem(d);y&&(this.anonId=y)}catch{Xe("Unable to read from LocalStorage")}}saveEventData(){const i=On("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(i)try{g.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&g.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{Xe("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,l,d,f){if(!D.EVENTS_URL)return;const y=ai(D.EVENTS_URL);y.params.push(`access_token=${f||D.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(i).toISOString()},C=l?nt(x,l):x,I={url:si(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([C])};this.pendingRequest=function(R,V){return Bn(nt(R,{method:"POST"}),V)}(I,R=>{this.pendingRequest=null,d(R),this.saveEventData(),this.processRequests(f)})}queueRequest(i,l){this.queue.push(i),this.processRequests(l)}}const _e=new class extends oo{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,i){D.EVENTS_URL&&D.ACCESS_TOKEN&&Array.isArray(s)&&s.some(l=>Pr(l)||Yn(l))&&this.queueRequest(Date.now(),i)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=Fi(D.ACCESS_TOKEN),l=i?i.u:D.ACCESS_TOKEN;let d=l!==this.eventData.tokenU;ln(this.anonId)||(this.anonId=on(),d=!0);const f=this.queue.shift();if(this.eventData.lastSuccess){const y=new Date(this.eventData.lastSuccess),x=new Date(f),C=(f-this.eventData.lastSuccess)/864e5;d=d||C>=1||C<-1||y.getDate()!==x.getDate()}else d=!0;d?this.postEvent(f,{sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:W,"enabled.telemetry":!1,userId:this.anonId},y=>{y||(this.eventData.lastSuccess=f,this.eventData.tokenU=l)},s):this.processRequests()}},te=_e.postTurnstileEvent.bind(_e),se=new class extends oo{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,i,l,d){this.skuToken=i,this.errorCb=d,D.EVENTS_URL&&(l||D.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(dr)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),ln(this.anonId)||(this.anonId=on()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:b,skuId:W,skuToken:this.skuToken,userId:this.anonId},d=>{d?this.errorCb(d):i&&(this.success[i]=!0)},s))}},pe=se.postMapLoadEvent.bind(se),Ae=new class extends oo{constructor(){super("gljs.performance")}postPerformanceEvent(s,i){D.EVENTS_URL&&(s||D.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},s)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:l}=this.queue.shift(),d=function(f){const y=g.performance.getEntriesByType("resource"),x=g.performance.getEntriesByType("mark"),C=function(Z){const J={};if(Z){for(const Q in Z)if(Q!=="other")for(const ie of Z[Q]){const de=`${Q}ResolveRangeMin`,Ce=`${Q}ResolveRangeMax`,Fe=`${Q}RequestCount`,we=`${Q}RequestCachedCount`;J[de]=Math.min(J[de]||1/0,ie.startTime),J[Ce]=Math.max(J[Ce]||-1/0,ie.responseEnd);const ze=$e=>{J[$e]===void 0&&(J[$e]=0),++J[$e]};ie.transferSize!==void 0&&ie.transferSize===0&&ze(we),ze(Fe)}}return J}(function(Z,J){const Q={};if(Z)for(const ie of Z){const de=J(ie);Q[de]===void 0&&(Q[de]=[]),Q[de].push(ie)}return Q}(y,bt)),I=g.devicePixelRatio,R=g.navigator.connection||g.navigator.mozConnection||g.navigator.webkitConnection,V={counters:[],metadata:[],attributes:[]},q=(Z,J,Q)=>{Q!=null&&Z.push({name:J,value:Q.toString()})};for(const Z in C)q(V.counters,Z,C[Z]);if(f.interactionRange[0]!==1/0&&f.interactionRange[1]!==-1/0&&(q(V.counters,"interactionRangeMin",f.interactionRange[0]),q(V.counters,"interactionRangeMax",f.interactionRange[1])),x)for(const Z of Object.keys(Me)){const J=Me[Z],Q=x.find(ie=>ie.name===J);Q&&q(V.counters,J,Q.startTime)}return q(V.counters,"visibilityHidden",f.visibilityHidden),q(V.attributes,"style",function(Z){if(Z)for(const J of Z){const Q=J.name.split("?")[0];if(Ur(Q)){const ie=Q.split("/").slice(-2);if(ie.length===2)return`mapbox://styles/${ie[0]}/${ie[1]}`}}}(y)),q(V.attributes,"terrainEnabled",f.terrainEnabled?"true":"false"),q(V.attributes,"fogEnabled",f.fogEnabled?"true":"false"),q(V.attributes,"projection",f.projection),q(V.attributes,"zoom",f.zoom),q(V.metadata,"devicePixelRatio",I),q(V.metadata,"connectionEffectiveType",R?R.effectiveType:void 0),q(V.metadata,"navigatorUserAgent",g.navigator.userAgent),q(V.metadata,"screenWidth",g.screen.width),q(V.metadata,"screenHeight",g.screen.height),q(V.metadata,"windowWidth",g.innerWidth),q(V.metadata,"windowHeight",g.innerHeight),q(V.metadata,"mapWidth",f.width/I),q(V.metadata,"mapHeight",f.height/I),q(V.metadata,"webglRenderer",f.renderer),q(V.metadata,"webglVendor",f.vendor),q(V.metadata,"sdkVersion",b),q(V.metadata,"sdkIdentifier","mapbox-gl-js"),V}(l);for(const f of d.metadata);for(const f of d.counters);for(const f of d.attributes);this.postEvent(i,d,()=>{},s)}},We=Ae.postPerformanceEvent.bind(Ae),Qe=new class extends oo{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,i,l,d){if(!D.API_URL||!D.SESSION_PATH)return;const f=ai(D.API_URL+D.SESSION_PATH);f.params.push(`sku=${i||""}`),f.params.push(`access_token=${d||D.ACCESS_TOKEN||""}`);const y={url:si(f),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(x,C){return Bn(nt(x,{method:"GET"}),C)}(y,x=>{this.pendingRequest=null,l(x),this.saveEventData(),this.processRequests(d)})}getSessionAPI(s,i,l,d){this.skuToken=i,this.errorCb=d,D.SESSION_PATH&&D.API_URL&&(l||D.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(dr)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||this.getSession(l,this.skuToken,d=>{d?this.errorCb(d):i&&(this.success[i]=!0)},s)}},Ke=Qe.getSessionAPI.bind(Qe),qe=new Set,Me={create:"create",load:"load",fullLoad:"fullLoad"},Ue={mark(s){g.performance.mark(s)},measure(s,i,l){g.performance.measure(s,i,l)}};function bt(s){const i=s.name.split("?")[0];return Qn(i)&&i.includes("mapbox-gl.js")?"javascript":Qn(i)&&i.includes("mapbox-gl.css")?"css":function(l){return D.API_FONTS_REGEX.test(l)}(i)?"fontRange":hr(i)?"sprite":Ur(i)?"style":function(l){return D.API_TILEJSON_REGEX.test(l)}(i)?"tilejson":"other"}const ht=g.performance;function Zt(s){const i=s?s.url.toString():void 0;return ht.getEntriesByName(i)}let rn,Jt,pn,zn;const or={now:()=>pn!==void 0?pn:g.performance.now(),setNow(s){pn=s},restoreNow(){pn=void 0},frame(s){const i=g.requestAnimationFrame(s);return{cancel:()=>g.cancelAnimationFrame(i)}},getImageData(s,i=0){const{width:l,height:d}=s;zn||(zn=g.document.createElement("canvas"));const f=zn.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return(l>zn.width||d>zn.height)&&(zn.width=l,zn.height=d),f.clearRect(-i,-i,l+2*i,d+2*i),f.drawImage(s,0,0,l,d),f.getImageData(-i,-i,l+2*i,d+2*i)},resolveURL:s=>(rn||(rn=g.document.createElement("a")),rn.href=s,rn.href),get devicePixelRatio(){return g.devicePixelRatio},get prefersReducedMotion(){return!!g.matchMedia&&(Jt==null&&(Jt=g.matchMedia("(prefers-reduced-motion: reduce)")),Jt.matches)}};function wn(s,i,l){l[s]&&l[s].indexOf(i)!==-1||(l[s]=l[s]||[],l[s].push(i))}function yr(s,i,l){if(l&&l[s]){const d=l[s].indexOf(i);d!==-1&&l[s].splice(d,1)}}class _r{constructor(i,l={}){nt(this,l),this.type=i}}class zs extends _r{constructor(i,l={}){super("error",nt({error:i},l))}}class ps{on(i,l){return this._listeners=this._listeners||{},wn(i,l,this._listeners),this}off(i,l){return yr(i,l,this._listeners),yr(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},wn(i,l,this._oneTimeListeners),this):new Promise(d=>this.once(i,d))}fire(i,l){typeof i=="string"&&(i=new _r(i,l||{}));const d=i.type;if(this.listens(d)){i.target=this;const f=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const C of f)C.call(this,i);const y=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const C of y)yr(d,C,this._oneTimeListeners),C.call(this,i);const x=this._eventedParent;x&&(nt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof zs&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var Et=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function fs(s,...i){for(const l of i)for(const d in l)s[d]=l[d];return s}function bi(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Bs(s){if(Array.isArray(s))return s.map(Bs);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const l in s)i[l]=Bs(s[l]);return i}return bi(s)}class Sv extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}var Ua=Sv;class ic{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[d,f]of l)this.bindings[d]=f}concat(i){return new ic(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var kv=ic;const oc={kind:"null"},Ht={kind:"number"},Kn={kind:"string"},Hn={kind:"boolean"},ja={kind:"color"},yl={kind:"object"},$n={kind:"value"},vu={kind:"collator"},ac={kind:"formatted"},sc={kind:"resolvedImage"};function _o(s,i){return{kind:"array",itemType:s,N:i}}function Dr(s){if(s.kind==="array"){const i=Dr(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const Tv=[oc,Ht,Kn,Hn,ja,ac,yl,_o($n),sc];function Io(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Io(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const l of Tv)if(!Io(l,i))return null}}return`Expected ${Dr(s)} but found ${Dr(i)} instead.`}function ff(s,i){return i.some(l=>l.kind===s.kind)}function _l(s,i){return i.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}var mf,qd={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function yu(s){return(s=Math.round(s))<0?0:s>255?255:s}function xl(s){return yu(s[s.length-1]==="%"?parseFloat(s)/100*255:parseInt(s))}function lc(s){return(i=s[s.length-1]==="%"?parseFloat(s)/100:parseFloat(s))<0?0:i>1?1:i;var i}function gf(s,i,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?s+(i-s)*l*6:2*l<1?i:3*l<2?s+(i-s)*(2/3-l)*6:s}try{mf={}.parseCSSColor=function(s){var i,l=s.replace(/ /g,"").toLowerCase();if(l in qd)return qd[l].slice();if(l[0]==="#")return l.length===4?(i=parseInt(l.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:l.length===7&&(i=parseInt(l.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var d=l.indexOf("("),f=l.indexOf(")");if(d!==-1&&f+1===l.length){var y=l.substr(0,d),x=l.substr(d+1,f-(d+1)).split(","),C=1;switch(y){case"rgba":if(x.length!==4)return null;C=lc(x.pop());case"rgb":return x.length!==3?null:[xl(x[0]),xl(x[1]),xl(x[2]),C];case"hsla":if(x.length!==4)return null;C=lc(x.pop());case"hsl":if(x.length!==3)return null;var I=(parseFloat(x[0])%360+360)%360/360,R=lc(x[1]),V=lc(x[2]),q=V<=.5?V*(R+1):V+R-V*R,Z=2*V-q;return[yu(255*gf(Z,q,I+1/3)),yu(255*gf(Z,q,I)),yu(255*gf(Z,q,I-1/3)),C];default:return null}}return null}}catch{}class Po{constructor(i,l,d,f=1){this.r=i,this.g=l,this.b=d,this.a=f}static parse(i){if(!i)return;if(i instanceof Po)return i;if(typeof i!="string")return;const l=mf(i);return l?new Po(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[i,l,d,f]=this.toArray();return`rgba(${Math.round(i)},${Math.round(l)},${Math.round(d)},${f})`}toArray(){const{r:i,g:l,b:d,a:f}=this;return f===0?[0,0,0,0]:[255*i/f,255*l/f,255*d/f,f]}toArray01(){const{r:i,g:l,b:d,a:f}=this;return f===0?[0,0,0,0]:[i/f,l/f,d/f,f]}toArray01PremultipliedAlpha(){const{r:i,g:l,b:d,a:f}=this;return[i,l,d,f]}}Po.black=new Po(0,0,0,1),Po.white=new Po(1,1,1,1),Po.transparent=new Po(0,0,0,0),Po.red=new Po(1,0,0,1),Po.blue=new Po(0,0,1,1);var pi=Po;class Zd{constructor(i,l,d){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class _u{constructor(i,l,d,f,y){this.text=i.normalize?i.normalize():i,this.image=l,this.scale=d,this.fontStack=f,this.textColor=y}}class Do{constructor(i){this.sections=i}static fromString(i){return new Do([new _u(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Do?i:Do.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const l of this.sections){if(l.image){i.push(["image",l.image.name]);continue}i.push(l.text);const d={};l.fontStack&&(d["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(d["font-scale"]=l.scale),l.textColor&&(d["text-color"]=["rgba"].concat(l.textColor.toArray())),i.push(d)}return i}}class xo{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new xo({name:i,available:!1}):null}serialize(){return["image",this.name]}}function Av(s,i,l,d){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[s,i,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[s,i,l,d]:[s,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Xd(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof pi||s instanceof Zd||s instanceof Do||s instanceof xo)return!0;if(Array.isArray(s)){for(const i of s)if(!Xd(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!Xd(s[i]))return!1;return!0}return!1}function Pi(s){if(s===null)return oc;if(typeof s=="string")return Kn;if(typeof s=="boolean")return Hn;if(typeof s=="number")return Ht;if(s instanceof pi)return ja;if(s instanceof Zd)return vu;if(s instanceof Do)return ac;if(s instanceof xo)return sc;if(Array.isArray(s)){const i=s.length;let l;for(const d of s){const f=Pi(d);if(l){if(l===f)continue;l=$n;break}l=f}return _o(l||$n,i)}return yl}function xu(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof pi||s instanceof Do||s instanceof xo?s.toString():JSON.stringify(s)}class vf{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Xd(i[1]))return l.error("invalid value");const d=i[1];let f=Pi(d);const y=l.expectedType;return f.kind!=="array"||f.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(f=y),new vf(f,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof pi?["rgba"].concat(this.value.toArray()):this.value instanceof Do?this.value.serialize():this.value}}var bu=vf,Xi=class{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}};const Kd={string:Kn,number:Ht,boolean:Hn,object:yl};class cc{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let d,f=1;const y=i[0];if(y==="array"){let C,I;if(i.length>2){const R=i[1];if(typeof R!="string"||!(R in Kd)||R==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);C=Kd[R],f++}else C=$n;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);I=i[2],f++}d=_o(C,I)}else d=Kd[y];const x=[];for(;f<i.length;f++){const C=l.parse(i[f],f,$n);if(!C)return null;x.push(C)}return new cc(d,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(i);if(!Io(this.type,Pi(d)))return d;if(l===this.args.length-1)throw new Xi(`Expected value to be of type ${Dr(this.type)}, but found ${Dr(Pi(d))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,l=[i.kind];if(i.kind==="array"){const d=i.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){l.push(d.kind);const f=i.N;(typeof f=="number"||this.args.length>1)&&l.push(f)}}return l.concat(this.args.map(d=>d.serialize()))}}var ms=cc;class wu{constructor(i){this.type=ac,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const d=i[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const f=[];let y=!1;for(let x=1;x<=i.length-1;++x){const C=i[x];if(y&&typeof C=="object"&&!Array.isArray(C)){y=!1;let I=null;if(C["font-scale"]&&(I=l.parse(C["font-scale"],1,Ht),!I))return null;let R=null;if(C["text-font"]&&(R=l.parse(C["text-font"],1,_o(Kn)),!R))return null;let V=null;if(C["text-color"]&&(V=l.parse(C["text-color"],1,ja),!V))return null;const q=f[f.length-1];q.scale=I,q.font=R,q.textColor=V}else{const I=l.parse(i[x],1,$n);if(!I)return null;const R=I.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,f.push({content:I,scale:null,font:null,textColor:null})}}return new wu(f)}evaluate(i){return new Do(this.sections.map(l=>{const d=l.content.evaluate(i);return Pi(d)===sc?new _u("",d,null,null,null):new _u(xu(d),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const l of this.sections){i.push(l.content.serialize());const d={};l.scale&&(d["font-scale"]=l.scale.serialize()),l.font&&(d["text-font"]=l.font.serialize()),l.textColor&&(d["text-color"]=l.textColor.serialize()),i.push(d)}return i}}class Yd{constructor(i){this.type=sc,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const d=l.parse(i[1],1,Kn);return d?new Yd(d):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),d=xo.fromString(l);return d&&i.availableImages&&(d.available=i.availableImages.indexOf(l)>-1),d}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Fb={"to-boolean":Hn,"to-color":ja,"to-number":Ht,"to-string":Kn};class yf{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const d=i[0];if((d==="to-boolean"||d==="to-string")&&i.length!==2)return l.error("Expected one argument.");const f=Fb[d],y=[];for(let x=1;x<i.length;x++){const C=l.parse(i[x],x,$n);if(!C)return null;y.push(C)}return new yf(f,y)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let l,d;for(const f of this.args){if(l=f.evaluate(i),d=null,l instanceof pi)return l;if(typeof l=="string"){const y=i.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Av(l[0],l[1],l[2],l[3]),!d))return new pi(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Xi(d||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const d of this.args){if(l=d.evaluate(i),l===null)return 0;const f=Number(l);if(!isNaN(f))return f}throw new Xi(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?Do.fromString(xu(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?xo.fromString(xu(this.args[0].evaluate(i))):xu(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new wu([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Yd(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(l=>{i.push(l.serialize())}),i}}var uc=yf;const Mv=["Unknown","Point","LineString","Polygon"];var Eu=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Mv[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:l,y:d}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*i-s[0])+this.featureDistanceData.bearing[1]*(d*i-s[1])}return 0}parseColor(s){let i=this._parseColorCache[s];return i||(i=this._parseColorCache[s]=pi.parse(s)),i}};class dc{constructor(i,l,d,f){this.name=i,this.type=l,this._evaluate=d,this.args=f}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,l){const d=i[0],f=dc.definitions[d];if(!f)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,C=x.filter(([R])=>!Array.isArray(R)||R.length===i.length-1);let I=null;for(const[R,V]of C){I=new Cf(l.registry,l.path,null,l.scope);const q=[];let Z=!1;for(let J=1;J<i.length;J++){const Q=i[J],ie=Array.isArray(R)?R[J-1]:R.type,de=I.parse(Q,1+q.length,ie);if(!de){Z=!0;break}q.push(de)}if(!Z)if(Array.isArray(R)&&R.length!==q.length)I.error(`Expected ${R.length} arguments, but found ${q.length} instead.`);else{for(let J=0;J<q.length;J++){const Q=Array.isArray(R)?R[J]:R.type,ie=q[J];I.concat(J+1).checkSubtype(Q,ie.type)}if(I.errors.length===0)return new dc(d,y,V,q)}}if(C.length===1)l.errors.push(...I.errors);else{const R=(C.length?C:x).map(([q])=>{return Z=q,Array.isArray(Z)?`(${Z.map(Dr).join(", ")})`:`(${Dr(Z.type)}...)`;var Z}).join(" | "),V=[];for(let q=1;q<i.length;q++){const Z=l.parse(i[q],1+V.length);if(!Z)return null;V.push(Dr(Z.type))}l.error(`Expected arguments of type ${R}, but found (${V.join(", ")}) instead.`)}return null}static register(i,l){dc.definitions=l;for(const d in l)i[d]=dc}}var Fs=dc;class Jd{constructor(i,l,d){this.type=vu,this.locale=d,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const d=i[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const f=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Hn);if(!f)return null;const y=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Hn);if(!y)return null;let x=null;return d.locale&&(x=l.parse(d.locale,1,Kn),!x)?null:new Jd(f,y,x)}evaluate(i){return new Zd(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const Ns=8192;function na(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function Cu(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function Iv(s,i){const l=(180+s[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,f=Math.pow(2,i.z);return[Math.round(l*f*Ns),Math.round(d*f*Ns)]}function Pv(s,i,l){const d=s[0]-i[0],f=s[1]-i[1],y=s[0]-l[0],x=s[1]-l[1];return d*x-y*f==0&&d*y<=0&&f*x<=0}function Qd(s,i){let l=!1;for(let x=0,C=i.length;x<C;x++){const I=i[x];for(let R=0,V=I.length;R<V-1;R++){if(Pv(s,I[R],I[R+1]))return!1;(f=I[R])[1]>(d=s)[1]!=(y=I[R+1])[1]>d[1]&&d[0]<(y[0]-f[0])*(d[1]-f[1])/(y[1]-f[1])+f[0]&&(l=!l)}}var d,f,y;return l}function Dv(s,i){for(let l=0;l<i.length;l++)if(Qd(s,i[l]))return!0;return!1}function _f(s,i,l,d){const f=d[0]-l[0],y=d[1]-l[1],x=(s[0]-l[0])*y-f*(s[1]-l[1]),C=(i[0]-l[0])*y-f*(i[1]-l[1]);return x>0&&C<0||x<0&&C>0}function xf(s,i,l){for(const R of l)for(let V=0;V<R.length-1;++V)if((C=[(x=R[V+1])[0]-(y=R[V])[0],x[1]-y[1]])[0]*(I=[(f=i)[0]-(d=s)[0],f[1]-d[1]])[1]-C[1]*I[0]!=0&&_f(d,f,y,x)&&_f(y,x,d,f))return!0;var d,f,y,x,C,I;return!1}function hc(s,i){for(let l=0;l<s.length;++l)if(!Qd(s[l],i))return!1;for(let l=0;l<s.length-1;++l)if(xf(s[l],s[l+1],i))return!1;return!0}function Rv(s,i){for(let l=0;l<i.length;l++)if(hc(s,i[l]))return!0;return!1}function eh(s,i,l){const d=[];for(let f=0;f<s.length;f++){const y=[];for(let x=0;x<s[f].length;x++){const C=Iv(s[f][x],l);na(i,C),y.push(C)}d.push(y)}return d}function th(s,i,l){const d=[];for(let f=0;f<s.length;f++){const y=eh(s[f],i,l);d.push(y)}return d}function bf(s,i,l,d){if(s[0]<l[0]||s[0]>l[2]){const f=.5*d;let y=s[0]-l[0]>f?-d:l[0]-s[0]>f?d:0;y===0&&(y=s[0]-l[2]>f?-d:l[2]-s[0]>f?d:0),s[0]+=y}na(i,s)}function bl(s,i,l,d){const f=Math.pow(2,d.z)*Ns,y=[d.x*Ns,d.y*Ns],x=[];if(!s)return x;for(const C of s)for(const I of C){const R=[I.x+y[0],I.y+y[1]];bf(R,i,l,f),x.push(R)}return x}function sr(s,i,l,d){const f=Math.pow(2,d.z)*Ns,y=[d.x*Ns,d.y*Ns],x=[];if(!s)return x;for(const I of s){const R=[];for(const V of I){const q=[V.x+y[0],V.y+y[1]];na(i,q),R.push(q)}x.push(R)}if(i[2]-i[0]<=f/2){(C=i)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const I of x)for(const R of I)bf(R,i,l,f)}var C;return x}class Su{constructor(i,l){this.type=Hn,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Xd(i[1])){const d=i[1];if(d.type==="FeatureCollection")for(let f=0;f<d.features.length;++f){const y=d.features[f].geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Su(d,d.features[f].geometry)}else if(d.type==="Feature"){const f=d.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Su(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Su(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,d){const f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(d.type==="Polygon"){const C=eh(d.coordinates,y,x),I=bl(l.geometry(),f,y,x);if(!Cu(f,y))return!1;for(const R of I)if(!Qd(R,C))return!1}if(d.type==="MultiPolygon"){const C=th(d.coordinates,y,x),I=bl(l.geometry(),f,y,x);if(!Cu(f,y))return!1;for(const R of I)if(!Dv(R,C))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,d){const f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(d.type==="Polygon"){const C=eh(d.coordinates,y,x),I=sr(l.geometry(),f,y,x);if(!Cu(f,y))return!1;for(const R of I)if(!hc(R,C))return!1}if(d.type==="MultiPolygon"){const C=th(d.coordinates,y,x),I=sr(l.geometry(),f,y,x);if(!Cu(f,y))return!1;for(const R of I)if(!Rv(R,C))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wf=Su;function ku(s){if(s instanceof Fs&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof wf)return!1;let i=!0;return s.eachChild(l=>{i&&!ku(l)&&(i=!1)}),i}function Tu(s){if(s instanceof Fs&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(l=>{i&&!Tu(l)&&(i=!1)}),i}function nh(s,i){if(s instanceof Fs&&i.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(d=>{l&&!nh(d,i)&&(l=!1)}),l}class rh{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=i[1];return l.scope.has(d)?new rh(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ef=rh;class ih{constructor(i,l=[],d,f=new kv,y=[]){this.registry=i,this.path=l,this.key=l.map(x=>`[${x}]`).join(""),this.scope=f,this.errors=y,this.expectedType=d}parse(i,l,d,f,y={}){return l?this.concat(l,d,f)._parse(i,y):this._parse(i,y)}_parse(i,l){function d(f,y,x){return x==="assert"?new ms(y,[f]):x==="coerce"?new uc(y,[f]):f}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=i[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[f];if(y){let x=y.parse(i,this);if(!x)return null;if(this.expectedType){const C=this.expectedType,I=x.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||I.kind!=="value")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(C,I))return null}else x=d(x,C,l.typeAnnotation||"coerce");else x=d(x,C,l.typeAnnotation||"assert")}if(!(x instanceof bu)&&x.type.kind!=="resolvedImage"&&Us(x)){const C=new Eu;try{x=new bu(x.type,x.evaluate(C))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,d){const f=typeof i=="number"?this.path.concat(i):this.path,y=d?this.scope.concat(d):this.scope;return new ih(this.registry,f,l||null,y,this.errors)}error(i,...l){const d=`${this.key}${l.map(f=>`[${f}]`).join("")}`;this.errors.push(new Ua(d,i))}checkSubtype(i,l){const d=Io(i,l);return d&&this.error(d),d}}var Cf=ih;function Us(s){if(s instanceof Ef)return Us(s.boundExpression);if(s instanceof Fs&&s.name==="error"||s instanceof Jd||s instanceof wf)return!1;const i=s instanceof uc||s instanceof ms;let l=!0;return s.eachChild(d=>{l=i?l&&Us(d):l&&d instanceof bu}),!!l&&ku(s)&&nh(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function wl(s,i){const l=s.length-1;let d,f,y=0,x=l,C=0;for(;y<=x;)if(C=Math.floor((y+x)/2),d=s[C],f=s[C+1],d<=i){if(C===l||i<f)return C;y=C+1}else{if(!(d>i))throw new Xi("Input is not a number.");x=C-1}return 0}class oh{constructor(i,l,d){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[f,y]of d)this.labels.push(f),this.outputs.push(y)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(i[1],1,Ht);if(!d)return null;const f=[];let y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let x=1;x<i.length;x+=2){const C=x===1?-1/0:i[x],I=i[x+1],R=x,V=x+1;if(typeof C!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(f.length&&f[f.length-1][0]>=C)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const q=l.parse(I,V,y);if(!q)return null;y=y||q.type,f.push([C,q])}return new oh(y,d,f)}evaluate(i){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(i);const f=this.input.evaluate(i);if(f<=l[0])return d[0].evaluate(i);const y=l.length;return f>=l[y-1]?d[y-1].evaluate(i):d[wl(l,f)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&i.push(this.labels[l]),i.push(this.outputs[l].serialize());return i}}var Sf=oh;function er(s,i,l){return s*(1-l)+i*l}var Au=Object.freeze({__proto__:null,number:er,color:function(s,i,l){return new pi(er(s.r,i.r,l),er(s.g,i.g,l),er(s.b,i.b,l),er(s.a,i.a,l))},array:function(s,i,l){return s.map((d,f)=>er(d,i[f],l))}});const Lv=.95047,Ov=1.08883,kf=4/29,Tf=6/29,Af=3*Tf*Tf,zv=Math.PI/180,Nb=180/Math.PI;function ah(s){return s>.008856451679035631?Math.pow(s,1/3):s/Af+kf}function Mf(s){return s>Tf?s*s*s:Af*(s-kf)}function sh(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function lh(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Bv(s){const i=lh(s.r),l=lh(s.g),d=lh(s.b),f=ah((.4124564*i+.3575761*l+.1804375*d)/Lv),y=ah((.2126729*i+.7151522*l+.072175*d)/1);return{l:116*y-16,a:500*(f-y),b:200*(y-ah((.0193339*i+.119192*l+.9503041*d)/Ov)),alpha:s.a}}function Fv(s){let i=(s.l+16)/116,l=isNaN(s.a)?i:i+s.a/500,d=isNaN(s.b)?i:i-s.b/200;return i=1*Mf(i),l=Lv*Mf(l),d=Ov*Mf(d),new pi(sh(3.2404542*l-1.5371385*i-.4985314*d),sh(-.969266*l+1.8760108*i+.041556*d),sh(.0556434*l-.2040259*i+1.0572252*d),s.alpha)}function Ub(s,i,l){const d=i-s;return s+l*(d>180||d<-180?d-360*Math.round(d/360):d)}const Mu={forward:Bv,reverse:Fv,interpolate:function(s,i,l){return{l:er(s.l,i.l,l),a:er(s.a,i.a,l),b:er(s.b,i.b,l),alpha:er(s.alpha,i.alpha,l)}}},Iu={forward:function(s){const{l:i,a:l,b:d}=Bv(s),f=Math.atan2(d,l)*Nb;return{h:f<0?f+360:f,c:Math.sqrt(l*l+d*d),l:i,alpha:s.a}},reverse:function(s){const i=s.h*zv,l=s.c;return Fv({l:s.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:s.alpha})},interpolate:function(s,i,l){return{h:Ub(s.h,i.h,l),c:er(s.c,i.c,l),l:er(s.l,i.l,l),alpha:er(s.alpha,i.alpha,l)}}};var Nv=Object.freeze({__proto__:null,lab:Mu,hcl:Iu});class Pu{constructor(i,l,d,f,y){this.type=i,this.operator=l,this.interpolation=d,this.input=f,this.labels=[],this.outputs=[];for(const[x,C]of y)this.labels.push(x),this.outputs.push(C)}static interpolationFactor(i,l,d,f){let y=0;if(i.name==="exponential")y=If(l,i.base,d,f);else if(i.name==="linear")y=If(l,1,d,f);else if(i.name==="cubic-bezier"){const x=i.controlPoints;y=new B(x[0],x[1],x[2],x[3]).solve(If(l,1,d,f))}return y}static parse(i,l){let[d,f,y,...x]=i;if(!Array.isArray(f)||f.length===0)return l.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const R=f[1];if(typeof R!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:R}}else{if(f[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const R=f.slice(1);if(R.length!==4||R.some(V=>typeof V!="number"||V<0||V>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:R}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,Ht),!y)return null;const C=[];let I=null;d==="interpolate-hcl"||d==="interpolate-lab"?I=ja:l.expectedType&&l.expectedType.kind!=="value"&&(I=l.expectedType);for(let R=0;R<x.length;R+=2){const V=x[R],q=x[R+1],Z=R+3,J=R+4;if(typeof V!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(C.length&&C[C.length-1][0]>=V)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const Q=l.parse(q,J,I);if(!Q)return null;I=I||Q.type,C.push([V,Q])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new Pu(I,d,f,y,C):l.error(`Type ${Dr(I)} is not interpolatable.`)}evaluate(i){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(i);const f=this.input.evaluate(i);if(f<=l[0])return d[0].evaluate(i);const y=l.length;if(f>=l[y-1])return d[y-1].evaluate(i);const x=wl(l,f),C=Pu.interpolationFactor(this.interpolation,f,l[x],l[x+1]),I=d[x].evaluate(i),R=d[x+1].evaluate(i);return this.operator==="interpolate"?Au[this.type.kind.toLowerCase()](I,R,C):this.operator==="interpolate-hcl"?Iu.reverse(Iu.interpolate(Iu.forward(I),Iu.forward(R),C)):Mu.reverse(Mu.interpolate(Mu.forward(I),Mu.forward(R),C))}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,i,this.input.serialize()];for(let d=0;d<this.labels.length;d++)l.push(this.labels[d],this.outputs[d].serialize());return l}}function If(s,i,l,d){const f=d-l,y=s-l;return f===0?0:i===1?y/f:(Math.pow(i,y)-1)/(Math.pow(i,f)-1)}var $a=Pu;class Pf{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expectected at least one argument.");let d=null;const f=l.expectedType;f&&f.kind!=="value"&&(d=f);const y=[];for(const C of i.slice(1)){const I=l.parse(C,1+y.length,d,void 0,{typeAnnotation:"omit"});if(!I)return null;d=d||I.type,y.push(I)}const x=f&&y.some(C=>Io(f,C.type));return new Pf(x?$n:d,y)}evaluate(i){let l,d=null,f=0;for(const y of this.args){if(f++,d=y.evaluate(i),d&&d instanceof xo&&!d.available&&(l||(l=d),d=null,f===this.args.length))return l;if(d!==null)break}return d}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var Uv=Pf;class ch{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const d=[];for(let y=1;y<i.length-1;y+=2){const x=i[y];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);const C=l.parse(i[y+1],y+1);if(!C)return null;d.push([x,C])}const f=l.parse(i[i.length-1],i.length-1,l.expectedType,d);return f?new ch(d,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[l,d]of this.bindings)i.push(l,d.serialize());return i.push(this.result.serialize()),i}}var Df=ch;class uh{constructor(i,l,d){this.type=i,this.index=l,this.input=d}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,Ht),f=l.parse(i[2],2,_o(l.expectedType||$n));return d&&f?new uh(f.type.itemType,d,f):null}evaluate(i){const l=this.index.evaluate(i),d=this.input.evaluate(i);if(l<0)throw new Xi(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new Xi(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new Xi(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var jb=uh;class Rf{constructor(i,l){this.type=Hn,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,$n),f=l.parse(i[2],2,$n);return d&&f?ff(d.type,[Hn,Kn,Ht,oc,$n])?new Rf(d,f):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(d.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(d==null)return!1;if(!_l(l,["boolean","string","number","null"]))throw new Xi(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(Pi(l))} instead.`);if(!_l(d,["string","array"]))throw new Xi(`Expected second argument to be of type array or string, but found ${Dr(Pi(d))} instead.`);return d.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var jv=Rf;class Du{constructor(i,l,d){this.type=Ht,this.needle=i,this.haystack=l,this.fromIndex=d}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,$n),f=l.parse(i[2],2,$n);if(!d||!f)return null;if(!ff(d.type,[Hn,Kn,Ht,oc,$n]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(d.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Ht);return y?new Du(d,f,y):null}return new Du(d,f)}evaluate(i){const l=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!_l(l,["boolean","string","number","null"]))throw new Xi(`Expected first argument to be of type boolean, string, number or null, but found ${Dr(Pi(l))} instead.`);if(!_l(d,["string","array"]))throw new Xi(`Expected second argument to be of type array or string, but found ${Dr(Pi(d))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(i);return d.indexOf(l,f)}return d.indexOf(l)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var $v=Du;class Lf{constructor(i,l,d,f,y,x){this.inputType=i,this.type=l,this.input=d,this.cases=f,this.outputs=y,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let d,f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const y={},x=[];for(let R=2;R<i.length-1;R+=2){let V=i[R];const q=i[R+1];Array.isArray(V)||(V=[V]);const Z=l.concat(R);if(V.length===0)return Z.error("Expected at least one branch label.");for(const Q of V){if(typeof Q!="number"&&typeof Q!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Z.error("Numeric branch labels must be integer values.");if(d){if(Z.checkSubtype(d,Pi(Q)))return null}else d=Pi(Q);if(y[String(Q)]!==void 0)return Z.error("Branch labels must be unique.");y[String(Q)]=x.length}const J=l.parse(q,R,f);if(!J)return null;f=f||J.type,x.push(J)}const C=l.parse(i[1],1,$n);if(!C)return null;const I=l.parse(i[i.length-1],i.length-1,f);return I?C.type.kind!=="value"&&l.concat(1).checkSubtype(d,C.type)?null:new Lf(d,f,C,y,x,I):null}evaluate(i){const l=this.input.evaluate(i);return(Pi(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),d=[],f={};for(const x of l){const C=f[this.cases[x]];C===void 0?(f[this.cases[x]]=d.length,d.push([this.cases[x],[x]])):d[C][1].push(x)}const y=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,C]of d)i.push(C.length===1?y(C[0]):C.map(y)),i.push(this.outputs[x].serialize());return i.push(this.otherwise.serialize()),i}}var $b=Lf;class Of{constructor(i,l,d){this.type=i,this.branches=l,this.otherwise=d}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const f=[];for(let x=1;x<i.length-1;x+=2){const C=l.parse(i[x],x,Hn);if(!C)return null;const I=l.parse(i[x+1],x+1,d);if(!I)return null;f.push([C,I]),d=d||I.type}const y=l.parse(i[i.length-1],i.length-1,d);return y?new Of(d,f,y):null}evaluate(i){for(const[l,d]of this.branches)if(l.evaluate(i))return d.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,d]of this.branches)i(l),i(d);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var Vb=Of;class El{constructor(i,l,d,f){this.type=i,this.input=l,this.beginIndex=d,this.endIndex=f}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,$n),f=l.parse(i[2],2,Ht);if(!d||!f)return null;if(!ff(d.type,[_o($n),Kn,$n]))return l.error(`Expected first argument to be of type array or string, but found ${Dr(d.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,Ht);return y?new El(d.type,d,f,y):null}return new El(d.type,d,f)}evaluate(i){const l=this.input.evaluate(i),d=this.beginIndex.evaluate(i);if(!_l(l,["string","array"]))throw new Xi(`Expected first argument to be of type array or string, but found ${Dr(Pi(l))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(i);return l.slice(d,f)}return l.slice(d)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Vv=El;function zf(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Hv(s,i,l,d){return d.compare(i,l)===0}function pc(s,i,l){const d=s!=="=="&&s!=="!=";return class RB{constructor(y,x,C){this.type=Hn,this.lhs=y,this.rhs=x,this.collator=C,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const C=y[0];let I=x.parse(y[1],1,$n);if(!I)return null;if(!zf(C,I.type))return x.concat(1).error(`"${C}" comparisons are not supported for type '${Dr(I.type)}'.`);let R=x.parse(y[2],2,$n);if(!R)return null;if(!zf(C,R.type))return x.concat(2).error(`"${C}" comparisons are not supported for type '${Dr(R.type)}'.`);if(I.type.kind!==R.type.kind&&I.type.kind!=="value"&&R.type.kind!=="value")return x.error(`Cannot compare types '${Dr(I.type)}' and '${Dr(R.type)}'.`);d&&(I.type.kind==="value"&&R.type.kind!=="value"?I=new ms(R.type,[I]):I.type.kind!=="value"&&R.type.kind==="value"&&(R=new ms(I.type,[R])));let V=null;if(y.length===4){if(I.type.kind!=="string"&&R.type.kind!=="string"&&I.type.kind!=="value"&&R.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(V=x.parse(y[3],3,vu),!V)return null}return new RB(I,R,V)}evaluate(y){const x=this.lhs.evaluate(y),C=this.rhs.evaluate(y);if(d&&this.hasUntypedArgument){const I=Pi(x),R=Pi(C);if(I.kind!==R.kind||I.kind!=="string"&&I.kind!=="number")throw new Xi(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${I.kind}, ${R.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const I=Pi(x),R=Pi(C);if(I.kind!=="string"||R.kind!=="string")return i(y,x,C)}return this.collator?l(y,x,C,this.collator.evaluate(y)):i(y,x,C)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}serialize(){const y=[s];return this.eachChild(x=>{y.push(x.serialize())}),y}}}const Hb=pc("==",function(s,i,l){return i===l},Hv),Wv=pc("!=",function(s,i,l){return i!==l},function(s,i,l,d){return!Hv(0,i,l,d)}),Gv=pc("<",function(s,i,l){return i<l},function(s,i,l,d){return d.compare(i,l)<0}),qv=pc(">",function(s,i,l){return i>l},function(s,i,l,d){return d.compare(i,l)>0}),Bf=pc("<=",function(s,i,l){return i<=l},function(s,i,l,d){return d.compare(i,l)<=0}),Wb=pc(">=",function(s,i,l){return i>=l},function(s,i,l,d){return d.compare(i,l)>=0});class Ff{constructor(i,l,d,f,y,x){this.type=Kn,this.number=i,this.locale=l,this.currency=d,this.unit=f,this.minFractionDigits=y,this.maxFractionDigits=x}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const d=l.parse(i[1],1,Ht);if(!d)return null;const f=i[2];if(typeof f!="object"||Array.isArray(f))return l.error("NumberFormat options argument must be an object.");let y=null;if(f.locale&&(y=l.parse(f.locale,1,Kn),!y))return null;let x=null;if(f.currency&&(x=l.parse(f.currency,1,Kn),!x))return null;let C=null;if(f.unit&&(C=l.parse(f.unit,1,Kn),!C))return null;let I=null;if(f["min-fraction-digits"]&&(I=l.parse(f["min-fraction-digits"],1,Ht),!I))return null;let R=null;return f["max-fraction-digits"]&&(R=l.parse(f["max-fraction-digits"],1,Ht),!R)?null:new Ff(d,y,x,C,I,R)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class Nf{constructor(i){this.type=Ht,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const d=l.parse(i[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Dr(d.type)} instead.`):new Nf(d):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Xi(`Expected value to be of type string or array, but found ${Dr(Pi(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(l=>{i.push(l.serialize())}),i}}const Zv={"==":Hb,"!=":Wv,">":qv,"<":Gv,">=":Wb,"<=":Bf,array:ms,at:jb,boolean:ms,case:Vb,coalesce:Uv,collator:Jd,format:wu,image:Yd,in:jv,"index-of":$v,interpolate:$a,"interpolate-hcl":$a,"interpolate-lab":$a,length:Nf,let:Df,literal:bu,match:$b,number:ms,"number-format":Ff,object:ms,slice:Vv,step:Sf,string:ms,"to-boolean":uc,"to-color":uc,"to-number":uc,"to-string":uc,var:Ef,within:wf};function Xv(s,[i,l,d,f]){i=i.evaluate(s),l=l.evaluate(s),d=d.evaluate(s);const y=f?f.evaluate(s):1,x=Av(i,l,d,y);if(x)throw new Xi(x);return new pi(i/255*y,l/255*y,d/255*y,y)}function Kv(s,i){return s in i}function Uf(s,i){const l=i[s];return l===void 0?null:l}function js(s){return{type:s}}Fs.register(Zv,{error:[{kind:"error"},[Kn],(s,[i])=>{throw new Xi(i.evaluate(s))}],typeof:[Kn,[$n],(s,[i])=>Dr(Pi(i.evaluate(s)))],"to-rgba":[_o(Ht,4),[ja],(s,[i])=>i.evaluate(s).toArray()],rgb:[ja,[Ht,Ht,Ht],Xv],rgba:[ja,[Ht,Ht,Ht,Ht],Xv],has:{type:Hn,overloads:[[[Kn],(s,[i])=>Kv(i.evaluate(s),s.properties())],[[Kn,yl],(s,[i,l])=>Kv(i.evaluate(s),l.evaluate(s))]]},get:{type:$n,overloads:[[[Kn],(s,[i])=>Uf(i.evaluate(s),s.properties())],[[Kn,yl],(s,[i,l])=>Uf(i.evaluate(s),l.evaluate(s))]]},"feature-state":[$n,[Kn],(s,[i])=>Uf(i.evaluate(s),s.featureState||{})],properties:[yl,[],s=>s.properties()],"geometry-type":[Kn,[],s=>s.geometryType()],id:[$n,[],s=>s.id()],zoom:[Ht,[],s=>s.globals.zoom],pitch:[Ht,[],s=>s.globals.pitch||0],"distance-from-center":[Ht,[],s=>s.distanceFromCenter()],"heatmap-density":[Ht,[],s=>s.globals.heatmapDensity||0],"line-progress":[Ht,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[Ht,[],s=>s.globals.skyRadialProgress||0],accumulated:[$n,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ht,js(Ht),(s,i)=>{let l=0;for(const d of i)l+=d.evaluate(s);return l}],"*":[Ht,js(Ht),(s,i)=>{let l=1;for(const d of i)l*=d.evaluate(s);return l}],"-":{type:Ht,overloads:[[[Ht,Ht],(s,[i,l])=>i.evaluate(s)-l.evaluate(s)],[[Ht],(s,[i])=>-i.evaluate(s)]]},"/":[Ht,[Ht,Ht],(s,[i,l])=>i.evaluate(s)/l.evaluate(s)],"%":[Ht,[Ht,Ht],(s,[i,l])=>i.evaluate(s)%l.evaluate(s)],ln2:[Ht,[],()=>Math.LN2],pi:[Ht,[],()=>Math.PI],e:[Ht,[],()=>Math.E],"^":[Ht,[Ht,Ht],(s,[i,l])=>Math.pow(i.evaluate(s),l.evaluate(s))],sqrt:[Ht,[Ht],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Ht,[Ht],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Ht,[Ht],(s,[i])=>Math.log(i.evaluate(s))],log2:[Ht,[Ht],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Ht,[Ht],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Ht,[Ht],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Ht,[Ht],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Ht,[Ht],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Ht,[Ht],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Ht,[Ht],(s,[i])=>Math.atan(i.evaluate(s))],min:[Ht,js(Ht),(s,i)=>Math.min(...i.map(l=>l.evaluate(s)))],max:[Ht,js(Ht),(s,i)=>Math.max(...i.map(l=>l.evaluate(s)))],abs:[Ht,[Ht],(s,[i])=>Math.abs(i.evaluate(s))],round:[Ht,[Ht],(s,[i])=>{const l=i.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ht,[Ht],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Ht,[Ht],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[Hn,[Kn,$n],(s,[i,l])=>s.properties()[i.value]===l.value],"filter-id-==":[Hn,[$n],(s,[i])=>s.id()===i.value],"filter-type-==":[Hn,[Kn],(s,[i])=>s.geometryType()===i.value],"filter-<":[Hn,[Kn,$n],(s,[i,l])=>{const d=s.properties()[i.value],f=l.value;return typeof d==typeof f&&d<f}],"filter-id-<":[Hn,[$n],(s,[i])=>{const l=s.id(),d=i.value;return typeof l==typeof d&&l<d}],"filter->":[Hn,[Kn,$n],(s,[i,l])=>{const d=s.properties()[i.value],f=l.value;return typeof d==typeof f&&d>f}],"filter-id->":[Hn,[$n],(s,[i])=>{const l=s.id(),d=i.value;return typeof l==typeof d&&l>d}],"filter-<=":[Hn,[Kn,$n],(s,[i,l])=>{const d=s.properties()[i.value],f=l.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[Hn,[$n],(s,[i])=>{const l=s.id(),d=i.value;return typeof l==typeof d&&l<=d}],"filter->=":[Hn,[Kn,$n],(s,[i,l])=>{const d=s.properties()[i.value],f=l.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[Hn,[$n],(s,[i])=>{const l=s.id(),d=i.value;return typeof l==typeof d&&l>=d}],"filter-has":[Hn,[$n],(s,[i])=>i.value in s.properties()],"filter-has-id":[Hn,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Hn,[_o(Kn)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[Hn,[_o($n)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[Hn,[Kn,_o($n)],(s,[i,l])=>l.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[Hn,[Kn,_o($n)],(s,[i,l])=>function(d,f,y,x){for(;y<=x;){const C=y+x>>1;if(f[C]===d)return!0;f[C]>d?x=C-1:y=C+1}return!1}(s.properties()[i.value],l.value,0,l.value.length-1)],all:{type:Hn,overloads:[[[Hn,Hn],(s,[i,l])=>i.evaluate(s)&&l.evaluate(s)],[js(Hn),(s,i)=>{for(const l of i)if(!l.evaluate(s))return!1;return!0}]]},any:{type:Hn,overloads:[[[Hn,Hn],(s,[i,l])=>i.evaluate(s)||l.evaluate(s)],[js(Hn),(s,i)=>{for(const l of i)if(l.evaluate(s))return!0;return!1}]]},"!":[Hn,[Hn],(s,[i])=>!i.evaluate(s)],"is-supported-script":[Hn,[Kn],(s,[i])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(i.evaluate(s))}],upcase:[Kn,[Kn],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[Kn,[Kn],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[Kn,js($n),(s,i)=>i.map(l=>xu(l.evaluate(s))).join("")],"resolved-locale":[Kn,[vu],(s,[i])=>i.evaluate(s).resolvedLocale()]});var fc=Zv;function Ru(s){return{result:"success",value:s}}function mc(s){return{result:"error",value:s}}function gc(s){return s["property-type"]==="data-driven"}function gs(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function dh(s){return!!s.expression&&s.expression.interpolated}function Jn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function hh(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Gb(s){return s}function jf(s,i){const l=i.type==="color",d=s.stops&&typeof s.stops[0][0]=="object",f=d||!(d||s.property!==void 0),y=s.type||(dh(i)?"exponential":"interval");if(l&&((s=fs({},s)).stops&&(s.stops=s.stops.map(R=>[R[0],pi.parse(R[1])])),s.default=pi.parse(s.default?s.default:i.default)),s.colorSpace&&s.colorSpace!=="rgb"&&!Nv[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let x,C,I;if(y==="exponential")x=ph;else if(y==="interval")x=Yv;else if(y==="categorical"){x=$f,C=Object.create(null);for(const R of s.stops)C[R[0]]=R[1];I=typeof s.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);x=Jv}if(d){const R={},V=[];for(let J=0;J<s.stops.length;J++){const Q=s.stops[J],ie=Q[0].zoom;R[ie]===void 0&&(R[ie]={zoom:ie,type:s.type,property:s.property,default:s.default,stops:[]},V.push(ie)),R[ie].stops.push([Q[0].value,Q[1]])}const q=[];for(const J of V)q.push([R[J].zoom,jf(R[J],i)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:$a.interpolationFactor.bind(void 0,Z),zoomStops:q.map(J=>J[0]),evaluate:({zoom:J},Q)=>ph({stops:q,base:s.base},i,J).evaluate(J,Q)}}if(f){const R=y==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:$a.interpolationFactor.bind(void 0,R),zoomStops:s.stops.map(V=>V[0]),evaluate:({zoom:V})=>x(s,i,V,C,I)}}return{kind:"source",evaluate(R,V){const q=V&&V.properties?V.properties[s.property]:void 0;return q===void 0?Lu(s.default,i.default):x(s,i,q,C,I)}}}function Lu(s,i,l){return s!==void 0?s:i!==void 0?i:l!==void 0?l:void 0}function $f(s,i,l,d,f){return Lu(typeof l===f?d[l]:void 0,s.default,i.default)}function Yv(s,i,l){if(Jn(l)!=="number")return Lu(s.default,i.default);const d=s.stops.length;if(d===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[d-1][0])return s.stops[d-1][1];const f=wl(s.stops.map(y=>y[0]),l);return s.stops[f][1]}function ph(s,i,l){const d=s.base!==void 0?s.base:1;if(Jn(l)!=="number")return Lu(s.default,i.default);const f=s.stops.length;if(f===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[f-1][0])return s.stops[f-1][1];const y=wl(s.stops.map(V=>V[0]),l),x=function(V,q,Z,J){const Q=J-Z,ie=V-Z;return Q===0?0:q===1?ie/Q:(Math.pow(q,ie)-1)/(Math.pow(q,Q)-1)}(l,d,s.stops[y][0],s.stops[y+1][0]),C=s.stops[y][1],I=s.stops[y+1][1];let R=Au[i.type]||Gb;if(s.colorSpace&&s.colorSpace!=="rgb"){const V=Nv[s.colorSpace];R=(q,Z)=>V.reverse(V.interpolate(V.forward(q),V.forward(Z),x))}return typeof C.evaluate=="function"?{evaluate(...V){const q=C.evaluate.apply(void 0,V),Z=I.evaluate.apply(void 0,V);if(q!==void 0&&Z!==void 0)return R(q,Z,x)}}:R(C,I,x)}function Jv(s,i,l){return i.type==="color"?l=pi.parse(l):i.type==="formatted"?l=Do.fromString(l.toString()):i.type==="resolvedImage"?l=xo.fromString(l.toString()):Jn(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),Lu(l,s.default,i.default)}class fh{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new Eu,this._defaultValue=l?function(d){return d.type==="color"&&(hh(d.default)||Array.isArray(d.default))?new pi(0,0,0,0):d.type==="color"?pi.parse(d.default)||null:d.default===void 0?null:d.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,d,f,y,x,C,I){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=f||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(i,l,d,f,y,x,C,I){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=f||null,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=I||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new Xi(`Expected value to be one of ${Object.keys(this._enumValues).map(V=>JSON.stringify(V)).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console!="undefined"&&console.warn(R.message)),this._defaultValue}}}function vc(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in fc}function yc(s,i){const l=new Cf(fc,[],i?function(f){const y={color:ja,string:Kn,number:Ht,enum:Kn,boolean:Hn,formatted:ac,resolvedImage:sc};return f.type==="array"?_o(y[f.value]||$n,f.length):y[f.type]}(i):void 0),d=l.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Ru(new fh(d,i)):mc(l.errors)}class mh{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!Tu(l.expression)}evaluateWithoutErrorHandling(i,l,d,f,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,d,f,y,x)}evaluate(i,l,d,f,y,x){return this._styleExpression.evaluate(i,l,d,f,y,x)}}class Cl{constructor(i,l,d,f){this.kind=i,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!Tu(l.expression),this.interpolationType=f}evaluateWithoutErrorHandling(i,l,d,f,y,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,d,f,y,x)}evaluate(i,l,d,f,y,x){return this._styleExpression.evaluate(i,l,d,f,y,x)}interpolationFactor(i,l,d){return this.interpolationType?$a.interpolationFactor(this.interpolationType,i,l,d):0}}function Sl(s,i){if((s=yc(s,i)).result==="error")return s;const l=s.value.expression,d=ku(l);if(!d&&!gc(i))return mc([new Ua("","data expressions not supported")]);const f=nh(l,["zoom","pitch","distance-from-center"]);if(!f&&!gs(i))return mc([new Ua("","zoom expressions not supported")]);const y=zu(l);return y||f?y instanceof Ua?mc([y]):y instanceof $a&&!dh(i)?mc([new Ua("",'"interpolate" expressions cannot be used with this property')]):Ru(y?new Cl(d?"camera":"composite",s.value,y.labels,y instanceof $a?y.interpolation:void 0):new mh(d?"constant":"source",s.value)):mc([new Ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ou{constructor(i,l){this._parameters=i,this._specification=l,fs(this,jf(this._parameters,this._specification))}static deserialize(i){return new Ou(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function zu(s){let i=null;if(s instanceof Df)i=zu(s.result);else if(s instanceof Uv){for(const l of s.args)if(i=zu(l),i)break}else(s instanceof Sf||s instanceof $a)&&s.input instanceof Fs&&s.input.name==="zoom"&&(i=s);return i instanceof Ua||s.eachChild(l=>{const d=zu(l);d instanceof Ua?i=d:!i&&d?i=new Ua("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&d&&i!==d&&(i=new Ua("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Qt{constructor(i,l,d,f){this.message=(i?`${i}: `:"")+d,f&&(this.identifier=f),l!=null&&l.__line__&&(this.line=l.__line__)}}function ra(s){const i=s.key,l=s.value,d=s.valueSpec||{},f=s.objectElementValidators||{},y=s.style,x=s.styleSpec;let C=[];const I=Jn(l);if(I!=="object")return[new Qt(i,l,`object expected, ${I} found`)];for(const R in l){const V=R.split(".")[0],q=d[V]||d["*"];let Z;f[V]?Z=f[V]:d[V]?Z=ao:f["*"]?Z=f["*"]:d["*"]&&(Z=ao),Z?C=C.concat(Z({key:(i&&`${i}.`)+R,value:l[R],valueSpec:q,style:y,styleSpec:x,object:l,objectKey:R},l)):C.push(new Qt(i,l[R],`unknown property "${R}"`))}for(const R in d)f[R]||d[R].required&&d[R].default===void 0&&l[R]===void 0&&C.push(new Qt(i,l,`missing required property "${R}"`));return C}function Qv(s){const i=s.value,l=s.valueSpec,d=s.style,f=s.styleSpec,y=s.key,x=s.arrayElementValidator||ao;if(Jn(i)!=="array")return[new Qt(y,i,`array expected, ${Jn(i)} found`)];if(l.length&&i.length!==l.length)return[new Qt(y,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new Qt(y,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let C={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};f.$version<7&&(C.function=l.function),Jn(l.value)==="object"&&(C=l.value);let I=[];for(let R=0;R<i.length;R++)I=I.concat(x({array:i,arrayIndex:R,value:i[R],valueSpec:C,style:d,styleSpec:f,key:`${y}[${R}]`}));return I}function Vf(s){const i=s.key,l=s.value,d=s.valueSpec;let f=Jn(l);if(f==="number"&&l!=l&&(f="NaN"),f!=="number")return[new Qt(i,l,`number expected, ${f} found`)];if("minimum"in d){let y=d.minimum;if(Jn(d.minimum)==="array"&&(y=d.minimum[s.arrayIndex]),l<y)return[new Qt(i,l,`${l} is less than the minimum value ${y}`)]}if("maximum"in d){let y=d.maximum;if(Jn(d.maximum)==="array"&&(y=d.maximum[s.arrayIndex]),l>y)return[new Qt(i,l,`${l} is greater than the maximum value ${y}`)]}return[]}function Bu(s){const i=s.valueSpec,l=bi(s.value.type);let d,f,y,x={};const C=l!=="categorical"&&s.value.property===void 0,I=!C,R=Jn(s.value.stops)==="array"&&Jn(s.value.stops[0])==="array"&&Jn(s.value.stops[0][0])==="object",V=ra({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(J){if(l==="identity")return[new Qt(J.key,J.value,'identity function may not have a "stops" property')];let Q=[];const ie=J.value;return Q=Q.concat(Qv({key:J.key,value:ie,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:q})),Jn(ie)==="array"&&ie.length===0&&Q.push(new Qt(J.key,ie,"array must have at least one stop")),Q},default:function(J){return ao({key:J.key,value:J.value,valueSpec:i,style:J.style,styleSpec:J.styleSpec})}}});return l==="identity"&&C&&V.push(new Qt(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||V.push(new Qt(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!dh(s.valueSpec)&&V.push(new Qt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(I&&!gc(s.valueSpec)?V.push(new Qt(s.key,s.value,"property functions not supported")):C&&!gs(s.valueSpec)&&V.push(new Qt(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!R||s.value.property!==void 0||V.push(new Qt(s.key,s.value,'"property" property is required')),V;function q(J){let Q=[];const ie=J.value,de=J.key;if(Jn(ie)!=="array")return[new Qt(de,ie,`array expected, ${Jn(ie)} found`)];if(ie.length!==2)return[new Qt(de,ie,`array length 2 expected, length ${ie.length} found`)];if(R){if(Jn(ie[0])!=="object")return[new Qt(de,ie,`object expected, ${Jn(ie[0])} found`)];if(ie[0].zoom===void 0)return[new Qt(de,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new Qt(de,ie,"object stop key must have value")];const Ce=bi(ie[0].zoom);if(typeof Ce!="number")return[new Qt(de,ie[0].zoom,"stop zoom values must be numbers")];if(y&&y>Ce)return[new Qt(de,ie[0].zoom,"stop zoom values must appear in ascending order")];Ce!==y&&(y=Ce,f=void 0,x={}),Q=Q.concat(ra({key:`${de}[0]`,value:ie[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Vf,value:Z}}))}else Q=Q.concat(Z({key:`${de}[0]`,value:ie[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},ie));return vc(Bs(ie[1]))?Q.concat([new Qt(`${de}[1]`,ie[1],"expressions are not allowed in function stops.")]):Q.concat(ao({key:`${de}[1]`,value:ie[1],valueSpec:i,style:J.style,styleSpec:J.styleSpec}))}function Z(J,Q){const ie=Jn(J.value),de=bi(J.value),Ce=J.value!==null?J.value:Q;if(d){if(ie!==d)return[new Qt(J.key,Ce,`${ie} stop domain type must match previous stop domain type ${d}`)]}else d=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean"&&typeof de!="number"&&typeof de!="string"&&typeof de!="boolean")return[new Qt(J.key,Ce,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&l!=="categorical"){let Fe=`number expected, ${ie} found`;return gc(i)&&l===void 0&&(Fe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qt(J.key,Ce,Fe)]}return l!=="categorical"||ie!=="number"||typeof de=="number"&&isFinite(de)&&Math.floor(de)===de?l!=="categorical"&&ie==="number"&&typeof de=="number"&&typeof f=="number"&&f!==void 0&&de<f?[new Qt(J.key,Ce,"stop domain values must appear in ascending order")]:(f=de,l==="categorical"&&de in x?[new Qt(J.key,Ce,"stop domain values must be unique")]:(x[de]=!0,[])):[new Qt(J.key,Ce,`integer expected, found ${String(de)}`)]}}function _c(s){const i=(s.expressionContext==="property"?Sl:yc)(Bs(s.value),s.valueSpec);if(i.result==="error")return i.value.map(d=>new Qt(`${s.key}${d.key}`,s.value,d.message));const l=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new Qt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Tu(l))return[new Qt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter")return ey(l,s);if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!nh(l,["zoom","feature-state"]))return[new Qt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!ku(l))return[new Qt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ey(s,i){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const f of i.valueSpec.expression.parameters)l.delete(f);if(l.size===0)return[];const d=[];return s instanceof Fs&&l.has(s.name)?[new Qt(i.key,i.value,`["${s.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(s.eachChild(f=>{d.push(...ey(f,i))}),d)}function gh(s){const i=s.key,l=s.value,d=s.valueSpec,f=[];return Array.isArray(d.values)?d.values.indexOf(bi(l))===-1&&f.push(new Qt(i,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(bi(l))===-1&&f.push(new Qt(i,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),f}function Hf(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!Hf(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function vh(s,i="fill"){if(s==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Hf(s)||(s=_h(s));const l=s;let d=!0;try{d=function(R){if(!Hi(R))return R;let V=Bs(R);return Nu(V),V=Fu(V),V}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const f=Et[`filter_${i}`],y=yc(d,f);let x=null;if(y.result==="error")throw new Error(y.value.map(R=>`${R.key}: ${R.message}`).join(", "));x=(R,V,q)=>y.value.evaluate(R,V,{},q);let C=null,I=null;if(d!==l){const R=yc(l,f);if(R.result==="error")throw new Error(R.value.map(V=>`${V.key}: ${V.message}`).join(", "));C=(V,q,Z,J,Q)=>R.value.evaluate(V,q,{},Z,void 0,void 0,J,Q),I=!ku(R.value.expression)}return{filter:x,dynamicFilter:C||void 0,needGeometry:ty(d),needFeature:!!I}}function Fu(s){if(!Array.isArray(s))return s;const i=function(l){if(yh.has(l[0])){for(let d=1;d<l.length;d++)if(Hi(l[d]))return!0}return l}(s);return i===!0?i:i.map(l=>Fu(l))}function Nu(s){let i=!1;const l=[];if(s[0]==="case"){for(let d=1;d<s.length-1;d+=2)i=i||Hi(s[d]),l.push(s[d+1]);l.push(s[s.length-1])}else if(s[0]==="match"){i=i||Hi(s[1]);for(let d=2;d<s.length-1;d+=2)l.push(s[d+1]);l.push(s[s.length-1])}else if(s[0]==="step"){i=i||Hi(s[1]);for(let d=1;d<s.length-1;d+=2)l.push(s[d+1])}i&&(s.length=0,s.push("any",...l));for(let d=1;d<s.length;d++)Nu(s[d])}function Hi(s){if(!Array.isArray(s))return!1;if((i=s[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let l=1;l<s.length;l++)if(Hi(s[l]))return!0;return!1}const yh=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function qb(s,i){return s<i?-1:s>i?1:0}function ty(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let i=1;i<s.length;i++)if(ty(s[i]))return!0;return!1}function _h(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?Wf(s[1],s[2],"=="):i==="!="?xc(Wf(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Wf(s[1],s[2],i):i==="any"?(l=s.slice(1),["any"].concat(l.map(_h))):i==="all"?["all"].concat(s.slice(1).map(_h)):i==="none"?["all"].concat(s.slice(1).map(_h).map(xc)):i==="in"?xh(s[1],s.slice(2)):i==="!in"?xc(xh(s[1],s.slice(2))):i==="has"?ny(s[1]):i==="!has"?xc(ny(s[1])):i!=="within"||s;var l}function Wf(s,i,l){switch(s){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,s,i]}}function xh(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",s,["literal",i.sort(qb)]]:["filter-in-small",s,["literal",i]]}}function ny(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function xc(s){return["!",s]}function Gf(s){return Hf(Bs(s.value))?_c(fs({},s,{expressionContext:"filter",valueSpec:s.styleSpec[`filter_${s.layerType||"fill"}`]})):ry(s)}function ry(s){const i=s.value,l=s.key;if(Jn(i)!=="array")return[new Qt(l,i,`array expected, ${Jn(i)} found`)];const d=s.styleSpec;let f,y=[];if(i.length<1)return[new Qt(l,i,"filter array must have at least 1 element")];switch(y=y.concat(gh({key:`${l}[0]`,value:i[0],valueSpec:d.filter_operator,style:s.style,styleSpec:s.styleSpec})),bi(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&bi(i[1])==="$type"&&y.push(new Qt(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new Qt(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(f=Jn(i[1]),f!=="string"&&y.push(new Qt(`${l}[1]`,i[1],`string expected, ${f} found`)));for(let x=2;x<i.length;x++)f=Jn(i[x]),bi(i[1])==="$type"?y=y.concat(gh({key:`${l}[${x}]`,value:i[x],valueSpec:d.geometry_type,style:s.style,styleSpec:s.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&y.push(new Qt(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)y=y.concat(ry({key:`${l}[${x}]`,value:i[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":f=Jn(i[1]),i.length!==2?y.push(new Qt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):f!=="string"&&y.push(new Qt(`${l}[1]`,i[1],`string expected, ${f} found`));break;case"within":f=Jn(i[1]),i.length!==2?y.push(new Qt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):f!=="object"&&y.push(new Qt(`${l}[1]`,i[1],`object expected, ${f} found`))}return y}function bh(s,i){const l=s.key,d=s.style,f=s.styleSpec,y=s.value,x=s.objectKey,C=f[`${i}_${s.layerType}`];if(!C)return[];const I=x.match(/^(.*)-transition$/);if(i==="paint"&&I&&C[I[1]]&&C[I[1]].transition)return ao({key:l,value:y,valueSpec:f.transition,style:d,styleSpec:f});const R=s.valueSpec||C[x];if(!R)return[new Qt(l,y,`unknown property "${x}"`)];let V;if(Jn(y)==="string"&&gc(R)&&!R.tokens&&(V=/^{([^}]+)}$/.exec(y))){const Z=`\`{ "type": "identity", "property": ${V?JSON.stringify(V[1]):'"_"'} }\``;return[new Qt(l,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: ${Z}.`)]}const q=[];return s.layerType==="symbol"&&(x==="text-field"&&d&&!d.glyphs&&q.push(new Qt(l,y,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&hh(Bs(y))&&bi(y.type)==="identity"&&q.push(new Qt(l,y,'"text-font" does not support identity functions'))),q.concat(ao({key:s.key,value:y,valueSpec:R,style:d,styleSpec:f,expressionContext:"property",propertyType:i,propertyKey:x}))}function iy(s){return bh(s,"paint")}function qf(s){return bh(s,"layout")}function Zf(s){let i=[];const l=s.value,d=s.key,f=s.style,y=s.styleSpec;l.type||l.ref||i.push(new Qt(d,l,'either "type" or "ref" is required'));let x=bi(l.type);const C=bi(l.ref);if(l.id){const I=bi(l.id);for(let R=0;R<s.arrayIndex;R++){const V=f.layers[R];bi(V.id)===I&&i.push(new Qt(d,l.id,`duplicate layer id "${l.id}", previously used at line ${V.id.__line__}`))}}if("ref"in l){let I;["type","source","source-layer","filter","layout"].forEach(R=>{R in l&&i.push(new Qt(d,l[R],`"${R}" is prohibited for ref layers`))}),f.layers.forEach(R=>{bi(R.id)===C&&(I=R)}),I?I.ref?i.push(new Qt(d,l.ref,"ref cannot reference another ref layer")):x=bi(I.type):typeof C=="string"&&i.push(new Qt(d,l.ref,`ref layer "${C}" not found`))}else if(x!=="background"&&x!=="sky")if(l.source){const I=f.sources&&f.sources[l.source],R=I&&bi(I.type);I?R==="vector"&&x==="raster"?i.push(new Qt(d,l.source,`layer "${l.id}" requires a raster source`)):R==="raster"&&x!=="raster"?i.push(new Qt(d,l.source,`layer "${l.id}" requires a vector source`)):R!=="vector"||l["source-layer"]?R==="raster-dem"&&x!=="hillshade"?i.push(new Qt(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||R==="geojson"&&I.lineMetrics||i.push(new Qt(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Qt(d,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new Qt(d,l.source,`source "${l.source}" not found`))}else i.push(new Qt(d,l,'missing required property "source"'));return i=i.concat(ra({key:d,value:l,valueSpec:y.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ao({key:`${d}.type`,value:l.type,valueSpec:y.layer.type,style:s.style,styleSpec:s.styleSpec,object:l,objectKey:"type"}),filter:I=>Gf(fs({layerType:x},I)),layout:I=>ra({layer:l,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":R=>qf(fs({layerType:x},R))}}),paint:I=>ra({layer:l,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":R=>iy(fs({layerType:x},R))}})}})),i}function bc(s){const i=s.value,l=s.key,d=Jn(i);return d!=="string"?[new Qt(l,i,`string expected, ${d} found`)]:[]}const wh={promoteId:function({key:s,value:i}){if(Jn(i)==="string")return bc({key:s,value:i});{const l=[];for(const d in i)l.push(...bc({key:`${s}.${d}`,value:i[d]}));return l}}};function Uu(s){const i=s.value,l=s.key,d=s.styleSpec,f=s.style;if(!i.type)return[new Qt(l,i,'"type" is required')];const y=bi(i.type);let x;switch(y){case"vector":case"raster":case"raster-dem":return x=ra({key:l,value:i,valueSpec:d[`source_${y.replace("-","_")}`],style:s.style,styleSpec:d,objectElementValidators:wh}),x;case"geojson":if(x=ra({key:l,value:i,valueSpec:d.source_geojson,style:f,styleSpec:d,objectElementValidators:wh}),i.cluster)for(const C in i.clusterProperties){const[I,R]=i.clusterProperties[C],V=typeof I=="string"?[I,["accumulated"],["get",C]]:I;x.push(..._c({key:`${l}.${C}.map`,value:R,expressionContext:"cluster-map"})),x.push(..._c({key:`${l}.${C}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return x;case"video":return ra({key:l,value:i,valueSpec:d.source_video,style:f,styleSpec:d});case"image":return ra({key:l,value:i,valueSpec:d.source_image,style:f,styleSpec:d});case"canvas":return[new Qt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gh({key:`${l}.type`,value:i.type,valueSpec:{values:oy(d)},style:f,styleSpec:d})}}function oy(s){return s.source.reduce((i,l)=>{const d=s[l];return d.type.type==="enum"&&(i=i.concat(Object.keys(d.type.values))),i},[])}function ay(s){const i=s.value,l=s.styleSpec,d=l.light,f=s.style;let y=[];const x=Jn(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new Qt("light",i,`object expected, ${x} found`)]),y;for(const C in i){const I=C.match(/^(.*)-transition$/);y=y.concat(I&&d[I[1]]&&d[I[1]].transition?ao({key:C,value:i[C],valueSpec:l.transition,style:f,styleSpec:l}):d[C]?ao({key:C,value:i[C],valueSpec:d[C],style:f,styleSpec:l}):[new Qt(C,i[C],`unknown property "${C}"`)])}return y}function Xf(s){const i=s.value,l=s.key,d=s.style,f=s.styleSpec,y=f.terrain;let x=[];const C=Jn(i);if(i===void 0)return x;if(C!=="object")return x=x.concat([new Qt("terrain",i,`object expected, ${C} found`)]),x;for(const I in i){const R=I.match(/^(.*)-transition$/);x=x.concat(R&&y[R[1]]&&y[R[1]].transition?ao({key:I,value:i[I],valueSpec:f.transition,style:d,styleSpec:f}):y[I]?ao({key:I,value:i[I],valueSpec:y[I],style:d,styleSpec:f}):[new Qt(I,i[I],`unknown property "${I}"`)])}if(i.source){const I=d.sources&&d.sources[i.source],R=I&&bi(I.type);I?R!=="raster-dem"&&x.push(new Qt(l,i.source,`terrain cannot be used with a source of type ${String(R)}, it only be used with a "raster-dem" source type`)):x.push(new Qt(l,i.source,`source "${i.source}" not found`))}else x.push(new Qt(l,i,'terrain is missing required property "source"'));return x}function sy(s){const i=s.value,l=s.style,d=s.styleSpec,f=d.fog;let y=[];const x=Jn(i);if(i===void 0)return y;if(x!=="object")return y=y.concat([new Qt("fog",i,`object expected, ${x} found`)]),y;for(const C in i){const I=C.match(/^(.*)-transition$/);y=y.concat(I&&f[I[1]]&&f[I[1]].transition?ao({key:C,value:i[C],valueSpec:d.transition,style:l,styleSpec:d}):f[C]?ao({key:C,value:i[C],valueSpec:f[C],style:l,styleSpec:d}):[new Qt(C,i[C],`unknown property "${C}"`)])}return y}const Eh={"*":()=>[],array:Qv,boolean:function(s){const i=s.value,l=s.key,d=Jn(i);return d!=="boolean"?[new Qt(l,i,`boolean expected, ${d} found`)]:[]},number:Vf,color:function(s){const i=s.key,l=s.value,d=Jn(l);return d!=="string"?[new Qt(i,l,`color expected, ${d} found`)]:mf(l)===null?[new Qt(i,l,`color expected, "${l}" found`)]:[]},enum:gh,filter:Gf,function:Bu,layer:Zf,object:ra,source:Uu,light:ay,terrain:Xf,fog:sy,string:bc,formatted:function(s){return bc(s).length===0?[]:_c(s)},resolvedImage:function(s){return bc(s).length===0?[]:_c(s)},projection:function(s){const i=s.value,l=s.styleSpec,d=l.projection,f=s.style;let y=[];const x=Jn(i);if(x==="object")for(const C in i)y=y.concat(ao({key:C,value:i[C],valueSpec:d[C],style:f,styleSpec:l}));else x!=="string"&&(y=y.concat([new Qt("projection",i,`object or string expected, ${x} found`)]));return y}};function ao(s){const i=s.value,l=s.valueSpec,d=s.styleSpec;return l.expression&&hh(bi(i))?Bu(s):l.expression&&vc(Bs(i))?_c(s):l.type&&Eh[l.type]?Eh[l.type](s):ra(fs({},s,{valueSpec:l.type?d[l.type]:l}))}function Zb(s){const i=s.value,l=s.key,d=bc(s);return d.length||(i.indexOf("{fontstack}")===-1&&d.push(new Qt(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&d.push(new Qt(l,i,'"glyphs" url must include a "{range}" token'))),d}function ly(s,i=Et){return vs(ao({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,objectElementValidators:{glyphs:Zb,"*":()=>[]}}))}const Xb=s=>vs(iy(s)),cy=s=>vs(qf(s));function vs(s){return s.slice().sort((i,l)=>i.line&&l.line?i.line-l.line:0)}function uy(s,i){let l=!1;if(i&&i.length)for(const d of i)s.fire(new zs(new Error(d.message))),l=!0;return l}var wc=Va;function Va(s,i,l){var d=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var f=new Int32Array(this.arrayBuffer);s=f[0],this.d=(i=f[1])+2*(l=f[2]);for(var y=0;y<this.d*this.d;y++){var x=f[3+y],C=f[3+y+1];d.push(x===C?null:f.subarray(x,C))}var I=f[3+d.length+1];this.keys=f.subarray(f[3+d.length],I),this.bboxes=f.subarray(I),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var R=0;R<this.d*this.d;R++)d.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=s,this.padding=l,this.scale=i/s,this.uid=0;var V=l/i*s;this.min=-V,this.max=s+V}Va.prototype.insert=function(s,i,l,d,f){this._forEachCell(i,l,d,f,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(f)},Va.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Va.prototype._insertCell=function(s,i,l,d,f,y){this.cells[f].push(y)},Va.prototype.query=function(s,i,l,d,f){var y=this.min,x=this.max;if(s<=y&&i<=y&&x<=l&&x<=d&&!f)return Array.prototype.slice.call(this.keys);var C=[];return this._forEachCell(s,i,l,d,this._queryCell,C,{},f),C},Va.prototype._queryCell=function(s,i,l,d,f,y,x,C){var I=this.cells[f];if(I!==null)for(var R=this.keys,V=this.bboxes,q=0;q<I.length;q++){var Z=I[q];if(x[Z]===void 0){var J=4*Z;(C?C(V[J+0],V[J+1],V[J+2],V[J+3]):s<=V[J+2]&&i<=V[J+3]&&l>=V[J+0]&&d>=V[J+1])?(x[Z]=!0,y.push(R[Z])):x[Z]=!1}}},Va.prototype._forEachCell=function(s,i,l,d,f,y,x,C){for(var I=this._convertToCellCoord(s),R=this._convertToCellCoord(i),V=this._convertToCellCoord(l),q=this._convertToCellCoord(d),Z=I;Z<=V;Z++)for(var J=R;J<=q;J++){var Q=this.d*J+Z;if((!C||C(this._convertFromCellCoord(Z),this._convertFromCellCoord(J),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(J+1)))&&f.call(this,s,i,l,d,Q,y,x,C))return}},Va.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},Va.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},Va.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,i=3+this.cells.length+1+1,l=0,d=0;d<this.cells.length;d++)l+=this.cells[d].length;var f=new Int32Array(i+l+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var y=i,x=0;x<s.length;x++){var C=s[x];f[3+x]=y,f.set(C,y),y+=C.length}return f[3+s.length]=y,f.set(this.keys,y),f[3+s.length+1]=y+=this.keys.length,f.set(this.bboxes,y),y+=this.bboxes.length,f.buffer};const Ch={};function an(s,i,l={}){Object.defineProperty(s,"_classRegistryKey",{value:i,writeable:!1}),Ch[i]={klass:s,omit:l.omit||[]}}an(Object,"Object"),wc.serialize=function(s,i){const l=s.toArrayBuffer();return i&&i.push(l),{buffer:l}},wc.deserialize=function(s){return new wc(s.buffer)},Object.defineProperty(wc,"name",{value:"Grid"}),an(wc,"Grid"),an(pi,"Color"),an(Error,"Error"),an(Nt,"AJAXError"),an(xo,"ResolvedImage"),an(Ou,"StylePropertyFunction"),an(fh,"StyleExpression",{omit:["_evaluator"]}),an(Cl,"ZoomDependentExpression"),an(mh,"ZoomConstantExpression"),an(Fs,"CompoundExpression",{omit:["_evaluate"]});for(const s in fc)Ch[fc[s]._classRegistryKey]||an(fc[s],`Expression${s}`);function dy(s){return s&&typeof ArrayBuffer!="undefined"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function ju(s){return g.ImageBitmap&&s instanceof g.ImageBitmap}function $u(s,i){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(dy(s)||ju(s))return i&&i.push(s),s;if(ArrayBuffer.isView(s)){const l=s;return i&&i.push(l.buffer),l}if(s instanceof g.ImageData)return i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const l=[];for(const d of s)l.push($u(d,i));return l}if(typeof s=="object"){const l=s.constructor,d=l._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const f=l.serialize?l.serialize(s,i):{};if(!l.serialize){for(const y in s)s.hasOwnProperty(y)&&(Ch[d].omit.indexOf(y)>=0||(f[y]=$u(s[y],i)));s instanceof Error&&(f.message=s.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(f.$name=d),f}throw new Error("can't serialize object of type "+typeof s)}function Vu(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||dy(s)||ju(s)||ArrayBuffer.isView(s)||s instanceof g.ImageData)return s;if(Array.isArray(s))return s.map(Vu);if(typeof s=="object"){const i=s.$name||"Object",{klass:l}=Ch[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(s);const d=Object.create(l.prototype);for(const f of Object.keys(s))f!=="$name"&&(d[f]=Vu(s[f]));return d}throw new Error("can't deserialize object of type "+typeof s)}const Hu=s=>s>=1536&&s<=1791,hy=s=>s>=1872&&s<=1919,Kf=s=>s>=2208&&s<=2303,py=s=>s>=11904&&s<=12031,Yf=s=>s>=12032&&s<=12255,Jf=s=>s>=12272&&s<=12287,Wu=s=>s>=12288&&s<=12351,Sh=s=>s>=12352&&s<=12447,Ec=s=>s>=12448&&s<=12543,kh=s=>s>=12544&&s<=12591,fy=s=>s>=12704&&s<=12735,my=s=>s>=12736&&s<=12783,Qf=s=>s>=12784&&s<=12799,gy=s=>s>=12800&&s<=13055,vy=s=>s>=13056&&s<=13311,yy=s=>s>=13312&&s<=19903,em=s=>s>=19968&&s<=40959,_y=s=>s>=40960&&s<=42127,xy=s=>s>=42128&&s<=42191,by=s=>s>=44032&&s<=55215,wy=s=>s>=63744&&s<=64255,Th=s=>s>=64336&&s<=65023,Gu=s=>s>=65040&&s<=65055,v=s=>s>=65072&&s<=65103,c=s=>s>=65104&&s<=65135,p=s=>s>=65136&&s<=65279,_=s=>s>=65280&&s<=65519;function E(s){for(const i of s)if(U(i.charCodeAt(0)))return!0;return!1}function k(s){for(const i of s)if(!L(i.charCodeAt(0)))return!1;return!0}function L(s){return!(Hu(s)||hy(s)||Kf(s)||Th(s)||p(s))}function U(s){return!(s!==746&&s!==747&&(s<4352||!(fy(s)||kh(s)||v(s)&&!(s>=65097&&s<=65103)||wy(s)||vy(s)||py(s)||my(s)||!(!Wu(s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||yy(s)||em(s)||gy(s)||(i=>i>=12592&&i<=12687)(s)||(i=>i>=43360&&i<=43391)(s)||(i=>i>=55216&&i<=55295)(s)||(i=>i>=4352&&i<=4607)(s)||by(s)||Sh(s)||Jf(s)||(i=>i>=12688&&i<=12703)(s)||Yf(s)||Qf(s)||Ec(s)&&s!==12540||!(!_(s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!c(s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||(i=>i>=5120&&i<=5759)(s)||(i=>i>=6320&&i<=6399)(s)||Gu(s)||(i=>i>=19904&&i<=19967)(s)||_y(s)||xy(s))))}function G(s){return!(U(s)||function(i){return!!((l=>l>=128&&l<=255)(i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||(l=>l>=8192&&l<=8303)(i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||(l=>l>=8448&&l<=8527)(i)||(l=>l>=8528&&l<=8591)(i)||(l=>l>=8960&&l<=9215)(i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||(l=>l>=9216&&l<=9279)(i)&&i!==9251||(l=>l>=9280&&l<=9311)(i)||(l=>l>=9312&&l<=9471)(i)||(l=>l>=9632&&l<=9727)(i)||(l=>l>=9728&&l<=9983)(i)&&!(i>=9754&&i<=9759)||(l=>l>=11008&&l<=11263)(i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Wu(i)||Ec(i)||(l=>l>=57344&&l<=63743)(i)||v(i)||c(i)||_(i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}function K(s){return s>=1424&&s<=2303||Th(s)||p(s)}function X(s,i){return!(!i&&K(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||(l=>l>=6016&&l<=6143)(s))}function ee(s){for(const i of s)if(K(i.charCodeAt(0)))return!0;return!1}const ue="deferred",he="loading",me="loaded";let ge=null,ye="unavailable",le=null;const Te=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(ye="error"),ge&&ge(s)};function ke(){De.fire(new _r("pluginStateChange",{pluginStatus:ye,pluginURL:le}))}const De=new ps,He=function(){return ye},je=function(){if(ye!==ue||!le)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ye=he,ke(),le&&Tn({url:le},s=>{s?Te(s):(ye=me,ke())})},Ge={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ye===me||Ge.applyArabicShaping!=null,isLoading:()=>ye===he,setState(s){ye=s.pluginStatus,le=s.pluginURL},isParsed:()=>Ge.applyArabicShaping!=null&&Ge.processBidirectionalText!=null&&Ge.processStyledBidirectionalText!=null,getPluginURL:()=>le};class et{constructor(i,l){this.zoom=i,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return function(l,d){for(const f of l)if(!X(f.charCodeAt(0),d))return!1;return!0}(i,Ge.isLoaded())}}class it{constructor(i,l){this.property=i,this.value=l,this.expression=function(d,f){if(hh(d))return new Ou(d,f);if(vc(d)){const y=Sl(d,f);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=d;return typeof d=="string"&&f.type==="color"&&(y=pi.parse(d)),{kind:"constant",evaluate:()=>y}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,l,d){return this.property.possiblyEvaluate(this,i,l,d)}}class lt{constructor(i){this.property=i,this.value=new it(i,void 0)}transitioned(i,l){return new tt(this.property,this.value,l,nt({},i.transition,this.transition),i.now)}untransitioned(){return new tt(this.property,this.value,null,{},0)}}class jt{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return An(this._values[i].value.value)}setValue(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new lt(this._values[i].property)),this._values[i].value=new it(this._values[i].property,l===null?void 0:An(l))}getTransition(i){return An(this._values[i].transition)}setTransition(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new lt(this._values[i].property)),this._values[i].transition=An(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(i[l]=d);const f=this.getTransition(l);f!==void 0&&(i[`${l}-transition`]=f)}return i}transitioned(i,l){const d=new Mt(this._properties);for(const f of Object.keys(this._values))d._values[f]=this._values[f].transitioned(i,l._values[f]);return d}untransitioned(){const i=new Mt(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class tt{constructor(i,l,d,f,y){const x=f.delay||0,C=f.duration||0;y=y||0,this.property=i,this.value=l,this.begin=y+x,this.end=this.begin+C,i.specification.transition&&(f.delay||f.duration)&&(this.prior=d)}possiblyEvaluate(i,l,d){const f=i.now||0,y=this.value.possiblyEvaluate(i,l,d),x=this.prior;if(x){if(f>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(f<this.begin)return x.possiblyEvaluate(i,l,d);{const C=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,d),y,fe(C))}}return y}}class Mt{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,d){const f=new at(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(i,l,d);return f}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class vt{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return An(this._values[i].value)}setValue(i,l){this._values[i]=new it(this._values[i].property,l===null?void 0:An(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(i[l]=d)}return i}possiblyEvaluate(i,l,d){const f=new at(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(i,l,d);return f}}class Rt{constructor(i,l,d){this.property=i,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,d,f){return this.property.evaluate(this.value,this.parameters,i,l,d,f)}}class at{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Ye{constructor(i){this.specification=i}possiblyEvaluate(i,l){return i.expression.evaluate(l)}interpolate(i,l,d){const f=Au[this.specification.type];return f?f(i,l,d):i}}class ut{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,d,f){return new Rt(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},d,f)}:i.expression,l)}interpolate(i,l,d){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Rt(this,{kind:"constant",value:void 0},i.parameters);const f=Au[this.specification.type];return f?new Rt(this,{kind:"constant",value:f(i.value.value,l.value.value,d)},i.parameters):i}evaluate(i,l,d,f,y,x){return i.kind==="constant"?i.value:i.evaluate(l,d,f,y,x)}}class Dt{constructor(i){this.specification=i}possiblyEvaluate(i,l,d,f){return!!i.expression.evaluate(l,null,{},d,f)}interpolate(){return!1}}class Ot{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new et(0,{});for(const d in i){const f=i[d];f.specification.overridable&&this.overridableProperties.push(d);const y=this.defaultPropertyValues[d]=new it(f,void 0),x=this.defaultTransitionablePropertyValues[d]=new lt(f);this.defaultTransitioningPropertyValues[d]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=y.possiblyEvaluate(l)}}}function dn(s,i){return 256*(s=Oe(Math.floor(s),0,255))+Oe(Math.floor(i),0,255)}an(ut,"DataDrivenProperty"),an(Ye,"DataConstantProperty"),an(Dt,"ColorRampProperty");const Un={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class sn{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class en{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function hn(s,i=1){let l=0,d=0;return{members:s.map(f=>{const y=Un[f.type].BYTES_PER_ELEMENT,x=l=Wn(l,Math.max(i,y)),C=f.components||1;return d=Math.max(d,y),l+=y*C,{name:f.name,type:f.type,components:C,offset:x}}),size:Wn(l,Math.max(d,i)),alignment:i}}function Wn(s,i){return Math.ceil(s/i)*i}class gn extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const f=2*i;return this.int16[f+0]=l,this.int16[f+1]=d,i}}gn.prototype.bytesPerElement=4,an(gn,"StructArrayLayout2i4");class lr extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,d)}emplace(i,l,d,f){const y=3*i;return this.int16[y+0]=l,this.int16[y+1]=d,this.int16[y+2]=f,i}}lr.prototype.bytesPerElement=6,an(lr,"StructArrayLayout3i6");class pr extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,f)}emplace(i,l,d,f,y){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=d,this.int16[x+2]=f,this.int16[x+3]=y,i}}pr.prototype.bytesPerElement=8,an(pr,"StructArrayLayout4i8");class Rr extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y,x,C){const I=this.length;return this.resize(I+1),this.emplace(I,i,l,d,f,y,x,C)}emplace(i,l,d,f,y,x,C,I){const R=6*i,V=12*i,q=3*i;return this.int16[R+0]=l,this.int16[R+1]=d,this.uint8[V+4]=f,this.uint8[V+5]=y,this.uint8[V+6]=x,this.uint8[V+7]=C,this.float32[q+2]=I,i}}Rr.prototype.bytesPerElement=12,an(Rr,"StructArrayLayout2i4ub1f12");class kr extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,f)}emplace(i,l,d,f,y){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=d,this.float32[x+2]=f,this.float32[x+3]=y,i}}kr.prototype.bytesPerElement=16,an(kr,"StructArrayLayout4f16");class wi extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,f,y)}emplace(i,l,d,f,y,x){const C=6*i,I=3*i;return this.uint16[C+0]=l,this.uint16[C+1]=d,this.uint16[C+2]=f,this.uint16[C+3]=y,this.float32[I+2]=x,i}}wi.prototype.bytesPerElement=12,an(wi,"StructArrayLayout4ui1f12");class Ro extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,f)}emplace(i,l,d,f,y){const x=4*i;return this.uint16[x+0]=l,this.uint16[x+1]=d,this.uint16[x+2]=f,this.uint16[x+3]=y,i}}Ro.prototype.bytesPerElement=8,an(Ro,"StructArrayLayout4ui8");class ba extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y,x){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,d,f,y,x)}emplace(i,l,d,f,y,x,C){const I=6*i;return this.int16[I+0]=l,this.int16[I+1]=d,this.int16[I+2]=f,this.int16[I+3]=y,this.int16[I+4]=x,this.int16[I+5]=C,i}}ba.prototype.bytesPerElement=12,an(ba,"StructArrayLayout6i12");class ys extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y,x,C,I,R,V,q,Z){const J=this.length;return this.resize(J+1),this.emplace(J,i,l,d,f,y,x,C,I,R,V,q,Z)}emplace(i,l,d,f,y,x,C,I,R,V,q,Z,J){const Q=12*i;return this.int16[Q+0]=l,this.int16[Q+1]=d,this.int16[Q+2]=f,this.int16[Q+3]=y,this.uint16[Q+4]=x,this.uint16[Q+5]=C,this.uint16[Q+6]=I,this.uint16[Q+7]=R,this.int16[Q+8]=V,this.int16[Q+9]=q,this.int16[Q+10]=Z,this.int16[Q+11]=J,i}}ys.prototype.bytesPerElement=24,an(ys,"StructArrayLayout4i4ui4i24");class Gr extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y,x){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,d,f,y,x)}emplace(i,l,d,f,y,x,C){const I=10*i,R=5*i;return this.int16[I+0]=l,this.int16[I+1]=d,this.int16[I+2]=f,this.float32[R+2]=y,this.float32[R+3]=x,this.float32[R+4]=C,i}}Gr.prototype.bytesPerElement=20,an(Gr,"StructArrayLayout3i3f20");class Tr extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}Tr.prototype.bytesPerElement=4,an(Tr,"StructArrayLayout1ul4");class rr extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y,x,C,I,R,V,q,Z,J){const Q=this.length;return this.resize(Q+1),this.emplace(Q,i,l,d,f,y,x,C,I,R,V,q,Z,J)}emplace(i,l,d,f,y,x,C,I,R,V,q,Z,J,Q){const ie=20*i,de=10*i;return this.int16[ie+0]=l,this.int16[ie+1]=d,this.int16[ie+2]=f,this.int16[ie+3]=y,this.int16[ie+4]=x,this.float32[de+3]=C,this.float32[de+4]=I,this.float32[de+5]=R,this.float32[de+6]=V,this.int16[ie+14]=q,this.uint32[de+8]=Z,this.uint16[ie+18]=J,this.uint16[ie+19]=Q,i}}rr.prototype.bytesPerElement=40,an(rr,"StructArrayLayout5i4f1i1ul2ui40");class li extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y,x,C){const I=this.length;return this.resize(I+1),this.emplace(I,i,l,d,f,y,x,C)}emplace(i,l,d,f,y,x,C,I){const R=8*i;return this.int16[R+0]=l,this.int16[R+1]=d,this.int16[R+2]=f,this.int16[R+4]=y,this.int16[R+5]=x,this.int16[R+6]=C,this.int16[R+7]=I,i}}li.prototype.bytesPerElement=16,an(li,"StructArrayLayout3i2i2i16");class so extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,f,y)}emplace(i,l,d,f,y,x){const C=4*i,I=8*i;return this.float32[C+0]=l,this.float32[C+1]=d,this.float32[C+2]=f,this.int16[I+6]=y,this.int16[I+7]=x,i}}so.prototype.bytesPerElement=16,an(so,"StructArrayLayout2f1f2i16");class jr extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,f)}emplace(i,l,d,f,y){const x=12*i,C=3*i;return this.uint8[x+0]=l,this.uint8[x+1]=d,this.float32[C+1]=f,this.float32[C+2]=y,i}}jr.prototype.bytesPerElement=12,an(jr,"StructArrayLayout2ub2f12");class lo extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,d)}emplace(i,l,d,f){const y=3*i;return this.float32[y+0]=l,this.float32[y+1]=d,this.float32[y+2]=f,i}}lo.prototype.bytesPerElement=12,an(lo,"StructArrayLayout3f12");class co extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,d)}emplace(i,l,d,f){const y=3*i;return this.uint16[y+0]=l,this.uint16[y+1]=d,this.uint16[y+2]=f,i}}co.prototype.bytesPerElement=6,an(co,"StructArrayLayout3ui6");class $s extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y,x,C,I,R,V,q,Z,J,Q,ie,de,Ce,Fe,we,ze,$e){const Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,i,l,d,f,y,x,C,I,R,V,q,Z,J,Q,ie,de,Ce,Fe,we,ze,$e)}emplace(i,l,d,f,y,x,C,I,R,V,q,Z,J,Q,ie,de,Ce,Fe,we,ze,$e,Ne){const st=30*i,rt=15*i,Ct=60*i;return this.int16[st+0]=l,this.int16[st+1]=d,this.int16[st+2]=f,this.float32[rt+2]=y,this.float32[rt+3]=x,this.uint16[st+8]=C,this.uint16[st+9]=I,this.uint32[rt+5]=R,this.uint32[rt+6]=V,this.uint32[rt+7]=q,this.uint16[st+16]=Z,this.uint16[st+17]=J,this.uint16[st+18]=Q,this.float32[rt+10]=ie,this.float32[rt+11]=de,this.uint8[Ct+48]=Ce,this.uint8[Ct+49]=Fe,this.uint8[Ct+50]=we,this.uint32[rt+13]=ze,this.int16[st+28]=$e,this.uint8[Ct+58]=Ne,i}}$s.prototype.bytesPerElement=60,an($s,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Cc extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y,x,C,I,R,V,q,Z,J,Q,ie,de,Ce,Fe,we,ze,$e,Ne,st,rt,Ct,Bt,mt,Tt,It,Lt){const Ft=this.length;return this.resize(Ft+1),this.emplace(Ft,i,l,d,f,y,x,C,I,R,V,q,Z,J,Q,ie,de,Ce,Fe,we,ze,$e,Ne,st,rt,Ct,Bt,mt,Tt,It,Lt)}emplace(i,l,d,f,y,x,C,I,R,V,q,Z,J,Q,ie,de,Ce,Fe,we,ze,$e,Ne,st,rt,Ct,Bt,mt,Tt,It,Lt,Ft){const gt=38*i,Wt=19*i;return this.int16[gt+0]=l,this.int16[gt+1]=d,this.int16[gt+2]=f,this.float32[Wt+2]=y,this.float32[Wt+3]=x,this.int16[gt+8]=C,this.int16[gt+9]=I,this.int16[gt+10]=R,this.int16[gt+11]=V,this.int16[gt+12]=q,this.int16[gt+13]=Z,this.uint16[gt+14]=J,this.uint16[gt+15]=Q,this.uint16[gt+16]=ie,this.uint16[gt+17]=de,this.uint16[gt+18]=Ce,this.uint16[gt+19]=Fe,this.uint16[gt+20]=we,this.uint16[gt+21]=ze,this.uint16[gt+22]=$e,this.uint16[gt+23]=Ne,this.uint16[gt+24]=st,this.uint16[gt+25]=rt,this.uint16[gt+26]=Ct,this.uint16[gt+27]=Bt,this.uint16[gt+28]=mt,this.uint32[Wt+15]=Tt,this.float32[Wt+16]=It,this.float32[Wt+17]=Lt,this.float32[Wt+18]=Ft,i}}Cc.prototype.bytesPerElement=76,an(Cc,"StructArrayLayout3i2f6i15ui1ul3f76");class qo extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}qo.prototype.bytesPerElement=4,an(qo,"StructArrayLayout1f4");class ia extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,f,y)}emplace(i,l,d,f,y,x){const C=5*i;return this.float32[C+0]=l,this.float32[C+1]=d,this.float32[C+2]=f,this.float32[C+3]=y,this.float32[C+4]=x,i}}ia.prototype.bytesPerElement=20,an(ia,"StructArrayLayout5f20");class _s extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,d,f)}emplace(i,l,d,f,y){const x=6*i;return this.uint32[3*i+0]=l,this.uint16[x+2]=d,this.uint16[x+3]=f,this.uint16[x+4]=y,i}}_s.prototype.bytesPerElement=12,an(_s,"StructArrayLayout1ul3ui12");class Vs extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const f=2*i;return this.uint16[f+0]=l,this.uint16[f+1]=d,i}}Vs.prototype.bytesPerElement=4,an(Vs,"StructArrayLayout2ui4");class Hs extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}Hs.prototype.bytesPerElement=2,an(Hs,"StructArrayLayout1ui2");class Sc extends en{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const f=2*i;return this.float32[f+0]=l,this.float32[f+1]=d,i}}Sc.prototype.bytesPerElement=8,an(Sc,"StructArrayLayout2f8");class VT extends sn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}VT.prototype.size=40;class Kb extends rr{get(i){return new VT(this,i)}}an(Kb,"CollisionBoxArray");class HT extends sn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}HT.prototype.size=60;class WT extends $s{get(i){return new HT(this,i)}}an(WT,"PlacedSymbolArray");class GT extends sn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}GT.prototype.size=76;class qT extends Cc{get(i){return new GT(this,i)}}an(qT,"SymbolInstanceArray");class ZT extends qo{getoffsetX(i){return this.float32[1*i+0]}}an(ZT,"GlyphOffsetArray");class XT extends gn{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}an(XT,"SymbolLineVertexArray");class KT extends sn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}KT.prototype.size=12;class YT extends _s{get(i){return new KT(this,i)}}an(YT,"FeatureIndexArray");class JT extends Vs{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}an(JT,"FillExtrusionCentroidArray");const mF=hn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),gF=hn([{name:"a_dash",components:4,type:"Uint16"}]);var qu={},vF={get exports(){return qu},set exports(s){qu=s}},Yb={};({get exports(){return Yb},set exports(s){Yb=s}}).exports=function(s,i){var l,d,f,y,x,C,I,R;for(d=s.length-(l=3&s.length),f=i,x=3432918353,C=461845907,R=0;R<d;)I=255&s.charCodeAt(R)|(255&s.charCodeAt(++R))<<8|(255&s.charCodeAt(++R))<<16|(255&s.charCodeAt(++R))<<24,++R,f=27492+(65535&(y=5*(65535&(f=(f^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(I=0,l){case 3:I^=(255&s.charCodeAt(R+2))<<16;case 2:I^=(255&s.charCodeAt(R+1))<<8;case 1:f^=I=(65535&(I=(I=(65535&(I^=255&s.charCodeAt(R)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295}return f^=s.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Jb={};({get exports(){return Jb},set exports(s){Jb=s}}).exports=function(s,i){for(var l,d=s.length,f=i^d,y=0;d>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(y)|(255&s.charCodeAt(++y))<<8|(255&s.charCodeAt(++y))<<16|(255&s.charCodeAt(++y))<<24))+((1540483477*(l>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),d-=4,++y;switch(d){case 3:f^=(255&s.charCodeAt(y+2))<<16;case 2:f^=(255&s.charCodeAt(y+1))<<8;case 1:f=1540483477*(65535&(f^=255&s.charCodeAt(y)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var QT=Yb,yF=Jb;vF.exports=QT,qu.murmur3=QT,qu.murmur2=yF;class Ey{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,d,f){this.ids.push(e2(i)),this.positions.push(l,d,f)}getPositions(i){const l=e2(i);let d=0,f=this.ids.length-1;for(;d<f;){const x=d+f>>1;this.ids[x]>=l?f=x:d=x+1}const y=[];for(;this.ids[d]===l;)y.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return y}static serialize(i,l){const d=new Float64Array(i.ids),f=new Uint32Array(i.positions);return Qb(d,f,0,d.length-1),l&&l.push(d.buffer,f.buffer),{ids:d,positions:f}}static deserialize(i){const l=new Ey;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function e2(s){const i=+s;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:qu(String(s))}function Qb(s,i,l,d){for(;l<d;){const f=s[l+d>>1];let y=l-1,x=d+1;for(;;){do y++;while(s[y]<f);do x--;while(s[x]>f);if(y>=x)break;Cy(s,y,x),Cy(i,3*y,3*x),Cy(i,3*y+1,3*x+1),Cy(i,3*y+2,3*x+2)}x-l<d-x?(Qb(s,i,l,x),l=x+1):(Qb(s,i,x+1,d),d=x)}}function Cy(s,i,l){const d=s[i];s[i]=s[l],s[l]=d}an(Ey,"FeaturePositionMap");class kl{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,l),this.initialized=!0),!!this.location}}class Sy extends kl{constructor(i){super(i),this.current=0}set(i,l,d){this.fetchUniformLocation(i,l)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class t2 extends kl{constructor(i){super(i),this.current=[0,0,0,0]}set(i,l,d){this.fetchUniformLocation(i,l)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class n2 extends kl{constructor(i){super(i),this.current=pi.transparent}set(i,l,d){this.fetchUniformLocation(i,l)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const _F=new Float32Array(16),xF=new Float32Array(9),bF=new Float32Array(4);function e1(s){return[dn(255*s.r,255*s.g),dn(255*s.b,255*s.a)]}class tm{constructor(i,l,d){this.value=i,this.uniformNames=l.map(f=>`u_${f}`),this.type=d}setUniform(i,l,d,f,y){l.set(i,y,f.constantOr(this.value))}getBinding(i,l){return this.type==="color"?new n2(i):new Sy(i)}}class Ah{constructor(i,l){this.uniformNames=l.map(d=>`u_${d}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,l,d,f,y){const x=y==="u_pattern"||y==="u_dash"?this.pattern:y==="u_pixel_ratio"?this.pixelRatio:null;x&&l.set(i,y,x)}getBinding(i,l){return l==="u_pattern"||l==="u_dash"?new t2(i):new Sy(i)}}class Tl{constructor(i,l,d,f){this.expression=i,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(i,l,d,f,y,x){const C=this.paintVertexArray.length,I=this.expression.evaluate(new et(0),l,{},y,f,x);this.paintVertexArray.resize(i),this._setPaintValue(C,i,I)}updatePaintArray(i,l,d,f,y){const x=this.expression.evaluate({zoom:0},d,f,void 0,y);this._setPaintValue(i,l,x)}_setPaintValue(i,l,d){if(this.type==="color"){const f=e1(d);for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,f[0],f[1])}else{for(let f=i;f<l;f++)this.paintVertexArray.emplace(f,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xs{constructor(i,l,d,f,y,x){this.expression=i,this.uniformNames=l.map(C=>`u_${C}_t`),this.type=d,this.useIntegerZoom=f,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(C=>({name:`a_${C}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,d,f,y,x){const C=this.expression.evaluate(new et(this.zoom),l,{},y,f,x),I=this.expression.evaluate(new et(this.zoom+1),l,{},y,f,x),R=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(R,i,C,I)}updatePaintArray(i,l,d,f,y){const x=this.expression.evaluate({zoom:this.zoom},d,f,void 0,y),C=this.expression.evaluate({zoom:this.zoom+1},d,f,void 0,y);this._setPaintValue(i,l,x,C)}_setPaintValue(i,l,d,f){if(this.type==="color"){const y=e1(d),x=e1(f);for(let C=i;C<l;C++)this.paintVertexArray.emplace(C,y[0],y[1],x[0],x[1])}else{for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,d,f);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l,d,f,y){const x=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,C=Oe(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(i,y,C)}getBinding(i,l){return new Sy(i)}}class kc{constructor(i,l,d,f,y){this.expression=i,this.layerId=y,this.paintVertexAttributes=(d==="array"?gF:mF).members;for(let x=0;x<l.length;++x);this.paintVertexArray=new f}populatePaintArray(i,l,d){const f=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(f,i,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(i,l,d,f,y,x){this._setPaintValues(i,l,d.patterns&&d.patterns[this.layerId],x)}_setPaintValues(i,l,d,f){if(!f||!d)return;const y=f[d];if(!y)return;const{tl:x,br:C,pixelRatio:I}=y;for(let R=i;R<l;R++)this.paintVertexArray.emplace(R,x[0],x[1],C[0],C[1],I)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Tc{constructor(i,l,d=()=>!0){this.binders={},this._buffers=[];const f=[];for(const y in i.paint._values){if(!d(y))continue;const x=i.paint.get(y);if(!(x instanceof Rt&&gc(x.property.specification)))continue;const C=EF(y,i.type),I=x.value,R=x.property.specification.type,V=!!x.property.useIntegerZoom,q=y==="line-dasharray"||y.endsWith("pattern"),Z=y==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||Z)if(I.kind==="source"||Z||q){const J=r2(y,R,"source");this.binders[y]=q?new kc(I,C,R,J,i.id):new Tl(I,C,R,J),f.push(`/a_${y}`)}else{const J=r2(y,R,"composite");this.binders[y]=new xs(I,C,R,V,l,J),f.push(`/z_${y}`)}else this.binders[y]=q?new Ah(I.value,C):new tm(I.value,C,R),f.push(`/u_${y}`)}this.cacheKey=f.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof Tl||l instanceof xs?l.maxValue:0}populatePaintArrays(i,l,d,f,y,x){for(const C in this.binders){const I=this.binders[C];(I instanceof Tl||I instanceof xs||I instanceof kc)&&I.populatePaintArray(i,l,d,f,y,x)}}setConstantPatternPositions(i){for(const l in this.binders){const d=this.binders[l];d instanceof Ah&&d.setConstantPatternPositions(i)}}updatePaintArrays(i,l,d,f,y,x){let C=!1;for(const I in i){const R=l.getPositions(I);for(const V of R){const q=d.feature(V.index);for(const Z in this.binders){const J=this.binders[Z];if((J instanceof Tl||J instanceof xs||J instanceof kc)&&J.expression.isStateDependent===!0){const Q=f.paint.get(Z);J.expression=Q.value,J.updatePaintArray(V.start,V.end,q,i[I],y,x),C=!0}}}}return C}defines(){const i=[];for(const l in this.binders){const d=this.binders[l];(d instanceof tm||d instanceof Ah)&&i.push(...d.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof Tl||d instanceof xs||d instanceof kc)for(let f=0;f<d.paintVertexAttributes.length;f++)i.push(d.paintVertexAttributes[f].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof tm||d instanceof Ah||d instanceof xs)for(const f of d.uniformNames)i.push(f)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const l=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof tm||f instanceof Ah||f instanceof xs)for(const y of f.uniformNames)l.push({name:y,property:d,binding:f.getBinding(i,y)})}return l}setUniforms(i,l,d,f,y){for(const{name:x,property:C,binding:I}of d)this.binders[C].setUniform(i,I,y,f.get(C),x)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const l=this.binders[i];(l instanceof Tl||l instanceof xs||l instanceof kc)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(i){for(const l in this.binders){const d=this.binders[l];(d instanceof Tl||d instanceof xs||d instanceof kc)&&d.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof Tl||l instanceof xs||l instanceof kc)&&l.destroy()}}}class Zu{constructor(i,l,d=()=>!0){this.programConfigurations={};for(const f of i)this.programConfigurations[f.id]=new Tc(f,l,d);this.needsUpload=!1,this._featureMap=new Ey,this._bufferOffset=0}populatePaintArrays(i,l,d,f,y,x,C){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(i,l,f,y,x,C);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,d,f,y){for(const x of d)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(i,this._featureMap,l,x,f,y)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const wF={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function EF(s,i){return wF[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}const CF={"line-pattern":{source:wi,composite:wi},"fill-pattern":{source:wi,composite:wi},"fill-extrusion-pattern":{source:wi,composite:wi},"line-dasharray":{source:Ro,composite:Ro}},SF={color:{source:Sc,composite:kr},number:{source:qo,composite:Sc}};function r2(s,i,l){const d=CF[s];return d&&d[l]||SF[i][l]}an(tm,"ConstantBinder"),an(Ah,"PatternConstantBinder"),an(Tl,"SourceExpressionBinder"),an(kc,"PatternCompositeBinder"),an(xs,"CompositeExpressionBinder"),an(Tc,"ProgramConfiguration",{omit:["_buffers"]}),an(Zu,"ProgramConfigurationSet");const ky="-transition";class bs extends ps{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new vt(l.layout)),l.paint)){this._transitionablePaint=new jt(l.paint);for(const d in i.paint)this.setPaintProperty(d,i.paint[d],{validate:!1});for(const d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new at(l.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,l,d={}){l!=null&&this._validate(cy,`layers.${this.id}.layout.${i}`,i,l,d)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return un(i,ky)?this._transitionablePaint.getTransition(i.slice(0,-ky.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,d={}){if(l!=null&&this._validate(Xb,`layers.${this.id}.paint.${i}`,i,l,d))return!1;if(un(i,ky))return this._transitionablePaint.setTransition(i.slice(0,-ky.length),l||void 0),!1;{const f=this._transitionablePaint._values[i],y=f.value.isDataDriven(),x=f.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const C=this._transitionablePaint._values[i].value,I=C.isDataDriven(),R=un(i,"pattern")||i==="line-dasharray";return I||y||R||this._handleOverridablePaintPropertyUpdate(i,x,C)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,l,d){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),fn(i,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(i,l,d,f,y={}){return(!y||y.validate!==!1)&&uy(this,i.call(ly,{key:l,layerType:this.type,objectKey:d,value:f,styleSpec:Et,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Rt&&gc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=vh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const kF=hn([{name:"a_pos",components:2,type:"Int16"}],4),TF=hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ei{constructor(i=[]){this.segments=i}prepareSegment(i,l,d,f){let y=this.segments[this.segments.length-1];return i>Ei.MAX_VERTEX_ARRAY_LENGTH&&Xe(`Max vertices per segment is ${Ei.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!y||y.vertexLength+i>Ei.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==f)&&(y={vertexOffset:l.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},f!==void 0&&(y.sortKey=f),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,d,f){return new Ei([{vertexOffset:i,primitiveOffset:l,vertexLength:d,primitiveLength:f,vaos:{},sortKey:0}])}}Ei.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,an(Ei,"SegmentVector");var kn=8192;class Ac{constructor(i,l){i&&(l?this.setSouthWest(i).setNorthEast(l):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof nr?new nr(i.lng,i.lat):nr.convert(i),this}setSouthWest(i){return this._sw=i instanceof nr?new nr(i.lng,i.lat):nr.convert(i),this}extend(i){const l=this._sw,d=this._ne;let f,y;if(i instanceof nr)f=i,y=i;else{if(!(i instanceof Ac))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Ac.convert(i)):this.extend(nr.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(nr.convert(i)):this;if(f=i._sw,y=i._ne,!f||!y)return this}return l||d?(l.lng=Math.min(f.lng,l.lng),l.lat=Math.min(f.lat,l.lat),d.lng=Math.max(y.lng,d.lng),d.lat=Math.max(y.lat,d.lat)):(this._sw=new nr(f.lng,f.lat),this._ne=new nr(y.lng,y.lat)),this}getCenter(){return new nr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new nr(this.getWest(),this.getNorth())}getSouthEast(){return new nr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:l,lat:d}=nr.convert(i);let f=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(i){return!i||i instanceof Ac?i:new Ac(i)}}var Ty=1e-6,oa=typeof Float32Array!="undefined"?Float32Array:Array;function i2(){var s=new oa(9);return oa!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function o2(s,i,l){var d=i[0],f=i[1],y=i[2],x=i[3],C=i[4],I=i[5],R=i[6],V=i[7],q=i[8],Z=l[0],J=l[1],Q=l[2],ie=l[3],de=l[4],Ce=l[5],Fe=l[6],we=l[7],ze=l[8];return s[0]=Z*d+J*x+Q*R,s[1]=Z*f+J*C+Q*V,s[2]=Z*y+J*I+Q*q,s[3]=ie*d+de*x+Ce*R,s[4]=ie*f+de*C+Ce*V,s[5]=ie*y+de*I+Ce*q,s[6]=Fe*d+we*x+ze*R,s[7]=Fe*f+we*C+ze*V,s[8]=Fe*y+we*I+ze*q,s}function ws(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function t1(s,i){var l=i[0],d=i[1],f=i[2],y=i[3],x=i[4],C=i[5],I=i[6],R=i[7],V=i[8],q=i[9],Z=i[10],J=i[11],Q=i[12],ie=i[13],de=i[14],Ce=i[15],Fe=l*C-d*x,we=l*I-f*x,ze=l*R-y*x,$e=d*I-f*C,Ne=d*R-y*C,st=f*R-y*I,rt=V*ie-q*Q,Ct=V*de-Z*Q,Bt=V*Ce-J*Q,mt=q*de-Z*ie,Tt=q*Ce-J*ie,It=Z*Ce-J*de,Lt=Fe*It-we*Tt+ze*mt+$e*Bt-Ne*Ct+st*rt;return Lt?(s[0]=(C*It-I*Tt+R*mt)*(Lt=1/Lt),s[1]=(f*Tt-d*It-y*mt)*Lt,s[2]=(ie*st-de*Ne+Ce*$e)*Lt,s[3]=(Z*Ne-q*st-J*$e)*Lt,s[4]=(I*Bt-x*It-R*Ct)*Lt,s[5]=(l*It-f*Bt+y*Ct)*Lt,s[6]=(de*ze-Q*st-Ce*we)*Lt,s[7]=(V*st-Z*ze+J*we)*Lt,s[8]=(x*Tt-C*Bt+R*rt)*Lt,s[9]=(d*Bt-l*Tt-y*rt)*Lt,s[10]=(Q*Ne-ie*ze+Ce*Fe)*Lt,s[11]=(q*ze-V*Ne-J*Fe)*Lt,s[12]=(C*Ct-x*mt-I*rt)*Lt,s[13]=(l*mt-d*Ct+f*rt)*Lt,s[14]=(ie*we-Q*$e-de*Fe)*Lt,s[15]=(V*$e-q*we+Z*Fe)*Lt,s):null}function Xu(s,i,l){var d=i[0],f=i[1],y=i[2],x=i[3],C=i[4],I=i[5],R=i[6],V=i[7],q=i[8],Z=i[9],J=i[10],Q=i[11],ie=i[12],de=i[13],Ce=i[14],Fe=i[15],we=l[0],ze=l[1],$e=l[2],Ne=l[3];return s[0]=we*d+ze*C+$e*q+Ne*ie,s[1]=we*f+ze*I+$e*Z+Ne*de,s[2]=we*y+ze*R+$e*J+Ne*Ce,s[3]=we*x+ze*V+$e*Q+Ne*Fe,s[4]=(we=l[4])*d+(ze=l[5])*C+($e=l[6])*q+(Ne=l[7])*ie,s[5]=we*f+ze*I+$e*Z+Ne*de,s[6]=we*y+ze*R+$e*J+Ne*Ce,s[7]=we*x+ze*V+$e*Q+Ne*Fe,s[8]=(we=l[8])*d+(ze=l[9])*C+($e=l[10])*q+(Ne=l[11])*ie,s[9]=we*f+ze*I+$e*Z+Ne*de,s[10]=we*y+ze*R+$e*J+Ne*Ce,s[11]=we*x+ze*V+$e*Q+Ne*Fe,s[12]=(we=l[12])*d+(ze=l[13])*C+($e=l[14])*q+(Ne=l[15])*ie,s[13]=we*f+ze*I+$e*Z+Ne*de,s[14]=we*y+ze*R+$e*J+Ne*Ce,s[15]=we*x+ze*V+$e*Q+Ne*Fe,s}function nm(s,i,l){var d,f,y,x,C,I,R,V,q,Z,J,Q,ie=l[0],de=l[1],Ce=l[2];return i===s?(s[12]=i[0]*ie+i[4]*de+i[8]*Ce+i[12],s[13]=i[1]*ie+i[5]*de+i[9]*Ce+i[13],s[14]=i[2]*ie+i[6]*de+i[10]*Ce+i[14],s[15]=i[3]*ie+i[7]*de+i[11]*Ce+i[15]):(f=i[1],y=i[2],x=i[3],C=i[4],I=i[5],R=i[6],V=i[7],q=i[8],Z=i[9],J=i[10],Q=i[11],s[0]=d=i[0],s[1]=f,s[2]=y,s[3]=x,s[4]=C,s[5]=I,s[6]=R,s[7]=V,s[8]=q,s[9]=Z,s[10]=J,s[11]=Q,s[12]=d*ie+C*de+q*Ce+i[12],s[13]=f*ie+I*de+Z*Ce+i[13],s[14]=y*ie+R*de+J*Ce+i[14],s[15]=x*ie+V*de+Q*Ce+i[15]),s}function Ku(s,i,l){var d=l[0],f=l[1],y=l[2];return s[0]=i[0]*d,s[1]=i[1]*d,s[2]=i[2]*d,s[3]=i[3]*d,s[4]=i[4]*f,s[5]=i[5]*f,s[6]=i[6]*f,s[7]=i[7]*f,s[8]=i[8]*y,s[9]=i[9]*y,s[10]=i[10]*y,s[11]=i[11]*y,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s}function n1(s,i,l){var d=Math.sin(l),f=Math.cos(l),y=i[4],x=i[5],C=i[6],I=i[7],R=i[8],V=i[9],q=i[10],Z=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=y*f+R*d,s[5]=x*f+V*d,s[6]=C*f+q*d,s[7]=I*f+Z*d,s[8]=R*f-y*d,s[9]=V*f-x*d,s[10]=q*f-C*d,s[11]=Z*f-I*d,s}function Ay(s,i,l){var d=Math.sin(l),f=Math.cos(l),y=i[0],x=i[1],C=i[2],I=i[3],R=i[8],V=i[9],q=i[10],Z=i[11];return i!==s&&(s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*f-R*d,s[1]=x*f-V*d,s[2]=C*f-q*d,s[3]=I*f-Z*d,s[8]=y*d+R*f,s[9]=x*d+V*f,s[10]=C*d+q*f,s[11]=I*d+Z*f,s}function a2(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function s2(s,i,l){var d,f,y,x=l[0],C=l[1],I=l[2],R=Math.hypot(x,C,I);return R<Ty?null:(x*=R=1/R,C*=R,I*=R,d=Math.sin(i),f=Math.cos(i),s[0]=x*x*(y=1-f)+f,s[1]=C*x*y+I*d,s[2]=I*x*y-C*d,s[3]=0,s[4]=x*C*y-I*d,s[5]=C*C*y+f,s[6]=I*C*y+x*d,s[7]=0,s[8]=x*I*y+C*d,s[9]=C*I*y-x*d,s[10]=I*I*y+f,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var AF=Xu;function r1(){var s=new oa(3);return oa!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function l2(s){var i=new oa(3);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i}function rm(s){return Math.hypot(s[0],s[1],s[2])}function Mh(s,i,l){var d=new oa(3);return d[0]=s,d[1]=i,d[2]=l,d}function Al(s,i,l){return s[0]=i[0]+l[0],s[1]=i[1]+l[1],s[2]=i[2]+l[2],s}function i1(s,i,l){return s[0]=i[0]-l[0],s[1]=i[1]-l[1],s[2]=i[2]-l[2],s}function c2(s,i,l){return s[0]=i[0]*l[0],s[1]=i[1]*l[1],s[2]=i[2]*l[2],s}function im(s,i,l){return s[0]=Math.min(i[0],l[0]),s[1]=Math.min(i[1],l[1]),s[2]=Math.min(i[2],l[2]),s}function om(s,i,l){return s[0]=Math.max(i[0],l[0]),s[1]=Math.max(i[1],l[1]),s[2]=Math.max(i[2],l[2]),s}function wa(s,i,l){return s[0]=i[0]*l,s[1]=i[1]*l,s[2]=i[2]*l,s}function am(s,i,l,d){return s[0]=i[0]+l[0]*d,s[1]=i[1]+l[1]*d,s[2]=i[2]+l[2]*d,s}function Lo(s,i){var l=i[0],d=i[1],f=i[2],y=l*l+d*d+f*f;return y>0&&(y=1/Math.sqrt(y)),s[0]=i[0]*y,s[1]=i[1]*y,s[2]=i[2]*y,s}function Ha(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]}function o1(s,i,l){var d=i[0],f=i[1],y=i[2],x=l[0],C=l[1],I=l[2];return s[0]=f*I-y*C,s[1]=y*x-d*I,s[2]=d*C-f*x,s}function fi(s,i,l){var d=i[0],f=i[1],y=i[2],x=l[3]*d+l[7]*f+l[11]*y+l[15];return s[0]=(l[0]*d+l[4]*f+l[8]*y+l[12])/(x=x||1),s[1]=(l[1]*d+l[5]*f+l[9]*y+l[13])/x,s[2]=(l[2]*d+l[6]*f+l[10]*y+l[14])/x,s}function u2(s,i,l){var d=l[0],f=l[1],y=l[2],x=i[0],C=i[1],I=i[2],R=f*I-y*C,V=y*x-d*I,q=d*C-f*x,Z=f*q-y*V,J=y*R-d*q,Q=d*V-f*R,ie=2*l[3];return V*=ie,q*=ie,J*=2,Q*=2,s[0]=x+(R*=ie)+(Z*=2),s[1]=C+V+J,s[2]=I+q+Q,s}var sm,Es=i1,MF=c2,IF=rm;function d2(s,i,l){return s[0]=i[0]*l,s[1]=i[1]*l,s[2]=i[2]*l,s[3]=i[3]*l,s}function h2(s,i){var l=i[0],d=i[1],f=i[2],y=i[3],x=l*l+d*d+f*f+y*y;return x>0&&(x=1/Math.sqrt(x)),s[0]=l*x,s[1]=d*x,s[2]=f*x,s[3]=y*x,s}function Yu(s,i,l){var d=i[0],f=i[1],y=i[2],x=i[3];return s[0]=l[0]*d+l[4]*f+l[8]*y+l[12]*x,s[1]=l[1]*d+l[5]*f+l[9]*y+l[13]*x,s[2]=l[2]*d+l[6]*f+l[10]*y+l[14]*x,s[3]=l[3]*d+l[7]*f+l[11]*y+l[15]*x,s}function p2(){var s=new oa(4);return oa!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function f2(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function m2(s,i,l){l*=.5;var d=i[0],f=i[1],y=i[2],x=i[3],C=Math.sin(l),I=Math.cos(l);return s[0]=d*I+x*C,s[1]=f*I+y*C,s[2]=y*I-f*C,s[3]=x*I-d*C,s}function g2(s,i,l){l*=.5;var d=i[0],f=i[1],y=i[2],x=i[3],C=Math.sin(l),I=Math.cos(l);return s[0]=d*I-y*C,s[1]=f*I+x*C,s[2]=y*I+d*C,s[3]=x*I-f*C,s}r1(),sm=new oa(4),oa!=Float32Array&&(sm[0]=0,sm[1]=0,sm[2]=0,sm[3]=0);var PF=h2;r1(),Mh(1,0,0),Mh(0,1,0),p2(),p2(),i2();const DF=hn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:v2}=DF,y2=hn([{name:"a_pos_3",components:3,type:"Int16"}]);var lm=hn([{name:"a_pos",type:"Int16",components:2}]);class a1{constructor(i,l){this.pos=i,this.dir=l}intersectsPlane(i,l,d){const f=Ha(l,this.dir);if(Math.abs(f)<1e-6)return!1;const y=((i[0]-this.pos[0])*l[0]+(i[1]-this.pos[1])*l[1]+(i[2]-this.pos[2])*l[2])/f;return d[0]=this.pos[0]+this.dir[0]*y,d[1]=this.pos[1]+this.dir[1]*y,d[2]=this.pos[2]+this.dir[2]*y,!0}closestPointOnSphere(i,l,d){if(function(J,Q){var ie=J[0],de=J[1],Ce=J[2],Fe=Q[0],we=Q[1],ze=Q[2];return Math.abs(ie-Fe)<=Ty*Math.max(1,Math.abs(ie),Math.abs(Fe))&&Math.abs(de-we)<=Ty*Math.max(1,Math.abs(de),Math.abs(we))&&Math.abs(Ce-ze)<=Ty*Math.max(1,Math.abs(Ce),Math.abs(ze))}(this.pos,i)||l===0)return d[0]=d[1]=d[2]=0,!1;const[f,y,x]=this.dir,C=this.pos[0]-i[0],I=this.pos[1]-i[1],R=this.pos[2]-i[2],V=f*f+y*y+x*x,q=2*(C*f+I*y+R*x),Z=q*q-4*V*(C*C+I*I+R*R-l*l);if(Z<0){const J=Math.max(-q/2,0),Q=C+f*J,ie=I+y*J,de=R+x*J,Ce=Math.hypot(Q,ie,de);return d[0]=Q*l/Ce,d[1]=ie*l/Ce,d[2]=de*l/Ce,!1}{const J=(-q-Math.sqrt(Z))/(2*V);if(J<0){const Q=Math.hypot(C,I,R);return d[0]=C*l/Q,d[1]=I*l/Q,d[2]=R*l/Q,!1}return d[0]=C+f*J,d[1]=I+y*J,d[2]=R+x*J,!0}}}class s1{constructor(i,l,d,f,y){this.TL=i,this.TR=l,this.BR=d,this.BL=f,this.horizon=y}static fromInvProjectionMatrix(i,l,d){const f=[-1,1,1],y=[1,1,1],x=[1,-1,1],C=[-1,-1,1],I=fi(f,f,i),R=fi(y,y,i),V=fi(x,x,i),q=fi(C,C,i);return new s1(I,R,V,q,l/d)}}class l1{constructor(i,l){this.points=i,this.planes=l}static fromInvProjectionMatrix(i,l,d,f){const y=Math.pow(2,d),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const R=Yu([],I,i),V=1/R[3]/l*y;return function(q,Z,J){return q[0]=Z[0]*J[0],q[1]=Z[1]*J[1],q[2]=Z[2]*J[2],q[3]=Z[3]*J[3],q}(R,R,[V,V,f?1/R[3]:V,V])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const R=Lo([],o1([],Es([],x[I[0]],x[I[1]]),Es([],x[I[2]],x[I[1]]))),V=-Ha(R,x[I[1]]);return R.concat(V)});return new l1(x,C)}}class Oo{static fromPoints(i){const l=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0];for(const f of i)im(l,l,f),om(d,d,f);return new Oo(l,d)}static applyTransform(i,l){const d=i.getCorners();for(let f=0;f<d.length;++f)fi(d[f],d[f],l);return Oo.fromPoints(d)}constructor(i,l){this.min=i,this.max=l,this.center=wa([],Al([],this.min,this.max),.5)}quadrant(i){const l=[i%2==0,i<2],d=l2(this.min),f=l2(this.max);for(let y=0;y<l.length;y++)d[y]=l[y]?this.min[y]:this.center[y],f[y]=l[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new Oo(d,f)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,l=this.max;return[[i[0],i[1],i[2]],[l[0],i[1],i[2]],[l[0],l[1],i[2]],[i[0],l[1],i[2]],[i[0],i[1],l[2]],[l[0],i[1],l[2]],[l[0],l[1],l[2]],[i[0],l[1],l[2]]]}intersects(i){const l=this.getCorners();let d=!0;for(let f=0;f<i.planes.length;f++){const y=i.planes[f];let x=0;for(let C=0;C<l.length;C++)x+=Ha(y,l[C])+y[3]>=0;if(x===0)return 0;x!==l.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const I=i.points[C][f]-this.min[f];y=Math.min(y,I),x=Math.max(x,I)}if(x<0||y>this.max[f]-this.min[f])return 0}return 1}}const Ws=kn/Math.PI/2,Ju=64,cm=[Ju,32,16],Wa=-Ws,Ga=Ws,RF=[new Oo([Wa,Wa,Wa],[Ga,Ga,Ga]),new Oo([Wa,Wa,Wa],[0,0,Ga]),new Oo([0,Wa,Wa],[Ga,0,Ga]),new Oo([Wa,0,Wa],[0,Ga,Ga]),new Oo([0,0,Wa],[Ga,Ga,Ga])];function My(s){return s*Ws/hm}function _2(s,i,l,d=!0){const f=wa([],s._camera.position,s.worldSize),y=[i,l,1,1];Yu(y,y,s.pixelMatrixInverse),d2(y,y,1/y[3]);const x=Lo([],Es([],y,f)),C=s.globeMatrix,I=[C[12],C[13],C[14]],R=Es([],I,f),V=rm(R),q=Lo([],R),Z=s.worldSize/(2*Math.PI),J=Ha(q,x),Q=Math.asin(Z/V);if(Q<Math.acos(J)){if(!d)return null;const Bt=[],mt=[];wa(Bt,x,V/J),Lo(mt,Es(mt,Bt,R)),Lo(x,Al(x,R,wa(x,mt,Math.tan(Q)*V)))}const ie=[];new a1(f,x).closestPointOnSphere(I,Z,ie);const de=Lo([],Ln(C,0)),Ce=Lo([],Ln(C,1)),Fe=Lo([],Ln(C,2)),we=Ha(de,ie),ze=Ha(Ce,ie),$e=Ha(Fe,ie),Ne=ae(Math.asin(-ze/Z));let st=ae(Math.atan2(we,$e));st=s.center.lng+function(Bt,mt){const Tt=(mt-Bt+180)%360-180;return Tt<-180?Tt+360:Tt}(s.center.lng,st);const rt=qs(st),Ct=Oe(Zs(Ne),0,1);return new Rh(rt,Ct)}class LF{constructor(i,l,d){this.a=Es([],i,d),this.b=Es([],l,d),this.center=d;const f=Lo([],this.a),y=Lo([],this.b);this.angle=Math.acos(Ha(f,y))}}function c1(s,i){if(s.angle===0)return null;let l;return l=s.a[i]===0?1/s.angle*.5*Math.PI:1/s.angle*Math.atan(s.b[i]/s.a[i]/Math.sin(s.angle)-1/Math.tan(s.angle)),l<0||l>1?null:function(d,f,y,x){const C=Math.sin(y);return d*(Math.sin((1-x)*y)/C)+f*(Math.sin(x*y)/C)}(s.a[i],s.b[i],s.angle,Oe(l,0,1))+s.center[i]}function Gs(s){if(s.z<=1)return RF[s.z+2*s.y+s.x];const i=u1(Iy(s));return Oo.fromPoints(i)}function Qu(s,i,l){return wa(s,s,1-l),am(s,s,i,l)}function x2(s,i){const l=Dh(i.zoom);if(l===0)return Gs(s);const d=Iy(s),f=u1(d),y=qs(d.getWest())*i.worldSize,x=qs(d.getEast())*i.worldSize,C=Zs(d.getNorth())*i.worldSize,I=Zs(d.getSouth())*i.worldSize,R=[y,C,0],V=[x,C,0],q=[y,I,0],Z=[x,I,0],J=t1([],i.globeMatrix);return fi(R,R,J),fi(V,V,J),fi(q,q,J),fi(Z,Z,J),f[0]=Qu(f[0],q,l),f[1]=Qu(f[1],Z,l),f[2]=Qu(f[2],V,l),f[3]=Qu(f[3],R,l),Oo.fromPoints(f)}function b2(s,i,l){for(const d of s)fi(d,d,i),wa(d,d,l)}function OF(s,i,l){const d=i/s.worldSize,f=s.globeMatrix;if(l.z<=1){const rt=Gs(l).getCorners();return b2(rt,f,d),Oo.fromPoints(rt)}const y=Iy(l),x=u1(y);b2(x,f,d);const C=Number.MAX_VALUE,I=[-C,-C,-C],R=[C,C,C];if(y.contains(s.center)){for(const Bt of x)im(R,R,Bt),om(I,I,Bt);I[2]=0;const rt=s.point,Ct=[rt.x*d,rt.y*d,0];return im(R,R,Ct),om(I,I,Ct),new Oo(R,I)}const V=[f[12]*d,f[13]*d,f[14]*d],q=y.getCenter(),Z=Oe(s.center.lat,-ho,ho),J=Oe(q.lat,-ho,ho),Q=qs(s.center.lng),ie=Zs(Z);let de=Q-qs(q.lng);const Ce=ie-Zs(J);de>.5?de-=1:de<-.5&&(de+=1);let Fe=0;Math.abs(de)>Math.abs(Ce)?Fe=de>=0?1:3:(Fe=Ce>=0?0:2,am(V,V,[f[4]*d,f[5]*d,f[6]*d],-Math.sin(ne(Ce>=0?y.getSouth():y.getNorth()))*Ws));const we=x[Fe],ze=x[(Fe+1)%4],$e=new LF(we,ze,V),Ne=[c1($e,0)||we[0],c1($e,1)||we[1],c1($e,2)||we[2]],st=Dh(s.zoom);if(st>0){const rt=function({x:Bt,y:mt,z:Tt},It,Lt,Ft,gt){const Wt=1/(1<<Tt);let bn=Bt*Wt,Yt=bn+Wt,cn=mt*Wt,Gt=cn+Wt,En=0;const Gn=(bn+Yt)/2-Ft;return Gn>.5?En=-1:Gn<-.5&&(En=1),bn=((bn+En)*It-(Ft*=It))*Lt+Ft,Yt=((Yt+En)*It-Ft)*Lt+Ft,cn=(cn*It-(gt*=It))*Lt+gt,Gt=(Gt*It-gt)*Lt+gt,[[bn,Gt,0],[Yt,Gt,0],[Yt,cn,0],[bn,cn,0]]}(l,i,s._pixelsPerMercatorPixel,Q,ie);for(let Bt=0;Bt<x.length;Bt++)Qu(x[Bt],rt[Bt],st);const Ct=Al([],rt[Fe],rt[(Fe+1)%4]);wa(Ct,Ct,.5),Qu(Ne,Ct,st)}for(const rt of x)im(R,R,rt),om(I,I,rt);return R[2]=Math.min(we[2],ze[2]),im(R,R,Ne),om(I,I,Ne),new Oo(R,I)}function Iy({x:s,y:i,z:l}){const d=1/(1<<l),f=new nr(Ea(s*d),uo((i+1)*d)),y=new nr(Ea((s+1)*d),uo(i*d));return new Ac(f,y)}function u1(s){const i=ne(s.getNorth()),l=ne(s.getSouth()),d=Math.cos(i),f=Math.cos(l),y=Math.sin(i),x=Math.sin(l),C=s.getWest(),I=s.getEast();return[Ih(f,x,C),Ih(f,x,I),Ih(d,y,I),Ih(d,y,C)]}function Ih(s,i,l,d=Ws){return l=ne(l),[s*Math.sin(l)*d,-i*d,s*Math.cos(l)*d]}function Ph(s,i,l){return Ih(Math.cos(ne(s)),Math.sin(ne(s)),i,l)}function um(s,i,l,d){const f=1<<l.z,y=(s/kn+l.x)/f;return Ph(uo((i/kn+l.y)/f),Ea(y),d)}function Py({min:s,max:i}){return 16383/Math.max(i[0]-s[0],i[1]-s[1],i[2]-s[2])}const w2=new Float64Array(16);function dm(s){const i=Py(s),l=a2(w2,[i,i,i]);return nm(l,l,((d=[])[0]=-(f=s.min)[0],d[1]=-f[1],d[2]=-f[2],d));var d,f}function d1(s){const i=(d=s.min,(l=w2)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=d[0],l[13]=d[1],l[14]=d[2],l[15]=1,l);var l,d;const f=1/Py(s);return Ku(i,i,[f,f,f])}function E2(s,i,l,d,f){const y=function(I){const R=kn/(2*Math.PI);return I/(2*Math.PI)/R}(l),x=[s,i,-l/(2*Math.PI)],C=ws(new Float64Array(16));return nm(C,C,x),Ku(C,C,[y,y,y]),n1(C,C,ne(-f)),Ay(C,C,ne(-d)),C}function Dh(s){return Ee(5,6,s)}function C2(s,i){const l=Ph(i.lat,i.lng),d=function(Q){const ie=Ph(Q._center.lat,Q._center.lng);let de=o1([],Mh(0,1,0),ie);const Ce=s2([],-Q.angle,ie);de=fi(de,de,Ce),s2(Ce,-Q._pitch,de);const Fe=Lo([],ie);return wa(Fe,Fe,My(Q.cameraToCenterDistance/Q.pixelsPerMeter)),fi(Fe,Fe,Ce),Al([],ie,Fe)}(s);return x=(f=i1([],d,l))[0],C=f[1],I=f[2],R=(y=l)[0],V=y[1],q=y[2],J=(Z=Math.sqrt(x*x+C*C+I*I)*Math.sqrt(R*R+V*V+q*q))&&Ha(f,y)/Z,Math.acos(Math.min(Math.max(J,-1),1));var f,y,x,C,I,R,V,q,Z,J}function h1(s,i){return C2(s,i)>Math.PI/2*1.01}const S2=ne(85),zF=Math.cos(S2),BF=Math.sin(S2),hm=63710088e-1,k2=2*Math.PI*hm;class nr{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new nr(pt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,d=this.lat*l,f=i.lat*l,y=Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos((i.lng-this.lng)*l);return hm*Math.acos(Math.min(y,1))}toBounds(i=0){const l=360*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return new Ac(new nr(this.lng-d,this.lat-l),new nr(this.lng+d,this.lat+l))}toEcef(i){const l=My(i);return Ph(this.lat,this.lng,Ws+l)}static convert(i){if(i instanceof nr)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new nr(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new nr(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function p1(s){return k2*Math.cos(s*Math.PI/180)}function qs(s){return(180+s)/360}function Zs(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Cs(s,i){return s/p1(i)}function Ea(s){return 360*s-180}function uo(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function T2(s,i){return s*p1(uo(i))}const ho=85.051129;function A2(s){return 1/Math.cos(s*Math.PI/180)}class Rh{constructor(i,l,d=0){this.x=+i,this.y=+l,this.z=+d}static fromLngLat(i,l=0){const d=nr.convert(i);return new Rh(qs(d.lng),Zs(d.lat),Cs(l,d.lat))}toLngLat(){return new nr(Ea(this.x),uo(this.y))}toAltitude(){return T2(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/k2*A2(uo(this.y))}}function f1(s,i,l,d,f,y,x,C,I){const R=(i+d)/2,V=(l+f)/2,q=new S(R,V);C(q),function(Z,J,Q,ie,de,Ce){const Fe=Q-de,we=ie-Ce;return Math.abs((ie-J)*Fe-(Q-Z)*we)/Math.hypot(Fe,we)}(q.x,q.y,y.x,y.y,x.x,x.y)>=I?(f1(s,i,l,R,V,y,q,C,I),f1(s,R,V,d,f,q,x,C,I)):s.push(x)}function M2(s,i,l){let d=s[0],f=d.x,y=d.y;i(d);const x=[d];for(let C=1;C<s.length;C++){const I=s[C],{x:R,y:V}=I;i(I),f1(x,f,y,R,V,d,I,i,l),f=R,y=V,d=I}return x}function m1(s,i,l,d){if(d(i,l)){const f=i.add(l)._mult(.5);m1(s,i,f,d),m1(s,f,l,d)}else s.push(l)}function FF(s,i){let l=s[0];const d=[l];for(let f=1;f<s.length;f++){const y=s[f];m1(d,l,y,i),l=y}return d}const g1=Math.pow(2,14)-1,I2=-g1-1;function NF(s,i){const l=Math.round(s.x*i),d=Math.round(s.y*i);return s.x=Oe(l,I2,g1),s.y=Oe(d,I2,g1),(l<s.x||l>s.x+1||d<s.y||d>s.y+1)&&Xe("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s}function Ml(s,i,l){const d=s.loadGeometry(),f=s.extent,y=kn/f;if(i&&l&&l.projection.isReprojectedInTileSpace){const x=1<<i.z,{scale:C,x:I,y:R,projection:V}=l,q=Z=>{const J=Ea((i.x+Z.x/f)/x),Q=uo((i.y+Z.y/f)/x),ie=V.project(J,Q);Z.x=(ie.x*C-I)*f,Z.y=(ie.y*C-R)*f};for(let Z=0;Z<d.length;Z++)if(s.type!==1)d[Z]=M2(d[Z],q,1);else{const J=[];for(const Q of d[Z])Q.x<0||Q.x>=f||Q.y<0||Q.y>=f||(q(Q),J.push(Q));d[Z]=J}}for(const x of d)for(const C of x)NF(C,y);return d}function ed(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?Ml(s):[]}}function Dy(s,i,l,d,f){s.emplaceBack(2*i+(d+1)/2,2*l+(f+1)/2)}function Ry(s,i,l){s.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class v1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new gn,this.indexArray=new co,this.segments=new Ei,this.programConfigurations=new Zu(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d,f){const y=this.layers[0],x=[];let C=null;y.type==="circle"&&(C=y.layout.get("circle-sort-key"));for(const{feature:R,id:V,index:q,sourceLayerIndex:Z}of i){const J=this.layers[0]._featureFilter.needGeometry,Q=ed(R,J);if(!this.layers[0]._featureFilter.filter(new et(this.zoom),Q,d))continue;const ie=C?C.evaluate(Q,{},d):void 0,de={id:V,properties:R.properties,type:R.type,sourceLayerIndex:Z,index:q,geometry:J?Q.geometry:Ml(R,d,f),patterns:{},sortKey:ie};x.push(de)}C&&x.sort((R,V)=>R.sortKey-V.sortKey);let I=null;f.projection.name==="globe"&&(this.globeExtVertexArray=new ba,I=f.projection);for(const R of x){const{geometry:V,index:q,sourceLayerIndex:Z}=R,J=i[q].feature;this.addFeature(R,V,q,l.availableImages,d,I),l.featureIndex.insert(J,V,q,Z,this.index)}}update(i,l,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,kF.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,TF.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,l,d,f,y,x){for(const C of l)for(const I of C){const R=I.x,V=I.y;if(R<0||R>=kn||V<0||V>=kn)continue;if(x){const J=x.projectTilePoint(R,V,y),Q=x.upVector(y,R,V),ie=this.globeExtVertexArray;Ry(ie,J,Q),Ry(ie,J,Q),Ry(ie,J,Q),Ry(ie,J,Q)}const q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),Z=q.vertexLength;Dy(this.layoutVertexArray,R,V,-1,-1),Dy(this.layoutVertexArray,R,V,1,-1),Dy(this.layoutVertexArray,R,V,1,1),Dy(this.layoutVertexArray,R,V,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+2,Z+3),q.vertexLength+=4,q.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{},f,y)}}function P2(s,i){for(let l=0;l<s.length;l++)if(td(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(td(s,i[l]))return!0;return!!y1(s,i)}function UF(s,i,l){return!!td(s,i)||!!_1(i,s,l)}function D2(s,i){if(s.length===1)return L2(i,s[0]);for(let l=0;l<i.length;l++){const d=i[l];for(let f=0;f<d.length;f++)if(td(s,d[f]))return!0}for(let l=0;l<s.length;l++)if(L2(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(y1(s,i[l]))return!0;return!1}function jF(s,i,l){if(s.length>1){if(y1(s,i))return!0;for(let d=0;d<i.length;d++)if(_1(i[d],s,l))return!0}for(let d=0;d<s.length;d++)if(_1(s[d],i,l))return!0;return!1}function y1(s,i){if(s.length===0||i.length===0)return!1;for(let l=0;l<s.length-1;l++){const d=s[l],f=s[l+1];for(let y=0;y<i.length-1;y++)if($F(d,f,i[y],i[y+1]))return!0}return!1}function $F(s,i,l,d){return ft(s,l,d)!==ft(i,l,d)&&ft(s,i,l)!==ft(s,i,d)}function _1(s,i,l){const d=l*l;if(i.length===1)return s.distSqr(i[0])<d;for(let f=1;f<i.length;f++)if(R2(s,i[f-1],i[f])<d)return!0;return!1}function R2(s,i,l){const d=i.distSqr(l);if(d===0)return s.distSqr(i);const f=((s.x-i.x)*(l.x-i.x)+(s.y-i.y)*(l.y-i.y))/d;return s.distSqr(f<0?i:f>1?l:l.sub(i)._mult(f)._add(i))}function L2(s,i){let l,d,f,y=!1;for(let x=0;x<s.length;x++){l=s[x];for(let C=0,I=l.length-1;C<l.length;I=C++)d=l[C],f=l[I],d.y>i.y!=f.y>i.y&&i.x<(f.x-d.x)*(i.y-d.y)/(f.y-d.y)+d.x&&(y=!y)}return y}function td(s,i){let l=!1;for(let d=0,f=s.length-1;d<s.length;f=d++){const y=s[d],x=s[f];y.y>i.y!=x.y>i.y&&i.x<(x.x-y.x)*(i.y-y.y)/(x.y-y.y)+y.x&&(l=!l)}return l}function O2(s,i,l,d,f){for(const x of s)if(i<=x.x&&l<=x.y&&d>=x.x&&f>=x.y)return!0;const y=[new S(i,l),new S(i,f),new S(d,f),new S(d,l)];if(s.length>2){for(const x of y)if(td(s,x))return!0}for(let x=0;x<s.length-1;x++)if(VF(s[x],s[x+1],y))return!0;return!1}function VF(s,i,l){const d=l[0],f=l[2];if(s.x<d.x&&i.x<d.x||s.x>f.x&&i.x>f.x||s.y<d.y&&i.y<d.y||s.y>f.y&&i.y>f.y)return!1;const y=ft(s,i,l[0]);return y!==ft(s,i,l[1])||y!==ft(s,i,l[2])||y!==ft(s,i,l[3])}function Lh(s,i,l){const d=i.paint.get(s).value;return d.kind==="constant"?d.value:l.programConfigurations.get(i.id).getMaxValue(s)}function Ly(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function z2(s,i,l,d,f){if(!i[0]&&!i[1])return s;const y=S.convert(i)._mult(f);l==="viewport"&&y._rotate(-d);const x=[];for(let C=0;C<s.length;C++)x.push(s[C].sub(y));return x}function B2(s,i,l,d){const f=S.convert(s)._mult(d);return i==="viewport"&&f._rotate(-l),f}an(v1,"CircleBucket",{omit:["layers"]});const HF=new Ot({"circle-sort-key":new ut(Et.layout_circle["circle-sort-key"])});var WF={paint:new Ot({"circle-radius":new ut(Et.paint_circle["circle-radius"]),"circle-color":new ut(Et.paint_circle["circle-color"]),"circle-blur":new ut(Et.paint_circle["circle-blur"]),"circle-opacity":new ut(Et.paint_circle["circle-opacity"]),"circle-translate":new Ye(Et.paint_circle["circle-translate"]),"circle-translate-anchor":new Ye(Et.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ye(Et.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ye(Et.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ut(Et.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ut(Et.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ut(Et.paint_circle["circle-stroke-opacity"])}),layout:HF};function F2(s,i,l,d,f,y,x,C,I){if(y&&s.queryGeometry.isAboveHorizon)return!1;y&&(I*=s.pixelToTileUnitsFactor);const R=s.tileID.canonical,V=l.projection.upVectorScale(R,l.center.lat,l.worldSize).metersToTile;for(const q of i)for(const Z of q){const J=Z.add(C),Q=f&&l.elevation?l.elevation.exaggeration()*f.getElevationAt(J.x,J.y,!0):0,ie=l.projection.projectTilePoint(J.x,J.y,R);if(Q>0){const we=l.projection.upVector(R,J.x,J.y);ie.x+=we[0]*V*Q,ie.y+=we[1]*V*Q,ie.z+=we[2]*V*Q}const de=y?J:GF(ie.x,ie.y,ie.z,d),Ce=y?s.tilespaceRays.map(we=>ZF(we,Q)):s.queryGeometry.screenGeometry,Fe=Yu([],[ie.x,ie.y,ie.z,1],d);if(!x&&y?I*=Fe[3]/l.cameraToCenterDistance:x&&!y&&(I*=l.cameraToCenterDistance/Fe[3]),y){const we=uo((Z.y/kn+R.y)/(1<<R.z));I/=l.projection.pixelsPerMeter(we,1)/Cs(1,we)}if(UF(Ce,de,I))return!0}return!1}function GF(s,i,l,d){const f=Yu([],[s,i,l,1],d);return new S(f[0]/f[3],f[1]/f[3])}const N2=Mh(0,0,0),qF=Mh(0,0,1);function ZF(s,i){const l=r1();return N2[2]=i,s.intersectsPlane(N2,qF,l),new S(l[0],l[1])}class U2 extends v1{}function j2(s,{width:i,height:l},d,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==i*l*d)throw new RangeError("mismatched image size")}else f=new Uint8Array(i*l*d);return s.width=i,s.height=l,s.data=f,s}function $2(s,i,l){const{width:d,height:f}=i;d===s.width&&f===s.height||(x1(s,i,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,d),height:Math.min(s.height,f)},l),s.width=d,s.height=f,s.data=i.data)}function x1(s,i,l,d,f,y){if(f.width===0||f.height===0)return i;if(f.width>s.width||f.height>s.height||l.x>s.width-f.width||l.y>s.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>i.width||f.height>i.height||d.x>i.width-f.width||d.y>i.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,C=i.data;for(let I=0;I<f.height;I++){const R=((l.y+I)*s.width+l.x)*y,V=((d.y+I)*i.width+d.x)*y;for(let q=0;q<f.width*y;q++)C[V+q]=x[R+q]}return i}an(U2,"HeatmapBucket",{omit:["layers"]});class Il{constructor(i,l){j2(this,i,1,l)}resize(i){$2(this,new Il(i),1)}clone(){return new Il({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,d,f,y){x1(i,l,d,f,y,1)}}class aa{constructor(i,l){j2(this,i,4,l)}resize(i){$2(this,new aa(i),4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new aa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,d,f,y){x1(i,l,d,f,y,4)}}an(Il,"AlphaImage"),an(aa,"RGBAImage");var XF={paint:new Ot({"heatmap-radius":new ut(Et.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ut(Et.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ye(Et.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dt(Et.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ye(Et.paint_heatmap["heatmap-opacity"])})};function b1(s){const i={},l=s.resolution||256,d=s.clips?s.clips.length:1,f=s.image||new aa({width:l,height:d}),y=(x,C,I)=>{i[s.evaluationKey]=I;const R=s.expression.evaluate(i);f.data[x+C+0]=Math.floor(255*R.r/R.a),f.data[x+C+1]=Math.floor(255*R.g/R.a),f.data[x+C+2]=Math.floor(255*R.b/R.a),f.data[x+C+3]=Math.floor(255*R.a)};if(s.clips)for(let x=0,C=0;x<d;++x,C+=4*l)for(let I=0,R=0;I<l;I++,R+=4){const V=I/(l-1),{start:q,end:Z}=s.clips[x];y(C,R,q*(1-V)+Z*V)}else for(let x=0,C=0;x<l;x++,C+=4)y(0,C,x/(l-1));return f}var KF={paint:new Ot({"hillshade-illumination-direction":new Ye(Et.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ye(Et.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ye(Et.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ye(Et.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ye(Et.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ye(Et.paint_hillshade["hillshade-accent-color"])})};const YF=hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:JF}=YF;var Oh={};function Oy(s,i,l){l=l||2;var d,f,y,x,C,I,R,V=i&&i.length,q=V?i[0]*l:s.length,Z=V2(s,0,q,l,!0),J=[];if(!Z||Z.next===Z.prev)return J;if(V&&(Z=function(ie,de,Ce,Fe){var we,ze,$e,Ne=[];for(we=0,ze=de.length;we<ze;we++)($e=V2(ie,de[we]*Fe,we<ze-1?de[we+1]*Fe:ie.length,Fe,!1))===$e.next&&($e.steiner=!0),Ne.push(aN($e));for(Ne.sort(rN),we=0;we<Ne.length;we++)Ce=iN(Ne[we],Ce);return Ce}(s,i,Z,l)),s.length>80*l){d=y=s[0],f=x=s[1];for(var Q=l;Q<q;Q+=l)(C=s[Q])<d&&(d=C),(I=s[Q+1])<f&&(f=I),C>y&&(y=C),I>x&&(x=I);R=(R=Math.max(y-d,x-f))!==0?32767/R:0}return pm(Z,J,l,d,f,R,0),J}function V2(s,i,l,d,f){var y,x;if(f===C1(s,i,l,d)>0)for(y=i;y<l;y+=d)x=G2(y,s[y],s[y+1],x);else for(y=l-d;y>=i;y-=d)x=G2(y,s[y],s[y+1],x);return x&&zy(x,x.next)&&(mm(x),x=x.next),x}function nd(s,i){if(!s)return s;i||(i=s);var l,d=s;do if(l=!1,d.steiner||!zy(d,d.next)&&Ci(d.prev,d,d.next)!==0)d=d.next;else{if(mm(d),(d=i=d.prev)===d.next)break;l=!0}while(l||d!==i);return i}function pm(s,i,l,d,f,y,x){if(s){!x&&y&&function(V,q,Z,J){var Q=V;do Q.z===0&&(Q.z=w1(Q.x,Q.y,q,Z,J)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==V);Q.prevZ.nextZ=null,Q.prevZ=null,function(ie){var de,Ce,Fe,we,ze,$e,Ne,st,rt=1;do{for(Ce=ie,ie=null,ze=null,$e=0;Ce;){for($e++,Fe=Ce,Ne=0,de=0;de<rt&&(Ne++,Fe=Fe.nextZ);de++);for(st=rt;Ne>0||st>0&&Fe;)Ne!==0&&(st===0||!Fe||Ce.z<=Fe.z)?(we=Ce,Ce=Ce.nextZ,Ne--):(we=Fe,Fe=Fe.nextZ,st--),ze?ze.nextZ=we:ie=we,we.prevZ=ze,ze=we;Ce=Fe}ze.nextZ=null,rt*=2}while($e>1)}(Q)}(s,d,f,y);for(var C,I,R=s;s.prev!==s.next;)if(C=s.prev,I=s.next,y?eN(s,d,f,y):QF(s))i.push(C.i/l|0),i.push(s.i/l|0),i.push(I.i/l|0),mm(s),s=I.next,R=I.next;else if((s=I)===R){x?x===1?pm(s=tN(nd(s),i,l),i,l,d,f,y,2):x===2&&nN(s,i,l,d,f,y):pm(nd(s),i,l,d,f,y,1);break}}}function QF(s){var i=s.prev,l=s,d=s.next;if(Ci(i,l,d)>=0)return!1;for(var f=i.x,y=l.x,x=d.x,C=i.y,I=l.y,R=d.y,V=f<y?f<x?f:x:y<x?y:x,q=C<I?C<R?C:R:I<R?I:R,Z=f>y?f>x?f:x:y>x?y:x,J=C>I?C>R?C:R:I>R?I:R,Q=d.next;Q!==i;){if(Q.x>=V&&Q.x<=Z&&Q.y>=q&&Q.y<=J&&zh(f,C,y,I,x,R,Q.x,Q.y)&&Ci(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function eN(s,i,l,d){var f=s.prev,y=s,x=s.next;if(Ci(f,y,x)>=0)return!1;for(var C=f.x,I=y.x,R=x.x,V=f.y,q=y.y,Z=x.y,J=C<I?C<R?C:R:I<R?I:R,Q=V<q?V<Z?V:Z:q<Z?q:Z,ie=C>I?C>R?C:R:I>R?I:R,de=V>q?V>Z?V:Z:q>Z?q:Z,Ce=w1(J,Q,i,l,d),Fe=w1(ie,de,i,l,d),we=s.prevZ,ze=s.nextZ;we&&we.z>=Ce&&ze&&ze.z<=Fe;){if(we.x>=J&&we.x<=ie&&we.y>=Q&&we.y<=de&&we!==f&&we!==x&&zh(C,V,I,q,R,Z,we.x,we.y)&&Ci(we.prev,we,we.next)>=0||(we=we.prevZ,ze.x>=J&&ze.x<=ie&&ze.y>=Q&&ze.y<=de&&ze!==f&&ze!==x&&zh(C,V,I,q,R,Z,ze.x,ze.y)&&Ci(ze.prev,ze,ze.next)>=0))return!1;ze=ze.nextZ}for(;we&&we.z>=Ce;){if(we.x>=J&&we.x<=ie&&we.y>=Q&&we.y<=de&&we!==f&&we!==x&&zh(C,V,I,q,R,Z,we.x,we.y)&&Ci(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;ze&&ze.z<=Fe;){if(ze.x>=J&&ze.x<=ie&&ze.y>=Q&&ze.y<=de&&ze!==f&&ze!==x&&zh(C,V,I,q,R,Z,ze.x,ze.y)&&Ci(ze.prev,ze,ze.next)>=0)return!1;ze=ze.nextZ}return!0}function tN(s,i,l){var d=s;do{var f=d.prev,y=d.next.next;!zy(f,y)&&H2(f,d,d.next,y)&&fm(f,y)&&fm(y,f)&&(i.push(f.i/l|0),i.push(d.i/l|0),i.push(y.i/l|0),mm(d),mm(d.next),d=s=y),d=d.next}while(d!==s);return nd(d)}function nN(s,i,l,d,f,y){var x=s;do{for(var C=x.next.next;C!==x.prev;){if(x.i!==C.i&&sN(x,C)){var I=W2(x,C);return x=nd(x,x.next),I=nd(I,I.next),pm(x,i,l,d,f,y,0),void pm(I,i,l,d,f,y,0)}C=C.next}x=x.next}while(x!==s)}function rN(s,i){return s.x-i.x}function iN(s,i){var l=function(f,y){var x,C=y,I=f.x,R=f.y,V=-1/0;do{if(R<=C.y&&R>=C.next.y&&C.next.y!==C.y){var q=C.x+(R-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(q<=I&&q>V&&(V=q,x=C.x<C.next.x?C:C.next,q===I))return x}C=C.next}while(C!==y);if(!x)return null;var Z,J=x,Q=x.x,ie=x.y,de=1/0;C=x;do I>=C.x&&C.x>=Q&&I!==C.x&&zh(R<ie?I:V,R,Q,ie,R<ie?V:I,R,C.x,C.y)&&(Z=Math.abs(R-C.y)/(I-C.x),fm(C,f)&&(Z<de||Z===de&&(C.x>x.x||C.x===x.x&&oN(x,C)))&&(x=C,de=Z)),C=C.next;while(C!==J);return x}(s,i);if(!l)return i;var d=W2(l,s);return nd(d,d.next),nd(l,l.next)}function oN(s,i){return Ci(s.prev,s,i.prev)<0&&Ci(i.next,s,s.next)<0}function w1(s,i,l,d,f){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*f|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-d)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function aN(s){var i=s,l=s;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==s);return l}function zh(s,i,l,d,f,y,x,C){return(f-x)*(i-C)>=(s-x)*(y-C)&&(s-x)*(d-C)>=(l-x)*(i-C)&&(l-x)*(y-C)>=(f-x)*(d-C)}function sN(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(l,d){var f=l;do{if(f.i!==l.i&&f.next.i!==l.i&&f.i!==d.i&&f.next.i!==d.i&&H2(f,f.next,l,d))return!0;f=f.next}while(f!==l);return!1}(s,i)&&(fm(s,i)&&fm(i,s)&&function(l,d){var f=l,y=!1,x=(l.x+d.x)/2,C=(l.y+d.y)/2;do f.y>C!=f.next.y>C&&f.next.y!==f.y&&x<(f.next.x-f.x)*(C-f.y)/(f.next.y-f.y)+f.x&&(y=!y),f=f.next;while(f!==l);return y}(s,i)&&(Ci(s.prev,s,i.prev)||Ci(s,i.prev,i))||zy(s,i)&&Ci(s.prev,s,s.next)>0&&Ci(i.prev,i,i.next)>0)}function Ci(s,i,l){return(i.y-s.y)*(l.x-i.x)-(i.x-s.x)*(l.y-i.y)}function zy(s,i){return s.x===i.x&&s.y===i.y}function H2(s,i,l,d){var f=Fy(Ci(s,i,l)),y=Fy(Ci(s,i,d)),x=Fy(Ci(l,d,s)),C=Fy(Ci(l,d,i));return f!==y&&x!==C||!(f!==0||!By(s,l,i))||!(y!==0||!By(s,d,i))||!(x!==0||!By(l,s,d))||!(C!==0||!By(l,i,d))}function By(s,i,l){return i.x<=Math.max(s.x,l.x)&&i.x>=Math.min(s.x,l.x)&&i.y<=Math.max(s.y,l.y)&&i.y>=Math.min(s.y,l.y)}function Fy(s){return s>0?1:s<0?-1:0}function fm(s,i){return Ci(s.prev,s,s.next)<0?Ci(s,i,s.next)>=0&&Ci(s,s.prev,i)>=0:Ci(s,i,s.prev)<0||Ci(s,s.next,i)<0}function W2(s,i){var l=new E1(s.i,s.x,s.y),d=new E1(i.i,i.x,i.y),f=s.next,y=i.prev;return s.next=i,i.prev=s,l.next=f,f.prev=l,d.next=l,l.prev=d,y.next=d,d.prev=y,d}function G2(s,i,l,d){var f=new E1(s,i,l);return d?(f.next=d.next,f.prev=d,d.next.prev=f,d.next=f):(f.prev=f,f.next=f),f}function mm(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function E1(s,i,l){this.i=s,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C1(s,i,l,d){for(var f=0,y=i,x=l-d;y<l;y+=d)f+=(s[x]-s[y])*(s[y+1]+s[x+1]),x=y;return f}function lN(s,i,l,d,f){q2(s,i,l||0,d||s.length-1,f||cN)}function q2(s,i,l,d,f){for(;d>l;){if(d-l>600){var y=d-l+1,x=i-l+1,C=Math.log(y),I=.5*Math.exp(2*C/3),R=.5*Math.sqrt(C*I*(y-I)/y)*(x-y/2<0?-1:1);q2(s,i,Math.max(l,Math.floor(i-x*I/y+R)),Math.min(d,Math.floor(i+(y-x)*I/y+R)),f)}var V=s[i],q=l,Z=d;for(gm(s,l,i),f(s[d],V)>0&&gm(s,l,d);q<Z;){for(gm(s,q,Z),q++,Z--;f(s[q],V)<0;)q++;for(;f(s[Z],V)>0;)Z--}f(s[l],V)===0?gm(s,l,Z):gm(s,++Z,d),Z<=i&&(l=Z+1),i<=Z&&(d=Z-1)}}function gm(s,i,l){var d=s[i];s[i]=s[l],s[l]=d}function cN(s,i){return s<i?-1:s>i?1:0}function S1(s,i){const l=s.length;if(l<=1)return[s];const d=[];let f,y;for(let x=0;x<l;x++){const C=wt(s[x]);C!==0&&(s[x].area=Math.abs(C),y===void 0&&(y=C<0),y===C<0?(f&&d.push(f),f=[s[x]]):f.push(s[x]))}if(f&&d.push(f),i>1)for(let x=0;x<d.length;x++)d[x].length<=i||(lN(d[x],i,1,d[x].length-1,uN),d[x]=d[x].slice(0,i));return d}function uN(s,i){return i.area-s.area}function k1(s,i,l){const d=l.patternDependencies;let f=!1;for(const y of i){const x=y.paint.get(`${s}-pattern`);x.isConstant()||(f=!0);const C=x.constantOr(null);C&&(f=!0,d[C]=!0)}return f}function T1(s,i,l,d,f){const y=f.patternDependencies;for(const x of i){const C=x.paint.get(`${s}-pattern`).value;if(C.kind!=="constant"){let I=C.evaluate({zoom:d},l,{},f.availableImages);I=I&&I.name?I.name:I,y[I]=!0,l.patterns[x.id]=I}}return l}({get exports(){return Oh},set exports(s){Oh=s}}).exports=Oy,Oh.default=Oy,Oy.deviation=function(s,i,l,d){var f=i&&i.length,y=Math.abs(C1(s,0,f?i[0]*l:s.length,l));if(f)for(var x=0,C=i.length;x<C;x++)y-=Math.abs(C1(s,i[x]*l,x<C-1?i[x+1]*l:s.length,l));var I=0;for(x=0;x<d.length;x+=3){var R=d[x]*l,V=d[x+1]*l,q=d[x+2]*l;I+=Math.abs((s[R]-s[q])*(s[V+1]-s[R+1])-(s[R]-s[V])*(s[q+1]-s[R+1]))}return y===0&&I===0?0:Math.abs((I-y)/y)},Oy.flatten=function(s){for(var i=s[0][0].length,l={vertices:[],holes:[],dimensions:i},d=0,f=0;f<s.length;f++){for(var y=0;y<s[f].length;y++)for(var x=0;x<i;x++)l.vertices.push(s[f][y][x]);f>0&&l.holes.push(d+=s[f-1].length)}return l};class Ny{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gn,this.indexArray=new co,this.indexArray2=new Vs,this.programConfigurations=new Zu(i.layers,i.zoom),this.segments=new Ei,this.segments2=new Ei,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=i.projection}populate(i,l,d,f){this.hasPattern=k1("fill",this.layers,l);const y=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:C,id:I,index:R,sourceLayerIndex:V}of i){const q=this.layers[0]._featureFilter.needGeometry,Z=ed(C,q);if(!this.layers[0]._featureFilter.filter(new et(this.zoom),Z,d))continue;const J=y?y.evaluate(Z,{},d,l.availableImages):void 0,Q={id:I,properties:C.properties,type:C.type,sourceLayerIndex:V,index:R,geometry:q?Z.geometry:Ml(C,d,f),patterns:{},sortKey:J};x.push(Q)}y&&x.sort((C,I)=>C.sortKey-I.sortKey);for(const C of x){const{geometry:I,index:R,sourceLayerIndex:V}=C;if(this.hasPattern){const q=T1("fill",this.layers,C,this.zoom,l);this.patternFeatures.push(q)}else this.addFeature(C,I,R,d,{},l.availableImages);l.featureIndex.insert(i[R].feature,I,R,V,this.index)}}update(i,l,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,f)}addFeatures(i,l,d,f,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,JF),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,d,f,y,x=[]){for(const C of S1(l,500)){let I=0;for(const Q of C)I+=Q.length;const R=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),V=R.vertexLength,q=[],Z=[];for(const Q of C){if(Q.length===0)continue;Q!==C[0]&&Z.push(q.length/2);const ie=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),de=ie.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(de+Q.length-1,de),q.push(Q[0].x),q.push(Q[0].y);for(let Ce=1;Ce<Q.length;Ce++)this.layoutVertexArray.emplaceBack(Q[Ce].x,Q[Ce].y),this.indexArray2.emplaceBack(de+Ce-1,de+Ce),q.push(Q[Ce].x),q.push(Q[Ce].y);ie.vertexLength+=Q.length,ie.primitiveLength+=Q.length}const J=Oh(q,Z);for(let Q=0;Q<J.length;Q+=3)this.indexArray.emplaceBack(V+J[Q],V+J[Q+1],V+J[Q+2]);R.vertexLength+=I,R.primitiveLength+=J.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,y,x,f)}}an(Ny,"FillBucket",{omit:["layers","patternFeatures"]});const dN=new Ot({"fill-sort-key":new ut(Et.layout_fill["fill-sort-key"])});var hN={paint:new Ot({"fill-antialias":new Ye(Et.paint_fill["fill-antialias"]),"fill-opacity":new ut(Et.paint_fill["fill-opacity"]),"fill-color":new ut(Et.paint_fill["fill-color"]),"fill-outline-color":new ut(Et.paint_fill["fill-outline-color"]),"fill-translate":new Ye(Et.paint_fill["fill-translate"]),"fill-translate-anchor":new Ye(Et.paint_fill["fill-translate-anchor"]),"fill-pattern":new ut(Et.paint_fill["fill-pattern"])}),layout:dN};const pN=hn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),fN=hn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),mN=hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:gN}=pN;var Uy={},vN=S,Z2=Bh;function Bh(s,i,l,d,f){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=d,this._values=f,s.readFields(yN,this,i)}function yN(s,i,l){s==1?i.id=l.readVarint():s==2?function(d,f){for(var y=d.readVarint()+d.pos;d.pos<y;){var x=f._keys[d.readVarint()],C=f._values[d.readVarint()];f.properties[x]=C}}(l,i):s==3?i.type=l.readVarint():s==4&&(i._geometry=l.pos)}function _N(s){for(var i,l,d=0,f=0,y=s.length,x=y-1;f<y;x=f++)d+=((l=s[x]).x-(i=s[f]).x)*(i.y+l.y);return d}Bh.types=["Unknown","Point","LineString","Polygon"],Bh.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,l=s.readVarint()+s.pos,d=1,f=0,y=0,x=0,C=[];s.pos<l;){if(f<=0){var I=s.readVarint();d=7&I,f=I>>3}if(f--,d===1||d===2)y+=s.readSVarint(),x+=s.readSVarint(),d===1&&(i&&C.push(i),i=[]),i.push(new vN(y,x));else{if(d!==7)throw new Error("unknown command "+d);i&&i.push(i[0].clone())}}return i&&C.push(i),C},Bh.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,l=1,d=0,f=0,y=0,x=1/0,C=-1/0,I=1/0,R=-1/0;s.pos<i;){if(d<=0){var V=s.readVarint();l=7&V,d=V>>3}if(d--,l===1||l===2)(f+=s.readSVarint())<x&&(x=f),f>C&&(C=f),(y+=s.readSVarint())<I&&(I=y),y>R&&(R=y);else if(l!==7)throw new Error("unknown command "+l)}return[x,I,C,R]},Bh.prototype.toGeoJSON=function(s,i,l){var d,f,y=this.extent*Math.pow(2,l),x=this.extent*s,C=this.extent*i,I=this.loadGeometry(),R=Bh.types[this.type];function V(J){for(var Q=0;Q<J.length;Q++){var ie=J[Q];J[Q]=[360*(ie.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(ie.y+C)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(d=0;d<I.length;d++)q[d]=I[d][0];V(I=q);break;case 2:for(d=0;d<I.length;d++)V(I[d]);break;case 3:for(I=function(J){var Q=J.length;if(Q<=1)return[J];for(var ie,de,Ce=[],Fe=0;Fe<Q;Fe++){var we=_N(J[Fe]);we!==0&&(de===void 0&&(de=we<0),de===we<0?(ie&&Ce.push(ie),ie=[J[Fe]]):ie.push(J[Fe]))}return ie&&Ce.push(ie),Ce}(I),d=0;d<I.length;d++)for(f=0;f<I[d].length;f++)V(I[d][f])}I.length===1?I=I[0]:R="Multi"+R;var Z={type:"Feature",geometry:{type:R,coordinates:I},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var xN=Z2,X2=K2;function K2(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(bN,this,i),this.length=this._features.length}function bN(s,i,l){s===15?i.version=l.readVarint():s===1?i.name=l.readString():s===5?i.extent=l.readVarint():s===2?i._features.push(l.pos):s===3?i._keys.push(l.readString()):s===4&&i._values.push(function(d){for(var f=null,y=d.readVarint()+d.pos;d.pos<y;){var x=d.readVarint()>>3;f=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return f}(l))}K2.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new xN(this._pbf,i,this.extent,this._keys,this._values)};var wN=X2;function EN(s,i,l){if(s===3){var d=new wN(l,l.readVarint()+l.pos);d.length&&(i[d.name]=d)}}var A1=Uy.VectorTile=function(s,i){this.layers=s.readFields(EN,{},i)},jy=Uy.VectorTileFeature=Z2;function $y(s,i,l,d){const f=[],y=d===0?(x,C,I,R,V,q)=>{x.push(new S(q,I+(q-C)/(R-C)*(V-I)))}:(x,C,I,R,V,q)=>{x.push(new S(C+(q-I)/(V-I)*(R-C),q))};for(const x of s){const C=[];for(const I of x){if(I.length<=2)continue;const R=[];for(let Z=0;Z<I.length-1;Z++){const J=I[Z].x,Q=I[Z].y,ie=I[Z+1].x,de=I[Z+1].y,Ce=d===0?J:Q,Fe=d===0?ie:de;Ce<i?Fe>i&&y(R,J,Q,ie,de,i):Ce>l?Fe<l&&y(R,J,Q,ie,de,l):R.push(I[Z]),Fe<i&&Ce>=i&&y(R,J,Q,ie,de,i),Fe>l&&Ce<=l&&y(R,J,Q,ie,de,l)}let V=I[I.length-1];const q=d===0?V.x:V.y;q>=i&&q<=l&&R.push(V),R.length&&(V=R[R.length-1],R[0].x===V.x&&R[0].y===V.y||R.push(R[0]),C.push(R))}C.length&&f.push(C)}return f}Uy.VectorTileLayer=X2;const CN=jy.types,SN=Math.pow(2,13);function vm(s,i,l,d,f,y,x,C){s.emplaceBack((i<<1)+x,(l<<1)+y,(Math.floor(d*SN)<<1)+f,Math.round(C))}function ym(s,i,l){s.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class Y2{constructor(){this.acc=new S(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new S(i.x,i.y),this.max=new S(i.x,i.y))}append(i,l){this.currentPolyCount.edges++,this.acc._add(i);const d=this.min,f=this.max;i.x<d.x?d.x=i.x:i.x>f.x&&(f.x=i.x),i.y<d.y?d.y=i.y:i.y>f.y&&(f.y=i.y),((i.x===0||i.x===kn)&&i.x===l.x)!=((i.y===0||i.y===kn)&&i.y===l.y)&&this.processBorderOverlap(i,l),l.x<0!=i.x<0&&this.addBorderIntersection(0,er(l.y,i.y,(0-l.x)/(i.x-l.x))),l.x>kn!=i.x>kn&&this.addBorderIntersection(1,er(l.y,i.y,(kn-l.x)/(i.x-l.x))),l.y<0!=i.y<0&&this.addBorderIntersection(2,er(l.x,i.x,(0-l.y)/(i.y-l.y))),l.y>kn!=i.y>kn&&this.addBorderIntersection(3,er(l.x,i.x,(kn-l.y)/(i.y-l.y)))}addBorderIntersection(i,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[i];l<d[0]&&(d[0]=l),l>d[1]&&(d[1]=l)}processBorderOverlap(i,l){if(i.x===l.x){if(i.y===l.y)return;const d=i.x===0?0:1;this.addBorderIntersection(d,l.y),this.addBorderIntersection(d,i.y)}else{const d=i.y===0?2:3;this.addBorderIntersection(d,l.x),this.addBorderIntersection(d,i.x)}}centroid(){const i=this.polyCount.reduce((l,d)=>l+d.edges,0);return i!==0?this.acc.div(i)._round():new S(0,0)}span(){return new S(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,l)=>i+ +(l[0]!==Number.MAX_VALUE),0)}}class _m{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new pr,this.centroidVertexArray=new JT,this.indexArray=new co,this.programConfigurations=new Zu(i.layers,i.zoom),this.segments=new Ei,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=i.enableTerrain}populate(i,l,d,f){this.features=[],this.hasPattern=k1("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(y){const x=Math.exp(Math.PI*(1-y.y/(1<<y.z)*2));return 80150034*x/(x*x+1)/kn/(1<<y.z)}(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:y,id:x,index:C,sourceLayerIndex:I}of i){const R=this.layers[0]._featureFilter.needGeometry,V=ed(y,R);if(!this.layers[0]._featureFilter.filter(new et(this.zoom),V,d))continue;const q={id:x,sourceLayerIndex:I,index:C,geometry:R?V.geometry:Ml(y,d,f),properties:y.properties,type:y.type,patterns:{}},Z=this.layoutVertexArray.length;this.hasPattern?this.features.push(T1("fill-extrusion",this.layers,q,this.zoom,l)):this.addFeature(q,q.geometry,C,d,{},l.availableImages,f),l.featureIndex.insert(y,q.geometry,C,I,this.index,Z)}this.sortBorders()}addFeatures(i,l,d,f,y){for(const x of this.features){const{geometry:C}=x;this.addFeature(x,C,x.index,l,d,f,y)}this.sortBorders()}update(i,l,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,gN),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,mN.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,fN.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,d,f,y,x,C){const I=[new S(0,0),new S(kn,kn)],R=C.projection,V=R.name==="globe",q=this.enableTerrain&&!V?new Y2:null,Z=CN[i.type]==="Polygon";V&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ba);const J=S1(l,500);for(let Ce=J.length-1;Ce>=0;Ce--){const Fe=J[Ce];(Fe.length===0||(Q=Fe[0]).every(we=>we.x<=0)||Q.every(we=>we.x>=kn)||Q.every(we=>we.y<=0)||Q.every(we=>we.y>=kn))&&J.splice(Ce,1)}var Q;let ie;if(V)ie=iA(J,I,f);else{ie=[];for(const Ce of J)ie.push({polygon:Ce,bounds:I})}const de=Z?this.edgeRadius:0;for(const{polygon:Ce,bounds:Fe}of ie){let we=0,ze=0;for(const Ne of Ce)Z&&!Ne[0].equals(Ne[Ne.length-1])&&Ne.push(Ne[0]),ze+=Z?Ne.length-1:Ne.length;const $e=this.segments.prepareSegment((Z?5:4)*ze,this.layoutVertexArray,this.indexArray);if(Z){const Ne=[],st=[];we=$e.vertexLength;for(const Ct of Ce){let Bt,mt;Ct.length&&Ct!==Ce[0]&&st.push(Ne.length/2),Bt=Ct[1].sub(Ct[0])._perp()._unit();for(let Tt=1;Tt<Ct.length;Tt++){const It=Ct[Tt],Lt=Ct[Tt===Ct.length-1?1:Tt+1];let{x:Ft,y:gt}=It;if(de){mt=Lt.sub(It)._perp()._unit();const Wt=Bt.add(mt)._unit(),bn=de*Math.min(4,1/(Bt.x*Wt.x+Bt.y*Wt.y));Ft+=bn*Wt.x,gt+=bn*Wt.y,Bt=mt}vm(this.layoutVertexArray,Ft,gt,0,0,1,1,0),$e.vertexLength++,Ne.push(It.x,It.y),V&&ym(this.layoutVertexExtArray,R.projectTilePoint(Ft,gt,f),R.upVector(f,Ft,gt))}}const rt=Oh(Ne,st);for(let Ct=0;Ct<rt.length;Ct+=3)this.indexArray.emplaceBack(we+rt[Ct],we+rt[Ct+2],we+rt[Ct+1]),$e.primitiveLength++}for(const Ne of Ce){q&&Ne.length&&q.startRing(Ne[0]);let st,rt,Ct,Bt=Ne.length>4&&tA(Ne[Ne.length-2],Ne[0],Ne[1]),mt=de?kN(Ne[Ne.length-2],Ne[0],Ne[1],de):0;rt=Ne[1].sub(Ne[0])._perp()._unit();let Tt=!0;for(let It=1,Lt=0;It<Ne.length;It++){let Ft=Ne[It-1],gt=Ne[It];const Wt=Ne[It===Ne.length-1?1:It+1];if(q&&Z&&q.currentPolyCount.top++,eA(gt,Ft,Fe)){de&&(rt=Wt.sub(gt)._perp()._unit(),Tt=!Tt);continue}q&&q.append(gt,Ft);const bn=gt.sub(Ft)._perp(),Yt=bn.x/(Math.abs(bn.x)+Math.abs(bn.y)),cn=bn.y>0?1:0,Gt=Ft.dist(gt);if(Lt+Gt>32768&&(Lt=0),de){Ct=Wt.sub(gt)._perp()._unit();let jn=Q2(Ft,gt,Wt,J2(rt,Ct),de);isNaN(jn)&&(jn=0);const Sn=gt.sub(Ft)._unit();Ft=Ft.add(Sn.mult(mt))._round(),gt=gt.add(Sn.mult(-jn))._round(),mt=jn,rt=Ct}const En=$e.vertexLength,Gn=Ne.length>4&&tA(Ft,gt,Wt);let Vn=nA(Lt,Bt,Tt);if(vm(this.layoutVertexArray,Ft.x,Ft.y,Yt,cn,0,0,Vn),vm(this.layoutVertexArray,Ft.x,Ft.y,Yt,cn,0,1,Vn),Lt+=Gt,Vn=nA(Lt,Gn,!Tt),Bt=Gn,vm(this.layoutVertexArray,gt.x,gt.y,Yt,cn,0,0,Vn),vm(this.layoutVertexArray,gt.x,gt.y,Yt,cn,0,1,Vn),$e.vertexLength+=4,this.indexArray.emplaceBack(En+0,En+1,En+2),this.indexArray.emplaceBack(En+1,En+3,En+2),$e.primitiveLength+=2,de){const jn=we+(It===1?Ne.length-2:It-2),Sn=It===1?we:jn+1;if(this.indexArray.emplaceBack(En+1,jn,En+3),this.indexArray.emplaceBack(jn,Sn,En+3),$e.primitiveLength+=2,st===void 0&&(st=En),!eA(Wt,Ne[It],Fe)){const gr=It===Ne.length-1?st:$e.vertexLength;this.indexArray.emplaceBack(En+2,En+3,gr),this.indexArray.emplaceBack(En+3,gr+1,gr),this.indexArray.emplaceBack(En+3,Sn,gr+1),$e.primitiveLength+=3}Tt=!Tt}if(V){const jn=this.layoutVertexExtArray,Sn=R.projectTilePoint(Ft.x,Ft.y,f),gr=R.projectTilePoint(gt.x,gt.y,f),Pn=R.upVector(f,Ft.x,Ft.y),qn=R.upVector(f,gt.x,gt.y);ym(jn,Sn,Pn),ym(jn,Sn,Pn),ym(jn,gr,qn),ym(jn,gr,qn)}}Z&&(we+=Ne.length-1)}}if(q&&q.polyCount.length>0){if(q.borders){q.vertexArrayOffset=this.centroidVertexArray.length;const Ce=q.borders,Fe=this.featuresOnBorder.push(q)-1;for(let we=0;we<4;we++)Ce[we][0]!==Number.MAX_VALUE&&this.borders[we].push(Fe)}this.encodeCentroid(q.borders?void 0:q.centroid(),q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,y,x,f)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((l,d)=>this.featuresOnBorder[l].borders[i][0]-this.featuresOnBorder[d].borders[i][0])}encodeCentroid(i,l,d=!0){let f,y;if(i)if(i.y!==0){const C=l.span()._mult(this.tileToMeter);f=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(C.x/10)),y=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(C.y/10))}else f=Math.ceil(7*(i.x+450)),y=0;else f=0,y=+d;let x=d?this.centroidVertexArray.length:l.vertexArrayOffset;for(const C of l.polyCount){d&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*C.edges+C.top);for(let I=0;I<C.top;I++)this.centroidVertexArray.emplace(x++,f,y);for(let I=0;I<2*C.edges;I++)this.centroidVertexArray.emplace(x++,0,y),this.centroidVertexArray.emplace(x++,f,y)}}}function J2(s,i){const l=s.add(i)._unit();return s.x*l.x+s.y*l.y}function kN(s,i,l,d){const f=i.sub(s)._perp()._unit(),y=l.sub(i)._perp()._unit();return Q2(s,i,l,J2(f,y),d)}function Q2(s,i,l,d,f){const y=Math.sqrt(1-d*d);return Math.min(s.dist(i)/3,i.dist(l)/3,f*y/d)}function eA(s,i,l){return s.x<l[0].x&&i.x<l[0].x||s.x>l[1].x&&i.x>l[1].x||s.y<l[0].y&&i.y<l[0].y||s.y>l[1].y&&i.y>l[1].y}function tA(s,i,l){if(s.x<0||s.x>=kn||i.x<0||i.x>=kn||l.x<0||l.x>=kn)return!1;const d=l.sub(i),f=d.perp(),y=s.sub(i);return(d.x*y.x+d.y*y.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(y.x*y.x+y.y*y.y))>-.866&&f.x*y.x+f.y*y.y<0}function nA(s,i,l){const d=i?2|s:-3&s;return l?1|d:-2&d}function rA(){const s=Math.PI/32,i=Math.tan(s),l=hm;return l*Math.sqrt(1+2*i*i)-l}function iA(s,i,l){const d=1<<l.z,f=Ea(l.x/d),y=Ea((l.x+1)/d),x=uo(l.y/d),C=uo((l.y+1)/d);return function(I,R,V,q,Z=0,J){const Q=[];if(!I.length||!V||!q)return Q;const ie=(Ne,st)=>{for(const rt of Ne)Q.push({polygon:rt,bounds:st})},de=Math.ceil(Math.log2(V)),Ce=Math.ceil(Math.log2(q)),Fe=de-Ce,we=[];for(let Ne=0;Ne<Math.abs(Fe);Ne++)we.push(Fe>0?0:1);for(let Ne=0;Ne<Math.min(de,Ce);Ne++)we.push(0),we.push(1);let ze=I;if(ze=$y(ze,R[0].y-Z,R[1].y+Z,1),ze=$y(ze,R[0].x-Z,R[1].x+Z,0),!ze.length)return Q;const $e=[];for(we.length?$e.push({polygons:ze,bounds:R,depth:0}):ie(ze,R);$e.length;){const Ne=$e.pop(),st=Ne.depth,rt=we[st],Ct=Ne.bounds[0],Bt=Ne.bounds[1],mt=rt===0?Ct.x:Ct.y,Tt=rt===0?Bt.x:Bt.y,It=J?J(rt,mt,Tt):.5*(mt+Tt),Lt=$y(Ne.polygons,mt-Z,It+Z,rt),Ft=$y(Ne.polygons,It-Z,Tt+Z,rt);if(Lt.length){const gt=[Ct,new S(rt===0?It:Bt.x,rt===1?It:Bt.y)];we.length>st+1?$e.push({polygons:Lt,bounds:gt,depth:st+1}):ie(Lt,gt)}if(Ft.length){const gt=[new S(rt===0?It:Ct.x,rt===1?It:Ct.y),Bt];we.length>st+1?$e.push({polygons:Ft,bounds:gt,depth:st+1}):ie(Ft,gt)}}return Q}(s,i,Math.ceil((y-f)/11.25),Math.ceil((x-C)/11.25),1,(I,R,V)=>{if(I===0)return .5*(R+V);{const q=uo((l.y+R/kn)/d);return(Zs(.5*(uo((l.y+V/kn)/d)+q))*d-l.y)*kn}})}an(_m,"FillExtrusionBucket",{omit:["layers","features"]}),an(Y2,"PartMetadata");const TN=new Ot({"fill-extrusion-edge-radius":new Ye(Et["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var AN={paint:new Ot({"fill-extrusion-opacity":new Ye(Et["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ut(Et["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ye(Et["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ye(Et["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ut(Et["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ut(Et["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ut(Et["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ye(Et["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ye(Et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ye(Et["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:TN};function oA(s,i,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[s*d-2*Math.PI*6378137/2,i*d-2*Math.PI*6378137/2]}class Vy{constructor(i,l,d){this.z=i,this.x=l,this.y=d,this.key=xm(0,i,i,l,d)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l){const d=function(y,x,C){var I=oA(256*y,256*(x=Math.pow(2,C)-x-1),C),R=oA(256*(y+1),256*(x+1),C);return I[0]+","+I[1]+","+R[0]+","+R[1]}(this.x,this.y,this.z),f=function(y,x,C){let I,R="";for(let V=y;V>0;V--)I=1<<V-1,R+=(x&I?1:0)+(C&I?2:0);return R}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",f).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class aA{constructor(i,l){this.wrap=i,this.canonical=l,this.key=xm(i,l.z,l.z,l.x,l.y)}}class zo{constructor(i,l,d,f,y){this.overscaledZ=i,this.wrap=l,this.canonical=new Vy(d,+f,+y),this.key=l===0&&i===d?this.canonical.key:xm(l,i,d,f,y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const l=this.canonical.z-i;return i>this.canonical.z?new zo(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zo(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l=!0){if(this.overscaledZ===i&&l)return this.key;if(i>this.canonical.z)return xm(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-i;return xm(this.wrap*+l,i,i,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new zo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,f=2*this.canonical.y;return[new zo(l,this.wrap,l,d,f),new zo(l,this.wrap,l,d+1,f),new zo(l,this.wrap,l,d,f+1),new zo(l,this.wrap,l,d+1,f+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new zo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new zo(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new aA(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function xm(s,i,l,d,f){const y=1<<Math.min(l,22);let x=y*(f%y)+d%y;return s&&l<22&&(x+=y*y*((s<0?-2*s-1:2*s)%(1<<2*(22-l)))),16*(32*x+l)+(i-l)}an(Vy,"CanonicalTileID"),an(zo,"OverscaledTileID",{omit:["projMatrix"]});class Fh extends S{constructor(i,l,d){super(i,l),this.z=d}}function bm(s,i){return s.x*i.x+s.y*i.y}function sA(s,i){if(s.length===1){let l=0;const d=i[l++];let f;for(;!f||d.equals(f);)if(f=i[l++],!f)return 1/0;for(;l<i.length;l++){const y=i[l],x=s[0],C=f.sub(d),I=y.sub(d),R=x.sub(d),V=bm(C,C),q=bm(C,I),Z=bm(I,I),J=bm(R,C),Q=bm(R,I),ie=V*Z-q*q,de=(Z*J-q*Q)/ie,Ce=(V*Q-q*J)/ie,Fe=d.z*(1-de-Ce)+f.z*de+y.z*Ce;if(isFinite(Fe))return Fe}return 1/0}{let l=1/0;for(const d of i)l=Math.min(l,d.z);return l}}function lA(s,i,l,d,f,y,x,C){const I=x*f.getElevationAt(s,i,!0,!0),R=y[0]!==0,V=R?y[1]===0?x*(y[0]/7-450):x*function(q,Z,J){const Q=Math.floor(Z[0]/8),ie=Math.floor(Z[1]/8),de=10*(Z[0]-8*Q),Ce=10*(Z[1]-8*ie),Fe=q.getElevationAt(Q,ie,!0,!0),we=q.getMeterToDEM(J),ze=Math.floor(.5*(de*we-1)),$e=Math.floor(.5*(Ce*we-1)),Ne=q.tileCoordToPixel(Q,ie),st=2*ze+1,rt=2*$e+1,Ct=function(Ft,gt,Wt,bn,Yt){return[Ft.getElevationAtPixel(gt,Wt,!0),Ft.getElevationAtPixel(gt+Yt,Wt,!0),Ft.getElevationAtPixel(gt,Wt+Yt,!0),Ft.getElevationAtPixel(gt+bn,Wt+Yt,!0)]}(q,Ne.x-ze,Ne.y-$e,st,rt),Bt=Math.abs(Ct[0]-Ct[1]),mt=Math.abs(Ct[2]-Ct[3]),Tt=Math.abs(Ct[0]-Ct[2])+Math.abs(Ct[1]-Ct[3]),It=Math.min(.25,.5*we*(Bt+mt)/st),Lt=Math.min(.25,.5*we*Tt/rt);return Fe+Math.max(It*de,Lt*Ce)}(f,y,C):I;return{base:I+(l===0)?-1:l,top:R?Math.max(V+d,I+l+2):I+d}}const MN=hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:IN}=MN,PN=hn([{name:"a_packed",components:4,type:"Float32"}]),{members:DN}=PN,RN=jy.types,LN=Math.cos(Math.PI/180*37.5);class Hy{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Rr,this.layoutVertexArray2=new kr,this.indexArray=new co,this.programConfigurations=new Zu(i.layers,i.zoom),this.segments=new Ei,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d,f){this.hasPattern=k1("line",this.layers,l);const y=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:V,id:q,index:Z,sourceLayerIndex:J}of i){const Q=this.layers[0]._featureFilter.needGeometry,ie=ed(V,Q);if(!this.layers[0]._featureFilter.filter(new et(this.zoom),ie,d))continue;const de=y?y.evaluate(ie,{},d):void 0,Ce={id:q,properties:V.properties,type:V.type,sourceLayerIndex:J,index:Z,geometry:Q?ie.geometry:Ml(V,d,f),patterns:{},sortKey:de};x.push(Ce)}y&&x.sort((V,q)=>V.sortKey-q.sortKey);const{lineAtlas:C,featureIndex:I}=l,R=this.addConstantDashes(C);for(const V of x){const{geometry:q,index:Z,sourceLayerIndex:J}=V;if(R&&this.addFeatureDashes(V,C),this.hasPattern){const Q=T1("line",this.layers,V,this.zoom,l);this.patternFeatures.push(Q)}else this.addFeature(V,q,Z,d,C.positions,l.availableImages);I.insert(i[Z].feature,q,Z,J,this.index)}}addConstantDashes(i){let l=!1;for(const d of this.layers){const f=d.paint.get("line-dasharray").value,y=d.layout.get("line-cap").value;if(f.kind!=="constant"||y.kind!=="constant")l=!0;else{const x=y.value,C=f.value;if(!C)continue;i.addDash(C,x)}}return l}addFeatureDashes(i,l){const d=this.zoom;for(const f of this.layers){const y=f.paint.get("line-dasharray").value,x=f.layout.get("line-cap").value;if(y.kind==="constant"&&x.kind==="constant")continue;let C,I;if(y.kind==="constant"){if(C=y.value,!C)continue}else C=y.evaluate({zoom:d},i);I=x.kind==="constant"?x.value:x.evaluate({zoom:d},i),l.addDash(C,I),i.patterns[f.id]=l.getKey(C,I)}}update(i,l,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,f)}addFeatures(i,l,d,f,y){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,DN)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,IN),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,d,f,y,x){const C=this.layers[0].layout,I=C.get("line-join").evaluate(i,{}),R=C.get("line-cap").evaluate(i,{}),V=C.get("line-miter-limit"),q=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const Z of l)this.addLine(Z,i,I,R,V,q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,y,x,f)}addLine(i,l,d,f,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ce=0;Ce<i.length-1;Ce++)this.totalDistance+=i[Ce].dist(i[Ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C=RN[l.type]==="Polygon";let I=i.length;for(;I>=2&&i[I-1].equals(i[I-2]);)I--;let R=0;for(;R<I-1&&i[R].equals(i[R+1]);)R++;if(I<(C?3:2))return;d==="bevel"&&(y=1.05);const V=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let Z,J,Q,ie,de;this.e1=this.e2=-1,C&&(Z=i[I-2],de=i[R].sub(Z)._unit()._perp());for(let Ce=R;Ce<I;Ce++){if(Q=Ce===I-1?C?i[R+1]:void 0:i[Ce+1],Q&&i[Ce].equals(Q))continue;de&&(ie=de),Z&&(J=Z),Z=i[Ce],de=Q?Q.sub(Z)._unit()._perp():ie,ie=ie||de;let Fe=ie.add(de);Fe.x===0&&Fe.y===0||Fe._unit();const we=ie.x*de.x+ie.y*de.y,ze=Fe.x*de.x+Fe.y*de.y,$e=ze!==0?1/ze:1/0,Ne=2*Math.sqrt(2-2*ze),st=ze<LN&&J&&Q,rt=ie.x*de.y-ie.y*de.x>0;if(st&&Ce>R){const mt=Z.dist(J);if(mt>2*V){const Tt=Z.sub(Z.sub(J)._mult(V/mt)._round());this.updateDistance(J,Tt),this.addCurrentVertex(Tt,ie,0,0,q),J=Tt}}const Ct=J&&Q;let Bt=Ct?d:C?"butt":f;if(Ct&&Bt==="round"&&($e<x?Bt="miter":$e<=2&&(Bt="fakeround")),Bt==="miter"&&$e>y&&(Bt="bevel"),Bt==="bevel"&&($e>2&&(Bt="flipbevel"),$e<y&&(Bt="miter")),J&&this.updateDistance(J,Z),Bt==="miter")Fe._mult($e),this.addCurrentVertex(Z,Fe,0,0,q);else if(Bt==="flipbevel"){if($e>100)Fe=de.mult(-1);else{const mt=$e*ie.add(de).mag()/ie.sub(de).mag();Fe._perp()._mult(mt*(rt?-1:1))}this.addCurrentVertex(Z,Fe,0,0,q),this.addCurrentVertex(Z,Fe.mult(-1),0,0,q)}else if(Bt==="bevel"||Bt==="fakeround"){const mt=-Math.sqrt($e*$e-1),Tt=rt?mt:0,It=rt?0:mt;if(J&&this.addCurrentVertex(Z,ie,Tt,It,q),Bt==="fakeround"){const Lt=Math.round(180*Ne/Math.PI/20);for(let Ft=1;Ft<Lt;Ft++){let gt=Ft/Lt;if(gt!==.5){const bn=gt-.5;gt+=gt*bn*(gt-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*bn*bn+(.848013+we*(.215638*we-1.06021)))}const Wt=de.sub(ie)._mult(gt)._add(ie)._unit()._mult(rt?-1:1);this.addHalfVertex(Z,Wt.x,Wt.y,!1,rt,0,q)}}Q&&this.addCurrentVertex(Z,de,-Tt,-It,q)}else if(Bt==="butt")this.addCurrentVertex(Z,Fe,0,0,q);else if(Bt==="square"){const mt=J?1:-1;J||this.addCurrentVertex(Z,Fe,mt,mt,q),this.addCurrentVertex(Z,Fe,0,0,q),J&&this.addCurrentVertex(Z,Fe,mt,mt,q)}else Bt==="round"&&(J&&(this.addCurrentVertex(Z,ie,0,0,q),this.addCurrentVertex(Z,ie,1,1,q,!0)),Q&&(this.addCurrentVertex(Z,de,-1,-1,q,!0),this.addCurrentVertex(Z,de,0,0,q)));if(st&&Ce<I-1){const mt=Z.dist(Q);if(mt>2*V){const Tt=Z.add(Q.sub(Z)._mult(V/mt)._round());this.updateDistance(Z,Tt),this.addCurrentVertex(Tt,de,0,0,q),Z=Tt}}}}addCurrentVertex(i,l,d,f,y,x=!1){const C=l.y*f-l.x,I=-l.y-l.x*f;this.addHalfVertex(i,l.x+l.y*d,l.y-l.x*d,x,!1,d,y),this.addHalfVertex(i,C,I,x,!0,-f,y)}addHalfVertex({x:i,y:l},d,f,y,x,C,I){this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(l<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*f)+128,1+(C===0?0:C<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const R=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),I.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}an(Hy,"LineBucket",{omit:["layers","patternFeatures"]});const ON=new Ot({"line-cap":new ut(Et.layout_line["line-cap"]),"line-join":new ut(Et.layout_line["line-join"]),"line-miter-limit":new Ye(Et.layout_line["line-miter-limit"]),"line-round-limit":new Ye(Et.layout_line["line-round-limit"]),"line-sort-key":new ut(Et.layout_line["line-sort-key"])});var cA={paint:new Ot({"line-opacity":new ut(Et.paint_line["line-opacity"]),"line-color":new ut(Et.paint_line["line-color"]),"line-translate":new Ye(Et.paint_line["line-translate"]),"line-translate-anchor":new Ye(Et.paint_line["line-translate-anchor"]),"line-width":new ut(Et.paint_line["line-width"]),"line-gap-width":new ut(Et.paint_line["line-gap-width"]),"line-offset":new ut(Et.paint_line["line-offset"]),"line-blur":new ut(Et.paint_line["line-blur"]),"line-dasharray":new ut(Et.paint_line["line-dasharray"]),"line-pattern":new ut(Et.paint_line["line-pattern"]),"line-gradient":new Dt(Et.paint_line["line-gradient"]),"line-trim-offset":new Ye(Et.paint_line["line-trim-offset"])}),layout:ON};const uA=new class extends ut{possiblyEvaluate(s,i){return i=new et(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(s,i)}evaluate(s,i,l,d){return i=nt({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(s,i,l,d)}}(cA.paint.properties["line-width"].specification);function dA(s,i){return i>0?i+2*s:s}uA.useIntegerZoom=!0;const zN=hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),BN=hn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),FN=hn([{name:"a_projected_pos",components:4,type:"Float32"}],4);hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const NN=hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),UN=hn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hA=hn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),jN=hn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);hn([{name:"triangle",components:3,type:"Uint16"}]),hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),hn([{type:"Float32",name:"offsetX"}]),hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var po=24;const Xs=128;function M1(s,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new et(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:f}=l;let y=0;for(;y<d.length&&d[y]<=s;)y++;y=Math.max(0,y-1);let x=y;for(;x<d.length&&d[x]<s+1;)x++;x=Math.min(d.length-1,x);const C=d[y],I=d[x];return l.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:I,interpolationType:f}:{kind:"camera",minZoom:C,maxZoom:I,minSize:l.evaluate(new et(C)),maxSize:l.evaluate(new et(I)),interpolationType:f}}}function Wy(s,{uSize:i,uSizeT:l},{lowerSize:d,upperSize:f}){return s.kind==="source"?d/Xs:s.kind==="composite"?er(d/Xs,f/Xs,l):i}function Nh(s,i){let l=0,d=0;if(s.kind==="constant")d=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:f,minZoom:y,maxZoom:x}=s,C=f?Oe($a.interpolationFactor(f,i,y,x),0,1):0;s.kind==="camera"?d=er(s.minSize,s.maxSize,C):l=C}return{uSizeT:l,uSize:d}}var $N=Object.freeze({__proto__:null,getSizeData:M1,evaluateSizeForFeature:Wy,evaluateSizeForZoom:Nh,SIZE_PACK_FACTOR:Xs});function VN(s,i,l){return s.sections.forEach(d=>{d.text=function(f,y,x){const C=y.layout.get("text-transform").evaluate(x,{});return C==="uppercase"?f=f.toLocaleUpperCase():C==="lowercase"&&(f=f.toLocaleLowerCase()),Ge.applyArabicShaping&&(f=Ge.applyArabicShaping(f)),f}(d.text,i,l)}),s}const wm={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42","\u2190":"\u2191","\u2192":"\u2193"};function HN(s){return s==="\uFE36"||s==="\uFE48"||s==="\uFE38"||s==="\uFE44"||s==="\uFE42"||s==="\uFE3E"||s==="\uFE3C"||s==="\uFE3A"||s==="\uFE18"||s==="\uFE40"||s==="\uFE10"||s==="\uFE13"||s==="\uFE14"||s==="\uFF40"||s==="\uFFE3"||s==="\uFE11"||s==="\uFE12"}function WN(s){return s==="\uFE35"||s==="\uFE47"||s==="\uFE37"||s==="\uFE43"||s==="\uFE41"||s==="\uFE3D"||s==="\uFE3B"||s==="\uFE39"||s==="\uFE17"||s==="\uFE3F"}var Em=Lr,pA=function(s,i,l,d,f){var y,x,C=8*f-d-1,I=(1<<C)-1,R=I>>1,V=-7,q=l?f-1:0,Z=l?-1:1,J=s[i+q];for(q+=Z,y=J&(1<<-V)-1,J>>=-V,V+=C;V>0;y=256*y+s[i+q],q+=Z,V-=8);for(x=y&(1<<-V)-1,y>>=-V,V+=d;V>0;x=256*x+s[i+q],q+=Z,V-=8);if(y===0)y=1-R;else{if(y===I)return x?NaN:1/0*(J?-1:1);x+=Math.pow(2,d),y-=R}return(J?-1:1)*x*Math.pow(2,y-d)},fA=function(s,i,l,d,f,y){var x,C,I,R=8*y-f-1,V=(1<<R)-1,q=V>>1,Z=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=d?0:y-1,Q=d?1:-1,ie=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(C=isNaN(i)?1:0,x=V):(x=Math.floor(Math.log(i)/Math.LN2),i*(I=Math.pow(2,-x))<1&&(x--,I*=2),(i+=x+q>=1?Z/I:Z*Math.pow(2,1-q))*I>=2&&(x++,I/=2),x+q>=V?(C=0,x=V):x+q>=1?(C=(i*I-1)*Math.pow(2,f),x+=q):(C=i*Math.pow(2,q-1)*Math.pow(2,f),x=0));f>=8;s[l+J]=255&C,J+=Q,C/=256,f-=8);for(x=x<<f|C,R+=f;R>0;s[l+J]=255&x,J+=Q,x/=256,R-=8);s[l+J-Q]|=128*ie};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Lr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Lr.Varint=0,Lr.Fixed64=1,Lr.Bytes=2,Lr.Fixed32=5;var I1=4294967296,mA=1/I1,gA=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Pl(s){return s.type===Lr.Bytes?s.readVarint()+s.pos:s.pos+1}function Uh(s,i,l){return l?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function vA(s,i,l){var d=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(d);for(var f=l.pos-1;f>=s;f--)l.buf[f+d]=l.buf[f]}function GN(s,i){for(var l=0;l<s.length;l++)i.writeVarint(s[l])}function qN(s,i){for(var l=0;l<s.length;l++)i.writeSVarint(s[l])}function ZN(s,i){for(var l=0;l<s.length;l++)i.writeFloat(s[l])}function XN(s,i){for(var l=0;l<s.length;l++)i.writeDouble(s[l])}function KN(s,i){for(var l=0;l<s.length;l++)i.writeBoolean(s[l])}function YN(s,i){for(var l=0;l<s.length;l++)i.writeFixed32(s[l])}function JN(s,i){for(var l=0;l<s.length;l++)i.writeSFixed32(s[l])}function QN(s,i){for(var l=0;l<s.length;l++)i.writeFixed64(s[l])}function e6(s,i){for(var l=0;l<s.length;l++)i.writeSFixed64(s[l])}function Gy(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function jh(s,i,l){s[l]=i,s[l+1]=i>>>8,s[l+2]=i>>>16,s[l+3]=i>>>24}function yA(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}function t6(s,i,l){i.glyphs=[],s===1&&l.readMessage(n6,i)}function n6(s,i,l){if(s===3){const{id:d,bitmap:f,width:y,height:x,left:C,top:I,advance:R}=l.readMessage(r6,{});i.glyphs.push({id:d,bitmap:new Il({width:y+6,height:x+6},f),metrics:{width:y,height:x,left:C,top:I,advance:R}})}else s===4?i.ascender=l.readSVarint():s===5&&(i.descender=l.readSVarint())}function r6(s,i,l){s===1?i.id=l.readVarint():s===2?i.bitmap=l.readBytes():s===3?i.width=l.readVarint():s===4?i.height=l.readVarint():s===5?i.left=l.readSVarint():s===6?i.top=l.readSVarint():s===7&&(i.advance=l.readVarint())}function P1(s){let i=0,l=0;for(const x of s)i+=x.w*x.h,l=Math.max(l,x.w);s.sort((x,C)=>C.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let f=0,y=0;for(const x of s)for(let C=d.length-1;C>=0;C--){const I=d[C];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,y=Math.max(y,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===I.w&&x.h===I.h){const R=d.pop();C<d.length&&(d[C]=R)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(d.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:f,h:y,fill:i/(f*y)||0}}Lr.prototype={destroy:function(){this.buf=null},readFields:function(s,i,l){for(l=l||this.length;this.pos<l;){var d=this.readVarint(),f=d>>3,y=this.pos;this.type=7&d,s(f,i,this),this.pos===y&&this.skip(d)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=Gy(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=yA(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Gy(this.buf,this.pos)+Gy(this.buf,this.pos+4)*I1;return this.pos+=8,s},readSFixed64:function(){var s=Gy(this.buf,this.pos)+yA(this.buf,this.pos+4)*I1;return this.pos+=8,s},readFloat:function(){var s=pA(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=pA(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,l,d=this.buf;return i=127&(l=d[this.pos++]),l<128?i:(i|=(127&(l=d[this.pos++]))<<7,l<128?i:(i|=(127&(l=d[this.pos++]))<<14,l<128?i:(i|=(127&(l=d[this.pos++]))<<21,l<128?i:function(f,y,x){var C,I,R=x.buf;if(C=(112&(I=R[x.pos++]))>>4,I<128||(C|=(127&(I=R[x.pos++]))<<3,I<128)||(C|=(127&(I=R[x.pos++]))<<10,I<128)||(C|=(127&(I=R[x.pos++]))<<17,I<128)||(C|=(127&(I=R[x.pos++]))<<24,I<128)||(C|=(1&(I=R[x.pos++]))<<31,I<128))return Uh(f,C,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=d[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&gA?function(l,d,f){return gA.decode(l.subarray(d,f))}(this.buf,i,s):function(l,d,f){for(var y="",x=d;x<f;){var C,I,R,V=l[x],q=null,Z=V>239?4:V>223?3:V>191?2:1;if(x+Z>f)break;Z===1?V<128&&(q=V):Z===2?(192&(C=l[x+1]))==128&&(q=(31&V)<<6|63&C)<=127&&(q=null):Z===3?(I=l[x+2],(192&(C=l[x+1]))==128&&(192&I)==128&&((q=(15&V)<<12|(63&C)<<6|63&I)<=2047||q>=55296&&q<=57343)&&(q=null)):Z===4&&(I=l[x+2],R=l[x+3],(192&(C=l[x+1]))==128&&(192&I)==128&&(192&R)==128&&((q=(15&V)<<18|(63&C)<<12|(63&I)<<6|63&R)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,Z=1):q>65535&&(q-=65536,y+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),y+=String.fromCharCode(q),x+=Z}return y}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==Lr.Bytes)return s.push(this.readVarint(i));var l=Pl(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSVarint());var i=Pl(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Lr.Bytes)return s.push(this.readBoolean());var i=Pl(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFloat());var i=Pl(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Lr.Bytes)return s.push(this.readDouble());var i=Pl(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFixed32());var i=Pl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSFixed32());var i=Pl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Lr.Bytes)return s.push(this.readFixed64());var i=Pl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Lr.Bytes)return s.push(this.readSFixed64());var i=Pl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===Lr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Lr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Lr.Fixed32)this.pos+=4;else{if(i!==Lr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),jh(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),jh(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),jh(this.buf,-1&s,this.pos),jh(this.buf,Math.floor(s*mA),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),jh(this.buf,-1&s,this.pos),jh(this.buf,Math.floor(s*mA),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,l){var d,f;if(i>=0?(d=i%4294967296|0,f=i/4294967296|0):(f=~(-i/4294967296),4294967295^(d=~(-i%4294967296))?d=d+1|0:(d=0,f=f+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(y,x,C){C.buf[C.pos++]=127&y|128,y>>>=7,C.buf[C.pos++]=127&y|128,y>>>=7,C.buf[C.pos++]=127&y|128,y>>>=7,C.buf[C.pos++]=127&y|128,C.buf[C.pos]=127&(y>>>=7)}(d,0,l),function(y,x){var C=(7&y)<<4;x.buf[x.pos++]|=C|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(f,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(d,f,y){for(var x,C,I=0;I<f.length;I++){if((x=f.charCodeAt(I))>55295&&x<57344){if(!C){x>56319||I+1===f.length?(d[y++]=239,d[y++]=191,d[y++]=189):C=x;continue}if(x<56320){d[y++]=239,d[y++]=191,d[y++]=189,C=x;continue}x=C-55296<<10|x-56320|65536,C=null}else C&&(d[y++]=239,d[y++]=191,d[y++]=189,C=null);x<128?d[y++]=x:(x<2048?d[y++]=x>>6|192:(x<65536?d[y++]=x>>12|224:(d[y++]=x>>18|240,d[y++]=x>>12&63|128),d[y++]=x>>6&63|128),d[y++]=63&x|128)}return y}(this.buf,s,this.pos);var l=this.pos-i;l>=128&&vA(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),fA(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),fA(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,i){this.pos++;var l=this.pos;s(i,this);var d=this.pos-l;d>=128&&vA(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeMessage:function(s,i,l){this.writeTag(s,Lr.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,GN,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,qN,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,KN,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,ZN,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,XN,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,YN,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,JN,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,QN,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,e6,i)},writeBytesField:function(s,i){this.writeTag(s,Lr.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,Lr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,Lr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,Lr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,Lr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,Lr.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,Lr.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,Lr.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,Lr.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,Lr.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,Boolean(i))}};class D1{constructor(i,{pixelRatio:l,version:d,stretchX:f,stretchY:y,content:x}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=f,this.stretchY=y,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class _A{constructor(i,l){const d={},f={};this.haveRenderCallbacks=[];const y=[];this.addImages(i,d,y),this.addImages(l,f,y);const{w:x,h:C}=P1(y),I=new aa({width:x||1,height:C||1});for(const R in i){const V=i[R],q=d[R].paddedRect;aa.copy(V.data,I,{x:0,y:0},{x:q.x+1,y:q.y+1},V.data)}for(const R in l){const V=l[R],q=f[R].paddedRect,Z=q.x+1,J=q.y+1,Q=V.data.width,ie=V.data.height;aa.copy(V.data,I,{x:0,y:0},{x:Z,y:J},V.data),aa.copy(V.data,I,{x:0,y:ie-1},{x:Z,y:J-1},{width:Q,height:1}),aa.copy(V.data,I,{x:0,y:0},{x:Z,y:J+ie},{width:Q,height:1}),aa.copy(V.data,I,{x:Q-1,y:0},{x:Z-1,y:J},{width:1,height:ie}),aa.copy(V.data,I,{x:0,y:0},{x:Z+Q,y:J},{width:1,height:ie})}this.image=I,this.iconPositions=d,this.patternPositions=f}addImages(i,l,d){for(const f in i){const y=i[f],x={x:0,y:0,w:y.data.width+2,h:y.data.height+2};d.push(x),l[f]=new D1(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(i,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(d=>i.hasImage(d)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in i.updatedImages)this.patchUpdatedImage(this.iconPositions[d],i.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],i.getImage(d),l)}patchUpdatedImage(i,l,d){if(!i||!l||i.version===l.version)return;i.version=l.version;const[f,y]=i.tl;d.update(l.data,void 0,{x:f,y})}}an(D1,"ImagePosition"),an(_A,"ImageAtlas");const Ca={horizontal:1,vertical:2,horizontalOnly:3};class Cm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,l){const d=new Cm;return d.scale=i||1,d.fontStack=l,d}static forImage(i){const l=new Cm;return l.imageName=i,l}}class $h{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const d=new $h;for(let f=0;f<i.sections.length;f++){const y=i.sections[f];y.image?d.addImageSection(y):d.addTextSection(y,l)}return d}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(l,d){let f="";for(let y=0;y<l.length;y++){const x=l.charCodeAt(y+1)||null,C=l.charCodeAt(y-1)||null;f+=!d&&(x&&G(x)&&!wm[l[y+1]]||C&&G(C)&&!wm[l[y-1]])||!wm[l[y]]?l[y]:wm[l[y]]}return f}(this.text,i)}trim(){let i=0;for(let d=0;d<this.text.length&&qy[this.text.charCodeAt(d)];d++)i++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=i&&qy[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const d=new $h;return d.text=this.text.substring(i,l),d.sectionIndex=this.sectionIndex.slice(i,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}addTextSection(i,l){this.text+=i.text,this.sections.push(Cm.forText(i.scale,i.fontStack||l));const d=this.sections.length-1;for(let f=0;f<i.text.length;++f)this.sectionIndex.push(d)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Xe("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Cm.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Xe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function R1(s,i,l,d,f,y,x,C,I,R,V,q,Z,J,Q){const ie=$h.fromFeature(s,f);q===Ca.vertical&&ie.verticalizePunctuation(Z);let de=[];const Ce=function(Ne,st,rt,Ct,Bt,mt){if(!Ne)return[];const Tt=[],It=function(Wt,bn,Yt,cn,Gt,En){let Gn=0;for(let Vn=0;Vn<Wt.length();Vn++){const jn=Wt.getSection(Vn);Gn+=xA(Wt.getCharCode(Vn),jn,cn,Gt,bn,En)}return Gn/Math.max(1,Math.ceil(Gn/Yt))}(Ne,st,rt,Ct,Bt,mt),Lt=Ne.text.indexOf("\u200B")>=0;let Ft=0;for(let Wt=0;Wt<Ne.length();Wt++){const bn=Ne.getSection(Wt),Yt=Ne.getCharCode(Wt);if(qy[Yt]||(Ft+=xA(Yt,bn,Ct,Bt,st,mt)),Wt<Ne.length()-1){const cn=!((gt=Yt)<11904||!(fy(gt)||kh(gt)||v(gt)||wy(gt)||vy(gt)||py(gt)||my(gt)||Wu(gt)||yy(gt)||em(gt)||gy(gt)||_(gt)||Sh(gt)||Jf(gt)||Yf(gt)||Qf(gt)||Ec(gt)||Gu(gt)||xy(gt)||_y(gt)));(i6[Yt]||cn||bn.imageName)&&Tt.push(wA(Wt+1,Ft,It,Tt,o6(Yt,Ne.getCharCode(Wt+1),cn&&Lt),!1))}}var gt;return EA(wA(Ne.length(),Ft,It,Tt,0,!0))}(ie,R,y,i,d,J),{processBidirectionalText:Fe,processStyledBidirectionalText:we}=Ge;if(Fe&&ie.sections.length===1){const Ne=Fe(ie.toString(),Ce);for(const st of Ne){const rt=new $h;rt.text=st,rt.sections=ie.sections;for(let Ct=0;Ct<st.length;Ct++)rt.sectionIndex.push(0);de.push(rt)}}else if(we){const Ne=we(ie.text,ie.sectionIndex,Ce);for(const st of Ne){const rt=new $h;rt.text=st[0],rt.sectionIndex=st[1],rt.sections=ie.sections,de.push(rt)}}else de=function(Ne,st){const rt=[],Ct=Ne.text;let Bt=0;for(const mt of st)rt.push(Ne.substring(Bt,mt)),Bt=mt;return Bt<Ct.length&&rt.push(Ne.substring(Bt,Ct.length)),rt}(ie,Ce);const ze=[],$e={positionedLines:ze,text:ie.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:q,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Ne,st,rt,Ct,Bt,mt,Tt,It,Lt,Ft,gt,Wt){let bn=0,Yt=0,cn=0;const Gt=It==="right"?1:It==="left"?0:.5;let En=!1;for(const Pn of Bt){const qn=Pn.getSections();for(const xr of qn){if(xr.imageName)continue;const $r=st[xr.fontStack];if($r&&(En=$r.ascender!==void 0&&$r.descender!==void 0,!En))break}if(!En)break}let Gn=0;for(const Pn of Bt){Pn.trim();const qn=Pn.getMaxScale(),xr=(qn-1)*po,$r={positionedGlyphs:[],lineOffset:0};Ne.positionedLines[Gn]=$r;const Or=$r.positionedGlyphs;let Vr=0;if(!Pn.length()){Yt+=mt,++Gn;continue}let qr=0,ci=0;for(let vr=0;vr<Pn.length();vr++){const Di=Pn.getSection(vr),Si=Pn.getSectionIndex(vr),ir=Pn.getCharCode(vr);let ni=Di.scale,Ni=null,br=null,mi=null,bo=po,Yi=0;const Ji=!(Lt===Ca.horizontal||!gt&&!U(ir)||gt&&(qy[ir]||(Vn=ir,Hu(Vn)||hy(Vn)||Kf(Vn)||Th(Vn)||p(Vn))));if(Di.imageName){const Bo=Ct[Di.imageName];if(!Bo)continue;mi=Di.imageName,Ne.iconsInText=Ne.iconsInText||!0,br=Bo.paddedRect;const Qi=Bo.displaySize;ni=ni*po/Wt,Ni={width:Qi[0],height:Qi[1],left:1,top:-3,advance:Ji?Qi[1]:Qi[0],localGlyph:!1},Yi=En?-Ni.height*ni:qn*po-17-Qi[1]*ni,bo=Ni.advance;const Rl=(Ji?Qi[0]:Qi[1])*ni-po*qn;Rl>0&&Rl>Vr&&(Vr=Rl)}else{const Bo=rt[Di.fontStack];if(!Bo)continue;Bo[ir]&&(br=Bo[ir]);const Qi=st[Di.fontStack];if(!Qi)continue;const Rl=Qi.glyphs[ir];if(!Rl)continue;if(Ni=Rl.metrics,bo=ir!==8203?po:0,En){const qh=Qi.ascender!==void 0?Math.abs(Qi.ascender):0,Dm=Qi.descender!==void 0?Math.abs(Qi.descender):0,Rm=(qh+Dm)*ni;qr<Rm&&(qr=Rm,ci=(qh-Dm)/2*ni),Yi=-qh*ni}else Yi=(qn-ni)*po-17}Ji?(Ne.verticalizable=!0,Or.push({glyph:ir,imageName:mi,x:bn,y:Yt+Yi,vertical:Ji,scale:ni,localGlyph:Ni.localGlyph,fontStack:Di.fontStack,sectionIndex:Si,metrics:Ni,rect:br}),bn+=bo*ni+Ft):(Or.push({glyph:ir,imageName:mi,x:bn,y:Yt+Yi,vertical:Ji,scale:ni,localGlyph:Ni.localGlyph,fontStack:Di.fontStack,sectionIndex:Si,metrics:Ni,rect:br}),bn+=Ni.advance*ni+Ft)}Or.length!==0&&(cn=Math.max(bn-Ft,cn),En?CA(Or,Gt,Vr,ci,mt*qn/2):CA(Or,Gt,Vr,0,mt/2)),bn=0;const Ki=mt*qn+Vr;$r.lineOffset=Math.max(Vr,xr),Yt+=Ki,++Gn}var Vn;const jn=Yt,{horizontalAlign:Sn,verticalAlign:gr}=L1(Tt);(function(Pn,qn,xr,$r,Or,Vr){const qr=(qn-xr)*Or,ci=-Vr*$r;for(const Ki of Pn)for(const vr of Ki.positionedGlyphs)vr.x+=qr,vr.y+=ci})(Ne.positionedLines,Gt,Sn,gr,cn,jn),Ne.top+=-gr*jn,Ne.bottom=Ne.top+jn,Ne.left+=-Sn*cn,Ne.right=Ne.left+cn,Ne.hasBaseline=En}($e,i,l,d,de,x,C,I,q,R,Z,Q),!function(Ne){for(const st of Ne)if(st.positionedGlyphs.length!==0)return!1;return!0}(ze)&&$e}const qy={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},i6={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function xA(s,i,l,d,f,y){if(i.imageName){const x=d[i.imageName];return x?x.displaySize[0]*i.scale*po/y+f:0}{const x=l[i.fontStack],C=x&&x.glyphs[s];return C?C.metrics.advance*i.scale+f:0}}function bA(s,i,l,d){const f=Math.pow(s-i,2);return d?s<i?f/2:2*f:f+Math.abs(l)*l}function o6(s,i,l){let d=0;return s===10&&(d-=1e4),l&&(d+=150),s!==40&&s!==65288||(d+=50),i!==41&&i!==65289||(d+=50),d}function wA(s,i,l,d,f,y){let x=null,C=bA(i,l,f,y);for(const I of d){const R=bA(i-I.x,l,f,y)+I.badness;R<=C&&(x=I,C=R)}return{index:s,x:i,priorBreak:x,badness:C}}function EA(s){return s?EA(s.priorBreak).concat(s.index):[]}function L1(s){let i=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function CA(s,i,l,d,f){if(!(i||l||d||f))return;const y=s.length-1,x=s[y],C=(x.x+x.metrics.advance*x.scale)*i;for(let I=0;I<=y;I++)s[I].x-=C,s[I].y+=l+d+f}function a6(s,i,l){const{horizontalAlign:d,verticalAlign:f}=L1(l),y=i[0]-s.displaySize[0]*d,x=i[1]-s.displaySize[1]*f;return{image:s,top:x,bottom:x+s.displaySize[1],left:y,right:y+s.displaySize[0]}}function SA(s,i,l,d,f,y){const x=s.image;let C;if(x.content){const de=x.content,Ce=x.pixelRatio||1;C=[de[0]/Ce,de[1]/Ce,x.displaySize[0]-de[2]/Ce,x.displaySize[1]-de[3]/Ce]}const I=i.left*y,R=i.right*y;let V,q,Z,J;l==="width"||l==="both"?(J=f[0]+I-d[3],q=f[0]+R+d[1]):(J=f[0]+(I+R-x.displaySize[0])/2,q=J+x.displaySize[0]);const Q=i.top*y,ie=i.bottom*y;return l==="height"||l==="both"?(V=f[1]+Q-d[0],Z=f[1]+ie+d[2]):(V=f[1]+(Q+ie-x.displaySize[1])/2,Z=V+x.displaySize[1]),{image:x,top:V,right:q,bottom:Z,left:J,collisionPadding:C}}class Dl extends S{constructor(i,l,d,f,y){super(i,l),this.angle=f,this.z=d,y!==void 0&&(this.segment=y)}clone(){return new Dl(this.x,this.y,this.z,this.angle,this.segment)}}function kA(s,i,l,d,f){if(i.segment===void 0)return!0;let y=i,x=i.segment+1,C=0;for(;C>-l/2;){if(x--,x<0)return!1;C-=s[x].dist(y),y=s[x]}C+=s[x].dist(s[x+1]),x++;const I=[];let R=0;for(;C<l/2;){const V=s[x],q=s[x+1];if(!q)return!1;let Z=s[x-1].angleTo(V)-V.angleTo(q);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:C,angleDelta:Z}),R+=Z;C-I[0].distance>d;)R-=I.shift().angleDelta;if(R>f)return!1;x++,C+=V.dist(q)}return!0}function TA(s){let i=0;for(let l=0;l<s.length-1;l++)i+=s[l].dist(s[l+1]);return i}function AA(s,i,l){return s?.6*i*l:0}function MA(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function s6(s,i,l,d,f,y){const x=AA(l,f,y),C=MA(l,d)*y;let I=0;const R=TA(s)/2;for(let V=0;V<s.length-1;V++){const q=s[V],Z=s[V+1],J=q.dist(Z);if(I+J>R){const Q=(R-I)/J,ie=er(q.x,Z.x,Q),de=er(q.y,Z.y,Q),Ce=new Dl(ie,de,0,Z.angleTo(q),V);return!x||kA(s,Ce,C,x,i)?Ce:void 0}I+=J}}function l6(s,i,l,d,f,y,x,C,I){const R=AA(d,y,x),V=MA(d,f),q=V*x,Z=s[0].x===0||s[0].x===I||s[0].y===0||s[0].y===I;return i-q<i/4&&(i=q+i/4),IA(s,Z?i/2*C%i:(V/2+2*y)*x*C%i,i,R,l,q,Z,!1,I)}function IA(s,i,l,d,f,y,x,C,I){const R=y/2,V=TA(s);let q=0,Z=i-l,J=[];for(let Q=0;Q<s.length-1;Q++){const ie=s[Q],de=s[Q+1],Ce=ie.dist(de),Fe=de.angleTo(ie);for(;Z+l<q+Ce;){Z+=l;const we=(Z-q)/Ce,ze=er(ie.x,de.x,we),$e=er(ie.y,de.y,we);if(ze>=0&&ze<I&&$e>=0&&$e<I&&Z-R>=0&&Z+R<=V){const Ne=new Dl(ze,$e,0,Fe,Q);Ne._round(),d&&!kA(s,Ne,y,d,f)||J.push(Ne)}}q+=Ce}return C||J.length||x||(J=IA(s,q/2,l,d,f,y,x,!0,I)),J}function PA(s,i,l,d,f){const y=[];for(let x=0;x<s.length;x++){const C=s[x];let I;for(let R=0;R<C.length-1;R++){let V=C[R],q=C[R+1];V.x<i&&q.x<i||(V.x<i?V=new S(i,V.y+(i-V.x)/(q.x-V.x)*(q.y-V.y))._round():q.x<i&&(q=new S(i,V.y+(i-V.x)/(q.x-V.x)*(q.y-V.y))._round()),V.y<l&&q.y<l||(V.y<l?V=new S(V.x+(l-V.y)/(q.y-V.y)*(q.x-V.x),l)._round():q.y<l&&(q=new S(V.x+(l-V.y)/(q.y-V.y)*(q.x-V.x),l)._round()),V.x>=d&&q.x>=d||(V.x>=d?V=new S(d,V.y+(d-V.x)/(q.x-V.x)*(q.y-V.y))._round():q.x>=d&&(q=new S(d,V.y+(d-V.x)/(q.x-V.x)*(q.y-V.y))._round()),V.y>=f&&q.y>=f||(V.y>=f?V=new S(V.x+(f-V.y)/(q.y-V.y)*(q.x-V.x),f)._round():q.y>=f&&(q=new S(V.x+(f-V.y)/(q.y-V.y)*(q.x-V.x),f)._round()),I&&V.equals(I[I.length-1])||(I=[V],y.push(I)),I.push(q)))))}}return y}an(Dl,"Anchor");const Sm=1e20;function DA(s,i,l,d,f,y,x,C,I){for(let R=i;R<i+d;R++)RA(s,l*y+R,y,f,x,C,I);for(let R=l;R<l+f;R++)RA(s,R*y+i,1,d,x,C,I)}function RA(s,i,l,d,f,y,x){y[0]=0,x[0]=-Sm,x[1]=Sm,f[0]=s[i];for(let C=1,I=0,R=0;C<d;C++){f[C]=s[i+C*l];const V=C*C;do{const q=y[I];R=(f[C]-f[q]+V-q*q)/(C-q)/2}while(R<=x[I]&&--I>-1);I++,y[I]=C,x[I]=R,x[I+1]=Sm}for(let C=0,I=0;C<d;C++){for(;x[I+1]<C;)I++;const R=y[I],V=C-R;s[i+C*l]=f[R]+V*V}}const O1={none:0,ideographs:1,all:2};class Vh{constructor(i,l,d){this.requestManager=i,this.localGlyphMode=l,this.localFontFamily=d,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,l){const d=[];for(const f in i)for(const y of i[f])d.push({stack:f,id:y});Ze(d,({stack:f,id:y},x)=>{let C=this.entries[f];C||(C=this.entries[f]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=C.glyphs[y];if(I!==void 0)return void x(null,{stack:f,id:y,glyph:I});if(I=this._tinySDF(C,f,y),I)return C.glyphs[y]=I,void x(null,{stack:f,id:y,glyph:I});const R=Math.floor(y/256);if(256*R>65535)return void x(new Error("glyphs > 65535 not supported"));if(C.ranges[R])return void x(null,{stack:f,id:y,glyph:I});let V=C.requests[R];V||(V=C.requests[R]=[],Vh.loadGlyphRange(f,R,this.url,this.requestManager,(q,Z)=>{if(Z){C.ascender=Z.ascender,C.descender=Z.descender;for(const J in Z.glyphs)this._doesCharSupportLocalGlyph(+J)||(C.glyphs[+J]=Z.glyphs[+J]);C.ranges[R]=!0}for(const J of V)J(q,Z);delete C.requests[R]})),V.push((q,Z)=>{q?x(q):Z&&x(null,{stack:f,id:y,glyph:Z.glyphs[y]||null})})},(f,y)=>{if(f)l(f);else if(y){const x={};for(const{stack:C,id:I,glyph:R}of y)x[C]===void 0&&(x[C]={}),x[C].glyphs===void 0&&(x[C].glyphs={}),x[C].glyphs[I]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics},x[C].ascender=this.entries[C].ascender,x[C].descender=this.entries[C].descender;l(null,x)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==O1.none&&(this.localGlyphMode===O1.all?!!this.localFontFamily:!!this.localFontFamily&&(em(i)||by(i)||Sh(i)||Ec(i)||Wu(i)))}_tinySDF(i,l,d){const f=this.localFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let y=i.tinySDF;if(!y){let ie="400";/bold/i.test(l)?ie="900":/medium/i.test(l)?ie="500":/light/i.test(l)&&(ie="200"),y=i.tinySDF=new Vh.TinySDF({fontFamily:f,fontWeight:ie,fontSize:48,buffer:6,radius:16}),y.fontWeight=ie}if(this.localGlyphs[y.fontWeight][d])return this.localGlyphs[y.fontWeight][d];const x=String.fromCharCode(d),{data:C,width:I,height:R,glyphWidth:V,glyphHeight:q,glyphLeft:Z,glyphTop:J,glyphAdvance:Q}=y.draw(x);return this.localGlyphs[y.fontWeight][d]={id:d,bitmap:new Il({width:I,height:R},C),metrics:{width:V/2,height:q/2,left:Z/2,top:J/2-27,advance:Q/2,localGlyph:!0}}}}function LA(s,i,l,d){const f=[],y=s.image,x=y.pixelRatio,C=y.paddedRect.w-2,I=y.paddedRect.h-2,R=s.right-s.left,V=s.bottom-s.top,q=y.stretchX||[[0,C]],Z=y.stretchY||[[0,I]],J=(mt,Tt)=>mt+Tt[1]-Tt[0],Q=q.reduce(J,0),ie=Z.reduce(J,0),de=C-Q,Ce=I-ie;let Fe=0,we=Q,ze=0,$e=ie,Ne=0,st=de,rt=0,Ct=Ce;if(y.content&&d){const mt=y.content;Fe=Zy(q,0,mt[0]),ze=Zy(Z,0,mt[1]),we=Zy(q,mt[0],mt[2]),$e=Zy(Z,mt[1],mt[3]),Ne=mt[0]-Fe,rt=mt[1]-ze,st=mt[2]-mt[0]-we,Ct=mt[3]-mt[1]-$e}const Bt=(mt,Tt,It,Lt)=>{const Ft=Xy(mt.stretch-Fe,we,R,s.left),gt=Ky(mt.fixed-Ne,st,mt.stretch,Q),Wt=Xy(Tt.stretch-ze,$e,V,s.top),bn=Ky(Tt.fixed-rt,Ct,Tt.stretch,ie),Yt=Xy(It.stretch-Fe,we,R,s.left),cn=Ky(It.fixed-Ne,st,It.stretch,Q),Gt=Xy(Lt.stretch-ze,$e,V,s.top),En=Ky(Lt.fixed-rt,Ct,Lt.stretch,ie),Gn=new S(Ft,Wt),Vn=new S(Yt,Wt),jn=new S(Yt,Gt),Sn=new S(Ft,Gt),gr=new S(gt/x,bn/x),Pn=new S(cn/x,En/x),qn=i*Math.PI/180;if(qn){const Or=Math.sin(qn),Vr=Math.cos(qn),qr=[Vr,-Or,Or,Vr];Gn._matMult(qr),Vn._matMult(qr),Sn._matMult(qr),jn._matMult(qr)}const xr=mt.stretch+mt.fixed,$r=Tt.stretch+Tt.fixed;return{tl:Gn,tr:Vn,bl:Sn,br:jn,tex:{x:y.paddedRect.x+1+xr,y:y.paddedRect.y+1+$r,w:It.stretch+It.fixed-xr,h:Lt.stretch+Lt.fixed-$r},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gr,pixelOffsetBR:Pn,minFontScaleX:st/x/R,minFontScaleY:Ct/x/V,isSDF:l}};if(d&&(y.stretchX||y.stretchY)){const mt=OA(q,de,Q),Tt=OA(Z,Ce,ie);for(let It=0;It<mt.length-1;It++){const Lt=mt[It],Ft=mt[It+1];for(let gt=0;gt<Tt.length-1;gt++)f.push(Bt(Lt,Tt[gt],Ft,Tt[gt+1]))}}else f.push(Bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:I+1}));return f}function Zy(s,i,l){let d=0;for(const f of s)d+=Math.max(i,Math.min(l,f[1]))-Math.max(i,Math.min(l,f[0]));return d}function OA(s,i,l){const d=[{fixed:-1,stretch:0}];for(const[f,y]of s){const x=d[d.length-1];d.push({fixed:f-x.stretch,stretch:x.stretch}),d.push({fixed:f-x.stretch,stretch:x.stretch+(y-f)})}return d.push({fixed:i+1,stretch:l}),d}function Xy(s,i,l,d){return s/i*l+d}function Ky(s,i,l,d){return s-i*l/d}function c6(s,i,l,d){const f=i+s.positionedLines[d].lineOffset;return d===0?l+f/2:l+(f+(i+s.positionedLines[d-1].lineOffset))/2}Vh.loadGlyphRange=function(s,i,l,d,f){const y=256*i,x=y+255,C=d.transformRequest(d.normalizeGlyphsURL(l).replace("{fontstack}",s).replace("{range}",`${y}-${x}`),yt.Glyphs);Tn(C,(I,R)=>{if(I)f(I);else if(R){const V={},q=function(Z){return new Em(Z).readFields(t6,{})}(R);for(const Z of q.glyphs)V[Z.id]=Z;f(null,{glyphs:V,ascender:q.ascender,descender:q.descender})}})},Vh.TinySDF=class{constructor({fontSize:s=24,buffer:i=3,radius:l=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=i,this.cutoff=d,this.radius=l;const C=this.size=s+4*i,I=this._createCanvas(C),R=this.ctx=I.getContext("2d",{willReadFrequently:!0});R.font=`${x} ${y} ${s}px ${f}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(s){const i=document.createElement("canvas");return i.width=i.height=s,i}draw(s){const{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(s),x=Math.ceil(l),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-f))),I=Math.min(this.size-this.buffer,x+Math.ceil(d)),R=C+2*this.buffer,V=I+2*this.buffer,q=Math.max(R*V,0),Z=new Uint8ClampedArray(q),J={data:Z,width:R,height:V,glyphWidth:C,glyphHeight:I,glyphTop:x,glyphLeft:0,glyphAdvance:i};if(C===0||I===0)return J;const{ctx:Q,buffer:ie,gridInner:de,gridOuter:Ce}=this;Q.clearRect(ie,ie,C,I),Q.fillText(s,ie,ie+x);const Fe=Q.getImageData(ie,ie,C,I);Ce.fill(Sm,0,q),de.fill(0,0,q);for(let we=0;we<I;we++)for(let ze=0;ze<C;ze++){const $e=Fe.data[4*(we*C+ze)+3]/255;if($e===0)continue;const Ne=(we+ie)*R+ze+ie;if($e===1)Ce[Ne]=0,de[Ne]=Sm;else{const st=.5-$e;Ce[Ne]=st>0?st*st:0,de[Ne]=st<0?st*st:0}}DA(Ce,0,0,R,V,R,this.f,this.v,this.z),DA(de,ie,ie,C,I,R,this.f,this.v,this.z);for(let we=0;we<q;we++){const ze=Math.sqrt(Ce[we])-Math.sqrt(de[we]);Z[we]=Math.round(255-255*(ze/this.radius+this.cutoff))}return J}};class u6{constructor(i=[],l=d6){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:d}=this,f=l[i];for(;i>0;){const y=i-1>>1,x=l[y];if(d(f,x)>=0)break;l[i]=x,i=y}l[i]=f}_down(i){const{data:l,compare:d}=this,f=this.length>>1,y=l[i];for(;i<f;){let x=1+(i<<1),C=l[x];const I=x+1;if(I<this.length&&d(l[I],C)<0&&(x=I,C=l[I]),d(C,y)>=0)break;l[i]=C,i=x}l[i]=y}}function d6(s,i){return s<i?-1:s>i?1:0}function h6(s,i=1,l=!1){let d=1/0,f=1/0,y=-1/0,x=-1/0;const C=s[0];for(let J=0;J<C.length;J++){const Q=C[J];(!J||Q.x<d)&&(d=Q.x),(!J||Q.y<f)&&(f=Q.y),(!J||Q.x>y)&&(y=Q.x),(!J||Q.y>x)&&(x=Q.y)}const I=Math.min(y-d,x-f);let R=I/2;const V=new u6([],p6);if(I===0)return new S(d,f);for(let J=d;J<y;J+=I)for(let Q=f;Q<x;Q+=I)V.push(new Hh(J+R,Q+R,R,s));let q=function(J){let Q=0,ie=0,de=0;const Ce=J[0];for(let Fe=0,we=Ce.length,ze=we-1;Fe<we;ze=Fe++){const $e=Ce[Fe],Ne=Ce[ze],st=$e.x*Ne.y-Ne.x*$e.y;ie+=($e.x+Ne.x)*st,de+=($e.y+Ne.y)*st,Q+=3*st}return new Hh(ie/Q,de/Q,0,J)}(s),Z=V.length;for(;V.length;){const J=V.pop();(J.d>q.d||!q.d)&&(q=J,l&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,Z)),J.max-q.d<=i||(R=J.h/2,V.push(new Hh(J.p.x-R,J.p.y-R,R,s)),V.push(new Hh(J.p.x+R,J.p.y-R,R,s)),V.push(new Hh(J.p.x-R,J.p.y+R,R,s)),V.push(new Hh(J.p.x+R,J.p.y+R,R,s)),Z+=4)}return l&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${q.d}`)),q.p}function p6(s,i){return i.max-s.max}class Hh{constructor(i,l,d,f){this.p=new S(i,l),this.h=d,this.d=function(y,x){let C=!1,I=1/0;for(let R=0;R<x.length;R++){const V=x[R];for(let q=0,Z=V.length,J=Z-1;q<Z;J=q++){const Q=V[q],ie=V[J];Q.y>y.y!=ie.y>y.y&&y.x<(ie.x-Q.x)*(y.y-Q.y)/(ie.y-Q.y)+Q.x&&(C=!C),I=Math.min(I,R2(y,Q,ie))}}return(C?1:-1)*Math.sqrt(I)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}}const z1=Number.POSITIVE_INFINITY,f6=Math.sqrt(2);function zA(s,[i,l]){let d=0,f=0;if(l===z1){i<0&&(i=0);const y=i/f6;switch(s){case"top-right":case"top-left":f=y-7;break;case"bottom-right":case"bottom-left":f=7-y;break;case"bottom":f=7-i;break;case"top":f=i-7}switch(s){case"top-right":case"bottom-right":d=-y;break;case"top-left":case"bottom-left":d=y;break;case"left":d=i;break;case"right":d=-i}}else{switch(i=Math.abs(i),l=Math.abs(l),s){case"top-right":case"top-left":case"top":f=l-7;break;case"bottom-right":case"bottom-left":case"bottom":f=7-l}switch(s){case"top-right":case"bottom-right":case"right":d=-i;break;case"top-left":case"bottom-left":case"left":d=i}}return[d,f]}function m6(s,i,l,d,f,y,x,C,I,R){s.createArrays(),s.tilePixelRatio=kn/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const V=s.layers[0].layout,q=s.layers[0]._unevaluatedLayout._values,Z={};if(s.textSizeData.kind==="composite"){const{minZoom:ie,maxZoom:de}=s.textSizeData;Z.compositeTextSizes=[q["text-size"].possiblyEvaluate(new et(ie),C),q["text-size"].possiblyEvaluate(new et(de),C)]}if(s.iconSizeData.kind==="composite"){const{minZoom:ie,maxZoom:de}=s.iconSizeData;Z.compositeIconSizes=[q["icon-size"].possiblyEvaluate(new et(ie),C),q["icon-size"].possiblyEvaluate(new et(de),C)]}Z.layoutTextSize=q["text-size"].possiblyEvaluate(new et(I+1),C),Z.layoutIconSize=q["icon-size"].possiblyEvaluate(new et(I+1),C),Z.textMaxSize=q["text-size"].possiblyEvaluate(new et(18),C);const J=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Q=V.get("text-size");for(const ie of s.features){const de=V.get("text-font").evaluate(ie,{},C).join(","),Ce=Q.evaluate(ie,{},C),Fe=Z.layoutTextSize.evaluate(ie,{},C),we=(Z.layoutIconSize.evaluate(ie,{},C),{horizontal:{},vertical:void 0}),ze=ie.text;let $e,Ne=[0,0];if(ze){const Ct=ze.toString(),Bt=V.get("text-letter-spacing").evaluate(ie,{},C)*po,mt=V.get("text-line-height").evaluate(ie,{},C)*po,Tt=k(Ct)?Bt:0,It=V.get("text-anchor").evaluate(ie,{},C),Lt=V.get("text-variable-anchor");if(!Lt){const Yt=V.get("text-radial-offset").evaluate(ie,{},C);Ne=Yt?zA(It,[Yt*po,z1]):V.get("text-offset").evaluate(ie,{},C).map(cn=>cn*po)}let Ft=J?"center":V.get("text-justify").evaluate(ie,{},C);const gt=V.get("symbol-placement")==="point",Wt=gt?V.get("text-max-width").evaluate(ie,{},C)*po:1/0,bn=Yt=>{s.allowVerticalPlacement&&E(Ct)&&(we.vertical=R1(ze,i,l,f,de,Wt,mt,It,Yt,Tt,Ne,Ca.vertical,!0,Fe,Ce))};if(!J&&Lt){const Yt=Ft==="auto"?Lt.map(Gt=>B1(Gt)):[Ft];let cn=!1;for(let Gt=0;Gt<Yt.length;Gt++){const En=Yt[Gt];if(!we.horizontal[En])if(cn)we.horizontal[En]=we.horizontal[0];else{const Gn=R1(ze,i,l,f,de,Wt,mt,"center",En,Tt,Ne,Ca.horizontal,!1,Fe,Ce);Gn&&(we.horizontal[En]=Gn,cn=Gn.positionedLines.length===1)}}bn("left")}else{if(Ft==="auto"&&(Ft=B1(It)),gt||V.get("text-writing-mode").indexOf("horizontal")>=0||!E(Ct)){const Yt=R1(ze,i,l,f,de,Wt,mt,It,Ft,Tt,Ne,Ca.horizontal,!1,Fe,Ce);Yt&&(we.horizontal[Ft]=Yt)}bn(gt?"left":Ft)}}let st=!1;if(ie.icon&&ie.icon.name){const Ct=d[ie.icon.name];Ct&&($e=a6(f[ie.icon.name],V.get("icon-offset").evaluate(ie,{},C),V.get("icon-anchor").evaluate(ie,{},C)),st=Ct.sdf,s.sdfIcons===void 0?s.sdfIcons=Ct.sdf:s.sdfIcons!==Ct.sdf&&Xe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ct.pixelRatio!==s.pixelRatio||V.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}const rt=FA(we.horizontal)||we.vertical;s.iconsInText||(s.iconsInText=!!rt&&rt.iconsInText),(rt||$e)&&g6(s,ie,we,$e,d,Z,Fe,0,Ne,st,x,C,R)}y&&s.generateCollisionDebugBuffers(I,s.collisionBoxArray)}function B1(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function g6(s,i,l,d,f,y,x,C,I,R,V,q,Z){let J=y.textMaxSize.evaluate(i,{},q);J===void 0&&(J=x);const Q=s.layers[0].layout,ie=Q.get("icon-offset").evaluate(i,{},q),de=FA(l.horizontal)||l.vertical,Ce=Z.name==="globe",Fe=x/24,we=s.tilePixelRatio*J/24,ze=(Tt=s.overscaling,s.zoom>18&&Tt>2&&(Tt>>=1),Math.max(kn/(512*Tt),1)*Q.get("symbol-spacing")),$e=Q.get("text-padding")*s.tilePixelRatio,Ne=Q.get("icon-padding")*s.tilePixelRatio,st=ne(Q.get("text-max-angle")),rt=Q.get("text-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Ct=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Bt=Q.get("symbol-placement"),mt=ze/2;var Tt;const It=Q.get("icon-text-fit");let Lt;d&&It!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(Lt=SA(d,l.vertical,It,Q.get("icon-text-fit-padding"),ie,Fe)),de&&(d=SA(d,de,It,Q.get("icon-text-fit-padding"),ie,Fe)));const Ft=(gt,Wt,bn)=>{if(Wt.x<0||Wt.x>=kn||Wt.y<0||Wt.y>=kn)return;let Yt=null;if(Ce){const{x:cn,y:Gt,z:En}=Z.projectTilePoint(Wt.x,Wt.y,bn);Yt={anchor:new Dl(cn,Gt,En,0,void 0),up:Z.upVector(bn,Wt.x,Wt.y)}}(function(cn,Gt,En,Gn,Vn,jn,Sn,gr,Pn,qn,xr,$r,Or,Vr,qr,ci,Ki,vr,Di,Si,ir,ni,Ni,br,mi){const bo=cn.addToLineVertexArray(Gt,Gn);let Yi,Ji,Bo,Qi,Rl,qh,Dm,Rm=0,pM=0,fM=0,mM=0,X1=-1,K1=-1;const Qs={};let gM=qu("");const od=En?En.anchor:Gt;let Y1=0,J1=0;if(Pn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Y1,J1]=Pn.layout.get("text-offset").evaluate(ir,{},mi).map(sa=>sa*po):(Y1=Pn.layout.get("text-radial-offset").evaluate(ir,{},mi)*po,J1=z1),cn.allowVerticalPlacement&&Vn.vertical){const sa=Vn.vertical;if(qr)qh=F1(sa),gr&&(Dm=F1(gr));else{const la=Pn.layout.get("text-rotate").evaluate(ir,{},mi)+90;Bo=Yy(qn,od,Gt,xr,$r,Or,sa,Vr,la,ci),gr&&(Qi=Yy(qn,od,Gt,xr,$r,Or,gr,vr,la))}}if(jn){const sa=Pn.layout.get("icon-rotate").evaluate(ir,{},mi),la=Pn.layout.get("icon-text-fit")!=="none",Lm=LA(jn,sa,Ni,la),ew=gr?LA(gr,sa,Ni,la):void 0;Ji=Yy(qn,od,Gt,xr,$r,Or,jn,vr,sa),Rm=4*Lm.length;const vM=cn.iconSizeData;let ad=null;vM.kind==="source"?(ad=[Xs*Pn.layout.get("icon-size").evaluate(ir,{},mi)],ad[0]>Mc&&Xe(`${cn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):vM.kind==="composite"&&(ad=[Xs*ni.compositeIconSizes[0].evaluate(ir,{},mi),Xs*ni.compositeIconSizes[1].evaluate(ir,{},mi)],(ad[0]>Mc||ad[1]>Mc)&&Xe(`${cn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),cn.addSymbols(cn.icon,Lm,ad,Si,Di,ir,!1,En,Gt,bo.lineStartIndex,bo.lineLength,-1,br,mi),X1=cn.icon.placedSymbolArray.length-1,ew&&(pM=4*ew.length,cn.addSymbols(cn.icon,ew,ad,Si,Di,ir,Ca.vertical,En,Gt,bo.lineStartIndex,bo.lineLength,-1,br,mi),K1=cn.icon.placedSymbolArray.length-1)}for(const sa in Vn.horizontal){const la=Vn.horizontal[sa];Yi||(gM=qu(la.text),qr?Rl=F1(la):Yi=Yy(qn,od,Gt,xr,$r,Or,la,Vr,Pn.layout.get("text-rotate").evaluate(ir,{},mi),ci));const Lm=la.positionedLines.length===1;if(fM+=BA(cn,En,Gt,la,Sn,Pn,qr,ir,ci,bo,Vn.vertical?Ca.horizontal:Ca.horizontalOnly,Lm?Object.keys(Vn.horizontal):[sa],Qs,X1,ni,br,mi),Lm)break}Vn.vertical&&(mM+=BA(cn,En,Gt,Vn.vertical,Sn,Pn,qr,ir,ci,bo,Ca.vertical,["vertical"],Qs,K1,ni,br,mi));let Oc=-1;const Q1=(sa,la)=>sa?Math.max(sa,la):la;Oc=Q1(Rl,Oc),Oc=Q1(qh,Oc),Oc=Q1(Dm,Oc);const H6=Oc>-1?1:0;cn.glyphOffsetArray.length>=Pc.MAX_GLYPHS&&Xe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ir.sortKey!==void 0&&cn.addToSortKeyRanges(cn.symbolInstances.length,ir.sortKey),cn.symbolInstances.emplaceBack(od.x,od.y,od.z,Gt.x,Gt.y,Qs.right>=0?Qs.right:-1,Qs.center>=0?Qs.center:-1,Qs.left>=0?Qs.left:-1,Qs.vertical>=0?Qs.vertical:-1,X1,K1,gM,Yi!==void 0?Yi:cn.collisionBoxArray.length,Yi!==void 0?Yi+1:cn.collisionBoxArray.length,Bo!==void 0?Bo:cn.collisionBoxArray.length,Bo!==void 0?Bo+1:cn.collisionBoxArray.length,Ji!==void 0?Ji:cn.collisionBoxArray.length,Ji!==void 0?Ji+1:cn.collisionBoxArray.length,Qi||cn.collisionBoxArray.length,Qi?Qi+1:cn.collisionBoxArray.length,xr,fM,mM,Rm,pM,H6,0,Y1,J1,Oc)})(s,Wt,Yt,gt,l,d,f,Lt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,$e,rt,I,0,Ne,Ct,ie,i,y,R,V,q)};if(Bt==="line")for(const gt of PA(i.geometry,0,0,kn,kn)){const Wt=l6(gt,ze,st,l.vertical||de,d,24,we,s.overscaling,kn);for(const bn of Wt){const Yt=de;Yt&&v6(s,Yt.text,mt,bn)||Ft(gt,bn,q)}}else if(Bt==="line-center"){for(const gt of i.geometry)if(gt.length>1){const Wt=s6(gt,st,l.vertical||de,d,24,we);Wt&&Ft(gt,Wt,q)}}else if(i.type==="Polygon")for(const gt of S1(i.geometry,0)){const Wt=h6(gt,16);Ft(gt[0],new Dl(Wt.x,Wt.y,0,0,void 0),q)}else if(i.type==="LineString")for(const gt of i.geometry)Ft(gt,new Dl(gt[0].x,gt[0].y,0,0,void 0),q);else if(i.type==="Point")for(const gt of i.geometry)for(const Wt of gt)Ft([Wt],new Dl(Wt.x,Wt.y,0,0,void 0),q)}const Mc=32640;function BA(s,i,l,d,f,y,x,C,I,R,V,q,Z,J,Q,ie,de){const Ce=function(ze,$e,Ne,st,rt,Ct,Bt,mt){const Tt=[];if($e.positionedLines.length===0)return Tt;const It=st.layout.get("text-rotate").evaluate(Ct,{})*Math.PI/180,Lt=function(Yt){const cn=Yt[0],Gt=Yt[1],En=cn*Gt;return En>0?[cn,-Gt]:En<0?[-cn,Gt]:cn===0?[Gt,cn]:[Gt,-cn]}(Ne);let Ft=Math.abs($e.top-$e.bottom);for(const Yt of $e.positionedLines)Ft-=Yt.lineOffset;const gt=$e.positionedLines.length,Wt=Ft/gt;let bn=$e.top-Ne[1];for(let Yt=0;Yt<gt;++Yt){const cn=$e.positionedLines[Yt];bn=c6($e,Wt,bn,Yt);for(const Gt of cn.positionedGlyphs){if(!Gt.rect)continue;const En=Gt.rect||{};let Gn=4,Vn=!0,jn=1,Sn=0;if(Gt.imageName){const br=Bt[Gt.imageName];if(!br)continue;if(br.sdf){Xe("SDF images are not supported in formatted text and will be ignored.");continue}Vn=!1,jn=br.pixelRatio,Gn=1/jn}const gr=(rt||mt)&&Gt.vertical,Pn=Gt.metrics.advance*Gt.scale/2,qn=Gt.metrics,xr=Gt.rect;if(xr===null)continue;mt&&$e.verticalizable&&(Sn=Gt.imageName?Pn-Gt.metrics.width*Gt.scale/2:0);const $r=rt?[Gt.x+Pn,Gt.y]:[0,0];let Or=[0,0],Vr=[0,0],qr=!1;rt||(gr?(Vr=[Gt.x+Pn+Lt[0],Gt.y+Lt[1]-Sn],qr=!0):Or=[Gt.x+Pn+Ne[0],Gt.y+Ne[1]-Sn]);const ci=xr.w*Gt.scale/(jn*(Gt.localGlyph?2:1)),Ki=xr.h*Gt.scale/(jn*(Gt.localGlyph?2:1));let vr,Di,Si,ir;if(gr){const br=Gt.y-bn,mi=new S(-Pn,Pn-br),bo=-Math.PI/2,Yi=new S(...Vr);vr=new S(-Pn+Or[0],Or[1]),vr._rotateAround(bo,mi)._add(Yi),vr.x+=-br+Pn,vr.y-=(qn.left-Gn)*Gt.scale;const Ji=Gt.imageName?qn.advance*Gt.scale:po*Gt.scale,Bo=String.fromCharCode(Gt.glyph);HN(Bo)?vr.x+=(1-Gn)*Gt.scale:WN(Bo)?vr.x+=Ji-qn.height*Gt.scale+(-Gn-1)*Gt.scale:vr.x+=Gt.imageName||qn.width+2*Gn===xr.w&&qn.height+2*Gn===xr.h?(Ji-Ki)/2:(Ji-(qn.height+2*Gn)*Gt.scale)/2,Di=new S(vr.x,vr.y-ci),Si=new S(vr.x+Ki,vr.y),ir=new S(vr.x+Ki,vr.y-ci)}else{const br=(qn.left-Gn)*Gt.scale-Pn+Or[0],mi=(-qn.top-Gn)*Gt.scale+Or[1],bo=br+ci,Yi=mi+Ki;vr=new S(br,mi),Di=new S(bo,mi),Si=new S(br,Yi),ir=new S(bo,Yi)}if(It){let br;br=rt?new S(0,0):qr?new S(Lt[0],Lt[1]):new S(Ne[0],Ne[1]),vr._rotateAround(It,br),Di._rotateAround(It,br),Si._rotateAround(It,br),ir._rotateAround(It,br)}const ni=new S(0,0),Ni=new S(0,0);Tt.push({tl:vr,tr:Di,bl:Si,br:ir,tex:En,writingMode:$e.writingMode,glyphOffset:$r,sectionIndex:Gt.sectionIndex,isSDF:Vn,pixelOffsetTL:ni,pixelOffsetBR:Ni,minFontScaleX:0,minFontScaleY:0})}}return Tt}(0,d,I,y,x,C,f,s.allowVerticalPlacement),Fe=s.textSizeData;let we=null;Fe.kind==="source"?(we=[Xs*y.layout.get("text-size").evaluate(C,{},de)],we[0]>Mc&&Xe(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Fe.kind==="composite"&&(we=[Xs*Q.compositeTextSizes[0].evaluate(C,{},de),Xs*Q.compositeTextSizes[1].evaluate(C,{},de)],(we[0]>Mc||we[1]>Mc)&&Xe(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,Ce,we,I,x,C,V,i,l,R.lineStartIndex,R.lineLength,J,ie,de);for(const ze of q)Z[ze]=s.text.placedSymbolArray.length-1;return 4*Ce.length}function FA(s){for(const i in s)return s[i];return null}function Yy(s,i,l,d,f,y,x,C,I,R){let V=x.top,q=x.bottom,Z=x.left,J=x.right;const Q=x.collisionPadding;if(Q&&(Z-=Q[0],V-=Q[1],J+=Q[2],q+=Q[3]),I){const ie=new S(Z,V),de=new S(J,V),Ce=new S(Z,q),Fe=new S(J,q),we=ne(I);let ze=new S(0,0);R&&(ze=new S(R[0],R[1])),ie._rotateAround(we,ze),de._rotateAround(we,ze),Ce._rotateAround(we,ze),Fe._rotateAround(we,ze),Z=Math.min(ie.x,de.x,Ce.x,Fe.x),J=Math.max(ie.x,de.x,Ce.x,Fe.x),V=Math.min(ie.y,de.y,Ce.y,Fe.y),q=Math.max(ie.y,de.y,Ce.y,Fe.y)}return s.emplaceBack(i.x,i.y,i.z,l.x,l.y,Z,V,J,q,C,d,f,y),s.length-1}function F1(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const i=s.bottom-s.top;return i>0?Math.max(10,i):null}function v6(s,i,l,d){const f=s.compareText;if(i in f){const y=f[i];for(let x=y.length-1;x>=0;x--)if(d.dist(y[x])<l)return!0}else f[i]=[];return f[i].push(d),!1}function NA(s,i){const l=s.fovAboveCenter,d=s.elevation?s.elevation.getMinElevationBelowMSL()*i:0,f=(s._camera.position[2]*s.worldSize-d)/Math.cos(s._pitch),y=Math.sin(l)*f/Math.sin(Math.max(Math.PI/2-s._pitch-l,.01)),x=Math.sin(s._pitch)*y+f;return Math.min(1.01*x,f*(1/s._horizonShift))}function rd(s,i){if(!i.isReprojectedInTileSpace)return{scale:1<<s.z,x:s.x,y:s.y,x2:s.x+1,y2:s.y+1,projection:i};const l=Math.pow(2,-s.z),d=s.x*l,f=(s.x+1)*l,y=s.y*l,x=(s.y+1)*l,C=Ea(d),I=Ea(f),R=uo(y),V=uo(x),q=i.project(C,R),Z=i.project(I,R),J=i.project(I,V),Q=i.project(C,V);let ie=Math.min(q.x,Z.x,J.x,Q.x),de=Math.min(q.y,Z.y,J.y,Q.y),Ce=Math.max(q.x,Z.x,J.x,Q.x),Fe=Math.max(q.y,Z.y,J.y,Q.y);const we=l/16;function ze(Ne,st,rt,Ct,Bt,mt){const Tt=(rt+Bt)/2,It=(Ct+mt)/2,Lt=i.project(Ea(Tt),uo(It)),Ft=Math.max(0,ie-Lt.x,de-Lt.y,Lt.x-Ce,Lt.y-Fe);ie=Math.min(ie,Lt.x),Ce=Math.max(Ce,Lt.x),de=Math.min(de,Lt.y),Fe=Math.max(Fe,Lt.y),Ft>we&&(ze(Ne,Lt,rt,Ct,Tt,It),ze(Lt,st,Tt,It,Bt,mt))}ze(q,Z,d,y,f,y),ze(Z,J,f,y,f,x),ze(J,Q,f,x,d,x),ze(Q,q,d,x,d,y),ie-=we,de-=we,Ce+=we,Fe+=we;const $e=1/Math.max(Ce-ie,Fe-de);return{scale:$e,x:ie*$e,y:de*$e,x2:Ce*$e,y2:Fe*$e,projection:i}}const y6=ws(new Float32Array(16));class Ic{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,l){return{x:0,y:0,z:0}}unproject(i,l){return new nr(0,0)}projectTilePoint(i,l,d){return{x:i,y:l,z:0}}locationPoint(i,l,d=!0){return i._coordinatePoint(i.locationCoordinate(l),d)}pixelsPerMeter(i,l){return Cs(1,i)*l}pixelSpaceConversion(i,l,d){return 1}farthestPixelDistance(i){return NA(i,i.pixelsPerMeter)}pointCoordinate(i,l,d,f){const y=i.horizonLineFromTop(!1),x=new S(l,Math.max(y,d));return i.rayIntersectionCoordinate(i.pointRayIntersection(x,f))}pointCoordinate3D(i,l,d){const f=new S(l,d);if(i.elevation)return i.elevation.pointCoordinate(f);{const y=this.pointCoordinate(i,f.x,f.y,0);return[y.x,y.y,y.z]}}isPointAboveHorizon(i,l){if(i.elevation)return!this.pointCoordinate3D(i,l.x,l.y);const d=i.horizonLineFromTop();return l.y<d}createInversionMatrix(i,l){return y6}createTileMatrix(i,l,d){let f,y,x;const C=d.canonical,I=ws(new Float64Array(16));if(this.isReprojectedInTileSpace){const R=rd(C,this);f=1,y=R.x+d.wrap*R.scale,x=R.y,Ku(I,I,[f/R.scale,f/R.scale,i.pixelsPerMeter/l])}else f=l/i.zoomScale(C.z),y=(C.x+Math.pow(2,C.z)*d.wrap)*f,x=C.y*f;return nm(I,I,[y,x,0]),Ku(I,I,[f/kn,f/kn,1]),I}upVector(i,l,d){return[0,0,1]}upVectorScale(i,l,d){return{metersToTile:1}}}class _6 extends Ic{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[l,d]=this.parallels=i.parallels||[29.5,45.5],f=Math.sin(ne(l));this.n=(f+Math.sin(ne(d)))/2,this.c=1+f*(2*this.n-f),this.r0=Math.sqrt(this.c)/this.n}project(i,l){const{n:d,c:f,r0:y}=this,x=ne(i-this.center[0]),C=ne(l),I=Math.sqrt(f-2*d*Math.sin(C))/d;return{x:I*Math.sin(x*d),y:I*Math.cos(x*d)-y,z:0}}unproject(i,l){const{n:d,c:f,r0:y}=this,x=y+l;let C=Math.atan2(i,Math.abs(x))*Math.sign(x);x*d<0&&(C-=Math.PI*Math.sign(i)*Math.sign(x));const I=ne(this.center[0])*d;C=pt(C,-Math.PI-I,Math.PI-I);const R=Oe(ae(C/d)+this.center[0],-180,180),V=Math.asin(Oe((f-(i*i+x*x)*d*d)/(2*d),-1,1)),q=Oe(ae(V),-ho,ho);return new nr(R,q)}}const km=1.340264,Tm=-.081106,Am=893e-6,Mm=.003796,Jy=Math.sqrt(3)/2;class x6 extends Ic{project(i,l){l=l/180*Math.PI,i=i/180*Math.PI;const d=Math.asin(Jy*Math.sin(l)),f=d*d,y=f*f*f;return{x:.5*(i*Math.cos(d)/(Jy*(km+3*Tm*f+y*(7*Am+9*Mm*f)))/Math.PI+.5),y:1-.5*(d*(km+Tm*f+y*(Am+Mm*f))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,f=d*d,y=f*f*f;for(let V,q,Z,J=0;J<12&&(q=d*(km+Tm*f+y*(Am+Mm*f))-l,Z=km+3*Tm*f+y*(7*Am+9*Mm*f),V=q/Z,d=Oe(d-V,-Math.PI/3,Math.PI/3),f=d*d,y=f*f*f,!(Math.abs(V)<1e-12));++J);const x=Jy*i*(km+3*Tm*f+y*(7*Am+9*Mm*f))/Math.cos(d),C=Math.asin(Math.sin(d)/Jy),I=Oe(180*x/Math.PI,-180,180),R=Oe(180*C/Math.PI,-ho,ho);return new nr(I,R)}}class b6 extends Ic{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){return{x:.5+i/360,y:.5-l/360,z:0}}unproject(i,l){const d=360*(i-.5),f=Oe(360*(.5-l),-ho,ho);return new nr(d,f)}}const Wh=Math.PI/2;function Qy(s){return Math.tan((Wh+s)/2)}class w6 extends Ic{constructor(i){super(i),this.center=i.center||[0,30];const[l,d]=this.parallels=i.parallels||[30,30];let f=ne(l),y=ne(d);this.southernCenter=f+y<0,this.southernCenter&&(f=-f,y=-y);const x=Math.cos(f),C=Qy(f);this.n=f===y?Math.sin(f):Math.log(x/Math.cos(y))/Math.log(Qy(y)/C),this.f=x*Math.pow(Qy(f),this.n)/this.n}project(i,l){l=ne(l),this.southernCenter&&(l=-l),i=ne(i-this.center[0]);const d=1e-6,{n:f,f:y}=this;y>0?l<-Wh+d&&(l=-Wh+d):l>Wh-d&&(l=Wh-d);const x=y/Math.pow(Qy(l),f);let C=x*Math.sin(f*i),I=y-x*Math.cos(f*i);return C=.5*(C/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:C,y:this.southernCenter?I:1-I,z:0}}unproject(i,l){i=(2*i-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:d,f}=this,y=f-l,x=Math.sign(y),C=Math.sign(d)*Math.sqrt(i*i+y*y);let I=Math.atan2(i,Math.abs(y))*x;y*d<0&&(I-=Math.PI*Math.sign(i)*x);const R=Oe(ae(I/d)+this.center[0],-180,180),V=Oe(ae(2*Math.atan(Math.pow(f/C,1/d))-Wh),-ho,ho);return new nr(R,this.southernCenter?-V:V)}}class UA extends Ic{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,l){return{x:qs(i),y:Zs(l),z:0}}unproject(i,l){const d=Ea(i),f=uo(l);return new nr(d,f)}}const jA=ne(ho);class E6 extends Ic{project(i,l){const d=(l=ne(l))*l,f=d*d;return{x:.5*((i=ne(i))*(.8707-.131979*d+f*(f*(.003971*d-.001529*f)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+d*(.015085+f*(.028874*d-.044475-.005916*f)))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,f=25,y=0,x=d*d;do{x=d*d;const R=x*x;y=(d*(1.007226+x*(.015085+R*(.028874*x-.044475-.005916*R)))-l)/(1.007226+x*(.045255+R*(.259866*x-.311325-.005916*11*R))),d=Oe(d-y,-jA,jA)}while(Math.abs(y)>1e-6&&--f>0);x=d*d;const C=Oe(ae(i/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),I=ae(d);return new nr(C,I)}}const $A=ne(ho);class C6 extends Ic{project(i,l){l=ne(l),i=ne(i);const d=Math.cos(l),f=2/Math.PI,y=Math.acos(d*Math.cos(i/2)),x=Math.sin(y)/y,C=.5*(i*f+2*d*Math.sin(i/2)/x)||0,I=.5*(l+Math.sin(l)/x)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(i,l){let d=i=(2*i-.5)*Math.PI,f=l=(2*(1-l)-1)*Math.PI,y=25;const x=1e-6;let C=0,I=0;do{const R=Math.cos(f),V=Math.sin(f),q=2*V*R,Z=V*V,J=R*R,Q=Math.cos(d/2),ie=Math.sin(d/2),de=2*Q*ie,Ce=ie*ie,Fe=1-J*Q*Q,we=Fe?1/Fe:0,ze=Fe?Math.acos(R*Q)*Math.sqrt(1/Fe):0,$e=.5*(2*ze*R*ie+2*d/Math.PI)-i,Ne=.5*(ze*V+f)-l,st=.5*we*(J*Ce+ze*R*Q*Z)+1/Math.PI,rt=we*(de*q/4-ze*V*ie),Ct=.125*we*(q*ie-ze*V*J*de),Bt=.5*we*(Z*Q+ze*Ce*R)+.5,mt=rt*Ct-Bt*st;C=(Ne*rt-$e*Bt)/mt,I=($e*Ct-Ne*st)/mt,d=Oe(d-C,-Math.PI,Math.PI),f=Oe(f-I,-$A,$A)}while((Math.abs(C)>x||Math.abs(I)>x)&&--y>0);return new nr(ae(d),ae(f))}}class VA extends Ic{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(ne(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){const{scale:d,cosPhi:f}=this;return{x:ne(i)*f*d+.5,y:-Math.sin(ne(l))/f*d+.5,z:0}}unproject(i,l){const{scale:d,cosPhi:f}=this,y=-(l-.5)/d,x=Oe(ae((i-.5)/d)/f,-180,180),C=Math.asin(Oe(y*f,-1,1)),I=Oe(ae(C),-ho,ho);return new nr(x,I)}}class S6 extends UA{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,l,d){const f=um(i,l,d);return fi(f,f,dm(Gs(d))),{x:f[0],y:f[1],z:f[2]}}locationPoint(i,l){const d=Ph(l.lat,l.lng),f=Lo([],d),y=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(l),i._centerAltitude):i._centerAltitude;am(d,d,f,Cs(1,0)*kn*y);const x=ws(new Float64Array(16));return Xu(x,i.pixelMatrix,i.globeMatrix),fi(d,d,x),new S(d[0],d[1])}pixelsPerMeter(i,l){return Cs(1,0)*l}pixelSpaceConversion(i,l,d){const f=Cs(1,i)*l,y=er(Cs(1,45)*l,f,d);return this.pixelsPerMeter(i,l)/y}createTileMatrix(i,l,d){const f=d1(Gs(d.canonical));return Xu(new Float64Array(16),i.globeMatrix,f)}createInversionMatrix(i,l){const{center:d}=i,f=dm(Gs(l));return Ay(f,f,ne(d.lng)),n1(f,f,ne(d.lat)),Ku(f,f,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(f)}pointCoordinate(i,l,d,f){return _2(i,l,d,!0)||new Rh(0,0)}pointCoordinate3D(i,l,d){const f=this.pointCoordinate(i,l,d,0);return[f.x,f.y,f.z]}isPointAboveHorizon(i,l){return!_2(i,l.x,l.y,!1)}farthestPixelDistance(i){const l=function(f,y){const x=f.cameraToCenterDistance,C=f._centerAltitude*y,I=f._camera,R=f._camera.forward(),V=Al([],wa([],R,-x),[0,0,C]),q=f.worldSize/(2*Math.PI),Z=[0,0,-q],J=f.width/f.height,Q=Math.tan(f.fovAboveCenter),ie=wa([],I.up(),Q),de=wa([],I.right(),Q*J),Ce=Lo([],Al([],Al([],R,ie),de)),Fe=[];let we;if(new a1(V,Ce).closestPointOnSphere(Z,q,Fe)){const ze=Al([],Fe,Z),$e=Es([],ze,V);we=Math.cos(f.fovAboveCenter)*rm($e)}else{const ze=Es([],V,Z),$e=Es([],Z,V);Lo($e,$e);const Ne=rm(ze)-q;we=Math.sqrt(Ne*(Ne+2*q));const st=Math.acos(we/(q+Ne))-Math.acos(Ha(R,$e));we*=Math.cos(st)}return 1.01*we}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),d=Dh(i.zoom);if(d>0){const f=NA(i,Cs(1,i.center.lat)*i.worldSize),y=i.worldSize/(2*Math.PI),x=Math.max(i.width,i.height)/i.worldSize*Math.PI;return er(l,f+y*(1-Math.cos(x)),Math.pow(d,10))}return l}upVector(i,l,d){return um(l,d,i,1)}upVectorScale(i){return{metersToTile:My(Py(Gs(i)))}}}function HA(s){const i=s.parallels,l=!!i&&Math.abs(i[0]+i[1])<.01;switch(s.name){case"mercator":return new UA(s);case"equirectangular":return new b6(s);case"naturalEarth":return new E6(s);case"equalEarth":return new x6(s);case"winkelTripel":return new C6(s);case"albers":return l?new VA(s):new _6(s);case"lambertConformalConic":return l?new VA(s):new w6(s);case"globe":return new S6(s)}throw new Error(`Invalid projection name: ${s.name}`)}const k6=jy.types,T6=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function e_(s,i,l,d,f,y,x,C,I,R,V,q,Z){const J=C?Math.min(Mc,Math.round(C[0])):0,Q=C?Math.min(Mc,Math.round(C[1])):0;s.emplaceBack(i,l,Math.round(32*d),Math.round(32*f),y,x,(J<<1)+(I?1:0),Q,16*R,16*V,256*q,256*Z)}function t_(s,i,l,d,f,y,x){s.emplaceBack(i,l,d,f,y,x)}function n_(s,i,l,d,f){s.emplaceBack(i,l,d,f),s.emplaceBack(i,l,d,f),s.emplaceBack(i,l,d,f),s.emplaceBack(i,l,d,f)}function A6(s){for(const i of s.sections)if(ee(i.text))return!0;return!1}class N1{constructor(i){this.layoutVertexArray=new ys,this.indexArray=new co,this.programConfigurations=i,this.segments=new Ei,this.dynamicLayoutVertexArray=new kr,this.opacityVertexArray=new Tr,this.placedSymbolArray=new WT,this.globeExtVertexArray=new Gr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,d,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,zN.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,FN.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,T6,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,BN.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||f)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}an(N1,"SymbolBuffers");class U1{constructor(i,l,d){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new d,this.segments=new Ei,this.collisionVertexArray=new jr,this.collisionVertexArrayExt=new lo}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,NN.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,UN.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}an(U1,"CollisionBuffers");class Pc{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ws([]),this.placementViewportMatrix=ws([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=M1(this.zoom,l["text-size"]),this.iconSizeData=M1(this.zoom,l["icon-size"]);const d=this.layers[0].layout,f=d.get("symbol-sort-key"),y=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&f.constantOr(1)!==void 0,this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(x=>Ca[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new N1(new Zu(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new N1(new Zu(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new ZT,this.lineVertexArray=new XT,this.symbolInstances=new qT}calculateGlyphDependencies(i,l,d,f,y){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,f&&y){const C=wm[i.charAt(x)];C&&(l[C.charCodeAt(0)]=!0)}}populate(i,l,d,f){const y=this.layers[0],x=y.layout,C=this.projection.name==="globe",I=x.get("text-font"),R=x.get("text-field"),V=x.get("icon-image"),q=(R.value.kind!=="constant"||R.value.value instanceof Do&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),Z=V.value.kind!=="constant"||!!V.value.value||Object.keys(V.parameters).length>0,J=x.get("symbol-sort-key");if(this.features=[],!q&&!Z)return;const Q=l.iconDependencies,ie=l.glyphDependencies,de=l.availableImages,Ce=new et(this.zoom);for(const{feature:Fe,id:we,index:ze,sourceLayerIndex:$e}of i){const Ne=y._featureFilter.needGeometry,st=ed(Fe,Ne);if(!y._featureFilter.filter(Ce,st,d))continue;if(Ne||(st.geometry=Ml(Fe,d,f)),C&&Fe.type!==1&&d.z<=5){const mt=st.geometry,Tt=.98078528056,It=(Lt,Ft)=>Ha(um(Lt.x,Lt.y,d,1),um(Ft.x,Ft.y,d,1))<Tt;for(let Lt=0;Lt<mt.length;Lt++)mt[Lt]=FF(mt[Lt],It)}let rt,Ct;if(q){const mt=y.getValueAndResolveTokens("text-field",st,d,de),Tt=Do.factory(mt);A6(Tt)&&(this.hasRTLText=!0),(!this.hasRTLText||He()==="unavailable"||this.hasRTLText&&Ge.isParsed())&&(rt=VN(Tt,y,st))}if(Z){const mt=y.getValueAndResolveTokens("icon-image",st,d,de);Ct=mt instanceof xo?mt:xo.fromString(mt)}if(!rt&&!Ct)continue;const Bt=this.sortFeaturesByKey?J.evaluate(st,{},d):void 0;if(this.features.push({id:we,text:rt,icon:Ct,index:ze,sourceLayerIndex:$e,geometry:st.geometry,properties:Fe.properties,type:k6[Fe.type],sortKey:Bt}),Ct&&(Q[Ct.name]=!0),rt){const mt=I.evaluate(st,{},d).join(","),Tt=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ca.vertical)>=0;for(const It of rt.sections)if(It.image)Q[It.image.name]=!0;else{const Lt=E(rt.toString()),Ft=It.fontStack||mt,gt=ie[Ft]=ie[Ft]||{};this.calculateGlyphDependencies(It.text,gt,Tt,this.allowVerticalPlacement,Lt)}}}x.get("symbol-placement")==="line"&&(this.features=function(Fe){const we={},ze={},$e=[];let Ne=0;function st(mt){$e.push(Fe[mt]),Ne++}function rt(mt,Tt,It){const Lt=ze[mt];return delete ze[mt],ze[Tt]=Lt,$e[Lt].geometry[0].pop(),$e[Lt].geometry[0]=$e[Lt].geometry[0].concat(It[0]),Lt}function Ct(mt,Tt,It){const Lt=we[Tt];return delete we[Tt],we[mt]=Lt,$e[Lt].geometry[0].shift(),$e[Lt].geometry[0]=It[0].concat($e[Lt].geometry[0]),Lt}function Bt(mt,Tt,It){const Lt=It?Tt[0][Tt[0].length-1]:Tt[0][0];return`${mt}:${Lt.x}:${Lt.y}`}for(let mt=0;mt<Fe.length;mt++){const Tt=Fe[mt],It=Tt.geometry,Lt=Tt.text?Tt.text.toString():null;if(!Lt){st(mt);continue}const Ft=Bt(Lt,It),gt=Bt(Lt,It,!0);if(Ft in ze&&gt in we&&ze[Ft]!==we[gt]){const Wt=Ct(Ft,gt,It),bn=rt(Ft,gt,$e[Wt].geometry);delete we[Ft],delete ze[gt],ze[Bt(Lt,$e[bn].geometry,!0)]=bn,$e[Wt].geometry=null}else Ft in ze?rt(Ft,gt,It):gt in we?Ct(Ft,gt,It):(st(mt),we[Ft]=Ne-1,ze[gt]=Ne-1)}return $e.filter(mt=>mt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Fe,we)=>Fe.sortKey-we.sortKey)}update(i,l,d,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,d,f),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,d,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=HA(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const d=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:f,y}of l)this.lineVertexArray.emplaceBack(f,y);return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(i,l,d,f,y,x,C,I,R,V,q,Z,J,Q){const ie=i.indexArray,de=i.layoutVertexArray,Ce=i.globeExtVertexArray,Fe=i.segments.prepareSegment(4*l.length,de,ie,this.canOverlap?x.sortKey:void 0),we=this.glyphOffsetArray.length,ze=Fe.vertexLength,$e=this.allowVerticalPlacement&&C===Ca.vertical?Math.PI/2:0,Ne=x.text&&x.text.sections;for(let rt=0;rt<l.length;rt++){const{tl:Ct,tr:Bt,bl:mt,br:Tt,tex:It,pixelOffsetTL:Lt,pixelOffsetBR:Ft,minFontScaleX:gt,minFontScaleY:Wt,glyphOffset:bn,isSDF:Yt,sectionIndex:cn}=l[rt],Gt=Fe.vertexLength,En=bn[1];if(e_(de,R.x,R.y,Ct.x,En+Ct.y,It.x,It.y,d,Yt,Lt.x,Lt.y,gt,Wt),e_(de,R.x,R.y,Bt.x,En+Bt.y,It.x+It.w,It.y,d,Yt,Ft.x,Lt.y,gt,Wt),e_(de,R.x,R.y,mt.x,En+mt.y,It.x,It.y+It.h,d,Yt,Lt.x,Ft.y,gt,Wt),e_(de,R.x,R.y,Tt.x,En+Tt.y,It.x+It.w,It.y+It.h,d,Yt,Ft.x,Ft.y,gt,Wt),I){const{x:Gn,y:Vn,z:jn}=I.anchor,[Sn,gr,Pn]=I.up;t_(Ce,Gn,Vn,jn,Sn,gr,Pn),t_(Ce,Gn,Vn,jn,Sn,gr,Pn),t_(Ce,Gn,Vn,jn,Sn,gr,Pn),t_(Ce,Gn,Vn,jn,Sn,gr,Pn),n_(i.dynamicLayoutVertexArray,Gn,Vn,jn,$e)}else n_(i.dynamicLayoutVertexArray,R.x,R.y,R.z,$e);ie.emplaceBack(Gt,Gt+1,Gt+2),ie.emplaceBack(Gt+1,Gt+2,Gt+3),Fe.vertexLength+=4,Fe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bn[0]),rt!==l.length-1&&cn===l[rt+1].sectionIndex||i.programConfigurations.populatePaintArrays(de.length,x,x.index,{},J,Q,Ne&&Ne[cn])}const st=I?I.anchor:R;i.placedSymbolArray.emplaceBack(st.x,st.y,st.z,R.x,R.y,we,this.glyphOffsetArray.length-we,ze,V,q,R.segment,d?d[0]:0,d?d[1]:0,f[0],f[1],C,0,!1,0,Z,0)}_commitLayoutVertex(i,l,d,f,y,x,C){i.emplaceBack(l,d,f,y,x,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(i,l,d,f,y,x,C){const I=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),R=I.vertexLength,V=C.tileAnchorX,q=C.tileAnchorY;for(let J=0;J<4;J++)d.collisionVertexArray.emplaceBack(0,0,0,0);d.collisionVertexArrayExt.emplaceBack(l,-i.padding,-i.padding),d.collisionVertexArrayExt.emplaceBack(l,i.padding,-i.padding),d.collisionVertexArrayExt.emplaceBack(l,i.padding,i.padding),d.collisionVertexArrayExt.emplaceBack(l,-i.padding,i.padding),this._commitLayoutVertex(d.layoutVertexArray,f,y,x,V,q,new S(i.x1,i.y1)),this._commitLayoutVertex(d.layoutVertexArray,f,y,x,V,q,new S(i.x2,i.y1)),this._commitLayoutVertex(d.layoutVertexArray,f,y,x,V,q,new S(i.x2,i.y2)),this._commitLayoutVertex(d.layoutVertexArray,f,y,x,V,q,new S(i.x1,i.y2)),I.vertexLength+=4;const Z=d.indexArray;Z.emplaceBack(R,R+1),Z.emplaceBack(R+1,R+2),Z.emplaceBack(R+2,R+3),Z.emplaceBack(R+3,R),I.primitiveLength+=4}_addTextDebugCollisionBoxes(i,l,d,f,y,x){for(let C=f;C<y;C++){const I=d.get(C),R=this.getSymbolInstanceTextSize(i,x,l,C);this._addCollisionDebugVertices(I,R,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(i,l,d,f,y,x){for(let C=f;C<y;C++){const I=d.get(C),R=this.getSymbolInstanceIconSize(i,l,x.placedIconSymbolIndex);this._addCollisionDebugVertices(I,R,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,x)}}generateCollisionDebugBuffers(i,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new U1(li,hA.members,Vs),this.iconCollisionBox=new U1(li,hA.members,Vs);const d=Nh(this.iconSizeData,i),f=Nh(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._addTextDebugCollisionBoxes(f,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(f,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(d,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(d,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(i,l,d,f){const y=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:f),x=Wy(this.textSizeData,i,y)/po;return this.tilePixelRatio*x}getSymbolInstanceIconSize(i,l,d){const f=this.icon.placedSymbolArray.get(d),y=Wy(this.iconSizeData,i,f);return this.tilePixelRatio*y}_commitDebugCollisionVertexUpdate(i,l,d){i.emplaceBack(l,-d,-d),i.emplaceBack(l,d,-d),i.emplaceBack(l,d,d),i.emplaceBack(l,-d,d)}_updateTextDebugCollisionBoxes(i,l,d,f,y,x){for(let C=f;C<y;C++){const I=d.get(C),R=this.getSymbolInstanceTextSize(i,x,l,C);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,R,I.padding)}}_updateIconDebugCollisionBoxes(i,l,d,f,y,x){for(let C=f;C<y;C++){const I=d.get(C),R=this.getSymbolInstanceIconSize(i,l,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,R,I.padding)}}updateCollisionDebugBuffers(i,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=Nh(this.iconSizeData,i),f=Nh(this.textSizeData,i);for(let y=0;y<this.symbolInstances.length;y++){const x=this.symbolInstances.get(y);this._updateTextDebugCollisionBoxes(f,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(f,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(d,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(d,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,l,d,f,y,x,C,I,R){const V={};if(l<d){const{x1:q,y1:Z,x2:J,y2:Q,padding:ie,projectedAnchorX:de,projectedAnchorY:Ce,projectedAnchorZ:Fe,tileAnchorX:we,tileAnchorY:ze,featureIndex:$e}=i.get(l);V.textBox={x1:q,y1:Z,x2:J,y2:Q,padding:ie,projectedAnchorX:de,projectedAnchorY:Ce,projectedAnchorZ:Fe,tileAnchorX:we,tileAnchorY:ze},V.textFeatureIndex=$e}if(f<y){const{x1:q,y1:Z,x2:J,y2:Q,padding:ie,projectedAnchorX:de,projectedAnchorY:Ce,projectedAnchorZ:Fe,tileAnchorX:we,tileAnchorY:ze,featureIndex:$e}=i.get(f);V.verticalTextBox={x1:q,y1:Z,x2:J,y2:Q,padding:ie,projectedAnchorX:de,projectedAnchorY:Ce,projectedAnchorZ:Fe,tileAnchorX:we,tileAnchorY:ze},V.verticalTextFeatureIndex=$e}if(x<C){const{x1:q,y1:Z,x2:J,y2:Q,padding:ie,projectedAnchorX:de,projectedAnchorY:Ce,projectedAnchorZ:Fe,tileAnchorX:we,tileAnchorY:ze,featureIndex:$e}=i.get(x);V.iconBox={x1:q,y1:Z,x2:J,y2:Q,padding:ie,projectedAnchorX:de,projectedAnchorY:Ce,projectedAnchorZ:Fe,tileAnchorX:we,tileAnchorY:ze},V.iconFeatureIndex=$e}if(I<R){const{x1:q,y1:Z,x2:J,y2:Q,padding:ie,projectedAnchorX:de,projectedAnchorY:Ce,projectedAnchorZ:Fe,tileAnchorX:we,tileAnchorY:ze,featureIndex:$e}=i.get(I);V.verticalIconBox={x1:q,y1:Z,x2:J,y2:Q,padding:ie,projectedAnchorX:de,projectedAnchorY:Ce,projectedAnchorZ:Fe,tileAnchorX:we,tileAnchorY:ze},V.verticalIconFeatureIndex=$e}return V}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const d=i.placedSymbolArray.get(l),f=d.vertexStartIndex+4*d.numGlyphs;for(let y=d.vertexStartIndex;y<f;y+=4)i.indexArray.emplaceBack(y,y+1,y+2),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),d=Math.cos(i),f=[],y=[],x=[];for(let C=0;C<this.symbolInstances.length;++C){x.push(C);const I=this.symbolInstances.get(C);f.push(0|Math.round(l*I.tileAnchorX+d*I.tileAnchorY)),y.push(I.featureIndex)}return x.sort((C,I)=>f[C]-f[I]||y[I]-y[C]),x}addToSortKeyRanges(i,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex);const{rightJustifiedTextSymbolIndex:f,centerJustifiedTextSymbolIndex:y,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:R}=d;f>=0&&this.addIndicesForPlacedSymbol(this.text,f),y>=0&&y!==f&&this.addIndicesForPlacedSymbol(this.text,y),x>=0&&x!==y&&x!==f&&this.addIndicesForPlacedSymbol(this.text,x),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I),R>=0&&this.addIndicesForPlacedSymbol(this.icon,R)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}an(Pc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Pc.MAX_GLYPHS=65535,Pc.addDynamicAttributes=n_;const M6=new Ot({"symbol-placement":new Ye(Et.layout_symbol["symbol-placement"]),"symbol-spacing":new Ye(Et.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ye(Et.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ut(Et.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ye(Et.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ye(Et.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ye(Et.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ye(Et.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ye(Et.layout_symbol["icon-rotation-alignment"]),"icon-size":new ut(Et.layout_symbol["icon-size"]),"icon-text-fit":new Ye(Et.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ye(Et.layout_symbol["icon-text-fit-padding"]),"icon-image":new ut(Et.layout_symbol["icon-image"]),"icon-rotate":new ut(Et.layout_symbol["icon-rotate"]),"icon-padding":new Ye(Et.layout_symbol["icon-padding"]),"icon-keep-upright":new Ye(Et.layout_symbol["icon-keep-upright"]),"icon-offset":new ut(Et.layout_symbol["icon-offset"]),"icon-anchor":new ut(Et.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ye(Et.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ye(Et.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ye(Et.layout_symbol["text-rotation-alignment"]),"text-field":new ut(Et.layout_symbol["text-field"]),"text-font":new ut(Et.layout_symbol["text-font"]),"text-size":new ut(Et.layout_symbol["text-size"]),"text-max-width":new ut(Et.layout_symbol["text-max-width"]),"text-line-height":new ut(Et.layout_symbol["text-line-height"]),"text-letter-spacing":new ut(Et.layout_symbol["text-letter-spacing"]),"text-justify":new ut(Et.layout_symbol["text-justify"]),"text-radial-offset":new ut(Et.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ye(Et.layout_symbol["text-variable-anchor"]),"text-anchor":new ut(Et.layout_symbol["text-anchor"]),"text-max-angle":new Ye(Et.layout_symbol["text-max-angle"]),"text-writing-mode":new Ye(Et.layout_symbol["text-writing-mode"]),"text-rotate":new ut(Et.layout_symbol["text-rotate"]),"text-padding":new Ye(Et.layout_symbol["text-padding"]),"text-keep-upright":new Ye(Et.layout_symbol["text-keep-upright"]),"text-transform":new ut(Et.layout_symbol["text-transform"]),"text-offset":new ut(Et.layout_symbol["text-offset"]),"text-allow-overlap":new Ye(Et.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ye(Et.layout_symbol["text-ignore-placement"]),"text-optional":new Ye(Et.layout_symbol["text-optional"])});var j1={paint:new Ot({"icon-opacity":new ut(Et.paint_symbol["icon-opacity"]),"icon-color":new ut(Et.paint_symbol["icon-color"]),"icon-halo-color":new ut(Et.paint_symbol["icon-halo-color"]),"icon-halo-width":new ut(Et.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ut(Et.paint_symbol["icon-halo-blur"]),"icon-translate":new Ye(Et.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ye(Et.paint_symbol["icon-translate-anchor"]),"text-opacity":new ut(Et.paint_symbol["text-opacity"]),"text-color":new ut(Et.paint_symbol["text-color"],{runtimeType:ja,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new ut(Et.paint_symbol["text-halo-color"]),"text-halo-width":new ut(Et.paint_symbol["text-halo-width"]),"text-halo-blur":new ut(Et.paint_symbol["text-halo-blur"]),"text-translate":new Ye(Et.paint_symbol["text-translate"]),"text-translate-anchor":new Ye(Et.paint_symbol["text-translate-anchor"])}),layout:M6};class WA{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:oc,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}an(WA,"FormatSectionOverride",{omit:["defaultValue"]});class r_ extends bs{constructor(i){super(i,j1)}recalculate(i,l){super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const f=[];for(const y of d)f.indexOf(y)<0&&f.push(y);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,l,d,f){const y=this.layout.get(i).evaluate(l,{},d,f),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||vc(x.value)||!y?y:function(C,I){return I.replace(/{([^{}]+)}/g,(R,V)=>V in C?String(C[V]):"")}(l.properties,y)}createBucket(i){return new Pc(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of j1.paint.overridableProperties){if(!r_.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),d=new WA(l),f=new fh(d,l.property.specification);let y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new mh("source",f):new Cl("composite",f,l.value.zoomStops,l.value._interpolationType),this.paint._values[i]=new Rt(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&r_.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const d=i.get("text-field"),f=j1.paint.properties[l];let y=!1;const x=C=>{for(const I of C)if(f.overrides&&f.overrides.hasOverride(I))return void(y=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Do)x(d.value.value.sections);else if(d.value.kind==="source"){const C=R=>{y||(R instanceof bu&&Pi(R.value)===ac?x(R.value.sections):R instanceof wu?x(R.sections):R.eachChild(C))},I=d.value;I._styleExpression&&C(I._styleExpression.expression)}return y}getProgramConfiguration(i){return new Tc(this,i)}}var I6={paint:new Ot({"background-color":new Ye(Et.paint_background["background-color"]),"background-pattern":new Ye(Et.paint_background["background-pattern"]),"background-opacity":new Ye(Et.paint_background["background-opacity"])})},P6={paint:new Ot({"raster-opacity":new Ye(Et.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ye(Et.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ye(Et.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ye(Et.paint_raster["raster-brightness-max"]),"raster-saturation":new Ye(Et.paint_raster["raster-saturation"]),"raster-contrast":new Ye(Et.paint_raster["raster-contrast"]),"raster-resampling":new Ye(Et.paint_raster["raster-resampling"]),"raster-fade-duration":new Ye(Et.paint_raster["raster-fade-duration"])})};class D6 extends bs{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var R6={paint:new Ot({"sky-type":new Ye(Et.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ye(Et.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ye(Et.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ye(Et.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ye(Et.paint_sky["sky-gradient-radius"]),"sky-gradient":new Dt(Et.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ye(Et.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ye(Et.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ye(Et.paint_sky["sky-opacity"])})};function $1(s,i,l){const d=[0,0,1],f=f2([]);return g2(f,f,l?-ne(s)+Math.PI:ne(s)),m2(f,f,-ne(i)),u2(d,d,f),Lo(d,d)}const L6={circle:class extends bs{constructor(s){super(s,WF)}createBucket(s){return new v1(s)}queryRadius(s){const i=s;return Lh("circle-radius",this,i)+Lh("circle-stroke-width",this,i)+Ly(this.paint.get("circle-translate"))}queryIntersectsFeature(s,i,l,d,f,y,x,C){const I=B2(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),R=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l);return F2(s,d,y,x,C,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,R)}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new Tc(this,s)}},heatmap:class extends bs{createBucket(s){return new U2(s)}constructor(s){super(s,XF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=b1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(s){return Lh("heatmap-radius",this,s)}queryIntersectsFeature(s,i,l,d,f,y,x,C){const I=this.paint.get("heatmap-radius").evaluate(i,l);return F2(s,d,y,x,C,!0,!0,new S(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new Tc(this,s)}},hillshade:class extends bs{constructor(s){super(s,KF)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends bs{constructor(s){super(s,hN)}getProgramIds(){const s=this.paint.get("fill-pattern"),i=s&&s.constantOr(1),l=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(s){return new Tc(this,s)}recalculate(s,i){super.recalculate(s,i);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new Ny(s)}queryRadius(){return Ly(this.paint.get("fill-translate"))}queryIntersectsFeature(s,i,l,d,f,y){return!s.queryGeometry.isAboveHorizon&&D2(z2(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}},"fill-extrusion":class extends bs{constructor(s){super(s,AN)}createBucket(s){return new _m(s)}queryRadius(){return Ly(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new Tc(this,s)}queryIntersectsFeature(s,i,l,d,f,y,x,C,I){const R=B2(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),V=this.paint.get("fill-extrusion-height").evaluate(i,l),q=this.paint.get("fill-extrusion-base").evaluate(i,l),Z=[0,0],J=C&&y.elevation,Q=y.elevation?y.elevation.exaggeration():1,ie=s.tile.getBucket(this);if(J&&ie instanceof _m){const ze=ie.centroidVertexArray,$e=I+1;$e<ze.length&&(Z[0]=ze.geta_centroid_pos0($e),Z[1]=ze.geta_centroid_pos1($e))}if(Z[0]===0&&Z[1]===1)return!1;y.projection.name==="globe"&&(d=iA([d],[new S(0,0),new S(kn,kn)],s.tileID.canonical).map(ze=>ze.polygon).flat());const de=J?C:null,[Ce,Fe]=function(ze,$e,Ne,st,rt,Ct,Bt,mt,Tt,It,Lt){return ze.projection.name==="globe"?function(Ft,gt,Wt,bn,Yt,cn,Gt,En,Gn,Vn,jn){const Sn=[],gr=[],Pn=Ft.projection.upVectorScale(jn,Ft.center.lat,Ft.worldSize).metersToTile,qn=[0,0,0,1],xr=[0,0,0,1],$r=(Vr,qr,ci,Ki)=>{Vr[0]=qr,Vr[1]=ci,Vr[2]=Ki,Vr[3]=1},Or=rA();Wt>0&&(Wt+=Or),bn+=Or;for(const Vr of gt){const qr=[],ci=[];for(const Ki of Vr){const vr=Ki.x+Yt.x,Di=Ki.y+Yt.y,Si=Ft.projection.projectTilePoint(vr,Di,jn),ir=Ft.projection.upVector(jn,Ki.x,Ki.y);let ni=Wt,Ni=bn;if(Gt){const br=lA(vr,Di,Wt,bn,Gt,En,Gn,Vn);ni+=br.base,Ni+=br.top}Wt!==0?$r(qn,Si.x+ir[0]*Pn*ni,Si.y+ir[1]*Pn*ni,Si.z+ir[2]*Pn*ni):$r(qn,Si.x,Si.y,Si.z),$r(xr,Si.x+ir[0]*Pn*Ni,Si.y+ir[1]*Pn*Ni,Si.z+ir[2]*Pn*Ni),fi(qn,qn,cn),fi(xr,xr,cn),qr.push(new Fh(qn[0],qn[1],qn[2])),ci.push(new Fh(xr[0],xr[1],xr[2]))}Sn.push(qr),gr.push(ci)}return[Sn,gr]}(ze,$e,Ne,st,rt,Ct,Bt,mt,Tt,It,Lt):Bt?function(Ft,gt,Wt,bn,Yt,cn,Gt,En,Gn){const Vn=[],jn=[],Sn=[0,0,0,1];for(const gr of Ft){const Pn=[],qn=[];for(const xr of gr){const $r=xr.x+bn.x,Or=xr.y+bn.y,Vr=lA($r,Or,gt,Wt,cn,Gt,En,Gn);Sn[0]=$r,Sn[1]=Or,Sn[2]=Vr.base,Sn[3]=1,Yu(Sn,Sn,Yt),Sn[3]=Math.max(Sn[3],1e-5);const qr=new Fh(Sn[0]/Sn[3],Sn[1]/Sn[3],Sn[2]/Sn[3]);Sn[0]=$r,Sn[1]=Or,Sn[2]=Vr.top,Sn[3]=1,Yu(Sn,Sn,Yt),Sn[3]=Math.max(Sn[3],1e-5);const ci=new Fh(Sn[0]/Sn[3],Sn[1]/Sn[3],Sn[2]/Sn[3]);Pn.push(qr),qn.push(ci)}Vn.push(Pn),jn.push(qn)}return[Vn,jn]}($e,Ne,st,rt,Ct,Bt,mt,Tt,It):function(Ft,gt,Wt,bn,Yt){const cn=[],Gt=[],En=Yt[8]*gt,Gn=Yt[9]*gt,Vn=Yt[10]*gt,jn=Yt[11]*gt,Sn=Yt[8]*Wt,gr=Yt[9]*Wt,Pn=Yt[10]*Wt,qn=Yt[11]*Wt;for(const xr of Ft){const $r=[],Or=[];for(const Vr of xr){const qr=Vr.x+bn.x,ci=Vr.y+bn.y,Ki=Yt[0]*qr+Yt[4]*ci+Yt[12],vr=Yt[1]*qr+Yt[5]*ci+Yt[13],Di=Yt[2]*qr+Yt[6]*ci+Yt[14],Si=Yt[3]*qr+Yt[7]*ci+Yt[15],ir=Ki+En,ni=vr+Gn,Ni=Di+Vn,br=Math.max(Si+jn,1e-5),mi=Ki+Sn,bo=vr+gr,Yi=Di+Pn,Ji=Math.max(Si+qn,1e-5);$r.push(new Fh(ir/br,ni/br,Ni/br)),Or.push(new Fh(mi/Ji,bo/Ji,Yi/Ji))}cn.push($r),Gt.push(Or)}return[cn,Gt]}($e,Ne,st,rt,Ct)}(y,d,q,V,R,x,de,Z,Q,y.center.lat,s.tileID.canonical),we=s.queryGeometry;return function(ze,$e,Ne){let st=1/0;D2(Ne,$e)&&(st=sA(Ne,$e[0]));for(let rt=0;rt<$e.length;rt++){const Ct=$e[rt],Bt=ze[rt];for(let mt=0;mt<Ct.length-1;mt++){const Tt=Ct[mt],It=[Tt,Ct[mt+1],Bt[mt+1],Bt[mt],Tt];P2(Ne,It)&&(st=Math.min(st,sA(Ne,It)))}}return st!==1/0&&st}(Ce,Fe,we.isPointQuery()?we.screenBounds:we.screenGeometry)}},line:class extends bs{constructor(s){super(s,cA),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Sf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(s,i){super.recalculate(s,i),this.paint._values["line-floorwidth"]=uA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new Hy(s)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(s){return new Tc(this,s)}queryRadius(s){const i=s,l=dA(Lh("line-width",this,i),Lh("line-gap-width",this,i)),d=Lh("line-offset",this,i);return l/2+Math.abs(d)+Ly(this.paint.get("line-translate"))}queryIntersectsFeature(s,i,l,d,f,y){if(s.queryGeometry.isAboveHorizon)return!1;const x=z2(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,s.pixelToTileUnitsFactor),C=s.pixelToTileUnitsFactor/2*dA(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),I=this.paint.get("line-offset").evaluate(i,l);return I&&(d=function(R,V){const q=[],Z=new S(0,0);for(let J=0;J<R.length;J++){const Q=R[J],ie=[];for(let de=0;de<Q.length;de++){const Ce=Q[de-1],Fe=Q[de],we=Q[de+1],ze=de===0?Z:Fe.sub(Ce)._unit()._perp(),$e=de===Q.length-1?Z:we.sub(Fe)._unit()._perp(),Ne=ze._add($e)._unit();Ne._mult(1/(Ne.x*$e.x+Ne.y*$e.y)),ie.push(Ne._mult(V)._add(Fe))}q.push(ie)}return q}(d,I*s.pixelToTileUnitsFactor)),function(R,V,q){for(let Z=0;Z<V.length;Z++){const J=V[Z];if(R.length>=3){for(let Q=0;Q<J.length;Q++)if(td(R,J[Q]))return!0}if(jF(R,J,q))return!0}return!1}(x,d,C)}isTileClipped(){return!0}},symbol:r_,background:class extends bs{constructor(s){super(s,I6)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends bs{constructor(s){super(s,P6)}getProgramIds(){return["raster"]}},sky:class extends bs{constructor(s){super(s,R6),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="sky-gradient"?this._updateColorRamp():s!=="sky-atmosphere-sun"&&s!=="sky-atmosphere-halo-color"&&s!=="sky-atmosphere-color"&&s!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=b1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(s,i){if(this.paint.get("sky-type")==="atmosphere"){const d=this.paint.get("sky-atmosphere-sun"),f=!d,y=s.style.light,x=y.properties.get("position");return f&&y.properties.get("anchor")==="viewport"&&Xe("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),f?$1(x.azimuthal,90-x.polar,i):$1(d[0],90-d[1],i)}const l=this.paint.get("sky-gradient-center");return $1(l[0],90-l[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return s==="atmosphere"?["skyboxCapture","skybox"]:s==="gradient"?["skyboxGradient"]:null}}};class Im{constructor(i,l,d,f){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(l,f)}update(i,l,d){const{width:f,height:y}=i,{context:x}=this,{gl:C}=x,{HTMLImageElement:I,HTMLCanvasElement:R,HTMLVideoElement:V,ImageData:q,ImageBitmap:Z}=g;if(C.bindTexture(C.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!l||l.premultiply!==!1)),d||this.size&&this.size[0]===f&&this.size[1]===y){const{x:J,y:Q}=d||{x:0,y:0};i instanceof I||i instanceof R||i instanceof V||i instanceof q||Z&&i instanceof Z?C.texSubImage2D(C.TEXTURE_2D,0,J,Q,C.RGBA,C.UNSIGNED_BYTE,i):C.texSubImage2D(C.TEXTURE_2D,0,J,Q,f,y,C.RGBA,C.UNSIGNED_BYTE,i.data)}else this.size=[f,y],i instanceof I||i instanceof R||i instanceof V||i instanceof q||Z&&i instanceof Z?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,i):C.texImage2D(C.TEXTURE_2D,0,this.format,f,y,0,this.format,C.UNSIGNED_BYTE,i.data);this.useMipmap=Boolean(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&C.generateMipmap(C.TEXTURE_2D)}bind(i,l){const{context:d}=this,{gl:f}=d;f.bindTexture(f.TEXTURE_2D,this.texture),i!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap?i===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_NEAREST:i),this.filter=i),l!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,l),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class O6{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class z6{constructor(){this.tasks={},this.taskQueue=[],tn(["process"],this),this.invoker=new O6(this.process),this.nextId=0}add(i,l){const d=this.nextId++,f=function({type:y,isSymbolTile:x,zoom:C}){return C=C||0,y==="message"?0:y!=="maybePrepare"||x?y!=="parseTile"||x?y==="parseTile"&&x?300-C:y==="maybePrepare"&&x?400-C:500:200-C:100-C}(l);if(f===0){_t();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[d]={fn:i,metadata:l,priority:f,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){_t();try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const l=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let i=null,l=1/0;for(let f=0;f<this.taskQueue.length;f++){const y=this.tasks[this.taskQueue[f]];y.priority<l&&(l=y.priority,i=f)}if(i===null)return null;const d=this.taskQueue[i];return this.taskQueue.splice(i,1),d}remove(){this.invoker.remove()}}class GA{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const d=i[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const B6=["tile","layer","source","sourceLayer","state"];class qA{constructor(i,l,d,f,y){this.type="Feature",this._vectorTileFeature=i,this._z=l,this._x=d,this._y=f,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const l of B6)this[l]!==void 0&&(i[l]=this[l]);return i}}const qa=32,Ks=33,Dc=new Uint16Array(8184);for(let s=0;s<2046;s++){let i=s+2,l=0,d=0,f=0,y=0,x=0,C=0;for(1&i?f=y=x=qa:l=d=C=qa;(i>>=1)>1;){const R=l+f>>1,V=d+y>>1;1&i?(f=l,y=d,l=x,d=C):(l=f,d=y,f=x,y=C),x=R,C=V}const I=4*s;Dc[I+0]=l,Dc[I+1]=d,Dc[I+2]=f,Dc[I+3]=y}const Ys=new Uint16Array(2178),Rc=new Uint8Array(1089),i_=new Uint16Array(1089);function ZA(s){return s===0?-.03125:s===32?.03125:0}var XA=hn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const KA={type:2,extent:kn,loadGeometry:()=>[[new S(0,0),new S(8193,0),new S(8193,8193),new S(0,8193),new S(0,0)]]};class V1{constructor(i,l,d,f,y){this.tileID=i,this.uid=be(),this.uses=0,this.tileSize=l,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=y,this.expiredRequestCount=0,this.state="loading",f&&f.transform&&(this.projection=f.transform.projection)}registerFadeDuration(i){const l=i+this.timeAdded;l<or.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=rd(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,l,d){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(f,y){const x={};if(!y)return x;for(const C of f){const I=C.layerIds.map(R=>y.getLayer(R)).filter(Boolean);if(I.length!==0){C.layers=I,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(R=>I.filter(V=>V.id===R)[0]));for(const R of I)x[R.id]=C}}return x}(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof Pc){if(this.hasSymbolBuckets=!0,!d)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof Pc&&y.hasRTLText){this.hasRTLText=!0,Ge.isLoading()||Ge.isLoaded()||He()!=="deferred"||je();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(f).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new Kb}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(i)}const l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Im(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Im(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Im(i,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,d,f,y,x,C,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:f,pixelPosMatrix:C,transform:x,params:y,tileTransform:this.tileTransform},i,l,d):{}}querySourceFeatures(i,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),y=l?l.sourceLayer:"",x=f._geojsonTileLayer||f[y];if(!x)return;const C=vh(l&&l.filter),{z:I,x:R,y:V}=this.tileID.canonical,q={z:I,x:R,y:V};for(let Z=0;Z<x.length;Z++){const J=x.feature(Z);if(C.needGeometry){const de=ed(J,!0);if(!C.filter(new et(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!C.filter(new et(this.tileID.overscaledZ),J))continue;const Q=d.getId(J,y),ie=new qA(J,I,R,V,Q);ie.tile=q,i.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const d=dt(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(l)if(this.expirationTime<l)f=!0;else{const y=this.expirationTime-l;y?this.expirationTime=d+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!l)return;const d=this.latestFeatureIndex.loadVTLayers(),f=l.style.listImages();for(const y in this.buckets){if(!l.style.hasLayer(y))continue;const x=this.buckets[y],C=x.layers[0].sourceLayer||"_geojsonTileLayer",I=d[C],R=i[C];if(!I||!R||Object.keys(R).length===0)continue;if(x.update(R,I,f,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof Hy||x instanceof Ny){const q=l.style._getSourceCache(x.layers[0].source);l._terrain&&l._terrain.enabled&&q&&x.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(q.id,this.tileID)}const V=l&&l.style&&l.style.getLayer(y);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<or.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=or.now()+i}setTexture(i,l){const d=l.context,f=d.gl;this.texture=this.texture||l.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new Im(d,i,f.RGBA,{useMipmap:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE))}setDependencies(i,l){const d={};for(const f of l)d[f]=!0;this.dependencies[i]=d}hasDependency(i,l){for(const d of i){const f=this.dependencies[d];if(f){for(const y of l)if(f[y])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const d=Ml(KA,this.tileID.canonical,this.tileTransform)[0],f=new gn,y=new Hs;for(let x=0;x<d.length;x++){const{x:C,y:I}=d[x];f.emplaceBack(C,I),y.emplaceBack(x)}y.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(y),this._tileDebugBuffer=i.createVertexBuffer(f,lm.members),this._tileDebugSegments=Ei.simpleSegment(0,0,f.length,y.length)}_makeTileBoundsBuffers(i,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const d=Ml(KA,this.tileID.canonical,this.tileTransform)[0];let f,y;if(this.isRaster){const x=function(C,I){const R=rd(C,I),V=Math.pow(2,C.z);for(let de=0;de<Ks;de++)for(let Ce=0;Ce<Ks;Ce++){const Fe=Ea((C.x+(Ce+ZA(Ce))/qa)/V),we=uo((C.y+(de+ZA(de))/qa)/V),ze=I.project(Fe,we),$e=de*Ks+Ce;Ys[2*$e+0]=Math.round((ze.x*R.scale-R.x)*kn),Ys[2*$e+1]=Math.round((ze.y*R.scale-R.y)*kn)}Rc.fill(0),i_.fill(0);for(let de=2045;de>=0;de--){const Ce=4*de,Fe=Dc[Ce+0],we=Dc[Ce+1],ze=Dc[Ce+2],$e=Dc[Ce+3],Ne=Fe+ze>>1,st=we+$e>>1,rt=Ne+st-we,Ct=st+Fe-Ne,Bt=we*Ks+Fe,mt=$e*Ks+ze,Tt=st*Ks+Ne,It=Math.hypot((Ys[2*Bt+0]+Ys[2*mt+0])/2-Ys[2*Tt+0],(Ys[2*Bt+1]+Ys[2*mt+1])/2-Ys[2*Tt+1])>=16;if(Rc[Tt]=Rc[Tt]||(It?1:0),de<1022){const Lt=(we+Ct>>1)*Ks+(Fe+rt>>1),Ft=($e+Ct>>1)*Ks+(ze+rt>>1);Rc[Tt]=Rc[Tt]||Rc[Lt]||Rc[Ft]}}const q=new pr,Z=new co;let J=0;function Q(de,Ce){const Fe=Ce*Ks+de;return i_[Fe]===0&&(q.emplaceBack(Ys[2*Fe+0],Ys[2*Fe+1],de*kn/qa,Ce*kn/qa),i_[Fe]=++J),i_[Fe]-1}function ie(de,Ce,Fe,we,ze,$e){const Ne=de+Fe>>1,st=Ce+we>>1;if(Math.abs(de-ze)+Math.abs(Ce-$e)>1&&Rc[st*Ks+Ne])ie(ze,$e,de,Ce,Ne,st),ie(Fe,we,ze,$e,Ne,st);else{const rt=Q(de,Ce),Ct=Q(Fe,we),Bt=Q(ze,$e);Z.emplaceBack(rt,Ct,Bt)}}return ie(0,0,qa,qa,qa,0),ie(qa,qa,0,0,0,qa),{vertices:q,indices:Z}}(this.tileID.canonical,l);f=x.vertices,y=x.indices}else{f=new pr,y=new co;for(const{x:C,y:I}of d)f.emplaceBack(C,I,0,0);const x=Oh(f.int16,void 0,4);for(let C=0;C<x.length;C+=3)y.emplaceBack(x[C],x[C+1],x[C+2])}this._tileBoundsBuffer=i.createVertexBuffer(f,XA.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(y),this._tileBoundsSegments=Ei.simpleSegment(0,0,f.length,y.length)}_makeGlobeTileDebugBuffers(i,l){const d=l.projection;if(!d||d.name!=="globe"||l.freezeTileCoverage)return;const f=this.tileID.canonical,y=dm(x2(f,l)),x=Dh(l.zoom);let C;x>0&&(C=t1(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,f,l,y,C,x),this._makeGlobeTileDebugTextBuffer(i,f,l,y,C,x)}_globePoint(i,l,d,f,y,x,C){let I=um(i,l,d);if(x){const R=1<<d.z,V=qs(f.center.lng),q=Zs(f.center.lat),Z=(d.x+.5)/R-V;let J=0;Z>.5?J=-1:Z<-.5&&(J=1);let Q=(i/kn+d.x)/R+J,ie=(l/kn+d.y)/R;Q=(Q-V)*f._pixelsPerMercatorPixel+V,ie=(ie-q)*f._pixelsPerMercatorPixel+q;const de=[Q*f.worldSize,ie*f.worldSize,0];fi(de,de,x),I=Qu(I,de,C)}return fi(I,I,y)}_makeGlobeTileDebugBorderBuffer(i,l,d,f,y,x){const C=new gn,I=new Hs,R=new lr,V=(Z,J,Q,ie,de)=>{const Ce=(Q-Z)/(de-1),Fe=(ie-J)/(de-1),we=C.length;for(let ze=0;ze<de;ze++){const $e=Z+ze*Ce,Ne=J+ze*Fe;C.emplaceBack($e,Ne);const st=this._globePoint($e,Ne,l,d,f,y,x);R.emplaceBack(st[0],st[1],st[2]),I.emplaceBack(we+ze)}},q=kn;V(0,0,q,0,16),V(q,0,q,q,16),V(q,q,0,q,16),V(0,q,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(I),this._tileDebugBuffer=i.createVertexBuffer(C,lm.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(R,y2.members),this._tileDebugSegments=Ei.simpleSegment(0,0,C.length,I.length)}_makeGlobeTileDebugTextBuffer(i,l,d,f,y,x){const C=new gn,I=new co,R=new lr,V=25;I.reserve(32),C.reserve(V),R.reserve(V);const q=(Z,J)=>V*Z+J;for(let Z=0;Z<V;Z++){const J=2048*Z;for(let Q=0;Q<V;Q++){const ie=2048*Q;C.emplaceBack(ie,J);const de=this._globePoint(ie,J,l,d,f,y,x);R.emplaceBack(de[0],de[1],de[2])}}for(let Z=0;Z<4;Z++)for(let J=0;J<4;J++){const Q=q(Z,J),ie=q(Z,J+1),de=q(Z+1,J),Ce=q(Z+1,J+1);I.emplaceBack(Q,ie,de),I.emplaceBack(de,ie,Ce)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(I),this._tileDebugTextBuffer=i.createVertexBuffer(C,lm.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(R,y2.members),this._tileDebugTextSegments=Ei.simpleSegment(0,0,V,32)}}class F6{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,d){const f=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][f]=this.stateChanges[i][f]||{},nt(this.stateChanges[i][f],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==f&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][f]===null){this.deletedStates[i][f]={};for(const y in this.state[i][f])d[y]||(this.deletedStates[i][f][y]=null)}else for(const y in d)this.deletedStates[i]&&this.deletedStates[i][f]&&this.deletedStates[i][f][y]===null&&delete this.deletedStates[i][f][y]}removeFeatureState(i,l,d){if(this.deletedStates[i]===null)return;const f=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&l!==void 0)this.deletedStates[i][f]!==null&&(this.deletedStates[i][f]=this.deletedStates[i][f]||{},this.deletedStates[i][f][d]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][f])for(d in this.deletedStates[i][f]={},this.stateChanges[i][f])this.deletedStates[i][f][d]=null;else this.deletedStates[i][f]=null;else this.deletedStates[i]=null}getState(i,l){const d=String(l),f=nt({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][l];if(y===null)return{};for(const x in y)delete f[x]}return f}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const x in this.stateChanges[f])this.state[f][x]||(this.state[f][x]={}),nt(this.state[f][x],this.stateChanges[f][x]),y[x]=this.state[f][x];d[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const x in this.state[f])y[x]={},this.state[f][x]={};else for(const x in this.deletedStates[f]){if(this.deletedStates[f][x]===null)this.state[f][x]={};else if(this.state[f][x])for(const C of Object.keys(this.deletedStates[f][x]))delete this.state[f][x][C];y[x]=this.state[f][x]}d[f]=d[f]||{},nt(d[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const f in i)i[f].setFeatureState(d,l)}}class YA{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,l){const d=this.toIdx(i,l);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(i,l){return this.leaves[this.toIdx(i,l)]}toIdx(i,l){return l*this.size+i}}function JA(s,i,l,d){let f=0,y=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(d[x])<1e-15){if(l[x]<s[x]||l[x]>i[x])return null}else{const C=1/d[x];let I=(s[x]-l[x])*C,R=(i[x]-l[x])*C;if(I>R){const V=I;I=R,R=V}if(I>f&&(f=I),R<y&&(y=R),f>y)return null}return f}function QA(s,i,l,d,f,y,x,C,I,R,V){const q=d-s,Z=f-i,J=y-l,Q=x-s,ie=C-i,de=I-l,Ce=V[1]*de-V[2]*ie,Fe=V[2]*Q-V[0]*de,we=V[0]*ie-V[1]*Q,ze=q*Ce+Z*Fe+J*we;if(Math.abs(ze)<1e-15)return null;const $e=1/ze,Ne=R[0]-s,st=R[1]-i,rt=R[2]-l,Ct=(Ne*Ce+st*Fe+rt*we)*$e;if(Ct<0||Ct>1)return null;const Bt=st*J-rt*Z,mt=rt*q-Ne*J,Tt=Ne*Z-st*q,It=(V[0]*Bt+V[1]*mt+V[2]*Tt)*$e;return It<0||Ct+It>1?null:(Q*Bt+ie*mt+de*Tt)*$e}function eM(s,i,l){return(s-i)/(l-i)}function tM(s,i,l,d,f,y,x,C,I){const R=1<<l,V=y-d,q=x-f,Z=(s+1)/R*V+d,J=(i+0)/R*q+f,Q=(i+1)/R*q+f;C[0]=(s+0)/R*V+d,C[1]=J,I[0]=Z,I[1]=Q}class nM{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(y){const x=Math.ceil(Math.log2(y.dim/8)),C=[];let I=Math.ceil(Math.pow(2,x));const R=1/I,V=(J,Q,ie,de,Ce)=>{const Fe=de?1:0,we=(J+1)*ie-Fe,ze=Q*ie,$e=(Q+1)*ie-Fe;Ce[0]=J*ie,Ce[1]=ze,Ce[2]=we,Ce[3]=$e};let q=new YA(I);const Z=[];for(let J=0;J<I*I;J++){V(J%I,Math.floor(J/I),R,!1,Z);const Q=Lc(Z[0],Z[1],y),ie=Lc(Z[2],Z[1],y),de=Lc(Z[2],Z[3],y),Ce=Lc(Z[0],Z[3],y);q.minimums.push(Math.min(Q,ie,de,Ce)),q.maximums.push(Math.max(Q,ie,de,Ce)),q.leaves.push(1)}for(C.push(q),I/=2;I>=1;I/=2){const J=C[C.length-1];q=new YA(I);for(let Q=0;Q<I*I;Q++){V(Q%I,Math.floor(Q/I),2,!0,Z);const ie=J.getElevation(Z[0],Z[1]),de=J.getElevation(Z[2],Z[1]),Ce=J.getElevation(Z[2],Z[3]),Fe=J.getElevation(Z[0],Z[3]),we=J.isLeaf(Z[0],Z[1]),ze=J.isLeaf(Z[2],Z[1]),$e=J.isLeaf(Z[2],Z[3]),Ne=J.isLeaf(Z[0],Z[3]),st=Math.min(ie.min,de.min,Ce.min,Fe.min),rt=Math.max(ie.max,de.max,Ce.max,Fe.max),Ct=we&&ze&&$e&&Ne;q.maximums.push(rt),q.minimums.push(st),q.leaves.push(rt-st<=5&&Ct?1:0)}C.push(q)}return C}(this.dem),d=l.length-1,f=l[d];this._addNode(f.minimums[0],f.maximums[0],f.leaves[0]),this._construct(l,0,0,d,0)}raycastRoot(i,l,d,f,y,x,C=1){return JA([i,l,-100],[d,f,this.maximums[0]*C],y,x)}raycast(i,l,d,f,y,x,C=1){if(!this.nodeCount)return null;const I=this.raycastRoot(i,l,d,f,y,x,C);if(I==null)return null;const R=[],V=[],q=[],Z=[],J=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;J.length>0;){const{idx:Q,t:ie,nodex:de,nodey:Ce,depth:Fe}=J.pop();if(this.leaves[Q]){tM(de,Ce,Fe,i,l,d,f,q,Z);const ze=1<<Fe,$e=(de+0)/ze,Ne=(de+1)/ze,st=(Ce+0)/ze,rt=(Ce+1)/ze,Ct=Lc($e,st,this.dem)*C,Bt=Lc(Ne,st,this.dem)*C,mt=Lc(Ne,rt,this.dem)*C,Tt=Lc($e,rt,this.dem)*C,It=QA(q[0],q[1],Ct,Z[0],q[1],Bt,Z[0],Z[1],mt,y,x),Lt=QA(Z[0],Z[1],mt,q[0],Z[1],Tt,q[0],q[1],Ct,y,x),Ft=Math.min(It!==null?It:Number.MAX_VALUE,Lt!==null?Lt:Number.MAX_VALUE);if(Ft!==Number.MAX_VALUE)return Ft;{const gt=am([],y,x,ie);if(rM(Ct,Bt,Tt,mt,eM(gt[0],q[0],Z[0]),eM(gt[1],q[1],Z[1]))>=gt[2])return ie}continue}let we=0;for(let ze=0;ze<this._siblingOffset.length;ze++){tM((de<<1)+this._siblingOffset[ze][0],(Ce<<1)+this._siblingOffset[ze][1],Fe+1,i,l,d,f,q,Z),q[2]=-100,Z[2]=this.maximums[this.childOffsets[Q]+ze]*C;const $e=JA(q,Z,y,x);if($e!=null){const Ne=$e;R[ze]=Ne;let st=!1;for(let rt=0;rt<we&&!st;rt++)Ne>=R[V[rt]]&&(V.splice(rt,0,ze),st=!0);st||(V[we]=ze),we++}}for(let ze=0;ze<we;ze++){const $e=V[ze];J.push({idx:this.childOffsets[Q]+$e,t:R[$e],nodex:(de<<1)+this._siblingOffset[$e][0],nodey:(Ce<<1)+this._siblingOffset[$e][1],depth:Fe+1})}}return null}_addNode(i,l,d){return this.minimums.push(i),this.maximums.push(l),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(i,l,d,f,y){if(i[f].isLeaf(l,d)===1)return;this.childOffsets[y]||(this.childOffsets[y]=this.nodeCount);const x=f-1,C=i[x];let I=0,R=0;for(let V=0;V<this._siblingOffset.length;V++){const q=2*l+this._siblingOffset[V][0],Z=2*d+this._siblingOffset[V][1],J=C.getElevation(q,Z),Q=C.isLeaf(q,Z),ie=this._addNode(J.min,J.max,Q);Q&&(I|=1<<V),R||(R=ie)}for(let V=0;V<this._siblingOffset.length;V++)I&1<<V||this._construct(i,2*l+this._siblingOffset[V][0],2*d+this._siblingOffset[V][1],x,R+V)}}function rM(s,i,l,d,f,y){return er(er(s,l,y),er(i,d,y),f)}function Lc(s,i,l){const d=l.dim,f=Oe(s*d-.5,0,d-1),y=Oe(i*d-.5,0,d-1),x=Math.floor(f),C=Math.floor(y),I=Math.min(x+1,d-1),R=Math.min(C+1,d-1);return rM(l.get(x,C),l.get(I,C),l.get(x,R),l.get(I,R),f-x,y-C)}const iM={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function N6(s,i,l){return(256*s*256+256*i+l)/10-1e4}function U6(s,i,l){return 256*s+i+l/256-32768}class o_{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,l,d,f=!1,y=!1){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return Xe(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const x=this.dim=l.height-2,C=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=d||"mapbox",this.borderReady=f,!f){for(let I=0;I<x;I++)C[this._idx(-1,I)]=C[this._idx(0,I)],C[this._idx(x,I)]=C[this._idx(x-1,I)],C[this._idx(I,-1)]=C[this._idx(I,0)],C[this._idx(I,x)]=C[this._idx(I,x-1)];C[this._idx(-1,-1)]=C[this._idx(0,0)],C[this._idx(x,-1)]=C[this._idx(x-1,0)],C[this._idx(-1,x)]=C[this._idx(0,x-1)],C[this._idx(x,x)]=C[this._idx(x-1,x-1)],y&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new nM(this)}get(i,l,d=!1){d&&(i=Oe(i,-1,this.dim),l=Oe(l,-1,this.dim));const f=4*this._idx(i,l);return(this.encoding==="terrarium"?U6:N6)(this.pixels[f],this.pixels[f+1],this.pixels[f+2])}static getUnpackVector(i){return iM[i]}get unpackVector(){return iM[this.encoding]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}static pack(i,l){const d=[0,0,0,0],f=o_.getUnpackVector(l);let y=Math.floor((i+f[3])/f[2]);return d[2]=y%256,y=Math.floor(y/256),d[1]=y%256,y=Math.floor(y/256),d[0]=y,d}getPixels(){return new aa({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,l,d){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let f=l*this.dim,y=l*this.dim+this.dim,x=d*this.dim,C=d*this.dim+this.dim;switch(l){case-1:f=y-1;break;case 1:y=f+1}switch(d){case-1:x=C-1;break;case 1:C=x+1}const I=-l*this.dim,R=-d*this.dim;for(let V=x;V<C;V++)for(let q=f;q<y;q++){const Z=4*this._idx(q,V),J=4*this._idx(q+I,V+R);this.pixels[Z+0]=i.pixels[J+0],this.pixels[Z+1]=i.pixels[J+1],this.pixels[Z+2]=i.pixels[J+2],this.pixels[Z+3]=i.pixels[J+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}an(o_,"DEMData"),an(nM,"DemMinMaxQuadTree",{omit:["dem"]});class j6{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,d){const f=i.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:l,timeout:void 0};if(d!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},d)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const d=i.wrapped().key,f=l===void 0?0:this.data[d].indexOf(l),y=this.data[d][f];return this.data[d].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(y.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const d in this.data)for(const f of this.data[d])i(f.value)||l.push(f);for(const d of l)this.remove(d.value.tileID,d)}}class Gh{constructor(i,l,d){this.func=i,this.mask=l,this.range=d}}Gh.ReadOnly=!1,Gh.ReadWrite=!0,Gh.disabled=new Gh(519,Gh.ReadOnly,[0,1]);const H1=7680;class W1{constructor(i,l,d,f,y,x){this.test=i,this.ref=l,this.mask=d,this.fail=f,this.depthFail=y,this.pass=x}}W1.disabled=new W1({func:519,mask:0},0,0,H1,H1,H1);class Js{constructor(i,l,d){this.blendFunction=i,this.blendColor=l,this.mask=d}}Js.Replace=[1,0],Js.disabled=new Js(Js.Replace,pi.transparent,[!1,!1,!1,!1]),Js.unblended=new Js(Js.Replace,pi.transparent,[!0,!0,!0,!0]),Js.alphaBlended=new Js([1,771],pi.transparent,[!0,!0,!0,!0]);const G1=1029,q1=2305;class Ss{constructor(i,l,d){this.enable=i,this.mode=l,this.frontFace=d}}Ss.disabled=new Ss(!1,G1,q1),Ss.backCCW=new Ss(!0,G1,q1),Ss.backCW=new Ss(!0,G1,2304),Ss.frontCW=new Ss(!0,1028,2304),Ss.frontCCW=new Ss(!0,1028,q1);class id extends ps{constructor(i,l,d){super(),this.id=i,this._onlySymbols=d,l.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new j6(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new F6,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return ct(this._tiles).map(i=>i.tileID).sort(oM).map(i=>i.key)}getRenderableIds(i){const l=[];for(const d in this._tiles)this._isIdRenderable(+d,i)&&l.push(this._tiles[d]);return i?l.sort((d,f)=>{const y=d.tileID,x=f.tileID,C=new S(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),I=new S(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-x.overscaledZ||I.y-C.y||I.x-C.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(oM).map(d=>d.key)}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,l){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=l),this._loadTile(d,this._tileLoaded.bind(this,d,i,l)))}_tileLoaded(i,l,d,f){if(f)if(i.state="errored",f.status!==404)this._source.fire(new zs(f,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const y=this.map.painter.terrain;this.update(this.transform,y.getScaledDemTileSize(),!0),y.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=or.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new _r("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const l=this.getRenderableIds();for(let f=0;f<l.length;f++){const y=l[f];if(i.neighboringTiles&&i.neighboringTiles[y]){const x=this.getTileByID(y);d(i,x),d(x,i)}}function d(f,y){if(!f.dem||f.dem.borderReady)return;f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0;let x=y.tileID.canonical.x-f.tileID.canonical.x;const C=y.tileID.canonical.y-f.tileID.canonical.y,I=Math.pow(2,f.tileID.canonical.z),R=y.tileID.key;x===0&&C===0||Math.abs(C)>1||(Math.abs(x)>1&&(Math.abs(x+I)===1?x+=I:Math.abs(x-I)===1&&(x-=I)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,x,C),f.neighboringTiles&&f.neighboringTiles[R]&&(f.neighboringTiles[R].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,d,f){for(const y in this._tiles){let x=this._tiles[y];if(f[y]||!x.hasData()||x.tileID.overscaledZ<=l||x.tileID.overscaledZ>d)continue;let C=x.tileID;for(;x&&x.tileID.overscaledZ>l+1;){const R=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[R.key],x&&x.hasData()&&(C=R)}let I=C;for(;I.overscaledZ>l;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){f[C.key]=C;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=i.overscaledZ-1;d>=l;d--){const f=i.scaledTo(d),y=this._getLoadedTile(f);if(y)return y}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,l){l=l||this._source.tileSize;const d=Math.ceil(i.width/l)+1,f=Math.ceil(i.height/l)+1,y=Math.floor(d*f*5),x=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,y):y,C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(C)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const d={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+l),d[y.tileID.key]=y}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(+f,this._tiles[f])}}update(i,l,d){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;let f;this.updateCacheSize(i,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(C=>new zo(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y)):(f=i.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(C=>this._source.hasTile(C)))):f=[];const y=this._updateRetainedTiles(f);if(aM(this._source.type)&&f.length!==0){const C={},I={},R=Object.keys(y);for(const q of R){const Z=y[q],J=this._tiles[q];if(!J||J.fadeEndTime&&J.fadeEndTime<=or.now())continue;const Q=this.findLoadedParent(Z,Math.max(Z.overscaledZ-id.maxOverzooming,this._source.minzoom));Q&&(this._addTile(Q.tileID),C[Q.tileID.key]=Q.tileID),I[q]=Z}const V=f[f.length-1].overscaledZ;for(const q in this._tiles){const Z=this._tiles[q];if(y[q]||!Z.hasData())continue;let J=Z.tileID;for(;J.overscaledZ>V;){J=J.scaledTo(J.overscaledZ-1);const Q=this._tiles[J.key];if(Q&&Q.hasData()&&I[J.key]){y[q]=Z.tileID;break}}}for(const q in C)y[q]||(this._coveredTiles[q]=!0,y[q]=C[q])}for(const C in y)this._tiles[C].clearFadeHold();const x=function(C,I){const R=[];for(const V in C)V in I||R.push(V);return R}(this._tiles,y);for(const C of x){const I=this._tiles[C];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+C)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const l={};if(i.length===0)return l;const d={},f=i.reduce((R,V)=>Math.min(R,V.overscaledZ),1/0),y=i[0].overscaledZ,x=Math.max(y-id.maxOverzooming,this._source.minzoom),C=Math.max(y+id.maxUnderzooming,this._source.minzoom),I={};for(const R of i){const V=this._addTile(R);l[R.key]=R,V.hasData()||f<this._source.maxzoom&&(I[R.key]=R)}this._retainLoadedChildren(I,f,C,l);for(const R of i){let V=this._tiles[R.key];if(V.hasData())continue;if(R.canonical.z>=this._source.maxzoom){const Z=R.children(this._source.maxzoom)[0],J=this.getTile(Z);if(J&&J.hasData()){l[Z.key]=Z;continue}}else{const Z=R.children(this._source.maxzoom);if(l[Z[0].key]&&l[Z[1].key]&&l[Z[2].key]&&l[Z[3].key])continue}let q=V.wasRequested();for(let Z=R.overscaledZ-1;Z>=x;--Z){const J=R.scaledTo(Z);if(d[J.key]||(d[J.key]=!0,V=this.getTile(J),!V&&q&&(V=this._addTile(J)),V&&(l[J.key]=J,q=V.wasRequested(),V.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let d,f=this._tiles[i].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}l.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(y),d)break;f=y}for(const y of l)this._loadedParentTiles[y]=d}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const d=Boolean(l);if(!d){const f=this.map?this.map.painter:null;l=new V1(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,f,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))}return l?(l.uses++,this._tiles[i.key]=l,d||this._source.fire(new _r("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=l.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,l,d){const f=[],y=this.transform;if(!y)return f;const x=y.projection.name==="globe",C=qs(y.center.lng);for(const I in this._tiles){const R=this._tiles[I];if(d&&R.clearQueryDebugViz(),R.holdingForFade())continue;let V;if(x){const q=R.tileID.canonical;if(q.z===0){const Z=[Math.abs(Oe(C,...Pm(q,-1))-C),Math.abs(Oe(C,...Pm(q,1))-C)];V=[0,2*Z.indexOf(Math.min(...Z))-1]}else{const Z=[Math.abs(Oe(C,...Pm(q,-1))-C),Math.abs(Oe(C,...Pm(q,0))-C),Math.abs(Oe(C,...Pm(q,1))-C)];V=[Z.indexOf(Math.min(...Z))-1]}}else V=[0];for(const q of V){const Z=i.containsTile(R,y,l,q);Z&&f.push(Z)}}return f}getVisibleCoordinates(i){const l=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);for(const d of l)d.projMatrix=this.transform.calculateProjMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(aM(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=or.now())return!0}return!1}setFeatureState(i,l,d){this._state.updateState(i=i||"_geojsonTileLayer",l,d)}removeFeatureState(i,l,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,d)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,d){const f=this._tiles[i];f&&f.setDependencies(l,d)}reloadTilesForDependencies(i,l){for(const d in this._tiles)this._tiles[d].hasDependency(i,l)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(i,l))}_preloadTiles(i,l){const d=new Map,f=Array.isArray(i)?i:[i],y=this.map.painter.terrain,x=this.usedForTerrain&&y?y.getScaledDemTileSize():this._source.tileSize;for(const C of f){const I=C.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const R of I)d.set(R.key,R);this.usedForTerrain&&C.updateElevation(!1)}Ze(Array.from(d.values()),(C,I)=>{const R=new V1(C,this._source.tileSize*C.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(R,V=>{this._source.type==="raster-dem"&&R.dem&&this._backfillDEM(R),I(V,R)})},l)}}function oM(s,i){const l=Math.abs(2*s.wrap)-+(s.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return s.overscaledZ-i.overscaledZ||d-l||i.canonical.y-s.canonical.y||i.canonical.x-s.canonical.x}function aM(s){return s==="raster"||s==="image"||s==="video"||s==="custom"}function Pm(s,i){const l=1<<s.z;return[s.x/l+i,(s.x+1)/l+i]}id.maxOverzooming=10,id.maxUnderzooming=3;class a_{constructor(i,l,d){this._demTile=i,this._dem=this._demTile.dem,this._scale=l,this._offset=d}static create(i,l,d){const f=d||i.findDEMTileFor(l);if(!f||!f.dem)return;const y=f.dem,x=f.tileID,C=1<<l.canonical.z-x.canonical.z;return new a_(f,f.tileSize/kn/C,[(l.canonical.x/C-x.canonical.x)*y.dim,(l.canonical.y/C-x.canonical.y)*y.dim])}tileCoordToPixel(i,l){const d=l*this._scale+this._offset[1],f=Math.floor(i*this._scale+this._offset[0]),y=Math.floor(d);return new S(f,y)}getElevationAt(i,l,d,f){const y=i*this._scale+this._offset[0],x=l*this._scale+this._offset[1],C=Math.floor(y),I=Math.floor(x),R=this._dem;return f=!!f,d?er(er(R.get(C,I,f),R.get(C,I+1,f),x-I),er(R.get(C+1,I,f),R.get(C+1,I+1,f),x-I),y-C):R.get(C,I,f)}getElevationAtPixel(i,l,d){return this._dem.get(i,l,!!d)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*Cs(1,i)*this._dem.stride}}class sM{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new wc(kn,16,0),this.featureIndexArray=new YT,this.promoteId=l}insert(i,l,d,f,y,x=0){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,f,y,x);const I=this.grid;for(let R=0;R<l.length;R++){const V=l[R],q=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<V.length;Z++){const J=V[Z];q[0]=Math.min(q[0],J.x),q[1]=Math.min(q[1],J.y),q[2]=Math.max(q[2],J.x),q[3]=Math.max(q[3],J.y)}q[0]<kn&&q[1]<kn&&q[2]>=0&&q[3]>=0&&I.insert(C,q[0],q[1],q[2],q[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new A1(new Em(this.rawTileData)).layers,this.sourceLayerCoder=new GA(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,l,d,f){this.loadVTLayers();const y=i.params||{},x=vh(y.filter),C=i.tileResult,I=i.transform,R=C.bufferedTilespaceBounds,V=this.grid.query(R.min.x,R.min.y,R.max.x,R.max.y,(Q,ie,de,Ce)=>O2(C.bufferedTilespaceGeometry,Q,ie,de,Ce));V.sort($6);let q=null;I.elevation&&V.length>0&&(q=a_.create(I.elevation,this.tileID));const Z={};let J;for(let Q=0;Q<V.length;Q++){const ie=V[Q];if(ie===J)continue;J=ie;const de=this.featureIndexArray.get(ie);let Ce=null;this.loadMatchingFeature(Z,de,x,y.layers,y.availableImages,l,d,f,(Fe,we,ze,$e=0)=>(Ce||(Ce=Ml(Fe,this.tileID.canonical,i.tileTransform)),we.queryIntersectsFeature(C,Fe,ze,Ce,this.z,i.transform,i.pixelPosMatrix,q,$e)))}return Z}loadMatchingFeature(i,l,d,f,y,x,C,I,R){const{featureIndex:V,bucketIndex:q,sourceLayerIndex:Z,layoutVertexArrayOffset:J}=l,Q=this.bucketLayerIDs[q];if(f&&!function(Fe,we){for(let ze=0;ze<Fe.length;ze++)if(we.indexOf(Fe[ze])>=0)return!0;return!1}(f,Q))return;const ie=this.sourceLayerCoder.decode(Z),de=this.vtLayers[ie].feature(V);if(d.needGeometry){const Fe=ed(de,!0);if(!d.filter(new et(this.tileID.overscaledZ),Fe,this.tileID.canonical))return}else if(!d.filter(new et(this.tileID.overscaledZ),de))return;const Ce=this.getId(de,ie);for(let Fe=0;Fe<Q.length;Fe++){const we=Q[Fe];if(f&&f.indexOf(we)<0)continue;const ze=x[we];if(!ze)continue;let $e={};Ce!==void 0&&I&&($e=I.getState(ze.sourceLayer||"_geojsonTileLayer",Ce));const Ne=nt({},C[we]);Ne.paint=lM(Ne.paint,ze.paint,de,$e,y),Ne.layout=lM(Ne.layout,ze.layout,de,$e,y);const st=!R||R(de,ze,$e,J);if(!st)continue;const rt=new qA(de,this.z,this.x,this.y,Ce);rt.layer=Ne;let Ct=i[we];Ct===void 0&&(Ct=i[we]=[]),Ct.push({featureIndex:V,feature:rt,intersectionZ:st})}}lookupSymbolFeatures(i,l,d,f,y,x,C,I){const R={};this.loadVTLayers();const V=vh(y);for(const q of i)this.loadMatchingFeature(R,{bucketIndex:d,sourceLayerIndex:f,featureIndex:q,layoutVertexArrayOffset:0},V,x,C,I,l);return R}loadFeature(i){const{featureIndex:l,sourceLayerIndex:d}=i;this.loadVTLayers();const f=this.sourceLayerCoder.decode(d),y=this.vtFeatures[f];if(y[l])return y[l];const x=this.vtLayers[f].feature(l);return y[l]=x,x}hasLayer(i){for(const l of this.bucketLayerIDs)for(const d of l)if(i===d)return!0;return!1}getId(i,l){let d=i.id;if(this.promoteId){const f=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];f!=null&&(d=i.properties[f]),typeof d=="boolean"&&(d=Number(d))}return d}}function lM(s,i,l,d,f){return mn(s,(y,x)=>{const C=i instanceof at?i.get(x):null;return C&&C.evaluate?C.evaluate(l,d,f):C})}function $6(s,i){return i-s}an(sM,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class cM{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.image=new Il({width:i,height:l}),this.positions={},this.uploaded=!1}getDash(i,l){const d=this.getKey(i,l);return this.positions[d]}trim(){const i=this.width,l=this.height=Ut(this.nextRow);this.image.resize({width:i,height:l})}getKey(i,l){return i.join(",")+l}getDashRanges(i,l,d){const f=[];let y=i.length%2==1?-i[i.length-1]*d:0,x=i[0]*d,C=!0;f.push({left:y,right:x,isDash:C,zeroLength:i[0]===0});let I=i[0];for(let R=1;R<i.length;R++){C=!C;const V=i[R];y=I*d,I+=V,x=I*d,f.push({left:y,right:x,isDash:C,zeroLength:V===0})}return f}addRoundDash(i,l,d){const f=l/2;for(let y=-d;y<=d;y++){const x=this.width*(this.nextRow+d+y);let C=0,I=i[C];for(let R=0;R<this.width;R++){R/I.right>1&&(I=i[++C]);const V=Math.abs(R-I.left),q=Math.abs(R-I.right),Z=Math.min(V,q);let J;const Q=y/d*(f+1);if(I.isDash){const ie=f-Math.abs(Q);J=Math.sqrt(Z*Z+ie*ie)}else J=f-Math.sqrt(Z*Z+Q*Q);this.image.data[x+R]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(i,l){for(let I=i.length-1;I>=0;--I){const R=i[I],V=i[I+1];R.zeroLength?i.splice(I,1):V&&V.isDash===R.isDash&&(V.left=R.left,i.splice(I,1))}const d=i[0],f=i[i.length-1];d.isDash===f.isDash&&(d.left=f.left-this.width,f.right=d.right+this.width);const y=this.width*this.nextRow;let x=0,C=i[x];for(let I=0;I<this.width;I++){I/C.right>1&&(C=i[++x]);const R=Math.abs(I-C.left),V=Math.abs(I-C.right),q=Math.min(R,V);this.image.data[y+I]=Math.max(0,Math.min(255,(C.isDash?q:-q)+l+128))}}addDash(i,l){const d=this.getKey(i,l);if(this.positions[d])return this.positions[d];const f=l==="round",y=f?7:0,x=2*y+1;if(this.nextRow+x>this.height)return Xe("LineAtlas out of space"),null;i.length===0&&i.push(1);let C=0;for(let V=0;V<i.length;V++)i[V]<0&&(Xe("Negative value is found in line dasharray, replacing values with 0"),i[V]=0),C+=i[V];if(C!==0){const V=this.width/C,q=this.getDashRanges(i,this.width,V);f?this.addRoundDash(q,V,y):this.addRegularDash(q,l==="square"?.5*V:0)}const I=this.nextRow+y;this.nextRow+=x;const R={tl:[I,y],br:[C,0]};return this.positions[d]=R,R}}an(cM,"LineAtlas");class uM{constructor(i){const l={},d=[];for(const C in i){const I=i[C],R=l[C]={};for(const V in I.glyphs){const q=I.glyphs[+V];if(!q||q.bitmap.width===0||q.bitmap.height===0)continue;const Z=q.metrics.localGlyph?2:1,J={x:0,y:0,w:q.bitmap.width+2*Z,h:q.bitmap.height+2*Z};d.push(J),R[V]=J}}const{w:f,h:y}=P1(d),x=new Il({width:f||1,height:y||1});for(const C in i){const I=i[C];for(const R in I.glyphs){const V=I.glyphs[+R];if(!V||V.bitmap.width===0||V.bitmap.height===0)continue;const q=l[C][R],Z=V.metrics.localGlyph?2:1;Il.copy(V.bitmap,x,{x:0,y:0},{x:q.x+Z,y:q.y+Z},V.bitmap)}}this.image=x,this.positions=l}}an(uM,"GlyphAtlas");class V6{constructor(i){this.tileID=new zo(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=rd(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,l,d,f,y){this.status="parsing",this.data=i,this.collisionBoxArray=new Kb;const x=new GA(Object.keys(i.layers).sort()),C=new sM(this.tileID,this.promoteId);C.bucketLayerIDs=[];const I={},R=new cM(256,256),V={featureIndex:C,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:R,availableImages:d},q=l.familiesBySource[this.source];for(const $e in q){const Ne=i.layers[$e];if(!Ne)continue;let st=!1,rt=!1;for(const mt of q[$e])mt[0].type==="symbol"?st=!0:rt=!0;if(this.isSymbolTile===!0&&!st||this.isSymbolTile===!1&&!rt)continue;Ne.version===1&&Xe(`Vector tile source "${this.source}" layer "${$e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ct=x.encode($e),Bt=[];for(let mt=0;mt<Ne.length;mt++){const Tt=Ne.feature(mt),It=C.getId(Tt,$e);Bt.push({feature:Tt,id:It,index:mt,sourceLayerIndex:Ct})}for(const mt of q[$e]){const Tt=mt[0];this.isSymbolTile!==void 0&&Tt.type==="symbol"!==this.isSymbolTile||Tt.minzoom&&this.zoom<Math.floor(Tt.minzoom)||Tt.maxzoom&&this.zoom>=Tt.maxzoom||Tt.visibility!=="none"&&(Z1(mt,this.zoom,d),(I[Tt.id]=Tt.createBucket({index:C.bucketLayerIDs.length,layers:mt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ct,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:d})).populate(Bt,V,this.tileID.canonical,this.tileTransform),C.bucketLayerIDs.push(mt.map(It=>It.id)))}}let Z,J,Q,ie;R.trim();const de={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ce=mn(V.glyphDependencies,$e=>Object.keys($e).map(Number));Object.keys(Ce).length?f.send("getGlyphs",{uid:this.uid,stacks:Ce},($e,Ne)=>{Z||(Z=$e,J=Ne,ze.call(this))},void 0,!1,de):J={};const Fe=Object.keys(V.iconDependencies);Fe.length?f.send("getImages",{icons:Fe,source:this.source,tileID:this.tileID,type:"icons"},($e,Ne)=>{Z||(Z=$e,Q=Ne,ze.call(this))},void 0,!1,de):Q={};const we=Object.keys(V.patternDependencies);function ze(){if(Z)return y(Z);if(J&&Q&&ie){const $e=new uM(J),Ne=new _A(Q,ie);for(const st in I){const rt=I[st];rt instanceof Pc?(Z1(rt.layers,this.zoom,d),m6(rt,J,$e.positions,Q,Ne.iconPositions,this.showCollisionBoxes,d,this.tileID.canonical,this.tileZoom,this.projection)):rt.hasPattern&&(rt instanceof Hy||rt instanceof Ny||rt instanceof _m)&&(Z1(rt.layers,this.zoom,d),rt.addFeatures(V,this.tileID.canonical,Ne.patternPositions,d,this.tileTransform))}this.status="done",y(null,{buckets:ct(I).filter(st=>!st.isEmpty()),featureIndex:C,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$e.image,lineAtlas:R,imageAtlas:Ne,glyphMap:this.returnDependencies?J:null,iconMap:this.returnDependencies?Q:null,glyphPositions:this.returnDependencies?$e.positions:null})}}we.length?f.send("getImages",{icons:we,source:this.source,tileID:this.tileID,type:"patterns"},($e,Ne)=>{Z||(Z=$e,ie=Ne,ze.call(this))},void 0,!1,de):ie={},ze.call(this)}}function Z1(s,i,l){const d=new et(i);for(const f of s)f.recalculate(d,l)}class dM{constructor(i){this.entries={},this.scheduler=i}request(i,l,d,f){const y=this.entries[i]=this.entries[i]||{callbacks:[]};if(y.result){const[x,C]=y.result;return this.scheduler?this.scheduler.add(()=>{f(x,C)},l):f(x,C),()=>{}}return y.callbacks.push(f),y.cancel||(y.cancel=d((x,C)=>{y.result=[x,C];for(const I of y.callbacks)this.scheduler?this.scheduler.add(()=>{I(x,C)},l):I(x,C);setTimeout(()=>delete this.entries[i],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(x=>x!==f),y.callbacks.length||(y.cancel(),delete this.entries[i]))}}}function hM(s,i,l){const d=JSON.stringify(s.request);return s.data&&(this.deduped.entries[d]={result:[null,s.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},f=>{const y=Tn(s.request,(x,C,I,R)=>{x?f(x):C&&f(null,{vectorTile:l?void 0:new A1(new Em(C)),rawData:C,cacheControl:I,expires:R})});return()=>{y.cancel(),f()}},i)}o.ARRAY_TYPE=oa,o.AUTH_ERR_MSG=dr,o.Aabb=Oo,o.Actor=class{constructor(s,i,l){this.target=s,this.parent=i,this.mapId=l,this.callbacks={},this.cancelCallbacks={},tn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=_t()?s:g,this.scheduler=new z6}send(s,i,l,d,f=!1,y){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=y,this.callbacks[x]=l);const C=yn(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:s,hasCallback:!!l,targetMapId:d,mustQueue:f,sourceMapId:this.mapId,data:$u(i,C)},C),{cancel:()=>{l&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(s){const i=s.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const d=this.cancelCallbacks[l];delete this.cancelCallbacks[l],d&&d.cancel()}else if(i.mustQueue||_t()){const d=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,i),d&&d.metadata||{type:"message"})}else this.processTask(l,i)}processTask(s,i){if(i.type==="<response>"){const l=this.callbacks[s];delete this.callbacks[s],l&&(i.error?l(Vu(i.error)):l(null,Vu(i.data)))}else{const l=yn(this.globalScope)?void 0:[],d=i.hasCallback?(y,x)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:y?$u(y):null,data:$u(x,l)},l)}:y=>{},f=Vu(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,f,d);else if(this.parent.getWorkerSource){const y=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,y[0],f.source)[y[1]](f,d)}else d(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=Vy,o.Color=pi,o.ColorMode=Js,o.CullFaceMode=Ss,o.DEMData=o_,o.DataConstantProperty=Ye,o.DedupedRequest=dM,o.DepthMode=Gh,o.EXTENT=kn,o.Elevation=class{isDataAvailableAtPoint(s){const i=this._source();if(this.isUsingMockSource()||!i||s.y<0||s.y>1)return!1;const l=i.getSource().maxzoom,d=1<<l,f=Math.floor(s.x),y=Math.floor((s.x-f)*d),x=Math.floor(s.y*d),C=this.findDEMTileFor(new zo(l,f,l,y,x));return!(!C||!C.dem)}getAtPointOrZero(s,i=0){return this.getAtPoint(s,i)||0}getAtPoint(s,i,l=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const d=this._source();if(!d||s.y<0||s.y>1)return i;const f=d.getSource().maxzoom,y=1<<f,x=Math.floor(s.x),C=s.x-x,I=new zo(f,x,f,Math.floor(C*y),Math.floor(s.y*y)),R=this.findDEMTileFor(I);if(!R||!R.dem)return i;const V=R.dem,q=1<<R.tileID.canonical.z,Z=(C*q-R.tileID.canonical.x)*V.dim,J=(s.y*q-R.tileID.canonical.y)*V.dim,Q=Math.floor(Z),ie=Math.floor(J);return(l?this.exaggeration():1)*er(er(V.get(Q,ie),V.get(Q,ie+1),J-ie),er(V.get(Q+1,ie),V.get(Q+1,ie+1),J-ie),Z-Q)}getAtTileOffset(s,i,l){const d=1<<s.canonical.z;return this.getAtPointOrZero(new Rh(s.wrap+(s.canonical.x+i/kn)/d,(s.canonical.y+l/kn)/d))}getAtTileOffsetFunc(s,i,l,d){return f=>{const y=this.getAtTileOffset(s,f.x,f.y),x=d.upVector(s.canonical,f.x,f.y);return wa(x,x,y*d.upVectorScale(s.canonical,i,l).metersToTile),x}}getForTilePoints(s,i,l,d){if(this.isUsingMockSource())return!1;const f=a_.create(this,s,d);return!!f&&(i.forEach(y=>{y[2]=this.exaggeration()*f.getElevationAt(y[0],y[1],l)}),!0)}getMinMaxForTile(s){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(s);if(!i||!i.dem)return null;const l=i.dem.tree,d=i.tileID,f=1<<s.canonical.z-d.canonical.z;let y=s.canonical.x/f-d.canonical.x,x=s.canonical.y/f-d.canonical.y,C=0;for(let I=0;I<s.canonical.z-d.canonical.z&&!l.leaves[C];I++){y*=2,x*=2;const R=2*Math.floor(x)+Math.floor(y);C=l.childOffsets[C]+R,y%=1,x%=1}return{min:this.exaggeration()*l.minimums[C],max:this.exaggeration()*l.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,i,l){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=zs,o.EvaluationParameters=et,o.Event=_r,o.Evented=ps,o.FillExtrusionBucket=_m,o.Frustum=l1,o.FrustumCorners=s1,o.GLOBE_RADIUS=Ws,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(s){this._createGrid(s),this._createPoles(s)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const s of this._poleSegments)s.destroy();for(const s of this._gridSegments)s.withSkirts.destroy(),s.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const s of this._wireframeSegments)s.destroy()}}_fillGridMeshWithLods(s,i){const l=new gn,d=new co,f=[],y=s+1+2,x=i[0]+1,C=i[0]+1+(1+i.length),I=(R,V,q)=>{let Z=R===y-1?R-2:R===0?R:R-1;return Z+=q?24575:0,[Z,V]};for(let R=0;R<y;++R)l.emplaceBack(...I(R,0,!0));for(let R=0;R<x;++R)for(let V=0;V<y;++V)l.emplaceBack(...I(V,R,(V===0||V===y-1)&&!0));for(let R=0;R<i.length;++R){const V=i[R];for(let q=0;q<y;++q)l.emplaceBack(...I(q,V,!0))}for(let R=0;R<i.length;++R){const V=d.length,q=i[R]+1+2,Z=new co;for(let ie=0;ie<q-1;ie++){const de=ie===q-2,Ce=de?y*(C-i.length+R-ie):y;for(let Fe=0;Fe<y-1;Fe++){const we=ie*y+Fe;ie===0||de||Fe===0||Fe===y-2?(Z.emplaceBack(we+1,we,we+Ce),Z.emplaceBack(we+Ce,we+Ce+1,we+1)):(d.emplaceBack(we+1,we,we+Ce),d.emplaceBack(we+Ce,we+Ce+1,we+1))}}const J=Ei.simpleSegment(0,V,l.length,d.length-V);for(let ie=0;ie<Z.uint16.length;ie+=3)d.emplaceBack(Z.uint16[ie],Z.uint16[ie+1],Z.uint16[ie+2]);const Q=Ei.simpleSegment(0,V,l.length,d.length-V);f.push({withoutSkirts:J,withSkirts:Q})}return{vertices:l,indices:d,segments:f}}_createGrid(s){const i=this._fillGridMeshWithLods(Ju,cm);this._gridSegments=i.segments,this._gridBuffer=s.createVertexBuffer(i.vertices,lm.members),this._gridIndexBuffer=s.createIndexBuffer(i.indices,!0)}_createPoles(s){const i=new co;for(let f=0;f<=Ju;f++)i.emplaceBack(0,f+1,f+2);this._poleIndexBuffer=s.createIndexBuffer(i,!0);const l=new ia,d=new ia;this._poleSegments=[];for(let f=0,y=0;f<5;f++){const x=360/(1<<f);l.emplaceBack(0,-Ws,0,.5,0),d.emplaceBack(0,-Ws,0,.5,1);for(let C=0;C<=Ju;C++){const I=C/Ju,R=er(0,x,I),[V,q,Z]=Ih(zF,BF,R,Ws);l.emplaceBack(V,q,Z,I,0),d.emplaceBack(V,q,Z,I,1)}this._poleSegments.push(Ei.simpleSegment(y,0,66,64)),y+=66}this._poleNorthVertexBuffer=s.createVertexBuffer(l,v2,!1),this._poleSouthVertexBuffer=s.createVertexBuffer(d,v2,!1)}getGridBuffers(s,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[s].withSkirts:this._gridSegments[s].withoutSkirts]}getPoleBuffers(s){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[s]]}getWirefameBuffers(s,i){if(!this._wireframeSegments){const l=new Vs,d=Ju,f=d+1+2,y=1;this._wireframeSegments=[];for(let x=0,C=0;x<cm.length;x++){const I=cm[x];for(let V=y;V<I+y;V++)for(let q=y;q<d+y;q++){const Z=V*f+q;l.emplaceBack(Z,Z+1),l.emplaceBack(Z,Z+f),l.emplaceBack(Z,Z+f+1)}const R=I*d*3;this._wireframeSegments.push(Ei.simpleSegment(0,C,(I+1)*f,R)),C+=R}this._wireframeIndexBuffer=s.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=Vh,o.ImagePosition=D1,o.LivePerformanceUtils=Ue,o.LngLat=nr,o.LngLatBounds=Ac,o.LocalGlyphMode=O1,o.MAX_MERCATOR_LATITUDE=ho,o.MercatorCoordinate=Rh,o.ONE_EM=po,o.OverscaledTileID=zo,o.PerformanceMarkers=Me,o.Properties=Ot,o.RGBAImage=aa,o.Ray=a1,o.RequestManager=class{constructor(s,i,l){this._transformRequestFn=s,this._customAccessToken=i,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const s=function(){let i="";for(let l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",W,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,i){return this._transformRequestFn&&this._transformRequestFn(s,i)||{url:s}}normalizeStyleURL(s,i){if(!Pr(s))return s;const l=ai(s);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeGlyphsURL(s,i){if(!Pr(s))return s;const l=ai(s);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeSourceURL(s,i,l,d){if(!Pr(s))return s;const f=ai(s);return f.path=`/v4/${f.authority}.json`,f.params.push("secure"),l&&f.params.push(`language=${l}`),d&&f.params.push(`worldview=${d}`),this._makeAPIURL(f,this._customAccessToken||i)}normalizeSpriteURL(s,i,l,d){const f=ai(s);return Pr(s)?(f.path=`/styles/v1${f.path}/sprite${i}${l}`,this._makeAPIURL(f,this._customAccessToken||d)):(f.path+=`${i}${l}`,si(f))}normalizeTileURL(s,i,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!Pr(s))return s;const d=ai(s);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||l&&d.authority!=="raster"&&l===512?"@2x":""}${z.supported?".webp":"$1"}`),d.authority==="raster"?d.path=`/${D.RASTER_URL_PREFIX}${d.path}`:(d.path=d.path.replace(/^.+\/v4\//,"/"),d.path=`/${D.TILE_URL_VERSION}${d.path}`);const f=this._customAccessToken||function(y){for(const x of y){const C=x.match(/^access_token=(.*)$/);if(C)return C[1]}return null}(d.params)||D.ACCESS_TOKEN;return D.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&d.params.push(`sku=${this._skuToken}`),this._makeAPIURL(d,f)}canonicalizeTileURL(s,i){const l=ai(s);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return s;let d="mapbox://";l.path.match(/^\/raster\/v1\//)?d+=`raster/${l.path.replace(`/${D.RASTER_URL_PREFIX}/`,"")}`:d+=`tiles/${l.path.replace(`/${D.TILE_URL_VERSION}/`,"")}`;let f=l.params;return i&&(f=f.filter(y=>!y.match(/^access_token=/))),f.length&&(d+=`?${f.join("&")}`),d}canonicalizeTileset(s,i){const l=!!i&&Pr(i),d=[];for(const f of s.tiles||[])Yn(f)?d.push(this.canonicalizeTileURL(f,l)):d.push(f);return d}_makeAPIURL(s,i){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",d=ai(D.API_URL);if(s.protocol=d.protocol,s.authority=d.authority,s.protocol==="http"){const f=s.params.indexOf("secure");f>=0&&s.params.splice(f,1)}if(d.path!=="/"&&(s.path=`${d.path}${s.path}`),!D.REQUIRE_ACCESS_TOKEN)return si(s);if(i=i||D.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return s.params=s.params.filter(f=>f.indexOf("access_token")===-1),s.params.push(`access_token=${i||""}`),si(s)}},o.ResourceType=yt,o.SegmentVector=Ei,o.SourceCache=id,o.StencilMode=W1,o.StructArrayLayout1ui2=Hs,o.StructArrayLayout2f1f2i16=so,o.StructArrayLayout2i4=gn,o.StructArrayLayout2ui4=Vs,o.StructArrayLayout3f12=lo,o.StructArrayLayout3ui6=co,o.StructArrayLayout4i8=pr,o.StructArrayLayout5f20=ia,o.Texture=Im,o.Tile=V1,o.Transitionable=jt,o.Uniform1f=Sy,o.Uniform1i=class extends kl{constructor(s){super(s),this.current=0}set(s,i,l){this.fetchUniformLocation(s,i)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.Uniform2f=class extends kl{constructor(s){super(s),this.current=[0,0]}set(s,i,l){this.fetchUniformLocation(s,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},o.Uniform3f=class extends kl{constructor(s){super(s),this.current=[0,0,0]}set(s,i,l){this.fetchUniformLocation(s,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},o.Uniform4f=t2,o.UniformColor=n2,o.UniformMatrix2f=class extends kl{constructor(s){super(s),this.current=bF}set(s,i,l){if(this.fetchUniformLocation(s,i)){for(let d=0;d<4;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}}},o.UniformMatrix3f=class extends kl{constructor(s){super(s),this.current=xF}set(s,i,l){if(this.fetchUniformLocation(s,i)){for(let d=0;d<9;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.UniformMatrix4f=class extends kl{constructor(s){super(s),this.current=_F}set(s,i,l){if(this.fetchUniformLocation(s,i)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let d=1;d<16;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},o.UnwrappedTileID=aA,o.ValidationError=Qt,o.VectorTileFeature=jy,o.VectorTileWorkerSource=class extends ps{constructor(s,i,l,d,f){super(),this.actor=s,this.layerIndex=i,this.availableImages=l,this.loadVectorData=f||hM,this.loading={},this.loaded={},this.deduped=new dM(s.scheduler),this.isSpriteLoaded=d,this.scheduler=s.scheduler}loadTile(s,i){const l=s.uid,d=s&&s.request,f=d&&d.collectResourceTiming,y=this.loading[l]=new V6(s);y.abort=this.loadVectorData(s,(x,C)=>{const I=!this.loading[l];if(delete this.loading[l],I||x||!C)return y.status="done",I||(this.loaded[l]=y),i(x);const R=C.rawData,V={};C.expires&&(V.expires=C.expires),C.cacheControl&&(V.cacheControl=C.cacheControl),y.vectorTile=C.vectorTile||new A1(new Em(R));const q=()=>{y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,(Z,J)=>{if(Z||!J)return i(Z);const Q={};if(f){const ie=Zt(d);ie.length>0&&(Q.resourceTiming=JSON.parse(JSON.stringify(ie)))}i(null,nt({rawTileData:R.slice(0)},J,V,Q))})};this.isSpriteLoaded?q():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(q,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):q()}),this.loaded=this.loaded||{},this.loaded[l]=y})}reloadTile(s,i){const l=this.loaded,d=s.uid,f=this;if(l&&l[d]){const y=l[d];y.showCollisionBoxes=s.showCollisionBoxes,y.enableTerrain=!!s.enableTerrain,y.projection=s.projection,y.tileTransform=rd(s.tileID.canonical,s.projection);const x=(C,I)=>{const R=y.reloadCallback;R&&(delete y.reloadCallback,y.parse(y.vectorTile,f.layerIndex,this.availableImages,f.actor,R)),i(C,I)};y.status==="parsing"?y.reloadCallback=x:y.status==="done"&&(y.vectorTile?y.parse(y.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(s,i){const l=s.uid,d=this.loading[l];d&&(d.abort&&d.abort(),delete this.loading[l]),i()}removeTile(s,i){const l=this.loaded,d=s.uid;l&&l[d]&&delete l[d],i()}},o.WritingMode=Ca,o.ZoomDependentExpression=Cl,o.add=Al,o.addDynamicAttributes=n_,o.adjoint=function(s,i){var l=i[0],d=i[1],f=i[2],y=i[3],x=i[4],C=i[5],I=i[6],R=i[7],V=i[8];return s[0]=x*V-C*R,s[1]=f*R-d*V,s[2]=d*C-f*x,s[3]=C*I-y*V,s[4]=l*V-f*I,s[5]=f*y-l*C,s[6]=y*R-x*I,s[7]=d*I-l*R,s[8]=l*x-d*y,s},o.asyncAll=Ze,o.bezier=Re,o.bindAll=tn,o.boundsAttributes=XA,o.bufferConvexPolygon=function(s,i){const l=[];for(let d=0;d<s.length;d++){const f=pt(d-1,-1,s.length-1),y=pt(d+1,-1,s.length-1),x=s[d],C=s[y],I=s[f].sub(x).unit(),R=C.sub(x).unit(),V=R.angleWithSep(I.x,I.y),q=I.add(R).unit().mult(-1*i/Math.sin(V/2));l.push(x.add(q))}return l},o.cacheEntryPossiblyAdded=function(s){Se++,Se>re&&(s.getActor().send("enforceCacheSizeLimit",Je),Se=0)},o.calculateGlobeLabelMatrix=function(s,i){const{x:l,y:d}=s.point,f=E2(l,d,s.worldSize/s._pixelsPerMercatorPixel,0,0);return Xu(f,f,d1(Gs(i)))},o.calculateGlobeMatrix=function(s){const{x:i,y:l}=s.point,{lng:d,lat:f}=s._center;return E2(i,l,s.worldSize,d,f)},o.calculateGlobeMercatorMatrix=function(s){const i=s.pixelsPerMeter,l=i/Cs(1,s.center.lat),d=ws(new Float64Array(16));return nm(d,d,[s.point.x,s.point.y,0]),Ku(d,d,[l,l,i]),Float32Array.from(d)},o.circumferenceAtLatitude=p1,o.clamp=Oe,o.clearTileCache=function(s){if(!ce())return;const i=g.caches.delete(In);s&&i.catch(s).then(()=>s())},o.clipLine=PA,o.clone=function(s){var i=new oa(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},o.clone$1=An,o.collisionCircleLayout=jN,o.config=D,o.conjugate=function(s,i){return s[0]=-i[0],s[1]=-i[1],s[2]=-i[2],s[3]=i[3],s},o.create=function(){var s=new oa(16);return oa!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},o.create$1=i2,o.createExpression=yc,o.createLayout=hn,o.createStyleLayer=function(s){return s.type==="custom"?new D6(s):new L6[s.type](s)},o.cross=o1,o.degToRad=ne,o.distance=function(s,i){return Math.hypot(i[0]-s[0],i[1]-s[1],i[2]-s[2])},o.div=function(s,i,l){return s[0]=i[0]/l[0],s[1]=i[1]/l[1],s[2]=i[2]/l[2],s},o.dot=Ha,o.earthRadius=hm,o.ease=Be,o.easeCubicInOut=fe,o.ecefToLatLng=function([s,i,l]){const d=Math.hypot(s,i,l),f=Math.atan2(s,l),y=.5*Math.PI-Math.acos(-i/d);return new nr(ae(f),ae(y))},o.emitValidationErrors=uy,o.endsWith=un,o.enforceCacheSizeLimit=function(s){Pe(),Xn&&Xn.then(i=>{i.keys().then(l=>{for(let d=0;d<l.length-s;d++)i.delete(l[d])})})},o.evaluateSizeForFeature=Wy,o.evaluateSizeForZoom=Nh,o.evaluateVariableOffset=zA,o.evented=De,o.exactEquals=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]},o.exactEquals$1=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]},o.exported=or,o.exported$1=z,o.extend=nt,o.extend$1=fs,o.fillExtrusionHeightLift=rA,o.filterObject=fn,o.fromMat4=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[4],s[4]=i[5],s[5]=i[6],s[6]=i[8],s[7]=i[9],s[8]=i[10],s},o.fromQuat=function(s,i){var l=i[0],d=i[1],f=i[2],y=i[3],x=l+l,C=d+d,I=f+f,R=l*x,V=d*x,q=d*C,Z=f*x,J=f*C,Q=f*I,ie=y*x,de=y*C,Ce=y*I;return s[0]=1-q-Q,s[1]=V+Ce,s[2]=Z-de,s[3]=0,s[4]=V-Ce,s[5]=1-R-Q,s[6]=J+ie,s[7]=0,s[8]=Z+de,s[9]=J-ie,s[10]=1-R-q,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},o.fromRotation=function(s,i){var l=Math.sin(i),d=Math.cos(i);return s[0]=d,s[1]=l,s[2]=0,s[3]=-l,s[4]=d,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},o.fromScaling=a2,o.furthestTileCorner=function(s){const i=Math.round((s+45+360)%360/90)%4;return oe[i]},o.getAABBPointSquareDist=function(s,i,l){let d=0;for(let f=0;f<2;++f){const y=l?l[f]:0;s[f]>y&&(d+=(s[f]-y)*(s[f]-y)),i[f]<y&&(d+=(y-i[f])*(y-i[f]))}return d},o.getAnchorAlignment=L1,o.getAnchorJustification=B1,o.getBounds=function(s){let i=1/0,l=1/0,d=-1/0,f=-1/0;for(const y of s)i=Math.min(i,y.x),l=Math.min(l,y.y),d=Math.max(d,y.x),f=Math.max(f,y.y);return{min:new S(i,l),max:new S(d,f)}},o.getColumn=Ln,o.getGridMatrix=function(s,i,l,d){const f=i.getNorth(),y=i.getSouth(),x=i.getWest(),C=i.getEast(),I=1<<s.z,R=C-x,V=f-y,q=R/Ju,Z=-V/cm[l],J=[0,q,0,Z,0,0,f,x,0];if(s.z>0){const Q=180/d;o2(J,J,[Q/R+1,0,0,0,Q/V+1,0,-.5*Q/q,.5*Q/Z,1])}return J[2]=I,J[5]=s.x,J[8]=s.y,J},o.getImage=Sr,o.getJSON=function(s,i){return Bn(nt(s,{type:"json"}),i)},o.getLatitudinalLod=function(s){const i=ho-5;s=Oe(s,-i,i)/i*90;const l=Math.pow(Math.abs(Math.sin(ne(s))),3);return Math.round(l*(cm.length-1))},o.getMapSessionAPI=Ke,o.getPerformanceMeasurement=Zt,o.getProjection=HA,o.getRTLTextPluginStatus=He,o.getReferrer=Kt,o.getTilePoint=function(s,{x:i,y:l},d=0){return new S(((i-d)*s.scale-s.x)*kn,(l*s.scale-s.y)*kn)},o.getTileVec3=function(s,i,l=0){return Mh(((i.x-l)*s.scale-s.x)*kn,(i.y*s.scale-s.y)*kn,T2(i.z,i.y))},o.getVideo=function(s,i){const l=g.document.createElement("video");l.muted=!0,l.onloadstart=function(){i(null,l)};for(let d=0;d<s.length;d++){const f=g.document.createElement("source");Vt(s[d])||(l.crossOrigin="Anonymous"),f.src=s[d],l.appendChild(f)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(s){const i=[0,0,0],l=ws(new Float64Array(16));return Xu(l,s.pixelMatrix,s.globeMatrix),fi(i,i,l),new S(i[0],i[1])},o.globeDenormalizeECEF=d1,o.globeECEFOrigin=function(s,i){const l=[0,0,0];return fi(l,l,dm(Gs(i.canonical))),fi(l,l,s),l},o.globeMetersToEcef=My,o.globeNormalizeECEF=dm,o.globePixelsToTileUnits=function(s,i){return kn/(512*Math.pow(2,s))*Py(Gs(i))},o.globePoleMatrixForTile=function(s,i,l){const d=ws(new Float64Array(16)),f=(i/(1<<s)-.5)*Math.PI*2;return Ay(d,l.globeMatrix,f),Float32Array.from(d)},o.globeTileBounds=Gs,o.globeTiltAtLngLat=C2,o.globeToMercatorTransition=Dh,o.globeUseCustomAntiAliasing=function(s,i,l){const d=Dh(l.zoom),f=s.style.map._antialias,y=!!i.extStandardDerivatives,x=i.extStandardDerivativesForceOff||s.terrain&&s.terrain.exaggeration()>0;return d===0&&!f&&!x&&y},o.identity=ws,o.identity$1=f2,o.invert=t1,o.isFullscreen=function(){return!!g.document.fullscreenElement||!!g.document.webkitFullscreenElement},o.isLngLatBehindGlobe=h1,o.isMapAuthenticated=function(s){return qe.has(s)},o.isMapboxURL=Pr,o.isSafariWithAntialiasingBug=function(s){const i=s.navigator?s.navigator.userAgent:null;return!!yn(s)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=uo,o.latLngToECEF=Ph,o.len=IF,o.length=rm,o.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},o.lngFromMercatorX=Ea,o.loadVectorTile=hM,o.makeRequest=Bn,o.mapValue=function(s,i,l,d,f){return Oe((s-i)/(l-i)*(f-d)+d,d,f)},o.mercatorScale=A2,o.mercatorXfromLng=qs,o.mercatorYfromLat=Zs,o.mercatorZfromAltitude=Cs,o.mul=AF,o.mul$1=MF,o.multiply=Xu,o.multiply$1=o2,o.multiply$2=c2,o.nextPowerOfTwo=Ut,o.normalize=Lo,o.normalize$1=PF,o.normalize$2=h2,o.number=er,o.ortho=function(s,i,l,d,f,y,x){var C=1/(i-l),I=1/(d-f),R=1/(y-x);return s[0]=-2*C,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*I,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*R,s[11]=0,s[12]=(i+l)*C,s[13]=(f+d)*I,s[14]=(x+y)*R,s[15]=1,s},o.pbf=Em,o.perspective=function(s,i,l,d,f){var y,x=1/Math.tan(i/2);return s[0]=x/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,f!=null&&f!==1/0?(s[10]=(f+d)*(y=1/(d-f)),s[14]=2*f*d*y):(s[10]=-1,s[14]=-2*d),s},o.pick=function(s,i){const l={};for(let d=0;d<i.length;d++){const f=i[d];f in s&&(l[f]=s[f])}return l},o.plugin=Ge,o.pointGeometry=S,o.polesInViewport=function(s){const i=ws(new Float64Array(16));Xu(i,s.pixelMatrix,s.globeMatrix);const l=[0,Wa,0],d=[0,Ga,0];return fi(l,l,i),fi(d,d,i),[l[0]>0&&l[0]<=s.width&&l[1]>0&&l[1]<=s.height&&!h1(s,new nr(s.center.lat,90)),d[0]>0&&d[0]<=s.width&&d[1]>0&&d[1]<=s.height&&!h1(s,new nr(s.center.lat,-90))]},o.polygonContainsPoint=td,o.polygonIntersectsBox=O2,o.polygonIntersectsPolygon=P2,o.polygonizeBounds=function(s,i,l=0,d=!0){const f=new S(l,l),y=s.sub(f),x=i.add(f),C=[y,new S(x.x,y.y),x,new S(y.x,x.y)];return d&&C.push(y.clone()),C},o.posAttributes=lm,o.postMapLoadEvent=pe,o.postPerformanceEvent=We,o.postTurnstileEvent=te,o.potpack=P1,o.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},o.radToDeg=ae,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(s){return s({pluginStatus:ye,pluginURL:le}),De.on("pluginStateChange",s),s},o.removeAuthState=function(s){qe.delete(s)},o.renderColorRamp=b1,o.resample=M2,o.rotateX=n1,o.rotateX$1=m2,o.rotateY=Ay,o.rotateY$1=g2,o.rotateZ=function(s,i,l){var d=Math.sin(l),f=Math.cos(l),y=i[0],x=i[1],C=i[2],I=i[3],R=i[4],V=i[5],q=i[6],Z=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*f+R*d,s[1]=x*f+V*d,s[2]=C*f+q*d,s[3]=I*f+Z*d,s[4]=R*f-y*d,s[5]=V*f-x*d,s[6]=q*f-C*d,s[7]=Z*f-I*d,s},o.rotateZ$1=function(s,i,l){l*=.5;var d=i[0],f=i[1],y=i[2],x=i[3],C=Math.sin(l),I=Math.cos(l);return s[0]=d*I+f*C,s[1]=f*I-d*C,s[2]=y*I+x*C,s[3]=x*I-y*C,s},o.scale=Ku,o.scale$1=d2,o.scale$2=wa,o.scaleAndAdd=am,o.set=function(s,i,l,d){return s[0]=i,s[1]=l,s[2]=d,s},o.setCacheLimits=function(s,i){Je=s,re=i},o.setColumn=function(s,i,l){s[4*i+0]=l[0],s[4*i+1]=l[1],s[4*i+2]=l[2],s[4*i+3]=l[3]},o.setRTLTextPlugin=function(s,i,l=!1){if(ye===ue||ye===he||ye===me)throw new Error("setRTLTextPlugin cannot be called multiple times.");le=or.resolveURL(s),ye=ue,ge=i,ke(),l||je()},o.smoothstep=Ee,o.spec=Et,o.squaredLength=function(s){var i=s[0],l=s[1],d=s[2];return i*i+l*l+d*d},o.storeAuthState=function(s,i){i?qe.add(s):qe.delete(s)},o.sub=Es,o.subtract=i1,o.symbolSize=$N,o.tileAABB=function(s,i,l,d,f,y,x,C,I){if(I.name==="globe")return OF(s,i,new Vy(l,d,f));const R=rd({z:l,x:d,y:f},I);return new Oo([(y+R.x/R.scale)*i,i*(R.y/R.scale),x],[(y+R.x2/R.scale)*i,i*(R.y2/R.scale),C])},o.tileCornersToBounds=Iy,o.tileTransform=rd,o.transformMat3=function(s,i,l){var d=i[0],f=i[1],y=i[2];return s[0]=d*l[0]+f*l[3]+y*l[6],s[1]=d*l[1]+f*l[4]+y*l[7],s[2]=d*l[2]+f*l[5]+y*l[8],s},o.transformMat4=fi,o.transformMat4$1=Yu,o.transformQuat=u2,o.transitionTileAABBinECEF=x2,o.translate=nm,o.transpose=function(s,i){if(s===i){var l=i[1],d=i[2],f=i[5];s[1]=i[3],s[2]=i[6],s[3]=l,s[5]=i[7],s[6]=d,s[7]=f}else s[0]=i[0],s[1]=i[3],s[2]=i[6],s[3]=i[1],s[4]=i[4],s[5]=i[7],s[6]=i[2],s[7]=i[5],s[8]=i[8];return s},o.triggerPluginCompletionEvent=Te,o.uniqueId=be,o.updateGlobeVertexNormal=function(s,i,l,d,f){const y=5*i+2;s.float32[y+0]=l,s.float32[y+1]=d,s.float32[y+2]=f},o.validateCustomStyleLayer=function(s){const i=[],l=s.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=s=>vs(Gf(s)),o.validateFog=s=>vs(sy(s)),o.validateLayer=s=>vs(Zf(s)),o.validateLight=s=>vs(ay(s)),o.validateSource=s=>vs(Uu(s)),o.validateStyle=ly,o.validateTerrain=s=>vs(Xf(s)),o.values=ct,o.vectorTile=Uy,o.version=b,o.warnOnce=Xe,o.window=g,o.wrap=pt}),u(["./shared"],function(o){function g(_e){if(typeof _e=="number"||typeof _e=="boolean"||typeof _e=="string"||_e==null)return JSON.stringify(_e);if(Array.isArray(_e)){let se="[";for(const pe of _e)se+=`${g(pe)},`;return`${se}]`}let te="{";for(const se of Object.keys(_e).sort())te+=`${se}:${g(_e[se])},`;return`${te}}`}function b(_e){let te="";for(const se of o.refProperties)te+=`/${g(_e[se])}`;return te}class A{constructor(te){this.keyCache={},te&&this.replace(te)}replace(te){this._layerConfigs={},this._layers={},this.update(te,[])}update(te,se){for(const Ae of te)this._layerConfigs[Ae.id]=Ae,(this._layers[Ae.id]=o.createStyleLayer(Ae)).compileFilter(),this.keyCache[Ae.id]&&delete this.keyCache[Ae.id];for(const Ae of se)delete this.keyCache[Ae],delete this._layerConfigs[Ae],delete this._layers[Ae];this.familiesBySource={};const pe=function(Ae,We){const Qe={};for(let qe=0;qe<Ae.length;qe++){const Me=We&&We[Ae[qe].id]||b(Ae[qe]);We&&(We[Ae[qe].id]=Me);let Ue=Qe[Me];Ue||(Ue=Qe[Me]=[]),Ue.push(Ae[qe])}const Ke=[];for(const qe in Qe)Ke.push(Qe[qe]);return Ke}(o.values(this._layerConfigs),this.keyCache);for(const Ae of pe){const We=Ae.map(bt=>this._layers[bt.id]),Qe=We[0];if(Qe.visibility==="none")continue;const Ke=Qe.source||"";let qe=this.familiesBySource[Ke];qe||(qe=this.familiesBySource[Ke]={});const Me=Qe.sourceLayer||"_geojsonTileLayer";let Ue=qe[Me];Ue||(Ue=qe[Me]=[]),Ue.push(We)}}}class D{loadTile(te,se){const{uid:pe,encoding:Ae,rawImageData:We,padding:Qe,buildQuadTree:Ke}=te,qe=o.window.ImageBitmap&&We instanceof o.window.ImageBitmap?this.getImageData(We,Qe):We;se(null,new o.DEMData(pe,qe,Ae,Qe<1,Ke))}getImageData(te,se){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(te.width,te.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=te.width,this.offscreenCanvas.height=te.height,this.offscreenCanvasContext.drawImage(te,0,0,te.width,te.height);const pe=this.offscreenCanvasContext.getImageData(-se,-se,te.width+2*se,te.height+2*se);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),pe}}var z=function _e(te,se){var pe,Ae=te&&te.type;if(Ae==="FeatureCollection")for(pe=0;pe<te.features.length;pe++)_e(te.features[pe],se);else if(Ae==="GeometryCollection")for(pe=0;pe<te.geometries.length;pe++)_e(te.geometries[pe],se);else if(Ae==="Feature")_e(te.geometry,se);else if(Ae==="Polygon")F(te.coordinates,se);else if(Ae==="MultiPolygon")for(pe=0;pe<te.coordinates.length;pe++)F(te.coordinates[pe],se);return te};function F(_e,te){if(_e.length!==0){N(_e[0],te);for(var se=1;se<_e.length;se++)N(_e[se],!te)}}function N(_e,te){for(var se=0,pe=0,Ae=0,We=_e.length,Qe=We-1;Ae<We;Qe=Ae++){var Ke=(_e[Ae][0]-_e[Qe][0])*(_e[Qe][1]+_e[Ae][1]),qe=se+Ke;pe+=Math.abs(se)>=Math.abs(Ke)?se-qe+Ke:Ke-qe+se,se=qe}se+pe>=0!=!!te&&_e.reverse()}const T=o.VectorTileFeature.prototype.toGeoJSON;class H{constructor(te){this._feature=te,this.extent=o.EXTENT,this.type=te.type,this.properties=te.tags,"id"in te&&!isNaN(te.id)&&(this.id=parseInt(te.id,10))}loadGeometry(){if(this._feature.type===1){const te=[];for(const se of this._feature.geometry)te.push([new o.pointGeometry(se[0],se[1])]);return te}{const te=[];for(const se of this._feature.geometry){const pe=[];for(const Ae of se)pe.push(new o.pointGeometry(Ae[0],Ae[1]));te.push(pe)}return te}}toGeoJSON(te,se,pe){return T.call(this,te,se,pe)}}class j{constructor(te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=te.length,this._features=te}feature(te){return new H(this._features[te])}}var W={},B={get exports(){return W},set exports(_e){W=_e}},O=o.pointGeometry,S=o.vectorTile.VectorTileFeature,w=P;function P(_e,te){this.options=te||{},this.features=_e,this.length=_e.length}function Y(_e,te){this.id=typeof _e.id=="number"?_e.id:void 0,this.type=_e.type,this.rawGeometry=_e.type===1?[_e.geometry]:_e.geometry,this.properties=_e.tags,this.extent=te||4096}P.prototype.feature=function(_e){return new Y(this.features[_e],this.options.extent)},Y.prototype.loadGeometry=function(){var _e=this.rawGeometry;this.geometry=[];for(var te=0;te<_e.length;te++){for(var se=_e[te],pe=[],Ae=0;Ae<se.length;Ae++)pe.push(new O(se[Ae][0],se[Ae][1]));this.geometry.push(pe)}return this.geometry},Y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _e=this.geometry,te=1/0,se=-1/0,pe=1/0,Ae=-1/0,We=0;We<_e.length;We++)for(var Qe=_e[We],Ke=0;Ke<Qe.length;Ke++){var qe=Qe[Ke];te=Math.min(te,qe.x),se=Math.max(se,qe.x),pe=Math.min(pe,qe.y),Ae=Math.max(Ae,qe.y)}return[te,pe,se,Ae]},Y.prototype.toGeoJSON=S.prototype.toGeoJSON;var ne=o.pbf,ae=w;function oe(_e){var te=new ne;return function(se,pe){for(var Ae in se.layers)pe.writeMessage(3,fe,se.layers[Ae])}(_e,te),te.finish()}function fe(_e,te){var se;te.writeVarintField(15,_e.version||1),te.writeStringField(1,_e.name||""),te.writeVarintField(5,_e.extent||4096);var pe={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<_e.length;se++)pe.feature=_e.feature(se),te.writeMessage(2,Re,pe);var Ae=pe.keys;for(se=0;se<Ae.length;se++)te.writeStringField(3,Ae[se]);var We=pe.values;for(se=0;se<We.length;se++)te.writeMessage(4,Ze,We[se])}function Re(_e,te){var se=_e.feature;se.id!==void 0&&te.writeVarintField(1,se.id),te.writeMessage(2,Be,_e),te.writeVarintField(3,se.type),te.writeMessage(4,pt,se)}function Be(_e,te){var se=_e.feature,pe=_e.keys,Ae=_e.values,We=_e.keycache,Qe=_e.valuecache;for(var Ke in se.properties){var qe=se.properties[Ke],Me=We[Ke];if(qe!==null){Me===void 0&&(pe.push(Ke),We[Ke]=Me=pe.length-1),te.writeVarint(Me);var Ue=typeof qe;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(qe=JSON.stringify(qe));var bt=Ue+":"+qe,ht=Qe[bt];ht===void 0&&(Ae.push(qe),Qe[bt]=ht=Ae.length-1),te.writeVarint(ht)}}}function Oe(_e,te){return(te<<3)+(7&_e)}function Ee(_e){return _e<<1^_e>>31}function pt(_e,te){for(var se=_e.loadGeometry(),pe=_e.type,Ae=0,We=0,Qe=se.length,Ke=0;Ke<Qe;Ke++){var qe=se[Ke],Me=1;pe===1&&(Me=qe.length),te.writeVarint(Oe(1,Me));for(var Ue=pe===3?qe.length-1:qe.length,bt=0;bt<Ue;bt++){bt===1&&pe!==1&&te.writeVarint(Oe(2,Ue-1));var ht=qe[bt].x-Ae,Zt=qe[bt].y-We;te.writeVarint(Ee(ht)),te.writeVarint(Ee(Zt)),Ae+=ht,We+=Zt}pe===3&&te.writeVarint(Oe(7,1))}}function Ze(_e,te){var se=typeof _e;se==="string"?te.writeStringField(1,_e):se==="boolean"?te.writeBooleanField(7,_e):se==="number"&&(_e%1!=0?te.writeDoubleField(3,_e):_e<0?te.writeSVarintField(6,_e):te.writeVarintField(5,_e))}function ct(_e,te,se,pe,Ae,We){if(Ae-pe<=se)return;const Qe=pe+Ae>>1;nt(_e,te,Qe,pe,Ae,We%2),ct(_e,te,se,pe,Qe-1,We+1),ct(_e,te,se,Qe+1,Ae,We+1)}function nt(_e,te,se,pe,Ae,We){for(;Ae>pe;){if(Ae-pe>600){const Me=Ae-pe+1,Ue=se-pe+1,bt=Math.log(Me),ht=.5*Math.exp(2*bt/3),Zt=.5*Math.sqrt(bt*ht*(Me-ht)/Me)*(Ue-Me/2<0?-1:1);nt(_e,te,se,Math.max(pe,Math.floor(se-Ue*ht/Me+Zt)),Math.min(Ae,Math.floor(se+(Me-Ue)*ht/Me+Zt)),We)}const Qe=te[2*se+We];let Ke=pe,qe=Ae;for(xe(_e,te,pe,se),te[2*Ae+We]>Qe&&xe(_e,te,pe,Ae);Ke<qe;){for(xe(_e,te,Ke,qe),Ke++,qe--;te[2*Ke+We]<Qe;)Ke++;for(;te[2*qe+We]>Qe;)qe--}te[2*pe+We]===Qe?xe(_e,te,pe,qe):(qe++,xe(_e,te,qe,Ae)),qe<=se&&(pe=qe+1),se<=qe&&(Ae=qe-1)}}function xe(_e,te,se,pe){be(_e,se,pe),be(te,2*se,2*pe),be(te,2*se+1,2*pe+1)}function be(_e,te,se){const pe=_e[te];_e[te]=_e[se],_e[se]=pe}function on(_e,te,se,pe){const Ae=_e-se,We=te-pe;return Ae*Ae+We*We}B.exports=oe,W.fromVectorTileJs=oe,W.fromGeojsonVt=function(_e,te){te=te||{};var se={};for(var pe in _e)se[pe]=new ae(_e[pe].features,te),se[pe].name=pe,se[pe].version=te.version,se[pe].extent=te.extent;return oe({layers:se})},W.GeoJSONWrapper=ae;const Ut=_e=>_e[0],ln=_e=>_e[1];class tn{constructor(te,se=Ut,pe=ln,Ae=64,We=Float64Array){this.nodeSize=Ae,this.points=te;const Qe=te.length<65536?Uint16Array:Uint32Array,Ke=this.ids=new Qe(te.length),qe=this.coords=new We(2*te.length);for(let Me=0;Me<te.length;Me++)Ke[Me]=Me,qe[2*Me]=se(te[Me]),qe[2*Me+1]=pe(te[Me]);ct(Ke,qe,Ae,0,Ke.length-1,0)}range(te,se,pe,Ae){return function(We,Qe,Ke,qe,Me,Ue,bt){const ht=[0,We.length-1,0],Zt=[];let rn,Jt;for(;ht.length;){const pn=ht.pop(),zn=ht.pop(),or=ht.pop();if(zn-or<=bt){for(let _r=or;_r<=zn;_r++)rn=Qe[2*_r],Jt=Qe[2*_r+1],rn>=Ke&&rn<=Me&&Jt>=qe&&Jt<=Ue&&Zt.push(We[_r]);continue}const wn=Math.floor((or+zn)/2);rn=Qe[2*wn],Jt=Qe[2*wn+1],rn>=Ke&&rn<=Me&&Jt>=qe&&Jt<=Ue&&Zt.push(We[wn]);const yr=(pn+1)%2;(pn===0?Ke<=rn:qe<=Jt)&&(ht.push(or),ht.push(wn-1),ht.push(yr)),(pn===0?Me>=rn:Ue>=Jt)&&(ht.push(wn+1),ht.push(zn),ht.push(yr))}return Zt}(this.ids,this.coords,te,se,pe,Ae,this.nodeSize)}within(te,se,pe){return function(Ae,We,Qe,Ke,qe,Me){const Ue=[0,Ae.length-1,0],bt=[],ht=qe*qe;for(;Ue.length;){const Zt=Ue.pop(),rn=Ue.pop(),Jt=Ue.pop();if(rn-Jt<=Me){for(let yr=Jt;yr<=rn;yr++)on(We[2*yr],We[2*yr+1],Qe,Ke)<=ht&&bt.push(Ae[yr]);continue}const pn=Math.floor((Jt+rn)/2),zn=We[2*pn],or=We[2*pn+1];on(zn,or,Qe,Ke)<=ht&&bt.push(Ae[pn]);const wn=(Zt+1)%2;(Zt===0?Qe-qe<=zn:Ke-qe<=or)&&(Ue.push(Jt),Ue.push(pn-1),Ue.push(wn)),(Zt===0?Qe+qe>=zn:Ke+qe>=or)&&(Ue.push(pn+1),Ue.push(rn),Ue.push(wn))}return bt}(this.ids,this.coords,te,se,pe,this.nodeSize)}}const un={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},mn=Math.fround||(fn=new Float32Array(1),_e=>(fn[0]=+_e,fn[0]));var fn;class An{constructor(te){this.options=yn(Object.create(un),te),this.trees=new Array(this.options.maxZoom+1)}load(te){const{log:se,minZoom:pe,maxZoom:Ae,nodeSize:We}=this.options;se&&console.time("total time");const Qe=`prepare ${te.length} points`;se&&console.time(Qe),this.points=te;let Ke=[];for(let qe=0;qe<te.length;qe++)te[qe].geometry&&Ke.push(Xe(te[qe],qe));this.trees[Ae+1]=new tn(Ke,On,Ln,We,Float32Array),se&&console.timeEnd(Qe);for(let qe=Ae;qe>=pe;qe--){const Me=+Date.now();Ke=this._cluster(Ke,qe),this.trees[qe]=new tn(Ke,On,Ln,We,Float32Array),se&&console.log("z%d: %d clusters in %dms",qe,Ke.length,+Date.now()-Me)}return se&&console.timeEnd("total time"),this}getClusters(te,se){let pe=((te[0]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,te[1]));let We=te[2]===180?180:((te[2]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)pe=-180,We=180;else if(pe>We){const Ue=this.getClusters([pe,Ae,180,Qe],se),bt=this.getClusters([-180,Ae,We,Qe],se);return Ue.concat(bt)}const Ke=this.trees[this._limitZoom(se)],qe=Ke.range(_t(pe),dt(Qe),_t(We),dt(Ae)),Me=[];for(const Ue of qe){const bt=Ke.points[Ue];Me.push(bt.numPoints?ft(bt):this.points[bt.index])}return Me}getChildren(te){const se=this._getOriginId(te),pe=this._getOriginZoom(te),Ae="No cluster with the specified id.",We=this.trees[pe];if(!We)throw new Error(Ae);const Qe=We.points[se];if(!Qe)throw new Error(Ae);const Ke=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),qe=We.within(Qe.x,Qe.y,Ke),Me=[];for(const Ue of qe){const bt=We.points[Ue];bt.parentId===te&&Me.push(bt.numPoints?ft(bt):this.points[bt.index])}if(Me.length===0)throw new Error(Ae);return Me}getLeaves(te,se,pe){const Ae=[];return this._appendLeaves(Ae,te,se=se||10,pe=pe||0,0),Ae}getTile(te,se,pe){const Ae=this.trees[this._limitZoom(te)],We=Math.pow(2,te),{extent:Qe,radius:Ke}=this.options,qe=Ke/Qe,Me=(pe-qe)/We,Ue=(pe+1+qe)/We,bt={features:[]};return this._addTileFeatures(Ae.range((se-qe)/We,Me,(se+1+qe)/We,Ue),Ae.points,se,pe,We,bt),se===0&&this._addTileFeatures(Ae.range(1-qe/We,Me,1,Ue),Ae.points,We,pe,We,bt),se===We-1&&this._addTileFeatures(Ae.range(0,Me,qe/We,Ue),Ae.points,-1,pe,We,bt),bt.features.length?bt:null}getClusterExpansionZoom(te){let se=this._getOriginZoom(te)-1;for(;se<=this.options.maxZoom;){const pe=this.getChildren(te);if(se++,pe.length!==1)break;te=pe[0].properties.cluster_id}return se}_appendLeaves(te,se,pe,Ae,We){const Qe=this.getChildren(se);for(const Ke of Qe){const qe=Ke.properties;if(qe&&qe.cluster?We+qe.point_count<=Ae?We+=qe.point_count:We=this._appendLeaves(te,qe.cluster_id,pe,Ae,We):We<Ae?We++:te.push(Ke),te.length===pe)break}return We}_addTileFeatures(te,se,pe,Ae,We,Qe){for(const Ke of te){const qe=se[Ke],Me=qe.numPoints;let Ue,bt,ht;if(Me)Ue=wt(qe),bt=qe.x,ht=qe.y;else{const Jt=this.points[qe.index];Ue=Jt.properties,bt=_t(Jt.geometry.coordinates[0]),ht=dt(Jt.geometry.coordinates[1])}const Zt={type:1,geometry:[[Math.round(this.options.extent*(bt*We-pe)),Math.round(this.options.extent*(ht*We-Ae))]],tags:Ue};let rn;Me?rn=qe.id:this.options.generateId?rn=qe.index:this.points[qe.index].id&&(rn=this.points[qe.index].id),rn!==void 0&&(Zt.id=rn),Qe.features.push(Zt)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,se){const pe=[],{radius:Ae,extent:We,reduce:Qe,minPoints:Ke}=this.options,qe=Ae/(We*Math.pow(2,se));for(let Me=0;Me<te.length;Me++){const Ue=te[Me];if(Ue.zoom<=se)continue;Ue.zoom=se;const bt=this.trees[se+1],ht=bt.within(Ue.x,Ue.y,qe),Zt=Ue.numPoints||1;let rn=Zt;for(const Jt of ht){const pn=bt.points[Jt];pn.zoom>se&&(rn+=pn.numPoints||1)}if(rn>Zt&&rn>=Ke){let Jt=Ue.x*Zt,pn=Ue.y*Zt,zn=Qe&&Zt>1?this._map(Ue,!0):null;const or=(Me<<5)+(se+1)+this.points.length;for(const wn of ht){const yr=bt.points[wn];if(yr.zoom<=se)continue;yr.zoom=se;const _r=yr.numPoints||1;Jt+=yr.x*_r,pn+=yr.y*_r,yr.parentId=or,Qe&&(zn||(zn=this._map(Ue,!0)),Qe(zn,this._map(yr)))}Ue.parentId=or,pe.push(Le(Jt/rn,pn/rn,or,rn,zn))}else if(pe.push(Ue),rn>1)for(const Jt of ht){const pn=bt.points[Jt];pn.zoom<=se||(pn.zoom=se,pe.push(pn))}}return pe}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,se){if(te.numPoints)return se?yn({},te.properties):te.properties;const pe=this.points[te.index].properties,Ae=this.options.map(pe);return se&&Ae===pe?yn({},Ae):Ae}}function Le(_e,te,se,pe,Ae){return{x:mn(_e),y:mn(te),zoom:1/0,id:se,parentId:-1,numPoints:pe,properties:Ae}}function Xe(_e,te){const[se,pe]=_e.geometry.coordinates;return{x:mn(_t(se)),y:mn(dt(pe)),zoom:1/0,index:te,parentId:-1}}function ft(_e){return{type:"Feature",id:_e.id,properties:wt(_e),geometry:{type:"Point",coordinates:[(te=_e.x,360*(te-.5)),Pt(_e.y)]}};var te}function wt(_e){const te=_e.numPoints,se=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te;return yn(yn({},_e.properties),{cluster:!0,cluster_id:_e.id,point_count:te,point_count_abbreviated:se})}function _t(_e){return _e/360+.5}function dt(_e){const te=Math.sin(_e*Math.PI/180),se=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return se<0?0:se>1?1:se}function Pt(_e){const te=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function yn(_e,te){for(const se in te)_e[se]=te[se];return _e}function On(_e){return _e.x}function Ln(_e){return _e.y}function In(_e,te,se,pe){for(var Ae,We=pe,Qe=se-te>>1,Ke=se-te,qe=_e[te],Me=_e[te+1],Ue=_e[se],bt=_e[se+1],ht=te+3;ht<se;ht+=3){var Zt=Xn(_e[ht],_e[ht+1],qe,Me,Ue,bt);if(Zt>We)Ae=ht,We=Zt;else if(Zt===We){var rn=Math.abs(ht-Qe);rn<Ke&&(Ae=ht,Ke=rn)}}We>pe&&(Ae-te>3&&In(_e,te,Ae,pe),_e[Ae+2]=We,se-Ae>3&&In(_e,Ae,se,pe))}function Xn(_e,te,se,pe,Ae,We){var Qe=Ae-se,Ke=We-pe;if(Qe!==0||Ke!==0){var qe=((_e-se)*Qe+(te-pe)*Ke)/(Qe*Qe+Ke*Ke);qe>1?(se=Ae,pe=We):qe>0&&(se+=Qe*qe,pe+=Ke*qe)}return(Qe=_e-se)*Qe+(Ke=te-pe)*Ke}function Ie(_e,te,se,pe){var Ae={id:_e===void 0?null:_e,type:te,geometry:se,tags:pe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(We){var Qe=We.geometry,Ke=We.type;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")Je(We,Qe);else if(Ke==="Polygon"||Ke==="MultiLineString")for(var qe=0;qe<Qe.length;qe++)Je(We,Qe[qe]);else if(Ke==="MultiPolygon")for(qe=0;qe<Qe.length;qe++)for(var Me=0;Me<Qe[qe].length;Me++)Je(We,Qe[qe][Me])}(Ae),Ae}function Je(_e,te){for(var se=0;se<te.length;se+=3)_e.minX=Math.min(_e.minX,te[se]),_e.minY=Math.min(_e.minY,te[se+1]),_e.maxX=Math.max(_e.maxX,te[se]),_e.maxY=Math.max(_e.maxY,te[se+1])}function re(_e,te,se,pe){if(te.geometry){var Ae=te.geometry.coordinates,We=te.geometry.type,Qe=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),Ke=[],qe=te.id;if(se.promoteId?qe=te.properties[se.promoteId]:se.generateId&&(qe=pe||0),We==="Point")ce(Ae,Ke);else if(We==="MultiPoint")for(var Me=0;Me<Ae.length;Me++)ce(Ae[Me],Ke);else if(We==="LineString")Pe(Ae,Ke,Qe,!1);else if(We==="MultiLineString"){if(se.lineMetrics){for(Me=0;Me<Ae.length;Me++)Pe(Ae[Me],Ke=[],Qe,!1),_e.push(Ie(qe,"LineString",Ke,te.properties));return}ve(Ae,Ke,Qe,!1)}else if(We==="Polygon")ve(Ae,Ke,Qe,!0);else{if(We!=="MultiPolygon"){if(We==="GeometryCollection"){for(Me=0;Me<te.geometry.geometries.length;Me++)re(_e,{id:qe,geometry:te.geometry.geometries[Me],properties:te.properties},se,pe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Me=0;Me<Ae.length;Me++){var Ue=[];ve(Ae[Me],Ue,Qe,!0),Ke.push(Ue)}}_e.push(Ie(qe,We,Ke,te.properties))}}function ce(_e,te){te.push(Se(_e[0])),te.push(yt(_e[1])),te.push(0)}function Pe(_e,te,se,pe){for(var Ae,We,Qe=0,Ke=0;Ke<_e.length;Ke++){var qe=Se(_e[Ke][0]),Me=yt(_e[Ke][1]);te.push(qe),te.push(Me),te.push(0),Ke>0&&(Qe+=pe?(Ae*Me-qe*We)/2:Math.sqrt(Math.pow(qe-Ae,2)+Math.pow(Me-We,2))),Ae=qe,We=Me}var Ue=te.length-3;te[2]=1,In(te,0,Ue,se),te[Ue+2]=1,te.size=Math.abs(Qe),te.start=0,te.end=te.size}function ve(_e,te,se,pe){for(var Ae=0;Ae<_e.length;Ae++){var We=[];Pe(_e[Ae],We,se,pe),te.push(We)}}function Se(_e){return _e/360+.5}function yt(_e){var te=Math.sin(_e*Math.PI/180),se=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return se<0?0:se>1?1:se}function Nt(_e,te,se,pe,Ae,We,Qe,Ke){if(pe/=te,We>=(se/=te)&&Qe<pe)return _e;if(Qe<se||We>=pe)return null;for(var qe=[],Me=0;Me<_e.length;Me++){var Ue=_e[Me],bt=Ue.geometry,ht=Ue.type,Zt=Ae===0?Ue.minX:Ue.minY,rn=Ae===0?Ue.maxX:Ue.maxY;if(Zt>=se&&rn<pe)qe.push(Ue);else if(!(rn<se||Zt>=pe)){var Jt=[];if(ht==="Point"||ht==="MultiPoint")Kt(bt,Jt,se,pe,Ae);else if(ht==="LineString")Bn(bt,Jt,se,pe,Ae,!1,Ke.lineMetrics);else if(ht==="MultiLineString")Vt(bt,Jt,se,pe,Ae,!1);else if(ht==="Polygon")Vt(bt,Jt,se,pe,Ae,!0);else if(ht==="MultiPolygon")for(var pn=0;pn<bt.length;pn++){var zn=[];Vt(bt[pn],zn,se,pe,Ae,!0),zn.length&&Jt.push(zn)}if(Jt.length){if(Ke.lineMetrics&&ht==="LineString"){for(pn=0;pn<Jt.length;pn++)qe.push(Ie(Ue.id,ht,Jt[pn],Ue.tags));continue}ht!=="LineString"&&ht!=="MultiLineString"||(Jt.length===1?(ht="LineString",Jt=Jt[0]):ht="MultiLineString"),ht!=="Point"&&ht!=="MultiPoint"||(ht=Jt.length===3?"Point":"MultiPoint"),qe.push(Ie(Ue.id,ht,Jt,Ue.tags))}}}return qe.length?qe:null}function Kt(_e,te,se,pe,Ae){for(var We=0;We<_e.length;We+=3){var Qe=_e[We+Ae];Qe>=se&&Qe<=pe&&(te.push(_e[We]),te.push(_e[We+1]),te.push(_e[We+2]))}}function Bn(_e,te,se,pe,Ae,We,Qe){for(var Ke,qe,Me=Tn(_e),Ue=Ae===0?ur:Fn,bt=_e.start,ht=0;ht<_e.length-3;ht+=3){var Zt=_e[ht],rn=_e[ht+1],Jt=_e[ht+2],pn=_e[ht+3],zn=_e[ht+4],or=Ae===0?Zt:rn,wn=Ae===0?pn:zn,yr=!1;Qe&&(Ke=Math.sqrt(Math.pow(Zt-pn,2)+Math.pow(rn-zn,2))),or<se?wn>se&&(qe=Ue(Me,Zt,rn,pn,zn,se),Qe&&(Me.start=bt+Ke*qe)):or>pe?wn<pe&&(qe=Ue(Me,Zt,rn,pn,zn,pe),Qe&&(Me.start=bt+Ke*qe)):Rn(Me,Zt,rn,Jt),wn<se&&or>=se&&(qe=Ue(Me,Zt,rn,pn,zn,se),yr=!0),wn>pe&&or<=pe&&(qe=Ue(Me,Zt,rn,pn,zn,pe),yr=!0),!We&&yr&&(Qe&&(Me.end=bt+Ke*qe),te.push(Me),Me=Tn(_e)),Qe&&(bt+=Ke)}var _r=_e.length-3;Zt=_e[_r],rn=_e[_r+1],Jt=_e[_r+2],(or=Ae===0?Zt:rn)>=se&&or<=pe&&Rn(Me,Zt,rn,Jt),_r=Me.length-3,We&&_r>=3&&(Me[_r]!==Me[0]||Me[_r+1]!==Me[1])&&Rn(Me,Me[0],Me[1],Me[2]),Me.length&&te.push(Me)}function Tn(_e){var te=[];return te.size=_e.size,te.start=_e.start,te.end=_e.end,te}function Vt(_e,te,se,pe,Ae,We){for(var Qe=0;Qe<_e.length;Qe++)Bn(_e[Qe],te,se,pe,Ae,We,!1)}function Rn(_e,te,se,pe){_e.push(te),_e.push(se),_e.push(pe)}function ur(_e,te,se,pe,Ae,We){var Qe=(We-te)/(pe-te);return _e.push(We),_e.push(se+(Ae-se)*Qe),_e.push(1),Qe}function Fn(_e,te,se,pe,Ae,We){var Qe=(We-se)/(Ae-se);return _e.push(te+(pe-te)*Qe),_e.push(We),_e.push(1),Qe}function Sr(_e,te){for(var se=[],pe=0;pe<_e.length;pe++){var Ae,We=_e[pe],Qe=We.type;if(Qe==="Point"||Qe==="MultiPoint"||Qe==="LineString")Ae=dr(We.geometry,te);else if(Qe==="MultiLineString"||Qe==="Polygon"){Ae=[];for(var Ke=0;Ke<We.geometry.length;Ke++)Ae.push(dr(We.geometry[Ke],te))}else if(Qe==="MultiPolygon")for(Ae=[],Ke=0;Ke<We.geometry.length;Ke++){for(var qe=[],Me=0;Me<We.geometry[Ke].length;Me++)qe.push(dr(We.geometry[Ke][Me],te));Ae.push(qe)}se.push(Ie(We.id,Qe,Ae,We.tags))}return se}function dr(_e,te){var se=[];se.size=_e.size,_e.start!==void 0&&(se.start=_e.start,se.end=_e.end);for(var pe=0;pe<_e.length;pe+=3)se.push(_e[pe]+te,_e[pe+1],_e[pe+2]);return se}function Pr(_e,te){if(_e.transformed)return _e;var se,pe,Ae,We=1<<_e.z,Qe=_e.x,Ke=_e.y;for(se=0;se<_e.features.length;se++){var qe=_e.features[se],Me=qe.geometry,Ue=qe.type;if(qe.geometry=[],Ue===1)for(pe=0;pe<Me.length;pe+=2)qe.geometry.push(Yn(Me[pe],Me[pe+1],te,We,Qe,Ke));else for(pe=0;pe<Me.length;pe++){var bt=[];for(Ae=0;Ae<Me[pe].length;Ae+=2)bt.push(Yn(Me[pe][Ae],Me[pe][Ae+1],te,We,Qe,Ke));qe.geometry.push(bt)}}return _e.transformed=!0,_e}function Yn(_e,te,se,pe,Ae,We){return[Math.round(se*(_e*pe-Ae)),Math.round(se*(te*pe-We))]}function Qn(_e,te,se,pe,Ae){for(var We=te===Ae.maxZoom?0:Ae.tolerance/((1<<te)*Ae.extent),Qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:pe,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ke=0;Ke<_e.length;Ke++){Qe.numFeatures++,Ur(Qe,_e[Ke],We,Ae);var qe=_e[Ke].minX,Me=_e[Ke].minY,Ue=_e[Ke].maxX,bt=_e[Ke].maxY;qe<Qe.minX&&(Qe.minX=qe),Me<Qe.minY&&(Qe.minY=Me),Ue>Qe.maxX&&(Qe.maxX=Ue),bt>Qe.maxY&&(Qe.maxY=bt)}return Qe}function Ur(_e,te,se,pe){var Ae=te.geometry,We=te.type,Qe=[];if(We==="Point"||We==="MultiPoint")for(var Ke=0;Ke<Ae.length;Ke+=3)Qe.push(Ae[Ke]),Qe.push(Ae[Ke+1]),_e.numPoints++,_e.numSimplified++;else if(We==="LineString")hr(Qe,Ae,_e,se,!1,!1);else if(We==="MultiLineString"||We==="Polygon")for(Ke=0;Ke<Ae.length;Ke++)hr(Qe,Ae[Ke],_e,se,We==="Polygon",Ke===0);else if(We==="MultiPolygon")for(var qe=0;qe<Ae.length;qe++){var Me=Ae[qe];for(Ke=0;Ke<Me.length;Ke++)hr(Qe,Me[Ke],_e,se,!0,Ke===0)}if(Qe.length){var Ue=te.tags||null;if(We==="LineString"&&pe.lineMetrics){for(var bt in Ue={},te.tags)Ue[bt]=te.tags[bt];Ue.mapbox_clip_start=Ae.start/Ae.size,Ue.mapbox_clip_end=Ae.end/Ae.size}var ht={geometry:Qe,type:We==="Polygon"||We==="MultiPolygon"?3:We==="LineString"||We==="MultiLineString"?2:1,tags:Ue};te.id!==null&&(ht.id=te.id),_e.features.push(ht)}}function hr(_e,te,se,pe,Ae,We){var Qe=pe*pe;if(pe>0&&te.size<(Ae?Qe:pe))se.numPoints+=te.length/3;else{for(var Ke=[],qe=0;qe<te.length;qe+=3)(pe===0||te[qe+2]>Qe)&&(se.numSimplified++,Ke.push(te[qe]),Ke.push(te[qe+1])),se.numPoints++;Ae&&function(Me,Ue){for(var bt=0,ht=0,Zt=Me.length,rn=Zt-2;ht<Zt;rn=ht,ht+=2)bt+=(Me[ht]-Me[rn])*(Me[ht+1]+Me[rn+1]);if(bt>0===Ue)for(ht=0,Zt=Me.length;ht<Zt/2;ht+=2){var Jt=Me[ht],pn=Me[ht+1];Me[ht]=Me[Zt-2-ht],Me[ht+1]=Me[Zt-1-ht],Me[Zt-2-ht]=Jt,Me[Zt-1-ht]=pn}}(Ke,We),_e.push(Ke)}}function Bi(_e,te){var se=(te=this.options=function(Ae,We){for(var Qe in We)Ae[Qe]=We[Qe];return Ae}(Object.create(this.options),te)).debug;if(se&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");var pe=function(Ae,We){var Qe=[];if(Ae.type==="FeatureCollection")for(var Ke=0;Ke<Ae.features.length;Ke++)re(Qe,Ae.features[Ke],We,Ke);else re(Qe,Ae.type==="Feature"?Ae:{geometry:Ae},We);return Qe}(_e,te);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),pe=function(Ae,We){var Qe=We.buffer/We.extent,Ke=Ae,qe=Nt(Ae,1,-1-Qe,Qe,0,-1,2,We),Me=Nt(Ae,1,1-Qe,2+Qe,0,-1,2,We);return(qe||Me)&&(Ke=Nt(Ae,1,-Qe,1+Qe,0,-1,2,We)||[],qe&&(Ke=Sr(qe,1).concat(Ke)),Me&&(Ke=Ke.concat(Sr(Me,-1)))),Ke}(pe,te),pe.length&&this.splitTile(pe,0,0,0),se&&(pe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ai(_e,te,se){return 32*((1<<_e)*se+te)+_e}function si(_e,te){const se=_e.tileID.canonical;if(!this._geoJSONIndex)return te(null,null);const pe=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!pe)return te(null,null);const Ae=new j(pe.features);let We=W(Ae);We.byteOffset===0&&We.byteLength===We.buffer.byteLength||(We=new Uint8Array(We)),te(null,{vectorTile:Ae,rawData:We.buffer})}Bi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Bi.prototype.splitTile=function(_e,te,se,pe,Ae,We,Qe){for(var Ke=[_e,te,se,pe],qe=this.options,Me=qe.debug;Ke.length;){pe=Ke.pop(),se=Ke.pop(),te=Ke.pop(),_e=Ke.pop();var Ue=1<<te,bt=ai(te,se,pe),ht=this.tiles[bt];if(!ht&&(Me>1&&console.time("creation"),ht=this.tiles[bt]=Qn(_e,te,se,pe,qe),this.tileCoords.push({z:te,x:se,y:pe}),Me)){Me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,se,pe,ht.numFeatures,ht.numPoints,ht.numSimplified),console.timeEnd("creation"));var Zt="z"+te;this.stats[Zt]=(this.stats[Zt]||0)+1,this.total++}if(ht.source=_e,Ae){if(te===qe.maxZoom||te===Ae)continue;var rn=1<<Ae-te;if(se!==Math.floor(We/rn)||pe!==Math.floor(Qe/rn))continue}else if(te===qe.indexMaxZoom||ht.numPoints<=qe.indexMaxPoints)continue;if(ht.source=null,_e.length!==0){Me>1&&console.time("clipping");var Jt,pn,zn,or,wn,yr,_r=.5*qe.buffer/qe.extent,zs=.5-_r,ps=.5+_r,Et=1+_r;Jt=pn=zn=or=null,wn=Nt(_e,Ue,se-_r,se+ps,0,ht.minX,ht.maxX,qe),yr=Nt(_e,Ue,se+zs,se+Et,0,ht.minX,ht.maxX,qe),_e=null,wn&&(Jt=Nt(wn,Ue,pe-_r,pe+ps,1,ht.minY,ht.maxY,qe),pn=Nt(wn,Ue,pe+zs,pe+Et,1,ht.minY,ht.maxY,qe),wn=null),yr&&(zn=Nt(yr,Ue,pe-_r,pe+ps,1,ht.minY,ht.maxY,qe),or=Nt(yr,Ue,pe+zs,pe+Et,1,ht.minY,ht.maxY,qe),yr=null),Me>1&&console.timeEnd("clipping"),Ke.push(Jt||[],te+1,2*se,2*pe),Ke.push(pn||[],te+1,2*se,2*pe+1),Ke.push(zn||[],te+1,2*se+1,2*pe),Ke.push(or||[],te+1,2*se+1,2*pe+1)}}},Bi.prototype.getTile=function(_e,te,se){var pe=this.options,Ae=pe.extent,We=pe.debug;if(_e<0||_e>24)return null;var Qe=1<<_e,Ke=ai(_e,te=(te%Qe+Qe)%Qe,se);if(this.tiles[Ke])return Pr(this.tiles[Ke],Ae);We>1&&console.log("drilling down to z%d-%d-%d",_e,te,se);for(var qe,Me=_e,Ue=te,bt=se;!qe&&Me>0;)Me--,Ue=Math.floor(Ue/2),bt=Math.floor(bt/2),qe=this.tiles[ai(Me,Ue,bt)];return qe&&qe.source?(We>1&&console.log("found parent tile z%d-%d-%d",Me,Ue,bt),We>1&&console.time("drilling down"),this.splitTile(qe.source,Me,Ue,bt,_e,te,se),We>1&&console.timeEnd("drilling down"),this.tiles[Ke]?Pr(this.tiles[Ke],Ae):null):null};class Fi extends o.VectorTileWorkerSource{constructor(te,se,pe,Ae,We){super(te,se,pe,Ae,si),We&&(this.loadGeoJSON=We)}loadData(te,se){const pe=te&&te.request,Ae=pe&&pe.collectResourceTiming;this.loadGeoJSON(te,(We,Qe)=>{if(We||!Qe)return se(We);if(typeof Qe!="object")return se(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`));{z(Qe,!0);try{if(te.filter){const qe=o.createExpression(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qe.result==="error")throw new Error(qe.value.map(Ue=>`${Ue.key}: ${Ue.message}`).join(", "));const Me=Qe.features.filter(Ue=>qe.value.evaluate({zoom:0},Ue));Qe={type:"FeatureCollection",features:Me}}this._geoJSONIndex=te.cluster?new An(function({superclusterOptions:qe,clusterProperties:Me}){if(!Me||!qe)return qe;const Ue={},bt={},ht={accumulated:null,zoom:0},Zt={properties:null},rn=Object.keys(Me);for(const Jt of rn){const[pn,zn]=Me[Jt],or=o.createExpression(zn),wn=o.createExpression(typeof pn=="string"?[pn,["accumulated"],["get",Jt]]:pn);Ue[Jt]=or.value,bt[Jt]=wn.value}return qe.map=Jt=>{Zt.properties=Jt;const pn={};for(const zn of rn)pn[zn]=Ue[zn].evaluate(ht,Zt);return pn},qe.reduce=(Jt,pn)=>{Zt.properties=pn;for(const zn of rn)ht.accumulated=Jt[zn],Jt[zn]=bt[zn].evaluate(ht,Zt)},qe}(te)).load(Qe.features):function(qe,Me){return new Bi(qe,Me)}(Qe,te.geojsonVtOptions)}catch(qe){return se(qe)}this.loaded={};const Ke={};if(Ae){const qe=o.getPerformanceMeasurement(pe);qe&&(Ke.resourceTiming={},Ke.resourceTiming[te.source]=JSON.parse(JSON.stringify(qe)))}se(null,Ke)}})}reloadTile(te,se){const pe=this.loaded;return pe&&pe[te.uid]?super.reloadTile(te,se):this.loadTile(te,se)}loadGeoJSON(te,se){if(te.request)o.getJSON(te.request,se);else{if(typeof te.data!="string")return se(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`));try{return se(null,JSON.parse(te.data))}catch{return se(new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(te,se){try{se(null,this._geoJSONIndex.getClusterExpansionZoom(te.clusterId))}catch(pe){se(pe)}}getClusterChildren(te,se){try{se(null,this._geoJSONIndex.getChildren(te.clusterId))}catch(pe){se(pe)}}getClusterLeaves(te,se){try{se(null,this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset))}catch(pe){se(pe)}}}class oo{constructor(te){this.self=te,this.actor=new o.Actor(te,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Fi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(se,pe)=>{if(this.workerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.workerSourceTypes[se]=pe},this.self.registerRTLTextPlugin=se=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=se.applyArabicShaping,o.plugin.processBidirectionalText=se.processBidirectionalText,o.plugin.processStyledBidirectionalText=se.processStyledBidirectionalText}}clearCaches(te,se,pe){delete this.layerIndexes[te],delete this.availableImages[te],delete this.workerSources[te],delete this.demWorkerSources[te],pe()}checkIfReady(te,se,pe){pe()}setReferrer(te,se){this.referrer=se}spriteLoaded(te,se){this.isSpriteLoaded[te]=se;for(const pe in this.workerSources[te]){const Ae=this.workerSources[te][pe];for(const We in Ae)Ae[We]instanceof o.VectorTileWorkerSource&&(Ae[We].isSpriteLoaded=se,Ae[We].fire(new o.Event("isSpriteLoaded")))}}setImages(te,se,pe){this.availableImages[te]=se;for(const Ae in this.workerSources[te]){const We=this.workerSources[te][Ae];for(const Qe in We)We[Qe].availableImages=se}pe()}enableTerrain(te,se,pe){this.terrain=se,pe()}setProjection(te,se){this.projections[te]=o.getProjection(se)}setLayers(te,se,pe){this.getLayerIndex(te).replace(se),pe()}updateLayers(te,se,pe){this.getLayerIndex(te).update(se.layers,se.removedIds),pe()}loadTile(te,se,pe){const Ae=this.enableTerrain?o.extend({enableTerrain:this.terrain},se):se;Ae.projection=this.projections[te]||this.defaultProjection,this.getWorkerSource(te,se.type,se.source).loadTile(Ae,pe)}loadDEMTile(te,se,pe){const Ae=this.enableTerrain?o.extend({buildQuadTree:this.terrain},se):se;this.getDEMWorkerSource(te,se.source).loadTile(Ae,pe)}reloadTile(te,se,pe){const Ae=this.enableTerrain?o.extend({enableTerrain:this.terrain},se):se;Ae.projection=this.projections[te]||this.defaultProjection,this.getWorkerSource(te,se.type,se.source).reloadTile(Ae,pe)}abortTile(te,se,pe){this.getWorkerSource(te,se.type,se.source).abortTile(se,pe)}removeTile(te,se,pe){this.getWorkerSource(te,se.type,se.source).removeTile(se,pe)}removeSource(te,se,pe){if(!this.workerSources[te]||!this.workerSources[te][se.type]||!this.workerSources[te][se.type][se.source])return;const Ae=this.workerSources[te][se.type][se.source];delete this.workerSources[te][se.type][se.source],Ae.removeSource!==void 0?Ae.removeSource(se,pe):pe()}loadWorkerSource(te,se,pe){try{this.self.importScripts(se.url),pe()}catch(Ae){pe(Ae.toString())}}syncRTLPluginState(te,se,pe){try{o.plugin.setState(se);const Ae=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Ae!=null){this.self.importScripts(Ae);const We=o.plugin.isParsed();pe(We?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ae}`),We)}}catch(Ae){pe(Ae.toString())}}getAvailableImages(te){let se=this.availableImages[te];return se||(se=[]),se}getLayerIndex(te){let se=this.layerIndexes[te];return se||(se=this.layerIndexes[te]=new A),se}getWorkerSource(te,se,pe){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][se]||(this.workerSources[te][se]={}),!this.workerSources[te][se][pe]){const Ae={send:(We,Qe,Ke,qe,Me,Ue)=>{this.actor.send(We,Qe,Ke,te,Me,Ue)},scheduler:this.actor.scheduler};this.workerSources[te][se][pe]=new this.workerSourceTypes[se](Ae,this.getLayerIndex(te),this.getAvailableImages(te),this.isSpriteLoaded[te])}return this.workerSources[te][se][pe]}getDEMWorkerSource(te,se){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][se]||(this.demWorkerSources[te][se]=new D),this.demWorkerSources[te][se]}enforceCacheSizeLimit(te,se){o.enforceCacheSizeLimit(se)}getWorkerPerformanceMetrics(te,se,pe){pe(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new oo(self)),oo}),u(["./shared"],function(o){function g(v,c){if(Array.isArray(v)){if(!Array.isArray(c)||v.length!==c.length)return!1;for(let p=0;p<v.length;p++)if(!g(v[p],c[p]))return!1;return!0}if(typeof v=="object"&&v!==null&&c!==null){if(typeof c!="object"||Object.keys(v).length!==Object.keys(c).length)return!1;for(const p in v)if(!g(v[p],c[p]))return!1;return!0}return v===c}var b=A;function A(v){return!function(c){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,E,k=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(k);try{E=new Worker(L),_=!0}catch{_=!1}return E&&E.terminate(),URL.revokeObjectURL(L),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var E=_.getContext("2d");if(!E)return!1;var k=E.getImageData(0,0,1,1);return k&&k.width===_.width}()?(D[p=c&&c.failIfMajorPerformanceCaveat]===void 0&&(D[p]=function(_){var E,k=function(L){var U=document.createElement("canvas"),G=Object.create(A.webGLContextAttributes);return G.failIfMajorPerformanceCaveat=L,U.getContext("webgl",G)||U.getContext("experimental-webgl",G)}(_);if(!k)return!1;try{E=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!E||k.isContextLost())&&(k.shaderSource(E,"void main() {}"),k.compileShader(E),k.getShaderParameter(E,k.COMPILE_STATUS)===!0)}(p)),D[p]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var p}(v)}var D={};function z(v,c,p){const _=o.window.document.createElement(v);return c!==void 0&&(_.className=c),p&&p.appendChild(_),_}function F(v,c,p){const _=o.window.document.createElementNS("http://www.w3.org/2000/svg",v);for(const E of Object.keys(c))_.setAttributeNS(null,E,c[E]);return p&&p.appendChild(_),_}A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const N=o.window.document&&o.window.document.documentElement.style,T=N&&N.userSelect!==void 0?"userSelect":"WebkitUserSelect";let H;function j(){N&&T&&(H=N[T],N[T]="none")}function W(){N&&T&&(N[T]=H)}function B(v){v.preventDefault(),v.stopPropagation(),o.window.removeEventListener("click",B,!0)}function O(){o.window.addEventListener("click",B,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",B,!0)},0)}function S(v,c){const p=v.getBoundingClientRect();return Y(v,p,c)}function w(v,c){const p=v.getBoundingClientRect(),_=[];for(let E=0;E<c.length;E++)_.push(Y(v,p,c[E]));return _}function P(v){return o.window.InstallTrigger!==void 0&&v.button===2&&v.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function Y(v,c,p){const _=v.offsetWidth===c.width?1:v.offsetWidth/c.width;return new o.pointGeometry((p.clientX-c.left)*_,(p.clientY-c.top)*_)}function ne(v,c){var p=c[0],_=c[1],E=c[2],k=c[3],L=p*k-E*_;return L?(v[0]=k*(L=1/L),v[1]=-_*L,v[2]=-E*L,v[3]=p*L,v):null}function ae(v){const{userImage:c}=v;return!!(c&&c.render&&c.render())&&(v.data.replace(new Uint8Array(c.data.buffer)),!0)}class oe extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:p,callback:_}of this.requestors)this._notify(p,_);this.requestors=[]}}hasImage(c){return!!this.getImage(c)}getImage(c){return this.images[c]}addImage(c,p){this._validate(c,p)&&(this.images[c]=p)}_validate(c,p){let _=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),_=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),_=!1),this._validateContent(p.content,p)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),_=!1),_}_validateStretch(c,p){if(!c)return!0;let _=0;for(const E of c){if(E[0]<_||E[1]<E[0]||p<E[1])return!1;_=E[1]}return!0}_validateContent(c,p){return!(c&&(c.length!==4||c[0]<0||p.data.width<c[0]||c[1]<0||p.data.height<c[1]||c[2]<0||p.data.width<c[2]||c[3]<0||p.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,p){p.version=this.images[c].version+1,this.images[c]=p,this.updatedImages[c]=!0}removeImage(c){const p=this.images[c];delete this.images[c],delete this.patterns[c],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,p){let _=!0;if(!this.isLoaded())for(const E of c)this.images[E]||(_=!1);this.isLoaded()||_?this._notify(c,p):this.requestors.push({ids:c,callback:p})}_notify(c,p){const _={};for(const E of c){this.images[E]||this.fire(new o.Event("styleimagemissing",{id:E}));const k=this.images[E];k?_[E]={data:k.data.clone(),pixelRatio:k.pixelRatio,sdf:k.sdf,version:k.version,stretchX:k.stretchX,stretchY:k.stretchY,content:k.content,hasRenderCallback:Boolean(k.userImage&&k.userImage.render)}:o.warnOnce(`Image "${E}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,_)}getPixelSize(){const{width:c,height:p}=this.atlasImage;return{width:c,height:p}}getPattern(c){const p=this.patterns[c],_=this.getImage(c);if(!_)return null;if(p&&p.position.version===_.version)return p.position;if(p)p.position.version=_.version;else{const E={w:_.data.width+2,h:_.data.height+2,x:0,y:0},k=new o.ImagePosition(E,_);this.patterns[c]={bin:E,position:k}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const p=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(c,this.atlasImage,p.RGBA),this.atlasTexture&&this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const k in this.patterns)c.push(this.patterns[k].bin);const{w:p,h:_}=o.potpack(c),E=this.atlasImage;E.resize({width:p||1,height:_||1});for(const k in this.patterns){const{bin:L}=this.patterns[k],U=L.x+1,G=L.y+1,K=this.images[k].data,X=K.width,ee=K.height;o.RGBAImage.copy(K,E,{x:0,y:0},{x:U,y:G},{width:X,height:ee}),o.RGBAImage.copy(K,E,{x:0,y:ee-1},{x:U,y:G-1},{width:X,height:1}),o.RGBAImage.copy(K,E,{x:0,y:0},{x:U,y:G+ee},{width:X,height:1}),o.RGBAImage.copy(K,E,{x:X-1,y:0},{x:U-1,y:G},{width:1,height:ee}),o.RGBAImage.copy(K,E,{x:0,y:0},{x:U+X,y:G},{width:1,height:ee})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const p of c){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const _=this.images[p];ae(_)&&this.updateImage(p,_)}}}const fe=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(v,c){return function([p,_,E]){const k=o.degToRad(_+90),L=o.degToRad(E);return{x:p*Math.cos(k)*Math.sin(L),y:p*Math.sin(k)*Math.sin(L),z:p*Math.cos(L),azimuthal:_,polar:E}}(v.expression.evaluate(c))}interpolate(v,c,p){return{x:o.number(v.x,c.x,p),y:o.number(v.y,c.y,p),z:o.number(v.z,c.z,p),azimuthal:o.number(v.azimuthal,c.azimuthal,p),polar:o.number(v.polar,c.polar,p)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),Re="-transition";class Be extends o.Evented{constructor(c){super(),this._transitionable=new o.Transitionable(fe),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,p={}){if(!this._validate(o.validateLight,c,p))for(const _ in c){const E=c[_];o.endsWith(_,Re)?this._transitionable.setTransition(_.slice(0,-Re.length),E):this._transitionable.setValue(_,E)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,p,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Oe=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),Ee="-transition";class pt extends o.Evented{constructor(c,p){super(),this._transitionable=new o.Transitionable(Oe),this.set(c),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=p}get(){return this._transitionable.serialize()}set(c){for(const p in c){const _=c[p];o.endsWith(p,Ee)?this._transitionable.setTransition(p.slice(0,-Ee.length),_):this._transitionable.setValue(p,_)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}}function Ze(v,c,p,_){const E=o.smoothstep(45,65,p),[k,L]=ct(v,_),U=o.length(c);let G=1-Math.min(1,Math.exp((U-k)/(L-k)*-6));return G*=G*G,G=Math.min(1,1.00747*G),G*E*v.alpha}function ct(v,c){const p=.5/Math.tan(.5*c);return[v.range[0]+p,v.range[1]+p]}const nt=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),xe="-transition";class be extends o.Evented{constructor(c,p){super(),this._transitionable=new o.Transitionable(nt),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=p}get state(){const c=this._transform,p=c.projection.name==="globe",_=o.globeToMercatorTransition(c.zoom),E=this.properties.get("range"),k=[.5,3];return{range:p?[o.number(k[0],E[0],_),o.number(k[1],E[1],_)]:E,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,p={}){if(!this._validate(o.validateFog,c,p)){for(const _ of Object.keys(o.spec.fog))c&&c[_]===void 0&&(c[_]=o.spec.fog[_].default);for(const _ in c){const E=c[_];o.endsWith(_,xe)?this._transitionable.setTransition(_.slice(0,-xe.length),E):this._transitionable.setValue(_,E)}}}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const p=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,c))*p.a}getOpacityAtLatLng(c,p){return this._transform.projection.supportsFog?function(_,E,k){const L=o.MercatorCoordinate.fromLngLat(E),U=k.elevation?k.elevation.getAtPointOrZero(L):0,G=[L.x,L.y,U];return o.transformMat4(G,G,k.mercatorFogMatrix),Ze(_,G,k.pitch,k._fov)}(this.state,c,p):0}getFovAdjustedRange(c){return this._transform.projection.supportsFog?ct(this.state,c):[0,1]}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,p,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class on{constructor(c,p){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const _=this.workerPool.acquire(this.id);for(let E=0;E<_.length;E++){const k=new on.Actor(_[E],p,this.id);k.name=`Worker ${E}`,this.actors.push(k)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(c,p,_){o.asyncAll(this.actors,(E,k)=>{E.send(c,p,k)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ut(v,c,p){return c*(o.EXTENT/(v.tileSize*Math.pow(2,p-v.tileID.overscaledZ)))}on.Actor=o.Actor;class ln{constructor(c,p,_,E){this.screenBounds=c,this.cameraPoint=p,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,E)}static createFromScreenPoints(c,p){let _,E;if(c instanceof o.pointGeometry||typeof c[0]=="number"){const k=o.pointGeometry.convert(c);_=[k],E=p.isPointAboveHorizon(k)}else{const k=o.pointGeometry.convert(c[0]),L=o.pointGeometry.convert(c[1]);_=[k,L],E=o.polygonizeBounds(k,L).every(U=>p.isPointAboveHorizon(U))}return new ln(_,p.getCameraPoint(),E,p)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const p=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],E=o.polygonizeBounds(p,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>p.x&&this.cameraPoint.x<_.x?E.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?E[2]=this.cameraPoint:this.cameraPoint.x<=p.x&&(E[3]=this.cameraPoint)),o.bufferConvexPolygon(E,c)}bufferedCameraGeometryGlobe(c){const p=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],E=o.polygonizeBounds(p,_,c),k=this.cameraPoint.clone();switch(3*((k.y>p.y)+(k.y>_.y))+((k.x>p.x)+(k.x>_.x))){case 0:E[0]=k,E[4]=k.clone();break;case 1:E.splice(1,0,k);break;case 2:E[1]=k;break;case 3:E.splice(4,0,k);break;case 5:E.splice(2,0,k);break;case 6:E[3]=k;break;case 7:E.splice(3,0,k);break;case 8:E[2]=k}return E}containsTile(c,p,_,E=0){const k=c.queryPadding/p._pixelsPerMercatorPixel+1,L=_?this._bufferedCameraMercator(k,p):this._bufferedScreenMercator(k,p);let U=c.tileID.wrap+(L.unwrapped?E:0);const G=L.polygon.map(ye=>o.getTilePoint(c.tileTransform,ye,U));if(!o.polygonIntersectsBox(G,0,0,o.EXTENT,o.EXTENT))return;U=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?E:0);const K=this.screenGeometryMercator.polygon.map(ye=>o.getTileVec3(c.tileTransform,ye,U)),X=K.map(ye=>new o.pointGeometry(ye[0],ye[1])),ee=p.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),ue=o.getTileVec3(c.tileTransform,ee,U),he=K.map(ye=>{const le=o.sub(ye,ye,ue);return o.normalize(le,le),new o.Ray(ue,le)}),me=Ut(c,1,p.zoom)*p._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:X,tilespaceRays:he,bufferedTilespaceGeometry:G,bufferedTilespaceBounds:(ge=o.getBounds(G),ge.min.x=o.clamp(ge.min.x,0,o.EXTENT),ge.min.y=o.clamp(ge.min.y,0,o.EXTENT),ge.max.x=o.clamp(ge.max.x,0,o.EXTENT),ge.max.y=o.clamp(ge.max.y,0,o.EXTENT),ge),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:me};var ge}_bufferedScreenMercator(c,p){const _=mn(c);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let E;return E=p.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),p):{polygon:this.bufferedScreenGeometry(c).map(k=>p.pointCoordinate3D(k)),unwrapped:!0},this._screenRaycastCache[_]=E,E}}_bufferedCameraMercator(c,p){const _=mn(c);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let E;return E=p.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),p):{polygon:this.bufferedCameraGeometry(c).map(k=>p.pointCoordinate3D(k)),unwrapped:!0},this._cameraRaycastCache[_]=E,E}}_projectAndResample(c,p){const _=function(k,L){const U=o.multiply([],L.pixelMatrix,L.globeMatrix),G=[0,-o.GLOBE_RADIUS,0,1],K=[0,o.GLOBE_RADIUS,0,1],X=[0,0,0,1];o.transformMat4$1(G,G,U),o.transformMat4$1(K,K,U),o.transformMat4$1(X,X,U);const ee=new o.pointGeometry(G[0]/G[3],G[1]/G[3]),ue=new o.pointGeometry(K[0]/K[3],K[1]/K[3]),he=o.polygonContainsPoint(k,ee)&&G[3]<X[3],me=o.polygonContainsPoint(k,ue)&&K[3]<X[3];if(!he&&!me)return null;const ge=function(Ge,et,it){for(let lt=1;lt<Ge.length;lt++){const jt=un(et.pointCoordinate3D(Ge[lt-1]).x),tt=un(et.pointCoordinate3D(Ge[lt]).x);if(it<0){if(jt<tt)return{idx:lt,t:-jt/(tt-1-jt)}}else if(tt<jt)return{idx:lt,t:(1-jt)/(tt+1-jt)}}return null}(k,L,he?-1:1);if(!ge)return null;const{idx:ye,t:le}=ge;let Te=ye>1?tn(k.slice(0,ye),L):[],ke=ye<k.length?tn(k.slice(ye),L):[];Te=Te.map(Ge=>new o.pointGeometry(un(Ge.x),Ge.y)),ke=ke.map(Ge=>new o.pointGeometry(un(Ge.x),Ge.y));const De=[...Te];De.length===0&&De.push(ke[ke.length-1]);const He=o.number(De[De.length-1].y,(ke.length===0?Te[0]:ke[0]).y,le);let je;return je=he?[new o.pointGeometry(0,He),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,He)]:[new o.pointGeometry(1,He),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,He)],De.push(...je),ke.length===0?De.push(Te[0]):De.push(...ke),{polygon:De.map(Ge=>new o.MercatorCoordinate(Ge.x,Ge.y)),unwrapped:!1}}(c,p);if(_)return _;const E=function(k,L){let U=!1,G=-1/0,K=0;for(let ee=0;ee<k.length-1;ee++)k[ee].x>G&&(G=k[ee].x,K=ee);for(let ee=0;ee<k.length-1;ee++){const ue=(K+ee)%(k.length-1),he=k[ue],me=k[ue+1];Math.abs(he.x-me.x)>.5&&(he.x<me.x?(he.x+=1,ue===0&&(k[k.length-1].x+=1)):(me.x+=1,ue+1===k.length-1&&(k[0].x+=1)),U=!0)}const X=o.mercatorXfromLng(L.center.lng);return U&&X<Math.abs(X-1)&&k.forEach(ee=>{ee.x-=1}),{polygon:k,unwrapped:U}}(tn(c,p).map(k=>new o.pointGeometry(un(k.x),k.y)),p);return{polygon:E.polygon.map(k=>new o.MercatorCoordinate(k.x,k.y)),unwrapped:E.unwrapped}}}function tn(v,c){return o.resample(v,p=>{const _=c.pointCoordinate3D(p);p.x=_.x,p.y=_.y},1/256)}function un(v){return v<0?1+v%1:v%1}function mn(v){return 100*v|0}function fn(v,c,p,_,E){const k=function(L,U){if(L)return E(L);if(U){v.url&&U.tiles&&v.tiles&&delete v.tiles;const G=o.pick(o.extend(U,v),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);U.vector_layers&&(G.vectorLayers=U.vector_layers,G.vectorLayerIds=G.vectorLayers.map(K=>K.id)),G.tiles=c.canonicalizeTileset(G,v.url),E(null,G)}};return v.url?o.getJSON(c.transformRequest(c.normalizeSourceURL(v.url,null,p,_),o.ResourceType.Source),k):o.exported.frame(()=>k(null,v))}class An{constructor(c,p,_){this.bounds=o.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=p||0,this.maxzoom=_||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const p=Math.pow(2,c.z),_=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),E=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),k=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),L=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return c.x>=_&&c.x<k&&c.y>=E&&c.y<L}}class Le{constructor(c,p,_){this.context=c;const E=c.gl;this.buffer=E.createBuffer(),this.dynamicDraw=Boolean(_),this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ft{constructor(c,p,_,E){this.length=p.length,this.attributes=_,this.itemSize=p.bytesPerElement,this.dynamicDraw=E,this.context=c;const k=c.gl;this.buffer=k.createBuffer(),c.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,p){for(let _=0;_<this.attributes.length;_++){const E=p.attributes[this.attributes[_].name];E!==void 0&&c.enableVertexAttribArray(E)}}setVertexAttribPointers(c,p,_){for(let E=0;E<this.attributes.length;E++){const k=this.attributes[E],L=p.attributes[k.name];L!==void 0&&c.vertexAttribPointer(L,k.components,c[Xe[k.type]],!1,this.itemSize,k.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class wt{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class _t extends wt{getDefault(){return o.Color.transparent}set(c){const p=this.current;(c.r!==p.r||c.g!==p.g||c.b!==p.b||c.a!==p.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class dt extends wt{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Pt extends wt{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class yn extends wt{getDefault(){return[!0,!0,!0,!0]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||c[3]!==p[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class On extends wt{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Ln extends wt{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class In extends wt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const p=this.current;(c.func!==p.func||c.ref!==p.ref||c.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class Xn extends wt{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class Ie extends wt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;c?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=c,this.dirty=!1}}class Je extends wt{getDefault(){return[0,1]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class re extends wt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;c?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=c,this.dirty=!1}}class ce extends wt{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class Pe extends wt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;c?p.enable(p.BLEND):p.disable(p.BLEND),this.current=c,this.dirty=!1}}class ve extends wt{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class Se extends wt{getDefault(){return o.Color.transparent}set(c){const p=this.current;(c.r!==p.r||c.g!==p.g||c.b!==p.b||c.a!==p.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class yt extends wt{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class Nt extends wt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;c?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=c,this.dirty=!1}}class Kt extends wt{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class Bn extends wt{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Tn extends wt{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class Vt extends wt{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Rn extends wt{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const p=this.current;(c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||c[3]!==p[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class ur extends wt{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class Fn extends wt{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Sr extends wt{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class dr extends wt{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Pr extends wt{getDefault(){return null}set(c){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Yn extends wt{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class Qn extends wt{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Ur extends wt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class hr extends wt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Bi extends wt{constructor(c,p){super(c),this.context=c,this.parent=p}getDefault(){return null}}class ai extends Bi{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class si extends Bi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,this.attachment(),p.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Fi extends si{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class oo{constructor(c,p,_,E){this.context=c,this.width=p,this.height=_;const k=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new ai(c,k),E&&(this.depthAttachment=new si(c,k))}destroy(){const c=this.context.gl,p=this.colorAttachment.get();if(p&&c.deleteTexture(p),this.depthAttachment){const _=this.depthAttachment.get();_&&c.deleteRenderbuffer(_)}c.deleteFramebuffer(this.framebuffer)}}class _e{constructor(c,p=!1){if(this.gl=c,this.isWebGL2=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),p){const _=c;this.extVertexArrayObject={createVertexArrayOES:_.createVertexArray.bind(c),deleteVertexArrayOES:_.deleteVertexArray.bind(c),bindVertexArrayOES:_.bindVertexArray.bind(c)}}this.clearColor=new _t(this),this.clearDepth=new dt(this),this.clearStencil=new Pt(this),this.colorMask=new yn(this),this.depthMask=new On(this),this.stencilMask=new Ln(this),this.stencilFunc=new In(this),this.stencilOp=new Xn(this),this.stencilTest=new Ie(this),this.depthRange=new Je(this),this.depthTest=new re(this),this.depthFunc=new ce(this),this.blend=new Pe(this),this.blendFunc=new ve(this),this.blendColor=new Se(this),this.blendEquation=new yt(this),this.cullFace=new Nt(this),this.cullFaceSide=new Kt(this),this.frontFace=new Bn(this),this.program=new Tn(this),this.activeTexture=new Vt(this),this.viewport=new Rn(this),this.bindFramebuffer=new ur(this),this.bindRenderbuffer=new Fn(this),this.bindTexture=new Sr(this),this.bindVertexBuffer=new dr(this),this.bindElementBuffer=new Pr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Yn(this),this.pixelStoreUnpack=new Qn(this),this.pixelStoreUnpackPremultiplyAlpha=new Ur(this),this.pixelStoreUnpackFlipY=new hr(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=c.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=c.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=c.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),p||(this.extTextureHalfFloat=c.getExtension("OES_texture_half_float")),(p||this.extTextureHalfFloat&&c.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=p||c.getExtension("OES_standard_derivatives"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,p){return new Le(this,c,p)}createVertexBuffer(c,p,_){return new ft(this,c,p,_)}createRenderbuffer(c,p,_){const E=this.gl,k=E.createRenderbuffer();return this.bindRenderbuffer.set(k),E.renderbufferStorage(E.RENDERBUFFER,c,p,_),this.bindRenderbuffer.set(null),k}createFramebuffer(c,p,_){return new oo(this,c,p,_)}clear({color:c,depth:p,stencil:_}){const E=this.gl;let k=0;c&&(k|=E.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(k|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),_!==void 0&&(k|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),E.clear(k)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){g(c.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class te extends o.Evented{constructor(c,p,_,E){if(super(),this.id=c,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(p,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const p=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=fn(this._options,this.map._requestManager,p,_,(E,k)=>{this._tileJSONRequest=null,this._loaded=!0,E?(p&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${p}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new o.ErrorEvent(E))):k&&(o.extend(this,k),k.bounds&&(this.tileBounds=new An(k.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(k.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(E)})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(c,p){const _=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(_,o.ResourceType.Tile),data:void 0,uid:c.uid,tileID:c.tileID,tileZoom:c.tileZoom,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:c.isSymbolTile};if(E.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired")c.state==="loading"?c.reloadCallback=p:c.request=c.actor.send("reloadTile",E,k.bind(this));else if(c.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)c.request=c.actor.send("loadTile",E,k.bind(this),void 0,!0);else{const L=o.loadVectorTile.call({deduped:this._deduped},E,(U,G)=>{U||!G?k.call(this,U):(E.data={cacheControl:G.cacheControl,expires:G.expires,rawData:G.rawData.slice(0)},c.actor&&c.actor.send("loadTile",E,k.bind(this),void 0,!0))},!0);c.request={cancel:L}}function k(L,U){return delete c.request,c.aborted?p(null):L&&L.status!==404?p(L):(U&&U.resourceTiming&&(c.resourceTiming=U.resourceTiming),this.map._refreshExpiredTiles&&U&&c.setExpiryData(U),c.loadVectorData(U,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}}abortTile(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id})}unloadTile(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class se extends o.Evented{constructor(c,p,_,E){super(),this.id=c,this.dispatcher=_,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},p),o.extend(this,o.pick(p,["url","scheme","tileSize"]))}load(c){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=fn(this._options,this.map._requestManager,null,null,(p,_)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new o.ErrorEvent(p)):_&&(o.extend(this,_),_.bounds&&(this.tileBounds=new An(_.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(_.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),c&&c(p)})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(c){return this._options.tiles=c,this.reload(),this}setUrl(c){return this.url=c,this._options.url=c,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,p){const _=o.exported.devicePixelRatio>=2,E=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);c.request=o.getImage(this.map._requestManager.transformRequest(E,o.ResourceType.Tile),(k,L,U,G)=>(delete c.request,c.aborted?(c.state="unloaded",p(null)):k?(c.state="errored",p(k)):L?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:U,expires:G}),c.setTexture(L,this.map.painter),c.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void p(null)):p(null)))}static loadTileData(c,p,_){c.setTexture(p,_)}static unloadTileData(c,p){c.texture&&p.saveTileTexture(c.texture)}abortTile(c,p){c.request&&(c.request.cancel(),delete c.request),p()}unloadTile(c,p){c.texture&&this.map.painter.saveTileTexture(c.texture),p()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let pe;function Ae(v,c,p,_,E,k,L,U){const G=[v,p,E,c,_,k,1,1,1],K=[L,U,1],X=o.adjoint([],G),[ee,ue,he]=o.transformMat3(K,K,o.transpose(X,X));return o.multiply$1(G,[ee,0,0,0,ue,0,0,0,he],G)}class We extends o.Evented{constructor(c,p,_,E){super(),this.id=c,this.dispatcher=_,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=p,this._dirty=!1}load(c,p){this._loaded=p||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(_,E)=>{if(this._imageRequest=null,this._loaded=!0,_)this.fire(new o.ErrorEvent(_));else if(E){const{HTMLImageElement:k}=o.window;this.image=E instanceof k?o.exported.getImageData(E):E,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading()}})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this._imageRequest&&c.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(c){this.coordinates=c,this._boundsArray=void 0;const p=c.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let E=1/0,k=1/0,L=-1/0,U=-1/0;for(const ee of _)E=Math.min(E,ee.x),k=Math.min(k,ee.y),L=Math.max(L,ee.x),U=Math.max(U,ee.y);const G=Math.max(L-E,U-k),K=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),X=Math.pow(2,K);return new o.CanonicalTileID(K,Math.floor((E+L)/2*X),Math.floor((k+U)/2*X))}(p),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(c){for(const G in this.tiles){const K=this.tiles[G];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture)}if(this._boundsArray)return;const p=o.tileTransform(this.tileID,this.map.transform.projection),[_,E,k,L]=this.coordinates.map(G=>{const K=p.projection.project(G[0],G[1]);return o.getTilePoint(p,K)._round()});this.perspectiveTransform=function(G,K,X,ee,ue,he,me,ge,ye,le){const Te=Ae(0,0,G,0,0,K,G,K),ke=Ae(X,ee,ue,he,me,ge,ye,le);return o.multiply$1(ke,o.adjoint(Te,Te),ke),[ke[6]/ke[8]*G/o.EXTENT,ke[7]/ke[8]*K/o.EXTENT]}(this.width,this.height,_.x,_.y,E.x,E.y,L.x,L.y,k.x,k.y);const U=this._boundsArray=new o.StructArrayLayout4i8;U.emplaceBack(_.x,_.y,0,0),U.emplaceBack(E.x,E.y,o.EXTENT,0),U.emplaceBack(L.x,L.y,0,o.EXTENT),U.emplaceBack(k.x,k.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=c.createVertexBuffer(U,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,p=c.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(c,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(c)}loadTile(c,p){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},p(null)):(c.state="errored",p(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Qe={vector:te,raster:se,"raster-dem":class extends se{constructor(v,c,p,_){super(v,c,p,_),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(v,c){const p=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(E,k){E&&(v.state="errored",c(E)),k&&(v.dem=k,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",c(null))}v.request=o.getImage(this.map._requestManager.transformRequest(p,o.ResourceType.Tile),function(E,k,L,U){if(delete v.request,v.aborted)v.state="unloaded",c(null);else if(E)v.state="errored",c(E);else if(k){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:L,expires:U});const G=o.window.ImageBitmap&&k instanceof o.window.ImageBitmap&&(pe==null&&(pe=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),pe),K=1-(k.width-o.prevPowerOfTwo(k.width))/2;K<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const X=G?k:o.exported.getImageData(k,K),ee={uid:v.uid,coord:v.tileID,source:this.id,rawImageData:X,encoding:this.encoding,padding:K};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",ee,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(v){const c=v.canonical,p=Math.pow(2,c.z),_=(c.x-1+p)%p,E=c.x===0?v.wrap-1:v.wrap,k=(c.x+1+p)%p,L=c.x+1===p?v.wrap+1:v.wrap,U={};return U[new o.OverscaledTileID(v.overscaledZ,E,c.z,_,c.y).key]={backfilled:!1},U[new o.OverscaledTileID(v.overscaledZ,L,c.z,k,c.y).key]={backfilled:!1},c.y>0&&(U[new o.OverscaledTileID(v.overscaledZ,E,c.z,_,c.y-1).key]={backfilled:!1},U[new o.OverscaledTileID(v.overscaledZ,v.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},U[new o.OverscaledTileID(v.overscaledZ,L,c.z,k,c.y-1).key]={backfilled:!1}),c.y+1<p&&(U[new o.OverscaledTileID(v.overscaledZ,E,c.z,_,c.y+1).key]={backfilled:!1},U[new o.OverscaledTileID(v.overscaledZ,v.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},U[new o.OverscaledTileID(v.overscaledZ,L,c.z,k,c.y+1).key]={backfilled:!1}),U}unloadTile(v){v.demTexture&&this.map.painter.saveTileTexture(v.demTexture),v.fbo&&(v.fbo.destroy(),delete v.fbo),v.dem&&delete v.dem,delete v.neighboringTiles,v.state="unloaded"}},geojson:class extends o.Evented{constructor(v,c,p,_){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=p.getActor(),this.setEventedParent(_),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*E,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*E,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}getClusterExpansionZoom(v,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id},c),this}getClusterChildren(v,c){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id},c),this}getClusterLeaves(v,c,p,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:v,limit:c,offset:p},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const v=o.extend({},this.workerOptions),c=this._data;typeof c=="string"?(v.request=this.map._requestManager.transformRequest(o.exported.resolveURL(c),o.ResourceType.Source),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,v,(p,_)=>{if(this._loaded=!0,this._pendingLoad=null,p)this.fire(new o.ErrorEvent(p));else{const E={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(E.resourceTiming=_.resourceTiming[this.id]),this.fire(new o.Event("data",E)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(v,c){const p=v.actor?"reloadTile":"loadTile";v.actor=this.actor,v.request=this.actor.send(p,{type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,E)=>(delete v.request,v.unloadVectorData(),v.aborted?c(null):_?c(_):(v.loadVectorData(E,this.map.painter,p==="reloadTile"),c(null))),void 0,p==="loadTile")}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v){v.unloadVectorData(),this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends We{constructor(v,c,p,_){super(v,c,p,_),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const c of v.urls)this.urls.push(this.map._requestManager.transformRequest(c,o.ResourceType.Source).url);o.getVideo(this.urls,(c,p)=>{this._loaded=!0,c?this.fire(new o.ErrorEvent(c)):p&&(this.video=p,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const c=this.video.seekable;v<c.start(0)||v>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,c=v.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(v,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:We,canvas:class extends We{constructor(v,c,p,_){super(v,c,p,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(k=>typeof k!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${v}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?(v||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends o.Evented{constructor(v,c,p,_){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=p,this._implementation=c,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new An(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.clearTiles=this._clearTiles.bind(this),c.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this._map=v,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:c,y:p,z:_}=v.canonical;return this._implementation.hasTile({x:c,y:p,z:_})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,c){const{x:p,y:_,z:E}=v.tileID.canonical,k=new o.window.AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:p,y:_,z:E},{signal:k.signal})).then(function(L){return delete v.request,v.aborted?(v.state="unloaded",c(null)):L===void 0?(v.state="errored",c(null)):L===null?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",c(null)):function(U){return U instanceof o.window.ImageData||U instanceof o.window.HTMLCanvasElement||U instanceof o.window.ImageBitmap||U instanceof o.window.HTMLImageElement}(L)?(this.loadTileData(v,L),v.state="loaded",void c(null)):(v.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(L=>{L.code!==20&&(v.state="errored",c(L))}),v.request.cancel=()=>k.abort()}loadTileData(v,c){se.loadTileData(v,c,this._map.painter)}unloadTileData(v){se.unloadTileData(v,this._map.painter)}unloadTile(v,c){if(this.unloadTileData(v),this._implementation.unloadTile){const{x:p,y:_,z:E}=v.tileID.canonical;this._implementation.unloadTile({x:p,y:_,z:E})}c()}abortTile(v,c){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ke=function(v,c,p,_){const E=new Qe[c.type](v,c,p,_);if(E.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${E.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],E),E};function qe(v,c){const p=o.identity([]);return o.scale(p,p,[.5*v.width,.5*-v.height,1]),o.translate(p,p,[1,-1,0]),o.multiply(p,p,v.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(p)}function Me(v,c,p,_,E,k,L,U=!1){const G=v.tilesIn(_,L,U);G.sort(bt);const K=[];for(const ee of G)K.push({wrappedTileID:ee.tile.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(c,p,v._state,ee,E,k,qe(v.transform,ee.tile.tileID),U)});const X=function(ee){const ue={},he={};for(const me of ee){const ge=me.queryResults,ye=me.wrappedTileID,le=he[ye]=he[ye]||{};for(const Te in ge){const ke=ge[Te],De=le[Te]=le[Te]||{},He=ue[Te]=ue[Te]||[];for(const je of ke)De[je.featureIndex]||(De[je.featureIndex]=!0,He.push(je))}}return ue}(K);for(const ee in X)X[ee].forEach(ue=>{const he=ue.feature,me=he.layer;me&&me.type!=="background"&&me.type!=="sky"&&(he.source=me.source,me["source-layer"]&&(he.sourceLayer=me["source-layer"]),he.state=he.id!==void 0?v.getFeatureState(me["source-layer"],he.id):{})});return X}function Ue(v,c){const p=v.getRenderableIds().map(k=>v.getTileByID(k)),_=[],E={};for(let k=0;k<p.length;k++){const L=p[k],U=L.tileID.canonical.key;E[U]||(E[U]=!0,L.querySourceFeatures(_,c))}return _}function bt(v,c){const p=v.tileID,_=c.tileID;return p.overscaledZ-_.overscaledZ||p.canonical.y-_.canonical.y||p.wrap-_.wrap||p.canonical.x-_.canonical.x}function ht(){return Gu.workerClass!=null?new Gu.workerClass:new o.window.Worker(Gu.workerUrl)}const Zt="mapboxgl_preloaded_worker_pool";class rn{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<rn.workerCount;)this.workers.push(new ht);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Zt]}numActive(){return Object.keys(this.active).length}}let Jt;function pn(){return Jt||(Jt=new rn),Jt}function zn(v,c){const p={};for(const _ in v)_!=="ref"&&(p[_]=v[_]);return o.refProperties.forEach(_=>{_ in c&&(p[_]=c[_])}),p}function or(v){v=v.slice();const c=Object.create(null);for(let p=0;p<v.length;p++)c[v[p].id]=v[p];for(let p=0;p<v.length;p++)"ref"in v[p]&&(v[p]=zn(v[p],c[v[p].ref]));return v}rn.workerCount=2;const wn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function yr(v,c,p){p.push({command:wn.addSource,args:[v,c[v]]})}function _r(v,c,p){c.push({command:wn.removeSource,args:[v]}),p[v]=!0}function zs(v,c,p,_){_r(v,p,_),yr(v,c,p)}function ps(v,c,p){let _;for(_ in v[p])if(v[p].hasOwnProperty(_)&&_!=="data"&&!g(v[p][_],c[p][_]))return!1;for(_ in c[p])if(c[p].hasOwnProperty(_)&&_!=="data"&&!g(v[p][_],c[p][_]))return!1;return!0}function Et(v,c,p,_,E,k){let L;for(L in c=c||{},v=v||{})v.hasOwnProperty(L)&&(g(v[L],c[L])||p.push({command:k,args:[_,L,c[L],E]}));for(L in c)c.hasOwnProperty(L)&&!v.hasOwnProperty(L)&&(g(v[L],c[L])||p.push({command:k,args:[_,L,c[L],E]}))}function fs(v){return v.id}function bi(v,c){return v[c.id]=c,v}class Bs{constructor(c,p){this.reset(c,p)}reset(c,p){this.points=c||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.clamp(c,0,1);let p=1,_=this._distances[p];const E=c*this.paddedLength+this.padding;for(;_<E&&p<this._distances.length;)_=this._distances[++p];const k=p-1,L=this._distances[k],U=_-L,G=U>0?(E-L)/U:0;return this.points[k].mult(1-G).add(this.points[p].mult(G))}}class Sv{constructor(c,p,_){const E=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(c/_),this.yCellCount=Math.ceil(p/_);for(let L=0;L<this.xCellCount*this.yCellCount;L++)E.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=p,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,p,_,E,k){this._forEachCell(p,_,E,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(E),this.bboxes.push(k)}insertCircle(c,p,_,E){this._forEachCell(p-E,_-E,p+E,_+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(p),this.circles.push(_),this.circles.push(E)}_insertBoxCell(c,p,_,E,k,L){this.boxCells[k].push(L)}_insertCircleCell(c,p,_,E,k,L){this.circleCells[k].push(L)}_query(c,p,_,E,k,L){if(_<0||c>this.width||E<0||p>this.height)return!k&&[];const U=[];if(c<=0&&p<=0&&this.width<=_&&this.height<=E){if(k)return!0;for(let G=0;G<this.boxKeys.length;G++)U.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const K=this.circles[3*G],X=this.circles[3*G+1],ee=this.circles[3*G+2];U.push({key:this.circleKeys[G],x1:K-ee,y1:X-ee,x2:K+ee,y2:X+ee})}return L?U.filter(L):U}return this._forEachCell(c,p,_,E,this._queryCell,U,{hitTest:k,seenUids:{box:{},circle:{}}},L),k?U.length>0:U}_queryCircle(c,p,_,E,k){const L=c-_,U=c+_,G=p-_,K=p+_;if(U<0||L>this.width||K<0||G>this.height)return!E&&[];const X=[];return this._forEachCell(L,G,U,K,this._queryCellCircle,X,{hitTest:E,circle:{x:c,y:p,radius:_},seenUids:{box:{},circle:{}}},k),E?X.length>0:X}query(c,p,_,E,k){return this._query(c,p,_,E,!1,k)}hitTest(c,p,_,E,k){return this._query(c,p,_,E,!0,k)}hitTestCircle(c,p,_,E){return this._queryCircle(c,p,_,!0,E)}_queryCell(c,p,_,E,k,L,U,G){const K=U.seenUids,X=this.boxCells[k];if(X!==null){const ue=this.bboxes;for(const he of X)if(!K.box[he]){K.box[he]=!0;const me=4*he;if(c<=ue[me+2]&&p<=ue[me+3]&&_>=ue[me+0]&&E>=ue[me+1]&&(!G||G(this.boxKeys[he]))){if(U.hitTest)return L.push(!0),!0;L.push({key:this.boxKeys[he],x1:ue[me],y1:ue[me+1],x2:ue[me+2],y2:ue[me+3]})}}}const ee=this.circleCells[k];if(ee!==null){const ue=this.circles;for(const he of ee)if(!K.circle[he]){K.circle[he]=!0;const me=3*he;if(this._circleAndRectCollide(ue[me],ue[me+1],ue[me+2],c,p,_,E)&&(!G||G(this.circleKeys[he]))){if(U.hitTest)return L.push(!0),!0;{const ge=ue[me],ye=ue[me+1],le=ue[me+2];L.push({key:this.circleKeys[he],x1:ge-le,y1:ye-le,x2:ge+le,y2:ye+le})}}}}}_queryCellCircle(c,p,_,E,k,L,U,G){const K=U.circle,X=U.seenUids,ee=this.boxCells[k];if(ee!==null){const he=this.bboxes;for(const me of ee)if(!X.box[me]){X.box[me]=!0;const ge=4*me;if(this._circleAndRectCollide(K.x,K.y,K.radius,he[ge+0],he[ge+1],he[ge+2],he[ge+3])&&(!G||G(this.boxKeys[me])))return L.push(!0),!0}}const ue=this.circleCells[k];if(ue!==null){const he=this.circles;for(const me of ue)if(!X.circle[me]){X.circle[me]=!0;const ge=3*me;if(this._circlesCollide(he[ge],he[ge+1],he[ge+2],K.x,K.y,K.radius)&&(!G||G(this.circleKeys[me])))return L.push(!0),!0}}}_forEachCell(c,p,_,E,k,L,U,G){const K=this._convertToXCellCoord(c),X=this._convertToYCellCoord(p),ee=this._convertToXCellCoord(_),ue=this._convertToYCellCoord(E);for(let he=K;he<=ee;he++)for(let me=X;me<=ue;me++)if(k.call(this,c,p,_,E,this.xCellCount*me+he,L,U,G))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,p,_,E,k,L){const U=E-c,G=k-p,K=_+L;return K*K>U*U+G*G}_circleAndRectCollide(c,p,_,E,k,L,U){const G=(L-E)/2,K=Math.abs(c-(E+G));if(K>G+_)return!1;const X=(U-k)/2,ee=Math.abs(p-(k+X));if(ee>X+_)return!1;if(K<=G||ee<=X)return!0;const ue=K-G,he=ee-X;return ue*ue+he*he<=_*_}}const Ua=Math.tan(85*Math.PI/180);function ic(v,c,p,_,E,k,L){const U=o.create();if(p)if(k.name==="globe"){const G=o.calculateGlobeLabelMatrix(E,c);o.multiply(U,U,G)}else{const G=ne([],L);U[0]=G[0],U[1]=G[1],U[4]=G[2],U[5]=G[3],_||o.rotateZ(U,U,E.angle)}else o.multiply(U,E.labelPlaneMatrix,v);return U}function kv(v,c,p,_,E,k,L){const U=ic(v,c,p,_,E,k,L);return k.name==="globe"&&p||(U[2]=U[6]=U[10]=U[14]=0),U}function oc(v,c,p,_,E,k,L){if(p){if(k.name==="globe"){const U=ic(v,c,p,_,E,k,L);return o.invert(U,U),o.multiply(U,v,U),U}{const U=o.clone(v),G=o.identity([]);return G[0]=L[0],G[1]=L[1],G[4]=L[2],G[5]=L[3],o.multiply(U,U,G),_||o.rotateZ(U,U,-E.angle),U}}return E.glCoordMatrix}function Ht(v,c,p,_){const E=[v,c,p,1];p?o.transformMat4$1(E,E,_):Tv(E,E,_);const k=E[3];return E[0]/=k,E[1]/=k,E[2]/=k,E}function Kn(v,c){return Math.min(.5+v/c*.5,1.5)}function Hn(v,c){const p=v[0]/v[3],_=v[1]/v[3];return p>=-c[0]&&p<=c[0]&&_>=-c[1]&&_<=c[1]}function ja(v,c,p,_,E,k,L,U,G,K){const X=p.transform,ee=_?v.textSizeData:v.iconSizeData,ue=o.evaluateSizeForZoom(ee,p.transform.zoom),he=X.projection.name==="globe",me=[256/p.width*2+1,256/p.height*2+1],ge=_?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ge.clear();let ye=null;he&&(ye=_?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const le=v.lineVertexArray,Te=_?v.text.placedSymbolArray:v.icon.placedSymbolArray,ke=p.transform.width/p.transform.height;let De,He=!1;for(let je=0;je<Te.length;je++){const Ge=Te.get(je),{numGlyphs:et,writingMode:it}=Ge;if(it!==o.WritingMode.vertical||He||De===o.WritingMode.horizontal||(He=!0),De=it,(Ge.hidden||it===o.WritingMode.vertical)&&!He){Dr(et,ge);continue}He=!1;const lt=new o.pointGeometry(Ge.tileAnchorX,Ge.tileAnchorY);let{x:jt,y:tt,z:Mt}=X.projection.projectTilePoint(lt.x,lt.y,K.canonical);if(G){const[Un,sn,en]=G(lt);jt+=Un,tt+=sn,Mt+=en}const vt=[jt,tt,Mt,1];if(o.transformMat4$1(vt,vt,c),!Hn(vt,me)){Dr(et,ge);continue}const Rt=Kn(p.transform.cameraToCenterDistance,vt[3]),at=o.evaluateSizeForFeature(ee,ue,Ge),Ye=L?at/Rt:at*Rt,ut=Ht(jt,tt,Mt,E);if(ut[3]<=0){Dr(et,ge);continue}let Dt={};const Ot=L?null:G,dn=vu(Ge,Ye,!1,U,c,E,k,v.glyphOffsetArray,le,ge,ye,ut,lt,Dt,ke,Ot,X.projection,K,L);He=dn.useVertical,Ot&&dn.needsFlipping&&(Dt={}),(dn.notEnoughRoom||He||dn.needsFlipping&&vu(Ge,Ye,!0,U,c,E,k,v.glyphOffsetArray,le,ge,ye,ut,lt,Dt,ke,Ot,X.projection,K,L).notEnoughRoom)&&Dr(et,ge)}_?(v.text.dynamicLayoutVertexBuffer.updateData(ge),ye&&v.text.globeExtVertexBuffer.updateData(ye)):(v.icon.dynamicLayoutVertexBuffer.updateData(ge),ye&&v.icon.globeExtVertexBuffer.updateData(ye))}function yl(v,c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge){const{lineStartIndex:ye,glyphStartIndex:le,segment:Te}=U,ke=le+U.numGlyphs,De=ye+U.lineLength,He=c.getoffsetX(le),je=c.getoffsetX(ke-1),Ge=_o(v*He,p,_,E,k,L,Te,ye,De,G,K,X,ee,ue,!0,he,me,ge);if(!Ge)return null;const et=_o(v*je,p,_,E,k,L,Te,ye,De,G,K,X,ee,ue,!0,he,me,ge);return et?{first:Ge,last:et}:null}function $n(v,c,p,_){return v===o.WritingMode.horizontal&&Math.abs(_)>Math.abs(p)?{useVertical:!0}:v===o.WritingMode.vertical?_>0?{needsFlipping:!0}:null:c!==0&&function(E,k){return E===0||Math.abs(k/E)>Ua}(p,_)?c===1?{needsFlipping:!0}:null:p<0?{needsFlipping:!0}:null}function vu(v,c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge,ye,le,Te){const ke=c/24,De=v.lineOffsetX*ke,He=v.lineOffsetY*ke,{lineStartIndex:je,glyphStartIndex:Ge,numGlyphs:et,segment:it,writingMode:lt,flipState:jt}=v,tt=je+v.lineLength,Mt=vt=>{if(X){const[ut,Dt,Ot]=vt.up,dn=K.length;o.updateGlobeVertexNormal(X,dn+0,ut,Dt,Ot),o.updateGlobeVertexNormal(X,dn+1,ut,Dt,Ot),o.updateGlobeVertexNormal(X,dn+2,ut,Dt,Ot),o.updateGlobeVertexNormal(X,dn+3,ut,Dt,Ot)}const[Rt,at,Ye]=vt.point;o.addDynamicAttributes(K,Rt,at,Ye,vt.angle)};if(et>1){const vt=yl(ke,U,De,He,p,ee,ue,v,G,k,he,ge,!1,ye,le,Te);if(!vt)return{notEnoughRoom:!0};if(_&&!p){let[Rt,at,Ye]=vt.first.point,[ut,Dt,Ot]=vt.last.point;[Rt,at]=Ht(Rt,at,Ye,L),[ut,Dt]=Ht(ut,Dt,Ot,L);const dn=$n(lt,jt,(ut-Rt)*me,Dt-at);if(v.flipState=dn&&dn.needsFlipping?1:2,dn)return dn}Mt(vt.first);for(let Rt=Ge+1;Rt<Ge+et-1;Rt++){const at=_o(ke*U.getoffsetX(Rt),De,He,p,ee,ue,it,je,tt,G,k,he,ge,!1,!1,ye,le,Te);if(!at)return K.length-=4*(Rt-Ge),{notEnoughRoom:!0};Mt(at)}Mt(vt.last)}else{if(_&&!p){const Rt=Ht(ue.x,ue.y,0,E),at=je+it+1,Ye=new o.pointGeometry(G.getx(at),G.gety(at)),ut=Ht(Ye.x,Ye.y,0,E),Dt=ut[3]>0?ut:sc(ue,Ye,Rt,1,E,void 0,ye,le.canonical),Ot=$n(lt,jt,(Dt[0]-Rt[0])*me,Dt[1]-Rt[1]);if(v.flipState=Ot&&Ot.needsFlipping?1:2,Ot)return Ot}const vt=_o(ke*U.getoffsetX(Ge),De,He,p,ee,ue,it,je,tt,G,k,he,ge,!1,!1,ye,le,Te);if(!vt)return{notEnoughRoom:!0};Mt(vt)}return{}}function ac(v,c,p,_,E){const{x:k,y:L,z:U}=_.projectTilePoint(v.x,v.y,c);if(!E)return Ht(k,L,U,p);const[G,K,X]=E(v);return Ht(k+G,L+K,U+X,p)}function sc(v,c,p,_,E,k,L,U){const G=ac(v.sub(c)._unit()._add(v),U,E,L,k);return o.sub(G,p,G),o.normalize(G,G),o.scaleAndAdd(G,p,G,_)}function _o(v,c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge,ye,le){const Te=_?v-c:v+c;let ke=Te>0?1:-1,De=0;_&&(ke*=-1,De=Math.PI),ke<0&&(De+=Math.PI);let He=U+L+(ke>0?0:1)|0,je=E,Ge=E,et=0,it=0;const lt=Math.abs(Te),jt=[],tt=[];let Mt=k,vt=Mt;const Rt=()=>sc(vt,Mt,Ge,lt-et+1,X,ue,ge,ye.canonical);for(;et+it<=lt;){if(He+=ke,He<U||He>=G)return null;if(Ge=je,vt=Mt,jt.push(Ge),he&&tt.push(vt),Mt=new o.pointGeometry(K.getx(He),K.gety(He)),je=ee[He],!je){const en=ac(Mt,ye.canonical,X,ge,ue);je=en[3]>0?ee[He]=en:Rt()}et+=it,it=o.distance(Ge,je)}me&&ue&&(ee[He]&&(je=Rt(),it=o.distance(Ge,je)),ee[He]=je);const at=(lt-et)/it,Ye=Mt.sub(vt)._mult(at)._add(vt),ut=o.sub([],je,Ge),Dt=o.scaleAndAdd([],Ge,ut,at);let Ot=[0,0,1],dn=ut[0],Un=ut[1];if(le&&(Ot=ge.upVector(ye.canonical,Ye.x,Ye.y),Ot[0]!==0||Ot[1]!==0||Ot[2]!==1)){const en=[Ot[2],0,-Ot[0]],hn=o.cross([],Ot,en);o.normalize(en,en),o.normalize(hn,hn),dn=o.dot(ut,en),Un=o.dot(ut,hn)}if(p){const en=o.cross([],Ot,ut);o.normalize(en,en),o.scaleAndAdd(Dt,Dt,en,p*ke)}const sn=De+Math.atan2(Un,dn);return jt.push(Dt),he&&tt.push(Ye),{point:Dt,angle:sn,path:jt,tilePath:tt,up:Ot}}function Dr(v,c){const p=c.length,_=p+4*v;c.resize(_),c.float32.fill(-1/0,4*p,4*_)}function Tv(v,c,p){const _=c[0],E=c[1];return v[0]=p[0]*_+p[4]*E+p[12],v[1]=p[1]*_+p[5]*E+p[13],v[3]=p[3]*_+p[7]*E+p[15],v}const Io=100;class ff{constructor(c,p,_=new Sv(c.width+200,c.height+200,25),E=new Sv(c.width+200,c.height+200,25)){this.transform=c,this.grid=_,this.ignoredGrid=E,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Io,this.screenBottomBoundary=c.height+Io,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=p}placeCollisionBox(c,p,_,E,k,L,U,G){let K=_.projectedAnchorX,X=_.projectedAnchorY,ee=_.projectedAnchorZ;const ue=_.elevation,he=_.tileID,me=c.getProjection();if(ue&&he){const[je,Ge,et]=me.upVector(he.canonical,_.tileAnchorX,_.tileAnchorY),it=me.upVectorScale(he.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;K+=je*ue*it,X+=Ge*ue*it,ee+=et*ue*it}const ge=this.projectAndGetPerspectiveRatio(U,K,X,ee,_.tileID,me.name==="globe"||!!ue||this.transform.pitch>0,me),ye=L*ge.perspectiveRatio,le=(_.x1*p+E.x-_.padding)*ye+ge.point.x,Te=(_.y1*p+E.y-_.padding)*ye+ge.point.y,ke=(_.x2*p+E.x+_.padding)*ye+ge.point.x,De=(_.y2*p+E.y+_.padding)*ye+ge.point.y,He=ge.perspectiveRatio<=.55||ge.occluded;return!this.isInsideGrid(le,Te,ke,De)||!k&&this.grid.hitTest(le,Te,ke,De,G)||He?{box:[],offscreen:!1,occluded:ge.occluded}:{box:[le,Te,ke,De],offscreen:this.isOffscreen(le,Te,ke,De),occluded:!1}}placeCollisionCircles(c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge){const ye=[],le=this.transform.elevation,Te=c.getProjection(),ke=le?le.getAtTileOffsetFunc(ge,this.transform.center.lat,this.transform.worldSize,Te):null,De=new o.pointGeometry(_.tileAnchorX,_.tileAnchorY);let{x:He,y:je,z:Ge}=Te.projectTilePoint(De.x,De.y,ge.canonical);if(ke){const[Ye,ut,Dt]=ke(De);He+=Ye,je+=ut,Ge+=Dt}const et=Te.name==="globe",it=this.projectAndGetPerspectiveRatio(U,He,je,Ge,ge,et||!!le||this.transform.pitch>0,Te),{perspectiveRatio:lt}=it,jt=(ee?L/lt:L*lt)/o.ONE_EM,tt=Ht(He,je,Ge,G),Mt=it.signedDistanceFromCamera>0?yl(jt,k,_.lineOffsetX*jt,_.lineOffsetY*jt,!1,tt,De,_,E,G,{},le&&!ee?ke:null,ee&&!!le,Te,ge,ee):null;let vt=!1,Rt=!1,at=!0;if(Mt&&!it.occluded){const Ye=.5*he*lt+me,ut=new o.pointGeometry(-100,-100),Dt=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ot=new Bs,{first:dn,last:Un}=Mt,sn=dn.path.length;let en=[];for(let gn=sn-1;gn>=1;gn--)en.push(dn.path[gn]);for(let gn=1;gn<Un.path.length;gn++)en.push(Un.path[gn]);const hn=2.5*Ye;K&&(en=en.map(([gn,lr,pr],Rr)=>(ke&&!et&&(pr=ke(Rr<sn-1?dn.tilePath[sn-1-Rr]:Un.tilePath[Rr-sn+2])[2]),Ht(gn,lr,pr,K))),en.some(gn=>gn[3]<=0)&&(en=[]));let Wn=[];if(en.length>0){let gn=1/0,lr=-1/0,pr=1/0,Rr=-1/0;for(const kr of en)gn=Math.min(gn,kr[0]),pr=Math.min(pr,kr[1]),lr=Math.max(lr,kr[0]),Rr=Math.max(Rr,kr[1]);lr>=ut.x&&gn<=Dt.x&&Rr>=ut.y&&pr<=Dt.y&&(Wn=[en.map(kr=>new o.pointGeometry(kr[0],kr[1]))],(gn<ut.x||lr>Dt.x||pr<ut.y||Rr>Dt.y)&&(Wn=o.clipLine(Wn,ut.x,ut.y,Dt.x,Dt.y)))}for(const gn of Wn){Ot.reset(gn,.25*Ye);let lr=0;lr=Ot.length<=.5*Ye?1:Math.ceil(Ot.paddedLength/hn)+1;for(let pr=0;pr<lr;pr++){const Rr=pr/Math.max(lr-1,1),kr=Ot.lerp(Rr),wi=kr.x+Io,Ro=kr.y+Io;ye.push(wi,Ro,Ye,0);const ba=wi-Ye,ys=Ro-Ye,Gr=wi+Ye,Tr=Ro+Ye;if(at=at&&this.isOffscreen(ba,ys,Gr,Tr),Rt=Rt||this.isInsideGrid(ba,ys,Gr,Tr),!p&&this.grid.hitTestCircle(wi,Ro,Ye,ue)&&(vt=!0,!X))return{circles:[],offscreen:!1,collisionDetected:vt,occluded:!1}}}}return{circles:!X&&vt||!Rt?[]:ye,offscreen:at,collisionDetected:vt,occluded:it.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let _=1/0,E=1/0,k=-1/0,L=-1/0;for(const X of c){const ee=new o.pointGeometry(X.x+Io,X.y+Io);_=Math.min(_,ee.x),E=Math.min(E,ee.y),k=Math.max(k,ee.x),L=Math.max(L,ee.y),p.push(ee)}const U=this.grid.query(_,E,k,L).concat(this.ignoredGrid.query(_,E,k,L)),G={},K={};for(const X of U){const ee=X.key;if(G[ee.bucketInstanceId]===void 0&&(G[ee.bucketInstanceId]={}),G[ee.bucketInstanceId][ee.featureIndex])continue;const ue=[new o.pointGeometry(X.x1,X.y1),new o.pointGeometry(X.x2,X.y1),new o.pointGeometry(X.x2,X.y2),new o.pointGeometry(X.x1,X.y2)];o.polygonIntersectsPolygon(p,ue)&&(G[ee.bucketInstanceId][ee.featureIndex]=!0,K[ee.bucketInstanceId]===void 0&&(K[ee.bucketInstanceId]=[]),K[ee.bucketInstanceId].push(ee.featureIndex))}return K}insertCollisionBox(c,p,_,E,k){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:E,collisionGroupID:k},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,p,_,E,k){const L=p?this.ignoredGrid:this.grid,U={bucketInstanceId:_,featureIndex:E,collisionGroupID:k};for(let G=0;G<c.length;G+=4)L.insertCircle(U,c[G],c[G+1],c[G+2])}projectAndGetPerspectiveRatio(c,p,_,E,k,L,U){const G=[p,_,E,1];let K=!1;if(E||this.transform.pitch>0){o.transformMat4$1(G,G,c);const ee=U.name==="globe";this.fogState&&k&&!ee&&(K=function(he,me,ge,ye,le,Te){const ke=Te.calculateFogTileMatrix(le),De=[me,ge,ye];return o.transformMat4(De,De,ke),Ze(he,De,Te.pitch,Te._fov)}(this.fogState,p,_,E,k.toUnwrapped(),this.transform)>.9)}else Tv(G,G,c);const X=G[3];return{point:new o.pointGeometry((G[0]/X+1)/2*this.transform.width+Io,(-G[1]/X+1)/2*this.transform.height+Io),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(U)/X*.5,1.5),signedDistanceFromCamera:X,occluded:L&&G[2]>X||K}}isOffscreen(c,p,_,E){return _<Io||c>=this.screenRightBoundary||E<Io||p>this.screenBottomBoundary}isInsideGrid(c,p,_,E){return _>=0&&c<this.gridRightBoundary&&E>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const c=o.identity([]);return o.translate(c,c,[-100,-100,0]),c}}function _l(v,c,p){const _=c.createTileMatrix(v,v.worldSize,p.toUnwrapped());return o.multiply(new Float32Array(16),v.projMatrix,_)}function mf(v,c,p){if(c.projection.name===p.projection.name)return v.projMatrix;const _=p.clone();return _.setProjection(c.projection),_l(_,c.getProjection(),v)}function qd(v,c,p){return c.name===p.projection.name?v.projMatrix:_l(p,c,v)}class yu{constructor(c,p,_,E){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?p:-p))):E&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class xl{constructor(c,p,_,E,k,L=!1){this.text=new yu(c?c.text:null,p,_,k),this.icon=new yu(c?c.icon:null,p,E,k),this.clipped=L}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class lc{constructor(c,p,_,E=!1){this.text=c,this.icon=p,this.skipFade=_,this.clipped=E}}class gf{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Po{constructor(c,p,_,E,k){this.bucketInstanceId=c,this.featureIndex=p,this.sourceLayerIndex=_,this.bucketIndex=E,this.tileID=k}}class pi{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const p=++this.maxGroupID;this.collisionGroups[c]={ID:p,predicate:_=>_.collisionGroupID===p}}return this.collisionGroups[c]}}function Zd(v,c,p,_,E){const{horizontalAlign:k,verticalAlign:L}=o.getAnchorAlignment(v),U=-(k-.5)*c,G=-(L-.5)*p,K=o.evaluateVariableOffset(v,_);return new o.pointGeometry(U+K[0]*E,G+K[1]*E)}function _u(v,c,p,_,E){const k=new o.pointGeometry(v,c);return p&&k._rotate(_?E:-E),k}class Do{constructor(c,p,_,E,k){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new ff(this.transform,k),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new pi(_),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,p,_,E){const k=_.getBucket(p),L=_.latestFeatureIndex;if(!k||!L||p.id!==k.layerIds[0])return;const U=k.layers[0].layout,G=_.collisionBoxArray,K=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),X=_.tileSize/o.EXTENT,ee=_.tileID.toUnwrapped();this.transform.setProjection(k.projection);const ue=(he=_.tileID,me=k.getProjection(),ge=this.transform,me.name===this.projection?ge.calculateProjMatrix(he.toUnwrapped()):_l(ge,me,he));var he,me,ge;const ye=U.get("text-pitch-alignment")==="map",le=U.get("text-rotation-alignment")==="map";p.compileFilter();const Te=p.dynamicFilter(),ke=p.dynamicFilterNeedsFeature(),De=this.transform.calculatePixelsToTileUnitsMatrix(_),He=kv(ue,_.tileID.canonical,ye,le,this.transform,k.getProjection(),De);let je=null;if(ye){const it=oc(ue,_.tileID.canonical,ye,le,this.transform,k.getProjection(),De);je=o.multiply([],this.transform.labelPlaneMatrix,it)}let Ge=null;Te&&_.latestFeatureIndex&&(Ge={unwrappedTileID:ee,dynamicFilter:Te,dynamicFilterNeedsFeature:ke,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[k.bucketInstanceId]=new Po(k.bucketInstanceId,L,k.sourceLayerIndex,k.index,_.tileID);const et={bucket:k,layout:U,posMatrix:ue,textLabelPlaneMatrix:He,labelToScreenMatrix:je,clippingData:Ge,scale:K,textPixelRatio:X,holdingForFade:_.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(k.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(k.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(E)for(const it of k.sortKeyRanges){const{sortKey:lt,symbolInstanceStart:jt,symbolInstanceEnd:tt}=it;c.push({sortKey:lt,symbolInstanceStart:jt,symbolInstanceEnd:tt,parameters:et})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:et})}attemptAnchorPlacement(c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge,ye,le,Te){const{textOffset0:ke,textOffset1:De,crossTileID:He}=ue,je=[ke,De],Ge=Zd(c,_,E,je,k),et=this.collisionIndex.placeCollisionBox(me,k,p,_u(Ge.x,Ge.y,L,U,this.transform.angle),ee,G,K,X.predicate);if(ye){const it=me.getSymbolInstanceIconSize(Te,this.transform.zoom,ue.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(me,it,ye,_u(Ge.x,Ge.y,L,U,this.transform.angle),ee,G,K,X.predicate).box.length===0)return}if(et.box.length>0){let it;return this.prevPlacement&&this.prevPlacement.variableOffsets[He]&&this.prevPlacement.placements[He]&&this.prevPlacement.placements[He].text&&(it=this.prevPlacement.variableOffsets[He].anchor),this.variableOffsets[He]={textOffset:je,width:_,height:E,anchor:c,textScale:k,prevAnchor:it},this.markUsedJustification(me,c,ue,ge),me.allowVerticalPlacement&&(this.markUsedOrientation(me,ge,ue),this.placedOrientations[He]=ge),{shift:Ge,placedGlyphBoxes:et}}}placeLayerBucketPart(c,p,_,E){const{bucket:k,layout:L,posMatrix:U,textLabelPlaneMatrix:G,labelToScreenMatrix:K,clippingData:X,textPixelRatio:ee,holdingForFade:ue,collisionBoxArray:he,partiallyEvaluatedTextSize:me,partiallyEvaluatedIconSize:ge,collisionGroup:ye}=c.parameters,le=L.get("text-optional"),Te=L.get("icon-optional"),ke=L.get("text-allow-overlap"),De=L.get("icon-allow-overlap"),He=L.get("text-rotation-alignment")==="map",je=L.get("text-pitch-alignment")==="map",Ge=L.get("icon-text-fit")!=="none",et=L.get("symbol-z-order")==="viewport-y";this.transform.setProjection(k.projection);let it=ke&&(De||!k.hasIconData()||Te),lt=De&&(ke||!k.hasTextData()||le);!k.collisionArrays&&he&&k.deserializeCollisionBoxes(he),_&&E&&k.updateCollisionDebugBuffers(this.transform.zoom,he);const jt=(tt,Mt,vt)=>{const{crossTileID:Rt,numVerticalGlyphVertices:at}=tt;if(X){const Gr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Tr=null;if(X.dynamicFilterNeedsFeature){const rr=this.retainedQueryData[k.bucketInstanceId];Tr=X.featureIndex.loadFeature({featureIndex:tt.featureIndex,bucketIndex:rr.bucketIndex,sourceLayerIndex:rr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,X.dynamicFilter)(Gr,Tr,this.retainedQueryData[k.bucketInstanceId].tileID.canonical,new o.pointGeometry(tt.tileAnchorX,tt.tileAnchorY),this.transform.calculateDistanceTileData(X.unwrappedTileID)))return this.placements[Rt]=new lc(!1,!1,!1,!0),void(p[Rt]=!0)}if(p[Rt])return;if(ue)return void(this.placements[Rt]=new lc(!1,!1,!1));let Ye=!1,ut=!1,Dt=!0,Ot=!1,dn=!1,Un=null,sn={box:null,offscreen:null,occluded:null},en={box:null,offscreen:null,occluded:null},hn=null,Wn=null,gn=null,lr=0,pr=0,Rr=0;vt.textFeatureIndex?lr=vt.textFeatureIndex:tt.useRuntimeCollisionCircles&&(lr=tt.featureIndex),vt.verticalTextFeatureIndex&&(pr=vt.verticalTextFeatureIndex);const kr=Gr=>{Gr.tileID=this.retainedQueryData[k.bucketInstanceId].tileID;const Tr=this.transform.elevation;(Tr||Gr.elevation)&&(Gr.elevation=Tr?Tr.getAtTileOffset(Gr.tileID,Gr.tileAnchorX,Gr.tileAnchorY):0)},wi=vt.textBox;if(wi){kr(wi);const Gr=rr=>{let li=o.WritingMode.horizontal;if(k.allowVerticalPlacement&&!rr&&this.prevPlacement){const so=this.prevPlacement.placedOrientations[Rt];so&&(this.placedOrientations[Rt]=so,li=so,this.markUsedOrientation(k,li,tt))}return li},Tr=(rr,li)=>{if(k.allowVerticalPlacement&&at>0&&vt.verticalTextBox){for(const so of k.writingModes)if(so===o.WritingMode.vertical?(sn=li(),en=sn):sn=rr(),sn&&sn.box&&sn.box.length)break}else sn=rr()};if(L.get("text-variable-anchor")){let rr=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Rt]){const jr=this.prevPlacement.variableOffsets[Rt];rr.indexOf(jr.anchor)>0&&(rr=rr.filter(lo=>lo!==jr.anchor),rr.unshift(jr.anchor))}const li=(jr,lo,co)=>{const $s=k.getSymbolInstanceTextSize(me,tt,this.transform.zoom,Mt),Cc=(jr.x2-jr.x1)*$s+2*jr.padding,qo=(jr.y2-jr.y1)*$s+2*jr.padding,ia=Ge&&!De?lo:null;ia&&kr(ia);let _s={box:[],offscreen:!1,occluded:!1};const Vs=ke?2*rr.length:rr.length;for(let Hs=0;Hs<Vs;++Hs){const Sc=this.attemptAnchorPlacement(rr[Hs%rr.length],jr,Cc,qo,$s,He,je,ee,U,ye,Hs>=rr.length,tt,Mt,k,co,ia,me,ge);if(Sc&&(_s=Sc.placedGlyphBoxes,_s&&_s.box&&_s.box.length)){Ye=!0,Un=Sc.shift;break}}return _s};Tr(()=>li(wi,vt.iconBox,o.WritingMode.horizontal),()=>{const jr=vt.verticalTextBox;return jr&&kr(jr),k.allowVerticalPlacement&&!(sn&&sn.box&&sn.box.length)&&at>0&&jr?li(jr,vt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),sn&&(Ye=sn.box,Dt=sn.offscreen,Ot=sn.occluded);const so=Gr(sn&&sn.box);if(!Ye&&this.prevPlacement){const jr=this.prevPlacement.variableOffsets[Rt];jr&&(this.variableOffsets[Rt]=jr,this.markUsedJustification(k,jr.anchor,tt,so))}}else{const rr=(li,so)=>{const jr=k.getSymbolInstanceTextSize(me,tt,this.transform.zoom,Mt),lo=this.collisionIndex.placeCollisionBox(k,jr,li,new o.pointGeometry(0,0),ke,ee,U,ye.predicate);return lo&&lo.box&&lo.box.length&&(this.markUsedOrientation(k,so,tt),this.placedOrientations[Rt]=so),lo};Tr(()=>rr(wi,o.WritingMode.horizontal),()=>{const li=vt.verticalTextBox;return k.allowVerticalPlacement&&at>0&&li?(kr(li),rr(li,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Gr(sn&&sn.box&&sn.box.length)}}if(hn=sn,Ye=hn&&hn.box&&hn.box.length>0,Dt=hn&&hn.offscreen,Ot=hn&&hn.occluded,tt.useRuntimeCollisionCircles){const Gr=k.text.placedSymbolArray.get(tt.centerJustifiedTextSymbolIndex>=0?tt.centerJustifiedTextSymbolIndex:tt.verticalPlacedTextSymbolIndex),Tr=o.evaluateSizeForFeature(k.textSizeData,me,Gr),rr=L.get("text-padding");Wn=this.collisionIndex.placeCollisionCircles(k,ke,Gr,k.lineVertexArray,k.glyphOffsetArray,Tr,U,G,K,_,je,ye.predicate,tt.collisionCircleDiameter*Tr/o.ONE_EM,rr,this.retainedQueryData[k.bucketInstanceId].tileID),Ye=ke||Wn.circles.length>0&&!Wn.collisionDetected,Dt=Dt&&Wn.offscreen,Ot=Wn.occluded}if(vt.iconFeatureIndex&&(Rr=vt.iconFeatureIndex),vt.iconBox){const Gr=Tr=>{kr(Tr);const rr=Ge&&Un?_u(Un.x,Un.y,He,je,this.transform.angle):new o.pointGeometry(0,0),li=k.getSymbolInstanceIconSize(ge,this.transform.zoom,tt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(k,li,Tr,rr,De,ee,U,ye.predicate)};en&&en.box&&en.box.length&&vt.verticalIconBox?(gn=Gr(vt.verticalIconBox),ut=gn.box.length>0):(gn=Gr(vt.iconBox),ut=gn.box.length>0),Dt=Dt&&gn.offscreen,dn=gn.occluded}const Ro=le||tt.numHorizontalGlyphVertices===0&&at===0,ba=Te||tt.numIconVertices===0;if(Ro||ba?ba?Ro||(ut=ut&&Ye):Ye=ut&&Ye:ut=Ye=ut&&Ye,Ye&&hn&&hn.box&&this.collisionIndex.insertCollisionBox(hn.box,L.get("text-ignore-placement"),k.bucketInstanceId,en&&en.box&&pr?pr:lr,ye.ID),ut&&gn&&this.collisionIndex.insertCollisionBox(gn.box,L.get("icon-ignore-placement"),k.bucketInstanceId,Rr,ye.ID),Wn&&(Ye&&this.collisionIndex.insertCollisionCircles(Wn.circles,L.get("text-ignore-placement"),k.bucketInstanceId,lr,ye.ID),_)){const Gr=k.bucketInstanceId;let Tr=this.collisionCircleArrays[Gr];Tr===void 0&&(Tr=this.collisionCircleArrays[Gr]=new gf);for(let rr=0;rr<Wn.circles.length;rr+=4)Tr.circles.push(Wn.circles[rr+0]),Tr.circles.push(Wn.circles[rr+1]),Tr.circles.push(Wn.circles[rr+2]),Tr.circles.push(Wn.collisionDetected?1:0)}const ys=k.projection.name!=="globe";it=it&&(ys||!Ot),lt=lt&&(ys||!dn),this.placements[Rt]=new lc(Ye||it,ut||lt,Dt||k.justReloaded),p[Rt]=!0};if(et){const tt=k.getSortedSymbolIndexes(this.transform.angle);for(let Mt=tt.length-1;Mt>=0;--Mt){const vt=tt[Mt];jt(k.symbolInstances.get(vt),vt,k.collisionArrays[vt])}}else for(let tt=c.symbolInstanceStart;tt<c.symbolInstanceEnd;tt++)jt(k.symbolInstances.get(tt),tt,k.collisionArrays[tt]);if(_&&k.bucketInstanceId in this.collisionCircleArrays){const tt=this.collisionCircleArrays[k.bucketInstanceId];o.invert(tt.invProjMatrix,U),tt.viewportMatrix=this.collisionIndex.getViewportMatrix()}k.justReloaded=!1}markUsedJustification(c,p,_,E){const{leftJustifiedTextSymbolIndex:k,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:U,verticalPlacedTextSymbolIndex:G,crossTileID:K}=_,X=o.getAnchorJustification(p),ee=E===o.WritingMode.vertical?G:X==="left"?k:X==="center"?L:X==="right"?U:-1;k>=0&&(c.text.placedSymbolArray.get(k).crossTileID=ee>=0&&k!==ee?0:K),L>=0&&(c.text.placedSymbolArray.get(L).crossTileID=ee>=0&&L!==ee?0:K),U>=0&&(c.text.placedSymbolArray.get(U).crossTileID=ee>=0&&U!==ee?0:K),G>=0&&(c.text.placedSymbolArray.get(G).crossTileID=ee>=0&&G!==ee?0:K)}markUsedOrientation(c,p,_){const E=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,k=p===o.WritingMode.vertical?p:0,{leftJustifiedTextSymbolIndex:L,centerJustifiedTextSymbolIndex:U,rightJustifiedTextSymbolIndex:G,verticalPlacedTextSymbolIndex:K}=_,X=c.text.placedSymbolArray;L>=0&&(X.get(L).placedOrientation=E),U>=0&&(X.get(U).placedOrientation=E),G>=0&&(X.get(G).placedOrientation=E),K>=0&&(X.get(K).placedOrientation=k)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let _=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const E=p?p.symbolFadeChange(c):1,k=p?p.opacities:{},L=p?p.variableOffsets:{},U=p?p.placedOrientations:{};for(const G in this.placements){const K=this.placements[G],X=k[G];X?(this.opacities[G]=new xl(X,E,K.text,K.icon,null,K.clipped),_=_||K.text!==X.text.placed||K.icon!==X.icon.placed):(this.opacities[G]=new xl(null,E,K.text,K.icon,K.skipFade,K.clipped),_=_||K.text||K.icon)}for(const G in k){const K=k[G];if(!this.opacities[G]){const X=new xl(K,E,!1,!1);X.isHidden()||(this.opacities[G]=X,_=_||K.text.placed||K.icon.placed)}}for(const G in L)this.variableOffsets[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.variableOffsets[G]=L[G]);for(const G in U)this.placedOrientations[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.placedOrientations[G]=U[G]);_?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:c)}updateLayerOpacities(c,p){const _={};for(const E of p){const k=E.getBucket(c);k&&E.latestFeatureIndex&&c.id===k.layerIds[0]&&this.updateBucketOpacities(k,_,E.collisionBoxArray)}}updateBucketOpacities(c,p,_){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const E=c.layers[0].layout,k=!!c.layers[0].dynamicFilter(),L=new xl(null,0,!1,!1,!0),U=E.get("text-allow-overlap"),G=E.get("icon-allow-overlap"),K=E.get("text-variable-anchor"),X=E.get("text-rotation-alignment")==="map",ee=E.get("text-pitch-alignment")==="map",ue=E.get("icon-text-fit")!=="none",he=new xl(null,0,U&&(G||!c.hasIconData()||E.get("icon-optional")),G&&(U||!c.hasTextData()||E.get("text-optional")),!0);!c.collisionArrays&&_&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(_);const me=(ye,le,Te)=>{for(let ke=0;ke<le/4;ke++)ye.opacityVertexArray.emplaceBack(Te)};let ge=0;for(let ye=0;ye<c.symbolInstances.length;ye++){const le=c.symbolInstances.get(ye),{numHorizontalGlyphVertices:Te,numVerticalGlyphVertices:ke,crossTileID:De,numIconVertices:He}=le;let je=this.opacities[De];p[De]?je=L:je||(je=he,this.opacities[De]=je),p[De]=!0;const Ge=Te>0||ke>0,et=He>0,it=this.placedOrientations[De],lt=it===o.WritingMode.vertical,jt=it===o.WritingMode.horizontal||it===o.WritingMode.horizontalOnly;if(!Ge&&!et||je.isHidden()||ge++,Ge){const tt=Kd(je.text);me(c.text,Te,lt?cc:tt),me(c.text,ke,jt?cc:tt);const Mt=je.text.isHidden(),{leftJustifiedTextSymbolIndex:vt,centerJustifiedTextSymbolIndex:Rt,rightJustifiedTextSymbolIndex:at,verticalPlacedTextSymbolIndex:Ye}=le,ut=c.text.placedSymbolArray,Dt=Mt||lt?1:0;vt>=0&&(ut.get(vt).hidden=Dt),Rt>=0&&(ut.get(Rt).hidden=Dt),at>=0&&(ut.get(at).hidden=Dt),Ye>=0&&(ut.get(Ye).hidden=Mt||jt?1:0);const Ot=this.variableOffsets[De];Ot&&this.markUsedJustification(c,Ot.anchor,le,it);const dn=this.placedOrientations[De];dn&&(this.markUsedJustification(c,"left",le,dn),this.markUsedOrientation(c,dn,le))}if(et){const tt=Kd(je.icon),{placedIconSymbolIndex:Mt,verticalPlacedIconSymbolIndex:vt}=le,Rt=c.icon.placedSymbolArray,at=je.icon.isHidden()?1:0;Mt>=0&&(me(c.icon,He,lt?cc:tt),Rt.get(Mt).hidden=at),vt>=0&&(me(c.icon,le.numVerticalIconVertices,jt?cc:tt),Rt.get(vt).hidden=at)}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const tt=c.collisionArrays[ye];if(tt){let Mt=new o.pointGeometry(0,0),vt=!0;if(tt.textBox||tt.verticalTextBox){if(K){const at=this.variableOffsets[De];at?(Mt=Zd(at.anchor,at.width,at.height,at.textOffset,at.textScale),X&&Mt._rotate(ee?this.transform.angle:-this.transform.angle)):vt=!1}k&&(vt=!je.clipped),tt.textBox&&xo(c.textCollisionBox.collisionVertexArray,je.text.placed,!vt||lt,Mt.x,Mt.y),tt.verticalTextBox&&xo(c.textCollisionBox.collisionVertexArray,je.text.placed,!vt||jt,Mt.x,Mt.y)}const Rt=vt&&Boolean(!jt&&tt.verticalIconBox);tt.iconBox&&xo(c.iconCollisionBox.collisionVertexArray,je.icon.placed,Rt,ue?Mt.x:0,ue?Mt.y:0),tt.verticalIconBox&&xo(c.iconCollisionBox.collisionVertexArray,je.icon.placed,!Rt,ue?Mt.x:0,ue?Mt.y:0)}}}if(c.fullyClipped=ge===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const ye=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=ye.invProjMatrix,c.placementViewportMatrix=ye.viewportMatrix,c.collisionCircleArray=ye.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,p){const _=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*_>c}setStale(){this.stale=!0}}function xo(v,c,p,_,E){v.emplaceBack(c?1:0,p?1:0,_||0,E||0),v.emplaceBack(c?1:0,p?1:0,_||0,E||0),v.emplaceBack(c?1:0,p?1:0,_||0,E||0),v.emplaceBack(c?1:0,p?1:0,_||0,E||0)}const Av=Math.pow(2,25),Xd=Math.pow(2,24),Pi=Math.pow(2,17),xu=Math.pow(2,16),vf=Math.pow(2,9),bu=Math.pow(2,8),Xi=Math.pow(2,1);function Kd(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const c=v.placed?1:0,p=Math.floor(127*v.opacity);return p*Av+c*Xd+p*Pi+c*xu+p*vf+c*bu+p*Xi+c}const cc=0;class ms{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,p,_,E,k){const L=this._bucketParts;for(;this._currentTileIndex<c.length;)if(p.getBucketParts(L,E,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((U,G)=>U.sortKey-G.sortKey));this._currentPartIndex<L.length;){const U=L[this._currentPartIndex];if(p.placeLayerBucketPart(U,this._seenCrossTileIDs,_,U.symbolInstanceStart===0),this._currentPartIndex++,k())return!0}return!1}}class wu{constructor(c,p,_,E,k,L,U,G){this.placement=new Do(c,k,L,U,G),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(c,p,_){const E=o.exported.now(),k=()=>{const L=o.exported.now()-E;return!this._forceFullPlacement&&L>2};for(;this._currentPlacementIndex>=0;){const L=p[c[this._currentPlacementIndex]],U=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=U)&&(!L.maxzoom||L.maxzoom>U)){if(this._inProgressLayer||(this._inProgressLayer=new ms(L)),this._inProgressLayer.continuePlacement(_[L.source],this.placement,this._showCollisionBoxes,L,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Yd=512/o.EXTENT/2;class Fb{constructor(c,p,_){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let E=0;E<p.length;E++){const k=p.get(E),L=k.key;this.indexedSymbolInstances[L]||(this.indexedSymbolInstances[L]=[]),this.indexedSymbolInstances[L].push({crossTileID:k.crossTileID,coord:this.getScaledCoordinates(k,c)})}}getScaledCoordinates(c,p){const _=Yd/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+c.tileAnchorX)*_),y:Math.floor((p.canonical.y*o.EXTENT+c.tileAnchorY)*_)}}findMatches(c,p,_){const E=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let k=0;k<c.length;k++){const L=c.get(k);if(L.crossTileID)continue;const U=this.indexedSymbolInstances[L.key];if(!U)continue;const G=this.getScaledCoordinates(L,p);for(const K of U)if(Math.abs(K.coord.x-G.x)<=E&&Math.abs(K.coord.y-G.y)<=E&&!_[K.crossTileID]){_[K.crossTileID]=!0,L.crossTileID=K.crossTileID;break}}}}class yf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class uc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const p=Math.round((c-this.lng)/360);if(p!==0)for(const _ in this.indexes){const E=this.indexes[_],k={};for(const L in E){const U=E[L];U.tileID=U.tileID.unwrapTo(U.tileID.wrap+p),k[U.tileID.key]=U}this.indexes[_]=k}this.lng=c}addBucket(c,p,_){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let k=0;k<p.symbolInstances.length;k++)p.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const E=this.usedCrossTileIDs[c.overscaledZ];for(const k in this.indexes){const L=this.indexes[k];if(Number(k)>c.overscaledZ)for(const U in L){const G=L[U];G.tileID.isChildOf(c)&&G.findMatches(p.symbolInstances,c,E)}else{const U=L[c.scaledTo(Number(k)).key];U&&U.findMatches(p.symbolInstances,c,E)}}for(let k=0;k<p.symbolInstances.length;k++){const L=p.symbolInstances.get(k);L.crossTileID||(L.crossTileID=_.generate(),E[L.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Fb(c,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(c,p){for(const _ in p.indexedSymbolInstances)for(const E of p.indexedSymbolInstances[_])delete this.usedCrossTileIDs[c][E.crossTileID]}removeStaleBuckets(c){let p=!1;for(const _ in this.indexes){const E=this.indexes[_];for(const k in E)c[E[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,E[k]),delete E[k],p=!0)}return p}}class Mv{constructor(){this.layerIndexes={},this.crossTileIDs=new yf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,p,_,E){let k=this.layerIndexes[c.id];k===void 0&&(k=this.layerIndexes[c.id]=new uc);let L=!1;const U={};E.name!=="globe"&&k.handleWrapJump(_);for(const G of p){const K=G.getBucket(c);K&&c.id===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),k.addBucket(G.tileID,K,this.crossTileIDs)&&(L=!0),U[K.bucketInstanceId]=!0)}return k.removeStaleBuckets(U)&&(L=!0),L}pruneUnusedLayers(c){const p={};c.forEach(_=>{p[_]=!0});for(const _ in this.layerIndexes)p[_]||delete this.layerIndexes[_]}}const Eu=(v,c)=>o.emitValidationErrors(v,c&&c.filter(p=>p.identifier!=="source.canvas")),dc=o.pick(wn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Fs=o.pick(wn,["setCenter","setZoom","setBearing","setPitch"]),Jd={version:8,layers:[],sources:{}},Ns={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class na extends o.Evented{constructor(c,p={}){super(),this.map=c,this.dispatcher=new on(pn(),this),this.imageManager=new oe,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(c._requestManager,p.localFontFamily?o.LocalGlyphMode.all:p.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,p.localFontFamily||p.localIdeographFontFamily),this.crossTileSymbolIndex=new Mv,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const _=this;this._rtlTextPluginCallback=na.registerForPluginStateChange(E=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(k,L)=>{if(o.triggerPluginCompletionEvent(k),L&&L.every(U=>U))for(const U in _._sourceCaches){const G=_._sourceCaches[U],K=G.getSource().type;K!=="vector"&&K!=="geojson"||G.reload()}})}),this.on("data",E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const k=this.getSource(E.sourceId);if(k&&k.vectorLayerIds)for(const L in this._layers){const U=this._layers[L];U.source===k.id&&this._validateLayer(U)}})}loadURL(c,p={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const _=typeof p.validate=="boolean"?p.validate:!o.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,p.accessToken);const E=this.map._requestManager.transformRequest(c,o.ResourceType.Style);this._request=o.getJSON(E,(k,L)=>{this._request=null,k?this.fire(new o.ErrorEvent(k)):L&&this._load(L,_)})}loadJSON(c,p={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(c,p.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Jd,!1)}_updateLayerCount(c,p){const _=p?1:-1;c.is3D()&&(this._num3DLayers+=_),c.type==="circle"&&(this._numCircleLayers+=_),c.type==="symbol"&&(this._numSymbolLayers+=_)}_load(c,p){if(p&&Eu(this,o.validateStyle(c)))return;this._loaded=!0,this.stylesheet=o.clone$1(c),this._updateMapProjection();for(const E in c.sources)this.addSource(E,c.sources[E],{validate:!1});this._changed=!1,c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(c.glyphs);const _=or(this.stylesheet.layers);this._order=_.map(E=>E.id),this._layers={},this._serializedLayers={};for(const E of _){const k=o.createStyleLayer(E);k.setEventedParent(this,{layer:{id:k.id}}),this._layers[k.id]=k,this._serializedLayers[k.id]=k.serialize(),this._updateLayerCount(k,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Be(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(c){this._spriteRequest=function(p,_,E){let k,L,U;const G=o.exported.devicePixelRatio>1?"@2x":"";let K=o.getJSON(_.transformRequest(_.normalizeSpriteURL(p,G,".json"),o.ResourceType.SpriteJSON),(ue,he)=>{K=null,U||(U=ue,k=he,ee())}),X=o.getImage(_.transformRequest(_.normalizeSpriteURL(p,G,".png"),o.ResourceType.SpriteImage),(ue,he)=>{X=null,U||(U=ue,L=he,ee())});function ee(){if(U)E(U);else if(k&&L){const ue=o.exported.getImageData(L),he={};for(const me in k){const{width:ge,height:ye,x:le,y:Te,sdf:ke,pixelRatio:De,stretchX:He,stretchY:je,content:Ge}=k[me],et=new o.RGBAImage({width:ge,height:ye});o.RGBAImage.copy(ue,et,{x:le,y:Te},{x:0,y:0},{width:ge,height:ye}),he[me]={data:et,pixelRatio:De,sdf:ke,stretchX:He,stretchY:je,content:Ge}}E(null,he)}}return{cancel(){K&&(K.cancel(),K=null),X&&(X.cancel(),X=null)}}}(c,this.map._requestManager,(p,_)=>{if(this._spriteRequest=null,p)this.fire(new o.ErrorEvent(p));else if(_)for(const E in _)this.imageManager.addImage(E,_[E]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(c){const p=this.getSource(c.source);if(!p)return;const _=c.sourceLayer;_&&(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${p.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const p=[];for(const _ of c){const E=this._layers[_];E.type!=="custom"&&p.push(E.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(c){return!!this.terrain&&(typeof c.isLayerDraped=="function"?c.isLayerDraped():Ns[c.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(c){if(!this._loaded)return;const p=this._changed;if(this._changed){const E=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(E.length||k.length)&&this._updateWorkerLayers(E,k);for(const L in this._updatedSources){const U=this._updatedSources[L];U==="reload"?this._reloadSource(L):U==="clear"&&this._clearSource(L)}this._updateTilesForChangedImages();for(const L in this._updatedPaintProps)this._layers[L].updateTransitions(c);this.light.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._resetUpdates()}const _={};for(const E in this._sourceCaches){const k=this._sourceCaches[E];_[E]=k.used,k.used=!1}for(const E of this._order){const k=this._layers[E];if(k.recalculate(c,this._availableImages),!k.isHidden(c.zoom)){const U=this._getLayerSourceCache(k);U&&(U.used=!0)}const L=this.map.painter;if(L){const U=k.getProgramIds();if(!U)continue;const G=k.getProgramConfiguration(c.zoom);for(const K of U)L.useProgram(K,G)}}for(const E in _){const k=this._sourceCaches[E];_[E]!==k.used&&k.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),p&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const p in this._sourceCaches)this._sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(c){if(this._checkLoaded(),Eu(this,o.validateStyle(c)))return!1;(c=o.clone$1(c)).layers=or(c.layers);const p=function(E,k){if(!E)return[{command:wn.setStyle,args:[k]}];let L=[];try{if(!g(E.version,k.version))return[{command:wn.setStyle,args:[k]}];g(E.center,k.center)||L.push({command:wn.setCenter,args:[k.center]}),g(E.zoom,k.zoom)||L.push({command:wn.setZoom,args:[k.zoom]}),g(E.bearing,k.bearing)||L.push({command:wn.setBearing,args:[k.bearing]}),g(E.pitch,k.pitch)||L.push({command:wn.setPitch,args:[k.pitch]}),g(E.sprite,k.sprite)||L.push({command:wn.setSprite,args:[k.sprite]}),g(E.glyphs,k.glyphs)||L.push({command:wn.setGlyphs,args:[k.glyphs]}),g(E.transition,k.transition)||L.push({command:wn.setTransition,args:[k.transition]}),g(E.light,k.light)||L.push({command:wn.setLight,args:[k.light]}),g(E.fog,k.fog)||L.push({command:wn.setFog,args:[k.fog]}),g(E.projection,k.projection)||L.push({command:wn.setProjection,args:[k.projection]});const U={},G=[];(function(ee,ue,he,me){let ge;for(ge in ue=ue||{},ee=ee||{})ee.hasOwnProperty(ge)&&(ue.hasOwnProperty(ge)||_r(ge,he,me));for(ge in ue){if(!ue.hasOwnProperty(ge))continue;const ye=ue[ge];ee.hasOwnProperty(ge)?g(ee[ge],ye)||(ee[ge].type==="geojson"&&ye.type==="geojson"&&ps(ee,ue,ge)?he.push({command:wn.setGeoJSONSourceData,args:[ge,ye.data]}):zs(ge,ue,he,me)):yr(ge,ue,he)}})(E.sources,k.sources,G,U);const K=[];E.layers&&E.layers.forEach(ee=>{ee.source&&U[ee.source]?L.push({command:wn.removeLayer,args:[ee.id]}):K.push(ee)});let X=E.terrain;X&&U[X.source]&&(L.push({command:wn.setTerrain,args:[void 0]}),X=void 0),L=L.concat(G),g(X,k.terrain)||L.push({command:wn.setTerrain,args:[k.terrain]}),function(ee,ue,he){ue=ue||[];const me=(ee=ee||[]).map(fs),ge=ue.map(fs),ye=ee.reduce(bi,{}),le=ue.reduce(bi,{}),Te=me.slice(),ke=Object.create(null);let De,He,je,Ge,et,it,lt;for(De=0,He=0;De<me.length;De++)je=me[De],le.hasOwnProperty(je)?He++:(he.push({command:wn.removeLayer,args:[je]}),Te.splice(Te.indexOf(je,He),1));for(De=0,He=0;De<ge.length;De++)je=ge[ge.length-1-De],Te[Te.length-1-De]!==je&&(ye.hasOwnProperty(je)?(he.push({command:wn.removeLayer,args:[je]}),Te.splice(Te.lastIndexOf(je,Te.length-He),1)):He++,it=Te[Te.length-De],he.push({command:wn.addLayer,args:[le[je],it]}),Te.splice(Te.length-De,0,je),ke[je]=!0);for(De=0;De<ge.length;De++)if(je=ge[De],Ge=ye[je],et=le[je],!ke[je]&&!g(Ge,et))if(g(Ge.source,et.source)&&g(Ge["source-layer"],et["source-layer"])&&g(Ge.type,et.type)){for(lt in Et(Ge.layout,et.layout,he,je,null,wn.setLayoutProperty),Et(Ge.paint,et.paint,he,je,null,wn.setPaintProperty),g(Ge.filter,et.filter)||he.push({command:wn.setFilter,args:[je,et.filter]}),g(Ge.minzoom,et.minzoom)&&g(Ge.maxzoom,et.maxzoom)||he.push({command:wn.setLayerZoomRange,args:[je,et.minzoom,et.maxzoom]}),Ge)Ge.hasOwnProperty(lt)&&lt!=="layout"&&lt!=="paint"&&lt!=="filter"&&lt!=="metadata"&&lt!=="minzoom"&&lt!=="maxzoom"&&(lt.indexOf("paint.")===0?Et(Ge[lt],et[lt],he,je,lt.slice(6),wn.setPaintProperty):g(Ge[lt],et[lt])||he.push({command:wn.setLayerProperty,args:[je,lt,et[lt]]}));for(lt in et)et.hasOwnProperty(lt)&&!Ge.hasOwnProperty(lt)&&lt!=="layout"&&lt!=="paint"&&lt!=="filter"&&lt!=="metadata"&&lt!=="minzoom"&&lt!=="maxzoom"&&(lt.indexOf("paint.")===0?Et(Ge[lt],et[lt],he,je,lt.slice(6),wn.setPaintProperty):g(Ge[lt],et[lt])||he.push({command:wn.setLayerProperty,args:[je,lt,et[lt]]}))}else he.push({command:wn.removeLayer,args:[je]}),it=Te[Te.lastIndexOf(je)+1],he.push({command:wn.addLayer,args:[et,it]})}(K,k.layers,L)}catch(U){console.warn("Unable to compute style diff:",U),L=[{command:wn.setStyle,args:[k]}]}return L}(this.serialize(),c).filter(E=>!(E.command in Fs));if(p.length===0)return!1;const _=p.filter(E=>!(E.command in dc));if(_.length>0)throw new Error(`Unimplemented: ${_.map(E=>E.command).join(", ")}.`);return p.forEach(E=>{E.command!=="setTransition"&&E.command!=="setProjection"&&this[E.command].apply(this,E.args)}),this.stylesheet=c,this._updateMapProjection(),!0}addImage(c,p){return this.getImage(c)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,p),this._afterImageUpdated(c),this)}updateImage(c,p){this.imageManager.updateImage(c,p)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c),this._afterImageUpdated(c),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(c,p,_={}){if(this._checkLoaded(),this.getSource(c)!==void 0)throw new Error("There is already a source with this ID");if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.validateSource,`sources.${c}`,p,null,_))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const E=Ke(c,p,this.dispatcher,this);E.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(c),source:E.serialize(),sourceId:c}));const k=L=>{const U=(L?"symbol:":"other:")+c,G=this._sourceCaches[U]=new o.SourceCache(U,E,L);(L?this._symbolSourceCaches:this._otherSourceCaches)[c]=G,G.style=this,G.onAdd(this.map)};k(!1),p.type!=="vector"&&p.type!=="geojson"||k(!0),E.onAdd&&E.onAdd(this.map),this._changed=!0}removeSource(c){this._checkLoaded();const p=this.getSource(c);if(!p)throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${E}" is using it.`)));if(this.terrain&&this.terrain.get().source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(c);for(const E of _)delete this._sourceCaches[E.id],delete this._updatedSources[E.id],E.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:E.getSource().id})),E.setEventedParent(null),E.clearTiles();return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],p.setEventedParent(null),p.onRemove&&p.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(c,p){this._checkLoaded(),this.getSource(c).setData(p),this._changed=!0}getSource(c){const p=this._getSourceCache(c);return p&&p.getSource()}_getSources(){const c=[];for(const p in this._otherSourceCaches){const _=this._getSourceCache(p);_&&c.push(_.getSource())}return c}addLayer(c,p,_={}){this._checkLoaded();const E=c.id;if(this.getLayer(E))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${E}" already exists on this map`)));let k;if(c.type==="custom"){if(Eu(this,o.validateCustomStyleLayer(c)))return;k=o.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(E,c.source),c=o.clone$1(c),c=o.extend(c,{source:E})),this._validate(o.validateLayer,`layers.${E}`,c,{arrayIndex:-1},_))return;k=o.createStyleLayer(c),this._validateLayer(k),k.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[k.id]=k.serialize(),this._updateLayerCount(k,!0)}const L=p?this._order.indexOf(p):this._order.length;if(p&&L===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`)));this._order.splice(L,0,E),this._layerOrderChanged=!0,this._layers[E]=k;const U=this._getLayerSourceCache(k);if(this._removedLayers[E]&&k.source&&U&&k.type!=="custom"){const G=this._removedLayers[E];delete this._removedLayers[E],G.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",U.pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(c,p){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===p)return;const _=this._order.indexOf(c);this._order.splice(_,1);const E=p?this._order.indexOf(p):this._order.length;p&&E===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`))):(this._order.splice(E,0,c),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(c){this._checkLoaded();const p=this._layers[c];if(!p)return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be removed.`)));p.setEventedParent(null),this._updateLayerCount(p,!1);const _=this._order.indexOf(c);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=p,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],p.onRemove&&p.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}hasLayerType(c){for(const p in this._layers)if(this._layers[p].type===c)return!0;return!1}setLayerZoomRange(c,p,_){this._checkLoaded();const E=this.getLayer(c);E?E.minzoom===p&&E.maxzoom===_||(p!=null&&(E.minzoom=p),_!=null&&(E.maxzoom=_),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(c,p,_={}){this._checkLoaded();const E=this.getLayer(c);if(E){if(!g(E.filter,p))return p==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(o.validateFilter,`layers.${E.id}.filter`,p,{layerType:E.type},_)||(E.filter=o.clone$1(p),this._updateLayer(E)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be filtered.`)))}getFilter(c){const p=this.getLayer(c);return p&&o.clone$1(p.filter)}setLayoutProperty(c,p,_,E={}){this._checkLoaded();const k=this.getLayer(c);k?g(k.getLayoutProperty(p),_)||(k.setLayoutProperty(p,_,E),this._updateLayer(k)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(c,p){const _=this.getLayer(c);if(_)return _.getLayoutProperty(p);this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style.`)))}setPaintProperty(c,p,_,E={}){this._checkLoaded();const k=this.getLayer(c);k?g(k.getPaintProperty(p),_)||(k.setPaintProperty(p,_,E)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(c,p){const _=this.getLayer(c);return _&&_.getPaintProperty(p)}setFeatureState(c,p){this._checkLoaded();const _=c.source,E=c.sourceLayer,k=this.getSource(_);if(!k)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const L=k.type;if(L==="geojson"&&E)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(L==="vector"&&!E)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const U=this._getSourceCaches(_);for(const G of U)G.setFeatureState(E,c.id,p)}removeFeatureState(c,p){this._checkLoaded();const _=c.source,E=this.getSource(_);if(!E)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const k=E.type,L=k==="vector"?c.sourceLayer:void 0;if(k==="vector"&&!L)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(p&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const U=this._getSourceCaches(_);for(const G of U)G.removeFeatureState(L,c.id,p)}getFeatureState(c){this._checkLoaded();const p=c.source,_=c.sourceLayer,E=this.getSource(p);if(E){if(E.type!=="vector"||_)return c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(p)[0].getFeatureState(_,c.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const c={};for(const p in this._sourceCaches){const _=this._sourceCaches[p].getSource();c[_.id]||(c[_.id]=_.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:c,layers:this._serializeLayers(this._order)},p=>p!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0;const p=this._getLayerSourceCache(c);c.source&&!this._updatedSources[c.source]&&p&&p.getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",p.pause()),this._changed=!0,c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const p=L=>this._layers[L].type==="fill-extrusion",_={},E=[];for(let L=this._order.length-1;L>=0;L--){const U=this._order[L];if(p(U)){_[U]=L;for(const G of c){const K=G[U];if(K)for(const X of K)E.push(X)}}}E.sort((L,U)=>U.intersectionZ-L.intersectionZ);const k=[];for(let L=this._order.length-1;L>=0;L--){const U=this._order[L];if(p(U))for(let G=E.length-1;G>=0;G--){const K=E[G].feature;if(_[K.layer.id]<L)break;k.push(K),E.pop()}else for(const G of c){const K=G[U];if(K)for(const X of K)k.push(X.feature)}}return k}queryRenderedFeatures(c,p,_){p&&p.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",p.filter,null,p);const E={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const G of p.layers){const K=this._layers[G];if(!K)return this.fire(new o.ErrorEvent(new Error(`The layer '${G}' does not exist in the map's style and cannot be queried for features.`))),[];E[K.source]=!0}}const k=[];p.availableImages=this._availableImages;const L=p&&p.layers?p.layers.some(G=>{const K=this.getLayer(G);return K&&K.is3D()}):this.has3DLayers(),U=ln.createFromScreenPoints(c,_);for(const G in this._sourceCaches){const K=this._sourceCaches[G].getSource().id;p.layers&&!E[K]||k.push(Me(this._sourceCaches[G],this._layers,this._serializedLayers,U,p,_,L,!!this.map._showQueryGeometry))}return this.placement&&k.push(function(G,K,X,ee,ue,he,me){const ge={},ye=he.queryRenderedSymbols(ee),le=[];for(const Te of Object.keys(ye).map(Number))le.push(me[Te]);le.sort(bt);for(const Te of le){const ke=Te.featureIndex.lookupSymbolFeatures(ye[Te.bucketInstanceId],K,Te.bucketIndex,Te.sourceLayerIndex,ue.filter,ue.layers,ue.availableImages,G);for(const De in ke){const He=ge[De]=ge[De]||[],je=ke[De];je.sort((Ge,et)=>{const it=Te.featureSortOrder;if(it){const lt=it.indexOf(Ge.featureIndex);return it.indexOf(et.featureIndex)-lt}return et.featureIndex-Ge.featureIndex});for(const Ge of je)He.push(Ge)}}for(const Te in ge)ge[Te].forEach(ke=>{const De=ke.feature,He=X(G[Te]);if(!He)return;const je=He.getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=je});return ge}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),U.screenGeometry,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(c,p){p&&p.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",p.filter,null,p);const _=this._getSourceCaches(c);let E=[];for(const k of _)E=E.concat(Ue(k,p));return E}addSourceType(c,p,_){return na.getSourceType(c)?_(new Error(`A source type called "${c}" already exists.`)):(na.setSourceType(c,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:p.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(c,p={}){this._checkLoaded();const _=this.light.getLight();let E=!1;for(const L in c)if(!g(c[L],_[L])){E=!0;break}if(!E)return;const k=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(c,p),this.light.updateTransitions(k)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,p=1){if(this._checkLoaded(),!c)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=c;if(p===1){if(typeof _.source=="object"){const E="terrain-dem-src";this.addSource(E,_.source),_=o.clone$1(_),_=o.extend(_,{source:E})}if(this._validate(o.validateTerrain,"terrain",_))return}if(!this.terrain||this.terrain&&p!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,p)}else{const E=this.terrain,k=E.get();for(const L of Object.keys(o.spec.terrain))!_.hasOwnProperty(L)&&o.spec.terrain[L].default&&(_[L]=o.spec.terrain[L].default);for(const L in _)if(!g(_[L],k[L])){E.set(_),this.stylesheet.terrain=_;const U=this._setTransitionParameters({duration:0});E.updateTransitions(U);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const p=this.fog=new be(c,this.map.transform);this.stylesheet.fog=c;const _=this._setTransitionParameters({duration:0});p.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const p=this.fog,_=p.get();Object.keys(c).length===0&&p.set(c);for(const E in c)if(!g(c[E],_[E])){p.set(c),this.stylesheet.fog=c;const k=this._setTransitionParameters({duration:0});p.updateTransitions(k);break}}else this._createFog(c);this._markersNeedUpdate=!0}_setTransitionParameters(c){return{now:o.exported.now(),transition:o.extend(c,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const c=this._order.filter(_=>this.isLayerDraped(this._layers[_])),p=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...p)}_createTerrain(c,p){const _=this.terrain=new pt(c,p);this.stylesheet.terrain=c,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const E=this._setTransitionParameters({duration:0});_.updateTransitions(E)}_force3DLayerUpdate(){for(const c in this._layers){const p=this._layers[c];p.type==="fill-extrusion"&&this._updateLayer(p)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const p=this._layers[c];p.type==="symbol"&&this._updateLayer(p)}}_validate(c,p,_,E,k={}){return(!k||k.validate!==!1)&&Eu(this,c.call(o.validateStyle,o.extend({key:p,style:this.serialize(),value:_,styleSpec:o.spec},E)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this._sourceCaches)this._sourceCaches[c].clearTiles(),this._sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){const p=this._getSourceCaches(c);for(const _ of p)_.clearTiles()}_reloadSource(c){const p=this._getSourceCaches(c);for(const _ of p)_.resume(),_.reload()}_reloadSources(){for(const c of this._getSources())c.reload&&c.reload()}_updateSources(c){for(const p in this._sourceCaches)this._sourceCaches[p].update(c)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const p=this._sourceCaches[c];p.resume(),p.reload()}}_updatePlacement(c,p,_,E,k=!1){let L=!1,U=!1;const G={};for(const K of this._order){const X=this._layers[K];if(X.type!=="symbol")continue;if(!G[X.source]){const ue=this._getLayerSourceCache(X);if(!ue)continue;G[X.source]=ue.getRenderableIds(!0).map(he=>ue.getTileByID(he)).sort((he,me)=>me.tileID.overscaledZ-he.tileID.overscaledZ||(he.tileID.isLessThan(me.tileID)?-1:1))}const ee=this.crossTileSymbolIndex.addLayer(X,G[X.source],c.center.lng,c.projection);L=L||ee}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),k=k||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),c.zoom))&&(this.pauseablePlacement=new wu(c,this._order,k,p,_,E,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,G),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),U=!0),L&&this.pauseablePlacement.placement.setStale()),U||L)for(const K of this._order){const X=this._layers[K];X.type==="symbol"&&this.placement.updateLayerOpacities(X,G[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,p,_){this.imageManager.getImages(p.icons,_),this._updateTilesForChangedImages();const E=k=>{k&&k.setDependencies(p.tileID.key,p.type,p.icons)};E(this._otherSourceCaches[p.source]),E(this._symbolSourceCaches[p.source])}getGlyphs(c,p,_){this.glyphManager.getGlyphs(p.stacks,_)}getResource(c,p,_){return o.makeRequest(p,_)}_getSourceCache(c){return this._otherSourceCaches[c]}_getLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}_getSourceCaches(c){const p=[];return this._otherSourceCaches[c]&&p.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&p.push(this._symbolSourceCaches[c]),p}_isSourceCacheLoaded(c){const p=this._getSourceCaches(c);return p.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${c}'`))),!1):p.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}na.getSourceType=function(v){return Qe[v]},na.setSourceType=function(v,c){Qe[v]=c},na.registerForPluginStateChange=o.registerForPluginStateChange;var Cu=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Iv="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Pv=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Qd=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Dv=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let _f={},xf={};const hc=[];bl(Cu,hc),bl(Pv,hc),bl(Qd,hc),bl(Dv,hc),_f=sr("",Pv),xf=sr(Dv,Qd);const Rv=sr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),eh=Cu,th=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var bf={background:sr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:sr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:sr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:sr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:sr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:sr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:sr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:sr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:sr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:sr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:sr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:sr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:sr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:sr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:sr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Iv),skyboxGradient:sr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Iv),skyboxCapture:sr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:sr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function bl(v,c){const p=v.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of p)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const E=_.split(" ");for(const k of E)c.includes(k)||c.push(k)}}function sr(v,c){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=c.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),E={},k=[...hc];return bl(v,k),bl(c,k),{fragmentSource:v=v.replace(p,(L,U,G,K,X)=>(E[X]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${G} ${K} ${X};
#else
uniform ${G} ${K} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${G} ${K} ${X} = u_${X};
#endif
`)),vertexSource:c=c.replace(p,(L,U,G,K,X)=>{const ee=K==="float"?"vec2":"vec4",ue=X.match(/color/)?"color":ee;return E[X]?U==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${G} ${ee} a_${X};
varying ${G} ${K} ${X};
#else
uniform ${G} ${K} u_${X};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${G} ${K} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ue}(a_${X}, u_${X}_t);
#else
    ${G} ${K} ${X} = u_${X};
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${G} ${ee} a_${X};
#else
uniform ${G} ${K} u_${X};
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${G} ${K} ${X} = a_${X};
#else
    ${G} ${K} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${G} ${K} ${X} = unpack_mix_${ue}(a_${X}, u_${X}_t);
#else
    ${G} ${K} ${X} = u_${X};
#endif
`}),staticAttributes:_,usedDefines:k}}class Su{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,p,_,E,k,L,U){this.context=c;let G=this.boundPaintVertexBuffers.length!==E.length;for(let X=0;!G&&X<E.length;X++)this.boundPaintVertexBuffers[X]!==E[X]&&(G=!0);let K=this.boundDynamicVertexBuffers.length!==U.length;for(let X=0;!K&&X<U.length;X++)this.boundDynamicVertexBuffers[X]!==U[X]&&(K=!0);if(!c.extVertexArrayObject||!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==_||G||K||this.boundIndexBuffer!==k||this.boundVertexOffset!==L)this.freshBind(p,_,E,k,L,U);else{c.bindVertexArrayOES.set(this.vao);for(const X of U)X&&X.bind();k&&k.dynamicDraw&&k.bind()}}freshBind(c,p,_,E,k,L){let U;const G=c.numAttributes,K=this.context,X=K.gl;if(K.extVertexArrayObject)this.vao&&this.destroy(),this.vao=K.extVertexArrayObject.createVertexArrayOES(),K.bindVertexArrayOES.set(this.vao),U=0,this.boundProgram=c,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=E,this.boundVertexOffset=k,this.boundDynamicVertexBuffers=L;else{U=K.currentNumAttributes||0;for(let ee=G;ee<U;ee++)X.disableVertexAttribArray(ee)}p.enableAttributes(X,c),p.bind(),p.setVertexAttribPointers(X,c,k);for(const ee of _)ee.enableAttributes(X,c),ee.bind(),ee.setVertexAttribPointers(X,c,k);for(const ee of L)ee&&(ee.enableAttributes(X,c),ee.bind(),ee.setVertexAttribPointers(X,c,k));E&&E.bind(),K.currentNumAttributes=G}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function wf(v,c){const p=Math.pow(2,c.canonical.z),_=c.canonical.y;return[new o.MercatorCoordinate(0,_/p).toLngLat().lat,new o.MercatorCoordinate(0,(_+1)/p).toLngLat().lat]}function ku(v,c,p,_,E,k,L){const U=v.context,G=U.gl,K=p.fbo;if(!K)return;v.prepareDrawTile();const X=v.useProgram("hillshade");U.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,K.colorAttachment.get());const ee=((ge,ye,le,Te)=>{const ke=le.paint.get("hillshade-shadow-color"),De=le.paint.get("hillshade-highlight-color"),He=le.paint.get("hillshade-accent-color");let je=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=ge.transform.angle);const Ge=!ge.options.moving;return{u_matrix:Te||ge.transform.calculateProjMatrix(ye.tileID.toUnwrapped(),Ge),u_image:0,u_latrange:wf(0,ye.tileID),u_light:[le.paint.get("hillshade-exaggeration"),je],u_shadow:ke,u_highlight:De,u_accent:He}})(v,p,_,v.terrain?c.projMatrix:null);v.prepareDrawProgram(U,X,c.toUnwrapped());const{tileBoundsBuffer:ue,tileBoundsIndexBuffer:he,tileBoundsSegments:me}=v.getTileBoundsBuffers(p);X.draw(U,G.TRIANGLES,E,k,L,o.CullFaceMode.disabled,ee,_.id,ue,he,me)}function Tu(v,c,p){if(!c.needsDEMTextureUpload)return;const _=v.context,E=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||v.getTileTexture(p.stride);const k=p.getPixels();c.demTexture?c.demTexture.update(k,{premultiply:!1}):c.demTexture=new o.Texture(_,k,E.RGBA,{premultiply:!1}),c.needsDEMTextureUpload=!1}function nh(v,c,p,_,E,k){const L=v.context,U=L.gl;if(!c.dem)return;const G=c.dem;if(L.activeTexture.set(U.TEXTURE1),Tu(v,c,G),!c.demTexture)return;c.demTexture.bind(U.NEAREST,U.CLAMP_TO_EDGE);const K=G.dim;L.activeTexture.set(U.TEXTURE0);let X=c.fbo;if(!X){const me=new o.Texture(L,{width:K,height:K,data:null},U.RGBA);me.bind(U.LINEAR,U.CLAMP_TO_EDGE),X=c.fbo=L.createFramebuffer(K,K,!0),X.colorAttachment.set(me.texture)}L.bindFramebuffer.set(X.framebuffer),L.viewport.set([0,0,K,K]);const{tileBoundsBuffer:ee,tileBoundsIndexBuffer:ue,tileBoundsSegments:he}=v.getMercatorTileBoundsBuffers();v.useProgram("hillshadePrepare").draw(L,U.TRIANGLES,_,E,k,o.CullFaceMode.disabled,((me,ge)=>{const ye=ge.stride,le=o.create();return o.ortho(le,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(le,le,[0,-o.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[ye,ye],u_zoom:me.overscaledZ,u_unpack:ge.unpackVector}})(c.tileID,G),p.id,ee,ue,he),c.needsHillshadePrepare=!1}const rh=v=>({u_matrix:new o.UniformMatrix4f(v),u_image0:new o.Uniform1i(v),u_skirt_height:new o.Uniform1f(v)}),Ef=(v,c)=>({u_matrix:v,u_image0:0,u_skirt_height:c}),ih=(v,c,p,_,E,k,L,U,G,K,X,ee,ue,he,me)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:p,u_zoom_transition:E,u_merc_center:k,u_image0:0,u_frustum_tl:L,u_frustum_tr:U,u_frustum_br:G,u_frustum_bl:K,u_globe_pos:X,u_globe_radius:ee,u_viewport:ue,u_grid_matrix:me?Float32Array.from(me):new Float32Array(9),u_skirt_height:he});function Cf(v,c){return v!=null&&c!=null&&!(!v.hasData()||!c.hasData())&&v.demTexture!=null&&c.demTexture!=null&&v.tileID.key!==c.tileID.key}const Us=new class{constructor(){this.operations={}}newMorphing(v,c,p,_,E){if(v in this.operations){const k=this.operations[v];k.to.tileID.key!==p.tileID.key&&(k.queued=p)}else this.operations[v]={startTime:_,phase:0,duration:E,from:c,to:p,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const c=this.operations[v];return{from:c.from,to:c.to,phase:c.phase}}update(v){for(const c in this.operations){const p=this.operations[c];for(p.phase=(v-p.startTime)/p.duration;p.phase>=1||!this._validOp(p);)if(!this._nextOp(p,v)){delete this.operations[c];break}}}_nextOp(v,c){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=c,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},wl={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function oh(v){return 6*Math.pow(1.5,22-v)}function Sf(v,c){const p=1<<v.z;return!c&&(v.x===0||v.x===p-1)||v.y===0||v.y===p-1}const er=v=>({u_matrix:v});function Au(v,c,p,_,E){if(E>0){const k=o.exported.now(),L=(k-v.timeAdded)/E,U=c?(k-c.timeAdded)/E:-1,G=p.getSource(),K=_.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),X=!c||Math.abs(c.tileID.overscaledZ-K)>Math.abs(v.tileID.overscaledZ-K),ee=X&&v.refreshedUponExpiration?1:o.clamp(X?L:1-U,0,1);return v.refreshedUponExpiration&&L>=1&&(v.refreshedUponExpiration=!1),c?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}class Lv extends o.SourceCache{constructor(c){const p={type:"raster-dem",maxzoom:c.transform.maxZoom},_=new on(pn(),null),E=Ke("mock-dem",p,_,c.style);super("mock-dem",E,!1),E.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,p){c.state="loaded",p(null)}}class Ov extends o.SourceCache{constructor(c){const p=Ke("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new on(pn(),null),c.style);super("proxy",p,!1),p.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,p,_){if(c.freezeTileCoverage)return;this.transform=c;const E=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((k,L)=>{if(k[L.key]="",!this._tiles[L.key]){const U=new o.Tile(L,this._source.tileSize*L.overscaleFactor(),c.tileZoom);U.state="loaded",this._tiles[L.key]=U}return k},{});for(const k in this._tiles)k in E||(this.freeFBO(k),this._tiles[k].unloadVectorData(),delete this._tiles[k])}freeFBO(c){const p=this.proxyCachedFBO[c];if(p!==void 0){const _=Object.values(p);this.renderCachePool.push(..._),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class kf extends o.OverscaledTileID{constructor(c,p,_){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=p,this.projMatrix=_}}class Tf extends o.Elevation{constructor(c,p){super(),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,E,k]=function(G){const K=new o.StructArrayLayout2i4,X=new o.StructArrayLayout3ui6,ee=131;K.reserve(17161),X.reserve(33800);const ue=o.EXTENT/128,he=o.EXTENT+ue/2,me=he+ue;for(let ye=-ue;ye<me;ye+=ue)for(let le=-ue;le<me;le+=ue){const Te=le<0||le>he||ye<0||ye>he?24575:0,ke=o.clamp(Math.round(le),0,o.EXTENT),De=o.clamp(Math.round(ye),0,o.EXTENT);K.emplaceBack(ke+Te,De)}const ge=(ye,le)=>{const Te=le*ee+ye;X.emplaceBack(Te+1,Te,Te+ee),X.emplaceBack(Te+ee,Te+ee+1,Te+1)};for(let ye=1;ye<129;ye++)for(let le=1;le<129;le++)ge(le,ye);return[0,129].forEach(ye=>{for(let le=0;le<130;le++)ge(le,ye),ge(ye,le)}),[K,X,32768]}(),L=c.context;this.gridBuffer=L.createVertexBuffer(_,o.posAttributes.members),this.gridIndexBuffer=L.createIndexBuffer(E),this.gridSegments=o.SegmentVector.simpleSegment(0,0,_.length,E.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,_.length,k),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Ov(p.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const U=L.gl;this._overlapStencilMode=new o.StencilMode({func:U.GEQUAL,mask:255},0,255,U.KEEP,U.KEEP,U.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=p,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Lv(p.map)}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),c.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=c,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(c,p,_){if(c&&c.terrain){this._style!==c&&(this.style=c),this.enabled=!0;const E=c.terrain.properties;this.sourceCache=c.terrain.drapeRenderMode===0?this._mockSourceCache:c._getSourceCache(E.get("source")),this._exaggeration=E.get("exaggeration");const k=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const L=this.getScaledDemTileSize();this.sourceCache.update(p,L,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,k(),this._initializing=!0),k(),p.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(p),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const c=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||c.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${c.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${c.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._sourceCaches)this._style._sourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const p=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const E=this.proxyCoords=p.getIds().map(G=>{const K=p.getTileByID(G).tileID;return K.projMatrix=_.calculateProjMatrix(K.toUnwrapped()),K});(function(G,K){const X=K.transform.pointCoordinate(K.transform.getCameraPoint()),ee=new o.pointGeometry(X.x,X.y);G.sort((ue,he)=>{if(he.overscaledZ-ue.overscaledZ)return he.overscaledZ-ue.overscaledZ;const me=new o.pointGeometry(ue.canonical.x+(1<<ue.canonical.z)*ue.wrap,ue.canonical.y),ge=new o.pointGeometry(he.canonical.x+(1<<he.canonical.z)*he.wrap,he.canonical.y),ye=ee.mult(1<<ue.canonical.z);return ye.x-=.5,ye.y-=.5,ye.distSqr(me)-ye.distSqr(ge)})})(E,this.painter),this._previousZoom=_.zoom;const k=this.proxyToSource||{};this.proxyToSource={},E.forEach(G=>{this.proxyToSource[G.key]={}}),this.terrainTileForTile={};const L=this._style._sourceCaches;for(const G in L){const K=L[G];if(!K.used||(K!==this.sourceCache&&this.resetTileLookupCache(K.id),this._setupProxiedCoordsForOrtho(K,c[G],k),K.usedForTerrain))continue;const X=c[G];K.getSource().reparseOverscaled&&this._assignTerrainTiles(X)}this.proxiedCoords[p.id]=E.map(G=>new kf(G,G.key,this.orthoMatrix)),this._assignTerrainTiles(E),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(k),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const U={};this._visibleDemTiles=[];for(const G of this.proxyCoords){const K=this.terrainTileForTile[G.key];if(!K)continue;const X=K.tileID.key;X in U||(this._visibleDemTiles.push(K),U[X]=X)}}_assignTerrainTiles(c){this._initializing||c.forEach(p=>{if(this.terrainTileForTile[p.key])return;const _=this._findTileCoveringTileID(p,this.sourceCache);_&&(this.terrainTileForTile[p.key]=_)})}_prepareDEMTextures(){const c=this.painter.context,p=c.gl;for(const _ in this.terrainTileForTile){const E=this.terrainTileForTile[_],k=E.dem;!k||E.demTexture&&!E.needsDEMTextureUpload||(c.activeTexture.set(p.TEXTURE1),Tu(this.painter,E,k))}}_prepareDemTileUniforms(c,p,_,E){if(!p||p.demTexture==null)return!1;const k=c.tileID.canonical,L=Math.pow(2,p.tileID.canonical.z-k.z),U=E||"";return _[`u_dem_tl${U}`]=[k.x*L%1,k.y*L%1],_[`u_dem_scale${U}`]=L,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,p=c.gl;if(!this._emptyDepthBufferTexture){const _=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(c,_,p.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const p=this._visibleDemTiles.reduce((_,E)=>{if(!E.dem)return _;const k=E.dem.tree.minimums[0];return k>0&&c++,_+k},0);return c?p/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,p=c.gl;c.activeTexture.set(p.TEXTURE2);const _=this._getLoadedAreaMinimum(),E=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let k=this._emptyDEMTexture;return k?k.update(E,{premultiply:!1}):k=this._emptyDEMTexture=new o.Texture(c,E,p.RGBA,{premultiply:!1}),k}setupElevationDraw(c,p,_){const E=this.painter.context,k=E.gl,L=(U=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(U),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var U;L.u_dem_size=this.sourceCache.getSource().tileSize,L.u_exaggeration=this.exaggeration();let G=null,K=null,X=1;if(_&&_.morphing&&this._useVertexMorphing){const ee=_.morphing.srcDemTile,ue=_.morphing.dstDemTile;X=_.morphing.phase,ee&&ue&&(this._prepareDemTileUniforms(c,ee,L,"_prev")&&(K=ee),this._prepareDemTileUniforms(c,ue,L)&&(G=ue))}if(K&&G?(E.activeTexture.set(k.TEXTURE2),G.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE,k.NEAREST),E.activeTexture.set(k.TEXTURE4),K.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE,k.NEAREST),L.u_dem_lerp=X):(G=this.terrainTileForTile[c.tileID.key],E.activeTexture.set(k.TEXTURE2),(this._prepareDemTileUniforms(c,G,L)?G.demTexture:this.emptyDEMTexture).bind(k.NEAREST,k.CLAMP_TO_EDGE)),E.activeTexture.set(k.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE),this._depthFBO&&(L.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE),L.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&G){const ee=(1<<G.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;L.u_meter_to_dem=ee}if(_&&_.labelPlaneMatrixInv&&(L.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),p.setTerrainUniformValues(E,L),this.painter.transform.projection.name==="globe"){const ee=this.globeUniformValues(this.painter.transform,c.tileID.canonical,_&&_.useDenormalizedUpVectorScale);p.setGlobeUniformValues(E,ee)}}globeUniformValues(c,p,_){const E=c.projection;return{u_tile_tl_up:E.upVector(p,0,0),u_tile_tr_up:E.upVector(p,o.EXTENT,0),u_tile_br_up:E.upVector(p,o.EXTENT,o.EXTENT),u_tile_bl_up:E.upVector(p,0,o.EXTENT),u_tile_up_scale:_?o.globeMetersToEcef(1):E.upVectorScale(p,c.center.lat,c.worldSize).metersToTile}}renderToBackBuffer(c){const p=this.painter,_=this.painter.context;c.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,p.width,p.height]),p.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(E,k,L,U,G){if(E.transform.projection.name==="globe")(function(K,X,ee,ue,he){const me=K.context,ge=me.gl;let ye,le;const Te=K.options.showTerrainWireframe?2:0,ke=K.transform,De=o.globeUseCustomAntiAliasing(K,me,ke),He=(Rt,at)=>{if(le===Rt)return;const Ye=[wl[Rt],"PROJECTION_GLOBE_VIEW"];De&&Ye.push("CUSTOM_ANTIALIASING"),at&&Ye.push(wl[Te]),ye=K.useProgram("globeRaster",null,Ye),le=Rt},je=K.colorModeForRenderPass(),Ge=new o.DepthMode(ge.LEQUAL,o.DepthMode.ReadWrite,K.depthRangeFor3D);Us.update(he);const et=o.calculateGlobeMercatorMatrix(ke),it=[o.mercatorXfromLng(ke.center.lng),o.mercatorYfromLat(ke.center.lat)],lt=Te?[!1,!0]:[!1],jt=K.globeSharedBuffers,tt=[ke.width*o.exported.devicePixelRatio,ke.height*o.exported.devicePixelRatio],Mt=Float32Array.from(ke.globeMatrix),vt={useDenormalizedUpVectorScale:!0};if(lt.forEach(Rt=>{const at=K.transform,Ye=oh(at.zoom)*X.exaggeration();le=-1;const ut=Rt?ge.LINES:ge.TRIANGLES;for(const Dt of ue){const Ot=ee.getTile(Dt),dn=o.StencilMode.disabled,Un=X.prevTerrainTileForTile[Dt.key],sn=X.terrainTileForTile[Dt.key];Cf(Un,sn)&&Us.newMorphing(Dt.key,Un,sn,he,250),me.activeTexture.set(ge.TEXTURE0),Ot.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);const en=Us.getMorphValuesForProxy(Dt.key),hn=en?1:0;en&&o.extend$1(vt,{morphing:{srcDemTile:en.from,dstDemTile:en.to,phase:o.easeCubicInOut(en.phase)}});const Wn=o.tileCornersToBounds(Dt.canonical),gn=o.getLatitudinalLod(Wn.getCenter().lat),lr=o.getGridMatrix(Dt.canonical,Wn,gn,at.worldSize/at._pixelsPerMercatorPixel),pr=o.globeNormalizeECEF(o.globeTileBounds(Dt.canonical)),Rr=ih(at.projMatrix,Mt,et,pr,o.globeToMercatorTransition(at.zoom),it,at.frustumCorners.TL,at.frustumCorners.TR,at.frustumCorners.BR,at.frustumCorners.BL,at.globeCenterInViewSpace,at.globeRadius,tt,Ye,lr);if(He(hn,Rt),X.setupElevationDraw(Ot,ye,vt),K.prepareDrawProgram(me,ye,Dt.toUnwrapped()),jt){const[kr,wi,Ro]=Rt?jt.getWirefameBuffers(K.context,gn):jt.getGridBuffers(gn,Ye!==0);ye.draw(me,ut,Ge,dn,je,o.CullFaceMode.backCCW,Rr,"globe_raster",kr,wi,Ro)}}}),jt){const Rt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];De&&Rt.push("CUSTOM_ANTIALIASING"),ye=K.useProgram("globeRaster",null,Rt);for(const at of ue){const{x:Ye,y:ut,z:Dt}=at.canonical,Ot=ut===0,dn=ut===(1<<Dt)-1,[Un,sn,en,hn]=jt.getPoleBuffers(Dt);if(hn&&(Ot||dn)){const Wn=ee.getTile(at);me.activeTexture.set(ge.TEXTURE0),Wn.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);let gn=o.globePoleMatrixForTile(Dt,Ye,ke);const lr=o.globeNormalizeECEF(o.globeTileBounds(at.canonical)),pr=(Rr,kr)=>Rr.draw(me,ge.TRIANGLES,Ge,o.StencilMode.disabled,je,o.CullFaceMode.disabled,ih(ke.projMatrix,gn,gn,lr,0,it,ke.frustumCorners.TL,ke.frustumCorners.TR,ke.frustumCorners.BR,ke.frustumCorners.BL,ke.globeCenterInViewSpace,ke.globeRadius,tt,0),"globe_pole_raster",kr,en,hn);X.setupElevationDraw(Wn,ye,vt),K.prepareDrawProgram(me,ye,at.toUnwrapped()),Ot&&pr(ye,Un),dn&&(gn=o.scale(o.create(),gn,[1,-1,1]),pr(ye,sn))}}}})(E,k,L,U,G);else{const K=E.context,X=K.gl;let ee,ue;const he=E.options.showTerrainWireframe?2:0,me=(ke,De)=>{if(ue===ke)return;const He=[wl[ke]];De&&He.push(wl[he]),ee=E.useProgram("terrainRaster",null,He),ue=ke},ge=E.colorModeForRenderPass(),ye=new o.DepthMode(X.LEQUAL,o.DepthMode.ReadWrite,E.depthRangeFor3D);Us.update(G);const le=E.transform,Te=oh(le.zoom)*k.exaggeration();(he?[!1,!0]:[!1]).forEach(ke=>{ue=-1;const De=ke?X.LINES:X.TRIANGLES,[He,je]=ke?k.getWirefameBuffer():[k.gridIndexBuffer,k.gridSegments];for(const Ge of U){const et=L.getTile(Ge),it=o.StencilMode.disabled,lt=k.prevTerrainTileForTile[Ge.key],jt=k.terrainTileForTile[Ge.key];Cf(lt,jt)&&Us.newMorphing(Ge.key,lt,jt,G,250),K.activeTexture.set(X.TEXTURE0),et.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const tt=Us.getMorphValuesForProxy(Ge.key),Mt=tt?1:0;let vt;tt&&(vt={morphing:{srcDemTile:tt.from,dstDemTile:tt.to,phase:o.easeCubicInOut(tt.phase)}});const Rt=Ef(Ge.projMatrix,Sf(Ge.canonical,le.renderWorldCopies)?Te/10:Te);me(Mt,ke),k.setupElevationDraw(et,ee,vt),E.prepareDrawProgram(K,ee,Ge.toUnwrapped()),ee.draw(K,De,ye,it,ge,o.CullFaceMode.backCCW,Rt,"terrain_raster",k.gridBuffer,He,je)}})}}(p,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,p.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const p=this.painter,_=this.painter.context,E=this.proxySourceCache,k=this.proxiedCoords[E.id],L=this._drapedRenderBatches.shift(),U=[],G=p.style.order;let K=0;for(const X of k){const ee=E.getTileByID(X.proxyTileKey),ue=E.proxyCachedFBO[X.key]?E.proxyCachedFBO[X.key][c]:void 0,he=ue!==void 0?E.renderCache[ue]:this.pool[K++],me=ue!==void 0;if(ee.texture=he.tex,me&&!he.dirty){U.push(ee.tileID);continue}let ge;_.bindFramebuffer.set(he.fb.framebuffer),this.renderedToTile=!1,he.dirty&&(_.clear({color:o.Color.transparent,stencil:0}),he.dirty=!1);for(let ye=L.start;ye<=L.end;++ye){const le=p.style._layers[G[ye]];if(le.isHidden(p.transform.zoom))continue;const Te=p.style._getLayerSourceCache(le),ke=Te?this.proxyToSource[X.key][Te.id]:[X];if(!ke)continue;const De=ke;_.viewport.set([0,0,he.fb.width,he.fb.height]),ge!==(Te?Te.id:null)&&(this._setupStencil(he,ke,le,Te),ge=Te?Te.id:null),p.renderLayer(p,Te,le,De)}this.renderedToTile?(he.dirty=!0,U.push(ee.tileID)):me||--K,K===5&&(K=0,this.renderToBackBuffer(U))}return this.renderToBackBuffer(U),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,p.width,p.height]),L.end+1}postRender(){}renderCacheEfficiency(c){const p=c.order.length;if(p===0)return{efficiency:100};let _,E=0,k=0,L=!1;for(let U=0;U<p;++U){const G=c._layers[c.order[U]];this._style.isLayerDraped(G)?(L&&++E,++k):L||(L=!0,_=G.id)}return k===0?{efficiency:100}:{efficiency:100*(1-E/k),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(p=>p.dem).forEach(p=>{c=Math.min(c,p.dem.tree.minimums[0])}),c===0?c:(c-30)*this._exaggeration}raycast(c,p,_){if(!this._visibleDemTiles)return null;const E=this._visibleDemTiles.filter(k=>k.dem).map(k=>{const L=k.tileID,U=1<<L.overscaledZ,{x:G,y:K}=L.canonical,X=G/U,ee=(G+1)/U,ue=K/U,he=(K+1)/U;return{minx:X,miny:ue,maxx:ee,maxy:he,t:k.dem.tree.raycastRoot(X,ue,ee,he,c,p,_),tile:k}});E.sort((k,L)=>(k.t!==null?k.t:Number.MAX_VALUE)-(L.t!==null?L.t:Number.MAX_VALUE));for(const k of E){if(k.t==null)return null;const L=k.tile.dem.tree.raycast(k.minx,k.miny,k.maxx,k.maxy,c,p,_);if(L!=null)return L}return null}_createFBO(){const c=this.painter.context,p=c.gl,_=this.drapeBufferSize;c.activeTexture.set(p.TEXTURE0);const E=new o.Texture(c,{width:_[0],height:_[1],data:null},p.RGBA);E.bind(p.LINEAR,p.CLAMP_TO_EDGE);const k=c.createFramebuffer(_[0],_[1],!1);return k.colorAttachment.set(E.texture),k.depthAttachment=new Fi(c,k.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,k.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):k.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&!c.extTextureFilterAnisotropicForceOff&&p.texParameterf(p.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:k,tex:E,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const p=this._style._layers[c],_=p.isHidden(this.painter.transform.zoom);return p.type==="custom"?!_&&p.shouldRedrape():!_&&p.hasTransition()})}_clearLineLayersFromRenderCache(){let c=!1;for(const _ of this._style._getSources())if(_ instanceof te){c=!0;break}if(!c)return;const p={};for(let _=0;_<this._style.order.length;++_){const E=this._style._layers[this._style.order[_]],k=this._style._getLayerSourceCache(E);if(k&&!p[k.id]&&!E.isHidden(this.painter.transform.zoom)&&E.type==="line"&&E.widthExpression()instanceof o.ZoomDependentExpression){p[k.id]=!0;for(const L of this.proxyCoords){const U=this.proxyToSource[L.key][k.id];if(U)for(const G of U)this._clearRenderCacheForTile(k.id,G)}}}}_clearRasterLayersFromRenderCache(){let c=!1;for(const _ in this._style._sourceCaches)if(this._style._sourceCaches[_]._source instanceof se){c=!0;break}if(!c)return;const p={};for(let _=0;_<this._style.order.length;++_){const E=this._style._layers[this._style.order[_]],k=this._style._getLayerSourceCache(E);if(!k||p[k.id]||E.isHidden(this.painter.transform.zoom)||E.type!=="raster")continue;const L=E.paint.get("raster-fade-duration");for(const U of this.proxyCoords){const G=this.proxyToSource[U.key][k.id];if(G)for(const K of G){const X=Au(k.getTile(K),k.findLoadedParent(K,0),k,this.painter.transform,L);(X.opacity!==1||X.mix!==0)&&this._clearRenderCacheForTile(k.id,K)}}}}_setupDrapedRenderBatches(){const c=this._style.order,p=c.length;if(p===0)return;const _=[];let E,k=0,L=this._style._layers[c[k]];for(;!this._style.isLayerDraped(L)&&L.isHidden(this.painter.transform.zoom)&&++k<p;)L=this._style._layers[c[k]];for(;k<p;++k){const U=this._style._layers[c[k]];U.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(U)?E===void 0&&(E=k):E!==void 0&&(_.push({start:E,end:k-1}),E=void 0))}E!==void 0&&_.push({start:E,end:k-1}),this._drapedRenderBatches=_}_setupRenderCache(c){const p=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,p.renderCache.length>p.renderCachePool.length){const L=Object.values(p.proxyCachedFBO);p.proxyCachedFBO={};for(let U=0;U<L.length;++U){const G=Object.values(L[U]);p.renderCachePool.push(...G)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,E=this._tilesDirty;for(let L=_.length-1;L>=0;L--){const U=_[L];if(p.getTileByID(U.key),p.proxyCachedFBO[U.key]!==void 0){const G=c[U.key],K=this.proxyToSource[U.key];let X=0;for(const ee in K){const ue=K[ee],he=G[ee];if(!he||he.length!==ue.length||ue.some((me,ge)=>me!==he[ge]||E[ee]&&E[ee].hasOwnProperty(me.key))){X=-1;break}++X}for(const ee in p.proxyCachedFBO[U.key])p.renderCache[p.proxyCachedFBO[U.key][ee]].dirty=X<0||X!==Object.values(G).length}}const k=[...this._drapedRenderBatches];k.sort((L,U)=>U.end-U.start-(L.end-L.start));for(const L of k)for(const U of _){if(p.proxyCachedFBO[U.key])continue;let G=p.renderCachePool.pop();G===void 0&&p.renderCache.length<50&&(G=p.renderCache.length,p.renderCache.push(this._createFBO())),G!==void 0&&(p.proxyCachedFBO[U.key]={},p.proxyCachedFBO[U.key][L.start]=G,p.renderCache[G].dirty=!0)}this._tilesDirty={}}_setupStencil(c,p,_,E){if(!E||!this._sourceTilesOverlap[E.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const k=this.painter.context,L=k.gl;if(p.length<=1)return void(this._overlapStencilType=!1);let U;if(_.isTileClipped())U=p.length,this._overlapStencilMode.test={func:L.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(p[0].overscaledZ>p[p.length-1].overscaledZ))return void(this._overlapStencilType=!1);U=1,this._overlapStencilMode.test={func:L.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+U>255&&(k.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=U,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(p,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(c,p){const _=this.painter,E=this.painter.context,k=E.gl;_._tileClippingMaskIDs={},E.setColorMode(o.ColorMode.disabled),E.setDepthMode(o.DepthMode.disabled);const L=_.useProgram("clippingMask");for(const U of c){const G=_._tileClippingMaskIDs[U.key]=--p;L.draw(E,k.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:k.ALWAYS,mask:0},G,255,k.KEEP,k.KEEP,k.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,er(U.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(c){const p=this.painter.transform;if(c.x<0||c.x>p.width||c.y<0||c.y>p.height)return null;const _=[c.x,c.y,1,1];o.transformMat4$1(_,_,p.pixelMatrixInverse),o.scale$1(_,_,1/_[3]),_[0]/=p.worldSize,_[1]/=p.worldSize;const E=p._camera.position,k=o.mercatorZfromAltitude(1,p.center.lat),L=[E[0],E[1],E[2]/k,0],U=o.subtract([],_.slice(0,3),L);o.normalize(U,U);const G=this.raycast(L,U,this._exaggeration);return G!==null&&G?(o.scaleAndAdd(L,L,U,G),L[3]=L[2],L[2]*=k,L):null}drawDepth(){const c=this.painter,p=c.context,_=this.proxySourceCache,E=Math.ceil(c.width),k=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===E&&this._depthFBO.height===k||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const L=p.gl,U=p.createFramebuffer(E,k,!0);p.activeTexture.set(L.TEXTURE0);const G=new o.Texture(p,{width:E,height:k,data:null},L.RGBA);G.bind(L.NEAREST,L.CLAMP_TO_EDGE),U.colorAttachment.set(G.texture);const K=p.createRenderbuffer(p.gl.DEPTH_COMPONENT16,E,k);U.depthAttachment.set(K),this._depthFBO=U,this._depthTexture=G}p.bindFramebuffer.set(this._depthFBO.framebuffer),p.viewport.set([0,0,E,k]),function(L,U,G,K){if(L.transform.projection.name==="globe")return;const X=L.context,ee=X.gl;X.clear({depth:1});const ue=L.useProgram("terrainDepth"),he=new o.DepthMode(ee.LESS,o.DepthMode.ReadWrite,L.depthRangeFor3D);for(const me of K){const ge=G.getTile(me),ye=Ef(me.projMatrix,0);U.setupElevationDraw(ge,ue),ue.draw(X,ee.TRIANGLES,he,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,ye,"terrain_depth",U.gridBuffer,U.gridIndexBuffer,U.gridNoSkirtSegments)}}(c,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,p,_){if(c.getSource()instanceof We)return this._setupProxiedCoordsForImageSource(c,p,_);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const E=this.proxiedCoords[c.id]=[],k=this.proxyCoords;for(let U=0;U<k.length;U++){const G=k[U],K=this._findTileCoveringTileID(G,c);if(K){const X=this._createProxiedId(G,K,_[G.key]&&_[G.key][c.id]);E.push(X),this.proxyToSource[G.key][c.id]=[X]}}let L=!1;for(let U=0;U<p.length;U++){const G=c.getTile(p[U]);if(!G||!G.hasData())continue;const K=this._findTileCoveringTileID(G.tileID,this.proxySourceCache);if(K&&K.tileID.canonical.z!==G.tileID.canonical.z){const X=this.proxyToSource[K.tileID.key][c.id],ee=this._createProxiedId(K.tileID,G,_[K.tileID.key]&&_[K.tileID.key][c.id]);X?X.splice(X.length-1,0,ee):this.proxyToSource[K.tileID.key][c.id]=[ee],E.push(ee),L=!0}}this._sourceTilesOverlap[c.id]=L}_setupProxiedCoordsForImageSource(c,p,_){if(!c.getSource().loaded())return;const E=this.proxiedCoords[c.id]=[],k=this.proxyCoords,L=c.getSource(),U=new o.pointGeometry(L.tileID.x,L.tileID.y)._div(1<<L.tileID.z),G=L.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((X,ee)=>(X.min.x=Math.min(X.min.x,ee.x-U.x),X.min.y=Math.min(X.min.y,ee.y-U.y),X.max.x=Math.max(X.max.x,ee.x-U.x),X.max.y=Math.max(X.max.y,ee.y-U.y),X),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),K=(X,ee)=>{const ue=X.wrap+X.canonical.x/(1<<X.canonical.z),he=X.canonical.y/(1<<X.canonical.z),me=o.EXTENT/(1<<X.canonical.z),ge=ee.wrap+ee.canonical.x/(1<<ee.canonical.z),ye=ee.canonical.y/(1<<ee.canonical.z);return ue+me<ge+G.min.x||ue>ge+G.max.x||he+me<ye+G.min.y||he>ye+G.max.y};for(let X=0;X<k.length;X++){const ee=k[X];for(let ue=0;ue<p.length;ue++){const he=c.getTile(p[ue]);if(!he||!he.hasData()||K(ee,he.tileID))continue;const me=this._createProxiedId(ee,he,_[ee.key]&&_[ee.key][c.id]),ge=this.proxyToSource[ee.key][c.id];ge?ge.push(me):this.proxyToSource[ee.key][c.id]=[me],E.push(me)}}}_createProxiedId(c,p,_){let E=this.orthoMatrix;if(_){const k=_.find(L=>L.key===p.tileID.key);if(k)return k}if(p.tileID.key!==c.key){const k=c.canonical.z-p.tileID.canonical.z;let L,U,G;E=o.create();const K=p.tileID.wrap-c.wrap<<c.overscaledZ;k>0?(L=o.EXTENT>>k,U=L*((p.tileID.canonical.x<<k)-c.canonical.x+K),G=L*((p.tileID.canonical.y<<k)-c.canonical.y)):(L=o.EXTENT<<-k,U=o.EXTENT*(p.tileID.canonical.x-(c.canonical.x+K<<-k)),G=o.EXTENT*(p.tileID.canonical.y-(c.canonical.y<<-k))),o.ortho(E,0,L,0,L,0,1),o.translate(E,E,[U,G,0])}return new kf(p.tileID,c.key,E)}_findTileCoveringTileID(c,p){let _=p.getTile(c);if(_&&_.hasData())return _;const E=this._findCoveringTileCache[p.id],k=E[c.key];if(_=k?p.getTileByID(k):null,_&&_.hasData()||k===null)return _;let L=_?_.tileID:c,U=L.overscaledZ;const G=p.getSource().minzoom,K=[];if(!k){const ee=p.getSource().maxzoom;if(c.canonical.z>=ee){const ue=c.canonical.z-ee;p.getSource().reparseOverscaled?(U=Math.max(c.canonical.z+2,p.transform.tileZoom),L=new o.OverscaledTileID(U,c.wrap,ee,c.canonical.x>>ue,c.canonical.y>>ue)):ue!==0&&(U=ee,L=new o.OverscaledTileID(U,c.wrap,ee,c.canonical.x>>ue,c.canonical.y>>ue))}L.key!==c.key&&(K.push(L.key),_=p.getTile(L))}const X=ee=>{K.forEach(ue=>{E[ue]=ee}),K.length=0};for(U-=1;U>=G&&(!_||!_.hasData());U--){_&&X(_.tileID.key);const ee=L.calculateScaledKey(U);if(_=p.getTileByID(ee),_&&_.hasData())break;const ue=E[ee];if(ue===null)break;ue===void 0?K.push(ee):_=p.getTileByID(ue)}return X(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,p){let _=this._tilesDirty[c];_||(_=this._tilesDirty[c]={}),_[p.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const c=function(p){let _=0;const E=new o.StructArrayLayout2ui4,k=131;for(let L=1;L<129;L++){for(let U=1;U<129;U++)_=L*k+U,E.emplaceBack(_,_+1),E.emplaceBack(_,_+k),E.emplaceBack(_+1,_+k),L===128&&E.emplaceBack(_+k,_+k+1);E.emplaceBack(_+1,_+1+k)}return E}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(c),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,c.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Af{static cacheKey(c,p,_,E){let k=`${p}${E?E.cacheKey:""}`;for(const L of _)c.usedDefines.includes(L)&&(k+=`/${L}`);return k}constructor(c,p,_,E,k,L){const U=c.gl;this.program=U.createProgram();const G=function(le){const Te=[];for(let ke=0;ke<le.length;ke++){if(le[ke]===null)continue;const De=le[ke].split(" ");Te.push(De.pop())}return Te}(_.staticAttributes),K=E?E.getBinderAttributes():[],X=G.concat(K);let ee=E?E.defines():[];ee=ee.concat(L.map(le=>`#define ${le}`));const ue=c.isWebGL2?`#version 300 es
`:"",he=ue+ee.concat(c.extStandardDerivatives&&ue.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(th):th,th,eh,Rv.fragmentSource,xf.fragmentSource,_.fragmentSource).join(`
`),me=ue+ee.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,eh,Rv.vertexSource,xf.vertexSource,_f.vertexSource,_.vertexSource).join(`
`),ge=U.createShader(U.FRAGMENT_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);U.shaderSource(ge,he),U.compileShader(ge),U.attachShader(this.program,ge);const ye=U.createShader(U.VERTEX_SHADER);if(U.isContextLost())this.failedToCreate=!0;else{U.shaderSource(ye,me),U.compileShader(ye),U.attachShader(this.program,ye),this.attributes={},this.numAttributes=X.length;for(let le=0;le<this.numAttributes;le++)X[le]&&(U.bindAttribLocation(this.program,le,X[le]),this.attributes[X[le]]=le);U.linkProgram(this.program),U.deleteShader(ye),U.deleteShader(ge),this.fixedUniforms=k(c),this.binderUniforms=E?E.getUniforms(c):[],L.includes("TERRAIN")&&(this.terrainUniforms=(le=>({u_dem:new o.Uniform1i(le),u_dem_prev:new o.Uniform1i(le),u_dem_unpack:new o.Uniform4f(le),u_dem_tl:new o.Uniform2f(le),u_dem_scale:new o.Uniform1f(le),u_dem_tl_prev:new o.Uniform2f(le),u_dem_scale_prev:new o.Uniform1f(le),u_dem_size:new o.Uniform1f(le),u_dem_lerp:new o.Uniform1f(le),u_exaggeration:new o.Uniform1f(le),u_depth:new o.Uniform1i(le),u_depth_size_inv:new o.Uniform2f(le),u_meter_to_dem:new o.Uniform1f(le),u_label_plane_matrix_inv:new o.UniformMatrix4f(le)}))(c)),L.includes("GLOBE")&&(this.globeUniforms=(le=>({u_tile_tl_up:new o.Uniform3f(le),u_tile_tr_up:new o.Uniform3f(le),u_tile_br_up:new o.Uniform3f(le),u_tile_bl_up:new o.Uniform3f(le),u_tile_up_scale:new o.Uniform1f(le)}))(c)),L.includes("FOG")&&(this.fogUniforms=(le=>({u_fog_matrix:new o.UniformMatrix4f(le),u_fog_range:new o.Uniform2f(le),u_fog_color:new o.Uniform4f(le),u_fog_horizon_blend:new o.Uniform1f(le),u_fog_temporal_offset:new o.Uniform1f(le),u_frustum_tl:new o.Uniform3f(le),u_frustum_tr:new o.Uniform3f(le),u_frustum_br:new o.Uniform3f(le),u_frustum_bl:new o.Uniform3f(le),u_globe_pos:new o.Uniform3f(le),u_globe_radius:new o.Uniform1f(le),u_globe_transition:new o.Uniform1f(le),u_is_globe:new o.Uniform1i(le),u_viewport:new o.Uniform2f(le)}))(c))}}setTerrainUniformValues(c,p){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const E in p)_[E]&&_[E].set(this.program,E,p[E])}}setGlobeUniformValues(c,p){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const E in p)_[E]&&_[E].set(this.program,E,p[E])}}setFogUniformValues(c,p){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const E in p)_[E].set(this.program,E,p[E])}}draw(c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge){const ye=c.gl;if(this.failedToCreate)return;c.program.set(this.program),c.setDepthMode(_),c.setStencilMode(E),c.setColorMode(k),c.setCullFace(L);for(const Te of Object.keys(this.fixedUniforms))this.fixedUniforms[Te].set(this.program,Te,U[Te]);me&&me.setUniforms(this.program,c,this.binderUniforms,ue,{zoom:he});const le={[ye.LINES]:2,[ye.TRIANGLES]:3,[ye.LINE_STRIP]:1}[p];for(const Te of ee.get()){const ke=Te.vaos||(Te.vaos={});(ke[G]||(ke[G]=new Su)).bind(c,this,K,me?me.getPaintVertexBuffers():[],X,Te.vertexOffset,ge||[]),ye.drawElements(p,Te.primitiveLength*le,ye.UNSIGNED_SHORT,Te.primitiveOffset*le*2)}}}function zv(v,c){const p=Math.pow(2,c.tileID.overscaledZ),_=c.tileSize*Math.pow(2,v.transform.tileZoom)/p,E=_*(c.tileID.canonical.x+c.tileID.wrap*p),k=_*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ut(c,1,v.transform.tileZoom),u_pixel_coord_upper:[E>>16,k>>16],u_pixel_coord_lower:[65535&E,65535&k]}}const Nb=o.create(),ah=(v,c,p,_,E,k,L,U,G,K,X)=>{const ee=c.style.light,ue=ee.properties.get("position"),he=[ue.x,ue.y,ue.z],me=o.create$1();ee.properties.get("anchor")==="viewport"&&(o.fromRotation(me,-c.transform.angle),o.transformMat3(he,he,me));const ge=ee.properties.get("color"),ye=c.transform,le={u_matrix:v,u_lightpos:he,u_lightintensity:ee.properties.get("intensity"),u_lightcolor:[ge.r,ge.g,ge.b],u_vertical_gradient:+p,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Nb,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:E,u_edge_radius:k};return ye.projection.name==="globe"&&(le.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],le.u_zoom_transition=G,le.u_inv_rot_matrix=X,le.u_merc_center=K,le.u_up_dir=ye.projection.upVector(new o.CanonicalTileID(0,0,0),K[0]*o.EXTENT,K[1]*o.EXTENT),le.u_height_lift=U),le},Mf=(v,c,p,_,E,k,L,U,G,K,X,ee)=>{const ue=ah(v,c,p,_,E,k,L,G,K,X,ee),he={u_height_factor:-Math.pow(2,L.overscaledZ)/U.tileSize/8};return o.extend(ue,zv(c,U),he)},sh=v=>({u_matrix:v}),lh=(v,c,p)=>o.extend(sh(v),zv(c,p)),Bv=(v,c)=>({u_matrix:v,u_world:c}),Fv=(v,c,p,_)=>o.extend(lh(v,c,p),{u_world:_}),Ub=o.create(),Mu=(v,c,p,_,E,k)=>{const L=v.transform,U=L.projection.name==="globe";let G;if(k.paint.get("circle-pitch-alignment")==="map")if(U){const X=o.globePixelsToTileUnits(L.zoom,c.canonical)*L._pixelsPerMercatorPixel;G=Float32Array.from([X,0,0,X])}else G=L.calculatePixelsToTileUnitsMatrix(p);else G=new Float32Array([L.pixelsToGLUnits[0],0,0,L.pixelsToGLUnits[1]]);const K={u_camera_to_center_distance:L.cameraToCenterDistance,u_matrix:v.translatePosMatrix(c.projMatrix,p,k.paint.get("circle-translate"),k.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:G,u_inv_rot_matrix:Ub,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(U){K.u_inv_rot_matrix=_,K.u_merc_center=E,K.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],K.u_zoom_transition=o.globeToMercatorTransition(L.zoom);const X=E[0]*o.EXTENT,ee=E[1]*o.EXTENT;K.u_up_dir=L.projection.upVector(new o.CanonicalTileID(0,0,0),X,ee)}return K},Iu=v=>{const c=[];return v.paint.get("circle-pitch-alignment")==="map"&&c.push("PITCH_WITH_MAP"),v.paint.get("circle-pitch-scale")==="map"&&c.push("SCALE_WITH_MAP"),c},Nv=(v,c,p,_)=>{const E=o.EXTENT/p.tileSize;return{u_matrix:v,u_camera_to_center_distance:c.getCameraToCenterDistance(_),u_extrude_scale:[c.pixelsToGLUnits[0]/E,c.pixelsToGLUnits[1]/E]}},Pu=(v,c,p=1)=>({u_matrix:v,u_color:c,u_overlay:0,u_overlay_scale:p}),If=o.create(),$a=(v,c,p,_,E,k,L)=>{const U=v.transform,G=U.projection.name==="globe",K=G?o.globePixelsToTileUnits(U.zoom,c.canonical)*U._pixelsPerMercatorPixel:Ut(p,1,k),X={u_matrix:c.projMatrix,u_extrude_scale:K,u_intensity:L,u_inv_rot_matrix:If,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(G){X.u_inv_rot_matrix=_,X.u_merc_center=E,X.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],X.u_zoom_transition=o.globeToMercatorTransition(U.zoom);const ee=E[0]*o.EXTENT,ue=E[1]*o.EXTENT;X.u_up_dir=U.projection.upVector(new o.CanonicalTileID(0,0,0),ee,ue)}return X},Pf=(v,c,p,_,E,k,L)=>{const U=v.transform,G=U.calculatePixelsToTileUnitsMatrix(c);return{u_matrix:Df(v,c,p,_),u_pixels_to_tile_units:G,u_device_pixel_ratio:k,u_units_to_pixels:[1/U.pixelsToGLUnits[0],1/U.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:E,u_texsize:uh(p)?c.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ch(c,v.transform),u_alpha_discard_threshold:0,u_trim_offset:L}},Uv=(v,c,p,_,E)=>{const k=v.transform;return{u_matrix:Df(v,c,p,_),u_texsize:c.imageAtlasTexture.size,u_pixels_to_tile_units:k.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:E,u_image:0,u_tile_units_to_pixels:ch(c,k),u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ch(v,c){return 1/Ut(v,1,c.tileZoom)}function Df(v,c,p,_){return v.translatePosMatrix(_||c.tileID.projMatrix,c,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}function uh(v){const c=v.paint.get("line-dasharray").value;return c.value||c.kind!=="constant"}const jb=(v,c,p,_,E,k)=>{return{u_matrix:v,u_tl_parent:c,u_scale_parent:p,u_fade_t:_.mix,u_opacity:_.opacity*E.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:E.paint.get("raster-brightness-min"),u_brightness_high:E.paint.get("raster-brightness-max"),u_saturation_factor:(U=E.paint.get("raster-saturation"),U>0?1-1/(1.001-U):-U),u_contrast_factor:(L=E.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:Rf(E.paint.get("raster-hue-rotate")),u_perspective_transform:k};var L,U};function Rf(v){v*=Math.PI/180;const c=Math.sin(v),p=Math.cos(v);return[(2*p+1)/3,(-Math.sqrt(3)*c-p+1)/3,(Math.sqrt(3)*c-p+1)/3]}const jv=o.create(),Du=(v,c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge)=>{const ye=E.transform,le={u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ye.cameraToCenterDistance,u_rotate_symbol:+p,u_aspect_ratio:ye.width/ye.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:k,u_label_plane_matrix:L,u_coord_matrix:U,u_is_text:+G,u_pitch_with_map:+_,u_texsize:K,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:jv,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:jv,u_up_vector:[0,-1,0]};return ge.name==="globe"&&(le.u_tile_id=[X.canonical.x,X.canonical.y,1<<X.canonical.z],le.u_zoom_transition=ee,le.u_inv_rot_matrix=he,le.u_merc_center=ue,le.u_camera_forward=ye._camera.forward(),le.u_ecef_origin=o.globeECEFOrigin(ye.globeMatrix,X.toUnwrapped()),le.u_tile_matrix=Float32Array.from(ye.globeMatrix),le.u_up_vector=me),le},$v=(v,c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge,ye)=>o.extend(Du(v,c,p,_,E,k,L,U,G,K,ee,ue,he,me,ge,ye),{u_gamma_scale:_?E.transform.cameraToCenterDistance*Math.cos(E.terrain?0:E.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+X}),Lf=(v,c,p,_,E,k,L,U,G,K,X,ee,ue,he,me,ge)=>o.extend($v(v,c,p,_,E,k,L,U,!0,G,!0,X,ee,ue,he,me,ge),{u_texsize_icon:K,u_texture_icon:1}),$b=(v,c,p)=>({u_matrix:v,u_opacity:c,u_color:p}),Of=(v,c,p,_,E)=>o.extend(function(k,L,U){const G=L.imageManager.getPattern(k.toString()),{width:K,height:X}=L.imageManager.getPixelSize(),ee=Math.pow(2,U.tileID.overscaledZ),ue=U.tileSize*Math.pow(2,L.transform.tileZoom)/ee,he=ue*(U.tileID.canonical.x+U.tileID.wrap*ee),me=ue*U.tileID.canonical.y;return{u_image:0,u_pattern_tl:G.tl,u_pattern_br:G.br,u_texsize:[K,X],u_pattern_size:G.displaySize,u_tile_units_to_pixels:1/Ut(U,1,L.transform.tileZoom),u_pixel_coord_upper:[he>>16,me>>16],u_pixel_coord_lower:[65535&he,65535&me]}}(_,p,E),{u_matrix:v,u_opacity:c}),Vb={fillExtrusion:v=>({u_matrix:new o.UniformMatrix4f(v),u_lightpos:new o.Uniform3f(v),u_lightintensity:new o.Uniform1f(v),u_lightcolor:new o.Uniform3f(v),u_vertical_gradient:new o.Uniform1f(v),u_opacity:new o.Uniform1f(v),u_edge_radius:new o.Uniform1f(v),u_ao:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_up_dir:new o.Uniform3f(v),u_height_lift:new o.Uniform1f(v)}),fillExtrusionPattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_lightpos:new o.Uniform3f(v),u_lightintensity:new o.Uniform1f(v),u_lightcolor:new o.Uniform3f(v),u_vertical_gradient:new o.Uniform1f(v),u_height_factor:new o.Uniform1f(v),u_edge_radius:new o.Uniform1f(v),u_ao:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_up_dir:new o.Uniform3f(v),u_height_lift:new o.Uniform1f(v),u_image:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_pixel_coord_upper:new o.Uniform2f(v),u_pixel_coord_lower:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v),u_opacity:new o.Uniform1f(v)}),fill:v=>({u_matrix:new o.UniformMatrix4f(v)}),fillPattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_image:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_pixel_coord_upper:new o.Uniform2f(v),u_pixel_coord_lower:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v)}),fillOutline:v=>({u_matrix:new o.UniformMatrix4f(v),u_world:new o.Uniform2f(v)}),fillOutlinePattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_world:new o.Uniform2f(v),u_image:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_pixel_coord_upper:new o.Uniform2f(v),u_pixel_coord_lower:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v)}),circle:v=>({u_camera_to_center_distance:new o.Uniform1f(v),u_extrude_scale:new o.UniformMatrix2f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_up_dir:new o.Uniform3f(v)}),collisionBox:v=>({u_matrix:new o.UniformMatrix4f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_extrude_scale:new o.Uniform2f(v)}),collisionCircle:v=>({u_matrix:new o.UniformMatrix4f(v),u_inv_matrix:new o.UniformMatrix4f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_viewport_size:new o.Uniform2f(v)}),debug:v=>({u_color:new o.UniformColor(v),u_matrix:new o.UniformMatrix4f(v),u_overlay:new o.Uniform1i(v),u_overlay_scale:new o.Uniform1f(v)}),clippingMask:v=>({u_matrix:new o.UniformMatrix4f(v)}),heatmap:v=>({u_extrude_scale:new o.Uniform1f(v),u_intensity:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_up_dir:new o.Uniform3f(v)}),heatmapTexture:v=>({u_image:new o.Uniform1i(v),u_color_ramp:new o.Uniform1i(v),u_opacity:new o.Uniform1f(v)}),hillshade:v=>({u_matrix:new o.UniformMatrix4f(v),u_image:new o.Uniform1i(v),u_latrange:new o.Uniform2f(v),u_light:new o.Uniform2f(v),u_shadow:new o.UniformColor(v),u_highlight:new o.UniformColor(v),u_accent:new o.UniformColor(v)}),hillshadePrepare:v=>({u_matrix:new o.UniformMatrix4f(v),u_image:new o.Uniform1i(v),u_dimension:new o.Uniform2f(v),u_zoom:new o.Uniform1f(v),u_unpack:new o.Uniform4f(v)}),line:v=>({u_matrix:new o.UniformMatrix4f(v),u_pixels_to_tile_units:new o.UniformMatrix2f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_units_to_pixels:new o.Uniform2f(v),u_dash_image:new o.Uniform1i(v),u_gradient_image:new o.Uniform1i(v),u_image_height:new o.Uniform1f(v),u_texsize:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v),u_alpha_discard_threshold:new o.Uniform1f(v),u_trim_offset:new o.Uniform2f(v)}),linePattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_texsize:new o.Uniform2f(v),u_pixels_to_tile_units:new o.UniformMatrix2f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_image:new o.Uniform1i(v),u_units_to_pixels:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v),u_alpha_discard_threshold:new o.Uniform1f(v)}),raster:v=>({u_matrix:new o.UniformMatrix4f(v),u_tl_parent:new o.Uniform2f(v),u_scale_parent:new o.Uniform1f(v),u_fade_t:new o.Uniform1f(v),u_opacity:new o.Uniform1f(v),u_image0:new o.Uniform1i(v),u_image1:new o.Uniform1i(v),u_brightness_low:new o.Uniform1f(v),u_brightness_high:new o.Uniform1f(v),u_saturation_factor:new o.Uniform1f(v),u_contrast_factor:new o.Uniform1f(v),u_spin_weights:new o.Uniform3f(v),u_perspective_transform:new o.Uniform2f(v)}),symbolIcon:v=>({u_is_size_zoom_constant:new o.Uniform1i(v),u_is_size_feature_constant:new o.Uniform1i(v),u_size_t:new o.Uniform1f(v),u_size:new o.Uniform1f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_rotate_symbol:new o.Uniform1i(v),u_aspect_ratio:new o.Uniform1f(v),u_fade_change:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_label_plane_matrix:new o.UniformMatrix4f(v),u_coord_matrix:new o.UniformMatrix4f(v),u_is_text:new o.Uniform1i(v),u_pitch_with_map:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_camera_forward:new o.Uniform3f(v),u_tile_matrix:new o.UniformMatrix4f(v),u_up_vector:new o.Uniform3f(v),u_ecef_origin:new o.Uniform3f(v),u_texture:new o.Uniform1i(v)}),symbolSDF:v=>({u_is_size_zoom_constant:new o.Uniform1i(v),u_is_size_feature_constant:new o.Uniform1i(v),u_size_t:new o.Uniform1f(v),u_size:new o.Uniform1f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_rotate_symbol:new o.Uniform1i(v),u_aspect_ratio:new o.Uniform1f(v),u_fade_change:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_label_plane_matrix:new o.UniformMatrix4f(v),u_coord_matrix:new o.UniformMatrix4f(v),u_is_text:new o.Uniform1i(v),u_pitch_with_map:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_texture:new o.Uniform1i(v),u_gamma_scale:new o.Uniform1f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_tile_id:new o.Uniform3f(v),u_zoom_transition:new o.Uniform1f(v),u_inv_rot_matrix:new o.UniformMatrix4f(v),u_merc_center:new o.Uniform2f(v),u_camera_forward:new o.Uniform3f(v),u_tile_matrix:new o.UniformMatrix4f(v),u_up_vector:new o.Uniform3f(v),u_ecef_origin:new o.Uniform3f(v),u_is_halo:new o.Uniform1i(v)}),symbolTextAndIcon:v=>({u_is_size_zoom_constant:new o.Uniform1i(v),u_is_size_feature_constant:new o.Uniform1i(v),u_size_t:new o.Uniform1f(v),u_size:new o.Uniform1f(v),u_camera_to_center_distance:new o.Uniform1f(v),u_rotate_symbol:new o.Uniform1i(v),u_aspect_ratio:new o.Uniform1f(v),u_fade_change:new o.Uniform1f(v),u_matrix:new o.UniformMatrix4f(v),u_label_plane_matrix:new o.UniformMatrix4f(v),u_coord_matrix:new o.UniformMatrix4f(v),u_is_text:new o.Uniform1i(v),u_pitch_with_map:new o.Uniform1i(v),u_texsize:new o.Uniform2f(v),u_texsize_icon:new o.Uniform2f(v),u_texture:new o.Uniform1i(v),u_texture_icon:new o.Uniform1i(v),u_gamma_scale:new o.Uniform1f(v),u_device_pixel_ratio:new o.Uniform1f(v),u_is_halo:new o.Uniform1i(v)}),background:v=>({u_matrix:new o.UniformMatrix4f(v),u_opacity:new o.Uniform1f(v),u_color:new o.UniformColor(v)}),backgroundPattern:v=>({u_matrix:new o.UniformMatrix4f(v),u_opacity:new o.Uniform1f(v),u_image:new o.Uniform1i(v),u_pattern_tl:new o.Uniform2f(v),u_pattern_br:new o.Uniform2f(v),u_texsize:new o.Uniform2f(v),u_pattern_size:new o.Uniform2f(v),u_pixel_coord_upper:new o.Uniform2f(v),u_pixel_coord_lower:new o.Uniform2f(v),u_tile_units_to_pixels:new o.Uniform1f(v)}),terrainRaster:rh,terrainDepth:rh,skybox:v=>({u_matrix:new o.UniformMatrix4f(v),u_sun_direction:new o.Uniform3f(v),u_cubemap:new o.Uniform1i(v),u_opacity:new o.Uniform1f(v),u_temporal_offset:new o.Uniform1f(v)}),skyboxGradient:v=>({u_matrix:new o.UniformMatrix4f(v),u_color_ramp:new o.Uniform1i(v),u_center_direction:new o.Uniform3f(v),u_radius:new o.Uniform1f(v),u_opacity:new o.Uniform1f(v),u_temporal_offset:new o.Uniform1f(v)}),skyboxCapture:v=>({u_matrix_3f:new o.UniformMatrix3f(v),u_sun_direction:new o.Uniform3f(v),u_sun_intensity:new o.Uniform1f(v),u_color_tint_r:new o.Uniform4f(v),u_color_tint_m:new o.Uniform4f(v),u_luminance:new o.Uniform1f(v)}),globeRaster:v=>({u_proj_matrix:new o.UniformMatrix4f(v),u_globe_matrix:new o.UniformMatrix4f(v),u_normalize_matrix:new o.UniformMatrix4f(v),u_merc_matrix:new o.UniformMatrix4f(v),u_zoom_transition:new o.Uniform1f(v),u_merc_center:new o.Uniform2f(v),u_image0:new o.Uniform1i(v),u_grid_matrix:new o.UniformMatrix3f(v),u_skirt_height:new o.Uniform1f(v),u_frustum_tl:new o.Uniform3f(v),u_frustum_tr:new o.Uniform3f(v),u_frustum_br:new o.Uniform3f(v),u_frustum_bl:new o.Uniform3f(v),u_globe_pos:new o.Uniform3f(v),u_globe_radius:new o.Uniform1f(v),u_viewport:new o.Uniform2f(v)}),globeAtmosphere:v=>({u_frustum_tl:new o.Uniform3f(v),u_frustum_tr:new o.Uniform3f(v),u_frustum_br:new o.Uniform3f(v),u_frustum_bl:new o.Uniform3f(v),u_horizon:new o.Uniform1f(v),u_transition:new o.Uniform1f(v),u_fadeout_range:new o.Uniform1f(v),u_color:new o.Uniform4f(v),u_high_color:new o.Uniform4f(v),u_space_color:new o.Uniform4f(v),u_star_intensity:new o.Uniform1f(v),u_star_density:new o.Uniform1f(v),u_star_size:new o.Uniform1f(v),u_temporal_offset:new o.Uniform1f(v),u_horizon_angle:new o.Uniform1f(v),u_rotation_matrix:new o.UniformMatrix4f(v)})};let El;function Vv(v,c,p,_,E,k,L){const U=v.context,G=U.gl,K=v.transform,X=v.useProgram("collisionBox"),ee=[];let ue=0,he=0;for(let De=0;De<_.length;De++){const He=_[De],je=c.getTile(He),Ge=je.getBucket(p);if(!Ge)continue;const et=mf(He,Ge,K);let it=et;E[0]===0&&E[1]===0||(it=v.translatePosMatrix(et,je,E,k));const lt=L?Ge.textCollisionBox:Ge.iconCollisionBox,jt=Ge.collisionCircleArray;if(jt.length>0){const tt=o.create(),Mt=it;o.mul(tt,Ge.placementInvProjMatrix,K.glCoordMatrix),o.mul(tt,tt,Ge.placementViewportMatrix),ee.push({circleArray:jt,circleOffset:he,transform:Mt,invTransform:tt,projection:Ge.getProjection()}),ue+=jt.length/4,he=ue}lt&&(v.terrain&&v.terrain.setupElevationDraw(je,X),X.draw(U,G.LINES,o.DepthMode.disabled,o.StencilMode.disabled,v.colorModeForRenderPass(),o.CullFaceMode.disabled,Nv(it,K,je,Ge.getProjection()),p.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,null,K.zoom,null,[lt.collisionVertexBuffer,lt.collisionVertexBufferExt]))}if(!L||!ee.length)return;const me=v.useProgram("collisionCircle"),ge=new o.StructArrayLayout2f1f2i16;ge.resize(4*ue),ge._trim();let ye=0;for(const De of ee)for(let He=0;He<De.circleArray.length/4;He++){const je=4*He,Ge=De.circleArray[je+0],et=De.circleArray[je+1],it=De.circleArray[je+2],lt=De.circleArray[je+3];ge.emplace(ye++,Ge,et,it,lt,0),ge.emplace(ye++,Ge,et,it,lt,1),ge.emplace(ye++,Ge,et,it,lt,2),ge.emplace(ye++,Ge,et,it,lt,3)}(!El||El.length<2*ue)&&(El=function(De){const He=2*De,je=new o.StructArrayLayout3ui6;je.resize(He),je._trim();for(let Ge=0;Ge<He;Ge++){const et=6*Ge;je.uint16[et+0]=4*Ge+0,je.uint16[et+1]=4*Ge+1,je.uint16[et+2]=4*Ge+2,je.uint16[et+3]=4*Ge+2,je.uint16[et+4]=4*Ge+3,je.uint16[et+5]=4*Ge+0}return je}(ue));const le=U.createIndexBuffer(El,!0),Te=U.createVertexBuffer(ge,o.collisionCircleLayout.members,!0);for(const De of ee){const He={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(ke=K).getCameraToCenterDistance(De.projection),u_viewport_size:[ke.width,ke.height]};me.draw(U,G.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,v.colorModeForRenderPass(),o.CullFaceMode.disabled,He,p.id,Te,le,o.SegmentVector.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,K.zoom)}var ke;Te.destroy(),le.destroy()}const zf=o.create();function Hv({width:v,height:c,anchor:p,textOffset:_,textScale:E},k){const{horizontalAlign:L,verticalAlign:U}=o.getAnchorAlignment(p),G=-(L-.5)*v,K=-(U-.5)*c,X=o.evaluateVariableOffset(p,_);return new o.pointGeometry((G/E+X[0])*k,(K/E+X[1])*k)}function pc(v,c,p,_,E,k,L,U,G,K,X){const ee=v.text.placedSymbolArray,ue=v.text.dynamicLayoutVertexArray,he=v.icon.dynamicLayoutVertexArray,me={},ge=v.getProjection(),ye=qd(U,ge,k),le=k.elevation,Te=ge.upVectorScale(U.canonical,k.center.lat,k.worldSize).metersToTile;ue.clear();for(let ke=0;ke<ee.length;ke++){const De=ee.get(ke),{tileAnchorX:He,tileAnchorY:je,numGlyphs:Ge}=De,et=v.allowVerticalPlacement&&!De.placedOrientation,it=De.hidden||!De.crossTileID||et?null:_[De.crossTileID];if(it){let lt=0,jt=0,tt=0;if(le){const dn=le?le.getAtTileOffset(U,He,je):0,[Un,sn,en]=ge.upVector(U.canonical,He,je);lt=dn*Un*Te,jt=dn*sn*Te,tt=dn*en*Te}let[Mt,vt,Rt,at]=Ht(De.projectedAnchorX+lt,De.projectedAnchorY+jt,De.projectedAnchorZ+tt,p?ye:L);const Ye=Kn(k.getCameraToCenterDistance(ge),at);let ut=E.evaluateSizeForFeature(v.textSizeData,K,De)*Ye/o.ONE_EM;p&&(ut*=v.tilePixelRatio/G);const Dt=Hv(it,ut);p?({x:Mt,y:vt,z:Rt}=ge.projectTilePoint(He+Dt.x,je+Dt.y,U.canonical),[Mt,vt,Rt]=Ht(Mt+lt,vt+jt,Rt+tt,L)):(c&&Dt._rotate(-k.angle),Mt+=Dt.x,vt+=Dt.y,Rt=0);const Ot=v.allowVerticalPlacement&&De.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let dn=0;dn<Ge;dn++)o.addDynamicAttributes(ue,Mt,vt,Rt,Ot);X&&De.associatedIconIndex>=0&&(me[De.associatedIconIndex]={x:Mt,y:vt,z:Rt,angle:Ot})}else Dr(Ge,ue)}if(X){he.clear();const ke=v.icon.placedSymbolArray;for(let De=0;De<ke.length;De++){const He=ke.get(De),{numGlyphs:je}=He,Ge=me[De];if(He.hidden||!Ge)Dr(je,he);else{const{x:et,y:it,z:lt,angle:jt}=Ge;for(let tt=0;tt<je;tt++)o.addDynamicAttributes(he,et,it,lt,jt)}}v.icon.dynamicLayoutVertexBuffer.updateData(he)}v.text.dynamicLayoutVertexBuffer.updateData(ue)}function Hb(v,c,p){return p.iconsInText&&c?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Wv(v,c,p,_,E,k,L,U,G,K,X,ee){const ue=v.context,he=ue.gl,me=v.transform,ge=U==="map",ye=G==="map",le=ge&&p.layout.get("symbol-placement")!=="point",Te=ge&&!ye&&!le,ke=p.layout.get("symbol-sort-key").constantOr(1)!==void 0;let De=!1;const He=v.depthModeForSublayer(0,o.DepthMode.ReadOnly),je=[o.mercatorXfromLng(me.center.lng),o.mercatorYfromLat(me.center.lat)],Ge=p.layout.get("text-variable-anchor"),et=me.projection.name==="globe",it=[],lt=[0,-1,0];let jt=lt;!et&&!me.mercatorFromTransition||ge||(jt=function(tt){const Mt=tt._camera.getWorldToCamera(tt.worldSize,1),vt=o.multiply([],Mt,tt.globeMatrix);o.invert(vt,vt);const Rt=[0,0,0],at=[0,1,0,0];return o.transformMat4$1(at,at,vt),Rt[0]=at[0],Rt[1]=at[1],Rt[2]=at[2],o.normalize(Rt,Rt),Rt}(me));for(const tt of _){const Mt=c.getTile(tt),vt=Mt.getBucket(p);if(!vt||vt.projection.name==="mercator"&&et)continue;const Rt=E?vt.text:vt.icon;if(!Rt||vt.fullyClipped||!Rt.segments.get().length)continue;const at=Rt.programConfigurations.get(p.id),Ye=E||vt.sdfIcons,ut=E?vt.textSizeData:vt.iconSizeData,Dt=ye||me.pitch!==0,Ot=o.evaluateSizeForZoom(ut,me.zoom);let dn,Un,sn,en,hn=[0,0],Wn=null;if(E){if(Un=Mt.glyphAtlasTexture,sn=he.LINEAR,dn=Mt.glyphAtlasTexture.size,vt.iconsInText){hn=Mt.imageAtlasTexture.size,Wn=Mt.imageAtlasTexture;const qo=ut.kind==="composite"||ut.kind==="camera";en=Dt||v.options.rotating||v.options.zooming||qo?he.LINEAR:he.NEAREST}}else{const qo=p.layout.get("icon-size").constantOr(0)!==1||vt.iconsNeedLinear;Un=Mt.imageAtlasTexture,sn=Ye||v.options.rotating||v.options.zooming||qo||Dt?he.LINEAR:he.NEAREST,dn=Mt.imageAtlasTexture.size}const gn=vt.projection.name==="globe",lr=gn?jt:lt,pr=gn?o.globeToMercatorTransition(me.zoom):0,Rr=qd(tt,vt.getProjection(),me),kr=me.calculatePixelsToTileUnitsMatrix(Mt),wi=ic(Rr,Mt.tileID.canonical,ye,ge,me,vt.getProjection(),kr),Ro=v.terrain&&ye&&le?o.invert(o.create(),wi):zf,ba=oc(Rr,Mt.tileID.canonical,ye,ge,me,vt.getProjection(),kr),ys=Ge&&vt.hasTextData(),Gr=p.layout.get("icon-text-fit")!=="none"&&ys&&vt.hasIconData();if(le){const qo=me.elevation,ia=qo?qo.getAtTileOffsetFunc(tt,me.center.lat,me.worldSize,vt.getProjection()):null,_s=kv(Rr,Mt.tileID.canonical,ye,ge,me,vt.getProjection(),kr);ja(vt,Rr,v,E,_s,ba,ye,K,ia,tt)}const Tr=le||E&&Ge||Gr,rr=v.translatePosMatrix(Rr,Mt,k,L),li=Tr?zf:wi,so=v.translatePosMatrix(ba,Mt,k,L,!0),jr=vt.getProjection().createInversionMatrix(me,tt.canonical),lo=[];v.terrainRenderModeElevated()&&ye&&lo.push("PITCH_WITH_MAP_TERRAIN"),gn&&lo.push("PROJECTION_GLOBE_VIEW"),Tr&&lo.push("PROJECTED_POS_ON_VIEWPORT");const co=Ye&&p.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let $s;$s=Ye?vt.iconsInText?Lf(ut.kind,Ot,Te,ye,v,rr,li,so,dn,hn,tt,pr,je,jr,lr,vt.getProjection()):$v(ut.kind,Ot,Te,ye,v,rr,li,so,E,dn,!0,tt,pr,je,jr,lr,vt.getProjection()):Du(ut.kind,Ot,Te,ye,v,rr,li,so,E,dn,tt,pr,je,jr,lr,vt.getProjection());const Cc={program:v.useProgram(Hb(Ye,E,vt),at,lo),buffers:Rt,uniformValues:$s,atlasTexture:Un,atlasTextureIcon:Wn,atlasInterpolation:sn,atlasInterpolationIcon:en,isSDF:Ye,hasHalo:co,tile:Mt,labelPlaneMatrixInv:Ro};if(ke&&vt.canOverlap){De=!0;const qo=Rt.segments.get();for(const ia of qo)it.push({segments:new o.SegmentVector([ia]),sortKey:ia.sortKey,state:Cc})}else it.push({segments:Rt.segments,sortKey:0,state:Cc})}De&&it.sort((tt,Mt)=>tt.sortKey-Mt.sortKey);for(const tt of it){const Mt=tt.state;if(v.terrain&&v.terrain.setupElevationDraw(Mt.tile,Mt.program,{useDepthForOcclusion:!et,labelPlaneMatrixInv:Mt.labelPlaneMatrixInv}),ue.activeTexture.set(he.TEXTURE0),Mt.atlasTexture.bind(Mt.atlasInterpolation,he.CLAMP_TO_EDGE),Mt.atlasTextureIcon&&(ue.activeTexture.set(he.TEXTURE1),Mt.atlasTextureIcon&&Mt.atlasTextureIcon.bind(Mt.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),Mt.isSDF){const vt=Mt.uniformValues;Mt.hasHalo&&(vt.u_is_halo=1,Gv(Mt.buffers,tt.segments,p,v,Mt.program,He,X,ee,vt)),vt.u_is_halo=0}Gv(Mt.buffers,tt.segments,p,v,Mt.program,He,X,ee,Mt.uniformValues)}}function Gv(v,c,p,_,E,k,L,U,G){const K=_.context,X=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.globeExtVertexBuffer];E.draw(K,K.gl.TRIANGLES,k,L,U,o.CullFaceMode.disabled,G,p.id,v.layoutVertexBuffer,v.indexBuffer,c,p.paint,_.transform.zoom,v.programConfigurations.get(p.id),X)}function qv(v,c,p,_,E,k,L){const U=v.context.gl,G=p.paint.get("fill-pattern"),K=G&&G.constantOr(1);let X,ee,ue,he,me;L?(ee=K&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=U.LINES):(ee=K?"fillPattern":"fill",X=U.TRIANGLES);for(const ge of _){const ye=c.getTile(ge);if(K&&!ye.patternsLoaded())continue;const le=ye.getBucket(p);if(!le)continue;v.prepareDrawTile();const Te=le.programConfigurations.get(p.id),ke=v.useProgram(ee,Te);K&&(v.context.activeTexture.set(U.TEXTURE0),ye.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Te.updatePaintBuffers());const De=G.constantOr(null);if(De&&ye.imageAtlas){const je=ye.imageAtlas.patternPositions[De.toString()];je&&Te.setConstantPatternPositions(je)}const He=v.translatePosMatrix(ge.projMatrix,ye,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(L){he=le.indexBuffer2,me=le.segments2;const je=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[U.drawingBufferWidth,U.drawingBufferHeight];ue=ee==="fillOutlinePattern"&&K?Fv(He,v,ye,je):Bv(He,je)}else he=le.indexBuffer,me=le.segments,ue=K?lh(He,v,ye):sh(He);v.prepareDrawProgram(v.context,ke,ge.toUnwrapped()),ke.draw(v.context,X,E,v.stencilModeForClipping(ge),k,o.CullFaceMode.disabled,ue,p.id,le.layoutVertexBuffer,he,me,p.paint,v.transform.zoom,Te)}}function Bf(v,c,p,_,E,k,L){const U=v.context,G=U.gl,K=v.transform,X=p.paint.get("fill-extrusion-pattern"),ee=X.constantOr(1),ue=p.paint.get("fill-extrusion-opacity"),he=[p.paint.get("fill-extrusion-ambient-occlusion-intensity"),p.paint.get("fill-extrusion-ambient-occlusion-radius")],me=p.layout.get("fill-extrusion-edge-radius"),ge=K.projection.name==="globe"?o.fillExtrusionHeightLift():0,ye=K.projection.name==="globe",le=ye?o.globeToMercatorTransition(K.zoom):0,Te=[o.mercatorXfromLng(K.center.lng),o.mercatorYfromLat(K.center.lat)],ke=[];ye&&ke.push("PROJECTION_GLOBE_VIEW"),he[0]>0&&ke.push("FAUX_AO");for(const De of _){const He=c.getTile(De),je=He.getBucket(p);if(!je||je.projection.name!==K.projection.name)continue;const Ge=je.programConfigurations.get(p.id),et=v.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",Ge,ke);if(v.terrain){const Rt=v.terrain;if(v.style.terrainSetForDrapingOnly())Rt.setupElevationDraw(He,et,{useMeterToDem:!0});else{if(!je.enableTerrain)continue;if(Rt.setupElevationDraw(He,et,{useMeterToDem:!0}),Wb(U,c,De,je,p,Rt),!je.centroidVertexBuffer){const at=et.attributes.a_centroid_pos;at!==void 0&&G.vertexAttrib2f(at,0,0)}}}ee&&(v.context.activeTexture.set(G.TEXTURE0),He.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),Ge.updatePaintBuffers());const it=X.constantOr(null);if(it&&He.imageAtlas){const Rt=He.imageAtlas.patternPositions[it.toString()];Rt&&Ge.setConstantPatternPositions(Rt)}const lt=v.translatePosMatrix(De.projMatrix,He,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),jt=K.projection.createInversionMatrix(K,De.canonical),tt=p.paint.get("fill-extrusion-vertical-gradient"),Mt=ee?Mf(lt,v,tt,ue,he,me,De,He,ge,le,Te,jt):ah(lt,v,tt,ue,he,me,De,ge,le,Te,jt);v.prepareDrawProgram(U,et,De.toUnwrapped());const vt=[];v.terrain&&vt.push(je.centroidVertexBuffer),ye&&vt.push(je.layoutVertexExtBuffer),et.draw(U,U.gl.TRIANGLES,E,k,L,o.CullFaceMode.backCCW,Mt,p.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,p.paint,v.transform.zoom,Ge,vt)}}function Wb(v,c,p,_,E,k){const L=[le=>{let Te=le.canonical.x-1,ke=le.wrap;return Te<0&&(Te=(1<<le.canonical.z)-1,ke--),new o.OverscaledTileID(le.overscaledZ,ke,le.canonical.z,Te,le.canonical.y)},le=>{let Te=le.canonical.x+1,ke=le.wrap;return Te===1<<le.canonical.z&&(Te=0,ke++),new o.OverscaledTileID(le.overscaledZ,ke,le.canonical.z,Te,le.canonical.y)},le=>new o.OverscaledTileID(le.overscaledZ,le.wrap,le.canonical.z,le.canonical.x,(le.canonical.y===0?1<<le.canonical.z:le.canonical.y)-1),le=>new o.OverscaledTileID(le.overscaledZ,le.wrap,le.canonical.z,le.canonical.x,le.canonical.y===(1<<le.canonical.z)-1?0:le.canonical.y+1)],U=le=>{const Te=c.getSource().minzoom,ke=He=>{const je=c.getTileByID(He);if(je&&je.hasData())return je.getBucket(E)},De=[0,-1,1];for(const He of De){if(le.overscaledZ+He<Te)continue;const je=ke(le.calculateScaledKey(le.overscaledZ+He));if(je)return je}},G=[0,0,0],K=(le,Te)=>(G[0]=Math.min(le.min.y,Te.min.y),G[1]=Math.max(le.max.y,Te.max.y),G[2]=o.EXTENT-Te.min.x>le.max.x?Te.min.x-o.EXTENT:le.max.x,G),X=(le,Te)=>(G[0]=Math.min(le.min.x,Te.min.x),G[1]=Math.max(le.max.x,Te.max.x),G[2]=o.EXTENT-Te.min.y>le.max.y?Te.min.y-o.EXTENT:le.max.y,G),ee=[(le,Te)=>K(le,Te),(le,Te)=>K(Te,le),(le,Te)=>X(le,Te),(le,Te)=>X(Te,le)],ue=new o.pointGeometry(0,0);let he,me,ge;const ye=(le,Te,ke,De,He)=>{const je=[[De?ke:le,De?le:ke,0],[De?ke:Te,De?Te:ke,0]],Ge=He<0?o.EXTENT+He:He,et=[De?Ge:(le+Te)/2,De?(le+Te)/2:Ge,0];return ke===0&&He<0||ke!==0&&He>0?k.getForTilePoints(ge,[et],!0,me):je.push(et),k.getForTilePoints(p,je,!0,he),Math.max(je[0][2],je[1][2],et[2])/k.exaggeration()};for(let le=0;le<4;le++){const Te=(le<2?1:5)-le,ke=_.borders[le];if(ke.length===0)continue;const De=ge=L[le](p),He=U(De);if(!(He&&He instanceof o.FillExtrusionBucket&&He.enableTerrain)||_.borderDoneWithNeighborZ[le]===He.canonical.z&&He.borderDoneWithNeighborZ[Te]===_.canonical.z||(me=k.findDEMTileFor(De),!me||!me.dem))continue;if(!he){const it=k.findDEMTileFor(p);if(!it||!it.dem)return;he=it}const je=He.borders[Te];let Ge=0;const et=He.borderDoneWithNeighborZ[Te]!==_.canonical.z;if(_.canonical.z===He.canonical.z){for(let it=0;it<ke.length;it++){const lt=_.featuresOnBorder[ke[it]],jt=lt.borders[le];let tt;for(;Ge<je.length&&(tt=He.featuresOnBorder[je[Ge]],!(tt.borders[Te][1]>jt[0]+3));)et&&He.encodeCentroid(void 0,tt,!1),Ge++;if(tt&&Ge<je.length){const Mt=Ge;let vt=0;for(;!(tt.borders[Te][0]>jt[1]-3)&&(vt++,++Ge!==je.length);)tt=He.featuresOnBorder[je[Ge]];if(tt=He.featuresOnBorder[je[Mt]],lt.intersectsCount()>1||tt.intersectsCount()>1||vt!==1){vt!==1&&(Ge=Mt),_.encodeCentroid(void 0,lt,!1),et&&He.encodeCentroid(void 0,tt,!1);continue}const Rt=ee[le](lt,tt),at=le%2?o.EXTENT-1:0;ue.x=ye(Rt[0],Math.min(o.EXTENT-1,Rt[1]),at,le<2,Rt[2]),ue.y=0,_.encodeCentroid(ue,lt,!1),et&&He.encodeCentroid(ue,tt,!1)}else _.encodeCentroid(void 0,lt,!1)}_.borderDoneWithNeighborZ[le]=He.canonical.z,_.needsCentroidUpdate=!0,et&&(He.borderDoneWithNeighborZ[Te]=_.canonical.z,He.needsCentroidUpdate=!0)}else{for(const it of ke)_.encodeCentroid(void 0,_.featuresOnBorder[it],!1);if(et){for(const it of je)He.encodeCentroid(void 0,He.featuresOnBorder[it],!1);He.borderDoneWithNeighborZ[Te]=_.canonical.z,He.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[le]=He.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(v)}const Ff=new o.Color(1,0,0,1),Nf=new o.Color(0,1,0,1),Zv=new o.Color(0,0,1,1),Xv=new o.Color(1,0,1,1),Kv=new o.Color(0,1,1,1);function Uf(v,c,p){const _=v.context,E=v.transform,k=_.gl,L=E.projection.name==="globe",U=L?["PROJECTION_GLOBE_VIEW"]:null;let G=p.projMatrix;if(L&&o.globeToMercatorTransition(E.zoom)>0){const lt=o.transitionTileAABBinECEF(p.canonical,E),jt=o.globeDenormalizeECEF(lt);G=o.multiply(new Float32Array(16),E.globeMatrix,jt),o.multiply(G,E.projMatrix,G)}const K=v.useProgram("debug",null,U),X=c.getTileByID(p.key);v.terrain&&v.terrain.setupElevationDraw(X,K);const ee=o.DepthMode.disabled,ue=o.StencilMode.disabled,he=v.colorModeForRenderPass(),me="$debug";_.activeTexture.set(k.TEXTURE0),v.emptyTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),L?X._makeGlobeTileDebugBuffers(v.context,E):X._makeDebugTileBoundsBuffers(v.context,E.projection);const ge=X._tileDebugBuffer||v.debugBuffer,ye=X._tileDebugIndexBuffer||v.debugIndexBuffer,le=X._tileDebugSegments||v.debugSegments;K.draw(_,k.LINE_STRIP,ee,ue,he,o.CullFaceMode.disabled,Pu(G,o.Color.red),me,ge,ye,le,null,null,null,[X._globeTileDebugBorderBuffer]);const Te=X.latestRawTileData,ke=Math.floor((Te&&Te.byteLength||0)/1024),De=c.getTile(p).tileSize,He=512/Math.min(De,512)*(p.overscaledZ/E.zoom)*.5;let je=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(je+=` => ${p.overscaledZ}`),je+=` ${ke}kb`,function(lt,jt){lt.initDebugOverlayCanvas();const tt=lt.debugOverlayCanvas,Mt=lt.context.gl,vt=lt.debugOverlayCanvas.getContext("2d");vt.clearRect(0,0,tt.width,tt.height),vt.shadowColor="white",vt.shadowBlur=2,vt.lineWidth=1.5,vt.strokeStyle="white",vt.textBaseline="top",vt.font="bold 36px Open Sans, sans-serif",vt.fillText(jt,5,5),vt.strokeText(jt,5,5),lt.debugOverlayTexture.update(tt),lt.debugOverlayTexture.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE)}(v,je);const Ge=X._tileDebugTextBuffer||v.debugBuffer,et=X._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,it=X._tileDebugTextSegments||v.debugSegments;K.draw(_,k.TRIANGLES,ee,ue,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,Pu(G,o.Color.transparent,He),me,Ge,et,it,null,null,null,[X._globeTileDebugTextBuffer])}function js(v,c,p,_){Ru(v,0,c+p/2,v.transform.width,p,_)}function fc(v,c,p,_){Ru(v,c-p/2,0,p,v.transform.height,_)}function Ru(v,c,p,_,E,k){const L=v.context,U=L.gl;U.enable(U.SCISSOR_TEST),U.scissor(c*o.exported.devicePixelRatio,p*o.exported.devicePixelRatio,_*o.exported.devicePixelRatio,E*o.exported.devicePixelRatio),L.clear({color:k}),U.disable(U.SCISSOR_TEST)}const mc=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:gc}=mc;function gs(v,c,p,_){v.emplaceBack(c,p,_)}class dh{constructor(c){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,gs(this.vertexArray,-1,-1,1),gs(this.vertexArray,1,-1,1),gs(this.vertexArray,-1,1,1),gs(this.vertexArray,1,1,1),gs(this.vertexArray,-1,-1,-1),gs(this.vertexArray,1,-1,-1),gs(this.vertexArray,-1,1,-1),gs(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,gc),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function Jn(v,c,p,_,E,k){const L=v.gl,U=c.paint.get("sky-atmosphere-color"),G=c.paint.get("sky-atmosphere-halo-color"),K=c.paint.get("sky-atmosphere-sun-intensity"),X=((ee,ue,he,me,ge)=>({u_matrix_3f:ee,u_sun_direction:ue,u_sun_intensity:he,u_color_tint_r:[me.r,me.g,me.b,me.a],u_color_tint_m:[ge.r,ge.g,ge.b,ge.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),_),E,K,U,G);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+k,c.skyboxTexture,0),p.draw(v,L.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,X,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const hh=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Gb{constructor(c){const p=new o.StructArrayLayout5f20;p.emplaceBack(-1,1,1,0,0),p.emplaceBack(1,1,1,1,0),p.emplaceBack(1,-1,1,1,1),p.emplaceBack(-1,-1,1,0,1);const _=new o.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(p,hh.members),this.indexBuffer=c.createIndexBuffer(_),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const jf={symbol:function(v,c,p,_,E){if(v.renderPass!=="translucent")return;const k=o.StencilMode.disabled,L=v.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(U,G,K,X,ee,ue,he){const me=G.transform,ge=ee==="map",ye=ue==="map";for(const le of U){const Te=X.getTile(le),ke=Te.getBucket(K);if(!ke||!ke.text||!ke.text.segments.get().length)continue;const De=o.evaluateSizeForZoom(ke.textSizeData,me.zoom),He=qd(le,ke.getProjection(),me),je=me.calculatePixelsToTileUnitsMatrix(Te),Ge=ic(He,Te.tileID.canonical,ye,ge,me,ke.getProjection(),je),et=K.layout.get("icon-text-fit")!=="none"&&ke.hasIconData();if(De){const it=Math.pow(2,me.zoom-Te.tileID.overscaledZ);pc(ke,ge,ye,he,o.symbolSize,me,Ge,le,it,De,et)}}}(_,v,p,c,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),E),p.paint.get("icon-opacity").constantOr(1)!==0&&Wv(v,c,p,_,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),k,L),p.paint.get("text-opacity").constantOr(1)!==0&&Wv(v,c,p,_,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),k,L),c.map.showCollisionBoxes&&(Vv(v,c,p,_,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),Vv(v,c,p,_,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))},circle:function(v,c,p,_){if(v.renderPass!=="translucent")return;const E=p.paint.get("circle-opacity"),k=p.paint.get("circle-stroke-width"),L=p.paint.get("circle-stroke-opacity"),U=p.layout.get("circle-sort-key").constantOr(1)!==void 0;if(E.constantOr(1)===0&&(k.constantOr(1)===0||L.constantOr(1)===0))return;const G=v.context,K=G.gl,X=v.transform,ee=v.depthModeForSublayer(0,o.DepthMode.ReadOnly),ue=o.StencilMode.disabled,he=v.colorModeForRenderPass(),me=X.projection.name==="globe",ge=[o.mercatorXfromLng(X.center.lng),o.mercatorYfromLat(X.center.lat)],ye=[];for(let Te=0;Te<_.length;Te++){const ke=_[Te],De=c.getTile(ke),He=De.getBucket(p);if(!He||He.projection.name!==X.projection.name)continue;const je=He.programConfigurations.get(p.id),Ge=Iu(p);me&&Ge.push("PROJECTION_GLOBE_VIEW");const et=v.useProgram("circle",je,Ge),it=He.layoutVertexBuffer,lt=He.globeExtVertexBuffer,jt=He.indexBuffer,tt=X.projection.createInversionMatrix(X,ke.canonical),Mt={programConfiguration:je,program:et,layoutVertexBuffer:it,globeExtVertexBuffer:lt,indexBuffer:jt,uniformValues:Mu(v,ke,De,tt,ge,p),tile:De};if(U){const vt=He.segments.get();for(const Rt of vt)ye.push({segments:new o.SegmentVector([Rt]),sortKey:Rt.sortKey,state:Mt})}else ye.push({segments:He.segments,sortKey:0,state:Mt})}U&&ye.sort((Te,ke)=>Te.sortKey-ke.sortKey);const le={useDepthForOcclusion:!me};for(const Te of ye){const{programConfiguration:ke,program:De,layoutVertexBuffer:He,globeExtVertexBuffer:je,indexBuffer:Ge,uniformValues:et,tile:it}=Te.state,lt=Te.segments;v.terrain&&v.terrain.setupElevationDraw(it,De,le),v.prepareDrawProgram(G,De,it.tileID.toUnwrapped()),De.draw(G,K.TRIANGLES,ee,ue,he,o.CullFaceMode.disabled,et,p.id,He,Ge,lt,p.paint,X.zoom,ke,[je])}},heatmap:function(v,c,p,_){if(p.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const E=v.context,k=E.gl,L=o.StencilMode.disabled,U=new o.ColorMode([k.ONE,k.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(he,me,ge,ye){const le=he.gl,Te=me.width*ye,ke=me.height*ye;he.activeTexture.set(le.TEXTURE1),he.viewport.set([0,0,Te,ke]);let De=ge.heatmapFbo;if(!De||De&&(De.width!==Te||De.height!==ke)){De&&De.destroy();const He=le.createTexture();le.bindTexture(le.TEXTURE_2D,He),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),De=ge.heatmapFbo=he.createFramebuffer(Te,ke,!1),function(je,Ge,et,it,lt,jt){const tt=je.gl;tt.texImage2D(tt.TEXTURE_2D,0,je.isWebGL2&&je.extRenderToTextureHalfFloat?tt.RGBA16F:tt.RGBA,lt,jt,0,tt.RGBA,je.extRenderToTextureHalfFloat?je.isWebGL2?tt.HALF_FLOAT:je.extTextureHalfFloat.HALF_FLOAT_OES:tt.UNSIGNED_BYTE,null),it.colorAttachment.set(et)}(he,0,He,De,Te,ke)}else le.bindTexture(le.TEXTURE_2D,De.colorAttachment.get()),he.bindFramebuffer.set(De.framebuffer)})(E,v,p,v.transform.projection.name==="globe"?.5:.25),E.clear({color:o.Color.transparent});const G=v.transform,K=G.projection.name==="globe",X=K?["PROJECTION_GLOBE_VIEW"]:null,ee=K?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,ue=[o.mercatorXfromLng(G.center.lng),o.mercatorYfromLat(G.center.lat)];for(let he=0;he<_.length;he++){const me=_[he];if(c.hasRenderableParent(me))continue;const ge=c.getTile(me),ye=ge.getBucket(p);if(!ye||ye.projection.name!==G.projection.name)continue;const le=ye.programConfigurations.get(p.id),Te=v.useProgram("heatmap",le,X),{zoom:ke}=v.transform;v.terrain&&v.terrain.setupElevationDraw(ge,Te),v.prepareDrawProgram(E,Te,me.toUnwrapped());const De=G.projection.createInversionMatrix(G,me.canonical);Te.draw(E,k.TRIANGLES,o.DepthMode.disabled,L,U,ee,$a(v,me,ge,De,ue,ke,p.paint.get("heatmap-intensity")),p.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,p.paint,v.transform.zoom,le,K?[ye.globeExtVertexBuffer]:null)}E.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(E,k){const L=E.context,U=L.gl,G=k.heatmapFbo;if(!G)return;L.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,G.colorAttachment.get()),L.activeTexture.set(U.TEXTURE1);let K=k.colorRampTexture;K||(K=k.colorRampTexture=new o.Texture(L,k.colorRamp,U.RGBA)),K.bind(U.LINEAR,U.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(L,U.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,E.colorModeForRenderPass(),o.CullFaceMode.disabled,((X,ee,ue,he)=>({u_image:0,u_color_ramp:1,u_opacity:ee.paint.get("heatmap-opacity")}))(0,k),k.id,E.viewportBuffer,E.quadTriangleIndexBuffer,E.viewportSegments,k.paint,E.transform.zoom)}(v,p))},line:function(v,c,p,_){if(v.renderPass!=="translucent")return;const E=p.paint.get("line-opacity"),k=p.paint.get("line-width");if(E.constantOr(1)===0||k.constantOr(1)===0)return;const L=v.depthModeForSublayer(0,o.DepthMode.ReadOnly),U=v.colorModeForRenderPass(),G=v.terrain&&v.terrain.renderingToTexture?1:o.exported.devicePixelRatio,K=p.paint.get("line-dasharray"),X=K.constantOr(1),ee=p.layout.get("line-cap"),ue=p.paint.get("line-pattern"),he=ue.constantOr(1),me=p.paint.get("line-gradient"),ge=he?"linePattern":"line",ye=v.context,le=ye.gl,Te=(De=>{const He=[];uh(De)&&He.push("RENDER_LINE_DASH"),De.paint.get("line-gradient")&&He.push("RENDER_LINE_GRADIENT");const je=De.paint.get("line-trim-offset");je[0]===0&&je[1]===0||He.push("RENDER_LINE_TRIM_OFFSET");const Ge=De.paint.get("line-pattern").constantOr(1),et=De.paint.get("line-opacity").constantOr(1)!==1;return!Ge&&et&&He.push("RENDER_LINE_ALPHA_DISCARD"),He})(p);let ke=Te.includes("RENDER_LINE_ALPHA_DISCARD");v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(ke=!1);for(const De of _){const He=c.getTile(De);if(he&&!He.patternsLoaded())continue;const je=He.getBucket(p);if(!je)continue;v.prepareDrawTile();const Ge=je.programConfigurations.get(p.id),et=v.useProgram(ge,Ge,Te),it=ue.constantOr(null);if(it&&He.imageAtlas){const Ye=He.imageAtlas.patternPositions[it.toString()];Ye&&Ge.setConstantPatternPositions(Ye)}const lt=K.constantOr(null),jt=ee.constantOr(null);if(!he&&lt&&jt&&He.lineAtlas){const Ye=He.lineAtlas.getDash(lt,jt);Ye&&Ge.setConstantPatternPositions(Ye)}let[tt,Mt]=p.paint.get("line-trim-offset");(jt==="round"||jt==="square")&&tt!==Mt&&(tt===0&&(tt-=1),Mt===1&&(Mt+=1));const vt=v.terrain?De.projMatrix:null,Rt=he?Uv(v,He,p,vt,G):Pf(v,He,p,vt,je.lineClipsArray.length,G,[tt,Mt]);if(me){const Ye=je.gradients[p.id];let ut=Ye.texture;if(p.gradientVersion!==Ye.version){let Dt=256;if(p.stepInterpolant){const Ot=c.getSource().maxzoom,dn=De.canonical.z===Ot?Math.ceil(1<<v.transform.maxZoom-De.canonical.z):1;Dt=o.clamp(o.nextPowerOfTwo(je.maxLineLength/o.EXTENT*1024*dn),256,ye.maxTextureSize)}Ye.gradient=o.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:Dt,image:Ye.gradient||void 0,clips:je.lineClipsArray}),Ye.texture?Ye.texture.update(Ye.gradient):Ye.texture=new o.Texture(ye,Ye.gradient,le.RGBA),Ye.version=p.gradientVersion,ut=Ye.texture}ye.activeTexture.set(le.TEXTURE1),ut.bind(p.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}X&&(ye.activeTexture.set(le.TEXTURE0),He.lineAtlasTexture.bind(le.LINEAR,le.REPEAT),Ge.updatePaintBuffers()),he&&(ye.activeTexture.set(le.TEXTURE0),He.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),Ge.updatePaintBuffers()),v.prepareDrawProgram(ye,et,De.toUnwrapped());const at=Ye=>{et.draw(ye,le.TRIANGLES,L,Ye,U,o.CullFaceMode.disabled,Rt,p.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,p.paint,v.transform.zoom,Ge,[je.layoutVertexBuffer2])};if(ke){const Ye=v.stencilModeForClipping(De).ref;Ye===0&&v.terrain&&ye.clear({stencil:0});const ut={func:le.EQUAL,mask:255};Rt.u_alpha_discard_threshold=.8,at(new o.StencilMode(ut,Ye,255,le.KEEP,le.KEEP,le.INVERT)),Rt.u_alpha_discard_threshold=0,at(new o.StencilMode(ut,Ye,255,le.KEEP,le.KEEP,le.KEEP))}else at(v.stencilModeForClipping(De))}ke&&(v.resetStencilClippingMasks(),v.terrain&&ye.clear({stencil:0}))},fill:function(v,c,p,_){const E=p.paint.get("fill-color"),k=p.paint.get("fill-opacity");if(k.constantOr(1)===0)return;const L=v.colorModeForRenderPass(),U=p.paint.get("fill-pattern"),G=v.opaquePassEnabledForLayer()&&!U.constantOr(1)&&E.constantOr(o.Color.transparent).a===1&&k.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===G){const K=v.depthModeForSublayer(1,v.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);qv(v,c,p,_,K,L,!1)}if(v.renderPass==="translucent"&&p.paint.get("fill-antialias")){const K=v.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);qv(v,c,p,_,K,L,!0)}},"fill-extrusion":function(v,c,p,_){const E=p.paint.get("fill-extrusion-opacity");if(E!==0&&v.renderPass==="translucent"){const k=new o.DepthMode(v.context.gl.LEQUAL,o.DepthMode.ReadWrite,v.depthRangeFor3D);if(E!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))Bf(v,c,p,_,k,o.StencilMode.disabled,o.ColorMode.disabled),Bf(v,c,p,_,k,v.stencilModeFor3D(),v.colorModeForRenderPass()),v.resetStencilClippingMasks();else{const L=v.colorModeForRenderPass();Bf(v,c,p,_,k,o.StencilMode.disabled,L)}}},hillshade:function(v,c,p,_){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const E=v.context,k=v.depthModeForSublayer(0,o.DepthMode.ReadOnly),L=v.colorModeForRenderPass(),U=v.terrain&&v.terrain.renderingToTexture,[G,K]=v.renderPass!=="translucent"||U?[{},_]:v.stencilConfigForOverlap(_);for(const X of K){const ee=c.getTile(X);if(ee.needsHillshadePrepare&&v.renderPass==="offscreen")nh(v,ee,p,k,o.StencilMode.disabled,L);else if(v.renderPass==="translucent"){const ue=U&&v.terrain?v.terrain.stencilModeForRTTOverlap(X):G[X.overscaledZ];ku(v,X,ee,p,k,ue,L)}}E.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,c,p,_,E,k){if(v.renderPass!=="translucent"||p.paint.get("raster-opacity")===0||!_.length)return;const L=v.context,U=L.gl,G=c.getSource(),K=v.useProgram("raster"),X=v.colorModeForRenderPass(),ee=v.terrain&&v.terrain.renderingToTexture,[ue,he]=G instanceof We||ee?[{},_]:v.stencilConfigForOverlap(_),me=he[he.length-1].overscaledZ,ge=!v.options.moving;for(const ye of he){const le=ee?o.DepthMode.disabled:v.depthModeForSublayer(ye.overscaledZ-me,p.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,U.LESS),Te=ye.toUnwrapped(),ke=c.getTile(ye);if(ee&&(!ke||!ke.hasData()))continue;const De=ee?ye.projMatrix:v.transform.calculateProjMatrix(Te,ge),He=v.terrain&&ee?v.terrain.stencilModeForRTTOverlap(ye):ue[ye.overscaledZ],je=k?0:p.paint.get("raster-fade-duration");ke.registerFadeDuration(je);const Ge=c.findLoadedParent(ye,0),et=Au(ke,Ge,c,v.transform,je);let it,lt;v.terrain&&v.terrain.prepareDrawTile();const jt=p.paint.get("raster-resampling")==="nearest"?U.NEAREST:U.LINEAR;L.activeTexture.set(U.TEXTURE0),ke.texture.bind(jt,U.CLAMP_TO_EDGE),L.activeTexture.set(U.TEXTURE1),Ge?(Ge.texture.bind(jt,U.CLAMP_TO_EDGE),it=Math.pow(2,Ge.tileID.overscaledZ-ke.tileID.overscaledZ),lt=[ke.tileID.canonical.x*it%1,ke.tileID.canonical.y*it%1]):ke.texture.bind(jt,U.CLAMP_TO_EDGE),ke.texture.useMipmap&&L.extTextureFilterAnisotropic&&v.transform.pitch>20&&U.texParameterf(U.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax);const tt=jb(De,lt||[0,0],it||1,et,p,G instanceof We?G.perspectiveTransform:[0,0]);if(v.prepareDrawProgram(L,K,Te),G instanceof We)G.boundsBuffer&&G.boundsSegments&&K.draw(L,U.TRIANGLES,le,o.StencilMode.disabled,X,o.CullFaceMode.disabled,tt,p.id,G.boundsBuffer,v.quadTriangleIndexBuffer,G.boundsSegments);else{const{tileBoundsBuffer:Mt,tileBoundsIndexBuffer:vt,tileBoundsSegments:Rt}=v.getTileBoundsBuffers(ke);K.draw(L,U.TRIANGLES,le,He,X,o.CullFaceMode.disabled,tt,p.id,Mt,vt,Rt)}}v.resetStencilClippingMasks()},background:function(v,c,p,_){const E=p.paint.get("background-color"),k=p.paint.get("background-opacity");if(k===0)return;const L=v.context,U=L.gl,G=v.transform,K=G.tileSize,X=p.paint.get("background-pattern");if(v.isPatternMissing(X))return;const ee=!X&&E.a===1&&k===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==ee)return;const ue=o.StencilMode.disabled,he=v.depthModeForSublayer(0,ee==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),me=v.colorModeForRenderPass(),ge=v.useProgram(X?"backgroundPattern":"background");let ye,le=_;le||(ye=v.getBackgroundTiles(),le=Object.values(ye).map(Te=>Te.tileID)),X&&(L.activeTexture.set(U.TEXTURE0),v.imageManager.bind(v.context));for(const Te of le){const ke=Te.toUnwrapped(),De=_?Te.projMatrix:v.transform.calculateProjMatrix(ke);v.prepareDrawTile();const He=c?c.getTile(Te):ye?ye[Te.key]:new o.Tile(Te,K,G.zoom,v),je=X?Of(De,k,v,X,{tileID:Te,tileSize:K}):$b(De,k,E);v.prepareDrawProgram(L,ge,ke);const{tileBoundsBuffer:Ge,tileBoundsIndexBuffer:et,tileBoundsSegments:it}=v.getTileBoundsBuffers(He);ge.draw(L,U.TRIANGLES,he,ue,me,o.CullFaceMode.disabled,je,p.id,Ge,et,it)}},sky:function(v,c,p){const _=v.transform,E=_.projection.name==="mercator"||_.projection.name==="globe"?1:o.smoothstep(7,8,_.zoom),k=p.paint.get("sky-opacity")*E;if(k===0)return;const L=v.context,U=p.paint.get("sky-type"),G=new o.DepthMode(L.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),K=v.frameCounter/1e3%1;U==="atmosphere"?v.renderPass==="offscreen"?p.needsSkyboxCapture(v)&&(function(X,ee,ue,he){const me=X.context,ge=me.gl;let ye=ee.skyboxFbo;if(!ye){ye=ee.skyboxFbo=me.createFramebuffer(32,32,!1),ee.skyboxGeometry=new dh(me),ee.skyboxTexture=me.gl.createTexture(),ge.bindTexture(ge.TEXTURE_CUBE_MAP,ee.skyboxTexture),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_MAG_FILTER,ge.LINEAR);for(let De=0;De<6;++De)ge.texImage2D(ge.TEXTURE_CUBE_MAP_POSITIVE_X+De,0,ge.RGBA,32,32,0,ge.RGBA,ge.UNSIGNED_BYTE,null)}me.bindFramebuffer.set(ye.framebuffer),me.viewport.set([0,0,32,32]);const le=ee.getCenter(X,!0),Te=X.useProgram("skyboxCapture"),ke=new Float64Array(16);o.identity(ke),o.rotateY(ke,ke,.5*-Math.PI),Jn(me,ee,Te,ke,le,0),o.identity(ke),o.rotateY(ke,ke,.5*Math.PI),Jn(me,ee,Te,ke,le,1),o.identity(ke),o.rotateX(ke,ke,.5*-Math.PI),Jn(me,ee,Te,ke,le,2),o.identity(ke),o.rotateX(ke,ke,.5*Math.PI),Jn(me,ee,Te,ke,le,3),o.identity(ke),Jn(me,ee,Te,ke,le,4),o.identity(ke),o.rotateY(ke,ke,Math.PI),Jn(me,ee,Te,ke,le,5),me.viewport.set([0,0,X.width,X.height])}(v,p),p.markSkyboxValid(v)):v.renderPass==="sky"&&function(X,ee,ue,he,me){const ge=X.context,ye=ge.gl,le=X.transform,Te=X.useProgram("skybox");ge.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_CUBE_MAP,ee.skyboxTexture);const ke=((De,He,je,Ge,et)=>({u_matrix:De,u_sun_direction:He,u_cubemap:0,u_opacity:Ge,u_temporal_offset:et}))(le.skyboxMatrix,ee.getCenter(X,!1),0,he,me);X.prepareDrawProgram(ge,Te),Te.draw(ge,ye.TRIANGLES,ue,o.StencilMode.disabled,X.colorModeForRenderPass(),o.CullFaceMode.backCW,ke,"skybox",ee.skyboxGeometry.vertexBuffer,ee.skyboxGeometry.indexBuffer,ee.skyboxGeometry.segment)}(v,p,G,k,K):U==="gradient"&&v.renderPass==="sky"&&function(X,ee,ue,he,me){const ge=X.context,ye=ge.gl,le=X.transform,Te=X.useProgram("skyboxGradient");ee.skyboxGeometry||(ee.skyboxGeometry=new dh(ge)),ge.activeTexture.set(ye.TEXTURE0);let ke=ee.colorRampTexture;ke||(ke=ee.colorRampTexture=new o.Texture(ge,ee.colorRamp,ye.RGBA)),ke.bind(ye.LINEAR,ye.CLAMP_TO_EDGE);const De=((He,je,Ge,et,it)=>({u_matrix:He,u_color_ramp:0,u_center_direction:je,u_radius:o.degToRad(Ge),u_opacity:et,u_temporal_offset:it}))(le.skyboxMatrix,ee.getCenter(X,!1),ee.paint.get("sky-gradient-radius"),he,me);X.prepareDrawProgram(ge,Te),Te.draw(ge,ye.TRIANGLES,ue,o.StencilMode.disabled,X.colorModeForRenderPass(),o.CullFaceMode.backCW,De,"skyboxGradient",ee.skyboxGeometry.vertexBuffer,ee.skyboxGeometry.indexBuffer,ee.skyboxGeometry.segment)}(v,p,G,k,K)},debug:function(v,c,p){for(let _=0;_<p.length;_++)Uf(v,c,p[_])},custom:function(v,c,p,_){const E=v.context,k=p.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||v.renderPass==="offscreen")&&p.isLayerDraped()){if(v.renderPass==="offscreen"){const L=k.prerender;if(L){if(v.setCustomLayerDefaults(),E.setColorMode(v.colorModeForRenderPass()),v.transform.projection.name==="globe"){const U=v.transform.pointMerc;L.call(k,E.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(v.transform.zoom),[U.x,U.y],v.transform.pixelsPerMeterRatio)}else L.call(k,E.gl,v.transform.customLayerMatrix());E.setDirty(),v.setBaseState()}}else if(v.renderPass==="translucent"){if(v.terrain&&v.terrain.renderingToTexture){const U=k.renderToTile;if(U){const G=_[0].canonical,K=new o.MercatorCoordinate(G.x+_[0].wrap*(1<<G.z),G.y,G.z);E.setDepthMode(o.DepthMode.disabled),E.setStencilMode(o.StencilMode.disabled),E.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),U.call(k,E.gl,K),E.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),E.setColorMode(v.colorModeForRenderPass()),E.setStencilMode(o.StencilMode.disabled);const L=k.renderingMode==="3d"?new o.DepthMode(v.context.gl.LEQUAL,o.DepthMode.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(E.setDepthMode(L),v.transform.projection.name==="globe"){const U=v.transform.pointMerc;k.render(E.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(v.transform.zoom),[U.x,U.y],v.transform.pixelsPerMeterRatio)}else k.render(E.gl,v.transform.customLayerMatrix());E.setDirty(),v.setBaseState(),E.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Lu{constructor(c,p,_=!1){this.context=new _e(c,_),this.transform=p,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Mv,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(c,p){const _=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Tf(this,c));const E=this._terrain;this.transform.elevation=_?E:null,E.update(c,this.transform,p)}_updateFog(c){const p=c.fog;if(!p||this.transform.projection.name==="globe"||p.getOpacity(this.transform.pitch)<1||p.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,E]=p.getFovAdjustedRange(this.transform._fov);if(_>E)return void(this.transform.fogCullDistSq=null);const k=_+.78*(E-_);this.transform.fogCullDistSq=k*k}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(c,p){if(this.width=c*o.exported.devicePixelRatio,this.height=p*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const c=this.context,p=new o.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(p,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const _=new o.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(o.EXTENT,0),_.emplaceBack(0,o.EXTENT),_.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=c.createVertexBuffer(_,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const E=new o.StructArrayLayout2i4;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(-1,1),E.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(E,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const k=new o.StructArrayLayout4i8;k.emplaceBack(0,0,0,0),k.emplaceBack(o.EXTENT,0,o.EXTENT,0),k.emplaceBack(0,o.EXTENT,0,o.EXTENT),k.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=c.createVertexBuffer(k,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const L=new o.StructArrayLayout3ui6;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(L);const U=new o.StructArrayLayout1ui2;for(const K of[0,1,3,2,0])U.emplaceBack(K);this.debugIndexBuffer=c.createIndexBuffer(U),this.emptyTexture=new o.Texture(c,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=o.create();const G=this.context.gl;this.stencilClearMode=new o.StencilMode({func:G.ALWAYS,mask:0},0,255,G.ZERO,G.ZERO,G.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new Gb(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context,p=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(c,p.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,er(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,p,_){if(!p||this.currentStencilSource===p.id||!c.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let U=!1;for(const G of _)if(this._tileClippingMaskIDs[G.key]===void 0){U=!0;break}if(!U)return}this.currentStencilSource=p.id;const E=this.context,k=E.gl;this.nextStencilID+_.length>256&&this.clearStencil(),E.setColorMode(o.ColorMode.disabled),E.setDepthMode(o.DepthMode.disabled);const L=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const U of _){const G=p.getTile(U),K=this._tileClippingMaskIDs[U.key]=this.nextStencilID++,{tileBoundsBuffer:X,tileBoundsIndexBuffer:ee,tileBoundsSegments:ue}=this.getTileBoundsBuffers(G);L.draw(E,k.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:k.ALWAYS,mask:0},K,255,k.KEEP,k.KEEP,k.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,er(U.projMatrix),"$clipping",X,ee,ue)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,p=this.context.gl;return new o.StencilMode({func:p.NOTEQUAL,mask:255},c,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const p=this.context.gl;return new o.StencilMode({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(c){const p=this.context.gl,_=c.sort((L,U)=>U.overscaledZ-L.overscaledZ),E=_[_.length-1].overscaledZ,k=_[0].overscaledZ-E+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const L={};for(let U=0;U<k;U++)L[U+E]=new o.StencilMode({func:p.GEQUAL,mask:255},U+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=k,[L,_]}return[{[E]:o.StencilMode.disabled},_]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([c.CONSTANT_COLOR,c.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(c,p,_){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new o.DepthMode(_||this.context.gl.LEQUAL,p,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,p){this.style=c,this.options=p,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const _=this.style.order,E=this.style._sourceCaches;for(const K in E){const X=E[K];X.used&&X.prepare(this.context)}const k={},L={},U={};for(const K in E){const X=E[K];k[K]=X.getVisibleCoordinates(),L[K]=k[K].slice().reverse(),U[K]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let K=0;K<_.length;K++)if(this.style._layers[_[K]].is3D()){this.opaquePassCutoff=K;break}if(this.terrain&&(this.terrain.updateTileBinding(U),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const K of _){const X=this.style._layers[K],ee=c._getLayerSourceCache(X);if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const ue=ee?L[ee.id]:void 0;(X.type==="custom"||X.isSky()||ue&&ue.length)&&this.renderLayer(this,ee,X,ue)}this.depthRangeFor3D=[0,1-(c.order.length+2)*this.numSublayers*this.depthEpsilon];const G=this.terrain;if(G&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&G.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const K=this.style._layers[_[this.currentLayer]],X=c._getLayerSourceCache(K);if(K.isSky())continue;const ee=X?L[X.id]:void 0;this._renderTileClippingMasks(K,X,ee),this.renderLayer(this,X,K,ee)}if(this.style.fog&&this.transform.projection.supportsFog&&function(K,X){const ee=K.context,ue=ee.gl,he=K.transform,me=new o.DepthMode(ue.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ge=K.useProgram("globeAtmosphere",null,he.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ye=o.globeToMercatorTransition(he.zoom),le=X.properties.get("color").toArray01(),Te=X.properties.get("high-color").toArray01(),ke=X.properties.get("space-color").toArray01PremultipliedAlpha(),De=o.identity$1([]);o.rotateY$1(De,De,-o.degToRad(he._center.lng)),o.rotateX$1(De,De,o.degToRad(he._center.lat)),o.rotateZ$1(De,De,he.angle),o.rotateX$1(De,De,-he._pitch);const He=o.fromQuat(new Float32Array(16),De),je=o.mapValue(X.properties.get("star-intensity"),0,1,0,.25),Ge=5e-4,et=o.mapValue(X.properties.get("horizon-blend"),0,1,Ge,.25),it=o.globeUseCustomAntiAliasing(K,ee,he)&&et===Ge?he.worldSize/(2*Math.PI*1.025)-1:he.globeRadius,lt=K.frameCounter/1e3%1,jt=o.length(he.globeCenterInViewSpace),tt=Math.sqrt(Math.pow(jt,2)-Math.pow(it,2)),Mt=Math.acos(tt/jt),vt=((at,Ye,ut,Dt,Ot,dn,Un,sn,en,hn,Wn,gn,lr,pr)=>({u_frustum_tl:at,u_frustum_tr:Ye,u_frustum_br:ut,u_frustum_bl:Dt,u_horizon:Ot,u_transition:dn,u_fadeout_range:Un,u_color:sn,u_high_color:en,u_space_color:hn,u_star_intensity:Wn,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:gn,u_horizon_angle:lr,u_rotation_matrix:pr}))(he.frustumCorners.TL,he.frustumCorners.TR,he.frustumCorners.BR,he.frustumCorners.BL,he.frustumCorners.horizon,ye,et,le,Te,ke,je,lt,Mt,He);K.prepareDrawProgram(ee,ge);const Rt=K.atmosphereBuffer;Rt&&ge.draw(ee,ue.TRIANGLES,me,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,vt,"skybox",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const K=this.style._layers[_[this.currentLayer]],X=c._getLayerSourceCache(K);K.isSky()&&this.renderLayer(this,X,K,X?L[X.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const K=this.style._layers[_[this.currentLayer]],X=c._getLayerSourceCache(K);if(K.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(K)){if(K.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const ee=X?(K.type==="symbol"?U:L)[X.id]:void 0;this._renderTileClippingMasks(K,X,X?k[X.id]:void 0),this.renderLayer(this,X,K,ee),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let K=null;o.values(this.style._layers).forEach(X=>{const ee=c._getLayerSourceCache(X);ee&&!X.isHidden(this.transform.zoom)&&(!K||K.getSource().maxzoom<ee.getSource().maxzoom)&&(K=ee)}),K&&this.options.showTileBoundaries&&jf.debug(this,K,K.getVisibleCoordinates())}this.options.showPadding&&function(K){const X=K.transform.padding;js(K,K.transform.height-(X.top||0),3,Ff),js(K,X.bottom||0,3,Nf),fc(K,X.left||0,3,Zv),fc(K,K.transform.width-(X.right||0),3,Xv);const ee=K.transform.centerPoint;(function(ue,he,me,ge){Ru(ue,he-1,me-10,2,20,ge),Ru(ue,he-10,me-1,20,2,ge)})(K,ee.x,K.transform.height-ee.y,Kv)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(c,p,_,E){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||E&&E.length)&&(this.id=_.id,this.gpuTimingStart(_),(!c.transform.projection.unsupportedLayers||!c.transform.projection.unsupportedLayers.includes(_.type)||c.terrain&&_.type==="custom")&&jf[_.type](c,p,_,E,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const p=this.context.extTimerQuery;let _=this.gpuTimers[c.id];_||(_=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),_.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,p=c.createQueryEXT();this.deferredRenderGpuTimeQueries.push(p),c.beginQueryEXT(c.TIME_ELAPSED_EXT,p)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const p={};for(const _ in c){const E=c[_],k=this.context.extTimerQuery,L=k.getQueryObjectEXT(E.query,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(E.query),p[_]=L}return p}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const p=this.context.extTimerQuery;let _=0;for(const E of c)_+=p.getQueryObjectEXT(E,p.QUERY_RESULT_EXT)/1e6,p.deleteQueryEXT(E);return _}translatePosMatrix(c,p,_,E,k){if(!_[0]&&!_[1])return c;const L=k?E==="map"?this.transform.angle:0:E==="viewport"?-this.transform.angle:0;if(L){const K=Math.sin(L),X=Math.cos(L);_=[_[0]*X-_[1]*K,_[0]*K+_[1]*X]}const U=[k?_[0]:Ut(p,_[0],this.transform.zoom),k?_[1]:Ut(p,_[1],this.transform.zoom),0],G=new Float32Array(16);return o.translate(G,c,U),G}saveTileTexture(c){const p=this._tileTextures[c.size[0]];p?p.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const p=this._tileTextures[c];return p&&p.length>0?p.pop():null}isPatternMissing(c){return c===null||c!==void 0&&!this.imageManager.getPattern(c.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const c=this.terrain&&this.terrain.renderingToTexture,p=this.terrain&&this.terrain.exaggeration()===0,_=this.style&&this.style.fog,E=[];return this.terrainRenderModeElevated()&&E.push("TERRAIN"),this.transform.projection.name==="globe"&&E.push("GLOBE"),p&&E.push("ZERO_EXAGGERATION"),_&&!c&&_.getOpacity(this.transform.pitch)!==0&&E.push("FOG"),c&&E.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&E.push("OVERDRAW_INSPECTOR"),E}useProgram(c,p,_){this.cache=this.cache||{};const E=_||[],k=this.currentGlobalDefines().concat(E),L=Af.cacheKey(bf[c],c,k,p);return this.cache[L]||(this.cache[L]=new Af(this.context,c,bf[c],p,Vb[c],k)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(c,p,_){if(this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const k=E.getOpacity(this.transform.pitch),L=((U,G,K,X,ee,ue,he,me,ge,ye,le)=>{const Te=U.transform,ke=G.properties.get("color").toArray01();ke[3]=X;const De=U.frameCounter/1e3%1;return{u_fog_matrix:K?Te.calculateFogTileMatrix(K):U.identityMat,u_fog_range:G.getFovAdjustedRange(Te._fov),u_fog_color:ke,u_fog_horizon_blend:G.properties.get("horizon-blend"),u_fog_temporal_offset:De,u_frustum_tl:ee,u_frustum_tr:ue,u_frustum_br:he,u_frustum_bl:me,u_globe_pos:ge,u_globe_radius:ye,u_viewport:le,u_globe_transition:o.globeToMercatorTransition(Te.zoom),u_is_globe:+(Te.projection.name==="globe")}})(this,E,_,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);p.setFogUniformValues(c,L)}}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){const c=this.canvasCopy();c&&(this.frameCopies.push(c),this.tileLoaded=!1)}canvasCopy(){const c=this.context.gl,p=c.createTexture();return c.bindTexture(c.TEXTURE_2D,p),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),p}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,p=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const E of _)p[E.key]=c[E.key]||new o.Tile(E,512,this.transform.tileZoom,this);return p}clearBackgroundTiles(){this._backgroundTiles={}}}class $f{constructor(c=0,p=0,_=0,E=0){if(isNaN(c)||c<0||isNaN(p)||p<0||isNaN(_)||_<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=p,this.left=_,this.right=E}interpolate(c,p,_){return p.top!=null&&c.top!=null&&(this.top=o.number(c.top,p.top,_)),p.bottom!=null&&c.bottom!=null&&(this.bottom=o.number(c.bottom,p.bottom,_)),p.left!=null&&c.left!=null&&(this.left=o.number(c.left,p.left,_)),p.right!=null&&c.right!=null&&(this.right=o.number(c.right,p.right,_)),this}getCenter(c,p){const _=o.clamp((this.left+c-this.right)/2,0,c),E=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.pointGeometry(_,E)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new $f(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Yv(v,c){const p=o.getColumn(v,3);o.fromQuat(v,c),o.setColumn(v,3,p)}function ph(v,c){const p=o.identity$1([]);return o.rotateZ$1(p,p,-c),o.rotateX$1(p,p,-v),p}function Jv(v,c){const p=[v[0],v[1],0],_=[c[0],c[1],0];if(o.length(p)>=1e-15){const L=o.normalize([],p);o.scale$2(_,L,o.dot(_,L)),c[0]=_[0],c[1]=_[1]}const E=o.cross([],c,v);if(o.len(E)<1e-15)return null;const k=Math.atan2(-E[1],E[0]);return ph(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),k)}class fh{constructor(c,p){this.position=c,this.orientation=p}get position(){return this._position}set position(c){if(c){const p=c instanceof o.MercatorCoordinate?c:new o.MercatorCoordinate(c[0],c[1],c[2]);this._renderWorldCopies&&(p.x=o.wrap(p.x,0,1)),this._position=p}else this._position=null}lookAtPoint(c,p){if(this.orientation=null,!this.position)return;const _=this.position,E=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(c)):0,k=o.MercatorCoordinate.fromLngLat(c,E),L=[k.x-_.x,k.y-_.y,k.z-_.z];p||(p=[0,0,1]),p[2]=Math.abs(p[2]),this.orientation=Jv(L,p)}setPitchBearing(c,p){this.orientation=ph(o.degToRad(c),o.degToRad(-p))}}class vc{constructor(c,p){this._transform=o.identity([]),this.orientation=p,this.position=c}get mercatorPosition(){const c=this.position;return new o.MercatorCoordinate(c[0],c[1],c[2])}get position(){const c=o.getColumn(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var p;c&&o.setColumn(this._transform,3,[(p=c)[0],p[1],p[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||o.identity$1([]),c&&Yv(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),p=this.right();return{bearing:Math.atan2(-p[1],p[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,p){this._orientation=ph(c,p),Yv(this._transform,this._orientation)}forward(){const c=o.getColumn(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=o.getColumn(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=o.getColumn(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,p){const _=new Float64Array(16);return o.invert(_,this.getWorldToCamera(c,p)),_}getWorldToCameraPosition(c,p,_){const E=this.position;o.scale$2(E,E,-c);const k=new Float64Array(16);return o.fromScaling(k,[_,_,_]),o.translate(k,k,E),k[10]*=p,k}getWorldToCamera(c,p){const _=new Float64Array(16),E=new Float64Array(4),k=this.position;return o.conjugate(E,this._orientation),o.scale$2(k,k,-c),o.fromQuat(_,E),o.translate(_,_,k),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=p,_[9]*=p,_[10]*=p,_[11]*=p,_}getCameraToClipPerspective(c,p,_,E){const k=new Float64Array(16);return o.perspective(k,c,p,_,E),k}getDistanceToElevation(c,p=!1){const _=c===0?0:o.mercatorZfromAltitude(c,p?o.latFromMercatorY(this.position[1]):this.position[1]),E=this.forward();return(_-this.position[2])/E[2]}clone(){return new vc([...this.position],[...this.orientation])}}function yc(v,c){const p=Cl(v.projection,v.zoom,v.width,v.height),_=function(k,L,U,G,K){const X=new o.LngLat(U.lng-180*Sl,U.lat),ee=new o.LngLat(U.lng+180*Sl,U.lat),ue=k.project(X.lng,X.lat),he=k.project(ee.lng,ee.lat),me=-Math.atan2(he.y-ue.y,he.x-ue.x),ge=o.MercatorCoordinate.fromLngLat(U);ge.y=o.clamp(ge.y,-.999975,.999975);const ye=ge.toLngLat(),le=k.project(ye.lng,ye.lat),Te=o.MercatorCoordinate.fromLngLat(ye);Te.x+=Sl;const ke=Te.toLngLat(),De=k.project(ke.lng,ke.lat),He=zu(De.x-le.x,De.y-le.y,me),je=o.MercatorCoordinate.fromLngLat(ye);je.y+=Sl;const Ge=je.toLngLat(),et=k.project(Ge.lng,Ge.lat),it=zu(et.x-le.x,et.y-le.y,me),lt=Math.abs(He.x)/Math.abs(it.y),jt=o.identity([]);o.rotateZ(jt,jt,-me*(1-(K?0:G)));const tt=o.identity([]);return o.scale(tt,tt,[1,1-(1-lt)*G,1]),tt[4]=-it.x/it.y*G,o.rotateZ(tt,tt,me),o.multiply(tt,jt,tt),tt}(v.projection,0,v.center,p,c),E=mh(v);return o.scale(_,_,[E,E,1]),_}function mh(v){const c=v.projection,p=Cl(v.projection,v.zoom,v.width,v.height),_=Ou(c,v.center),E=Ou(c,o.LngLat.convert(c.center));return Math.pow(2,_*p+(1-p)*E)}function Cl(v,c,p,_,E=1/0){const k=v.range;if(!k)return 0;const L=Math.min(E,Math.max(p,_)),U=Math.log(L/1024)/Math.LN2;return o.smoothstep(k[0]+U,k[1]+U,c)}const Sl=1/4e4;function Ou(v,c){const p=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=new o.LngLat(c.lng-180*Sl,p),E=new o.LngLat(c.lng+180*Sl,p),k=v.project(_.lng,p),L=v.project(E.lng,p),U=o.MercatorCoordinate.fromLngLat(_),G=o.MercatorCoordinate.fromLngLat(E),K=L.x-k.x,X=L.y-k.y,ee=G.x-U.x,ue=G.y-U.y,he=Math.sqrt((ee*ee+ue*ue)/(K*K+X*X));return Math.log(he)/Math.LN2}function zu(v,c,p){const _=Math.cos(p),E=Math.sin(p);return{x:v*_-c*E,y:v*E+c*_}}class Qt{constructor(c,p,_,E,k,L,U){this.tileSize=512,this._renderWorldCopies=k===void 0||k,this._minZoom=c||0,this._maxZoom=p||22,this._minPitch=_==null?0:_,this._maxPitch=E==null?60:E,this.setProjection(L),this.setMaxBounds(U),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new $f,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new vc,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const c=new Qt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.mercatorFromTransition=this.mercatorFromTransition,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(c,p=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(c||_)&&this._constrainCamera(p),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const p=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const _=!g(p,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const p=c!==this.projection.name;return p&&this._calcMatrices(),p}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const p=-c*Math.PI/180;var _;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(_=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(E,k,L){var U=k[0],G=k[1],K=k[2],X=k[3],ee=Math.sin(L),ue=Math.cos(L);E[0]=U*ue+K*ee,E[1]=G*ue+X*ee,E[2]=U*-ee+K*ue,E[3]=G*-ee+X*ue}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const p=o.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const c=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/c)}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=o.degToRad(c),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const p=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._setZoom(p),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const c=this._elevation;this._centerAltitude=c.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=c.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,p=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let E=0,k=0;for(let L=0;L<p.length;L++){const U=new o.pointGeometry(p[L][0]*this.width,_+p[L][1]*(this.height-_)),G=c.pointCoordinate(U);if(!G)continue;const K=1/Math.hypot(G[0]-this._camera.position[0],G[1]-this._camera.position[1]);E+=G[3]*K,k+=K}return k===0?NaN:E/k}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,p=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*p,E=this._mercatorZfromZoom(c),k=this._mercatorZfromZoom(this._maxZoom),L=Math.max(E-_,k);this._setZoom(this._zoomFromMercatorZ(L))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const p=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let _;_=c.z<this._camera.position[2]?[p.x,p.y,p.z]:[c.x,c.y,c.z];const E=o.length(o.sub([],this._camera.position,_));return o.clamp(this._zoomFromMercatorZ(E),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let p=!1;if(c.orientation&&!o.exactEquals(c.orientation,this._camera.orientation)&&(p=this._setCameraOrientation(c.orientation)),c.position){const _=[c.position.x,c.position.y,c.position.z];o.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),p=!0)}p&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,p=new fh;return p.position=new o.MercatorCoordinate(c[0],c[1],c[2]),p.orientation=this._camera.orientation,p._elevation=this.elevation,p._renderWorldCopies=this.renderWorldCopies,p}_setCameraOrientation(c){if(!o.length$1(c))return!1;o.normalize$1(c,c);const p=o.transformQuat([],[0,0,-1],c),_=o.transformQuat([],[0,-1,0],c);if(_[2]<0)return!1;const E=Jv(p,_);return!!E&&(this._camera.orientation=E,!0)}_setCameraPosition(c){const p=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,E=this.cameraToCenterDistance;c[2]=o.clamp(c[2],E/_,E/p),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,p,_){this._unmodified=!1,this._edgeInsets.interpolate(c,p,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const p=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(c){const p=[new o.UnwrappedTileID(0,c)];if(this.renderWorldCopies){const _=this.pointCoordinate(new o.pointGeometry(0,0)),E=this.pointCoordinate(new o.pointGeometry(this.width,0)),k=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),L=this.pointCoordinate(new o.pointGeometry(0,this.height)),U=Math.floor(Math.min(_.x,E.x,k.x,L.x)),G=Math.floor(Math.max(_.x,E.x,k.x,L.x)),K=1;for(let X=U-K;X<=G+K;X++)X!==0&&p.push(new o.UnwrappedTileID(X,c))}return p}coveringTiles(c){let p=this.coveringZoomLevel(c);const _=p,E=this.elevation&&!c.isTerrainDEM,k=this.projection.name==="mercator";if(c.minzoom!==void 0&&p<c.minzoom)return[];c.maxzoom!==void 0&&p>c.maxzoom&&(p=c.maxzoom);const L=this.locationCoordinate(this.center),U=this.center.lat,G=1<<p,K=[G*L.x,G*L.y,0],X=this.projection.name==="globe",ee=!X,ue=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p,ee),he=X?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),me=G*o.mercatorZfromAltitude(1,this.center.lat),ge=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),ye=[G*he.x,G*he.y,ge*(ee?1:me)],le=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),Te=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?p:0,ke=c.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,De=c.isTerrainDEM?-ke:this._elevation?this._elevation.getMinElevationBelowMSL():0,He=this.projection.isReprojectedInTileSpace?mh(this):1,je=at=>{const ut=new o.MercatorCoordinate(at.x+25e-6,at.y,at.z),Dt=new o.MercatorCoordinate(at.x,at.y+25e-6,at.z),Ot=at.toLngLat(),dn=ut.toLngLat(),Un=Dt.toLngLat(),sn=this.locationCoordinate(Ot),en=this.locationCoordinate(dn),hn=this.locationCoordinate(Un),Wn=Math.hypot(en.x-sn.x,en.y-sn.y),gn=Math.hypot(hn.x-sn.x,hn.y-sn.y);return Math.sqrt(Wn*gn)*He/25e-6},Ge=at=>{const Ye=ke,ut=De;return{aabb:o.tileAABB(this,G,0,0,0,at,ut,Ye,this.projection),zoom:0,x:0,y:0,minZ:ut,maxZ:Ye,wrap:at,fullyVisible:!1}},et=[];let it=[];const lt=p,jt=c.reparseOverscaled?_:p,tt=at=>at*at,Mt=tt((ge-this._centerAltitude)*me),vt=at=>{if(!this._elevation||!at.tileID||!k)return;const Ye=this._elevation.getMinMaxForTile(at.tileID),ut=at.aabb;Ye?(ut.min[2]=Ye.min,ut.max[2]=Ye.max,ut.center[2]=(ut.min[2]+ut.max[2])/2):(at.shouldSplit=Rt(at),at.shouldSplit||(ut.min[2]=ut.max[2]=ut.center[2]=this._centerAltitude))},Rt=at=>{if(at.zoom<Te)return!0;if(at.zoom===lt)return!1;if(at.shouldSplit!=null)return at.shouldSplit;const Ye=at.aabb.distanceX(ye),ut=at.aabb.distanceY(ye);let Dt=Mt,Ot=1;if(X){Dt=tt(at.aabb.distanceZ(ye));const sn=Math.pow(2,at.zoom),en=o.latFromMercatorY((at.y+1)/sn),hn=o.latFromMercatorY(at.y/sn),Wn=Math.min(Math.max(U,en),hn),gn=o.circumferenceAtLatitude(Wn)/o.circumferenceAtLatitude(U);if(Ot=Wn===U?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,gn/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&at.zoom===lt-1&&gn>=.9)return!0}else if(E&&(Dt=tt(at.aabb.distanceZ(ye)*me)),this.projection.isReprojectedInTileSpace&&_<=5){const sn=Math.pow(2,at.zoom),en=je(new o.MercatorCoordinate((at.x+.5)/sn,(at.y+.5)/sn));Ot=en>.85?1:en}const dn=Ye*Ye+ut*ut+Dt,Un=tt((1<<lt-at.zoom)*le*Ot*((sn,en)=>{if(en*tt(.707)<sn)return 1;const hn=Math.sqrt(en/sn);return hn/(1.4144271570014144+(Math.pow(1.1,hn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Dt,Mt),dn));return dn<Un};if(this.renderWorldCopies)for(let at=1;at<=3;at++)et.push(Ge(-at)),et.push(Ge(at));for(et.push(Ge(0));et.length>0;){const at=et.pop(),Ye=at.x,ut=at.y;let Dt=at.fullyVisible;if(!Dt){const Ot=at.aabb.intersects(ue);if(Ot===0)continue;Dt=Ot===2}if(at.zoom!==lt&&Rt(at))for(let Ot=0;Ot<4;Ot++){const dn=(Ye<<1)+Ot%2,Un=(ut<<1)+(Ot>>1),sn={aabb:k?at.aabb.quadrant(Ot):o.tileAABB(this,G,at.zoom+1,dn,Un,at.wrap,at.minZ,at.maxZ,this.projection),zoom:at.zoom+1,x:dn,y:Un,wrap:at.wrap,fullyVisible:Dt,tileID:void 0,shouldSplit:void 0,minZ:at.minZ,maxZ:at.maxZ};E&&!X&&(sn.tileID=new o.OverscaledTileID(at.zoom+1===lt?jt:at.zoom+1,at.wrap,at.zoom+1,dn,Un),vt(sn)),et.push(sn)}else{const Ot=at.zoom===lt?jt:at.zoom;if(c.minzoom&&c.minzoom>Ot)continue;const dn=K[0]-(.5+Ye+(at.wrap<<at.zoom))*(1<<p-at.zoom),Un=K[1]-.5-ut,sn=at.tileID?at.tileID:new o.OverscaledTileID(Ot,at.wrap,at.zoom,Ye,ut);it.push({tileID:sn,distanceSq:dn*dn+Un*Un})}}if(this.fogCullDistSq){const at=this.fogCullDistSq,Ye=this.horizonLineFromTop();it=it.filter(ut=>{const Dt=[0,0,0,1],Ot=[o.EXTENT,o.EXTENT,0,1],dn=this.calculateFogTileMatrix(ut.tileID.toUnwrapped());o.transformMat4$1(Dt,Dt,dn),o.transformMat4$1(Ot,Ot,dn);const Un=o.getAABBPointSquareDist(Dt,Ot);if(Un===0)return!0;let sn=!1;const en=this._elevation;if(en&&Un>at&&Ye!==0){const hn=this.calculateProjMatrix(ut.tileID.toUnwrapped());let Wn;c.isTerrainDEM||(Wn=en.getMinMaxForTile(ut.tileID)),Wn||(Wn={min:De,max:ke});const gn=o.furthestTileCorner(this.rotation),lr=[gn[0]*o.EXTENT,gn[1]*o.EXTENT,Wn.max];o.transformMat4(lr,lr,hn),sn=(1-lr[1])*this.height*.5<Ye}return Un<at||sn})}return it.sort((at,Ye)=>at.distanceSq-Ye.distanceSq).map(at=>at.tileID)}resize(c,p){this.width=c,this.height=p,this.pixelsToGLUnits=[2/c,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const p=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=this.projection.project(c.lng,p);return new o.pointGeometry(_.x*this.worldSize,_.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(c,p){let _,E;const k=this.centerPoint;if(this.projection.name==="globe"){const U=this.worldSize;_=(p.x-k.x)/U,E=(p.y-k.y)/U}else{const U=this.pointCoordinate(p),G=this.pointCoordinate(k);_=U.x-G.x,E=U.y-G.y}const L=this.locationCoordinate(c);this.setLocation(new o.MercatorCoordinate(L.x-_,L.y-E))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,p){const _=p?o.mercatorZfromAltitude(p,c.lat):void 0,E=this.projection.project(c.lng,c.lat);return new o.MercatorCoordinate(E.x,E.y,_)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,p){const _=p!=null?p:this._centerAltitude,E=[c.x,c.y,0,1],k=[c.x,c.y,1,1];o.transformMat4$1(E,E,this.pixelMatrixInverse),o.transformMat4$1(k,k,this.pixelMatrixInverse);const L=k[3];o.scale$1(E,E,1/E[3]),o.scale$1(k,k,1/L);const U=E[2],G=k[2];return{p0:E,p1:k,t:U===G?0:(_-U)/(G-U)}}screenPointToMercatorRay(c){const p=[c.x,c.y,0,1],_=[c.x,c.y,1,1];return o.transformMat4$1(p,p,this.pixelMatrixInverse),o.transformMat4$1(_,_,this.pixelMatrixInverse),o.scale$1(p,p,1/p[3]),o.scale$1(_,_,1/_[3]),p[2]=o.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,_[2]=o.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,o.scale$1(p,p,1/this.worldSize),o.scale$1(_,_,1/this.worldSize),new o.Ray([p[0],p[1],p[2]],o.normalize([],o.sub([],_,p)))}rayIntersectionCoordinate(c){const{p0:p,p1:_,t:E}=c,k=o.mercatorZfromAltitude(p[2],this._center.lat),L=o.mercatorZfromAltitude(_[2],this._center.lat);return new o.MercatorCoordinate(o.number(p[0],_[0],E)/this.worldSize,o.number(p[1],_[1],E)/this.worldSize,o.number(k,L,E))}pointCoordinate(c,p=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,p)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let p=this.projection.pointCoordinate3D(this,c.x,c.y);if(p)return new o.MercatorCoordinate(p[0],p[1],p[2]);let _=0,E=this.horizonLineFromTop();if(c.y>E)return this.pointCoordinate(c);const k=.02*E,L=c.clone();for(let U=0;U<10&&E-_>k;U++){L.y=o.number(_,E,.66);const G=this.projection.pointCoordinate3D(this,L.x,L.y);G?(E=L.y,p=G):_=L.y}return p?new o.MercatorCoordinate(p[0],p[1],p[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}_coordinatePoint(c,p){const _=p&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,E=[c.x*this.worldSize,c.y*this.worldSize,_+c.toAltitude(),1];return o.transformMat4$1(E,E,this.pixelMatrix),E[3]>0?new o.pointGeometry(E[0]/E[3],E[1]/E[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:c,left:p}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,k=this.pointLocation3D(new o.pointGeometry(p,c)),L=this.pointLocation3D(new o.pointGeometry(E,c)),U=this.pointLocation3D(new o.pointGeometry(E,_)),G=this.pointLocation3D(new o.pointGeometry(p,_));let K=Math.min(k.lng,L.lng,U.lng,G.lng),X=Math.max(k.lng,L.lng,U.lng,G.lng),ee=Math.min(k.lat,L.lat,U.lat,G.lat),ue=Math.max(k.lat,L.lat,U.lat,G.lat);const he=Math.pow(2,-this.zoom)/16*270,me=this.projection.name==="globe"?1:4,ge=(ye,le,Te,ke,De)=>{const He=(ye+Te)/2,je=(le+ke)/2,Ge=new o.pointGeometry(He,je),{lng:et,lat:it}=this.pointLocation3D(Ge),lt=Math.max(0,K-et,ee-it,et-X,it-ue);K=Math.min(K,et),X=Math.max(X,et),ee=Math.min(ee,it),ue=Math.max(ue,it),(De<me||lt>he)&&(ge(ye,le,He,je,De+1),ge(He,je,Te,ke,De+1))};if(ge(p,c,E,c,1),ge(E,c,E,_,1),ge(E,_,p,_,1),ge(p,_,p,c,1),this.projection.name==="globe"){const[ye,le]=o.polesInViewport(this);ye?(ue=90,X=180,K=-180):le&&(ee=-90,X=180,K=-180)}return new o.LngLatBounds(new o.LngLat(K,ee),new o.LngLat(X,ue))}_getBoundsRectangular(c,p){const{top:_,left:E}=this._edgeInsets,k=this.height-this._edgeInsets.bottom,L=this.width-this._edgeInsets.right,U=new o.pointGeometry(E,_),G=new o.pointGeometry(L,_),K=new o.pointGeometry(L,k),X=new o.pointGeometry(E,k);let ee=this.pointCoordinate(U,c),ue=this.pointCoordinate(G,c);const he=this.pointCoordinate(K,p),me=this.pointCoordinate(X,p),ge=(ye,le)=>(le.y-ye.y)/(le.x-ye.x);return ee.y>1&&ue.y>=0?ee=new o.MercatorCoordinate((1-me.y)/ge(me,ee)+me.x,1):ee.y<0&&ue.y<=1&&(ee=new o.MercatorCoordinate(-me.y/ge(me,ee)+me.x,0)),ue.y>1&&ee.y>=0?ue=new o.MercatorCoordinate((1-he.y)/ge(he,ue)+he.x,1):ue.y<0&&ee.y<=1&&(ue=new o.MercatorCoordinate(-he.y/ge(he,ue)+he.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(ee)).extend(this.coordinateLocation(ue)).extend(this.coordinateLocation(me)).extend(this.coordinateLocation(he))}_getBoundsRectangularTerrain(){const c=this.elevation;if(!c.visibleDemTiles.length||c.isUsingMockSource())return this._getBoundsRectangular(0,0);const p=c.visibleDemTiles.reduce((_,E)=>{if(E.dem){const k=E.dem.tree;_.min=Math.min(_.min,k.minimums[0]),_.max=Math.max(_.max,k.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(p.min*c.exaggeration(),p.max*c.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(c=!0){const p=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-p*(1-this._horizonShift);return c?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,p){return this.projection.createTileMatrix(this,p,c)}calculateDistanceTileData(c){const p=c.key,_=this._distanceTileDataCache;if(_[p])return _[p];const E=c.canonical,k=1/this.height,L=this.cameraWorldSize,U=L/this.zoomScale(E.z),G=(E.x+Math.pow(2,E.z)*c.wrap)*U,K=E.y*U,X=this.point;X.x*=L/this.worldSize,X.y*=L/this.worldSize;const ee=this.angle,ue=Math.sin(-ee),he=-Math.cos(-ee);return _[p]={bearing:[ue,he],center:[(X.x-G)*k,(X.y-K)*k],scale:U/o.EXTENT*k},_[p]}calculateFogTileMatrix(c){const p=c.key,_=this._fogTileMatrixCache;if(_[p])return _[p];const E=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,c);return o.multiply(E,this.worldToFogMatrix,E),_[p]=new Float32Array(E),_[p]}calculateProjMatrix(c,p=!1){const _=c.key,E=p?this._alignedProjMatrixCache:this._projMatrixCache;if(E[_])return E[_];const k=this.calculatePosMatrix(c,this.worldSize);return o.multiply(k,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:p?this.alignedProjMatrix:this.projMatrix,k),E[_]=new Float32Array(k),E[_]}calculatePixelsToTileUnitsMatrix(c){const p=c.tileID.key,_=this._pixelsToTileUnitsCache;if(_[p])return _[p];const E=function(k,L){const{scale:U}=k.tileTransform,G=U*o.EXTENT/(k.tileSize*Math.pow(2,L.zoom-k.tileID.overscaledZ+k.tileID.canonical.z));return K=new Float32Array(4),ue=(X=L.inverseAdjustmentMatrix)[1],he=X[2],me=X[3],ye=(ee=[G,G])[1],K[0]=X[0]*(ge=ee[0]),K[1]=ue*ge,K[2]=he*ye,K[3]=me*ye,K;var K,X,ee,ue,he,me,ge,ye}(c,this);return _[p]=E,_[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const c=1/this.worldSize,p=o.fromScaling([],[c,c,c]);return o.multiply(p,p,this.globeMatrix),p}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const p=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(p),E=this._camera.forward(),k=o.mercatorZfromAltitude(1,this._center.lat);_[2]/=k,E[2]/=k,o.normalize(E,E);const L=c.raycast(_,E,c.exaggeration());if(L){const U=o.scaleAndAdd([],_,E,L),G=new o.MercatorCoordinate(U[0],U[1],o.mercatorZfromAltitude(U[2],o.latFromMercatorY(U[1]))),K=(G.z+o.length([G.x-_[0],G.y-_[1],G.z-_[2]*k]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(K),this._centerAltitude=G.toAltitude(),this._center=this.coordinateLocation(G),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(c=!1){if(!this._elevation)return;const p=this._elevation,_=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,E=this._computeCameraPosition(_),k=p.getAtPointOrZero(new o.MercatorCoordinate(...E)),L=this.pixelsPerMeter/this.worldSize*k,U=this._minimumHeightOverTerrain(),G=E[2]-L;if(G<=U)if(G<0||c){const K=this.locationCoordinate(this._center,this._centerAltitude),X=[E[0],E[1],K.z-E[2]],ee=o.length(X);X[2]-=(U-G)/this._pixelsPerMercatorPixel;const ue=o.length(X);if(ue===0)return;o.scale$2(X,X,ee/ue*this._pixelsPerMercatorPixel),this._camera.position=[E[0],E[1],K.z*this._pixelsPerMercatorPixel-X[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const ue=this.center;return ue.lat=o.clamp(ue.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(ue.lng=o.clamp(ue.lng,this.minLng,this.maxLng)),this.center=ue,void(this._constraining=!1)}const p=this._unmodified,{x:_,y:E}=this.point;let k=0,L=_,U=E;const G=this.width/2,K=this.height/2,X=this.worldMinY*this.scale,ee=this.worldMaxY*this.scale;if(E-K<X&&(U=X+K),E+K>ee&&(U=ee-K),ee-X<this.height&&(k=Math.max(k,this.height/(ee-X)),U=(ee+X)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ue=this.worldMinX*this.scale,he=this.worldMaxX*this.scale,me=this.worldSize/2-(ue+he)/2;L=(_+me+this.worldSize)%this.worldSize-me,L-G<ue&&(L=ue+G),L+G>he&&(L=he-G),he-ue<this.width&&(k=Math.max(k,this.width/(he-ue)),L=(he+ue)/2)}L===_&&U===E||(this.center=this.unproject(new o.pointGeometry(L,U))),k&&(this.zoom+=this.scaleZoom(k)),this._constrainCamera(),this._unmodified=p,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,p=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const _=Cl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const E=this.projection.zAxisUnit==="meters"?p:1,k=this._camera.getWorldToCamera(this.worldSize,E),L=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);L[8]=2*-c.x/this.width,L[9]=2*c.y/this.height;let U=o.mul([],L,k);if(this.projection.isReprojectedInTileSpace){const je=this.locationCoordinate(this.center),Ge=o.identity([]);o.translate(Ge,Ge,[je.x*this.worldSize,je.y*this.worldSize,0]),o.multiply(Ge,Ge,yc(this)),o.translate(Ge,Ge,[-je.x*this.worldSize,-je.y*this.worldSize,0]),o.multiply(U,U,Ge),this.inverseAdjustmentMatrix=function(et){const it=yc(et,!0);return ne([],[it[0],it[1],it[4],it[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],U,[this.worldSize,this.worldSize,this.worldSize/E,1]),this.projMatrix=U,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const G=o.invert([],L);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(G,this.horizonLineFromTop(),this.height);const K=new Float32Array(16);o.identity(K),o.scale(K,K,[1,-1,1]),o.rotateX(K,K,this._pitch),o.rotateZ(K,K,this.angle);const X=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),ee=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;X[8]=2*-c.x/this.width,X[9]=2*(c.y+ee)/this.height,this.skyboxMatrix=o.multiply(K,X,K);const ue=this.point,he=ue.x,me=ue.y,ge=this.width%2/2,ye=this.height%2/2,le=Math.cos(this.angle),Te=Math.sin(this.angle),ke=he-Math.round(he)+le*ge+Te*ye,De=me-Math.round(me)+le*ye+Te*ge,He=new Float64Array(U);if(o.translate(He,He,[ke>.5?ke-1:ke,De>.5?De-1:De,0]),this.alignedProjMatrix=He,U=o.create(),o.scale(U,U,[this.width/2,-this.height/2,1]),o.translate(U,U,[1,-1,0]),this.labelPlaneMatrix=U,U=o.create(),o.scale(U,U,[1,-1,1]),o.translate(U,U,[-1,-1,0]),o.scale(U,U,[2/this.width,2/this.height,1]),this.glCoordMatrix=U,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},U=o.invert(new Float64Array(16),this.pixelMatrix),!U)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=U,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const je=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(je,je,k),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=U;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSizeForFog,p=this.cameraPixelsPerMeter,_=this._camera.position,E=1/this.height/this._pixelsPerMercatorPixel,k=[c,c,p];o.scale$2(k,k,E),o.scale$2(_,_,-1),o.multiply$2(_,_,k);const L=o.create();o.translate(L,L,_),o.scale(L,L,k),this.mercatorFogMatrix=L,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,p,E)}_computeCameraPosition(c){const p=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),E=this.point,k=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*p-c/this.worldSize*this._centerAltitude;return[E.x/this.worldSize-_[0]*k,E.y/this.worldSize-_[1]*k,c/this.worldSize*this._centerAltitude-_[2]*k]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const p=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],E=c[2];let k=1;this.projection.wrap&&(this.center=this.center.wrap()),E>0&&(k=Math.min((p-_)/E,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,c,k),this._updateStateFromCamera()}_updateStateFromCamera(){const c=this._camera.position,p=this._camera.forward(),{pitch:_,bearing:E}=this._camera.getPitchBearing(),k=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,L=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),U=Math.max((c[2]-k)/Math.cos(_),L),G=this._zoomFromMercatorZ(U);o.scaleAndAdd(c,c,p,U),this._pitch=o.clamp(_,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(E,-Math.PI,Math.PI),this._setZoom(o.clamp(G,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}zoomFromMercatorZAdjusted(c){let p=0,_=o.GLOBE_ZOOM_THRESHOLD_MAX,E=0,k=1/0;for(;_-p>1e-6&&_>p;){const L=p+.5*(_-p),U=this.tileSize*Math.pow(2,L),G=this.getCameraToCenterDistance(this.projection,L,U),K=this.scaleZoom(G/(c*this.tileSize)),X=Math.abs(L-K);X<k&&(k=X,E=L),L<K?p=L:_=L}return E}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,p){const _=Math.min(c.x,p.x),E=Math.max(c.x,p.x),k=Math.min(c.y,p.y),L=Math.max(c.y,p.y);if(k<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const U=[new o.pointGeometry(_,k),new o.pointGeometry(E,L),new o.pointGeometry(_,L),new o.pointGeometry(E,k)],G=this.renderWorldCopies?-3:0,K=this.renderWorldCopies?4:1;for(const X of U){const ee=this.pointRayIntersection(X);if(ee.t<0)return!0;const ue=this.rayIntersectionCoordinate(ee);if(ue.x<G||ue.y<0||ue.x>K||ue.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(c,p){const _=o.length(o.sub([],this._camera.position,c)),E=this._zoomFromMercatorZ(_)+p;return _-this._mercatorZfromZoom(E)}getCameraPoint(){if(this.projection.name==="globe"){const c=function([p,_,E],k){const L=[p,_,E,1];o.transformMat4$1(L,L,k);const U=L[3]=Math.max(L[3],1e-6);return L[0]/=U,L[1]/=U,L[2]/=U,L}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,c))}}getCameraToCenterDistance(c,p=this.zoom,_=this.worldSize){const E=Cl(c,p,this.width,this.height,1024),k=c.pixelSpaceConversion(this.center.lat,_,E);return .5/Math.tan(.5*this._fov)*this.height*k}getWorldToCameraMatrix(){const c=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(c,c,this.globeMatrix),c}}function ra(v,c){let p=!1,_=null;const E=()=>{_=null,p&&(v(),_=setTimeout(E,c),p=!1)};return()=>(p=!0,_||E(),_)}class Qv{constructor(c){this._hashName=c&&encodeURIComponent(c),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ra(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,o.window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const p=Vf(c);if(this._hashName){const _=this._hashName;let E=!1;const k=o.window.location.hash.slice(1).split("&").map(L=>{const U=L.split("=")[0];return U===_?(E=!0,`${U}=${p}`):L}).filter(L=>L);return E||k.push(`${_}=${p}`),`#${k.join("&")}`}return`#${p}`}_getCurrentHash(){const c=o.window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(p=_)}),(p&&p[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const p=this._getCurrentHash();if(p.length>=3&&!p.some(_=>isNaN(_))){const _=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(p[3]||0):c.getBearing();return c.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:_,pitch:+(p[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,c)}}function Vf(v,c){const p=v.getCenter(),_=Math.round(100*v.getZoom())/100,E=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,E),L=Math.round(p.lng*k)/k,U=Math.round(p.lat*k)/k,G=v.getBearing(),K=v.getPitch();let X=c?`/${L}/${U}/${_}`:`${_}/${U}/${L}`;return(G||K)&&(X+="/"+Math.round(10*G)/10),K&&(X+=`/${Math.round(K)}`),X}const Bu={linearity:.3,easing:o.bezier(0,0,.3,1)},_c=o.extend({deceleration:2500,maxSpeed:1400},Bu),ey=o.extend({deceleration:20,maxSpeed:1400},Bu),gh=o.extend({deceleration:1e3,maxSpeed:360},Bu),Hf=o.extend({deceleration:1e3,maxSpeed:90},Bu);class vh{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,p=o.exported.now();for(;c.length>0&&p-c[0].time>160;)c.shift()}_onMoveEnd(c){if(o.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const p={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)p.zoom+=k.zoomDelta||0,p.bearing+=k.bearingDelta||0,p.pitch+=k.pitchDelta||0,k.panDelta&&p.pan._add(k.panDelta),k.around&&(p.around=k.around),k.pinchAround&&(p.pinchAround=k.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(p.pan.mag()){const k=Nu(p.pan.mag(),_,o.extend({},_c,c||{}));E.offset=p.pan.mult(k.amount/p.pan.mag()),E.center=this._map.transform.center,Fu(E,k)}if(p.zoom){const k=Nu(p.zoom,_,ey);E.zoom=this._map.transform.zoom+k.amount,Fu(E,k)}if(p.bearing){const k=Nu(p.bearing,_,gh);E.bearing=this._map.transform.bearing+o.clamp(k.amount,-179,179),Fu(E,k)}if(p.pitch){const k=Nu(p.pitch,_,Hf);E.pitch=this._map.transform.pitch+k.amount,Fu(E,k)}if(E.zoom||E.bearing){const k=p.pinchAround===void 0?p.around:p.pinchAround;E.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),E.noMoveStart=!0,E}}function Fu(v,c){(!v.duration||v.duration<c.duration)&&(v.duration=c.duration,v.easing=c.easing)}function Nu(v,c,p){const{maxSpeed:_,linearity:E,deceleration:k}=p,L=o.clamp(v*E/(c/1e3),-_,_),U=Math.abs(L)/(k*E);return{easing:p.easing,duration:1e3*U,amount:L*(U/2)}}class Hi extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,p,_,E={}){const k=S(p.getCanvasContainer(),_),L=p.unproject(k);super(c,o.extend({point:k,lngLat:L,originalEvent:_},E)),this._defaultPrevented=!1,this.target=p}}class yh extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,p,_){const E=c==="touchend"?_.changedTouches:_.touches,k=w(p.getCanvasContainer(),E),L=k.map(G=>p.unproject(G)),U=k.reduce((G,K,X,ee)=>G.add(K.div(ee.length)),new o.pointGeometry(0,0));super(c,{points:k,point:U,lngLats:L,lngLat:p.unproject(U),originalEvent:_}),this._defaultPrevented=!1}}class qb extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,p,_){super(c,{originalEvent:_}),this._defaultPrevented=!1}}class ty{constructor(c,p){this._map=c,this._clickTolerance=p.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new qb(c.type,this._map,c))}mousedown(c,p){return this._mousedownPos=p,this._firePreventable(new Hi(c.type,this._map,c))}mouseup(c){this._map.fire(new Hi(c.type,this._map,c))}preclick(c){const p=o.extend({},c);p.type="preclick",this._map.fire(new Hi(p.type,this._map,p))}click(c,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||(this.preclick(c),this._map.fire(new Hi(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new Hi(c.type,this._map,c))}mouseover(c){this._map.fire(new Hi(c.type,this._map,c))}mouseout(c){this._map.fire(new Hi(c.type,this._map,c))}touchstart(c){return this._firePreventable(new yh(c.type,this._map,c))}touchmove(c){this._map.fire(new yh(c.type,this._map,c))}touchend(c){this._map.fire(new yh(c.type,this._map,c))}touchcancel(c){this._map.fire(new yh(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _h{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new Hi(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Hi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new Hi(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wf{constructor(c,p){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,p){this.isEnabled()&&c.shiftKey&&c.button===0&&(j(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(c,p){if(!this._active)return;const _=p,E=this._startPos,k=this._lastPos;if(!E||!k||k.equals(_)||!this._box&&_.dist(E)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=z("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const L=Math.min(E.x,_.x),U=Math.max(E.x,_.x),G=Math.min(E.y,_.y),K=Math.max(E.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${L}px,${G}px)`,this._box.style.width=U-L+"px",this._box.style.height=K-G+"px")})}mouseupWindow(c,p){if(!this._active)return;const _=this._startPos,E=p;if(_&&c.button===0){if(this.reset(),O(),_.x!==E.x||_.y!==E.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:k=>k.fitScreenCoordinates(_,E,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),W(),delete this._startPos,delete this._lastPos}_fireEvent(c,p){return this._map.fire(new o.Event(c,{originalEvent:p}))}}function xh(v,c){const p={};for(let _=0;_<v.length;_++)p[v[_].identifier]=c[_];return p}class ny{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,p,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),_.length===this.numTouches&&(this.centroid=function(E){const k=new o.pointGeometry(0,0);for(const L of E)k._add(L);return k.div(E.length)}(p),this.touches=xh(_,p)))}touchmove(c,p,_){if(this.aborted||!this.centroid)return;const E=xh(_,p);for(const k in this.touches){const L=this.touches[k],U=E[k];(!U||U.dist(L)>30)&&(this.aborted=!0)}}touchend(c,p,_){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class xc{constructor(c){this.singleTap=new ny(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,p,_){this.singleTap.touchstart(c,p,_)}touchmove(c,p,_){this.singleTap.touchmove(c,p,_)}touchend(c,p,_){const E=this.singleTap.touchend(c,p,_);if(E){const k=c.timeStamp-this.lastTime<500,L=!this.lastTap||this.lastTap.dist(E)<30;if(k&&L||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class Gf{constructor(){this._zoomIn=new xc({numTouches:1,numTaps:2}),this._zoomOut=new xc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,p,_){this._zoomIn.touchstart(c,p,_),this._zoomOut.touchstart(c,p,_)}touchmove(c,p,_){this._zoomIn.touchmove(c,p,_),this._zoomOut.touchmove(c,p,_)}touchend(c,p,_){const E=this._zoomIn.touchend(c,p,_),k=this._zoomOut.touchend(c,p,_);return E?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()+1,around:L.unproject(E)},{originalEvent:c})}):k?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()-1,around:L.unproject(k)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ry={0:1,2:2};class bh{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,p){return!1}_move(c,p){return{}}mousedown(c,p){if(this._lastPoint)return;const _=P(c);this._correctButton(c,_)&&(this._lastPoint=p,this._eventButton=_)}mousemoveWindow(c,p){const _=this._lastPoint;if(_){if(c.preventDefault(),this._eventButton!=null&&function(E,k){const L=ry[k];return E.buttons===void 0||(E.buttons&L)!==L}(c,this._eventButton))this.reset();else if(this._moved||!(p.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(_,p)}}mouseupWindow(c){this._lastPoint&&P(c)===this._eventButton&&(this._moved&&O(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class iy extends bh{mousedown(c,p){super.mousedown(c,p),this._lastPoint&&(this._active=!0)}_correctButton(c,p){return p===0&&!c.ctrlKey}_move(c,p){return{around:p,panDelta:p.sub(c)}}}class qf extends bh{_correctButton(c,p){return p===0&&c.ctrlKey||p===2}_move(c,p){const _=.8*(p.x-c.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(c){c.preventDefault()}}class Zf extends bh{_correctButton(c,p){return p===0&&c.ctrlKey||p===2}_move(c,p){const _=-.5*(p.y-c.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(c){c.preventDefault()}}class bc{constructor(c,p){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(c,p,_){return this._calculateTransform(c,p,_)}touchmove(c,p,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,p,_)}}touchend(c,p,_){this._calculateTransform(c,p,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,p,_){_.length>0&&(this._active=!0);const E=xh(_,p),k=new o.pointGeometry(0,0),L=new o.pointGeometry(0,0);let U=0;for(const K in E){const X=E[K],ee=this._touches[K];ee&&(k._add(X),L._add(X.sub(ee)),U++,E[K]=X)}if(this._touches=E,U<this._minTouches||!L.mag())return;const G=L.div(U);return this._sum._add(G),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(U),panDelta:G}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=z("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class wh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,p,_){return{}}touchstart(c,p,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([p[0],p[1]]))}touchmove(c,p,_){const E=this._firstTwoTouches;if(!E)return;c.preventDefault();const[k,L]=E,U=Uu(_,p,k),G=Uu(_,p,L);if(!U||!G)return;const K=this._aroundCenter?null:U.add(G).div(2);return this._move([U,G],K,c)}touchend(c,p,_){if(!this._firstTwoTouches)return;const[E,k]=this._firstTwoTouches,L=Uu(_,p,E),U=Uu(_,p,k);L&&U||(this._active&&O(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Uu(v,c,p){for(let _=0;_<v.length;_++)if(v[_].identifier===p)return c[_]}function oy(v,c){return Math.log(v/c)/Math.LN2}class ay extends wh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,p){const _=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(oy(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:oy(this._distance,_),pinchAround:p}}}function Xf(v,c){return 180*v.angleWith(c)/Math.PI}class sy extends wh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,p){const _=this._vector;if(this._vector=c[0].sub(c[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Xf(this._vector,_),pinchAround:p}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const p=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const E=Xf(c,_);return Math.abs(E)<p}}function Eh(v){return Math.abs(v.y)>Math.abs(v.x)}class ao extends wh{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,Eh(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,p,_){const E=this._lastPoints;if(!E)return;const k=c[0].sub(E[0]),L=c[1].sub(E[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(k,L,_.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(k.y+L.y)/2*-.5})}gestureBeginsVertically(c,p,_){if(this._valid!==void 0)return this._valid;const E=c.mag()>=2,k=p.mag()>=2;if(!E&&!k)return;if(!E||!k)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const L=c.y>0==p.y>0;return Eh(c)&&Eh(p)&&L}}const Zb={panStep:100,bearingStep:15,pitchStep:10};class ly{constructor(){const c=Zb;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let p=0,_=0,E=0,k=0,L=0;switch(c.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:c.shiftKey?_=-1:(c.preventDefault(),k=-1);break;case 39:c.shiftKey?_=1:(c.preventDefault(),k=1);break;case 38:c.shiftKey?E=1:(c.preventDefault(),L=-1);break;case 40:c.shiftKey?E=-1:(c.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(_=0,E=0),{cameraAnimation:U=>{const G=U.getZoom();U.easeTo({duration:300,easeId:"keyboardHandler",easing:Xb,zoom:p?Math.round(G)+p*(c.shiftKey?2:1):G,bearing:U.getBearing()+_*this._bearingStep,pitch:U.getPitch()+E*this._pitchStep,offset:[-k*this._panStep,-L*this._panStep],center:U.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xb(v){return v*(2-v)}const cy=4.000244140625;class vs{constructor(c,p){this._map=c,this._el=c.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let p=c.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const _=o.exported.now(),E=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,p!==0&&p%cy==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(E*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),c.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=c,this._delta-=p,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=S(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:p,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform;this._type==="wheel"&&c.projection.wrap&&(c._center.lng>=180||c._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const p=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const G=this._type==="wheel"&&Math.abs(this._delta)>cy?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&K!==0&&(K=1/K);const X=p(),ee=Math.pow(2,X),ue=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):ee;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(ue*K))),this._type==="wheel"&&(this._startZoom=X,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:p(),E=this._startZoom,k=this._easing;let L,U=!1;if(this._type==="wheel"&&E&&k){const G=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),K=k(G);L=o.number(E,_,K),G<1?this._frameId||(this._frameId=!0):U=!0}else L=_,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!U,zoomDelta:L-p(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let p=o.ease;if(this._prevEase){const _=this._prevEase,E=(o.exported.now()-_.start)/_.duration,k=_.easing(E+.01)-_.easing(E),L=.27/Math.sqrt(k*k+1e-4)*.01,U=Math.sqrt(.0729-L*L);p=o.bezier(L,U,.25,1)}return this._prevEase={start:o.exported.now(),duration:c,easing:p},p}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=z("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class uy{constructor(c,p){this._clickZoom=c,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class wc{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,p){return c.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(c.shiftKey?-1:1),around:_.unproject(p)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Va{constructor(){this._tap=new xc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,p,_){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=p[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(c,p,_))}touchmove(c,p,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const E=p[0],k=E.y-this._swipePoint.y;return this._swipePoint=E,c.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(c,p,_)}touchend(c,p,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(c,p,_)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ch{constructor(c,p,_){this._el=c,this._mousePan=p,this._touchPan=_}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class an{constructor(c,p,_){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=p,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class dy{constructor(c,p,_,E){this._el=c,this._touchZoom=p,this._touchRotate=_,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ju=v=>v.zoom||v.drag||v.pitch||v.rotate;class $u extends o.Event{}class Vu{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,p){const _=o.sub([],p,c);this.radius=o.length(_[2]<0?o.div([],_,this.constants):[_[0],_[1],0])}projectRay(c){o.div(c,c,this.constants),o.normalize(c,c),o.mul$1(c,c,this.constants);const p=o.scale$2([],c,this.radius);if(p[2]>0){const _=o.scale$2([],[0,0,1],o.dot(p,[0,0,1])),E=o.scale$2([],o.normalize([],[p[0],p[1],0]),this.radius),k=o.add([],p,o.scale$2([],o.sub([],o.add([],E,_),p),2));p[0]=k[0],p[1]=k[1]}return p}}function Hu(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class hy{constructor(c,p){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vh(c),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Vu,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[E,k,L]of this._listeners)E.addEventListener(k,E===o.window.document?this.handleWindowEvent:this.handleEvent,L)}destroy(){for(const[c,p,_]of this._listeners)c.removeEventListener(p,c===o.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(c){const p=this._map,_=p.getCanvasContainer();this._add("mapEvent",new ty(p,c));const E=p.boxZoom=new Wf(p,c);this._add("boxZoom",E);const k=new Gf,L=new wc;p.doubleClickZoom=new uy(L,k),this._add("tapZoom",k),this._add("clickZoom",L);const U=new Va;this._add("tapDragZoom",U);const G=p.touchPitch=new ao(p);this._add("touchPitch",G);const K=new qf(c),X=new Zf(c);p.dragRotate=new an(c,K,X),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]);const ee=new iy(c),ue=new bc(p,c);p.dragPan=new Ch(_,ee,ue),this._add("mousePan",ee),this._add("touchPan",ue,["touchZoom","touchRotate"]);const he=new sy,me=new ay;p.touchZoomRotate=new dy(_,me,he,U),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),this._add("blockableMapEvent",new _h(p));const ge=p.scrollZoom=new vs(p,this);this._add("scrollZoom",ge,["mousePan"]);const ye=p.keyboard=new ly;this._add("keyboard",ye);for(const le of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[le]&&p[le].enable(c[le])}_add(c,p,_){this._handlers.push({handlerName:c,handler:p,allowed:_}),this._handlersById[c]=p}stop(c){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ju(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(c,p,_){for(const E in c)if(E!==_&&(!p||p.indexOf(E)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const p=[];for(const _ of c)this._el.contains(_.target)&&p.push(_);return p}handleEvent(c,p){this._updatingCamera=!0;const _=c.type==="renderFrame",E=_?void 0:c,k={needsRenderFrame:!1},L={},U={},G=c.touches?this._getMapTouches(c.touches):void 0,K=G?w(this._el,G):_?void 0:S(this._el,c);for(const{handlerName:ue,handler:he,allowed:me}of this._handlers){if(!he.isEnabled())continue;let ge;this._blockedByActive(U,me,ue)?he.reset():he[p||c.type]&&(ge=he[p||c.type](c,K,G),this.mergeHandlerResult(k,L,ge,ue,E),ge&&ge.needsRenderFrame&&this._triggerRenderFrame()),(ge||he.isActive())&&(U[ue]=he)}const X={};for(const ue in this._previousActiveHandlers)U[ue]||(X[ue]=E);this._previousActiveHandlers=U,(Object.keys(X).length||Hu(k))&&(this._changes.push([k,L,X]),this._triggerRenderFrame()),(Object.keys(U).length||Hu(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ee}=k;ee&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ee(this._map))}mergeHandlerResult(c,p,_,E,k){if(!_)return;o.extend(c,_);const L={handlerName:E,originalEvent:_.originalEvent||k};_.zoomDelta!==void 0&&(p.zoom=L),_.panDelta!==void 0&&(p.drag=L),_.pitchDelta!==void 0&&(p.pitch=L),_.bearingDelta!==void 0&&(p.rotate=L)}_applyChanges(){const c={},p={},_={};for(const[E,k,L]of this._changes)E.panDelta&&(c.panDelta=(c.panDelta||new o.pointGeometry(0,0))._add(E.panDelta)),E.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(c.around=E.around),E.aroundCoord!==void 0&&(c.aroundCoord=E.aroundCoord),E.pinchAround!==void 0&&(c.pinchAround=E.pinchAround),E.noInertia&&(c.noInertia=E.noInertia),o.extend(p,k),o.extend(_,L);this._updateMapTransform(c,p,_),this._changes=[]}_updateMapTransform(c,p,_){const E=this._map,k=E.transform,L=Te=>[Te.x,Te.y,Te.z];if((Te=>{const ke=this._eventsInProgress.drag;return ke&&!this._handlersById[ke.handlerName].isActive()})()&&!Hu(c)){const Te=k.zoom;k.cameraElevationReference="sea",k.recenterOnTerrain(),k.cameraElevationReference="ground",Te!==k.zoom&&this._map._update(!0)}if(k._isCameraConstrained&&E._stop(!0),!Hu(c))return void this._fireEvents(p,_,!0);let{panDelta:U,zoomDelta:G,bearingDelta:K,pitchDelta:X,around:ee,aroundCoord:ue,pinchAround:he}=c;k._isCameraConstrained&&(G>0&&(G=0),k._isCameraConstrained=!1),he!==void 0&&(ee=he),(G||(Te=>p.drag&&!this._eventsInProgress.drag)())&&ee&&(this._dragOrigin=L(k.pointCoordinate3D(ee)),this._trackingEllipsoid.setup(k._camera.position,this._dragOrigin)),k.cameraElevationReference="sea",E._stop(!0),ee=ee||E.transform.centerPoint,K&&(k.bearing+=K),X&&(k.pitch+=X),k._updateCameraState();const me=[0,0,0];if(U)if(k.projection.name==="mercator"){const Te=this._trackingEllipsoid.projectRay(k.screenPointToMercatorRay(ee).dir),ke=this._trackingEllipsoid.projectRay(k.screenPointToMercatorRay(ee.sub(U)).dir);me[0]=ke[0]-Te[0],me[1]=ke[1]-Te[1]}else{const Te=k.pointCoordinate(ee);if(k.projection.name==="globe"){U=U.rotate(-k.angle);const ke=k._pixelsPerMercatorPixel/k.worldSize;me[0]=-U.x*o.mercatorScale(o.latFromMercatorY(Te.y))*ke,me[1]=-U.y*o.mercatorScale(k.center.lat)*ke}else{const ke=k.pointCoordinate(ee.sub(U));Te&&ke&&(me[0]=ke.x-Te.x,me[1]=ke.y-Te.y)}}const ge=k.zoom,ye=[0,0,0];if(G){const Te=L(ue||k.pointCoordinate3D(ee)),ke={dir:o.normalize([],o.sub([],Te,k._camera.position))};if(ke.dir[2]<0){const De=k.zoomDeltaToMovement(Te,G);o.scale$2(ye,ke.dir,De)}}const le=o.add(me,me,ye);k._translateCameraConstrained(le),G&&Math.abs(k.zoom-ge)>1e-4&&k.recenterOnTerrain(),k.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(p,_,!0)}_fireEvents(c,p,_){const E=ju(this._eventsInProgress),k=ju(c),L={};for(const X in c){const{originalEvent:ee}=c[X];this._eventsInProgress[X]||(L[`${X}start`]=ee),this._eventsInProgress[X]=c[X]}!E&&k&&this._fireEvent("movestart",k.originalEvent);for(const X in L)this._fireEvent(X,L[X]);k&&this._fireEvent("move",k.originalEvent);for(const X in c){const{originalEvent:ee}=c[X];this._fireEvent(X,ee)}const U={};let G;for(const X in this._eventsInProgress){const{handlerName:ee,originalEvent:ue}=this._eventsInProgress[X];this._handlersById[ee].isActive()||(delete this._eventsInProgress[X],G=p[ee]||ue,U[`${X}end`]=G)}for(const X in U)this._fireEvent(X,U[X]);const K=ju(this._eventsInProgress);if(_&&(E||k)&&!K){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=ue=>ue!==0&&-this._bearingSnap<ue&&ue<this._bearingSnap;X?(ee(X.bearing||this._map.getBearing())&&(X.bearing=0),this._map.easeTo(X,{originalEvent:G})):(this._map.fire(new o.Event("moveend",{originalEvent:G})),ee(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,p){this._map.fire(new o.Event(c,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new $u("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Kf="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class py extends o.Evented{constructor(c,p){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=p.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,p){return this.jumpTo({center:c},p)}panBy(c,p,_){return c=o.pointGeometry.convert(c).mult(-1),this.panTo(this.transform.center,o.extend({offset:c},p),_)}panTo(c,p,_){return this.easeTo(o.extend({center:c},p),_)}getZoom(){return this.transform.zoom}setZoom(c,p){return this.jumpTo({zoom:c},p),this}zoomTo(c,p,_){return this.easeTo(o.extend({zoom:c},p),_)}zoomIn(c,p){return this.zoomTo(this.getZoom()+1,c,p),this}zoomOut(c,p){return this.zoomTo(this.getZoom()-1,c,p),this}getBearing(){return this.transform.bearing}setBearing(c,p){return this.jumpTo({bearing:c},p),this}getPadding(){return this.transform.padding}setPadding(c,p){return this.jumpTo({padding:c},p),this}rotateTo(c,p,_){return this.easeTo(o.extend({bearing:c},p),_)}resetNorth(c,p){return this.rotateTo(0,o.extend({duration:1e3},c),p),this}resetNorthPitch(c,p){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},c),p),this}snapToNorth(c,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,p):this}getPitch(){return this.transform.pitch}setPitch(c,p){return this.jumpTo({pitch:c},p),this}cameraForBounds(c,p){c=o.LngLatBounds.convert(c);const _=p&&p.bearing||0,E=p&&p.pitch||0,k=c.getNorthWest(),L=c.getSouthEast();return this._cameraForBounds(this.transform,k,L,_,E,p)}_extendCameraOptions(c){const p={top:0,bottom:0,right:0,left:0};if(typeof(c=o.extend({padding:p,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=="number"){const _=c.padding;c.padding={top:_,bottom:_,right:_,left:_}}return c.padding=o.extend(p,c.padding),c}_minimumAABBFrustumDistance(c,p){const _=p.max[0]-p.min[0],E=p.max[1]-p.min[1];return _/E>c.aspect?_/(2*Math.tan(.5*c.fovX)*c.aspect):E/(2*Math.tan(.5*c.fovY)*c.aspect)}_cameraForBoundsOnGlobe(c,p,_,E,k,L){const U=c.clone(),G=this._extendCameraOptions(L);U.bearing=E,U.pitch=k;const K=o.LngLat.convert(p),X=o.LngLat.convert(_),ee=.5*(K.lat+X.lat),ue=.5*(K.lng+X.lng),he=o.latLngToECEF(ee,ue),me=o.normalize([],he),ge=o.normalize([],o.cross([],me,[0,1,0])),ye=o.cross([],ge,me),le=[ge[0],ge[1],ge[2],0,ye[0],ye[1],ye[2],0,me[0],me[1],me[2],0,0,0,0,1],Te=[he,o.latLngToECEF(K.lat,K.lng),o.latLngToECEF(X.lat,K.lng),o.latLngToECEF(X.lat,X.lng),o.latLngToECEF(K.lat,X.lng),o.latLngToECEF(ee,K.lng),o.latLngToECEF(ee,X.lng),o.latLngToECEF(K.lat,ue),o.latLngToECEF(X.lat,ue)];let ke=o.Aabb.fromPoints(Te.map(Dt=>[o.dot(ge,Dt),o.dot(ye,Dt),o.dot(me,Dt)]));const De=o.transformMat4([],ke.center,le);o.squaredLength(De)===0&&o.set(De,0,0,1),o.normalize(De,De),o.scale$2(De,De,o.GLOBE_RADIUS),U.center=o.ecefToLatLng(De);const He=U.getWorldToCameraMatrix(),je=o.invert(new Float64Array(16),He);ke=o.Aabb.applyTransform(ke,o.multiply([],He,le)),o.transformMat4(De,De,He);const Ge=.5*(ke.max[2]-ke.min[2]),et=this._minimumAABBFrustumDistance(U,ke),it=o.scale$2([],[0,0,1],Ge),lt=o.add(it,De,it),jt=et+(U.pitch===0?0:o.distance(De,lt)),tt=U.globeCenterInViewSpace,Mt=o.sub([],De,[tt[0],tt[1],tt[2]]);o.normalize(Mt,Mt),o.scale$2(Mt,Mt,jt);const vt=o.add([],De,Mt);o.transformMat4(vt,vt,je);const Rt=o.earthRadius/o.GLOBE_RADIUS,at=o.length(vt),Ye=o.mercatorZfromAltitude(Math.max(at*Rt-o.earthRadius,Number.EPSILON),0),ut=Math.min(U.zoomFromMercatorZAdjusted(Ye),G.maxZoom);return ut>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(U.setProjection({name:"mercator"}),U.zoom=ut,this._cameraForBounds(U,p,_,E,k,L)):{center:U.center,zoom:ut,bearing:E,pitch:k}}queryTerrainElevation(c,p){const _=this.transform.elevation;return _?(p=o.extend({},{exaggerated:!0},p),_.getAtPoint(o.MercatorCoordinate.fromLngLat(c),null,p.exaggerated)):null}_cameraForBounds(c,p,_,E,k,L){if(c.projection.name==="globe")return this._cameraForBoundsOnGlobe(c,p,_,E,k,L);const U=c.clone(),G=this._extendCameraOptions(L),K=U.padding;U.bearing=E,U.pitch=k;const X=o.LngLat.convert(p),ee=o.LngLat.convert(_),ue=new o.LngLat(X.lng,ee.lat),he=new o.LngLat(ee.lng,X.lat),me=U.project(X),ge=U.project(ee),ye=this.queryTerrainElevation(X),le=this.queryTerrainElevation(ee),Te=this.queryTerrainElevation(ue),ke=this.queryTerrainElevation(he),De=[[me.x,me.y,Math.min(ye||0,le||0,Te||0,ke||0)],[ge.x,ge.y,Math.max(ye||0,le||0,Te||0,ke||0)]];let He=o.Aabb.fromPoints(De);const je=U.getWorldToCameraMatrix(),Ge=o.invert(new Float64Array(16),je);He=o.Aabb.applyTransform(He,je);const et=o.sub([],He.max,He.min),it=K.left||0,lt=K.right||0,jt=K.bottom||0,tt=K.top||0,{left:Mt,right:vt,top:Rt,bottom:at}=G.padding,Ye=.5*(it+lt),ut=.5*(tt+jt),Dt=Math.min(U.scaleZoom(U.scale*Math.min((U.width-(it+lt+Mt+vt))/et[0],(U.height-(jt+tt+at+Rt))/et[1])),G.maxZoom),Ot=U.scale/U.zoomScale(Dt);He=new o.Aabb([He.min[0]-(Mt+Ye)*Ot,He.min[1]-(at+ut)*Ot,He.min[2]],[He.max[0]+(vt+Ye)*Ot,He.max[1]+(Rt+ut)*Ot,He.max[2]]);const dn=.5*et[2],Un=this._minimumAABBFrustumDistance(U,He),sn=[0,0,1,0];o.transformMat4$1(sn,sn,je),o.normalize$2(sn,sn);const en=o.scale$2([],sn,Un+dn),hn=o.add([],He.center,en),Wn=(typeof G.offset.x=="number"&&typeof G.offset.y=="number"?new o.pointGeometry(G.offset.x,G.offset.y):o.pointGeometry.convert(G.offset)).rotate(-o.degToRad(E));He.center[0]-=Wn.x*Ot,He.center[1]+=Wn.y*Ot,o.transformMat4(He.center,He.center,Ge),o.transformMat4(hn,hn,Ge);const gn=[He.center[0],He.center[1],hn[2]*U.pixelsPerMeter];o.scale$2(gn,gn,1/U.worldSize);const lr=o.lngFromMercatorX(gn[0]),pr=o.latFromMercatorY(gn[1]),Rr=Math.min(U._zoomFromMercatorZ(gn[2]),G.maxZoom),kr=new o.LngLat(lr,pr);return U.mercatorFromTransition&&Rr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(U.setProjection({name:"globe"}),U.zoom=Rr,this._cameraForBounds(U,p,_,E,k,L)):{center:kr,zoom:Rr,bearing:E,pitch:k}}fitBounds(c,p,_){const E=this.cameraForBounds(c,p);return this._fitInternal(E,p,_)}fitScreenCoordinates(c,p,_,E,k){const L=o.pointGeometry.convert(c),U=o.pointGeometry.convert(p),G=new o.pointGeometry(Math.min(L.x,U.x),Math.min(L.y,U.y)),K=new o.pointGeometry(Math.max(L.x,U.x),Math.max(L.y,U.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(L,U))return this;const X=this.transform.pointLocation3D(G),ee=this.transform.pointLocation3D(K),ue=this.transform.pointLocation3D(new o.pointGeometry(G.x,K.y)),he=this.transform.pointLocation3D(new o.pointGeometry(K.x,G.y)),me=[Math.min(X.lng,ee.lng,ue.lng,he.lng),Math.min(X.lat,ee.lat,ue.lat,he.lat)],ge=[Math.max(X.lng,ee.lng,ue.lng,he.lng),Math.max(X.lat,ee.lat,ue.lat,he.lat)],ye=E&&E.pitch?E.pitch:this.getPitch(),le=this._cameraForBounds(this.transform,me,ge,_,ye,E);return this._fitInternal(le,E,k)}_fitInternal(c,p,_){return c?(delete(p=o.extend(c,p)).padding,p.linear?this.easeTo(p,_):this.flyTo(p,_)):this}jumpTo(c,p){this.stop();const _=c.preloadOnly?this.transform.clone():this.transform;let E=!1,k=!1,L=!1;return"zoom"in c&&_.zoom!==+c.zoom&&(E=!0,_.zoom=+c.zoom),c.center!==void 0&&(_.center=o.LngLat.convert(c.center)),"bearing"in c&&_.bearing!==+c.bearing&&(k=!0,_.bearing=+c.bearing),"pitch"in c&&_.pitch!==+c.pitch&&(L=!0,_.pitch=+c.pitch),c.padding==null||_.isPaddingEqual(c.padding)||(_.padding=c.padding),c.preloadOnly?(this._preloadTiles(_),this):(this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),E&&this.fire(new o.Event("zoomstart",p)).fire(new o.Event("zoom",p)).fire(new o.Event("zoomend",p)),k&&this.fire(new o.Event("rotatestart",p)).fire(new o.Event("rotate",p)).fire(new o.Event("rotateend",p)),L&&this.fire(new o.Event("pitchstart",p)).fire(new o.Event("pitch",p)).fire(new o.Event("pitchend",p)),this.fire(new o.Event("moveend",p)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Kf),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,p){const _=this.transform;if(!_.projection.supportsFreeCamera)return o.warnOnce(Kf),this;this.stop();const E=_.zoom,k=_.pitch,L=_.bearing;_.setFreeCameraOptions(c);const U=E!==_.zoom,G=k!==_.pitch,K=L!==_.bearing;return this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),U&&this.fire(new o.Event("zoomstart",p)).fire(new o.Event("zoom",p)).fire(new o.Event("zoomend",p)),K&&this.fire(new o.Event("rotatestart",p)).fire(new o.Event("rotate",p)).fire(new o.Event("rotateend",p)),G&&this.fire(new o.Event("pitchstart",p)).fire(new o.Event("pitch",p)).fire(new o.Event("pitchend",p)),this.fire(new o.Event("moveend",p)),this}easeTo(c,p){this._stop(!1,c.easeId),((c=o.extend({offset:[0,0],duration:500,easing:o.ease},c)).animate===!1||!c.essential&&o.exported.prefersReducedMotion)&&(c.duration=0);const _=this.transform,E=this.getZoom(),k=this.getBearing(),L=this.getPitch(),U=this.getPadding(),G="zoom"in c?+c.zoom:E,K="bearing"in c?this._normalizeBearing(c.bearing,k):k,X="pitch"in c?+c.pitch:L,ee="padding"in c?c.padding:_.padding,ue=o.pointGeometry.convert(c.offset);let he,me,ge;if(_.projection.name==="globe"){const it=o.MercatorCoordinate.fromLngLat(_.center),lt=ue.rotate(-_.angle);it.x+=lt.x/_.worldSize,it.y+=lt.y/_.worldSize;const jt=it.toLngLat(),tt=o.LngLat.convert(c.center||jt);this._normalizeCenter(tt),he=_.centerPoint.add(lt),me=new o.pointGeometry(it.x,it.y).mult(_.worldSize),ge=new o.pointGeometry(o.mercatorXfromLng(tt.lng),o.mercatorYfromLat(tt.lat)).mult(_.worldSize).sub(me)}else{he=_.centerPoint.add(ue);const it=_.pointLocation(he),lt=o.LngLat.convert(c.center||it);this._normalizeCenter(lt),me=_.project(it),ge=_.project(lt).sub(me)}const ye=_.zoomScale(G-E);let le,Te;c.around&&(le=o.LngLat.convert(c.around),Te=_.locationPoint(le));const ke=this._zooming||G!==E,De=this._rotating||k!==K,He=this._pitching||X!==L,je=!_.isPaddingEqual(ee),Ge=it=>lt=>{if(ke&&(it.zoom=o.number(E,G,lt)),De&&(it.bearing=o.number(k,K,lt)),He&&(it.pitch=o.number(L,X,lt)),je&&(it.interpolatePadding(U,ee,lt),he=it.centerPoint.add(ue)),le)it.setLocationAtPoint(le,Te);else{const jt=it.zoomScale(it.zoom-E),tt=G>E?Math.min(2,ye):Math.max(.5,ye),Mt=Math.pow(tt,1-lt),vt=it.unproject(me.add(ge.mult(lt*Mt)).mult(jt));it.setLocationAtPoint(it.renderWorldCopies?vt.wrap():vt,he)}return c.preloadOnly||this._fireMoveEvents(p),it};if(c.preloadOnly){const it=this._emulate(Ge,c.duration,_);return this._preloadTiles(it),this}const et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ke,this._rotating=De,this._pitching=He,this._padding=je,this._easeId=c.easeId,this._prepareEase(p,c.noMoveStart,et),this._ease(Ge(_),it=>{_.recenterOnTerrain(),this._afterEase(p,it)},c),this}_prepareEase(c,p,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",p||_.moving||this.fire(new o.Event("movestart",c)),this._zooming&&!_.zooming&&this.fire(new o.Event("zoomstart",c)),this._rotating&&!_.rotating&&this.fire(new o.Event("rotatestart",c)),this._pitching&&!_.pitching&&this.fire(new o.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new o.Event("move",c)),this._zooming&&this.fire(new o.Event("zoom",c)),this._rotating&&this.fire(new o.Event("rotate",c)),this._pitching&&this.fire(new o.Event("pitch",c))}_afterEase(c,p){if(this._easeId&&p&&this._easeId===p)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,E=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new o.Event("zoomend",c)),E&&this.fire(new o.Event("rotateend",c)),k&&this.fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))}flyTo(c,p){if(!c.essential&&o.exported.prefersReducedMotion){const Dt=o.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Dt,p)}this.stop(),c=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},c);const _=this.transform,E=this.getZoom(),k=this.getBearing(),L=this.getPitch(),U=this.getPadding(),G="zoom"in c?o.clamp(+c.zoom,_.minZoom,_.maxZoom):E,K="bearing"in c?this._normalizeBearing(c.bearing,k):k,X="pitch"in c?+c.pitch:L,ee="padding"in c?c.padding:_.padding,ue=_.zoomScale(G-E),he=o.pointGeometry.convert(c.offset);let me=_.centerPoint.add(he);const ge=_.pointLocation(me),ye=o.LngLat.convert(c.center||ge);this._normalizeCenter(ye);const le=_.project(ge),Te=_.project(ye).sub(le);let ke=c.curve;const De=Math.max(_.width,_.height),He=De/ue,je=Te.mag();if("minZoom"in c){const Dt=o.clamp(Math.min(c.minZoom,E,G),_.minZoom,_.maxZoom),Ot=De/_.zoomScale(Dt-E);ke=Math.sqrt(Ot/je*2)}const Ge=ke*ke;function et(Dt){const Ot=(He*He-De*De+(Dt?-1:1)*Ge*Ge*je*je)/(2*(Dt?He:De)*Ge*je);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function it(Dt){return(Math.exp(Dt)-Math.exp(-Dt))/2}function lt(Dt){return(Math.exp(Dt)+Math.exp(-Dt))/2}const jt=et(0);let tt=function(Dt){return lt(jt)/lt(jt+ke*Dt)},Mt=function(Dt){return De*((lt(jt)*(it(Ot=jt+ke*Dt)/lt(Ot))-it(jt))/Ge)/je;var Ot},vt=(et(1)-jt)/ke;if(Math.abs(je)<1e-6||!isFinite(vt)){if(Math.abs(De-He)<1e-6)return this.easeTo(c,p);const Dt=He<De?-1:1;vt=Math.abs(Math.log(He/De))/ke,Mt=function(){return 0},tt=function(Ot){return Math.exp(Dt*ke*Ot)}}c.duration="duration"in c?+c.duration:1e3*vt/("screenSpeed"in c?+c.screenSpeed/ke:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const Rt=k!==K,at=X!==L,Ye=!_.isPaddingEqual(ee),ut=Dt=>Ot=>{const dn=Ot*vt,Un=1/tt(dn);Dt.zoom=Ot===1?G:E+Dt.scaleZoom(Un),Rt&&(Dt.bearing=o.number(k,K,Ot)),at&&(Dt.pitch=o.number(L,X,Ot)),Ye&&(Dt.interpolatePadding(U,ee,Ot),me=Dt.centerPoint.add(he));const sn=Ot===1?ye:Dt.unproject(le.add(Te.mult(Mt(dn))).mult(Un));return Dt.setLocationAtPoint(Dt.renderWorldCopies?sn.wrap():sn,me),Dt._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(p),Dt};if(c.preloadOnly){const Dt=this._emulate(ut,c.duration,_);return this._preloadTiles(Dt),this}return this._zooming=!0,this._rotating=Rt,this._pitching=at,this._padding=Ye,this._prepareEase(p,!1),this._ease(ut(_),()=>this._afterEase(p),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,p)}if(!c){const _=this.handlers;_&&_.stop(!1)}return this}_ease(c,p,_){_.animate===!1||_.duration===0?(c(1),p()):(this._easeStart=o.exported.now(),this._easeOptions=_,this._onEaseFrame=c,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),p=this._onEaseFrame;p&&p(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,p){c=o.wrap(c,-180,180);const _=Math.abs(c-p);return Math.abs(c-360-p)<_&&(c-=360),Math.abs(c+360-p)<_&&(c+=360),c}_normalizeCenter(c){const p=this.transform;if(!p.renderWorldCopies||p.maxBounds)return;const _=c.lng-p.center.lng;c.lng+=_>180?-360:_<-180?360:0}_emulate(c,p,_){const E=Math.ceil(15*p/1e3),k=[],L=c(_.clone());for(let U=0;U<=E;U++){const G=L(U/E);k.push(G.clone())}return k}}class Yf{constructor(c={}){this.options=c,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const p=this.options&&this.options.compact;return this._map=c,this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=z("button","mapboxgl-ctrl-attrib-button",this._container),z("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=z("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,p){const _=this._map._getUIString(`AttributionControl.${p}`);c.setAttribute("aria-label",_),c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(c){const _=p.reduce((E,k,L)=>(k.value&&(E+=`${k.key}=${k.value}${L<p.length-1?"&":""}`),E),"?");c.href=`${o.config.FEEDBACK_URL}/${_}#${Vf(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const p=this._map.style._sourceCaches;for(const E in p){const k=p[E];if(k.used){const L=k.getSource();L.attribution&&c.indexOf(L.attribution)<0&&c.push(L.attribution)}}c.sort((E,k)=>E.length-k.length),c=c.filter((E,k)=>{for(let L=k+1;L<c.length;L++)if(c[L].indexOf(E)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const _=c.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,c.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Jf{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=z("div","mapboxgl-ctrl");const p=z("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const p in c){const _=c[p].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}}}class Wu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const p=++this._id;return this._queue.push({callback:c,id:p,cancelled:!1}),p}remove(c){const p=this._currentlyRunning,_=p?this._queue.concat(p):this._queue;for(const E of _)if(E.id===c)return void(E.cancelled=!0)}run(c=0){const p=this._currentlyRunning=this._queue;this._queue=[];for(const _ of p)if(!_.cancelled&&(_.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Sh(v,c,p){if(v=new o.LngLat(v.lng,v.lat),c){const _=new o.LngLat(v.lng-360,v.lat),E=new o.LngLat(v.lng+360,v.lat),k=360*Math.ceil(Math.abs(v.lng-p.center.lng)/360),L=p.locationPoint(v).distSqr(c),U=c.x<0||c.y<0||c.x>p.width||c.y>p.height;p.locationPoint(_).distSqr(c)<L&&(U||Math.abs(_.lng-p.center.lng)<k)?v=_:p.locationPoint(E).distSqr(c)<L&&(U||Math.abs(E.lng-p.center.lng)<k)&&(v=E)}for(;Math.abs(v.lng-p.center.lng)>180;){const _=p.locationPoint(v);if(_.x>=0&&_.y>=0&&_.x<=p.width&&_.y<=p.height)break;v.lng>p.center.lng?v.lng-=360:v.lng+=360}return v}const Ec={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class kh extends o.Evented{constructor(c,p){if(super(),(c instanceof o.window.HTMLElement||p)&&(c=o.extend({element:c},p)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=c&&c.occludedOpacity||.2,c&&c.element)this._element=c.element,this._offset=o.pointGeometry.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=z("div");const E=41,k=27,L=F("svg",{display:"block",height:E*this._scale+"px",width:k*this._scale+"px",viewBox:`0 0 ${k} ${E}`},this._element),U=F("radialGradient",{id:"shadowGradient"},F("defs",{},L));F("stop",{offset:"10%","stop-opacity":.4},U),F("stop",{offset:"100%","stop-opacity":.05},U),F("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},L),F("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},L),F("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},L),F("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},L),this._offset=o.pointGeometry.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",E=>{E.preventDefault()}),this._element.addEventListener("mousedown",E=>{E.preventDefault()});const _=this._element.classList;for(const E in Ec)_.remove(`mapboxgl-marker-anchor-${E}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const E=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const p=c.code,_=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(c){const p=c.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map,p=this._pos;if(!c||!p)return!1;const _=c.unproject(p),E=c.getFreeCameraOptions();if(!E.position)return!1;const k=E.position.toLngLat();return k.distanceTo(_)<.9*k.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const p=this._pos;if(!p||p.x<0||p.x>c.transform.width||p.y<0||p.y>c.transform.height)return void this._clearFadeTimer();const _=c.unproject(p);let E;c._showingGlobe()&&o.isLngLatBehindGlobe(c.transform,this._lngLat)?E=0:(E=1-c._queryFogOpacity(_),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(E*=this._occludedOpacity)),this._element.style.opacity=`${E}`,this._element.style.pointerEvents=E>0?"auto":"none",this._popup&&this._popup._setOpacity(E),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const p=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${Ec[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${p.x}px,${p.y}px)
        `}_calculateXYTransform(){const c=this._pos,p=this._map,_=this.getPitchAlignment();if(!p||!c||_!=="map")return"";if(!p._showingGlobe()){const G=p.getPitch();return G?`rotateX(${G}deg)`:""}const E=o.radToDeg(o.globeTiltAtLngLat(p.transform,this._lngLat)),k=c.sub(o.globeCenterToScreenPoint(p.transform)),L=Math.abs(k.x)+Math.abs(k.y);if(L===0)return"";const U=E/L;return`rotateX(${-k.y*U}deg) rotateY(${k.x*U}deg)`}_calculateZTransform(){const c=this._pos,p=this._map;if(!p||!c)return"";let _=0;const E=this.getRotationAlignment();if(E==="map")if(p._showingGlobe()){const k=p.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),L=p.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(k);_=o.radToDeg(Math.atan2(L.y,L.x))-90}else _=-p.getBearing();else if(E==="horizon"){const k=o.smoothstep(4,6,p.getZoom()),L=o.globeCenterToScreenPoint(p.transform);L.y+=k*p.transform.height;const U=c.sub(L),G=o.radToDeg(Math.atan2(U.y,U.x));_=(G>90?G-270:G+90)*(1-k)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(c){o.window.cancelAnimationFrame(this._updateFrameId);const p=this._map;p&&(p.transform.renderWorldCopies&&(this._lngLat=Sh(this._lngLat,this._pos,p.transform)),this._pos=p.project(this._lngLat),c===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),p._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(p._showingGlobe()||p.getTerrain()||p.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=o.pointGeometry.convert(c),this._update(),this}_onMove(c){const p=this._map;if(!p)return;const _=this._pointerdownPos,E=this._positionDelta;if(_&&E){if(!this._isDragging){const k=this._clickTolerance||p._clickTolerance;if(c.point.dist(_)<k)return;this._isDragging=!0}this._pos=c.point.sub(E),this._lngLat=p.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(c){const p=this._map,_=this._pos;p&&_&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(_),this._pointerdownPos=c.point,this._state="pending",p.on("mousemove",this._onMove),p.on("touchmove",this._onMove),p.once("mouseup",this._onUp),p.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const p=this._map;return p&&(c?(p.on("mousedown",this._addDragHandler),p.on("touchstart",this._addDragHandler)):(p.off("mousedown",this._addDragHandler),p.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(c){return this._occludedOpacity=c||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const fy={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},my=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Qf(v=new o.pointGeometry(0,0),c="bottom"){if(typeof v=="number"){const p=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(c){case"top":return new o.pointGeometry(0,v);case"top-left":return new o.pointGeometry(p,p);case"top-right":return new o.pointGeometry(-p,p);case"bottom":return new o.pointGeometry(0,-v);case"bottom-left":return new o.pointGeometry(p,-p);case"bottom-right":return new o.pointGeometry(-p,-p);case"left":return new o.pointGeometry(v,0);case"right":return new o.pointGeometry(-v,0)}return new o.pointGeometry(0,0)}return v instanceof o.pointGeometry||Array.isArray(v)?o.pointGeometry.convert(v):o.pointGeometry.convert(v[c]||[0,0])}class gy{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const p=o.easeCubicInOut((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-p)+this._end*p}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,p,_){this._start=this.getValue(p),this._end=c,this._startTime=p,this._endTime=p+_}}const vy={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},yy={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},em={showCompass:!0,showZoom:!0,visualizePitch:!1};class _y{constructor(c,p,_=!1){this._clickTolerance=10,this.element=p,this.mouseRotate=new qf({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,_&&(this.mousePitch=new Zf({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),p.addEventListener("mousedown",this.mousedown),p.addEventListener("touchstart",this.touchstart,{passive:!1}),p.addEventListener("touchmove",this.touchmove),p.addEventListener("touchend",this.touchend),p.addEventListener("touchcancel",this.reset)}down(c,p){this.mouseRotate.mousedown(c,p),this.mousePitch&&this.mousePitch.mousedown(c,p),j()}move(c,p){const _=this.map,E=this.mouseRotate.mousemoveWindow(c,p),k=E&&E.bearingDelta;if(k&&_.setBearing(_.getBearing()+k),this.mousePitch){const L=this.mousePitch.mousemoveWindow(c,p),U=L&&L.pitchDelta;U&&_.setPitch(_.getPitch()+U)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){W(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(o.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),S(this.element,c)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,S(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=w(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const xy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},by={maxWidth:100,unit:"metric"};function wy(v,c,p){const _=Th(c),E=_/c,k={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[p];this._map._requestDomTask(()=>{this._container.style.width=v*E+"px",this._container.innerHTML=`${_}&nbsp;${k}`})}function Th(v){const c=Math.pow(10,`${Math.floor(v)}`.length-1);let p=v/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:p>=1?1:function(_){const E=Math.pow(10,Math.ceil(-Math.log(_)/Math.LN10));return Math.round(_*E)/E}(p),c*p}const Gu={version:o.version,supported:b,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends py{constructor(v){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(v=o.extend({},yy,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(v.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Qt(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._useWebGL2=v.useWebGL2,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._optimizeForTerrain=v.optimizeForTerrain,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new Wu,this._domRenderTaskQueue=new Wu,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},vy,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new gy(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,typeof v.container=="string"){if(this._container=o.window.document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new hy(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,v.style&&this.setStyle(v.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),this._hash=v.hash&&new Qv(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,o.extend({},v.fitBoundsOptions,{duration:0})))),this.resize(),v.attributionControl&&this.addControl(new Yf({customAttribution:v.customAttribution})),this._logoControl=new Jf,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.Event(`${c.dataType}dataloading`,c))})}_getMapId(){return this._mapId}addControl(v,c){if(c===void 0&&(c=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=v.onAdd(this);this._controls.push(v);const _=this._controlPositions[c];return c.indexOf("bottom")!==-1?_.insertBefore(p,_.firstChild):_.appendChild(p),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(v);return c>-1&&this._controls.splice(c,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new o.Event("movestart",v)).fire(new o.Event("move",v)),this.fire(new o.Event("resize",v)),c&&this.fire(new o.Event("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(o.LngLatBounds.convert(v)),this._update()}setMinZoom(v){if((v=v==null?-2:v)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v==null?22:v)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v==null?0:v)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v==null?85:v)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return v==="auto"?o.window.navigator.language:Array.isArray(v)?v.length===0?void 0:v.map(c=>c==="auto"?o.window.navigator.language:c):v}setLanguage(v){const c=this._parseLanguage(v);if(!this.style||c===this._language)return this;this._language=c,this.style._reloadSources();for(const p of this._controls)p._setLanguage&&p._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(v){return this._lazyInitEmptyStyle(),v?typeof v=="string"&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const v=this.transform,c=v.projection.name;let p;c==="globe"&&v.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(v.setMercatorFromTransition(),p=!0):c==="mercator"&&v.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(v.setProjection({name:"globe"}),p=!0),p&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,c){return this._updateProjection(v||c||{name:"mercator"})}_updateProjection(v){let c;if(c=v.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),c){this.painter.clearBackgroundTiles();for(const p in this.style._sourceCaches)this.style._sourceCaches[p].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(v){return this.transform.locationPoint3D(o.LngLat.convert(v))}unproject(v){return this.transform.pointLocation3D(o.pointGeometry.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,c,p){if(v==="mouseenter"||v==="mouseover"){let _=!1;const E=L=>{const U=c.filter(K=>this.getLayer(K)),G=U.length?this.queryRenderedFeatures(L.point,{layers:U}):[];G.length?_||(_=!0,p.call(this,new Hi(v,this,L.originalEvent,{features:G}))):_=!1},k=()=>{_=!1};return{layers:new Set(c),listener:p,delegates:{mousemove:E,mouseout:k}}}if(v==="mouseleave"||v==="mouseout"){let _=!1;const E=L=>{const U=c.filter(G=>this.getLayer(G));(U.length?this.queryRenderedFeatures(L.point,{layers:U}):[]).length?_=!0:_&&(_=!1,p.call(this,new Hi(v,this,L.originalEvent)))},k=L=>{_&&(_=!1,p.call(this,new Hi(v,this,L.originalEvent)))};return{layers:new Set(c),listener:p,delegates:{mousemove:E,mouseout:k}}}{const _=E=>{const k=c.filter(U=>this.getLayer(U)),L=k.length?this.queryRenderedFeatures(E.point,{layers:k}):[];L.length&&(E.features=L,p.call(this,E),delete E.features)};return{layers:new Set(c),listener:p,delegates:{[v]:_}}}}on(v,c,p){if(p===void 0)return super.on(v,c);Array.isArray(c)||(c=[c]);const _=this._createDelegatedListener(v,c,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(_);for(const E in _.delegates)this.on(E,_.delegates[E]);return this}once(v,c,p){if(p===void 0)return super.once(v,c);Array.isArray(c)||(c=[c]);const _=this._createDelegatedListener(v,c,p);for(const E in _.delegates)this.once(E,_.delegates[E]);return this}off(v,c,p){if(p===void 0)return super.off(v,c);c=new Set(Array.isArray(c)?c:[c]);const _=(k,L)=>{if(k.size!==L.size)return!1;for(const U of k)if(!L.has(U))return!1;return!0},E=this._delegatedListeners?this._delegatedListeners[v]:void 0;return E&&(k=>{for(let L=0;L<k.length;L++){const U=k[L];if(U.listener===p&&_(U.layers,c)){for(const G in U.delegates)this.off(G,U.delegates[G]);return k.splice(L,1),this}}})(E),this}queryRenderedFeatures(v,c){return this.style?(c!==void 0||v===void 0||v instanceof o.pointGeometry||Array.isArray(v)||(c=v,v=void 0),this.style.queryRenderedFeatures(v=v||[[0,0],[this.transform.width,this.transform.height]],c=c||{},this.transform)):[]}querySourceFeatures(v,c){return this.style.querySourceFeatures(v,c)}setStyle(v,c){return(c=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&v?(this._diffStyle(v,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(v,c))}_getUIString(v){const c=this._locale[v];if(c==null)throw new Error(`Missing UI string '${v}'`);return c}_updateStyle(v,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v&&(this.style=new na(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v):this.style.loadJSON(v)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new na(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,c){if(typeof v=="string"){const p=this._requestManager.normalizeStyleURL(v),_=this._requestManager.transformRequest(p,o.ResourceType.Style);o.getJSON(_,(E,k)=>{E?this.fire(new o.ErrorEvent(E)):k&&this._updateDiff(k,c)})}else typeof v=="object"&&this._updateDiff(v,c)}_updateDiff(v,c){try{this.style.setState(v)&&this._update(!0)}catch(p){o.warnOnce(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(v,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(v,c){return this._lazyInitEmptyStyle(),this.style.addSource(v,c),this._update(!0)}isSourceLoaded(v){return!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){const v=this.style&&this.style._sourceCaches;for(const c in v){const p=v[c]._tiles;for(const _ in p){const E=p[_];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}addSourceType(v,c,p){this._lazyInitEmptyStyle(),this.style.addSourceType(v,c,p)}removeSource(v){return this.style.removeSource(v),this._updateTerrain(),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,c,{pixelRatio:p=1,sdf:_=!1,stretchX:E,stretchY:k,content:L}={}){if(this._lazyInitEmptyStyle(),c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap){const{width:U,height:G,data:K}=o.exported.getImageData(c);this.style.addImage(v,{data:new o.RGBAImage({width:U,height:G},K),pixelRatio:p,stretchX:E,stretchY:k,content:L,sdf:_,version:0})}else if(c.width===void 0||c.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:U,height:G}=c,K=c;this.style.addImage(v,{data:new o.RGBAImage({width:U,height:G},new Uint8Array(K.data)),pixelRatio:p,stretchX:E,stretchY:k,content:L,sdf:_,version:0,userImage:K}),K.onAdd&&K.onAdd(this,v)}}updateImage(v,c){const p=this.style.getImage(v);if(!p)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap?o.exported.getImageData(c):c,{width:E,height:k}=_;E!==void 0&&k!==void 0?E===p.data.width&&k===p.data.height?(p.data.replace(_.data,!(c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap)),this.style.updateImage(v,p)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${E}, ${k})
                must be that same as the previous version of the image
                (${p.data.width}, ${p.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,c){o.getImage(this._requestManager.transformRequest(v,o.ResourceType.Image),(p,_)=>{c(p,_ instanceof o.window.HTMLImageElement?o.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(v,c){return this._lazyInitEmptyStyle(),this.style.addLayer(v,c),this._update(!0)}moveLayer(v,c){return this.style.moveLayer(v,c),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}setLayerZoomRange(v,c,p){return this.style.setLayerZoomRange(v,c,p),this._update(!0)}setFilter(v,c,p={}){return this.style.setFilter(v,c,p),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,c,p,_={}){return this.style.setPaintProperty(v,c,p,_),this._update(!0)}getPaintProperty(v,c){return this.style.getPaintProperty(v,c)}setLayoutProperty(v,c,p,_={}){return this.style.setLayoutProperty(v,c,p,_),this._update(!0)}getLayoutProperty(v,c){return this.style.getLayoutProperty(v,c)}setLight(v,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,c),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(v),this.transform):0}setFeatureState(v,c){return this.style.setFeatureState(v,c),this._update()}removeFeatureState(v,c){return this.style.removeFeatureState(v,c),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let p,_,E,k=this._container;for(;k&&(!_||!E);){const L=o.window.getComputedStyle(k).transform;L&&L!=="none"&&(p=L.match(/matrix.*\((.+)\)/)[1].split(", "),p[0]&&p[0]!=="0"&&p[0]!=="1"&&(_=p[0]),p[3]&&p[3]!=="0"&&p[3]!=="1"&&(E=p[3])),k=k.parentElement}this._containerWidth=_?Math.abs(v/_):v,this._containerHeight=E?Math.abs(c/E):c}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=z("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=z("div","mapboxgl-canvas-container",v);this._interactive&&c.classList.add("mapboxgl-interactive"),this._canvas=z("canvas","mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const p=this._controlContainer=z("div","mapboxgl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{_[E]=z("div",`mapboxgl-ctrl-${E}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,c){const p=o.exported.devicePixelRatio||1;this._canvas.width=p*Math.ceil(v),this._canvas.height=p*Math.ceil(c),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${c}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const c=this._markers.indexOf(v);c!==-1&&this._markers.splice(c,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const c=this._popups.indexOf(v);c!==-1&&this._popups.splice(c,1)}_setupPainter(){const v=o.extend({},b.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._useWebGL2&&this._canvas.getContext("webgl2",v),p=c||this._canvas.getContext("webgl",v)||this._canvas.getContext("experimental-webgl",v);p?(this._useWebGL2&&!c&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(p,!0),this.painter=new Lu(p,this.transform,!!c),this.on("data",_=>{_.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(p)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let c;const p=this.painter.context.extTimerQuery,_=o.exported.now();if(this.listens("gpu-timing-frame")&&(c=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const E=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const U=this.transform.zoom,G=this.transform.pitch,K=o.exported.now(),X=new o.EvaluationParameters(U,{now:K,fadeDuration:E,pitch:G,transition:this.style.getTransition()});this.style.update(X)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let k=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),k=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):k=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,E,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const U=o.exported.now()-_;p.endQueryEXT(p.TIME_ELAPSED_EXT,c),setTimeout(()=>{const G=p.getQueryObjectEXT(c,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(c),this.fire(new o.Event("gpu-timing-frame",{cpuTime:U,gpuTime:G})),o.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:G}})},50)}if(this.listens("gpu-timing-layer")){const U=this.painter.collectGpuTimers();setTimeout(()=>{const G=this.painter.queryGpuTimers(U);this.fire(new o.Event("gpu-timing-layer",{layerTimes:G}))},50)}if(this.listens("gpu-timing-deferred-render")){const U=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const G=this.painter.queryGpuTimeDeferredRender(U);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:G}))},50)}const L=this._sourcesDirty||this._styleDirty||this._placementDirty||k;if(L||this._repaint)this.triggerRepaint();else{const U=!this.isMoving()&&this.loaded();if(U&&(k=this._updateAverageElevation(_,!0)),k)this.triggerRepaint();else if(this._triggerFrame(!1),U&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const G=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:G})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const c of this._markers)v&&!this.getRenderWorldCopies()&&(c._lngLat=c._lngLat.wrap()),c._update();for(const c of this._popups)!v||this.getRenderWorldCopies()||c._trackPointer||(c._lngLat=c._lngLat.wrap()),c._update()}_updateAverageElevation(v,c=!1){const p=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&p(0);if((c||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const _=this.transform.averageElevation;let E=this.transform.sampleAverageElevation(),k=!1;this.transform.elevation&&(k=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(E)?E=0:this._averageElevationLastSampledAt=v;const L=Math.abs(_-E);if(L>1){if(this._isInitialLoad||k)return this._averageElevation.jumpTo(E),p(E);this._averageElevation.easeTo(E,v,300)}else if(L>1e-4)return this._averageElevation.jumpTo(E),p(E)}return!!this._averageElevation.isEasing(v)&&p(this._averageElevation.getValue(v))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,v=>{if(v&&(v.message===o.AUTH_ERR_MSG||v.status===401)){const c=this.painter.context.gl;o.storeAuthState(c,!1),this._logoControl instanceof Jf&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const p=this.painter.context.gl,_=p.createFramebuffer();function E(k){p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,k,0);const L=new Uint8Array(p.drawingBufferWidth*p.drawingBufferHeight*4);return p.readPixels(0,0,p.drawingBufferWidth,p.drawingBufferHeight,p.RGBA,p.UNSIGNED_BYTE,L),L}return p.bindFramebuffer(p.FRAMEBUFFER,_),this._canvasPixelComparison(E(v),c.canvasCopies.map(E),c.timeStamps)}_canvasPixelComparison(v,c,p){let _=p[1]-p[0];const E=v.length/4;for(let k=0;k<c.length;k++){const L=c[k];let U=0;for(let G=0;G<L.length;G+=4)L[G]===v[G]&&L[G+1]===v[G+1]&&L[G+2]===v[G+2]&&L[G+3]===v[G+3]&&(U+=1);_+=(p[k+2]-p[k+1])*(1-U/E)}return _}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=o.exported.frame(c=>{const p=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,p&&this._render(c)}))}_preloadTiles(v){const c=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(c,(p,_)=>p._preloadTiles(v,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,v&&this._update())}_setCacheLimits(v,c){o.setCacheLimits(v,c)}get version(){return o.version}},NavigationControl:class{constructor(v){this.options=o.extend({},em,v),this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),z("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),z("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const p=this._map;p&&(this.options.visualizePitch?p.resetNorthPitch({},{originalEvent:c}):p.resetNorth({},{originalEvent:c}))}),this._compassIcon=z("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const c=v.getZoom(),p=c===v.getMaxZoom(),_=c===v.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _y(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,c){const p=z("button",v,this._container);return p.type="button",p.addEventListener("click",c),p}_setButtonTitle(v,c){if(!this._map)return;const p=this._map._getUIString(`NavigationControl.${c}`);v.setAttribute("aria-label",p),v.firstElementChild&&v.firstElementChild.setAttribute("title",p)}},GeolocateControl:class extends o.Evented{constructor(v){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},xy,v),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ra(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const c=(p=!!this.options.geolocation)=>{this._supportsGeolocation=p,v(p)};this._supportsGeolocation!==void 0?v(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(p=>c(p.state!=="denied")).catch(()=>c()):c()}_isOutOfMapMaxBounds(v){const c=this._map.getMaxBounds(),p=v.coords;return!!c&&(p.longitude<c.getWest()||p.longitude>c.getEast()||p.latitude<c.getSouth()||p.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",v)),this._finish()}}_updateCamera(v){const c=new o.LngLat(v.coords.longitude,v.coords.latitude),p=v.coords.accuracy,_=this._map.getBearing(),E=o.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(p),E,{geolocateSource:!0})}_updateMarker(v){if(v){const c=new o.LngLat(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,c=o.mercatorZfromAltitude(1,v._center.lat)*v.worldSize,p=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=z("button","mapboxgl-ctrl-geolocate",this._container),z("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",v===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=z("div","mapboxgl-user-location"),this._dotElement.appendChild(z("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(z("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new kh({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=z("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:v.absolute===!0&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(c=>{c==="granted"&&v()}).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yf,ScaleControl:class{constructor(v){this.options=o.extend({},by,v),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=wy.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,c=this._map,p=c._containerHeight/2,_=c._containerWidth/2-v/2,E=c.unproject([_,p]),k=c.unproject([_+v,p]),L=E.distanceTo(k);if(this.options.unit==="imperial"){const U=3.2808*L;U>5280?this._setScale(v,U/5280,"mile"):this._setScale(v,U,"foot")}else this.options.unit==="nautical"?this._setScale(v,L/1852,"nautical-mile"):L>=1e3?this._setScale(v,L/1e3,"kilometer"):this._setScale(v,L,"meter")}_setScale(v,c,p){const _=Th(c),E=_/c;this._map._requestDomTask(()=>{this._container.style.width=v*E+"px",this._container.innerHTML=p!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:p}).format(_):`${_}&nbsp;nm`})}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=z("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v){this._fullscreen=!1,v&&v.container&&(v.container instanceof o.window.HTMLElement?this._container=v.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=z("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=z("button","mapboxgl-ctrl-fullscreen",this._controlContainer);z("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(v){super(),this.options=o.extend(Object.create(fy),v),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=o.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(o.window.document.createTextNode(v))}setHTML(v){const c=o.window.document.createDocumentFragment(),p=o.window.document.createElement("body");let _;for(p.innerHTML=v;_=p.firstChild,_;)c.appendChild(_);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=z("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(v),this.options.closeButton){const p=this._closeButton=z("button","mapboxgl-popup-close-button",c);p.type="button",p.setAttribute("aria-label","Close popup"),p.setAttribute("aria-hidden","true"),p.innerHTML="&#215;",p.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let c;return this._classList.delete(v)?c=!1:(this._classList.add(v),c=!0),this._updateClassList(),c}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const c=this._map,p=this._container,_=this._pos;if(!c||!p||!_)return"bottom";const E=p.offsetWidth,k=p.offsetHeight,L=_.x<E/2,U=_.x>c.transform.width-E/2;if(_.y+v<k)return L?"top-left":U?"top-right":"top";if(_.y>c.transform.height-k){if(L)return"bottom-left";if(U)return"bottom-right"}return L?"left":U?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),v.className=c.join(" ")}_update(v){const c=this._map,p=this._content;if(!c||!this._lngLat&&!this._trackPointer||!p)return;let _=this._container;if(_||(_=this._container=z("div","mapboxgl-popup",c.getContainer()),this._tip=z("div","mapboxgl-popup-tip",_),_.appendChild(p)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Sh(this._lngLat,this._pos,c.transform)),!this._trackPointer||v){const E=this._pos=this._trackPointer&&v?v:c.project(this._lngLat),k=Qf(this.options.offset),L=this._anchor=this._getAnchor(k.y),U=Qf(this.options.offset,L),G=E.add(U).round();c._requestDomTask(()=>{this._container&&L&&(this._container.style.transform=`${Ec[L]} translate(${G.x}px,${G.y}px)`)})}if(!this._marker&&c._showingGlobe()){const E=o.isLngLatBehindGlobe(c.transform,this._lngLat)?0:1;this._setOpacity(E)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(my);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:kh,Style:na,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:fh,Evented:o.Evented,config:o.config,prewarm:function(){pn().acquire(Zt)},clearPrewarmedResources:function(){const v=Jt;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Zt),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(v){o.config.ACCESS_TOKEN=v},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(v){o.config.API_URL=v},get workerCount(){return rn.workerCount},set workerCount(v){rn.workerCount=v},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){o.config.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){o.clearTileCache(v)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Gu});var h=a;return h})})(DB);var xp=DB.exports,pf=wce,bce=Object.prototype.hasOwnProperty;function wce(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)bce.call(n,r)&&(e[r]=n[r])}return e}var LB={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,a){return a.filter(function(u){return n.test(r,u)})},n.test=function(r,a){return n.match(r,a)!==null},n.match=function(r,a,u){u=u||{};var h=0,o=[],g=a.length,b=0,A=0,D=u.pre||"",z=u.post||"",F=u.caseSensitive&&a||a.toLowerCase(),N;r=u.caseSensitive&&r||r.toLowerCase();for(var T=0;T<g;T++)N=a[T],F[T]===r[h]?(N=D+N+z,h+=1,A+=1+A):A=0,b+=A,o[o.length]=N;return h===r.length?(b=F===r?1/0:b,{rendered:o.join(""),score:b}):null},n.filter=function(r,a,u){return!a||a.length===0?[]:typeof r!="string"?a:(u=u||{},a.reduce(function(h,o,g,b){var A=o;u.extract&&(A=u.extract(o));var D=n.match(r,A,u);return D!=null&&(h[h.length]={string:D.rendered,score:D.score,index:g,original:o}),h},[]).sort(function(h,o){var g=o.score-h.score;return g||h.index-o.index}))}})()})(LB);var xa=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};xa.prototype.show=function(){this.element.style.display="block"};xa.prototype.hide=function(){this.element.style.display="none"};xa.prototype.add=function(e){this.items.push(e)};xa.prototype.clear=function(){this.items=[],this.active=0};xa.prototype.isEmpty=function(){return!this.items.length};xa.prototype.isVisible=function(){return this.element.style.display==="block"};xa.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};xa.prototype.drawItem=function(e,t){var n=document.createElement("li"),r=document.createElement("a");t&&(n.className+=" active"),r.innerHTML=e.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};xa.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};xa.prototype.move=function(e){this.active=e,this.draw()};xa.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};xa.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};xa.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var Ece=xa,Cce=pf,Sce=LB.exports,kce=Ece,Go=function(e,t,n){return n=n||{},this.options=Cce({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new kce(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(r){this.handleKeyUp(r.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(r){this.handleKeyDown(r)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(r){this.handlePaste(r)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Go.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};Go.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Go.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Go.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};Go.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};Go.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Go.prototype.update=function(e){this.data=e,this.handleKeyUp()};Go.prototype.clear=function(){this.data=[],this.list.clear()};Go.prototype.normalize=function(e){return e=e.toLowerCase(),e};Go.prototype.match=function(e,t){return e.indexOf(t)>-1};Go.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};Go.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(r){return this.getItemValue(r)}.bind(this)},n;this.options.filter?(n=Sce.filter(this.query,this.data,t),n=n.map(function(r){return{original:r.original,string:this.render(r.original,r.string)}}.bind(this))):n=this.data.map(function(r){var a=this.render(r);return{original:r,string:a}}.bind(this)),e(n)};Go.prototype.getItemValue=function(e){return e};Go.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),r=this.normalize(n),a=r.lastIndexOf(this.query);a>-1;){var u=a+this.query.length;n=n.slice(0,a)+"<strong>"+n.slice(a,u)+"</strong>"+n.slice(u),a=r.slice(0,a).lastIndexOf(this.query)}return n};Go.prototype.renderError=function(e){this.list.drawError(e)};var Tce=Go,OB=Tce,Ace=OB;typeof window!="undefined"&&(window.Suggestions=OB);var Mce="Expected a function",YR=0/0,Ice="[object Symbol]",Pce=/^\s+|\s+$/g,Dce=/^[-+]0x[0-9a-f]+$/i,Rce=/^0b[01]+$/i,Lce=/^0o[0-7]+$/i,Oce=parseInt,zce=typeof $o=="object"&&$o&&$o.Object===Object&&$o,Bce=typeof self=="object"&&self&&self.Object===Object&&self,Fce=zce||Bce||Function("return this")(),Nce=Object.prototype,Uce=Nce.toString,jce=Math.max,$ce=Math.min,xE=function(){return Fce.Date.now()};function Vce(e,t,n){var r,a,u,h,o,g,b=0,A=!1,D=!1,z=!0;if(typeof e!="function")throw new TypeError(Mce);t=JR(t)||0,mS(n)&&(A=!!n.leading,D="maxWait"in n,u=D?jce(JR(n.maxWait)||0,t):u,z="trailing"in n?!!n.trailing:z);function F(w){var P=r,Y=a;return r=a=void 0,b=w,h=e.apply(Y,P),h}function N(w){return b=w,o=setTimeout(j,t),A?F(w):h}function T(w){var P=w-g,Y=w-b,ne=t-P;return D?$ce(ne,u-Y):ne}function H(w){var P=w-g,Y=w-b;return g===void 0||P>=t||P<0||D&&Y>=u}function j(){var w=xE();if(H(w))return W(w);o=setTimeout(j,T(w))}function W(w){return o=void 0,z&&r?F(w):(r=a=void 0,h)}function B(){o!==void 0&&clearTimeout(o),b=0,r=g=a=o=void 0}function O(){return o===void 0?h:W(xE())}function S(){var w=xE(),P=H(w);if(r=arguments,a=this,g=w,P){if(o===void 0)return N(g);if(D)return o=setTimeout(j,t),F(g)}return o===void 0&&(o=setTimeout(j,t)),h}return S.cancel=B,S.flush=O,S}function mS(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Hce(e){return!!e&&typeof e=="object"}function Wce(e){return typeof e=="symbol"||Hce(e)&&Uce.call(e)==Ice}function JR(e){if(typeof e=="number")return e;if(Wce(e))return YR;if(mS(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=mS(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Pce,"");var n=Rce.test(e);return n||Lce.test(e)?Oce(e.slice(2),n?2:8):Dce.test(e)?YR:+e}var Gce=Vce,FT={exports:{}},Rp=typeof Reflect=="object"?Reflect:null,QR=Rp&&typeof Rp.apply=="function"?Rp.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},lx;Rp&&typeof Rp.ownKeys=="function"?lx=Rp.ownKeys:Object.getOwnPropertySymbols?lx=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:lx=function(t){return Object.getOwnPropertyNames(t)};function qce(e){console&&console.warn&&console.warn(e)}var zB=Number.isNaN||function(t){return t!==t};function Qr(){Qr.init.call(this)}FT.exports=Qr;FT.exports.once=Yce;Qr.EventEmitter=Qr;Qr.prototype._events=void 0;Qr.prototype._eventsCount=0;Qr.prototype._maxListeners=void 0;var eL=10;function zb(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Qr,"defaultMaxListeners",{enumerable:!0,get:function(){return eL},set:function(e){if(typeof e!="number"||e<0||zB(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");eL=e}});Qr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Qr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||zB(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function BB(e){return e._maxListeners===void 0?Qr.defaultMaxListeners:e._maxListeners}Qr.prototype.getMaxListeners=function(){return BB(this)};Qr.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var a=t==="error",u=this._events;if(u!==void 0)a=a&&u.error===void 0;else if(!a)return!1;if(a){var h;if(n.length>0&&(h=n[0]),h instanceof Error)throw h;var o=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw o.context=h,o}var g=u[t];if(g===void 0)return!1;if(typeof g=="function")QR(g,this,n);else for(var b=g.length,A=$B(g,b),r=0;r<b;++r)QR(A[r],this,n);return!0};function FB(e,t,n,r){var a,u,h;if(zb(n),u=e._events,u===void 0?(u=e._events=Object.create(null),e._eventsCount=0):(u.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),u=e._events),h=u[t]),h===void 0)h=u[t]=n,++e._eventsCount;else if(typeof h=="function"?h=u[t]=r?[n,h]:[h,n]:r?h.unshift(n):h.push(n),a=BB(e),a>0&&h.length>a&&!h.warned){h.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=h.length,qce(o)}return e}Qr.prototype.addListener=function(t,n){return FB(this,t,n,!1)};Qr.prototype.on=Qr.prototype.addListener;Qr.prototype.prependListener=function(t,n){return FB(this,t,n,!0)};function Zce(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function NB(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=Zce.bind(r);return a.listener=n,r.wrapFn=a,a}Qr.prototype.once=function(t,n){return zb(n),this.on(t,NB(this,t,n)),this};Qr.prototype.prependOnceListener=function(t,n){return zb(n),this.prependListener(t,NB(this,t,n)),this};Qr.prototype.removeListener=function(t,n){var r,a,u,h,o;if(zb(n),a=this._events,a===void 0)return this;if(r=a[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(u=-1,h=r.length-1;h>=0;h--)if(r[h]===n||r[h].listener===n){o=r[h].listener,u=h;break}if(u<0)return this;u===0?r.shift():Xce(r,u),r.length===1&&(a[t]=r[0]),a.removeListener!==void 0&&this.emit("removeListener",t,o||n)}return this};Qr.prototype.off=Qr.prototype.removeListener;Qr.prototype.removeAllListeners=function(t){var n,r,a;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var u=Object.keys(r),h;for(a=0;a<u.length;++a)h=u[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(t,n[a]);return this};function UB(e,t,n){var r=e._events;if(r===void 0)return[];var a=r[t];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?Kce(a):$B(a,a.length)}Qr.prototype.listeners=function(t){return UB(this,t,!0)};Qr.prototype.rawListeners=function(t){return UB(this,t,!1)};Qr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):jB.call(e,t)};Qr.prototype.listenerCount=jB;function jB(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Qr.prototype.eventNames=function(){return this._eventsCount>0?lx(this._events):[]};function $B(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Xce(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Kce(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Yce(e,t){return new Promise(function(n,r){function a(h){e.removeListener(t,u),r(h)}function u(){typeof e.removeListener=="function"&&e.removeListener("error",a),n([].slice.call(arguments))}VB(e,t,u,{once:!0}),t!=="error"&&Jce(e,a,{once:!0})})}function Jce(e,t,n){typeof e.on=="function"&&VB(e,"error",t,n)}function VB(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(u){r.once&&e.removeEventListener(t,a),n(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Qce={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function eue(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function tue(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],r=t[2].split(";"),a=null,u=r.reduce(function(h,o){var g=eue(o);return g?g.key==="rel"?(a||(a=g.value),h):(h[g.key]=g.value,h):h},{});return a?{url:n,rel:a,params:u}:null}function nue(e){return e?e.split(/,\s*</).reduce(function(t,n){var r=tue(n);if(!r)return t;var a=r.rel.split(/\s+/);return a.forEach(function(u){t[u]||(t[u]={url:r.url,params:r.params})}),t},{}):{}}var rue=nue,iue=rue;function NT(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=iue(this.headers.link)}NT.prototype.hasNextPage=function(){return!!this.links.next};NT.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var oue=NT,Bb={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},tL=Bb;function aue(e){var t=e.type||tL.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var r=e.message||null;r||(typeof n=="string"?r=n:n&&typeof n.message=="string"?r=n.message:t===tL.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var sue=aue;function lue(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),r=e.substring(t+1).trim();return{name:n,value:r}}function cue(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var r=lue(n);t[r.name]=r.value}),t}var uue=cue,due=oue,nL=sue,bE=Bb,hue=uue,d0={};function pue(e){var t=d0[e.id];!t||(t.abort(),delete d0[e.id])}function fue(e,t){return new due(e,{body:t.response,headers:hue(t.getAllResponseHeaders()),statusCode:t.status})}function rL(e){var t=e.total,n=e.loaded,r=100*n/t;return{total:t,transferred:n,percent:r}}function HB(e,t){return new Promise(function(n,r){t.onprogress=function(h){e.emitter.emit(bE.EVENT_PROGRESS_DOWNLOAD,rL(h))};var a=e.file;a&&(t.upload.onprogress=function(h){e.emitter.emit(bE.EVENT_PROGRESS_UPLOAD,rL(h))}),t.onerror=function(h){r(h)},t.onabort=function(){var h=new nL({request:e,type:bE.ERROR_REQUEST_ABORTED});r(h)},t.onload=function(){if(delete d0[e.id],t.status<200||t.status>=400){var h=new nL({request:e,body:t.response,statusCode:t.status});r(h);return}n(t)};var u=e.body;typeof u=="string"?t.send(u):u?t.send(JSON.stringify(u)):a?t.send(a):t.send(),d0[e.id]=t}).then(function(n){return fue(e,n)})}function WB(e,t){var n=e.url(t),r=new window.XMLHttpRequest;return r.open(e.method,n),Object.keys(e.headers).forEach(function(a){r.setRequestHeader(a,e.headers[a])}),r}function mue(e){return Promise.resolve().then(function(){var t=WB(e,e.client.accessToken);return HB(e,t)})}var gue={browserAbort:pue,sendRequestXhr:HB,browserSend:mue,createRequestXhr:WB},gS={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(e,t){(function(n){var r=t,a=e&&e.exports==r&&e,u=typeof $o=="object"&&$o;(u.global===u||u.window===u)&&(n=u);var h=function(N){this.message=N};h.prototype=new Error,h.prototype.name="InvalidCharacterError";var o=function(N){throw new h(N)},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=/[\t\n\f\r ]/g,A=function(N){N=String(N).replace(b,"");var T=N.length;T%4==0&&(N=N.replace(/==?$/,""),T=N.length),(T%4==1||/[^+a-zA-Z0-9/]/.test(N))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var H=0,j,W,B="",O=-1;++O<T;)W=g.indexOf(N.charAt(O)),j=H%4?j*64+W:W,H++%4&&(B+=String.fromCharCode(255&j>>(-2*H&6)));return B},D=function(N){N=String(N),/[^\0-\xFF]/.test(N)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var T=N.length%3,H="",j=-1,W,B,O,S,w=N.length-T;++j<w;)W=N.charCodeAt(j)<<16,B=N.charCodeAt(++j)<<8,O=N.charCodeAt(++j),S=W+B+O,H+=g.charAt(S>>18&63)+g.charAt(S>>12&63)+g.charAt(S>>6&63)+g.charAt(S&63);return T==2?(W=N.charCodeAt(j)<<8,B=N.charCodeAt(++j),S=W+B,H+=g.charAt(S>>10)+g.charAt(S>>4&63)+g.charAt(S<<2&63)+"="):T==1&&(S=N.charCodeAt(j),H+=g.charAt(S>>2)+g.charAt(S<<4&63)+"=="),H},z={encode:D,decode:A,version:"0.1.0"};if(r&&!r.nodeType)if(a)a.exports=z;else for(var F in z)z.hasOwnProperty(F)&&(r[F]=z[F]);else n.base64=z})($o)})(gS,gS.exports);var vue=gS.exports,wE={};function yue(e){if(wE[e])return wE[e];var t=e.split("."),n=t[0],r=t[1];if(!r)throw new Error("Invalid token");var a=_ue(r),u={usage:n,user:a.u};return ld(a,"a")&&(u.authorization=a.a),ld(a,"exp")&&(u.expires=a.exp*1e3),ld(a,"iat")&&(u.created=a.iat*1e3),ld(a,"scopes")&&(u.scopes=a.scopes),ld(a,"client")&&(u.client=a.client),ld(a,"ll")&&(u.lastLogin=a.ll),ld(a,"iu")&&(u.impersonator=a.iu),wE[e]=u,u}function _ue(e){try{return JSON.parse(vue.decode(e))}catch{throw new Error("Invalid token")}}function ld(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var GB=yue,qB={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(g,b,A){this.fn=g,this.context=b,this.once=A||!1}function u(g,b,A,D,z){if(typeof A!="function")throw new TypeError("The listener must be a function");var F=new a(A,D||g,z),N=n?n+b:b;return g._events[N]?g._events[N].fn?g._events[N]=[g._events[N],F]:g._events[N].push(F):(g._events[N]=F,g._eventsCount++),g}function h(g,b){--g._eventsCount===0?g._events=new r:delete g._events[b]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var b=[],A,D;if(this._eventsCount===0)return b;for(D in A=this._events)t.call(A,D)&&b.push(n?D.slice(1):D);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(A)):b},o.prototype.listeners=function(b){var A=n?n+b:b,D=this._events[A];if(!D)return[];if(D.fn)return[D.fn];for(var z=0,F=D.length,N=new Array(F);z<F;z++)N[z]=D[z].fn;return N},o.prototype.listenerCount=function(b){var A=n?n+b:b,D=this._events[A];return D?D.fn?1:D.length:0},o.prototype.emit=function(b,A,D,z,F,N){var T=n?n+b:b;if(!this._events[T])return!1;var H=this._events[T],j=arguments.length,W,B;if(H.fn){switch(H.once&&this.removeListener(b,H.fn,void 0,!0),j){case 1:return H.fn.call(H.context),!0;case 2:return H.fn.call(H.context,A),!0;case 3:return H.fn.call(H.context,A,D),!0;case 4:return H.fn.call(H.context,A,D,z),!0;case 5:return H.fn.call(H.context,A,D,z,F),!0;case 6:return H.fn.call(H.context,A,D,z,F,N),!0}for(B=1,W=new Array(j-1);B<j;B++)W[B-1]=arguments[B];H.fn.apply(H.context,W)}else{var O=H.length,S;for(B=0;B<O;B++)switch(H[B].once&&this.removeListener(b,H[B].fn,void 0,!0),j){case 1:H[B].fn.call(H[B].context);break;case 2:H[B].fn.call(H[B].context,A);break;case 3:H[B].fn.call(H[B].context,A,D);break;case 4:H[B].fn.call(H[B].context,A,D,z);break;default:if(!W)for(S=1,W=new Array(j-1);S<j;S++)W[S-1]=arguments[S];H[B].fn.apply(H[B].context,W)}}return!0},o.prototype.on=function(b,A,D){return u(this,b,A,D,!1)},o.prototype.once=function(b,A,D){return u(this,b,A,D,!0)},o.prototype.removeListener=function(b,A,D,z){var F=n?n+b:b;if(!this._events[F])return this;if(!A)return h(this,F),this;var N=this._events[F];if(N.fn)N.fn===A&&(!z||N.once)&&(!D||N.context===D)&&h(this,F);else{for(var T=0,H=[],j=N.length;T<j;T++)(N[T].fn!==A||z&&!N[T].once||D&&N[T].context!==D)&&H.push(N[T]);H.length?this._events[F]=H.length===1?H[0]:H:h(this,F)}return this},o.prototype.removeAllListeners=function(b){var A;return b?(A=n?n+b:b,this._events[A]&&h(this,A)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(qB);function xue(e){return e.map(encodeURIComponent).join(",")}function ZB(e){return Array.isArray(e)?xue(e):encodeURIComponent(String(e))}function XB(e,t,n){if(n===!1||n===null)return e;var r=/\?/.test(e)?"&":"?",a=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(a+="="+ZB(n)),""+e+r+a}function bue(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(r){var a=t[r];a!==void 0&&(Array.isArray(a)&&(a=a.filter(function(u){return u!=null}).join(",")),n=XB(n,r,a))}),n}function wue(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function Eue(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,r){var a=t[r];if(a===void 0)throw new Error("Unspecified route parameter "+r);var u=ZB(a);return"/"+u}):e}var Cue={appendQueryObject:bue,appendQueryParam:XB,prependOrigin:wue,interpolateRouteParams:Eue},Sue=GB,UT=pf,kue=qB.exports,O_=Cue,iL=Bb,Tue=1;function lu(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var r=UT(n,t.headers),a=Object.keys(r).reduce(function(u,h){return u[h.toLowerCase()]=r[h],u},{});this.id=Tue++,this._options=t,this.emitter=new kue,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=a}lu.prototype.url=function(t){var n=O_.prependOrigin(this.path,this.origin);n=O_.appendQueryObject(n,this.query);var r=this.params,a=t==null?this.client.accessToken:t;if(a){n=O_.appendQueryParam(n,"access_token",a);var u=Sue(a).user;r=UT({ownerId:u},r)}return n=O_.interpolateRouteParams(n,r),n};lu.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit(iL.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit(iL.EVENT_ERROR,n),n})};lu.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};lu.prototype.eachPage=function(t){var n=this;function r(h){function o(){delete n._nextPageRequest;var g=h.nextPage();g&&(n._nextPageRequest=g,u(g))}t(null,h,o)}function a(h){t(h,null,function(){})}function u(h){h.send().then(r,a)}u(this)};lu.prototype.clone=function(){return this._extend()};lu.prototype._extend=function(t){var n=UT(this._options,t);return new lu(this.client,n)};var Aue=lu,Mue=GB,Iue=Aue,Pue=Bb;function KB(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");Mue(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||Pue.API_ORIGIN}KB.prototype.createRequest=function(t){return new Iue(this,t)};var YB=KB,JB=gue,QB=YB;function Xp(e){QB.call(this,e)}Xp.prototype=Object.create(QB.prototype);Xp.prototype.constructor=Xp;Xp.prototype.sendRequest=JB.browserSend;Xp.prototype.abortRequest=JB.browserAbort;function Due(e){return new Xp(e)}var eF=Due,Rue=eF,Lue=Rue,Oue=Object.prototype.toString,zue=function(e){var t;return Oue.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},Bue=zue,Fue=pf,tF="value",EE=`
  `,oi={};oi.assert=function(e,t){return t=t||{},function(n){var r=cu(e,n);if(!!r){var a=jT(r,t);throw t.apiName&&(a=t.apiName+": "+a),new Error(a)}}};oi.shape=function(t){var n=$ue(t);return function(a){var u=cu(oi.plainObject,a);if(u)return u;for(var h,o,g=[],b=0;b<n.length;b++)h=n[b].key,o=n[b].value,u=cu(o,a[h]),u&&g.push([h].concat(u));return g.length<2?g[0]:function(A){g=g.map(function(F){var N=F[0],T=jT(F,A).split(`
`).join(EE);return"- "+N+": "+T});var D=A.path.join("."),z=D===tF?"":" of "+D;return"The following properties"+z+" have invalid values:"+EE+g.join(EE)}}};oi.strictShape=function(t){var n=oi.shape(t);return function(a){var u=n(a);if(u)return u;var h=Object.keys(a).reduce(function(o,g){return t[g]===void 0&&o.push(g),o},[]);if(h.length!==0)return function(){return"The following keys are invalid: "+h.join(", ")}}};oi.arrayOf=function(t){return nF(t)};oi.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return nF(t)};function nF(e){var t=Array.isArray(e),n=function(r){return t?e[r]:e};return function(a){var u=cu(oi.plainArray,a);if(u)return u;if(t&&a.length!==e.length)return"an array with "+e.length+" items";for(var h=0;h<a.length;h++)if(u=cu(n(h),a[h]),u)return[h].concat(u)}}oi.required=function(t){function n(r){return r==null?function(a){return rF(a,iF(a.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};oi.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(r){var a=t.map(function(u){return cu(u,r)}).filter(Boolean);if(a.length===t.length)return a.every(function(u){return u.length===1&&typeof u[0]=="string"})?Nue(a.map(function(u){return u[0]})):a.reduce(function(u,h){return h.length>u.length?h:u})}};oi.equal=function(t){return function(r){if(r!==t)return JSON.stringify(t)}};oi.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(r){return oi.equal(r)});return oi.oneOfType.apply(this,n)};oi.range=function(t){var n=t[0],r=t[1];return function(u){var h=cu(oi.number,u);if(h||u<n||u>r)return"number between "+n+" & "+r+" (inclusive)"}};oi.any=function(){};oi.boolean=function(t){if(typeof t!="boolean")return"boolean"};oi.number=function(t){if(typeof t!="number")return"number"};oi.plainArray=function(t){if(!Array.isArray(t))return"array"};oi.plainObject=function(t){if(!Bue(t))return"object"};oi.string=function(t){if(typeof t!="string")return"string"};oi.func=function(t){if(typeof t!="function")return"function"};function cu(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function jT(e,t){var n=e.length,r=e[n-1],a=e.slice(0,n-1);return a.length===0&&(a=[tF]),t=Fue(t,{path:a}),typeof r=="function"?r(t):rF(t,Uue(r))}function Nue(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function Uue(e){return"must be "+jue(e)+"."}function jue(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function rF(e,t){var n=iF(e.path),r=e.path.join(".")+" "+t,a=n?"Item at position ":"";return a+r}function iF(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function $ue(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}oi.validate=cu;oi.processMessage=jT;var Vue=oi,Hue=pf,Lp=Vue;function Wue(e){if(typeof window!="undefined")return e instanceof $o.Blob||e instanceof $o.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function Gue(e,t){return Lp.assert(Lp.strictShape(e),t)}function que(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function Zue(e){return Lp.tuple(Lp.number,Lp.number)(e)}var Xue=Hue(Lp,{file:Wue,date:que,coordinates:Zue,assertShape:Gue});function Kue(e,t){var n=function(r,a){return t.indexOf(r)!==-1&&a!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(r){return n(r,e[r])}).reduce(function(r,a){return r[a]=e[a],r},{})}var Yue=Kue;function Jue(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(r,e[r]),n},{})}var Que=Jue,ede=Que;function tde(e){return ede(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var nde=tde,rde=YB,ide=eF;function ode(e){return function(t){var n;rde.prototype.isPrototypeOf(t)?n=t:n=ide(t);var r=Object.create(e);return r.client=n,r}}var ade=ode,oF=pf,fr=Xue,h0=Yue,aF=nde,sde=ade,$T={},sF=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];$T.forwardGeocode=function(e){fr.assertShape({query:fr.required(fr.string),mode:fr.oneOf("mapbox.places","mapbox.places-permanent"),countries:fr.arrayOf(fr.string),proximity:fr.oneOf(fr.coordinates,"ip"),types:fr.arrayOf(fr.oneOf(sF)),autocomplete:fr.boolean,bbox:fr.arrayOf(fr.number),limit:fr.number,language:fr.arrayOf(fr.string),routing:fr.boolean,fuzzyMatch:fr.boolean,worldview:fr.string})(e),e.mode=e.mode||"mapbox.places";var t=aF(oF({country:e.countries},h0(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:h0(e,["mode","query"]),query:t})};$T.reverseGeocode=function(e){fr.assertShape({query:fr.required(fr.coordinates),mode:fr.oneOf("mapbox.places","mapbox.places-permanent"),countries:fr.arrayOf(fr.string),types:fr.arrayOf(fr.oneOf(sF)),bbox:fr.arrayOf(fr.number),limit:fr.number,language:fr.arrayOf(fr.string),reverseMode:fr.oneOf("distance","score"),routing:fr.boolean,worldview:fr.string})(e),e.mode=e.mode||"mapbox.places";var t=aF(oF({country:e.countries},h0(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:h0(e,["mode","query"]),query:t})};var lde=sde($T);let cde="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",lF=e=>crypto.getRandomValues(new Uint8Array(e)),cF=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*r*t/e.length);return(u=t)=>{let h="";for(;;){let o=n(a),g=a;for(;g--;)if(h+=e[o[g]&r]||"",h.length===u)return h}}},ude=(e,t=21)=>cF(e,t,lF),dde=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var hde=Object.freeze(Object.defineProperty({__proto__:null,nanoid:dde,customAlphabet:ude,customRandom:cF,urlAlphabet:cde,random:lF},Symbol.toStringTag,{value:"Module"})),pde=q6(hde),fde=pde.nanoid;function uF(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}uF.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),r=this.getEventPayload("search.select",t);if(r.resultIndex=n,r.resultPlaceName=e.place_name,r.resultId=e.id,!(n===this.lastSentIndex&&r.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,!!r.queryString))return this.push(r)},start:function(e){var t=this.getEventPayload("search.start",e);if(!!t.queryString)return this.push(t)},keyevent:function(e,t){if(!!e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(r){if(r)return this.handleError(r,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var r=t._map?t._map.getZoom():void 0,a={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:r,keyboardLocale:this.locale};return e==="search.select"?a.queryString=t.inputString:e!="search.select"&&t._inputEl?a.queryString=t._inputEl.value:a.queryString=t.inputString,a},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var r in e.headers){var a=e.headers[r];n.setRequestHeader(r,a)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return fde()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(!!t._typeahead){var n=t._typeahead.data,r=e.id,a=n.map(function(h){return h.id}),u=a.indexOf(r);return u}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var mde=uF,gde={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},vde={placeholder:gde},dF={exports:{}};(function(e){(function(t,n,r){e.exports?e.exports=r():t[n]=r()})($o,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(g){return g.match(n)||[]}function a(g){return r(g).filter(function(b,A){return b&&A})}function u(g){return g=r(g),{language:g[1]||t,extlang:g[2]||t,script:g[3]||t,region:g[4]||t}}function h(g,b,A){Object.defineProperty(g,b,{value:A,enumerable:!0})}function o(g,b,A){function D(z){return r(z)[g]||t}h(D,"pattern",b),h(u,A,D)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),h(u,"split",a),u})})(dF);function hF(){}hF.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var yde=hF;function _de(e,t){const n=pF(e),r=["address","street","place","country"];var a;if(typeof t=="function")return t(n);const u=r.indexOf(t);return u===-1?a=r:a=r.slice(u),a.reduce(function(h,o){return n[o]?(h!==""&&(h=h+", "),h+n[o]):h},"")}function pF(e){const t=e.address||"",n=e.text||"",r=e.place_name||"",u={address:r.split(",")[0],houseNumber:t,street:n,placeName:r};return e.context.forEach(function(h){const o=h.id.split(".")[0];u[o]=h.text}),u}const xde=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var bde={transformFeatureToGeolocationText:_de,getAddressInfo:pF,REVERSE_GEOCODE_COORD_RGX:xde},wde=Ace,Ede=Gce,md=pf,Cde=FT.exports.EventEmitter,oL=Qce,CE=Lue,SE=lde,Sde=mde,kde=vde,Tde=dF.exports,Ade=yde,aL=bde;const Fc={FORWARD:0,LOCAL:1,REVERSE:2};function Mde(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function fF(e){this._eventEmitter=new Cde,this.options=md({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new Ade}fF.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const a=n.onAdd();r.appendChild(a)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=SE(CE({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new Sde(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",Ede(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(b){this.eventManager.keyevent(b,this)}.bind(this));var r=document.createElement("div");r.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(a),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(r),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var u=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(u),r.appendChild(this._geolocateEl),this._showGeolocateButton()}var h=this._typeahead=new wde(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),h.getItemValue=this.options.getItemValue;var o=h.list.draw,g=this._footerNode=Mde();return h.list.draw=function(){o.call(this),g.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),g.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(g)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const r=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(r),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(r){const a=r.body.features[0];if(a){const u=aL.transformFeatureToGeolocationText(a,this.options.addressAccuracy);this._setInputValue(u),a.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:a})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var r=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,a=r?r.value:"";if(!a)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&oL[e.properties.short_code])t=md({},this.options.flyTo),this._map&&this._map.fitBounds(oL[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=md({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var r={zoom:this.options.zoom};t=md({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=Fc.LOCAL:e.reverseGeocode&&aL.REVERSE_GEOCODE_COORD_RGX.test(t)?n=Fc.REVERSE:n=Fc.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],r=/[\s,]+/;var a=this,u=n.reduce(function(o,g){if(a.options[g]===void 0||a.options[g]===null)return o;["countries","types","language"].indexOf(g)>-1?o[g]=a.options[g].split(r):o[g]=a.options[g];const b=typeof a.options[g].longitude=="number"&&typeof a.options[g].latitude=="number";if(g==="proximity"&&b){const A=a.options[g].longitude,D=a.options[g].latitude;o[g]=[A,D]}return o},{});switch(e){case Fc.REVERSE:{var h=t.split(r).map(function(o){return parseFloat(o,10)});a.options.flipCoordinates||h.reverse(),u.types&&u.types[0],u=md(u,{query:h,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(o){o in u&&delete u[o]})}break;case Fc.FORWARD:{const o=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(o)&&(t=t.replace(/,/g," ")),u=md(u,{query:t})}break}return u},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var r;switch(t){case Fc.LOCAL:r=Promise.resolve();break;case Fc.FORWARD:r=this.geocoderService.forwardGeocode(n).send();break;case Fc.REVERSE:r=this.geocoderService.reverseGeocode(n).send();break}var a=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],u=[],h=null;return r.catch(function(o){h=o}.bind(this)).then(function(o){this._hideLoadingIcon();var g={};return o?o.statusCode=="200"&&(g=o.body,g.request=o.request,g.headers=o.headers):g={type:"FeatureCollection",features:[]},g.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),g.features=g.features?a.concat(g.features):a,this.options.externalGeocoder?(u=this.options.externalGeocoder(e,g.features)||Promise.resolve([]),u.then(function(b){return g.features=g.features?b.concat(g.features):b,g},function(){return g})):g}.bind(this)).then(function(o){if(h)throw h;this.options.filter&&o.features.length&&(o.features=o.features.filter(this.options.filter)),o.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",o),this._typeahead.update(o.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",o))}.bind(this)).catch(function(o){this._hideLoadingIcon(),this._hideAttribution(),a.length&&this.options.localGeocoder||u.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(a)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:a}),this._eventEmitter.emit("error",{error:o})}.bind(this)),r},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(!!t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=Tde.language(e),n=kde.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=SE(CE({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=SE(CE({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(!!this._map){this._removeMarker();var t={color:"#4668F2"},n=md({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var Ide=fF;function Pde(e){document.getElementById("coordinates");const t={features:[{type:"Feature",geometry:{type:"Point",coordinates:[-79.46242786599252,43.75383226893149]},properties:{title:"Portable 1",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46243325527307,43.753970965485735]},properties:{title:"Portable 2",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46221099031513,43.75317237412631]},properties:{title:"Portable 3",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4624108175995,43.75314428115445]},properties:{title:"Portable 4",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46218818873812,43.75305128362666]},properties:{title:"Portable 5",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238399545628,43.753030941531875]},properties:{title:"Portable 6",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46256102100658,43.75326634251712]},properties:{title:"Portable 7",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462327663467,43.75335158721401]},properties:{title:"Room 119",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46234644222046,43.753461051808415]},properties:{title:"Room 121",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46236521768313,43.75354726659225]},properties:{title:"Room 123",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238265202406,43.75363735643279]},properties:{title:"Room 125",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462198032334,43.75360889118667]},properties:{title:"small gym (124)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46207609586855,43.75347184182684]},properties:{title:"fitness centre (124c)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46208442599088,43.75363465159106]},properties:{title:"team change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46199855338851,43.753670911751186]},properties:{title:"girls change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46195099685673,43.753506785659]},properties:{title:"boys change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46193094840253,43.75359351676818]},properties:{title:"equipment office (127D)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46188333944669,43.75353345567834]},properties:{title:"gym office (127E)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46191351470047,43.75364049932426]},properties:{title:"gym office (127A)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46172911873167,43.75361606821852]},properties:{title:"large gym (127)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4621022029668,43.75382222066108]},properties:{title:"Room 118T",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46215856297853,43.753759532291014]},properties:{title:"Room 118C",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46195278569445,43.75379119907919]},properties:{title:"Room 118E",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4618069554343,43.75382092588782]},properties:{title:"Room 114",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46167722609954,43.7537957223808]},properties:{title:"music office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145355825836,43.753934020553146]},properties:{title:"dance room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46121179888955,43.75373700003314]},properties:{title:"cafeteria/cafetorium",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46105544571898,43.75333204884339]},properties:{title:"library (134)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46107005200406,43.75322380678202]},properties:{title:"special education resource",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46104008434995,43.753229743456245]},properties:{title:"SAC room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100721719883,43.75323148904425]},properties:{title:"cyw",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46098063358639,43.753235329484454]},properties:{title:"library office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100511477736,43.75357005485046]},properties:{title:"staff room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4611868324436,43.75348515432293]},properties:{title:"student services",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4613271203871,43.7535216196801]},properties:{title:"Main Office (116)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612725332962,43.75326367491422]},properties:{title:"Room 108b",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46127074403375,43.75321326924049]},properties:{title:"Room 108a",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46128058522986,43.75315898346079]},properties:{title:"Room 106",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46125649284252,43.75304288437272]},properties:{title:"Room 104",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46122382537122,43.752906633057165]},properties:{title:"Room 102",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46136354515774,43.752898126964254]},properties:{title:"Room 101",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139777712486,43.753043114903306]},properties:{title:"Room 103",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46140380351744,43.75312579142903]},properties:{title:"Science Office (105)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145048325354,43.753248299164255]},properties:{title:"Room 107",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4614761683771,43.75338955719843]},properties:{title:"Room 109",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46164036883964,43.75341958509614]},properties:{title:"Room 111",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4617811841459,43.75340328772481]},properties:{title:"Room 113",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4618675399702,43.75338755291526]},properties:{title:"business office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4619749024224,43.753384181329636]},properties:{title:"Room 117",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238565237367,43.75363361197046]},properties:{title:"Room 231",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46236964343728,43.75353590861371]},properties:{title:"Room 229",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46235355018324,43.7534516311066]},properties:{title:"Room 227",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46233057723609,43.753381976637144]},properties:{title:"co-op office (226)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46232115842207,43.75333592207335]},properties:{title:"Room 225",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46218059901656,43.75335319315036]},properties:{title:"Room 223",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46211394375436,43.75346309583611]},properties:{title:"computer office (233)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46199367203847,43.753379882216166]},properties:{title:"Room 222",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46186832688937,43.75339349079542]},properties:{title:"Room 221",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46175240183594,43.75340709778331]},properties:{title:"Room 220",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163140622886,43.75342489140834]},properties:{title:"Room 219",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46148515501359,43.75340071235618]},properties:{title:"Room 213",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46146486998195,43.75331017352619]},properties:{title:"Room 211",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46144603105236,43.753222249695966]},properties:{title:"Room 209",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46142791795658,43.753137991624214]},properties:{title:"Room 207",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139302860175,43.75298885245036]},properties:{title:"Room 203",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46136767069875,43.75288156880836]},properties:{title:"Room 201",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46122821655393,43.752901057246845]},properties:{title:"Room 202",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612506789127,43.75298740995075]},properties:{title:"Room 204",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46126661842634,43.75306957486865]},properties:{title:"Room 206",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46128545635727,43.75315802234198]},properties:{title:"Room 208",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46130284491909,43.75324332707672]},properties:{title:"Room 210",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46132168256682,43.75332549164267]},properties:{title:"Room 212",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46134559208431,43.75341393834546]},properties:{title:"Room 214",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154185196188,43.75361634427]},properties:{title:"dark room",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46144650667092,43.75375052923056]},properties:{title:"dark room (216A)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4615603074014,43.75358834987574]},properties:{title:"book room",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4614354341234,43.753830952741794]},properties:{title:"Room 216",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46158008591014,43.753810213485025]},properties:{title:"Room 215",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145890294959,43.75391685074018]},properties:{title:"Room 218",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46160715142894,43.75393995400347]},properties:{title:"Room 217",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46138769422942,43.75345548469946]},properties:{title:"modern languages office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139276605106,43.753478131876875]},properties:{title:"history office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139737638734,43.75350077690234]},properties:{title:"geography office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46140705817172,43.753543403070495]},properties:{title:"english office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46141581781006,43.75359668555146]},properties:{title:"math office (238)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46150331164226,43.753973545031556]},properties:{title:"art office (218A)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100506863056,43.75350601053009]},properties:{title:"library room A",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46098927243114,43.753440973854964]},properties:{title:"library room B",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.461073977011,43.75360391989807]},properties:{title:"Exit 1",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612968674094,43.7528424736621]},properties:{title:"Exit 2",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154945637606,43.75343068463039]},properties:{title:"Exit 3",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46207053027169,43.753387916496564]},properties:{title:"Exit 4",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462225356633,43.75329998220087]},properties:{title:"Exit 5",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4623567892464,43.75368485054281]},properties:{title:"Exit 6",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46225551171938,43.753697201431095]},properties:{title:"Exit 7",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4616471361122,43.753852812405086]},properties:{title:"Exit 7C",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163294208165,43.75396385435636]},properties:{title:"Exit 7D",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163524982596,43.753980964854605]},properties:{title:"Exit 7E",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4616518679316,43.75403205707923]},properties:{title:"Exit 7F",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154103707552,43.754010022029945]},properties:{title:"Exit 8",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46143369162724,43.75400234476848]},properties:{title:"Exit 8A",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139309605415,43.75381129680861]},properties:{title:"Exit 8B",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46109108651713,43.75380139567167]},properties:{title:"Exit 8C",floor:1}},{type:"Feature",properties:{title:"Stage",floor:1},geometry:{type:"Point",coordinates:[-79.46198968848333,43.75325517632149]}},{type:"Feature",properties:{title:"Booth 13",floor:1},geometry:{type:"Point",coordinates:[-79.46219738125589,43.75323295523572]}},{type:"Feature",properties:{title:"Booth 12",floor:1},geometry:{type:"Point",coordinates:[-79.46207866115284,43.75318521982399]}},{type:"Feature",properties:{title:"Booth 11",floor:1},geometry:{type:"Point",coordinates:[-79.46165706009798,43.75321935736699]}},{type:"Feature",properties:{title:"Booth 10",floor:1},geometry:{type:"Point",coordinates:[-79.4618750685682,43.75311118946689]}},{type:"Feature",properties:{title:"Booth 14",floor:1},geometry:{type:"Point",coordinates:[-79.46209468956859,43.753125035135554]}},{type:"Feature",properties:{title:"Booth 15",floor:1},geometry:{type:"Point",coordinates:[-79.46207501005615,43.753063291649454]}},{type:"Feature",properties:{title:"Booth 08",floor:1},geometry:{type:"Point",coordinates:[-79.46204669592589,43.75298912538665]}},{type:"Feature",properties:{title:"Booth 07",floor:1},geometry:{type:"Point",coordinates:[-79.46193911779909,43.75295355028311]}},{type:"Feature",properties:{title:"Booth 06",floor:1},geometry:{type:"Point",coordinates:[-79.46181749497252,43.752941266286854]}},{type:"Feature",properties:{title:"Booth 05",floor:1},geometry:{type:"Point",coordinates:[-79.46170511120118,43.75294733544803]}},{type:"Feature",properties:{title:"Booth 04",floor:1},geometry:{type:"Point",coordinates:[-79.46146134490077,43.75285072422923]}},{type:"Feature",properties:{title:"Booth 03",floor:1},geometry:{type:"Point",coordinates:[-79.46147604027834,43.75293562803412]}},{type:"Feature",properties:{title:"Booth 02",floor:1},geometry:{type:"Point",coordinates:[-79.46150013755523,43.753062392390746]}},{type:"Feature",properties:{title:"Booth 01",floor:1},geometry:{type:"Point",coordinates:[-79.46151085321212,43.753155288730596]}},{type:"Feature",properties:{title:"Booth 09",floor:1},geometry:{type:"Point",coordinates:[-79.46168273591726,43.7530478330533]}}],type:"FeatureCollection"};function n(a){const u=[];for(const h of t.features)h.properties.title.toLowerCase().includes(a.toLowerCase())&&(h.place_name=`${h.properties.title}`,h.center=h.geometry.coordinates,u.push(h));return u}const r=new Ide({accessToken:xp.accessToken,localGeocoder:n,localGeocoderOnly:!0,zoom:19,placeholder:"Search School",marker:{color:"red"},mapboxgl:xp,render:function(a){return`<div class='geocoder-dropdown-item'>
    <span class='geocoder-dropdown-text'>
    ${a.properties.title}
    </span>
    </div>`}});e.addControl(r),e.on("load",()=>{e.addSource("floorOne",{type:"image",url:"../static/img/FloorOne.jpg",coordinates:[[-79.46270547634776,43.75413886166868],[-79.46072668772469,43.75413886166868],[-79.46072668772469,43.75274955916902],[-79.46270547634776,43.75274955916902]]}),e.addSource("floorTwo",{type:"image",url:"../static/img/FloorTwo.jpg",coordinates:[[-79.46270547634776,43.75413886166868],[-79.46072668772469,43.75413886166868],[-79.46072668772469,43.75274955916902],[-79.46270547634776,43.75274955916902]]}),e.addSource("outline",{type:"image",url:"../static/img/booths/booths.jpg",coordinates:[[-79.46155542041252,43.7538999252219],[-79.46100243451043,43.75394902268886],[-79.46092763227323,43.7535715308978],[-79.46146639944199,43.75351043643877]]}),e.addControl(new xp.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),e.addLayer({id:"floorOne",source:"floorOne",type:"raster",layout:{visibility:"visible"}}),e.addLayer({id:"floorTwo",source:"floorTwo",type:"raster",layout:{visibility:"none"}}),e.addLayer({id:"outline",source:"outline",type:"raster",layout:{visibility:"none"}}),e.addSource("booths",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:1,description:' <b> Mackenzie Science Club </b><p><a href="https://maclyonsden.com/club/msc" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4613942054596,43.75355665507274]}},{type:"Feature",properties:{id:2,description:'<b>ACED Team</b><p><a href="https://maclyonsden.com/club/aced" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46135445939534,43.75356090732248]}},{type:"Feature",properties:{id:3,description:'<b>MCPT</b><p><a href="https://maclyonsden.com/club/mcpt" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46140496158867,43.75360322941137]}},{type:"Feature",properties:{id:4,description:'<b>HOSA Team</b><p><a href="https://maclyonsden.com/club/hosa" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46136381338786,43.75360627182371]}},{type:"Feature",properties:{id:5,description:'<b>Animanga Club</b><p><a href="https://maclyonsden.com/club/animanga-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46128489186641,43.75364329694912]}},{type:"Feature",properties:{id:6,description:'<b>Cubing Club</b><p><a href="https://maclyonsden.com/club/cubing-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46128608332647,43.75365481503346]}},{type:"Feature",properties:{id:7,description:'<b>Linguistics Club</b><p><a href="https://maclyonsden.com/club/linguistics" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4612909873974,43.75367164651922]}},{type:"Feature",properties:{id:8,description:'<b>Chess Club</b><p><a href="https://maclyonsden.com/club/chess-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129246204951,43.75368139874675]}},{type:"Feature",properties:{id:9,description:'<b>Book Club</b><p><a href="https://maclyonsden.com/club/book-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129614052039,43.75369893721205]}},{type:"Feature",properties:{id:10,description:'<b>3D Design Club</b><p><a href="https://maclyonsden.com/club/3d-design-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129823092178,43.753710973343345]}},{type:"Feature",properties:{id:11,description:'<b>History Club</b><p><a href="https://maclyonsden.com/club/history-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46130174953414,43.75372861925064]}},{type:"Feature",properties:{id:12,description:'<b>French Club</b><p><a href="https://maclyonsden.com/club/french-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46130560495627,43.75373952230913]}},{type:"Feature",properties:{id:13,description:'<b>The Lyon</b><p><a href="https://maclyonsden.com/club/the-lyon" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46125581707167,43.75362888910291]}},{type:"Feature",properties:{id:14,description:'<b>Tree Huggers</b><p><a href="https://maclyonsden.com/club/treehuggers" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124157189129,43.75363030445041]}},{type:"Feature",properties:{id:15,description:'<b>Mac Radio Annoucners</b><p><a href="https://maclyonsden.com/club/mac-radio-announcers" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46121714530972,43.753632722096654]}},{type:"Feature",properties:{id:16,description:`<b>Let's Talk Now Club</b><p><a href="https://maclyonsden.com/club/lets-talk-now" target="_blank" title="Opens in a new window">Club Page</a></p>`,icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46120288834399,43.7536349018703]}},{type:"Feature",properties:{id:17,description:'<b>UNICEF</b><p><a href="https://maclyonsden.com/club/unicef" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46117691331494,43.753637686444335]}},{type:"Feature",properties:{id:18,description:'<b>Rainbow Club</b><p><a href="https://maclyonsden.com/club/rainbow-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116265520898,43.75363938250496]}},{type:"Feature",properties:{id:19,description:'<b>UNI-talk</b><p><a href="https://maclyonsden.com/club/UNI-talk" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46113823553753,43.75364216826375]}},{type:"Feature",properties:{id:20,description:'<b>Wellness @ Mac</b><p><a href="https://maclyonsden.com/club/wellness-at-mac" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112314101545,43.75364398532042]}},{type:"Feature",properties:{id:21,description:'<b>Gardening Club</b><p><a href="https://maclyonsden.com/club/gardening-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46109867295455,43.75364676961962]}},{type:"Feature",properties:{id:22,description:'<b>Key Club</b><p><a href="https://maclyonsden.com/club/key-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46108357843245,43.75364846567999]}},{type:"Feature",properties:{id:23,description:'<b>Careers in Design</b><p><a href="https://maclyonsden.com/club/careers-in-design" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46105850701775,43.753651482449214]}},{type:"Feature",properties:{id:24,description:'<b>The Flounder</b><p><a href="https://maclyonsden.com/club/flounder" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46104391452232,43.753652694705266]}},{type:"Feature",properties:{id:25,description:'<b>Cybersecurity Club</b><p><a href="https://maclyonsden.com/club/cybersecurity-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46126130154995,43.75369496490765]}},{type:"Feature",properties:{id:26,description:'<b>Mackenzie Engineeering Club</b><p><a href="https://maclyonsden.com/club/MEC" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46125836307769,43.75368385665968]}},{type:"Feature",properties:{id:27,description:'<b>MEDLIFE</b><p><a href="https://maclyonsden.com/club/medlife" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46123535767697,43.7536597356675]}},{type:"Feature",properties:{id:28,description:'<b>Baycrest-Mackenzie Partnership</b><p><a href="https://maclyonsden.com/club/mackenzie-baycrest-partnership" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46121946489153,43.75366139859827]}},{type:"Feature",properties:{id:29,description:'<b>Women in STEM</b><p><a href="https://maclyonsden.com/club/women-in-stem" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119664892562,43.75366456109961]}},{type:"Feature",properties:{id:30,description:'<b>Math Club</b><p><a href="https://maclyonsden.com/club/math-club" target="_blank" title="Math Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46118165938897,43.7536663936842]}},{type:"Feature",properties:{id:31,description:'<b>Physics Club</b><p><a href="https://maclyonsden.com/club/physics-club" target="_blank" title="Physics Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116413872673,43.75369319879434]}},{type:"Feature",properties:{id:32,description:'<b>Chemistry Club</b><p><a href="https://maclyonsden.com/club/chemistry-club" target="_blank" title="Chemistry Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116782229596,43.75370450389764]}},{type:"Feature",properties:{id:33,description:'<b>Muslim Culture Club</b><p><a href="https://maclyonsden.com/club/muslim-culture-club" target="_blank" title="Muslim Culture Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119500554012,43.75372414542039]}},{type:"Feature",properties:{id:34,description:'<b>Biology Club</b><p><a href="https://maclyonsden.com/club/bio-club" target="_blank" title="Biology Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46120953770222,43.75372133179536]}},{type:"Feature",properties:{id:35,description:"helk",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46123327399353,43.75371816841607]}},{type:"Feature",properties:{id:36,description:'<b>Jewish Culture Club</b><p><a href="https://maclyonsden.com/club/jewish-culture-club" target="_blank" title="Jewish Culture Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124826422738,43.75371650221419]}},{type:"Feature",properties:{id:37,description:'<b>Dance Team</b><p><a href="https://www.instagram.com/wlmac.danceteam/" target="_blank" title="Dance Teal">@wlmac.danceteam</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46114243759361,43.75370838709108]}},{type:"Feature",properties:{id:38,description:'<b>Central Arts Council</b><p><a href="https://maclyonsden.com/club/artscouncil" target="_blank" title="Central Arts Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46113955168924,43.75369793518965]}},{type:"Feature",properties:{id:39,description:'<b>Mackenzie Calligraphy Club</b><p><a href="https://maclyonsden.com/club/mackenzie-calligraphy-club" target="_blank" title="Mackenzie Calligraphy Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46111398384248,43.753675016730824]}},{type:"Feature",properties:{id:40,description:'<b>Creator\u2019s Joy</b><p><a href="https://maclyonsden.com/club/creators-joy" target="_blank" title="Creator\u2019s Joy">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46109894955666,43.75367648606982]}},{type:"Feature",properties:{id:41,description:'<b>Creative Arts Alliance</b><p><a href="https://maclyonsden.com/club/creative-arts-alliance" target="_blank" title="Creative Arts Alliance">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46107682531661,43.75367831739524]}},{type:"Feature",properties:{id:42,description:'<b>Creative Writing Club</b><p><a href="https://maclyonsden.com/club/mackenzie-creative-writing-club" target="_blank" title="Creative Writing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4610616059595,43.75367998259105]}},{type:"Feature",properties:{id:43,description:"kgjhy",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46107528243958,43.753688731082434]}},{type:"Feature",properties:{id:44,description:"jhfjhg",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46107528243958,43.753688731082434]}},{type:"Feature",properties:{id:45,description:'<b>Visual Arts Council</b><p><a href="https://maclyonsden.com/club/visual-arts-council" target="_blank" title="Visual Arts Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4610749649739,43.75373709635679]}},{type:"Feature",properties:{id:46,description:'<b>Drama Council</b><p><a href="https://maclyonsden.com/club/drama-concil" target="_blank" title="Drama Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46108924570751,43.753734932774734]}},{type:"Feature",properties:{id:47,description:'<b>Composing Club</b><p><a href="https://maclyonsden.com/club/composing-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46111252113948,43.753732934566415]}},{type:"Feature",properties:{id:48,description:'<b>Music Council</b></b><p><a href="https://maclyonsden.com/club/music-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112774136735,43.753731102865345]}},{type:"Feature",properties:{id:49,description:'<b>Model United Nations</b></b><p><a href="https://maclyonsden.com/club/mun" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46127993280194,43.75374969548815]}},{type:"Feature",properties:{id:50,description:'<b>Mackenzie Athletic Council</b></b><p><a href="https://maclyonsden.com/club/athletic-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46126622741446,43.75375153977589]}},{type:"Feature",properties:{id:51,description:'<b>Mock Trials</b></b><p><a href="https://maclyonsden.com/club/mock-trials" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124041855968,43.75375353773157]}},{type:"Feature",properties:{id:52,description:'<b>Business Council</b></b><p><a href="https://maclyonsden.com/club/business-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46122634812941,43.7537552030515]}},{type:"Feature",properties:{id:53,description:'<b>NBA Fan Club</b></b><p><a href="https://maclyonsden.com/club/nba-fan-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119984807186,43.7537563689765]}},{type:"Feature",properties:{id:54,description:'<b>Debate Club</b></b><p><a href="https://maclyonsden.com/club/debate-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46118508608991,43.753758865571655]}},{type:"Feature",properties:{id:55,description:'<b>Kinesiology and Fitness</b></b><p><a href="https://maclyonsden.com/club/kinesiology-and-fitness" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46115973722371,43.75376186231631]}},{type:"Feature",properties:{id:56,description:'<b>Esports Club</b></b><p><a href="https://maclyonsden.com/club/esports-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46114658851327,43.753762862867404]}},{type:"Feature",properties:{id:57,description:'<b>TED Club</b></b><p><a href="https://maclyonsden.com/club/ted-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}},{type:"Feature",properties:{id:58,description:"sdfsd",icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}},{type:"Feature",properties:{id:59,description:"<b>BILT</b><p>No Information Avalible</p>",icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}}]}}),e.addSource("mactoberfest",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:1,description:"Stage",icon:"castle"},geometry:{type:"Point",coordinates:[-79.46198968848333,43.75325517632149]}},{type:"Feature",properties:{id:13,description:"<b>Booth 12</b><p>Drama Council (Goodie Bags + Rice Crispies + Improv Costume Contest)</p> ",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46219738125589,43.75323295523572]}},{type:"Feature",properties:{id:12,description:"<b>Booth 11</b> <p>Gardening Club (Cookies)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46207866115284,43.75318521982399]}},{type:"Feature",properties:{id:11,description:"<b>Booth 10</b> <p>Music Council (Musical Chairs)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46165706009798,43.75321935736699]}},{type:"Feature",properties:{id:10,description:"<b>Booth 09</b> <p>MCPT (Games)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.4618750685682,43.75311118946689]}},{type:"Feature",properties:{id:14,description:"<b>Booth 13</b> <p>Photo Booth</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46209468956859,43.753125035135554]}},{type:"Feature",properties:{id:15,description:"<b>Booth 14</b> <p>DJ</p>",icon:"music"},geometry:{type:"Point",coordinates:[-79.46207501005615,43.753063291649454]}},{type:"Feature",properties:{id:8,description:"<b>Booth 07</b> <p>Let' Talk Now (Timbits)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46193911779909,43.75295355028311]}},{type:"Feature",properties:{id:7,description:"<b>Booth 06</b> <p>MSC (Chips, Cotton Candy, Tic Tac)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46181749497252,43.752941266286854]}},{type:"Feature",properties:{id:6,description:"<b>Booth 05</b> <p>UNICEF (Junior Chickens + Dounuts)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46170511120118,43.75294733544803]}},{type:"Feature",properties:{id:5,description:"<b>Booth 04 </b> <p>Creator's Joy (Juice Boxes)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46159780966113,43.7528969650275]}},{type:"Feature",properties:{id:4,description:"<b>Booth 03 </b> <p>Book Club (Bookmarks + Baked Goods)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46147604027834,43.75293562803412]}},{type:"Feature",properties:{id:2,description:"<b>Booth 02 </b> <p> Dance Team (Popcorn)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46150013755523,43.753062392390746]}},{type:"Feature",properties:{id:1,description:"<b>Booth 01 </b> <p>Athletic Council (Hot Chocolate)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46151085321212,43.753155288730596]}},{type:"Feature",properties:{id:9,description:"<b>Booth 08 </b> <p>Dance Council (Instax Photo Booth)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46168273591726,43.7530478330533]}}]}}),e.on("click","mactoberfest",u=>{const h=u.features[0].geometry.coordinates.slice(),o=u.features[0].properties.description;new xp.Popup().setLngLat(h).setHTML(o).addTo(e)}),e.on("mouseenter","mactoberfest",()=>{e.getCanvas().style.cursor="pointer"}),e.on("mouseleave","mactoberfest",()=>{e.getCanvas().style.cursor=""});var a=document.querySelector("input[name=checkbox]");a.addEventListener("change",function(){this.checked?(console.log("Checkbox is checked.."),e.setLayoutProperty("floorTwo","visibility","visible"),e.setLayoutProperty("floorOne","visibility","none"),e.setLayoutProperty("booths","visibility","none")):(console.log("Checkbox is not checked.."),e.setLayoutProperty("floorOne","visibility","visible"),e.setLayoutProperty("floorTwo","visibility","none"),e.setLayoutProperty("booths","visibility","visible"))}),r.on("result",({result:u})=>{console.log(u.properties.title),u.properties.floor==1?(a.checked=!1,e.setLayoutProperty("floorOne","visibility","visible"),e.setLayoutProperty("floorTwo","visibility","none"),e.setLayoutProperty("booths","visibility","visible")):(a.checked=!0,e.setLayoutProperty("floorTwo","visibility","visible"),e.setLayoutProperty("floorOne","visibility","none"),e.setLayoutProperty("booths","visibility","none"))})})}xp.accessToken="pk.eyJ1IjoibmlraXN1IiwiYSI6ImNrc3A3c2FieTAwM3kybnA3anNjY2c3MXMifQ.T_8vAyTc4PMuGUC23vIOhA";const Dde=()=>{const e=m.exports.useRef(null),[t,n]=m.exports.useState(-79.46155348420591),[r,a]=m.exports.useState(43.753374130758445),[u,h]=m.exports.useState(19);return m.exports.useEffect(()=>{const o=new xp.Map({container:e.current,style:"mapbox://styles/nikisu/cktk76xy90rgm17s7q7pg0g55",center:[t,r],zoom:u});return Pde(o),()=>o.remove()},[]),ot.createElement(ot.Fragment,null,ot.createElement("link",{rel:"stylesheet",href:"/static/css/map.css"}),ot.createElement("link",{rel:"stylesheet",href:"/static/css/mapbox-gl-geocoder.css"}),ot.createElement("link",{rel:"stylesheet",href:"/static/css/mapbox-gl.css"}),ot.createElement("script",{src:"/static/js/mapbox-gl-geocoder.min.js"}),ot.createElement("script",{src:"/static/js/mapbox-gl.js"}),ot.createElement("div",{className:"container"},ot.createElement("div",{className:"map-container"},ot.createElement("div",{className:"heading"},ot.createElement("div",{className:"legend"},ot.createElement("div",{className:"legend-items"},ot.createElement("div",{className:"legend-square",style:{backgroundColor:"#946987"}}),ot.createElement("span",null,"General Spaces")),ot.createElement("div",{className:"legend-items"},ot.createElement("div",{className:"legend-square",style:{backgroundColor:"#946469"}}),ot.createElement("span",null,"Washrooms + Change Rooms")),ot.createElement("div",{className:"legend-items"},ot.createElement("div",{className:"legend-square",style:{backgroundColor:"#b0a169"}}),ot.createElement("span",null,"Offices")),ot.createElement("div",{className:"legend-items"},ot.createElement("div",{className:"legend-square",style:{backgroundColor:"#68936f"}}),ot.createElement("span",null,"Classrooms + Labs")),ot.createElement("div",{className:"legend-items"},ot.createElement("div",{className:"legend-square",style:{backgroundColor:"#5d97d1"}}),ot.createElement("span",null,"Stairways")),ot.createElement("div",{className:"legend-items"},ot.createElement("div",{className:"legend-square",style:{backgroundColor:"#3774b2"}}),ot.createElement("span",null,"Hallways")),ot.createElement("div",{className:"legend-items"},ot.createElement("div",{className:"legend-square",style:{backgroundColor:"#646d78"}}),ot.createElement("span",null,"Miscellaneous")))),ot.createElement("div",{style:{margin:0}},ot.createElement("a",{href:"#help"},ot.createElement("i",{className:"small material-icons icon-blue"},"help"))),ot.createElement("div",{className:"switch-container"},ot.createElement("div",{className:"switch",id:"floor"},ot.createElement("label",{style:{fontSize:"1rem"}},"Floor One",ot.createElement("input",{type:"checkbox",name:"checkbox",id:"checkbox"}),ot.createElement("span",{className:"lever"}),"Floor Two"))),ot.createElement("pre",{id:"coordinates",className:"coordinates"}),ot.createElement("div",{className:"map mapboxgl-map",id:"map",ref:e},ot.createElement("div",{className:"mapboxgl-canary",style:{visibility:"hidden"}}),ot.createElement("div",{className:"mapboxgl-canvas-container mapboxgl-interactive mapboxgl-touch-drag-pan mapboxgl-touch-zoom-rotate"},ot.createElement("canvas",{className:"mapboxgl-canvas",tabIndex:0,"aria-label":"Map",role:"region",width:"998",height:"532",style:{width:"998px",height:"532px"}})),ot.createElement("div",{className:"mapboxgl-control-container"},ot.createElement("div",{className:"mapboxgl-ctrl-top-left"}),ot.createElement("div",{className:"mapboxgl-ctrl-top-right"},ot.createElement("div",{className:"mapboxgl-ctrl-geocoder mapboxgl-ctrl"},ot.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},ot.createElement("path",{d:"M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"})),ot.createElement("input",{type:"text",className:"mapboxgl-ctrl-geocoder--input",placeholder:"Search School","aria-label":"Search School"}),ot.createElement("div",{className:"suggestions-wrapper"},ot.createElement("ul",{className:"suggestions",style:{display:"none"}})),ot.createElement("div",{className:"mapboxgl-ctrl-geocoder--pin-right"},ot.createElement("button",{"aria-label":"Clear",className:"mapboxgl-ctrl-geocoder--button"},ot.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-close",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},ot.createElement("path",{d:"M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"}))),ot.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-loading",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},ot.createElement("path",{fill:"#333",d:"M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"}),ot.createElement("path",{opacity:".1",d:"M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"})))),ot.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group"},ot.createElement("button",{className:"mapboxgl-ctrl-geolocate",type:"button",title:"Find my location","aria-label":"Find my location","aria-pressed":"false"},ot.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"})))),ot.createElement("div",{className:"mapboxgl-ctrl-bottom-left"},ot.createElement("div",{className:"mapboxgl-ctrl",style:{display:"block"}},ot.createElement("a",{className:"mapboxgl-ctrl-logo",target:"_blank",rel:"noopener nofollow",href:"https://www.mapbox.com/","aria-label":"Mapbox logo"}))),ot.createElement("div",{className:"mapboxgl-ctrl-bottom-right"},ot.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-attrib"},ot.createElement("button",{className:"mapboxgl-ctrl-attrib-button",type:"button",title:"Toggle attribution","aria-label":"Toggle attribution"}),ot.createElement("div",{className:"mapboxgl-ctrl-attrib-inner",role:"list"},ot.createElement("a",{href:"https://www.mapbox.com/about/maps/",target:"_blank",title:"Mapbox","aria-label":"Mapbox",role:"listitem"},"\xA9 Mapbox")," ",ot.createElement("a",{href:"https://www.openstreetmap.org/about/",target:"_blank",title:"OpenStreetMap","aria-label":"OpenStreetMap",role:"listitem"},"\xA9 OpenStreetMap")," ",ot.createElement("a",{className:"mapbox-improve-map",href:"https://apps.mapbox.com/feedback/?owner=nikisu&id=cktk76xy90rgm17s7q7pg0g55&access_token=pk.eyJ1IjoibmlraXN1IiwiYSI6ImNrc3A3c2FieTAwM3kybnA3anNjY2c3MXMifQ.T_8vAyTc4PMuGUC23vIOhA",target:"_blank",title:"Map feedback","aria-label":"Map feedback",role:"listitem",rel:"noopener nofollow"},"Improve this map")))))),ot.createElement("div",{className:"controls",id:"help"},ot.createElement("div",{className:"mobile-controls"},ot.createElement("details",null,ot.createElement("summary",null,ot.createElement("h6",null,ot.createElement("strong",null," Mobile Controls"))),ot.createElement("ul",null,ot.createElement("li",null,ot.createElement("strong",null,"Pan screen:"),"1 finger + drag"),ot.createElement("li",null,ot.createElement("strong",null,"Zoom In/Out:"),"2 fingers + pinch screen"),ot.createElement("li",null,ot.createElement("strong",null,"Perspective:"),"2 fingers + drag")))),ot.createElement("div",{className:"computer-controls"},ot.createElement("details",null,ot.createElement("summary",null,ot.createElement("h6",null,ot.createElement("strong",null," Computer Controls"))),ot.createElement("ul",null,ot.createElement("li",null,ot.createElement("strong",null,"Pan screen:"),"drag screen"),ot.createElement("li",null,ot.createElement("strong",null,"Zoom In/Out:"),"double click OR scroll up or down"),ot.createElement("li",null,ot.createElement("strong",null,"Perspective:"),"Ctrl + drag"))))))))},Rde=()=>{const e=m.exports.useContext(Xr);let t=e.user;const[n,r]=m.exports.useState("");return m.exports.useEffect(()=>{const a=[];e.allOrgs.forEach(u=>{t.organizations.find(h=>h===u.id)&&a.push(u.name)}),r(a.join(", "))},[e.allOrgs]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("div",{className:"header"},m.exports.createElement("img",{className:"circle responsive-img profile-picture",src:t.gravatar_url,alt:`${t.username}'s profile picture`}),m.exports.createElement("div",{className:"name-info"},m.exports.createElement("h5",{className:"full-name"},t.first_name," ",t.last_name),m.exports.createElement("h6",{className:"username"},t.username)),m.exports.createElement("div",{className:"edit-button"},m.exports.createElement("i",{className:"zmdi zmdi-fw-3x zmdi-edit"}),m.exports.createElement(nn,{to:"/accounts/profile/update"},"Edit"))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"body"},m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},"Graduating"),m.exports.createElement("div",null,t.graduating_year)),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},"Executive of"),n),m.exports.createElement("br",null),m.exports.createElement("div",null,t.bio?m.exports.createElement("p",null,t.bio):m.exports.createElement("p",null,"This user has not shared any information."))))},Lde=()=>{const e=Ii(),t=m.exports.useContext(Xr);let n=t.user;m.exports.useEffect(()=>{Eo()||e("/accounts/login")});const{register:r,handleSubmit:a,watch:u,reset:h,formState:{errors:o}}=Ck();m.exports.useEffect(()=>{"username"in n&&(console.log("User:",{...t.user,graduating_year:t.user.graduating_year.toString()}),h({...t.user,graduating_year:t.user.graduating_year.toString()}))},[t.user]);const g=b=>{console.log(b),t.putAPI(`${mr.POST.USER_UPDATE}/${n.id}`,b).then(A=>{console.log("Successfully updated user"),e("/accounts/login")}).catch(A=>{console.log("Failed to update user"),t.refreshAuth()})};return m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/profile/update.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/base.css"}),m.exports.createElement("div",{className:"header"},m.exports.createElement("img",{className:"circle responsive-img profile-picture",src:n.gravatar_url,alt:`${n.username}'s profile picture`}),m.exports.createElement("div",{className:"name-info"},m.exports.createElement("h5",{className:"full-name"},`${n.first_name} ${n.last_name}`),m.exports.createElement("h6",{className:"username"},n.username))),m.exports.createElement("hr",null),m.exports.createElement("div",{className:"body"},m.exports.createElement("div",{className:"avatar"},m.exports.createElement("a",{href:"https://gravatar.com/",target:"_blank"},"Edit profile photo"),m.exports.createElement("br",null)),m.exports.createElement("form",{onSubmit:a(g)},m.exports.createElement("div",{className:"field bio"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_bio"},"Bio:")),m.exports.createElement("span",null,m.exports.createElement("textarea",{...r("bio"),name:"bio",cols:40,rows:10,id:"id_bio"}))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_timezone"},"Timezone:")),m.exports.createElement("span",null,m.exports.createElement("select",{...r("timezone"),name:"timezone",className:"browser-default",id:"id_timezone"},m.exports.createElement("option",{value:"Africa/Abidjan"},"Africa/Abidjan"),m.exports.createElement("option",{value:"Africa/Accra"},"Africa/Accra"),m.exports.createElement("option",{value:"Africa/Addis_Ababa"},"Africa/Addis_Ababa"),m.exports.createElement("option",{value:"Africa/Algiers"},"Africa/Algiers"),m.exports.createElement("option",{value:"Africa/Asmara"},"Africa/Asmara"),m.exports.createElement("option",{value:"Africa/Bamako"},"Africa/Bamako"),m.exports.createElement("option",{value:"Africa/Bangui"},"Africa/Bangui"),m.exports.createElement("option",{value:"Africa/Banjul"},"Africa/Banjul"),m.exports.createElement("option",{value:"Africa/Bissau"},"Africa/Bissau"),m.exports.createElement("option",{value:"Africa/Blantyre"},"Africa/Blantyre"),m.exports.createElement("option",{value:"Africa/Brazzaville"},"Africa/Brazzaville"),m.exports.createElement("option",{value:"Africa/Bujumbura"},"Africa/Bujumbura"),m.exports.createElement("option",{value:"Africa/Cairo"},"Africa/Cairo"),m.exports.createElement("option",{value:"Africa/Casablanca"},"Africa/Casablanca"),m.exports.createElement("option",{value:"Africa/Ceuta"},"Africa/Ceuta"),m.exports.createElement("option",{value:"Africa/Conakry"},"Africa/Conakry"),m.exports.createElement("option",{value:"Africa/Dakar"},"Africa/Dakar"),m.exports.createElement("option",{value:"Africa/Dar_es_Salaam"},"Africa/Dar_es_Salaam"),m.exports.createElement("option",{value:"Africa/Djibouti"},"Africa/Djibouti"),m.exports.createElement("option",{value:"Africa/Douala"},"Africa/Douala"),m.exports.createElement("option",{value:"Africa/El_Aaiun"},"Africa/El_Aaiun"),m.exports.createElement("option",{value:"Africa/Freetown"},"Africa/Freetown"),m.exports.createElement("option",{value:"Africa/Gaborone"},"Africa/Gaborone"),m.exports.createElement("option",{value:"Africa/Harare"},"Africa/Harare"),m.exports.createElement("option",{value:"Africa/Johannesburg"},"Africa/Johannesburg"),m.exports.createElement("option",{value:"Africa/Juba"},"Africa/Juba"),m.exports.createElement("option",{value:"Africa/Kampala"},"Africa/Kampala"),m.exports.createElement("option",{value:"Africa/Khartoum"},"Africa/Khartoum"),m.exports.createElement("option",{value:"Africa/Kigali"},"Africa/Kigali"),m.exports.createElement("option",{value:"Africa/Kinshasa"},"Africa/Kinshasa"),m.exports.createElement("option",{value:"Africa/Lagos"},"Africa/Lagos"),m.exports.createElement("option",{value:"Africa/Libreville"},"Africa/Libreville"),m.exports.createElement("option",{value:"Africa/Lome"},"Africa/Lome"),m.exports.createElement("option",{value:"Africa/Luanda"},"Africa/Luanda"),m.exports.createElement("option",{value:"Africa/Lubumbashi"},"Africa/Lubumbashi"),m.exports.createElement("option",{value:"Africa/Lusaka"},"Africa/Lusaka"),m.exports.createElement("option",{value:"Africa/Malabo"},"Africa/Malabo"),m.exports.createElement("option",{value:"Africa/Maputo"},"Africa/Maputo"),m.exports.createElement("option",{value:"Africa/Maseru"},"Africa/Maseru"),m.exports.createElement("option",{value:"Africa/Mbabane"},"Africa/Mbabane"),m.exports.createElement("option",{value:"Africa/Mogadishu"},"Africa/Mogadishu"),m.exports.createElement("option",{value:"Africa/Monrovia"},"Africa/Monrovia"),m.exports.createElement("option",{value:"Africa/Nairobi"},"Africa/Nairobi"),m.exports.createElement("option",{value:"Africa/Ndjamena"},"Africa/Ndjamena"),m.exports.createElement("option",{value:"Africa/Niamey"},"Africa/Niamey"),m.exports.createElement("option",{value:"Africa/Nouakchott"},"Africa/Nouakchott"),m.exports.createElement("option",{value:"Africa/Ouagadougou"},"Africa/Ouagadougou"),m.exports.createElement("option",{value:"Africa/Porto-Novo"},"Africa/Porto-Novo"),m.exports.createElement("option",{value:"Africa/Sao_Tome"},"Africa/Sao_Tome"),m.exports.createElement("option",{value:"Africa/Tripoli"},"Africa/Tripoli"),m.exports.createElement("option",{value:"Africa/Tunis"},"Africa/Tunis"),m.exports.createElement("option",{value:"Africa/Windhoek"},"Africa/Windhoek"),m.exports.createElement("option",{value:"America/Adak"},"America/Adak"),m.exports.createElement("option",{value:"America/Anchorage"},"America/Anchorage"),m.exports.createElement("option",{value:"America/Anguilla"},"America/Anguilla"),m.exports.createElement("option",{value:"America/Antigua"},"America/Antigua"),m.exports.createElement("option",{value:"America/Araguaina"},"America/Araguaina"),m.exports.createElement("option",{value:"America/Argentina/Buenos_Aires"},"America/Argentina/Buenos_Aires"),m.exports.createElement("option",{value:"America/Argentina/Catamarca"},"America/Argentina/Catamarca"),m.exports.createElement("option",{value:"America/Argentina/Cordoba"},"America/Argentina/Cordoba"),m.exports.createElement("option",{value:"America/Argentina/Jujuy"},"America/Argentina/Jujuy"),m.exports.createElement("option",{value:"America/Argentina/La_Rioja"},"America/Argentina/La_Rioja"),m.exports.createElement("option",{value:"America/Argentina/Mendoza"},"America/Argentina/Mendoza"),m.exports.createElement("option",{value:"America/Argentina/Rio_Gallegos"},"America/Argentina/Rio_Gallegos"),m.exports.createElement("option",{value:"America/Argentina/Salta"},"America/Argentina/Salta"),m.exports.createElement("option",{value:"America/Argentina/San_Juan"},"America/Argentina/San_Juan"),m.exports.createElement("option",{value:"America/Argentina/San_Luis"},"America/Argentina/San_Luis"),m.exports.createElement("option",{value:"America/Argentina/Tucuman"},"America/Argentina/Tucuman"),m.exports.createElement("option",{value:"America/Argentina/Ushuaia"},"America/Argentina/Ushuaia"),m.exports.createElement("option",{value:"America/Aruba"},"America/Aruba"),m.exports.createElement("option",{value:"America/Asuncion"},"America/Asuncion"),m.exports.createElement("option",{value:"America/Atikokan"},"America/Atikokan"),m.exports.createElement("option",{value:"America/Bahia"},"America/Bahia"),m.exports.createElement("option",{value:"America/Bahia_Banderas"},"America/Bahia_Banderas"),m.exports.createElement("option",{value:"America/Barbados"},"America/Barbados"),m.exports.createElement("option",{value:"America/Belem"},"America/Belem"),m.exports.createElement("option",{value:"America/Belize"},"America/Belize"),m.exports.createElement("option",{value:"America/Blanc-Sablon"},"America/Blanc-Sablon"),m.exports.createElement("option",{value:"America/Boa_Vista"},"America/Boa_Vista"),m.exports.createElement("option",{value:"America/Bogota"},"America/Bogota"),m.exports.createElement("option",{value:"America/Boise"},"America/Boise"),m.exports.createElement("option",{value:"America/Cambridge_Bay"},"America/Cambridge_Bay"),m.exports.createElement("option",{value:"America/Campo_Grande"},"America/Campo_Grande"),m.exports.createElement("option",{value:"America/Cancun"},"America/Cancun"),m.exports.createElement("option",{value:"America/Caracas"},"America/Caracas"),m.exports.createElement("option",{value:"America/Cayenne"},"America/Cayenne"),m.exports.createElement("option",{value:"America/Cayman"},"America/Cayman"),m.exports.createElement("option",{value:"America/Chicago"},"America/Chicago"),m.exports.createElement("option",{value:"America/Chihuahua"},"America/Chihuahua"),m.exports.createElement("option",{value:"America/Costa_Rica"},"America/Costa_Rica"),m.exports.createElement("option",{value:"America/Creston"},"America/Creston"),m.exports.createElement("option",{value:"America/Cuiaba"},"America/Cuiaba"),m.exports.createElement("option",{value:"America/Curacao"},"America/Curacao"),m.exports.createElement("option",{value:"America/Danmarkshavn"},"America/Danmarkshavn"),m.exports.createElement("option",{value:"America/Dawson"},"America/Dawson"),m.exports.createElement("option",{value:"America/Dawson_Creek"},"America/Dawson_Creek"),m.exports.createElement("option",{value:"America/Denver"},"America/Denver"),m.exports.createElement("option",{value:"America/Detroit"},"America/Detroit"),m.exports.createElement("option",{value:"America/Dominica"},"America/Dominica"),m.exports.createElement("option",{value:"America/Edmonton"},"America/Edmonton"),m.exports.createElement("option",{value:"America/Eirunepe"},"America/Eirunepe"),m.exports.createElement("option",{value:"America/El_Salvador"},"America/El_Salvador"),m.exports.createElement("option",{value:"America/Fort_Nelson"},"America/Fort_Nelson"),m.exports.createElement("option",{value:"America/Fortaleza"},"America/Fortaleza"),m.exports.createElement("option",{value:"America/Glace_Bay"},"America/Glace_Bay"),m.exports.createElement("option",{value:"America/Goose_Bay"},"America/Goose_Bay"),m.exports.createElement("option",{value:"America/Grand_Turk"},"America/Grand_Turk"),m.exports.createElement("option",{value:"America/Grenada"},"America/Grenada"),m.exports.createElement("option",{value:"America/Guadeloupe"},"America/Guadeloupe"),m.exports.createElement("option",{value:"America/Guatemala"},"America/Guatemala"),m.exports.createElement("option",{value:"America/Guayaquil"},"America/Guayaquil"),m.exports.createElement("option",{value:"America/Guyana"},"America/Guyana"),m.exports.createElement("option",{value:"America/Halifax"},"America/Halifax"),m.exports.createElement("option",{value:"America/Havana"},"America/Havana"),m.exports.createElement("option",{value:"America/Hermosillo"},"America/Hermosillo"),m.exports.createElement("option",{value:"America/Indiana/Indianapolis"},"America/Indiana/Indianapolis"),m.exports.createElement("option",{value:"America/Indiana/Knox"},"America/Indiana/Knox"),m.exports.createElement("option",{value:"America/Indiana/Marengo"},"America/Indiana/Marengo"),m.exports.createElement("option",{value:"America/Indiana/Petersburg"},"America/Indiana/Petersburg"),m.exports.createElement("option",{value:"America/Indiana/Tell_City"},"America/Indiana/Tell_City"),m.exports.createElement("option",{value:"America/Indiana/Vevay"},"America/Indiana/Vevay"),m.exports.createElement("option",{value:"America/Indiana/Vincennes"},"America/Indiana/Vincennes"),m.exports.createElement("option",{value:"America/Indiana/Winamac"},"America/Indiana/Winamac"),m.exports.createElement("option",{value:"America/Inuvik"},"America/Inuvik"),m.exports.createElement("option",{value:"America/Iqaluit"},"America/Iqaluit"),m.exports.createElement("option",{value:"America/Jamaica"},"America/Jamaica"),m.exports.createElement("option",{value:"America/Juneau"},"America/Juneau"),m.exports.createElement("option",{value:"America/Kentucky/Louisville"},"America/Kentucky/Louisville"),m.exports.createElement("option",{value:"America/Kentucky/Monticello"},"America/Kentucky/Monticello"),m.exports.createElement("option",{value:"America/Kralendijk"},"America/Kralendijk"),m.exports.createElement("option",{value:"America/La_Paz"},"America/La_Paz"),m.exports.createElement("option",{value:"America/Lima"},"America/Lima"),m.exports.createElement("option",{value:"America/Los_Angeles"},"America/Los_Angeles"),m.exports.createElement("option",{value:"America/Lower_Princes"},"America/Lower_Princes"),m.exports.createElement("option",{value:"America/Maceio"},"America/Maceio"),m.exports.createElement("option",{value:"America/Managua"},"America/Managua"),m.exports.createElement("option",{value:"America/Manaus"},"America/Manaus"),m.exports.createElement("option",{value:"America/Marigot"},"America/Marigot"),m.exports.createElement("option",{value:"America/Martinique"},"America/Martinique"),m.exports.createElement("option",{value:"America/Matamoros"},"America/Matamoros"),m.exports.createElement("option",{value:"America/Mazatlan"},"America/Mazatlan"),m.exports.createElement("option",{value:"America/Menominee"},"America/Menominee"),m.exports.createElement("option",{value:"America/Merida"},"America/Merida"),m.exports.createElement("option",{value:"America/Metlakatla"},"America/Metlakatla"),m.exports.createElement("option",{value:"America/Mexico_City"},"America/Mexico_City"),m.exports.createElement("option",{value:"America/Miquelon"},"America/Miquelon"),m.exports.createElement("option",{value:"America/Moncton"},"America/Moncton"),m.exports.createElement("option",{value:"America/Monterrey"},"America/Monterrey"),m.exports.createElement("option",{value:"America/Montevideo"},"America/Montevideo"),m.exports.createElement("option",{value:"America/Montserrat"},"America/Montserrat"),m.exports.createElement("option",{value:"America/Nassau"},"America/Nassau"),m.exports.createElement("option",{value:"America/New_York"},"America/New_York"),m.exports.createElement("option",{value:"America/Nipigon"},"America/Nipigon"),m.exports.createElement("option",{value:"America/Nome"},"America/Nome"),m.exports.createElement("option",{value:"America/Noronha"},"America/Noronha"),m.exports.createElement("option",{value:"America/North_Dakota/Beulah"},"America/North_Dakota/Beulah"),m.exports.createElement("option",{value:"America/North_Dakota/Center"},"America/North_Dakota/Center"),m.exports.createElement("option",{value:"America/North_Dakota/New_Salem"},"America/North_Dakota/New_Salem"),m.exports.createElement("option",{value:"America/Nuuk"},"America/Nuuk"),m.exports.createElement("option",{value:"America/Ojinaga"},"America/Ojinaga"),m.exports.createElement("option",{value:"America/Panama"},"America/Panama"),m.exports.createElement("option",{value:"America/Pangnirtung"},"America/Pangnirtung"),m.exports.createElement("option",{value:"America/Paramaribo"},"America/Paramaribo"),m.exports.createElement("option",{value:"America/Phoenix"},"America/Phoenix"),m.exports.createElement("option",{value:"America/Port-au-Prince"},"America/Port-au-Prince"),m.exports.createElement("option",{value:"America/Port_of_Spain"},"America/Port_of_Spain"),m.exports.createElement("option",{value:"America/Porto_Velho"},"America/Porto_Velho"),m.exports.createElement("option",{value:"America/Puerto_Rico"},"America/Puerto_Rico"),m.exports.createElement("option",{value:"America/Punta_Arenas"},"America/Punta_Arenas"),m.exports.createElement("option",{value:"America/Rainy_River"},"America/Rainy_River"),m.exports.createElement("option",{value:"America/Rankin_Inlet"},"America/Rankin_Inlet"),m.exports.createElement("option",{value:"America/Recife"},"America/Recife"),m.exports.createElement("option",{value:"America/Regina"},"America/Regina"),m.exports.createElement("option",{value:"America/Resolute"},"America/Resolute"),m.exports.createElement("option",{value:"America/Rio_Branco"},"America/Rio_Branco"),m.exports.createElement("option",{value:"America/Santarem"},"America/Santarem"),m.exports.createElement("option",{value:"America/Santiago"},"America/Santiago"),m.exports.createElement("option",{value:"America/Santo_Domingo"},"America/Santo_Domingo"),m.exports.createElement("option",{value:"America/Sao_Paulo"},"America/Sao_Paulo"),m.exports.createElement("option",{value:"America/Scoresbysund"},"America/Scoresbysund"),m.exports.createElement("option",{value:"America/Sitka"},"America/Sitka"),m.exports.createElement("option",{value:"America/St_Barthelemy"},"America/St_Barthelemy"),m.exports.createElement("option",{value:"America/St_Johns"},"America/St_Johns"),m.exports.createElement("option",{value:"America/St_Kitts"},"America/St_Kitts"),m.exports.createElement("option",{value:"America/St_Lucia"},"America/St_Lucia"),m.exports.createElement("option",{value:"America/St_Thomas"},"America/St_Thomas"),m.exports.createElement("option",{value:"America/St_Vincent"},"America/St_Vincent"),m.exports.createElement("option",{value:"America/Swift_Current"},"America/Swift_Current"),m.exports.createElement("option",{value:"America/Tegucigalpa"},"America/Tegucigalpa"),m.exports.createElement("option",{value:"America/Thule"},"America/Thule"),m.exports.createElement("option",{value:"America/Thunder_Bay"},"America/Thunder_Bay"),m.exports.createElement("option",{value:"America/Tijuana"},"America/Tijuana"),m.exports.createElement("option",{value:"America/Toronto"},"America/Toronto"),m.exports.createElement("option",{value:"America/Tortola"},"America/Tortola"),m.exports.createElement("option",{value:"America/Vancouver"},"America/Vancouver"),m.exports.createElement("option",{value:"America/Whitehorse"},"America/Whitehorse"),m.exports.createElement("option",{value:"America/Winnipeg"},"America/Winnipeg"),m.exports.createElement("option",{value:"America/Yakutat"},"America/Yakutat"),m.exports.createElement("option",{value:"America/Yellowknife"},"America/Yellowknife"),m.exports.createElement("option",{value:"Antarctica/Casey"},"Antarctica/Casey"),m.exports.createElement("option",{value:"Antarctica/Davis"},"Antarctica/Davis"),m.exports.createElement("option",{value:"Antarctica/DumontDUrville"},"Antarctica/DumontDUrville"),m.exports.createElement("option",{value:"Antarctica/Macquarie"},"Antarctica/Macquarie"),m.exports.createElement("option",{value:"Antarctica/Mawson"},"Antarctica/Mawson"),m.exports.createElement("option",{value:"Antarctica/McMurdo"},"Antarctica/McMurdo"),m.exports.createElement("option",{value:"Antarctica/Palmer"},"Antarctica/Palmer"),m.exports.createElement("option",{value:"Antarctica/Rothera"},"Antarctica/Rothera"),m.exports.createElement("option",{value:"Antarctica/Syowa"},"Antarctica/Syowa"),m.exports.createElement("option",{value:"Antarctica/Troll"},"Antarctica/Troll"),m.exports.createElement("option",{value:"Antarctica/Vostok"},"Antarctica/Vostok"),m.exports.createElement("option",{value:"Arctic/Longyearbyen"},"Arctic/Longyearbyen"),m.exports.createElement("option",{value:"Asia/Aden"},"Asia/Aden"),m.exports.createElement("option",{value:"Asia/Almaty"},"Asia/Almaty"),m.exports.createElement("option",{value:"Asia/Amman"},"Asia/Amman"),m.exports.createElement("option",{value:"Asia/Anadyr"},"Asia/Anadyr"),m.exports.createElement("option",{value:"Asia/Aqtau"},"Asia/Aqtau"),m.exports.createElement("option",{value:"Asia/Aqtobe"},"Asia/Aqtobe"),m.exports.createElement("option",{value:"Asia/Ashgabat"},"Asia/Ashgabat"),m.exports.createElement("option",{value:"Asia/Atyrau"},"Asia/Atyrau"),m.exports.createElement("option",{value:"Asia/Baghdad"},"Asia/Baghdad"),m.exports.createElement("option",{value:"Asia/Bahrain"},"Asia/Bahrain"),m.exports.createElement("option",{value:"Asia/Baku"},"Asia/Baku"),m.exports.createElement("option",{value:"Asia/Bangkok"},"Asia/Bangkok"),m.exports.createElement("option",{value:"Asia/Barnaul"},"Asia/Barnaul"),m.exports.createElement("option",{value:"Asia/Beirut"},"Asia/Beirut"),m.exports.createElement("option",{value:"Asia/Bishkek"},"Asia/Bishkek"),m.exports.createElement("option",{value:"Asia/Brunei"},"Asia/Brunei"),m.exports.createElement("option",{value:"Asia/Chita"},"Asia/Chita"),m.exports.createElement("option",{value:"Asia/Choibalsan"},"Asia/Choibalsan"),m.exports.createElement("option",{value:"Asia/Colombo"},"Asia/Colombo"),m.exports.createElement("option",{value:"Asia/Damascus"},"Asia/Damascus"),m.exports.createElement("option",{value:"Asia/Dhaka"},"Asia/Dhaka"),m.exports.createElement("option",{value:"Asia/Dili"},"Asia/Dili"),m.exports.createElement("option",{value:"Asia/Dubai"},"Asia/Dubai"),m.exports.createElement("option",{value:"Asia/Dushanbe"},"Asia/Dushanbe"),m.exports.createElement("option",{value:"Asia/Famagusta"},"Asia/Famagusta"),m.exports.createElement("option",{value:"Asia/Gaza"},"Asia/Gaza"),m.exports.createElement("option",{value:"Asia/Hebron"},"Asia/Hebron"),m.exports.createElement("option",{value:"Asia/Ho_Chi_Minh"},"Asia/Ho_Chi_Minh"),m.exports.createElement("option",{value:"Asia/Hong_Kong"},"Asia/Hong_Kong"),m.exports.createElement("option",{value:"Asia/Hovd"},"Asia/Hovd"),m.exports.createElement("option",{value:"Asia/Irkutsk"},"Asia/Irkutsk"),m.exports.createElement("option",{value:"Asia/Jakarta"},"Asia/Jakarta"),m.exports.createElement("option",{value:"Asia/Jayapura"},"Asia/Jayapura"),m.exports.createElement("option",{value:"Asia/Jerusalem"},"Asia/Jerusalem"),m.exports.createElement("option",{value:"Asia/Kabul"},"Asia/Kabul"),m.exports.createElement("option",{value:"Asia/Kamchatka"},"Asia/Kamchatka"),m.exports.createElement("option",{value:"Asia/Karachi"},"Asia/Karachi"),m.exports.createElement("option",{value:"Asia/Kathmandu"},"Asia/Kathmandu"),m.exports.createElement("option",{value:"Asia/Khandyga"},"Asia/Khandyga"),m.exports.createElement("option",{value:"Asia/Kolkata"},"Asia/Kolkata"),m.exports.createElement("option",{value:"Asia/Krasnoyarsk"},"Asia/Krasnoyarsk"),m.exports.createElement("option",{value:"Asia/Kuala_Lumpur"},"Asia/Kuala_Lumpur"),m.exports.createElement("option",{value:"Asia/Kuching"},"Asia/Kuching"),m.exports.createElement("option",{value:"Asia/Kuwait"},"Asia/Kuwait"),m.exports.createElement("option",{value:"Asia/Macau"},"Asia/Macau"),m.exports.createElement("option",{value:"Asia/Magadan"},"Asia/Magadan"),m.exports.createElement("option",{value:"Asia/Makassar"},"Asia/Makassar"),m.exports.createElement("option",{value:"Asia/Manila"},"Asia/Manila"),m.exports.createElement("option",{value:"Asia/Muscat"},"Asia/Muscat"),m.exports.createElement("option",{value:"Asia/Nicosia"},"Asia/Nicosia"),m.exports.createElement("option",{value:"Asia/Novokuznetsk"},"Asia/Novokuznetsk"),m.exports.createElement("option",{value:"Asia/Novosibirsk"},"Asia/Novosibirsk"),m.exports.createElement("option",{value:"Asia/Omsk"},"Asia/Omsk"),m.exports.createElement("option",{value:"Asia/Oral"},"Asia/Oral"),m.exports.createElement("option",{value:"Asia/Phnom_Penh"},"Asia/Phnom_Penh"),m.exports.createElement("option",{value:"Asia/Pontianak"},"Asia/Pontianak"),m.exports.createElement("option",{value:"Asia/Pyongyang"},"Asia/Pyongyang"),m.exports.createElement("option",{value:"Asia/Qatar"},"Asia/Qatar"),m.exports.createElement("option",{value:"Asia/Qostanay"},"Asia/Qostanay"),m.exports.createElement("option",{value:"Asia/Qyzylorda"},"Asia/Qyzylorda"),m.exports.createElement("option",{value:"Asia/Riyadh"},"Asia/Riyadh"),m.exports.createElement("option",{value:"Asia/Sakhalin"},"Asia/Sakhalin"),m.exports.createElement("option",{value:"Asia/Samarkand"},"Asia/Samarkand"),m.exports.createElement("option",{value:"Asia/Seoul"},"Asia/Seoul"),m.exports.createElement("option",{value:"Asia/Shanghai"},"Asia/Shanghai"),m.exports.createElement("option",{value:"Asia/Singapore"},"Asia/Singapore"),m.exports.createElement("option",{value:"Asia/Srednekolymsk"},"Asia/Srednekolymsk"),m.exports.createElement("option",{value:"Asia/Taipei"},"Asia/Taipei"),m.exports.createElement("option",{value:"Asia/Tashkent"},"Asia/Tashkent"),m.exports.createElement("option",{value:"Asia/Tbilisi"},"Asia/Tbilisi"),m.exports.createElement("option",{value:"Asia/Tehran"},"Asia/Tehran"),m.exports.createElement("option",{value:"Asia/Thimphu"},"Asia/Thimphu"),m.exports.createElement("option",{value:"Asia/Tokyo"},"Asia/Tokyo"),m.exports.createElement("option",{value:"Asia/Tomsk"},"Asia/Tomsk"),m.exports.createElement("option",{value:"Asia/Ulaanbaatar"},"Asia/Ulaanbaatar"),m.exports.createElement("option",{value:"Asia/Urumqi"},"Asia/Urumqi"),m.exports.createElement("option",{value:"Asia/Ust-Nera"},"Asia/Ust-Nera"),m.exports.createElement("option",{value:"Asia/Vientiane"},"Asia/Vientiane"),m.exports.createElement("option",{value:"Asia/Vladivostok"},"Asia/Vladivostok"),m.exports.createElement("option",{value:"Asia/Yakutsk"},"Asia/Yakutsk"),m.exports.createElement("option",{value:"Asia/Yangon"},"Asia/Yangon"),m.exports.createElement("option",{value:"Asia/Yekaterinburg"},"Asia/Yekaterinburg"),m.exports.createElement("option",{value:"Asia/Yerevan"},"Asia/Yerevan"),m.exports.createElement("option",{value:"Atlantic/Azores"},"Atlantic/Azores"),m.exports.createElement("option",{value:"Atlantic/Bermuda"},"Atlantic/Bermuda"),m.exports.createElement("option",{value:"Atlantic/Canary"},"Atlantic/Canary"),m.exports.createElement("option",{value:"Atlantic/Cape_Verde"},"Atlantic/Cape_Verde"),m.exports.createElement("option",{value:"Atlantic/Faroe"},"Atlantic/Faroe"),m.exports.createElement("option",{value:"Atlantic/Madeira"},"Atlantic/Madeira"),m.exports.createElement("option",{value:"Atlantic/Reykjavik"},"Atlantic/Reykjavik"),m.exports.createElement("option",{value:"Atlantic/South_Georgia"},"Atlantic/South_Georgia"),m.exports.createElement("option",{value:"Atlantic/St_Helena"},"Atlantic/St_Helena"),m.exports.createElement("option",{value:"Atlantic/Stanley"},"Atlantic/Stanley"),m.exports.createElement("option",{value:"Australia/Adelaide"},"Australia/Adelaide"),m.exports.createElement("option",{value:"Australia/Brisbane"},"Australia/Brisbane"),m.exports.createElement("option",{value:"Australia/Broken_Hill"},"Australia/Broken_Hill"),m.exports.createElement("option",{value:"Australia/Darwin"},"Australia/Darwin"),m.exports.createElement("option",{value:"Australia/Eucla"},"Australia/Eucla"),m.exports.createElement("option",{value:"Australia/Hobart"},"Australia/Hobart"),m.exports.createElement("option",{value:"Australia/Lindeman"},"Australia/Lindeman"),m.exports.createElement("option",{value:"Australia/Lord_Howe"},"Australia/Lord_Howe"),m.exports.createElement("option",{value:"Australia/Melbourne"},"Australia/Melbourne"),m.exports.createElement("option",{value:"Australia/Perth"},"Australia/Perth"),m.exports.createElement("option",{value:"Australia/Sydney"},"Australia/Sydney"),m.exports.createElement("option",{value:"Canada/Atlantic"},"Canada/Atlantic"),m.exports.createElement("option",{value:"Canada/Central"},"Canada/Central"),m.exports.createElement("option",{value:"Canada/Eastern"},"Canada/Eastern"),m.exports.createElement("option",{value:"Canada/Mountain"},"Canada/Mountain"),m.exports.createElement("option",{value:"Canada/Newfoundland"},"Canada/Newfoundland"),m.exports.createElement("option",{value:"Canada/Pacific"},"Canada/Pacific"),m.exports.createElement("option",{value:"Europe/Amsterdam"},"Europe/Amsterdam"),m.exports.createElement("option",{value:"Europe/Andorra"},"Europe/Andorra"),m.exports.createElement("option",{value:"Europe/Astrakhan"},"Europe/Astrakhan"),m.exports.createElement("option",{value:"Europe/Athens"},"Europe/Athens"),m.exports.createElement("option",{value:"Europe/Belgrade"},"Europe/Belgrade"),m.exports.createElement("option",{value:"Europe/Berlin"},"Europe/Berlin"),m.exports.createElement("option",{value:"Europe/Bratislava"},"Europe/Bratislava"),m.exports.createElement("option",{value:"Europe/Brussels"},"Europe/Brussels"),m.exports.createElement("option",{value:"Europe/Bucharest"},"Europe/Bucharest"),m.exports.createElement("option",{value:"Europe/Budapest"},"Europe/Budapest"),m.exports.createElement("option",{value:"Europe/Busingen"},"Europe/Busingen"),m.exports.createElement("option",{value:"Europe/Chisinau"},"Europe/Chisinau"),m.exports.createElement("option",{value:"Europe/Copenhagen"},"Europe/Copenhagen"),m.exports.createElement("option",{value:"Europe/Dublin"},"Europe/Dublin"),m.exports.createElement("option",{value:"Europe/Gibraltar"},"Europe/Gibraltar"),m.exports.createElement("option",{value:"Europe/Guernsey"},"Europe/Guernsey"),m.exports.createElement("option",{value:"Europe/Helsinki"},"Europe/Helsinki"),m.exports.createElement("option",{value:"Europe/Isle_of_Man"},"Europe/Isle_of_Man"),m.exports.createElement("option",{value:"Europe/Istanbul"},"Europe/Istanbul"),m.exports.createElement("option",{value:"Europe/Jersey"},"Europe/Jersey"),m.exports.createElement("option",{value:"Europe/Kaliningrad"},"Europe/Kaliningrad"),m.exports.createElement("option",{value:"Europe/Kiev"},"Europe/Kiev"),m.exports.createElement("option",{value:"Europe/Kirov"},"Europe/Kirov"),m.exports.createElement("option",{value:"Europe/Lisbon"},"Europe/Lisbon"),m.exports.createElement("option",{value:"Europe/Ljubljana"},"Europe/Ljubljana"),m.exports.createElement("option",{value:"Europe/London"},"Europe/London"),m.exports.createElement("option",{value:"Europe/Luxembourg"},"Europe/Luxembourg"),m.exports.createElement("option",{value:"Europe/Madrid"},"Europe/Madrid"),m.exports.createElement("option",{value:"Europe/Malta"},"Europe/Malta"),m.exports.createElement("option",{value:"Europe/Mariehamn"},"Europe/Mariehamn"),m.exports.createElement("option",{value:"Europe/Minsk"},"Europe/Minsk"),m.exports.createElement("option",{value:"Europe/Monaco"},"Europe/Monaco"),m.exports.createElement("option",{value:"Europe/Moscow"},"Europe/Moscow"),m.exports.createElement("option",{value:"Europe/Oslo"},"Europe/Oslo"),m.exports.createElement("option",{value:"Europe/Paris"},"Europe/Paris"),m.exports.createElement("option",{value:"Europe/Podgorica"},"Europe/Podgorica"),m.exports.createElement("option",{value:"Europe/Prague"},"Europe/Prague"),m.exports.createElement("option",{value:"Europe/Riga"},"Europe/Riga"),m.exports.createElement("option",{value:"Europe/Rome"},"Europe/Rome"),m.exports.createElement("option",{value:"Europe/Samara"},"Europe/Samara"),m.exports.createElement("option",{value:"Europe/San_Marino"},"Europe/San_Marino"),m.exports.createElement("option",{value:"Europe/Sarajevo"},"Europe/Sarajevo"),m.exports.createElement("option",{value:"Europe/Saratov"},"Europe/Saratov"),m.exports.createElement("option",{value:"Europe/Simferopol"},"Europe/Simferopol"),m.exports.createElement("option",{value:"Europe/Skopje"},"Europe/Skopje"),m.exports.createElement("option",{value:"Europe/Sofia"},"Europe/Sofia"),m.exports.createElement("option",{value:"Europe/Stockholm"},"Europe/Stockholm"),m.exports.createElement("option",{value:"Europe/Tallinn"},"Europe/Tallinn"),m.exports.createElement("option",{value:"Europe/Tirane"},"Europe/Tirane"),m.exports.createElement("option",{value:"Europe/Ulyanovsk"},"Europe/Ulyanovsk"),m.exports.createElement("option",{value:"Europe/Uzhgorod"},"Europe/Uzhgorod"),m.exports.createElement("option",{value:"Europe/Vaduz"},"Europe/Vaduz"),m.exports.createElement("option",{value:"Europe/Vatican"},"Europe/Vatican"),m.exports.createElement("option",{value:"Europe/Vienna"},"Europe/Vienna"),m.exports.createElement("option",{value:"Europe/Vilnius"},"Europe/Vilnius"),m.exports.createElement("option",{value:"Europe/Volgograd"},"Europe/Volgograd"),m.exports.createElement("option",{value:"Europe/Warsaw"},"Europe/Warsaw"),m.exports.createElement("option",{value:"Europe/Zagreb"},"Europe/Zagreb"),m.exports.createElement("option",{value:"Europe/Zaporozhye"},"Europe/Zaporozhye"),m.exports.createElement("option",{value:"Europe/Zurich"},"Europe/Zurich"),m.exports.createElement("option",{value:"GMT"},"GMT"),m.exports.createElement("option",{value:"Indian/Antananarivo"},"Indian/Antananarivo"),m.exports.createElement("option",{value:"Indian/Chagos"},"Indian/Chagos"),m.exports.createElement("option",{value:"Indian/Christmas"},"Indian/Christmas"),m.exports.createElement("option",{value:"Indian/Cocos"},"Indian/Cocos"),m.exports.createElement("option",{value:"Indian/Comoro"},"Indian/Comoro"),m.exports.createElement("option",{value:"Indian/Kerguelen"},"Indian/Kerguelen"),m.exports.createElement("option",{value:"Indian/Mahe"},"Indian/Mahe"),m.exports.createElement("option",{value:"Indian/Maldives"},"Indian/Maldives"),m.exports.createElement("option",{value:"Indian/Mauritius"},"Indian/Mauritius"),m.exports.createElement("option",{value:"Indian/Mayotte"},"Indian/Mayotte"),m.exports.createElement("option",{value:"Indian/Reunion"},"Indian/Reunion"),m.exports.createElement("option",{value:"Pacific/Apia"},"Pacific/Apia"),m.exports.createElement("option",{value:"Pacific/Auckland"},"Pacific/Auckland"),m.exports.createElement("option",{value:"Pacific/Bougainville"},"Pacific/Bougainville"),m.exports.createElement("option",{value:"Pacific/Chatham"},"Pacific/Chatham"),m.exports.createElement("option",{value:"Pacific/Chuuk"},"Pacific/Chuuk"),m.exports.createElement("option",{value:"Pacific/Easter"},"Pacific/Easter"),m.exports.createElement("option",{value:"Pacific/Efate"},"Pacific/Efate"),m.exports.createElement("option",{value:"Pacific/Fakaofo"},"Pacific/Fakaofo"),m.exports.createElement("option",{value:"Pacific/Fiji"},"Pacific/Fiji"),m.exports.createElement("option",{value:"Pacific/Funafuti"},"Pacific/Funafuti"),m.exports.createElement("option",{value:"Pacific/Galapagos"},"Pacific/Galapagos"),m.exports.createElement("option",{value:"Pacific/Gambier"},"Pacific/Gambier"),m.exports.createElement("option",{value:"Pacific/Guadalcanal"},"Pacific/Guadalcanal"),m.exports.createElement("option",{value:"Pacific/Guam"},"Pacific/Guam"),m.exports.createElement("option",{value:"Pacific/Honolulu"},"Pacific/Honolulu"),m.exports.createElement("option",{value:"Pacific/Kanton"},"Pacific/Kanton"),m.exports.createElement("option",{value:"Pacific/Kiritimati"},"Pacific/Kiritimati"),m.exports.createElement("option",{value:"Pacific/Kosrae"},"Pacific/Kosrae"),m.exports.createElement("option",{value:"Pacific/Kwajalein"},"Pacific/Kwajalein"),m.exports.createElement("option",{value:"Pacific/Majuro"},"Pacific/Majuro"),m.exports.createElement("option",{value:"Pacific/Marquesas"},"Pacific/Marquesas"),m.exports.createElement("option",{value:"Pacific/Midway"},"Pacific/Midway"),m.exports.createElement("option",{value:"Pacific/Nauru"},"Pacific/Nauru"),m.exports.createElement("option",{value:"Pacific/Niue"},"Pacific/Niue"),m.exports.createElement("option",{value:"Pacific/Norfolk"},"Pacific/Norfolk"),m.exports.createElement("option",{value:"Pacific/Noumea"},"Pacific/Noumea"),m.exports.createElement("option",{value:"Pacific/Pago_Pago"},"Pacific/Pago_Pago"),m.exports.createElement("option",{value:"Pacific/Palau"},"Pacific/Palau"),m.exports.createElement("option",{value:"Pacific/Pitcairn"},"Pacific/Pitcairn"),m.exports.createElement("option",{value:"Pacific/Pohnpei"},"Pacific/Pohnpei"),m.exports.createElement("option",{value:"Pacific/Port_Moresby"},"Pacific/Port_Moresby"),m.exports.createElement("option",{value:"Pacific/Rarotonga"},"Pacific/Rarotonga"),m.exports.createElement("option",{value:"Pacific/Saipan"},"Pacific/Saipan"),m.exports.createElement("option",{value:"Pacific/Tahiti"},"Pacific/Tahiti"),m.exports.createElement("option",{value:"Pacific/Tarawa"},"Pacific/Tarawa"),m.exports.createElement("option",{value:"Pacific/Tongatapu"},"Pacific/Tongatapu"),m.exports.createElement("option",{value:"Pacific/Wake"},"Pacific/Wake"),m.exports.createElement("option",{value:"Pacific/Wallis"},"Pacific/Wallis"),m.exports.createElement("option",{value:"US/Alaska"},"US/Alaska"),m.exports.createElement("option",{value:"US/Arizona"},"US/Arizona"),m.exports.createElement("option",{value:"US/Central"},"US/Central"),m.exports.createElement("option",{value:"US/Eastern"},"US/Eastern"),m.exports.createElement("option",{value:"US/Hawaii"},"US/Hawaii"),m.exports.createElement("option",{value:"US/Mountain"},"US/Mountain"),m.exports.createElement("option",{value:"US/Pacific"},"US/Pacific"),m.exports.createElement("option",{value:"UTC"},"UTC")),m.exports.createElement("input",{type:"hidden",name:"initial-timezone",value:"America/Toronto",id:"initial-id_timezone"}))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_first_name"},"First name:")),m.exports.createElement("span",null,m.exports.createElement("input",{...r("first_name"),type:"text",name:"first_name",value:"Jimmy",maxLength:150,id:"id_first_name"}),m.exports.createElement("div",{"data-lastpass-icon-root":"true",style:{position:"relative",height:"0px",width:"0px",float:"left"}},m.exports.createElement("template",null,m.exports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","data-lastpass-icon":"true",style:{position:"absolute",cursor:"pointer",height:"22px",maxHeight:"22px",width:"22px",maxWidth:"22px",top:"11.5px",left:"154px",zIndex:"auto",color:"rgb(215, 64, 58)"}},m.exports.createElement("rect",{x:"0.680176",y:"0.763062",width:"22.6392",height:"22.4737",rx:"4",fill:"currentColor"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7935 7.9516C19.7935 7.64414 20.0427 7.3949 20.3502 7.3949C20.6576 7.3949 20.9069 7.64414 20.9069 7.9516V16.0487C20.9069 16.3562 20.6576 16.6054 20.3502 16.6054C20.0427 16.6054 19.7935 16.3562 19.7935 16.0487V7.9516Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.76288 13.6577C5.68525 13.6577 6.43298 12.9154 6.43298 11.9998C6.43298 11.0842 5.68525 10.3419 4.76288 10.3419C3.8405 10.3419 3.09277 11.0842 3.09277 11.9998C3.09277 12.9154 3.8405 13.6577 4.76288 13.6577Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3298 13.6577C11.2521 13.6577 11.9999 12.9154 11.9999 11.9998C11.9999 11.0842 11.2521 10.3419 10.3298 10.3419C9.4074 10.3419 8.65967 11.0842 8.65967 11.9998C8.65967 12.9154 9.4074 13.6577 10.3298 13.6577Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8964 13.6577C16.8188 13.6577 17.5665 12.9154 17.5665 11.9998C17.5665 11.0842 16.8188 10.3419 15.8964 10.3419C14.974 10.3419 14.2263 11.0842 14.2263 11.9998C14.2263 12.9154 14.974 13.6577 15.8964 13.6577Z",fill:"white"})))))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_last_name"},"Last name:")),m.exports.createElement("span",null,m.exports.createElement("input",{...r("last_name"),type:"text",name:"last_name",value:"Liu",maxLength:150,id:"id_last_name"}),m.exports.createElement("div",{"data-lastpass-icon-root":"true",style:{position:"relative",height:"0px",width:"0px",float:"left"}},m.exports.createElement("template",null,m.exports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","data-lastpass-icon":"true",style:{position:"absolute",cursor:"pointer",height:"22px",maxHeight:"22px",width:"22px",maxWidth:"22px",top:"11.5px",left:"154px",zIndex:"auto",color:"rgb(215, 64, 58)"}},m.exports.createElement("rect",{x:"0.680176",y:"0.763062",width:"22.6392",height:"22.4737",rx:"4",fill:"currentColor"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7935 7.9516C19.7935 7.64414 20.0427 7.3949 20.3502 7.3949C20.6576 7.3949 20.9069 7.64414 20.9069 7.9516V16.0487C20.9069 16.3562 20.6576 16.6054 20.3502 16.6054C20.0427 16.6054 19.7935 16.3562 19.7935 16.0487V7.9516Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.76288 13.6577C5.68525 13.6577 6.43298 12.9154 6.43298 11.9998C6.43298 11.0842 5.68525 10.3419 4.76288 10.3419C3.8405 10.3419 3.09277 11.0842 3.09277 11.9998C3.09277 12.9154 3.8405 13.6577 4.76288 13.6577Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3298 13.6577C11.2521 13.6577 11.9999 12.9154 11.9999 11.9998C11.9999 11.0842 11.2521 10.3419 10.3298 10.3419C9.4074 10.3419 8.65967 11.0842 8.65967 11.9998C8.65967 12.9154 9.4074 13.6577 10.3298 13.6577Z",fill:"white"}),m.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8964 13.6577C16.8188 13.6577 17.5665 12.9154 17.5665 11.9998C17.5665 11.0842 16.8188 10.3419 15.8964 10.3419C14.974 10.3419 14.2263 11.0842 14.2263 11.9998C14.2263 12.9154 14.974 13.6577 15.8964 13.6577Z",fill:"white"})))))),m.exports.createElement("div",{className:"field"},m.exports.createElement("div",{className:"label"},m.exports.createElement("label",{htmlFor:"id_graduating_year"},"Graduating year:")),m.exports.createElement("span",null,m.exports.createElement("select",{...r("graduating_year"),className:"browser-default",id:"id_graduating_year"},m.exports.createElement("option",{value:""},"Does not apply"),m.exports.createElement("option",{value:"2023"},"2023"),m.exports.createElement("option",{value:"2024"},"2024"),m.exports.createElement("option",{value:"2025"},"2025"),m.exports.createElement("option",{value:"2026"},"2026")))),m.exports.createElement("div",{style:{display:"flex",alignItems:"center",gap:"3px"}},m.exports.createElement("button",{type:"submit",className:"btn"},"Submit"),m.exports.createElement($j,{to:`/user/${n.id}`,className:"btn",role:"button","aria-pressed":"true"},"Cancel")))))},Ode=()=>{const e=m.exports.useContext(Xr);Ii();const{ID:t}=ef(),[n,r]=m.exports.useState([]),[a,u]=m.exports.useState([]);return m.exports.useEffect(()=>{e.getAPI(`${mr.COURSES}?term=${t}`).then(h=>{r(h.data.results)}).catch(()=>{e.refreshAuth()})},[]),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/edit.css"}),m.exports.createElement("link",{rel:"stylesheet",href:"/static/css/select2.min.css"}),m.exports.createElement("div",{className:"card-body","data-select2-id":"select2-data-21-vyjo"},m.exports.createElement("form",{onSubmit:h=>{h.preventDefault(),console.log(a)},"data-select2-id":"select2-data-20-cr8n"},m.exports.createElement("h5",{className:"card-title"},m.exports.createElement("strong",null,"Edit timetable for Test term")),m.exports.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:"dUBPiwcYI3sSDgC52qu3o8cutarEiO1xML4iteigRLs9eEEA26us3LXlBdxidNAh"}),m.exports.createElement(Lae,{multiple:!0,onChange:(h,o)=>{u(o)},id:"tags-outlined",options:n,getOptionLabel:h=>h.code,filterSelectedOptions:!0,renderInput:h=>m.exports.createElement(yce,{...h,label:"Courses",placeholder:"Start typing course code..."}),sx:{marginTop:"1.25em",marginBottom:"1.25em"}}),m.exports.createElement(nn,{to:"/course/add/term/1?next=/timetable/edit/2"},"Add a missing course"),m.exports.createElement("br",null),m.exports.createElement("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginTop:"1.5em"}},m.exports.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Save"),m.exports.createElement(nn,{to:"/timetable",className:"btn btn-primary"},"Cancel")))))},zde=()=>{Ii();const e=m.exports.useContext(Xr);return m.exports.useEffect(()=>{$q.AutoInit()}),m.exports.createElement(m.exports.Fragment,null,m.exports.createElement("div",{className:"page"},m.exports.createElement(s$,null),m.exports.createElement("div",{className:"router-outlet"},m.exports.createElement(Bj,null,m.exports.createElement(Ui,{path:"/",element:m.exports.createElement(c$,null)}),m.exports.createElement(Ui,{path:"/announcements",element:m.exports.createElement(Z$,null)}),m.exports.createElement(Ui,{path:"/announcement/:id",element:m.exports.createElement(dQ,null)}),m.exports.createElement(Ui,{path:"/calendar",element:m.exports.createElement(Oq,null)}),m.exports.createElement(Ui,{path:"/clubs",element:m.exports.createElement(r8,null)}),m.exports.createElement(Ui,{path:"/club/:id",element:m.exports.createElement(lQ,null)}),m.exports.createElement(Ui,{path:"/club/edit/:id",element:m.exports.createElement(cQ,null)}),m.exports.createElement(Ui,{path:"/blog",element:m.exports.createElement(Vq,null)}),m.exports.createElement(Ui,{path:"/blog/:id",element:m.exports.createElement(uQ,null)}),m.exports.createElement(Ui,{path:"/about",element:m.exports.createElement(oP,null)},m.exports.createElement(Ui,{path:":page",element:m.exports.createElement(oP,null)})),m.exports.createElement(Ui,{path:"/map",element:m.exports.createElement(Dde,null)}),m.exports.createElement(Ui,{path:"/accounts/login",element:m.exports.createElement(Uq,null)}),m.exports.createElement(Ui,{path:"/accounts/signup",element:m.exports.createElement(jq,null)}),m.exports.createElement(Ui,{path:"/accounts/logout",element:m.exports.createElement(hQ,null)}),m.exports.createElement(Ui,{path:"/timetable",element:m.exports.createElement(xce,null)}),m.exports.createElement(Ui,{path:"/timetable/edit/:ID",element:m.exports.createElement(Xw,null,m.exports.createElement(Ode,null))}),m.exports.createElement(Ui,{path:"/user/:userID",element:m.exports.createElement(Xw,null,m.exports.createElement(Rde,null))}),m.exports.createElement(Ui,{path:"/accounts/profile/update",element:m.exports.createElement(Xw,null,m.exports.createElement(Lde,null))}),m.exports.createElement(Ui,{path:"*",element:m.exports.createElement(sQ,null)}))),m.exports.createElement(l$,null)),m.exports.createElement(dce,{open:e.notification.open,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:e.closeNotif},m.exports.createElement(Noe,{onClose:e.closeNotif,severity:e.notification.type,sx:{width:"100%"}},e.notification.message)))},Bde=()=>m.exports.createElement(Uj,null,m.exports.createElement(a$,null,m.exports.createElement(zde,null))),Fde=g3(document.getElementById("root"));Fde.render(m.exports.createElement(Bde,null));
