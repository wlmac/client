function Z6(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const X6=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}};X6();var Uo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function K6(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var g={exports:{}},cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy=Symbol.for("react.element"),Y6=Symbol.for("react.portal"),J6=Symbol.for("react.fragment"),Q6=Symbol.for("react.strict_mode"),e$=Symbol.for("react.profiler"),t$=Symbol.for("react.provider"),n$=Symbol.for("react.context"),r$=Symbol.for("react.forward_ref"),i$=Symbol.for("react.suspense"),o$=Symbol.for("react.memo"),a$=Symbol.for("react.lazy"),xM=Symbol.iterator;function s$(e){return e===null||typeof e!="object"?null:(e=xM&&e[xM]||e["@@iterator"],typeof e=="function"?e:null)}var lL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uL=Object.assign,cL={};function tf(e,t,n){this.props=e,this.context=t,this.refs=cL,this.updater=n||lL}tf.prototype.isReactComponent={};tf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};tf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dL(){}dL.prototype=tf.prototype;function yS(e,t,n){this.props=e,this.context=t,this.refs=cL,this.updater=n||lL}var vS=yS.prototype=new dL;vS.constructor=yS;uL(vS,tf.prototype);vS.isPureReactComponent=!0;var bM=Array.isArray,hL=Object.prototype.hasOwnProperty,_S={current:null},pL={key:!0,ref:!0,__self:!0,__source:!0};function fL(e,t,n){var r,a={},c=null,h=null;if(t!=null)for(r in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(c=""+t.key),t)hL.call(t,r)&&!pL.hasOwnProperty(r)&&(a[r]=t[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var m=Array(o),w=0;w<o;w++)m[w]=arguments[w+2];a.children=m}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:iy,type:e,key:c,ref:h,props:a,_owner:_S.current}}function l$(e,t){return{$$typeof:iy,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xS(e){return typeof e=="object"&&e!==null&&e.$$typeof===iy}function u$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wM=/\/+/g;function nw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?u$(""+e.key):t.toString(36)}function N_(e,t,n,r,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(c){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case iy:case Y6:h=!0}}if(h)return h=e,a=a(h),e=r===""?"."+nw(h,0):r,bM(a)?(n="",e!=null&&(n=e.replace(wM,"$&/")+"/"),N_(a,t,n,"",function(w){return w})):a!=null&&(xS(a)&&(a=l$(a,n+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(wM,"$&/")+"/")+e)),t.push(a)),1;if(h=0,r=r===""?".":r+":",bM(e))for(var o=0;o<e.length;o++){c=e[o];var m=r+nw(c,o);h+=N_(c,t,n,m,a)}else if(m=s$(e),typeof m=="function")for(e=m.call(e),o=0;!(c=e.next()).done;)c=c.value,m=r+nw(c,o++),h+=N_(c,t,n,m,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function l_(e,t,n){if(e==null)return e;var r=[],a=0;return N_(e,r,"","",function(c){return t.call(n,c,a++)}),r}function c$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qo={current:null},$_={transition:null},d$={ReactCurrentDispatcher:Qo,ReactCurrentBatchConfig:$_,ReactCurrentOwner:_S};cr.Children={map:l_,forEach:function(e,t,n){l_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return l_(e,function(){t++}),t},toArray:function(e){return l_(e,function(t){return t})||[]},only:function(e){if(!xS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};cr.Component=tf;cr.Fragment=J6;cr.Profiler=e$;cr.PureComponent=yS;cr.StrictMode=Q6;cr.Suspense=i$;cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d$;cr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=uL({},e.props),a=e.key,c=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,h=_S.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(m in t)hL.call(t,m)&&!pL.hasOwnProperty(m)&&(r[m]=t[m]===void 0&&o!==void 0?o[m]:t[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){o=Array(m);for(var w=0;w<m;w++)o[w]=arguments[w+2];r.children=o}return{$$typeof:iy,type:e.type,key:a,ref:c,props:r,_owner:h}};cr.createContext=function(e){return e={$$typeof:n$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t$,_context:e},e.Consumer=e};cr.createElement=fL;cr.createFactory=function(e){var t=fL.bind(null,e);return t.type=e,t};cr.createRef=function(){return{current:null}};cr.forwardRef=function(e){return{$$typeof:r$,render:e}};cr.isValidElement=xS;cr.lazy=function(e){return{$$typeof:a$,_payload:{_status:-1,_result:e},_init:c$}};cr.memo=function(e,t){return{$$typeof:o$,type:e,compare:t===void 0?null:t}};cr.startTransition=function(e){var t=$_.transition;$_.transition={};try{e()}finally{$_.transition=t}};cr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};cr.useCallback=function(e,t){return Qo.current.useCallback(e,t)};cr.useContext=function(e){return Qo.current.useContext(e)};cr.useDebugValue=function(){};cr.useDeferredValue=function(e){return Qo.current.useDeferredValue(e)};cr.useEffect=function(e,t){return Qo.current.useEffect(e,t)};cr.useId=function(){return Qo.current.useId()};cr.useImperativeHandle=function(e,t,n){return Qo.current.useImperativeHandle(e,t,n)};cr.useInsertionEffect=function(e,t){return Qo.current.useInsertionEffect(e,t)};cr.useLayoutEffect=function(e,t){return Qo.current.useLayoutEffect(e,t)};cr.useMemo=function(e,t){return Qo.current.useMemo(e,t)};cr.useReducer=function(e,t,n){return Qo.current.useReducer(e,t,n)};cr.useRef=function(e){return Qo.current.useRef(e)};cr.useState=function(e){return Qo.current.useState(e)};cr.useSyncExternalStore=function(e,t,n){return Qo.current.useSyncExternalStore(e,t,n)};cr.useTransition=function(){return Qo.current.useTransition()};cr.version="18.2.0";g.exports=cr;var at=g.exports,kE=Z6({__proto__:null,default:at},[g.exports]),Xu={exports:{}},Oa={},mL={exports:{}},gL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ze,rt){var tt=Ze.length;Ze.push(rt);e:for(;0<tt;){var xe=tt-1>>>1,be=Ze[xe];if(0<a(be,rt))Ze[xe]=rt,Ze[tt]=be,tt=xe;else break e}}function n(Ze){return Ze.length===0?null:Ze[0]}function r(Ze){if(Ze.length===0)return null;var rt=Ze[0],tt=Ze.pop();if(tt!==rt){Ze[0]=tt;e:for(var xe=0,be=Ze.length,nn=be>>>1;xe<nn;){var $t=2*(xe+1)-1,an=Ze[$t],en=$t+1,ln=Ze[en];if(0>a(an,tt))en<be&&0>a(ln,an)?(Ze[xe]=ln,Ze[en]=tt,xe=en):(Ze[xe]=an,Ze[$t]=tt,xe=$t);else if(en<be&&0>a(ln,tt))Ze[xe]=ln,Ze[en]=tt,xe=en;else break e}}return rt}function a(Ze,rt){var tt=Ze.sortIndex-rt.sortIndex;return tt!==0?tt:Ze.id-rt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var h=Date,o=h.now();e.unstable_now=function(){return h.now()-o}}var m=[],w=[],A=1,P=null,O=3,B=!1,N=!1,k=!1,V=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(Ze){for(var rt=n(w);rt!==null;){if(rt.callback===null)r(w);else if(rt.startTime<=Ze)r(w),rt.sortIndex=rt.expirationTime,t(m,rt);else break;rt=n(w)}}function z(Ze){if(k=!1,F(Ze),!N)if(n(m)!==null)N=!0,Ee(S);else{var rt=n(w);rt!==null&&ct(z,rt.startTime-Ze)}}function S(Ze,rt){N=!1,k&&(k=!1,U(Y),Y=-1),B=!0;var tt=O;try{for(F(rt),P=n(m);P!==null&&(!(P.expirationTime>rt)||Ze&&!ee());){var xe=P.callback;if(typeof xe=="function"){P.callback=null,O=P.priorityLevel;var be=xe(P.expirationTime<=rt);rt=e.unstable_now(),typeof be=="function"?P.callback=be:P===n(m)&&r(m),F(rt)}else r(m);P=n(m)}if(P!==null)var nn=!0;else{var $t=n(w);$t!==null&&ct(z,$t.startTime-rt),nn=!1}return nn}finally{P=null,O=tt,B=!1}}var b=!1,D=null,Y=-1,re=5,ae=-1;function ee(){return!(e.unstable_now()-ae<re)}function de(){if(D!==null){var Ze=e.unstable_now();ae=Ze;var rt=!0;try{rt=D(!0,Ze)}finally{rt?ke():(b=!1,D=null)}}else b=!1}var ke;if(typeof W=="function")ke=function(){W(de)};else if(typeof MessageChannel!="undefined"){var Oe=new MessageChannel,Le=Oe.port2;Oe.port1.onmessage=de,ke=function(){Le.postMessage(null)}}else ke=function(){V(de,0)};function Ee(Ze){D=Ze,b||(b=!0,ke())}function ct(Ze,rt){Y=V(function(){Ze(e.unstable_now())},rt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ze){Ze.callback=null},e.unstable_continueExecution=function(){N||B||(N=!0,Ee(S))},e.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<Ze?Math.floor(1e3/Ze):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return n(m)},e.unstable_next=function(Ze){switch(O){case 1:case 2:case 3:var rt=3;break;default:rt=O}var tt=O;O=rt;try{return Ze()}finally{O=tt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ze,rt){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var tt=O;O=Ze;try{return rt()}finally{O=tt}},e.unstable_scheduleCallback=function(Ze,rt,tt){var xe=e.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?xe+tt:xe):tt=xe,Ze){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=tt+be,Ze={id:A++,callback:rt,priorityLevel:Ze,startTime:tt,expirationTime:be,sortIndex:-1},tt>xe?(Ze.sortIndex=tt,t(w,Ze),n(m)===null&&Ze===n(w)&&(k?(U(Y),Y=-1):k=!0,ct(z,tt-xe))):(Ze.sortIndex=be,t(m,Ze),N||B||(N=!0,Ee(S))),Ze},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(Ze){var rt=O;return function(){var tt=O;O=rt;try{return Ze.apply(this,arguments)}finally{O=tt}}}})(gL);mL.exports=gL;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yL=g.exports,La=mL.exports;function Gt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vL=new Set,kg={};function Vd(e,t){$p(e,t),$p(e+"Capture",t)}function $p(e,t){for(kg[e]=t,e=0;e<t.length;e++)vL.add(t[e])}var Hl=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),AE=Object.prototype.hasOwnProperty,h$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,EM={},CM={};function p$(e){return AE.call(CM,e)?!0:AE.call(EM,e)?!1:h$.test(e)?CM[e]=!0:(EM[e]=!0,!1)}function f$(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function m$(e,t,n,r){if(t===null||typeof t=="undefined"||f$(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ea(e,t,n,r,a,c,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=h}var To={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){To[e]=new ea(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];To[t]=new ea(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){To[e]=new ea(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){To[e]=new ea(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){To[e]=new ea(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){To[e]=new ea(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){To[e]=new ea(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){To[e]=new ea(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){To[e]=new ea(e,5,!1,e.toLowerCase(),null,!1,!1)});var bS=/[\-:]([a-z])/g;function wS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bS,wS);To[t]=new ea(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bS,wS);To[t]=new ea(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bS,wS);To[t]=new ea(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){To[e]=new ea(e,1,!1,e.toLowerCase(),null,!1,!1)});To.xlinkHref=new ea("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){To[e]=new ea(e,1,!1,e.toLowerCase(),null,!0,!0)});function ES(e,t,n,r){var a=To.hasOwnProperty(t)?To[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(m$(t,n,a,r)&&(n=null),r||a===null?p$(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Jl=yL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u_=Symbol.for("react.element"),up=Symbol.for("react.portal"),cp=Symbol.for("react.fragment"),CS=Symbol.for("react.strict_mode"),ME=Symbol.for("react.profiler"),_L=Symbol.for("react.provider"),xL=Symbol.for("react.context"),SS=Symbol.for("react.forward_ref"),IE=Symbol.for("react.suspense"),PE=Symbol.for("react.suspense_list"),TS=Symbol.for("react.memo"),$u=Symbol.for("react.lazy"),bL=Symbol.for("react.offscreen"),SM=Symbol.iterator;function zm(e){return e===null||typeof e!="object"?null:(e=SM&&e[SM]||e["@@iterator"],typeof e=="function"?e:null)}var Ii=Object.assign,rw;function eg(e){if(rw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);rw=t&&t[1]||""}return`
`+rw+e}var iw=!1;function ow(e,t){if(!e||iw)return"";iw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var r=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){r=w}e.call(t.prototype)}else{try{throw Error()}catch(w){r=w}e()}}catch(w){if(w&&r&&typeof w.stack=="string"){for(var a=w.stack.split(`
`),c=r.stack.split(`
`),h=a.length-1,o=c.length-1;1<=h&&0<=o&&a[h]!==c[o];)o--;for(;1<=h&&0<=o;h--,o--)if(a[h]!==c[o]){if(h!==1||o!==1)do if(h--,o--,0>o||a[h]!==c[o]){var m=`
`+a[h].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=h&&0<=o);break}}}finally{iw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?eg(e):""}function g$(e){switch(e.tag){case 5:return eg(e.type);case 16:return eg("Lazy");case 13:return eg("Suspense");case 19:return eg("SuspenseList");case 0:case 2:case 15:return e=ow(e.type,!1),e;case 11:return e=ow(e.type.render,!1),e;case 1:return e=ow(e.type,!0),e;default:return""}}function DE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cp:return"Fragment";case up:return"Portal";case ME:return"Profiler";case CS:return"StrictMode";case IE:return"Suspense";case PE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xL:return(e.displayName||"Context")+".Consumer";case _L:return(e._context.displayName||"Context")+".Provider";case SS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case TS:return t=e.displayName||null,t!==null?t:DE(e.type)||"Memo";case $u:t=e._payload,e=e._init;try{return DE(e(t))}catch{}}return null}function y$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return DE(t);case 8:return t===CS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function oc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function v$(e){var t=wL(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(h){r=""+h,c.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function c_(e){e._valueTracker||(e._valueTracker=v$(e))}function EL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wL(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hx(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function RE(e,t){var n=t.checked;return Ii({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function TM(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=oc(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function CL(e,t){t=t.checked,t!=null&&ES(e,"checked",t,!1)}function LE(e,t){CL(e,t);var n=oc(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?OE(e,t.type,n):t.hasOwnProperty("defaultValue")&&OE(e,t.type,oc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kM(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function OE(e,t,n){(t!=="number"||hx(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tg=Array.isArray;function Sp(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+oc(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function zE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Gt(91));return Ii({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function AM(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Gt(92));if(tg(n)){if(1<n.length)throw Error(Gt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:oc(n)}}function SL(e,t){var n=oc(t.value),r=oc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function MM(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function TL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function BE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?TL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var d_,kL=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(d_=d_||document.createElement("div"),d_.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=d_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ag(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var og={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_$=["Webkit","ms","Moz","O"];Object.keys(og).forEach(function(e){_$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),og[t]=og[e]})});function AL(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||og.hasOwnProperty(e)&&og[e]?(""+t).trim():t+"px"}function ML(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=AL(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var x$=Ii({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FE(e,t){if(t){if(x$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Gt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Gt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Gt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Gt(62))}}function NE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $E=null;function kS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var UE=null,Tp=null,kp=null;function IM(e){if(e=sy(e)){if(typeof UE!="function")throw Error(Gt(280));var t=e.stateNode;t&&(t=v0(t),UE(e.stateNode,e.type,t))}}function IL(e){Tp?kp?kp.push(e):kp=[e]:Tp=e}function PL(){if(Tp){var e=Tp,t=kp;if(kp=Tp=null,IM(e),t)for(e=0;e<t.length;e++)IM(t[e])}}function DL(e,t){return e(t)}function RL(){}var aw=!1;function LL(e,t,n){if(aw)return e(t,n);aw=!0;try{return DL(e,t,n)}finally{aw=!1,(Tp!==null||kp!==null)&&(RL(),PL())}}function Mg(e,t){var n=e.stateNode;if(n===null)return null;var r=v0(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Gt(231,t,typeof n));return n}var jE=!1;if(Hl)try{var Bm={};Object.defineProperty(Bm,"passive",{get:function(){jE=!0}}),window.addEventListener("test",Bm,Bm),window.removeEventListener("test",Bm,Bm)}catch{jE=!1}function b$(e,t,n,r,a,c,h,o,m){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(A){this.onError(A)}}var ag=!1,px=null,fx=!1,VE=null,w$={onError:function(e){ag=!0,px=e}};function E$(e,t,n,r,a,c,h,o,m){ag=!1,px=null,b$.apply(w$,arguments)}function C$(e,t,n,r,a,c,h,o,m){if(E$.apply(this,arguments),ag){if(ag){var w=px;ag=!1,px=null}else throw Error(Gt(198));fx||(fx=!0,VE=w)}}function Hd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function OL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function PM(e){if(Hd(e)!==e)throw Error(Gt(188))}function S$(e){var t=e.alternate;if(!t){if(t=Hd(e),t===null)throw Error(Gt(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return PM(a),e;if(c===r)return PM(a),t;c=c.sibling}throw Error(Gt(188))}if(n.return!==r.return)n=a,r=c;else{for(var h=!1,o=a.child;o;){if(o===n){h=!0,n=a,r=c;break}if(o===r){h=!0,r=a,n=c;break}o=o.sibling}if(!h){for(o=c.child;o;){if(o===n){h=!0,n=c,r=a;break}if(o===r){h=!0,r=c,n=a;break}o=o.sibling}if(!h)throw Error(Gt(189))}}if(n.alternate!==r)throw Error(Gt(190))}if(n.tag!==3)throw Error(Gt(188));return n.stateNode.current===n?e:t}function zL(e){return e=S$(e),e!==null?BL(e):null}function BL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=BL(e);if(t!==null)return t;e=e.sibling}return null}var FL=La.unstable_scheduleCallback,DM=La.unstable_cancelCallback,T$=La.unstable_shouldYield,k$=La.unstable_requestPaint,ji=La.unstable_now,A$=La.unstable_getCurrentPriorityLevel,AS=La.unstable_ImmediatePriority,NL=La.unstable_UserBlockingPriority,mx=La.unstable_NormalPriority,M$=La.unstable_LowPriority,$L=La.unstable_IdlePriority,f0=null,cl=null;function I$(e){if(cl&&typeof cl.onCommitFiberRoot=="function")try{cl.onCommitFiberRoot(f0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:R$,P$=Math.log,D$=Math.LN2;function R$(e){return e>>>=0,e===0?32:31-(P$(e)/D$|0)|0}var h_=64,p_=4194304;function ng(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gx(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,c=e.pingedLanes,h=n&268435455;if(h!==0){var o=h&~a;o!==0?r=ng(o):(c&=h,c!==0&&(r=ng(c)))}else h=n&~a,h!==0?r=ng(h):c!==0&&(r=ng(c));if(r===0)return 0;if(t!==0&&t!==r&&(t&a)===0&&(a=r&-r,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ds(t),a=1<<n,r|=e[n],t&=~a;return r}function L$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O$(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var h=31-Ds(c),o=1<<h,m=a[h];m===-1?((o&n)===0||(o&r)!==0)&&(a[h]=L$(o,t)):m<=t&&(e.expiredLanes|=o),c&=~o}}function HE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function UL(){var e=h_;return h_<<=1,(h_&4194240)===0&&(h_=64),e}function sw(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function oy(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ds(t),e[t]=n}function z$(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ds(n),c=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~c}}function MS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ds(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Yr=0;function jL(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var VL,IS,HL,WL,GL,WE=!1,f_=[],Ku=null,Yu=null,Ju=null,Ig=new Map,Pg=new Map,ju=[],B$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function RM(e,t){switch(e){case"focusin":case"focusout":Ku=null;break;case"dragenter":case"dragleave":Yu=null;break;case"mouseover":case"mouseout":Ju=null;break;case"pointerover":case"pointerout":Ig.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pg.delete(t.pointerId)}}function Fm(e,t,n,r,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:c,targetContainers:[a]},t!==null&&(t=sy(t),t!==null&&IS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function F$(e,t,n,r,a){switch(t){case"focusin":return Ku=Fm(Ku,e,t,n,r,a),!0;case"dragenter":return Yu=Fm(Yu,e,t,n,r,a),!0;case"mouseover":return Ju=Fm(Ju,e,t,n,r,a),!0;case"pointerover":var c=a.pointerId;return Ig.set(c,Fm(Ig.get(c)||null,e,t,n,r,a)),!0;case"gotpointercapture":return c=a.pointerId,Pg.set(c,Fm(Pg.get(c)||null,e,t,n,r,a)),!0}return!1}function qL(e){var t=xd(e.target);if(t!==null){var n=Hd(t);if(n!==null){if(t=n.tag,t===13){if(t=OL(n),t!==null){e.blockedOn=t,GL(e.priority,function(){HL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function U_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=GE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$E=r,n.target.dispatchEvent(r),$E=null}else return t=sy(n),t!==null&&IS(t),e.blockedOn=n,!1;t.shift()}return!0}function LM(e,t,n){U_(e)&&n.delete(t)}function N$(){WE=!1,Ku!==null&&U_(Ku)&&(Ku=null),Yu!==null&&U_(Yu)&&(Yu=null),Ju!==null&&U_(Ju)&&(Ju=null),Ig.forEach(LM),Pg.forEach(LM)}function Nm(e,t){e.blockedOn===t&&(e.blockedOn=null,WE||(WE=!0,La.unstable_scheduleCallback(La.unstable_NormalPriority,N$)))}function Dg(e){function t(a){return Nm(a,e)}if(0<f_.length){Nm(f_[0],e);for(var n=1;n<f_.length;n++){var r=f_[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ku!==null&&Nm(Ku,e),Yu!==null&&Nm(Yu,e),Ju!==null&&Nm(Ju,e),Ig.forEach(t),Pg.forEach(t),n=0;n<ju.length;n++)r=ju[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ju.length&&(n=ju[0],n.blockedOn===null);)qL(n),n.blockedOn===null&&ju.shift()}var Ap=Jl.ReactCurrentBatchConfig,yx=!0;function $$(e,t,n,r){var a=Yr,c=Ap.transition;Ap.transition=null;try{Yr=1,PS(e,t,n,r)}finally{Yr=a,Ap.transition=c}}function U$(e,t,n,r){var a=Yr,c=Ap.transition;Ap.transition=null;try{Yr=4,PS(e,t,n,r)}finally{Yr=a,Ap.transition=c}}function PS(e,t,n,r){if(yx){var a=GE(e,t,n,r);if(a===null)yw(e,t,r,vx,n),RM(e,r);else if(F$(a,e,t,n,r))r.stopPropagation();else if(RM(e,r),t&4&&-1<B$.indexOf(e)){for(;a!==null;){var c=sy(a);if(c!==null&&VL(c),c=GE(e,t,n,r),c===null&&yw(e,t,r,vx,n),c===a)break;a=c}a!==null&&r.stopPropagation()}else yw(e,t,r,null,n)}}var vx=null;function GE(e,t,n,r){if(vx=null,e=kS(r),e=xd(e),e!==null)if(t=Hd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=OL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vx=e,null}function ZL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A$()){case AS:return 1;case NL:return 4;case mx:case M$:return 16;case $L:return 536870912;default:return 16}default:return 16}}var Wu=null,DS=null,j_=null;function XL(){if(j_)return j_;var e,t=DS,n=t.length,r,a="value"in Wu?Wu.value:Wu.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var h=n-e;for(r=1;r<=h&&t[n-r]===a[c-r];r++);return j_=a.slice(e,1<r?1-r:void 0)}function V_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function m_(){return!0}function OM(){return!1}function za(e){function t(n,r,a,c,h){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(c):c[o]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?m_:OM,this.isPropagationStopped=OM,this}return Ii(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=m_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=m_)},persist:function(){},isPersistent:m_}),t}var nf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RS=za(nf),ay=Ii({},nf,{view:0,detail:0}),j$=za(ay),lw,uw,$m,m0=Ii({},ay,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:LS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$m&&($m&&e.type==="mousemove"?(lw=e.screenX-$m.screenX,uw=e.screenY-$m.screenY):uw=lw=0,$m=e),lw)},movementY:function(e){return"movementY"in e?e.movementY:uw}}),zM=za(m0),V$=Ii({},m0,{dataTransfer:0}),H$=za(V$),W$=Ii({},ay,{relatedTarget:0}),cw=za(W$),G$=Ii({},nf,{animationName:0,elapsedTime:0,pseudoElement:0}),q$=za(G$),Z$=Ii({},nf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),X$=za(Z$),K$=Ii({},nf,{data:0}),BM=za(K$),Y$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eU(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Q$[e])?!!t[e]:!1}function LS(){return eU}var tU=Ii({},ay,{key:function(e){if(e.key){var t=Y$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=V_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?J$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:LS,charCode:function(e){return e.type==="keypress"?V_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?V_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nU=za(tU),rU=Ii({},m0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FM=za(rU),iU=Ii({},ay,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:LS}),oU=za(iU),aU=Ii({},nf,{propertyName:0,elapsedTime:0,pseudoElement:0}),sU=za(aU),lU=Ii({},m0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uU=za(lU),cU=[9,13,27,32],OS=Hl&&"CompositionEvent"in window,sg=null;Hl&&"documentMode"in document&&(sg=document.documentMode);var dU=Hl&&"TextEvent"in window&&!sg,KL=Hl&&(!OS||sg&&8<sg&&11>=sg),NM=String.fromCharCode(32),$M=!1;function YL(e,t){switch(e){case"keyup":return cU.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dp=!1;function hU(e,t){switch(e){case"compositionend":return JL(t);case"keypress":return t.which!==32?null:($M=!0,NM);case"textInput":return e=t.data,e===NM&&$M?null:e;default:return null}}function pU(e,t){if(dp)return e==="compositionend"||!OS&&YL(e,t)?(e=XL(),j_=DS=Wu=null,dp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return KL&&t.locale!=="ko"?null:t.data;default:return null}}var fU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fU[e.type]:t==="textarea"}function QL(e,t,n,r){IL(r),t=_x(t,"onChange"),0<t.length&&(n=new RS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var lg=null,Rg=null;function mU(e){cO(e,0)}function g0(e){var t=fp(e);if(EL(t))return e}function gU(e,t){if(e==="change")return t}var eO=!1;if(Hl){var dw;if(Hl){var hw="oninput"in document;if(!hw){var jM=document.createElement("div");jM.setAttribute("oninput","return;"),hw=typeof jM.oninput=="function"}dw=hw}else dw=!1;eO=dw&&(!document.documentMode||9<document.documentMode)}function VM(){lg&&(lg.detachEvent("onpropertychange",tO),Rg=lg=null)}function tO(e){if(e.propertyName==="value"&&g0(Rg)){var t=[];QL(t,Rg,e,kS(e)),LL(mU,t)}}function yU(e,t,n){e==="focusin"?(VM(),lg=t,Rg=n,lg.attachEvent("onpropertychange",tO)):e==="focusout"&&VM()}function vU(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return g0(Rg)}function _U(e,t){if(e==="click")return g0(t)}function xU(e,t){if(e==="input"||e==="change")return g0(t)}function bU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zs=typeof Object.is=="function"?Object.is:bU;function Lg(e,t){if(zs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!AE.call(t,a)||!zs(e[a],t[a]))return!1}return!0}function HM(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function WM(e,t){var n=HM(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=HM(n)}}function nO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rO(){for(var e=window,t=hx();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hx(e.document)}return t}function zS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wU(e){var t=rO(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nO(n.ownerDocument.documentElement,n)){if(r!==null&&zS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(r.start,a);r=r.end===void 0?c:Math.min(r.end,a),!e.extend&&c>r&&(a=r,r=c,c=a),a=WM(n,c);var h=WM(n,r);a&&h&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>r?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var EU=Hl&&"documentMode"in document&&11>=document.documentMode,hp=null,qE=null,ug=null,ZE=!1;function GM(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ZE||hp==null||hp!==hx(r)||(r=hp,"selectionStart"in r&&zS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ug&&Lg(ug,r)||(ug=r,r=_x(qE,"onSelect"),0<r.length&&(t=new RS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hp)))}function g_(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pp={animationend:g_("Animation","AnimationEnd"),animationiteration:g_("Animation","AnimationIteration"),animationstart:g_("Animation","AnimationStart"),transitionend:g_("Transition","TransitionEnd")},pw={},iO={};Hl&&(iO=document.createElement("div").style,"AnimationEvent"in window||(delete pp.animationend.animation,delete pp.animationiteration.animation,delete pp.animationstart.animation),"TransitionEvent"in window||delete pp.transitionend.transition);function y0(e){if(pw[e])return pw[e];if(!pp[e])return e;var t=pp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in iO)return pw[e]=t[n];return e}var oO=y0("animationend"),aO=y0("animationiteration"),sO=y0("animationstart"),lO=y0("transitionend"),uO=new Map,qM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dc(e,t){uO.set(e,t),Vd(t,[e])}for(var fw=0;fw<qM.length;fw++){var mw=qM[fw],CU=mw.toLowerCase(),SU=mw[0].toUpperCase()+mw.slice(1);dc(CU,"on"+SU)}dc(oO,"onAnimationEnd");dc(aO,"onAnimationIteration");dc(sO,"onAnimationStart");dc("dblclick","onDoubleClick");dc("focusin","onFocus");dc("focusout","onBlur");dc(lO,"onTransitionEnd");$p("onMouseEnter",["mouseout","mouseover"]);$p("onMouseLeave",["mouseout","mouseover"]);$p("onPointerEnter",["pointerout","pointerover"]);$p("onPointerLeave",["pointerout","pointerover"]);Vd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TU=new Set("cancel close invalid load scroll toggle".split(" ").concat(rg));function ZM(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,C$(r,t,void 0,e),e.currentTarget=null}function cO(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var c=void 0;if(t)for(var h=r.length-1;0<=h;h--){var o=r[h],m=o.instance,w=o.currentTarget;if(o=o.listener,m!==c&&a.isPropagationStopped())break e;ZM(a,o,w),c=m}else for(h=0;h<r.length;h++){if(o=r[h],m=o.instance,w=o.currentTarget,o=o.listener,m!==c&&a.isPropagationStopped())break e;ZM(a,o,w),c=m}}}if(fx)throw e=VE,fx=!1,VE=null,e}function ci(e,t){var n=t[QE];n===void 0&&(n=t[QE]=new Set);var r=e+"__bubble";n.has(r)||(dO(t,e,2,!1),n.add(r))}function gw(e,t,n){var r=0;t&&(r|=4),dO(n,e,r,t)}var y_="_reactListening"+Math.random().toString(36).slice(2);function Og(e){if(!e[y_]){e[y_]=!0,vL.forEach(function(n){n!=="selectionchange"&&(TU.has(n)||gw(n,!1,e),gw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[y_]||(t[y_]=!0,gw("selectionchange",!1,t))}}function dO(e,t,n,r){switch(ZL(t)){case 1:var a=$$;break;case 4:a=U$;break;default:a=PS}n=a.bind(null,t,n,e),a=void 0,!jE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function yw(e,t,n,r,a){var c=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(h===4)for(h=r.return;h!==null;){var m=h.tag;if((m===3||m===4)&&(m=h.stateNode.containerInfo,m===a||m.nodeType===8&&m.parentNode===a))return;h=h.return}for(;o!==null;){if(h=xd(o),h===null)return;if(m=h.tag,m===5||m===6){r=c=h;continue e}o=o.parentNode}}r=r.return}LL(function(){var w=c,A=kS(n),P=[];e:{var O=uO.get(e);if(O!==void 0){var B=RS,N=e;switch(e){case"keypress":if(V_(n)===0)break e;case"keydown":case"keyup":B=nU;break;case"focusin":N="focus",B=cw;break;case"focusout":N="blur",B=cw;break;case"beforeblur":case"afterblur":B=cw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=zM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=H$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=oU;break;case oO:case aO:case sO:B=q$;break;case lO:B=sU;break;case"scroll":B=j$;break;case"wheel":B=uU;break;case"copy":case"cut":case"paste":B=X$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=FM}var k=(t&4)!==0,V=!k&&e==="scroll",U=k?O!==null?O+"Capture":null:O;k=[];for(var W=w,F;W!==null;){F=W;var z=F.stateNode;if(F.tag===5&&z!==null&&(F=z,U!==null&&(z=Mg(W,U),z!=null&&k.push(zg(W,z,F)))),V)break;W=W.return}0<k.length&&(O=new B(O,N,null,n,A),P.push({event:O,listeners:k}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",O&&n!==$E&&(N=n.relatedTarget||n.fromElement)&&(xd(N)||N[Wl]))break e;if((B||O)&&(O=A.window===A?A:(O=A.ownerDocument)?O.defaultView||O.parentWindow:window,B?(N=n.relatedTarget||n.toElement,B=w,N=N?xd(N):null,N!==null&&(V=Hd(N),N!==V||N.tag!==5&&N.tag!==6)&&(N=null)):(B=null,N=w),B!==N)){if(k=zM,z="onMouseLeave",U="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(k=FM,z="onPointerLeave",U="onPointerEnter",W="pointer"),V=B==null?O:fp(B),F=N==null?O:fp(N),O=new k(z,W+"leave",B,n,A),O.target=V,O.relatedTarget=F,z=null,xd(A)===w&&(k=new k(U,W+"enter",N,n,A),k.target=F,k.relatedTarget=V,z=k),V=z,B&&N)t:{for(k=B,U=N,W=0,F=k;F;F=Jh(F))W++;for(F=0,z=U;z;z=Jh(z))F++;for(;0<W-F;)k=Jh(k),W--;for(;0<F-W;)U=Jh(U),F--;for(;W--;){if(k===U||U!==null&&k===U.alternate)break t;k=Jh(k),U=Jh(U)}k=null}else k=null;B!==null&&XM(P,O,B,k,!1),N!==null&&V!==null&&XM(P,V,N,k,!0)}}e:{if(O=w?fp(w):window,B=O.nodeName&&O.nodeName.toLowerCase(),B==="select"||B==="input"&&O.type==="file")var S=gU;else if(UM(O))if(eO)S=xU;else{S=vU;var b=yU}else(B=O.nodeName)&&B.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(S=_U);if(S&&(S=S(e,w))){QL(P,S,n,A);break e}b&&b(e,O,w),e==="focusout"&&(b=O._wrapperState)&&b.controlled&&O.type==="number"&&OE(O,"number",O.value)}switch(b=w?fp(w):window,e){case"focusin":(UM(b)||b.contentEditable==="true")&&(hp=b,qE=w,ug=null);break;case"focusout":ug=qE=hp=null;break;case"mousedown":ZE=!0;break;case"contextmenu":case"mouseup":case"dragend":ZE=!1,GM(P,n,A);break;case"selectionchange":if(EU)break;case"keydown":case"keyup":GM(P,n,A)}var D;if(OS)e:{switch(e){case"compositionstart":var Y="onCompositionStart";break e;case"compositionend":Y="onCompositionEnd";break e;case"compositionupdate":Y="onCompositionUpdate";break e}Y=void 0}else dp?YL(e,n)&&(Y="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Y="onCompositionStart");Y&&(KL&&n.locale!=="ko"&&(dp||Y!=="onCompositionStart"?Y==="onCompositionEnd"&&dp&&(D=XL()):(Wu=A,DS="value"in Wu?Wu.value:Wu.textContent,dp=!0)),b=_x(w,Y),0<b.length&&(Y=new BM(Y,e,null,n,A),P.push({event:Y,listeners:b}),D?Y.data=D:(D=JL(n),D!==null&&(Y.data=D)))),(D=dU?hU(e,n):pU(e,n))&&(w=_x(w,"onBeforeInput"),0<w.length&&(A=new BM("onBeforeInput","beforeinput",null,n,A),P.push({event:A,listeners:w}),A.data=D))}cO(P,t)})}function zg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _x(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Mg(e,n),c!=null&&r.unshift(zg(e,c,a)),c=Mg(e,t),c!=null&&r.push(zg(e,c,a))),e=e.return}return r}function Jh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function XM(e,t,n,r,a){for(var c=t._reactName,h=[];n!==null&&n!==r;){var o=n,m=o.alternate,w=o.stateNode;if(m!==null&&m===r)break;o.tag===5&&w!==null&&(o=w,a?(m=Mg(n,c),m!=null&&h.unshift(zg(n,m,o))):a||(m=Mg(n,c),m!=null&&h.push(zg(n,m,o)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var kU=/\r\n?/g,AU=/\u0000|\uFFFD/g;function KM(e){return(typeof e=="string"?e:""+e).replace(kU,`
`).replace(AU,"")}function v_(e,t,n){if(t=KM(t),KM(e)!==t&&n)throw Error(Gt(425))}function xx(){}var XE=null,KE=null;function YE(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var JE=typeof setTimeout=="function"?setTimeout:void 0,MU=typeof clearTimeout=="function"?clearTimeout:void 0,YM=typeof Promise=="function"?Promise:void 0,IU=typeof queueMicrotask=="function"?queueMicrotask:typeof YM!="undefined"?function(e){return YM.resolve(null).then(e).catch(PU)}:JE;function PU(e){setTimeout(function(){throw e})}function vw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Dg(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Dg(t)}function Qu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function JM(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var rf=Math.random().toString(36).slice(2),sl="__reactFiber$"+rf,Bg="__reactProps$"+rf,Wl="__reactContainer$"+rf,QE="__reactEvents$"+rf,DU="__reactListeners$"+rf,RU="__reactHandles$"+rf;function xd(e){var t=e[sl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wl]||n[sl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=JM(e);e!==null;){if(n=e[sl])return n;e=JM(e)}return t}e=n,n=e.parentNode}return null}function sy(e){return e=e[sl]||e[Wl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Gt(33))}function v0(e){return e[Bg]||null}var eC=[],mp=-1;function hc(e){return{current:e}}function hi(e){0>mp||(e.current=eC[mp],eC[mp]=null,mp--)}function ri(e,t){mp++,eC[mp]=e.current,e.current=t}var ac={},Vo=hc(ac),pa=hc(!1),Dd=ac;function Up(e,t){var n=e.type.contextTypes;if(!n)return ac;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function fa(e){return e=e.childContextTypes,e!=null}function bx(){hi(pa),hi(Vo)}function QM(e,t,n){if(Vo.current!==ac)throw Error(Gt(168));ri(Vo,t),ri(pa,n)}function hO(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Gt(108,y$(e)||"Unknown",a));return Ii({},n,r)}function wx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ac,Dd=Vo.current,ri(Vo,e),ri(pa,pa.current),!0}function eI(e,t,n){var r=e.stateNode;if(!r)throw Error(Gt(169));n?(e=hO(e,t,Dd),r.__reactInternalMemoizedMergedChildContext=e,hi(pa),hi(Vo),ri(Vo,e)):hi(pa),ri(pa,n)}var Bl=null,_0=!1,_w=!1;function pO(e){Bl===null?Bl=[e]:Bl.push(e)}function LU(e){_0=!0,pO(e)}function pc(){if(!_w&&Bl!==null){_w=!0;var e=0,t=Yr;try{var n=Bl;for(Yr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Bl=null,_0=!1}catch(a){throw Bl!==null&&(Bl=Bl.slice(e+1)),FL(AS,pc),a}finally{Yr=t,_w=!1}}return null}var gp=[],yp=0,Ex=null,Cx=0,Xa=[],Ka=0,Rd=null,Fl=1,Nl="";function dd(e,t){gp[yp++]=Cx,gp[yp++]=Ex,Ex=e,Cx=t}function fO(e,t,n){Xa[Ka++]=Fl,Xa[Ka++]=Nl,Xa[Ka++]=Rd,Rd=e;var r=Fl;e=Nl;var a=32-Ds(r)-1;r&=~(1<<a),n+=1;var c=32-Ds(t)+a;if(30<c){var h=a-a%5;c=(r&(1<<h)-1).toString(32),r>>=h,a-=h,Fl=1<<32-Ds(t)+a|n<<a|r,Nl=c+e}else Fl=1<<c|n<<a|r,Nl=e}function BS(e){e.return!==null&&(dd(e,1),fO(e,1,0))}function FS(e){for(;e===Ex;)Ex=gp[--yp],gp[yp]=null,Cx=gp[--yp],gp[yp]=null;for(;e===Rd;)Rd=Xa[--Ka],Xa[Ka]=null,Nl=Xa[--Ka],Xa[Ka]=null,Fl=Xa[--Ka],Xa[Ka]=null}var Pa=null,Ma=null,vi=!1,Ms=null;function mO(e,t){var n=Qa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function tI(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pa=e,Ma=Qu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pa=e,Ma=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rd!==null?{id:Fl,overflow:Nl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qa(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pa=e,Ma=null,!0):!1;default:return!1}}function tC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nC(e){if(vi){var t=Ma;if(t){var n=t;if(!tI(e,t)){if(tC(e))throw Error(Gt(418));t=Qu(n.nextSibling);var r=Pa;t&&tI(e,t)?mO(r,n):(e.flags=e.flags&-4097|2,vi=!1,Pa=e)}}else{if(tC(e))throw Error(Gt(418));e.flags=e.flags&-4097|2,vi=!1,Pa=e}}}function nI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pa=e}function __(e){if(e!==Pa)return!1;if(!vi)return nI(e),vi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!YE(e.type,e.memoizedProps)),t&&(t=Ma)){if(tC(e))throw gO(),Error(Gt(418));for(;t;)mO(e,t),t=Qu(t.nextSibling)}if(nI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Gt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ma=Qu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ma=null}}else Ma=Pa?Qu(e.stateNode.nextSibling):null;return!0}function gO(){for(var e=Ma;e;)e=Qu(e.nextSibling)}function jp(){Ma=Pa=null,vi=!1}function NS(e){Ms===null?Ms=[e]:Ms.push(e)}var OU=Jl.ReactCurrentBatchConfig;function ks(e,t){if(e&&e.defaultProps){t=Ii({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Sx=hc(null),Tx=null,vp=null,$S=null;function US(){$S=vp=Tx=null}function jS(e){var t=Sx.current;hi(Sx),e._currentValue=t}function rC(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Mp(e,t){Tx=e,$S=vp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(da=!0),e.firstContext=null)}function rs(e){var t=e._currentValue;if($S!==e)if(e={context:e,memoizedValue:t,next:null},vp===null){if(Tx===null)throw Error(Gt(308));vp=e,Tx.dependencies={lanes:0,firstContext:e}}else vp=vp.next=e;return t}var bd=null;function VS(e){bd===null?bd=[e]:bd.push(e)}function yO(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,VS(t)):(n.next=a.next,a.next=n),t.interleaved=n,Gl(e,r)}function Gl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Uu=!1;function HS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ul(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ec(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Cr&2)!==0){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Gl(e,n)}return a=r.interleaved,a===null?(t.next=t,VS(r)):(t.next=a.next,a.next=t),r.interleaved=t,Gl(e,n)}function H_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,MS(e,n)}}function rI(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=h:c=c.next=h,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function kx(e,t,n,r){var a=e.updateQueue;Uu=!1;var c=a.firstBaseUpdate,h=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var m=o,w=m.next;m.next=null,h===null?c=w:h.next=w,h=m;var A=e.alternate;A!==null&&(A=A.updateQueue,o=A.lastBaseUpdate,o!==h&&(o===null?A.firstBaseUpdate=w:o.next=w,A.lastBaseUpdate=m))}if(c!==null){var P=a.baseState;h=0,A=w=m=null,o=c;do{var O=o.lane,B=o.eventTime;if((r&O)===O){A!==null&&(A=A.next={eventTime:B,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=e,k=o;switch(O=t,B=n,k.tag){case 1:if(N=k.payload,typeof N=="function"){P=N.call(B,P,O);break e}P=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=k.payload,O=typeof N=="function"?N.call(B,P,O):N,O==null)break e;P=Ii({},P,O);break e;case 2:Uu=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,O=a.effects,O===null?a.effects=[o]:O.push(o))}else B={eventTime:B,lane:O,tag:o.tag,payload:o.payload,callback:o.callback,next:null},A===null?(w=A=B,m=P):A=A.next=B,h|=O;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;O=o,o=O.next,O.next=null,a.lastBaseUpdate=O,a.shared.pending=null}}while(1);if(A===null&&(m=P),a.baseState=m,a.firstBaseUpdate=w,a.lastBaseUpdate=A,t=a.shared.interleaved,t!==null){a=t;do h|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);Od|=h,e.lanes=h,e.memoizedState=P}}function iI(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Gt(191,a));a.call(r)}}}var _O=new yL.Component().refs;function iC(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ii({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var x0={isMounted:function(e){return(e=e._reactInternals)?Hd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yo(),a=nc(e),c=Ul(r,a);c.payload=t,n!=null&&(c.callback=n),t=ec(e,c,a),t!==null&&(Rs(t,e,a,r),H_(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yo(),a=nc(e),c=Ul(r,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=ec(e,c,a),t!==null&&(Rs(t,e,a,r),H_(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yo(),r=nc(e),a=Ul(n,r);a.tag=2,t!=null&&(a.callback=t),t=ec(e,a,r),t!==null&&(Rs(t,e,r,n),H_(t,e,r))}};function oI(e,t,n,r,a,c,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,c,h):t.prototype&&t.prototype.isPureReactComponent?!Lg(n,r)||!Lg(a,c):!0}function xO(e,t,n){var r=!1,a=ac,c=t.contextType;return typeof c=="object"&&c!==null?c=rs(c):(a=fa(t)?Dd:Vo.current,r=t.contextTypes,c=(r=r!=null)?Up(e,a):ac),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=x0,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function aI(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&x0.enqueueReplaceState(t,t.state,null)}function oC(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=_O,HS(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=rs(c):(c=fa(t)?Dd:Vo.current,a.context=Up(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(iC(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&x0.enqueueReplaceState(a,a.state,null),kx(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Um(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Gt(309));var r=n.stateNode}if(!r)throw Error(Gt(147,e));var a=r,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(h){var o=a.refs;o===_O&&(o=a.refs={}),h===null?delete o[c]:o[c]=h},t._stringRef=c,t)}if(typeof e!="string")throw Error(Gt(284));if(!n._owner)throw Error(Gt(290,e))}return e}function x_(e,t){throw e=Object.prototype.toString.call(t),Error(Gt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sI(e){var t=e._init;return t(e._payload)}function bO(e){function t(U,W){if(e){var F=U.deletions;F===null?(U.deletions=[W],U.flags|=16):F.push(W)}}function n(U,W){if(!e)return null;for(;W!==null;)t(U,W),W=W.sibling;return null}function r(U,W){for(U=new Map;W!==null;)W.key!==null?U.set(W.key,W):U.set(W.index,W),W=W.sibling;return U}function a(U,W){return U=rc(U,W),U.index=0,U.sibling=null,U}function c(U,W,F){return U.index=F,e?(F=U.alternate,F!==null?(F=F.index,F<W?(U.flags|=2,W):F):(U.flags|=2,W)):(U.flags|=1048576,W)}function h(U){return e&&U.alternate===null&&(U.flags|=2),U}function o(U,W,F,z){return W===null||W.tag!==6?(W=Tw(F,U.mode,z),W.return=U,W):(W=a(W,F),W.return=U,W)}function m(U,W,F,z){var S=F.type;return S===cp?A(U,W,F.props.children,z,F.key):W!==null&&(W.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===$u&&sI(S)===W.type)?(z=a(W,F.props),z.ref=Um(U,W,F),z.return=U,z):(z=K_(F.type,F.key,F.props,null,U.mode,z),z.ref=Um(U,W,F),z.return=U,z)}function w(U,W,F,z){return W===null||W.tag!==4||W.stateNode.containerInfo!==F.containerInfo||W.stateNode.implementation!==F.implementation?(W=kw(F,U.mode,z),W.return=U,W):(W=a(W,F.children||[]),W.return=U,W)}function A(U,W,F,z,S){return W===null||W.tag!==7?(W=kd(F,U.mode,z,S),W.return=U,W):(W=a(W,F),W.return=U,W)}function P(U,W,F){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Tw(""+W,U.mode,F),W.return=U,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case u_:return F=K_(W.type,W.key,W.props,null,U.mode,F),F.ref=Um(U,null,W),F.return=U,F;case up:return W=kw(W,U.mode,F),W.return=U,W;case $u:var z=W._init;return P(U,z(W._payload),F)}if(tg(W)||zm(W))return W=kd(W,U.mode,F,null),W.return=U,W;x_(U,W)}return null}function O(U,W,F,z){var S=W!==null?W.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return S!==null?null:o(U,W,""+F,z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case u_:return F.key===S?m(U,W,F,z):null;case up:return F.key===S?w(U,W,F,z):null;case $u:return S=F._init,O(U,W,S(F._payload),z)}if(tg(F)||zm(F))return S!==null?null:A(U,W,F,z,null);x_(U,F)}return null}function B(U,W,F,z,S){if(typeof z=="string"&&z!==""||typeof z=="number")return U=U.get(F)||null,o(W,U,""+z,S);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case u_:return U=U.get(z.key===null?F:z.key)||null,m(W,U,z,S);case up:return U=U.get(z.key===null?F:z.key)||null,w(W,U,z,S);case $u:var b=z._init;return B(U,W,F,b(z._payload),S)}if(tg(z)||zm(z))return U=U.get(F)||null,A(W,U,z,S,null);x_(W,z)}return null}function N(U,W,F,z){for(var S=null,b=null,D=W,Y=W=0,re=null;D!==null&&Y<F.length;Y++){D.index>Y?(re=D,D=null):re=D.sibling;var ae=O(U,D,F[Y],z);if(ae===null){D===null&&(D=re);break}e&&D&&ae.alternate===null&&t(U,D),W=c(ae,W,Y),b===null?S=ae:b.sibling=ae,b=ae,D=re}if(Y===F.length)return n(U,D),vi&&dd(U,Y),S;if(D===null){for(;Y<F.length;Y++)D=P(U,F[Y],z),D!==null&&(W=c(D,W,Y),b===null?S=D:b.sibling=D,b=D);return vi&&dd(U,Y),S}for(D=r(U,D);Y<F.length;Y++)re=B(D,U,Y,F[Y],z),re!==null&&(e&&re.alternate!==null&&D.delete(re.key===null?Y:re.key),W=c(re,W,Y),b===null?S=re:b.sibling=re,b=re);return e&&D.forEach(function(ee){return t(U,ee)}),vi&&dd(U,Y),S}function k(U,W,F,z){var S=zm(F);if(typeof S!="function")throw Error(Gt(150));if(F=S.call(F),F==null)throw Error(Gt(151));for(var b=S=null,D=W,Y=W=0,re=null,ae=F.next();D!==null&&!ae.done;Y++,ae=F.next()){D.index>Y?(re=D,D=null):re=D.sibling;var ee=O(U,D,ae.value,z);if(ee===null){D===null&&(D=re);break}e&&D&&ee.alternate===null&&t(U,D),W=c(ee,W,Y),b===null?S=ee:b.sibling=ee,b=ee,D=re}if(ae.done)return n(U,D),vi&&dd(U,Y),S;if(D===null){for(;!ae.done;Y++,ae=F.next())ae=P(U,ae.value,z),ae!==null&&(W=c(ae,W,Y),b===null?S=ae:b.sibling=ae,b=ae);return vi&&dd(U,Y),S}for(D=r(U,D);!ae.done;Y++,ae=F.next())ae=B(D,U,Y,ae.value,z),ae!==null&&(e&&ae.alternate!==null&&D.delete(ae.key===null?Y:ae.key),W=c(ae,W,Y),b===null?S=ae:b.sibling=ae,b=ae);return e&&D.forEach(function(de){return t(U,de)}),vi&&dd(U,Y),S}function V(U,W,F,z){if(typeof F=="object"&&F!==null&&F.type===cp&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case u_:e:{for(var S=F.key,b=W;b!==null;){if(b.key===S){if(S=F.type,S===cp){if(b.tag===7){n(U,b.sibling),W=a(b,F.props.children),W.return=U,U=W;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===$u&&sI(S)===b.type){n(U,b.sibling),W=a(b,F.props),W.ref=Um(U,b,F),W.return=U,U=W;break e}n(U,b);break}else t(U,b);b=b.sibling}F.type===cp?(W=kd(F.props.children,U.mode,z,F.key),W.return=U,U=W):(z=K_(F.type,F.key,F.props,null,U.mode,z),z.ref=Um(U,W,F),z.return=U,U=z)}return h(U);case up:e:{for(b=F.key;W!==null;){if(W.key===b)if(W.tag===4&&W.stateNode.containerInfo===F.containerInfo&&W.stateNode.implementation===F.implementation){n(U,W.sibling),W=a(W,F.children||[]),W.return=U,U=W;break e}else{n(U,W);break}else t(U,W);W=W.sibling}W=kw(F,U.mode,z),W.return=U,U=W}return h(U);case $u:return b=F._init,V(U,W,b(F._payload),z)}if(tg(F))return N(U,W,F,z);if(zm(F))return k(U,W,F,z);x_(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,W!==null&&W.tag===6?(n(U,W.sibling),W=a(W,F),W.return=U,U=W):(n(U,W),W=Tw(F,U.mode,z),W.return=U,U=W),h(U)):n(U,W)}return V}var Vp=bO(!0),wO=bO(!1),ly={},dl=hc(ly),Fg=hc(ly),Ng=hc(ly);function wd(e){if(e===ly)throw Error(Gt(174));return e}function WS(e,t){switch(ri(Ng,t),ri(Fg,e),ri(dl,ly),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:BE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=BE(t,e)}hi(dl),ri(dl,t)}function Hp(){hi(dl),hi(Fg),hi(Ng)}function EO(e){wd(Ng.current);var t=wd(dl.current),n=BE(t,e.type);t!==n&&(ri(Fg,e),ri(dl,n))}function GS(e){Fg.current===e&&(hi(dl),hi(Fg))}var ki=hc(0);function Ax(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xw=[];function qS(){for(var e=0;e<xw.length;e++)xw[e]._workInProgressVersionPrimary=null;xw.length=0}var W_=Jl.ReactCurrentDispatcher,bw=Jl.ReactCurrentBatchConfig,Ld=0,Mi=null,to=null,fo=null,Mx=!1,cg=!1,$g=0,zU=0;function Bo(){throw Error(Gt(321))}function ZS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zs(e[n],t[n]))return!1;return!0}function XS(e,t,n,r,a,c){if(Ld=c,Mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,W_.current=e===null||e.memoizedState===null?$U:UU,e=n(r,a),cg){c=0;do{if(cg=!1,$g=0,25<=c)throw Error(Gt(301));c+=1,fo=to=null,t.updateQueue=null,W_.current=jU,e=n(r,a)}while(cg)}if(W_.current=Ix,t=to!==null&&to.next!==null,Ld=0,fo=to=Mi=null,Mx=!1,t)throw Error(Gt(300));return e}function KS(){var e=$g!==0;return $g=0,e}function nl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fo===null?Mi.memoizedState=fo=e:fo=fo.next=e,fo}function is(){if(to===null){var e=Mi.alternate;e=e!==null?e.memoizedState:null}else e=to.next;var t=fo===null?Mi.memoizedState:fo.next;if(t!==null)fo=t,to=e;else{if(e===null)throw Error(Gt(310));to=e,e={memoizedState:to.memoizedState,baseState:to.baseState,baseQueue:to.baseQueue,queue:to.queue,next:null},fo===null?Mi.memoizedState=fo=e:fo=fo.next=e}return fo}function Ug(e,t){return typeof t=="function"?t(e):t}function ww(e){var t=is(),n=t.queue;if(n===null)throw Error(Gt(311));n.lastRenderedReducer=e;var r=to,a=r.baseQueue,c=n.pending;if(c!==null){if(a!==null){var h=a.next;a.next=c.next,c.next=h}r.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,r=r.baseState;var o=h=null,m=null,w=c;do{var A=w.lane;if((Ld&A)===A)m!==null&&(m=m.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),r=w.hasEagerState?w.eagerState:e(r,w.action);else{var P={lane:A,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};m===null?(o=m=P,h=r):m=m.next=P,Mi.lanes|=A,Od|=A}w=w.next}while(w!==null&&w!==c);m===null?h=r:m.next=o,zs(r,t.memoizedState)||(da=!0),t.memoizedState=r,t.baseState=h,t.baseQueue=m,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do c=a.lane,Mi.lanes|=c,Od|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ew(e){var t=is(),n=t.queue;if(n===null)throw Error(Gt(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var h=a=a.next;do c=e(c,h.action),h=h.next;while(h!==a);zs(c,t.memoizedState)||(da=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,r]}function CO(){}function SO(e,t){var n=Mi,r=is(),a=t(),c=!zs(r.memoizedState,a);if(c&&(r.memoizedState=a,da=!0),r=r.queue,YS(AO.bind(null,n,r,e),[e]),r.getSnapshot!==t||c||fo!==null&&fo.memoizedState.tag&1){if(n.flags|=2048,jg(9,kO.bind(null,n,r,a,t),void 0,null),go===null)throw Error(Gt(349));(Ld&30)!==0||TO(n,t,a)}return a}function TO(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function kO(e,t,n,r){t.value=n,t.getSnapshot=r,MO(t)&&IO(e)}function AO(e,t,n){return n(function(){MO(t)&&IO(e)})}function MO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zs(e,n)}catch{return!0}}function IO(e){var t=Gl(e,1);t!==null&&Rs(t,e,1,-1)}function lI(e){var t=nl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ug,lastRenderedState:e},t.queue=e,e=e.dispatch=NU.bind(null,Mi,e),[t.memoizedState,e]}function jg(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function PO(){return is().memoizedState}function G_(e,t,n,r){var a=nl();Mi.flags|=e,a.memoizedState=jg(1|t,n,void 0,r===void 0?null:r)}function b0(e,t,n,r){var a=is();r=r===void 0?null:r;var c=void 0;if(to!==null){var h=to.memoizedState;if(c=h.destroy,r!==null&&ZS(r,h.deps)){a.memoizedState=jg(t,n,c,r);return}}Mi.flags|=e,a.memoizedState=jg(1|t,n,c,r)}function uI(e,t){return G_(8390656,8,e,t)}function YS(e,t){return b0(2048,8,e,t)}function DO(e,t){return b0(4,2,e,t)}function RO(e,t){return b0(4,4,e,t)}function LO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function OO(e,t,n){return n=n!=null?n.concat([e]):null,b0(4,4,LO.bind(null,t,e),n)}function JS(){}function zO(e,t){var n=is();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ZS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function BO(e,t){var n=is();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ZS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function FO(e,t,n){return(Ld&21)===0?(e.baseState&&(e.baseState=!1,da=!0),e.memoizedState=n):(zs(n,t)||(n=UL(),Mi.lanes|=n,Od|=n,e.baseState=!0),t)}function BU(e,t){var n=Yr;Yr=n!==0&&4>n?n:4,e(!0);var r=bw.transition;bw.transition={};try{e(!1),t()}finally{Yr=n,bw.transition=r}}function NO(){return is().memoizedState}function FU(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$O(e))UO(t,n);else if(n=yO(e,t,n,r),n!==null){var a=Yo();Rs(n,e,r,a),jO(n,t,r)}}function NU(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($O(e))UO(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var h=t.lastRenderedState,o=c(h,n);if(a.hasEagerState=!0,a.eagerState=o,zs(o,h)){var m=t.interleaved;m===null?(a.next=a,VS(t)):(a.next=m.next,m.next=a),t.interleaved=a;return}}catch{}finally{}n=yO(e,t,a,r),n!==null&&(a=Yo(),Rs(n,e,r,a),jO(n,t,r))}}function $O(e){var t=e.alternate;return e===Mi||t!==null&&t===Mi}function UO(e,t){cg=Mx=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function jO(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,MS(e,n)}}var Ix={readContext:rs,useCallback:Bo,useContext:Bo,useEffect:Bo,useImperativeHandle:Bo,useInsertionEffect:Bo,useLayoutEffect:Bo,useMemo:Bo,useReducer:Bo,useRef:Bo,useState:Bo,useDebugValue:Bo,useDeferredValue:Bo,useTransition:Bo,useMutableSource:Bo,useSyncExternalStore:Bo,useId:Bo,unstable_isNewReconciler:!1},$U={readContext:rs,useCallback:function(e,t){return nl().memoizedState=[e,t===void 0?null:t],e},useContext:rs,useEffect:uI,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,G_(4194308,4,LO.bind(null,t,e),n)},useLayoutEffect:function(e,t){return G_(4194308,4,e,t)},useInsertionEffect:function(e,t){return G_(4,2,e,t)},useMemo:function(e,t){var n=nl();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=nl();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=FU.bind(null,Mi,e),[r.memoizedState,e]},useRef:function(e){var t=nl();return e={current:e},t.memoizedState=e},useState:lI,useDebugValue:JS,useDeferredValue:function(e){return nl().memoizedState=e},useTransition:function(){var e=lI(!1),t=e[0];return e=BU.bind(null,e[1]),nl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Mi,a=nl();if(vi){if(n===void 0)throw Error(Gt(407));n=n()}else{if(n=t(),go===null)throw Error(Gt(349));(Ld&30)!==0||TO(r,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,uI(AO.bind(null,r,c,e),[e]),r.flags|=2048,jg(9,kO.bind(null,r,c,n,t),void 0,null),n},useId:function(){var e=nl(),t=go.identifierPrefix;if(vi){var n=Nl,r=Fl;n=(r&~(1<<32-Ds(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$g++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=zU++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},UU={readContext:rs,useCallback:zO,useContext:rs,useEffect:YS,useImperativeHandle:OO,useInsertionEffect:DO,useLayoutEffect:RO,useMemo:BO,useReducer:ww,useRef:PO,useState:function(){return ww(Ug)},useDebugValue:JS,useDeferredValue:function(e){var t=is();return FO(t,to.memoizedState,e)},useTransition:function(){var e=ww(Ug)[0],t=is().memoizedState;return[e,t]},useMutableSource:CO,useSyncExternalStore:SO,useId:NO,unstable_isNewReconciler:!1},jU={readContext:rs,useCallback:zO,useContext:rs,useEffect:YS,useImperativeHandle:OO,useInsertionEffect:DO,useLayoutEffect:RO,useMemo:BO,useReducer:Ew,useRef:PO,useState:function(){return Ew(Ug)},useDebugValue:JS,useDeferredValue:function(e){var t=is();return to===null?t.memoizedState=e:FO(t,to.memoizedState,e)},useTransition:function(){var e=Ew(Ug)[0],t=is().memoizedState;return[e,t]},useMutableSource:CO,useSyncExternalStore:SO,useId:NO,unstable_isNewReconciler:!1};function Wp(e,t){try{var n="",r=t;do n+=g$(r),r=r.return;while(r);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function Cw(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function aC(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var VU=typeof WeakMap=="function"?WeakMap:Map;function VO(e,t,n){n=Ul(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dx||(Dx=!0,gC=r),aC(e,t)},n}function HO(e,t,n){n=Ul(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){aC(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){aC(e,t),typeof r!="function"&&(tc===null?tc=new Set([this]):tc.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),n}function cI(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new VU;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=r9.bind(null,e,t,n),t.then(e,e))}function dI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hI(e,t,n,r,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ul(-1,1),t.tag=2,ec(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var HU=Jl.ReactCurrentOwner,da=!1;function Zo(e,t,n,r){t.child=e===null?wO(t,null,n,r):Vp(t,e.child,n,r)}function pI(e,t,n,r,a){n=n.render;var c=t.ref;return Mp(t,a),r=XS(e,t,n,r,c,a),n=KS(),e!==null&&!da?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ql(e,t,a)):(vi&&n&&BS(t),t.flags|=1,Zo(e,t,r,a),t.child)}function fI(e,t,n,r,a){if(e===null){var c=n.type;return typeof c=="function"&&!aT(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,WO(e,t,c,r,a)):(e=K_(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,(e.lanes&a)===0){var h=c.memoizedProps;if(n=n.compare,n=n!==null?n:Lg,n(h,r)&&e.ref===t.ref)return ql(e,t,a)}return t.flags|=1,e=rc(c,r),e.ref=t.ref,e.return=t,t.child=e}function WO(e,t,n,r,a){if(e!==null){var c=e.memoizedProps;if(Lg(c,r)&&e.ref===t.ref)if(da=!1,t.pendingProps=r=c,(e.lanes&a)!==0)(e.flags&131072)!==0&&(da=!0);else return t.lanes=e.lanes,ql(e,t,a)}return sC(e,t,n,r,a)}function GO(e,t,n){var r=t.pendingProps,a=r.children,c=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ri(xp,Sa),Sa|=n;else{if((n&1073741824)===0)return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ri(xp,Sa),Sa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=c!==null?c.baseLanes:n,ri(xp,Sa),Sa|=r}else c!==null?(r=c.baseLanes|n,t.memoizedState=null):r=n,ri(xp,Sa),Sa|=r;return Zo(e,t,a,n),t.child}function qO(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sC(e,t,n,r,a){var c=fa(n)?Dd:Vo.current;return c=Up(t,c),Mp(t,a),n=XS(e,t,n,r,c,a),r=KS(),e!==null&&!da?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ql(e,t,a)):(vi&&r&&BS(t),t.flags|=1,Zo(e,t,n,a),t.child)}function mI(e,t,n,r,a){if(fa(n)){var c=!0;wx(t)}else c=!1;if(Mp(t,a),t.stateNode===null)q_(e,t),xO(t,n,r),oC(t,n,r,a),r=!0;else if(e===null){var h=t.stateNode,o=t.memoizedProps;h.props=o;var m=h.context,w=n.contextType;typeof w=="object"&&w!==null?w=rs(w):(w=fa(n)?Dd:Vo.current,w=Up(t,w));var A=n.getDerivedStateFromProps,P=typeof A=="function"||typeof h.getSnapshotBeforeUpdate=="function";P||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==r||m!==w)&&aI(t,h,r,w),Uu=!1;var O=t.memoizedState;h.state=O,kx(t,r,h,a),m=t.memoizedState,o!==r||O!==m||pa.current||Uu?(typeof A=="function"&&(iC(t,n,A,r),m=t.memoizedState),(o=Uu||oI(t,n,o,r,O,m,w))?(P||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=m),h.props=r,h.state=m,h.context=w,r=o):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{h=t.stateNode,vO(e,t),o=t.memoizedProps,w=t.type===t.elementType?o:ks(t.type,o),h.props=w,P=t.pendingProps,O=h.context,m=n.contextType,typeof m=="object"&&m!==null?m=rs(m):(m=fa(n)?Dd:Vo.current,m=Up(t,m));var B=n.getDerivedStateFromProps;(A=typeof B=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==P||O!==m)&&aI(t,h,r,m),Uu=!1,O=t.memoizedState,h.state=O,kx(t,r,h,a);var N=t.memoizedState;o!==P||O!==N||pa.current||Uu?(typeof B=="function"&&(iC(t,n,B,r),N=t.memoizedState),(w=Uu||oI(t,n,w,r,O,N,m)||!1)?(A||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,N,m),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,N,m)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),h.props=r,h.state=N,h.context=m,r=w):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),r=!1)}return lC(e,t,n,r,c,a)}function lC(e,t,n,r,a,c){qO(e,t);var h=(t.flags&128)!==0;if(!r&&!h)return a&&eI(t,n,!1),ql(e,t,c);r=t.stateNode,HU.current=t;var o=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&h?(t.child=Vp(t,e.child,null,c),t.child=Vp(t,null,o,c)):Zo(e,t,o,c),t.memoizedState=r.state,a&&eI(t,n,!0),t.child}function ZO(e){var t=e.stateNode;t.pendingContext?QM(e,t.pendingContext,t.pendingContext!==t.context):t.context&&QM(e,t.context,!1),WS(e,t.containerInfo)}function gI(e,t,n,r,a){return jp(),NS(a),t.flags|=256,Zo(e,t,n,r),t.child}var uC={dehydrated:null,treeContext:null,retryLane:0};function cC(e){return{baseLanes:e,cachePool:null,transitions:null}}function XO(e,t,n){var r=t.pendingProps,a=ki.current,c=!1,h=(t.flags&128)!==0,o;if((o=h)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ri(ki,a&1),e===null)return nC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(h=r.children,e=r.fallback,c?(r=t.mode,c=t.child,h={mode:"hidden",children:h},(r&1)===0&&c!==null?(c.childLanes=0,c.pendingProps=h):c=C0(h,r,0,null),e=kd(e,r,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=cC(n),t.memoizedState=uC,e):QS(t,h));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return WU(e,t,h,r,o,a,n);if(c){c=r.fallback,h=t.mode,a=e.child,o=a.sibling;var m={mode:"hidden",children:r.children};return(h&1)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=m,t.deletions=null):(r=rc(a,m),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?c=rc(o,c):(c=kd(c,h,n,null),c.flags|=2),c.return=t,r.return=t,r.sibling=c,t.child=r,r=c,c=t.child,h=e.child.memoizedState,h=h===null?cC(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},c.memoizedState=h,c.childLanes=e.childLanes&~n,t.memoizedState=uC,r}return c=e.child,e=c.sibling,r=rc(c,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function QS(e,t){return t=C0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function b_(e,t,n,r){return r!==null&&NS(r),Vp(t,e.child,null,n),e=QS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function WU(e,t,n,r,a,c,h){if(n)return t.flags&256?(t.flags&=-257,r=Cw(Error(Gt(422))),b_(e,t,h,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=r.fallback,a=t.mode,r=C0({mode:"visible",children:r.children},a,0,null),c=kd(c,a,h,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,(t.mode&1)!==0&&Vp(t,e.child,null,h),t.child.memoizedState=cC(h),t.memoizedState=uC,c);if((t.mode&1)===0)return b_(e,t,h,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,c=Error(Gt(419)),r=Cw(c,r,void 0),b_(e,t,h,r)}if(o=(h&e.childLanes)!==0,da||o){if(r=go,r!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(r.suspendedLanes|h))!==0?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Gl(e,a),Rs(r,e,a,-1))}return oT(),r=Cw(Error(Gt(421))),b_(e,t,h,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=i9.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Ma=Qu(a.nextSibling),Pa=t,vi=!0,Ms=null,e!==null&&(Xa[Ka++]=Fl,Xa[Ka++]=Nl,Xa[Ka++]=Rd,Fl=e.id,Nl=e.overflow,Rd=t),t=QS(t,r.children),t.flags|=4096,t)}function yI(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),rC(e.return,t,n)}function Sw(e,t,n,r,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=r,c.tail=n,c.tailMode=a)}function KO(e,t,n){var r=t.pendingProps,a=r.revealOrder,c=r.tail;if(Zo(e,t,r.children,n),r=ki.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yI(e,n,t);else if(e.tag===19)yI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ri(ki,r),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ax(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Sw(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ax(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Sw(t,!0,n,null,c);break;case"together":Sw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function q_(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ql(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Od|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(Gt(153));if(t.child!==null){for(e=t.child,n=rc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=rc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function GU(e,t,n){switch(t.tag){case 3:ZO(t),jp();break;case 5:EO(t);break;case 1:fa(t.type)&&wx(t);break;case 4:WS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;ri(Sx,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ri(ki,ki.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?XO(e,t,n):(ri(ki,ki.current&1),e=ql(e,t,n),e!==null?e.sibling:null);ri(ki,ki.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return KO(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ri(ki,ki.current),r)break;return null;case 22:case 23:return t.lanes=0,GO(e,t,n)}return ql(e,t,n)}var YO,dC,JO,QO;YO=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dC=function(){};JO=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,wd(dl.current);var c=null;switch(n){case"input":a=RE(e,a),r=RE(e,r),c=[];break;case"select":a=Ii({},a,{value:void 0}),r=Ii({},r,{value:void 0}),c=[];break;case"textarea":a=zE(e,a),r=zE(e,r),c=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=xx)}FE(n,r);var h;n=null;for(w in a)if(!r.hasOwnProperty(w)&&a.hasOwnProperty(w)&&a[w]!=null)if(w==="style"){var o=a[w];for(h in o)o.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(kg.hasOwnProperty(w)?c||(c=[]):(c=c||[]).push(w,null));for(w in r){var m=r[w];if(o=a!=null?a[w]:void 0,r.hasOwnProperty(w)&&m!==o&&(m!=null||o!=null))if(w==="style")if(o){for(h in o)!o.hasOwnProperty(h)||m&&m.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in m)m.hasOwnProperty(h)&&o[h]!==m[h]&&(n||(n={}),n[h]=m[h])}else n||(c||(c=[]),c.push(w,n)),n=m;else w==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,o=o?o.__html:void 0,m!=null&&o!==m&&(c=c||[]).push(w,m)):w==="children"?typeof m!="string"&&typeof m!="number"||(c=c||[]).push(w,""+m):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(kg.hasOwnProperty(w)?(m!=null&&w==="onScroll"&&ci("scroll",e),c||o===m||(c=[])):(c=c||[]).push(w,m))}n&&(c=c||[]).push("style",n);var w=c;(t.updateQueue=w)&&(t.flags|=4)}};QO=function(e,t,n,r){n!==r&&(t.flags|=4)};function jm(e,t){if(!vi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Fo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qU(e,t,n){var r=t.pendingProps;switch(FS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fo(t),null;case 1:return fa(t.type)&&bx(),Fo(t),null;case 3:return r=t.stateNode,Hp(),hi(pa),hi(Vo),qS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(__(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ms!==null&&(_C(Ms),Ms=null))),dC(e,t),Fo(t),null;case 5:GS(t);var a=wd(Ng.current);if(n=t.type,e!==null&&t.stateNode!=null)JO(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Gt(166));return Fo(t),null}if(e=wd(dl.current),__(t)){r=t.stateNode,n=t.type;var c=t.memoizedProps;switch(r[sl]=t,r[Bg]=c,e=(t.mode&1)!==0,n){case"dialog":ci("cancel",r),ci("close",r);break;case"iframe":case"object":case"embed":ci("load",r);break;case"video":case"audio":for(a=0;a<rg.length;a++)ci(rg[a],r);break;case"source":ci("error",r);break;case"img":case"image":case"link":ci("error",r),ci("load",r);break;case"details":ci("toggle",r);break;case"input":TM(r,c),ci("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!c.multiple},ci("invalid",r);break;case"textarea":AM(r,c),ci("invalid",r)}FE(n,c),a=null;for(var h in c)if(c.hasOwnProperty(h)){var o=c[h];h==="children"?typeof o=="string"?r.textContent!==o&&(c.suppressHydrationWarning!==!0&&v_(r.textContent,o,e),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(c.suppressHydrationWarning!==!0&&v_(r.textContent,o,e),a=["children",""+o]):kg.hasOwnProperty(h)&&o!=null&&h==="onScroll"&&ci("scroll",r)}switch(n){case"input":c_(r),kM(r,c,!0);break;case"textarea":c_(r),MM(r);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(r.onclick=xx)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=TL(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(n,{is:r.is}):(e=h.createElement(n),n==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,n),e[sl]=t,e[Bg]=r,YO(e,t,!1,!1),t.stateNode=e;e:{switch(h=NE(n,r),n){case"dialog":ci("cancel",e),ci("close",e),a=r;break;case"iframe":case"object":case"embed":ci("load",e),a=r;break;case"video":case"audio":for(a=0;a<rg.length;a++)ci(rg[a],e);a=r;break;case"source":ci("error",e),a=r;break;case"img":case"image":case"link":ci("error",e),ci("load",e),a=r;break;case"details":ci("toggle",e),a=r;break;case"input":TM(e,r),a=RE(e,r),ci("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Ii({},r,{value:void 0}),ci("invalid",e);break;case"textarea":AM(e,r),a=zE(e,r),ci("invalid",e);break;default:a=r}FE(n,a),o=a;for(c in o)if(o.hasOwnProperty(c)){var m=o[c];c==="style"?ML(e,m):c==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&kL(e,m)):c==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&Ag(e,m):typeof m=="number"&&Ag(e,""+m):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kg.hasOwnProperty(c)?m!=null&&c==="onScroll"&&ci("scroll",e):m!=null&&ES(e,c,m,h))}switch(n){case"input":c_(e),kM(e,r,!1);break;case"textarea":c_(e),MM(e);break;case"option":r.value!=null&&e.setAttribute("value",""+oc(r.value));break;case"select":e.multiple=!!r.multiple,c=r.value,c!=null?Sp(e,!!r.multiple,c,!1):r.defaultValue!=null&&Sp(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=xx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fo(t),null;case 6:if(e&&t.stateNode!=null)QO(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Gt(166));if(n=wd(Ng.current),wd(dl.current),__(t)){if(r=t.stateNode,n=t.memoizedProps,r[sl]=t,(c=r.nodeValue!==n)&&(e=Pa,e!==null))switch(e.tag){case 3:v_(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&v_(r.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sl]=t,t.stateNode=r}return Fo(t),null;case 13:if(hi(ki),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vi&&Ma!==null&&(t.mode&1)!==0&&(t.flags&128)===0)gO(),jp(),t.flags|=98560,c=!1;else if(c=__(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(Gt(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Gt(317));c[sl]=t}else jp(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Fo(t),c=!1}else Ms!==null&&(_C(Ms),Ms=null),c=!0;if(!c)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(ki.current&1)!==0?ro===0&&(ro=3):oT())),t.updateQueue!==null&&(t.flags|=4),Fo(t),null);case 4:return Hp(),dC(e,t),e===null&&Og(t.stateNode.containerInfo),Fo(t),null;case 10:return jS(t.type._context),Fo(t),null;case 17:return fa(t.type)&&bx(),Fo(t),null;case 19:if(hi(ki),c=t.memoizedState,c===null)return Fo(t),null;if(r=(t.flags&128)!==0,h=c.rendering,h===null)if(r)jm(c,!1);else{if(ro!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Ax(e),h!==null){for(t.flags|=128,jm(c,!1),r=h.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)c=n,e=r,c.flags&=14680066,h=c.alternate,h===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=h.childLanes,c.lanes=h.lanes,c.child=h.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=h.memoizedProps,c.memoizedState=h.memoizedState,c.updateQueue=h.updateQueue,c.type=h.type,e=h.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ri(ki,ki.current&1|2),t.child}e=e.sibling}c.tail!==null&&ji()>Gp&&(t.flags|=128,r=!0,jm(c,!1),t.lanes=4194304)}else{if(!r)if(e=Ax(h),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jm(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!vi)return Fo(t),null}else 2*ji()-c.renderingStartTime>Gp&&n!==1073741824&&(t.flags|=128,r=!0,jm(c,!1),t.lanes=4194304);c.isBackwards?(h.sibling=t.child,t.child=h):(n=c.last,n!==null?n.sibling=h:t.child=h,c.last=h)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=ji(),t.sibling=null,n=ki.current,ri(ki,r?n&1|2:n&1),t):(Fo(t),null);case 22:case 23:return iT(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Sa&1073741824)!==0&&(Fo(t),t.subtreeFlags&6&&(t.flags|=8192)):Fo(t),null;case 24:return null;case 25:return null}throw Error(Gt(156,t.tag))}function ZU(e,t){switch(FS(t),t.tag){case 1:return fa(t.type)&&bx(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Hp(),hi(pa),hi(Vo),qS(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return GS(t),null;case 13:if(hi(ki),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Gt(340));jp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hi(ki),null;case 4:return Hp(),null;case 10:return jS(t.type._context),null;case 22:case 23:return iT(),null;case 24:return null;default:return null}}var w_=!1,$o=!1,XU=typeof WeakSet=="function"?WeakSet:Set,yn=null;function _p(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zi(e,t,r)}else n.current=null}function hC(e,t,n){try{n()}catch(r){zi(e,t,r)}}var vI=!1;function KU(e,t){if(XE=yx,e=rO(),zS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,c=r.focusNode;r=r.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var h=0,o=-1,m=-1,w=0,A=0,P=e,O=null;t:for(;;){for(var B;P!==n||a!==0&&P.nodeType!==3||(o=h+a),P!==c||r!==0&&P.nodeType!==3||(m=h+r),P.nodeType===3&&(h+=P.nodeValue.length),(B=P.firstChild)!==null;)O=P,P=B;for(;;){if(P===e)break t;if(O===n&&++w===a&&(o=h),O===c&&++A===r&&(m=h),(B=P.nextSibling)!==null)break;P=O,O=P.parentNode}P=B}n=o===-1||m===-1?null:{start:o,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(KE={focusedElem:e,selectionRange:n},yx=!1,yn=t;yn!==null;)if(t=yn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yn=e;else for(;yn!==null;){t=yn;try{var N=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var k=N.memoizedProps,V=N.memoizedState,U=t.stateNode,W=U.getSnapshotBeforeUpdate(t.elementType===t.type?k:ks(t.type,k),V);U.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var F=t.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Gt(163))}}catch(z){zi(t,t.return,z)}if(e=t.sibling,e!==null){e.return=t.return,yn=e;break}yn=t.return}return N=vI,vI=!1,N}function dg(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&hC(t,n,c)}a=a.next}while(a!==r)}}function w0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pC(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function e3(e){var t=e.alternate;t!==null&&(e.alternate=null,e3(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[sl],delete t[Bg],delete t[QE],delete t[DU],delete t[RU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function t3(e){return e.tag===5||e.tag===3||e.tag===4}function _I(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||t3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xx));else if(r!==4&&(e=e.child,e!==null))for(fC(e,t,n),e=e.sibling;e!==null;)fC(e,t,n),e=e.sibling}function mC(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(mC(e,t,n),e=e.sibling;e!==null;)mC(e,t,n),e=e.sibling}var wo=null,As=!1;function Bu(e,t,n){for(n=n.child;n!==null;)n3(e,t,n),n=n.sibling}function n3(e,t,n){if(cl&&typeof cl.onCommitFiberUnmount=="function")try{cl.onCommitFiberUnmount(f0,n)}catch{}switch(n.tag){case 5:$o||_p(n,t);case 6:var r=wo,a=As;wo=null,Bu(e,t,n),wo=r,As=a,wo!==null&&(As?(e=wo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wo.removeChild(n.stateNode));break;case 18:wo!==null&&(As?(e=wo,n=n.stateNode,e.nodeType===8?vw(e.parentNode,n):e.nodeType===1&&vw(e,n),Dg(e)):vw(wo,n.stateNode));break;case 4:r=wo,a=As,wo=n.stateNode.containerInfo,As=!0,Bu(e,t,n),wo=r,As=a;break;case 0:case 11:case 14:case 15:if(!$o&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var c=a,h=c.destroy;c=c.tag,h!==void 0&&((c&2)!==0||(c&4)!==0)&&hC(n,t,h),a=a.next}while(a!==r)}Bu(e,t,n);break;case 1:if(!$o&&(_p(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){zi(n,t,o)}Bu(e,t,n);break;case 21:Bu(e,t,n);break;case 22:n.mode&1?($o=(r=$o)||n.memoizedState!==null,Bu(e,t,n),$o=r):Bu(e,t,n);break;default:Bu(e,t,n)}}function xI(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new XU),t.forEach(function(r){var a=o9.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Ss(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var c=e,h=t,o=h;e:for(;o!==null;){switch(o.tag){case 5:wo=o.stateNode,As=!1;break e;case 3:wo=o.stateNode.containerInfo,As=!0;break e;case 4:wo=o.stateNode.containerInfo,As=!0;break e}o=o.return}if(wo===null)throw Error(Gt(160));n3(c,h,a),wo=null,As=!1;var m=a.alternate;m!==null&&(m.return=null),a.return=null}catch(w){zi(a,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)r3(t,e),t=t.sibling}function r3(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ss(t,e),tl(e),r&4){try{dg(3,e,e.return),w0(3,e)}catch(k){zi(e,e.return,k)}try{dg(5,e,e.return)}catch(k){zi(e,e.return,k)}}break;case 1:Ss(t,e),tl(e),r&512&&n!==null&&_p(n,n.return);break;case 5:if(Ss(t,e),tl(e),r&512&&n!==null&&_p(n,n.return),e.flags&32){var a=e.stateNode;try{Ag(a,"")}catch(k){zi(e,e.return,k)}}if(r&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,h=n!==null?n.memoizedProps:c,o=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{o==="input"&&c.type==="radio"&&c.name!=null&&CL(a,c),NE(o,h);var w=NE(o,c);for(h=0;h<m.length;h+=2){var A=m[h],P=m[h+1];A==="style"?ML(a,P):A==="dangerouslySetInnerHTML"?kL(a,P):A==="children"?Ag(a,P):ES(a,A,P,w)}switch(o){case"input":LE(a,c);break;case"textarea":SL(a,c);break;case"select":var O=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var B=c.value;B!=null?Sp(a,!!c.multiple,B,!1):O!==!!c.multiple&&(c.defaultValue!=null?Sp(a,!!c.multiple,c.defaultValue,!0):Sp(a,!!c.multiple,c.multiple?[]:"",!1))}a[Bg]=c}catch(k){zi(e,e.return,k)}}break;case 6:if(Ss(t,e),tl(e),r&4){if(e.stateNode===null)throw Error(Gt(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(k){zi(e,e.return,k)}}break;case 3:if(Ss(t,e),tl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dg(t.containerInfo)}catch(k){zi(e,e.return,k)}break;case 4:Ss(t,e),tl(e);break;case 13:Ss(t,e),tl(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(nT=ji())),r&4&&xI(e);break;case 22:if(A=n!==null&&n.memoizedState!==null,e.mode&1?($o=(w=$o)||A,Ss(t,e),$o=w):Ss(t,e),tl(e),r&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!A&&(e.mode&1)!==0)for(yn=e,A=e.child;A!==null;){for(P=yn=A;yn!==null;){switch(O=yn,B=O.child,O.tag){case 0:case 11:case 14:case 15:dg(4,O,O.return);break;case 1:_p(O,O.return);var N=O.stateNode;if(typeof N.componentWillUnmount=="function"){r=O,n=O.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(k){zi(r,n,k)}}break;case 5:_p(O,O.return);break;case 22:if(O.memoizedState!==null){wI(P);continue}}B!==null?(B.return=O,yn=B):wI(P)}A=A.sibling}e:for(A=null,P=e;;){if(P.tag===5){if(A===null){A=P;try{a=P.stateNode,w?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(o=P.stateNode,m=P.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null,o.style.display=AL("display",h))}catch(k){zi(e,e.return,k)}}}else if(P.tag===6){if(A===null)try{P.stateNode.nodeValue=w?"":P.memoizedProps}catch(k){zi(e,e.return,k)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;A===P&&(A=null),P=P.return}A===P&&(A=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:Ss(t,e),tl(e),r&4&&xI(e);break;case 21:break;default:Ss(t,e),tl(e)}}function tl(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(t3(n)){var r=n;break e}n=n.return}throw Error(Gt(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Ag(a,""),r.flags&=-33);var c=_I(e);mC(e,c,a);break;case 3:case 4:var h=r.stateNode.containerInfo,o=_I(e);fC(e,o,h);break;default:throw Error(Gt(161))}}catch(m){zi(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function YU(e,t,n){yn=e,i3(e)}function i3(e,t,n){for(var r=(e.mode&1)!==0;yn!==null;){var a=yn,c=a.child;if(a.tag===22&&r){var h=a.memoizedState!==null||w_;if(!h){var o=a.alternate,m=o!==null&&o.memoizedState!==null||$o;o=w_;var w=$o;if(w_=h,($o=m)&&!w)for(yn=a;yn!==null;)h=yn,m=h.child,h.tag===22&&h.memoizedState!==null?EI(a):m!==null?(m.return=h,yn=m):EI(a);for(;c!==null;)yn=c,i3(c),c=c.sibling;yn=a,w_=o,$o=w}bI(e)}else(a.subtreeFlags&8772)!==0&&c!==null?(c.return=a,yn=c):bI(e)}}function bI(e){for(;yn!==null;){var t=yn;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:$o||w0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!$o)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ks(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&iI(t,c,r);break;case 3:var h=t.updateQueue;if(h!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}iI(t,h,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var A=w.memoizedState;if(A!==null){var P=A.dehydrated;P!==null&&Dg(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Gt(163))}$o||t.flags&512&&pC(t)}catch(O){zi(t,t.return,O)}}if(t===e){yn=null;break}if(n=t.sibling,n!==null){n.return=t.return,yn=n;break}yn=t.return}}function wI(e){for(;yn!==null;){var t=yn;if(t===e){yn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,yn=n;break}yn=t.return}}function EI(e){for(;yn!==null;){var t=yn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{w0(4,t)}catch(m){zi(t,n,m)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(m){zi(t,a,m)}}var c=t.return;try{pC(t)}catch(m){zi(t,c,m)}break;case 5:var h=t.return;try{pC(t)}catch(m){zi(t,h,m)}}}catch(m){zi(t,t.return,m)}if(t===e){yn=null;break}var o=t.sibling;if(o!==null){o.return=t.return,yn=o;break}yn=t.return}}var JU=Math.ceil,Px=Jl.ReactCurrentDispatcher,eT=Jl.ReactCurrentOwner,es=Jl.ReactCurrentBatchConfig,Cr=0,go=null,Gi=null,So=0,Sa=0,xp=hc(0),ro=0,Vg=null,Od=0,E0=0,tT=0,hg=null,ua=null,nT=0,Gp=1/0,zl=null,Dx=!1,gC=null,tc=null,E_=!1,Gu=null,Rx=0,pg=0,yC=null,Z_=-1,X_=0;function Yo(){return(Cr&6)!==0?ji():Z_!==-1?Z_:Z_=ji()}function nc(e){return(e.mode&1)===0?1:(Cr&2)!==0&&So!==0?So&-So:OU.transition!==null?(X_===0&&(X_=UL()),X_):(e=Yr,e!==0||(e=window.event,e=e===void 0?16:ZL(e.type)),e)}function Rs(e,t,n,r){if(50<pg)throw pg=0,yC=null,Error(Gt(185));oy(e,n,r),((Cr&2)===0||e!==go)&&(e===go&&((Cr&2)===0&&(E0|=n),ro===4&&Vu(e,So)),ma(e,r),n===1&&Cr===0&&(t.mode&1)===0&&(Gp=ji()+500,_0&&pc()))}function ma(e,t){var n=e.callbackNode;O$(e,t);var r=gx(e,e===go?So:0);if(r===0)n!==null&&DM(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&DM(n),t===1)e.tag===0?LU(CI.bind(null,e)):pO(CI.bind(null,e)),IU(function(){(Cr&6)===0&&pc()}),n=null;else{switch(jL(r)){case 1:n=AS;break;case 4:n=NL;break;case 16:n=mx;break;case 536870912:n=$L;break;default:n=mx}n=h3(n,o3.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function o3(e,t){if(Z_=-1,X_=0,(Cr&6)!==0)throw Error(Gt(327));var n=e.callbackNode;if(Ip()&&e.callbackNode!==n)return null;var r=gx(e,e===go?So:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Lx(e,r);else{t=r;var a=Cr;Cr|=2;var c=s3();(go!==e||So!==t)&&(zl=null,Gp=ji()+500,Td(e,t));do try{t9();break}catch(o){a3(e,o)}while(1);US(),Px.current=c,Cr=a,Gi!==null?t=0:(go=null,So=0,t=ro)}if(t!==0){if(t===2&&(a=HE(e),a!==0&&(r=a,t=vC(e,a))),t===1)throw n=Vg,Td(e,0),Vu(e,r),ma(e,ji()),n;if(t===6)Vu(e,r);else{if(a=e.current.alternate,(r&30)===0&&!QU(a)&&(t=Lx(e,r),t===2&&(c=HE(e),c!==0&&(r=c,t=vC(e,c))),t===1))throw n=Vg,Td(e,0),Vu(e,r),ma(e,ji()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Gt(345));case 2:hd(e,ua,zl);break;case 3:if(Vu(e,r),(r&130023424)===r&&(t=nT+500-ji(),10<t)){if(gx(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Yo(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=JE(hd.bind(null,e,ua,zl),t);break}hd(e,ua,zl);break;case 4:if(Vu(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var h=31-Ds(r);c=1<<h,h=t[h],h>a&&(a=h),r&=~c}if(r=a,r=ji()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JU(r/1960))-r,10<r){e.timeoutHandle=JE(hd.bind(null,e,ua,zl),r);break}hd(e,ua,zl);break;case 5:hd(e,ua,zl);break;default:throw Error(Gt(329))}}}return ma(e,ji()),e.callbackNode===n?o3.bind(null,e):null}function vC(e,t){var n=hg;return e.current.memoizedState.isDehydrated&&(Td(e,t).flags|=256),e=Lx(e,t),e!==2&&(t=ua,ua=n,t!==null&&_C(t)),e}function _C(e){ua===null?ua=e:ua.push.apply(ua,e)}function QU(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],c=a.getSnapshot;a=a.value;try{if(!zs(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vu(e,t){for(t&=~tT,t&=~E0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ds(t),r=1<<n;e[n]=-1,t&=~r}}function CI(e){if((Cr&6)!==0)throw Error(Gt(327));Ip();var t=gx(e,0);if((t&1)===0)return ma(e,ji()),null;var n=Lx(e,t);if(e.tag!==0&&n===2){var r=HE(e);r!==0&&(t=r,n=vC(e,r))}if(n===1)throw n=Vg,Td(e,0),Vu(e,t),ma(e,ji()),n;if(n===6)throw Error(Gt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hd(e,ua,zl),ma(e,ji()),null}function rT(e,t){var n=Cr;Cr|=1;try{return e(t)}finally{Cr=n,Cr===0&&(Gp=ji()+500,_0&&pc())}}function zd(e){Gu!==null&&Gu.tag===0&&(Cr&6)===0&&Ip();var t=Cr;Cr|=1;var n=es.transition,r=Yr;try{if(es.transition=null,Yr=1,e)return e()}finally{Yr=r,es.transition=n,Cr=t,(Cr&6)===0&&pc()}}function iT(){Sa=xp.current,hi(xp)}function Td(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,MU(n)),Gi!==null)for(n=Gi.return;n!==null;){var r=n;switch(FS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bx();break;case 3:Hp(),hi(pa),hi(Vo),qS();break;case 5:GS(r);break;case 4:Hp();break;case 13:hi(ki);break;case 19:hi(ki);break;case 10:jS(r.type._context);break;case 22:case 23:iT()}n=n.return}if(go=e,Gi=e=rc(e.current,null),So=Sa=t,ro=0,Vg=null,tT=E0=Od=0,ua=hg=null,bd!==null){for(t=0;t<bd.length;t++)if(n=bd[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,c=n.pending;if(c!==null){var h=c.next;c.next=a,r.next=h}n.pending=r}bd=null}return e}function a3(e,t){do{var n=Gi;try{if(US(),W_.current=Ix,Mx){for(var r=Mi.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Mx=!1}if(Ld=0,fo=to=Mi=null,cg=!1,$g=0,eT.current=null,n===null||n.return===null){ro=1,Vg=t,Gi=null;break}e:{var c=e,h=n.return,o=n,m=t;if(t=So,o.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var w=m,A=o,P=A.tag;if((A.mode&1)===0&&(P===0||P===11||P===15)){var O=A.alternate;O?(A.updateQueue=O.updateQueue,A.memoizedState=O.memoizedState,A.lanes=O.lanes):(A.updateQueue=null,A.memoizedState=null)}var B=dI(h);if(B!==null){B.flags&=-257,hI(B,h,o,c,t),B.mode&1&&cI(c,w,t),t=B,m=w;var N=t.updateQueue;if(N===null){var k=new Set;k.add(m),t.updateQueue=k}else N.add(m);break e}else{if((t&1)===0){cI(c,w,t),oT();break e}m=Error(Gt(426))}}else if(vi&&o.mode&1){var V=dI(h);if(V!==null){(V.flags&65536)===0&&(V.flags|=256),hI(V,h,o,c,t),NS(Wp(m,o));break e}}c=m=Wp(m,o),ro!==4&&(ro=2),hg===null?hg=[c]:hg.push(c),c=h;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var U=VO(c,m,t);rI(c,U);break e;case 1:o=m;var W=c.type,F=c.stateNode;if((c.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(tc===null||!tc.has(F)))){c.flags|=65536,t&=-t,c.lanes|=t;var z=HO(c,o,t);rI(c,z);break e}}c=c.return}while(c!==null)}u3(n)}catch(S){t=S,Gi===n&&n!==null&&(Gi=n=n.return);continue}break}while(1)}function s3(){var e=Px.current;return Px.current=Ix,e===null?Ix:e}function oT(){(ro===0||ro===3||ro===2)&&(ro=4),go===null||(Od&268435455)===0&&(E0&268435455)===0||Vu(go,So)}function Lx(e,t){var n=Cr;Cr|=2;var r=s3();(go!==e||So!==t)&&(zl=null,Td(e,t));do try{e9();break}catch(a){a3(e,a)}while(1);if(US(),Cr=n,Px.current=r,Gi!==null)throw Error(Gt(261));return go=null,So=0,ro}function e9(){for(;Gi!==null;)l3(Gi)}function t9(){for(;Gi!==null&&!T$();)l3(Gi)}function l3(e){var t=d3(e.alternate,e,Sa);e.memoizedProps=e.pendingProps,t===null?u3(e):Gi=t,eT.current=null}function u3(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=qU(n,t,Sa),n!==null){Gi=n;return}}else{if(n=ZU(n,t),n!==null){n.flags&=32767,Gi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ro=6,Gi=null;return}}if(t=t.sibling,t!==null){Gi=t;return}Gi=t=e}while(t!==null);ro===0&&(ro=5)}function hd(e,t,n){var r=Yr,a=es.transition;try{es.transition=null,Yr=1,n9(e,t,n,r)}finally{es.transition=a,Yr=r}return null}function n9(e,t,n,r){do Ip();while(Gu!==null);if((Cr&6)!==0)throw Error(Gt(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Gt(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(z$(e,c),e===go&&(Gi=go=null,So=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||E_||(E_=!0,h3(mx,function(){return Ip(),null})),c=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||c){c=es.transition,es.transition=null;var h=Yr;Yr=1;var o=Cr;Cr|=4,eT.current=null,KU(e,n),r3(n,e),wU(KE),yx=!!XE,KE=XE=null,e.current=n,YU(n),k$(),Cr=o,Yr=h,es.transition=c}else e.current=n;if(E_&&(E_=!1,Gu=e,Rx=a),c=e.pendingLanes,c===0&&(tc=null),I$(n.stateNode),ma(e,ji()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Dx)throw Dx=!1,e=gC,gC=null,e;return(Rx&1)!==0&&e.tag!==0&&Ip(),c=e.pendingLanes,(c&1)!==0?e===yC?pg++:(pg=0,yC=e):pg=0,pc(),null}function Ip(){if(Gu!==null){var e=jL(Rx),t=es.transition,n=Yr;try{if(es.transition=null,Yr=16>e?16:e,Gu===null)var r=!1;else{if(e=Gu,Gu=null,Rx=0,(Cr&6)!==0)throw Error(Gt(331));var a=Cr;for(Cr|=4,yn=e.current;yn!==null;){var c=yn,h=c.child;if((yn.flags&16)!==0){var o=c.deletions;if(o!==null){for(var m=0;m<o.length;m++){var w=o[m];for(yn=w;yn!==null;){var A=yn;switch(A.tag){case 0:case 11:case 15:dg(8,A,c)}var P=A.child;if(P!==null)P.return=A,yn=P;else for(;yn!==null;){A=yn;var O=A.sibling,B=A.return;if(e3(A),A===w){yn=null;break}if(O!==null){O.return=B,yn=O;break}yn=B}}}var N=c.alternate;if(N!==null){var k=N.child;if(k!==null){N.child=null;do{var V=k.sibling;k.sibling=null,k=V}while(k!==null)}}yn=c}}if((c.subtreeFlags&2064)!==0&&h!==null)h.return=c,yn=h;else e:for(;yn!==null;){if(c=yn,(c.flags&2048)!==0)switch(c.tag){case 0:case 11:case 15:dg(9,c,c.return)}var U=c.sibling;if(U!==null){U.return=c.return,yn=U;break e}yn=c.return}}var W=e.current;for(yn=W;yn!==null;){h=yn;var F=h.child;if((h.subtreeFlags&2064)!==0&&F!==null)F.return=h,yn=F;else e:for(h=W;yn!==null;){if(o=yn,(o.flags&2048)!==0)try{switch(o.tag){case 0:case 11:case 15:w0(9,o)}}catch(S){zi(o,o.return,S)}if(o===h){yn=null;break e}var z=o.sibling;if(z!==null){z.return=o.return,yn=z;break e}yn=o.return}}if(Cr=a,pc(),cl&&typeof cl.onPostCommitFiberRoot=="function")try{cl.onPostCommitFiberRoot(f0,e)}catch{}r=!0}return r}finally{Yr=n,es.transition=t}}return!1}function SI(e,t,n){t=Wp(n,t),t=VO(e,t,1),e=ec(e,t,1),t=Yo(),e!==null&&(oy(e,1,t),ma(e,t))}function zi(e,t,n){if(e.tag===3)SI(e,e,n);else for(;t!==null;){if(t.tag===3){SI(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tc===null||!tc.has(r))){e=Wp(n,e),e=HO(t,e,1),t=ec(t,e,1),e=Yo(),t!==null&&(oy(t,1,e),ma(t,e));break}}t=t.return}}function r9(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Yo(),e.pingedLanes|=e.suspendedLanes&n,go===e&&(So&n)===n&&(ro===4||ro===3&&(So&130023424)===So&&500>ji()-nT?Td(e,0):tT|=n),ma(e,t)}function c3(e,t){t===0&&((e.mode&1)===0?t=1:(t=p_,p_<<=1,(p_&130023424)===0&&(p_=4194304)));var n=Yo();e=Gl(e,t),e!==null&&(oy(e,t,n),ma(e,n))}function i9(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),c3(e,n)}function o9(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Gt(314))}r!==null&&r.delete(t),c3(e,n)}var d3;d3=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pa.current)da=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return da=!1,GU(e,t,n);da=(e.flags&131072)!==0}else da=!1,vi&&(t.flags&1048576)!==0&&fO(t,Cx,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;q_(e,t),e=t.pendingProps;var a=Up(t,Vo.current);Mp(t,n),a=XS(null,t,r,e,a,n);var c=KS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fa(r)?(c=!0,wx(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,HS(t),a.updater=x0,t.stateNode=a,a._reactInternals=t,oC(t,r,e,n),t=lC(null,t,r,!0,c,n)):(t.tag=0,vi&&c&&BS(t),Zo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(q_(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=s9(r),e=ks(r,e),a){case 0:t=sC(null,t,r,e,n);break e;case 1:t=mI(null,t,r,e,n);break e;case 11:t=pI(null,t,r,e,n);break e;case 14:t=fI(null,t,r,ks(r.type,e),n);break e}throw Error(Gt(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ks(r,a),sC(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ks(r,a),mI(e,t,r,a,n);case 3:e:{if(ZO(t),e===null)throw Error(Gt(387));r=t.pendingProps,c=t.memoizedState,a=c.element,vO(e,t),kx(t,r,null,n);var h=t.memoizedState;if(r=h.element,c.isDehydrated)if(c={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=Wp(Error(Gt(423)),t),t=gI(e,t,r,n,a);break e}else if(r!==a){a=Wp(Error(Gt(424)),t),t=gI(e,t,r,n,a);break e}else for(Ma=Qu(t.stateNode.containerInfo.firstChild),Pa=t,vi=!0,Ms=null,n=wO(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jp(),r===a){t=ql(e,t,n);break e}Zo(e,t,r,n)}t=t.child}return t;case 5:return EO(t),e===null&&nC(t),r=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,h=a.children,YE(r,a)?h=null:c!==null&&YE(r,c)&&(t.flags|=32),qO(e,t),Zo(e,t,h,n),t.child;case 6:return e===null&&nC(t),null;case 13:return XO(e,t,n);case 4:return WS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Vp(t,null,r,n):Zo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ks(r,a),pI(e,t,r,a,n);case 7:return Zo(e,t,t.pendingProps,n),t.child;case 8:return Zo(e,t,t.pendingProps.children,n),t.child;case 12:return Zo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,c=t.memoizedProps,h=a.value,ri(Sx,r._currentValue),r._currentValue=h,c!==null)if(zs(c.value,h)){if(c.children===a.children&&!pa.current){t=ql(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var o=c.dependencies;if(o!==null){h=c.child;for(var m=o.firstContext;m!==null;){if(m.context===r){if(c.tag===1){m=Ul(-1,n&-n),m.tag=2;var w=c.updateQueue;if(w!==null){w=w.shared;var A=w.pending;A===null?m.next=m:(m.next=A.next,A.next=m),w.pending=m}}c.lanes|=n,m=c.alternate,m!==null&&(m.lanes|=n),rC(c.return,n,t),o.lanes|=n;break}m=m.next}}else if(c.tag===10)h=c.type===t.type?null:c.child;else if(c.tag===18){if(h=c.return,h===null)throw Error(Gt(341));h.lanes|=n,o=h.alternate,o!==null&&(o.lanes|=n),rC(h,n,t),h=c.sibling}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===t){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}Zo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Mp(t,n),a=rs(a),r=r(a),t.flags|=1,Zo(e,t,r,n),t.child;case 14:return r=t.type,a=ks(r,t.pendingProps),a=ks(r.type,a),fI(e,t,r,a,n);case 15:return WO(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ks(r,a),q_(e,t),t.tag=1,fa(r)?(e=!0,wx(t)):e=!1,Mp(t,n),xO(t,r,a),oC(t,r,a,n),lC(null,t,r,!0,e,n);case 19:return KO(e,t,n);case 22:return GO(e,t,n)}throw Error(Gt(156,t.tag))};function h3(e,t){return FL(e,t)}function a9(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(e,t,n,r){return new a9(e,t,n,r)}function aT(e){return e=e.prototype,!(!e||!e.isReactComponent)}function s9(e){if(typeof e=="function")return aT(e)?1:0;if(e!=null){if(e=e.$$typeof,e===SS)return 11;if(e===TS)return 14}return 2}function rc(e,t){var n=e.alternate;return n===null?(n=Qa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function K_(e,t,n,r,a,c){var h=2;if(r=e,typeof e=="function")aT(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case cp:return kd(n.children,a,c,t);case CS:h=8,a|=8;break;case ME:return e=Qa(12,n,t,a|2),e.elementType=ME,e.lanes=c,e;case IE:return e=Qa(13,n,t,a),e.elementType=IE,e.lanes=c,e;case PE:return e=Qa(19,n,t,a),e.elementType=PE,e.lanes=c,e;case bL:return C0(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _L:h=10;break e;case xL:h=9;break e;case SS:h=11;break e;case TS:h=14;break e;case $u:h=16,r=null;break e}throw Error(Gt(130,e==null?e:typeof e,""))}return t=Qa(h,n,t,a),t.elementType=e,t.type=r,t.lanes=c,t}function kd(e,t,n,r){return e=Qa(7,e,r,t),e.lanes=n,e}function C0(e,t,n,r){return e=Qa(22,e,r,t),e.elementType=bL,e.lanes=n,e.stateNode={isHidden:!1},e}function Tw(e,t,n){return e=Qa(6,e,null,t),e.lanes=n,e}function kw(e,t,n){return t=Qa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function l9(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sw(0),this.expirationTimes=sw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sw(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function sT(e,t,n,r,a,c,h,o,m){return e=new l9(e,t,n,o,m),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Qa(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HS(c),e}function u9(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:up,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function p3(e){if(!e)return ac;e=e._reactInternals;e:{if(Hd(e)!==e||e.tag!==1)throw Error(Gt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Gt(171))}if(e.tag===1){var n=e.type;if(fa(n))return hO(e,n,t)}return t}function f3(e,t,n,r,a,c,h,o,m){return e=sT(n,r,!0,e,a,c,h,o,m),e.context=p3(null),n=e.current,r=Yo(),a=nc(n),c=Ul(r,a),c.callback=t!=null?t:null,ec(n,c,a),e.current.lanes=a,oy(e,a,r),ma(e,r),e}function S0(e,t,n,r){var a=t.current,c=Yo(),h=nc(a);return n=p3(n),t.context===null?t.context=n:t.pendingContext=n,t=Ul(c,h),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ec(a,t,h),e!==null&&(Rs(e,a,h,c),H_(e,a,h)),h}function Ox(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function TI(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lT(e,t){TI(e,t),(e=e.alternate)&&TI(e,t)}function c9(){return null}var m3=typeof reportError=="function"?reportError:function(e){console.error(e)};function uT(e){this._internalRoot=e}T0.prototype.render=uT.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Gt(409));S0(e,t,null,null)};T0.prototype.unmount=uT.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zd(function(){S0(null,e,null,null)}),t[Wl]=null}};function T0(e){this._internalRoot=e}T0.prototype.unstable_scheduleHydration=function(e){if(e){var t=WL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ju.length&&t!==0&&t<ju[n].priority;n++);ju.splice(n,0,e),n===0&&qL(e)}};function cT(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function k0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kI(){}function d9(e,t,n,r,a){if(a){if(typeof r=="function"){var c=r;r=function(){var w=Ox(h);c.call(w)}}var h=f3(t,r,e,0,null,!1,!1,"",kI);return e._reactRootContainer=h,e[Wl]=h.current,Og(e.nodeType===8?e.parentNode:e),zd(),h}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var w=Ox(m);o.call(w)}}var m=sT(e,0,!1,null,null,!1,!1,"",kI);return e._reactRootContainer=m,e[Wl]=m.current,Og(e.nodeType===8?e.parentNode:e),zd(function(){S0(t,m,n,r)}),m}function A0(e,t,n,r,a){var c=n._reactRootContainer;if(c){var h=c;if(typeof a=="function"){var o=a;a=function(){var m=Ox(h);o.call(m)}}S0(t,h,e,a)}else h=d9(n,t,e,a,r);return Ox(h)}VL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ng(t.pendingLanes);n!==0&&(MS(t,n|1),ma(t,ji()),(Cr&6)===0&&(Gp=ji()+500,pc()))}break;case 13:zd(function(){var r=Gl(e,1);if(r!==null){var a=Yo();Rs(r,e,1,a)}}),lT(e,1)}};IS=function(e){if(e.tag===13){var t=Gl(e,134217728);if(t!==null){var n=Yo();Rs(t,e,134217728,n)}lT(e,134217728)}};HL=function(e){if(e.tag===13){var t=nc(e),n=Gl(e,t);if(n!==null){var r=Yo();Rs(n,e,t,r)}lT(e,t)}};WL=function(){return Yr};GL=function(e,t){var n=Yr;try{return Yr=e,t()}finally{Yr=n}};UE=function(e,t,n){switch(t){case"input":if(LE(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=v0(r);if(!a)throw Error(Gt(90));EL(r),LE(r,a)}}}break;case"textarea":SL(e,n);break;case"select":t=n.value,t!=null&&Sp(e,!!n.multiple,t,!1)}};DL=rT;RL=zd;var h9={usingClientEntryPoint:!1,Events:[sy,fp,v0,IL,PL,rT]},Vm={findFiberByHostInstance:xd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},p9={bundleType:Vm.bundleType,version:Vm.version,rendererPackageName:Vm.rendererPackageName,rendererConfig:Vm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zL(e),e===null?null:e.stateNode},findFiberByHostInstance:Vm.findFiberByHostInstance||c9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var C_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!C_.isDisabled&&C_.supportsFiber)try{f0=C_.inject(p9),cl=C_}catch{}}Oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h9;Oa.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cT(t))throw Error(Gt(200));return u9(e,t,null,n)};Oa.createRoot=function(e,t){if(!cT(e))throw Error(Gt(299));var n=!1,r="",a=m3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=sT(e,1,!1,null,null,n,!1,r,a),e[Wl]=t.current,Og(e.nodeType===8?e.parentNode:e),new uT(t)};Oa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Gt(188)):(e=Object.keys(e).join(","),Error(Gt(268,e)));return e=zL(t),e=e===null?null:e.stateNode,e};Oa.flushSync=function(e){return zd(e)};Oa.hydrate=function(e,t,n){if(!k0(t))throw Error(Gt(200));return A0(null,e,t,!0,n)};Oa.hydrateRoot=function(e,t,n){if(!cT(e))throw Error(Gt(405));var r=n!=null&&n.hydratedSources||null,a=!1,c="",h=m3;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),t=f3(t,null,e,1,n!=null?n:null,a,!1,c,h),e[Wl]=t.current,Og(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new T0(t)};Oa.render=function(e,t,n){if(!k0(t))throw Error(Gt(200));return A0(null,e,t,!1,n)};Oa.unmountComponentAtNode=function(e){if(!k0(e))throw Error(Gt(40));return e._reactRootContainer?(zd(function(){A0(null,null,e,!1,function(){e._reactRootContainer=null,e[Wl]=null})}),!0):!1};Oa.unstable_batchedUpdates=rT;Oa.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!k0(n))throw Error(Gt(200));if(e==null||e._reactInternals===void 0)throw Error(Gt(38));return A0(e,t,n,!1,r)};Oa.version="18.2.0-next-9e3b772b8-20220608";function g3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g3)}catch(e){console.error(e)}}g3(),Xu.exports=Oa;var S_=Xu.exports,y3,AI=Xu.exports;y3=AI.createRoot,AI.hydrateRoot;function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(this,arguments)}var Ed;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ed||(Ed={}));var MI=function(e){return e},II="beforeunload",f9="popstate";function m9(e){e===void 0&&(e={});var t=e,n=t.window,r=n===void 0?document.defaultView:n,a=r.history;function c(){var D=r.location,Y=D.pathname,re=D.search,ae=D.hash,ee=a.state||{};return[ee.idx,MI({pathname:Y,search:re,hash:ae,state:ee.usr||null,key:ee.key||"default"})]}var h=null;function o(){if(h)B.call(h),h=null;else{var D=Ed.Pop,Y=c(),re=Y[0],ae=Y[1];if(B.length){if(re!=null){var ee=A-re;ee&&(h={action:D,location:ae,retry:function(){S(ee*-1)}},S(ee))}}else W(D)}}r.addEventListener(f9,o);var m=Ed.Pop,w=c(),A=w[0],P=w[1],O=DI(),B=DI();A==null&&(A=0,a.replaceState(Fe({},a.state,{idx:A}),""));function N(D){return typeof D=="string"?D:xC(D)}function k(D,Y){return Y===void 0&&(Y=null),MI(Fe({pathname:P.pathname,hash:"",search:""},typeof D=="string"?Wd(D):D,{state:Y,key:g9()}))}function V(D,Y){return[{usr:D.state,key:D.key,idx:Y},N(D)]}function U(D,Y,re){return!B.length||(B.call({action:D,location:Y,retry:re}),!1)}function W(D){m=D;var Y=c();A=Y[0],P=Y[1],O.call({action:m,location:P})}function F(D,Y){var re=Ed.Push,ae=k(D,Y);function ee(){F(D,Y)}if(U(re,ae,ee)){var de=V(ae,A+1),ke=de[0],Oe=de[1];try{a.pushState(ke,"",Oe)}catch{r.location.assign(Oe)}W(re)}}function z(D,Y){var re=Ed.Replace,ae=k(D,Y);function ee(){z(D,Y)}if(U(re,ae,ee)){var de=V(ae,A),ke=de[0],Oe=de[1];a.replaceState(ke,"",Oe),W(re)}}function S(D){a.go(D)}var b={get action(){return m},get location(){return P},createHref:N,push:F,replace:z,go:S,back:function(){S(-1)},forward:function(){S(1)},listen:function(Y){return O.push(Y)},block:function(Y){var re=B.push(Y);return B.length===1&&r.addEventListener(II,PI),function(){re(),B.length||r.removeEventListener(II,PI)}}};return b}function PI(e){e.preventDefault(),e.returnValue=""}function DI(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(r){return r!==n})}},call:function(n){e.forEach(function(r){return r&&r(n)})}}}function g9(){return Math.random().toString(36).substr(2,8)}function xC(e){var t=e.pathname,n=t===void 0?"/":t,r=e.search,a=r===void 0?"":r,c=e.hash,h=c===void 0?"":c;return a&&a!=="?"&&(n+=a.charAt(0)==="?"?a:"?"+a),h&&h!=="#"&&(n+=h.charAt(0)==="#"?h:"#"+h),n}function Wd(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const dT=g.exports.createContext(null),hT=g.exports.createContext(null),uy=g.exports.createContext({outlet:null,matches:[]});function fl(e,t){if(!e)throw new Error(t)}function y9(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Wd(t):t,a=x3(r.pathname||"/",n);if(a==null)return null;let c=v3(e);v9(c);let h=null;for(let o=0;h==null&&o<c.length;++o)h=k9(c[o],a);return h}function v3(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((a,c)=>{let h={relativePath:a.path||"",caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(h.relativePath.startsWith(r)||fl(!1),h.relativePath=h.relativePath.slice(r.length));let o=ic([r,h.relativePath]),m=n.concat(h);a.children&&a.children.length>0&&(a.index===!0&&fl(!1),v3(a.children,t,m,o)),!(a.path==null&&!a.index)&&t.push({path:o,score:S9(o,a.index),routesMeta:m})}),t}function v9(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:T9(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _9=/^:\w+$/,x9=3,b9=2,w9=1,E9=10,C9=-2,RI=e=>e==="*";function S9(e,t){let n=e.split("/"),r=n.length;return n.some(RI)&&(r+=C9),t&&(r+=b9),n.filter(a=>!RI(a)).reduce((a,c)=>a+(_9.test(c)?x9:c===""?w9:E9),r)}function T9(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function k9(e,t){let{routesMeta:n}=e,r={},a="/",c=[];for(let h=0;h<n.length;++h){let o=n[h],m=h===n.length-1,w=a==="/"?t:t.slice(a.length)||"/",A=A9({path:o.relativePath,caseSensitive:o.caseSensitive,end:m},w);if(!A)return null;Object.assign(r,A.params);let P=o.route;c.push({params:r,pathname:ic([a,A.pathname]),pathnameBase:b3(ic([a,A.pathnameBase])),route:P}),A.pathnameBase!=="/"&&(a=ic([a,A.pathnameBase]))}return c}function A9(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=M9(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let c=a[0],h=c.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((w,A,P)=>{if(A==="*"){let O=o[P]||"";h=c.slice(0,c.length-O.length).replace(/(.)\/+$/,"$1")}return w[A]=I9(o[P]||""),w},{}),pathname:c,pathnameBase:h,pattern:e}}function M9(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(h,o)=>(r.push(o),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(a,t?void 0:"i"),r]}function I9(e,t){try{return decodeURIComponent(e)}catch{return e}}function P9(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Wd(e):e;return{pathname:n?n.startsWith("/")?n:D9(n,t):t,search:L9(r),hash:O9(a)}}function D9(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function _3(e,t,n){let r=typeof e=="string"?Wd(e):e,a=e===""||r.pathname===""?"/":r.pathname,c;if(a==null)c=n;else{let o=t.length-1;if(a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),o-=1;r.pathname=m.join("/")}c=o>=0?t[o]:"/"}let h=P9(r,c);return a&&a!=="/"&&a.endsWith("/")&&!h.pathname.endsWith("/")&&(h.pathname+="/"),h}function R9(e){return e===""||e.pathname===""?"/":typeof e=="string"?Wd(e).pathname:e.pathname}function x3(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&n!=="/"?null:e.slice(t.length)||"/"}const ic=e=>e.join("/").replace(/\/\/+/g,"/"),b3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,O9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function z9(e){cy()||fl(!1);let{basename:t,navigator:n}=g.exports.useContext(dT),{hash:r,pathname:a,search:c}=pT(e),h=a;if(t!=="/"){let o=R9(e),m=o!=null&&o.endsWith("/");h=a==="/"?t+(m?"/":""):ic([t,a])}return n.createHref({pathname:h,search:c,hash:r})}function cy(){return g.exports.useContext(hT)!=null}function Gd(){return cy()||fl(!1),g.exports.useContext(hT).location}function oi(){cy()||fl(!1);let{basename:e,navigator:t}=g.exports.useContext(dT),{matches:n}=g.exports.useContext(uy),{pathname:r}=Gd(),a=JSON.stringify(n.map(o=>o.pathnameBase)),c=g.exports.useRef(!1);return g.exports.useEffect(()=>{c.current=!0}),g.exports.useCallback(function(o,m){if(m===void 0&&(m={}),!c.current)return;if(typeof o=="number"){t.go(o);return}let w=_3(o,JSON.parse(a),r);e!=="/"&&(w.pathname=ic([e,w.pathname])),(m.replace?t.replace:t.push)(w,m.state)},[e,t,a,r])}function qd(){let{matches:e}=g.exports.useContext(uy),t=e[e.length-1];return t?t.params:{}}function pT(e){let{matches:t}=g.exports.useContext(uy),{pathname:n}=Gd(),r=JSON.stringify(t.map(a=>a.pathnameBase));return g.exports.useMemo(()=>_3(e,JSON.parse(r),n),[e,r,n])}function B9(e,t){cy()||fl(!1);let{matches:n}=g.exports.useContext(uy),r=n[n.length-1],a=r?r.params:{};r&&r.pathname;let c=r?r.pathnameBase:"/";r&&r.route;let h=Gd(),o;if(t){var m;let O=typeof t=="string"?Wd(t):t;c==="/"||((m=O.pathname)==null?void 0:m.startsWith(c))||fl(!1),o=O}else o=h;let w=o.pathname||"/",A=c==="/"?w:w.slice(c.length)||"/",P=y9(e,{pathname:A});return F9(P&&P.map(O=>Object.assign({},O,{params:Object.assign({},a,O.params),pathname:ic([c,O.pathname]),pathnameBase:O.pathnameBase==="/"?c:ic([c,O.pathnameBase])})),n)}function F9(e,t){return t===void 0&&(t=[]),e==null?null:e.reduceRight((n,r,a)=>g.exports.createElement(uy.Provider,{children:r.route.element!==void 0?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}}),null)}function Ti(e){fl(!1)}function N9(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Ed.Pop,navigator:c,static:h=!1}=e;cy()&&fl(!1);let o=b3(t),m=g.exports.useMemo(()=>({basename:o,navigator:c,static:h}),[o,c,h]);typeof r=="string"&&(r=Wd(r));let{pathname:w="/",search:A="",hash:P="",state:O=null,key:B="default"}=r,N=g.exports.useMemo(()=>{let k=x3(w,o);return k==null?null:{pathname:k,search:A,hash:P,state:O,key:B}},[o,w,A,P,O,B]);return N==null?null:g.exports.createElement(dT.Provider,{value:m},g.exports.createElement(hT.Provider,{children:n,value:{location:N,navigationType:a}}))}function $9(e){let{children:t,location:n}=e;return B9(bC(t),n)}function bC(e){let t=[];return g.exports.Children.forEach(e,n=>{if(!g.exports.isValidElement(n))return;if(n.type===g.exports.Fragment){t.push.apply(t,bC(n.props.children));return}n.type!==Ti&&fl(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=bC(n.props.children)),t.push(r)}),t}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zx(){return zx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zx.apply(this,arguments)}function w3(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,c;for(c=0;c<r.length;c++)a=r[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}const U9=["onClick","reloadDocument","replace","state","target","to"],j9=["aria-current","caseSensitive","className","end","style","to","children"];function V9(e){let{basename:t,children:n,window:r}=e,a=g.exports.useRef();a.current==null&&(a.current=m9({window:r}));let c=a.current,[h,o]=g.exports.useState({action:c.action,location:c.location});return g.exports.useLayoutEffect(()=>c.listen(o),[c]),g.exports.createElement(N9,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:c})}function H9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const vn=g.exports.forwardRef(function(t,n){let{onClick:r,reloadDocument:a,replace:c=!1,state:h,target:o,to:m}=t,w=w3(t,U9),A=z9(m),P=G9(m,{replace:c,state:h,target:o});function O(B){r&&r(B),!B.defaultPrevented&&!a&&P(B)}return g.exports.createElement("a",zx({},w,{href:A,onClick:O,ref:n,target:o}))}),W9=g.exports.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:a=!1,className:c="",end:h=!1,style:o,to:m,children:w}=t,A=w3(t,j9),P=Gd(),O=pT(m),B=P.pathname,N=O.pathname;a||(B=B.toLowerCase(),N=N.toLowerCase());let k=B===N||!h&&B.startsWith(N)&&B.charAt(N.length)==="/",V=k?r:void 0,U;typeof c=="function"?U=c({isActive:k}):U=[c,k?"active":null].filter(Boolean).join(" ");let W=typeof o=="function"?o({isActive:k}):o;return g.exports.createElement(vn,zx({},A,{"aria-current":V,className:U,ref:n,style:W,to:m}),typeof w=="function"?w({isActive:k}):w)});function G9(e,t){let{target:n,replace:r,state:a}=t===void 0?{}:t,c=oi(),h=Gd(),o=pT(e);return g.exports.useCallback(m=>{if(m.button===0&&(!n||n==="_self")&&!H9(m)){m.preventDefault();let w=!!r||xC(h)===xC(o);c(e,{replace:w,state:a})}},[h,c,o,r,a,n,e])}const Hm=()=>localStorage.getItem("token"),q9=e=>{localStorage.setItem("token",e)},Z9=()=>localStorage.getItem("refresh"),E3=e=>{localStorage.setItem("refresh",e)},no=()=>!!localStorage.getItem("token"),X9=()=>{localStorage.removeItem("token"),localStorage.removeItem("refresh")};function wC(e){this.message=e}wC.prototype=new Error,wC.prototype.name="InvalidCharacterError";var LI=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new wC("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,a=0,c=0,h="";r=t.charAt(c++);~r&&(n=a%4?64*n+r:r,a++%4)?h+=String.fromCharCode(255&n>>(-2*a&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return h};function K9(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(LI(n).replace(/(.)/g,function(r,a){var c=a.charCodeAt(0).toString(16).toUpperCase();return c.length<2&&(c="0"+c),"%"+c}))}(t)}catch{return LI(t)}}function Bx(e){this.message=e}function Y9(e,t){if(typeof e!="string")throw new Bx("Invalid token specified");var n=(t=t||{}).header===!0?0:1;try{return JSON.parse(K9(e.split(".")[n]))}catch(r){throw new Bx("Invalid token specified: "+r.message)}}Bx.prototype=new Error,Bx.prototype.name="InvalidTokenError";function C3(e,t){return function(){return e.apply(t,arguments)}}const{toString:S3}=Object.prototype,{getPrototypeOf:fT}=Object,mT=(e=>t=>{const n=S3.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ql=e=>(e=e.toLowerCase(),t=>mT(t)===e),M0=e=>t=>typeof t===e,{isArray:of}=Array,Hg=M0("undefined");function J9(e){return e!==null&&!Hg(e)&&e.constructor!==null&&!Hg(e.constructor)&&Bd(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const T3=Ql("ArrayBuffer");function Q9(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&T3(e.buffer),t}const ej=M0("string"),Bd=M0("function"),k3=M0("number"),gT=e=>e!==null&&typeof e=="object",tj=e=>e===!0||e===!1,Y_=e=>{if(mT(e)!=="object")return!1;const t=fT(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},nj=Ql("Date"),rj=Ql("File"),ij=Ql("Blob"),oj=Ql("FileList"),aj=e=>gT(e)&&Bd(e.pipe),sj=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||S3.call(e)===t||Bd(e.toString)&&e.toString()===t)},lj=Ql("URLSearchParams"),uj=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dy(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e=="undefined")return;let r,a;if(typeof e!="object"&&(e=[e]),of(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{const c=n?Object.getOwnPropertyNames(e):Object.keys(e),h=c.length;let o;for(r=0;r<h;r++)o=c[r],t.call(null,e[o],o,e)}}function A3(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,a;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const M3=typeof self=="undefined"?typeof global=="undefined"?globalThis:global:self,I3=e=>!Hg(e)&&e!==M3;function EC(){const{caseless:e}=I3(this)&&this||{},t={},n=(r,a)=>{const c=e&&A3(t,a)||a;Y_(t[c])&&Y_(r)?t[c]=EC(t[c],r):Y_(r)?t[c]=EC({},r):of(r)?t[c]=r.slice():t[c]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&dy(arguments[r],n);return t}const cj=(e,t,n,{allOwnKeys:r}={})=>(dy(t,(a,c)=>{n&&Bd(a)?e[c]=C3(a,n):e[c]=a},{allOwnKeys:r}),e),dj=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hj=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},pj=(e,t,n,r)=>{let a,c,h;const o={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),c=a.length;c-- >0;)h=a[c],(!r||r(h,e,t))&&!o[h]&&(t[h]=e[h],o[h]=!0);e=n!==!1&&fT(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},fj=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},mj=e=>{if(!e)return null;if(of(e))return e;let t=e.length;if(!k3(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},gj=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&fT(Uint8Array)),yj=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=r.next())&&!a.done;){const c=a.value;t.call(e,c[0],c[1])}},vj=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},_j=Ql("HTMLFormElement"),xj=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),OI=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),bj=Ql("RegExp"),P3=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};dy(n,(a,c)=>{t(a,c,e)!==!1&&(r[c]=a)}),Object.defineProperties(e,r)},wj=e=>{P3(e,(t,n)=>{if(Bd(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(!!Bd(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ej=(e,t)=>{const n={},r=a=>{a.forEach(c=>{n[c]=!0})};return of(e)?r(e):r(String(e).split(t)),n},Cj=()=>{},Sj=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Tj=e=>{const t=new Array(10),n=(r,a)=>{if(gT(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[a]=r;const c=of(r)?[]:{};return dy(r,(h,o)=>{const m=n(h,a+1);!Hg(m)&&(c[o]=m)}),t[a]=void 0,c}}return r};return n(e,0)};var zt={isArray:of,isArrayBuffer:T3,isBuffer:J9,isFormData:sj,isArrayBufferView:Q9,isString:ej,isNumber:k3,isBoolean:tj,isObject:gT,isPlainObject:Y_,isUndefined:Hg,isDate:nj,isFile:rj,isBlob:ij,isRegExp:bj,isFunction:Bd,isStream:aj,isURLSearchParams:lj,isTypedArray:gj,isFileList:oj,forEach:dy,merge:EC,extend:cj,trim:uj,stripBOM:dj,inherits:hj,toFlatObject:pj,kindOf:mT,kindOfTest:Ql,endsWith:fj,toArray:mj,forEachEntry:yj,matchAll:vj,isHTMLForm:_j,hasOwnProperty:OI,hasOwnProp:OI,reduceDescriptors:P3,freezeMethods:wj,toObjectSet:Ej,toCamelCase:xj,noop:Cj,toFiniteNumber:Sj,findKey:A3,global:M3,isContextDefined:I3,toJSONObject:Tj};function Er(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}zt.inherits(Er,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:zt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const D3=Er.prototype,R3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{R3[e]={value:e}});Object.defineProperties(Er,R3);Object.defineProperty(D3,"isAxiosError",{value:!0});Er.from=(e,t,n,r,a,c)=>{const h=Object.create(D3);return zt.toFlatObject(e,h,function(m){return m!==Error.prototype},o=>o!=="isAxiosError"),Er.call(h,e.message,t,n,r,a),h.cause=e,h.name=e.name,c&&Object.assign(h,c),h};var kj=typeof self=="object"?self.FormData:window.FormData,Aj=kj;function CC(e){return zt.isPlainObject(e)||zt.isArray(e)}function L3(e){return zt.endsWith(e,"[]")?e.slice(0,-2):e}function zI(e,t,n){return e?e.concat(t).map(function(a,c){return a=L3(a),!n&&c?"["+a+"]":a}).join(n?".":""):t}function Mj(e){return zt.isArray(e)&&!e.some(CC)}const Ij=zt.toFlatObject(zt,{},null,function(t){return/^is[A-Z]/.test(t)});function Pj(e){return e&&zt.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function I0(e,t,n){if(!zt.isObject(e))throw new TypeError("target must be an object");t=t||new(Aj||FormData),n=zt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,V){return!zt.isUndefined(V[k])});const r=n.metaTokens,a=n.visitor||A,c=n.dots,h=n.indexes,m=(n.Blob||typeof Blob!="undefined"&&Blob)&&Pj(t);if(!zt.isFunction(a))throw new TypeError("visitor must be a function");function w(N){if(N===null)return"";if(zt.isDate(N))return N.toISOString();if(!m&&zt.isBlob(N))throw new Er("Blob is not supported. Use a Buffer instead.");return zt.isArrayBuffer(N)||zt.isTypedArray(N)?m&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function A(N,k,V){let U=N;if(N&&!V&&typeof N=="object"){if(zt.endsWith(k,"{}"))k=r?k:k.slice(0,-2),N=JSON.stringify(N);else if(zt.isArray(N)&&Mj(N)||zt.isFileList(N)||zt.endsWith(k,"[]")&&(U=zt.toArray(N)))return k=L3(k),U.forEach(function(F,z){!(zt.isUndefined(F)||F===null)&&t.append(h===!0?zI([k],z,c):h===null?k:k+"[]",w(F))}),!1}return CC(N)?!0:(t.append(zI(V,k,c),w(N)),!1)}const P=[],O=Object.assign(Ij,{defaultVisitor:A,convertValue:w,isVisitable:CC});function B(N,k){if(!zt.isUndefined(N)){if(P.indexOf(N)!==-1)throw Error("Circular reference detected in "+k.join("."));P.push(N),zt.forEach(N,function(U,W){(!(zt.isUndefined(U)||U===null)&&a.call(t,U,zt.isString(W)?W.trim():W,k,O))===!0&&B(U,k?k.concat(W):[W])}),P.pop()}}if(!zt.isObject(e))throw new TypeError("data must be an object");return B(e),t}function BI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function yT(e,t){this._pairs=[],e&&I0(e,this,t)}const O3=yT.prototype;O3.append=function(t,n){this._pairs.push([t,n])};O3.toString=function(t){const n=t?function(r){return t.call(this,r,BI)}:BI;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function Dj(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function z3(e,t,n){if(!t)return e;const r=n&&n.encode||Dj,a=n&&n.serialize;let c;if(a?c=a(t,n):c=zt.isURLSearchParams(t)?t.toString():new yT(t,n).toString(r),c){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+c}return e}class Rj{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){zt.forEach(this.handlers,function(r){r!==null&&t(r)})}}var FI=Rj,B3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lj=typeof URLSearchParams!="undefined"?URLSearchParams:yT,Oj=FormData;const zj=(()=>{let e;return typeof navigator!="undefined"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"})();var jl={isBrowser:!0,classes:{URLSearchParams:Lj,FormData:Oj,Blob},isStandardBrowserEnv:zj,protocols:["http","https","file","blob","url","data"]};function Bj(e,t){return I0(e,new jl.classes.URLSearchParams,Object.assign({visitor:function(n,r,a,c){return jl.isNode&&zt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},t))}function Fj(e){return zt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Nj(e){const t={},n=Object.keys(e);let r;const a=n.length;let c;for(r=0;r<a;r++)c=n[r],t[c]=e[c];return t}function F3(e){function t(n,r,a,c){let h=n[c++];const o=Number.isFinite(+h),m=c>=n.length;return h=!h&&zt.isArray(a)?a.length:h,m?(zt.hasOwnProp(a,h)?a[h]=[a[h],r]:a[h]=r,!o):((!a[h]||!zt.isObject(a[h]))&&(a[h]=[]),t(n,r,a[h],c)&&zt.isArray(a[h])&&(a[h]=Nj(a[h])),!o)}if(zt.isFormData(e)&&zt.isFunction(e.entries)){const n={};return zt.forEachEntry(e,(r,a)=>{t(Fj(r),a,n,0)}),n}return null}const $j={"Content-Type":void 0};function Uj(e,t,n){if(zt.isString(e))try{return(t||JSON.parse)(e),zt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const P0={transitional:B3,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,c=zt.isObject(t);if(c&&zt.isHTMLForm(t)&&(t=new FormData(t)),zt.isFormData(t))return a&&a?JSON.stringify(F3(t)):t;if(zt.isArrayBuffer(t)||zt.isBuffer(t)||zt.isStream(t)||zt.isFile(t)||zt.isBlob(t))return t;if(zt.isArrayBufferView(t))return t.buffer;if(zt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Bj(t,this.formSerializer).toString();if((o=zt.isFileList(t))||r.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return I0(o?{"files[]":t}:t,m&&new m,this.formSerializer)}}return c||a?(n.setContentType("application/json",!1),Uj(t)):t}],transformResponse:[function(t){const n=this.transitional||P0.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(t&&zt.isString(t)&&(r&&!this.responseType||a)){const h=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(o){if(h)throw o.name==="SyntaxError"?Er.from(o,Er.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jl.classes.FormData,Blob:jl.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};zt.forEach(["delete","get","head"],function(t){P0.headers[t]={}});zt.forEach(["post","put","patch"],function(t){P0.headers[t]=zt.merge($j)});var vT=P0;const jj=zt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Vj=e=>{const t={};let n,r,a;return e&&e.split(`
`).forEach(function(h){a=h.indexOf(":"),n=h.substring(0,a).trim().toLowerCase(),r=h.substring(a+1).trim(),!(!n||t[n]&&jj[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t};const NI=Symbol("internals");function Wm(e){return e&&String(e).trim().toLowerCase()}function J_(e){return e===!1||e==null?e:zt.isArray(e)?e.map(J_):String(e)}function Hj(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}function Wj(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function $I(e,t,n,r){if(zt.isFunction(r))return r.call(this,t,n);if(!!zt.isString(t)){if(zt.isString(r))return t.indexOf(r)!==-1;if(zt.isRegExp(r))return r.test(t)}}function Gj(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function qj(e,t){const n=zt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(a,c,h){return this[r].call(this,t,a,c,h)},configurable:!0})})}class D0{constructor(t){t&&this.set(t)}set(t,n,r){const a=this;function c(o,m,w){const A=Wm(m);if(!A)throw new Error("header name must be a non-empty string");const P=zt.findKey(a,A);(!P||a[P]===void 0||w===!0||w===void 0&&a[P]!==!1)&&(a[P||m]=J_(o))}const h=(o,m)=>zt.forEach(o,(w,A)=>c(w,A,m));return zt.isPlainObject(t)||t instanceof this.constructor?h(t,n):zt.isString(t)&&(t=t.trim())&&!Wj(t)?h(Vj(t),n):t!=null&&c(n,t,r),this}get(t,n){if(t=Wm(t),t){const r=zt.findKey(this,t);if(r){const a=this[r];if(!n)return a;if(n===!0)return Hj(a);if(zt.isFunction(n))return n.call(this,a,r);if(zt.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Wm(t),t){const r=zt.findKey(this,t);return!!(r&&(!n||$I(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let a=!1;function c(h){if(h=Wm(h),h){const o=zt.findKey(r,h);o&&(!n||$I(r,r[o],o,n))&&(delete r[o],a=!0)}}return zt.isArray(t)?t.forEach(c):c(t),a}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){const n=this,r={};return zt.forEach(this,(a,c)=>{const h=zt.findKey(r,c);if(h){n[h]=J_(a),delete n[c];return}const o=t?Gj(c):String(c).trim();o!==c&&delete n[c],n[o]=J_(a),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return zt.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=t&&zt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(a=>r.set(a)),r}static accessor(t){const r=(this[NI]=this[NI]={accessors:{}}).accessors,a=this.prototype;function c(h){const o=Wm(h);r[o]||(qj(a,h),r[o]=!0)}return zt.isArray(t)?t.forEach(c):c(t),this}}D0.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);zt.freezeMethods(D0.prototype);zt.freezeMethods(D0);var Vl=D0;function Aw(e,t){const n=this||vT,r=t||n,a=Vl.from(r.headers);let c=r.data;return zt.forEach(e,function(o){c=o.call(n,c,a.normalize(),t?t.status:void 0)}),a.normalize(),c}function N3(e){return!!(e&&e.__CANCEL__)}function hy(e,t,n){Er.call(this,e==null?"canceled":e,Er.ERR_CANCELED,t,n),this.name="CanceledError"}zt.inherits(hy,Er,{__CANCEL__:!0});var Zj=null;function Xj(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Er("Request failed with status code "+n.status,[Er.ERR_BAD_REQUEST,Er.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var Kj=jl.isStandardBrowserEnv?function(){return{write:function(n,r,a,c,h,o){const m=[];m.push(n+"="+encodeURIComponent(r)),zt.isNumber(a)&&m.push("expires="+new Date(a).toGMTString()),zt.isString(c)&&m.push("path="+c),zt.isString(h)&&m.push("domain="+h),o===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Yj(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Jj(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function $3(e,t){return e&&!Yj(t)?Jj(e,t):t}var Qj=jl.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function a(c){let h=c;return t&&(n.setAttribute("href",h),h=n.href),n.setAttribute("href",h),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=a(window.location.href),function(h){const o=zt.isString(h)?a(h):h;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}();function e7(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function t7(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a=0,c=0,h;return t=t!==void 0?t:1e3,function(m){const w=Date.now(),A=r[c];h||(h=w),n[a]=m,r[a]=w;let P=c,O=0;for(;P!==a;)O+=n[P++],P=P%e;if(a=(a+1)%e,a===c&&(c=(c+1)%e),w-h<t)return;const B=A&&w-A;return B?Math.round(O*1e3/B):void 0}}function UI(e,t){let n=0;const r=t7(50,250);return a=>{const c=a.loaded,h=a.lengthComputable?a.total:void 0,o=c-n,m=r(o),w=c<=h;n=c;const A={loaded:c,total:h,progress:h?c/h:void 0,bytes:o,rate:m||void 0,estimated:m&&h&&w?(h-c)/m:void 0,event:a};A[t?"download":"upload"]=!0,e(A)}}const n7=typeof XMLHttpRequest!="undefined";var r7=n7&&function(e){return new Promise(function(n,r){let a=e.data;const c=Vl.from(e.headers).normalize(),h=e.responseType;let o;function m(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}zt.isFormData(a)&&jl.isStandardBrowserEnv&&c.setContentType(!1);let w=new XMLHttpRequest;if(e.auth){const B=e.auth.username||"",N=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";c.set("Authorization","Basic "+btoa(B+":"+N))}const A=$3(e.baseURL,e.url);w.open(e.method.toUpperCase(),z3(A,e.params,e.paramsSerializer),!0),w.timeout=e.timeout;function P(){if(!w)return;const B=Vl.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),k={data:!h||h==="text"||h==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:B,config:e,request:w};Xj(function(U){n(U),m()},function(U){r(U),m()},k),w=null}if("onloadend"in w?w.onloadend=P:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(P)},w.onabort=function(){!w||(r(new Er("Request aborted",Er.ECONNABORTED,e,w)),w=null)},w.onerror=function(){r(new Er("Network Error",Er.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let N=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const k=e.transitional||B3;e.timeoutErrorMessage&&(N=e.timeoutErrorMessage),r(new Er(N,k.clarifyTimeoutError?Er.ETIMEDOUT:Er.ECONNABORTED,e,w)),w=null},jl.isStandardBrowserEnv){const B=(e.withCredentials||Qj(A))&&e.xsrfCookieName&&Kj.read(e.xsrfCookieName);B&&c.set(e.xsrfHeaderName,B)}a===void 0&&c.setContentType(null),"setRequestHeader"in w&&zt.forEach(c.toJSON(),function(N,k){w.setRequestHeader(k,N)}),zt.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),h&&h!=="json"&&(w.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&w.addEventListener("progress",UI(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",UI(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=B=>{!w||(r(!B||B.type?new hy(null,e,w):B),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const O=e7(A);if(O&&jl.protocols.indexOf(O)===-1){r(new Er("Unsupported protocol "+O+":",Er.ERR_BAD_REQUEST,e));return}w.send(a||null)})};const Q_={http:Zj,xhr:r7};zt.forEach(Q_,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});var i7={getAdapter:e=>{e=zt.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let a=0;a<t&&(n=e[a],!(r=zt.isString(n)?Q_[n.toLowerCase()]:n));a++);if(!r)throw r===!1?new Er(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(zt.hasOwnProp(Q_,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!zt.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Q_};function Mw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hy}function jI(e){return Mw(e),e.headers=Vl.from(e.headers),e.data=Aw.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),i7.getAdapter(e.adapter||vT.adapter)(e).then(function(r){return Mw(e),r.data=Aw.call(e,e.transformResponse,r),r.headers=Vl.from(r.headers),r},function(r){return N3(r)||(Mw(e),r&&r.response&&(r.response.data=Aw.call(e,e.transformResponse,r.response),r.response.headers=Vl.from(r.response.headers))),Promise.reject(r)})}const VI=e=>e instanceof Vl?e.toJSON():e;function Wg(e,t){t=t||{};const n={};function r(w,A,P){return zt.isPlainObject(w)&&zt.isPlainObject(A)?zt.merge.call({caseless:P},w,A):zt.isPlainObject(A)?zt.merge({},A):zt.isArray(A)?A.slice():A}function a(w,A,P){if(zt.isUndefined(A)){if(!zt.isUndefined(w))return r(void 0,w,P)}else return r(w,A,P)}function c(w,A){if(!zt.isUndefined(A))return r(void 0,A)}function h(w,A){if(zt.isUndefined(A)){if(!zt.isUndefined(w))return r(void 0,w)}else return r(void 0,A)}function o(w,A,P){if(P in t)return r(w,A);if(P in e)return r(void 0,w)}const m={url:c,method:c,data:c,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:o,headers:(w,A)=>a(VI(w),VI(A),!0)};return zt.forEach(Object.keys(e).concat(Object.keys(t)),function(A){const P=m[A]||a,O=P(e[A],t[A],A);zt.isUndefined(O)&&P!==o||(n[A]=O)}),n}const U3="1.2.0",_T={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_T[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const HI={};_T.transitional=function(t,n,r){function a(c,h){return"[Axios v"+U3+"] Transitional option '"+c+"'"+h+(r?". "+r:"")}return(c,h,o)=>{if(t===!1)throw new Er(a(h," has been removed"+(n?" in "+n:"")),Er.ERR_DEPRECATED);return n&&!HI[h]&&(HI[h]=!0,console.warn(a(h," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(c,h,o):!0}};function o7(e,t,n){if(typeof e!="object")throw new Er("options must be an object",Er.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const c=r[a],h=t[c];if(h){const o=e[c],m=o===void 0||h(o,c,e);if(m!==!0)throw new Er("option "+c+" must be "+m,Er.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Er("Unknown option "+c,Er.ERR_BAD_OPTION)}}var SC={assertOptions:o7,validators:_T};const Fu=SC.validators;class Fx{constructor(t){this.defaults=t,this.interceptors={request:new FI,response:new FI}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Wg(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:c}=n;r!==void 0&&SC.assertOptions(r,{silentJSONParsing:Fu.transitional(Fu.boolean),forcedJSONParsing:Fu.transitional(Fu.boolean),clarifyTimeoutError:Fu.transitional(Fu.boolean)},!1),a!==void 0&&SC.assertOptions(a,{encode:Fu.function,serialize:Fu.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let h;h=c&&zt.merge(c.common,c[n.method]),h&&zt.forEach(["delete","get","head","post","put","patch","common"],N=>{delete c[N]}),n.headers=Vl.concat(h,c);const o=[];let m=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(n)===!1||(m=m&&k.synchronous,o.unshift(k.fulfilled,k.rejected))});const w=[];this.interceptors.response.forEach(function(k){w.push(k.fulfilled,k.rejected)});let A,P=0,O;if(!m){const N=[jI.bind(this),void 0];for(N.unshift.apply(N,o),N.push.apply(N,w),O=N.length,A=Promise.resolve(n);P<O;)A=A.then(N[P++],N[P++]);return A}O=o.length;let B=n;for(P=0;P<O;){const N=o[P++],k=o[P++];try{B=N(B)}catch(V){k.call(this,V);break}}try{A=jI.call(this,B)}catch(N){return Promise.reject(N)}for(P=0,O=w.length;P<O;)A=A.then(w[P++],w[P++]);return A}getUri(t){t=Wg(this.defaults,t);const n=$3(t.baseURL,t.url);return z3(n,t.params,t.paramsSerializer)}}zt.forEach(["delete","get","head","options"],function(t){Fx.prototype[t]=function(n,r){return this.request(Wg(r||{},{method:t,url:n,data:(r||{}).data}))}});zt.forEach(["post","put","patch"],function(t){function n(r){return function(c,h,o){return this.request(Wg(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:h}))}}Fx.prototype[t]=n(),Fx.prototype[t+"Form"]=n(!0)});var ex=Fx;class xT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const r=this;this.promise.then(a=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](a);r._listeners=null}),this.promise.then=a=>{let c;const h=new Promise(o=>{r.subscribe(o),c=o}).then(a);return h.cancel=function(){r.unsubscribe(c)},h},t(function(c,h,o){r.reason||(r.reason=new hy(c,h,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new xT(function(a){t=a}),cancel:t}}}var a7=xT;function s7(e){return function(n){return e.apply(null,n)}}function l7(e){return zt.isObject(e)&&e.isAxiosError===!0}function j3(e){const t=new ex(e),n=C3(ex.prototype.request,t);return zt.extend(n,ex.prototype,t,{allOwnKeys:!0}),zt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return j3(Wg(e,a))},n}const ko=j3(vT);ko.Axios=ex;ko.CanceledError=hy;ko.CancelToken=a7;ko.isCancel=N3;ko.VERSION=U3;ko.toFormData=I0;ko.AxiosError=Er;ko.Cancel=ko.CanceledError;ko.all=function(t){return Promise.all(t)};ko.spread=s7;ko.isAxiosError=l7;ko.AxiosHeaders=Vl;ko.formToJSON=e=>F3(zt.isHTMLForm(e)?new FormData(e):e);ko.default=ko;var Is=ko;const Ts="https://maclyonsden.com",ur={BASEURL:Ts,AUTH:{LOGIN:`${Ts}/api/auth/token`,REFRESH:`${Ts}/api/auth/token/refresh`},POST:{USER:`${Ts}/api/v3/obj/user/retrieve`,USER_UPDATE:`${Ts}/api/v3/obj/user/single`,ANNOUNCEMENT:`${Ts}/api/v3/announcement`},USER:`${Ts}/api/v3/obj/user`,TIMETABLE:`${Ts}/api/me/timetable`,SCHEDULE:`${Ts}/api/me/schedule`,COURSE:`${Ts}/api/v3/obj/course`,OBJECT:`${Ts}/api/v3/obj`},WI=100,Tr=g.exports.createContext({user:{},allUsers:[],allOrgs:[],allTags:[],setUser:e=>{},updateToken:e=>{},getAPI:(e,t)=>({}),postAPI:(e,t)=>({}),putAPI:(e,t)=>({}),patchAPI:(e,t)=>({}),refreshAuth:()=>{},logout:()=>{},notify:(e,t)=>{},notification:{},closeNotif:()=>{}}),u7=e=>{let[t,n]=g.exports.useState({});const[r,a]=g.exports.useState([]),[c,h]=g.exports.useState([]),[o,m]=g.exports.useState([]),w=oi(),[A,P]=g.exports.useState({open:!1,type:"",message:""}),O=(ee,de)=>{P({open:!0,type:de,message:ee})},B=(ee,de)=>{de!=="clickaway"&&P({...A,open:!1})},N=ee=>{t=ee,n(ee)},k=()=>{no()&&z(`${ur.USER}/retrieve/${t.id}`).then(ee=>{N({...t,...ee.data})}).catch(ee=>{re()})};g.exports.useEffect(()=>{no()&&(F(Hm()),k()),V();const ee=setInterval(()=>{V()},5*60*1e3);return()=>{clearInterval(ee)}},[]);const V=async()=>{U("user").then(ee=>{a(ee)}).catch(ee=>{}),U("organization").then(ee=>{h(ee)}).catch(ee=>{}),U("tag").then(ee=>{m(ee)}).catch(ee=>{})},U=async ee=>{let de=localStorage.getItem(ee);if(de)try{let ke=JSON.parse(de),Oe=await Y(`${ur.OBJECT}/${ee}?limit=${WI}`);return Oe.headers["last-modified"]&&new Date(Oe.headers["last-modified"]).getTime()>ke.modified?await W(ee):ke.data}catch{return await W(ee)}else return await W(ee)},W=async ee=>{try{let de=await z(`${ur.OBJECT}/${ee}?limit=${WI}`),ke=de.data.results,Oe=1;for(;de.data.next;)await new Promise(Ee=>setTimeout(Ee,Oe*Oe*100)),de=await z(de.data.next),ke.concat(de.data.results),Oe++;let Le=JSON.stringify({modified:Date.now(),data:ke});return localStorage.setItem(ee,Le),ke}catch{return[]}},F=ee=>{if(q9(ee),ee!==""){let de=Y9(ee);N({...t,id:de.user_id,registertime:de.iat}),k()}else N({})};function z(ee,de){de&&!no()&&w("/accounts/login");const ke=Hm();return Is.get(ee,de?{headers:{Authorization:`Bearer ${ke}`}}:{})}const S=(ee,de)=>{no()||w("/accounts/login");const ke=Hm();return Is.post(ee,de,{headers:{Authorization:`Bearer ${ke}`}})},b=(ee,de)=>{no()||w("/accounts/login");const ke=Hm();return Is.put(ee,de,{headers:{Authorization:`Bearer ${ke}`}})},D=(ee,de)=>{if(!no())return w("/accounts/login"),{};const ke=Hm();return Is.patch(ee,de,{headers:{Authorization:`Bearer ${ke}`}})};function Y(ee){return Is.head(ee)}const re=()=>{!no()||Is.post(ur.AUTH.REFRESH,{refresh:Z9()},{}).then(ee=>{F(ee.data.access),E3(ee.data.refresh)}).catch(ee=>{console.log("Refresh expired. Logging out."),ae()})},ae=()=>{!no()||(N({}),localStorage.removeItem("token"),localStorage.removeItem("refresh"),w("/accounts/login"))};return g.exports.createElement(Tr.Provider,{value:{user:t,allUsers:r,allOrgs:c,allTags:o,setUser:N,updateToken:F,getAPI:z,postAPI:S,putAPI:b,patchAPI:D,refreshAuth:re,logout:ae,notify:O,notification:A,closeNotif:B}},e.children)},c7=()=>{const e=oi(),t=g.exports.useContext(Tr);return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("ul",{className:"sidenav",id:"slide-out",style:{transform:"translateX(-105%)"}},g.exports.createElement("li",{className:"divider"}),g.exports.createElement("li",null),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/announcements?feed=all"},"All")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/announcements?feed=school"},"School")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/announcements?feed=sac"},"Student Council")),g.exports.createElement("li",{className:"divider"}),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/calendar",className:"sidenav-close"},"Calendar")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/clubs",className:"sidenav-close"},"Clubs")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/blog",className:"sidenav-close"},"Content")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/resources",className:"sidenav-close"},"Resources")),g.exports.createElement("li",{className:"divider"}),g.exports.createElement("li",null),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=history"},"WLMCI")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=about"},"About")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=team"},"Team")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/map"},"Map")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=school"},"Contact WLMCI")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=contact"},"Contact Us")),g.exports.createElement("li",{className:"divider"}),no()?g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("li",null,g.exports.createElement(Nr,{href:`/user/${t.user.username}`,className:"sidenav-close"},"Profile")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/timetable",className:"sidenav-close"},"Timetable")),g.exports.createElement("li",null,g.exports.createElement("a",{className:"nav-link",onClick:n=>{n.preventDefault(),X9(),e("/accounts/login")}},"Logout"))):g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/accounts/login/?next=/",className:"sidenav-close"},"Login")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/accounts/signup/?next=/",className:"sidenav-close"},"Sign Up")))),g.exports.createElement("nav",null,g.exports.createElement("div",{className:"nav-wrapper"},g.exports.createElement(Nr,{href:"/"},g.exports.createElement("div",{className:"brand-logo"},g.exports.createElement("img",{className:"img-logo",src:"/static/img/themes/logos/dark-transparent.png"}))),g.exports.createElement("a",{href:"#","data-target":"slide-out",className:"sidenav-trigger"},g.exports.createElement("i",{className:"zmdi zmdi-menu"})),g.exports.createElement("ul",{className:"right hide-on-med-and-down"},g.exports.createElement("li",null,g.exports.createElement("a",{className:"dropdown-trigger","data-target":"dropdownAnnouncements"},"Announcements",g.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),g.exports.createElement("ul",{id:"dropdownAnnouncements",className:"dropdown-content"},g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/announcements?feed=all"},"All")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/announcements?feed=school"},"School")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/announcements?feed=sac"},"Student Council")))),g.exports.createElement("li",{className:"nav-item"},g.exports.createElement(Nr,{href:"/calendar"},"Calendar")),g.exports.createElement("li",{className:"nav-item"},g.exports.createElement(Nr,{href:"/clubs"},"Clubs")),g.exports.createElement("li",{className:"nav-item"},g.exports.createElement(Nr,{href:"/blog"},"Content")),g.exports.createElement("li",{className:"nav-item"},g.exports.createElement(Nr,{href:"/resources"},"Resources")),g.exports.createElement("li",null,g.exports.createElement("a",{className:"dropdown-trigger",href:"/#!","data-target":"dropdownAbout"},"About",g.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),g.exports.createElement("ul",{id:"dropdownAbout",className:"dropdown-content"},g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=history"},"WLMCI")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=about"},"About")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=team"},"Team")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/map"},"Map")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=school"},"Contact WLMCI")),g.exports.createElement("li",null,g.exports.createElement(Nr,{href:"/about?tab=contact"},"Contact Us")))),g.exports.createElement("li",null,no()?g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("a",{className:"dropdown-trigger",href:"/user/ji.mmyliu#!","data-target":"dropdownAcc"},"Account",g.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),g.exports.createElement("ul",{id:"dropdownAcc",className:"dropdown-content",tabIndex:0},g.exports.createElement("li",{tabIndex:0},g.exports.createElement(vn,{to:`/user/${t.user.id}`},"Profile")),g.exports.createElement("li",{tabIndex:0},g.exports.createElement(vn,{to:"/timetable"},"Timetable")),t.user.is_staff&&g.exports.createElement("li",{tabIndex:0},g.exports.createElement("a",{href:"/admin/"},"Admin")),g.exports.createElement("li",{tabIndex:0},g.exports.createElement(vn,{to:"/accounts/logout"},"Logout")))):g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("a",{className:"dropdown-trigger",href:"/#!","data-target":"dropdownAcc"},"Login/Sign Up",g.exports.createElement("i",{className:"zmdi zmdi-caret-down"})),g.exports.createElement("ul",{id:"dropdownAcc",className:"dropdown-content"},g.exports.createElement("li",null,g.exports.createElement(Nx,{href:"/accounts/login/?next=/"},"Login")),g.exports.createElement("li",null,g.exports.createElement(Nx,{href:"/accounts/signup/?next=/"},"Sign Up")))))))))},Nr=e=>{const t=oi();return g.exports.createElement("a",{className:"nav-link",href:e.href,onClick:n=>{n.preventDefault(),t(e.href)}},e.children)},Nx=e=>{const t=oi();return g.exports.createElement("a",{href:e.href,className:e.className,onClick:n=>{n.preventDefault(),t(e.href)}},e.children)},d7=()=>(oi(),g.exports.createElement("div",{className:"footer"},g.exports.createElement("div",{className:"footer-title-par"},g.exports.createElement("p",{className:"footer-title"},"William Lyon Mackenzie's online hub for announcements, calendar events, clubs, and timetables."),g.exports.createElement("p",{className:"footer-title"},g.exports.createElement(vn,{to:"/terms"},"Terms of Service")," and ",g.exports.createElement(vn,{to:"/privacy"},"Privacy Policy"))),g.exports.createElement("hr",{className:"footer-bar"}),g.exports.createElement("div",{className:"foooter-icon-par"},g.exports.createElement("a",{className:"footer-name",href:"https://github.com/wlmac/metropolis",rel:"noreferrer",target:"_blank"},g.exports.createElement("i",{className:"footer-icon zmdi zmdi-hc-3x zmdi-github"}))))),h7=()=>{oi(),g.exports.useEffect(()=>{document.title="Home | Metropolis"},[]);const[e,t]=g.exports.useState({});g.exports.useEffect(()=>{const O=`${ur.OBJECT}/blog-post`;Is.get(O).then(B=>{t(B.data.results[0])})},[]);const[n,r]=g.exports.useState([]),[a,c]=g.exports.useState(!1),h=g.exports.useContext(Tr),[o,m]=g.exports.useState(new Date),w=()=>{no()&&h.getAPI(ur.SCHEDULE,!0).then(O=>{r(O.data),c(!0)}).catch(O=>{O.response.status!==404&&(h.refreshAuth(),w())})};g.exports.useEffect(()=>{w()},[]),g.exports.useEffect(()=>{var O=setInterval(()=>m(new Date),1e3);return()=>clearInterval(O)},[]);const A=(O,B)=>O<=0?"":O===1?`${O} ${B}, `:`${O} ${B}s, `,P=()=>{if(n.length===0)return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("h4",{className:"schedule-course"},"No School"),g.exports.createElement("span",{className:"schedule-description"},"Enjoy your day!"));let O=null;if(n.forEach(U=>{o<=new Date(U.time.end)&&(!O||new Date(U.time.start)<new Date(O.time.start))&&(O=U)}),O)if(o>=new Date(O.time.start)){var B=new Date(O.time.end).getTime()-o.getTime(),N=Math.floor(B/1e3/60/60);B-=N*1e3*60*60;var k=Math.floor(B/1e3/60);B-=k*1e3*60;var V=Math.floor(B/1e3);return B-=V*1e3,g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("h4",{className:"schedule-course"},O.course),g.exports.createElement("span",{className:"schedule-description"},`${O.description.course}: Ends in ${A(N,"hour")}${A(k,"minute")}${V} ${V===1?"second":"seconds"}`))}else{var B=new Date(O.time.start).getTime()-o.getTime(),N=Math.floor(B/1e3/60/60);B-=N*1e3*60*60;var k=Math.floor(B/1e3/60);B-=k*1e3*60;var V=Math.floor(B/1e3);return B-=V*1e3,g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("h4",{className:"schedule-course"},O.course),g.exports.createElement("span",{className:"schedule-description"},`${O.description.course}: Starts in ${A(N,"hour")}${A(k,"minute")}${V} ${V===1?"second":"seconds"}`))}else return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("h4",{className:"schedule-course"},"School Over"),g.exports.createElement("span",{className:"schedule-description"},"Enjoy your evening!"))};return g.exports.createElement("div",{id:"content-container"},g.exports.createElement("div",{className:"banner"},g.exports.createElement("div",{className:"background"},g.exports.createElement("img",{alt:"",src:"/static/img/themes/banners/spring.jpg"})),g.exports.createElement("div",{className:"overlay-container valign-wrapper"},g.exports.createElement("div",{className:"next-class center-align"},a?g.exports.createElement(P,null):g.exports.createElement("h4",{className:"schedule-course"},"Loading your timetable..."))),g.exports.createElement("div",{className:"schedule-today-overlay hide-on-small-and-down"},g.exports.createElement("div",{className:"schedule-today-overlay-container"},a&&n.length>0&&g.exports.createElement("h4",{className:"schedule-cycle"},n[0].cycle),g.exports.createElement("div",{className:"schedule-today-courses"},n.map(O=>g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("span",{className:"schedule-today-course"},O.description.course," - ",O.course),g.exports.createElement("br",null)))))),!no()&&g.exports.createElement("div",{className:"overlay-container"},g.exports.createElement("div",{className:"banner-message center-align"},g.exports.createElement("span",null,g.exports.createElement(vn,{to:"/accounts/signup/"},"Sign up")," and add your timetable to see a personalized schedule here.")))),g.exports.createElement("div",{id:"main-container"},g.exports.createElement(p7,{post:e}),g.exports.createElement("div",{id:"recent-events",className:"card-list center-align"},g.exports.createElement("div",{className:"cards-container"},g.exports.createElement(f7,null)),g.exports.createElement(vn,{className:"full-content-page link",to:"/calendar"},"View all events ",g.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))),g.exports.createElement("hr",{style:{margin:"10px calc(2% + 10px)",borderTopWidth:"2.5px",borderColor:"#d9d9d9"}}),g.exports.createElement("div",{id:"recent-announcements",className:"center-align"},g.exports.createElement("div",{id:"announcements",className:"cards-container"},m7()),g.exports.createElement(vn,{className:"full-content-page link",to:"/announcements"},"View all announcements ",g.exports.createElement("i",{className:"zmdi zmdi-chevron-right"})))))},p7=e=>{const t=e.post;return g.exports.createElement("div",{className:"blog row"},g.exports.createElement("div",{className:"blog-content s5 col valign-wrapper left-align s5"},g.exports.createElement("div",{className:"blog-content-container"},g.exports.createElement("h4",{className:"title"},t.title),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"blog-body markdown-container"},g.exports.createElement("p",null,t.body),g.exports.createElement(vn,{className:"full-content-page link",to:`/blog/${t.id}`},"Read full blog post ",g.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))))),g.exports.createElement("img",{className:"blog-image hide-on-small-and-down col s7",src:t.featured_image+"?fmt=webp&w=1280"}))},f7=()=>{const e=g.exports.useContext(Tr),[t,n]=g.exports.useState([]);g.exports.useEffect(()=>{const a=`${ur.OBJECT}/event`;Is.get(a).then(c=>{n(c.data.results.slice(0,3))})},[]);const r=a=>{const c=a.data;let h=e.allOrgs.find(w=>w.id===c.organization),o=e.allTags.find(w=>w.id===c.tags[0]);const m=w=>{const A=w.indexOf(",");return w.substring(A+2)};return g.exports.createElement("div",{className:"event-card card "},g.exports.createElement("div",{className:"event-time right-align valign-wrapper",style:{backgroundColor:o?o.color:"#ffffff"}},g.exports.createElement("div",{className:"time-container"},g.exports.createElement("span",{className:"date"},new Date(c.start_date).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})),g.exports.createElement("br",null),g.exports.createElement("span",{className:"time"},m(new Date(c.start_date).toLocaleDateString(void 0,{hour:"numeric",minute:"numeric"}))),g.exports.createElement("br",null),g.exports.createElement("span",{className:"intermediate"},"to"),g.exports.createElement("br",null),g.exports.createElement("span",{className:"date"},new Date(c.end_date).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})),g.exports.createElement("br",null),g.exports.createElement("span",{className:"time"},m(new Date(c.end_date).toLocaleDateString(void 0,{hour:"numeric",minute:"numeric"}))),g.exports.createElement("br",null))),g.exports.createElement("div",{className:"event-description left-align"},g.exports.createElement("h5",{className:"title truncate"},c.name),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"authors"},g.exports.createElement("div",{className:"authors-image"},g.exports.createElement(vn,{to:`/club/${c.id}`},g.exports.createElement("img",{className:"circle",src:h?h.icon:"",alt:`${h?h.name:""} logo`}))),g.exports.createElement("div",{className:"authors-text"},g.exports.createElement(vn,{to:`/club/${c.id}`},h?h.name:"")))))};return g.exports.createElement(g.exports.Fragment,null,t.map((a,c)=>g.exports.createElement(r,{data:a,key:c})))},m7=()=>{const[e,t]=g.exports.useState([]);return g.exports.useEffect(()=>{const n=`${ur.OBJECT}/announcement`;Is.get(n).then(r=>{t(r.data.results.slice(0,3))})},[]),e.map(n=>g.exports.createElement(g7,{key:n.id,announcement:n}))},g7=e=>{const t=g.exports.useContext(Tr),n=e.announcement;let r=t.allOrgs.find(c=>c.id===n.organization),a=t.allTags.find(c=>n.tags[0]);return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("div",{className:"announcement-card card left-align",style:{borderColor:a?a.color:"#ffffff"}},g.exports.createElement("h5",{className:"title truncate"},n.title),g.exports.createElement("div",{className:"authors"},g.exports.createElement("div",{className:"authors-image"},g.exports.createElement(vn,{to:`/club/${n.organization}`},g.exports.createElement("img",{className:"circle",src:r?r.banner:"/"}))),g.exports.createElement("div",{className:"authors-text"},g.exports.createElement(vn,{to:`/club/${n.organization}`},r?r.name:""))),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"announcement-description markdown-container"},g.exports.createElement("p",null,n.body),g.exports.createElement(vn,{className:"link",to:`/announcement/${n.id}`},"See announcement ",g.exports.createElement("i",{className:"zmdi zmdi-chevron-right"})))))},R0=()=>{const{search:e}=Gd();return g.exports.useMemo(()=>new URLSearchParams(e),[e])},bT=[{id:"all",text:"ALL",filters:""},{id:"school",text:"SCHOOL",filters:"&organization=2"},{id:"sac",text:"STUDENT COUNCIL",filters:"&organization=8"}],Gg=e=>g.exports.createElement("p",{className:"tag",style:{backgroundColor:e.tag.color}},e.tag.name),L0={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};const Iw=10,y7=()=>{const e=g.exports.useContext(Tr),t=R0(),n=oi(),r=t.get("feed"),a=t.get("tag"),[c,h]=g.exports.useState({});g.exports.useState(!1),g.exports.useRef(null),g.exports.useEffect(()=>{let m=e.allTags.filter(w=>w.name===a);h(m.length==0?{}:m[0])},[e.allTags,a]),g.exports.useEffect(()=>{document.title="Announcements | Metropolis"},[]);const o=m=>g.exports.createElement(g.exports.Fragment,null," ",bT.map(w=>{const A=w.id===m?"header header-active":"header";return g.exports.createElement("li",{key:w.id,className:A,onClick:()=>{n(`/announcements?feed=${w.id}`)}},w.text)}),e.user.organizations?g.exports.createElement("li",{key:"my",className:m==="my"?"header header-active":"header",onClick:()=>{n("/announcements?feed=my")}},"MY FEED"):g.exports.createElement(g.exports.Fragment,null),c.id?g.exports.createElement("li",{key:c.name,className:c.name===m?"header header-active":"header",onClick:()=>{n(`/announcements?tag=${c.name}`)}},"TAG: ",c.name.toUpperCase()):g.exports.createElement(g.exports.Fragment,null));return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"static/css/announcement-list.css"}),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"headers header-row"},g.exports.createElement("ul",null,o(c.id?c.name:r))),g.exports.createElement("div",{className:"card-container"},g.exports.createElement("div",{className:"cards",id:"cards-all"},g.exports.createElement(v7,{tag:c,feed:r})))))},v7=e=>{const t=g.exports.useContext(Tr),[n,r]=g.exports.useState([]),[a,c]=g.exports.useState(0);function h(w){console.log("fetching "+w);let A="";if(e.tag.id)A=`&tag=${e.tag.id}`;else if(e.feed){let O=bT.filter(B=>B.id===e.feed)[0];if(O)A=O.filters;else if(e.feed==="my"&&t.user.organizations){if(t.user.organizations.length==0){r([]),c(-1);return}A="&organization="+t.user.organizations.join("&organization=")}}const P=`${ur.OBJECT}/announcement?limit=${Iw}&offset=${Math.max(a,0)}${A}`;t.getAPI(P,!!t.user.id).then(O=>{r(B=>w?B.concat(O.data.results):O.data.results),O.count-a>Iw?c(B=>B+Iw):c(-1)}).catch(O=>{t.refreshAuth()})}const o=g.exports.useRef();function m(){if(o.current){const{scrollTop:w,scrollHeight:A,clientHeight:P}=o.current;w+P===A&&(console.log("REACHED BOTTOM"),a!=-1&&h(!0))}}return g.exports.useEffect(()=>{h(!1)},[e.tag,e.feed]),g.exports.createElement("div",{id:"annlist",onScroll:()=>m()},n.length==0?g.exports.createElement("div",null,"There are no announcements to be shown at this time"):n.map(w=>{let A=[];for(let P=0;P<w.tags.length;P++)for(let O=0;O<t.allTags.length;O++)w.tags[P]==t.allTags[O].id&&A.push(t.allTags[O]);return g.exports.createElement(_7,{key:w.id,announcement:w,tags:A})}))},_7=e=>{const t=oi(),n=e.announcement,r=g.exports.useContext(Tr);let a=r.allOrgs.find(h=>h.id===n.organization),c=r.allUsers.find(h=>h.id===n.author);return a&&c?g.exports.createElement("div",{className:"card"},g.exports.createElement("div",{className:"card-headers"},g.exports.createElement("div",{className:"tag-section"},e.tags.map(h=>g.exports.createElement("a",{className:"tag-link",key:h.id,href:`/announcements?tag=${h.name}`,onClick:o=>{o.preventDefault(),t(`/announcements?tag=${h.name}`)}},g.exports.createElement(Gg,{tag:h})))),g.exports.createElement("h1",{className:"title"},n.title),g.exports.createElement("div",{className:"card-authors"},g.exports.createElement("div",{className:"card-authors-image"},g.exports.createElement(vn,{to:`/club/${a.slug}`},g.exports.createElement("img",{className:"circle",src:c.gravatar_url}))),g.exports.createElement("div",{className:"card-authors-text"},g.exports.createElement(vn,{to:`/club/${a.slug}`,className:"link"},a.name),",",g.exports.createElement(vn,{to:`/user/${c.username}`,className:"link"},`${c.first_name} ${c.last_name}`),g.exports.createElement("br",null),"\u2022 ",new Date(n.created_date).toLocaleTimeString(void 0,L0)))),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"card-body"},n.body),g.exports.createElement("br",null),g.exports.createElement(vn,{className:"link",to:`/announcement/${n.id}`},"See announcement ",g.exports.createElement("i",{className:"zmdi zmdi-chevron-right"}))):g.exports.createElement(g.exports.Fragment,null)},GI=()=>g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("div",{className:"content",id:"content-history"},g.exports.createElement("h1",{className:"title"},"Welcome to the Lyon's Den"),g.exports.createElement("hr",null),g.exports.createElement("h2",{className:"subtitle"},"Home and Pride of the Mackenzie Lyons circa 1960"),g.exports.createElement("p",{className:"text"},"William Lyon Mackenzie C. I. is a Toronto District Secondary School opened in 1960 and located in North York. Mackenzie was named after the historical prowess William Lyon Mackenzie, the political agitator who led the government revolt in Toronto in 1837. In its years of establishing a home of blue and gold, William Lyon Mackenzie Collegiate not only built an incredible student body of 1500 strong, but also a strong, tight knit community that prides itself on multicultural diversity, inclusion, creativity and academic innovation. And, here is where the heart and soul of the Lyon Pride resound."),g.exports.createElement("p",{className:"text"},"William Lyon Mackenzie Collegiate boasts scholastic excellence in its academic programing: the MaCS enrichment program, the Gifted Program, the ELL program, the Advanced Placement Program, and the FIT program. Collectively, these programs have helped nurture student voice and advocacy and inspire a variety of extracurricular opportunities from clubs and councils to intramurals and athletics, to school-wide events and initiatives, all of which beautifully reflect the spirit of membership - the roar of the Lyon Pride."))),x7=()=>g.exports.createElement("div",{className:"content",id:"content-about"},g.exports.createElement("h1",{className:"title"},"Our Vision"),g.exports.createElement("hr",null),g.exports.createElement("p",{className:"text"},"By definition, a metropolis is a significant cultural center of a country or region and a central hub for regional connections and communications. Likewise, it is our goal at Project Metropolis to create a centralized website at WLMAC where all students can easily access and share information with their peers, making this our own, online metropolis."),g.exports.createElement("h1",{className:"title"},"About the Site"),g.exports.createElement("hr",null),g.exports.createElement("p",{className:"text"},"The Mackenzie Lyon's Den (Project Metropolis) is a student-driven website that showcases the best of Mackenzie's pride; a central microcosm and communication hub, rich in representing the diverse facets of student life. Welcome to the Lyon's Den, the first stop to find out more about Mackenzie, its school-wide activities, events, initiatives, clubs and councils, Student Council offerings, creative student voice and essential resources to enrich Mackenzie student life!"),g.exports.createElement("p",{className:"text"},"Our site will continue to roll out new features and updates in the coming months. Users can look forward to a notification system, searching system, and a mobile app."));let Pp={METROPOLIS_STAFFS:{"Project Manager":[9],"Frontend Developers":[],"Backend Developers":[],"App Developers":[],"Graphic Designers":[],"Content Creators":[],"Game Developers":[],Alumnui:[]},METROPOLIS_STAFF_BIO:{1:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",2:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",9:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}};const b7=e=>{let t=e.allUsers.find(n=>n.id===e.memberID);return console.log("All users:",e.allUsers),console.log(Pp.METROPOLIS_STAFF_BIO),t?g.exports.createElement(vn,{to:`/user/${t.username}`},g.exports.createElement("div",{className:"member"},g.exports.createElement("div",{className:"member-name"},g.exports.createElement("div",{className:"member-image"},g.exports.createElement("img",{className:"circle",src:t.gravatar_url})),g.exports.createElement("div",{className:"member-text"},`${t.first_name} ${t.last_name}`)),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"member-bio"},Pp.METROPOLIS_STAFF_BIO[e.memberID]))):g.exports.createElement(g.exports.Fragment,null)},w7=e=>{let t=Pp.METROPOLIS_STAFFS[e.name];return g.exports.createElement("div",{className:"member-list"},g.exports.createElement("h2",{className:"subtitle"},e.name),t.map(n=>g.exports.createElement(b7,{memberID:n,key:n,allUsers:e.allUsers})))},E7=()=>{const e=g.exports.useContext(Tr),[t,n]=g.exports.useState([]);g.exports.useEffect(()=>{e.getAPI(`${ur.USER}?limit=99999`).then(c=>{n(c.data.results)}).catch(()=>{})},[]);const r=()=>{let c=0;for(const h in Pp.METROPOLIS_STAFFS)c+=Pp.METROPOLIS_STAFFS[h].length;return c};let a=[];for(const c in Pp.METROPOLIS_STAFFS)a.push(g.exports.createElement(w7,{name:c,allUsers:t}));return g.exports.createElement("div",{className:"content",id:"content-team"},g.exports.createElement("h1",{className:"title"},"Our Team"),g.exports.createElement("hr",null),g.exports.createElement("p",{className:"text"},"A diverse group of ",r()," developers, artists, and creators worked in tandem to build this site."),g.exports.createElement("h1",{className:"title"},"Members"),g.exports.createElement("hr",null),a)},C7=()=>g.exports.createElement("div",{className:"content",id:"content-school"},g.exports.createElement("h1",{className:"title"},"Contact the School"),g.exports.createElement("hr",null),g.exports.createElement("p",{className:"text"},"Project Metropolis is a site affiliated with William Lyon Mackenzie Collegiate Institute. To contact the school, please refer to the channels of communication listed below."),g.exports.createElement("ul",{className:"link-section"},g.exports.createElement("div",null,g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"https://wlmac.ca/",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-link zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"WLMCI Offical Website"))),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"https://goo.gl/maps/WyfTKUqKrbecU4RE9",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-map zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"20 Tillplain Road, North York, ON M3H 5R2"))),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"tel:4163953330"},g.exports.createElement("i",{className:"zmdi zmdi-phone zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"(416) 395-3330"))))),g.exports.createElement("h2",{className:"subtitle"},"Admin"),g.exports.createElement("hr",null),g.exports.createElement("ul",{className:"link-section"},g.exports.createElement("div",null,g.exports.createElement("h3",{className:"section-title"},"Principal"),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"mailto:keith.johnson@tdsb.on.ca",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"Keith Johnson (keith.johnson@tdsb.on.ca)"))),g.exports.createElement("h3",{className:"section-title"},"Vice Principals"),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"mailto:joanne.d'addio@tdsb.on.ca",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"Joanne D'Addio (joanne.d'addio@tdsb.on.ca)"))),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"mailto:stephen.morris@tdsb.on.ca",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"Stephen Morris (stephen.morris@tdsb.on.ca)")))))),S7=()=>g.exports.createElement("div",{className:"content",id:"content-contact"},g.exports.createElement("h1",{className:"title"},"Contact Us"),g.exports.createElement("hr",null),g.exports.createElement("p",{className:"text"},"If you ever find bugs or problems with the site, or need to be granted the staff status, feel free to ",g.exports.createElement(vn,{className:"link",to:"mailto:hello@maclyonsden.com",target:"_blank"},"email")," us or use the form below."),g.exports.createElement("ul",{className:"link-section"},g.exports.createElement("div",null,g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"mailto:hello@maclyonsden.com",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-email zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"hello@maclyonsden.com"))),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"https://github.com/wlmac",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-github zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"wlmac"))),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"https://www.instagram.com/wlmac.sac/",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-instagram zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"@wlmac.sac"))),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"https://www.facebook.com/groups/keeptrackofmac",target:"_blank"},g.exports.createElement("i",{className:"zmdi zmdi-facebook-box zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("p",null,"Keep Track of MAC"))))),g.exports.createElement("br",null),g.exports.createElement("div",{className:"content-embed"},g.exports.createElement("iframe",{src:"https://docs.google.com/forms/d/e/1FAIpQLSerD9wL2Sg8AIEVxc7ZPPIYcNPnCBnUuXTxOajhkvv8TMxwAw/viewform?embedded=true",style:{borderWidth:0,margin:0}},"Loading..."))),TC=[{id:"history",text:"WLMCI",path:"/about?tab=history",component:GI},{id:"about",text:"ABOUT",path:"/about?tab=about",component:x7},{id:"team",text:"TEAM",path:"/about?tab=team",component:E7},{id:"map",text:"MAP",path:"/map",component:GI},{id:"school",text:"CONTACT WLMCI",path:"/about?tab=school",component:C7},{id:"contact",text:"CONTACT US",path:"/about?tab=contact",component:S7}],qI=()=>{const t=R0().get("tab"),n=oi();g.exports.useEffect(()=>{document.title="About | Metropolis"},[]);const r=a=>TC.map(c=>{const h=a===c.id?"header active":"header";return g.exports.createElement("li",{key:c.id,className:h,onClick:()=>n(c.path)},c.text)});return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"static/css/about.css"}),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"headers"},g.exports.createElement("ul",null,r(t))),g.exports.createElement("div",{className:"content-container"},g.exports.createElement(T7,{page:t}))))},T7=e=>{for(let t of TC)if(t.id===e.page)return g.exports.createElement(t.component);return g.exports.createElement(TC[0].component)},k7=()=>(g.exports.useEffect(()=>{document.title="Clubs | Metropolis"},[]),oi(),g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/club-list.css"}),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"card-container"},g.exports.createElement("div",{className:"legend"},g.exports.createElement("div",{className:"legend-items"},g.exports.createElement("div",{className:"green-square"}),g.exports.createElement("span",null,"Open Membership")),g.exports.createElement("div",{className:"legend-items"},g.exports.createElement("div",{className:"yellow-square"}," "),g.exports.createElement("span",null,"Accepting Applications")),g.exports.createElement("div",{className:"legend-items"},g.exports.createElement("div",{className:"red-square"}," "),g.exports.createElement("span",null,"Closed Applications"))),g.exports.createElement("div",{className:"cards"},A7()))))),A7=()=>{const e=g.exports.useContext(Tr),[t,n]=g.exports.useState([]),[r,a]=g.exports.useState([]);return g.exports.useEffect(()=>{const c=`${ur.OBJECT}/organization`;e.getAPI(c,!1).then(h=>{n(h.data.results)}).catch(h=>{e.refreshAuth()}),e.getAPI(`${ur.OBJECT}/tag`,!1).then(h=>{const o=h.data.results;a(o)}).catch(()=>{e.refreshAuth()})},[]),t.map(c=>{let h=[];for(let o=0;o<c.tags.length;o++)for(let m=0;m<r.length;m++)c.tags[o]==r[m].id&&h.push(r[m]);return g.exports.createElement(M7,{club:c,tags:h,key:c.id})})},M7=e=>{const t=e.club,[n,r]=g.exports.useState([]),a=g.exports.useContext(Tr),c=()=>t.is_open?"green":t.applications_open?"yellow":"red";return g.exports.useEffect(()=>{a.getAPI(`${ur.OBJECT}/tag`,!1).then(h=>{const o=h.data.results;r(o.map(m=>g.exports.createElement(Gg,{tag:m})))}).catch(()=>{a.refreshAuth()})},[]),g.exports.createElement("div",{className:`card ${c()}-status`},g.exports.createElement("div",{className:"valign-wrapper"},g.exports.createElement("div",{className:"club-logo"},g.exports.createElement("img",{className:"circle",src:t.icon})),g.exports.createElement("h1",{className:"title link"},g.exports.createElement(vn,{to:`/club/${t.slug}`},t.name))),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"club-description"},g.exports.createElement("p",null,t.bio)),g.exports.createElement("div",{className:"tag-section"},e.tags.map(h=>g.exports.createElement(Gg,{key:h.id,tag:h}))))};(typeof globalThis!="undefined"?globalThis:window).FullCalendarVDom={Component:g.exports.Component,createElement:g.exports.createElement,render:Xu.exports.render,createRef:g.exports.createRef,Fragment:g.exports.Fragment,createContext:g.exports.createContext,createPortal:Xu.exports.createPortal,flushSync:I7,unmountComponentAtNode:Xu.exports.unmountComponentAtNode};function I7(e){e()}var kC=function(e,t){return kC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},kC(e,t)};function P7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var AC=function(){return AC=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},AC.apply(this,arguments)};var MC=function(e,t){return MC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},MC(e,t)};function jr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");MC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var xt=function(){return xt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},xt.apply(this,arguments)};function Ui(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,c;r<a;r++)(c||!(r in t))&&(c||(c=Array.prototype.slice.call(t,0,r)),c[r]=t[r]);return e.concat(c||Array.prototype.slice.call(t))}if(typeof FullCalendarVDom=="undefined")throw new Error("Please import the top-level fullcalendar lib before attempting to import a plugin.");var wT=FullCalendarVDom.Component,kt=FullCalendarVDom.createElement;FullCalendarVDom.render;var os=FullCalendarVDom.createRef,ca=FullCalendarVDom.Fragment,V3=FullCalendarVDom.createContext,D7=FullCalendarVDom.createPortal;FullCalendarVDom.flushSync;FullCalendarVDom.unmountComponentAtNode;/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/var sp=function(){function e(t,n){this.context=t,this.internalEventSource=n}return e.prototype.remove=function(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})},e.prototype.refetch=function(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})},Object.defineProperty(e.prototype,"id",{get:function(){return this.internalEventSource.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this.internalEventSource.meta.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this.internalEventSource.meta.format},enumerable:!1,configurable:!0}),e}();function ET(e){e.parentNode&&e.parentNode.removeChild(e)}function jo(e,t){if(e.closest)return e.closest(t);if(!document.documentElement.contains(e))return null;do{if(R7(e,t))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}function R7(e,t){var n=e.matches||e.matchesSelector||e.msMatchesSelector;return n.call(e,t)}function L7(e,t){for(var n=e instanceof HTMLElement?[e]:e,r=[],a=0;a<n.length;a+=1)for(var c=n[a].querySelectorAll(t),h=0;h<c.length;h+=1)r.push(c[h]);return r}var O7=/(top|left|right|bottom|width|height)$/i;function fg(e,t){for(var n in t)z7(e,n,t[n])}function z7(e,t,n){n==null?e.style[t]="":typeof n=="number"&&O7.test(t)?e.style[t]=n+"px":e.style[t]=n}function H3(e){var t,n;return(n=(t=e.composedPath)===null||t===void 0?void 0:t.call(e)[0])!==null&&n!==void 0?n:e.target}function W3(e){return e.getRootNode?e.getRootNode():document}var ZI=0;function O0(){return ZI+=1,"fc-dom-"+ZI}function z0(e){e.preventDefault()}function B7(e,t){return function(n){var r=jo(n.target,e);r&&t.call(r,n,r)}}function G3(e,t,n,r){var a=B7(n,r);return e.addEventListener(t,a),function(){e.removeEventListener(t,a)}}function F7(e,t,n,r){var a;return G3(e,"mouseover",t,function(c,h){if(h!==a){a=h,n(c,h);var o=function(m){a=null,r(m,h),h.removeEventListener("mouseleave",o)};h.addEventListener("mouseleave",o)}})}var XI=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function N7(e,t){var n=function(r){t(r),XI.forEach(function(a){e.removeEventListener(a,n)})};XI.forEach(function(r){e.addEventListener(r,n)})}function q3(e){return xt({onClick:e},Z3(e))}function Z3(e){return{tabIndex:0,onKeyDown:function(t){(t.key==="Enter"||t.key===" ")&&(e(t),t.preventDefault())}}}var KI=0;function af(){return KI+=1,String(KI)}function CT(){document.body.classList.add("fc-not-allowed")}function ST(){document.body.classList.remove("fc-not-allowed")}function $7(e){e.classList.add("fc-unselectable"),e.addEventListener("selectstart",z0)}function U7(e){e.classList.remove("fc-unselectable"),e.removeEventListener("selectstart",z0)}function j7(e){e.addEventListener("contextmenu",z0)}function V7(e){e.removeEventListener("contextmenu",z0)}function H7(e){var t=[],n=[],r,a;for(typeof e=="string"?n=e.split(/\s*,\s*/):typeof e=="function"?n=[e]:Array.isArray(e)&&(n=e),r=0;r<n.length;r+=1)a=n[r],typeof a=="string"?t.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&t.push({func:a});return t}function W7(e,t,n){var r,a;for(r=0;r<n.length;r+=1)if(a=G7(e,t,n[r]),a)return a;return 0}function G7(e,t,n){return n.func?n.func(e,t):q7(e[n.field],t[n.field])*(n.order||1)}function q7(e,t){return!e&&!t?0:t==null?-1:e==null?1:typeof e=="string"||typeof t=="string"?String(e).localeCompare(String(t)):e-t}function Pw(e,t){var n=String(e);return"000".substr(0,t-n.length)+n}function mg(e,t,n){return typeof e=="function"?e.apply(void 0,t):typeof e=="string"?t.reduce(function(r,a,c){return r.replace("$"+c,a||"")},e):n}function Z7(e,t){return e-t}function Dw(e){return e%1===0}function X7(e){var t=e.querySelector(".fc-scrollgrid-shrink-frame"),n=e.querySelector(".fc-scrollgrid-shrink-cushion");if(!t)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return e.getBoundingClientRect().width-t.getBoundingClientRect().width+n.getBoundingClientRect().width}var K7=["sun","mon","tue","wed","thu","fri","sat"];function YI(e,t){var n=qu(e);return n[2]+=t*7,ha(n)}function Jo(e,t){var n=qu(e);return n[2]+=t,ha(n)}function Fd(e,t){var n=qu(e);return n[6]+=t,ha(n)}function Y7(e,t){return sf(e,t)/7}function sf(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60*24)}function J7(e,t){return(t.valueOf()-e.valueOf())/(1e3*60*60)}function Q7(e,t){return(t.valueOf()-e.valueOf())/(1e3*60)}function e8(e,t){return(t.valueOf()-e.valueOf())/1e3}function t8(e,t){var n=_i(e),r=_i(t);return{years:0,months:0,days:Math.round(sf(n,r)),milliseconds:t.valueOf()-r.valueOf()-(e.valueOf()-n.valueOf())}}function n8(e,t){var n=$x(e,t);return n!==null&&n%7===0?n/7:null}function $x(e,t){return Zu(e)===Zu(t)?Math.round(sf(e,t)):null}function _i(e){return ha([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()])}function r8(e){return ha([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours()])}function i8(e){return ha([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes()])}function o8(e){return ha([e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()])}function a8(e,t,n){var r=e.getUTCFullYear(),a=Rw(e,r,t,n);if(a<1)return Rw(e,r-1,t,n);var c=Rw(e,r+1,t,n);return c>=1?Math.min(a,c):a}function Rw(e,t,n,r){var a=ha([t,0,1+s8(t,n,r)]),c=_i(e),h=Math.round(sf(a,c));return Math.floor(h/7)+1}function s8(e,t,n){var r=7+t-n,a=(7+ha([e,0,r]).getUTCDay()-t)%7;return-a+r-1}function JI(e){return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]}function QI(e){return new Date(e[0],e[1]||0,e[2]==null?1:e[2],e[3]||0,e[4]||0,e[5]||0)}function qu(e){return[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()]}function ha(e){return e.length===1&&(e=e.concat([0])),new Date(Date.UTC.apply(Date,e))}function X3(e){return!isNaN(e.valueOf())}function Zu(e){return e.getUTCHours()*1e3*60*60+e.getUTCMinutes()*1e3*60+e.getUTCSeconds()*1e3+e.getUTCMilliseconds()}function TT(e,t,n,r){return{instanceId:af(),defId:e,range:t,forcedStartTzo:n==null?null:n,forcedEndTzo:r==null?null:r}}var Ux=Object.prototype.hasOwnProperty;function kT(e,t){var n={};if(t)for(var r in t){for(var a=[],c=e.length-1;c>=0;c-=1){var h=e[c][r];if(typeof h=="object"&&h)a.unshift(h);else if(h!==void 0){n[r]=h;break}}a.length&&(n[r]=kT(a))}for(var c=e.length-1;c>=0;c-=1){var o=e[c];for(var m in o)m in n||(n[m]=o[m])}return n}function Nd(e,t){var n={};for(var r in e)t(e[r],r)&&(n[r]=e[r]);return n}function Zd(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}function K3(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a]=!0}return t}function AT(e){var t=[];for(var n in e)t.push(e[n]);return t}function Zl(e,t){if(e===t)return!0;for(var n in e)if(Ux.call(e,n)&&!(n in t))return!1;for(var n in t)if(Ux.call(t,n)&&e[n]!==t[n])return!1;return!0}function eP(e,t){var n=[];for(var r in e)Ux.call(e,r)&&(r in t||n.push(r));for(var r in t)Ux.call(t,r)&&e[r]!==t[r]&&n.push(r);return n}function Lw(e,t,n){if(n===void 0&&(n={}),e===t)return!0;for(var r in t)if(!(r in e&&l8(e[r],t[r],n[r])))return!1;for(var r in e)if(!(r in t))return!1;return!0}function l8(e,t,n){return e===t||n===!0?!0:n?n(e,t):!1}function u8(e,t,n,r){t===void 0&&(t=0),r===void 0&&(r=1);var a=[];n==null&&(n=Object.keys(e).length);for(var c=t;c<n;c+=r){var h=e[c];h!==void 0&&a.push(h)}return a}function c8(e,t,n,r){for(var a=0;a<r.length;a+=1){var c=r[a].parse(e,n);if(c){var h=e.allDay;return h==null&&(h=t,h==null&&(h=c.allDayGuess,h==null&&(h=!1))),{allDay:h,duration:c.duration,typeData:c.typeData,typeId:a}}}return null}function qp(e,t,n){var r=n.dateEnv,a=n.pluginHooks,c=n.options,h=e.defs,o=e.instances;o=Nd(o,function(V){return!h[V.defId].recurringDef});for(var m in h){var w=h[m];if(w.recurringDef){var A=w.recurringDef.duration;A||(A=w.allDay?c.defaultAllDayEventDuration:c.defaultTimedEventDuration);for(var P=d8(w,A,t,r,a.recurringTypes),O=0,B=P;O<B.length;O++){var N=B[O],k=TT(m,{start:N,end:r.add(N,A)});o[k.instanceId]=k}}}return{defs:h,instances:o}}function d8(e,t,n,r,a){var c=a[e.recurringDef.typeId],h=c.expand(e.recurringDef.typeData,{start:r.subtract(n.start,t),end:n.end},r);return e.allDay&&(h=h.map(_i)),h}var h8=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Ur(e,t){var n;return typeof e=="string"?p8(e):typeof e=="object"&&e?tP(e):typeof e=="number"?tP((n={},n[t||"milliseconds"]=e,n)):null}function p8(e){var t=h8.exec(e);if(t){var n=t[1]?-1:1;return{years:0,months:0,days:n*(t[2]?parseInt(t[2],10):0),milliseconds:n*((t[3]?parseInt(t[3],10):0)*60*60*1e3+(t[4]?parseInt(t[4],10):0)*60*1e3+(t[5]?parseInt(t[5],10):0)*1e3+(t[6]?parseInt(t[6],10):0))}}return null}function tP(e){var t={years:e.years||e.year||0,months:e.months||e.month||0,days:e.days||e.day||0,milliseconds:(e.hours||e.hour||0)*60*60*1e3+(e.minutes||e.minute||0)*60*1e3+(e.seconds||e.second||0)*1e3+(e.milliseconds||e.millisecond||e.ms||0)},n=e.weeks||e.week;return n&&(t.days+=n*7,t.specifiedWeeks=!0),t}function f8(e,t){return e.years===t.years&&e.months===t.months&&e.days===t.days&&e.milliseconds===t.milliseconds}function m8(e,t){return{years:e.years-t.years,months:e.months-t.months,days:e.days-t.days,milliseconds:e.milliseconds-t.milliseconds}}function g8(e){return Dp(e)/365}function y8(e){return Dp(e)/30}function Dp(e){return qg(e)/864e5}function qg(e){return e.years*(365*864e5)+e.months*(30*864e5)+e.days*864e5+e.milliseconds}function IC(e){var t=e.milliseconds;if(t){if(t%1e3!==0)return{unit:"millisecond",value:t};if(t%(1e3*60)!==0)return{unit:"second",value:t/1e3};if(t%(1e3*60*60)!==0)return{unit:"minute",value:t/(1e3*60)};if(t)return{unit:"hour",value:t/(1e3*60*60)}}return e.days?e.specifiedWeeks&&e.days%7===0?{unit:"week",value:e.days/7}:{unit:"day",value:e.days}:e.months?{unit:"month",value:e.months}:e.years?{unit:"year",value:e.years}:{unit:"millisecond",value:0}}function v8(e,t,n){n===void 0&&(n=!1);var r=e.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(t==null?r=r.replace("Z",""):t!==0&&(r=r.replace("Z",MT(t,!0)))),r}function Y3(e){return e.toISOString().replace(/T.*$/,"")}function MT(e,t){t===void 0&&(t=!1);var n=e<0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),c=Math.round(r%60);return t?n+Pw(a,2)+":"+Pw(c,2):"GMT"+n+a+(c?":"+Pw(c,2):"")}function Zg(e,t,n){if(e===t)return!0;var r=e.length,a;if(r!==t.length)return!1;for(a=0;a<r;a+=1)if(!(n?n(e[a],t[a]):e[a]===t[a]))return!1;return!0}function Dr(e,t,n){var r,a;return function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];if(!r)a=e.apply(this,c);else if(!Zg(r,c)){n&&n(a);var o=e.apply(this,c);(!t||!t(o,a))&&(a=o)}return r=c,a}}function tx(e,t,n){var r=this,a,c;return function(h){if(!a)c=e.call(r,h);else if(!Zl(a,h)){n&&n(c);var o=e.call(r,h);(!t||!t(o,c))&&(c=o)}return a=h,c}}var nP={week:3,separator:0,omitZeroMinute:0,meridiem:0,omitCommas:0},jx={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},T_=/\s*([ap])\.?m\.?/i,_8=/,/g,x8=/\s+/g,b8=/\u200e/g,w8=/UTC|GMT/,E8=function(){function e(t){var n={},r={},a=0;for(var c in t)c in nP?(r[c]=t[c],a=Math.max(nP[c],a)):(n[c]=t[c],c in jx&&(a=Math.max(jx[c],a)));this.standardDateProps=n,this.extendedSettings=r,this.severity=a,this.buildFormattingFunc=Dr(rP)}return e.prototype.format=function(t,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(t)},e.prototype.formatRange=function(t,n,r,a){var c=this,h=c.standardDateProps,o=c.extendedSettings,m=M8(t.marker,n.marker,r.calendarSystem);if(!m)return this.format(t,r);var w=m;w>1&&(h.year==="numeric"||h.year==="2-digit")&&(h.month==="numeric"||h.month==="2-digit")&&(h.day==="numeric"||h.day==="2-digit")&&(w=1);var A=this.format(t,r),P=this.format(n,r);if(A===P)return A;var O=I8(h,w),B=rP(O,o,r),N=B(t),k=B(n),V=P8(A,N,P,k),U=o.separator||a||r.defaultSeparator||"";return V?V.before+N+U+k+V.after:A+U+P},e.prototype.getLargestUnit=function(){switch(this.severity){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}},e}();function rP(e,t,n){var r=Object.keys(e).length;return r===1&&e.timeZoneName==="short"?function(a){return MT(a.timeZoneOffset)}:r===0&&t.week?function(a){return A8(n.computeWeekNumber(a.marker),n.weekText,n.weekTextLong,n.locale,t.week)}:C8(e,t,n)}function C8(e,t,n){e=xt({},e),t=xt({},t),S8(e,t),e.timeZone="UTC";var r=new Intl.DateTimeFormat(n.locale.codes,e),a;if(t.omitZeroMinute){var c=xt({},e);delete c.minute,a=new Intl.DateTimeFormat(n.locale.codes,c)}return function(h){var o=h.marker,m;a&&!o.getUTCMinutes()?m=a:m=r;var w=m.format(o);return T8(w,h,e,t,n)}}function S8(e,t){e.timeZoneName&&(e.hour||(e.hour="2-digit"),e.minute||(e.minute="2-digit")),e.timeZoneName==="long"&&(e.timeZoneName="short"),t.omitZeroMinute&&(e.second||e.millisecond)&&delete t.omitZeroMinute}function T8(e,t,n,r,a){return e=e.replace(b8,""),n.timeZoneName==="short"&&(e=k8(e,a.timeZone==="UTC"||t.timeZoneOffset==null?"UTC":MT(t.timeZoneOffset))),r.omitCommas&&(e=e.replace(_8,"").trim()),r.omitZeroMinute&&(e=e.replace(":00","")),r.meridiem===!1?e=e.replace(T_,"").trim():r.meridiem==="narrow"?e=e.replace(T_,function(c,h){return h.toLocaleLowerCase()}):r.meridiem==="short"?e=e.replace(T_,function(c,h){return h.toLocaleLowerCase()+"m"}):r.meridiem==="lowercase"&&(e=e.replace(T_,function(c){return c.toLocaleLowerCase()})),e=e.replace(x8," "),e=e.trim(),e}function k8(e,t){var n=!1;return e=e.replace(w8,function(){return n=!0,t}),n||(e+=" "+t),e}function A8(e,t,n,r,a){var c=[];return a==="long"?c.push(n):(a==="short"||a==="narrow")&&c.push(t),(a==="long"||a==="short")&&c.push(" "),c.push(r.simpleNumberFormat.format(e)),r.options.direction==="rtl"&&c.reverse(),c.join("")}function M8(e,t,n){return n.getMarkerYear(e)!==n.getMarkerYear(t)?5:n.getMarkerMonth(e)!==n.getMarkerMonth(t)?4:n.getMarkerDay(e)!==n.getMarkerDay(t)?2:Zu(e)!==Zu(t)?1:0}function I8(e,t){var n={};for(var r in e)(!(r in jx)||jx[r]<=t)&&(n[r]=e[r]);return n}function P8(e,t,n,r){for(var a=0;a<e.length;){var c=e.indexOf(t,a);if(c===-1)break;var h=e.substr(0,c);a=c+t.length;for(var o=e.substr(a),m=0;m<n.length;){var w=n.indexOf(r,m);if(w===-1)break;var A=n.substr(0,w);m=w+r.length;var P=n.substr(m);if(h===A&&o===P)return{before:h,after:o}}}return null}function iP(e,t){var n=t.markerToArray(e.marker);return{marker:e.marker,timeZoneOffset:e.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Vx(e,t,n,r){var a=iP(e,n.calendarSystem),c=t?iP(t,n.calendarSystem):null;return{date:a,start:a,end:c,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}var D8=function(){function e(t){this.cmdStr=t}return e.prototype.format=function(t,n,r){return n.cmdFormatter(this.cmdStr,Vx(t,null,n,r))},e.prototype.formatRange=function(t,n,r,a){return r.cmdFormatter(this.cmdStr,Vx(t,n,r,a))},e}(),R8=function(){function e(t){this.func=t}return e.prototype.format=function(t,n,r){return this.func(Vx(t,null,n,r))},e.prototype.formatRange=function(t,n,r,a){return this.func(Vx(t,n,r,a))},e}();function Co(e){return typeof e=="object"&&e?new E8(e):typeof e=="string"?new D8(e):typeof e=="function"?new R8(e):null}var oP={navLinkDayClick:Tt,navLinkWeekClick:Tt,duration:Ur,bootstrapFontAwesome:Tt,buttonIcons:Tt,customButtons:Tt,defaultAllDayEventDuration:Ur,defaultTimedEventDuration:Ur,nextDayThreshold:Ur,scrollTime:Ur,scrollTimeReset:Boolean,slotMinTime:Ur,slotMaxTime:Ur,dayPopoverFormat:Co,slotDuration:Ur,snapDuration:Ur,headerToolbar:Tt,footerToolbar:Tt,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Co,dayHeaderClassNames:Tt,dayHeaderContent:Tt,dayHeaderDidMount:Tt,dayHeaderWillUnmount:Tt,dayCellClassNames:Tt,dayCellContent:Tt,dayCellDidMount:Tt,dayCellWillUnmount:Tt,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Tt,weekNumbers:Boolean,weekNumberClassNames:Tt,weekNumberContent:Tt,weekNumberDidMount:Tt,weekNumberWillUnmount:Tt,editable:Boolean,viewClassNames:Tt,viewDidMount:Tt,viewWillUnmount:Tt,nowIndicator:Boolean,nowIndicatorClassNames:Tt,nowIndicatorContent:Tt,nowIndicatorDidMount:Tt,nowIndicatorWillUnmount:Tt,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Tt,locale:Tt,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Tt,eventOrder:H7,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Tt,contentHeight:Tt,direction:String,weekNumberFormat:Co,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Tt,initialDate:Tt,now:Tt,eventDataTransform:Tt,stickyHeaderDates:Tt,stickyFooterScrollbar:Tt,viewHeight:Tt,defaultAllDay:Boolean,eventSourceFailure:Tt,eventSourceSuccess:Tt,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Tt,eventConstraint:Tt,eventAllow:Tt,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Tt,eventContent:Tt,eventDidMount:Tt,eventWillUnmount:Tt,selectConstraint:Tt,selectOverlap:Tt,selectAllow:Tt,droppable:Boolean,unselectCancel:String,slotLabelFormat:Tt,slotLaneClassNames:Tt,slotLaneContent:Tt,slotLaneDidMount:Tt,slotLaneWillUnmount:Tt,slotLabelClassNames:Tt,slotLabelContent:Tt,slotLabelDidMount:Tt,slotLabelWillUnmount:Tt,dayMaxEvents:Tt,dayMaxEventRows:Tt,dayMinWidth:Number,slotLabelInterval:Ur,allDayText:String,allDayClassNames:Tt,allDayContent:Tt,allDayDidMount:Tt,allDayWillUnmount:Tt,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Co,rerenderDelay:Number,moreLinkText:Tt,moreLinkHint:Tt,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Tt,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Ur,hiddenDays:Tt,monthMode:Boolean,fixedWeekCount:Boolean,validRange:Tt,visibleRange:Tt,titleFormat:Tt,eventInteractive:Boolean,noEventsText:String,viewHint:Tt,navLinkHint:Tt,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Tt,moreLinkClassNames:Tt,moreLinkContent:Tt,moreLinkDidMount:Tt,moreLinkWillUnmount:Tt},gg={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" \u2013 ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30},aP={datesSet:Tt,eventsSet:Tt,eventAdd:Tt,eventChange:Tt,eventRemove:Tt,windowResize:Tt,eventClick:Tt,eventMouseEnter:Tt,eventMouseLeave:Tt,select:Tt,unselect:Tt,loading:Tt,_unmount:Tt,_beforeprint:Tt,_afterprint:Tt,_noEventDrop:Tt,_noEventResize:Tt,_resize:Tt,_scrollRequest:Tt},sP={buttonText:Tt,buttonHints:Tt,views:Tt,plugins:Tt,initialEvents:Tt,events:Tt,eventSources:Tt},pd={headerToolbar:Qh,footerToolbar:Qh,buttonText:Qh,buttonHints:Qh,buttonIcons:Qh,dateIncrement:Qh};function Qh(e,t){return typeof e=="object"&&typeof t=="object"&&e&&t?Zl(e,t):e===t}var L8={type:String,component:Tt,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Tt,usesMinMaxTime:Boolean,classNames:Tt,content:Tt,didMount:Tt,willUnmount:Tt};function Ow(e){return kT(e,pd)}function IT(e,t){var n={},r={};for(var a in t)a in e&&(n[a]=t[a](e[a]));for(var a in e)a in t||(r[a]=e[a]);return{refined:n,extra:r}}function Tt(e){return e}function Hx(e,t,n,r){for(var a=Ls(),c=RT(n),h=0,o=e;h<o.length;h++){var m=o[h],w=Q3(m,t,n,r,c);w&&PC(w,a)}return a}function PC(e,t){return t===void 0&&(t=Ls()),t.defs[e.def.defId]=e.def,e.instance&&(t.instances[e.instance.instanceId]=e.instance),t}function PT(e,t){var n=e.instances[t];if(n){var r=e.defs[n.defId],a=B0(e,function(c){return O8(r,c)});return a.defs[r.defId]=r,a.instances[n.instanceId]=n,a}return Ls()}function O8(e,t){return Boolean(e.groupId&&e.groupId===t.groupId)}function Ls(){return{defs:{},instances:{}}}function DT(e,t){return{defs:xt(xt({},e.defs),t.defs),instances:xt(xt({},e.instances),t.instances)}}function B0(e,t){var n=Nd(e.defs,t),r=Nd(e.instances,function(a){return n[a.defId]});return{defs:n,instances:r}}function z8(e,t){var n=e.defs,r=e.instances,a={},c={};for(var h in n)t.defs[h]||(a[h]=n[h]);for(var o in r)!t.instances[o]&&a[r[o].defId]&&(c[o]=r[o]);return{defs:a,instances:c}}function B8(e,t){return Array.isArray(e)?Hx(e,null,t,!0):typeof e=="object"&&e?Hx([e],null,t,!0):e!=null?String(e):null}function DC(e){return Array.isArray(e)?e:typeof e=="string"?e.split(/\s+/):[]}var Wx={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Tt,overlap:Tt,allow:Tt,className:DC,classNames:DC,color:String,backgroundColor:String,borderColor:String,textColor:String},F8={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Gx(e,t){var n=B8(e.constraint,t);return{display:e.display||null,startEditable:e.startEditable!=null?e.startEditable:e.editable,durationEditable:e.durationEditable!=null?e.durationEditable:e.editable,constraints:n!=null?[n]:[],overlap:e.overlap!=null?e.overlap:null,allows:e.allow!=null?[e.allow]:[],backgroundColor:e.backgroundColor||e.color||"",borderColor:e.borderColor||e.color||"",textColor:e.textColor||"",classNames:(e.className||[]).concat(e.classNames||[])}}function N8(e){return e.reduce($8,F8)}function $8(e,t){return{display:t.display!=null?t.display:e.display,startEditable:t.startEditable!=null?t.startEditable:e.startEditable,durationEditable:t.durationEditable!=null?t.durationEditable:e.durationEditable,constraints:e.constraints.concat(t.constraints),overlap:typeof t.overlap=="boolean"?t.overlap:e.overlap,allows:e.allows.concat(t.allows),backgroundColor:t.backgroundColor||e.backgroundColor,borderColor:t.borderColor||e.borderColor,textColor:t.textColor||e.textColor,classNames:e.classNames.concat(t.classNames)}}var nx={id:String,groupId:String,title:String,url:String,interactive:Boolean},J3={start:Tt,end:Tt,date:Tt,allDay:Boolean},U8=xt(xt(xt({},nx),J3),{extendedProps:Tt});function Q3(e,t,n,r,a){a===void 0&&(a=RT(n));var c=ez(e,n,a),h=c.refined,o=c.extra,m=V8(t,n),w=c8(h,m,n.dateEnv,n.pluginHooks.recurringTypes);if(w){var A=RC(h,o,t?t.sourceId:"",w.allDay,Boolean(w.duration),n);return A.recurringDef={typeId:w.typeId,typeData:w.typeData,duration:w.duration},{def:A,instance:null}}var P=j8(h,m,n,r);if(P){var A=RC(h,o,t?t.sourceId:"",P.allDay,P.hasEnd,n),O=TT(A.defId,P.range,P.forcedStartTzo,P.forcedEndTzo);return{def:A,instance:O}}return null}function ez(e,t,n){return n===void 0&&(n=RT(t)),IT(e,n)}function RT(e){return xt(xt(xt({},Wx),U8),e.pluginHooks.eventRefiners)}function RC(e,t,n,r,a,c){for(var h={title:e.title||"",groupId:e.groupId||"",publicId:e.id||"",url:e.url||"",recurringDef:null,defId:af(),sourceId:n,allDay:r,hasEnd:a,interactive:e.interactive,ui:Gx(e,c),extendedProps:xt(xt({},e.extendedProps||{}),t)},o=0,m=c.pluginHooks.eventDefMemberAdders;o<m.length;o++){var w=m[o];xt(h,w(e))}return Object.freeze(h.ui.classNames),Object.freeze(h.extendedProps),h}function j8(e,t,n,r){var a=e.allDay,c,h=null,o=!1,m,w=null,A=e.start!=null?e.start:e.date;if(c=n.dateEnv.createMarkerMeta(A),c)h=c.marker;else if(!r)return null;return e.end!=null&&(m=n.dateEnv.createMarkerMeta(e.end)),a==null&&(t!=null?a=t:a=(!c||c.isTimeUnspecified)&&(!m||m.isTimeUnspecified)),a&&h&&(h=_i(h)),m&&(w=m.marker,a&&(w=_i(w)),h&&w<=h&&(w=null)),w?o=!0:r||(o=n.options.forceEventDuration||!1,w=n.dateEnv.add(h,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:a,hasEnd:o,range:{start:h,end:w},forcedStartTzo:c?c.forcedTzo:null,forcedEndTzo:m?m.forcedTzo:null}}function V8(e,t){var n=null;return e&&(n=e.defaultAllDay),n==null&&(n=t.options.defaultAllDay),n}function tz(e){var t=Math.floor(sf(e.start,e.end))||1,n=_i(e.start),r=Jo(n,t);return{start:n,end:r}}function nz(e,t){t===void 0&&(t=Ur(0));var n=null,r=null;if(e.end){r=_i(e.end);var a=e.end.valueOf()-r.valueOf();a&&a>=qg(t)&&(r=Jo(r,1))}return e.start&&(n=_i(e.start),r&&r<=n&&(r=Jo(n,1))),{start:n,end:r}}function bp(e,t,n,r){return r==="year"?Ur(n.diffWholeYears(e,t),"year"):r==="month"?Ur(n.diffWholeMonths(e,t),"month"):t8(e,t)}function H8(e,t){var n=null,r=null;return e.start&&(n=t.createMarker(e.start)),e.end&&(r=t.createMarker(e.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function lP(e,t){var n=[],r=t.start,a,c;for(e.sort(W8),a=0;a<e.length;a+=1)c=e[a],c.start>r&&n.push({start:r,end:c.start}),c.end>r&&(r=c.end);return r<t.end&&n.push({start:r,end:t.end}),n}function W8(e,t){return e.start.valueOf()-t.start.valueOf()}function Xg(e,t){var n=e.start,r=e.end,a=null;return t.start!==null&&(n===null?n=t.start:n=new Date(Math.max(n.valueOf(),t.start.valueOf()))),t.end!=null&&(r===null?r=t.end:r=new Date(Math.min(r.valueOf(),t.end.valueOf()))),(n===null||r===null||n<r)&&(a={start:n,end:r}),a}function G8(e,t){return(e.start===null?null:e.start.valueOf())===(t.start===null?null:t.start.valueOf())&&(e.end===null?null:e.end.valueOf())===(t.end===null?null:t.end.valueOf())}function LT(e,t){return(e.end===null||t.start===null||e.end>t.start)&&(e.start===null||t.end===null||e.start<t.end)}function F0(e,t){return(e.start===null||t.start!==null&&t.start>=e.start)&&(e.end===null||t.end!==null&&t.end<=e.end)}function Ad(e,t){return(e.start===null||t>=e.start)&&(e.end===null||t<e.end)}function q8(e,t){return t.start!=null&&e<t.start?t.start:t.end!=null&&e>=t.end?new Date(t.end.valueOf()-1):e}function uP(e,t,n,r){var a={},c={},h={},o=[],m=[],w=qx(e.defs,t);for(var A in e.defs){var P=e.defs[A],O=w[P.defId];O.display==="inverse-background"&&(P.groupId?(a[P.groupId]=[],h[P.groupId]||(h[P.groupId]=P)):c[A]=[])}for(var B in e.instances){var N=e.instances[B],P=e.defs[N.defId],O=w[P.defId],k=N.range,V=!P.allDay&&r?nz(k,r):k,U=Xg(V,n);U&&(O.display==="inverse-background"?P.groupId?a[P.groupId].push(U):c[N.defId].push(U):O.display!=="none"&&(O.display==="background"?o:m).push({def:P,ui:O,instance:N,range:U,isStart:V.start&&V.start.valueOf()===U.start.valueOf(),isEnd:V.end&&V.end.valueOf()===U.end.valueOf()}))}for(var W in a)for(var F=a[W],z=lP(F,n),S=0,b=z;S<b.length;S++){var D=b[S],P=h[W],O=w[P.defId];o.push({def:P,ui:O,instance:null,range:D,isStart:!1,isEnd:!1})}for(var A in c)for(var F=c[A],z=lP(F,n),Y=0,re=z;Y<re.length;Y++){var D=re[Y];o.push({def:e.defs[A],ui:w[A],instance:null,range:D,isStart:!1,isEnd:!1})}return{bg:o,fg:m}}function cP(e,t){e.fcSeg=t}function Zp(e){return e.fcSeg||e.parentNode.fcSeg||null}function qx(e,t){return Zd(e,function(n){return rz(n,t)})}function rz(e,t){var n=[];return t[""]&&n.push(t[""]),t[e.defId]&&n.push(t[e.defId]),n.push(e.ui),N8(n)}function Z8(e,t){var n=e.map(X8);return n.sort(function(r,a){return W7(r,a,t)}),n.map(function(r){return r._seg})}function X8(e){var t=e.eventRange,n=t.def,r=t.instance?t.instance.range:t.range,a=r.start?r.start.valueOf():0,c=r.end?r.end.valueOf():0;return xt(xt(xt({},n.extendedProps),n),{id:n.publicId,start:a,end:c,duration:c-a,allDay:Number(n.allDay),_seg:e})}function K8(e,t){for(var n=t.pluginHooks,r=n.isDraggableTransformers,a=e.eventRange,c=a.def,h=a.ui,o=h.startEditable,m=0,w=r;m<w.length;m++){var A=w[m];o=A(o,c,h,t)}return o}function Y8(e,t){return e.isStart&&e.eventRange.ui.durationEditable&&t.options.eventResizableFromStart}function J8(e,t){return e.isEnd&&e.eventRange.ui.durationEditable}function iz(e,t,n,r,a,c,h){var o=n.dateEnv,m=n.options,w=m.displayEventTime,A=m.displayEventEnd,P=e.eventRange.def,O=e.eventRange.instance;w==null&&(w=r!==!1),A==null&&(A=a!==!1);var B=O.range.start,N=O.range.end,k=c||e.start||e.eventRange.range.start,V=h||e.end||e.eventRange.range.end,U=_i(B).valueOf()===_i(k).valueOf(),W=_i(Fd(N,-1)).valueOf()===_i(Fd(V,-1)).valueOf();return w&&!P.allDay&&(U||W)?(k=U?B:k,V=W?N:V,A&&P.hasEnd?o.formatRange(k,V,t,{forcedStartTzo:c?null:O.forcedStartTzo,forcedEndTzo:h?null:O.forcedEndTzo}):o.format(k,t,{forcedTzo:c?null:O.forcedStartTzo})):""}function yg(e,t,n){var r=e.eventRange.range;return{isPast:r.end<(n||t.start),isFuture:r.start>=(n||t.end),isToday:t&&Ad(t,r.start)}}function Q8(e){var t=["fc-event"];return e.isMirror&&t.push("fc-event-mirror"),e.isDraggable&&t.push("fc-event-draggable"),(e.isStartResizable||e.isEndResizable)&&t.push("fc-event-resizable"),e.isDragging&&t.push("fc-event-dragging"),e.isResizing&&t.push("fc-event-resizing"),e.isSelected&&t.push("fc-event-selected"),e.isStart&&t.push("fc-event-start"),e.isEnd&&t.push("fc-event-end"),e.isPast&&t.push("fc-event-past"),e.isToday&&t.push("fc-event-today"),e.isFuture&&t.push("fc-event-future"),t}function eV(e){return e.instance?e.instance.instanceId:e.def.defId+":"+e.range.start.toISOString()}function oz(e,t){var n=e.eventRange,r=n.def,a=n.instance,c=r.url;if(c)return{href:c};var h=t.emitter,o=t.options,m=o.eventInteractive;return m==null&&(m=r.interactive,m==null&&(m=Boolean(h.hasHandlers("eventClick")))),m?Z3(function(w){h.trigger("eventClick",{el:w.target,event:new Bi(t,r,a),jsEvent:w,view:t.viewApi})}):{}}var tV={start:Tt,end:Tt,allDay:Boolean};function nV(e,t,n){var r=rV(e,t),a=r.range;if(!a.start)return null;if(!a.end){if(n==null)return null;a.end=t.add(a.start,n)}return r}function rV(e,t){var n=IT(e,tV),r=n.refined,a=n.extra,c=r.start?t.createMarkerMeta(r.start):null,h=r.end?t.createMarkerMeta(r.end):null,o=r.allDay;return o==null&&(o=c&&c.isTimeUnspecified&&(!h||h.isTimeUnspecified)),xt({range:{start:c?c.marker:null,end:h?h.marker:null},allDay:o},a)}function iV(e,t){return G8(e.range,t.range)&&e.allDay===t.allDay&&oV(e,t)}function oV(e,t){for(var n in t)if(n!=="range"&&n!=="allDay"&&e[n]!==t[n])return!1;for(var n in e)if(!(n in t))return!1;return!0}function aV(e,t){return xt(xt({},sz(e.range,t,e.allDay)),{allDay:e.allDay})}function az(e,t,n){return xt(xt({},sz(e,t,n)),{timeZone:t.timeZone})}function sz(e,t,n){return{start:t.toDate(e.start),end:t.toDate(e.end),startStr:t.formatIso(e.start,{omitTime:n}),endStr:t.formatIso(e.end,{omitTime:n})}}function sV(e,t,n){var r=ez({editable:!1},n),a=RC(r.refined,r.extra,"",e.allDay,!0,n);return{def:a,ui:rz(a,t),instance:TT(a.defId,e.range),range:e.range,isStart:!0,isEnd:!0}}function lz(e,t,n){n.emitter.trigger("select",xt(xt({},OT(e,n)),{jsEvent:t?t.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function lV(e,t){t.emitter.trigger("unselect",{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view})}function OT(e,t){for(var n={},r=0,a=t.pluginHooks.dateSpanTransforms;r<a.length;r++){var c=a[r];xt(n,c(e,t))}return xt(n,aV(e,t.dateEnv)),n}function dP(e,t,n){var r=n.dateEnv,a=n.options,c=t;return e?(c=_i(c),c=r.add(c,a.defaultAllDayEventDuration)):c=r.add(c,a.defaultTimedEventDuration),c}function zT(e,t,n,r){var a=qx(e.defs,t),c=Ls();for(var h in e.defs){var o=e.defs[h];c.defs[h]=uV(o,a[h],n,r)}for(var m in e.instances){var w=e.instances[m],o=c.defs[w.defId];c.instances[m]=cV(w,o,a[w.defId],n,r)}return c}function uV(e,t,n,r){var a=n.standardProps||{};a.hasEnd==null&&t.durationEditable&&(n.startDelta||n.endDelta)&&(a.hasEnd=!0);var c=xt(xt(xt({},e),a),{ui:xt(xt({},e.ui),a.ui)});n.extendedProps&&(c.extendedProps=xt(xt({},c.extendedProps),n.extendedProps));for(var h=0,o=r.pluginHooks.eventDefMutationAppliers;h<o.length;h++){var m=o[h];m(c,n,r)}return!c.hasEnd&&r.options.forceEventDuration&&(c.hasEnd=!0),c}function cV(e,t,n,r,a){var c=a.dateEnv,h=r.standardProps&&r.standardProps.allDay===!0,o=r.standardProps&&r.standardProps.hasEnd===!1,m=xt({},e);return h&&(m.range=tz(m.range)),r.datesDelta&&n.startEditable&&(m.range={start:c.add(m.range.start,r.datesDelta),end:c.add(m.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(m.range={start:c.add(m.range.start,r.startDelta),end:m.range.end}),r.endDelta&&n.durationEditable&&(m.range={start:m.range.start,end:c.add(m.range.end,r.endDelta)}),o&&(m.range={start:m.range.start,end:dP(t.allDay,m.range.start,a)}),t.allDay&&(m.range={start:_i(m.range.start),end:_i(m.range.end)}),m.range.end<m.range.start&&(m.range.end=dP(t.allDay,m.range.start,a)),m}var dV=function(){function e(t,n,r){this.type=t,this.getCurrentData=n,this.dateEnv=r}return Object.defineProperty(e.prototype,"calendar",{get:function(){return this.getCurrentData().calendarApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this.getCurrentData().viewTitle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentStart",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentEnd",{get:function(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)},enumerable:!1,configurable:!0}),e.prototype.getOption=function(t){return this.getCurrentData().options[t]},e}(),hV={id:String,defaultAllDay:Boolean,url:String,format:String,events:Tt,eventDataTransform:Tt,success:Tt,failure:Tt};function uz(e,t,n){n===void 0&&(n=cz(t));var r;if(typeof e=="string"?r={url:e}:typeof e=="function"||Array.isArray(e)?r={events:e}:typeof e=="object"&&e&&(r=e),r){var a=IT(r,n),c=a.refined,h=a.extra,o=pV(c,t);if(o)return{_raw:e,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:c.defaultAllDay,eventDataTransform:c.eventDataTransform,success:c.success,failure:c.failure,publicId:c.id||"",sourceId:af(),sourceDefId:o.sourceDefId,meta:o.meta,ui:Gx(c,t),extendedProps:h}}return null}function cz(e){return xt(xt(xt({},Wx),hV),e.pluginHooks.eventSourceRefiners)}function pV(e,t){for(var n=t.pluginHooks.eventSourceDefs,r=n.length-1;r>=0;r-=1){var a=n[r],c=a.parseMeta(e);if(c)return{sourceDefId:r,meta:c}}return null}function fV(e,t){switch(t.type){case"CHANGE_DATE":return t.dateMarker;default:return e}}function mV(e,t){var n=e.initialDate;return n!=null?t.createMarker(n):py(e.now,t)}function py(e,t){return typeof e=="function"&&(e=e()),e==null?t.createNowMarker():t.createMarker(e)}var gV=function(){function e(){}return e.prototype.getCurrentData=function(){return this.currentDataManager.getCurrentData()},e.prototype.dispatch=function(t){return this.currentDataManager.dispatch(t)},Object.defineProperty(e.prototype,"view",{get:function(){return this.getCurrentData().viewApi},enumerable:!1,configurable:!0}),e.prototype.batchRendering=function(t){t()},e.prototype.updateSize=function(){this.trigger("_resize",!0)},e.prototype.setOption=function(t,n){this.dispatch({type:"SET_OPTION",optionName:t,rawOptionValue:n})},e.prototype.getOption=function(t){return this.currentDataManager.currentCalendarOptionsInput[t]},e.prototype.getAvailableLocaleCodes=function(){return Object.keys(this.getCurrentData().availableRawLocales)},e.prototype.on=function(t,n){var r=this.currentDataManager;r.currentCalendarOptionsRefiners[t]?r.emitter.on(t,n):console.warn("Unknown listener name '"+t+"'")},e.prototype.off=function(t,n){this.currentDataManager.emitter.off(t,n)},e.prototype.trigger=function(t){for(var n,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];(n=this.currentDataManager.emitter).trigger.apply(n,Ui([t],r))},e.prototype.changeView=function(t,n){var r=this;this.batchRendering(function(){if(r.unselect(),n)if(n.start&&n.end)r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t}),r.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{var a=r.getCurrentData().dateEnv;r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t,dateMarker:a.createMarker(n)})}else r.dispatch({type:"CHANGE_VIEW_TYPE",viewType:t})})},e.prototype.zoomTo=function(t,n){var r=this.getCurrentData(),a;n=n||"day",a=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:t}):this.dispatch({type:"CHANGE_DATE",dateMarker:t})},e.prototype.getUnitViewSpec=function(t){var n=this.getCurrentData(),r=n.viewSpecs,a=n.toolbarConfig,c=[].concat(a.header?a.header.viewsWithButtons:[],a.footer?a.footer.viewsWithButtons:[]),h,o;for(var m in r)c.push(m);for(h=0;h<c.length;h+=1)if(o=r[c[h]],o&&o.singleUnit===t)return o;return null},e.prototype.prev=function(){this.unselect(),this.dispatch({type:"PREV"})},e.prototype.next=function(){this.unselect(),this.dispatch({type:"NEXT"})},e.prototype.prevYear=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,-1)})},e.prototype.nextYear=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.addYears(t.currentDate,1)})},e.prototype.today=function(){var t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:py(t.calendarOptions.now,t.dateEnv)})},e.prototype.gotoDate=function(t){var n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(t)})},e.prototype.incrementDate=function(t){var n=this.getCurrentData(),r=Ur(t);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))},e.prototype.getDate=function(){var t=this.getCurrentData();return t.dateEnv.toDate(t.currentDate)},e.prototype.formatDate=function(t,n){var r=this.getCurrentData().dateEnv;return r.format(r.createMarker(t),Co(n))},e.prototype.formatRange=function(t,n,r){var a=this.getCurrentData().dateEnv;return a.formatRange(a.createMarker(t),a.createMarker(n),Co(r),r)},e.prototype.formatIso=function(t,n){var r=this.getCurrentData().dateEnv;return r.formatIso(r.createMarker(t),{omitTime:n})},e.prototype.select=function(t,n){var r;n==null?t.start!=null?r=t:r={start:t,end:null}:r={start:t,end:n};var a=this.getCurrentData(),c=nV(r,a.dateEnv,Ur({days:1}));c&&(this.dispatch({type:"SELECT_DATES",selection:c}),lz(c,null,a))},e.prototype.unselect=function(t){var n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),lV(t,n))},e.prototype.addEvent=function(t,n){if(t instanceof Bi){var r=t._def,a=t._instance,c=this.getCurrentData();return c.eventStore.defs[r.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:PC({def:r,instance:a})}),this.triggerEventAdd(t)),t}var h=this.getCurrentData(),o;if(n instanceof sp)o=n.internalEventSource;else if(typeof n=="boolean")n&&(o=AT(h.eventSources)[0]);else if(n!=null){var m=this.getEventSourceById(n);if(!m)return console.warn('Could not find an event source with ID "'+n+'"'),null;o=m.internalEventSource}var w=Q3(t,o,h,!1);if(w){var A=new Bi(h,w.def,w.def.recurringDef?null:w.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:PC(w)}),this.triggerEventAdd(A),A}return null},e.prototype.triggerEventAdd=function(t){var n=this,r=this.getCurrentData().emitter;r.trigger("eventAdd",{event:t,relatedEvents:[],revert:function(){n.dispatch({type:"REMOVE_EVENTS",eventStore:dz(t)})}})},e.prototype.getEventById=function(t){var n=this.getCurrentData(),r=n.eventStore,a=r.defs,c=r.instances;t=String(t);for(var h in a){var o=a[h];if(o.publicId===t){if(o.recurringDef)return new Bi(n,o,null);for(var m in c){var w=c[m];if(w.defId===o.defId)return new Bi(n,o,w)}}}return null},e.prototype.getEvents=function(){var t=this.getCurrentData();return Md(t.eventStore,t)},e.prototype.removeAllEvents=function(){this.dispatch({type:"REMOVE_ALL_EVENTS"})},e.prototype.getEventSources=function(){var t=this.getCurrentData(),n=t.eventSources,r=[];for(var a in n)r.push(new sp(t,n[a]));return r},e.prototype.getEventSourceById=function(t){var n=this.getCurrentData(),r=n.eventSources;t=String(t);for(var a in r)if(r[a].publicId===t)return new sp(n,r[a]);return null},e.prototype.addEventSource=function(t){var n=this.getCurrentData();if(t instanceof sp)return n.eventSources[t.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[t.internalEventSource]}),t;var r=uz(t,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new sp(n,r)):null},e.prototype.removeAllEventSources=function(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})},e.prototype.refetchEvents=function(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})},e.prototype.scrollToTime=function(t){var n=Ur(t);n&&this.trigger("_scrollRequest",{time:n})},e}(),Bi=function(){function e(t,n,r){this._context=t,this._def=n,this._instance=r||null}return e.prototype.setProp=function(t,n){var r,a;if(t in J3)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(t==="id")n=nx[t](n),this.mutate({standardProps:{publicId:n}});else if(t in nx)n=nx[t](n),this.mutate({standardProps:(r={},r[t]=n,r)});else if(t in Wx){var c=Wx[t](n);t==="color"?c={backgroundColor:n,borderColor:n}:t==="editable"?c={startEditable:n,durationEditable:n}:c=(a={},a[t]=n,a),this.mutate({standardProps:{ui:c}})}else console.warn("Could not set prop '"+t+"'. Use setExtendedProp instead.")},e.prototype.setExtendedProp=function(t,n){var r;this.mutate({extendedProps:(r={},r[t]=n,r)})},e.prototype.setStart=function(t,n){n===void 0&&(n={});var r=this._context.dateEnv,a=r.createMarker(t);if(a&&this._instance){var c=this._instance.range,h=bp(c.start,a,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:h}):this.mutate({startDelta:h})}},e.prototype.setEnd=function(t,n){n===void 0&&(n={});var r=this._context.dateEnv,a;if(!(t!=null&&(a=r.createMarker(t),!a))&&this._instance)if(a){var c=bp(this._instance.range.end,a,r,n.granularity);this.mutate({endDelta:c})}else this.mutate({standardProps:{hasEnd:!1}})},e.prototype.setDates=function(t,n,r){r===void 0&&(r={});var a=this._context.dateEnv,c={allDay:r.allDay},h=a.createMarker(t),o;if(!!h&&!(n!=null&&(o=a.createMarker(n),!o))&&this._instance){var m=this._instance.range;r.allDay===!0&&(m=tz(m));var w=bp(m.start,h,a,r.granularity);if(o){var A=bp(m.end,o,a,r.granularity);f8(w,A)?this.mutate({datesDelta:w,standardProps:c}):this.mutate({startDelta:w,endDelta:A,standardProps:c})}else c.hasEnd=!1,this.mutate({datesDelta:w,standardProps:c})}},e.prototype.moveStart=function(t){var n=Ur(t);n&&this.mutate({startDelta:n})},e.prototype.moveEnd=function(t){var n=Ur(t);n&&this.mutate({endDelta:n})},e.prototype.moveDates=function(t){var n=Ur(t);n&&this.mutate({datesDelta:n})},e.prototype.setAllDay=function(t,n){n===void 0&&(n={});var r={allDay:t},a=n.maintainDuration;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==t&&(r.hasEnd=a),this.mutate({standardProps:r})},e.prototype.formatRange=function(t){var n=this._context.dateEnv,r=this._instance,a=Co(t);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,a,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,a,{forcedTzo:r.forcedStartTzo})},e.prototype.mutate=function(t){var n=this._instance;if(n){var r=this._def,a=this._context,c=a.getCurrentData().eventStore,h=PT(c,n.instanceId),o={"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}};h=zT(h,o,t,a);var m=new e(a,r,n);this._def=h.defs[r.defId],this._instance=h.instances[n.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:h}),a.emitter.trigger("eventChange",{oldEvent:m,event:this,relatedEvents:Md(h,a,n),revert:function(){a.dispatch({type:"RESET_EVENTS",eventStore:c})}})}},e.prototype.remove=function(){var t=this._context,n=dz(this);t.dispatch({type:"REMOVE_EVENTS",eventStore:n}),t.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert:function(){t.dispatch({type:"MERGE_EVENTS",eventStore:n})}})},Object.defineProperty(e.prototype,"source",{get:function(){var t=this._def.sourceId;return t?new sp(this._context,this._context.getCurrentData().eventSources[t]):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"start",{get:function(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startStr",{get:function(){var t=this._instance;return t?this._context.dateEnv.formatIso(t.range.start,{omitTime:this._def.allDay,forcedTzo:t.forcedStartTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endStr",{get:function(){var t=this._instance;return t&&this._def.hasEnd?this._context.dateEnv.formatIso(t.range.end,{omitTime:this._def.allDay,forcedTzo:t.forcedEndTzo}):""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._def.publicId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return this._def.groupId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allDay",{get:function(){return this._def.allDay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._def.title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._def.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this._def.ui.display||"auto"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startEditable",{get:function(){return this._def.ui.startEditable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durationEditable",{get:function(){return this._def.ui.durationEditable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"constraint",{get:function(){return this._def.ui.constraints[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overlap",{get:function(){return this._def.ui.overlap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allow",{get:function(){return this._def.ui.allows[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._def.ui.backgroundColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"borderColor",{get:function(){return this._def.ui.borderColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this._def.ui.textColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classNames",{get:function(){return this._def.ui.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extendedProps",{get:function(){return this._def.extendedProps},enumerable:!1,configurable:!0}),e.prototype.toPlainObject=function(t){t===void 0&&(t={});var n=this._def,r=n.ui,a=this,c=a.startStr,h=a.endStr,o={};return n.title&&(o.title=n.title),c&&(o.start=c),h&&(o.end=h),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),r.display&&r.display!=="auto"&&(o.display=r.display),t.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?o.color=r.backgroundColor:(r.backgroundColor&&(o.backgroundColor=r.backgroundColor),r.borderColor&&(o.borderColor=r.borderColor)),r.textColor&&(o.textColor=r.textColor),r.classNames.length&&(o.classNames=r.classNames),Object.keys(n.extendedProps).length&&(t.collapseExtendedProps?xt(o,n.extendedProps):o.extendedProps=n.extendedProps),o},e.prototype.toJSON=function(){return this.toPlainObject()},e}();function dz(e){var t,n,r=e._def,a=e._instance;return{defs:(t={},t[r.defId]=r,t),instances:a?(n={},n[a.instanceId]=a,n):{}}}function Md(e,t,n){var r=e.defs,a=e.instances,c=[],h=n?n.instanceId:"";for(var o in a){var m=a[o],w=r[m.defId];m.instanceId!==h&&c.push(new Bi(t,w,m))}return c}var hz={};function yV(e,t){hz[e]=t}function vV(e){return new hz[e]}var _V=function(){function e(){}return e.prototype.getMarkerYear=function(t){return t.getUTCFullYear()},e.prototype.getMarkerMonth=function(t){return t.getUTCMonth()},e.prototype.getMarkerDay=function(t){return t.getUTCDate()},e.prototype.arrayToMarker=function(t){return ha(t)},e.prototype.markerToArray=function(t){return qu(t)},e}();yV("gregory",_V);var xV=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function bV(e){var t=xV.exec(e);if(t){var n=new Date(Date.UTC(Number(t[1]),t[3]?Number(t[3])-1:0,Number(t[5]||1),Number(t[7]||0),Number(t[8]||0),Number(t[10]||0),t[12]?Number("0."+t[12])*1e3:0));if(X3(n)){var r=null;return t[13]&&(r=(t[15]==="-"?-1:1)*(Number(t[16]||0)*60+Number(t[18]||0))),{marker:n,isTimeUnspecified:!t[6],timeZoneOffset:r}}}return null}var wV=function(){function e(t){var n=this.timeZone=t.timeZone,r=n!=="local"&&n!=="UTC";t.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new t.namedTimeZoneImpl(n)),this.canComputeOffset=Boolean(!r||this.namedTimeZoneImpl),this.calendarSystem=vV(t.calendarSystem),this.locale=t.locale,this.weekDow=t.locale.week.dow,this.weekDoy=t.locale.week.doy,t.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof t.firstDay=="number"&&(this.weekDow=t.firstDay),typeof t.weekNumberCalculation=="function"&&(this.weekNumberFunc=t.weekNumberCalculation),this.weekText=t.weekText!=null?t.weekText:t.locale.options.weekText,this.weekTextLong=(t.weekTextLong!=null?t.weekTextLong:t.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=t.cmdFormatter,this.defaultSeparator=t.defaultSeparator}return e.prototype.createMarker=function(t){var n=this.createMarkerMeta(t);return n===null?null:n.marker},e.prototype.createNowMarker=function(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):ha(JI(new Date))},e.prototype.createMarkerMeta=function(t){if(typeof t=="string")return this.parse(t);var n=null;return typeof t=="number"?n=this.timestampToMarker(t):t instanceof Date?(t=t.valueOf(),isNaN(t)||(n=this.timestampToMarker(t))):Array.isArray(t)&&(n=ha(t)),n===null||!X3(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}},e.prototype.parse=function(t){var n=bV(t);if(n===null)return null;var r=n.marker,a=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):a=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:a}},e.prototype.getYear=function(t){return this.calendarSystem.getMarkerYear(t)},e.prototype.getMonth=function(t){return this.calendarSystem.getMarkerMonth(t)},e.prototype.add=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)},e.prototype.subtract=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)},e.prototype.addYears=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[0]+=n,this.calendarSystem.arrayToMarker(r)},e.prototype.addMonths=function(t,n){var r=this.calendarSystem.markerToArray(t);return r[1]+=n,this.calendarSystem.arrayToMarker(r)},e.prototype.diffWholeYears=function(t,n){var r=this.calendarSystem;return Zu(t)===Zu(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)&&r.getMarkerMonth(t)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(t):null},e.prototype.diffWholeMonths=function(t,n){var r=this.calendarSystem;return Zu(t)===Zu(n)&&r.getMarkerDay(t)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(t)+(r.getMarkerYear(n)-r.getMarkerYear(t))*12:null},e.prototype.greatestWholeUnit=function(t,n){var r=this.diffWholeYears(t,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(t,n),r!==null?{unit:"month",value:r}:(r=n8(t,n),r!==null?{unit:"week",value:r}:(r=$x(t,n),r!==null?{unit:"day",value:r}:(r=J7(t,n),Dw(r)?{unit:"hour",value:r}:(r=Q7(t,n),Dw(r)?{unit:"minute",value:r}:(r=e8(t,n),Dw(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-t.valueOf()}))))))},e.prototype.countDurationsBetween=function(t,n,r){var a;return r.years&&(a=this.diffWholeYears(t,n),a!==null)?a/g8(r):r.months&&(a=this.diffWholeMonths(t,n),a!==null)?a/y8(r):r.days&&(a=$x(t,n),a!==null)?a/Dp(r):(n.valueOf()-t.valueOf())/qg(r)},e.prototype.startOf=function(t,n){return n==="year"?this.startOfYear(t):n==="month"?this.startOfMonth(t):n==="week"?this.startOfWeek(t):n==="day"?_i(t):n==="hour"?r8(t):n==="minute"?i8(t):n==="second"?o8(t):null},e.prototype.startOfYear=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t)])},e.prototype.startOfMonth=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t)])},e.prototype.startOfWeek=function(t){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(t),this.calendarSystem.getMarkerMonth(t),t.getUTCDate()-(t.getUTCDay()-this.weekDow+7)%7])},e.prototype.computeWeekNumber=function(t){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(t)):a8(t,this.weekDow,this.weekDoy)},e.prototype.format=function(t,n,r){return r===void 0&&(r={}),n.format({marker:t,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(t)},this)},e.prototype.formatRange=function(t,n,r,a){return a===void 0&&(a={}),a.isEndExclusive&&(n=Fd(n,-1)),r.formatRange({marker:t,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(t)},{marker:n,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(n)},this,a.defaultSeparator)},e.prototype.formatIso=function(t,n){n===void 0&&(n={});var r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(t)),v8(t,r,n.omitTime)},e.prototype.timestampToMarker=function(t){return this.timeZone==="local"?ha(JI(new Date(t))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(t):ha(this.namedTimeZoneImpl.timestampToArray(t))},e.prototype.offsetForMarker=function(t){return this.timeZone==="local"?-QI(qu(t)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(qu(t)):null},e.prototype.toDate=function(t,n){return this.timeZone==="local"?QI(qu(t)):this.timeZone==="UTC"?new Date(t.valueOf()):this.namedTimeZoneImpl?new Date(t.valueOf()-this.namedTimeZoneImpl.offsetForArray(qu(t))*1e3*60):new Date(t.valueOf()-(n||0))},e}(),EV=[],pz={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},fz=xt(xt({},pz),{buttonHints:{prev:"Previous $0",next:"Next $0",today:function(e,t){return t==="day"?"Today":"This "+e}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint:function(e){return"Show "+e+" more event"+(e===1?"":"s")}});function CV(e){for(var t=e.length>0?e[0].code:"en",n=EV.concat(e),r={en:fz},a=0,c=n;a<c.length;a++){var h=c[a];r[h.code]=h}return{map:r,defaultCode:t}}function mz(e,t){return typeof e=="object"&&!Array.isArray(e)?gz(e.code,[e.code],e):SV(e,t)}function SV(e,t){var n=[].concat(e||[]),r=TV(n,t)||fz;return gz(e,n,r)}function TV(e,t){for(var n=0;n<e.length;n+=1)for(var r=e[n].toLocaleLowerCase().split("-"),a=r.length;a>0;a-=1){var c=r.slice(0,a).join("-");if(t[c])return t[c]}return null}function gz(e,t,n){var r=kT([pz,n],["buttonText"]);delete r.code;var a=r.week;return delete r.week,{codeArg:e,codes:t,week:a,simpleNumberFormat:new Intl.NumberFormat(e),options:r}}var kV={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function AV(e,t){return Hx(MV(e),null,t)}function MV(e){var t;return e===!0?t=[{}]:Array.isArray(e)?t=e.filter(function(n){return n.daysOfWeek}):typeof e=="object"&&e?t=[e]:t=[],t=t.map(function(n){return xt(xt({},kV),n)}),t}function IV(e,t){return e.left>=t.left&&e.left<t.right&&e.top>=t.top&&e.top<t.bottom}function yz(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function PV(e,t){return{left:Math.min(Math.max(e.left,t.left),t.right),top:Math.min(Math.max(e.top,t.top),t.bottom)}}function DV(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function RV(e,t){return{left:e.left-t.left,top:e.top-t.top}}var zw;function vz(){return zw==null&&(zw=LV()),zw}function LV(){if(typeof document=="undefined")return!0;var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.innerHTML="<table><tr><td><div></div></td></tr></table>",e.querySelector("table").style.height="100px",e.querySelector("div").style.height="100%",document.body.appendChild(e);var t=e.querySelector("div"),n=t.offsetHeight>0;return document.body.removeChild(e),n}function _z(e,t,n,r){return{dow:e.getUTCDay(),isDisabled:Boolean(r&&!Ad(r.activeRange,e)),isOther:Boolean(r&&!Ad(r.currentRange,e)),isToday:Boolean(t&&Ad(t,e)),isPast:Boolean(n?e<n:t?e<t.start:!1),isFuture:Boolean(n?e>n:t?e>=t.end:!1)}}function BT(e,t){var n=["fc-day","fc-day-"+K7[e.dow]];return e.isDisabled?n.push("fc-day-disabled"):(e.isToday&&(n.push("fc-day-today"),n.push(t.getClass("today"))),e.isPast&&n.push("fc-day-past"),e.isFuture&&n.push("fc-day-future"),e.isOther&&n.push("fc-day-other")),n}var OV=Co({year:"numeric",month:"long",day:"numeric"}),zV=Co({week:"long"});function FT(e,t,n,r){n===void 0&&(n="day"),r===void 0&&(r=!0);var a=e.dateEnv,c=e.options,h=e.calendarApi,o=a.format(t,n==="week"?zV:OV);if(c.navLinks){var m=a.toDate(t),w=function(A){var P=n==="day"?c.navLinkDayClick:n==="week"?c.navLinkWeekClick:null;typeof P=="function"?P.call(h,a.toDate(t),A):(typeof P=="string"&&(n=P),h.zoomTo(t,n))};return xt({title:mg(c.navLinkHint,[o,m],o),"data-navlink":""},r?q3(w):{onClick:w})}return{"aria-label":o}}var Bw=null;function BV(){return Bw===null&&(Bw=FV()),Bw}function FV(){var e=document.createElement("div");fg(e,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),e.innerHTML="<div></div>",document.body.appendChild(e);var t=e.firstChild,n=t.getBoundingClientRect().left>e.getBoundingClientRect().left;return ET(e),n}var Fw;function NV(){return Fw||(Fw=$V()),Fw}function $V(){var e=document.createElement("div");e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e);var t=xz(e);return document.body.removeChild(e),t}function xz(e){return{x:e.offsetHeight-e.clientHeight,y:e.offsetWidth-e.clientWidth}}function UV(e,t){t===void 0&&(t=!1);var n=window.getComputedStyle(e),r=parseInt(n.borderLeftWidth,10)||0,a=parseInt(n.borderRightWidth,10)||0,c=parseInt(n.borderTopWidth,10)||0,h=parseInt(n.borderBottomWidth,10)||0,o=xz(e),m=o.y-r-a,w=o.x-c-h,A={borderLeft:r,borderRight:a,borderTop:c,borderBottom:h,scrollbarBottom:w,scrollbarLeft:0,scrollbarRight:0};return BV()&&n.direction==="rtl"?A.scrollbarLeft=m:A.scrollbarRight=m,t&&(A.paddingLeft=parseInt(n.paddingLeft,10)||0,A.paddingRight=parseInt(n.paddingRight,10)||0,A.paddingTop=parseInt(n.paddingTop,10)||0,A.paddingBottom=parseInt(n.paddingBottom,10)||0),A}function jV(e,t,n){t===void 0&&(t=!1);var r=n?e.getBoundingClientRect():NT(e),a=UV(e,t),c={left:r.left+a.borderLeft+a.scrollbarLeft,right:r.right-a.borderRight-a.scrollbarRight,top:r.top+a.borderTop,bottom:r.bottom-a.borderBottom-a.scrollbarBottom};return t&&(c.left+=a.paddingLeft,c.right-=a.paddingRight,c.top+=a.paddingTop,c.bottom-=a.paddingBottom),c}function NT(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,right:t.right+window.pageXOffset,bottom:t.bottom+window.pageYOffset}}function VV(e){for(var t=bz(e),n=e.getBoundingClientRect(),r=0,a=t;r<a.length;r++){var c=a[r],h=yz(n,c.getBoundingClientRect());if(h)n=h;else return null}return n}function bz(e){for(var t=[];e instanceof HTMLElement;){var n=window.getComputedStyle(e);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&t.push(e),e=e.parentNode}return t}function HV(e,t,n){var r=!1,a=function(){r||(r=!0,t.apply(this,arguments))},c=function(){r||(r=!0,n&&n.apply(this,arguments))},h=e(a,c);h&&typeof h.then=="function"&&h.then(a,c)}var N0=function(){function e(){this.handlers={},this.thisContext=null}return e.prototype.setThisContext=function(t){this.thisContext=t},e.prototype.setOptions=function(t){this.options=t},e.prototype.on=function(t,n){WV(this.handlers,t,n)},e.prototype.off=function(t,n){GV(this.handlers,t,n)},e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var a=this.handlers[t]||[],c=this.options&&this.options[t],h=[].concat(c||[],a),o=0,m=h;o<m.length;o++){var w=m[o];w.apply(this.thisContext,n)}},e.prototype.hasHandlers=function(t){return Boolean(this.handlers[t]&&this.handlers[t].length||this.options&&this.options[t])},e}();function WV(e,t,n){(e[t]||(e[t]=[])).push(n)}function GV(e,t,n){n?e[t]&&(e[t]=e[t].filter(function(r){return r!==n})):delete e[t]}var LC=function(){function e(t,n,r,a){this.els=n;var c=this.originClientRect=t.getBoundingClientRect();r&&this.buildElHorizontals(c.left),a&&this.buildElVerticals(c.top)}return e.prototype.buildElHorizontals=function(t){for(var n=[],r=[],a=0,c=this.els;a<c.length;a++){var h=c[a],o=h.getBoundingClientRect();n.push(o.left-t),r.push(o.right-t)}this.lefts=n,this.rights=r},e.prototype.buildElVerticals=function(t){for(var n=[],r=[],a=0,c=this.els;a<c.length;a++){var h=c[a],o=h.getBoundingClientRect();n.push(o.top-t),r.push(o.bottom-t)}this.tops=n,this.bottoms=r},e.prototype.leftToIndex=function(t){var n=this,r=n.lefts,a=n.rights,c=r.length,h;for(h=0;h<c;h+=1)if(t>=r[h]&&t<a[h])return h},e.prototype.topToIndex=function(t){var n=this,r=n.tops,a=n.bottoms,c=r.length,h;for(h=0;h<c;h+=1)if(t>=r[h]&&t<a[h])return h},e.prototype.getWidth=function(t){return this.rights[t]-this.lefts[t]},e.prototype.getHeight=function(t){return this.bottoms[t]-this.tops[t]},e}(),$T=function(){function e(){}return e.prototype.getMaxScrollTop=function(){return this.getScrollHeight()-this.getClientHeight()},e.prototype.getMaxScrollLeft=function(){return this.getScrollWidth()-this.getClientWidth()},e.prototype.canScrollVertically=function(){return this.getMaxScrollTop()>0},e.prototype.canScrollHorizontally=function(){return this.getMaxScrollLeft()>0},e.prototype.canScrollUp=function(){return this.getScrollTop()>0},e.prototype.canScrollDown=function(){return this.getScrollTop()<this.getMaxScrollTop()},e.prototype.canScrollLeft=function(){return this.getScrollLeft()>0},e.prototype.canScrollRight=function(){return this.getScrollLeft()<this.getMaxScrollLeft()},e}(),qV=function(e){jr(t,e);function t(n){var r=e.call(this)||this;return r.el=n,r}return t.prototype.getScrollTop=function(){return this.el.scrollTop},t.prototype.getScrollLeft=function(){return this.el.scrollLeft},t.prototype.setScrollTop=function(n){this.el.scrollTop=n},t.prototype.setScrollLeft=function(n){this.el.scrollLeft=n},t.prototype.getScrollWidth=function(){return this.el.scrollWidth},t.prototype.getScrollHeight=function(){return this.el.scrollHeight},t.prototype.getClientHeight=function(){return this.el.clientHeight},t.prototype.getClientWidth=function(){return this.el.clientWidth},t}($T),ZV=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getScrollTop=function(){return window.pageYOffset},t.prototype.getScrollLeft=function(){return window.pageXOffset},t.prototype.setScrollTop=function(n){window.scroll(window.pageXOffset,n)},t.prototype.setScrollLeft=function(n){window.scroll(n,window.pageYOffset)},t.prototype.getScrollWidth=function(){return document.documentElement.scrollWidth},t.prototype.getScrollHeight=function(){return document.documentElement.scrollHeight},t.prototype.getClientHeight=function(){return document.documentElement.clientHeight},t.prototype.getClientWidth=function(){return document.documentElement.clientWidth},t}($T),fy=function(){function e(t){this.iconOverrideOption&&this.setIconOverride(t[this.iconOverrideOption])}return e.prototype.setIconOverride=function(t){var n,r;if(typeof t=="object"&&t){n=xt({},this.iconClasses);for(r in t)n[r]=this.applyIconOverridePrefix(t[r]);this.iconClasses=n}else t===!1&&(this.iconClasses={})},e.prototype.applyIconOverridePrefix=function(t){var n=this.iconOverridePrefix;return n&&t.indexOf(n)!==0&&(t=n+t),t},e.prototype.getClass=function(t){return this.classes[t]||""},e.prototype.getIconClass=function(t,n){var r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[t]||this.iconClasses[t]:r=this.iconClasses[t],r?this.baseIconClass+" "+r:""},e.prototype.getCustomButtonIconClass=function(t){var n;return this.iconOverrideCustomButtonOption&&(n=t[this.iconOverrideCustomButtonOption],n)?this.baseIconClass+" "+this.applyIconOverridePrefix(n):""},e}();fy.prototype.classes={};fy.prototype.iconClasses={};fy.prototype.baseIconClass="";fy.prototype.iconOverridePrefix="";var XV=function(){function e(t,n,r,a){var c=this;this.execFunc=t,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=a,this.handleScrollRequest=function(h){c.queuedRequest=xt({},c.queuedRequest||{},h),c.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}return e.prototype.detach=function(){this.emitter.off("_scrollRequest",this.handleScrollRequest)},e.prototype.update=function(t){t&&this.scrollTimeReset?this.fireInitialScroll():this.drain()},e.prototype.fireInitialScroll=function(){this.handleScrollRequest({time:this.scrollTime})},e.prototype.drain=function(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)},e}(),Xd=V3({});function KV(e,t,n,r,a,c,h,o,m,w,A,P,O){return{dateEnv:a,options:n,pluginHooks:h,emitter:w,dispatch:o,getCurrentData:m,calendarApi:A,viewSpec:e,viewApi:t,dateProfileGenerator:r,theme:c,isRtl:n.direction==="rtl",addResizeHandler:function(B){w.on("_resize",B)},removeResizeHandler:function(B){w.off("_resize",B)},createScrollResponder:function(B){return new XV(B,w,Ur(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:P,unregisterInteractiveComponent:O}}var $0=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.shouldComponentUpdate=function(n,r){return this.debug&&console.log(eP(n,this.props),eP(r,this.state)),!Lw(this.props,n,this.propEquality)||!Lw(this.state,r,this.stateEquality)},t.prototype.safeSetState=function(n){Lw(this.state,xt(xt({},this.state),n),this.stateEquality)||this.setState(n)},t.addPropsEquality=YV,t.addStateEquality=JV,t.contextType=Xd,t}(wT);$0.prototype.propEquality={};$0.prototype.stateEquality={};var xi=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.contextType=Xd,t}($0);function YV(e){var t=Object.create(this.prototype.propEquality);xt(t,e),this.prototype.propEquality=t}function JV(e){var t=Object.create(this.prototype.stateEquality);xt(t,e),this.prototype.stateEquality=t}function Xl(e,t){typeof e=="function"?e(t):e&&(e.current=t)}var lf=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.uid=af(),n}return t.prototype.prepareHits=function(){},t.prototype.queryHit=function(n,r,a,c){return null},t.prototype.isValidSegDownEl=function(n){return!this.props.eventDrag&&!this.props.eventResize&&!jo(n,".fc-event-mirror")},t.prototype.isValidDateDownEl=function(n){return!jo(n,".fc-event:not(.fc-bg-event)")&&!jo(n,".fc-more-link")&&!jo(n,"a[data-navlink]")&&!jo(n,".fc-popover")},t}(xi);function fc(e){return{id:af(),deps:e.deps||[],reducers:e.reducers||[],isLoadingFuncs:e.isLoadingFuncs||[],contextInit:[].concat(e.contextInit||[]),eventRefiners:e.eventRefiners||{},eventDefMemberAdders:e.eventDefMemberAdders||[],eventSourceRefiners:e.eventSourceRefiners||{},isDraggableTransformers:e.isDraggableTransformers||[],eventDragMutationMassagers:e.eventDragMutationMassagers||[],eventDefMutationAppliers:e.eventDefMutationAppliers||[],dateSelectionTransformers:e.dateSelectionTransformers||[],datePointTransforms:e.datePointTransforms||[],dateSpanTransforms:e.dateSpanTransforms||[],views:e.views||{},viewPropsTransformers:e.viewPropsTransformers||[],isPropsValid:e.isPropsValid||null,externalDefTransforms:e.externalDefTransforms||[],viewContainerAppends:e.viewContainerAppends||[],eventDropTransformers:e.eventDropTransformers||[],componentInteractions:e.componentInteractions||[],calendarInteractions:e.calendarInteractions||[],themeClasses:e.themeClasses||{},eventSourceDefs:e.eventSourceDefs||[],cmdFormatter:e.cmdFormatter,recurringTypes:e.recurringTypes||[],namedTimeZonedImpl:e.namedTimeZonedImpl,initialView:e.initialView||"",elementDraggingImpl:e.elementDraggingImpl,optionChangeHandlers:e.optionChangeHandlers||{},scrollGridImpl:e.scrollGridImpl||null,contentTypeHandlers:e.contentTypeHandlers||{},listenerRefiners:e.listenerRefiners||{},optionRefiners:e.optionRefiners||{},propSetHandlers:e.propSetHandlers||{}}}function QV(e,t){var n={},r={reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,contentTypeHandlers:{},listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(c){for(var h=0,o=c;h<o.length;h++){var m=o[h];n[m.id]||(n[m.id]=!0,a(m.deps),r=tH(r,m))}}return e&&a(e),a(t),r}function eH(){var e=[],t=[],n;return function(r,a){return(!n||!Zg(r,e)||!Zg(a,t))&&(n=QV(r,a)),e=r,t=a,n}}function tH(e,t){return{reducers:e.reducers.concat(t.reducers),isLoadingFuncs:e.isLoadingFuncs.concat(t.isLoadingFuncs),contextInit:e.contextInit.concat(t.contextInit),eventRefiners:xt(xt({},e.eventRefiners),t.eventRefiners),eventDefMemberAdders:e.eventDefMemberAdders.concat(t.eventDefMemberAdders),eventSourceRefiners:xt(xt({},e.eventSourceRefiners),t.eventSourceRefiners),isDraggableTransformers:e.isDraggableTransformers.concat(t.isDraggableTransformers),eventDragMutationMassagers:e.eventDragMutationMassagers.concat(t.eventDragMutationMassagers),eventDefMutationAppliers:e.eventDefMutationAppliers.concat(t.eventDefMutationAppliers),dateSelectionTransformers:e.dateSelectionTransformers.concat(t.dateSelectionTransformers),datePointTransforms:e.datePointTransforms.concat(t.datePointTransforms),dateSpanTransforms:e.dateSpanTransforms.concat(t.dateSpanTransforms),views:xt(xt({},e.views),t.views),viewPropsTransformers:e.viewPropsTransformers.concat(t.viewPropsTransformers),isPropsValid:t.isPropsValid||e.isPropsValid,externalDefTransforms:e.externalDefTransforms.concat(t.externalDefTransforms),viewContainerAppends:e.viewContainerAppends.concat(t.viewContainerAppends),eventDropTransformers:e.eventDropTransformers.concat(t.eventDropTransformers),calendarInteractions:e.calendarInteractions.concat(t.calendarInteractions),componentInteractions:e.componentInteractions.concat(t.componentInteractions),themeClasses:xt(xt({},e.themeClasses),t.themeClasses),eventSourceDefs:e.eventSourceDefs.concat(t.eventSourceDefs),cmdFormatter:t.cmdFormatter||e.cmdFormatter,recurringTypes:e.recurringTypes.concat(t.recurringTypes),namedTimeZonedImpl:t.namedTimeZonedImpl||e.namedTimeZonedImpl,initialView:e.initialView||t.initialView,elementDraggingImpl:e.elementDraggingImpl||t.elementDraggingImpl,optionChangeHandlers:xt(xt({},e.optionChangeHandlers),t.optionChangeHandlers),scrollGridImpl:t.scrollGridImpl||e.scrollGridImpl,contentTypeHandlers:xt(xt({},e.contentTypeHandlers),t.contentTypeHandlers),listenerRefiners:xt(xt({},e.listenerRefiners),t.listenerRefiners),optionRefiners:xt(xt({},e.optionRefiners),t.optionRefiners),propSetHandlers:xt(xt({},e.propSetHandlers),t.propSetHandlers)}}var mc=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(fy);mc.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};mc.prototype.baseIconClass="fc-icon";mc.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};mc.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};mc.prototype.iconOverrideOption="buttonIcons";mc.prototype.iconOverrideCustomButtonOption="icon";mc.prototype.iconOverridePrefix="fc-icon-";function nH(e,t){var n={},r;for(r in e)OC(r,n,e,t);for(r in t)OC(r,n,e,t);return n}function OC(e,t,n,r){if(t[e])return t[e];var a=rH(e,t,n,r);return a&&(t[e]=a),a}function rH(e,t,n,r){var a=n[e],c=r[e],h=function(A){return a&&a[A]!==null?a[A]:c&&c[A]!==null?c[A]:null},o=h("component"),m=h("superType"),w=null;if(m){if(m===e)throw new Error("Can't have a custom view type that references itself");w=OC(m,t,n,r)}return!o&&w&&(o=w.component),o?{type:e,component:o,defaults:xt(xt({},w?w.defaults:{}),a?a.rawOptions:{}),overrides:xt(xt({},w?w.overrides:{}),c?c.rawOptions:{})}:null}var uf=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.rootElRef=os(),n.handleRootEl=function(r){Xl(n.rootElRef,r),n.props.elRef&&Xl(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this,r=this.props,a=r.hookProps;return kt(UT,{hookProps:a,didMount:r.didMount,willUnmount:r.willUnmount,elRef:this.handleRootEl},function(c){return kt(wz,{hookProps:a,content:r.content,defaultContent:r.defaultContent,backupElRef:n.rootElRef},function(h,o){return r.children(c,Cz(r.classNames,a),h,o)})})},t}(xi),iH=V3(0);function wz(e){return kt(iH.Consumer,null,function(t){return kt(oH,xt({renderId:t},e))})}var oH=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.innerElRef=os(),n}return t.prototype.render=function(){return this.props.children(this.innerElRef,this.renderInnerContent())},t.prototype.componentDidMount=function(){this.updateCustomContent()},t.prototype.componentDidUpdate=function(){this.updateCustomContent()},t.prototype.componentWillUnmount=function(){this.customContentInfo&&this.customContentInfo.destroy&&this.customContentInfo.destroy()},t.prototype.renderInnerContent=function(){var n=this.customContentInfo,r=this.getInnerContent(),a=this.getContentMeta(r);return!n||n.contentKey!==a.contentKey?(n&&(n.destroy&&n.destroy(),n=this.customContentInfo=null),a.contentKey&&(n=this.customContentInfo=xt({contentKey:a.contentKey,contentVal:r[a.contentKey]},a.buildLifecycleFuncs()))):n&&(n.contentVal=r[a.contentKey]),n?[]:r},t.prototype.getInnerContent=function(){var n=this.props,r=hP(n.content,n.hookProps);return r===void 0&&(r=hP(n.defaultContent,n.hookProps)),r==null?null:r},t.prototype.getContentMeta=function(n){var r=this.context.pluginHooks.contentTypeHandlers,a="",c=null;if(n){for(var h in r)if(n[h]!==void 0){a=h,c=r[h];break}}return{contentKey:a,buildLifecycleFuncs:c}},t.prototype.updateCustomContent=function(){this.customContentInfo&&this.customContentInfo.render(this.innerElRef.current||this.props.backupElRef.current,this.customContentInfo.contentVal)},t}(xi),UT=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleRootEl=function(r){n.rootEl=r,n.props.elRef&&Xl(n.props.elRef,r)},n}return t.prototype.render=function(){return this.props.children(this.handleRootEl)},t.prototype.componentDidMount=function(){var n=this.props.didMount;n&&n(xt(xt({},this.props.hookProps),{el:this.rootEl}))},t.prototype.componentWillUnmount=function(){var n=this.props.willUnmount;n&&n(xt(xt({},this.props.hookProps),{el:this.rootEl}))},t}(xi);function Ez(){var e,t,n=[];return function(r,a){return(!t||!Zl(t,a)||r!==e)&&(e=r,t=a,n=Cz(r,a)),n}}function Cz(e,t){return typeof e=="function"&&(e=e(t)),DC(e)}function hP(e,t){return typeof e=="function"?e(t,kt):e}var zC=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.normalizeClassNames=Ez(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options,h={view:a.viewApi},o=this.normalizeClassNames(c.viewClassNames,h);return kt(UT,{hookProps:h,didMount:c.viewDidMount,willUnmount:c.viewWillUnmount,elRef:r.elRef},function(m){return r.children(m,["fc-"+r.viewSpec.type+"-view","fc-view"].concat(o))})},t}(xi);function pP(e){return Zd(e,aH)}function aH(e){var t=typeof e=="function"?{component:e}:e,n=t.component;return t.content&&(n=sH(t)),{superType:t.type,component:n,rawOptions:t}}function sH(e){return function(t){return kt(Xd.Consumer,null,function(n){return kt(zC,{viewSpec:n.viewSpec},function(r,a){var c=xt(xt({},t),{nextDayThreshold:n.options.nextDayThreshold});return kt(uf,{hookProps:c,classNames:e.classNames,content:e.content,didMount:e.didMount,willUnmount:e.willUnmount,elRef:r},function(h,o,m,w){return kt("div",{className:a.concat(o).join(" "),ref:h},w)})})})}}function lH(e,t,n,r){var a=pP(e),c=pP(t.views),h=nH(a,c);return Zd(h,function(o){return uH(o,c,t,n,r)})}function uH(e,t,n,r,a){var c=e.overrides.duration||e.defaults.duration||r.duration||n.duration,h=null,o="",m="",w={};if(c&&(h=cH(c),h)){var A=IC(h);o=A.unit,A.value===1&&(m=o,w=t[o]?t[o].rawOptions:{})}var P=function(B){var N=B.buttonText||{},k=e.defaults.buttonTextKey;return k!=null&&N[k]!=null?N[k]:N[e.type]!=null?N[e.type]:N[m]!=null?N[m]:null},O=function(B){var N=B.buttonHints||{},k=e.defaults.buttonTextKey;return k!=null&&N[k]!=null?N[k]:N[e.type]!=null?N[e.type]:N[m]!=null?N[m]:null};return{type:e.type,component:e.component,duration:h,durationUnit:o,singleUnit:m,optionDefaults:e.defaults,optionOverrides:xt(xt({},w),e.overrides),buttonTextOverride:P(r)||P(n)||e.overrides.buttonText,buttonTextDefault:P(a)||e.defaults.buttonText||P(gg)||e.type,buttonTitleOverride:O(r)||O(n)||e.overrides.buttonHint,buttonTitleDefault:O(a)||e.defaults.buttonHint||O(gg)}}var fP={};function cH(e){var t=JSON.stringify(e),n=fP[t];return n===void 0&&(n=Ur(e),fP[t]=n),n}var Sz=function(){function e(t){this.props=t,this.nowDate=py(t.nowInput,t.dateEnv),this.initHiddenDays()}return e.prototype.buildPrev=function(t,n,r){var a=this.props.dateEnv,c=a.subtract(a.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(c,-1,r)},e.prototype.buildNext=function(t,n,r){var a=this.props.dateEnv,c=a.add(a.startOf(n,t.currentRangeUnit),t.dateIncrement);return this.build(c,1,r)},e.prototype.build=function(t,n,r){r===void 0&&(r=!0);var a=this.props,c,h,o,m,w,A;return c=this.buildValidRange(),c=this.trimHiddenDays(c),r&&(t=q8(t,c)),h=this.buildCurrentRangeInfo(t,n),o=/^(year|month|week|day)$/.test(h.unit),m=this.buildRenderRange(this.trimHiddenDays(h.range),h.unit,o),m=this.trimHiddenDays(m),w=m,a.showNonCurrentDates||(w=Xg(w,h.range)),w=this.adjustActiveRange(w),w=Xg(w,c),A=LT(h.range,c),{validRange:c,currentRange:h.range,currentRangeUnit:h.unit,isRangeAllDay:o,activeRange:w,renderRange:m,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:A,dateIncrement:this.buildDateIncrement(h.duration)}},e.prototype.buildValidRange=function(){var t=this.props.validRangeInput,n=typeof t=="function"?t.call(this.props.calendarApi,this.nowDate):t;return this.refineRange(n)||{start:null,end:null}},e.prototype.buildCurrentRangeInfo=function(t,n){var r=this.props,a=null,c=null,h=null,o;return r.duration?(a=r.duration,c=r.durationUnit,h=this.buildRangeFromDuration(t,n,a,c)):(o=this.props.dayCount)?(c="day",h=this.buildRangeFromDayCount(t,n,o)):(h=this.buildCustomVisibleRange(t))?c=r.dateEnv.greatestWholeUnit(h.start,h.end).unit:(a=this.getFallbackDuration(),c=IC(a).unit,h=this.buildRangeFromDuration(t,n,a,c)),{duration:a,unit:c,range:h}},e.prototype.getFallbackDuration=function(){return Ur({day:1})},e.prototype.adjustActiveRange=function(t){var n=this.props,r=n.dateEnv,a=n.usesMinMaxTime,c=n.slotMinTime,h=n.slotMaxTime,o=t.start,m=t.end;return a&&(Dp(c)<0&&(o=_i(o),o=r.add(o,c)),Dp(h)>1&&(m=_i(m),m=Jo(m,-1),m=r.add(m,h))),{start:o,end:m}},e.prototype.buildRangeFromDuration=function(t,n,r,a){var c=this.props,h=c.dateEnv,o=c.dateAlignment,m,w,A;if(!o){var P=this.props.dateIncrement;P&&qg(P)<qg(r)?o=IC(P).unit:o=a}Dp(r)<=1&&this.isHiddenDay(m)&&(m=this.skipHiddenDays(m,n),m=_i(m));function O(){m=h.startOf(t,o),w=h.add(m,r),A={start:m,end:w}}return O(),this.trimHiddenDays(A)||(t=this.skipHiddenDays(t,n),O()),A},e.prototype.buildRangeFromDayCount=function(t,n,r){var a=this.props,c=a.dateEnv,h=a.dateAlignment,o=0,m=t,w;h&&(m=c.startOf(m,h)),m=_i(m),m=this.skipHiddenDays(m,n),w=m;do w=Jo(w,1),this.isHiddenDay(w)||(o+=1);while(o<r);return{start:m,end:w}},e.prototype.buildCustomVisibleRange=function(t){var n=this.props,r=n.visibleRangeInput,a=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(t)):r,c=this.refineRange(a);return c&&(c.start==null||c.end==null)?null:c},e.prototype.buildRenderRange=function(t,n,r){return t},e.prototype.buildDateIncrement=function(t){var n=this.props.dateIncrement,r;return n||((r=this.props.dateAlignment)?Ur(1,r):t||Ur({days:1}))},e.prototype.refineRange=function(t){if(t){var n=H8(t,this.props.dateEnv);return n&&(n=nz(n)),n}return null},e.prototype.initHiddenDays=function(){var t=this.props.hiddenDays||[],n=[],r=0,a;for(this.props.weekends===!1&&t.push(0,6),a=0;a<7;a+=1)(n[a]=t.indexOf(a)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n},e.prototype.trimHiddenDays=function(t){var n=t.start,r=t.end;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null},e.prototype.isHiddenDay=function(t){return t instanceof Date&&(t=t.getUTCDay()),this.isHiddenDayHash[t]},e.prototype.skipHiddenDays=function(t,n,r){for(n===void 0&&(n=1),r===void 0&&(r=!1);this.isHiddenDayHash[(t.getUTCDay()+(r?n:0)+7)%7];)t=Jo(t,n);return t},e}();function dH(e,t){switch(t.type){case"CHANGE_VIEW_TYPE":e=t.viewType}return e}function hH(e,t){var n;switch(t.type){case"SET_OPTION":return xt(xt({},e),(n={},n[t.optionName]=t.rawOptionValue,n));default:return e}}function pH(e,t,n,r){var a;switch(t.type){case"CHANGE_VIEW_TYPE":return r.build(t.dateMarker||n);case"CHANGE_DATE":return r.build(t.dateMarker);case"PREV":if(a=r.buildPrev(e,n),a.isValid)return a;break;case"NEXT":if(a=r.buildNext(e,n),a.isValid)return a;break}return e}function fH(e,t,n){var r=t?t.activeRange:null;return kz({},bH(e,n),r,n)}function mH(e,t,n,r){var a=n?n.activeRange:null;switch(t.type){case"ADD_EVENT_SOURCES":return kz(e,t.sources,a,r);case"REMOVE_EVENT_SOURCE":return yH(e,t.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?Az(e,a,r):e;case"FETCH_EVENT_SOURCES":return jT(e,t.sourceIds?K3(t.sourceIds):Mz(e,r),a,t.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return xH(e,t.sourceId,t.fetchId,t.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return e}}function gH(e,t,n){var r=t?t.activeRange:null;return jT(e,Mz(e,n),r,!0,n)}function Tz(e){for(var t in e)if(e[t].isFetching)return!0;return!1}function kz(e,t,n,r){for(var a={},c=0,h=t;c<h.length;c++){var o=h[c];a[o.sourceId]=o}return n&&(a=Az(a,n,r)),xt(xt({},e),a)}function yH(e,t){return Nd(e,function(n){return n.sourceId!==t})}function Az(e,t,n){return jT(e,Nd(e,function(r){return vH(r,t,n)}),t,!1,n)}function vH(e,t,n){return Iz(e,n)?!n.options.lazyFetching||!e.fetchRange||e.isFetching||t.start<e.fetchRange.start||t.end>e.fetchRange.end:!e.latestFetchId}function jT(e,t,n,r,a){var c={};for(var h in e){var o=e[h];t[h]?c[h]=_H(o,n,r,a):c[h]=o}return c}function _H(e,t,n,r){var a=r.options,c=r.calendarApi,h=r.pluginHooks.eventSourceDefs[e.sourceDefId],o=af();return h.fetch({eventSource:e,range:t,isRefetch:n,context:r},function(m){var w=m.rawEvents;a.eventSourceSuccess&&(w=a.eventSourceSuccess.call(c,w,m.xhr)||w),e.success&&(w=e.success.call(c,w,m.xhr)||w),r.dispatch({type:"RECEIVE_EVENTS",sourceId:e.sourceId,fetchId:o,fetchRange:t,rawEvents:w})},function(m){console.warn(m.message,m),a.eventSourceFailure&&a.eventSourceFailure.call(c,m),e.failure&&e.failure(m),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:e.sourceId,fetchId:o,fetchRange:t,error:m})}),xt(xt({},e),{isFetching:!0,latestFetchId:o})}function xH(e,t,n,r){var a,c=e[t];return c&&n===c.latestFetchId?xt(xt({},e),(a={},a[t]=xt(xt({},c),{isFetching:!1,fetchRange:r}),a)):e}function Mz(e,t){return Nd(e,function(n){return Iz(n,t)})}function bH(e,t){var n=cz(t),r=[].concat(e.eventSources||[]),a=[];e.initialEvents&&r.unshift(e.initialEvents),e.events&&r.unshift(e.events);for(var c=0,h=r;c<h.length;c++){var o=h[c],m=uz(o,t,n);m&&a.push(m)}return a}function Iz(e,t){var n=t.pluginHooks.eventSourceDefs;return!n[e.sourceDefId].ignoreRange}function wH(e,t,n,r,a){switch(t.type){case"RECEIVE_EVENTS":return EH(e,n[t.sourceId],t.fetchId,t.fetchRange,t.rawEvents,a);case"ADD_EVENTS":return SH(e,t.eventStore,r?r.activeRange:null,a);case"RESET_EVENTS":return t.eventStore;case"MERGE_EVENTS":return DT(e,t.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?qp(e,r.activeRange,a):e;case"REMOVE_EVENTS":return z8(e,t.eventStore);case"REMOVE_EVENT_SOURCE":return Pz(e,t.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return B0(e,function(c){return!c.sourceId});case"REMOVE_ALL_EVENTS":return Ls();default:return e}}function EH(e,t,n,r,a,c){if(t&&n===t.latestFetchId){var h=Hx(CH(a,t,c),t,c);return r&&(h=qp(h,r,c)),DT(Pz(e,t.sourceId),h)}return e}function CH(e,t,n){var r=n.options.eventDataTransform,a=t?t.eventDataTransform:null;return a&&(e=mP(e,a)),r&&(e=mP(e,r)),e}function mP(e,t){var n;if(!t)n=e;else{n=[];for(var r=0,a=e;r<a.length;r++){var c=a[r],h=t(c);h?n.push(h):h==null&&n.push(c)}}return n}function SH(e,t,n,r){return n&&(t=qp(t,n,r)),DT(e,t)}function TH(e,t,n){var r=e.defs,a=Zd(e.instances,function(c){var h=r[c.defId];return h.allDay||h.recurringDef?c:xt(xt({},c),{range:{start:n.createMarker(t.toDate(c.range.start,c.forcedStartTzo)),end:n.createMarker(t.toDate(c.range.end,c.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:c.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:c.forcedEndTzo})});return{defs:r,instances:a}}function Pz(e,t){return B0(e,function(n){return n.sourceId!==t})}function kH(e,t){return{defs:e.defs,instances:Nd(e.instances,function(n){return!t[n.instanceId]})}}function AH(e,t){switch(t.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return t.selection;default:return e}}function MH(e,t){switch(t.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return t.eventInstanceId;default:return e}}function IH(e,t){var n;switch(t.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function PH(e,t){var n;switch(t.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=t.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return e}}function DH(e,t,n,r,a){var c=e.headerToolbar?gP(e.headerToolbar,e,t,n,r,a):null,h=e.footerToolbar?gP(e.footerToolbar,e,t,n,r,a):null;return{header:c,footer:h}}function gP(e,t,n,r,a,c){var h={},o=[],m=!1;for(var w in e){var A=e[w],P=RH(A,t,n,r,a,c);h[w]=P.widgets,o.push.apply(o,P.viewsWithButtons),m=m||P.hasTitle}return{sectionWidgets:h,viewsWithButtons:o,hasTitle:m}}function RH(e,t,n,r,a,c){var h=t.direction==="rtl",o=t.customButtons||{},m=n.buttonText||{},w=t.buttonText||{},A=n.buttonHints||{},P=t.buttonHints||{},O=e?e.split(" "):[],B=[],N=!1,k=O.map(function(V){return V.split(",").map(function(U){if(U==="title")return N=!0,{buttonName:U};var W,F,z,S,b,D;if(W=o[U])z=function(ae){W.click&&W.click.call(ae.target,ae,ae.target)},(S=r.getCustomButtonIconClass(W))||(S=r.getIconClass(U,h))||(b=W.text),D=W.hint||W.text;else if(F=a[U]){B.push(U),z=function(){c.changeView(U)},(b=F.buttonTextOverride)||(S=r.getIconClass(U,h))||(b=F.buttonTextDefault);var Y=F.buttonTextOverride||F.buttonTextDefault;D=mg(F.buttonTitleOverride||F.buttonTitleDefault||t.viewHint,[Y,U],Y)}else if(c[U])if(z=function(){c[U]()},(b=m[U])||(S=r.getIconClass(U,h))||(b=w[U]),U==="prevYear"||U==="nextYear"){var re=U==="prevYear"?"prev":"next";D=mg(A[re]||P[re],[w.year||"year","year"],w[U])}else D=function(ae){return mg(A[U]||P[U],[w[ae]||ae,ae],w[U])};return{buttonName:U,buttonClick:z,buttonIcon:S,buttonText:b,buttonHint:D}})});return{widgets:k,viewsWithButtons:B,hasTitle:N}}var LH={ignoreRange:!0,parseMeta:function(e){return Array.isArray(e.events)?e.events:null},fetch:function(e,t){t({rawEvents:e.eventSource.meta})}},OH=fc({eventSourceDefs:[LH]}),zH={parseMeta:function(e){return typeof e.events=="function"?e.events:null},fetch:function(e,t,n){var r=e.context.dateEnv,a=e.eventSource.meta;HV(a.bind(null,az(e.range,r)),function(c){t({rawEvents:c})},n)}},BH=fc({eventSourceDefs:[zH]});function FH(e,t,n,r,a){e=e.toUpperCase();var c=null;e==="GET"?t=NH(t,n):c=Dz(n);var h=new XMLHttpRequest;h.open(e,t,!0),e!=="GET"&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.onload=function(){if(h.status>=200&&h.status<400){var o=!1,m=void 0;try{m=JSON.parse(h.responseText),o=!0}catch{}o?r(m,h):a("Failure parsing JSON",h)}else a("Request failed",h)},h.onerror=function(){a("Request failed",h)},h.send(c)}function NH(e,t){return e+(e.indexOf("?")===-1?"?":"&")+Dz(t)}function Dz(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}var $H={method:String,extraParams:Tt,startParam:String,endParam:String,timeZoneParam:String},UH={parseMeta:function(e){return e.url&&(e.format==="json"||!e.format)?{url:e.url,format:"json",method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams,startParam:e.startParam,endParam:e.endParam,timeZoneParam:e.timeZoneParam}:null},fetch:function(e,t,n){var r=e.eventSource.meta,a=VH(r,e.range,e.context);FH(r.method,r.url,a,function(c,h){t({rawEvents:c,xhr:h})},function(c,h){n({message:c,xhr:h})})}},jH=fc({eventSourceRefiners:$H,eventSourceDefs:[UH]});function VH(e,t,n){var r=n.dateEnv,a=n.options,c,h,o,m,w={};return c=e.startParam,c==null&&(c=a.startParam),h=e.endParam,h==null&&(h=a.endParam),o=e.timeZoneParam,o==null&&(o=a.timeZoneParam),typeof e.extraParams=="function"?m=e.extraParams():m=e.extraParams||{},xt(w,m),w[c]=r.formatIso(t.start),w[h]=r.formatIso(t.end),r.timeZone!=="local"&&(w[o]=r.timeZone),w}var HH={daysOfWeek:Tt,startTime:Ur,endTime:Ur,duration:Ur,startRecur:Tt,endRecur:Tt},WH={parse:function(e,t){if(e.daysOfWeek||e.startTime||e.endTime||e.startRecur||e.endRecur){var n={daysOfWeek:e.daysOfWeek||null,startTime:e.startTime||null,endTime:e.endTime||null,startRecur:e.startRecur?t.createMarker(e.startRecur):null,endRecur:e.endRecur?t.createMarker(e.endRecur):null},r=void 0;return e.duration&&(r=e.duration),!r&&e.startTime&&e.endTime&&(r=m8(e.endTime,e.startTime)),{allDayGuess:Boolean(!e.startTime&&!e.endTime),duration:r,typeData:n}}return null},expand:function(e,t,n){var r=Xg(t,{start:e.startRecur,end:e.endRecur});return r?qH(e.daysOfWeek,e.startTime,r,n):[]}},GH=fc({recurringTypes:[WH],eventRefiners:HH});function qH(e,t,n,r){for(var a=e?K3(e):null,c=_i(n.start),h=n.end,o=[];c<h;){var m=void 0;(!a||a[c.getUTCDay()])&&(t?m=r.add(c,t):m=c,o.push(m)),c=Jo(c,1)}return o}var ZH=fc({optionChangeHandlers:{events:function(e,t){yP([e],t)},eventSources:yP}});function yP(e,t){for(var n=AT(t.getCurrentData().eventSources),r=[],a=0,c=e;a<c.length;a++){for(var h=c[a],o=!1,m=0;m<n.length;m+=1)if(n[m]._raw===h){n.splice(m,1),o=!0;break}o||r.push(h)}for(var w=0,A=n;w<A.length;w++){var P=A[w];t.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:P.sourceId})}for(var O=0,B=r;O<B.length;O++){var N=B[O];t.calendarApi.addEventSource(N)}}function XH(e,t){t.emitter.trigger("datesSet",xt(xt({},az(e.activeRange,t.dateEnv)),{view:t.viewApi}))}function KH(e,t){var n=t.emitter;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Md(e,t))}var YH=[OH,BH,jH,GH,ZH,fc({isLoadingFuncs:[function(e){return Tz(e.eventSources)}],contentTypeHandlers:{html:JH,domNodes:QH},propSetHandlers:{dateProfile:XH,eventStore:KH}})];function JH(){var e=null,t="";function n(a,c){(a!==e||c!==t)&&(a.innerHTML=c),e=a,t=c}function r(){e.innerHTML="",e=null,t=""}return{render:n,destroy:r}}function QH(){var e=null,t=[];function n(a,c){var h=Array.prototype.slice.call(c);if(a!==e||!Zg(t,h)){for(var o=0,m=h;o<m.length;o++){var w=m[o];a.appendChild(w)}r()}e=a,t=h}function r(){t.forEach(ET),t=[],e=null}return{render:n,destroy:r}}var Rz=function(){function e(t){this.drainedOption=t,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}return e.prototype.request=function(t){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),t==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),t))},e.prototype.pause=function(t){t===void 0&&(t="");var n=this.pauseDepths;n[t]=(n[t]||0)+1,this.clearTimeout()},e.prototype.resume=function(t,n){t===void 0&&(t="");var r=this.pauseDepths;if(t in r){if(n)delete r[t];else{r[t]-=1;var a=r[t];a<=0&&delete r[t]}this.tryDrain()}},e.prototype.isPaused=function(){return Object.keys(this.pauseDepths).length},e.prototype.tryDrain=function(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}},e.prototype.clear=function(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}},e.prototype.clearTimeout=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)},e.prototype.drained=function(){this.drainedOption&&this.drainedOption()},e}(),eW=function(){function e(t,n){this.runTaskOption=t,this.drainedOption=n,this.queue=[],this.delayedRunner=new Rz(this.drain.bind(this))}return e.prototype.request=function(t,n){this.queue.push(t),this.delayedRunner.request(n)},e.prototype.pause=function(t){this.delayedRunner.pause(t)},e.prototype.resume=function(t,n){this.delayedRunner.resume(t,n)},e.prototype.drain=function(){for(var t=this.queue;t.length;){for(var n=[],r=void 0;r=t.shift();)this.runTask(r),n.push(r);this.drained(n)}},e.prototype.runTask=function(t){this.runTaskOption&&this.runTaskOption(t)},e.prototype.drained=function(t){this.drainedOption&&this.drainedOption(t)},e}();function tW(e,t,n){var r;return/^(year|month)$/.test(e.currentRangeUnit)?r=e.currentRange:r=e.activeRange,n.formatRange(r.start,r.end,Co(t.titleFormat||nW(e)),{isEndExclusive:e.isRangeAllDay,defaultSeparator:t.titleRangeSeparator})}function nW(e){var t=e.currentRangeUnit;if(t==="year")return{year:"numeric"};if(t==="month")return{year:"numeric",month:"long"};var n=$x(e.currentRange.start,e.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}var rW=function(){function e(t){var n=this;this.computeOptionsData=Dr(this._computeOptionsData),this.computeCurrentViewData=Dr(this._computeCurrentViewData),this.organizeRawLocales=Dr(CV),this.buildLocale=Dr(mz),this.buildPluginHooks=eH(),this.buildDateEnv=Dr(iW),this.buildTheme=Dr(oW),this.parseToolbars=Dr(DH),this.buildViewSpecs=Dr(lH),this.buildDateProfileGenerator=tx(aW),this.buildViewApi=Dr(sW),this.buildViewUiProps=tx(cW),this.buildEventUiBySource=Dr(lW,Zl),this.buildEventUiBases=Dr(uW),this.parseContextBusinessHours=tx(dW),this.buildTitle=Dr(tW),this.emitter=new N0,this.actionRunner=new eW(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.getCurrentData=function(){return n.data},this.dispatch=function(F){n.actionRunner.request(F)},this.props=t,this.actionRunner.pause();var r={},a=this.computeOptionsData(t.optionOverrides,r,t.calendarApi),c=a.calendarOptions.initialView||a.pluginHooks.initialView,h=this.computeCurrentViewData(c,a,t.optionOverrides,r);t.calendarApi.currentDataManager=this,this.emitter.setThisContext(t.calendarApi),this.emitter.setOptions(h.options);var o=mV(a.calendarOptions,a.dateEnv),m=h.dateProfileGenerator.build(o);Ad(m.activeRange,o)||(o=m.currentRange.start);for(var w={dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},A=0,P=a.pluginHooks.contextInit;A<P.length;A++){var O=P[A];O(w)}for(var B=fH(a.calendarOptions,m,w),N={dynamicOptionOverrides:r,currentViewType:c,currentDate:o,dateProfile:m,businessHours:this.parseContextBusinessHours(w),eventSources:B,eventUiBases:{},eventStore:Ls(),renderableEventStore:Ls(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(w).selectionConfig},k=xt(xt({},w),N),V=0,U=a.pluginHooks.reducers;V<U.length;V++){var W=U[V];xt(N,W(null,null,k))}Nw(N,w)&&this.emitter.trigger("loading",!0),this.state=N,this.updateData(),this.actionRunner.resume()}return e.prototype.resetOptions=function(t,n){var r=this.props;r.optionOverrides=n?xt(xt({},r.optionOverrides),t):t,this.actionRunner.request({type:"NOTHING"})},e.prototype._handleAction=function(t){var n=this,r=n.props,a=n.state,c=n.emitter,h=hH(a.dynamicOptionOverrides,t),o=this.computeOptionsData(r.optionOverrides,h,r.calendarApi),m=dH(a.currentViewType,t),w=this.computeCurrentViewData(m,o,r.optionOverrides,h);r.calendarApi.currentDataManager=this,c.setThisContext(r.calendarApi),c.setOptions(w.options);var A={dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:r.calendarApi,dispatch:this.dispatch,emitter:c,getCurrentData:this.getCurrentData},P=a.currentDate,O=a.dateProfile;this.data&&this.data.dateProfileGenerator!==w.dateProfileGenerator&&(O=w.dateProfileGenerator.build(P)),P=fV(P,t),O=pH(O,t,P,w.dateProfileGenerator),(t.type==="PREV"||t.type==="NEXT"||!Ad(O.currentRange,P))&&(P=O.currentRange.start);for(var B=mH(a.eventSources,t,O,A),N=wH(a.eventStore,t,B,O,A),k=Tz(B),V=k&&!w.options.progressiveEventRendering&&a.renderableEventStore||N,U=this.buildViewUiProps(A),W=U.eventUiSingleBase,F=U.selectionConfig,z=this.buildEventUiBySource(B),S=this.buildEventUiBases(V.defs,W,z),b={dynamicOptionOverrides:h,currentViewType:m,currentDate:P,dateProfile:O,eventSources:B,eventStore:N,renderableEventStore:V,selectionConfig:F,eventUiBases:S,businessHours:this.parseContextBusinessHours(A),dateSelection:AH(a.dateSelection,t),eventSelection:MH(a.eventSelection,t),eventDrag:IH(a.eventDrag,t),eventResize:PH(a.eventResize,t)},D=xt(xt({},A),b),Y=0,re=o.pluginHooks.reducers;Y<re.length;Y++){var ae=re[Y];xt(b,ae(a,t,D))}var ee=Nw(a,A),de=Nw(b,A);!ee&&de?c.trigger("loading",!0):ee&&!de&&c.trigger("loading",!1),this.state=b,r.onAction&&r.onAction(t)},e.prototype.updateData=function(){var t=this,n=t.props,r=t.state,a=this.data,c=this.computeOptionsData(n.optionOverrides,r.dynamicOptionOverrides,n.calendarApi),h=this.computeCurrentViewData(r.currentViewType,c,n.optionOverrides,r.dynamicOptionOverrides),o=this.data=xt(xt(xt({viewTitle:this.buildTitle(r.dateProfile,h.options,c.dateEnv),calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},c),h),r),m=c.pluginHooks.optionChangeHandlers,w=a&&a.calendarOptions,A=c.calendarOptions;if(w&&w!==A){w.timeZone!==A.timeZone&&(r.eventSources=o.eventSources=gH(o.eventSources,r.dateProfile,o),r.eventStore=o.eventStore=TH(o.eventStore,a.dateEnv,o.dateEnv));for(var P in m)w[P]!==A[P]&&m[P](A[P],o)}n.onData&&n.onData(o)},e.prototype._computeOptionsData=function(t,n,r){var a=this.processRawCalendarOptions(t,n),c=a.refinedOptions,h=a.pluginHooks,o=a.localeDefaults,m=a.availableLocaleData,w=a.extra;vP(w);var A=this.buildDateEnv(c.timeZone,c.locale,c.weekNumberCalculation,c.firstDay,c.weekText,h,m,c.defaultRangeSeparator),P=this.buildViewSpecs(h.views,t,n,o),O=this.buildTheme(c,h),B=this.parseToolbars(c,t,O,P,r);return{calendarOptions:c,pluginHooks:h,dateEnv:A,viewSpecs:P,theme:O,toolbarConfig:B,localeDefaults:o,availableRawLocales:m.map}},e.prototype.processRawCalendarOptions=function(t,n){var r=Ow([gg,t,n]),a=r.locales,c=r.locale,h=this.organizeRawLocales(a),o=h.map,m=this.buildLocale(c||h.defaultCode,o).options,w=this.buildPluginHooks(t.plugins||[],YH),A=this.currentCalendarOptionsRefiners=xt(xt(xt(xt(xt({},oP),aP),sP),w.listenerRefiners),w.optionRefiners),P={},O=Ow([gg,m,t,n]),B={},N=this.currentCalendarOptionsInput,k=this.currentCalendarOptionsRefined,V=!1;for(var U in O)U!=="plugins"&&(O[U]===N[U]||pd[U]&&U in N&&pd[U](N[U],O[U])?B[U]=k[U]:A[U]?(B[U]=A[U](O[U]),V=!0):P[U]=N[U]);return V&&(this.currentCalendarOptionsInput=O,this.currentCalendarOptionsRefined=B),{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:w,availableLocaleData:h,localeDefaults:m,extra:P}},e.prototype._computeCurrentViewData=function(t,n,r,a){var c=n.viewSpecs[t];if(!c)throw new Error('viewType "'+t+`" is not available. Please make sure you've loaded all neccessary plugins`);var h=this.processRawViewOptions(c,n.pluginHooks,n.localeDefaults,r,a),o=h.refinedOptions,m=h.extra;vP(m);var w=this.buildDateProfileGenerator({dateProfileGeneratorClass:c.optionDefaults.dateProfileGeneratorClass,duration:c.duration,durationUnit:c.durationUnit,usesMinMaxTime:c.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,nowInput:o.now,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,monthMode:o.monthMode,fixedWeekCount:o.fixedWeekCount}),A=this.buildViewApi(t,this.getCurrentData,n.dateEnv);return{viewSpec:c,options:o,dateProfileGenerator:w,viewApi:A}},e.prototype.processRawViewOptions=function(t,n,r,a,c){var h=Ow([gg,t.optionDefaults,r,a,t.optionOverrides,c]),o=xt(xt(xt(xt(xt(xt({},oP),aP),sP),L8),n.listenerRefiners),n.optionRefiners),m={},w=this.currentViewOptionsInput,A=this.currentViewOptionsRefined,P=!1,O={};for(var B in h)h[B]===w[B]||pd[B]&&pd[B](h[B],w[B])?m[B]=A[B]:(h[B]===this.currentCalendarOptionsInput[B]||pd[B]&&pd[B](h[B],this.currentCalendarOptionsInput[B])?B in this.currentCalendarOptionsRefined&&(m[B]=this.currentCalendarOptionsRefined[B]):o[B]?m[B]=o[B](h[B]):O[B]=h[B],P=!0);return P&&(this.currentViewOptionsInput=h,this.currentViewOptionsRefined=m),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:O}},e}();function iW(e,t,n,r,a,c,h,o){var m=mz(t||h.defaultCode,h.map);return new wV({calendarSystem:"gregory",timeZone:e,namedTimeZoneImpl:c.namedTimeZonedImpl,locale:m,weekNumberCalculation:n,firstDay:r,weekText:a,cmdFormatter:c.cmdFormatter,defaultSeparator:o})}function oW(e,t){var n=t.themeClasses[e.themeSystem]||mc;return new n(e)}function aW(e){var t=e.dateProfileGeneratorClass||Sz;return new t(e)}function sW(e,t,n){return new dV(e,t,n)}function lW(e){return Zd(e,function(t){return t.ui})}function uW(e,t,n){var r={"":t};for(var a in e){var c=e[a];c.sourceId&&n[c.sourceId]&&(r[a]=n[c.sourceId])}return r}function cW(e){var t=e.options;return{eventUiSingleBase:Gx({display:t.eventDisplay,editable:t.editable,startEditable:t.eventStartEditable,durationEditable:t.eventDurationEditable,constraint:t.eventConstraint,overlap:typeof t.eventOverlap=="boolean"?t.eventOverlap:void 0,allow:t.eventAllow,backgroundColor:t.eventBackgroundColor,borderColor:t.eventBorderColor,textColor:t.eventTextColor,color:t.eventColor},e),selectionConfig:Gx({constraint:t.selectConstraint,overlap:typeof t.selectOverlap=="boolean"?t.selectOverlap:void 0,allow:t.selectAllow},e)}}function Nw(e,t){for(var n=0,r=t.pluginHooks.isLoadingFuncs;n<r.length;n++){var a=r[n];if(a(e))return!0}return!1}function dW(e){return AV(e.options.businessHours,e)}function vP(e,t){for(var n in e)console.warn("Unknown option '"+n+"'"+(t?" for view '"+t+"'":""))}var hW=function(e){jr(t,e);function t(n){var r=e.call(this,n)||this;return r.handleData=function(a){r.dataManager?r.setState(a):r.state=a},r.dataManager=new rW({optionOverrides:n.optionOverrides,calendarApi:n.calendarApi,onData:r.handleData}),r}return t.prototype.render=function(){return this.props.children(this.state)},t.prototype.componentDidUpdate=function(n){var r=this.props.optionOverrides;r!==n.optionOverrides&&this.dataManager.resetOptions(r)},t}(wT),pW=function(){function e(){this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}return e.prototype.addSegs=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var c=a[r];this.insertEntry(c,n)}return n},e.prototype.insertEntry=function(t,n){var r=this.findInsertion(t);return this.isInsertionValid(r,t)?(this.insertEntryAt(t,r),1):this.handleInvalidInsertion(r,t,n)},e.prototype.isInsertionValid=function(t,n){return(this.maxCoord===-1||t.levelCoord+n.thickness<=this.maxCoord)&&(this.maxStackCnt===-1||t.stackCnt<this.maxStackCnt)},e.prototype.handleInvalidInsertion=function(t,n,r){return this.allowReslicing&&t.touchingEntry?this.splitEntry(n,t.touchingEntry,r):(r.push(n),0)},e.prototype.splitEntry=function(t,n,r){var a=0,c=[],h=t.span,o=n.span;return h.start<o.start&&(a+=this.insertEntry({index:t.index,thickness:t.thickness,span:{start:h.start,end:o.start}},c)),h.end>o.end&&(a+=this.insertEntry({index:t.index,thickness:t.thickness,span:{start:o.end,end:h.end}},c)),a?(r.push.apply(r,Ui([{index:t.index,thickness:t.thickness,span:Lz(o,h)}],c)),a):(r.push(t),0)},e.prototype.insertEntryAt=function(t,n){var r=this,a=r.entriesByLevel,c=r.levelCoords;n.lateral===-1?($w(c,n.level,n.levelCoord),$w(a,n.level,[t])):$w(a[n.level],n.lateral,t),this.stackCnts[vg(t)]=n.stackCnt},e.prototype.findInsertion=function(t){for(var n=this,r=n.levelCoords,a=n.entriesByLevel,c=n.strictOrder,h=n.stackCnts,o=r.length,m=0,w=-1,A=-1,P=null,O=0,B=0;B<o;B+=1){var N=r[B];if(!c&&N>=m+t.thickness)break;for(var k=a[B],V=void 0,U=xP(k,t.span.start,_P),W=U[0]+U[1];(V=k[W])&&V.span.start<t.span.end;){var F=N+V.thickness;F>m&&(m=F,P=V,w=B,A=W),F===m&&(O=Math.max(O,h[vg(V)]+1)),W+=1}}var z=0;if(P)for(z=w+1;z<o&&r[z]<m;)z+=1;var S=-1;return z<o&&r[z]===m&&(S=xP(a[z],t.span.end,_P)[0]),{touchingLevel:w,touchingLateral:A,touchingEntry:P,stackCnt:O,levelCoord:m,level:z,lateral:S}},e.prototype.toRects=function(){for(var t=this,n=t.entriesByLevel,r=t.levelCoords,a=n.length,c=[],h=0;h<a;h+=1)for(var o=n[h],m=r[h],w=0,A=o;w<A.length;w++){var P=A[w];c.push(xt(xt({},P),{levelCoord:m}))}return c},e}();function _P(e){return e.span.end}function vg(e){return e.index+":"+e.span.start}function Lz(e,t){var n=Math.max(e.start,t.start),r=Math.min(e.end,t.end);return n<r?{start:n,end:r}:null}function $w(e,t,n){e.splice(t,0,n)}function xP(e,t,n){var r=0,a=e.length;if(!a||t<n(e[r]))return[0,0];if(t>n(e[a-1]))return[a,0];for(;r<a;){var c=Math.floor(r+(a-r)/2),h=n(e[c]);if(t<h)a=c;else if(t>h)r=c+1;else return[c,1]}return[r,0]}var cf=function(){function e(t){this.component=t.component,this.isHitComboAllowed=t.isHitComboAllowed||null}return e.prototype.destroy=function(){},e}();function fW(e,t){return{component:e,el:t.el,useEventCenter:t.useEventCenter!=null?t.useEventCenter:!0,isHitComboAllowed:t.isHitComboAllowed||null}}function VT(e){var t;return t={},t[e.component.uid]=e,t}var BC={},Oz=function(){function e(t,n){this.emitter=new N0}return e.prototype.destroy=function(){},e.prototype.setMirrorIsVisible=function(t){},e.prototype.setMirrorNeedsRevert=function(t){},e.prototype.setAutoScrollEnabled=function(t){},e}(),HT={},mW=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=this.props.widgetGroups.map(function(a){return n.renderWidgetGroup(a)});return kt.apply(void 0,Ui(["div",{className:"fc-toolbar-chunk"}],r))},t.prototype.renderWidgetGroup=function(n){for(var r=this.props,a=this.context.theme,c=[],h=!0,o=0,m=n;o<m.length;o++){var w=m[o],A=w.buttonName,P=w.buttonClick,O=w.buttonText,B=w.buttonIcon,N=w.buttonHint;if(A==="title")h=!1,c.push(kt("h2",{className:"fc-toolbar-title",id:r.titleId},r.title));else{var k=A===r.activeButton,V=!r.isTodayEnabled&&A==="today"||!r.isPrevEnabled&&A==="prev"||!r.isNextEnabled&&A==="next",U=["fc-"+A+"-button",a.getClass("button")];k&&U.push(a.getClass("buttonActive")),c.push(kt("button",{type:"button",title:typeof N=="function"?N(r.navUnit):N,disabled:V,"aria-pressed":k,className:U.join(" "),onClick:P},O||(B?kt("span",{className:B}):"")))}}if(c.length>1){var W=h&&a.getClass("buttonGroup")||"";return kt.apply(void 0,Ui(["div",{className:W}],c))}return c[0]},t}(xi),bP=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=n.model,a=n.extraClassName,c=!1,h,o,m=r.sectionWidgets,w=m.center;m.left?(c=!0,h=m.left):h=m.start,m.right?(c=!0,o=m.right):o=m.end;var A=[a||"","fc-toolbar",c?"fc-toolbar-ltr":""];return kt("div",{className:A.join(" ")},this.renderSection("start",h||[]),this.renderSection("center",w||[]),this.renderSection("end",o||[]))},t.prototype.renderSection=function(n,r){var a=this.props;return kt(mW,{key:n,widgetGroups:r,title:a.title,navUnit:a.navUnit,activeButton:a.activeButton,isTodayEnabled:a.isTodayEnabled,isPrevEnabled:a.isPrevEnabled,isNextEnabled:a.isNextEnabled,titleId:a.titleId})},t}(xi),gW=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={availableWidth:null},n.handleEl=function(r){n.el=r,Xl(n.props.elRef,r),n.updateAvailableWidth()},n.handleResize=function(){n.updateAvailableWidth()},n}return t.prototype.render=function(){var n=this,r=n.props,a=n.state,c=r.aspectRatio,h=["fc-view-harness",c||r.liquid||r.height?"fc-view-harness-active":"fc-view-harness-passive"],o="",m="";return c?a.availableWidth!==null?o=a.availableWidth/c:m=1/c*100+"%":o=r.height||"",kt("div",{"aria-labelledby":r.labeledById,ref:this.handleEl,className:h.join(" "),style:{height:o,paddingBottom:m}},r.children)},t.prototype.componentDidMount=function(){this.context.addResizeHandler(this.handleResize)},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleResize)},t.prototype.updateAvailableWidth=function(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})},t}(xi),yW=function(e){jr(t,e);function t(n){var r=e.call(this,n)||this;return r.handleSegClick=function(a,c){var h=r.component,o=h.context,m=Zp(c);if(m&&h.isValidSegDownEl(a.target)){var w=jo(a.target,".fc-event-forced-url"),A=w?w.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:c,event:new Bi(h.context,m.eventRange.def,m.eventRange.instance),jsEvent:a,view:o.viewApi}),A&&!a.defaultPrevented&&(window.location.href=A)}},r.destroy=G3(n.el,"click",".fc-event",r.handleSegClick),r}return t}(cf),vW=function(e){jr(t,e);function t(n){var r=e.call(this,n)||this;return r.handleEventElRemove=function(a){a===r.currentSegEl&&r.handleSegLeave(null,r.currentSegEl)},r.handleSegEnter=function(a,c){Zp(c)&&(r.currentSegEl=c,r.triggerEvent("eventMouseEnter",a,c))},r.handleSegLeave=function(a,c){r.currentSegEl&&(r.currentSegEl=null,r.triggerEvent("eventMouseLeave",a,c))},r.removeHoverListeners=F7(n.el,".fc-event",r.handleSegEnter,r.handleSegLeave),r}return t.prototype.destroy=function(){this.removeHoverListeners()},t.prototype.triggerEvent=function(n,r,a){var c=this.component,h=c.context,o=Zp(a);(!r||c.isValidSegDownEl(r.target))&&h.emitter.trigger(n,{el:a,event:new Bi(h,o.eventRange.def,o.eventRange.instance),jsEvent:r,view:h.viewApi})},t}(cf),_W=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.buildViewContext=Dr(KV),n.buildViewPropTransformers=Dr(bW),n.buildToolbarProps=Dr(xW),n.headerRef=os(),n.footerRef=os(),n.interactionsStore={},n.state={viewLabelId:O0()},n.registerInteractiveComponent=function(r,a){var c=fW(r,a),h=[yW,vW],o=h.concat(n.props.pluginHooks.componentInteractions),m=o.map(function(w){return new w(c)});n.interactionsStore[r.uid]=m,BC[r.uid]=c},n.unregisterInteractiveComponent=function(r){var a=n.interactionsStore[r.uid];if(a){for(var c=0,h=a;c<h.length;c++){var o=h[c];o.destroy()}delete n.interactionsStore[r.uid]}delete BC[r.uid]},n.resizeRunner=new Rz(function(){n.props.emitter.trigger("_resize",!0),n.props.emitter.trigger("windowResize",{view:n.props.viewApi})}),n.handleWindowResize=function(r){var a=n.props.options;a.handleWindowResize&&r.target===window&&n.resizeRunner.request(a.windowResizeDelay)},n}return t.prototype.render=function(){var n=this.props,r=n.toolbarConfig,a=n.options,c=this.buildToolbarProps(n.viewSpec,n.dateProfile,n.dateProfileGenerator,n.currentDate,py(n.options.now,n.dateEnv),n.viewTitle),h=!1,o="",m;n.isHeightAuto||n.forPrint?o="":a.height!=null?h=!0:a.contentHeight!=null?o=a.contentHeight:m=Math.max(a.aspectRatio,.5);var w=this.buildViewContext(n.viewSpec,n.viewApi,n.options,n.dateProfileGenerator,n.dateEnv,n.theme,n.pluginHooks,n.dispatch,n.getCurrentData,n.emitter,n.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),A=r.header&&r.header.hasTitle?this.state.viewLabelId:"";return kt(Xd.Provider,{value:w},r.header&&kt(bP,xt({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:r.header,titleId:A},c)),kt(gW,{liquid:h,height:o,aspectRatio:m,labeledById:A},this.renderView(n),this.buildAppendContent()),r.footer&&kt(bP,xt({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:r.footer,titleId:""},c)))},t.prototype.componentDidMount=function(){var n=this.props;this.calendarInteractions=n.pluginHooks.calendarInteractions.map(function(c){return new c(n)}),window.addEventListener("resize",this.handleWindowResize);var r=n.pluginHooks.propSetHandlers;for(var a in r)r[a](n[a],n)},t.prototype.componentDidUpdate=function(n){var r=this.props,a=r.pluginHooks.propSetHandlers;for(var c in a)r[c]!==n[c]&&a[c](r[c],r)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(var n=0,r=this.calendarInteractions;n<r.length;n++){var a=r[n];a.destroy()}this.props.emitter.trigger("_unmount")},t.prototype.buildAppendContent=function(){var n=this.props,r=n.pluginHooks.viewContainerAppends.map(function(a){return a(n)});return kt.apply(void 0,Ui([ca,{}],r))},t.prototype.renderView=function(n){for(var r=n.pluginHooks,a=n.viewSpec,c={dateProfile:n.dateProfile,businessHours:n.businessHours,eventStore:n.renderableEventStore,eventUiBases:n.eventUiBases,dateSelection:n.dateSelection,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,isHeightAuto:n.isHeightAuto,forPrint:n.forPrint},h=this.buildViewPropTransformers(r.viewPropsTransformers),o=0,m=h;o<m.length;o++){var w=m[o];xt(c,w.transform(c,n))}var A=a.component;return kt(A,xt({},c))},t}($0);function xW(e,t,n,r,a,c){var h=n.build(a,void 0,!1),o=n.buildPrev(t,r,!1),m=n.buildNext(t,r,!1);return{title:c,activeButton:e.type,navUnit:e.singleUnit,isTodayEnabled:h.isValid&&!Ad(t.currentRange,a),isPrevEnabled:o.isValid,isNextEnabled:m.isValid}}function bW(e){return e.map(function(t){return new t})}var wW=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={forPrint:!1},n.handleBeforePrint=function(){n.setState({forPrint:!0})},n.handleAfterPrint=function(){n.setState({forPrint:!1})},n}return t.prototype.render=function(){var n=this.props,r=n.options,a=this.state.forPrint,c=a||r.height==="auto"||r.contentHeight==="auto",h=!c&&r.height!=null?r.height:"",o=["fc",a?"fc-media-print":"fc-media-screen","fc-direction-"+r.direction,n.theme.getClass("root")];return vz()||o.push("fc-liquid-hack"),n.children(o,h,c,a)},t.prototype.componentDidMount=function(){var n=this.props.emitter;n.on("_beforeprint",this.handleBeforePrint),n.on("_afterprint",this.handleAfterPrint)},t.prototype.componentWillUnmount=function(){var n=this.props.emitter;n.off("_beforeprint",this.handleBeforePrint),n.off("_afterprint",this.handleAfterPrint)},t}(xi);function EW(e,t){return!e||t>10?Co({weekday:"short"}):t>1?Co({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Co({weekday:"long"})}var zz="fc-col-header-cell";function Bz(e){return e.text}var CW=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.context,r=n.dateEnv,a=n.options,c=n.theme,h=n.viewApi,o=this.props,m=o.date,w=o.dateProfile,A=_z(m,o.todayRange,null,w),P=[zz].concat(BT(A,c)),O=r.format(m,o.dayHeaderFormat),B=!A.isDisabled&&o.colCnt>1?FT(this.context,m):{},N=xt(xt(xt({date:r.toDate(m),view:h},o.extraHookProps),{text:O}),A);return kt(uf,{hookProps:N,classNames:a.dayHeaderClassNames,content:a.dayHeaderContent,defaultContent:Bz,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},function(k,V,U,W){return kt("th",xt({ref:k,role:"columnheader",className:P.concat(V).join(" "),"data-date":A.isDisabled?void 0:Y3(m),colSpan:o.colSpan},o.extraDataAttrs),kt("div",{className:"fc-scrollgrid-sync-inner"},!A.isDisabled&&kt("a",xt({ref:U,className:["fc-col-header-cell-cushion",o.isSticky?"fc-sticky":""].join(" ")},B),W)))})},t}(xi),SW=Co({weekday:"long"}),TW=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=this.context,a=r.dateEnv,c=r.theme,h=r.viewApi,o=r.options,m=Jo(new Date(2592e5),n.dow),w={dow:n.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},A=[zz].concat(BT(w,c),n.extraClassNames||[]),P=a.format(m,n.dayHeaderFormat),O=xt(xt(xt(xt({date:m},w),{view:h}),n.extraHookProps),{text:P});return kt(uf,{hookProps:O,classNames:o.dayHeaderClassNames,content:o.dayHeaderContent,defaultContent:Bz,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},function(B,N,k,V){return kt("th",xt({ref:B,role:"columnheader",className:A.concat(N).join(" "),colSpan:n.colSpan},n.extraDataAttrs),kt("div",{className:"fc-scrollgrid-sync-inner"},kt("a",{"aria-label":a.format(m,SW),className:["fc-col-header-cell-cushion",n.isSticky?"fc-sticky":""].join(" "),ref:k},V)))})},t}(xi),Fz=function(e){jr(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.initialNowDate=py(r.options.now,r.dateEnv),a.initialNowQueriedMs=new Date().valueOf(),a.state=a.computeTiming().currentState,a}return t.prototype.render=function(){var n=this,r=n.props,a=n.state;return r.children(a.nowDate,a.todayRange)},t.prototype.componentDidMount=function(){this.setTimeout()},t.prototype.componentDidUpdate=function(n){n.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())},t.prototype.componentWillUnmount=function(){this.clearTimeout()},t.prototype.computeTiming=function(){var n=this,r=n.props,a=n.context,c=Fd(this.initialNowDate,new Date().valueOf()-this.initialNowQueriedMs),h=a.dateEnv.startOf(c,r.unit),o=a.dateEnv.add(h,Ur(1,r.unit)),m=o.valueOf()-c.valueOf();return m=Math.min(1e3*60*60*24,m),{currentState:{nowDate:h,todayRange:wP(h)},nextState:{nowDate:o,todayRange:wP(o)},waitMs:m}},t.prototype.setTimeout=function(){var n=this,r=this.computeTiming(),a=r.nextState,c=r.waitMs;this.timeoutId=setTimeout(function(){n.setState(a,function(){n.setTimeout()})},c)},t.prototype.clearTimeout=function(){this.timeoutId&&clearTimeout(this.timeoutId)},t.contextType=Xd,t}(wT);function wP(e){var t=_i(e),n=Jo(t,1);return{start:t,end:n}}var kW=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.createDayHeaderFormatter=Dr(AW),n}return t.prototype.render=function(){var n=this.context,r=this.props,a=r.dates,c=r.dateProfile,h=r.datesRepDistinctDays,o=r.renderIntro,m=this.createDayHeaderFormatter(n.options.dayHeaderFormat,h,a.length);return kt(Fz,{unit:"day"},function(w,A){return kt("tr",{role:"row"},o&&o("day"),a.map(function(P){return h?kt(CW,{key:P.toISOString(),date:P,dateProfile:c,todayRange:A,colCnt:a.length,dayHeaderFormat:m}):kt(TW,{key:P.getUTCDay(),dow:P.getUTCDay(),dayHeaderFormat:m})}))})},t}(xi);function AW(e,t,n){return e||EW(t,n)}var MW=function(){function e(t,n){for(var r=t.start,a=t.end,c=[],h=[],o=-1;r<a;)n.isHiddenDay(r)?c.push(o+.5):(o+=1,c.push(o),h.push(r)),r=Jo(r,1);this.dates=h,this.indices=c,this.cnt=h.length}return e.prototype.sliceRange=function(t){var n=this.getDateDayIndex(t.start),r=this.getDateDayIndex(Jo(t.end,-1)),a=Math.max(0,n),c=Math.min(this.cnt-1,r);return a=Math.ceil(a),c=Math.floor(c),a<=c?{firstIndex:a,lastIndex:c,isStart:n===a,isEnd:r===c}:null},e.prototype.getDateDayIndex=function(t){var n=this.indices,r=Math.floor(sf(this.dates[0],t));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]},e}(),IW=function(){function e(t,n){var r=t.dates,a,c,h;if(n){for(c=r[0].getUTCDay(),a=1;a<r.length&&r[a].getUTCDay()!==c;a+=1);h=Math.ceil(r.length/a)}else h=1,a=r.length;this.rowCnt=h,this.colCnt=a,this.daySeries=t,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}return e.prototype.buildCells=function(){for(var t=[],n=0;n<this.rowCnt;n+=1){for(var r=[],a=0;a<this.colCnt;a+=1)r.push(this.buildCell(n,a));t.push(r)}return t},e.prototype.buildCell=function(t,n){var r=this.daySeries.dates[t*this.colCnt+n];return{key:r.toISOString(),date:r}},e.prototype.buildHeaderDates=function(){for(var t=[],n=0;n<this.colCnt;n+=1)t.push(this.cells[0][n].date);return t},e.prototype.sliceRange=function(t){var n=this.colCnt,r=this.daySeries.sliceRange(t),a=[];if(r)for(var c=r.firstIndex,h=r.lastIndex,o=c;o<=h;){var m=Math.floor(o/n),w=Math.min((m+1)*n,h+1);a.push({row:m,firstCol:o%n,lastCol:(w-1)%n,isStart:r.isStart&&o===c,isEnd:r.isEnd&&w-1===h}),o=w}return a},e}(),PW=function(){function e(){this.sliceBusinessHours=Dr(this._sliceBusinessHours),this.sliceDateSelection=Dr(this._sliceDateSpan),this.sliceEventStore=Dr(this._sliceEventStore),this.sliceEventDrag=Dr(this._sliceInteraction),this.sliceEventResize=Dr(this._sliceInteraction),this.forceDayIfListItem=!1}return e.prototype.sliceProps=function(t,n,r,a){for(var c=[],h=4;h<arguments.length;h++)c[h-4]=arguments[h];var o=t.eventUiBases,m=this.sliceEventStore.apply(this,Ui([t.eventStore,o,n,r],c));return{dateSelectionSegs:this.sliceDateSelection.apply(this,Ui([t.dateSelection,o,a],c)),businessHourSegs:this.sliceBusinessHours.apply(this,Ui([t.businessHours,n,r,a],c)),fgEventSegs:m.fg,bgEventSegs:m.bg,eventDrag:this.sliceEventDrag.apply(this,Ui([t.eventDrag,o,n,r],c)),eventResize:this.sliceEventResize.apply(this,Ui([t.eventResize,o,n,r],c)),eventSelection:t.eventSelection}},e.prototype.sliceNowDate=function(t,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];return this._sliceDateSpan.apply(this,Ui([{range:{start:t,end:Fd(t,1)},allDay:!1},{},n],r))},e.prototype._sliceBusinessHours=function(t,n,r,a){for(var c=[],h=4;h<arguments.length;h++)c[h-4]=arguments[h];return t?this._sliceEventStore.apply(this,Ui([qp(t,Uw(n,Boolean(r)),a),{},n,r],c)).bg:[]},e.prototype._sliceEventStore=function(t,n,r,a){for(var c=[],h=4;h<arguments.length;h++)c[h-4]=arguments[h];if(t){var o=uP(t,n,Uw(r,Boolean(a)),a);return{bg:this.sliceEventRanges(o.bg,c),fg:this.sliceEventRanges(o.fg,c)}}return{bg:[],fg:[]}},e.prototype._sliceInteraction=function(t,n,r,a){for(var c=[],h=4;h<arguments.length;h++)c[h-4]=arguments[h];if(!t)return null;var o=uP(t.mutatedEvents,n,Uw(r,Boolean(a)),a);return{segs:this.sliceEventRanges(o.fg,c),affectedInstances:t.affectedEvents.instances,isEvent:t.isEvent}},e.prototype._sliceDateSpan=function(t,n,r){for(var a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];if(!t)return[];for(var h=sV(t,n,r),o=this.sliceRange.apply(this,Ui([t.range],a)),m=0,w=o;m<w.length;m++){var A=w[m];A.eventRange=h}return o},e.prototype.sliceEventRanges=function(t,n){for(var r=[],a=0,c=t;a<c.length;a++){var h=c[a];r.push.apply(r,this.sliceEventRange(h,n))}return r},e.prototype.sliceEventRange=function(t,n){var r=t.range;this.forceDayIfListItem&&t.ui.display==="list-item"&&(r={start:r.start,end:Jo(r.start,1)});for(var a=this.sliceRange.apply(this,Ui([r],n)),c=0,h=a;c<h.length;c++){var o=h[c];o.eventRange=t,o.isStart=t.isStart&&o.isStart,o.isEnd=t.isEnd&&o.isEnd}return a},e}();function Uw(e,t){var n=e.activeRange;return t?n:{start:Fd(n.start,e.slotMinTime.milliseconds),end:Fd(n.end,e.slotMaxTime.milliseconds-864e5)}}function Nz(e,t,n){var r=e.mutatedEvents.instances;for(var a in r)if(!F0(t.validRange,r[a].range))return!1;return $z({eventDrag:e},n)}function DW(e,t,n){return F0(t.validRange,e.range)?$z({dateSelection:e},n):!1}function $z(e,t){var n=t.getCurrentData(),r=xt({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},e);return(t.pluginHooks.isPropsValid||RW)(r,t)}function RW(e,t,n,r){return n===void 0&&(n={}),!(e.eventDrag&&!LW(e,t,n,r)||e.dateSelection&&!OW(e,t,n,r))}function LW(e,t,n,r){var a=t.getCurrentData(),c=e.eventDrag,h=c.mutatedEvents,o=h.defs,m=h.instances,w=qx(o,c.isEvent?e.eventUiBases:{"":a.selectionConfig});r&&(w=Zd(w,r));var A=kH(e.eventStore,c.affectedEvents.instances),P=A.defs,O=A.instances,B=qx(P,e.eventUiBases);for(var N in m){var k=m[N],V=k.range,U=w[k.defId],W=o[k.defId];if(!Uz(U.constraints,V,A,e.businessHours,t))return!1;var F=t.options.eventOverlap,z=typeof F=="function"?F:null;for(var S in O){var b=O[S];if(LT(V,b.range)){var D=B[b.defId].overlap;if(D===!1&&c.isEvent||U.overlap===!1||z&&!z(new Bi(t,P[b.defId],b),new Bi(t,W,k)))return!1}}for(var Y=a.eventStore,re=0,ae=U.allows;re<ae.length;re++){var ee=ae[re],de=xt(xt({},n),{range:k.range,allDay:W.allDay}),ke=Y.defs[W.defId],Oe=Y.instances[N],Le=void 0;if(ke?Le=new Bi(t,ke,Oe):Le=new Bi(t,W),!ee(OT(de,t),Le))return!1}}return!0}function OW(e,t,n,r){var a=e.eventStore,c=a.defs,h=a.instances,o=e.dateSelection,m=o.range,w=t.getCurrentData().selectionConfig;if(r&&(w=r(w)),!Uz(w.constraints,m,a,e.businessHours,t))return!1;var A=t.options.selectOverlap,P=typeof A=="function"?A:null;for(var O in h){var B=h[O];if(LT(m,B.range)&&(w.overlap===!1||P&&!P(new Bi(t,c[B.defId],B),null)))return!1}for(var N=0,k=w.allows;N<k.length;N++){var V=k[N],U=xt(xt({},n),o);if(!V(OT(U,t),null))return!1}return!0}function Uz(e,t,n,r,a){for(var c=0,h=e;c<h.length;c++){var o=h[c];if(!BW(zW(o,t,n,r,a),t))return!1}return!0}function zW(e,t,n,r,a){return e==="businessHours"?jw(qp(r,t,a)):typeof e=="string"?jw(B0(n,function(c){return c.groupId===e})):typeof e=="object"&&e?jw(qp(e,t,a)):[]}function jw(e){var t=e.instances,n=[];for(var r in t)n.push(t[r].range);return n}function BW(e,t){for(var n=0,r=e;n<r.length;n++){var a=r[n];if(F0(a,t))return!0}return!1}var k_=/^(visible|hidden)$/,FW=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleEl=function(r){n.el=r,Xl(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this.props,r=n.liquid,a=n.liquidIsAbsolute,c=r&&a,h=["fc-scroller"];return r&&(a?h.push("fc-scroller-liquid-absolute"):h.push("fc-scroller-liquid")),kt("div",{ref:this.handleEl,className:h.join(" "),style:{overflowX:n.overflowX,overflowY:n.overflowY,left:c&&-(n.overcomeLeft||0)||"",right:c&&-(n.overcomeRight||0)||"",bottom:c&&-(n.overcomeBottom||0)||"",marginLeft:!c&&-(n.overcomeLeft||0)||"",marginRight:!c&&-(n.overcomeRight||0)||"",marginBottom:!c&&-(n.overcomeBottom||0)||"",maxHeight:n.maxHeight||""}},n.children)},t.prototype.needsXScrolling=function(){if(k_.test(this.props.overflowX))return!1;for(var n=this.el,r=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),a=n.children,c=0;c<a.length;c+=1){var h=a[c];if(h.getBoundingClientRect().width>r)return!0}return!1},t.prototype.needsYScrolling=function(){if(k_.test(this.props.overflowY))return!1;for(var n=this.el,r=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),a=n.children,c=0;c<a.length;c+=1){var h=a[c];if(h.getBoundingClientRect().height>r)return!0}return!1},t.prototype.getXScrollbarWidth=function(){return k_.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight},t.prototype.getYScrollbarWidth=function(){return k_.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth},t}(xi),Cd=function(){function e(t){var n=this;this.masterCallback=t,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=function(r,a){var c=n,h=c.depths,o=c.currentMap,m=!1,w=!1;r!==null?(m=a in o,o[a]=r,h[a]=(h[a]||0)+1,w=!0):(h[a]-=1,h[a]||(delete o[a],delete n.callbackMap[a],m=!0)),n.masterCallback&&(m&&n.masterCallback(null,String(a)),w&&n.masterCallback(r,String(a)))}}return e.prototype.createRef=function(t){var n=this,r=this.callbackMap[t];return r||(r=this.callbackMap[t]=function(a){n.handleValue(a,String(t))}),r},e.prototype.collect=function(t,n,r){return u8(this.currentMap,t,n,r)},e.prototype.getAll=function(){return AT(this.currentMap)},e}();function NW(e){for(var t=L7(e,".fc-scrollgrid-shrink"),n=0,r=0,a=t;r<a.length;r++){var c=a[r];n=Math.max(n,X7(c))}return Math.ceil(n)}function jz(e,t){return e.liquid&&t.liquid}function $W(e,t){return t.maxHeight!=null||jz(e,t)}function UW(e,t,n,r){var a=n.expandRows,c=typeof t.content=="function"?t.content(n):kt("table",{role:"presentation",className:[t.tableClassName,e.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:a?n.clientHeight:""}},n.tableColGroupNode,kt(r?"thead":"tbody",{role:"presentation"},typeof t.rowContent=="function"?t.rowContent(n):t.rowContent));return c}function jW(e,t){return Zg(e,t,Zl)}function VW(e,t){for(var n=[],r=0,a=e;r<a.length;r++)for(var c=a[r],h=c.span||1,o=0;o<h;o+=1)n.push(kt("col",{style:{width:c.width==="shrink"?HW(t):c.width||"",minWidth:c.minWidth||""}}));return kt.apply(void 0,Ui(["colgroup",{}],n))}function HW(e){return e==null?4:e}function WW(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r.width==="shrink")return!0}return!1}function GW(e,t){var n=["fc-scrollgrid",t.theme.getClass("table")];return e&&n.push("fc-scrollgrid-liquid"),n}function qW(e,t){var n=["fc-scrollgrid-section","fc-scrollgrid-section-"+e.type,e.className];return t&&e.liquid&&e.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),e.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function ZW(e){return kt("div",{className:"fc-scrollgrid-sticky-shim",style:{width:e.clientWidth,minWidth:e.tableMinWidth}})}function EP(e){var t=e.stickyHeaderDates;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}function XW(e){var t=e.stickyFooterScrollbar;return(t==null||t==="auto")&&(t=e.height==="auto"||e.viewHeight==="auto"),t}var Vz=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.processCols=Dr(function(r){return r},jW),n.renderMicroColGroup=Dr(VW),n.scrollerRefs=new Cd,n.scrollerElRefs=new Cd(n._handleScrollerEl.bind(n)),n.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},n.handleSizing=function(){n.safeSetState(xt({shrinkWidth:n.computeShrinkWidth()},n.computeScrollerDims()))},n}return t.prototype.render=function(){var n=this,r=n.props,a=n.state,c=n.context,h=r.sections||[],o=this.processCols(r.cols),m=this.renderMicroColGroup(o,a.shrinkWidth),w=GW(r.liquid,c);r.collapsibleWidth&&w.push("fc-scrollgrid-collapsible");for(var A=h.length,P=0,O,B=[],N=[],k=[];P<A&&(O=h[P]).type==="header";)B.push(this.renderSection(O,m,!0)),P+=1;for(;P<A&&(O=h[P]).type==="body";)N.push(this.renderSection(O,m,!1)),P+=1;for(;P<A&&(O=h[P]).type==="footer";)k.push(this.renderSection(O,m,!0)),P+=1;var V=!vz(),U={role:"rowgroup"};return kt("table",{role:"grid",className:w.join(" "),style:{height:r.height}},Boolean(!V&&B.length)&&kt.apply(void 0,Ui(["thead",U],B)),Boolean(!V&&N.length)&&kt.apply(void 0,Ui(["tbody",U],N)),Boolean(!V&&k.length)&&kt.apply(void 0,Ui(["tfoot",U],k)),V&&kt.apply(void 0,Ui(Ui(Ui(["tbody",U],B),N),k)))},t.prototype.renderSection=function(n,r,a){return"outerContent"in n?kt(ca,{key:n.key},n.outerContent):kt("tr",{key:n.key,role:"presentation",className:qW(n,this.props.liquid).join(" ")},this.renderChunkTd(n,r,n.chunk,a))},t.prototype.renderChunkTd=function(n,r,a,c){if("outerContent"in a)return a.outerContent;var h=this.props,o=this.state,m=o.forceYScrollbars,w=o.scrollerClientWidths,A=o.scrollerClientHeights,P=$W(h,n),O=jz(h,n),B=h.liquid?m?"scroll":P?"auto":"hidden":"visible",N=n.key,k=UW(n,a,{tableColGroupNode:r,tableMinWidth:"",clientWidth:!h.collapsibleWidth&&w[N]!==void 0?w[N]:null,clientHeight:A[N]!==void 0?A[N]:null,expandRows:n.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:function(){}},c);return kt(c?"th":"td",{ref:a.elRef,role:"presentation"},kt("div",{className:"fc-scroller-harness"+(O?" fc-scroller-harness-liquid":"")},kt(FW,{ref:this.scrollerRefs.createRef(N),elRef:this.scrollerElRefs.createRef(N),overflowY:B,overflowX:h.liquid?"hidden":"visible",maxHeight:n.maxHeight,liquid:O,liquidIsAbsolute:!0},k)))},t.prototype._handleScrollerEl=function(n,r){var a=KW(this.props.sections,r);a&&Xl(a.chunk.scrollerElRef,n)},t.prototype.componentDidMount=function(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)},t.prototype.componentDidUpdate=function(){this.handleSizing()},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleSizing)},t.prototype.computeShrinkWidth=function(){return WW(this.props.cols)?NW(this.scrollerElRefs.getAll()):0},t.prototype.computeScrollerDims=function(){var n=NV(),r=this,a=r.scrollerRefs,c=r.scrollerElRefs,h=!1,o={},m={};for(var w in a.currentMap){var A=a.currentMap[w];if(A&&A.needsYScrolling()){h=!0;break}}for(var P=0,O=this.props.sections;P<O.length;P++){var B=O[P],w=B.key,N=c.currentMap[w];if(N){var k=N.parentNode;o[w]=Math.floor(k.getBoundingClientRect().width-(h?n.y:0)),m[w]=Math.floor(k.getBoundingClientRect().height)}}return{forceYScrollbars:h,scrollerClientWidths:o,scrollerClientHeights:m}},t}(xi);Vz.addStateEquality({scrollerClientWidths:Zl,scrollerClientHeights:Zl});function KW(e,t){for(var n=0,r=e;n<r.length;n++){var a=r[n];if(a.key===t)return a}return null}var WT=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.elRef=os(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options,h=r.seg,o=h.eventRange,m=o.ui,w={event:new Bi(a,o.def,o.instance),view:a.viewApi,timeText:r.timeText,textColor:m.textColor,backgroundColor:m.backgroundColor,borderColor:m.borderColor,isDraggable:!r.disableDragging&&K8(h,a),isStartResizable:!r.disableResizing&&Y8(h,a),isEndResizable:!r.disableResizing&&J8(h),isMirror:Boolean(r.isDragging||r.isResizing||r.isDateSelecting),isStart:Boolean(h.isStart),isEnd:Boolean(h.isEnd),isPast:Boolean(r.isPast),isFuture:Boolean(r.isFuture),isToday:Boolean(r.isToday),isSelected:Boolean(r.isSelected),isDragging:Boolean(r.isDragging),isResizing:Boolean(r.isResizing)},A=Q8(w).concat(m.classNames);return kt(uf,{hookProps:w,classNames:c.eventClassNames,content:c.eventContent,defaultContent:r.defaultContent,didMount:c.eventDidMount,willUnmount:c.eventWillUnmount,elRef:this.elRef},function(P,O,B,N){return r.children(P,A.concat(O),B,N,w)})},t.prototype.componentDidMount=function(){cP(this.elRef.current,this.props.seg)},t.prototype.componentDidUpdate=function(n){var r=this.props.seg;r!==n.seg&&cP(this.elRef.current,r)},t}(xi),YW=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=r.seg,h=a.options.eventTimeFormat||r.defaultTimeFormat,o=iz(c,h,a,r.defaultDisplayEventTime,r.defaultDisplayEventEnd);return kt(WT,{seg:c,timeText:o,disableDragging:r.disableDragging,disableResizing:r.disableResizing,defaultContent:r.defaultContent||JW,isDragging:r.isDragging,isResizing:r.isResizing,isDateSelecting:r.isDateSelecting,isSelected:r.isSelected,isPast:r.isPast,isFuture:r.isFuture,isToday:r.isToday},function(m,w,A,P,O){return kt("a",xt({className:r.extraClassNames.concat(w).join(" "),style:{borderColor:O.borderColor,backgroundColor:O.backgroundColor},ref:m},oz(c,a)),kt("div",{className:"fc-event-main",ref:A,style:{color:O.textColor}},P),O.isStartResizable&&kt("div",{className:"fc-event-resizer fc-event-resizer-start"}),O.isEndResizable&&kt("div",{className:"fc-event-resizer fc-event-resizer-end"}))})},t}(xi);function JW(e){return kt("div",{className:"fc-event-main-frame"},e.timeText&&kt("div",{className:"fc-event-time"},e.timeText),kt("div",{className:"fc-event-title-container"},kt("div",{className:"fc-event-title fc-sticky"},e.event.title||kt(ca,null,"\xA0"))))}var QW=Co({day:"numeric"}),Hz=function(e){jr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options,h=Wz({date:r.date,dateProfile:r.dateProfile,todayRange:r.todayRange,showDayNumber:r.showDayNumber,extraProps:r.extraHookProps,viewApi:a.viewApi,dateEnv:a.dateEnv});return kt(wz,{hookProps:h,content:c.dayCellContent,defaultContent:r.defaultContent},r.children)},t}(xi);function Wz(e){var t=e.date,n=e.dateEnv,r=_z(t,e.todayRange,null,e.dateProfile);return xt(xt(xt({date:n.toDate(t),view:e.viewApi},r),{dayNumberText:e.showDayNumber?n.format(t,QW):""}),e.extraProps)}var Gz=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.refineHookProps=tx(Wz),n.normalizeClassNames=Ez(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options,h=this.refineHookProps({date:r.date,dateProfile:r.dateProfile,todayRange:r.todayRange,showDayNumber:r.showDayNumber,extraProps:r.extraHookProps,viewApi:a.viewApi,dateEnv:a.dateEnv}),o=BT(h,a.theme).concat(h.isDisabled?[]:this.normalizeClassNames(c.dayCellClassNames,h)),m=h.isDisabled?{}:{"data-date":Y3(r.date)};return kt(UT,{hookProps:h,didMount:c.dayCellDidMount,willUnmount:c.dayCellWillUnmount,elRef:r.elRef},function(w){return r.children(w,o,m,h.isDisabled)})},t}(xi);function eG(e){return kt("div",{className:"fc-"+e})}var tG=function(e){return kt(WT,{defaultContent:nG,seg:e.seg,timeText:"",disableDragging:!0,disableResizing:!0,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday},function(t,n,r,a,c){return kt("div",{ref:t,className:["fc-bg-event"].concat(n).join(" "),style:{backgroundColor:c.backgroundColor}},a)})};function nG(e){var t=e.event.title;return t&&kt("div",{className:"fc-event-title"},e.event.title)}var rG=function(e){return kt(Xd.Consumer,null,function(t){var n=t.dateEnv,r=t.options,a=e.date,c=r.weekNumberFormat||e.defaultFormat,h=n.computeWeekNumber(a),o=n.format(a,c),m={num:h,text:o,date:a};return kt(uf,{hookProps:m,classNames:r.weekNumberClassNames,content:r.weekNumberContent,defaultContent:iG,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},e.children)})};function iG(e){return e.text}var Vw=10,oG=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.state={titleId:O0()},n.handleRootEl=function(r){n.rootEl=r,n.props.elRef&&Xl(n.props.elRef,r)},n.handleDocumentMouseDown=function(r){var a=H3(r);n.rootEl.contains(a)||n.handleCloseClick()},n.handleDocumentKeyDown=function(r){r.key==="Escape"&&n.handleCloseClick()},n.handleCloseClick=function(){var r=n.props.onClose;r&&r()},n}return t.prototype.render=function(){var n=this.context,r=n.theme,a=n.options,c=this,h=c.props,o=c.state,m=["fc-popover",r.getClass("popover")].concat(h.extraClassNames||[]);return D7(kt("div",xt({id:h.id,className:m.join(" "),"aria-labelledby":o.titleId},h.extraAttrs,{ref:this.handleRootEl}),kt("div",{className:"fc-popover-header "+r.getClass("popoverHeader")},kt("span",{className:"fc-popover-title",id:o.titleId},h.title),kt("span",{className:"fc-popover-close "+r.getIconClass("close"),title:a.closeHint,onClick:this.handleCloseClick})),kt("div",{className:"fc-popover-body "+r.getClass("popoverContent")},h.children)),h.parentEl)},t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)},t.prototype.updateSize=function(){var n=this.context.isRtl,r=this.props,a=r.alignmentEl,c=r.alignGridTop,h=this.rootEl,o=VV(a);if(o){var m=h.getBoundingClientRect(),w=c?jo(a,".fc-scrollgrid").getBoundingClientRect().top:o.top,A=n?o.right-m.width:o.left;w=Math.max(w,Vw),A=Math.min(A,document.documentElement.clientWidth-Vw-m.width),A=Math.max(A,Vw);var P=h.offsetParent.getBoundingClientRect();fg(h,{top:w-P.top,left:A-P.left})}},t}(xi),aG=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handleRootEl=function(r){n.rootEl=r,r?n.context.registerInteractiveComponent(n,{el:r,useEventCenter:!1}):n.context.unregisterInteractiveComponent(n)},n}return t.prototype.render=function(){var n=this.context,r=n.options,a=n.dateEnv,c=this.props,h=c.startDate,o=c.todayRange,m=c.dateProfile,w=a.format(h,r.dayPopoverFormat);return kt(Gz,{date:h,dateProfile:m,todayRange:o,elRef:this.handleRootEl},function(A,P,O){return kt(oG,{elRef:A,id:c.id,title:w,extraClassNames:["fc-more-popover"].concat(P),extraAttrs:O,parentEl:c.parentEl,alignmentEl:c.alignmentEl,alignGridTop:c.alignGridTop,onClose:c.onClose},kt(Hz,{date:h,dateProfile:m,todayRange:o},function(B,N){return N&&kt("div",{className:"fc-more-popover-misc",ref:B},N)}),c.children)})},t.prototype.queryHit=function(n,r,a,c){var h=this,o=h.rootEl,m=h.props;return n>=0&&n<a&&r>=0&&r<c?{dateProfile:m.dateProfile,dateSpan:xt({allDay:!0,range:{start:m.startDate,end:m.endDate}},m.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:a,bottom:c},layer:1}:null},t}(lf),sG=function(e){jr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.linkElRef=os(),n.state={isPopoverOpen:!1,popoverId:O0()},n.handleClick=function(r){var a=n,c=a.props,h=a.context,o=h.options.moreLinkClick,m=CP(c).start;function w(A){var P=A.eventRange,O=P.def,B=P.instance,N=P.range;return{event:new Bi(h,O,B),start:h.dateEnv.toDate(N.start),end:h.dateEnv.toDate(N.end),isStart:A.isStart,isEnd:A.isEnd}}typeof o=="function"&&(o=o({date:m,allDay:Boolean(c.allDayDate),allSegs:c.allSegs.map(w),hiddenSegs:c.hiddenSegs.map(w),jsEvent:r,view:h.viewApi})),!o||o==="popover"?n.setState({isPopoverOpen:!0}):typeof o=="string"&&h.calendarApi.zoomTo(m,o)},n.handlePopoverClose=function(){n.setState({isPopoverOpen:!1})},n}return t.prototype.render=function(){var n=this,r=this,a=r.props,c=r.state;return kt(Xd.Consumer,null,function(h){var o=h.viewApi,m=h.options,w=h.calendarApi,A=m.moreLinkText,P=a.moreCnt,O=CP(a),B=typeof A=="function"?A.call(w,P):"+"+P+" "+A,N=mg(m.moreLinkHint,[P],B),k={num:P,shortText:"+"+P,text:B,view:o};return kt(ca,null,Boolean(a.moreCnt)&&kt(uf,{elRef:n.linkElRef,hookProps:k,classNames:m.moreLinkClassNames,content:m.moreLinkContent,defaultContent:a.defaultContent||lG,didMount:m.moreLinkDidMount,willUnmount:m.moreLinkWillUnmount},function(V,U,W,F){return a.children(V,["fc-more-link"].concat(U),W,F,n.handleClick,N,c.isPopoverOpen,c.isPopoverOpen?c.popoverId:"")}),c.isPopoverOpen&&kt(aG,{id:c.popoverId,startDate:O.start,endDate:O.end,dateProfile:a.dateProfile,todayRange:a.todayRange,extraDateSpan:a.extraDateSpan,parentEl:n.parentEl,alignmentEl:a.alignmentElRef.current,alignGridTop:a.alignGridTop,onClose:n.handlePopoverClose},a.popoverContent()))})},t.prototype.componentDidMount=function(){this.updateParentEl()},t.prototype.componentDidUpdate=function(){this.updateParentEl()},t.prototype.updateParentEl=function(){this.linkElRef.current&&(this.parentEl=jo(this.linkElRef.current,".fc-view-harness"))},t}(xi);function lG(e){return e.text}function CP(e){if(e.allDayDate)return{start:e.allDayDate,end:Jo(e.allDayDate,1)};var t=e.hiddenSegs;return{start:uG(t),end:dG(t)}}function uG(e){return e.reduce(cG).eventRange.range.start}function cG(e,t){return e.eventRange.range.start<t.eventRange.range.start?e:t}function dG(e){return e.reduce(hG).eventRange.range.end}function hG(e,t){return e.eventRange.range.end>t.eventRange.range.end?e:t}var pG=function(e){P7(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._calendarApi=new gV,n}return t.prototype.render=function(){return g.exports.createElement(hW,{optionOverrides:this.props,calendarApi:this._calendarApi},function(n){return g.exports.createElement(wW,{options:n.calendarOptions,theme:n.theme,emitter:n.emitter},function(r,a,c,h){return g.exports.createElement("div",{className:r.join(" "),style:{height:a}},g.exports.createElement(_W,AC({isHeightAuto:c,forPrint:h},n)))})})},t.prototype.getApi=function(){return this._calendarApi},t}(g.exports.Component);var FC=function(e,t){return FC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},FC(e,t)};function Ba(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");FC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ai=function(){return Ai=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},Ai.apply(this,arguments)};function fG(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,c;r<a;r++)(c||!(r in t))&&(c||(c=Array.prototype.slice.call(t,0,r)),c[r]=t[r]);return e.concat(c||Array.prototype.slice.call(t))}/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/var mG=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.headerElRef=os(),n}return t.prototype.renderSimpleLayout=function(n,r){var a=this,c=a.props,h=a.context,o=[],m=EP(h.options);return n&&o.push({type:"header",key:"header",isSticky:m,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:n}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:r}}),kt(zC,{viewSpec:h.viewSpec},function(w,A){return kt("div",{ref:w,className:["fc-daygrid"].concat(A).join(" ")},kt(Vz,{liquid:!c.isHeightAuto&&!c.forPrint,collapsibleWidth:c.forPrint,cols:[],sections:o}))})},t.prototype.renderHScrollLayout=function(n,r,a,c){var h=this.context.pluginHooks.scrollGridImpl;if(!h)throw new Error("No ScrollGrid implementation");var o=this,m=o.props,w=o.context,A=!m.forPrint&&EP(w.options),P=!m.forPrint&&XW(w.options),O=[];return n&&O.push({type:"header",key:"header",isSticky:A,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:n}]}),O.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:r}]}),P&&O.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:ZW}]}),kt(zC,{viewSpec:w.viewSpec},function(B,N){return kt("div",{ref:B,className:["fc-daygrid"].concat(N).join(" ")},kt(h,{liquid:!m.isHeightAuto&&!m.forPrint,collapsibleWidth:m.forPrint,colGroups:[{cols:[{span:a,minWidth:c}]}],sections:O}))})},t}(lf);function A_(e,t){for(var n=[],r=0;r<t;r+=1)n[r]=[];for(var a=0,c=e;a<c.length;a++){var h=c[a];n[h.row].push(h)}return n}function M_(e,t){for(var n=[],r=0;r<t;r+=1)n[r]=[];for(var a=0,c=e;a<c.length;a++){var h=c[a];n[h.firstCol].push(h)}return n}function SP(e,t){var n=[];if(e){for(var r=0;r<t;r+=1)n[r]={affectedInstances:e.affectedInstances,isEvent:e.isEvent,segs:[]};for(var a=0,c=e.segs;a<c.length;a++){var h=c[a];n[h.row].segs.push(h)}}else for(var r=0;r<t;r+=1)n[r]=null;return n}var gG=function(e){Ba(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props,r=FT(this.context,n.date);return kt(Hz,{date:n.date,dateProfile:n.dateProfile,todayRange:n.todayRange,showDayNumber:n.showDayNumber,extraHookProps:n.extraHookProps,defaultContent:yG},function(a,c){return(c||n.forceDayTop)&&kt("div",{className:"fc-daygrid-day-top",ref:a},kt("a",Ai({id:n.dayNumberId,className:"fc-daygrid-day-number"},r),c||kt(ca,null,"\xA0")))})},t}(xi);function yG(e){return e.dayNumberText}var qz=Co({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function Zz(e){var t=e.eventRange.ui.display;return t==="list-item"||t==="auto"&&!e.eventRange.def.allDay&&e.firstCol===e.lastCol&&e.isStart&&e.isEnd}var Xz=function(e){Ba(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this.props;return kt(YW,Ai({},n,{extraClassNames:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:qz,defaultDisplayEventEnd:n.defaultDisplayEventEnd,disableResizing:!n.seg.eventRange.def.allDay}))},t}(xi),Kz=function(e){Ba(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(){var n=this,r=n.props,a=n.context,c=a.options.eventTimeFormat||qz,h=iz(r.seg,c,a,!0,r.defaultDisplayEventEnd);return kt(WT,{seg:r.seg,timeText:h,defaultContent:vG,isDragging:r.isDragging,isResizing:!1,isDateSelecting:!1,isSelected:r.isSelected,isPast:r.isPast,isFuture:r.isFuture,isToday:r.isToday},function(o,m,w,A){return kt("a",Ai({className:["fc-daygrid-event","fc-daygrid-dot-event"].concat(m).join(" "),ref:o},oz(r.seg,a)),A)})},t}(xi);function vG(e){return kt(ca,null,kt("div",{className:"fc-daygrid-event-dot",style:{borderColor:e.borderColor||e.backgroundColor}}),e.timeText&&kt("div",{className:"fc-event-time"},e.timeText),kt("div",{className:"fc-event-title"},e.event.title||kt(ca,null,"\xA0")))}var _G=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.compileSegs=Dr(xG),n}return t.prototype.render=function(){var n=this.props,r=this.compileSegs(n.singlePlacements),a=r.allSegs,c=r.invisibleSegs;return kt(sG,{dateProfile:n.dateProfile,todayRange:n.todayRange,allDayDate:n.allDayDate,moreCnt:n.moreCnt,allSegs:a,hiddenSegs:c,alignmentElRef:n.alignmentElRef,alignGridTop:n.alignGridTop,extraDateSpan:n.extraDateSpan,popoverContent:function(){var h=(n.eventDrag?n.eventDrag.affectedInstances:null)||(n.eventResize?n.eventResize.affectedInstances:null)||{};return kt(ca,null,a.map(function(o){var m=o.eventRange.instance.instanceId;return kt("div",{className:"fc-daygrid-event-harness",key:m,style:{visibility:h[m]?"hidden":""}},Zz(o)?kt(Kz,Ai({seg:o,isDragging:!1,isSelected:m===n.eventSelection,defaultDisplayEventEnd:!1},yg(o,n.todayRange))):kt(Xz,Ai({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:m===n.eventSelection,defaultDisplayEventEnd:!1},yg(o,n.todayRange))))}))}},function(h,o,m,w,A,P,O,B){return kt("a",Ai({ref:h,className:["fc-daygrid-more-link"].concat(o).join(" "),title:P,"aria-expanded":O,"aria-controls":B},q3(A)),w)})},t}(xi);function xG(e){for(var t=[],n=[],r=0,a=e;r<a.length;r++){var c=a[r];t.push(c.seg),c.isVisible||n.push(c.seg)}return{allSegs:t,invisibleSegs:n}}var bG=Co({week:"narrow"}),wG=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.rootElRef=os(),n.state={dayNumberId:O0()},n.handleRootEl=function(r){Xl(n.rootElRef,r),Xl(n.props.elRef,r)},n}return t.prototype.render=function(){var n=this,r=n.context,a=n.props,c=n.state,h=n.rootElRef,o=a.date,m=a.dateProfile,w=FT(r,o,"week");return kt(Gz,{date:o,dateProfile:m,todayRange:a.todayRange,showDayNumber:a.showDayNumber,extraHookProps:a.extraHookProps,elRef:this.handleRootEl},function(A,P,O,B){return kt("td",Ai({ref:A,role:"gridcell",className:["fc-daygrid-day"].concat(P,a.extraClassNames||[]).join(" ")},O,a.extraDataAttrs,a.showDayNumber?{"aria-labelledby":c.dayNumberId}:{}),kt("div",{className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",ref:a.innerElRef},a.showWeekNumber&&kt(rG,{date:o,defaultFormat:bG},function(N,k,V,U){return kt("a",Ai({ref:N,className:["fc-daygrid-week-number"].concat(k).join(" ")},w),U)}),!B&&kt(gG,{date:o,dateProfile:m,showDayNumber:a.showDayNumber,dayNumberId:c.dayNumberId,forceDayTop:a.forceDayTop,todayRange:a.todayRange,extraHookProps:a.extraHookProps}),kt("div",{className:"fc-daygrid-day-events",ref:a.fgContentElRef},a.fgContent,kt("div",{className:"fc-daygrid-day-bottom",style:{marginTop:a.moreMarginTop}},kt(_G,{allDayDate:o,singlePlacements:a.singlePlacements,moreCnt:a.moreCnt,alignmentElRef:h,alignGridTop:!a.showDayNumber,extraDateSpan:a.extraDateSpan,dateProfile:a.dateProfile,eventSelection:a.eventSelection,eventDrag:a.eventDrag,eventResize:a.eventResize,todayRange:a.todayRange}))),kt("div",{className:"fc-daygrid-day-bg"},a.bgContent)))})},t}(lf);function EG(e,t,n,r,a,c,h){var o=new TG;o.allowReslicing=!0,o.strictOrder=r,t===!0||n===!0?(o.maxCoord=c,o.hiddenConsumes=!0):typeof t=="number"?o.maxStackCnt=t:typeof n=="number"&&(o.maxStackCnt=n,o.hiddenConsumes=!0);for(var m=[],w=[],A=0;A<e.length;A+=1){var P=e[A],O=P.eventRange.instance.instanceId,B=a[O];B!=null?m.push({index:A,thickness:B,span:{start:P.firstCol,end:P.lastCol+1}}):w.push(P)}for(var N=o.addSegs(m),k=o.toRects(),V=CG(k,e,h),U=V.singleColPlacements,W=V.multiColPlacements,F=V.leftoverMargins,z=[],S=[],b=0,D=w;b<D.length;b++){var P=D[b];W[P.firstCol].push({seg:P,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var Y=P.firstCol;Y<=P.lastCol;Y+=1)U[Y].push({seg:Rp(P,Y,Y+1,h),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(var Y=0;Y<h.length;Y+=1)z.push(0);for(var re=0,ae=N;re<ae.length;re++){var ee=ae[re],P=e[ee.index],de=ee.span;W[de.start].push({seg:Rp(P,de.start,de.end,h),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(var Y=de.start;Y<de.end;Y+=1)z[Y]+=1,U[Y].push({seg:Rp(P,Y,Y+1,h),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(var Y=0;Y<h.length;Y+=1)S.push(F[Y]);return{singleColPlacements:U,multiColPlacements:W,moreCnts:z,moreMarginTops:S}}function CG(e,t,n){for(var r=SG(e,n.length),a=[],c=[],h=[],o=0;o<n.length;o+=1){for(var m=r[o],w=[],A=0,P=0,O=0,B=m;O<B.length;O++){var N=B[O],k=t[N.index];w.push({seg:Rp(k,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:N.levelCoord-A}),A=N.levelCoord+N.thickness}var V=[];A=0,P=0;for(var U=0,W=m;U<W.length;U++){var N=W[U],k=t[N.index],F=N.span.end-N.span.start>1,z=N.span.start===o;P+=N.levelCoord-A,A=N.levelCoord+N.thickness,F?(P+=N.thickness,z&&V.push({seg:Rp(k,N.span.start,N.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:N.levelCoord,marginTop:0})):z&&(V.push({seg:Rp(k,N.span.start,N.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:P}),P=0)}a.push(w),c.push(V),h.push(P)}return{singleColPlacements:a,multiColPlacements:c,leftoverMargins:h}}function SG(e,t){for(var n=[],r=0;r<t;r+=1)n.push([]);for(var a=0,c=e;a<c.length;a++)for(var h=c[a],r=h.span.start;r<h.span.end;r+=1)n[r].push(h);return n}function Rp(e,t,n,r){if(e.firstCol===t&&e.lastCol===n-1)return e;var a=e.eventRange,c=a.range,h=Xg(c,{start:r[t].date,end:Jo(r[n-1].date,1)});return Ai(Ai({},e),{firstCol:t,lastCol:n-1,eventRange:{def:a.def,ui:Ai(Ai({},a.ui),{durationEditable:!1}),instance:a.instance,range:h},isStart:e.isStart&&h.start.valueOf()===c.start.valueOf(),isEnd:e.isEnd&&h.end.valueOf()===c.end.valueOf()})}var TG=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.hiddenConsumes=!1,n.forceHidden={},n}return t.prototype.addSegs=function(n){for(var r=this,a=e.prototype.addSegs.call(this,n),c=this.entriesByLevel,h=function(m){return!r.forceHidden[vg(m)]},o=0;o<c.length;o+=1)c[o]=c[o].filter(h);return a},t.prototype.handleInvalidInsertion=function(n,r,a){var c=this,h=c.entriesByLevel,o=c.forceHidden,m=n.touchingEntry,w=n.touchingLevel,A=n.touchingLateral;if(this.hiddenConsumes&&m){var P=vg(m);if(!o[P])if(this.allowReslicing){var O=Ai(Ai({},m),{span:Lz(m.span,r.span)}),B=vg(O);o[B]=!0,h[w][A]=O,this.splitEntry(m,r,a)}else o[P]=!0,a.push(m)}return e.prototype.handleInvalidInsertion.call(this,n,r,a)},t}(pW),Yz=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.cellElRefs=new Cd,n.frameElRefs=new Cd,n.fgElRefs=new Cd,n.segHarnessRefs=new Cd,n.rootElRef=os(),n.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},n}return t.prototype.render=function(){var n=this,r=this,a=r.props,c=r.state,h=r.context,o=h.options,m=a.cells.length,w=M_(a.businessHourSegs,m),A=M_(a.bgEventSegs,m),P=M_(this.getHighlightSegs(),m),O=M_(this.getMirrorSegs(),m),B=EG(Z8(a.fgEventSegs,o.eventOrder),a.dayMaxEvents,a.dayMaxEventRows,o.eventOrderStrict,c.eventInstanceHeights,c.maxContentHeight,a.cells),N=B.singleColPlacements,k=B.multiColPlacements,V=B.moreCnts,U=B.moreMarginTops,W=a.eventDrag&&a.eventDrag.affectedInstances||a.eventResize&&a.eventResize.affectedInstances||{};return kt("tr",{ref:this.rootElRef,role:"row"},a.renderIntro&&a.renderIntro(),a.cells.map(function(F,z){var S=n.renderFgSegs(z,a.forPrint?N[z]:k[z],a.todayRange,W),b=n.renderFgSegs(z,kG(O[z],k),a.todayRange,{},Boolean(a.eventDrag),Boolean(a.eventResize),!1);return kt(wG,{key:F.key,elRef:n.cellElRefs.createRef(F.key),innerElRef:n.frameElRefs.createRef(F.key),dateProfile:a.dateProfile,date:F.date,showDayNumber:a.showDayNumbers,showWeekNumber:a.showWeekNumbers&&z===0,forceDayTop:a.showWeekNumbers,todayRange:a.todayRange,eventSelection:a.eventSelection,eventDrag:a.eventDrag,eventResize:a.eventResize,extraHookProps:F.extraHookProps,extraDataAttrs:F.extraDataAttrs,extraClassNames:F.extraClassNames,extraDateSpan:F.extraDateSpan,moreCnt:V[z],moreMarginTop:U[z],singlePlacements:N[z],fgContentElRef:n.fgElRefs.createRef(F.key),fgContent:kt(ca,null,kt(ca,null,S),kt(ca,null,b)),bgContent:kt(ca,null,n.renderFillSegs(P[z],"highlight"),n.renderFillSegs(w[z],"non-business"),n.renderFillSegs(A[z],"bg-event"))})}))},t.prototype.componentDidMount=function(){this.updateSizing(!0)},t.prototype.componentDidUpdate=function(n,r){var a=this.props;this.updateSizing(!Zl(n,a))},t.prototype.getHighlightSegs=function(){var n=this.props;return n.eventDrag&&n.eventDrag.segs.length?n.eventDrag.segs:n.eventResize&&n.eventResize.segs.length?n.eventResize.segs:n.dateSelectionSegs},t.prototype.getMirrorSegs=function(){var n=this.props;return n.eventResize&&n.eventResize.segs.length?n.eventResize.segs:[]},t.prototype.renderFgSegs=function(n,r,a,c,h,o,m){var w=this.context,A=this.props.eventSelection,P=this.state.framePositions,O=this.props.cells.length===1,B=h||o||m,N=[];if(P)for(var k=0,V=r;k<V.length;k++){var U=V[k],W=U.seg,F=W.eventRange.instance.instanceId,z=F+":"+n,S=U.isVisible&&!c[F],b=U.isAbsolute,D="",Y="";b&&(w.isRtl?(Y=0,D=P.lefts[W.lastCol]-P.lefts[W.firstCol]):(D=0,Y=P.rights[W.firstCol]-P.rights[W.lastCol])),N.push(kt("div",{className:"fc-daygrid-event-harness"+(b?" fc-daygrid-event-harness-abs":""),key:z,ref:B?null:this.segHarnessRefs.createRef(z),style:{visibility:S?"":"hidden",marginTop:b?"":U.marginTop,top:b?U.absoluteTop:"",left:D,right:Y}},Zz(W)?kt(Kz,Ai({seg:W,isDragging:h,isSelected:F===A,defaultDisplayEventEnd:O},yg(W,a))):kt(Xz,Ai({seg:W,isDragging:h,isResizing:o,isDateSelecting:m,isSelected:F===A,defaultDisplayEventEnd:O},yg(W,a)))))}return N},t.prototype.renderFillSegs=function(n,r){var a=this.context.isRtl,c=this.props.todayRange,h=this.state.framePositions,o=[];if(h)for(var m=0,w=n;m<w.length;m++){var A=w[m],P=a?{right:0,left:h.lefts[A.lastCol]-h.lefts[A.firstCol]}:{left:0,right:h.rights[A.firstCol]-h.rights[A.lastCol]};o.push(kt("div",{key:eV(A.eventRange),className:"fc-daygrid-bg-harness",style:P},r==="bg-event"?kt(tG,Ai({seg:A},yg(A,c))):eG(r)))}return kt.apply(void 0,fG([ca,{}],o))},t.prototype.updateSizing=function(n){var r=this,a=r.props,c=r.frameElRefs;if(!a.forPrint&&a.clientWidth!==null){if(n){var h=a.cells.map(function(P){return c.currentMap[P.key]});if(h.length){var o=this.rootElRef.current;this.setState({framePositions:new LC(o,h,!0,!1)})}}var m=this.state.eventInstanceHeights,w=this.queryEventInstanceHeights(),A=a.dayMaxEvents===!0||a.dayMaxEventRows===!0;this.safeSetState({eventInstanceHeights:Ai(Ai({},m),w),maxContentHeight:A?this.computeMaxContentHeight():null})}},t.prototype.queryEventInstanceHeights=function(){var n=this.segHarnessRefs.currentMap,r={};for(var a in n){var c=Math.round(n[a].getBoundingClientRect().height),h=a.split(":")[0];r[h]=Math.max(r[h]||0,c)}return r},t.prototype.computeMaxContentHeight=function(){var n=this.props.cells[0].key,r=this.cellElRefs.currentMap[n],a=this.fgElRefs.currentMap[n];return r.getBoundingClientRect().bottom-a.getBoundingClientRect().top},t.prototype.getCellEls=function(){var n=this.cellElRefs.currentMap;return this.props.cells.map(function(r){return n[r.key]})},t}(lf);Yz.addStateEquality({eventInstanceHeights:Zl});function kG(e,t){if(!e.length)return[];var n=AG(t);return e.map(function(r){return{seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}})}function AG(e){for(var t={},n=0,r=e;n<r.length;n++)for(var a=r[n],c=0,h=a;c<h.length;c++){var o=h[c];t[o.seg.eventRange.instance.instanceId]=o.absoluteTop}return t}var MG=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.splitBusinessHourSegs=Dr(A_),n.splitBgEventSegs=Dr(A_),n.splitFgEventSegs=Dr(A_),n.splitDateSelectionSegs=Dr(A_),n.splitEventDrag=Dr(SP),n.splitEventResize=Dr(SP),n.rowRefs=new Cd,n.handleRootEl=function(r){n.rootEl=r,r?n.context.registerInteractiveComponent(n,{el:r,isHitComboAllowed:n.props.isHitComboAllowed}):n.context.unregisterInteractiveComponent(n)},n}return t.prototype.render=function(){var n=this,r=this.props,a=r.dateProfile,c=r.dayMaxEventRows,h=r.dayMaxEvents,o=r.expandRows,m=r.cells.length,w=this.splitBusinessHourSegs(r.businessHourSegs,m),A=this.splitBgEventSegs(r.bgEventSegs,m),P=this.splitFgEventSegs(r.fgEventSegs,m),O=this.splitDateSelectionSegs(r.dateSelectionSegs,m),B=this.splitEventDrag(r.eventDrag,m),N=this.splitEventResize(r.eventResize,m),k=h===!0||c===!0;k&&!o&&(k=!1,c=null,h=null);var V=["fc-daygrid-body",k?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",o?"":"fc-daygrid-body-natural"];return kt("div",{className:V.join(" "),ref:this.handleRootEl,style:{width:r.clientWidth,minWidth:r.tableMinWidth}},kt(Fz,{unit:"day"},function(U,W){return kt(ca,null,kt("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:r.clientWidth,minWidth:r.tableMinWidth,height:o?r.clientHeight:""}},r.colGroupNode,kt("tbody",{role:"presentation"},r.cells.map(function(F,z){return kt(Yz,{ref:n.rowRefs.createRef(z),key:F.length?F[0].date.toISOString():z,showDayNumbers:m>1,showWeekNumbers:r.showWeekNumbers,todayRange:W,dateProfile:a,cells:F,renderIntro:r.renderRowIntro,businessHourSegs:w[z],eventSelection:r.eventSelection,bgEventSegs:A[z].filter(IG),fgEventSegs:P[z],dateSelectionSegs:O[z],eventDrag:B[z],eventResize:N[z],dayMaxEvents:h,dayMaxEventRows:c,clientWidth:r.clientWidth,clientHeight:r.clientHeight,forPrint:r.forPrint})}))))}))},t.prototype.prepareHits=function(){this.rowPositions=new LC(this.rootEl,this.rowRefs.collect().map(function(n){return n.getCellEls()[0]}),!1,!0),this.colPositions=new LC(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)},t.prototype.queryHit=function(n,r){var a=this,c=a.colPositions,h=a.rowPositions,o=c.leftToIndex(n),m=h.topToIndex(r);if(m!=null&&o!=null){var w=this.props.cells[m][o];return{dateProfile:this.props.dateProfile,dateSpan:Ai({range:this.getCellRange(m,o),allDay:!0},w.extraDateSpan),dayEl:this.getCellEl(m,o),rect:{left:c.lefts[o],right:c.rights[o],top:h.tops[m],bottom:h.bottoms[m]},layer:0}}return null},t.prototype.getCellEl=function(n,r){return this.rowRefs.currentMap[n].getCellEls()[r]},t.prototype.getCellRange=function(n,r){var a=this.props.cells[n][r].date,c=Jo(a,1);return{start:a,end:c}},t}(lf);function IG(e){return e.eventRange.def.allDay}var PG=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.forceDayIfListItem=!0,n}return t.prototype.sliceRange=function(n,r){return r.sliceRange(n)},t}(PW),DG=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.slicer=new PG,n.tableRef=os(),n}return t.prototype.render=function(){var n=this,r=n.props,a=n.context;return kt(MG,Ai({ref:this.tableRef},this.slicer.sliceProps(r,r.dateProfile,r.nextDayThreshold,a,r.dayTableModel),{dateProfile:r.dateProfile,cells:r.dayTableModel.cells,colGroupNode:r.colGroupNode,tableMinWidth:r.tableMinWidth,renderRowIntro:r.renderRowIntro,dayMaxEvents:r.dayMaxEvents,dayMaxEventRows:r.dayMaxEventRows,showWeekNumbers:r.showWeekNumbers,expandRows:r.expandRows,headerAlignElRef:r.headerAlignElRef,clientWidth:r.clientWidth,clientHeight:r.clientHeight,forPrint:r.forPrint}))},t}(lf),RG=function(e){Ba(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.buildDayTableModel=Dr(LG),n.headerRef=os(),n.tableRef=os(),n}return t.prototype.render=function(){var n=this,r=this.context,a=r.options,c=r.dateProfileGenerator,h=this.props,o=this.buildDayTableModel(h.dateProfile,c),m=a.dayHeaders&&kt(kW,{ref:this.headerRef,dateProfile:h.dateProfile,dates:o.headerDates,datesRepDistinctDays:o.rowCnt===1}),w=function(A){return kt(DG,{ref:n.tableRef,dateProfile:h.dateProfile,dayTableModel:o,businessHours:h.businessHours,dateSelection:h.dateSelection,eventStore:h.eventStore,eventUiBases:h.eventUiBases,eventSelection:h.eventSelection,eventDrag:h.eventDrag,eventResize:h.eventResize,nextDayThreshold:a.nextDayThreshold,colGroupNode:A.tableColGroupNode,tableMinWidth:A.tableMinWidth,dayMaxEvents:a.dayMaxEvents,dayMaxEventRows:a.dayMaxEventRows,showWeekNumbers:a.weekNumbers,expandRows:!h.isHeightAuto,headerAlignElRef:n.headerElRef,clientWidth:A.clientWidth,clientHeight:A.clientHeight,forPrint:h.forPrint})};return a.dayMinWidth?this.renderHScrollLayout(m,w,o.colCnt,a.dayMinWidth):this.renderSimpleLayout(m,w)},t}(mG);function LG(e,t){var n=new MW(e.renderRange,t);return new IW(n,/year|month|week/.test(e.currentRangeUnit))}var OG=function(e){Ba(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.buildRenderRange=function(n,r,a){var c=this.props.dateEnv,h=e.prototype.buildRenderRange.call(this,n,r,a),o=h.start,m=h.end,w;if(/^(year|month)$/.test(r)&&(o=c.startOfWeek(o),w=c.startOfWeek(m),w.valueOf()!==m.valueOf()&&(m=YI(w,1))),this.props.monthMode&&this.props.fixedWeekCount){var A=Math.ceil(Y7(o,m));m=YI(m,6-A)}return{start:o,end:m}},t}(Sz),zG=fc({initialView:"dayGridMonth",views:{dayGrid:{component:RG,dateProfileGeneratorClass:OG},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},monthMode:!0,fixedWeekCount:!0}}}),NC=function(e,t){return NC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},NC(e,t)};function eu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");NC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var eo=function(){return eo=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},eo.apply(this,arguments)};/*!
FullCalendar v5.11.4
Docs & License: https://fullcalendar.io/
(c) 2022 Adam Shaw
*/HT.touchMouseIgnoreWait=500;var $C=0,Zx=0,UC=!1,GT=function(){function e(t){var n=this;this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=function(r){if(!n.shouldIgnoreMouse()&&BG(r)&&n.tryStart(r)){var a=n.createEventFromMouse(r,!0);n.emitter.trigger("pointerdown",a),n.initScrollWatch(a),n.shouldIgnoreMove||document.addEventListener("mousemove",n.handleMouseMove),document.addEventListener("mouseup",n.handleMouseUp)}},this.handleMouseMove=function(r){var a=n.createEventFromMouse(r);n.recordCoords(a),n.emitter.trigger("pointermove",a)},this.handleMouseUp=function(r){document.removeEventListener("mousemove",n.handleMouseMove),document.removeEventListener("mouseup",n.handleMouseUp),n.emitter.trigger("pointerup",n.createEventFromMouse(r)),n.cleanup()},this.handleTouchStart=function(r){if(n.tryStart(r)){n.isTouchDragging=!0;var a=n.createEventFromTouch(r,!0);n.emitter.trigger("pointerdown",a),n.initScrollWatch(a);var c=r.target;n.shouldIgnoreMove||c.addEventListener("touchmove",n.handleTouchMove),c.addEventListener("touchend",n.handleTouchEnd),c.addEventListener("touchcancel",n.handleTouchEnd),window.addEventListener("scroll",n.handleTouchScroll,!0)}},this.handleTouchMove=function(r){var a=n.createEventFromTouch(r);n.recordCoords(a),n.emitter.trigger("pointermove",a)},this.handleTouchEnd=function(r){if(n.isDragging){var a=r.target;a.removeEventListener("touchmove",n.handleTouchMove),a.removeEventListener("touchend",n.handleTouchEnd),a.removeEventListener("touchcancel",n.handleTouchEnd),window.removeEventListener("scroll",n.handleTouchScroll,!0),n.emitter.trigger("pointerup",n.createEventFromTouch(r)),n.cleanup(),n.isTouchDragging=!1,FG()}},this.handleTouchScroll=function(){n.wasTouchScroll=!0},this.handleScroll=function(r){if(!n.shouldIgnoreMove){var a=window.pageXOffset-n.prevScrollX+n.prevPageX,c=window.pageYOffset-n.prevScrollY+n.prevPageY;n.emitter.trigger("pointermove",{origEvent:r,isTouch:n.isTouchDragging,subjectEl:n.subjectEl,pageX:a,pageY:c,deltaX:a-n.origPageX,deltaY:c-n.origPageY})}},this.containerEl=t,this.emitter=new N0,t.addEventListener("mousedown",this.handleMouseDown),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),NG()}return e.prototype.destroy=function(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),$G()},e.prototype.tryStart=function(t){var n=this.querySubjectEl(t),r=t.target;return n&&(!this.handleSelector||jo(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1},e.prototype.cleanup=function(){UC=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()},e.prototype.querySubjectEl=function(t){return this.selector?jo(t.target,this.selector):this.containerEl},e.prototype.shouldIgnoreMouse=function(){return $C||this.isTouchDragging},e.prototype.cancelTouchScroll=function(){this.isDragging&&(UC=!0)},e.prototype.initScrollWatch=function(t){this.shouldWatchScroll&&(this.recordCoords(t),window.addEventListener("scroll",this.handleScroll,!0))},e.prototype.recordCoords=function(t){this.shouldWatchScroll&&(this.prevPageX=t.pageX,this.prevPageY=t.pageY,this.prevScrollX=window.pageXOffset,this.prevScrollY=window.pageYOffset)},e.prototype.destroyScrollWatch=function(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)},e.prototype.createEventFromMouse=function(t,n){var r=0,a=0;return n?(this.origPageX=t.pageX,this.origPageY=t.pageY):(r=t.pageX-this.origPageX,a=t.pageY-this.origPageY),{origEvent:t,isTouch:!1,subjectEl:this.subjectEl,pageX:t.pageX,pageY:t.pageY,deltaX:r,deltaY:a}},e.prototype.createEventFromTouch=function(t,n){var r=t.touches,a,c,h=0,o=0;return r&&r.length?(a=r[0].pageX,c=r[0].pageY):(a=t.pageX,c=t.pageY),n?(this.origPageX=a,this.origPageY=c):(h=a-this.origPageX,o=c-this.origPageY),{origEvent:t,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:c,deltaX:h,deltaY:o}},e}();function BG(e){return e.button===0&&!e.ctrlKey}function FG(){$C+=1,setTimeout(function(){$C-=1},HT.touchMouseIgnoreWait)}function NG(){Zx+=1,Zx===1&&window.addEventListener("touchmove",Jz,{passive:!1})}function $G(){Zx-=1,Zx||window.removeEventListener("touchmove",Jz,{passive:!1})}function Jz(e){UC&&e.preventDefault()}var UG=function(){function e(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}return e.prototype.start=function(t,n,r){this.sourceEl=t,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.pageXOffset,this.origScreenY=r-window.pageYOffset,this.deltaX=0,this.deltaY=0,this.updateElPosition()},e.prototype.handleMove=function(t,n){this.deltaX=t-window.pageXOffset-this.origScreenX,this.deltaY=n-window.pageYOffset-this.origScreenY,this.updateElPosition()},e.prototype.setIsVisible=function(t){t?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=t,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=t)},e.prototype.stop=function(t,n){var r=this,a=function(){r.cleanup(),n()};t&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(a,this.revertDuration):setTimeout(a,0)},e.prototype.doRevertAnimation=function(t,n){var r=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",fg(r,{left:a.left,top:a.top}),N7(r,function(){r.style.transition="",t()})},e.prototype.cleanup=function(){this.mirrorEl&&(ET(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null},e.prototype.updateElPosition=function(){this.sourceEl&&this.isVisible&&fg(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})},e.prototype.getMirrorEl=function(){var t=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.classList.add("fc-unselectable"),n.classList.add("fc-event-dragging"),fg(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:t.right-t.left,height:t.bottom-t.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n},e}(),Qz=function(e){eu(t,e);function t(n,r){var a=e.call(this)||this;return a.handleScroll=function(){a.scrollTop=a.scrollController.getScrollTop(),a.scrollLeft=a.scrollController.getScrollLeft(),a.handleScrollChange()},a.scrollController=n,a.doesListening=r,a.scrollTop=a.origScrollTop=n.getScrollTop(),a.scrollLeft=a.origScrollLeft=n.getScrollLeft(),a.scrollWidth=n.getScrollWidth(),a.scrollHeight=n.getScrollHeight(),a.clientWidth=n.getClientWidth(),a.clientHeight=n.getClientHeight(),a.clientRect=a.computeClientRect(),a.doesListening&&a.getEventTarget().addEventListener("scroll",a.handleScroll),a}return t.prototype.destroy=function(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)},t.prototype.getScrollTop=function(){return this.scrollTop},t.prototype.getScrollLeft=function(){return this.scrollLeft},t.prototype.setScrollTop=function(n){this.scrollController.setScrollTop(n),this.doesListening||(this.scrollTop=Math.max(Math.min(n,this.getMaxScrollTop()),0),this.handleScrollChange())},t.prototype.setScrollLeft=function(n){this.scrollController.setScrollLeft(n),this.doesListening||(this.scrollLeft=Math.max(Math.min(n,this.getMaxScrollLeft()),0),this.handleScrollChange())},t.prototype.getClientWidth=function(){return this.clientWidth},t.prototype.getClientHeight=function(){return this.clientHeight},t.prototype.getScrollWidth=function(){return this.scrollWidth},t.prototype.getScrollHeight=function(){return this.scrollHeight},t.prototype.handleScrollChange=function(){},t}($T),e4=function(e){eu(t,e);function t(n,r){return e.call(this,new qV(n),r)||this}return t.prototype.getEventTarget=function(){return this.scrollController.el},t.prototype.computeClientRect=function(){return jV(this.scrollController.el)},t}(Qz),jG=function(e){eu(t,e);function t(n){return e.call(this,new ZV,n)||this}return t.prototype.getEventTarget=function(){return window},t.prototype.computeClientRect=function(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}},t.prototype.handleScrollChange=function(){this.clientRect=this.computeClientRect()},t}(Qz),TP=typeof performance=="function"?performance.now:Date.now,VG=function(){function e(){var t=this;this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=function(){if(t.isAnimating){var n=t.computeBestEdge(t.pointerScreenX+window.pageXOffset,t.pointerScreenY+window.pageYOffset);if(n){var r=TP();t.handleSide(n,(r-t.msSinceRequest)/1e3),t.requestAnimation(r)}else t.isAnimating=!1}}}return e.prototype.start=function(t,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(t,n))},e.prototype.handleMove=function(t,n){if(this.isEnabled){var r=t-window.pageXOffset,a=n-window.pageYOffset,c=this.pointerScreenY===null?0:a-this.pointerScreenY,h=this.pointerScreenX===null?0:r-this.pointerScreenX;c<0?this.everMovedUp=!0:c>0&&(this.everMovedDown=!0),h<0?this.everMovedLeft=!0:h>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(TP()))}},e.prototype.stop=function(){if(this.isEnabled){this.isAnimating=!1;for(var t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];r.destroy()}this.scrollCaches=null}},e.prototype.requestAnimation=function(t){this.msSinceRequest=t,requestAnimationFrame(this.animate)},e.prototype.handleSide=function(t,n){var r=t.scrollCache,a=this.edgeThreshold,c=a-t.distance,h=c*c/(a*a)*this.maxVelocity*n,o=1;switch(t.name){case"left":o=-1;case"right":r.setScrollLeft(r.getScrollLeft()+h*o);break;case"top":o=-1;case"bottom":r.setScrollTop(r.getScrollTop()+h*o);break}},e.prototype.computeBestEdge=function(t,n){for(var r=this.edgeThreshold,a=null,c=this.scrollCaches||[],h=0,o=c;h<o.length;h++){var m=o[h],w=m.clientRect,A=t-w.left,P=w.right-t,O=n-w.top,B=w.bottom-n;A>=0&&P>=0&&O>=0&&B>=0&&(O<=r&&this.everMovedUp&&m.canScrollUp()&&(!a||a.distance>O)&&(a={scrollCache:m,name:"top",distance:O}),B<=r&&this.everMovedDown&&m.canScrollDown()&&(!a||a.distance>B)&&(a={scrollCache:m,name:"bottom",distance:B}),A<=r&&this.everMovedLeft&&m.canScrollLeft()&&(!a||a.distance>A)&&(a={scrollCache:m,name:"left",distance:A}),P<=r&&this.everMovedRight&&m.canScrollRight()&&(!a||a.distance>P)&&(a={scrollCache:m,name:"right",distance:P}))}return a},e.prototype.buildCaches=function(t){return this.queryScrollEls(t).map(function(n){return n===window?new jG(!1):new e4(n,!1)})},e.prototype.queryScrollEls=function(t){for(var n=[],r=0,a=this.scrollQuery;r<a.length;r++){var c=a[r];typeof c=="object"?n.push(c):n.push.apply(n,Array.prototype.slice.call(W3(t).querySelectorAll(c)))}return n},e}(),my=function(e){eu(t,e);function t(n,r){var a=e.call(this,n)||this;a.containerEl=n,a.delay=null,a.minDistance=0,a.touchScrollAllowed=!0,a.mirrorNeedsRevert=!1,a.isInteracting=!1,a.isDragging=!1,a.isDelayEnded=!1,a.isDistanceSurpassed=!1,a.delayTimeoutId=null,a.onPointerDown=function(h){a.isDragging||(a.isInteracting=!0,a.isDelayEnded=!1,a.isDistanceSurpassed=!1,$7(document.body),j7(document.body),h.isTouch||h.origEvent.preventDefault(),a.emitter.trigger("pointerdown",h),a.isInteracting&&!a.pointer.shouldIgnoreMove&&(a.mirror.setIsVisible(!1),a.mirror.start(h.subjectEl,h.pageX,h.pageY),a.startDelay(h),a.minDistance||a.handleDistanceSurpassed(h)))},a.onPointerMove=function(h){if(a.isInteracting){if(a.emitter.trigger("pointermove",h),!a.isDistanceSurpassed){var o=a.minDistance,m=void 0,w=h.deltaX,A=h.deltaY;m=w*w+A*A,m>=o*o&&a.handleDistanceSurpassed(h)}a.isDragging&&(h.origEvent.type!=="scroll"&&(a.mirror.handleMove(h.pageX,h.pageY),a.autoScroller.handleMove(h.pageX,h.pageY)),a.emitter.trigger("dragmove",h))}},a.onPointerUp=function(h){a.isInteracting&&(a.isInteracting=!1,U7(document.body),V7(document.body),a.emitter.trigger("pointerup",h),a.isDragging&&(a.autoScroller.stop(),a.tryStopDrag(h)),a.delayTimeoutId&&(clearTimeout(a.delayTimeoutId),a.delayTimeoutId=null))};var c=a.pointer=new GT(n);return c.emitter.on("pointerdown",a.onPointerDown),c.emitter.on("pointermove",a.onPointerMove),c.emitter.on("pointerup",a.onPointerUp),r&&(c.selector=r),a.mirror=new UG,a.autoScroller=new VG,a}return t.prototype.destroy=function(){this.pointer.destroy(),this.onPointerUp({})},t.prototype.startDelay=function(n){var r=this;typeof this.delay=="number"?this.delayTimeoutId=setTimeout(function(){r.delayTimeoutId=null,r.handleDelayEnd(n)},this.delay):this.handleDelayEnd(n)},t.prototype.handleDelayEnd=function(n){this.isDelayEnded=!0,this.tryStartDrag(n)},t.prototype.handleDistanceSurpassed=function(n){this.isDistanceSurpassed=!0,this.tryStartDrag(n)},t.prototype.tryStartDrag=function(n){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(n.pageX,n.pageY,this.containerEl),this.emitter.trigger("dragstart",n),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())},t.prototype.tryStopDrag=function(n){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,n))},t.prototype.stopDrag=function(n){this.isDragging=!1,this.emitter.trigger("dragend",n)},t.prototype.setIgnoreMove=function(n){this.pointer.shouldIgnoreMove=n},t.prototype.setMirrorIsVisible=function(n){this.mirror.setIsVisible(n)},t.prototype.setMirrorNeedsRevert=function(n){this.mirrorNeedsRevert=n},t.prototype.setAutoScrollEnabled=function(n){this.autoScroller.isEnabled=n},t}(Oz),HG=function(){function e(t){this.origRect=NT(t),this.scrollCaches=bz(t).map(function(n){return new e4(n,!0)})}return e.prototype.destroy=function(){for(var t=0,n=this.scrollCaches;t<n.length;t++){var r=n[t];r.destroy()}},e.prototype.computeLeft=function(){for(var t=this.origRect.left,n=0,r=this.scrollCaches;n<r.length;n++){var a=r[n];t+=a.origScrollLeft-a.getScrollLeft()}return t},e.prototype.computeTop=function(){for(var t=this.origRect.top,n=0,r=this.scrollCaches;n<r.length;n++){var a=r[n];t+=a.origScrollTop-a.getScrollTop()}return t},e.prototype.isWithinClipping=function(t,n){for(var r={left:t,top:n},a=0,c=this.scrollCaches;a<c.length;a++){var h=c[a];if(!WG(h.getEventTarget())&&!IV(r,h.clientRect))return!1}return!0},e}();function WG(e){var t=e.tagName;return t==="HTML"||t==="BODY"}var U0=function(){function e(t,n){var r=this;this.useSubjectCenter=!1,this.requireInitial=!0,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=function(a){var c=r.dragging;r.initialHit=null,r.movingHit=null,r.finalHit=null,r.prepareHits(),r.processFirstCoord(a),r.initialHit||!r.requireInitial?(c.setIgnoreMove(!1),r.emitter.trigger("pointerdown",a)):c.setIgnoreMove(!0)},this.handleDragStart=function(a){r.emitter.trigger("dragstart",a),r.handleMove(a,!0)},this.handleDragMove=function(a){r.emitter.trigger("dragmove",a),r.handleMove(a)},this.handlePointerUp=function(a){r.releaseHits(),r.emitter.trigger("pointerup",a)},this.handleDragEnd=function(a){r.movingHit&&r.emitter.trigger("hitupdate",null,!0,a),r.finalHit=r.movingHit,r.movingHit=null,r.emitter.trigger("dragend",a)},this.droppableStore=n,t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragstart",this.handleDragStart),t.emitter.on("dragmove",this.handleDragMove),t.emitter.on("pointerup",this.handlePointerUp),t.emitter.on("dragend",this.handleDragEnd),this.dragging=t,this.emitter=new N0}return e.prototype.processFirstCoord=function(t){var n={left:t.pageX,top:t.pageY},r=n,a=t.subjectEl,c;a instanceof HTMLElement&&(c=NT(a),r=PV(r,c));var h=this.initialHit=this.queryHitForOffset(r.left,r.top);if(h){if(this.useSubjectCenter&&c){var o=yz(c,h.rect);o&&(r=DV(o))}this.coordAdjust=RV(r,n)}else this.coordAdjust={left:0,top:0}},e.prototype.handleMove=function(t,n){var r=this.queryHitForOffset(t.pageX+this.coordAdjust.left,t.pageY+this.coordAdjust.top);(n||!j0(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,t))},e.prototype.prepareHits=function(){this.offsetTrackers=Zd(this.droppableStore,function(t){return t.component.prepareHits(),new HG(t.el)})},e.prototype.releaseHits=function(){var t=this.offsetTrackers;for(var n in t)t[n].destroy();this.offsetTrackers={}},e.prototype.queryHitForOffset=function(t,n){var r=this,a=r.droppableStore,c=r.offsetTrackers,h=null;for(var o in a){var m=a[o].component,w=c[o];if(w&&w.isWithinClipping(t,n)){var A=w.computeLeft(),P=w.computeTop(),O=t-A,B=n-P,N=w.origRect,k=N.right-N.left,V=N.bottom-N.top;if(O>=0&&O<k&&B>=0&&B<V){var U=m.queryHit(O,B,k,V);U&&F0(U.dateProfile.activeRange,U.dateSpan.range)&&(!h||U.layer>h.layer)&&(U.componentId=o,U.context=m.context,U.rect.left+=A,U.rect.right+=A,U.rect.top+=P,U.rect.bottom+=P,h=U)}}}return h},e}();function j0(e,t){return!e&&!t?!0:Boolean(e)!==Boolean(t)?!1:iV(e.dateSpan,t.dateSpan)}function t4(e,t){for(var n={},r=0,a=t.pluginHooks.datePointTransforms;r<a.length;r++){var c=a[r];eo(n,c(e,t))}return eo(n,GG(e,t.dateEnv)),n}function GG(e,t){return{date:t.toDate(e.range.start),dateStr:t.formatIso(e.range.start,{omitTime:e.allDay}),allDay:e.allDay}}var qG=function(e){eu(t,e);function t(n){var r=e.call(this,n)||this;r.handlePointerDown=function(c){var h=r.dragging,o=c.origEvent.target;h.setIgnoreMove(!r.component.isValidDateDownEl(o))},r.handleDragEnd=function(c){var h=r.component,o=r.dragging.pointer;if(!o.wasTouchScroll){var m=r.hitDragging,w=m.initialHit,A=m.finalHit;if(w&&A&&j0(w,A)){var P=h.context,O=eo(eo({},t4(w.dateSpan,P)),{dayEl:w.dayEl,jsEvent:c.origEvent,view:P.viewApi||P.calendarApi.view});P.emitter.trigger("dateClick",O)}}},r.dragging=new my(n.el),r.dragging.autoScroller.isEnabled=!1;var a=r.hitDragging=new U0(r.dragging,VT(n));return a.emitter.on("pointerdown",r.handlePointerDown),a.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t}(cf),ZG=function(e){eu(t,e);function t(n){var r=e.call(this,n)||this;r.dragSelection=null,r.handlePointerDown=function(m){var w=r,A=w.component,P=w.dragging,O=A.context.options,B=O.selectable&&A.isValidDateDownEl(m.origEvent.target);P.setIgnoreMove(!B),P.delay=m.isTouch?XG(A):null},r.handleDragStart=function(m){r.component.context.calendarApi.unselect(m)},r.handleHitUpdate=function(m,w){var A=r.component.context,P=null,O=!1;if(m){var B=r.hitDragging.initialHit,N=m.componentId===B.componentId&&r.isHitComboAllowed&&!r.isHitComboAllowed(B,m);N||(P=KG(B,m,A.pluginHooks.dateSelectionTransformers)),(!P||!DW(P,m.dateProfile,A))&&(O=!0,P=null)}P?A.dispatch({type:"SELECT_DATES",selection:P}):w||A.dispatch({type:"UNSELECT_DATES"}),O?CT():ST(),w||(r.dragSelection=P)},r.handlePointerUp=function(m){r.dragSelection&&(lz(r.dragSelection,m,r.component.context),r.dragSelection=null)};var a=n.component,c=a.context.options,h=r.dragging=new my(n.el);h.touchScrollAllowed=!1,h.minDistance=c.selectMinDistance||0,h.autoScroller.isEnabled=c.dragScroll;var o=r.hitDragging=new U0(r.dragging,VT(n));return o.emitter.on("pointerdown",r.handlePointerDown),o.emitter.on("dragstart",r.handleDragStart),o.emitter.on("hitupdate",r.handleHitUpdate),o.emitter.on("pointerup",r.handlePointerUp),r}return t.prototype.destroy=function(){this.dragging.destroy()},t}(cf);function XG(e){var t=e.context.options,n=t.selectLongPressDelay;return n==null&&(n=t.longPressDelay),n}function KG(e,t,n){var r=e.dateSpan,a=t.dateSpan,c=[r.range.start,r.range.end,a.range.start,a.range.end];c.sort(Z7);for(var h={},o=0,m=n;o<m.length;o++){var w=m[o],A=w(e,t);if(A===!1)return null;A&&eo(h,A)}return h.range={start:c[0],end:c[3]},h.allDay=r.allDay,h}var n4=function(e){eu(t,e);function t(n){var r=e.call(this,n)||this;r.subjectEl=null,r.subjectSeg=null,r.isDragging=!1,r.eventRange=null,r.relevantEvents=null,r.receivingContext=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(m){var w=m.origEvent.target,A=r,P=A.component,O=A.dragging,B=O.mirror,N=P.context.options,k=P.context;r.subjectEl=m.subjectEl;var V=r.subjectSeg=Zp(m.subjectEl),U=r.eventRange=V.eventRange,W=U.instance.instanceId;r.relevantEvents=PT(k.getCurrentData().eventStore,W),O.minDistance=m.isTouch?0:N.eventDragMinDistance,O.delay=m.isTouch&&W!==P.props.eventSelection?JG(P):null,N.fixedMirrorParent?B.parentNode=N.fixedMirrorParent:B.parentNode=jo(w,".fc"),B.revertDuration=N.dragRevertDuration;var F=P.isValidSegDownEl(w)&&!jo(w,".fc-event-resizer");O.setIgnoreMove(!F),r.isDragging=F&&m.subjectEl.classList.contains("fc-event-draggable")},r.handleDragStart=function(m){var w=r.component.context,A=r.eventRange,P=A.instance.instanceId;m.isTouch?P!==r.component.props.eventSelection&&w.dispatch({type:"SELECT_EVENT",eventInstanceId:P}):w.dispatch({type:"UNSELECT_EVENT"}),r.isDragging&&(w.calendarApi.unselect(m),w.emitter.trigger("eventDragStart",{el:r.subjectEl,event:new Bi(w,A.def,A.instance),jsEvent:m.origEvent,view:w.viewApi}))},r.handleHitUpdate=function(m,w){if(!!r.isDragging){var A=r.relevantEvents,P=r.hitDragging.initialHit,O=r.component.context,B=null,N=null,k=null,V=!1,U={affectedEvents:A,mutatedEvents:Ls(),isEvent:!0};if(m){B=m.context;var W=B.options;O===B||W.editable&&W.droppable?(N=YG(P,m,B.getCurrentData().pluginHooks.eventDragMutationMassagers),N&&(k=zT(A,B.getCurrentData().eventUiBases,N,B),U.mutatedEvents=k,Nz(U,m.dateProfile,B)||(V=!0,N=null,k=null,U.mutatedEvents=Ls()))):B=null}r.displayDrag(B,U),V?CT():ST(),w||(O===B&&j0(P,m)&&(N=null),r.dragging.setMirrorNeedsRevert(!N),r.dragging.setMirrorIsVisible(!m||!W3(r.subjectEl).querySelector(".fc-event-mirror")),r.receivingContext=B,r.validMutation=N,r.mutatedRelevantEvents=k)}},r.handlePointerUp=function(){r.isDragging||r.cleanup()},r.handleDragEnd=function(m){if(r.isDragging){var w=r.component.context,A=w.viewApi,P=r,O=P.receivingContext,B=P.validMutation,N=r.eventRange.def,k=r.eventRange.instance,V=new Bi(w,N,k),U=r.relevantEvents,W=r.mutatedRelevantEvents,F=r.hitDragging.finalHit;if(r.clearDrag(),w.emitter.trigger("eventDragStop",{el:r.subjectEl,event:V,jsEvent:m.origEvent,view:A}),B){if(O===w){var z=new Bi(w,W.defs[N.defId],k?W.instances[k.instanceId]:null);w.dispatch({type:"MERGE_EVENTS",eventStore:W});for(var S={oldEvent:V,event:z,relatedEvents:Md(W,w,k),revert:function(){w.dispatch({type:"MERGE_EVENTS",eventStore:U})}},b={},D=0,Y=w.getCurrentData().pluginHooks.eventDropTransformers;D<Y.length;D++){var re=Y[D];eo(b,re(B,w))}w.emitter.trigger("eventDrop",eo(eo(eo({},S),b),{el:m.subjectEl,delta:B.datesDelta,jsEvent:m.origEvent,view:A})),w.emitter.trigger("eventChange",S)}else if(O){var ae={event:V,relatedEvents:Md(U,w,k),revert:function(){w.dispatch({type:"MERGE_EVENTS",eventStore:U})}};w.emitter.trigger("eventLeave",eo(eo({},ae),{draggedEl:m.subjectEl,view:A})),w.dispatch({type:"REMOVE_EVENTS",eventStore:U}),w.emitter.trigger("eventRemove",ae);var ee=W.defs[N.defId],de=W.instances[k.instanceId],ke=new Bi(O,ee,de);O.dispatch({type:"MERGE_EVENTS",eventStore:W});var Oe={event:ke,relatedEvents:Md(W,O,de),revert:function(){O.dispatch({type:"REMOVE_EVENTS",eventStore:W})}};O.emitter.trigger("eventAdd",Oe),m.isTouch&&O.dispatch({type:"SELECT_EVENT",eventInstanceId:k.instanceId}),O.emitter.trigger("drop",eo(eo({},t4(F.dateSpan,O)),{draggedEl:m.subjectEl,jsEvent:m.origEvent,view:F.context.viewApi})),O.emitter.trigger("eventReceive",eo(eo({},Oe),{draggedEl:m.subjectEl,view:F.context.viewApi}))}}else w.emitter.trigger("_noEventDrop")}r.cleanup()};var a=r.component,c=a.context.options,h=r.dragging=new my(n.el);h.pointer.selector=t.SELECTOR,h.touchScrollAllowed=!1,h.autoScroller.isEnabled=c.dragScroll;var o=r.hitDragging=new U0(r.dragging,BC);return o.useSubjectCenter=n.useEventCenter,o.emitter.on("pointerdown",r.handlePointerDown),o.emitter.on("dragstart",r.handleDragStart),o.emitter.on("hitupdate",r.handleHitUpdate),o.emitter.on("pointerup",r.handlePointerUp),o.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t.prototype.displayDrag=function(n,r){var a=this.component.context,c=this.receivingContext;c&&c!==n&&(c===a?c.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:Ls(),isEvent:!0}}):c.dispatch({type:"UNSET_EVENT_DRAG"})),n&&n.dispatch({type:"SET_EVENT_DRAG",state:r})},t.prototype.clearDrag=function(){var n=this.component.context,r=this.receivingContext;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),n!==r&&n.dispatch({type:"UNSET_EVENT_DRAG"})},t.prototype.cleanup=function(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null},t.SELECTOR=".fc-event-draggable, .fc-event-resizable",t}(cf);function YG(e,t,n){var r=e.dateSpan,a=t.dateSpan,c=r.range.start,h=a.range.start,o={};r.allDay!==a.allDay&&(o.allDay=a.allDay,o.hasEnd=t.context.options.allDayMaintainDuration,a.allDay&&(c=_i(c)));var m=bp(c,h,e.context.dateEnv,e.componentId===t.componentId?e.largeUnit:null);m.milliseconds&&(o.allDay=!1);for(var w={datesDelta:m,standardProps:o},A=0,P=n;A<P.length;A++){var O=P[A];O(w,e,t)}return w}function JG(e){var t=e.context.options,n=t.eventLongPressDelay;return n==null&&(n=t.longPressDelay),n}var QG=function(e){eu(t,e);function t(n){var r=e.call(this,n)||this;r.draggingSegEl=null,r.draggingSeg=null,r.eventRange=null,r.relevantEvents=null,r.validMutation=null,r.mutatedRelevantEvents=null,r.handlePointerDown=function(o){var m=r.component,w=r.querySegEl(o),A=Zp(w),P=r.eventRange=A.eventRange;r.dragging.minDistance=m.context.options.eventDragMinDistance,r.dragging.setIgnoreMove(!r.component.isValidSegDownEl(o.origEvent.target)||o.isTouch&&r.component.props.eventSelection!==P.instance.instanceId)},r.handleDragStart=function(o){var m=r.component.context,w=r.eventRange;r.relevantEvents=PT(m.getCurrentData().eventStore,r.eventRange.instance.instanceId);var A=r.querySegEl(o);r.draggingSegEl=A,r.draggingSeg=Zp(A),m.calendarApi.unselect(),m.emitter.trigger("eventResizeStart",{el:A,event:new Bi(m,w.def,w.instance),jsEvent:o.origEvent,view:m.viewApi})},r.handleHitUpdate=function(o,m,w){var A=r.component.context,P=r.relevantEvents,O=r.hitDragging.initialHit,B=r.eventRange.instance,N=null,k=null,V=!1,U={affectedEvents:P,mutatedEvents:Ls(),isEvent:!0};if(o){var W=o.componentId===O.componentId&&r.isHitComboAllowed&&!r.isHitComboAllowed(O,o);W||(N=eq(O,o,w.subjectEl.classList.contains("fc-event-resizer-start"),B.range))}N&&(k=zT(P,A.getCurrentData().eventUiBases,N,A),U.mutatedEvents=k,Nz(U,o.dateProfile,A)||(V=!0,N=null,k=null,U.mutatedEvents=null)),k?A.dispatch({type:"SET_EVENT_RESIZE",state:U}):A.dispatch({type:"UNSET_EVENT_RESIZE"}),V?CT():ST(),m||(N&&j0(O,o)&&(N=null),r.validMutation=N,r.mutatedRelevantEvents=k)},r.handleDragEnd=function(o){var m=r.component.context,w=r.eventRange.def,A=r.eventRange.instance,P=new Bi(m,w,A),O=r.relevantEvents,B=r.mutatedRelevantEvents;if(m.emitter.trigger("eventResizeStop",{el:r.draggingSegEl,event:P,jsEvent:o.origEvent,view:m.viewApi}),r.validMutation){var N=new Bi(m,B.defs[w.defId],A?B.instances[A.instanceId]:null);m.dispatch({type:"MERGE_EVENTS",eventStore:B});var k={oldEvent:P,event:N,relatedEvents:Md(B,m,A),revert:function(){m.dispatch({type:"MERGE_EVENTS",eventStore:O})}};m.emitter.trigger("eventResize",eo(eo({},k),{el:r.draggingSegEl,startDelta:r.validMutation.startDelta||Ur(0),endDelta:r.validMutation.endDelta||Ur(0),jsEvent:o.origEvent,view:m.viewApi})),m.emitter.trigger("eventChange",k)}else m.emitter.trigger("_noEventResize");r.draggingSeg=null,r.relevantEvents=null,r.validMutation=null};var a=n.component,c=r.dragging=new my(n.el);c.pointer.selector=".fc-event-resizer",c.touchScrollAllowed=!1,c.autoScroller.isEnabled=a.context.options.dragScroll;var h=r.hitDragging=new U0(r.dragging,VT(n));return h.emitter.on("pointerdown",r.handlePointerDown),h.emitter.on("dragstart",r.handleDragStart),h.emitter.on("hitupdate",r.handleHitUpdate),h.emitter.on("dragend",r.handleDragEnd),r}return t.prototype.destroy=function(){this.dragging.destroy()},t.prototype.querySegEl=function(n){return jo(n.subjectEl,".fc-event")},t}(cf);function eq(e,t,n,r){var a=e.context.dateEnv,c=e.dateSpan.range.start,h=t.dateSpan.range.start,o=bp(c,h,a,e.largeUnit);if(n){if(a.add(r.start,o)<r.end)return{startDelta:o}}else if(a.add(r.end,o)>r.start)return{endDelta:o};return null}var tq=function(){function e(t){var n=this;this.context=t,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=function(a){a.jsEvent&&(n.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=function(a){var c=n.context.options.unselectCancel,h=H3(a.origEvent);n.matchesCancel=!!jo(h,c),n.matchesEvent=!!jo(h,n4.SELECTOR)},this.onDocumentPointerUp=function(a){var c=n.context,h=n.documentPointer,o=c.getCurrentData();if(!h.wasTouchScroll){if(o.dateSelection&&!n.isRecentPointerDateSelect){var m=c.options.unselectAuto;m&&(!m||!n.matchesCancel)&&c.calendarApi.unselect(a)}o.eventSelection&&!n.matchesEvent&&c.dispatch({type:"UNSELECT_EVENT"})}n.isRecentPointerDateSelect=!1};var r=this.documentPointer=new GT(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerdown",this.onDocumentPointerDown),r.emitter.on("pointerup",this.onDocumentPointerUp),t.emitter.on("select",this.onSelect)}return e.prototype.destroy=function(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()},e}(),nq={fixedMirrorParent:Tt},rq={dateClick:Tt,eventDragStart:Tt,eventDragStop:Tt,eventDrop:Tt,eventResizeStart:Tt,eventResizeStop:Tt,eventResize:Tt,drop:Tt,eventReceive:Tt,eventLeave:Tt};HT.dataAttrPrefix="";(function(e){eu(t,e);function t(n){var r=e.call(this,n)||this;r.shouldIgnoreMove=!1,r.mirrorSelector="",r.currentMirrorEl=null,r.handlePointerDown=function(c){r.emitter.trigger("pointerdown",c),r.shouldIgnoreMove||r.emitter.trigger("dragstart",c)},r.handlePointerMove=function(c){r.shouldIgnoreMove||r.emitter.trigger("dragmove",c)},r.handlePointerUp=function(c){r.emitter.trigger("pointerup",c),r.shouldIgnoreMove||r.emitter.trigger("dragend",c)};var a=r.pointer=new GT(n);return a.emitter.on("pointerdown",r.handlePointerDown),a.emitter.on("pointermove",r.handlePointerMove),a.emitter.on("pointerup",r.handlePointerUp),r}return t.prototype.destroy=function(){this.pointer.destroy()},t.prototype.setIgnoreMove=function(n){this.shouldIgnoreMove=n},t.prototype.setMirrorIsVisible=function(n){if(n)this.currentMirrorEl&&(this.currentMirrorEl.style.visibility="",this.currentMirrorEl=null);else{var r=this.mirrorSelector?document.querySelector(this.mirrorSelector):null;r&&(this.currentMirrorEl=r,r.style.visibility="hidden")}},t})(Oz);var iq=fc({componentInteractions:[qG,ZG,n4,QG],calendarInteractions:[tq],elementDraggingImpl:my,optionRefiners:nq,listenerRefiners:rq});const oq=()=>{const[e,t]=g.exports.useState([]),[n,r]=g.exports.useState([]),[a,c]=g.exports.useState(""),[h,o]=g.exports.useState(void 0),[m,w]=g.exports.useState([]),A=at.useContext(Tr),P=k=>k.split("T")[0];at.useEffect(()=>{function k(V){return Object.assign(Object.assign({},V),{organization:A.allOrgs.find(U=>U.id===V.organization),tags:V.tags.map(U=>A.allTags.find(W=>W.id===U)).filter(U=>!!U)})}r(e.map(k))},[A,e]);const O=(k,V,U)=>{let W=JSON.stringify(k);if(a!==W){const F=`${ur.BASEURL}/api/v3/obj/event?start=${P(k.startStr)}&end=${P(k.endStr)}`;console.log(F),A.getAPI(F,!1).then(z=>{z.status!==200?U(new Error("Returned status "+z.status)):(c(W),t(z.data.results),V(n))})}else V(n)},B=k=>{if(o(k),k===void 0)w([]);else{let V=k,U=[],W=new Date(V.getTime()+24*60*60*1e3);for(let F of n){let z=new Date(F.start_date),S=new Date(F.end_date);z<W&&S>=V&&U.push(F)}w(U)}};let N="";return h!==void 0&&(N=h.toLocaleDateString(void 0,{day:"numeric",year:"numeric",weekday:"long",month:"long"})),at.createElement(at.Fragment,null,at.createElement("link",{rel:"stylesheet",href:"static/css/fullcalendar.min.css",type:"text/css"}),at.createElement("link",{rel:"stylesheet",href:"static/css/calendar/view.css",type:"text/css"}),at.createElement("div",{className:"container"},at.createElement(aq,{updateEvents:O,selectedDate:h,setSelectedDate:B}),at.createElement("div",{id:"details"},at.createElement("div",{className:"container"},at.createElement("a",{href:"url_to_calendar"},"URL to iCalendar (use this to add to Google Calendar, not yet implemented sry :/)"),at.createElement("h3",{id:"detailsCurrentDay"},N),at.createElement("p",{id:"detailsCurrentWeek"}),at.createElement("hr",null),at.createElement("p",{className:"no-event-inform"},"No events on this day"),at.createElement("div",{id:"eventDetails"},at.createElement(sq,{eventsToday:m,date:h}))))))},aq=e=>{const t=e.updateEvents,n=e.selectedDate,r=e.setSelectedDate,a=1.7,c="var(--dark-colour)";at.useContext(Tr);const h=A=>{A.clientHeight<A.clientWidth/a&&(A.style.height=A.clientWidth/a+"px");let P=A.querySelector(".fc-daygrid-day-top");if(P===null)throw"rendering error";let O=document.createElement("div");O.classList.add("fc-daygrid-day-number-circle"),document.createElement("li");const B=P.querySelector(".fc-daygrid-day-number");B!=null&&O.appendChild(B),P.innerHTML="",P.appendChild(O),O.style.width=O.clientHeight+"px"},o=A=>{var O;const P=[];for(let B of A)P.push({title:B.name,start:B.start_date,end:B.end_date,color:((O=B.tags[0])!=null?O:{color:"lightblue"}).color,textColor:"#434343"});return P};(()=>{var A;if(document.querySelectorAll(".fc-daygrid-day").forEach(P=>{var B;const O=P.querySelector(".fc-daygrid-day-number-circle");O!=null&&(O.style.background=""),(B=P.querySelector(".fc-daygrid-day-number"))==null||B.removeAttribute("selected")}),n!==void 0){let P=document.querySelector("[data-date='"+n.toISOString().split("T")[0]+"']");if(P!=null){let O=P.querySelector(".fc-daygrid-day-top");if(O==null)throw"reformat error";(O.children.length!==1||!O.children[0].classList.contains(".fc-daygrid-day-number-circle"))&&h(P);const B=O.querySelector(".fc-daygrid-day-number-circle");B!=null&&(B.style.backgroundColor=c),(A=O.querySelector(".fc-daygrid-day-number"))==null||A.setAttribute("selected","true")}}})();var w=at.createElement(pG,{plugins:[zG,iq],initialView:"dayGridMonth",headerToolbar:{right:"today prev,next"},views:{dayGridMonth:{dayCellDidMount:A=>{h(A.el)},aspectRatio:1.7}},selectable:!0,selectAllow:A=>A.end.getTime()-A.start.getTime()<=24*60*60*1e3,select:A=>{r(new Date(A.start.setHours(0,0,0,0)))},unselect:()=>{r(void 0)},events:(A,P,O)=>{t(A,B=>{P(o(B))},O)},height:"auto",selectLongPressDelay:0});return at.createElement(at.Fragment,null,at.createElement("div",{id:"calendar"},w))},sq=e=>{const t=e.eventsToday,n=e.date,r=n==null?[]:t.map(a=>at.createElement(lq,{key:a.id,curEvent:a,date:n}));return r.length===0?at.createElement(at.Fragment,null):at.createElement(at.Fragment,null,r)},lq=e=>{var O;const t=e.curEvent,n=e.date;let r=new Date(t.start_date),a=new Date(t.end_date);at.useContext(Tr);const c=B=>{let N=B.getHours(),k=B.getMinutes();const V=N>=12?"pm":"am";N=N%12,N=N||12;let U=k<10?"0"+k:""+k;return[N+":"+U,V]},h=B=>{let N=new Intl.DateTimeFormat().format(B),[k,V]=c(B);return[N+" "+k,V]};let[o,m]=r<n?h(r):c(r),[w,A]=a>=new Date(n.getTime()+24*60*60*1e3)?h(a):c(a);const P=t.tags.map(B=>at.createElement("p",{key:t.name+"|"+B.name,className:"tag",style:{backgroundColor:(B!=null?B:{color:"lightblue"}).color}},B.name));return at.createElement("table",{className:"dayEvent"},at.createElement("tbody",null,at.createElement("tr",null,at.createElement("td",{className:"leftPanel",style:{backgroundColor:((O=t.tags[0])!=null?O:{color:"lightblue"}).color}},at.createElement("span",{className:"timeDisplay",id:"event_start"},o),at.createElement("span",{className:"ampm",id:"event_start_ampm"},m),at.createElement("br",null),at.createElement("span",{className:"intermediate_to"},"to"),at.createElement("br",null),at.createElement("span",{className:"timeDisplay",id:"event_end"},w),at.createElement("span",{className:"ampm",id:"event_end_ampm"},A)),at.createElement(uq,{curEvent:t,tagEls:P}))))},uq=e=>{var c;const[t,n]=g.exports.useState(!0),r=e.curEvent,a=e.tagEls;return at.useContext(Tr),at.createElement("td",{className:"detailPanel"},at.createElement("h4",{className:"event_title"},r.name),at.createElement("em",null,at.createElement("a",{className:"eventHost event_host_name"},((c=r.organization)!=null?c:{name:""}).name)),at.createElement("hr",null),at.createElement("p",{className:"event_description "+(t?"truncate-100":""),onClick:()=>n(!t)},r.description.replace(/(?:\r\n|\r|\n)/g,"<br>")),at.createElement("div",{className:"tag-section"},a))},cq=()=>{const e=oi(),t=g.exports.useContext(Tr),r=R0().get("next");g.exports.useState("");const[a,c]=g.exports.useState(""),[h,o]=g.exports.useState(""),[m,w]=g.exports.useState(!1),[A,P]=g.exports.useState("");g.exports.useEffect(()=>{no()&&e(r||"/"),B("id_login"),B("id_password"),B("id_remember"),document.title="Login | Metropolis"},[]);const O=()=>{window.history.back()},B=k=>{document.getElementById(k).removeAttribute("placeholder")},N=k=>{k.preventDefault(),console.log("Logging in 3"),w(!0),Is.post(ur.AUTH.LOGIN,{username:a,password:h},{}).then(V=>{V.data.access?(console.log(`Success: ${V.data.access}`),t.updateToken(V.data.access),E3(V.data.refresh),w(!1),t.notify("Successfully logged in!","success"),e(r||"/")):(console.log("Error"),P(V.data.error),w(!1))}).catch(V=>{P(V.response.data.detail),w(!1)})};return g.exports.createElement("div",{className:"login-page"},g.exports.createElement("a",{id:"back",onClick:O},g.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"row wrapper"},g.exports.createElement("div",{className:"col m12 l6 hide-on-med-and-down"},g.exports.createElement("img",{className:"responsive-img account-art",src:"/static/img/log-in.png"})),g.exports.createElement("div",{className:"col m12 l6"},g.exports.createElement("div",{className:"form-wrapper"},g.exports.createElement("div",{className:"tab-wrapper row"},g.exports.createElement("div",{className:"col s6"},g.exports.createElement(vn,{to:"/accounts/login/"},g.exports.createElement("div",{className:"tab current"},"Log In"))),g.exports.createElement("div",{className:"col s6"},g.exports.createElement(vn,{to:"/accounts/signup/"},g.exports.createElement("div",{className:"tab"},"Sign Up")))),g.exports.createElement("form",{className:"login",onSubmit:N},g.exports.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:"CSRFSECRET123"}),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("label",{htmlFor:"id_login",className:"active"},"Login:"),g.exports.createElement("input",{type:"text",name:"login",autoComplete:"off",required:!0,id:"id_login",onChange:k=>{c(k.target.value)}}))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("label",{htmlFor:"id_password",className:"active"},"Password:"),g.exports.createElement("input",{type:"password",name:"password",autoComplete:"off",required:!0,id:"id_password",onChange:k=>{o(k.target.value)}}))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"col s12"},g.exports.createElement("label",{htmlFor:"id_remember",className:"valign-wrapper"},g.exports.createElement("input",{className:"filled-in checkbox-blue",type:"checkbox",name:"remember",id:"id_remember"}),g.exports.createElement("span",null,"Remember Me")))),!!A&&g.exports.createElement("ul",{className:"errorlist nonfield"},g.exports.createElement("li",null,"The username and/or password you specified are not correct.")),g.exports.createElement("div",null,g.exports.createElement("button",{className:"btn login-btn",type:"submit"},"Sign In")),g.exports.createElement("p",null,"Forgot your password? Click ",g.exports.createElement(vn,{className:"link",to:"/accounts/password/reset/"},"here")," to reset.")))))))};var gy=e=>e.type==="checkbox",wp=e=>e instanceof Date,Xo=e=>e==null;const r4=e=>typeof e=="object";var Ao=e=>!Xo(e)&&!Array.isArray(e)&&r4(e)&&!wp(e),dq=e=>Ao(e)&&e.target?gy(e.target)?e.target.checked:e.target.value:e,hq=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,pq=(e,t)=>e.has(hq(t)),yy=e=>Array.isArray(e)?e.filter(Boolean):[],mo=e=>e===void 0,Cn=(e,t,n)=>{if(!t||!Ao(e))return n;const r=yy(t.split(/[,[\].]+?/)).reduce((a,c)=>Xo(a)?a:a[c],e);return mo(r)||r===e?mo(e[t])?n:e[t]:r};const kP={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ps={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ol={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};at.createContext(null);var fq=(e,t,n,r=!0)=>{const a={defaultValues:t._defaultValues};for(const c in e)Object.defineProperty(a,c,{get:()=>{const h=c;return t._proxyFormState[h]!==Ps.all&&(t._proxyFormState[h]=!r||Ps.all),n&&(n[h]=!0),e[h]}});return a},qa=e=>Ao(e)&&!Object.keys(e).length,mq=(e,t,n)=>{const{name:r,...a}=e;return qa(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(c=>t[c]===(!n||Ps.all))},Hw=e=>Array.isArray(e)?e:[e];function gq(e){const t=at.useRef(e);t.current=e,at.useEffect(()=>{const n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>{n&&n.unsubscribe()}},[e.disabled])}var ul=e=>typeof e=="string",yq=(e,t,n,r)=>{const a=Array.isArray(e);return ul(e)?(r&&t.watch.add(e),Cn(n,e)):a?e.map(c=>(r&&t.watch.add(c),Cn(n,c))):(r&&(t.watchAll=!0),n)},Xx=e=>typeof e=="function",i4=e=>{for(const t in e)if(Xx(e[t]))return!0;return!1},vq=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},qT=e=>/^\w*$/.test(e),o4=e=>yy(e.replace(/["|']|\]/g,"").split(/\.|\[/));function yi(e,t,n){let r=-1;const a=qT(t)?[t]:o4(t),c=a.length,h=c-1;for(;++r<c;){const o=a[r];let m=n;if(r!==h){const w=e[o];m=Ao(w)||Array.isArray(w)?w:isNaN(+a[r+1])?{}:[]}e[o]=m,e=e[o]}return e}const jC=(e,t,n)=>{for(const r of n||Object.keys(e)){const a=Cn(e,r);if(a){const{_f:c,...h}=a;if(c&&t(c.name)){if(c.ref.focus){c.ref.focus();break}else if(c.refs&&c.refs[0].focus){c.refs[0].focus();break}}else Ao(h)&&jC(h,t)}}};var AP=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length)))),_q=(e,t,n)=>{const r=yy(Cn(e,n));return yi(r,"root",t[n]),yi(e,n,r),e},Kx=e=>typeof e=="boolean",ZT=e=>e.type==="file",rx=e=>ul(e)||at.isValidElement(e),XT=e=>e.type==="radio",Yx=e=>e instanceof RegExp;const MP={value:!1,isValid:!1},IP={value:!0,isValid:!0};var a4=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!mo(e[0].attributes.value)?mo(e[0].value)||e[0].value===""?IP:{value:e[0].value,isValid:!0}:IP:MP}return MP};const PP={isValid:!1,value:null};var s4=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,PP):PP;function DP(e,t,n="validate"){if(rx(e)||Array.isArray(e)&&e.every(rx)||Kx(e)&&!e)return{type:n,message:rx(e)?e:"",ref:t}}var ep=e=>Ao(e)&&!Yx(e)?e:{value:e,message:""},RP=async(e,t,n,r,a)=>{const{ref:c,refs:h,required:o,maxLength:m,minLength:w,min:A,max:P,pattern:O,validate:B,name:N,valueAsNumber:k,mount:V,disabled:U}=e._f;if(!V||U)return{};const W=h?h[0]:c,F=ee=>{r&&W.reportValidity&&(W.setCustomValidity(Kx(ee)?"":ee||" "),W.reportValidity())},z={},S=XT(c),b=gy(c),D=S||b,Y=(k||ZT(c))&&!c.value||t===""||Array.isArray(t)&&!t.length,re=vq.bind(null,N,n,z),ae=(ee,de,ke,Oe=Ol.maxLength,Le=Ol.minLength)=>{const Ee=ee?de:ke;z[N]={type:ee?Oe:Le,message:Ee,ref:c,...re(ee?Oe:Le,Ee)}};if(a?!Array.isArray(t)||!t.length:o&&(!D&&(Y||Xo(t))||Kx(t)&&!t||b&&!a4(h).isValid||S&&!s4(h).isValid)){const{value:ee,message:de}=rx(o)?{value:!!o,message:o}:ep(o);if(ee&&(z[N]={type:Ol.required,message:de,ref:W,...re(Ol.required,de)},!n))return F(de),z}if(!Y&&(!Xo(A)||!Xo(P))){let ee,de;const ke=ep(P),Oe=ep(A);if(!Xo(t)&&!isNaN(t)){const Le=c.valueAsNumber||t&&+t;Xo(ke.value)||(ee=Le>ke.value),Xo(Oe.value)||(de=Le<Oe.value)}else{const Le=c.valueAsDate||new Date(t);ul(ke.value)&&(ee=Le>new Date(ke.value)),ul(Oe.value)&&(de=Le<new Date(Oe.value))}if((ee||de)&&(ae(!!ee,ke.message,Oe.message,Ol.max,Ol.min),!n))return F(z[N].message),z}if((m||w)&&!Y&&(ul(t)||a&&Array.isArray(t))){const ee=ep(m),de=ep(w),ke=!Xo(ee.value)&&t.length>ee.value,Oe=!Xo(de.value)&&t.length<de.value;if((ke||Oe)&&(ae(ke,ee.message,de.message),!n))return F(z[N].message),z}if(O&&!Y&&ul(t)){const{value:ee,message:de}=ep(O);if(Yx(ee)&&!t.match(ee)&&(z[N]={type:Ol.pattern,message:de,ref:c,...re(Ol.pattern,de)},!n))return F(de),z}if(B){if(Xx(B)){const ee=await B(t),de=DP(ee,W);if(de&&(z[N]={...de,...re(Ol.validate,de.message)},!n))return F(de.message),z}else if(Ao(B)){let ee={};for(const de in B){if(!qa(ee)&&!n)break;const ke=DP(await B[de](t),W,de);ke&&(ee={...ke,...re(de,ke.message)},F(ke.message),n&&(z[N]=ee))}if(!qa(ee)&&(z[N]={ref:W,...ee},!n))return z}}return F(!0),z},xq=e=>{const t=e.constructor&&e.constructor.prototype;return Ao(t)&&t.hasOwnProperty("isPrototypeOf")},VC=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function fd(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(VC&&(e instanceof Blob||e instanceof FileList))&&(n||Ao(e)))if(t=n?[]:{},!Array.isArray(e)&&!xq(e))t=e;else for(const r in e)t[r]=fd(e[r]);else return e;return t}var LP=e=>({isOnSubmit:!e||e===Ps.onSubmit,isOnBlur:e===Ps.onBlur,isOnChange:e===Ps.onChange,isOnAll:e===Ps.all,isOnTouch:e===Ps.onTouched});function bq(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=mo(e)?r++:e[t[r++]];return e}function wq(e){for(const t in e)if(!mo(e[t]))return!1;return!0}function qo(e,t){const n=qT(t)?[t]:o4(t),r=n.length==1?e:bq(e,n),a=n[n.length-1];let c;r&&delete r[a];for(let h=0;h<n.slice(0,-1).length;h++){let o=-1,m;const w=n.slice(0,-(h+1)),A=w.length-1;for(h>0&&(c=e);++o<w.length;){const P=w[o];m=m?m[P]:e[P],A===o&&(Ao(m)&&qa(m)||Array.isArray(m)&&wq(m))&&(c?delete c[P]:delete e[P]),c=m}}return e}function Ww(){let e=[];return{get observers(){return e},next:a=>{for(const c of e)c.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(c=>c!==a)}}),unsubscribe:()=>{e=[]}}}var Jx=e=>Xo(e)||!r4(e);function Ep(e,t){if(Jx(e)||Jx(t))return e===t;if(wp(e)&&wp(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const a of n){const c=e[a];if(!r.includes(a))return!1;if(a!=="ref"){const h=t[a];if(wp(c)&&wp(h)||Ao(c)&&Ao(h)||Array.isArray(c)&&Array.isArray(h)?!Ep(c,h):c!==h)return!1}}return!0}var HC=e=>{const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof n},l4=e=>e.type==="select-multiple",Eq=e=>XT(e)||gy(e),Gw=e=>HC(e)&&e.isConnected;function Qx(e,t={}){const n=Array.isArray(e);if(Ao(e)||n)for(const r in e)Array.isArray(e[r])||Ao(e[r])&&!i4(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Qx(e[r],t[r])):Xo(e[r])||(t[r]=!0);return t}function u4(e,t,n){const r=Array.isArray(e);if(Ao(e)||r)for(const a in e)Array.isArray(e[a])||Ao(e[a])&&!i4(e[a])?mo(t)||Jx(n[a])?n[a]=Array.isArray(e[a])?Qx(e[a],[]):{...Qx(e[a])}:u4(e[a],Xo(t)?{}:t[a],n[a]):n[a]=!Ep(e[a],t[a]);return n}var qw=(e,t)=>u4(e,t,Qx(t)),c4=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>mo(e)?e:t?e===""?NaN:e&&+e:n&&ul(e)?new Date(e):r?r(e):e;function Zw(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return ZT(t)?t.files:XT(t)?s4(e.refs).value:l4(t)?[...t.selectedOptions].map(({value:n})=>n):gy(t)?a4(e.refs).value:c4(mo(t.value)?e.ref.value:t.value,e)}var Cq=(e,t,n,r)=>{const a={};for(const c of e){const h=Cn(t,c);h&&yi(a,c,h._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}},Gm=e=>mo(e)?void 0:Yx(e)?e.source:Ao(e)?Yx(e.value)?e.value.source:e.value:e,Sq=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function OP(e,t,n){const r=Cn(e,n);if(r||qT(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const c=a.join("."),h=Cn(t,c),o=Cn(e,c);if(h&&!Array.isArray(h)&&n!==c)return{name:n};if(o&&o.type)return{name:c,error:o};a.pop()}return{name:n}}var Tq=(e,t,n,r,a)=>a.isOnAll?!1:!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:(n?r.isOnChange:a.isOnChange)?e:!0,kq=(e,t)=>!yy(Cn(e,t)).length&&qo(e,t);const Aq={mode:Ps.onSubmit,reValidateMode:Ps.onChange,shouldFocusError:!0};function Mq(e={}){let t={...Aq,...e},n={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},r={},a=fd(t.defaultValues)||{},c=t.shouldUnregister?{}:fd(a),h={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m,w=0,A={};const P={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},O={watch:Ww(),array:Ww(),state:Ww()},B=LP(t.mode),N=LP(t.reValidateMode),k=t.criteriaMode===Ps.all,V=ze=>Xe=>{clearTimeout(w),w=window.setTimeout(ze,Xe)},U=async ze=>{let Xe=!1;return P.isValid&&(Xe=t.resolver?qa((await D()).errors):await re(r,!0),!ze&&Xe!==n.isValid&&(n.isValid=Xe,O.state.next({isValid:Xe}))),Xe},W=(ze,Xe=[],ft,Et,_t=!0,ht=!0)=>{if(Et&&ft){if(h.action=!0,ht&&Array.isArray(Cn(r,ze))){const Pt=ft(Cn(r,ze),Et.argA,Et.argB);_t&&yi(r,ze,Pt)}if(P.errors&&ht&&Array.isArray(Cn(n.errors,ze))){const Pt=ft(Cn(n.errors,ze),Et.argA,Et.argB);_t&&yi(n.errors,ze,Pt),kq(n.errors,ze)}if(P.touchedFields&&ht&&Array.isArray(Cn(n.touchedFields,ze))){const Pt=ft(Cn(n.touchedFields,ze),Et.argA,Et.argB);_t&&yi(n.touchedFields,ze,Pt)}P.dirtyFields&&(n.dirtyFields=qw(a,c)),O.state.next({isDirty:ee(ze,Xe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else yi(c,ze,Xe)},F=(ze,Xe)=>{yi(n.errors,ze,Xe),O.state.next({errors:n.errors})},z=(ze,Xe,ft,Et)=>{const _t=Cn(r,ze);if(_t){const ht=Cn(c,ze,mo(ft)?Cn(a,ze):ft);mo(ht)||Et&&Et.defaultChecked||Xe?yi(c,ze,Xe?ht:Zw(_t._f)):Oe(ze,ht),h.mount&&U()}},S=(ze,Xe,ft,Et,_t)=>{let ht=!1;const Pt={name:ze},_n=Cn(n.touchedFields,ze);if(P.isDirty){const On=n.isDirty;n.isDirty=Pt.isDirty=ee(),ht=On!==Pt.isDirty}if(P.dirtyFields&&(!ft||Et)){const On=Cn(n.dirtyFields,ze);Ep(Cn(a,ze),Xe)?qo(n.dirtyFields,ze):yi(n.dirtyFields,ze,!0),Pt.dirtyFields=n.dirtyFields,ht=ht||On!==Cn(n.dirtyFields,ze)}return ft&&!_n&&(yi(n.touchedFields,ze,ft),Pt.touchedFields=n.touchedFields,ht=ht||P.touchedFields&&_n!==ft),ht&&_t&&O.state.next(Pt),ht?Pt:{}},b=async(ze,Xe,ft,Et)=>{const _t=Cn(n.errors,ze),ht=P.isValid&&n.isValid!==Xe;if(e.delayError&&ft?(m=V(()=>F(ze,ft)),m(e.delayError)):(clearTimeout(w),m=null,ft?yi(n.errors,ze,ft):qo(n.errors,ze)),(ft?!Ep(_t,ft):_t)||!qa(Et)||ht){const Pt={...Et,...ht?{isValid:Xe}:{},errors:n.errors,name:ze};n={...n,...Pt},O.state.next(Pt)}A[ze]--,P.isValidating&&!Object.values(A).some(Pt=>Pt)&&(O.state.next({isValidating:!1}),A={})},D=async ze=>t.resolver?await t.resolver({...c},t.context,Cq(ze||o.mount,r,t.criteriaMode,t.shouldUseNativeValidation)):{},Y=async ze=>{const{errors:Xe}=await D();if(ze)for(const ft of ze){const Et=Cn(Xe,ft);Et?yi(n.errors,ft,Et):qo(n.errors,ft)}else n.errors=Xe;return Xe},re=async(ze,Xe,ft={valid:!0})=>{for(const Et in ze){const _t=ze[Et];if(_t){const{_f:ht,...Pt}=_t;if(ht){const _n=o.array.has(ht.name),On=await RP(_t,Cn(c,ht.name),k,t.shouldUseNativeValidation,_n);if(On[ht.name]&&(ft.valid=!1,Xe))break;!Xe&&(Cn(On,ht.name)?_n?_q(n.errors,On,ht.name):yi(n.errors,ht.name,On[ht.name]):qo(n.errors,ht.name))}Pt&&await re(Pt,Xe,ft)}}return ft.valid},ae=()=>{for(const ze of o.unMount){const Xe=Cn(r,ze);Xe&&(Xe._f.refs?Xe._f.refs.every(ft=>!Gw(ft)):!Gw(Xe._f.ref))&&$t(ze)}o.unMount=new Set},ee=(ze,Xe)=>(ze&&Xe&&yi(c,ze,Xe),!Ep(rt(),a)),de=(ze,Xe,ft)=>{const Et={...h.mount?c:mo(Xe)?a:ul(ze)?{[ze]:Xe}:Xe};return yq(ze,o,Et,ft)},ke=ze=>yy(Cn(h.mount?c:a,ze,e.shouldUnregister?Cn(a,ze,[]):[])),Oe=(ze,Xe,ft={})=>{const Et=Cn(r,ze);let _t=Xe;if(Et){const ht=Et._f;ht&&(!ht.disabled&&yi(c,ze,c4(Xe,ht)),_t=VC&&HC(ht.ref)&&Xo(Xe)?"":Xe,l4(ht.ref)?[...ht.ref.options].forEach(Pt=>Pt.selected=_t.includes(Pt.value)):ht.refs?gy(ht.ref)?ht.refs.length>1?ht.refs.forEach(Pt=>(!Pt.defaultChecked||!Pt.disabled)&&(Pt.checked=Array.isArray(_t)?!!_t.find(_n=>_n===Pt.value):_t===Pt.value)):ht.refs[0]&&(ht.refs[0].checked=!!_t):ht.refs.forEach(Pt=>Pt.checked=Pt.value===_t):ZT(ht.ref)?ht.ref.value="":(ht.ref.value=_t,ht.ref.type||O.watch.next({name:ze})))}(ft.shouldDirty||ft.shouldTouch)&&S(ze,_t,ft.shouldTouch,ft.shouldDirty,!0),ft.shouldValidate&&Ze(ze)},Le=(ze,Xe,ft)=>{for(const Et in Xe){const _t=Xe[Et],ht=`${ze}.${Et}`,Pt=Cn(r,ht);(o.array.has(ze)||!Jx(_t)||Pt&&!Pt._f)&&!wp(_t)?Le(ht,_t,ft):Oe(ht,_t,ft)}},Ee=(ze,Xe,ft={})=>{const Et=Cn(r,ze),_t=o.array.has(ze),ht=fd(Xe);yi(c,ze,ht),_t?(O.array.next({name:ze,values:c}),(P.isDirty||P.dirtyFields)&&ft.shouldDirty&&(n.dirtyFields=qw(a,c),O.state.next({name:ze,dirtyFields:n.dirtyFields,isDirty:ee(ze,ht)}))):Et&&!Et._f&&!Xo(ht)?Le(ze,ht,ft):Oe(ze,ht,ft),AP(ze,o)&&O.state.next({}),O.watch.next({name:ze})},ct=async ze=>{const Xe=ze.target;let ft=Xe.name;const Et=Cn(r,ft);if(Et){let _t,ht;const Pt=Xe.type?Zw(Et._f):dq(ze),_n=ze.type===kP.BLUR||ze.type===kP.FOCUS_OUT,On=!Sq(Et._f)&&!t.resolver&&!Cn(n.errors,ft)&&!Et._f.deps||Tq(_n,Cn(n.touchedFields,ft),n.isSubmitted,N,B),Ln=AP(ft,o,_n);yi(c,ft,Pt),_n?(Et._f.onBlur&&Et._f.onBlur(ze),m&&m(0)):Et._f.onChange&&Et._f.onChange(ze);const Mn=S(ft,Pt,_n,!1),Zn=!qa(Mn)||Ln;if(!_n&&O.watch.next({name:ft,type:ze.type}),On)return Zn&&O.state.next({name:ft,...Ln?{}:Mn});if(!_n&&Ln&&O.state.next({}),A[ft]=(A[ft],1),O.state.next({isValidating:!0}),t.resolver){const{errors:Pe}=await D([ft]),Je=OP(n.errors,r,ft),ie=OP(Pe,r,Je.name||ft);_t=ie.error,ft=ie.name,ht=qa(Pe)}else _t=(await RP(Et,Cn(c,ft),k,t.shouldUseNativeValidation))[ft],ht=await U(!0);Et._f.deps&&Ze(Et._f.deps),b(ft,ht,_t,Mn)}},Ze=async(ze,Xe={})=>{let ft,Et;const _t=Hw(ze);if(O.state.next({isValidating:!0}),t.resolver){const ht=await Y(mo(ze)?ze:_t);ft=qa(ht),Et=ze?!_t.some(Pt=>Cn(ht,Pt)):ft}else ze?(Et=(await Promise.all(_t.map(async ht=>{const Pt=Cn(r,ht);return await re(Pt&&Pt._f?{[ht]:Pt}:Pt)}))).every(Boolean),!(!Et&&!n.isValid)&&U()):Et=ft=await re(r);return O.state.next({...!ul(ze)||P.isValid&&ft!==n.isValid?{}:{name:ze},...t.resolver?{isValid:ft}:{},errors:n.errors,isValidating:!1}),Xe.shouldFocus&&!Et&&jC(r,ht=>Cn(n.errors,ht),ze?_t:o.mount),Et},rt=ze=>{const Xe={...a,...h.mount?c:{}};return mo(ze)?Xe:ul(ze)?Cn(Xe,ze):ze.map(ft=>Cn(Xe,ft))},tt=(ze,Xe)=>({invalid:!!Cn((Xe||n).errors,ze),isDirty:!!Cn((Xe||n).dirtyFields,ze),isTouched:!!Cn((Xe||n).touchedFields,ze),error:Cn((Xe||n).errors,ze)}),xe=ze=>{ze?Hw(ze).forEach(Xe=>qo(n.errors,Xe)):n.errors={},O.state.next({errors:n.errors})},be=(ze,Xe,ft)=>{const Et=(Cn(r,ze,{_f:{}})._f||{}).ref;yi(n.errors,ze,{...Xe,ref:Et}),O.state.next({name:ze,errors:n.errors,isValid:!1}),ft&&ft.shouldFocus&&Et&&Et.focus&&Et.focus()},nn=(ze,Xe)=>Xx(ze)?O.watch.subscribe({next:ft=>ze(de(void 0,Xe),ft)}):de(ze,Xe,!0),$t=(ze,Xe={})=>{for(const ft of ze?Hw(ze):o.mount)o.mount.delete(ft),o.array.delete(ft),Cn(r,ft)&&(Xe.keepValue||(qo(r,ft),qo(c,ft)),!Xe.keepError&&qo(n.errors,ft),!Xe.keepDirty&&qo(n.dirtyFields,ft),!Xe.keepTouched&&qo(n.touchedFields,ft),!t.shouldUnregister&&!Xe.keepDefaultValue&&qo(a,ft));O.watch.next({}),O.state.next({...n,...Xe.keepDirty?{isDirty:ee()}:{}}),!Xe.keepIsValid&&U()},an=(ze,Xe={})=>{let ft=Cn(r,ze);const Et=Kx(Xe.disabled);return yi(r,ze,{...ft||{},_f:{...ft&&ft._f?ft._f:{ref:{name:ze}},name:ze,mount:!0,...Xe}}),o.mount.add(ze),ft?Et&&yi(c,ze,Xe.disabled?void 0:Cn(c,ze,Zw(ft._f))):z(ze,!0,Xe.value),{...Et?{disabled:Xe.disabled}:{},...t.shouldUseNativeValidation?{required:!!Xe.required,min:Gm(Xe.min),max:Gm(Xe.max),minLength:Gm(Xe.minLength),maxLength:Gm(Xe.maxLength),pattern:Gm(Xe.pattern)}:{},name:ze,onChange:ct,onBlur:ct,ref:_t=>{if(_t){an(ze,Xe),ft=Cn(r,ze);const ht=mo(_t.value)&&_t.querySelectorAll&&_t.querySelectorAll("input,select,textarea")[0]||_t,Pt=Eq(ht),_n=ft._f.refs||[];if(Pt?_n.find(On=>On===ht):ht===ft._f.ref)return;yi(r,ze,{_f:{...ft._f,...Pt?{refs:[..._n.filter(Gw),ht,...Array.isArray(Cn(a,ze))?[{}]:[]],ref:{type:ht.type,name:ze}}:{ref:ht}}}),z(ze,!1,void 0,ht)}else ft=Cn(r,ze,{}),ft._f&&(ft._f.mount=!1),(t.shouldUnregister||Xe.shouldUnregister)&&!(pq(o.array,ze)&&h.action)&&o.unMount.add(ze)}}},en=(ze,Xe)=>async ft=>{ft&&(ft.preventDefault&&ft.preventDefault(),ft.persist&&ft.persist());let Et=!0,_t=fd(c);O.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:ht,values:Pt}=await D();n.errors=ht,_t=Pt}else await re(r);qa(n.errors)?(O.state.next({errors:{},isSubmitting:!0}),await ze(_t,ft)):(Xe&&await Xe({...n.errors},ft),t.shouldFocusError&&jC(r,ht=>Cn(n.errors,ht),o.mount))}catch(ht){throw Et=!1,ht}finally{n.isSubmitted=!0,O.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:qa(n.errors)&&Et,submitCount:n.submitCount+1,errors:n.errors})}},ln=(ze,Xe={})=>{Cn(r,ze)&&(mo(Xe.defaultValue)?Ee(ze,Cn(a,ze)):(Ee(ze,Xe.defaultValue),yi(a,ze,Xe.defaultValue)),Xe.keepTouched||qo(n.touchedFields,ze),Xe.keepDirty||(qo(n.dirtyFields,ze),n.isDirty=Xe.defaultValue?ee(ze,Cn(a,ze)):ee()),Xe.keepError||(qo(n.errors,ze),P.isValid&&U()),O.state.next({...n}))},mn=(ze,Xe={})=>{const ft=ze||a,Et=fd(ft),_t=ze&&!qa(ze)?Et:a;if(Xe.keepDefaultValues||(a=ft),!Xe.keepValues){if(Xe.keepDirtyValues)for(const ht of o.mount)Cn(n.dirtyFields,ht)?yi(_t,ht,Cn(c,ht)):Ee(ht,Cn(_t,ht));else{if(VC&&mo(ze))for(const ht of o.mount){const Pt=Cn(r,ht);if(Pt&&Pt._f){const _n=Array.isArray(Pt._f.refs)?Pt._f.refs[0]:Pt._f.ref;try{if(HC(_n)){_n.closest("form").reset();break}}catch{}}}r={}}c=e.shouldUnregister?Xe.keepDefaultValues?fd(a):{}:Et,O.array.next({values:_t}),O.watch.next({values:_t})}o={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!P.isValid||!!Xe.keepIsValid,h.watch=!!e.shouldUnregister,O.state.next({submitCount:Xe.keepSubmitCount?n.submitCount:0,isDirty:Xe.keepDirty||Xe.keepDirtyValues?n.isDirty:!!(Xe.keepDefaultValues&&!Ep(ze,a)),isSubmitted:Xe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Xe.keepDirty||Xe.keepDirtyValues?n.dirtyFields:Xe.keepDefaultValues&&ze?qw(a,ze):{},touchedFields:Xe.keepTouched?n.touchedFields:{},errors:Xe.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})};return{control:{register:an,unregister:$t,getFieldState:tt,_executeSchema:D,_getWatch:de,_getDirty:ee,_updateValid:U,_removeUnmounted:ae,_updateFieldArray:W,_getFieldArray:ke,_subjects:O,_proxyFormState:P,get _fields(){return r},get _formValues(){return c},get _stateFlags(){return h},set _stateFlags(ze){h=ze},get _defaultValues(){return a},get _names(){return o},set _names(ze){o=ze},get _formState(){return n},set _formState(ze){n=ze},get _options(){return t},set _options(ze){t={...t,...ze}}},trigger:Ze,register:an,handleSubmit:en,watch:nn,setValue:Ee,getValues:rt,reset:(ze,Xe)=>mn(Xx(ze)?ze(c):ze,Xe),resetField:ln,clearErrors:xe,unregister:$t,setError:be,setFocus:(ze,Xe={})=>{const ft=Cn(r,ze),Et=ft&&ft._f;if(Et){const _t=Et.refs?Et.refs[0]:Et.ref;_t.focus&&(_t.focus(),Xe.shouldSelect&&_t.select())}},getFieldState:tt}}function d4(e={}){const t=at.useRef(),[n,r]=at.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues});t.current||(t.current={...Mq(e),formState:n});const a=t.current.control;return a._options=e,gq({subject:a._subjects.state,callback:at.useCallback(c=>{mq(c,a._proxyFormState,!0)&&(a._formState={...a._formState,...c},r({...a._formState}))},[a])}),at.useEffect(()=>{a._stateFlags.mount||(a._proxyFormState.isValid&&a._updateValid(),a._stateFlags.mount=!0),a._stateFlags.watch&&(a._stateFlags.watch=!1,a._subjects.state.next({})),a._removeUnmounted()}),t.current.formState=fq(n,a),t.current}const Iq=()=>{const e=oi();g.exports.useContext(Tr);const{register:t,handleSubmit:n,watch:r,formState:{errors:a}}=d4(),[c,h]=g.exports.useState("");g.exports.useEffect(()=>{document.title="Sign Up | Metropolis"},[]),g.exports.useEffect(()=>{no()&&e("/")});const o=()=>{window.history.back()},m=w=>{if(console.log("Submitted data:",w),w.password!==w.confirm_password){h("Passwords do not match");return}const A={first_name:w.first_name,last_name:w.last_name,graduating_year:w.graduating_year,email:w.email,username:w.username,password:w.password};Is.post(`${ur.USER}/new`,A).then(P=>{console.log("Successfully registered user"),e("/accounts/login")}).catch(P=>{console.log("Failed to register user"),h("An internal error occurred. Please contact an admin to get it fixed.")})};return g.exports.createElement("div",{className:"register-page"},g.exports.createElement("a",{id:"back",onClick:o},g.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"row wrapper"},g.exports.createElement("div",{className:"graphic col m12 l6 hide-on-med-and-down account-art",style:{backgroundImage:"url('/static/img/sign-up.png')"}}),g.exports.createElement("div",{className:"col m12 l6"},g.exports.createElement("div",{className:"form-wrapper"},g.exports.createElement("div",{className:"tab-wrapper row"},g.exports.createElement("div",{className:"col s6"},g.exports.createElement(Nx,{href:"/accounts/login/"},g.exports.createElement("div",{className:"tab"},"Log In"))),g.exports.createElement("div",{className:"col s6"},g.exports.createElement(Nx,{href:"/accounts/signup/"},g.exports.createElement("div",{className:"tab current"},"Sign Up")))),g.exports.createElement("form",{className:"signup",onSubmit:n(m)},g.exports.createElement("input",{...t("CSRF_TOKEN"),type:"hidden",name:"csrfmiddlewaretoken",value:"CSRFSECRET"}),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("label",{htmlFor:"id_email",className:"active"},"TDSB Email:"),g.exports.createElement("input",{...t("email"),type:"email",name:"email",autoComplete:"email",required:!0,id:"id_email"}))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("label",{htmlFor:"id_username",className:"active"},"Username:"),g.exports.createElement("input",{...t("username"),type:"text",name:"username",autoComplete:"username",minLength:1,maxLength:150,required:!0,id:"id_username"}))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("label",{htmlFor:"id_first_name",className:"active"},"First Name:"),g.exports.createElement("input",{...t("first_name"),type:"text",name:"first_name",autoComplete:"given-name",maxLength:30,required:!0,id:"id_first_name"}))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("label",{htmlFor:"id_last_name",className:"active"},"Last Name:"),g.exports.createElement("input",{...t("last_name"),type:"text",name:"last_name",autoComplete:"family-name",maxLength:30,required:!0,id:"id_last_name"}))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("span",{className:"grad-year"},"Graduating Year:"),g.exports.createElement("select",{...t("graduating_year"),className:"browser-default"},g.exports.createElement("option",{value:""},"Does not apply"),g.exports.createElement("option",{value:"2022"},"2022"),g.exports.createElement("option",{value:"2023"},"2023"),g.exports.createElement("option",{value:"2024"},"2024"),g.exports.createElement("option",{value:"2025"},"2025")))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("label",{htmlFor:"id_password1",className:"active"},"Password:"),g.exports.createElement("input",{...t("password"),type:"password",required:!0}))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"input-field col s12"},g.exports.createElement("label",{htmlFor:"id_password2",className:"active"},"Password (again):"),g.exports.createElement("input",{...t("confirm_password"),type:"password",required:!0}))),g.exports.createElement("p",null,"By clicking this button, you agree to our ",g.exports.createElement(vn,{to:"/terms/"},"terms")," and ",g.exports.createElement(vn,{className:"link",to:"/privacy/"},"privacy policy"),"."),c&&g.exports.createElement("span",{className:"form-error"},g.exports.createElement("div",{className:"form-errors"},g.exports.createElement("i",{className:"material-icons"},"warning"),g.exports.createElement(g.exports.Fragment,null,c))),g.exports.createElement("button",{type:"submit",className:"btn login-btn"},"Sign Up")))))))};var WC={exports:{}};/*!
 * Materialize v1.0.0 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */(function(e,t){var n=function k(V,U,W){V===null&&(V=Function.prototype);var F=Object.getOwnPropertyDescriptor(V,U);if(F===void 0){var z=Object.getPrototypeOf(V);return z===null?void 0:k(z,U,W)}else{if("value"in F)return F.value;var S=F.get;return S===void 0?void 0:S.call(W)}},r=function(){function k(V,U){for(var W=0;W<U.length;W++){var F=U[W];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(V,F.key,F)}}return function(V,U,W){return U&&k(V.prototype,U),W&&k(V,W),V}}();function a(k,V){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:k}function c(k,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);k.prototype=Object.create(V&&V.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(k,V):k.__proto__=V)}function h(k,V){if(!(k instanceof V))throw new TypeError("Cannot call a class as a function")}/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */(function(k){window.cash=k()})(function(){var k=document,V=window,U=Array.prototype,W=U.slice,F=U.filter,z=U.push,S=function(){},b=function(ie){return typeof ie==typeof S&&ie.call},D=function(ie){return typeof ie=="string"},Y=/^#[\w-]*$/,re=/^\.[\w-]*$/,ae=/<.+>/,ee=/^\w+$/;function de(ie,ue){ue=ue||k;var De=re.test(ie)?ue.getElementsByClassName(ie.slice(1)):ee.test(ie)?ue.getElementsByTagName(ie):ue.querySelectorAll(ie);return De}var ke;function Oe(ie){if(!ke){ke=k.implementation.createHTMLDocument(null);var ue=ke.createElement("base");ue.href=k.location.href,ke.head.appendChild(ue)}return ke.body.innerHTML=ie,ke.body.childNodes}function Le(ie){k.readyState!=="loading"?ie():k.addEventListener("DOMContentLoaded",ie)}function Ee(ie,ue){if(!ie)return this;if(ie.cash&&ie!==V)return ie;var De=ie,ye=0,Se;if(D(ie))De=Y.test(ie)?k.getElementById(ie.slice(1)):ae.test(ie)?Oe(ie):de(ie,ue);else if(b(ie))return Le(ie),this;if(!De)return this;if(De.nodeType||De===V)this[0]=De,this.length=1;else for(Se=this.length=De.length;ye<Se;ye++)this[ye]=De[ye];return this}function ct(ie,ue){return new Ee(ie,ue)}var Ze=ct.fn=ct.prototype=Ee.prototype={cash:!0,length:0,push:z,splice:U.splice,map:U.map,init:Ee};Object.defineProperty(Ze,"constructor",{value:ct}),ct.parseHTML=Oe,ct.noop=S,ct.isFunction=b,ct.isString=D,ct.extend=Ze.extend=function(ie){ie=ie||{};var ue=W.call(arguments),De=ue.length,ye=1;for(ue.length===1&&(ie=this,ye=0);ye<De;ye++)if(!!ue[ye])for(var Se in ue[ye])ue[ye].hasOwnProperty(Se)&&(ie[Se]=ue[ye][Se]);return ie};function rt(ie,ue){for(var De=ie.length,ye=0;ye<De&&ue.call(ie[ye],ie[ye],ye,ie)!==!1;ye++);}function tt(ie,ue){var De=ie&&(ie.matches||ie.webkitMatchesSelector||ie.mozMatchesSelector||ie.msMatchesSelector||ie.oMatchesSelector);return!!De&&De.call(ie,ue)}function xe(ie){return D(ie)?tt:ie.cash?function(ue){return ie.is(ue)}:function(ue,De){return ue===De}}function be(ie){return ct(W.call(ie).filter(function(ue,De,ye){return ye.indexOf(ue)===De}))}ct.extend({merge:function(ie,ue){for(var De=+ue.length,ye=ie.length,Se=0;Se<De;ye++,Se++)ie[ye]=ue[Se];return ie.length=ye,ie},each:rt,matches:tt,unique:be,isArray:Array.isArray,isNumeric:function(ie){return!isNaN(parseFloat(ie))&&isFinite(ie)}});var nn=ct.uid="_cash"+Date.now();function $t(ie){return ie[nn]=ie[nn]||{}}function an(ie,ue,De){return $t(ie)[ue]=De}function en(ie,ue){var De=$t(ie);return De[ue]===void 0&&(De[ue]=ie.dataset?ie.dataset[ue]:ct(ie).attr("data-"+ue)),De[ue]}function ln(ie,ue){var De=$t(ie);De?delete De[ue]:ie.dataset?delete ie.dataset[ue]:ct(ie).removeAttr("data-"+name)}Ze.extend({data:function(ie,ue){if(D(ie))return ue===void 0?en(this[0],ie):this.each(function(ye){return an(ye,ie,ue)});for(var De in ie)this.data(De,ie[De]);return this},removeData:function(ie){return this.each(function(ue){return ln(ue,ie)})}});var mn=/\S+/g;function fn(ie){return D(ie)&&ie.match(mn)}function An(ie,ue){return ie.classList?ie.classList.contains(ue):new RegExp("(^| )"+ue+"( |$)","gi").test(ie.className)}function ze(ie,ue,De){ie.classList?ie.classList.add(ue):De.indexOf(" "+ue+" ")&&(ie.className+=" "+ue)}function Xe(ie,ue){ie.classList?ie.classList.remove(ue):ie.className=ie.className.replace(ue,"")}Ze.extend({addClass:function(ie){var ue=fn(ie);return ue?this.each(function(De){var ye=" "+De.className+" ";rt(ue,function(Se){ze(De,Se,ye)})}):this},attr:function(ie,ue){if(!!ie){if(D(ie))return ue===void 0?this[0]?this[0].getAttribute?this[0].getAttribute(ie):this[0][ie]:void 0:this.each(function(ye){ye.setAttribute?ye.setAttribute(ie,ue):ye[ie]=ue});for(var De in ie)this.attr(De,ie[De]);return this}},hasClass:function(ie){var ue=!1,De=fn(ie);return De&&De.length&&this.each(function(ye){return ue=An(ye,De[0]),!ue}),ue},prop:function(ie,ue){if(D(ie))return ue===void 0?this[0][ie]:this.each(function(ye){ye[ie]=ue});for(var De in ie)this.prop(De,ie[De]);return this},removeAttr:function(ie){return this.each(function(ue){ue.removeAttribute?ue.removeAttribute(ie):delete ue[ie]})},removeClass:function(ie){if(!arguments.length)return this.attr("class","");var ue=fn(ie);return ue?this.each(function(De){rt(ue,function(ye){Xe(De,ye)})}):this},removeProp:function(ie){return this.each(function(ue){delete ue[ie]})},toggleClass:function(ie,ue){if(ue!==void 0)return this[ue?"addClass":"removeClass"](ie);var De=fn(ie);return De?this.each(function(ye){var Se=" "+ye.className+" ";rt(De,function(vt){An(ye,vt)?Xe(ye,vt):ze(ye,vt,Se)})}):this}}),Ze.extend({add:function(ie,ue){return be(ct.merge(this,ct(ie,ue)))},each:function(ie){return rt(this,ie),this},eq:function(ie){return ct(this.get(ie))},filter:function(ie){if(!ie)return this;var ue=b(ie)?ie:xe(ie);return ct(F.call(this,function(De){return ue(De,ie)}))},first:function(){return this.eq(0)},get:function(ie){return ie===void 0?W.call(this):ie<0?this[ie+this.length]:this[ie]},index:function(ie){var ue=ie?ct(ie)[0]:this[0],De=ie?this:ct(ue).parent().children();return W.call(De).indexOf(ue)},last:function(){return this.eq(-1)}});var ft=function(){var ie=/(?:^\w|[A-Z]|\b\w)/g,ue=/[\s-_]+/g;return function(De){return De.replace(ie,function(ye,Se){return ye[Se===0?"toLowerCase":"toUpperCase"]()}).replace(ue,"")}}(),Et=function(){var ie={},ue=document,De=ue.createElement("div"),ye=De.style;return function(Se){if(Se=ft(Se),ie[Se])return ie[Se];var vt=Se.charAt(0).toUpperCase()+Se.slice(1),Nt=["webkit","moz","ms","o"],Xt=(Se+" "+Nt.join(vt+" ")+vt).split(" ");return rt(Xt,function(Bn){if(Bn in ye)return ie[Bn]=Se=ie[Se]=Bn,!1}),ie[Se]}}();ct.prefixedProp=Et,ct.camelCase=ft,Ze.extend({css:function(ie,ue){if(D(ie))return ie=Et(ie),arguments.length>1?this.each(function(ye){return ye.style[ie]=ue}):V.getComputedStyle(this[0])[ie];for(var De in ie)this.css(De,ie[De]);return this}});function _t(ie,ue){return parseInt(V.getComputedStyle(ie[0],null)[ue],10)||0}rt(["Width","Height"],function(ie){var ue=ie.toLowerCase();Ze[ue]=function(){return this[0].getBoundingClientRect()[ue]},Ze["inner"+ie]=function(){return this[0]["client"+ie]},Ze["outer"+ie]=function(De){return this[0]["offset"+ie]+(De?_t(this,"margin"+(ie==="Width"?"Left":"Top"))+_t(this,"margin"+(ie==="Width"?"Right":"Bottom")):0)}});function ht(ie,ue,De){var ye=en(ie,"_cashEvents")||an(ie,"_cashEvents",{});ye[ue]=ye[ue]||[],ye[ue].push(De),ie.addEventListener(ue,De)}function Pt(ie,ue,De){var ye=en(ie,"_cashEvents"),Se=ye&&ye[ue],vt;!Se||(De?(ie.removeEventListener(ue,De),vt=Se.indexOf(De),vt>=0&&Se.splice(vt,1)):(rt(Se,function(Nt){ie.removeEventListener(ue,Nt)}),Se=[]))}Ze.extend({off:function(ie,ue){return this.each(function(De){return Pt(De,ie,ue)})},on:function(ie,ue,De,ye){var Se;if(!D(ie)){for(var vt in ie)this.on(vt,ue,ie[vt]);return this}return b(ue)&&(De=ue,ue=null),ie==="ready"?(Le(De),this):(ue&&(Se=De,De=function(Nt){for(var Xt=Nt.target;!tt(Xt,ue);){if(Xt===this||Xt===null)return Xt=!1;Xt=Xt.parentNode}Xt&&Se.call(Xt,Nt)}),this.each(function(Nt){var Xt=De;ye&&(Xt=function(){De.apply(this,arguments),Pt(Nt,ie,Xt)}),ht(Nt,ie,Xt)}))},one:function(ie,ue,De){return this.on(ie,ue,De,!0)},ready:Le,trigger:function(ie,ue){if(document.createEvent){var De=document.createEvent("HTMLEvents");return De.initEvent(ie,!0,!1),De=this.extend(De,ue),this.each(function(ye){return ye.dispatchEvent(De)})}}});function _n(ie,ue){return"&"+encodeURIComponent(ie)+"="+encodeURIComponent(ue).replace(/%20/g,"+")}function On(ie){var ue=[];return rt(ie.options,function(De){De.selected&&ue.push(De.value)}),ue.length?ue:null}function Ln(ie){var ue=ie.selectedIndex;return ue>=0?ie.options[ue].value:null}function Mn(ie){var ue=ie.type;if(!ue)return null;switch(ue.toLowerCase()){case"select-one":return Ln(ie);case"select-multiple":return On(ie);case"radio":return ie.checked?ie.value:null;case"checkbox":return ie.checked?ie.value:null;default:return ie.value?ie.value:null}}Ze.extend({serialize:function(){var ie="";return rt(this[0].elements||this,function(ue){if(!(ue.disabled||ue.tagName==="FIELDSET")){var De=ue.name;switch(ue.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var ye=Mn(ue);ye!==null&&rt(ye,function(vt){ie+=_n(De,vt)});break;default:var Se=Mn(ue);Se!==null&&(ie+=_n(De,Se))}}}),ie.substr(1)},val:function(ie){return ie===void 0?Mn(this[0]):this.each(function(ue){return ue.value=ie})}});function Zn(ie,ue,De){if(De){var ye=ie.childNodes[0];ie.insertBefore(ue,ye)}else ie.appendChild(ue)}function Pe(ie,ue,De){var ye=D(ue);if(!ye&&ue.length){rt(ue,function(Se){return Pe(ie,Se,De)});return}rt(ie,ye?function(Se){return Se.insertAdjacentHTML(De?"afterbegin":"beforeend",ue)}:function(Se,vt){return Zn(Se,vt===0?ue:ue.cloneNode(!0),De)})}Ze.extend({after:function(ie){return ct(ie).insertAfter(this),this},append:function(ie){return Pe(this,ie),this},appendTo:function(ie){return Pe(ct(ie),this),this},before:function(ie){return ct(ie).insertBefore(this),this},clone:function(){return ct(this.map(function(ie){return ie.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(ie){if(ie===void 0)return this[0].innerHTML;var ue=ie.nodeType?ie[0].outerHTML:ie;return this.each(function(De){return De.innerHTML=ue})},insertAfter:function(ie){var ue=this;return ct(ie).each(function(De,ye){var Se=De.parentNode,vt=De.nextSibling;ue.each(function(Nt){Se.insertBefore(ye===0?Nt:Nt.cloneNode(!0),vt)})}),this},insertBefore:function(ie){var ue=this;return ct(ie).each(function(De,ye){var Se=De.parentNode;ue.each(function(vt){Se.insertBefore(ye===0?vt:vt.cloneNode(!0),De)})}),this},prepend:function(ie){return Pe(this,ie,!0),this},prependTo:function(ie){return Pe(ct(ie),this,!0),this},remove:function(){return this.each(function(ie){if(ie.parentNode)return ie.parentNode.removeChild(ie)})},text:function(ie){return ie===void 0?this[0].textContent:this.each(function(ue){return ue.textContent=ie})}});var Je=k.documentElement;return Ze.extend({position:function(){var ie=this[0];return{left:ie.offsetLeft,top:ie.offsetTop}},offset:function(){var ie=this[0].getBoundingClientRect();return{top:ie.top+V.pageYOffset-Je.clientTop,left:ie.left+V.pageXOffset-Je.clientLeft}},offsetParent:function(){return ct(this[0].offsetParent)}}),Ze.extend({children:function(ie){var ue=[];return this.each(function(De){z.apply(ue,De.children)}),ue=be(ue),ie?ue.filter(function(De){return tt(De,ie)}):ue},closest:function(ie){return!ie||this.length<1?ct():this.is(ie)?this.filter(ie):this.parent().closest(ie)},is:function(ie){if(!ie)return!1;var ue=!1,De=xe(ie);return this.each(function(ye){return ue=De(ye,ie),!ue}),ue},find:function(ie){if(!ie||ie.nodeType)return ct(ie&&this.has(ie).length?ie:null);var ue=[];return this.each(function(De){z.apply(ue,de(ie,De))}),be(ue)},has:function(ie){var ue=D(ie)?function(De){return de(ie,De).length!==0}:function(De){return De.contains(ie)};return this.filter(ue)},next:function(){return ct(this[0].nextElementSibling)},not:function(ie){if(!ie)return this;var ue=xe(ie);return this.filter(function(De){return!ue(De,ie)})},parent:function(){var ie=[];return this.each(function(ue){ue&&ue.parentNode&&ie.push(ue.parentNode)}),be(ie)},parents:function(ie){var ue,De=[];return this.each(function(ye){for(ue=ye;ue&&ue.parentNode&&ue!==k.body.parentNode;)ue=ue.parentNode,(!ie||ie&&tt(ue,ie))&&De.push(ue)}),be(De)},prev:function(){return ct(this[0].previousElementSibling)},siblings:function(ie){var ue=this.parent().children(ie),De=this[0];return ue.filter(function(ye){return ye!==De})}}),ct});var o=function(){function k(V,U,W){h(this,k),U instanceof Element||console.error(Error(U+" is not an HTML Element"));var F=V.getInstance(U);F&&F.destroy(),this.el=U,this.$el=cash(U)}return r(k,null,[{key:"init",value:function(U,W,F){var z=null;if(W instanceof Element)z=new U(W,F);else if(!!W&&(W.jquery||W.cash||W instanceof NodeList)){for(var S=[],b=0;b<W.length;b++)S.push(new U(W[b],F));z=S}return z}}]),k}();(function(k){k.Package?M={}:k.M={},M.jQueryLoaded=!!k.jQuery})(window),t.nodeType||(!e.nodeType&&e.exports&&(t=e.exports=M),t.default=M),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var m=function(k){M.keyDown=!0,(k.which===M.keys.TAB||k.which===M.keys.ARROW_DOWN||k.which===M.keys.ARROW_UP)&&(M.tabPressed=!0)},w=function(k){M.keyDown=!1,(k.which===M.keys.TAB||k.which===M.keys.ARROW_DOWN||k.which===M.keys.ARROW_UP)&&(M.tabPressed=!1)},A=function(k){M.keyDown&&document.body.classList.add("keyboard-focused")},P=function(k){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",m,!0),document.addEventListener("keyup",w,!0),document.addEventListener("focus",A,!0),document.addEventListener("blur",P,!0),M.initializeJqueryWrapper=function(k,V,U){jQuery.fn[V]=function(W){if(k.prototype[W]){var F=Array.prototype.slice.call(arguments,1);if(W.slice(0,3)==="get"){var z=this.first()[0][U];return z[W].apply(z,F)}return this.each(function(){var S=this[U];S[W].apply(S,F)})}else if(typeof W=="object"||!W)return k.init(this,arguments[0]),this;jQuery.error("Method "+W+" does not exist on jQuery."+V)}},M.AutoInit=function(k){var V=k||document.body,U={Autocomplete:V.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:V.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:V.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:V.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:V.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:V.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:V.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:V.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:V.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:V.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:V.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:V.querySelectorAll("select:not(.no-autoinit)"),Sidenav:V.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:V.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:V.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:V.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:V.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:V.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var W in U){var F=M[W];F.init(U[W])}},M.objectSelectorString=function(k){var V=k.prop("tagName")||"",U=k.attr("id")||"",W=k.attr("class")||"";return(V+U+W).replace(/\s/g,"")},M.guid=function(){function k(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return k()+k()+"-"+k()+"-"+k()+"-"+k()+"-"+k()+k()+k()}}(),M.escapeHash=function(k){return k.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(k){var V=$(k),U=V.add(V.parents()),W=!1;return U.each(function(){if($(this).css("position")==="fixed")return W=!0,!1}),W},M.checkWithinContainer=function(k,V,U){var W={top:!1,right:!1,bottom:!1,left:!1},F=k.getBoundingClientRect(),z=k===document.body?Math.max(F.bottom,window.innerHeight):F.bottom,S=k.scrollLeft,b=k.scrollTop,D=V.left-S,Y=V.top-b;return(D<F.left+U||D<U)&&(W.left=!0),(D+V.width>F.right-U||D+V.width>window.innerWidth-U)&&(W.right=!0),(Y<F.top+U||Y<U)&&(W.top=!0),(Y+V.height>z-U||Y+V.height>window.innerHeight-U)&&(W.bottom=!0),W},M.checkPossibleAlignments=function(k,V,U,W){var F={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},z=getComputedStyle(V).overflow==="visible",S=V.getBoundingClientRect(),b=Math.min(S.height,window.innerHeight),D=Math.min(S.width,window.innerWidth),Y=k.getBoundingClientRect(),re=V.scrollLeft,ae=V.scrollTop,ee=U.left-re,de=U.top-ae,ke=U.top+Y.height-ae;return F.spaceOnRight=z?window.innerWidth-(Y.left+U.width):D-(ee+U.width),F.spaceOnRight<0&&(F.left=!1),F.spaceOnLeft=z?Y.right-U.width:ee-U.width+Y.width,F.spaceOnLeft<0&&(F.right=!1),F.spaceOnBottom=z?window.innerHeight-(Y.top+U.height+W):b-(de+U.height+W),F.spaceOnBottom<0&&(F.top=!1),F.spaceOnTop=z?Y.bottom-(U.height+W):ke-(U.height-W),F.spaceOnTop<0&&(F.bottom=!1),F},M.getOverflowParent=function(k){return k==null?null:k===document.body||getComputedStyle(k).overflow!=="visible"?k:M.getOverflowParent(k.parentElement)},M.getIdFromTrigger=function(k){var V=k.getAttribute("data-target");return V||(V=k.getAttribute("href"),V?V=V.slice(1):V=""),V},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};/**
 * Get time in ms
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @type {function}
 * @return {number}
 */var O=Date.now||function(){return new Date().getTime()};/**
 * Returns a function, that, when invoked, will only be triggered at most once
 * during a given window of time. Normally, the throttled function will run
 * as much as it can, without ever going more than once per `wait` duration;
 * but if you'd like to disable the execution on the leading edge, pass
 * `{leading: false}`. To disable execution on the trailing edge, ditto.
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @param {function} func
 * @param {number} wait
 * @param {Object=} options
 * @returns {Function}
 */M.throttle=function(k,V,U){var W=void 0,F=void 0,z=void 0,S=null,b=0;U||(U={});var D=function(){b=U.leading===!1?0:O(),S=null,z=k.apply(W,F),W=F=null};return function(){var Y=O();!b&&U.leading===!1&&(b=Y);var re=V-(Y-b);return W=this,F=arguments,re<=0?(clearTimeout(S),S=null,b=Y,z=k.apply(W,F),W=F=null):!S&&U.trailing!==!1&&(S=setTimeout(D,re)),z}};var B={scope:{}};B.defineProperty=typeof Object.defineProperties=="function"?Object.defineProperty:function(k,V,U){if(U.get||U.set)throw new TypeError("ES3 does not support getters and setters.");k!=Array.prototype&&k!=Object.prototype&&(k[V]=U.value)},B.getGlobal=function(k){return typeof window!="undefined"&&window===k?k:typeof Uo!="undefined"&&Uo!=null?Uo:k},B.global=B.getGlobal(Uo),B.SYMBOL_PREFIX="jscomp_symbol_",B.initSymbol=function(){B.initSymbol=function(){},B.global.Symbol||(B.global.Symbol=B.Symbol)},B.symbolCounter_=0,B.Symbol=function(k){return B.SYMBOL_PREFIX+(k||"")+B.symbolCounter_++},B.initSymbolIterator=function(){B.initSymbol();var k=B.global.Symbol.iterator;k||(k=B.global.Symbol.iterator=B.global.Symbol("iterator")),typeof Array.prototype[k]!="function"&&B.defineProperty(Array.prototype,k,{configurable:!0,writable:!0,value:function(){return B.arrayIterator(this)}}),B.initSymbolIterator=function(){}},B.arrayIterator=function(k){var V=0;return B.iteratorPrototype(function(){return V<k.length?{done:!1,value:k[V++]}:{done:!0}})},B.iteratorPrototype=function(k){return B.initSymbolIterator(),k={next:k},k[B.global.Symbol.iterator]=function(){return this},k},B.array=B.array||{},B.iteratorFromArray=function(k,V){B.initSymbolIterator(),k instanceof String&&(k+="");var U=0,W={next:function(){if(U<k.length){var F=U++;return{value:V(F,k[F]),done:!1}}return W.next=function(){return{done:!0,value:void 0}},W.next()}};return W[Symbol.iterator]=function(){return W},W},B.polyfill=function(k,V,U,W){if(V){for(U=B.global,k=k.split("."),W=0;W<k.length-1;W++){var F=k[W];F in U||(U[F]={}),U=U[F]}k=k[k.length-1],W=U[k],V=V(W),V!=W&&V!=null&&B.defineProperty(U,k,{configurable:!0,writable:!0,value:V})}},B.polyfill("Array.prototype.keys",function(k){return k||function(){return B.iteratorFromArray(this,function(V){return V})}},"es6-impl","es3");var N=Uo;(function(k){M.anime=k()})(function(){function k(Pe){if(!ht.col(Pe))try{return document.querySelectorAll(Pe)}catch{}}function V(Pe,Je){for(var ie=Pe.length,ue=2<=arguments.length?arguments[1]:void 0,De=[],ye=0;ye<ie;ye++)if(ye in Pe){var Se=Pe[ye];Je.call(ue,Se,ye,Pe)&&De.push(Se)}return De}function U(Pe){return Pe.reduce(function(Je,ie){return Je.concat(ht.arr(ie)?U(ie):ie)},[])}function W(Pe){return ht.arr(Pe)?Pe:(ht.str(Pe)&&(Pe=k(Pe)||Pe),Pe instanceof NodeList||Pe instanceof HTMLCollection?[].slice.call(Pe):[Pe])}function F(Pe,Je){return Pe.some(function(ie){return ie===Je})}function z(Pe){var Je={},ie;for(ie in Pe)Je[ie]=Pe[ie];return Je}function S(Pe,Je){var ie=z(Pe),ue;for(ue in Pe)ie[ue]=Je.hasOwnProperty(ue)?Je[ue]:Pe[ue];return ie}function b(Pe,Je){var ie=z(Pe),ue;for(ue in Je)ie[ue]=ht.und(Pe[ue])?Je[ue]:Pe[ue];return ie}function D(Pe){Pe=Pe.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(ue,De,ye,Se){return De+De+ye+ye+Se+Se});var ie=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Pe);Pe=parseInt(ie[1],16);var Je=parseInt(ie[2],16),ie=parseInt(ie[3],16);return"rgba("+Pe+","+Je+","+ie+",1)"}function Y(Pe){function Je(vt,Nt,Xt){return 0>Xt&&(Xt+=1),1<Xt&&--Xt,Xt<1/6?vt+6*(Nt-vt)*Xt:.5>Xt?Nt:Xt<2/3?vt+(Nt-vt)*(2/3-Xt)*6:vt}var De=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(Pe)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(Pe);Pe=parseInt(De[1])/360;var ie=parseInt(De[2])/100,ue=parseInt(De[3])/100,De=De[4]||1;if(ie==0)ue=ie=Pe=ue;else{var ye=.5>ue?ue*(1+ie):ue+ie-ue*ie,Se=2*ue-ye,ue=Je(Se,ye,Pe+1/3),ie=Je(Se,ye,Pe);Pe=Je(Se,ye,Pe-1/3)}return"rgba("+255*ue+","+255*ie+","+255*Pe+","+De+")"}function re(Pe){if(Pe=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(Pe))return Pe[2]}function ae(Pe){if(-1<Pe.indexOf("translate")||Pe==="perspective")return"px";if(-1<Pe.indexOf("rotate")||-1<Pe.indexOf("skew"))return"deg"}function ee(Pe,Je){return ht.fnc(Pe)?Pe(Je.target,Je.id,Je.total):Pe}function de(Pe,Je){if(Je in Pe.style)return getComputedStyle(Pe).getPropertyValue(Je.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function ke(Pe,Je){if(ht.dom(Pe)&&F(Et,Je))return"transform";if(ht.dom(Pe)&&(Pe.getAttribute(Je)||ht.svg(Pe)&&Pe[Je]))return"attribute";if(ht.dom(Pe)&&Je!=="transform"&&de(Pe,Je))return"css";if(Pe[Je]!=null)return"object"}function Oe(Pe,Je){var ie=ae(Je),ie=-1<Je.indexOf("scale")?1:0+ie;if(Pe=Pe.style.transform,!Pe)return ie;for(var ue=[],De=[],ye=[],Se=/(\w+)\((.+?)\)/g;ue=Se.exec(Pe);)De.push(ue[1]),ye.push(ue[2]);return Pe=V(ye,function(vt,Nt){return De[Nt]===Je}),Pe.length?Pe[0]:ie}function Le(Pe,Je){switch(ke(Pe,Je)){case"transform":return Oe(Pe,Je);case"css":return de(Pe,Je);case"attribute":return Pe.getAttribute(Je)}return Pe[Je]||0}function Ee(Pe,Je){var ie=/^(\*=|\+=|-=)/.exec(Pe);if(!ie)return Pe;var ue=re(Pe)||0;switch(Je=parseFloat(Je),Pe=parseFloat(Pe.replace(ie[0],"")),ie[0][0]){case"+":return Je+Pe+ue;case"-":return Je-Pe+ue;case"*":return Je*Pe+ue}}function ct(Pe,Je){return Math.sqrt(Math.pow(Je.x-Pe.x,2)+Math.pow(Je.y-Pe.y,2))}function Ze(Pe){Pe=Pe.points;for(var Je=0,ie,ue=0;ue<Pe.numberOfItems;ue++){var De=Pe.getItem(ue);0<ue&&(Je+=ct(ie,De)),ie=De}return Je}function rt(Pe){if(Pe.getTotalLength)return Pe.getTotalLength();switch(Pe.tagName.toLowerCase()){case"circle":return 2*Math.PI*Pe.getAttribute("r");case"rect":return 2*Pe.getAttribute("width")+2*Pe.getAttribute("height");case"line":return ct({x:Pe.getAttribute("x1"),y:Pe.getAttribute("y1")},{x:Pe.getAttribute("x2"),y:Pe.getAttribute("y2")});case"polyline":return Ze(Pe);case"polygon":var Je=Pe.points;return Ze(Pe)+ct(Je.getItem(Je.numberOfItems-1),Je.getItem(0))}}function tt(Pe,Je){function ie(Se){return Se=Se===void 0?0:Se,Pe.el.getPointAtLength(1<=Je+Se?Je+Se:0)}var ue=ie(),De=ie(-1),ye=ie(1);switch(Pe.property){case"x":return ue.x;case"y":return ue.y;case"angle":return 180*Math.atan2(ye.y-De.y,ye.x-De.x)/Math.PI}}function xe(Pe,Je){var ie=/-?\d*\.?\d+/g,ue;if(ue=ht.pth(Pe)?Pe.totalLength:Pe,ht.col(ue))if(ht.rgb(ue)){var De=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(ue);ue=De?"rgba("+De[1]+",1)":ue}else ue=ht.hex(ue)?D(ue):ht.hsl(ue)?Y(ue):void 0;else De=(De=re(ue))?ue.substr(0,ue.length-De.length):ue,ue=Je&&!/\s/g.test(ue)?De+Je:De;return ue+="",{original:ue,numbers:ue.match(ie)?ue.match(ie).map(Number):[0],strings:ht.str(Pe)||Je?ue.split(ie):[]}}function be(Pe){return Pe=Pe?U(ht.arr(Pe)?Pe.map(W):W(Pe)):[],V(Pe,function(Je,ie,ue){return ue.indexOf(Je)===ie})}function nn(Pe){var Je=be(Pe);return Je.map(function(ie,ue){return{target:ie,id:ue,total:Je.length}})}function $t(Pe,Je){var ie=z(Je);if(ht.arr(Pe)){var ue=Pe.length;ue!==2||ht.obj(Pe[0])?ht.fnc(Je.duration)||(ie.duration=Je.duration/ue):Pe={value:Pe}}return W(Pe).map(function(De,ye){return ye=ye?0:Je.delay,De=ht.obj(De)&&!ht.pth(De)?De:{value:De},ht.und(De.delay)&&(De.delay=ye),De}).map(function(De){return b(De,ie)})}function an(Pe,Je){var ie={},ue;for(ue in Pe){var De=ee(Pe[ue],Je);ht.arr(De)&&(De=De.map(function(ye){return ee(ye,Je)}),De.length===1&&(De=De[0])),ie[ue]=De}return ie.duration=parseFloat(ie.duration),ie.delay=parseFloat(ie.delay),ie}function en(Pe){return ht.arr(Pe)?Pt.apply(this,Pe):_n[Pe]}function ln(Pe,Je){var ie;return Pe.tweens.map(function(ue){ue=an(ue,Je);var De=ue.value,vt=Le(Je.target,Pe.name),ye=ie?ie.to.original:vt,ye=ht.arr(De)?De[0]:ye,Se=Ee(ht.arr(De)?De[1]:De,ye),vt=re(Se)||re(ye)||re(vt);return ue.from=xe(ye,vt),ue.to=xe(Se,vt),ue.start=ie?ie.end:Pe.offset,ue.end=ue.start+ue.delay+ue.duration,ue.easing=en(ue.easing),ue.elasticity=(1e3-Math.min(Math.max(ue.elasticity,1),999))/1e3,ue.isPath=ht.pth(De),ue.isColor=ht.col(ue.from.original),ue.isColor&&(ue.round=1),ie=ue})}function mn(Pe,Je){return V(U(Pe.map(function(ie){return Je.map(function(ue){var De=ke(ie.target,ue.name);if(De){var ye=ln(ue,ie);ue={type:De,property:ue.name,animatable:ie,tweens:ye,duration:ye[ye.length-1].end,delay:ye[0].delay}}else ue=void 0;return ue})})),function(ie){return!ht.und(ie)})}function fn(Pe,Je,ie,ue){var De=Pe==="delay";return Je.length?(De?Math.min:Math.max).apply(Math,Je.map(function(ye){return ye[Pe]})):De?ue.delay:ie.offset+ue.delay+ue.duration}function An(Pe){var Je=S(Xe,Pe),ie=S(ft,Pe),ue=nn(Pe.targets),De=[],ye=b(Je,ie),Se;for(Se in Pe)ye.hasOwnProperty(Se)||Se==="targets"||De.push({name:Se,offset:ye.offset,tweens:$t(Pe[Se],ie)});return Pe=mn(ue,De),b(Je,{children:[],animatables:ue,animations:Pe,duration:fn("duration",Pe,Je,ie),delay:fn("delay",Pe,Je,ie)})}function ze(Pe){function Je(){return window.Promise&&new Promise(function(Rn){return Bn=Rn})}function ie(Rn){return jt.reversed?jt.duration-Rn:Rn}function ue(Rn){for(var dr=0,Fn={},Ar=jt.animations,hr=Ar.length;dr<hr;){var Lr=Ar[dr],Kn=Lr.animatable,Jn=Lr.tweens,Vr=Jn.length-1,pr=Jn[Vr];Vr&&(pr=V(Jn,function(ne){return Rn<ne.end})[0]||pr);for(var Jn=Math.min(Math.max(Rn-pr.start-pr.delay,0),pr.duration)/pr.duration,Fi=isNaN(Jn)?1:pr.easing(Jn,pr.elasticity),Jn=pr.to.strings,ai=pr.round,Vr=[],si=void 0,si=pr.to.numbers.length,Ni=0;Ni<si;Ni++){var _e=void 0,_e=pr.to.numbers[Ni],oo=pr.from.numbers[Ni],_e=pr.isPath?tt(pr.value,Fi*_e):oo+Fi*(_e-oo);ai&&(pr.isColor&&2<Ni||(_e=Math.round(_e*ai)/ai)),Vr.push(_e)}if(pr=Jn.length)for(si=Jn[0],Fi=0;Fi<pr;Fi++)ai=Jn[Fi+1],Ni=Vr[Fi],isNaN(Ni)||(si=ai?si+(Ni+ai):si+(Ni+" "));else si=Vr[0];On[Lr.type](Kn.target,Lr.property,si,Fn,Kn.id),Lr.currentValue=si,dr++}if(dr=Object.keys(Fn).length)for(Ar=0;Ar<dr;Ar++)_t||(_t=de(document.body,"transform")?"transform":"-webkit-transform"),jt.animatables[Ar].target.style[_t]=Fn[Ar].join(" ");jt.currentTime=Rn,jt.progress=Rn/jt.duration*100}function De(Rn){jt[Rn]&&jt[Rn](jt)}function ye(){jt.remaining&&jt.remaining!==!0&&jt.remaining--}function Se(Rn){var dr=jt.duration,Fn=jt.offset,Ar=Fn+jt.delay,hr=jt.currentTime,Lr=jt.reversed,Kn=ie(Rn);if(jt.children.length){var Jn=jt.children,Vr=Jn.length;if(Kn>=jt.currentTime)for(var pr=0;pr<Vr;pr++)Jn[pr].seek(Kn);else for(;Vr--;)Jn[Vr].seek(Kn)}(Kn>=Ar||!dr)&&(jt.began||(jt.began=!0,De("begin")),De("run")),Kn>Fn&&Kn<dr?ue(Kn):(Kn<=Fn&&hr!==0&&(ue(0),Lr&&ye()),(Kn>=dr&&hr!==dr||!dr)&&(ue(dr),Lr||ye())),De("update"),Rn>=dr&&(jt.remaining?(Nt=vt,jt.direction==="alternate"&&(jt.reversed=!jt.reversed)):(jt.pause(),jt.completed||(jt.completed=!0,De("complete"),"Promise"in window&&(Bn(),kn=Je()))),Xt=0)}Pe=Pe===void 0?{}:Pe;var vt,Nt,Xt=0,Bn=null,kn=Je(),jt=An(Pe);return jt.reset=function(){var Rn=jt.direction,dr=jt.loop;for(jt.currentTime=0,jt.progress=0,jt.paused=!0,jt.began=!1,jt.completed=!1,jt.reversed=Rn==="reverse",jt.remaining=Rn==="alternate"&&dr===1?2:dr,ue(0),Rn=jt.children.length;Rn--;)jt.children[Rn].reset()},jt.tick=function(Rn){vt=Rn,Nt||(Nt=vt),Se((Xt+vt-Nt)*ze.speed)},jt.seek=function(Rn){Se(ie(Rn))},jt.pause=function(){var Rn=Ln.indexOf(jt);-1<Rn&&Ln.splice(Rn,1),jt.paused=!0},jt.play=function(){jt.paused&&(jt.paused=!1,Nt=0,Xt=ie(jt.currentTime),Ln.push(jt),Mn||Zn())},jt.reverse=function(){jt.reversed=!jt.reversed,Nt=0,Xt=ie(jt.currentTime)},jt.restart=function(){jt.pause(),jt.reset(),jt.play()},jt.finished=kn,jt.reset(),jt.autoplay&&jt.play(),jt}var Xe={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},ft={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},Et="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),_t,ht={arr:function(Pe){return Array.isArray(Pe)},obj:function(Pe){return-1<Object.prototype.toString.call(Pe).indexOf("Object")},pth:function(Pe){return ht.obj(Pe)&&Pe.hasOwnProperty("totalLength")},svg:function(Pe){return Pe instanceof SVGElement},dom:function(Pe){return Pe.nodeType||ht.svg(Pe)},str:function(Pe){return typeof Pe=="string"},fnc:function(Pe){return typeof Pe=="function"},und:function(Pe){return typeof Pe=="undefined"},hex:function(Pe){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(Pe)},rgb:function(Pe){return/^rgb/.test(Pe)},hsl:function(Pe){return/^hsl/.test(Pe)},col:function(Pe){return ht.hex(Pe)||ht.rgb(Pe)||ht.hsl(Pe)}},Pt=function(){function Pe(Je,ie,ue){return(((1-3*ue+3*ie)*Je+(3*ue-6*ie))*Je+3*ie)*Je}return function(Je,ie,ue,De){if(0<=Je&&1>=Je&&0<=ue&&1>=ue){var ye=new Float32Array(11);if(Je!==ie||ue!==De)for(var Se=0;11>Se;++Se)ye[Se]=Pe(.1*Se,Je,ue);return function(vt){if(Je===ie&&ue===De)return vt;if(vt===0)return 0;if(vt===1)return 1;for(var Nt=0,Xt=1;Xt!==10&&ye[Xt]<=vt;++Xt)Nt+=.1;--Xt;var Xt=Nt+(vt-ye[Xt])/(ye[Xt+1]-ye[Xt])*.1,Bn=3*(1-3*ue+3*Je)*Xt*Xt+2*(3*ue-6*Je)*Xt+3*Je;if(.001<=Bn){for(Nt=0;4>Nt&&(Bn=3*(1-3*ue+3*Je)*Xt*Xt+2*(3*ue-6*Je)*Xt+3*Je,Bn!==0);++Nt)var kn=Pe(Xt,Je,ue)-vt,Xt=Xt-kn/Bn;vt=Xt}else if(Bn===0)vt=Xt;else{var Xt=Nt,Nt=Nt+.1,jt=0;do kn=Xt+(Nt-Xt)/2,Bn=Pe(kn,Je,ue)-vt,0<Bn?Nt=kn:Xt=kn;while(1e-7<Math.abs(Bn)&&10>++jt);vt=kn}return Pe(vt,ie,De)}}}}(),_n=function(){function Pe(Se,vt){return Se===0||Se===1?Se:-Math.pow(2,10*(Se-1))*Math.sin(2*(Se-1-vt/(2*Math.PI)*Math.asin(1))*Math.PI/vt)}var Je="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),ie={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],Pe],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(Se,vt){return 1-Pe(1-Se,vt)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(Se,vt){return .5>Se?Pe(2*Se,vt)/2:1-Pe(-2*Se+2,vt)/2}]},ue={linear:Pt(.25,.25,.75,.75)},De={},ye;for(ye in ie)De.type=ye,ie[De.type].forEach(function(Se){return function(vt,Nt){ue["ease"+Se.type+Je[Nt]]=ht.fnc(vt)?vt:Pt.apply(N,vt)}}(De)),De={type:De.type};return ue}(),On={css:function(Pe,Je,ie){return Pe.style[Je]=ie},attribute:function(Pe,Je,ie){return Pe.setAttribute(Je,ie)},object:function(Pe,Je,ie){return Pe[Je]=ie},transform:function(Pe,Je,ie,ue,De){ue[De]||(ue[De]=[]),ue[De].push(Je+"("+ie+")")}},Ln=[],Mn=0,Zn=function(){function Pe(){Mn=requestAnimationFrame(Je)}function Je(ie){var ue=Ln.length;if(ue){for(var De=0;De<ue;)Ln[De]&&Ln[De].tick(ie),De++;Pe()}else cancelAnimationFrame(Mn),Mn=0}return Pe}();return ze.version="2.2.0",ze.speed=1,ze.running=Ln,ze.remove=function(Pe){Pe=be(Pe);for(var Je=Ln.length;Je--;)for(var ie=Ln[Je],ue=ie.animations,De=ue.length;De--;)F(Pe,ue[De].animatable.target)&&(ue.splice(De,1),ue.length||ie.pause())},ze.getValue=Le,ze.path=function(Pe,Je){var ie=ht.str(Pe)?k(Pe)[0]:Pe,ue=Je||100;return function(De){return{el:ie,property:De,totalLength:rt(ie)*(ue/100)}}},ze.setDashoffset=function(Pe){var Je=rt(Pe);return Pe.setAttribute("stroke-dasharray",Je),Je},ze.bezier=Pt,ze.easings=_n,ze.timeline=function(Pe){var Je=ze(Pe);return Je.pause(),Je.duration=0,Je.add=function(ie){return Je.children.forEach(function(ue){ue.began=!0,ue.completed=!0}),W(ie).forEach(function(ue){var De=b(ue,S(ft,Pe||{}));De.targets=De.targets||Pe.targets,ue=Je.duration;var ye=De.offset;De.autoplay=!1,De.direction=Je.direction,De.offset=ht.und(ye)?ue:Ee(ye,ue),Je.began=!0,Je.completed=!0,Je.seek(De.offset),De=ze(De),De.began=!0,De.completed=!0,De.duration>ue&&(Je.duration=De.duration),Je.children.push(De)}),Je.seek(0),Je.reset(),Je.autoplay&&Je.restart(),Je},Je},ze.random=function(Pe,Je){return Math.floor(Math.random()*(Je-Pe+1))+Pe},ze}),function(k,V){var U={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));D.el.M_Collapsible=D,D.options=k.extend({},z.defaults,b),D.$headers=D.$el.children("li").children(".collapsible-header"),D.$headers.attr("tabindex",0),D._setupEventHandlers();var Y=D.$el.children("li.active").children(".collapsible-body");return D.options.accordion?Y.first().css("display","block"):Y.css("display","block"),D}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var b=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(D){D.addEventListener("keydown",b._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var b=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(D){D.removeEventListener("keydown",b._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(b){var D=k(b.target).closest(".collapsible-header");if(b.target&&D.length){var Y=D.closest(".collapsible");if(Y[0]===this.el){var re=D.closest("li"),ae=Y.children("li"),ee=re[0].classList.contains("active"),de=ae.index(re);ee?this.close(de):this.open(de)}}}},{key:"_handleCollapsibleKeydown",value:function(b){b.keyCode===13&&this._handleCollapsibleClickBound(b)}},{key:"_animateIn",value:function(b){var D=this,Y=this.$el.children("li").eq(b);if(Y.length){var re=Y.children(".collapsible-body");V.remove(re[0]),re.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var ae=re.css("padding-top"),ee=re.css("padding-bottom"),de=re[0].scrollHeight;re.css({paddingTop:0,paddingBottom:0}),V({targets:re[0],height:de,paddingTop:ae,paddingBottom:ee,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(ke){re.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),typeof D.options.onOpenEnd=="function"&&D.options.onOpenEnd.call(D,Y[0])}})}}},{key:"_animateOut",value:function(b){var D=this,Y=this.$el.children("li").eq(b);if(Y.length){var re=Y.children(".collapsible-body");V.remove(re[0]),re.css("overflow","hidden"),V({targets:re[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){re.css({height:"",overflow:"",padding:"",display:""}),typeof D.options.onCloseEnd=="function"&&D.options.onCloseEnd.call(D,Y[0])}})}}},{key:"open",value:function(b){var D=this,Y=this.$el.children("li").eq(b);if(Y.length&&!Y[0].classList.contains("active")){if(typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,Y[0]),this.options.accordion){var re=this.$el.children("li"),ae=this.$el.children("li.active");ae.each(function(ee){var de=re.index(k(ee));D.close(de)})}Y[0].classList.add("active"),this._animateIn(b)}}},{key:"close",value:function(b){var D=this.$el.children("li").eq(b);D.length&&D[0].classList.contains("active")&&(typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,D[0]),D[0].classList.remove("active"),this._animateOut(b))}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Collapsible}},{key:"defaults",get:function(){return U}}]),z}(o);M.Collapsible=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"collapsible","M_Collapsible")}(cash,M.anime),function(k,V){var U={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_Dropdown=D,z._dropdowns.push(D),D.id=M.getIdFromTrigger(S),D.dropdownEl=document.getElementById(D.id),D.$dropdownEl=k(D.dropdownEl),D.options=k.extend({},z.defaults,b),D.isOpen=!1,D.isScrollable=!1,D.isTouchMoving=!1,D.focusedIndex=-1,D.filterQuery=[],D.options.container?k(D.options.container).append(D.dropdownEl):D.$el.after(D.dropdownEl),D._makeDropdownFocusable(),D._resetFilterQueryBound=D._resetFilterQuery.bind(D),D._handleDocumentClickBound=D._handleDocumentClick.bind(D),D._handleDocumentTouchmoveBound=D._handleDocumentTouchmove.bind(D),D._handleDropdownClickBound=D._handleDropdownClick.bind(D),D._handleDropdownKeydownBound=D._handleDropdownKeydown.bind(D),D._handleTriggerKeydownBound=D._handleTriggerKeydown.bind(D),D._setupEventHandlers(),D}return r(z,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),z._dropdowns.splice(z._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(b){b.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(b){var D=b.toElement||b.relatedTarget,Y=!!k(D).closest(".dropdown-content").length,re=!1,ae=k(D).closest(".dropdown-trigger");ae.length&&!!ae[0].M_Dropdown&&ae[0].M_Dropdown.isOpen&&(re=!0),!re&&!Y&&this.close()}},{key:"_handleDocumentClick",value:function(b){var D=this,Y=k(b.target);this.options.closeOnClick&&Y.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){D.close()},0):(Y.closest(".dropdown-trigger").length||!Y.closest(".dropdown-content").length)&&setTimeout(function(){D.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(b){(b.which===M.keys.ARROW_DOWN||b.which===M.keys.ENTER)&&!this.isOpen&&(b.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(b){var D=k(b.target);D.closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(b){if(typeof this.options.onItemClick=="function"){var D=k(b.target).closest("li")[0];this.options.onItemClick.call(this,D)}}},{key:"_handleDropdownKeydown",value:function(b){if(b.which===M.keys.TAB)b.preventDefault(),this.close();else if((b.which===M.keys.ARROW_DOWN||b.which===M.keys.ARROW_UP)&&this.isOpen){b.preventDefault();var D=b.which===M.keys.ARROW_DOWN?1:-1,Y=this.focusedIndex,re=!1;do if(Y=Y+D,!!this.dropdownEl.children[Y]&&this.dropdownEl.children[Y].tabIndex!==-1){re=!0;break}while(Y<this.dropdownEl.children.length&&Y>=0);re&&(this.focusedIndex=Y,this._focusFocusedItem())}else if(b.which===M.keys.ENTER&&this.isOpen){var ae=this.dropdownEl.children[this.focusedIndex],ee=k(ae).find("a, button").first();ee.length?ee[0].click():ae&&ae.click()}else b.which===M.keys.ESC&&this.isOpen&&(b.preventDefault(),this.close());var de=String.fromCharCode(b.which).toLowerCase(),ke=[9,13,27,38,40];if(de&&ke.indexOf(b.which)===-1){this.filterQuery.push(de);var Oe=this.filterQuery.join(""),Le=k(this.dropdownEl).find("li").filter(function(Ee){return k(Ee).text().toLowerCase().indexOf(Oe)===0})[0];Le&&(this.focusedIndex=k(Le).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,k(this.dropdownEl).children().each(function(b){b.getAttribute("tabindex")||b.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var b=this.el.getBoundingClientRect(),D=this.dropdownEl.getBoundingClientRect(),Y=D.height,re=D.width,ae=b.left-D.left,ee=b.top-D.top,de={left:ae,top:ee,height:Y,width:re},ke=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,Oe=M.checkPossibleAlignments(this.el,ke,de,this.options.coverTrigger?0:b.height),Le="top",Ee=this.options.alignment;if(ee+=this.options.coverTrigger?0:b.height,this.isScrollable=!1,Oe.top||(Oe.bottom?Le="bottom":(this.isScrollable=!0,Oe.spaceOnTop>Oe.spaceOnBottom?(Le="bottom",Y+=Oe.spaceOnTop,ee-=Oe.spaceOnTop):Y+=Oe.spaceOnBottom)),!Oe[Ee]){var ct=Ee==="left"?"right":"left";Oe[ct]?Ee=ct:Oe.spaceOnLeft>Oe.spaceOnRight?(Ee="right",re+=Oe.spaceOnLeft,ae-=Oe.spaceOnLeft):(Ee="left",re+=Oe.spaceOnRight)}return Le==="bottom"&&(ee=ee-D.height+(this.options.coverTrigger?b.height:0)),Ee==="right"&&(ae=ae-D.width+b.width),{x:ae,y:ee,verticalAlignment:Le,horizontalAlignment:Ee,height:Y,width:re}}},{key:"_animateIn",value:function(){var b=this;V.remove(this.dropdownEl),V({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(D){b.options.autoFocus&&b.dropdownEl.focus(),typeof b.options.onOpenEnd=="function"&&b.options.onOpenEnd.call(b,b.el)}})}},{key:"_animateOut",value:function(){var b=this;V.remove(this.dropdownEl),V({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(D){b._resetDropdownStyles(),typeof b.options.onCloseEnd=="function"&&b.options.onCloseEnd.call(b,b.el)}})}},{key:"_placeDropdown",value:function(){var b=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=b+"px";var D=this._getDropdownPosition();this.dropdownEl.style.left=D.x+"px",this.dropdownEl.style.top=D.y+"px",this.dropdownEl.style.height=D.height+"px",this.dropdownEl.style.width=D.width+"px",this.dropdownEl.style.transformOrigin=(D.horizontalAlignment==="left"?"0":"100%")+" "+(D.verticalAlignment==="top"?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){!this.isOpen||(this.isOpen=!1,this.focusedIndex=-1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Dropdown}},{key:"defaults",get:function(){return U}}]),z}(o);W._dropdowns=[],M.Dropdown=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"dropdown","M_Dropdown")}(cash,M.anime),function(k,V){var U={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_Modal=D,D.options=k.extend({},z.defaults,b),D.isOpen=!1,D.id=D.$el.attr("id"),D._openingTrigger=void 0,D.$overlay=k('<div class="modal-overlay"></div>'),D.el.tabIndex=0,D._nthModalOpened=0,z._count++,D._setupEventHandlers(),D}return r(z,[{key:"destroy",value:function(){z._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),z._count===1&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){z._count===0&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(b){var D=k(b.target).closest(".modal-trigger");if(D.length){var Y=M.getIdFromTrigger(D[0]),re=document.getElementById(Y).M_Modal;re&&re.open(D),b.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(b){var D=k(b.target).closest(".modal-close");D.length&&this.close()}},{key:"_handleKeydown",value:function(b){b.keyCode===27&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(b){!this.el.contains(b.target)&&this._nthModalOpened===z._modalsOpen&&this.el.focus()}},{key:"_animateIn",value:function(){var b=this;k.extend(this.el.style,{display:"block",opacity:0}),k.extend(this.$overlay[0].style,{display:"block",opacity:0}),V({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var D={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){typeof b.options.onOpenEnd=="function"&&b.options.onOpenEnd.call(b,b.el,b._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(k.extend(D,{bottom:0,opacity:1}),V(D)):(k.extend(D,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),V(D))}},{key:"_animateOut",value:function(){var b=this;V({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var D={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){b.el.style.display="none",b.$overlay.remove(),typeof b.options.onCloseEnd=="function"&&b.options.onCloseEnd.call(b,b.el)}};this.el.classList.contains("bottom-sheet")?(k.extend(D,{bottom:"-100%",opacity:0}),V(D)):(k.extend(D,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),V(D))}},{key:"open",value:function(b){if(!this.isOpen)return this.isOpen=!0,z._modalsOpen++,this._nthModalOpened=z._modalsOpen,this.$overlay[0].style.zIndex=1e3+z._modalsOpen*2,this.el.style.zIndex=1e3+z._modalsOpen*2+1,this._openingTrigger=b?b[0]:void 0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),V.remove(this.el),V.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(!!this.isOpen)return this.isOpen=!1,z._modalsOpen--,this._nthModalOpened=0,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),z._modalsOpen===0&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),V.remove(this.el),V.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Modal}},{key:"defaults",get:function(){return U}}]),z}(o);W._modalsOpen=0,W._count=0,M.Modal=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"modal","M_Modal")}(cash,M.anime),function(k,V){var U={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_Materialbox=D,D.options=k.extend({},z.defaults,b),D.overlayActive=!1,D.doneAnimating=!0,D.placeholder=k("<div></div>").addClass("material-placeholder"),D.originalWidth=0,D.originalHeight=0,D.originInlineStyles=D.$el.attr("style"),D.caption=D.el.getAttribute("data-caption")||"",D.$el.before(D.placeholder),D.placeholder.append(D.$el),D._setupEventHandlers(),D}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,k(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(b){this.doneAnimating===!1||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(b){b.keyCode===27&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=k();for(var b=this.placeholder[0].parentNode;b!==null&&!k(b).is(document);){var D=k(b);D.css("overflow")!=="visible"&&(D.css("overflow","visible"),this.ancestorsChanged===void 0?this.ancestorsChanged=D:this.ancestorsChanged=this.ancestorsChanged.add(D)),b=b.parentNode}}},{key:"_animateImageIn",value:function(){var b=this,D={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){b.doneAnimating=!0,typeof b.options.onOpenEnd=="function"&&b.options.onOpenEnd.call(b,b.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),this.maxWidth!=="none"&&(D.maxWidth=this.newWidth),this.maxHeight!=="none"&&(D.maxHeight=this.newHeight),V(D)}},{key:"_animateImageOut",value:function(){var b=this,D={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){b.placeholder.css({height:"",width:"",position:"",top:"",left:""}),b.attrWidth&&b.$el.attr("width",b.attrWidth),b.attrHeight&&b.$el.attr("height",b.attrHeight),b.$el.removeAttr("style"),b.originInlineStyles&&b.$el.attr("style",b.originInlineStyles),b.$el.removeClass("active"),b.doneAnimating=!0,b.ancestorsChanged.length&&b.ancestorsChanged.css("overflow",""),typeof b.options.onCloseEnd=="function"&&b.options.onCloseEnd.call(b,b.el)}};V(D)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var b=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=k('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){b.doneAnimating&&b.close()}),this.$el.before(this.$overlay);var D=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*D.left+"px",top:-1*D.top+"px"}),V.remove(this.el),V.remove(this.$overlay[0]),V({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),this.caption!==""&&(this.$photocaption&&V.remove(this.$photoCaption[0]),this.$photoCaption=k('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),k("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),V({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var Y=0,re=this.originalWidth/this.windowWidth,ae=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,re>ae?(Y=this.originalHeight/this.originalWidth,this.newWidth=this.windowWidth*.9,this.newHeight=this.windowWidth*.9*Y):(Y=this.originalWidth/this.originalHeight,this.newWidth=this.windowHeight*.9*Y,this.newHeight=this.windowHeight*.9),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var b=this;this._updateVars(),this.doneAnimating=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),V.remove(this.el),V.remove(this.$overlay[0]),this.caption!==""&&V.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),V({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){b.overlayActive=!1,b.$overlay.remove()}}),this._animateImageOut(),this.caption!==""&&V({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){b.$photoCaption.remove()}})}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Materialbox}},{key:"defaults",get:function(){return U}}]),z}(o);M.Materialbox=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"materialbox","M_Materialbox")}(cash,M.anime),function(k){var V={responsiveThreshold:0},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.el.M_Parallax=b,b.options=k.extend({},F.defaults,S),b._enabled=window.innerWidth>b.options.responsiveThreshold,b.$img=b.$el.find("img").first(),b.$img.each(function(){var D=this;D.complete&&k(D).trigger("load")}),b._updateParallax(),b._setupEventHandlers(),b._setupStyles(),F._parallaxes.push(b),b}return r(F,[{key:"destroy",value:function(){F._parallaxes.splice(F._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),F._parallaxes.length===0&&(F._handleScrollThrottled=M.throttle(F._handleScroll,5),window.addEventListener("scroll",F._handleScrollThrottled),F._handleWindowResizeThrottled=M.throttle(F._handleWindowResize,5),window.addEventListener("resize",F._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),F._parallaxes.length===0&&(window.removeEventListener("scroll",F._handleScrollThrottled),window.removeEventListener("resize",F._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var S=this.$el.height()>0?this.el.parentNode.offsetHeight:500,b=this.$img[0].offsetHeight,D=b-S,Y=this.$el.offset().top+S,re=this.$el.offset().top,ae=M.getDocumentScrollTop(),ee=window.innerHeight,de=ae+ee,ke=(de-re)/(S+ee),Oe=D*ke;this._enabled?Y>ae&&re<ae+ee&&(this.$img[0].style.transform="translate3D(-50%, "+Oe+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_Parallax}},{key:"_handleScroll",value:function(){for(var S=0;S<F._parallaxes.length;S++){var b=F._parallaxes[S];b._updateParallax.call(b)}}},{key:"_handleWindowResize",value:function(){for(var S=0;S<F._parallaxes.length;S++){var b=F._parallaxes[S];b._enabled=window.innerWidth>b.options.responsiveThreshold}}},{key:"defaults",get:function(){return V}}]),F}(o);U._parallaxes=[],M.Parallax=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"parallax","M_Parallax")}(cash),function(k,V){var U={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_Tabs=D,D.options=k.extend({},z.defaults,b),D.$tabLinks=D.$el.children("li.tab").children("a"),D.index=0,D._setupActiveTabLink(),D.options.swipeable?D._setupSwipeableTabs():D._setupNormalTabs(),D._setTabsAndTabWidth(),D._createIndicator(),D._setupEventHandlers(),D}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),this.tabWidth!==0&&this.tabsWidth!==0&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(b){var D=this,Y=k(b.target).closest("li.tab"),re=k(b.target).closest("a");if(!(!re.length||!re.parent().hasClass("tab"))){if(Y.hasClass("disabled")){b.preventDefault();return}if(!re.attr("target")){this.$activeTabLink.removeClass("active");var ae=this.$content;this.$activeTabLink=re,this.$content=k(M.escapeHash(re[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var ee=this.index;this.index=Math.max(this.$tabLinks.index(re),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){typeof D.options.onShow=="function"&&D.options.onShow.call(D,D.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),typeof this.options.onShow=="function"&&this.options.onShow.call(this,this.$content[0]),ae.length&&!ae.is(this.$content)&&(ae[0].style.display="none",ae.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(ee),b.preventDefault()}}}},{key:"_createIndicator",value:function(){var b=this,D=document.createElement("li");D.classList.add("indicator"),this.el.appendChild(D),this._indicator=D,setTimeout(function(){b._indicator.style.left=b._calcLeftPos(b.$activeTabLink)+"px",b._indicator.style.right=b._calcRightPos(b.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=k(this.$tabLinks.filter('[href="'+location.hash+'"]')),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=k(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var b=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var D=k();this.$tabLinks.each(function(ae){var ee=k(M.escapeHash(ae.hash));ee.addClass("carousel-item"),D=D.add(ee)});var Y=k('<div class="tabs-content carousel carousel-slider"></div>');D.first().before(Y),Y.append(D),D[0].style.display="";var re=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(Y[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(ae){var ee=b.index;b.index=k(ae).index(),b.$activeTabLink.removeClass("active"),b.$activeTabLink=b.$tabLinks.eq(b.index),b.$activeTabLink.addClass("active"),b._animateIndicator(ee),typeof b.options.onShow=="function"&&b.options.onShow.call(b,b.$content[0])}}),this._tabsCarousel.set(re)}},{key:"_teardownSwipeableTabs",value:function(){var b=this._tabsCarousel.$el;this._tabsCarousel.destroy(),b.after(b.children()),b.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(b){if(b.hash){var D=k(M.escapeHash(b.hash));D.length&&(D[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(b){if(b.hash){var D=k(M.escapeHash(b.hash));D.length&&(D[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(b){return Math.ceil(this.tabsWidth-b.position().left-b[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(b){return Math.floor(b.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(b){var D=0,Y=0;this.index-b>=0?D=90:Y=90;var re={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:D},right:{value:this._calcRightPos(this.$activeTabLink),delay:Y},duration:this.options.duration,easing:"easeOutQuad"};V.remove(this._indicator),V(re)}},{key:"select",value:function(b){var D=this.$tabLinks.filter('[href="#'+b+'"]');D.length&&D.trigger("click")}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Tabs}},{key:"defaults",get:function(){return U}}]),z}(o);M.Tabs=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"tabs","M_Tabs")}(cash,M.anime),function(k,V){var U={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_Tooltip=D,D.options=k.extend({},z.defaults,b),D.isOpen=!1,D.isHovered=!1,D.isFocused=!1,D._appendTooltipEl(),D._setupEventHandlers(),D}return r(z,[{key:"destroy",value:function(){k(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var b=document.createElement("div");b.classList.add("material-tooltip"),this.tooltipEl=b;var D=document.createElement("div");D.classList.add("tooltip-content"),D.innerHTML=this.options.html,b.appendChild(D),document.body.appendChild(b)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(b){this.isOpen||(b=b===void 0?!0:void 0,this.isOpen=!0,this.options=k.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(b))}},{key:"close",value:function(){!this.isOpen||(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var b=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){b.isHovered||b.isFocused||b._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(b){var D=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){!D.isHovered&&!D.isFocused&&!b||D._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var b=this.el,D=this.tooltipEl,Y=b.offsetHeight,re=b.offsetWidth,ae=D.offsetHeight,ee=D.offsetWidth,de=void 0,ke=this.options.margin,Oe=void 0,Le=void 0;this.xMovement=0,this.yMovement=0,Oe=b.getBoundingClientRect().top+M.getDocumentScrollTop(),Le=b.getBoundingClientRect().left+M.getDocumentScrollLeft(),this.options.position==="top"?(Oe+=-ae-ke,Le+=re/2-ee/2,this.yMovement=-this.options.transitionMovement):this.options.position==="right"?(Oe+=Y/2-ae/2,Le+=re+ke,this.xMovement=this.options.transitionMovement):this.options.position==="left"?(Oe+=Y/2-ae/2,Le+=-ee-ke,this.xMovement=-this.options.transitionMovement):(Oe+=Y+ke,Le+=re/2-ee/2,this.yMovement=this.options.transitionMovement),de=this._repositionWithinScreen(Le,Oe,ee,ae),k(D).css({top:de.y+"px",left:de.x+"px"})}},{key:"_repositionWithinScreen",value:function(b,D,Y,re){var ae=M.getDocumentScrollLeft(),ee=M.getDocumentScrollTop(),de=b-ae,ke=D-ee,Oe={left:de,top:ke,width:Y,height:re},Le=this.options.margin+this.options.transitionMovement,Ee=M.checkWithinContainer(document.body,Oe,Le);return Ee.left?de=Le:Ee.right&&(de-=de+Y-window.innerWidth),Ee.top?ke=Le:Ee.bottom&&(ke-=ke+re-window.innerHeight),{x:de+ae,y:ke+ee}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",V.remove(this.tooltipEl),V({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){V.remove(this.tooltipEl),V({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var b={},D=this.el.getAttribute("data-tooltip"),Y=this.el.getAttribute("data-position");return D&&(b.html=D),Y&&(b.position=Y),b}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Tooltip}},{key:"defaults",get:function(){return U}}]),z}(o);M.Tooltip=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"tooltip","M_Tooltip")}(cash,M.anime),function(k){var V=V||{},U=document.querySelectorAll.bind(document);function W(ae){return ae!==null&&ae===ae.window}function F(ae){return W(ae)?ae:ae.nodeType===9&&ae.defaultView}function z(ae){var ee,de,ke={top:0,left:0},Oe=ae&&ae.ownerDocument;return ee=Oe.documentElement,typeof ae.getBoundingClientRect!="undefined"&&(ke=ae.getBoundingClientRect()),de=F(Oe),{top:ke.top+de.pageYOffset-ee.clientTop,left:ke.left+de.pageXOffset-ee.clientLeft}}function S(ae){var ee="";for(var de in ae)ae.hasOwnProperty(de)&&(ee+=de+":"+ae[de]+";");return ee}var b={duration:750,show:function(ae,ee){if(ae.button===2)return!1;var de=ee||this,ke=document.createElement("div");ke.className="waves-ripple",de.appendChild(ke);var Oe=z(de),Le=ae.pageY-Oe.top,Ee=ae.pageX-Oe.left,ct="scale("+de.clientWidth/100*10+")";"touches"in ae&&(Le=ae.touches[0].pageY-Oe.top,Ee=ae.touches[0].pageX-Oe.left),ke.setAttribute("data-hold",Date.now()),ke.setAttribute("data-scale",ct),ke.setAttribute("data-x",Ee),ke.setAttribute("data-y",Le);var Ze={top:Le+"px",left:Ee+"px"};ke.className=ke.className+" waves-notransition",ke.setAttribute("style",S(Ze)),ke.className=ke.className.replace("waves-notransition",""),Ze["-webkit-transform"]=ct,Ze["-moz-transform"]=ct,Ze["-ms-transform"]=ct,Ze["-o-transform"]=ct,Ze.transform=ct,Ze.opacity="1",Ze["-webkit-transition-duration"]=b.duration+"ms",Ze["-moz-transition-duration"]=b.duration+"ms",Ze["-o-transition-duration"]=b.duration+"ms",Ze["transition-duration"]=b.duration+"ms",Ze["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Ze["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Ze["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Ze["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",ke.setAttribute("style",S(Ze))},hide:function(ae){D.touchup(ae);var ee=this;ee.clientWidth*1.4;var de=null,ke=ee.getElementsByClassName("waves-ripple");if(ke.length>0)de=ke[ke.length-1];else return!1;var Oe=de.getAttribute("data-x"),Le=de.getAttribute("data-y"),Ee=de.getAttribute("data-scale"),ct=Date.now()-Number(de.getAttribute("data-hold")),Ze=350-ct;Ze<0&&(Ze=0),setTimeout(function(){var rt={top:Le+"px",left:Oe+"px",opacity:"0","-webkit-transition-duration":b.duration+"ms","-moz-transition-duration":b.duration+"ms","-o-transition-duration":b.duration+"ms","transition-duration":b.duration+"ms","-webkit-transform":Ee,"-moz-transform":Ee,"-ms-transform":Ee,"-o-transform":Ee,transform:Ee};de.setAttribute("style",S(rt)),setTimeout(function(){try{ee.removeChild(de)}catch{return!1}},b.duration)},Ze)},wrapInput:function(ae){for(var ee=0;ee<ae.length;ee++){var de=ae[ee];if(de.tagName.toLowerCase()==="input"){var ke=de.parentNode;if(ke.tagName.toLowerCase()==="i"&&ke.className.indexOf("waves-effect")!==-1)continue;var Oe=document.createElement("i");Oe.className=de.className+" waves-input-wrapper";var Le=de.getAttribute("style");Le||(Le=""),Oe.setAttribute("style",Le),de.className="waves-button-input",de.removeAttribute("style"),ke.replaceChild(Oe,de),Oe.appendChild(de)}}}},D={touches:0,allowEvent:function(ae){var ee=!0;return ae.type==="touchstart"?D.touches+=1:ae.type==="touchend"||ae.type==="touchcancel"?setTimeout(function(){D.touches>0&&(D.touches-=1)},500):ae.type==="mousedown"&&D.touches>0&&(ee=!1),ee},touchup:function(ae){D.allowEvent(ae)}};function Y(ae){if(D.allowEvent(ae)===!1)return null;for(var ee=null,de=ae.target||ae.srcElement;de.parentNode!==null;){if(!(de instanceof SVGElement)&&de.className.indexOf("waves-effect")!==-1){ee=de;break}de=de.parentNode}return ee}function re(ae){var ee=Y(ae);ee!==null&&(b.show(ae,ee),"ontouchstart"in k&&(ee.addEventListener("touchend",b.hide,!1),ee.addEventListener("touchcancel",b.hide,!1)),ee.addEventListener("mouseup",b.hide,!1),ee.addEventListener("mouseleave",b.hide,!1),ee.addEventListener("dragend",b.hide,!1))}V.displayEffect=function(ae){ae=ae||{},"duration"in ae&&(b.duration=ae.duration),b.wrapInput(U(".waves-effect")),"ontouchstart"in k&&document.body.addEventListener("touchstart",re,!1),document.body.addEventListener("mousedown",re,!1)},V.attach=function(ae){ae.tagName.toLowerCase()==="input"&&(b.wrapInput([ae]),ae=ae.parentNode),"ontouchstart"in k&&ae.addEventListener("touchstart",re,!1),ae.addEventListener("mousedown",re,!1)},k.Waves=V,document.addEventListener("DOMContentLoaded",function(){V.displayEffect()},!1)}(window),function(k,V){var U={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},W=function(){function F(z){h(this,F),this.options=k.extend({},F.defaults,z),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,F._toasts.length===0&&F._createContainer(),F._toasts.push(this);var S=this._createToast();S.M_Toast=this,this.el=S,this.$el=k(S),this._animateIn(),this._setTimer()}return r(F,[{key:"_createToast",value:function(){var S=document.createElement("div");return S.classList.add("toast"),this.options.classes.length&&k(S).addClass(this.options.classes),(typeof HTMLElement=="object"?this.message instanceof HTMLElement:this.message&&typeof this.message=="object"&&this.message!==null&&this.message.nodeType===1&&typeof this.message.nodeName=="string")?S.appendChild(this.message):this.message.jquery?k(S).append(this.message[0]):S.innerHTML=this.message,F._container.appendChild(S),S}},{key:"_animateIn",value:function(){V({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var S=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){S.panning||(S.timeRemaining-=20),S.timeRemaining<=0&&S.dismiss()},20))}},{key:"dismiss",value:function(){var S=this;window.clearInterval(this.counterInterval);var b=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+b+"px)",this.el.style.opacity=0),V({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){typeof S.options.completeCallback=="function"&&S.options.completeCallback(),S.$el.remove(),F._toasts.splice(F._toasts.indexOf(S),1),F._toasts.length===0&&F._removeContainer()}})}}],[{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_Toast}},{key:"_createContainer",value:function(){var S=document.createElement("div");S.setAttribute("id","toast-container"),S.addEventListener("touchstart",F._onDragStart),S.addEventListener("touchmove",F._onDragMove),S.addEventListener("touchend",F._onDragEnd),S.addEventListener("mousedown",F._onDragStart),document.addEventListener("mousemove",F._onDragMove),document.addEventListener("mouseup",F._onDragEnd),document.body.appendChild(S),F._container=S}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",F._onDragMove),document.removeEventListener("mouseup",F._onDragEnd),k(F._container).remove(),F._container=null}},{key:"_onDragStart",value:function(S){if(S.target&&k(S.target).closest(".toast").length){var b=k(S.target).closest(".toast"),D=b[0].M_Toast;D.panning=!0,F._draggedToast=D,D.el.classList.add("panning"),D.el.style.transition="",D.startingXPos=F._xPos(S),D.time=Date.now(),D.xPos=F._xPos(S)}}},{key:"_onDragMove",value:function(S){if(F._draggedToast){S.preventDefault();var b=F._draggedToast;b.deltaX=Math.abs(b.xPos-F._xPos(S)),b.xPos=F._xPos(S),b.velocityX=b.deltaX/(Date.now()-b.time),b.time=Date.now();var D=b.xPos-b.startingXPos,Y=b.el.offsetWidth*b.options.activationPercent;b.el.style.transform="translateX("+D+"px)",b.el.style.opacity=1-Math.abs(D/Y)}}},{key:"_onDragEnd",value:function(){if(F._draggedToast){var S=F._draggedToast;S.panning=!1,S.el.classList.remove("panning");var b=S.xPos-S.startingXPos,D=S.el.offsetWidth*S.options.activationPercent,Y=Math.abs(b)>D||S.velocityX>1;Y?(S.wasSwiped=!0,S.dismiss()):(S.el.style.transition="transform .2s, opacity .2s",S.el.style.transform="",S.el.style.opacity=""),F._draggedToast=null}}},{key:"_xPos",value:function(S){return S.targetTouches&&S.targetTouches.length>=1?S.targetTouches[0].clientX:S.clientX}},{key:"dismissAll",value:function(){for(var S in F._toasts)F._toasts[S].dismiss()}},{key:"defaults",get:function(){return U}}]),F}();W._toasts=[],W._container=null,W._draggedToast=null,M.Toast=W,M.toast=function(F){return new W(F)}}(cash,M.anime),function(k,V){var U={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_Sidenav=D,D.id=D.$el.attr("id"),D.options=k.extend({},z.defaults,b),D.isOpen=!1,D.isFixed=D.el.classList.contains("sidenav-fixed"),D.isDragged=!1,D.lastWindowWidth=window.innerWidth,D.lastWindowHeight=window.innerHeight,D._createOverlay(),D._createDragTarget(),D._setupEventHandlers(),D._setupClasses(),D._setupFixed(),z._sidenavs.push(D),D}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var b=z._sidenavs.indexOf(this);b>=0&&z._sidenavs.splice(b,1)}},{key:"_createOverlay",value:function(){var b=document.createElement("div");this._closeBound=this.close.bind(this),b.classList.add("sidenav-overlay"),b.addEventListener("click",this._closeBound),document.body.appendChild(b),this._overlay=b}},{key:"_setupEventHandlers",value:function(){z._sidenavs.length===0&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){z._sidenavs.length===1&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(b){var D=k(b.target).closest(".sidenav-trigger");if(b.target&&D.length){var Y=M.getIdFromTrigger(D[0]),re=document.getElementById(Y).M_Sidenav;re&&re.open(D),b.preventDefault()}}},{key:"_startDrag",value:function(b){var D=b.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=D,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,V.remove(this.el),V.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(b){var D=b.targetTouches[0].clientX,Y=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-D),this._xPos=D,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==Y&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(b){if(!(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)){this.isDragged||this._startDrag(b),this._dragMoveUpdate(b);var D=this._xPos-this._startingXpos,Y=D>0?"right":"left";D=Math.min(this._width,Math.abs(D)),this.options.edge===Y&&(D=0);var re=D,ae="translateX(-100%)";this.options.edge==="right"&&(ae="translateX(100%)",re=-re),this.percentOpen=Math.min(1,D/this._width),this.el.style.transform=ae+" translateX("+re+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(b){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(b),this._dragMoveUpdate(b);var D=this._xPos-this._startingXpos,Y=D>0?"right":"left";D=Math.min(this._width,Math.abs(D)),this.options.edge!==Y&&(D=0);var re=-D;this.options.edge==="right"&&(re=-re),this.percentOpen=Math.min(1,1-D/this._width),this.el.style.transform="translateX("+re+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(b){var D=k(b.target).closest(".sidenav-close");D.length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){this.options.edge==="right"&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var b=document.createElement("div");b.classList.add("drag-target"),document.body.appendChild(b),this.dragTarget=b}},{key:"_preventBodyScrolling",value:function(){var b=document.body;b.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){var b=document.body;b.style.overflow=""}},{key:"open",value:function(){this.isOpen!==!0&&(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(V.remove(this.el),V({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),(!this.isDragged||this.percentOpen!=1)&&this._animateIn()))}},{key:"close",value:function(){if(this.isOpen!==!1)if(this.isOpen=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var b=this.options.edge==="left"?"-105%":"105%";this.el.style.transform="translateX("+b+")"}else this._enableBodyScrolling(),!this.isDragged||this.percentOpen!=0?this._animateOut():this._overlay.style.display="none"}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var b=this,D=this.options.edge==="left"?-1:1;this.isDragged&&(D=this.options.edge==="left"?D+this.percentOpen:D-this.percentOpen),V.remove(this.el),V({targets:this.el,translateX:[D*100+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){typeof b.options.onOpenEnd=="function"&&b.options.onOpenEnd.call(b,b.el)}})}},{key:"_animateOverlayIn",value:function(){var b=0;this.isDragged?b=this.percentOpen:k(this._overlay).css({display:"block"}),V.remove(this._overlay),V({targets:this._overlay,opacity:[b,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var b=this,D=this.options.edge==="left"?-1:1,Y=0;this.isDragged&&(Y=this.options.edge==="left"?D+this.percentOpen:D-this.percentOpen),V.remove(this.el),V({targets:this.el,translateX:[Y*100+"%",D*105+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){typeof b.options.onCloseEnd=="function"&&b.options.onCloseEnd.call(b,b.el)}})}},{key:"_animateOverlayOut",value:function(){var b=this;V.remove(this._overlay),V({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){k(b._overlay).css("display","none")}})}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Sidenav}},{key:"defaults",get:function(){return U}}]),z}(o);W._sidenavs=[],M.Sidenav=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"sidenav","M_Sidenav")}(cash,M.anime),function(k,V){var U={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(F){return'a[href="#'+F+'"]'}},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_ScrollSpy=D,D.options=k.extend({},z.defaults,b),z._elements.push(D),z._count++,z._increment++,D.tickId=-1,D.id=z._increment,D._setupEventHandlers(),D._handleWindowScroll(),D}return r(z,[{key:"destroy",value:function(){z._elements.splice(z._elements.indexOf(this),1),z._elementsInView.splice(z._elementsInView.indexOf(this),1),z._visibleElements.splice(z._visibleElements.indexOf(this.$el),1),z._count--,this._removeEventHandlers(),k(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var b=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=b.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),z._count===1&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){z._count===0&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(b){for(var D=k(b.target),Y=z._elements.length-1;Y>=0;Y--){var re=z._elements[Y];if(D.is('a[href="#'+re.$el.attr("id")+'"]')){b.preventDefault();var ae=re.$el.offset().top+1;V({targets:[document.documentElement,document.body],scrollTop:ae-re.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){z._ticks++;for(var b=M.getDocumentScrollTop(),D=M.getDocumentScrollLeft(),Y=D+window.innerWidth,re=b+window.innerHeight,ae=z._findElements(b,Y,re,D),ee=0;ee<ae.length;ee++){var de=ae[ee],ke=de.tickId;ke<0&&de._enter(),de.tickId=z._ticks}for(var Oe=0;Oe<z._elementsInView.length;Oe++){var Le=z._elementsInView[Oe],Ee=Le.tickId;Ee>=0&&Ee!==z._ticks&&(Le._exit(),Le.tickId=-1)}z._elementsInView=ae}},{key:"_enter",value:function(){z._visibleElements=z._visibleElements.filter(function(b){return b.height()!=0}),z._visibleElements[0]?(k(this.options.getActiveElement(z._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),z._visibleElements[0][0].M_ScrollSpy&&this.id<z._visibleElements[0][0].M_ScrollSpy.id?z._visibleElements.unshift(this.$el):z._visibleElements.push(this.$el)):z._visibleElements.push(this.$el),k(this.options.getActiveElement(z._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var b=this;z._visibleElements=z._visibleElements.filter(function(D){return D.height()!=0}),z._visibleElements[0]&&(k(this.options.getActiveElement(z._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),z._visibleElements=z._visibleElements.filter(function(D){return D.attr("id")!=b.$el.attr("id")}),z._visibleElements[0]&&k(this.options.getActiveElement(z._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_ScrollSpy}},{key:"_findElements",value:function(b,D,Y,re){for(var ae=[],ee=0;ee<z._elements.length;ee++){var de=z._elements[ee],ke=b+de.options.scrollOffset||200;if(de.$el.height()>0){var Oe=de.$el.offset().top,Le=de.$el.offset().left,Ee=Le+de.$el.width(),ct=Oe+de.$el.height(),Ze=!(Le>D||Ee<re||Oe>Y||ct<ke);Ze&&ae.push(de)}}return ae}},{key:"defaults",get:function(){return U}}]),z}(o);W._elements=[],W._elementsInView=[],W._visibleElements=[],W._count=0,W._increment=0,W._ticks=0,M.ScrollSpy=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(k){var V={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(W,F,z){return W.indexOf(z)-F.indexOf(z)}},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.el.M_Autocomplete=b,b.options=k.extend({},F.defaults,S),b.isOpen=!1,b.count=0,b.activeIndex=-1,b.oldVal,b.$inputField=b.$el.closest(".input-field"),b.$active=k(),b._mousedown=!1,b._setupDropdown(),b._setupEventHandlers(),b}return r(F,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),typeof window.ontouchstart!="undefined"&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),typeof window.ontouchstart!="undefined"&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var S=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),k(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(b){S.selectOption(k(b))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(S){S.type==="keyup"&&(F._keydown=!1),this.count=0;var b=this.el.value.toLowerCase();S.keyCode===13||S.keyCode===38||S.keyCode===40||(this.oldVal!==b&&(M.tabPressed||S.type!=="focus")&&this.open(),this.oldVal=b)}},{key:"_handleInputKeydown",value:function(S){F._keydown=!0;var b=S.keyCode,D=void 0,Y=k(this.container).children("li").length;if(b===M.keys.ENTER&&this.activeIndex>=0){D=k(this.container).children("li").eq(this.activeIndex),D.length&&(this.selectOption(D),S.preventDefault());return}(b===M.keys.ARROW_UP||b===M.keys.ARROW_DOWN)&&(S.preventDefault(),b===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,b===M.keys.ARROW_DOWN&&this.activeIndex<Y-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=k(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(S){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(S){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(S){this._mousedown=!1}},{key:"_highlight",value:function(S,b){var D=b.find("img"),Y=b.text().toLowerCase().indexOf(""+S.toLowerCase()),re=Y+S.length-1,ae=b.text().slice(0,Y),ee=b.text().slice(Y,re+1),de=b.text().slice(re+1);b.html("<span>"+ae+"<span class='highlight'>"+ee+"</span>"+de+"</span>"),D.length&&b.prepend(D)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){k(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(S){var b=S.text().trim();this.el.value=b,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),typeof this.options.onAutocomplete=="function"&&this.options.onAutocomplete.call(this,b)}},{key:"_renderDropdown",value:function(S,b){var D=this;this._resetAutocomplete();var Y=[];for(var re in S)if(S.hasOwnProperty(re)&&re.toLowerCase().indexOf(b)!==-1){if(this.count>=this.options.limit)break;var ae={data:S[re],key:re};Y.push(ae),this.count++}if(this.options.sortFunction){var ee=function(Le,Ee){return D.options.sortFunction(Le.key.toLowerCase(),Ee.key.toLowerCase(),b.toLowerCase())};Y.sort(ee)}for(var de=0;de<Y.length;de++){var ke=Y[de],Oe=k("<li></li>");ke.data?Oe.append('<img src="'+ke.data+'" class="right circle"><span>'+ke.key+"</span>"):Oe.append("<span>"+ke.key+"</span>"),k(this.container).append(Oe),this._highlight(b,Oe)}}},{key:"open",value:function(){var S=this.el.value.toLowerCase();this._resetAutocomplete(),S.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,S)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(S){var b=this.el.value.toLowerCase();this.options.data=S,this.isOpen&&this._renderDropdown(S,b)}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_Autocomplete}},{key:"defaults",get:function(){return V}}]),F}(o);U._keydown=!1,M.Autocomplete=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"autocomplete","M_Autocomplete")}(cash),function(k){M.updateTextFields=function(){var V="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";k(V).each(function(U,W){var F=k(this);U.value.length>0||k(U).is(":focus")||U.autofocus||F.attr("placeholder")!==null?F.siblings("label").addClass("active"):U.validity?F.siblings("label").toggleClass("active",U.validity.badInput===!0):F.siblings("label").removeClass("active")})},M.validate_field=function(V){var U=V.attr("data-length")!==null,W=parseInt(V.attr("data-length")),F=V[0].value.length;F===0&&V[0].validity.badInput===!1&&!V.is(":required")?V.hasClass("validate")&&(V.removeClass("valid"),V.removeClass("invalid")):V.hasClass("validate")&&(V.is(":valid")&&U&&F<=W||V.is(":valid")&&!U?(V.removeClass("invalid"),V.addClass("valid")):(V.removeClass("valid"),V.addClass("invalid")))},M.textareaAutoResize=function(V){if(V instanceof Element&&(V=k(V)),!V.length){console.error("No textarea element found");return}var U=k(".hiddendiv").first();U.length||(U=k('<div class="hiddendiv common"></div>'),k("body").append(U));var W=V.css("font-family"),F=V.css("font-size"),z=V.css("line-height"),S=V.css("padding-top"),b=V.css("padding-right"),D=V.css("padding-bottom"),Y=V.css("padding-left");F&&U.css("font-size",F),W&&U.css("font-family",W),z&&U.css("line-height",z),S&&U.css("padding-top",S),b&&U.css("padding-right",b),D&&U.css("padding-bottom",D),Y&&U.css("padding-left",Y),V.data("original-height")||V.data("original-height",V.height()),V.attr("wrap")==="off"&&U.css("overflow-wrap","normal").css("white-space","pre"),U.text(V[0].value+`
`);var re=U.html().replace(/\n/g,"<br>");U.html(re),V[0].offsetWidth>0&&V[0].offsetHeight>0?U.css("width",V.width()+"px"):U.css("width",window.innerWidth/2+"px"),V.data("original-height")<=U.innerHeight()?V.css("height",U.innerHeight()+"px"):V[0].value.length<V.data("previous-length")&&V.css("height",V.data("original-height")+"px"),V.data("previous-length",V[0].value.length)},k(document).ready(function(){var V="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";k(document).on("change",V,function(){(this.value.length!==0||k(this).attr("placeholder")!==null)&&k(this).siblings("label").addClass("active"),M.validate_field(k(this))}),k(document).ready(function(){M.updateTextFields()}),k(document).on("reset",function(F){var z=k(F.target);z.is("form")&&(z.find(V).removeClass("valid").removeClass("invalid"),z.find(V).each(function(S){this.value.length&&k(this).siblings("label").removeClass("active")}),setTimeout(function(){z.find("select").each(function(){this.M_FormSelect&&k(this).trigger("change")})},0))}),document.addEventListener("focus",function(F){k(F.target).is(V)&&k(F.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(F){var z=k(F.target);if(z.is(V)){var S=".prefix";z[0].value.length===0&&z[0].validity.badInput!==!0&&z.attr("placeholder")===null&&(S+=", label"),z.siblings(S).removeClass("active"),M.validate_field(z)}},!0);var U="input[type=radio], input[type=checkbox]";k(document).on("keyup",U,function(F){if(F.which===M.keys.TAB){k(this).addClass("tabbed");var z=k(this);z.one("blur",function(S){k(this).removeClass("tabbed")});return}});var W=".materialize-textarea";k(W).each(function(){var F=k(this);F.data("original-height",F.height()),F.data("previous-length",this.value.length),M.textareaAutoResize(F)}),k(document).on("keyup",W,function(){M.textareaAutoResize(k(this))}),k(document).on("keydown",W,function(){M.textareaAutoResize(k(this))}),k(document).on("change",'.file-field input[type="file"]',function(){for(var F=k(this).closest(".file-field"),z=F.find("input.file-path"),S=k(this)[0].files,b=[],D=0;D<S.length;D++)b.push(S[D].name);z[0].value=b.join(", "),z.trigger("change")})})}(cash),function(k,V){var U={indicators:!0,height:400,duration:500,interval:6e3},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_Slider=D,D.options=k.extend({},z.defaults,b),D.$slider=D.$el.find(".slides"),D.$slides=D.$slider.children("li"),D.activeIndex=D.$slides.filter(function(Y){return k(Y).hasClass("active")}).first().index(),D.activeIndex!=-1&&(D.$active=D.$slides.eq(D.activeIndex)),D._setSliderHeight(),D.$slides.find(".caption").each(function(Y){D._animateCaptionIn(Y,0)}),D.$slides.find("img").each(function(Y){var re="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";k(Y).attr("src")!==re&&(k(Y).css("background-image",'url("'+k(Y).attr("src")+'")'),k(Y).attr("src",re))}),D._setupIndicators(),D.$active?D.$active.css("display","block"):(D.$slides.first().addClass("active"),V({targets:D.$slides.first()[0],opacity:1,duration:D.options.duration,easing:"easeOutQuad"}),D.activeIndex=0,D.$active=D.$slides.eq(D.activeIndex),D.options.indicators&&D.$indicators.eq(D.activeIndex).addClass("active")),D.$active.find("img").each(function(Y){V({targets:D.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:D.options.duration,easing:"easeOutQuad"})}),D._setupEventHandlers(),D.start(),D}return r(z,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var b=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(D){D.addEventListener("click",b._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var b=this;this.options.indicators&&this.$indicators.each(function(D){D.removeEventListener("click",b._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(b){var D=k(b.target).index();this.set(D)}},{key:"_handleInterval",value:function(){var b=this.$slider.find(".active").index();this.$slides.length===b+1?b=0:b+=1,this.set(b)}},{key:"_animateCaptionIn",value:function(b,D){var Y={targets:b,opacity:0,duration:D,easing:"easeOutQuad"};k(b).hasClass("center-align")?Y.translateY=-100:k(b).hasClass("right-align")?Y.translateX=100:k(b).hasClass("left-align")&&(Y.translateX=-100),V(Y)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var b=this;this.options.indicators&&(this.$indicators=k('<ul class="indicators"></ul>'),this.$slides.each(function(D,Y){var re=k('<li class="indicator-item"></li>');b.$indicators.append(re[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(b){var D=this;if(b>=this.$slides.length?b=0:b<0&&(b=this.$slides.length-1),this.activeIndex!=b){this.$active=this.$slides.eq(this.activeIndex);var Y=this.$active.find(".caption");this.$active.removeClass("active"),V({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){D.$slides.not(".active").each(function(re){V({targets:re,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(Y[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(b).addClass("active")),V({targets:this.$slides.eq(b)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),V({targets:this.$slides.eq(b).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(b).addClass("active"),this.activeIndex=b,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var b=this.activeIndex+1;b>=this.$slides.length?b=0:b<0&&(b=this.$slides.length-1),this.set(b)}},{key:"prev",value:function(){var b=this.activeIndex-1;b>=this.$slides.length?b=0:b<0&&(b=this.$slides.length-1),this.set(b)}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Slider}},{key:"defaults",get:function(){return U}}]),z}(o);M.Slider=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"slider","M_Slider")}(cash,M.anime),function(k,V){k(document).on("click",".card",function(U){if(k(this).children(".card-reveal").length){var W=k(U.target).closest(".card");W.data("initialOverflow")===void 0&&W.data("initialOverflow",W.css("overflow")===void 0?"":W.css("overflow"));var F=k(this).find(".card-reveal");k(U.target).is(k(".card-reveal .card-title"))||k(U.target).is(k(".card-reveal .card-title i"))?V({targets:F[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(z){var S=z.animatables[0].target;k(S).css({display:"none"}),W.css("overflow",W.data("initialOverflow"))}}):(k(U.target).is(k(".card .activator"))||k(U.target).is(k(".card .activator i")))&&(W.css("overflow","hidden"),F.css({display:"block"}),V({targets:F[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(k){var V={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.el.M_Chips=b,b.options=k.extend({},F.defaults,S),b.$el.addClass("chips input-field"),b.chipsData=[],b.$chips=k(),b._setupInput(),b.hasAutocomplete=Object.keys(b.options.autocompleteOptions).length>0,b.$input.attr("id")||b.$input.attr("id",M.guid()),b.options.data.length&&(b.chipsData=b.options.data,b._renderChips(b.chipsData)),b.hasAutocomplete&&b._setupAutocomplete(),b._setPlaceholder(),b._setupLabel(),b._setupEventHandlers(),b}return r(F,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",F._handleChipsKeydown),document.addEventListener("keyup",F._handleChipsKeyup),this.el.addEventListener("blur",F._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",F._handleChipsKeydown),document.removeEventListener("keyup",F._handleChipsKeyup),this.el.removeEventListener("blur",F._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(S){var b=k(S.target).closest(".chip"),D=k(S.target).is(".close");if(b.length){var Y=b.index();D?(this.deleteChip(Y),this.$input[0].focus()):this.selectChip(Y)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(S){if(F._keydown=!0,S.keyCode===13){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;S.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else(S.keyCode===8||S.keyCode===37)&&this.$input[0].value===""&&this.chipsData.length&&(S.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(S){if(!!S.tag){var b=document.createElement("div"),D=document.createElement("i");if(b.classList.add("chip"),b.textContent=S.tag,b.setAttribute("tabindex",0),k(D).addClass("material-icons close"),D.textContent="close",S.image){var Y=document.createElement("img");Y.setAttribute("src",S.image),b.insertBefore(Y,b.firstChild)}return b.appendChild(D),b}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var S=0;S<this.chipsData.length;S++){var b=this._renderChip(this.chipsData[S]);this.$el.append(b),this.$chips.add(b)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var S=this;this.options.autocompleteOptions.onAutocomplete=function(b){S.addChip({tag:b}),S.$input[0].value="",S.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=k("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){this.chipsData!==void 0&&!this.chipsData.length&&this.options.placeholder?k(this.$input).prop("placeholder",this.options.placeholder):(this.chipsData===void 0||!!this.chipsData.length)&&this.options.secondaryPlaceholder&&k(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(S){if(S.hasOwnProperty("tag")&&S.tag!==""){for(var b=!1,D=0;D<this.chipsData.length;D++)if(this.chipsData[D].tag===S.tag){b=!0;break}return!b}return!1}},{key:"addChip",value:function(S){if(!(!this._isValid(S)||this.chipsData.length>=this.options.limit)){var b=this._renderChip(S);this.$chips.add(b),this.chipsData.push(S),k(this.$input).before(b),this._setPlaceholder(),typeof this.options.onChipAdd=="function"&&this.options.onChipAdd.call(this,this.$el,b)}}},{key:"deleteChip",value:function(S){var b=this.$chips.eq(S);this.$chips.eq(S).remove(),this.$chips=this.$chips.filter(function(D){return k(D).index()>=0}),this.chipsData.splice(S,1),this._setPlaceholder(),typeof this.options.onChipDelete=="function"&&this.options.onChipDelete.call(this,this.$el,b[0])}},{key:"selectChip",value:function(S){var b=this.$chips.eq(S);this._selectedChip=b,b[0].focus(),typeof this.options.onChipSelect=="function"&&this.options.onChipSelect.call(this,this.$el,b[0])}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_Chips}},{key:"_handleChipsKeydown",value:function(S){F._keydown=!0;var b=k(S.target).closest(".chips"),D=S.target&&b.length;if(!(k(S.target).is("input, textarea")||!D)){var Y=b[0].M_Chips;if(S.keyCode===8||S.keyCode===46){S.preventDefault();var re=Y.chipsData.length;if(Y._selectedChip){var ae=Y._selectedChip.index();Y.deleteChip(ae),Y._selectedChip=null,re=Math.max(ae-1,0)}Y.chipsData.length&&Y.selectChip(re)}else if(S.keyCode===37){if(Y._selectedChip){var ee=Y._selectedChip.index()-1;if(ee<0)return;Y.selectChip(ee)}}else if(S.keyCode===39&&Y._selectedChip){var de=Y._selectedChip.index()+1;de>=Y.chipsData.length?Y.$input[0].focus():Y.selectChip(de)}}}},{key:"_handleChipsKeyup",value:function(S){F._keydown=!1}},{key:"_handleChipsBlur",value:function(S){if(!F._keydown){var b=k(S.target).closest(".chips"),D=b[0].M_Chips;D._selectedChip=null}}},{key:"defaults",get:function(){return V}}]),F}(o);U._keydown=!1,M.Chips=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"chips","M_Chips"),k(document).ready(function(){k(document.body).on("click",".chip .close",function(){var W=k(this).closest(".chips");W.length&&W[0].M_Chips||k(this).closest(".chip").remove()})})}(cash),function(k){var V={top:0,bottom:1/0,offset:0,onPositionChange:null},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.el.M_Pushpin=b,b.options=k.extend({},F.defaults,S),b.originalOffset=b.el.offsetTop,F._pushpins.push(b),b._setupEventHandlers(),b._updatePosition(),b}return r(F,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var S=F._pushpins.indexOf(this);F._pushpins.splice(S,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",F._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",F._updateElements)}},{key:"_updatePosition",value:function(){var S=M.getDocumentScrollTop()+this.options.offset;this.options.top<=S&&this.options.bottom>=S&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pinned")),S<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-top")),S>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px",typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_Pushpin}},{key:"_updateElements",value:function(){for(var S in F._pushpins){var b=F._pushpins[S];b._updatePosition()}}},{key:"defaults",get:function(){return V}}]),F}(o);U._pushpins=[],M.Pushpin=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"pushpin","M_Pushpin")}(cash),function(k,V){var U={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};k.fn.reverse=[].reverse;var W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_FloatingActionButton=D,D.options=k.extend({},z.defaults,b),D.isOpen=!1,D.$anchor=D.$el.children("a").first(),D.$menu=D.$el.children("ul").first(),D.$floatingBtns=D.$el.find("ul .btn-floating"),D.$floatingBtnsReverse=D.$el.find("ul .btn-floating").reverse(),D.offsetY=0,D.offsetX=0,D.$el.addClass("direction-"+D.options.direction),D.options.direction==="top"?D.offsetY=40:D.options.direction==="right"?D.offsetX=-40:D.options.direction==="bottom"?D.offsetY=-40:D.offsetX=40,D._setupEventHandlers(),D}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(b){k(b.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){!this.isOpen||(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var b=this;this.$el.addClass("active");var D=0;this.$floatingBtnsReverse.each(function(Y){V({targets:Y,opacity:1,scale:[.4,1],translateY:[b.offsetY,0],translateX:[b.offsetX,0],duration:275,delay:D,easing:"easeInOutQuad"}),D+=40})}},{key:"_animateOutFAB",value:function(){var b=this;this.$floatingBtnsReverse.each(function(D){V.remove(D),V({targets:D,opacity:0,scale:.4,translateY:b.offsetY,translateX:b.offsetX,duration:175,easing:"easeOutQuad",complete:function(){b.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var b=this,D=void 0,Y=window.innerWidth,re=window.innerHeight,ae=this.el.getBoundingClientRect(),ee=k('<div class="fab-backdrop"></div>'),de=this.$anchor.css("background-color");this.$anchor.append(ee),this.offsetX=ae.left-Y/2+ae.width/2,this.offsetY=re-ae.bottom,D=Y/ee[0].clientWidth,this.btnBottom=ae.bottom,this.btnLeft=ae.left,this.btnWidth=ae.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),ee.css({"background-color":de}),setTimeout(function(){b.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),b.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){b.$el.css({overflow:"hidden","background-color":de}),ee.css({transform:"scale("+D+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),b.$menu.children("li").children("a").css({opacity:1}),b._handleDocumentClickBound=b._handleDocumentClick.bind(b),window.addEventListener("scroll",b._handleCloseBound,!0),document.body.addEventListener("click",b._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var b=this,D=window.innerWidth,Y=window.innerHeight,re=this.$el.find(".fab-backdrop"),ae=this.$anchor.css("background-color");this.offsetX=this.btnLeft-D/2+this.btnWidth/2,this.offsetY=Y-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),re.css({transform:"scale(0)","background-color":ae}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){re.remove(),b.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-b.offsetX+"px,0,0)"}),b.$anchor.css({overflow:"",transform:"translate3d(0,"+b.offsetY+"px,0)"}),setTimeout(function(){b.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),b.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_FloatingActionButton}},{key:"defaults",get:function(){return U}}]),z}(o);M.FloatingActionButton=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(k){var V={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203A",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));b.el.M_Datepicker=b,b.options=k.extend({},F.defaults,S),!!S&&S.hasOwnProperty("i18n")&&typeof S.i18n=="object"&&(b.options.i18n=k.extend({},F.defaults.i18n,S.i18n)),b.options.minDate&&b.options.minDate.setHours(0,0,0,0),b.options.maxDate&&b.options.maxDate.setHours(0,0,0,0),b.id=M.guid(),b._setupVariables(),b._insertHTMLIntoDOM(),b._setupModal(),b._setupEventHandlers(),b.options.defaultDate||(b.options.defaultDate=new Date(Date.parse(b.el.value)));var D=b.options.defaultDate;return F._isDate(D)?b.options.setDefaultDate?(b.setDate(D,!0),b.setInputValue()):b.gotoDate(D):b.gotoDate(new Date),b.isOpen=!1,b}return r(F,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),k(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var S=this.calendarEl.querySelector(".orig-select-year");S&&M.FormSelect.getInstance(S).destroy();var b=this.calendarEl.querySelector(".orig-select-month");b&&M.FormSelect.getInstance(b).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(k(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var S=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){S.isOpen=!1}})}},{key:"toString",value:function(S){var b=this;if(S=S||this.options.format,!F._isDate(this.date))return"";var D=S.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g),Y=D.map(function(re){return b.formats[re]?b.formats[re]():re}).join("");return Y}},{key:"setDate",value:function(S,b){if(!S)return this.date=null,this._renderDateDisplay(),this.draw();if(typeof S=="string"&&(S=new Date(Date.parse(S))),!!F._isDate(S)){var D=this.options.minDate,Y=this.options.maxDate;F._isDate(D)&&S<D?S=D:F._isDate(Y)&&S>Y&&(S=Y),this.date=new Date(S.getTime()),this._renderDateDisplay(),F._setToStartOfDay(this.date),this.gotoDate(this.date),!b&&typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var S=F._isDate(this.date)?this.date:new Date,b=this.options.i18n,D=b.weekdaysShort[S.getDay()],Y=b.monthsShort[S.getMonth()],re=S.getDate();this.yearTextEl.innerHTML=S.getFullYear(),this.dateTextEl.innerHTML=D+", "+Y+" "+re}},{key:"gotoDate",value:function(S){var b=!0;if(!!F._isDate(S)){if(this.calendars){var D=new Date(this.calendars[0].year,this.calendars[0].month,1),Y=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),re=S.getTime();Y.setMonth(Y.getMonth()+1),Y.setDate(Y.getDate()-1),b=re<D.getTime()||Y.getTime()<re}b&&(this.calendars=[{month:S.getMonth(),year:S.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(S){return S.month<0&&(S.year-=Math.ceil(Math.abs(S.month)/12),S.month+=12),S.month>11&&(S.year+=Math.floor(Math.abs(S.month)/12),S.month-=12),S}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(S,b,D){var Y=this.options,re=new Date,ae=F._getDaysInMonth(S,b),ee=new Date(S,b,1).getDay(),de=[],ke=[];F._setToStartOfDay(re),Y.firstDay>0&&(ee-=Y.firstDay,ee<0&&(ee+=7));for(var Oe=b===0?11:b-1,Le=b===11?0:b+1,Ee=b===0?S-1:S,ct=b===11?S+1:S,Ze=F._getDaysInMonth(Ee,Oe),rt=ae+ee,tt=rt;tt>7;)tt-=7;rt+=7-tt;for(var xe=!1,be=0,nn=0;be<rt;be++){var $t=new Date(S,b,1+(be-ee)),an=F._isDate(this.date)?F._compareDates($t,this.date):!1,en=F._compareDates($t,re),ln=Y.events.indexOf($t.toDateString())!==-1,mn=be<ee||be>=ae+ee,fn=1+(be-ee),An=b,ze=S,Xe=Y.startRange&&F._compareDates(Y.startRange,$t),ft=Y.endRange&&F._compareDates(Y.endRange,$t),Et=Y.startRange&&Y.endRange&&Y.startRange<$t&&$t<Y.endRange,_t=Y.minDate&&$t<Y.minDate||Y.maxDate&&$t>Y.maxDate||Y.disableWeekends&&F._isWeekend($t)||Y.disableDayFn&&Y.disableDayFn($t);mn&&(be<ee?(fn=Ze+fn,An=Oe,ze=Ee):(fn=fn-ae,An=Le,ze=ct));var ht={day:fn,month:An,year:ze,hasEvent:ln,isSelected:an,isToday:en,isDisabled:_t,isEmpty:mn,isStartRange:Xe,isEndRange:ft,isInRange:Et,showDaysInNextAndPreviousMonths:Y.showDaysInNextAndPreviousMonths};ke.push(this.renderDay(ht)),++nn===7&&(de.push(this.renderRow(ke,Y.isRTL,xe)),ke=[],nn=0,xe=!1)}return this.renderTable(Y,de,D)}},{key:"renderDay",value:function(S){var b=[],D="false";if(S.isEmpty)if(S.showDaysInNextAndPreviousMonths)b.push("is-outside-current-month"),b.push("is-selection-disabled");else return'<td class="is-empty"></td>';return S.isDisabled&&b.push("is-disabled"),S.isToday&&b.push("is-today"),S.isSelected&&(b.push("is-selected"),D="true"),S.hasEvent&&b.push("has-event"),S.isInRange&&b.push("is-inrange"),S.isStartRange&&b.push("is-startrange"),S.isEndRange&&b.push("is-endrange"),'<td data-day="'+S.day+'" class="'+b.join(" ")+'" aria-selected="'+D+'">'+('<button class="datepicker-day-button" type="button" data-year="'+S.year+'" data-month="'+S.month+'" data-day="'+S.day+'">'+S.day+"</button>")+"</td>"}},{key:"renderRow",value:function(S,b,D){return'<tr class="datepicker-row'+(D?" is-selected":"")+'">'+(b?S.reverse():S).join("")+"</tr>"}},{key:"renderTable",value:function(S,b,D){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+D+'">'+this.renderHead(S)+this.renderBody(b)+"</table></div>"}},{key:"renderHead",value:function(S){var b=void 0,D=[];for(b=0;b<7;b++)D.push('<th scope="col"><abbr title="'+this.renderDayName(S,b)+'">'+this.renderDayName(S,b,!0)+"</abbr></th>");return"<thead><tr>"+(S.isRTL?D.reverse():D).join("")+"</tr></thead>"}},{key:"renderBody",value:function(S){return"<tbody>"+S.join("")+"</tbody>"}},{key:"renderTitle",value:function(S,b,D,Y,re,ae){var ee=void 0,de=void 0,ke=void 0,Oe=this.options,Le=D===Oe.minYear,Ee=D===Oe.maxYear,ct='<div id="'+ae+'" class="datepicker-controls" role="heading" aria-live="assertive">',Ze=void 0,rt=void 0,tt=!0,xe=!0;for(ke=[],ee=0;ee<12;ee++)ke.push('<option value="'+(D===re?ee-b:12+ee-b)+'"'+(ee===Y?' selected="selected"':"")+(Le&&ee<Oe.minMonth||Ee&&ee>Oe.maxMonth?'disabled="disabled"':"")+">"+Oe.i18n.months[ee]+"</option>");for(Ze='<select class="datepicker-select orig-select-month" tabindex="-1">'+ke.join("")+"</select>",k.isArray(Oe.yearRange)?(ee=Oe.yearRange[0],de=Oe.yearRange[1]+1):(ee=D-Oe.yearRange,de=1+D+Oe.yearRange),ke=[];ee<de&&ee<=Oe.maxYear;ee++)ee>=Oe.minYear&&ke.push('<option value="'+ee+'" '+(ee===D?'selected="selected"':"")+">"+ee+"</option>");rt='<select class="datepicker-select orig-select-year" tabindex="-1">'+ke.join("")+"</select>";var be='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg>';ct+='<button class="month-prev'+(tt?"":" is-disabled")+'" type="button">'+be+"</button>",ct+='<div class="selects-container">',Oe.showMonthAfterYear?ct+=rt+Ze:ct+=Ze+rt,ct+="</div>",Le&&(Y===0||Oe.minMonth>=Y)&&(tt=!1),Ee&&(Y===11||Oe.maxMonth<=Y)&&(xe=!1);var nn='<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg>';return ct+='<button class="month-next'+(xe?"":" is-disabled")+'" type="button">'+nn+"</button>",ct+="</div>"}},{key:"draw",value:function(S){if(!(!this.isOpen&&!S)){var b=this.options,D=b.minYear,Y=b.maxYear,re=b.minMonth,ae=b.maxMonth,ee="",de=void 0;this._y<=D&&(this._y=D,!isNaN(re)&&this._m<re&&(this._m=re)),this._y>=Y&&(this._y=Y,!isNaN(ae)&&this._m>ae&&(this._m=ae)),de="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var ke=0;ke<1;ke++)this._renderDateDisplay(),ee+=this.renderTitle(this,ke,this.calendars[ke].year,this.calendars[ke].month,this.calendars[0].year,de)+this.render(this.calendars[ke].year,this.calendars[ke].month,de);this.destroySelects(),this.calendarEl.innerHTML=ee;var Oe=this.calendarEl.querySelector(".orig-select-year"),Le=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(Oe,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(Le,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),Oe.addEventListener("change",this._handleYearChange.bind(this)),Le.addEventListener("change",this._handleMonthChange.bind(this)),typeof this.options.onDraw=="function"&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var S=this;this.$modalEl=k(F._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return S.date.getDate()},dd:function(){var b=S.date.getDate();return(b<10?"0":"")+b},ddd:function(){return S.options.i18n.weekdaysShort[S.date.getDay()]},dddd:function(){return S.options.i18n.weekdays[S.date.getDay()]},m:function(){return S.date.getMonth()+1},mm:function(){var b=S.date.getMonth()+1;return(b<10?"0":"")+b},mmm:function(){return S.options.i18n.monthsShort[S.date.getMonth()]},mmmm:function(){return S.options.i18n.months[S.date.getMonth()]},yy:function(){return(""+S.date.getFullYear()).slice(2)},yyyy:function(){return S.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(S){S.which===M.keys.ENTER&&(S.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(S){if(!!this.isOpen){var b=k(S.target);b.hasClass("is-disabled")||(b.hasClass("datepicker-day-button")&&!b.hasClass("is-empty")&&!b.parent().hasClass("is-disabled")?(this.setDate(new Date(S.target.getAttribute("data-year"),S.target.getAttribute("data-month"),S.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()):b.closest(".month-prev").length?this.prevMonth():b.closest(".month-next").length&&this.nextMonth())}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(S){this.gotoMonth(S.target.value)}},{key:"_handleYearChange",value:function(S){this.gotoYear(S.target.value)}},{key:"gotoMonth",value:function(S){isNaN(S)||(this.calendars[0].month=parseInt(S,10),this.adjustCalendars())}},{key:"gotoYear",value:function(S){isNaN(S)||(this.calendars[0].year=parseInt(S,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(S){var b=void 0;S.firedBy!==this&&(this.options.parse?b=this.options.parse(this.el.value,this.options.format):b=new Date(Date.parse(this.el.value)),F._isDate(b)&&this.setDate(b))}},{key:"renderDayName",value:function(S,b,D){for(b+=S.firstDay;b>=7;)b-=7;return D?S.i18n.weekdaysAbbrev[b]:S.i18n.weekdays[b]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,typeof this.options.onOpen=="function"&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(!!this.isOpen)return this.isOpen=!1,typeof this.options.onClose=="function"&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"_isDate",value:function(S){return/Date/.test(Object.prototype.toString.call(S))&&!isNaN(S.getTime())}},{key:"_isWeekend",value:function(S){var b=S.getDay();return b===0||b===6}},{key:"_setToStartOfDay",value:function(S){F._isDate(S)&&S.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(S,b){return[31,F._isLeapYear(S)?29:28,31,30,31,30,31,31,30,31,30,31][b]}},{key:"_isLeapYear",value:function(S){return S%4===0&&S%100!==0||S%400===0}},{key:"_compareDates",value:function(S,b){return S.getTime()===b.getTime()}},{key:"_setToStartOfDay",value:function(S){F._isDate(S)&&S.setHours(0,0,0,0)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_Datepicker}},{key:"defaults",get:function(){return V}}]),F}(o);U._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"datepicker","M_Datepicker")}(cash),function(k){var V={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.el.M_Timepicker=b,b.options=k.extend({},F.defaults,S),b.id=M.guid(),b._insertHTMLIntoDOM(),b._setupModal(),b._setupVariables(),b._setupEventHandlers(),b._clockSetup(),b._pickerSetup(),b}return r(F,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),k(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),k(this.spanHours).on("click",this.showView.bind(this,"hours")),k(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(S){S.which===M.keys.ENTER&&(S.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(S){S.preventDefault();var b=this.plate.getBoundingClientRect(),D={x:b.left,y:b.top};this.x0=D.x+this.options.dialRadius,this.y0=D.y+this.options.dialRadius,this.moved=!1;var Y=F._Pos(S);this.dx=Y.x-this.x0,this.dy=Y.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(S){S.preventDefault();var b=F._Pos(S),D=b.x-this.x0,Y=b.y-this.y0;this.moved=!0,this.setHand(D,Y,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(S){var b=this;S.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var D=F._Pos(S),Y=D.x-this.x0,re=D.y-this.y0;this.moved&&Y===this.dx&&re===this.dy&&this.setHand(Y,re),this.currentView==="hours"?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(k(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){b.done()},this.options.duration/2)),typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=k(F._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var S=document.querySelector(this.options.container);this.options.container&&!!S?this.$modalEl.appendTo(S):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var S=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){typeof S.options.onCloseEnd=="function"&&S.options.onCloseEnd.call(S),S.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var S=k('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&S.css({visibility:""});var b=k('<div class="confirmation-btns"></div>');k('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(b).on("click",this.close.bind(this)),k('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(b).on("click",this.done.bind(this)),b.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=k('<div class="am-btn">AM</div>'),this.$pmBtn=k('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var S=this.options.dialRadius,b=this.options.tickRadius,D=S*2,Y=F._createSVGEl("svg");Y.setAttribute("class","timepicker-svg"),Y.setAttribute("width",D),Y.setAttribute("height",D);var re=F._createSVGEl("g");re.setAttribute("transform","translate("+S+","+S+")");var ae=F._createSVGEl("circle");ae.setAttribute("class","timepicker-canvas-bearing"),ae.setAttribute("cx",0),ae.setAttribute("cy",0),ae.setAttribute("r",4);var ee=F._createSVGEl("line");ee.setAttribute("x1",0),ee.setAttribute("y1",0);var de=F._createSVGEl("circle");de.setAttribute("class","timepicker-canvas-bg"),de.setAttribute("r",b),re.appendChild(ee),re.appendChild(de),re.appendChild(ae),Y.appendChild(re),this._canvas.appendChild(Y),this.hand=ee,this.bg=de,this.bearing=ae,this.g=re}},{key:"_buildHoursView",value:function(){var S=k('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var b=1;b<13;b+=1){var D=S.clone(),Y=b/6*Math.PI,re=this.options.outerRadius;D.css({left:this.options.dialRadius+Math.sin(Y)*re-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(Y)*re-this.options.tickRadius+"px"}),D.html(b===0?"00":b),this.hoursView.appendChild(D[0])}else for(var ae=0;ae<24;ae+=1){var ee=S.clone(),de=ae/6*Math.PI,ke=ae>0&&ae<13,Oe=ke?this.options.innerRadius:this.options.outerRadius;ee.css({left:this.options.dialRadius+Math.sin(de)*Oe-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(de)*Oe-this.options.tickRadius+"px"}),ee.html(ae===0?"00":ae),this.hoursView.appendChild(ee[0])}}},{key:"_buildMinutesView",value:function(){for(var S=k('<div class="timepicker-tick"></div>'),b=0;b<60;b+=5){var D=S.clone(),Y=b/30*Math.PI;D.css({left:this.options.dialRadius+Math.sin(Y)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(Y)*this.options.outerRadius-this.options.tickRadius+"px"}),D.html(F._addLeadingZero(b)),this.minutesView.appendChild(D[0])}}},{key:"_handleAmPmClick",value:function(S){var b=k(S.target);this.amOrPm=b.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary",this.amOrPm==="AM"),this.$pmBtn.toggleClass("text-primary",this.amOrPm==="PM"))}},{key:"_updateTimeFromInput",value:function(){var S=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&typeof S[1]!="undefined"&&(S[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",S[1]=S[1].replace("AM","").replace("PM","")),S[0]==="now"){var b=new Date(+new Date+this.options.fromNow);S=[b.getHours(),b.getMinutes()],this.options.twelveHour&&(this.amOrPm=S[0]>=12&&S[0]<24?"PM":"AM")}this.hours=+S[0]||0,this.minutes=+S[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=F._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(S,b){S==="minutes"&&k(this.hoursView).css("visibility");var D=S==="hours",Y=D?this.hoursView:this.minutesView,re=D?this.minutesView:this.hoursView;this.currentView=S,k(this.spanHours).toggleClass("text-primary",D),k(this.spanMinutes).toggleClass("text-primary",!D),re.classList.add("timepicker-dial-out"),k(Y).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(b),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){k(re).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(S){var b=this.currentView,D=this[b],Y=b==="hours",re=Math.PI/(Y?6:30),ae=D*re,ee=Y&&D>0&&D<13?this.options.innerRadius:this.options.outerRadius,de=Math.sin(ae)*ee,ke=-Math.cos(ae)*ee,Oe=this;S?(k(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){k(Oe.canvas).removeClass("timepicker-canvas-out"),Oe.setHand(de,ke)},S)):this.setHand(de,ke)}},{key:"setHand",value:function(S,b,D){var Y=this,re=Math.atan2(S,-b),ae=this.currentView==="hours",ee=Math.PI/(ae||D?6:30),de=Math.sqrt(S*S+b*b),ke=ae&&de<(this.options.outerRadius+this.options.innerRadius)/2,Oe=ke?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(Oe=this.options.outerRadius),re<0&&(re=Math.PI*2+re);var Le=Math.round(re/ee);re=Le*ee,this.options.twelveHour?ae?Le===0&&(Le=12):(D&&(Le*=5),Le===60&&(Le=0)):ae?(Le===12&&(Le=0),Le=ke?Le===0?12:Le:Le===0?0:Le+12):(D&&(Le*=5),Le===60&&(Le=0)),this[this.currentView]!==Le&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){Y.vibrateTimer=null},100))),this[this.currentView]=Le,ae?this.spanHours.innerHTML=Le:this.spanMinutes.innerHTML=F._addLeadingZero(Le);var Ee=Math.sin(re)*(Oe-this.options.tickRadius),ct=-Math.cos(re)*(Oe-this.options.tickRadius),Ze=Math.sin(re)*Oe,rt=-Math.cos(re)*Oe;this.hand.setAttribute("x2",Ee),this.hand.setAttribute("y2",ct),this.bg.setAttribute("cx",Ze),this.bg.setAttribute("cy",rt)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){!this.isOpen||(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(S,b){var D=this.el.value,Y=b?"":F._addLeadingZero(this.hours)+":"+F._addLeadingZero(this.minutes);this.time=Y,!b&&this.options.twelveHour&&(Y=Y+" "+this.amOrPm),this.el.value=Y,Y!==D&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"_addLeadingZero",value:function(S){return(S<10?"0":"")+S}},{key:"_createSVGEl",value:function(S){var b="http://www.w3.org/2000/svg";return document.createElementNS(b,S)}},{key:"_Pos",value:function(S){return S.targetTouches&&S.targetTouches.length>=1?{x:S.targetTouches[0].clientX,y:S.targetTouches[0].clientY}:{x:S.clientX,y:S.clientY}}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_Timepicker}},{key:"defaults",get:function(){return V}}]),F}(o);U._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"timepicker","M_Timepicker")}(cash),function(k){var V={},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.el.M_CharacterCounter=b,b.options=k.extend({},F.defaults,S),b.isInvalid=!1,b.isValidLength=!1,b._setupCounter(),b._setupEventHandlers(),b}return r(F,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),k(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){k(this.counterEl).remove()}},{key:"updateCounter",value:function(){var S=+this.$el.attr("data-length"),b=this.el.value.length;this.isValidLength=b<=S;var D=b;S&&(D+="/"+S,this._validateInput()),k(this.counterEl).html(D)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):!this.isValidLength&&!this.isInvalid&&(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_CharacterCounter}},{key:"defaults",get:function(){return V}}]),F}(o);M.CharacterCounter=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"characterCounter","M_CharacterCounter")}(cash),function(k){var V={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.el.M_Carousel=b,b.options=k.extend({},F.defaults,S),b.hasMultipleSlides=b.$el.find(".carousel-item").length>1,b.showIndicators=b.options.indicators&&b.hasMultipleSlides,b.noWrap=b.options.noWrap||!b.hasMultipleSlides,b.pressed=!1,b.dragged=!1,b.offset=b.target=0,b.images=[],b.itemWidth=b.$el.find(".carousel-item").first().innerWidth(),b.itemHeight=b.$el.find(".carousel-item").first().innerHeight(),b.dim=b.itemWidth*2+b.options.padding||1,b._autoScrollBound=b._autoScroll.bind(b),b._trackBound=b._track.bind(b),b.options.fullWidth&&(b.options.dist=0,b._setCarouselHeight(),b.showIndicators&&b.$el.find(".carousel-fixed-item").addClass("with-indicators")),b.$indicators=k('<ul class="indicators"></ul>'),b.$el.find(".carousel-item").each(function(D,Y){if(b.images.push(D),b.showIndicators){var re=k('<li class="indicator-item"></li>');Y===0&&re[0].classList.add("active"),b.$indicators.append(re)}}),b.showIndicators&&b.$el.append(b.$indicators),b.count=b.images.length,b.options.numVisible=Math.min(b.count,b.options.numVisible),b.xform="transform",["webkit","Moz","O","ms"].every(function(D){var Y=D+"Transform";return typeof document.body.style[Y]!="undefined"?(b.xform=Y,!1):!0}),b._setupEventHandlers(),b._scroll(b.offset),b}return r(F,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var S=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),typeof window.ontouchstart!="undefined"&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(D,Y){D.addEventListener("click",S._handleIndicatorClickBound)}));var b=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=b.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var S=this;typeof window.ontouchstart!="undefined"&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(b,D){b.removeEventListener("click",S._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(S){S.type==="mousedown"&&k(S.target).is("img")&&S.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(S),this.referenceY=this._ypos(S),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(S){var b=void 0,D=void 0,Y=void 0,re=void 0;if(this.pressed)if(b=this._xpos(S),D=this._ypos(S),Y=this.reference-b,re=Math.abs(this.referenceY-D),re<30&&!this.verticalDragged)(Y>2||Y<-2)&&(this.dragged=!0,this.reference=b,this._scroll(this.offset+Y));else{if(this.dragged)return S.preventDefault(),S.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return S.preventDefault(),S.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(S){if(this.pressed)this.pressed=!1;else return;return clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(S.preventDefault(),S.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(S){if(this.dragged)return S.preventDefault(),S.stopPropagation(),!1;if(!this.options.fullWidth){var b=k(S.target).closest(".carousel-item").index(),D=this._wrap(this.center)-b;D!==0&&(S.preventDefault(),S.stopPropagation()),this._cycleTo(b)}}},{key:"_handleIndicatorClick",value:function(S){S.stopPropagation();var b=k(S.target).closest(".indicator-item");b.length&&this._cycleTo(b.index())}},{key:"_handleResize",value:function(S){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=this.itemWidth*2+this.options.padding,this.offset=this.center*2*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(S){var b=this,D=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),Y=D.find("img").first();if(Y.length)if(Y[0].complete){var re=Y.height();if(re>0)this.$el.css("height",re+"px");else{var ae=Y[0].naturalWidth,ee=Y[0].naturalHeight,de=this.$el.width()/ae*ee;this.$el.css("height",de+"px")}}else Y.one("load",function(Oe,Le){b.$el.css("height",Oe.offsetHeight+"px")});else if(!S){var ke=D.height();this.$el.css("height",ke+"px")}}},{key:"_xpos",value:function(S){return S.targetTouches&&S.targetTouches.length>=1?S.targetTouches[0].clientX:S.clientX}},{key:"_ypos",value:function(S){return S.targetTouches&&S.targetTouches.length>=1?S.targetTouches[0].clientY:S.clientY}},{key:"_wrap",value:function(S){return S>=this.count?S%this.count:S<0?this._wrap(this.count+S%this.count):S}},{key:"_track",value:function(){var S=void 0,b=void 0,D=void 0,Y=void 0;S=Date.now(),b=S-this.timestamp,this.timestamp=S,D=this.offset-this.frame,this.frame=this.offset,Y=1e3*D/(1+b),this.velocity=.8*Y+.2*this.velocity}},{key:"_autoScroll",value:function(){var S=void 0,b=void 0;this.amplitude&&(S=Date.now()-this.timestamp,b=this.amplitude*Math.exp(-S/this.options.duration),b>2||b<-2?(this._scroll(this.target-b),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(S){var b=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),this.scrollingTimeout!=null&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){b.$el.removeClass("scrolling")},this.options.duration);var D=void 0,Y=void 0,re=void 0,ae=void 0,ee=void 0,de=void 0,ke=void 0,Oe=void 0,Le=void 0,Ee=void 0,ct=this.center,Ze=1/this.options.numVisible;if(this.offset=typeof S=="number"?S:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),re=this.offset-this.center*this.dim,ae=re<0?1:-1,ee=-ae*re*2/this.dim,Y=this.count>>1,this.options.fullWidth?(ke="translateX(0)",Ee=1):(ke="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",ke+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",Ee=1-Ze*ee),this.showIndicators){var rt=this.center%this.count,tt=this.$indicators.find(".indicator-item.active");tt.index()!==rt&&(tt.removeClass("active"),this.$indicators.find(".indicator-item").eq(rt)[0].classList.add("active"))}if(!this.noWrap||this.center>=0&&this.center<this.count){de=this.images[this._wrap(this.center)],k(de).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),de.classList.add("active"));var xe=ke+" translateX("+-re/2+"px) translateX("+ae*this.options.shift*ee*D+"px) translateZ("+this.options.dist*ee+"px)";this._updateItemStyle(de,Ee,0,xe)}for(D=1;D<=Y;++D){if(this.options.fullWidth?(Oe=this.options.dist,Le=D===Y&&re<0?1-ee:1):(Oe=this.options.dist*(D*2+ee*ae),Le=1-Ze*(D*2+ee*ae)),!this.noWrap||this.center+D<this.count){de=this.images[this._wrap(this.center+D)];var be=ke+" translateX("+(this.options.shift+(this.dim*D-re)/2)+"px) translateZ("+Oe+"px)";this._updateItemStyle(de,Le,-D,be)}if(this.options.fullWidth?(Oe=this.options.dist,Le=D===Y&&re>0?1-ee:1):(Oe=this.options.dist*(D*2-ee*ae),Le=1-Ze*(D*2-ee*ae)),!this.noWrap||this.center-D>=0){de=this.images[this._wrap(this.center-D)];var nn=ke+" translateX("+(-this.options.shift+(-this.dim*D-re)/2)+"px) translateZ("+Oe+"px)";this._updateItemStyle(de,Le,-D,nn)}}if(!this.noWrap||this.center>=0&&this.center<this.count){de=this.images[this._wrap(this.center)];var $t=ke+" translateX("+-re/2+"px) translateX("+ae*this.options.shift*ee+"px) translateZ("+this.options.dist*ee+"px)";this._updateItemStyle(de,Ee,0,$t)}var an=this.$el.find(".carousel-item").eq(this._wrap(this.center));ct!==this.center&&typeof this.options.onCycleTo=="function"&&this.options.onCycleTo.call(this,an[0],this.dragged),typeof this.oneTimeCallback=="function"&&(this.oneTimeCallback.call(this,an[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(S,b,D,Y){S.style[this.xform]=Y,S.style.zIndex=D,S.style.opacity=b,S.style.visibility="visible"}},{key:"_cycleTo",value:function(S,b){var D=this.center%this.count-S;this.noWrap||(D<0?Math.abs(D+this.count)<Math.abs(D)&&(D+=this.count):D>0&&Math.abs(D-this.count)<D&&(D-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),D<0?this.target+=this.dim*Math.abs(D):D>0&&(this.target-=this.dim*D),typeof b=="function"&&(this.oneTimeCallback=b),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(S){(S===void 0||isNaN(S))&&(S=1);var b=this.center+S;if(b>=this.count||b<0){if(this.noWrap)return;b=this._wrap(b)}this._cycleTo(b)}},{key:"prev",value:function(S){(S===void 0||isNaN(S))&&(S=1);var b=this.center-S;if(b>=this.count||b<0){if(this.noWrap)return;b=this._wrap(b)}this._cycleTo(b)}},{key:"set",value:function(S,b){if((S===void 0||isNaN(S))&&(S=0),S>this.count||S<0){if(this.noWrap)return;S=this._wrap(S)}this._cycleTo(S,b)}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_Carousel}},{key:"defaults",get:function(){return V}}]),F}(o);M.Carousel=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"carousel","M_Carousel")}(cash),function(k){var V={onOpen:void 0,onClose:void 0},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.el.M_TapTarget=b,b.options=k.extend({},F.defaults,S),b.isOpen=!1,b.$origin=k("#"+b.$el.attr("data-target")),b._setup(),b._calculatePositioning(),b._setupEventHandlers(),b}return r(F,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var S=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=S.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(S){this.open()}},{key:"_handleOriginClick",value:function(S){this.close()}},{key:"_handleResize",value:function(S){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(S){k(S.target).closest(".tap-target-wrapper").length||(this.close(),S.preventDefault(),S.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=k(this.wrapper).find(".tap-target-wave")[0],this.originEl=k(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],k(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(k(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var S=this.$origin.css("position")==="fixed";if(!S)for(var b=this.$origin.parents(),D=0;D<b.length&&(S=k(b[D]).css("position")=="fixed",!S);D++);var Y=this.$origin.outerWidth(),re=this.$origin.outerHeight(),ae=S?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,ee=S?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,de=window.innerWidth,ke=window.innerHeight,Oe=de/2,Le=ke/2,Ee=ee<=Oe,ct=ee>Oe,Ze=ae<=Le,rt=ae>Le,tt=ee>=de*.25&&ee<=de*.75,xe=this.$el.outerWidth(),be=this.$el.outerHeight(),nn=ae+re/2-be/2,$t=ee+Y/2-xe/2,an=S?"fixed":"absolute",en=tt?xe:xe/2+Y,ln=be/2,mn=Ze?be/2:0,fn=0,An=Ee&&!tt?xe/2-Y:0,ze=0,Xe=Y,ft=rt?"bottom":"top",Et=(Y>re,Y*2),_t=Et,ht=be/2-_t/2,Pt=xe/2-Et/2,_n={};_n.top=Ze?nn+"px":"",_n.right=ct?de-$t-xe+"px":"",_n.bottom=rt?ke-nn-be+"px":"",_n.left=Ee?$t+"px":"",_n.position=an,k(this.wrapper).css(_n),k(this.contentEl).css({width:en+"px",height:ln+"px",top:mn+"px",right:ze+"px",bottom:fn+"px",left:An+"px",padding:Xe+"px",verticalAlign:ft}),k(this.waveEl).css({top:ht+"px",left:Pt+"px",width:Et+"px",height:_t+"px"})}},{key:"open",value:function(){this.isOpen||(typeof this.options.onOpen=="function"&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){!this.isOpen||(typeof this.options.onClose=="function"&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_TapTarget}},{key:"defaults",get:function(){return V}}]),F}(o);M.TapTarget=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"tapTarget","M_TapTarget")}(cash),function(k){var V={classes:"",dropdownOptions:{}},U=function(W){c(F,W);function F(z,S){h(this,F);var b=a(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,F,z,S));return b.$el.hasClass("browser-default")?a(b):(b.el.M_FormSelect=b,b.options=k.extend({},F.defaults,S),b.isMultiple=b.$el.prop("multiple"),b.el.tabIndex=-1,b._keysSelected={},b._valueDict={},b._setupDropdown(),b._setupEventHandlers(),b)}return r(F,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var S=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),k(this.dropdownOptions).find("li:not(.optgroup)").each(function(b){b.addEventListener("click",S._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var S=this;k(this.dropdownOptions).find("li:not(.optgroup)").each(function(b){b.removeEventListener("click",S._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(S){this._setValueToInput()}},{key:"_handleOptionClick",value:function(S){S.preventDefault();var b=k(S.target).closest("li")[0],D=b.id;if(!k(b).hasClass("disabled")&&!k(b).hasClass("optgroup")&&D.length){var Y=!0;if(this.isMultiple){var re=k(this.dropdownOptions).find("li.disabled.selected");re.length&&(re.removeClass("selected"),re.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(re[0].id)),Y=this._toggleEntryFromArray(D)}else k(this.dropdownOptions).find("li").removeClass("selected"),k(b).toggleClass("selected",Y);var ae=k(this._valueDict[D].el).prop("selected");ae!==Y&&(k(this._valueDict[D].el).prop("selected",Y),this.$el.trigger("change"))}S.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var S=this;this.wrapper=document.createElement("div"),k(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(k(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),k(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(Y){if(k(Y).is("option")){var re=void 0;S.isMultiple?re=S._appendOptionWithIcon(S.$el,Y,"multiple"):re=S._appendOptionWithIcon(S.$el,Y),S._addOptionToValueDict(Y,re)}else if(k(Y).is("optgroup")){var ae=k(Y).children("option");k(S.dropdownOptions).append(k('<li class="optgroup"><span>'+Y.getAttribute("label")+"</span></li>")[0]),ae.each(function(ee){var de=S._appendOptionWithIcon(S.$el,ee,"optgroup-option");S._addOptionToValueDict(ee,de)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),k(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&k(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var b=k('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(b[0]),!this.el.disabled){var D=k.extend({},this.options.dropdownOptions);D.onOpenEnd=function(Y){var re=k(S.dropdownOptions).find(".selected").first();if(re.length&&(M.keyDown=!0,S.dropdown.focusedIndex=re.index(),S.dropdown._focusFocusedItem(),M.keyDown=!1,S.dropdown.isScrollable)){var ae=re[0].getBoundingClientRect().top-S.dropdownOptions.getBoundingClientRect().top;ae-=S.dropdownOptions.clientHeight/2,S.dropdownOptions.scrollTop=ae}},this.isMultiple&&(D.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,D)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(S,b){var D=Object.keys(this._valueDict).length,Y=this.dropdownOptions.id+D,re={};b.id=Y,re.el=S,re.optionEl=b,this._valueDict[Y]=re}},{key:"_removeDropdown",value:function(){k(this.wrapper).find(".caret").remove(),k(this.input).remove(),k(this.dropdownOptions).remove(),k(this.wrapper).before(this.$el),k(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(S,b,D){var Y=b.disabled?"disabled ":"",re=D==="optgroup-option"?"optgroup-option ":"",ae=this.isMultiple?'<label><input type="checkbox"'+Y+'"/><span>'+b.innerHTML+"</span></label>":b.innerHTML,ee=k("<li></li>"),de=k("<span></span>");de.html(ae),ee.addClass(Y+" "+re),ee.append(de);var ke=b.getAttribute("data-icon");if(ke){var Oe=k('<img alt="" src="'+ke+'">');ee.prepend(Oe)}return k(this.dropdownOptions).append(ee[0]),ee[0]}},{key:"_toggleEntryFromArray",value:function(S){var b=!this._keysSelected.hasOwnProperty(S),D=k(this._valueDict[S].optionEl);return b?this._keysSelected[S]=!0:delete this._keysSelected[S],D.toggleClass("selected",b),D.find('input[type="checkbox"]').prop("checked",b),D.prop("selected",b),b}},{key:"_setValueToInput",value:function(){var S=[],b=this.$el.find("option");if(b.each(function(Y){if(k(Y).prop("selected")){var re=k(Y).text();S.push(re)}}),!S.length){var D=this.$el.find("option:disabled").eq(0);D.length&&D[0].value===""&&S.push(D.text())}this.input.value=S.join(", ")}},{key:"_setSelectedStates",value:function(){this._keysSelected={};for(var S in this._valueDict){var b=this._valueDict[S],D=k(b.el).prop("selected");k(b.optionEl).find('input[type="checkbox"]').prop("checked",D),D?(this._activateOption(k(this.dropdownOptions),k(b.optionEl)),this._keysSelected[S]=!0):k(b.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(S,b){if(b){this.isMultiple||S.find("li.selected").removeClass("selected");var D=k(b);D.addClass("selected")}}},{key:"getSelectedValues",value:function(){var S=[];for(var b in this._keysSelected)S.push(this._valueDict[b].el.value);return S}}],[{key:"init",value:function(S,b){return n(F.__proto__||Object.getPrototypeOf(F),"init",this).call(this,this,S,b)}},{key:"getInstance",value:function(S){var b=S.jquery?S[0]:S;return b.M_FormSelect}},{key:"defaults",get:function(){return V}}]),F}(o);M.FormSelect=U,M.jQueryLoaded&&M.initializeJqueryWrapper(U,"formSelect","M_FormSelect")}(cash),function(k,V){var U={},W=function(F){c(z,F);function z(S,b){h(this,z);var D=a(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,z,S,b));return D.el.M_Range=D,D.options=k.extend({},z.defaults,b),D._mousedown=!1,D._setupThumb(),D._setupEventHandlers(),D}return r(z,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){k(this.value).html(this.$el.val()),k(this.thumb).hasClass("active")||this._showRangeBubble();var b=this._calcRangeOffset();k(this.thumb).addClass("active").css("left",b+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(b){if(k(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),k(this.thumb).hasClass("active")||this._showRangeBubble(),b.type!=="input"){var D=this._calcRangeOffset();k(this.thumb).addClass("active").css("left",D+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){k(this.thumb).hasClass("active")||this._showRangeBubble();var b=this._calcRangeOffset();k(this.thumb).addClass("active").css("left",b+"px"),k(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var b=parseInt(this.$el.css("padding-left")),D=7+b+"px";k(this.thumb).hasClass("active")&&(V.remove(this.thumb),V({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:D,duration:100})),k(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),k(this.thumb).addClass("thumb"),k(this.value).addClass("value"),k(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){k(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var b=parseInt(k(this.thumb).parent().css("padding-left")),D=-7+b+"px";V.remove(this.thumb),V({targets:this.thumb,height:30,width:30,top:-30,marginLeft:D,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var b=this.$el.width()-15,D=parseFloat(this.$el.attr("max"))||100,Y=parseFloat(this.$el.attr("min"))||0,re=(parseFloat(this.$el.val())-Y)/(D-Y);return re*b}}],[{key:"init",value:function(b,D){return n(z.__proto__||Object.getPrototypeOf(z),"init",this).call(this,this,b,D)}},{key:"getInstance",value:function(b){var D=b.jquery?b[0]:b;return D.M_Range}},{key:"defaults",get:function(){return U}}]),z}(o);M.Range=W,M.jQueryLoaded&&M.initializeJqueryWrapper(W,"range","M_Range"),W.init(k("input[type=range]"))}(cash,M.anime)})(WC,WC.exports);var Pq=WC.exports;const Dq=()=>(g.exports.useContext(Tr),oi(),g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"static/css/blog-list.css"}),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"card-container"},Rq())))),Rq=()=>{const[e,t]=g.exports.useState([]),n=g.exports.useContext(Tr),[r,a]=g.exports.useState([]);return g.exports.useEffect(()=>{const c=`${ur.OBJECT}/blog-post`;n.getAPI(c).then(h=>{t(h.data.results)}).catch(h=>{n.refreshAuth()}),n.getAPI(`${ur.OBJECT}/tag`).then(h=>{const o=h.data.results;a(o)}).catch(()=>{n.refreshAuth()})},[]),e.map(c=>{let h=[];for(let o=0;o<c.tags.length;o++)for(let m=0;m<r.length;m++)c.tags[o]==r[m].id&&h.push(r[m]);return g.exports.createElement(Lq,{post:c,tags:h,key:c.id})})},Lq=e=>{const t=e.post,n=g.exports.useContext(Tr);console.log("All users:",n.allUsers);let r=n.allUsers.find(a=>a.id===t.author);return g.exports.createElement("div",{className:"card"},g.exports.createElement("div",{className:"card-headers"},g.exports.createElement("img",{className:"card-image",src:t.featured_image}),g.exports.createElement("div",{className:"card-text"},g.exports.createElement("div",{className:"tag-section"},e.tags.map(a=>g.exports.createElement(Gg,{key:a.id,tag:a}))),g.exports.createElement("h1",{className:"title"},t.title),g.exports.createElement("div",{className:"card-authors"},g.exports.createElement("div",{className:"card-authors-image"},g.exports.createElement(vn,{to:`/user/${r.username}`},g.exports.createElement("img",{className:"circle",src:r?r.gravatar_url:""}))),g.exports.createElement("div",{className:"card-authors-text"},g.exports.createElement(vn,{to:`/user/${r.username}`,className:"link"},r&&`${r.first_name} ${r.last_name}`),g.exports.createElement("br",null),"\u2022 posted ",new Date(t.created_date).toLocaleTimeString(void 0,L0))))),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"card-body"},g.exports.createElement("p",null,t.body)),g.exports.createElement("br",null),g.exports.createElement(vn,{className:"link",to:`/blog/${t.slug}`},"Read full blog post ",g.exports.createElement("i",{className:"zmdi zmdi-chevron-right"})))},h4=()=>g.exports.createElement("div",{className:"secondary-nav-wrapper"},g.exports.createElement("ul",{className:"secondary-nav"},g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link current",to:"/accounts/profile"},"Profile")),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"/timetable"},"Timetable")),g.exports.createElement("hr",null),g.exports.createElement("li",null,g.exports.createElement("a",{className:"link",href:"/admin/core/announcement/add/"},"Announcements")),g.exports.createElement("li",null,g.exports.createElement("a",{className:"link",href:"/admin/core/event/add/"},"Events")),g.exports.createElement("hr",null),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link",to:"/accounts/logout/"},"Logout")))),p4=e=>{const t=oi(),n=g.exports.useContext(Tr);return no()||(n.notify("Please login to access this page","info"),t(`/accounts/login?next=${encodeURIComponent(window.location.pathname)}`)),no()?e.children:g.exports.createElement(g.exports.Fragment,null)},I_=e=>g.exports.createElement(p4,null,g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/profile/detail.css"}),g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/secondary.css"}),g.exports.createElement("div",{className:"container"},g.exports.createElement("ul",{className:"sidenav secondnav",id:"secondary-out"},g.exports.createElement("li",null,g.exports.createElement(vn,{className:"sidenav-close",to:"/accounts/profile"},"Profile")),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"sidenav-close",to:"/timetable"},"Timetable")),g.exports.createElement("li",{className:"divider"}),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link sidenav-close",to:"/admin/core/announcement/add/"},"Add announcement")),g.exports.createElement("li",null,g.exports.createElement(vn,{className:"link sidenav-close",to:"/admin/core/event/add/"},"Add event")),g.exports.createElement("li",{className:"divider"}),g.exports.createElement("li",null,g.exports.createElement(vn,{to:"/accounts/logout/",className:"sidenav-close"},"Logout"))),g.exports.createElement(h4,null),g.exports.createElement("div",{className:"white-bg"},e.children)))),zP=["http","https","mailto","tel"];function Oq(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let a=-1;for(;++a<zP.length;){const c=zP[a];if(r===c.length&&t.slice(0,c.length).toLowerCase()===c)return t}return a=t.indexOf("?"),a!==-1&&r>a||(a=t.indexOf("#"),a!==-1&&r>a)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var f4=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};function _g(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?BP(e.position):"start"in e||"end"in e?BP(e):"line"in e||"column"in e?GC(e):""}function GC(e){return FP(e&&e.line)+":"+FP(e&&e.column)}function BP(e){return GC(e&&e.start)+"-"+GC(e&&e.end)}function FP(e){return e&&typeof e=="number"?e:1}class ls extends Error{constructor(t,n,r){const a=[null,null];let c={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const h=r.indexOf(":");h===-1?a[1]=r:(a[0]=r.slice(0,h),a[1]=r.slice(h+1))}n&&("type"in n||"position"in n?n.position&&(c=n.position):"start"in n||"end"in n?c=n:("line"in n||"column"in n)&&(c.start=n)),this.name=_g(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack=typeof t=="object"?t.stack:"",this.reason=this.message,this.fatal,this.line=c.start.line,this.column=c.start.column,this.source=a[0],this.ruleId=a[1],this.position=c,this.actual,this.expected,this.file,this.url,this.note}}ls.prototype.file="";ls.prototype.name="";ls.prototype.reason="";ls.prototype.message="";ls.prototype.stack="";ls.prototype.fatal=null;ls.prototype.column=null;ls.prototype.line=null;ls.prototype.source=null;ls.prototype.ruleId=null;ls.prototype.position=null;const rl={basename:zq,dirname:Bq,extname:Fq,join:Nq,sep:"/"};function zq(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');vy(e);let n=0,r=-1,a=e.length,c;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.charCodeAt(a)===47){if(c){n=a+1;break}}else r<0&&(c=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let h=-1,o=t.length-1;for(;a--;)if(e.charCodeAt(a)===47){if(c){n=a+1;break}}else h<0&&(c=!0,h=a+1),o>-1&&(e.charCodeAt(a)===t.charCodeAt(o--)?o<0&&(r=a):(o=-1,r=h));return n===r?r=h:r<0&&(r=e.length),e.slice(n,r)}function Bq(e){if(vy(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function Fq(e){vy(e);let t=e.length,n=-1,r=0,a=-1,c=0,h;for(;t--;){const o=e.charCodeAt(t);if(o===47){if(h){r=t+1;break}continue}n<0&&(h=!0,n=t+1),o===46?a<0?a=t:c!==1&&(c=1):a>-1&&(c=-1)}return a<0||n<0||c===0||c===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function Nq(...e){let t=-1,n;for(;++t<e.length;)vy(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":$q(n)}function $q(e){vy(e);const t=e.charCodeAt(0)===47;let n=Uq(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Uq(e,t){let n="",r=0,a=-1,c=0,h=-1,o,m;for(;++h<=e.length;){if(h<e.length)o=e.charCodeAt(h);else{if(o===47)break;o=47}if(o===47){if(!(a===h-1||c===1))if(a!==h-1&&c===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(m=n.lastIndexOf("/"),m!==n.length-1){m<0?(n="",r=0):(n=n.slice(0,m),r=n.length-1-n.lastIndexOf("/")),a=h,c=0;continue}}else if(n.length>0){n="",r=0,a=h,c=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,h):n=e.slice(a+1,h),r=h-a-1;a=h,c=0}else o===46&&c>-1?c++:c=-1}return n}function vy(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const jq={cwd:Vq};function Vq(){return"/"}function qC(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Hq(e){if(typeof e=="string")e=new URL(e);else if(!qC(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Wq(e)}function Wq(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const Xw=["history","path","basename","stem","extname","dirname"];class m4{constructor(t){let n;t?typeof t=="string"||f4(t)?n={value:t}:qC(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=jq.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<Xw.length;){const c=Xw[r];c in n&&n[c]!==void 0&&(this[c]=c==="history"?[...n[c]]:n[c])}let a;for(a in n)Xw.includes(a)||(this[a]=n[a])}get path(){return this.history[this.history.length-1]}set path(t){qC(t)&&(t=Hq(t)),Yw(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?rl.dirname(this.path):void 0}set dirname(t){NP(this.basename,"dirname"),this.path=rl.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?rl.basename(this.path):void 0}set basename(t){Yw(t,"basename"),Kw(t,"basename"),this.path=rl.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?rl.extname(this.path):void 0}set extname(t){if(Kw(t,"extname"),NP(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=rl.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?rl.basename(this.path,this.extname):void 0}set stem(t){Yw(t,"stem"),Kw(t,"stem"),this.path=rl.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const a=new ls(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=null,a}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}}function Kw(e,t){if(e&&e.includes(rl.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+rl.sep+"`")}function Yw(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function NP(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function $P(e){if(e)throw e}var ix=Object.prototype.hasOwnProperty,g4=Object.prototype.toString,UP=Object.defineProperty,jP=Object.getOwnPropertyDescriptor,VP=function(t){return typeof Array.isArray=="function"?Array.isArray(t):g4.call(t)==="[object Array]"},HP=function(t){if(!t||g4.call(t)!=="[object Object]")return!1;var n=ix.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&ix.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a=="undefined"||ix.call(t,a)},WP=function(t,n){UP&&n.name==="__proto__"?UP(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},GP=function(t,n){if(n==="__proto__")if(ix.call(t,n)){if(jP)return jP(t,n).value}else return;return t[n]},qP=function e(){var t,n,r,a,c,h,o=arguments[0],m=1,w=arguments.length,A=!1;for(typeof o=="boolean"&&(A=o,o=arguments[1]||{},m=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});m<w;++m)if(t=arguments[m],t!=null)for(n in t)r=GP(o,n),a=GP(t,n),o!==a&&(A&&a&&(HP(a)||(c=VP(a)))?(c?(c=!1,h=r&&VP(r)?r:[]):h=r&&HP(r)?r:{},WP(o,{name:n,newValue:e(A,h,a)})):typeof a!="undefined"&&WP(o,{name:n,newValue:a}));return o};function ZC(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Gq(){const e=[],t={run:n,use:r};return t;function n(...a){let c=-1;const h=a.pop();if(typeof h!="function")throw new TypeError("Expected function as last argument, not "+h);o(null,...a);function o(m,...w){const A=e[++c];let P=-1;if(m){h(m);return}for(;++P<a.length;)(w[P]===null||w[P]===void 0)&&(w[P]=a[P]);a=w,A?qq(A,o)(...w):h(null,...w)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function qq(e,t){let n;return r;function r(...h){const o=e.length>h.length;let m;o&&h.push(a);try{m=e.apply(this,h)}catch(w){const A=w;if(o&&n)throw A;return a(A)}o||(m instanceof Promise?m.then(c,a):m instanceof Error?a(m):c(m))}function a(h,...o){n||(n=!0,t(h,...o))}function c(h){a(null,h)}}const Zq=v4().freeze(),y4={}.hasOwnProperty;function v4(){const e=Gq(),t=[];let n={},r,a=-1;return c.data=h,c.Parser=void 0,c.Compiler=void 0,c.freeze=o,c.attachers=t,c.use=m,c.parse=w,c.stringify=A,c.run=P,c.runSync=O,c.process=B,c.processSync=N,c;function c(){const k=v4();let V=-1;for(;++V<t.length;)k.use(...t[V]);return k.data(qP(!0,{},n)),k}function h(k,V){return typeof k=="string"?arguments.length===2?(eE("data",r),n[k]=V,c):y4.call(n,k)&&n[k]||null:k?(eE("data",r),n=k,c):n}function o(){if(r)return c;for(;++a<t.length;){const[k,...V]=t[a];if(V[0]===!1)continue;V[0]===!0&&(V[0]=void 0);const U=k.call(c,...V);typeof U=="function"&&e.use(U)}return r=!0,a=Number.POSITIVE_INFINITY,c}function m(k,...V){let U;if(eE("use",r),k!=null)if(typeof k=="function")S(k,...V);else if(typeof k=="object")Array.isArray(k)?z(k):F(k);else throw new TypeError("Expected usable value, not `"+k+"`");return U&&(n.settings=Object.assign(n.settings||{},U)),c;function W(b){if(typeof b=="function")S(b);else if(typeof b=="object")if(Array.isArray(b)){const[D,...Y]=b;S(D,...Y)}else F(b);else throw new TypeError("Expected usable value, not `"+b+"`")}function F(b){z(b.plugins),b.settings&&(U=Object.assign(U||{},b.settings))}function z(b){let D=-1;if(b!=null)if(Array.isArray(b))for(;++D<b.length;){const Y=b[D];W(Y)}else throw new TypeError("Expected a list of plugins, not `"+b+"`")}function S(b,D){let Y=-1,re;for(;++Y<t.length;)if(t[Y][0]===b){re=t[Y];break}re?(ZC(re[1])&&ZC(D)&&(D=qP(!0,re[1],D)),re[1]=D):t.push([...arguments])}}function w(k){c.freeze();const V=qm(k),U=c.Parser;return Jw("parse",U),ZP(U,"parse")?new U(String(V),V).parse():U(String(V),V)}function A(k,V){c.freeze();const U=qm(V),W=c.Compiler;return Qw("stringify",W),XP(k),ZP(W,"compile")?new W(k,U).compile():W(k,U)}function P(k,V,U){if(XP(k),c.freeze(),!U&&typeof V=="function"&&(U=V,V=void 0),!U)return new Promise(W);W(null,U);function W(F,z){e.run(k,qm(V),S);function S(b,D,Y){D=D||k,b?z(b):F?F(D):U(null,D,Y)}}}function O(k,V){let U,W;return c.run(k,V,F),KP("runSync","run",W),U;function F(z,S){$P(z),U=S,W=!0}}function B(k,V){if(c.freeze(),Jw("process",c.Parser),Qw("process",c.Compiler),!V)return new Promise(U);U(null,V);function U(W,F){const z=qm(k);c.run(c.parse(z),z,(b,D,Y)=>{if(b||!D||!Y)S(b);else{const re=c.stringify(D,Y);re==null||(Yq(re)?Y.value=re:Y.result=re),S(b,Y)}});function S(b,D){b||!D?F(b):W?W(D):V(null,D)}}}function N(k){let V;c.freeze(),Jw("processSync",c.Parser),Qw("processSync",c.Compiler);const U=qm(k);return c.process(U,W),KP("processSync","process",V),U;function W(F){V=!0,$P(F)}}}function ZP(e,t){return typeof e=="function"&&e.prototype&&(Xq(e.prototype)||t in e.prototype)}function Xq(e){let t;for(t in e)if(y4.call(e,t))return!0;return!1}function Jw(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function Qw(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function eE(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function XP(e){if(!ZC(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function KP(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function qm(e){return Kq(e)?e:new m4(e)}function Kq(e){return Boolean(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Yq(e){return typeof e=="string"||f4(e)}function Jq(e,t){var{includeImageAlt:n=!0}=t||{};return _4(e,n)}function _4(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&YP(e.children,t)||Array.isArray(e)&&YP(e,t))||""}function YP(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=_4(e[r],t);return n.join("")}function Da(e,t,n,r){const a=e.length;let c=0,h;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)h=Array.from(r),h.unshift(t,n),[].splice.apply(e,h);else for(n&&[].splice.apply(e,[t,n]);c<r.length;)h=r.slice(c,c+1e4),h.unshift(t,0),[].splice.apply(e,h),c+=1e4,t+=1e4}function Ya(e,t){return e.length>0?(Da(e,e.length,0,t),e):t}const JP={}.hasOwnProperty;function x4(e){const t={};let n=-1;for(;++n<e.length;)Qq(t,e[n]);return t}function Qq(e,t){let n;for(n in t){const a=(JP.call(e,n)?e[n]:void 0)||(e[n]={}),c=t[n];let h;for(h in c){JP.call(a,h)||(a[h]=[]);const o=c[h];eZ(a[h],Array.isArray(o)?o:o?[o]:[])}}}function eZ(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Da(e,0,0,r)}const tZ=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Ja=gc(/[A-Za-z]/),e0=gc(/\d/),nZ=gc(/[\dA-Fa-f]/),Ko=gc(/[\dA-Za-z]/),rZ=gc(/[!-/:-@[-`{-~]/),QP=gc(/[#-'*+\--9=?A-Z^-~]/);function Kg(e){return e!==null&&(e<32||e===127)}function qi(e){return e!==null&&(e<0||e===32)}function Dn(e){return e!==null&&e<-2}function ni(e){return e===-2||e===-1||e===32}const V0=gc(/\s/),H0=gc(tZ);function gc(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function Sr(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let c=0;return h;function h(m){return ni(m)?(e.enter(n),o(m)):t(m)}function o(m){return ni(m)&&c++<a?(e.consume(m),o):(e.exit(n),t(m))}}const iZ={tokenize:oZ};function oZ(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Sr(e,t,"linePrefix")}function a(o){return e.enter("paragraph"),c(o)}function c(o){const m=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=m),n=m,h(o)}function h(o){if(o===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(o);return}return Dn(o)?(e.consume(o),e.exit("chunkText"),c):(e.consume(o),h)}}const aZ={tokenize:sZ},eD={tokenize:lZ};function sZ(e){const t=this,n=[];let r=0,a,c,h;return o;function o(F){if(r<n.length){const z=n[r];return t.containerState=z[1],e.attempt(z[0].continuation,m,w)(F)}return w(F)}function m(F){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&W();const z=t.events.length;let S=z,b;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){b=t.events[S][1].end;break}U(r);let D=z;for(;D<t.events.length;)t.events[D][1].end=Object.assign({},b),D++;return Da(t.events,S+1,0,t.events.slice(z)),t.events.length=D,w(F)}return o(F)}function w(F){if(r===n.length){if(!a)return O(F);if(a.currentConstruct&&a.currentConstruct.concrete)return N(F);t.interrupt=Boolean(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(eD,A,P)(F)}function A(F){return a&&W(),U(r),O(F)}function P(F){return t.parser.lazy[t.now().line]=r!==n.length,h=t.now().offset,N(F)}function O(F){return t.containerState={},e.attempt(eD,B,N)(F)}function B(F){return r++,n.push([t.currentConstruct,t.containerState]),O(F)}function N(F){if(F===null){a&&W(),U(0),e.consume(F);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:c,_tokenizer:a}),k(F)}function k(F){if(F===null){V(e.exit("chunkFlow"),!0),U(0),e.consume(F);return}return Dn(F)?(e.consume(F),V(e.exit("chunkFlow")),r=0,t.interrupt=void 0,o):(e.consume(F),k)}function V(F,z){const S=t.sliceStream(F);if(z&&S.push(null),F.previous=c,c&&(c.next=F),c=F,a.defineSkip(F.start),a.write(S),t.parser.lazy[F.start.line]){let b=a.events.length;for(;b--;)if(a.events[b][1].start.offset<h&&(!a.events[b][1].end||a.events[b][1].end.offset>h))return;const D=t.events.length;let Y=D,re,ae;for(;Y--;)if(t.events[Y][0]==="exit"&&t.events[Y][1].type==="chunkFlow"){if(re){ae=t.events[Y][1].end;break}re=!0}for(U(r),b=D;b<t.events.length;)t.events[b][1].end=Object.assign({},ae),b++;Da(t.events,Y+1,0,t.events.slice(D)),t.events.length=b}}function U(F){let z=n.length;for(;z-- >F;){const S=n[z];t.containerState=S[1],S[0].exit.call(t,e)}n.length=F}function W(){a.write([null]),c=void 0,a=void 0,t.containerState._closeFlow=void 0}}function lZ(e,t,n){return Sr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function t0(e){if(e===null||qi(e)||V0(e))return 1;if(H0(e))return 2}function W0(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const c=e[a].resolveAll;c&&!r.includes(c)&&(t=c(t,n),r.push(c))}return t}const XC={name:"attention",tokenize:cZ,resolveAll:uZ};function uZ(e,t){let n=-1,r,a,c,h,o,m,w,A;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;m=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const P=Object.assign({},e[r][1].end),O=Object.assign({},e[n][1].start);tD(P,-m),tD(O,m),h={type:m>1?"strongSequence":"emphasisSequence",start:P,end:Object.assign({},e[r][1].end)},o={type:m>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:O},c={type:m>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a={type:m>1?"strong":"emphasis",start:Object.assign({},h.start),end:Object.assign({},o.end)},e[r][1].end=Object.assign({},h.start),e[n][1].start=Object.assign({},o.end),w=[],e[r][1].end.offset-e[r][1].start.offset&&(w=Ya(w,[["enter",e[r][1],t],["exit",e[r][1],t]])),w=Ya(w,[["enter",a,t],["enter",h,t],["exit",h,t],["enter",c,t]]),w=Ya(w,W0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),w=Ya(w,[["exit",c,t],["enter",o,t],["exit",o,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(A=2,w=Ya(w,[["enter",e[n][1],t],["exit",e[n][1],t]])):A=0,Da(e,r-1,n-r+3,w),n=r+w.length-A-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function cZ(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=t0(r);let c;return h;function h(m){return e.enter("attentionSequence"),c=m,o(m)}function o(m){if(m===c)return e.consume(m),o;const w=e.exit("attentionSequence"),A=t0(m),P=!A||A===2&&a||n.includes(m),O=!a||a===2&&A||n.includes(r);return w._open=Boolean(c===42?P:P&&(a||!O)),w._close=Boolean(c===42?O:O&&(A||!P)),t(m)}}function tD(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const dZ={name:"autolink",tokenize:hZ};function hZ(e,t,n){let r=1;return a;function a(N){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(N),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),c}function c(N){return Ja(N)?(e.consume(N),h):QP(N)?w(N):n(N)}function h(N){return N===43||N===45||N===46||Ko(N)?o(N):w(N)}function o(N){return N===58?(e.consume(N),m):(N===43||N===45||N===46||Ko(N))&&r++<32?(e.consume(N),o):w(N)}function m(N){return N===62?(e.exit("autolinkProtocol"),B(N)):N===null||N===32||N===60||Kg(N)?n(N):(e.consume(N),m)}function w(N){return N===64?(e.consume(N),r=0,A):QP(N)?(e.consume(N),w):n(N)}function A(N){return Ko(N)?P(N):n(N)}function P(N){return N===46?(e.consume(N),r=0,A):N===62?(e.exit("autolinkProtocol").type="autolinkEmail",B(N)):O(N)}function O(N){return(N===45||Ko(N))&&r++<63?(e.consume(N),N===45?O:P):n(N)}function B(N){return e.enter("autolinkMarker"),e.consume(N),e.exit("autolinkMarker"),e.exit("autolink"),t}}const _y={tokenize:pZ,partial:!0};function pZ(e,t,n){return Sr(e,r,"linePrefix");function r(a){return a===null||Dn(a)?t(a):n(a)}}const b4={name:"blockQuote",tokenize:fZ,continuation:{tokenize:mZ},exit:gZ};function fZ(e,t,n){const r=this;return a;function a(h){if(h===62){const o=r.containerState;return o.open||(e.enter("blockQuote",{_container:!0}),o.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(h),e.exit("blockQuoteMarker"),c}return n(h)}function c(h){return ni(h)?(e.enter("blockQuotePrefixWhitespace"),e.consume(h),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(h))}}function mZ(e,t,n){return Sr(e,e.attempt(b4,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function gZ(e){e.exit("blockQuote")}const w4={name:"characterEscape",tokenize:yZ};function yZ(e,t,n){return r;function r(c){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(c),e.exit("escapeMarker"),a}function a(c){return rZ(c)?(e.enter("characterEscapeValue"),e.consume(c),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(c)}}const nD=document.createElement("i");function KT(e){const t="&"+e+";";nD.innerHTML=t;const n=nD.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const E4={name:"characterReference",tokenize:vZ};function vZ(e,t,n){const r=this;let a=0,c,h;return o;function o(P){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(P),e.exit("characterReferenceMarker"),m}function m(P){return P===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(P),e.exit("characterReferenceMarkerNumeric"),w):(e.enter("characterReferenceValue"),c=31,h=Ko,A(P))}function w(P){return P===88||P===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(P),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),c=6,h=nZ,A):(e.enter("characterReferenceValue"),c=7,h=e0,A(P))}function A(P){let O;return P===59&&a?(O=e.exit("characterReferenceValue"),h===Ko&&!KT(r.sliceSerialize(O))?n(P):(e.enter("characterReferenceMarker"),e.consume(P),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):h(P)&&a++<c?(e.consume(P),A):n(P)}}const rD={name:"codeFenced",tokenize:_Z,concrete:!0};function _Z(e,t,n){const r=this,a={tokenize:S,partial:!0},c={tokenize:z,partial:!0},h=this.events[this.events.length-1],o=h&&h[1].type==="linePrefix"?h[2].sliceSerialize(h[1],!0).length:0;let m=0,w;return A;function A(b){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),w=b,P(b)}function P(b){return b===w?(e.consume(b),m++,P):(e.exit("codeFencedFenceSequence"),m<3?n(b):Sr(e,O,"whitespace")(b))}function O(b){return b===null||Dn(b)?V(b):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),B(b))}function B(b){return b===null||qi(b)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Sr(e,N,"whitespace")(b)):b===96&&b===w?n(b):(e.consume(b),B)}function N(b){return b===null||Dn(b)?V(b):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),k(b))}function k(b){return b===null||Dn(b)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),V(b)):b===96&&b===w?n(b):(e.consume(b),k)}function V(b){return e.exit("codeFencedFence"),r.interrupt?t(b):U(b)}function U(b){return b===null?F(b):Dn(b)?e.attempt(c,e.attempt(a,F,o?Sr(e,U,"linePrefix",o+1):U),F)(b):(e.enter("codeFlowValue"),W(b))}function W(b){return b===null||Dn(b)?(e.exit("codeFlowValue"),U(b)):(e.consume(b),W)}function F(b){return e.exit("codeFenced"),t(b)}function z(b,D,Y){const re=this;return ae;function ae(de){return b.enter("lineEnding"),b.consume(de),b.exit("lineEnding"),ee}function ee(de){return re.parser.lazy[re.now().line]?Y(de):D(de)}}function S(b,D,Y){let re=0;return Sr(b,ae,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function ae(ke){return b.enter("codeFencedFence"),b.enter("codeFencedFenceSequence"),ee(ke)}function ee(ke){return ke===w?(b.consume(ke),re++,ee):re<m?Y(ke):(b.exit("codeFencedFenceSequence"),Sr(b,de,"whitespace")(ke))}function de(ke){return ke===null||Dn(ke)?(b.exit("codeFencedFence"),D(ke)):Y(ke)}}}const tE={name:"codeIndented",tokenize:bZ},xZ={tokenize:wZ,partial:!0};function bZ(e,t,n){const r=this;return a;function a(w){return e.enter("codeIndented"),Sr(e,c,"linePrefix",4+1)(w)}function c(w){const A=r.events[r.events.length-1];return A&&A[1].type==="linePrefix"&&A[2].sliceSerialize(A[1],!0).length>=4?h(w):n(w)}function h(w){return w===null?m(w):Dn(w)?e.attempt(xZ,h,m)(w):(e.enter("codeFlowValue"),o(w))}function o(w){return w===null||Dn(w)?(e.exit("codeFlowValue"),h(w)):(e.consume(w),o)}function m(w){return e.exit("codeIndented"),t(w)}}function wZ(e,t,n){const r=this;return a;function a(h){return r.parser.lazy[r.now().line]?n(h):Dn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),a):Sr(e,c,"linePrefix",4+1)(h)}function c(h){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(h):Dn(h)?a(h):n(h)}}const EZ={name:"codeText",tokenize:TZ,resolve:CZ,previous:SZ};function CZ(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function SZ(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function TZ(e,t,n){let r=0,a,c;return h;function h(P){return e.enter("codeText"),e.enter("codeTextSequence"),o(P)}function o(P){return P===96?(e.consume(P),r++,o):(e.exit("codeTextSequence"),m(P))}function m(P){return P===null?n(P):P===96?(c=e.enter("codeTextSequence"),a=0,A(P)):P===32?(e.enter("space"),e.consume(P),e.exit("space"),m):Dn(P)?(e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),m):(e.enter("codeTextData"),w(P))}function w(P){return P===null||P===32||P===96||Dn(P)?(e.exit("codeTextData"),m(P)):(e.consume(P),w)}function A(P){return P===96?(e.consume(P),a++,A):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(P)):(c.type="codeTextData",w(P))}}function C4(e){const t={};let n=-1,r,a,c,h,o,m,w;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(m=r[1]._tokenizer.events,c=0,c<m.length&&m[c][1].type==="lineEndingBlank"&&(c+=2),c<m.length&&m[c][1].type==="content"))for(;++c<m.length&&m[c][1].type!=="content";)m[c][1].type==="chunkText"&&(m[c][1]._isInFirstContentOfListItem=!0,c++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,kZ(e,n)),n=t[n],w=!0);else if(r[1]._container){for(c=n,a=void 0;c--&&(h=e[c],h[1].type==="lineEnding"||h[1].type==="lineEndingBlank");)h[0]==="enter"&&(a&&(e[a][1].type="lineEndingBlank"),h[1].type="lineEnding",a=c);a&&(r[1].end=Object.assign({},e[a][1].start),o=e.slice(a,n),o.unshift(r),Da(e,a,n-a+1,o))}}return!w}function kZ(e,t){const n=e[t][1],r=e[t][2];let a=t-1;const c=[],h=n._tokenizer||r.parser[n.contentType](n.start),o=h.events,m=[],w={};let A,P,O=-1,B=n,N=0,k=0;const V=[k];for(;B;){for(;e[++a][1]!==B;);c.push(a),B._tokenizer||(A=r.sliceStream(B),B.next||A.push(null),P&&h.defineSkip(B.start),B._isInFirstContentOfListItem&&(h._gfmTasklistFirstContentOfListItem=!0),h.write(A),B._isInFirstContentOfListItem&&(h._gfmTasklistFirstContentOfListItem=void 0)),P=B,B=B.next}for(B=n;++O<o.length;)o[O][0]==="exit"&&o[O-1][0]==="enter"&&o[O][1].type===o[O-1][1].type&&o[O][1].start.line!==o[O][1].end.line&&(k=O+1,V.push(k),B._tokenizer=void 0,B.previous=void 0,B=B.next);for(h.events=[],B?(B._tokenizer=void 0,B.previous=void 0):V.pop(),O=V.length;O--;){const U=o.slice(V[O],V[O+1]),W=c.pop();m.unshift([W,W+U.length-1]),Da(e,W,2,U)}for(O=-1;++O<m.length;)w[N+m[O][0]]=N+m[O][1],N+=m[O][1]-m[O][0]-1;return w}const AZ={tokenize:PZ,resolve:IZ},MZ={tokenize:DZ,partial:!0};function IZ(e){return C4(e),e}function PZ(e,t){let n;return r;function r(o){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(o)}function a(o){return o===null?c(o):Dn(o)?e.check(MZ,h,c)(o):(e.consume(o),a)}function c(o){return e.exit("chunkContent"),e.exit("content"),t(o)}function h(o){return e.consume(o),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function DZ(e,t,n){const r=this;return a;function a(h){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Sr(e,c,"linePrefix")}function c(h){if(h===null||Dn(h))return n(h);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?t(h):e.interrupt(r.parser.constructs.flow,n,t)(h)}}function S4(e,t,n,r,a,c,h,o,m){const w=m||Number.POSITIVE_INFINITY;let A=0;return P;function P(U){return U===60?(e.enter(r),e.enter(a),e.enter(c),e.consume(U),e.exit(c),O):U===null||U===41||Kg(U)?n(U):(e.enter(r),e.enter(h),e.enter(o),e.enter("chunkString",{contentType:"string"}),k(U))}function O(U){return U===62?(e.enter(c),e.consume(U),e.exit(c),e.exit(a),e.exit(r),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),B(U))}function B(U){return U===62?(e.exit("chunkString"),e.exit(o),O(U)):U===null||U===60||Dn(U)?n(U):(e.consume(U),U===92?N:B)}function N(U){return U===60||U===62||U===92?(e.consume(U),B):B(U)}function k(U){return U===40?++A>w?n(U):(e.consume(U),k):U===41?A--?(e.consume(U),k):(e.exit("chunkString"),e.exit(o),e.exit(h),e.exit(r),t(U)):U===null||qi(U)?A?n(U):(e.exit("chunkString"),e.exit(o),e.exit(h),e.exit(r),t(U)):Kg(U)?n(U):(e.consume(U),U===92?V:k)}function V(U){return U===40||U===41||U===92?(e.consume(U),k):k(U)}}function T4(e,t,n,r,a,c){const h=this;let o=0,m;return w;function w(B){return e.enter(r),e.enter(a),e.consume(B),e.exit(a),e.enter(c),A}function A(B){return B===null||B===91||B===93&&!m||B===94&&!o&&"_hiddenFootnoteSupport"in h.parser.constructs||o>999?n(B):B===93?(e.exit(c),e.enter(a),e.consume(B),e.exit(a),e.exit(r),t):Dn(B)?(e.enter("lineEnding"),e.consume(B),e.exit("lineEnding"),A):(e.enter("chunkString",{contentType:"string"}),P(B))}function P(B){return B===null||B===91||B===93||Dn(B)||o++>999?(e.exit("chunkString"),A(B)):(e.consume(B),m=m||!ni(B),B===92?O:P)}function O(B){return B===91||B===92||B===93?(e.consume(B),o++,P):P(B)}}function k4(e,t,n,r,a,c){let h;return o;function o(O){return e.enter(r),e.enter(a),e.consume(O),e.exit(a),h=O===40?41:O,m}function m(O){return O===h?(e.enter(a),e.consume(O),e.exit(a),e.exit(r),t):(e.enter(c),w(O))}function w(O){return O===h?(e.exit(c),m(h)):O===null?n(O):Dn(O)?(e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),Sr(e,w,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),A(O))}function A(O){return O===h||O===null||Dn(O)?(e.exit("chunkString"),w(O)):(e.consume(O),O===92?P:A)}function P(O){return O===h||O===92?(e.consume(O),A):A(O)}}function xg(e,t){let n;return r;function r(a){return Dn(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):ni(a)?Sr(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}function Os(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const RZ={name:"definition",tokenize:OZ},LZ={tokenize:zZ,partial:!0};function OZ(e,t,n){const r=this;let a;return c;function c(m){return e.enter("definition"),T4.call(r,e,h,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function h(m){return a=Os(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),xg(e,S4(e,e.attempt(LZ,Sr(e,o,"whitespace"),Sr(e,o,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(m)}function o(m){return m===null||Dn(m)?(e.exit("definition"),r.parser.defined.includes(a)||r.parser.defined.push(a),t(m)):n(m)}}function zZ(e,t,n){return r;function r(h){return qi(h)?xg(e,a)(h):n(h)}function a(h){return h===34||h===39||h===40?k4(e,Sr(e,c,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(h):n(h)}function c(h){return h===null||Dn(h)?t(h):n(h)}}const BZ={name:"hardBreakEscape",tokenize:FZ};function FZ(e,t,n){return r;function r(c){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(c),a}function a(c){return Dn(c)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(c)):n(c)}}const NZ={name:"headingAtx",tokenize:UZ,resolve:$Z};function $Z(e,t){let n=e.length-2,r=3,a,c;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},c={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Da(e,r,n-r+1,[["enter",a,t],["enter",c,t],["exit",c,t],["exit",a,t]])),e}function UZ(e,t,n){const r=this;let a=0;return c;function c(A){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),h(A)}function h(A){return A===35&&a++<6?(e.consume(A),h):A===null||qi(A)?(e.exit("atxHeadingSequence"),r.interrupt?t(A):o(A)):n(A)}function o(A){return A===35?(e.enter("atxHeadingSequence"),m(A)):A===null||Dn(A)?(e.exit("atxHeading"),t(A)):ni(A)?Sr(e,o,"whitespace")(A):(e.enter("atxHeadingText"),w(A))}function m(A){return A===35?(e.consume(A),m):(e.exit("atxHeadingSequence"),o(A))}function w(A){return A===null||A===35||qi(A)?(e.exit("atxHeadingText"),o(A)):(e.consume(A),w)}}const jZ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],iD=["pre","script","style","textarea"],VZ={name:"htmlFlow",tokenize:GZ,resolveTo:WZ,concrete:!0},HZ={tokenize:qZ,partial:!0};function WZ(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function GZ(e,t,n){const r=this;let a,c,h,o,m;return w;function w(be){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(be),A}function A(be){return be===33?(e.consume(be),P):be===47?(e.consume(be),N):be===63?(e.consume(be),a=3,r.interrupt?t:rt):Ja(be)?(e.consume(be),h=String.fromCharCode(be),c=!0,k):n(be)}function P(be){return be===45?(e.consume(be),a=2,O):be===91?(e.consume(be),a=5,h="CDATA[",o=0,B):Ja(be)?(e.consume(be),a=4,r.interrupt?t:rt):n(be)}function O(be){return be===45?(e.consume(be),r.interrupt?t:rt):n(be)}function B(be){return be===h.charCodeAt(o++)?(e.consume(be),o===h.length?r.interrupt?t:ee:B):n(be)}function N(be){return Ja(be)?(e.consume(be),h=String.fromCharCode(be),k):n(be)}function k(be){return be===null||be===47||be===62||qi(be)?be!==47&&c&&iD.includes(h.toLowerCase())?(a=1,r.interrupt?t(be):ee(be)):jZ.includes(h.toLowerCase())?(a=6,be===47?(e.consume(be),V):r.interrupt?t(be):ee(be)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(be):c?W(be):U(be)):be===45||Ko(be)?(e.consume(be),h+=String.fromCharCode(be),k):n(be)}function V(be){return be===62?(e.consume(be),r.interrupt?t:ee):n(be)}function U(be){return ni(be)?(e.consume(be),U):re(be)}function W(be){return be===47?(e.consume(be),re):be===58||be===95||Ja(be)?(e.consume(be),F):ni(be)?(e.consume(be),W):re(be)}function F(be){return be===45||be===46||be===58||be===95||Ko(be)?(e.consume(be),F):z(be)}function z(be){return be===61?(e.consume(be),S):ni(be)?(e.consume(be),z):W(be)}function S(be){return be===null||be===60||be===61||be===62||be===96?n(be):be===34||be===39?(e.consume(be),m=be,b):ni(be)?(e.consume(be),S):(m=null,D(be))}function b(be){return be===null||Dn(be)?n(be):be===m?(e.consume(be),Y):(e.consume(be),b)}function D(be){return be===null||be===34||be===39||be===60||be===61||be===62||be===96||qi(be)?z(be):(e.consume(be),D)}function Y(be){return be===47||be===62||ni(be)?W(be):n(be)}function re(be){return be===62?(e.consume(be),ae):n(be)}function ae(be){return ni(be)?(e.consume(be),ae):be===null||Dn(be)?ee(be):n(be)}function ee(be){return be===45&&a===2?(e.consume(be),Le):be===60&&a===1?(e.consume(be),Ee):be===62&&a===4?(e.consume(be),tt):be===63&&a===3?(e.consume(be),rt):be===93&&a===5?(e.consume(be),Ze):Dn(be)&&(a===6||a===7)?e.check(HZ,tt,de)(be):be===null||Dn(be)?de(be):(e.consume(be),ee)}function de(be){return e.exit("htmlFlowData"),ke(be)}function ke(be){return be===null?xe(be):Dn(be)?e.attempt({tokenize:Oe,partial:!0},ke,xe)(be):(e.enter("htmlFlowData"),ee(be))}function Oe(be,nn,$t){return an;function an(ln){return be.enter("lineEnding"),be.consume(ln),be.exit("lineEnding"),en}function en(ln){return r.parser.lazy[r.now().line]?$t(ln):nn(ln)}}function Le(be){return be===45?(e.consume(be),rt):ee(be)}function Ee(be){return be===47?(e.consume(be),h="",ct):ee(be)}function ct(be){return be===62&&iD.includes(h.toLowerCase())?(e.consume(be),tt):Ja(be)&&h.length<8?(e.consume(be),h+=String.fromCharCode(be),ct):ee(be)}function Ze(be){return be===93?(e.consume(be),rt):ee(be)}function rt(be){return be===62?(e.consume(be),tt):be===45&&a===2?(e.consume(be),rt):ee(be)}function tt(be){return be===null||Dn(be)?(e.exit("htmlFlowData"),xe(be)):(e.consume(be),tt)}function xe(be){return e.exit("htmlFlow"),t(be)}}function qZ(e,t,n){return r;function r(a){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),e.attempt(_y,t,n)}}const ZZ={name:"htmlText",tokenize:XZ};function XZ(e,t,n){const r=this;let a,c,h,o;return m;function m(xe){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(xe),w}function w(xe){return xe===33?(e.consume(xe),A):xe===47?(e.consume(xe),D):xe===63?(e.consume(xe),S):Ja(xe)?(e.consume(xe),ae):n(xe)}function A(xe){return xe===45?(e.consume(xe),P):xe===91?(e.consume(xe),c="CDATA[",h=0,V):Ja(xe)?(e.consume(xe),z):n(xe)}function P(xe){return xe===45?(e.consume(xe),O):n(xe)}function O(xe){return xe===null||xe===62?n(xe):xe===45?(e.consume(xe),B):N(xe)}function B(xe){return xe===null||xe===62?n(xe):N(xe)}function N(xe){return xe===null?n(xe):xe===45?(e.consume(xe),k):Dn(xe)?(o=N,Ze(xe)):(e.consume(xe),N)}function k(xe){return xe===45?(e.consume(xe),tt):N(xe)}function V(xe){return xe===c.charCodeAt(h++)?(e.consume(xe),h===c.length?U:V):n(xe)}function U(xe){return xe===null?n(xe):xe===93?(e.consume(xe),W):Dn(xe)?(o=U,Ze(xe)):(e.consume(xe),U)}function W(xe){return xe===93?(e.consume(xe),F):U(xe)}function F(xe){return xe===62?tt(xe):xe===93?(e.consume(xe),F):U(xe)}function z(xe){return xe===null||xe===62?tt(xe):Dn(xe)?(o=z,Ze(xe)):(e.consume(xe),z)}function S(xe){return xe===null?n(xe):xe===63?(e.consume(xe),b):Dn(xe)?(o=S,Ze(xe)):(e.consume(xe),S)}function b(xe){return xe===62?tt(xe):S(xe)}function D(xe){return Ja(xe)?(e.consume(xe),Y):n(xe)}function Y(xe){return xe===45||Ko(xe)?(e.consume(xe),Y):re(xe)}function re(xe){return Dn(xe)?(o=re,Ze(xe)):ni(xe)?(e.consume(xe),re):tt(xe)}function ae(xe){return xe===45||Ko(xe)?(e.consume(xe),ae):xe===47||xe===62||qi(xe)?ee(xe):n(xe)}function ee(xe){return xe===47?(e.consume(xe),tt):xe===58||xe===95||Ja(xe)?(e.consume(xe),de):Dn(xe)?(o=ee,Ze(xe)):ni(xe)?(e.consume(xe),ee):tt(xe)}function de(xe){return xe===45||xe===46||xe===58||xe===95||Ko(xe)?(e.consume(xe),de):ke(xe)}function ke(xe){return xe===61?(e.consume(xe),Oe):Dn(xe)?(o=ke,Ze(xe)):ni(xe)?(e.consume(xe),ke):ee(xe)}function Oe(xe){return xe===null||xe===60||xe===61||xe===62||xe===96?n(xe):xe===34||xe===39?(e.consume(xe),a=xe,Le):Dn(xe)?(o=Oe,Ze(xe)):ni(xe)?(e.consume(xe),Oe):(e.consume(xe),a=void 0,ct)}function Le(xe){return xe===a?(e.consume(xe),Ee):xe===null?n(xe):Dn(xe)?(o=Le,Ze(xe)):(e.consume(xe),Le)}function Ee(xe){return xe===62||xe===47||qi(xe)?ee(xe):n(xe)}function ct(xe){return xe===null||xe===34||xe===39||xe===60||xe===61||xe===96?n(xe):xe===62||qi(xe)?ee(xe):(e.consume(xe),ct)}function Ze(xe){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(xe),e.exit("lineEnding"),Sr(e,rt,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function rt(xe){return e.enter("htmlTextData"),o(xe)}function tt(xe){return xe===62?(e.consume(xe),e.exit("htmlTextData"),e.exit("htmlText"),t):n(xe)}}const YT={name:"labelEnd",tokenize:tX,resolveTo:eX,resolveAll:QZ},KZ={tokenize:nX},YZ={tokenize:rX},JZ={tokenize:iX};function QZ(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function eX(e,t){let n=e.length,r=0,a,c,h,o;for(;n--;)if(a=e[n][1],c){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(h){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(c=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(h=n);const m={type:e[c][1].type==="labelLink"?"link":"image",start:Object.assign({},e[c][1].start),end:Object.assign({},e[e.length-1][1].end)},w={type:"label",start:Object.assign({},e[c][1].start),end:Object.assign({},e[h][1].end)},A={type:"labelText",start:Object.assign({},e[c+r+2][1].end),end:Object.assign({},e[h-2][1].start)};return o=[["enter",m,t],["enter",w,t]],o=Ya(o,e.slice(c+1,c+r+3)),o=Ya(o,[["enter",A,t]]),o=Ya(o,W0(t.parser.constructs.insideSpan.null,e.slice(c+r+4,h-3),t)),o=Ya(o,[["exit",A,t],e[h-2],e[h-1],["exit",w,t]]),o=Ya(o,e.slice(h+1)),o=Ya(o,[["exit",m,t]]),Da(e,c,e.length,o),e}function tX(e,t,n){const r=this;let a=r.events.length,c,h;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){c=r.events[a][1];break}return o;function o(A){return c?c._inactive?w(A):(h=r.parser.defined.includes(Os(r.sliceSerialize({start:c.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(A),e.exit("labelMarker"),e.exit("labelEnd"),m):n(A)}function m(A){return A===40?e.attempt(KZ,t,h?t:w)(A):A===91?e.attempt(YZ,t,h?e.attempt(JZ,t,w):w)(A):h?t(A):w(A)}function w(A){return c._balanced=!0,n(A)}}function nX(e,t,n){return r;function r(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),xg(e,a)}function a(m){return m===41?o(m):S4(e,c,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function c(m){return qi(m)?xg(e,h)(m):o(m)}function h(m){return m===34||m===39||m===40?k4(e,xg(e,o),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):o(m)}function o(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):n(m)}}function rX(e,t,n){const r=this;return a;function a(h){return T4.call(r,e,c,n,"reference","referenceMarker","referenceString")(h)}function c(h){return r.parser.defined.includes(Os(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(h):n(h)}}function iX(e,t,n){return r;function r(c){return e.enter("reference"),e.enter("referenceMarker"),e.consume(c),e.exit("referenceMarker"),a}function a(c){return c===93?(e.enter("referenceMarker"),e.consume(c),e.exit("referenceMarker"),e.exit("reference"),t):n(c)}}const oX={name:"labelStartImage",tokenize:aX,resolveAll:YT.resolveAll};function aX(e,t,n){const r=this;return a;function a(o){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(o),e.exit("labelImageMarker"),c}function c(o){return o===91?(e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelImage"),h):n(o)}function h(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const sX={name:"labelStartLink",tokenize:lX,resolveAll:YT.resolveAll};function lX(e,t,n){const r=this;return a;function a(h){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelLink"),c}function c(h){return h===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(h):t(h)}}const nE={name:"lineEnding",tokenize:uX};function uX(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Sr(e,t,"linePrefix")}}const ox={name:"thematicBreak",tokenize:cX};function cX(e,t,n){let r=0,a;return c;function c(m){return e.enter("thematicBreak"),a=m,h(m)}function h(m){return m===a?(e.enter("thematicBreakSequence"),o(m)):ni(m)?Sr(e,h,"whitespace")(m):r<3||m!==null&&!Dn(m)?n(m):(e.exit("thematicBreak"),t(m))}function o(m){return m===a?(e.consume(m),r++,o):(e.exit("thematicBreakSequence"),h(m))}}const la={name:"list",tokenize:pX,continuation:{tokenize:fX},exit:gX},dX={tokenize:yX,partial:!0},hX={tokenize:mX,partial:!0};function pX(e,t,n){const r=this,a=r.events[r.events.length-1];let c=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,h=0;return o;function o(B){const N=r.containerState.type||(B===42||B===43||B===45?"listUnordered":"listOrdered");if(N==="listUnordered"?!r.containerState.marker||B===r.containerState.marker:e0(B)){if(r.containerState.type||(r.containerState.type=N,e.enter(N,{_container:!0})),N==="listUnordered")return e.enter("listItemPrefix"),B===42||B===45?e.check(ox,n,w)(B):w(B);if(!r.interrupt||B===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),m(B)}return n(B)}function m(B){return e0(B)&&++h<10?(e.consume(B),m):(!r.interrupt||h<2)&&(r.containerState.marker?B===r.containerState.marker:B===41||B===46)?(e.exit("listItemValue"),w(B)):n(B)}function w(B){return e.enter("listItemMarker"),e.consume(B),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||B,e.check(_y,r.interrupt?n:A,e.attempt(dX,O,P))}function A(B){return r.containerState.initialBlankLine=!0,c++,O(B)}function P(B){return ni(B)?(e.enter("listItemPrefixWhitespace"),e.consume(B),e.exit("listItemPrefixWhitespace"),O):n(B)}function O(B){return r.containerState.size=c+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(B)}}function fX(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(_y,a,c);function a(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Sr(e,t,"listItemIndent",r.containerState.size+1)(o)}function c(o){return r.containerState.furtherBlankLines||!ni(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,h(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(hX,t,h)(o))}function h(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,Sr(e,e.attempt(la,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function mX(e,t,n){const r=this;return Sr(e,a,"listItemIndent",r.containerState.size+1);function a(c){const h=r.events[r.events.length-1];return h&&h[1].type==="listItemIndent"&&h[2].sliceSerialize(h[1],!0).length===r.containerState.size?t(c):n(c)}}function gX(e){e.exit(this.containerState.type)}function yX(e,t,n){const r=this;return Sr(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function a(c){const h=r.events[r.events.length-1];return!ni(c)&&h&&h[1].type==="listItemPrefixWhitespace"?t(c):n(c)}}const oD={name:"setextUnderline",tokenize:_X,resolveTo:vX};function vX(e,t){let n=e.length,r,a,c;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!c&&e[n][1].type==="definition"&&(c=n);const h={type:"setextHeading",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[a][1].type="setextHeadingText",c?(e.splice(a,0,["enter",h,t]),e.splice(c+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[c][1].end)):e[r][1]=h,e.push(["exit",h,t]),e}function _X(e,t,n){const r=this;let a=r.events.length,c,h;for(;a--;)if(r.events[a][1].type!=="lineEnding"&&r.events[a][1].type!=="linePrefix"&&r.events[a][1].type!=="content"){h=r.events[a][1].type==="paragraph";break}return o;function o(A){return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),c=A,m(A)):n(A)}function m(A){return A===c?(e.consume(A),m):(e.exit("setextHeadingLineSequence"),Sr(e,w,"lineSuffix")(A))}function w(A){return A===null||Dn(A)?(e.exit("setextHeadingLine"),t(A)):n(A)}}const xX={tokenize:bX};function bX(e){const t=this,n=e.attempt(_y,r,e.attempt(this.parser.constructs.flowInitial,a,Sr(e,e.attempt(this.parser.constructs.flow,a,e.attempt(AZ,a)),"linePrefix")));return n;function r(c){if(c===null){e.consume(c);return}return e.enter("lineEndingBlank"),e.consume(c),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(c){if(c===null){e.consume(c);return}return e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const wX={resolveAll:M4()},EX=A4("string"),CX=A4("text");function A4(e){return{tokenize:t,resolveAll:M4(e==="text"?SX:void 0)};function t(n){const r=this,a=this.parser.constructs[e],c=n.attempt(a,h,o);return h;function h(A){return w(A)?c(A):o(A)}function o(A){if(A===null){n.consume(A);return}return n.enter("data"),n.consume(A),m}function m(A){return w(A)?(n.exit("data"),c(A)):(n.consume(A),m)}function w(A){if(A===null)return!0;const P=a[A];let O=-1;if(P)for(;++O<P.length;){const B=P[O];if(!B.previous||B.previous.call(r,r.previous))return!0}return!1}}}function M4(e){return t;function t(n,r){let a=-1,c;for(;++a<=n.length;)c===void 0?n[a]&&n[a][1].type==="data"&&(c=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==c+2&&(n[c][1].end=n[a-1][1].end,n.splice(c+2,a-c-2),a=c+2),c=void 0);return e?e(n,r):n}}function SX(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let c=a.length,h=-1,o=0,m;for(;c--;){const w=a[c];if(typeof w=="string"){for(h=w.length;w.charCodeAt(h-1)===32;)o++,h--;if(h)break;h=-1}else if(w===-2)m=!0,o++;else if(w!==-1){c++;break}}if(o){const w={type:n===e.length||m||o<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-o,offset:r.end.offset-o,_index:r.start._index+c,_bufferIndex:c?h:r.start._bufferIndex+h},end:Object.assign({},r.end)};r.end=Object.assign({},w.start),r.start.offset===r.end.offset?Object.assign(r,w):(e.splice(n,0,["enter",w,t],["exit",w,t]),n+=2)}n++}return e}function TX(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},c=[];let h=[],o=[];const m={consume:W,enter:F,exit:z,attempt:D(S),check:D(b),interrupt:D(b,{interrupt:!0})},w={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:B,sliceSerialize:O,now:N,defineSkip:k,write:P};let A=t.tokenize.call(w,m);return t.resolveAll&&c.push(t),w;function P(ee){return h=Ya(h,ee),V(),h[h.length-1]!==null?[]:(Y(t,0),w.events=W0(c,w.events,w),w.events)}function O(ee,de){return AX(B(ee),de)}function B(ee){return kX(h,ee)}function N(){return Object.assign({},r)}function k(ee){a[ee.line]=ee.column,ae()}function V(){let ee;for(;r._index<h.length;){const de=h[r._index];if(typeof de=="string")for(ee=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===ee&&r._bufferIndex<de.length;)U(de.charCodeAt(r._bufferIndex));else U(de)}}function U(ee){A=A(ee)}function W(ee){Dn(ee)?(r.line++,r.column=1,r.offset+=ee===-3?2:1,ae()):ee!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===h[r._index].length&&(r._bufferIndex=-1,r._index++)),w.previous=ee}function F(ee,de){const ke=de||{};return ke.type=ee,ke.start=N(),w.events.push(["enter",ke,w]),o.push(ke),ke}function z(ee){const de=o.pop();return de.end=N(),w.events.push(["exit",de,w]),de}function S(ee,de){Y(ee,de.from)}function b(ee,de){de.restore()}function D(ee,de){return ke;function ke(Oe,Le,Ee){let ct,Ze,rt,tt;return Array.isArray(Oe)?be(Oe):"tokenize"in Oe?be([Oe]):xe(Oe);function xe(en){return ln;function ln(mn){const fn=mn!==null&&en[mn],An=mn!==null&&en.null,ze=[...Array.isArray(fn)?fn:fn?[fn]:[],...Array.isArray(An)?An:An?[An]:[]];return be(ze)(mn)}}function be(en){return ct=en,Ze=0,en.length===0?Ee:nn(en[Ze])}function nn(en){return ln;function ln(mn){return tt=re(),rt=en,en.partial||(w.currentConstruct=en),en.name&&w.parser.constructs.disable.null.includes(en.name)?an():en.tokenize.call(de?Object.assign(Object.create(w),de):w,m,$t,an)(mn)}}function $t(en){return ee(rt,tt),Le}function an(en){return tt.restore(),++Ze<ct.length?nn(ct[Ze]):Ee}}}function Y(ee,de){ee.resolveAll&&!c.includes(ee)&&c.push(ee),ee.resolve&&Da(w.events,de,w.events.length-de,ee.resolve(w.events.slice(de),w)),ee.resolveTo&&(w.events=ee.resolveTo(w.events,w))}function re(){const ee=N(),de=w.previous,ke=w.currentConstruct,Oe=w.events.length,Le=Array.from(o);return{restore:Ee,from:Oe};function Ee(){r=ee,w.previous=de,w.currentConstruct=ke,w.events.length=Oe,o=Le,ae()}}function ae(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function kX(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,c=t.end._bufferIndex;let h;return n===a?h=[e[n].slice(r,c)]:(h=e.slice(n,a),r>-1&&(h[0]=h[0].slice(r)),c>0&&h.push(e[a].slice(0,c))),h}function AX(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const c=e[n];let h;if(typeof c=="string")h=c;else switch(c){case-5:{h="\r";break}case-4:{h=`
`;break}case-3:{h=`\r
`;break}case-2:{h=t?" ":"	";break}case-1:{if(!t&&a)continue;h=" ";break}default:h=String.fromCharCode(c)}a=c===-2,r.push(h)}return r.join("")}const MX={[42]:la,[43]:la,[45]:la,[48]:la,[49]:la,[50]:la,[51]:la,[52]:la,[53]:la,[54]:la,[55]:la,[56]:la,[57]:la,[62]:b4},IX={[91]:RZ},PX={[-2]:tE,[-1]:tE,[32]:tE},DX={[35]:NZ,[42]:ox,[45]:[oD,ox],[60]:VZ,[61]:oD,[95]:ox,[96]:rD,[126]:rD},RX={[38]:E4,[92]:w4},LX={[-5]:nE,[-4]:nE,[-3]:nE,[33]:oX,[38]:E4,[42]:XC,[60]:[dZ,ZZ],[91]:sX,[92]:[BZ,w4],[93]:YT,[95]:XC,[96]:EZ},OX={null:[XC,wX]},zX={null:[42,95]},BX={null:[]};var FX=Object.freeze(Object.defineProperty({__proto__:null,document:MX,contentInitial:IX,flowInitial:PX,flow:DX,string:RX,text:LX,insideSpan:OX,attentionMarkers:zX,disable:BX},Symbol.toStringTag,{value:"Module"}));function NX(e={}){const t=x4([FX].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(iZ),document:r(aZ),flow:r(xX),string:r(EX),text:r(CX)};return n;function r(a){return c;function c(h){return TX(n,a,h)}}}const aD=/[\0\t\n\r]/g;function $X(){let e=1,t="",n=!0,r;return a;function a(c,h,o){const m=[];let w,A,P,O,B;for(c=t+c.toString(h),P=0,t="",n&&(c.charCodeAt(0)===65279&&P++,n=void 0);P<c.length;){if(aD.lastIndex=P,w=aD.exec(c),O=w&&w.index!==void 0?w.index:c.length,B=c.charCodeAt(O),!w){t=c.slice(P);break}if(B===10&&P===O&&r)m.push(-3),r=void 0;else switch(r&&(m.push(-5),r=void 0),P<O&&(m.push(c.slice(P,O)),e+=O-P),B){case 0:{m.push(65533),e++;break}case 9:{for(A=Math.ceil(e/4)*4,m.push(-2);e++<A;)m.push(-1);break}case 10:{m.push(-4),e=1;break}default:r=!0,e=1}P=O+1}return o&&(r&&m.push(-5),t&&m.push(t),m.push(null)),m}}function UX(e){for(;!C4(e););return e}function I4(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"\uFFFD":String.fromCharCode(n)}const jX=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function P4(e){return e.replace(jX,VX)}function VX(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),c=a===120||a===88;return I4(n.slice(c?2:1),c?16:10)}return KT(n)||e}const KC={}.hasOwnProperty,HX=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),WX(n)(UX(NX(n).document().write($X()(e,t,!0))))};function WX(e={}){const t=D4({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:m(Mn),autolinkProtocol:de,autolinkEmail:de,atxHeading:m(Pt),blockQuote:m(Xe),characterEscape:de,characterReference:de,codeFenced:m(ft),codeFencedFenceInfo:w,codeFencedFenceMeta:w,codeIndented:m(ft,w),codeText:m(Et,w),codeTextData:de,data:de,codeFlowValue:de,definition:m(_t),definitionDestinationString:w,definitionLabelString:w,definitionTitleString:w,emphasis:m(ht),hardBreakEscape:m(_n),hardBreakTrailing:m(_n),htmlFlow:m(On,w),htmlFlowData:de,htmlText:m(On,w),htmlTextData:de,image:m(Ln),label:w,link:m(Mn),listItem:m(Pe),listItemValue:k,listOrdered:m(Zn,N),listUnordered:m(Zn),paragraph:m(Je),reference:en,referenceString:w,resourceDestinationString:w,resourceTitleString:w,setextHeading:m(Pt),strong:m(ie),thematicBreak:m(De)},exit:{atxHeading:P(),atxHeadingSequence:Y,autolink:P(),autolinkEmail:ze,autolinkProtocol:An,blockQuote:P(),characterEscapeValue:ke,characterReferenceMarkerHexadecimal:mn,characterReferenceMarkerNumeric:mn,characterReferenceValue:fn,codeFenced:P(F),codeFencedFence:W,codeFencedFenceInfo:V,codeFencedFenceMeta:U,codeFlowValue:ke,codeIndented:P(z),codeText:P(Ze),codeTextData:ke,data:ke,definition:P(),definitionDestinationString:D,definitionLabelString:S,definitionTitleString:b,emphasis:P(),hardBreakEscape:P(Le),hardBreakTrailing:P(Le),htmlFlow:P(Ee),htmlFlowData:ke,htmlText:P(ct),htmlTextData:ke,image:P(tt),label:be,labelText:xe,lineEnding:Oe,link:P(rt),listItem:P(),listOrdered:P(),listUnordered:P(),paragraph:P(),referenceString:ln,resourceDestinationString:nn,resourceTitleString:$t,resource:an,setextHeading:P(ee),setextHeadingLineSequence:ae,setextHeadingText:re,strong:P(),thematicBreak:P()}},e.mdastExtensions||[]),n={};return r;function r(ye){let Se={type:"root",children:[]};const vt=[Se],Nt=[],Xt=[],Bn={stack:vt,tokenStack:Nt,config:t,enter:A,exit:O,buffer:w,resume:B,setData:c,getData:h};let kn=-1;for(;++kn<ye.length;)if(ye[kn][1].type==="listOrdered"||ye[kn][1].type==="listUnordered")if(ye[kn][0]==="enter")Xt.push(kn);else{const jt=Xt.pop();kn=a(ye,jt,kn)}for(kn=-1;++kn<ye.length;){const jt=t[ye[kn][0]];KC.call(jt,ye[kn][1].type)&&jt[ye[kn][1].type].call(Object.assign({sliceSerialize:ye[kn][2].sliceSerialize},Bn),ye[kn][1])}if(Nt.length>0){const jt=Nt[Nt.length-1];(jt[1]||sD).call(Bn,void 0,jt[0])}for(Se.position={start:o(ye.length>0?ye[0][1].start:{line:1,column:1,offset:0}),end:o(ye.length>0?ye[ye.length-2][1].end:{line:1,column:1,offset:0})},kn=-1;++kn<t.transforms.length;)Se=t.transforms[kn](Se)||Se;return Se}function a(ye,Se,vt){let Nt=Se-1,Xt=-1,Bn=!1,kn,jt,Rn,dr;for(;++Nt<=vt;){const Fn=ye[Nt];if(Fn[1].type==="listUnordered"||Fn[1].type==="listOrdered"||Fn[1].type==="blockQuote"?(Fn[0]==="enter"?Xt++:Xt--,dr=void 0):Fn[1].type==="lineEndingBlank"?Fn[0]==="enter"&&(kn&&!dr&&!Xt&&!Rn&&(Rn=Nt),dr=void 0):Fn[1].type==="linePrefix"||Fn[1].type==="listItemValue"||Fn[1].type==="listItemMarker"||Fn[1].type==="listItemPrefix"||Fn[1].type==="listItemPrefixWhitespace"||(dr=void 0),!Xt&&Fn[0]==="enter"&&Fn[1].type==="listItemPrefix"||Xt===-1&&Fn[0]==="exit"&&(Fn[1].type==="listUnordered"||Fn[1].type==="listOrdered")){if(kn){let Ar=Nt;for(jt=void 0;Ar--;){const hr=ye[Ar];if(hr[1].type==="lineEnding"||hr[1].type==="lineEndingBlank"){if(hr[0]==="exit")continue;jt&&(ye[jt][1].type="lineEndingBlank",Bn=!0),hr[1].type="lineEnding",jt=Ar}else if(!(hr[1].type==="linePrefix"||hr[1].type==="blockQuotePrefix"||hr[1].type==="blockQuotePrefixWhitespace"||hr[1].type==="blockQuoteMarker"||hr[1].type==="listItemIndent"))break}Rn&&(!jt||Rn<jt)&&(kn._spread=!0),kn.end=Object.assign({},jt?ye[jt][1].start:Fn[1].end),ye.splice(jt||Nt,0,["exit",kn,Fn[2]]),Nt++,vt++}Fn[1].type==="listItemPrefix"&&(kn={type:"listItem",_spread:!1,start:Object.assign({},Fn[1].start)},ye.splice(Nt,0,["enter",kn,Fn[2]]),Nt++,vt++,Rn=void 0,dr=!0)}}return ye[Se][1]._spread=Bn,vt}function c(ye,Se){n[ye]=Se}function h(ye){return n[ye]}function o(ye){return{line:ye.line,column:ye.column,offset:ye.offset}}function m(ye,Se){return vt;function vt(Nt){A.call(this,ye(Nt),Nt),Se&&Se.call(this,Nt)}}function w(){this.stack.push({type:"fragment",children:[]})}function A(ye,Se,vt){return this.stack[this.stack.length-1].children.push(ye),this.stack.push(ye),this.tokenStack.push([Se,vt]),ye.position={start:o(Se.start)},ye}function P(ye){return Se;function Se(vt){ye&&ye.call(this,vt),O.call(this,vt)}}function O(ye,Se){const vt=this.stack.pop(),Nt=this.tokenStack.pop();if(Nt)Nt[0].type!==ye.type&&(Se?Se.call(this,ye,Nt[0]):(Nt[1]||sD).call(this,ye,Nt[0]));else throw new Error("Cannot close `"+ye.type+"` ("+_g({start:ye.start,end:ye.end})+"): it\u2019s not open");return vt.position.end=o(ye.end),vt}function B(){return Jq(this.stack.pop())}function N(){c("expectingFirstListItemValue",!0)}function k(ye){if(h("expectingFirstListItemValue")){const Se=this.stack[this.stack.length-2];Se.start=Number.parseInt(this.sliceSerialize(ye),10),c("expectingFirstListItemValue")}}function V(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.lang=ye}function U(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.meta=ye}function W(){h("flowCodeInside")||(this.buffer(),c("flowCodeInside",!0))}function F(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ye.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),c("flowCodeInside")}function z(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ye.replace(/(\r?\n|\r)$/g,"")}function S(ye){const Se=this.resume(),vt=this.stack[this.stack.length-1];vt.label=Se,vt.identifier=Os(this.sliceSerialize(ye)).toLowerCase()}function b(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ye}function D(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ye}function Y(ye){const Se=this.stack[this.stack.length-1];if(!Se.depth){const vt=this.sliceSerialize(ye).length;Se.depth=vt}}function re(){c("setextHeadingSlurpLineEnding",!0)}function ae(ye){const Se=this.stack[this.stack.length-1];Se.depth=this.sliceSerialize(ye).charCodeAt(0)===61?1:2}function ee(){c("setextHeadingSlurpLineEnding")}function de(ye){const Se=this.stack[this.stack.length-1];let vt=Se.children[Se.children.length-1];(!vt||vt.type!=="text")&&(vt=ue(),vt.position={start:o(ye.start)},Se.children.push(vt)),this.stack.push(vt)}function ke(ye){const Se=this.stack.pop();Se.value+=this.sliceSerialize(ye),Se.position.end=o(ye.end)}function Oe(ye){const Se=this.stack[this.stack.length-1];if(h("atHardBreak")){const vt=Se.children[Se.children.length-1];vt.position.end=o(ye.end),c("atHardBreak");return}!h("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Se.type)&&(de.call(this,ye),ke.call(this,ye))}function Le(){c("atHardBreak",!0)}function Ee(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ye}function ct(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ye}function Ze(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.value=ye}function rt(){const ye=this.stack[this.stack.length-1];h("inReference")?(ye.type+="Reference",ye.referenceType=h("referenceType")||"shortcut",delete ye.url,delete ye.title):(delete ye.identifier,delete ye.label),c("referenceType")}function tt(){const ye=this.stack[this.stack.length-1];h("inReference")?(ye.type+="Reference",ye.referenceType=h("referenceType")||"shortcut",delete ye.url,delete ye.title):(delete ye.identifier,delete ye.label),c("referenceType")}function xe(ye){const Se=this.stack[this.stack.length-2],vt=this.sliceSerialize(ye);Se.label=P4(vt),Se.identifier=Os(vt).toLowerCase()}function be(){const ye=this.stack[this.stack.length-1],Se=this.resume(),vt=this.stack[this.stack.length-1];c("inReference",!0),vt.type==="link"?vt.children=ye.children:vt.alt=Se}function nn(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.url=ye}function $t(){const ye=this.resume(),Se=this.stack[this.stack.length-1];Se.title=ye}function an(){c("inReference")}function en(){c("referenceType","collapsed")}function ln(ye){const Se=this.resume(),vt=this.stack[this.stack.length-1];vt.label=Se,vt.identifier=Os(this.sliceSerialize(ye)).toLowerCase(),c("referenceType","full")}function mn(ye){c("characterReferenceType",ye.type)}function fn(ye){const Se=this.sliceSerialize(ye),vt=h("characterReferenceType");let Nt;vt?(Nt=I4(Se,vt==="characterReferenceMarkerNumeric"?10:16),c("characterReferenceType")):Nt=KT(Se);const Xt=this.stack.pop();Xt.value+=Nt,Xt.position.end=o(ye.end)}function An(ye){ke.call(this,ye);const Se=this.stack[this.stack.length-1];Se.url=this.sliceSerialize(ye)}function ze(ye){ke.call(this,ye);const Se=this.stack[this.stack.length-1];Se.url="mailto:"+this.sliceSerialize(ye)}function Xe(){return{type:"blockquote",children:[]}}function ft(){return{type:"code",lang:null,meta:null,value:""}}function Et(){return{type:"inlineCode",value:""}}function _t(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ht(){return{type:"emphasis",children:[]}}function Pt(){return{type:"heading",depth:void 0,children:[]}}function _n(){return{type:"break"}}function On(){return{type:"html",value:""}}function Ln(){return{type:"image",title:null,url:"",alt:null}}function Mn(){return{type:"link",title:null,url:"",children:[]}}function Zn(ye){return{type:"list",ordered:ye.type==="listOrdered",start:null,spread:ye._spread,children:[]}}function Pe(ye){return{type:"listItem",spread:ye._spread,checked:null,children:[]}}function Je(){return{type:"paragraph",children:[]}}function ie(){return{type:"strong",children:[]}}function ue(){return{type:"text",value:""}}function De(){return{type:"thematicBreak"}}}function D4(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?D4(e,r):GX(e,r)}return e}function GX(e,t){let n;for(n in t)if(KC.call(t,n)){const r=n==="canContainEols"||n==="transforms",c=(KC.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),h=t[n];h&&(r?e[n]=[...c,...h]:Object.assign(c,h))}}function sD(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+_g({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+_g({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+_g({start:t.start,end:t.end})+") is still open")}function qX(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return HX(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var io=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const ax={}.hasOwnProperty;function ZX(e,t){const n=t.data||{};return"value"in t&&!(ax.call(n,"hName")||ax.call(n,"hProperties")||ax.call(n,"hChildren"))?e.augment(t,io("text",t.value)):e(t,"div",Ho(e,t))}function R4(e,t,n){const r=t&&t.type;let a;if(!r)throw new Error("Expected node, got `"+t+"`");return ax.call(e.handlers,r)?a=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?a=XX:a=e.unknownHandler,(typeof a=="function"?a:ZX)(e,t,n)}function XX(e,t){return"children"in t?{...t,children:Ho(e,t)}:t}function Ho(e,t){const n=[];if("children"in t){const r=t.children;let a=-1;for(;++a<r.length;){const c=R4(e,r[a],t);if(c){if(a&&r[a-1].type==="break"&&(!Array.isArray(c)&&c.type==="text"&&(c.value=c.value.replace(/^\s+/,"")),!Array.isArray(c)&&c.type==="element")){const h=c.children[0];h&&h.type==="text"&&(h.value=h.value.replace(/^\s+/,""))}Array.isArray(c)?n.push(...c):n.push(c)}}}return n}const JT=function(e){if(e==null)return QX;if(typeof e=="string")return JX(e);if(typeof e=="object")return Array.isArray(e)?KX(e):YX(e);if(typeof e=="function")return G0(e);throw new Error("Expected function, string, or object as test")};function KX(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=JT(e[n]);return G0(r);function r(...a){let c=-1;for(;++c<t.length;)if(t[c].call(this,...a))return!0;return!1}}function YX(e){return G0(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function JX(e){return G0(t);function t(n){return n&&n.type===e}}function G0(e){return t;function t(...n){return Boolean(e.call(this,...n))}}function QX(){return!0}const eK=!0,tK="skip",lD=!1,L4=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const a=JT(t),c=r?-1:1;h(e,null,[])();function h(o,m,w){const A=typeof o=="object"&&o!==null?o:{};let P;return typeof A.type=="string"&&(P=typeof A.tagName=="string"?A.tagName:typeof A.name=="string"?A.name:void 0,Object.defineProperty(O,"name",{value:"node ("+(A.type+(P?"<"+P+">":""))+")"})),O;function O(){let B=[],N,k,V;if((!t||a(o,m,w[w.length-1]||null))&&(B=nK(n(o,w)),B[0]===lD))return B;if(o.children&&B[0]!==tK)for(k=(r?o.children.length:-1)+c,V=w.concat(o);k>-1&&k<o.children.length;){if(N=h(o.children[k],k,V)(),N[0]===lD)return N;k=typeof N[1]=="number"?N[1]:k+c}return B}}};function nK(e){return Array.isArray(e)?e:typeof e=="number"?[eK,e]:[e]}const QT=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),L4(e,t,a,r);function a(c,h){const o=h[h.length-1];return n(c,o?o.children.indexOf(c):null,o)}},O4=B4("start"),z4=B4("end");function B4(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function rK(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const uD={}.hasOwnProperty;function iK(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return QT(e,"definition",r=>{const a=cD(r.identifier);a&&!uD.call(t,a)&&(t[a]=r)}),n;function n(r){const a=cD(r);return a&&uD.call(t,a)?t[a]:null}}function cD(e){return String(e||"").toUpperCase()}const oK={'"':"quot","&":"amp","<":"lt",">":"gt"};function aK(e){return e.replace(/["&<>]/g,t);function t(n){return"&"+oK[n]+";"}}function F4(e,t){const n=aK(sK(e||""));if(!t)return n;const r=n.indexOf(":"),a=n.indexOf("?"),c=n.indexOf("#"),h=n.indexOf("/");return r<0||h>-1&&r>h||a>-1&&r>a||c>-1&&r>c||t.test(n.slice(0,r))?n:""}function sK(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const c=e.charCodeAt(n);let h="";if(c===37&&Ko(e.charCodeAt(n+1))&&Ko(e.charCodeAt(n+2)))a=2;else if(c<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(c))||(h=String.fromCharCode(c));else if(c>55295&&c<57344){const o=e.charCodeAt(n+1);c<56320&&o>56319&&o<57344?(h=String.fromCharCode(c,o),a=1):h="\uFFFD"}else h=String.fromCharCode(c);h&&(t.push(e.slice(r,n),encodeURIComponent(h)),r=n+a+1,h=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function $l(e,t){const n=[];let r=-1;for(t&&n.push(io("text",`
`));++r<e.length;)r&&n.push(io("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(io("text",`
`)),n}function lK(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const a=Ho(e,r),c=String(r.identifier),h=F4(c.toLowerCase());let o=0;const m=[];for(;++o<=e.footnoteCounts[c];){const P={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+h+(o>1?"-"+o:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:"\u21A9"}]};o>1&&P.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(o)}]}),m.length>0&&m.push({type:"text",value:" "}),m.push(P)}const w=a[a.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const P=w.children[w.children.length-1];P&&P.type==="text"?P.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...m)}else a.push(...m);const A={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+h},children:$l(a,!0)};r.position&&(A.position=r.position),n.push(A)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[io("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:$l(n,!0)},{type:"text",value:`
`}]}}function uK(e,t){return e(t,"blockquote",$l(Ho(e,t),!0))}function cK(e,t){return[e(t,"br"),io("text",`
`)]}function dK(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),a={};r&&(a.className=["language-"+r]);const c=e(t,"code",a,[io("text",n)]);return t.meta&&(c.data={meta:t.meta}),e(t.position,"pre",[c])}function hK(e,t){return e(t,"del",Ho(e,t))}function pK(e,t){return e(t,"em",Ho(e,t))}function N4(e,t){const n=String(t.identifier),r=F4(n.toLowerCase()),a=e.footnoteOrder.indexOf(n);let c;a===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,c=e.footnoteOrder.length):(e.footnoteCounts[n]++,c=a+1);const h=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[io("text",String(c))])])}function fK(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const a=String(r);return n[a]={type:"footnoteDefinition",identifier:a,children:[{type:"paragraph",children:t.children}],position:t.position},N4(e,{type:"footnoteReference",identifier:a,position:t.position})}function mK(e,t){return e(t,"h"+t.depth,Ho(e,t))}function gK(e,t){return e.dangerous?e.augment(t,io("raw",t.value)):null}var dD={};function yK(e){var t,n,r=dD[e];if(r)return r;for(r=dD[e]=[],t=0;t<128;t++)n=String.fromCharCode(t),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)r[e.charCodeAt(t)]=e[t];return r}function q0(e,t,n){var r,a,c,h,o,m="";for(typeof t!="string"&&(n=t,t=q0.defaultChars),typeof n=="undefined"&&(n=!0),o=yK(t),r=0,a=e.length;r<a;r++){if(c=e.charCodeAt(r),n&&c===37&&r+2<a&&/^[0-9a-f]{2}$/i.test(e.slice(r+1,r+3))){m+=e.slice(r,r+3),r+=2;continue}if(c<128){m+=o[c];continue}if(c>=55296&&c<=57343){if(c>=55296&&c<=56319&&r+1<a&&(h=e.charCodeAt(r+1),h>=56320&&h<=57343)){m+=encodeURIComponent(e[r]+e[r+1]),r++;continue}m+="%EF%BF%BD";continue}m+=encodeURIComponent(e[r])}return m}q0.defaultChars=";/?:@&=+$,-_.!~*'()#";q0.componentChars="-_.!~*'()";var Z0=q0;function $4(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return io("text","!["+t.alt+r);const a=Ho(e,t),c=a[0];c&&c.type==="text"?c.value="["+c.value:a.unshift(io("text","["));const h=a[a.length-1];return h&&h.type==="text"?h.value+=r:a.push(io("text",r)),a}function vK(e,t){const n=e.definition(t.identifier);if(!n)return $4(e,t);const r={src:Z0(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function _K(e,t){const n={src:Z0(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function xK(e,t){return e(t,"code",[io("text",t.value.replace(/\r?\n|\r/g," "))])}function bK(e,t){const n=e.definition(t.identifier);if(!n)return $4(e,t);const r={href:Z0(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,Ho(e,t))}function wK(e,t){const n={href:Z0(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,Ho(e,t))}function EK(e,t,n){const r=Ho(e,t),a=n?CK(n):U4(t),c={},h=[];if(typeof t.checked=="boolean"){let w;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?w=r[0]:(w=e(null,"p",[]),r.unshift(w)),w.children.length>0&&w.children.unshift(io("text"," ")),w.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),c.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const w=r[o];(a||o!==0||w.type!=="element"||w.tagName!=="p")&&h.push(io("text",`
`)),w.type==="element"&&w.tagName==="p"&&!a?h.push(...w.children):h.push(w)}const m=r[r.length-1];return m&&(a||!("tagName"in m)||m.tagName!=="p")&&h.push(io("text",`
`)),e(t,"li",c,h)}function CK(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=U4(n[r]);return Boolean(t)}function U4(e){const t=e.spread;return t==null?e.children.length>1:t}function SK(e,t){const n={},r=t.ordered?"ol":"ul",a=Ho(e,t);let c=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++c<a.length;){const h=a[c];if(h.type==="element"&&h.tagName==="li"&&h.properties&&Array.isArray(h.properties.className)&&h.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,$l(a,!0))}function TK(e,t){return e(t,"p",Ho(e,t))}function kK(e,t){return e.augment(t,io("root",$l(Ho(e,t))))}function AK(e,t){return e(t,"strong",Ho(e,t))}function MK(e,t){const n=t.children;let r=-1;const a=t.align||[],c=[];for(;++r<n.length;){const h=n[r].children,o=r===0?"th":"td",m=[];let w=-1;const A=t.align?a.length:h.length;for(;++w<A;){const P=h[w];m.push(e(P,o,{align:a[w]},P?Ho(e,P):[]))}c[r]=e(n[r],"tr",$l(m,!0))}return e(t,"table",$l([e(c[0].position,"thead",$l([c[0]],!0))].concat(c[1]?e({start:O4(c[1]),end:z4(c[c.length-1])},"tbody",$l(c.slice(1),!0)):[]),!0))}const hD=9,pD=32;function IK(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const c=[];for(;r;)c.push(fD(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return c.push(fD(t.slice(a),a>0,!1)),c.join("")}function fD(e,t,n){let r=0,a=e.length;if(t){let c=e.codePointAt(r);for(;c===hD||c===pD;)r++,c=e.codePointAt(r)}if(n){let c=e.codePointAt(a-1);for(;c===hD||c===pD;)a--,c=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function PK(e,t){return e.augment(t,io("text",IK(String(t.value))))}function DK(e,t){return e(t,"hr")}const RK={blockquote:uK,break:cK,code:dK,delete:hK,emphasis:pK,footnoteReference:N4,footnote:fK,heading:mK,html:gK,imageReference:vK,image:_K,inlineCode:xK,linkReference:bK,link:wK,listItem:EK,list:SK,paragraph:TK,root:kK,strong:AK,table:MK,text:PK,thematicBreak:DK,toml:P_,yaml:P_,definition:P_,footnoteDefinition:P_};function P_(){return null}const LK={}.hasOwnProperty;function OK(e,t){const n=t||{},r=n.allowDangerousHtml||!1,a={};return h.dangerous=r,h.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,h.footnoteLabel=n.footnoteLabel||"Footnotes",h.footnoteLabelTagName=n.footnoteLabelTagName||"h2",h.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},h.footnoteBackLabel=n.footnoteBackLabel||"Back to content",h.definition=iK(e),h.footnoteById=a,h.footnoteOrder=[],h.footnoteCounts={},h.augment=c,h.handlers={...RK,...n.handlers},h.unknownHandler=n.unknownHandler,h.passThrough=n.passThrough,QT(e,"footnoteDefinition",o=>{const m=String(o.identifier).toUpperCase();LK.call(a,m)||(a[m]=o)}),h;function c(o,m){if(o&&"data"in o&&o.data){const w=o.data;w.hName&&(m.type!=="element"&&(m={type:"element",tagName:"",properties:{},children:[]}),m.tagName=w.hName),m.type==="element"&&w.hProperties&&(m.properties={...m.properties,...w.hProperties}),"children"in m&&m.children&&w.hChildren&&(m.children=w.hChildren)}if(o){const w="type"in o?o:{position:o};rK(w)||(m.position={start:O4(w),end:z4(w)})}return m}function h(o,m,w,A){return Array.isArray(w)&&(A=w,w={}),c(o,{type:"element",tagName:m,properties:w||{},children:A||[]})}}function j4(e,t){const n=OK(e,t),r=R4(n,e,null),a=lK(n);return a&&r.children.push(io("text",`
`),a),Array.isArray(r)?{type:"root",children:r}:r}const zK=function(e,t){return e&&"run"in e?FK(e,t):NK(e||t)};var BK=zK;function FK(e,t){return(n,r,a)=>{e.run(j4(n,t),r,c=>{a(c)})}}function NK(e){return t=>j4(t,e)}var V4={exports:{}},$K="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UK=$K,jK=UK;function H4(){}function W4(){}W4.resetWarningCache=H4;var VK=function(){function e(r,a,c,h,o,m){if(m!==jK){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:W4,resetWarningCache:H4};return n.PropTypes=n,n};V4.exports=VK();var qn=V4.exports;class xy{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}xy.prototype.property={};xy.prototype.normal={};xy.prototype.space=null;function G4(e,t){const n={},r={};let a=-1;for(;++a<e.length;)Object.assign(n,e[a].property),Object.assign(r,e[a].normal);return new xy(n,r,t)}function YC(e){return e.toLowerCase()}class us{constructor(t,n){this.property=t,this.attribute=n}}us.prototype.space=null;us.prototype.boolean=!1;us.prototype.booleanish=!1;us.prototype.overloadedBoolean=!1;us.prototype.number=!1;us.prototype.commaSeparated=!1;us.prototype.spaceSeparated=!1;us.prototype.commaOrSpaceSeparated=!1;us.prototype.mustUseProperty=!1;us.prototype.defined=!1;let HK=0;const er=Kd(),Hi=Kd(),q4=Kd(),Zt=Kd(),di=Kd(),Lp=Kd(),Ca=Kd();function Kd(){return 2**++HK}var JC=Object.freeze(Object.defineProperty({__proto__:null,boolean:er,booleanish:Hi,overloadedBoolean:q4,number:Zt,spaceSeparated:di,commaSeparated:Lp,commaOrSpaceSeparated:Ca},Symbol.toStringTag,{value:"Module"}));const rE=Object.keys(JC);class ek extends us{constructor(t,n,r,a){let c=-1;if(super(t,n),mD(this,"space",a),typeof r=="number")for(;++c<rE.length;){const h=rE[c];mD(this,rE[c],(r&JC[h])===JC[h])}}}ek.prototype.defined=!0;function mD(e,t,n){n&&(e[t]=n)}const WK={}.hasOwnProperty;function df(e){const t={},n={};let r;for(r in e.properties)if(WK.call(e.properties,r)){const a=e.properties[r],c=new ek(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(c.mustUseProperty=!0),t[r]=c,n[YC(r)]=r,n[YC(c.attribute)]=r}return new xy(t,n,e.space)}const Z4=df({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),X4=df({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function K4(e,t){return t in e?e[t]:t}function Y4(e,t){return K4(e,t.toLowerCase())}const J4=df({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Y4,properties:{xmlns:null,xmlnsXLink:null}}),Q4=df({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Hi,ariaAutoComplete:null,ariaBusy:Hi,ariaChecked:Hi,ariaColCount:Zt,ariaColIndex:Zt,ariaColSpan:Zt,ariaControls:di,ariaCurrent:null,ariaDescribedBy:di,ariaDetails:null,ariaDisabled:Hi,ariaDropEffect:di,ariaErrorMessage:null,ariaExpanded:Hi,ariaFlowTo:di,ariaGrabbed:Hi,ariaHasPopup:null,ariaHidden:Hi,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:di,ariaLevel:Zt,ariaLive:null,ariaModal:Hi,ariaMultiLine:Hi,ariaMultiSelectable:Hi,ariaOrientation:null,ariaOwns:di,ariaPlaceholder:null,ariaPosInSet:Zt,ariaPressed:Hi,ariaReadOnly:Hi,ariaRelevant:null,ariaRequired:Hi,ariaRoleDescription:di,ariaRowCount:Zt,ariaRowIndex:Zt,ariaRowSpan:Zt,ariaSelected:Hi,ariaSetSize:Zt,ariaSort:null,ariaValueMax:Zt,ariaValueMin:Zt,ariaValueNow:Zt,ariaValueText:null,role:null}}),GK=df({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Y4,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Lp,acceptCharset:di,accessKey:di,action:null,allow:null,allowFullScreen:er,allowPaymentRequest:er,allowUserMedia:er,alt:null,as:null,async:er,autoCapitalize:null,autoComplete:di,autoFocus:er,autoPlay:er,capture:er,charSet:null,checked:er,cite:null,className:di,cols:Zt,colSpan:null,content:null,contentEditable:Hi,controls:er,controlsList:di,coords:Zt|Lp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:er,defer:er,dir:null,dirName:null,disabled:er,download:q4,draggable:Hi,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:er,formTarget:null,headers:di,height:Zt,hidden:er,high:Zt,href:null,hrefLang:null,htmlFor:di,httpEquiv:di,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:er,itemId:null,itemProp:di,itemRef:di,itemScope:er,itemType:di,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:er,low:Zt,manifest:null,max:null,maxLength:Zt,media:null,method:null,min:null,minLength:Zt,multiple:er,muted:er,name:null,nonce:null,noModule:er,noValidate:er,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:er,optimum:Zt,pattern:null,ping:di,placeholder:null,playsInline:er,poster:null,preload:null,readOnly:er,referrerPolicy:null,rel:di,required:er,reversed:er,rows:Zt,rowSpan:Zt,sandbox:di,scope:null,scoped:er,seamless:er,selected:er,shape:null,size:Zt,sizes:null,slot:null,span:Zt,spellCheck:Hi,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Zt,step:null,style:null,tabIndex:Zt,target:null,title:null,translate:null,type:null,typeMustMatch:er,useMap:null,value:Hi,width:Zt,wrap:null,align:null,aLink:null,archive:di,axis:null,background:null,bgColor:null,border:Zt,borderColor:null,bottomMargin:Zt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:er,declare:er,event:null,face:null,frame:null,frameBorder:null,hSpace:Zt,leftMargin:Zt,link:null,longDesc:null,lowSrc:null,marginHeight:Zt,marginWidth:Zt,noResize:er,noHref:er,noShade:er,noWrap:er,object:null,profile:null,prompt:null,rev:null,rightMargin:Zt,rules:null,scheme:null,scrolling:Hi,standby:null,summary:null,text:null,topMargin:Zt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Zt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:er,disableRemotePlayback:er,prefix:null,property:null,results:Zt,security:null,unselectable:null}}),qK=df({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:K4,properties:{about:Ca,accentHeight:Zt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Zt,amplitude:Zt,arabicForm:null,ascent:Zt,attributeName:null,attributeType:null,azimuth:Zt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Zt,by:null,calcMode:null,capHeight:Zt,className:di,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Zt,diffuseConstant:Zt,direction:null,display:null,dur:null,divisor:Zt,dominantBaseline:null,download:er,dx:null,dy:null,edgeMode:null,editable:null,elevation:Zt,enableBackground:null,end:null,event:null,exponent:Zt,externalResourcesRequired:null,fill:null,fillOpacity:Zt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Lp,g2:Lp,glyphName:Lp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Zt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Zt,horizOriginX:Zt,horizOriginY:Zt,id:null,ideographic:Zt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Zt,k:Zt,k1:Zt,k2:Zt,k3:Zt,k4:Zt,kernelMatrix:Ca,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Zt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Zt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Zt,overlineThickness:Zt,paintOrder:null,panose1:null,path:null,pathLength:Zt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:di,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Zt,pointsAtY:Zt,pointsAtZ:Zt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ca,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ca,rev:Ca,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ca,requiredFeatures:Ca,requiredFonts:Ca,requiredFormats:Ca,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Zt,specularExponent:Zt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Zt,strikethroughThickness:Zt,string:null,stroke:null,strokeDashArray:Ca,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Zt,strokeOpacity:Zt,strokeWidth:null,style:null,surfaceScale:Zt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ca,tabIndex:Zt,tableValues:null,target:null,targetX:Zt,targetY:Zt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ca,to:null,transform:null,u1:null,u2:null,underlinePosition:Zt,underlineThickness:Zt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Zt,values:null,vAlphabetic:Zt,vMathematical:Zt,vectorEffect:null,vHanging:Zt,vIdeographic:Zt,version:null,vertAdvY:Zt,vertOriginX:Zt,vertOriginY:Zt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Zt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),ZK=/^data[-\w.:]+$/i,gD=/-[a-z]/g,XK=/[A-Z]/g;function KK(e,t){const n=YC(t);let r=t,a=us;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&ZK.test(t)){if(t.charAt(4)==="-"){const c=t.slice(5).replace(gD,JK);r="data"+c.charAt(0).toUpperCase()+c.slice(1)}else{const c=t.slice(4);if(!gD.test(c)){let h=c.replace(XK,YK);h.charAt(0)!=="-"&&(h="-"+h),t="data"+h}}a=ek}return new a(r,t)}function YK(e){return"-"+e.toLowerCase()}function JK(e){return e.charAt(1).toUpperCase()}const yD={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},QK=G4([X4,Z4,J4,Q4,GK],"html"),eY=G4([X4,Z4,J4,Q4,qK],"svg");function tY(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{QT(t,"element",(n,r,a)=>{const c=a;let h;if(e.allowedElements?h=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(h=e.disallowedElements.includes(n.tagName)),!h&&e.allowElement&&typeof r=="number"&&(h=!e.allowElement(n,r,c)),h&&typeof r=="number")return e.unwrapDisallowed&&n.children?c.children.splice(r,1,...n.children):c.children.splice(r,1),r})}}var e5={exports:{}},Jr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tk=Symbol.for("react.element"),nk=Symbol.for("react.portal"),X0=Symbol.for("react.fragment"),K0=Symbol.for("react.strict_mode"),Y0=Symbol.for("react.profiler"),J0=Symbol.for("react.provider"),Q0=Symbol.for("react.context"),nY=Symbol.for("react.server_context"),e1=Symbol.for("react.forward_ref"),t1=Symbol.for("react.suspense"),n1=Symbol.for("react.suspense_list"),r1=Symbol.for("react.memo"),i1=Symbol.for("react.lazy"),rY=Symbol.for("react.offscreen"),t5;t5=Symbol.for("react.module.reference");function cs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tk:switch(e=e.type,e){case X0:case Y0:case K0:case t1:case n1:return e;default:switch(e=e&&e.$$typeof,e){case nY:case Q0:case e1:case i1:case r1:case J0:return e;default:return t}}case nk:return t}}}Jr.ContextConsumer=Q0;Jr.ContextProvider=J0;Jr.Element=tk;Jr.ForwardRef=e1;Jr.Fragment=X0;Jr.Lazy=i1;Jr.Memo=r1;Jr.Portal=nk;Jr.Profiler=Y0;Jr.StrictMode=K0;Jr.Suspense=t1;Jr.SuspenseList=n1;Jr.isAsyncMode=function(){return!1};Jr.isConcurrentMode=function(){return!1};Jr.isContextConsumer=function(e){return cs(e)===Q0};Jr.isContextProvider=function(e){return cs(e)===J0};Jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tk};Jr.isForwardRef=function(e){return cs(e)===e1};Jr.isFragment=function(e){return cs(e)===X0};Jr.isLazy=function(e){return cs(e)===i1};Jr.isMemo=function(e){return cs(e)===r1};Jr.isPortal=function(e){return cs(e)===nk};Jr.isProfiler=function(e){return cs(e)===Y0};Jr.isStrictMode=function(e){return cs(e)===K0};Jr.isSuspense=function(e){return cs(e)===t1};Jr.isSuspenseList=function(e){return cs(e)===n1};Jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===X0||e===Y0||e===K0||e===t1||e===n1||e===rY||typeof e=="object"&&e!==null&&(e.$$typeof===i1||e.$$typeof===r1||e.$$typeof===J0||e.$$typeof===Q0||e.$$typeof===e1||e.$$typeof===t5||e.getModuleId!==void 0)};Jr.typeOf=cs;e5.exports=Jr;var iY=e5.exports;function oY(e){var t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function aY(e){return e.join(" ").trim()}function sY(e,t){var n=t||{};return e[e.length-1]===""&&(e=e.concat("")),e.join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var vD=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,lY=/\n/g,uY=/^\s*/,cY=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,dY=/^:\s*/,hY=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,pY=/^[;\s]*/,fY=/^\s+|\s+$/g,mY=`
`,_D="/",xD="*",vd="",gY="comment",yY="declaration",vY=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(N){var k=N.match(lY);k&&(n+=k.length);var V=N.lastIndexOf(mY);r=~V?N.length-V:r+N.length}function c(){var N={line:n,column:r};return function(k){return k.position=new h(N),w(),k}}function h(N){this.start=N,this.end={line:n,column:r},this.source=t.source}h.prototype.content=e;function o(N){var k=new Error(t.source+":"+n+":"+r+": "+N);if(k.reason=N,k.filename=t.source,k.line=n,k.column=r,k.source=e,!t.silent)throw k}function m(N){var k=N.exec(e);if(!!k){var V=k[0];return a(V),e=e.slice(V.length),k}}function w(){m(uY)}function A(N){var k;for(N=N||[];k=P();)k!==!1&&N.push(k);return N}function P(){var N=c();if(!(_D!=e.charAt(0)||xD!=e.charAt(1))){for(var k=2;vd!=e.charAt(k)&&(xD!=e.charAt(k)||_D!=e.charAt(k+1));)++k;if(k+=2,vd===e.charAt(k-1))return o("End of comment missing");var V=e.slice(2,k-2);return r+=2,a(V),e=e.slice(k),r+=2,N({type:gY,comment:V})}}function O(){var N=c(),k=m(cY);if(!!k){if(P(),!m(dY))return o("property missing ':'");var V=m(hY),U=N({type:yY,property:bD(k[0].replace(vD,vd)),value:V?bD(V[0].replace(vD,vd)):vd});return m(pY),U}}function B(){var N=[];A(N);for(var k;k=O();)k!==!1&&(N.push(k),A(N));return N}return w(),B()};function bD(e){return e?e.replace(fY,vd):vd}var _Y=vY;function xY(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,a=_Y(e),c=typeof t=="function",h,o,m=0,w=a.length;m<w;m++)r=a[m],h=r.property,o=r.value,c?t(h,o,r):o&&(n||(n={}),n[h]=o);return n}var bY=xY;const QC={}.hasOwnProperty,wY=new Set(["table","thead","tbody","tfoot","tr"]);function n5(e,t){const n=[];let r=-1,a;for(;++r<t.children.length;)a=t.children[r],a.type==="element"?n.push(EY(e,a,r,t)):a.type==="text"?(t.type!=="element"||!wY.has(t.tagName)||!oY(a))&&n.push(a.value):a.type==="raw"&&!e.options.skipHtml&&n.push(a.value);return n}function EY(e,t,n,r){const a=e.options,c=e.schema,h=t.tagName,o={};let m=c,w;if(c.space==="html"&&h==="svg"&&(m=eY,e.schema=m),t.properties)for(w in t.properties)QC.call(t.properties,w)&&SY(o,w,t.properties[w],e);(h==="ol"||h==="ul")&&e.listDepth++;const A=n5(e,t);(h==="ol"||h==="ul")&&e.listDepth--,e.schema=c;const P=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},O=a.components&&QC.call(a.components,h)?a.components[h]:h,B=typeof O=="string"||O===at.Fragment;if(!iY.isValidElementType(O))throw new TypeError(`Component for name \`${h}\` not defined or is not renderable`);if(o.key=[h,P.start.line,P.start.column,n].join("-"),h==="a"&&a.linkTarget&&(o.target=typeof a.linkTarget=="function"?a.linkTarget(String(o.href||""),t.children,typeof o.title=="string"?o.title:null):a.linkTarget),h==="a"&&a.transformLinkUri&&(o.href=a.transformLinkUri(String(o.href||""),t.children,typeof o.title=="string"?o.title:null)),!B&&h==="code"&&r.type==="element"&&r.tagName!=="pre"&&(o.inline=!0),!B&&(h==="h1"||h==="h2"||h==="h3"||h==="h4"||h==="h5"||h==="h6")&&(o.level=Number.parseInt(h.charAt(1),10)),h==="img"&&a.transformImageUri&&(o.src=a.transformImageUri(String(o.src||""),String(o.alt||""),typeof o.title=="string"?o.title:null)),!B&&h==="li"&&r.type==="element"){const N=CY(t);o.checked=N&&N.properties?Boolean(N.properties.checked):null,o.index=iE(r,t),o.ordered=r.tagName==="ol"}return!B&&(h==="ol"||h==="ul")&&(o.ordered=h==="ol",o.depth=e.listDepth),(h==="td"||h==="th")&&(o.align&&(o.style||(o.style={}),o.style.textAlign=o.align,delete o.align),B||(o.isHeader=h==="th")),!B&&h==="tr"&&r.type==="element"&&(o.isHeader=Boolean(r.tagName==="thead")),a.sourcePos&&(o["data-sourcepos"]=AY(P)),!B&&a.rawSourcePos&&(o.sourcePosition=t.position),!B&&a.includeElementIndex&&(o.index=iE(r,t),o.siblingCount=iE(r)),B||(o.node=t),A.length>0?at.createElement(O,o,A):at.createElement(O,o)}function CY(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function iE(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function SY(e,t,n,r){const a=KK(r.schema,t);let c=n;c==null||c!==c||(Array.isArray(c)&&(c=a.commaSeparated?sY(c):aY(c)),a.property==="style"&&typeof c=="string"&&(c=TY(c)),a.space&&a.property?e[QC.call(yD,a.property)?yD[a.property]:a.property]=c:a.attribute&&(e[a.attribute]=c))}function TY(e){const t={};try{bY(e,n)}catch{}return t;function n(r,a){const c=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[c.replace(/-([a-z])/g,kY)]=a}}function kY(e,t){return t.toUpperCase()}function AY(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(t=>String(t)).join("")}const wD={}.hasOwnProperty,MY="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",D_={plugins:{to:"plugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function rk(e){for(const c in D_)if(wD.call(D_,c)&&wD.call(e,c)){const h=D_[c];console.warn(`[react-markdown] Warning: please ${h.to?`use \`${h.to}\` instead of`:"remove"} \`${c}\` (see <${MY}#${h.id}> for more info)`),delete D_[c]}const t=Zq().use(qX).use(e.remarkPlugins||[]).use(BK,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(tY,e),n=new m4;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let a=at.createElement(at.Fragment,{},n5({options:e,schema:QK,listDepth:0},r));return e.className&&(a=at.createElement("div",{className:e.className},a)),a}rk.defaultProps={transformLinkUri:Oq};rk.propTypes={children:qn.string,className:qn.string,allowElement:qn.func,allowedElements:qn.arrayOf(qn.string),disallowedElements:qn.arrayOf(qn.string),unwrapDisallowed:qn.bool,remarkPlugins:qn.arrayOf(qn.oneOfType([qn.object,qn.func,qn.arrayOf(qn.oneOfType([qn.bool,qn.string,qn.object,qn.func,qn.arrayOf(qn.any)]))])),rehypePlugins:qn.arrayOf(qn.oneOfType([qn.object,qn.func,qn.arrayOf(qn.oneOfType([qn.bool,qn.string,qn.object,qn.func,qn.arrayOf(qn.any)]))])),sourcePos:qn.bool,rawSourcePos:qn.bool,skipHtml:qn.bool,includeElementIndex:qn.bool,transformLinkUri:qn.oneOfType([qn.func,qn.bool]),linkTarget:qn.oneOfType([qn.func,qn.string]),transformImageUri:qn.func,components:qn.object};const IY={tokenize:OY,partial:!0},r5={tokenize:zY,partial:!0},i5={tokenize:BY,partial:!0},Op={tokenize:NY,partial:!0},o5={tokenize:FY,partial:!0},a5={tokenize:RY,previous:u5},s5={tokenize:LY,previous:ok},tu={tokenize:DY,previous:c5},yl={},PY={text:yl};let ud=48;for(;ud<123;)yl[ud]=tu,ud++,ud===58?ud=65:ud===91&&(ud=97);yl[43]=tu;yl[45]=tu;yl[46]=tu;yl[95]=tu;yl[72]=[tu,s5];yl[104]=[tu,s5];yl[87]=[tu,a5];yl[119]=[tu,a5];function DY(e,t,n){const r=this;let a,c;return h;function h(B){return!ED(B)||!c5(r.previous)||ak(r.events)?n(B):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),o(B))}function o(B){return ED(B)?(e.consume(B),o):B===64?(e.consume(B),m):n(B)}function m(B){return B===46?e.check(Op,O,w)(B):B===45||B===95?e.check(Op,n,A)(B):Ko(B)?(!c&&e0(B)&&(c=!0),e.consume(B),m):O(B)}function w(B){return e.consume(B),a=!0,c=void 0,m}function A(B){return e.consume(B),P}function P(B){return B===46?e.check(Op,n,w)(B):m(B)}function O(B){return a&&!c?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(B)):n(B)}}function RY(e,t,n){const r=this;return a;function a(h){return h!==87&&h!==119||!u5(r.previous)||ak(r.events)?n(h):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(IY,e.attempt(r5,e.attempt(i5,c),n),n)(h))}function c(h){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(h)}}function LY(e,t,n){const r=this;return a;function a(N){return N!==72&&N!==104||!ok(r.previous)||ak(r.events)?n(N):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(N),c)}function c(N){return N===84||N===116?(e.consume(N),h):n(N)}function h(N){return N===84||N===116?(e.consume(N),o):n(N)}function o(N){return N===80||N===112?(e.consume(N),m):n(N)}function m(N){return N===83||N===115?(e.consume(N),w):w(N)}function w(N){return N===58?(e.consume(N),A):n(N)}function A(N){return N===47?(e.consume(N),P):n(N)}function P(N){return N===47?(e.consume(N),O):n(N)}function O(N){return N===null||Kg(N)||V0(N)||H0(N)?n(N):e.attempt(r5,e.attempt(i5,B),n)(N)}function B(N){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(N)}}function OY(e,t,n){return r;function r(m){return e.consume(m),a}function a(m){return m===87||m===119?(e.consume(m),c):n(m)}function c(m){return m===87||m===119?(e.consume(m),h):n(m)}function h(m){return m===46?(e.consume(m),o):n(m)}function o(m){return m===null||Dn(m)?n(m):t(m)}}function zY(e,t,n){let r,a;return c;function c(m){return m===38?e.check(o5,o,h)(m):m===46||m===95?e.check(Op,o,h)(m):m===null||Kg(m)||V0(m)||m!==45&&H0(m)?o(m):(e.consume(m),c)}function h(m){return m===46?(a=r,r=void 0,e.consume(m),c):(m===95&&(r=!0),e.consume(m),c)}function o(m){return!a&&!r?t(m):n(m)}}function BY(e,t){let n=0;return r;function r(h){return h===38?e.check(o5,t,a)(h):(h===40&&n++,h===41?e.check(Op,c,a)(h):ik(h)?t(h):l5(h)?e.check(Op,t,a)(h):(e.consume(h),r))}function a(h){return e.consume(h),r}function c(h){return n--,n<0?t(h):a(h)}}function FY(e,t,n){return r;function r(h){return e.consume(h),a}function a(h){return Ja(h)?(e.consume(h),a):h===59?(e.consume(h),c):n(h)}function c(h){return ik(h)?t(h):n(h)}}function NY(e,t,n){return r;function r(c){return e.consume(c),a}function a(c){return l5(c)?(e.consume(c),a):ik(c)?t(c):n(c)}}function l5(e){return e===33||e===34||e===39||e===41||e===42||e===44||e===46||e===58||e===59||e===60||e===63||e===95||e===126}function ik(e){return e===null||e===60||qi(e)}function ED(e){return e===43||e===45||e===46||e===95||Ko(e)}function u5(e){return e===null||e===40||e===42||e===95||e===126||qi(e)}function ok(e){return e===null||!Ja(e)}function c5(e){return e!==47&&ok(e)}function ak(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const $Y={tokenize:ZY,partial:!0};function UY(){return{document:{[91]:{tokenize:WY,continuation:{tokenize:GY},exit:qY}},text:{[91]:{tokenize:HY},[93]:{add:"after",tokenize:jY,resolveTo:VY}}}}function jY(e,t,n){const r=this;let a=r.events.length;const c=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let h;for(;a--;){const m=r.events[a][1];if(m.type==="labelImage"){h=m;break}if(m.type==="gfmFootnoteCall"||m.type==="labelLink"||m.type==="label"||m.type==="image"||m.type==="link")break}return o;function o(m){if(!h||!h._balanced)return n(m);const w=Os(r.sliceSerialize({start:h.end,end:r.now()}));return w.charCodeAt(0)!==94||!c.includes(w.slice(1))?n(m):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),t(m))}}function VY(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const c={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},h={type:"chunkString",contentType:"string",start:Object.assign({},c.start),end:Object.assign({},c.end)},o=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",c,t],["enter",h,t],["exit",h,t],["exit",c,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...o),e}function HY(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let c=0,h;return o;function o(O){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(O),e.exit("gfmFootnoteCallLabelMarker"),m}function m(O){return O!==94?n(O):(e.enter("gfmFootnoteCallMarker"),e.consume(O),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",w)}function w(O){let B;return O===null||O===91||c++>999?n(O):O===93?h?(e.exit("chunkString"),B=e.exit("gfmFootnoteCallString"),a.includes(Os(r.sliceSerialize(B)))?P(O):n(O)):n(O):(e.consume(O),qi(O)||(h=!0),O===92?A:w)}function A(O){return O===91||O===92||O===93?(e.consume(O),c++,w):w(O)}function P(O){return e.enter("gfmFootnoteCallLabelMarker"),e.consume(O),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t}}function WY(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let c,h=0,o;return m;function m(k){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(k),e.exit("gfmFootnoteDefinitionLabelMarker"),w}function w(k){return k===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(k),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),A):n(k)}function A(k){let V;return k===null||k===91||h>999?n(k):k===93?o?(V=e.exit("gfmFootnoteDefinitionLabelString"),c=Os(r.sliceSerialize(V)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(k),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),B):n(k):Dn(k)?(e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),h++,A):(e.enter("chunkString").contentType="string",P(k))}function P(k){return k===null||Dn(k)||k===91||k===93||h>999?(e.exit("chunkString"),A(k)):(qi(k)||(o=!0),h++,e.consume(k),k===92?O:P)}function O(k){return k===91||k===92||k===93?(e.consume(k),h++,P):P(k)}function B(k){return k===58?(e.enter("definitionMarker"),e.consume(k),e.exit("definitionMarker"),Sr(e,N,"gfmFootnoteDefinitionWhitespace")):n(k)}function N(k){return a.includes(c)||a.push(c),t(k)}}function GY(e,t,n){return e.check(_y,t,e.attempt($Y,t,n))}function qY(e){e.exit("gfmFootnoteDefinition")}function ZY(e,t,n){const r=this;return Sr(e,a,"gfmFootnoteDefinitionIndent",4+1);function a(c){const h=r.events[r.events.length-1];return h&&h[1].type==="gfmFootnoteDefinitionIndent"&&h[2].sliceSerialize(h[1],!0).length===4?t(c):n(c)}}function XY(e={}){let t=e.singleTilde;const n={tokenize:a,resolveAll:r};return t==null&&(t=!0),{text:{[126]:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(c,h){let o=-1;for(;++o<c.length;)if(c[o][0]==="enter"&&c[o][1].type==="strikethroughSequenceTemporary"&&c[o][1]._close){let m=o;for(;m--;)if(c[m][0]==="exit"&&c[m][1].type==="strikethroughSequenceTemporary"&&c[m][1]._open&&c[o][1].end.offset-c[o][1].start.offset===c[m][1].end.offset-c[m][1].start.offset){c[o][1].type="strikethroughSequence",c[m][1].type="strikethroughSequence";const w={type:"strikethrough",start:Object.assign({},c[m][1].start),end:Object.assign({},c[o][1].end)},A={type:"strikethroughText",start:Object.assign({},c[m][1].end),end:Object.assign({},c[o][1].start)},P=[["enter",w,h],["enter",c[m][1],h],["exit",c[m][1],h],["enter",A,h]];Da(P,P.length,0,W0(h.parser.constructs.insideSpan.null,c.slice(m+1,o),h)),Da(P,P.length,0,[["exit",A,h],["enter",c[o][1],h],["exit",c[o][1],h],["exit",w,h]]),Da(c,m-1,o-m+3,P),o=m+P.length-2;break}}for(o=-1;++o<c.length;)c[o][1].type==="strikethroughSequenceTemporary"&&(c[o][1].type="data");return c}function a(c,h,o){const m=this.previous,w=this.events;let A=0;return P;function P(B){return m===126&&w[w.length-1][1].type!=="characterEscape"?o(B):(c.enter("strikethroughSequenceTemporary"),O(B))}function O(B){const N=t0(m);if(B===126)return A>1?o(B):(c.consume(B),A++,O);if(A<2&&!t)return o(B);const k=c.exit("strikethroughSequenceTemporary"),V=t0(B);return k._open=!V||V===2&&Boolean(N),k._close=!N||N===2&&Boolean(V),h(B)}}}const KY={flow:{null:{tokenize:JY,resolve:YY}}},CD={tokenize:QY,partial:!0};function YY(e,t){let n=-1,r,a,c,h,o,m,w;for(;++n<e.length;){const A=e[n][1];if(c&&(A.type==="temporaryTableCellContent"&&(h=h||n,o=n),(A.type==="tableCellDivider"||A.type==="tableRow")&&o)){const P={type:"tableContent",start:e[h][1].start,end:e[o][1].end},O={type:"chunkText",start:P.start,end:P.end,contentType:"text"};e.splice(h,o-h+1,["enter",P,t],["enter",O,t],["exit",O,t],["exit",P,t]),n-=o-h-3,h=void 0,o=void 0}if(e[n][0]==="exit"&&m!==void 0&&m+(w?0:1)<n&&(A.type==="tableCellDivider"||A.type==="tableRow"&&(m+3<n||e[m][1].type!=="whitespace"))){const P={type:a?"tableDelimiter":r?"tableHeader":"tableData",start:e[m][1].start,end:e[n][1].end};e.splice(n+(A.type==="tableCellDivider"?1:0),0,["exit",P,t]),e.splice(m,0,["enter",P,t]),n+=2,m=n+1,w=!0}A.type==="tableRow"&&(c=e[n][0]==="enter",c&&(m=n+1,w=!1)),A.type==="tableDelimiterRow"&&(a=e[n][0]==="enter",a&&(m=n+1,w=!1)),A.type==="tableHead"&&(r=e[n][0]==="enter")}return e}function JY(e,t,n){const r=this,a=[];let c=0,h,o;return m;function m(Ee){return e.enter("table")._align=a,e.enter("tableHead"),e.enter("tableRow"),Ee===124?w(Ee):(c++,e.enter("temporaryTableCellContent"),O(Ee))}function w(Ee){return e.enter("tableCellDivider"),e.consume(Ee),e.exit("tableCellDivider"),h=!0,A}function A(Ee){return Ee===null||Dn(Ee)?N(Ee):ni(Ee)?(e.enter("whitespace"),e.consume(Ee),P):(h&&(h=void 0,c++),Ee===124?w(Ee):(e.enter("temporaryTableCellContent"),O(Ee)))}function P(Ee){return ni(Ee)?(e.consume(Ee),P):(e.exit("whitespace"),A(Ee))}function O(Ee){return Ee===null||Ee===124||qi(Ee)?(e.exit("temporaryTableCellContent"),A(Ee)):(e.consume(Ee),Ee===92?B:O)}function B(Ee){return Ee===92||Ee===124?(e.consume(Ee),O):O(Ee)}function N(Ee){if(Ee===null)return n(Ee);e.exit("tableRow"),e.exit("tableHead");const ct=r.interrupt;return r.interrupt=!0,e.attempt({tokenize:Le,partial:!0},function(Ze){return r.interrupt=ct,e.enter("tableDelimiterRow"),k(Ze)},function(Ze){return r.interrupt=ct,n(Ze)})(Ee)}function k(Ee){return Ee===null||Dn(Ee)?z(Ee):ni(Ee)?(e.enter("whitespace"),e.consume(Ee),V):Ee===45?(e.enter("tableDelimiterFiller"),e.consume(Ee),o=!0,a.push("none"),U):Ee===58?(e.enter("tableDelimiterAlignment"),e.consume(Ee),e.exit("tableDelimiterAlignment"),a.push("left"),W):Ee===124?(e.enter("tableCellDivider"),e.consume(Ee),e.exit("tableCellDivider"),k):n(Ee)}function V(Ee){return ni(Ee)?(e.consume(Ee),V):(e.exit("whitespace"),k(Ee))}function U(Ee){return Ee===45?(e.consume(Ee),U):(e.exit("tableDelimiterFiller"),Ee===58?(e.enter("tableDelimiterAlignment"),e.consume(Ee),e.exit("tableDelimiterAlignment"),a[a.length-1]=a[a.length-1]==="left"?"center":"right",F):k(Ee))}function W(Ee){return Ee===45?(e.enter("tableDelimiterFiller"),e.consume(Ee),o=!0,U):n(Ee)}function F(Ee){return Ee===null||Dn(Ee)?z(Ee):ni(Ee)?(e.enter("whitespace"),e.consume(Ee),V):Ee===124?(e.enter("tableCellDivider"),e.consume(Ee),e.exit("tableCellDivider"),k):n(Ee)}function z(Ee){return e.exit("tableDelimiterRow"),!o||c!==a.length?n(Ee):Ee===null?S(Ee):e.check(CD,S,e.attempt({tokenize:Le,partial:!0},Sr(e,b,"linePrefix",4),S))(Ee)}function S(Ee){return e.exit("table"),t(Ee)}function b(Ee){return e.enter("tableBody"),D(Ee)}function D(Ee){return e.enter("tableRow"),Ee===124?Y(Ee):(e.enter("temporaryTableCellContent"),ee(Ee))}function Y(Ee){return e.enter("tableCellDivider"),e.consume(Ee),e.exit("tableCellDivider"),re}function re(Ee){return Ee===null||Dn(Ee)?ke(Ee):ni(Ee)?(e.enter("whitespace"),e.consume(Ee),ae):Ee===124?Y(Ee):(e.enter("temporaryTableCellContent"),ee(Ee))}function ae(Ee){return ni(Ee)?(e.consume(Ee),ae):(e.exit("whitespace"),re(Ee))}function ee(Ee){return Ee===null||Ee===124||qi(Ee)?(e.exit("temporaryTableCellContent"),re(Ee)):(e.consume(Ee),Ee===92?de:ee)}function de(Ee){return Ee===92||Ee===124?(e.consume(Ee),ee):ee(Ee)}function ke(Ee){return e.exit("tableRow"),Ee===null?Oe(Ee):e.check(CD,Oe,e.attempt({tokenize:Le,partial:!0},Sr(e,D,"linePrefix",4),Oe))(Ee)}function Oe(Ee){return e.exit("tableBody"),S(Ee)}function Le(Ee,ct,Ze){return rt;function rt(xe){return Ee.enter("lineEnding"),Ee.consume(xe),Ee.exit("lineEnding"),Sr(Ee,tt,"linePrefix")}function tt(xe){if(r.parser.lazy[r.now().line]||xe===null||Dn(xe))return Ze(xe);const be=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&be&&be[1].type==="linePrefix"&&be[2].sliceSerialize(be[1],!0).length>=4?Ze(xe):(r._gfmTableDynamicInterruptHack=!0,Ee.check(r.parser.constructs.flow,function(nn){return r._gfmTableDynamicInterruptHack=!1,Ze(nn)},function(nn){return r._gfmTableDynamicInterruptHack=!1,ct(nn)})(xe))}}}function QY(e,t,n){let r=0;return a;function a(h){return e.enter("check"),e.consume(h),c}function c(h){return h===-1||h===32?(e.consume(h),r++,r===4?t:c):h===null||qi(h)?t(h):n(h)}}const eJ={tokenize:nJ},tJ={text:{[91]:eJ}};function nJ(e,t,n){const r=this;return a;function a(o){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(o):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(o),e.exit("taskListCheckMarker"),c)}function c(o){return qi(o)?(e.enter("taskListCheckValueUnchecked"),e.consume(o),e.exit("taskListCheckValueUnchecked"),h):o===88||o===120?(e.enter("taskListCheckValueChecked"),e.consume(o),e.exit("taskListCheckValueChecked"),h):n(o)}function h(o){return o===93?(e.enter("taskListCheckMarker"),e.consume(o),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:rJ},t,n)):n(o)}}function rJ(e,t,n){const r=this;return Sr(e,a,"whitespace");function a(c){const h=r.events[r.events.length-1];return(h&&h[1].type==="whitespace"||Dn(c))&&c!==null?t(c):n(c)}}function iJ(e){return x4([PY,UY(),XY(e),KY,tJ])}function SD(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function oJ(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const aJ={}.hasOwnProperty,sJ=function(e,t,n,r){let a,c;typeof t=="string"||t instanceof RegExp?(c=[[t,n]],a=r):(c=t,a=n),a||(a={});const h=JT(a.ignore||[]),o=lJ(c);let m=-1;for(;++m<o.length;)L4(e,"text",w);return e;function w(P,O){let B=-1,N;for(;++B<O.length;){const k=O[B];if(h(k,N?N.children.indexOf(k):void 0,N))return;N=k}if(N)return A(P,O)}function A(P,O){const B=O[O.length-1],N=o[m][0],k=o[m][1];let V=0;const U=B.children.indexOf(P);let W=!1,F=[],z;N.lastIndex=0;let S=N.exec(P.value);for(;S;){z=S.index;const b={index:S.index,input:S.input,stack:[...O,P]};let D=k(...S,b);if(typeof D=="string"&&(D=D.length>0?{type:"text",value:D}:void 0),D!==!1&&(V!==z&&F.push({type:"text",value:P.value.slice(V,z)}),Array.isArray(D)?F.push(...D):D&&F.push(D),V=z+S[0].length,W=!0),!N.global)break;S=N.exec(P.value)}return W?(V<P.value.length&&F.push({type:"text",value:P.value.slice(V)}),B.children.splice(U,1,...F)):F=[P],U+F.length}};function lJ(e){const t=[];if(typeof e!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(e)){let n=-1;for(;++n<e.length;)t.push([TD(e[n][0]),kD(e[n][1])])}else{let n;for(n in e)aJ.call(e,n)&&t.push([TD(n),kD(e[n])])}return t}function TD(e){return typeof e=="string"?new RegExp(oJ(e),"g"):e}function kD(e){return typeof e=="function"?e:()=>e}const oE="phrasing",aE=["autolink","link","image","label"],uJ={transforms:[gJ],enter:{literalAutolink:dJ,literalAutolinkEmail:sE,literalAutolinkHttp:sE,literalAutolinkWww:sE},exit:{literalAutolink:mJ,literalAutolinkEmail:fJ,literalAutolinkHttp:hJ,literalAutolinkWww:pJ}},cJ={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:oE,notInConstruct:aE},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:oE,notInConstruct:aE},{character:":",before:"[ps]",after:"\\/",inConstruct:oE,notInConstruct:aE}]};function dJ(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function sE(e){this.config.enter.autolinkProtocol.call(this,e)}function hJ(e){this.config.exit.autolinkProtocol.call(this,e)}function pJ(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.url="http://"+this.sliceSerialize(e)}function fJ(e){this.config.exit.autolinkEmail.call(this,e)}function mJ(e){this.exit(e)}function gJ(e){sJ(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,yJ],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,vJ]],{ignore:["link","linkReference"]})}function yJ(e,t,n,r,a){let c="";if(!d5(a)||(/^w/i.test(t)&&(n=t+n,t="",c="http://"),!_J(n)))return!1;const h=xJ(n+r);if(!h[0])return!1;const o={type:"link",title:null,url:c+t+h[0],children:[{type:"text",value:t+h[0]}]};return h[1]?[o,{type:"text",value:h[1]}]:o}function vJ(e,t,n,r){return!d5(r,!0)||/[_-\d]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function _J(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function xJ(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);let n,r,a,c;if(t)for(e=e.slice(0,t.index),c=t[0],n=c.indexOf(")"),r=SD(e,"("),a=SD(e,")");n!==-1&&r>a;)e+=c.slice(0,n+1),c=c.slice(n+1),n=c.indexOf(")"),a++;return[e,c]}function d5(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||V0(n)||H0(n))&&(!t||n!==47)}function AD(e){return e.label||!e.identifier?e.label||"":P4(e.identifier)}function sc(e){const t=e||{},n=t.now||{};let r=t.lineShift||0,a=n.line||1,c=n.column||1;return{move:m,current:h,shift:o};function h(){return{now:{line:a,column:c},lineShift:r}}function o(w){r+=w}function m(w=""){const A=w.split(/\r?\n|\r/g),P=A[A.length-1];return a+=A.length-1,c=A.length===1?c+P.length:1+P.length+r,w}}function h5(e,t,n){const r=t.indexStack,a=e.children||[],c=sc(n),h=[];let o=-1;for(r.push(-1);++o<a.length;){const w=a[o];r[r.length-1]=o,h.push(c.move(t.handle(w,e,t,{before:`
`,after:`
`,...c.current()}))),w.type!=="list"&&(t.bulletLastUsed=void 0),o<a.length-1&&h.push(c.move(m(w,a[o+1])))}return r.pop(),h.join("");function m(w,A){let P=t.join.length;for(;P--;){const O=t.join[P](w,A,e,t);if(O===!0||O===1)break;if(typeof O=="number")return`
`.repeat(1+O);if(O===!1)return`

<!---->

`}return`

`}}const bJ=/\r?\n|\r/g;function p5(e,t){const n=[];let r=0,a=0,c;for(;c=bJ.exec(e);)h(e.slice(r,c.index)),n.push(c[0]),r=c.index+c[0].length,a++;return h(e.slice(r)),n.join("");function h(o){n.push(t(o,a,!o))}}function f5(e){if(!e._compiled){const t=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((t?"("+t+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function wJ(e,t){return MD(e,t.inConstruct,!0)&&!MD(e,t.notInConstruct,!1)}function MD(e,t,n){if(!t)return n;typeof t=="string"&&(t=[t]);let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function ID(e,t,n){const r=(n.before||"")+(t||"")+(n.after||""),a=[],c=[],h={};let o=-1;for(;++o<e.unsafe.length;){const A=e.unsafe[o];if(!wJ(e.stack,A))continue;const P=f5(A);let O;for(;O=P.exec(r);){const B="before"in A||Boolean(A.atBreak),N="after"in A,k=O.index+(B?O[1].length:0);a.includes(k)?(h[k].before&&!B&&(h[k].before=!1),h[k].after&&!N&&(h[k].after=!1)):(a.push(k),h[k]={before:B,after:N})}}a.sort(EJ);let m=n.before?n.before.length:0;const w=r.length-(n.after?n.after.length:0);for(o=-1;++o<a.length;){const A=a[o];A<m||A>=w||A+1<w&&a[o+1]===A+1&&h[A].after&&!h[A+1].before&&!h[A+1].after||a[o-1]===A-1&&h[A].before&&!h[A-1].before&&!h[A-1].after||(m!==A&&c.push(PD(r.slice(m,A),"\\")),m=A,/[!-/:-@[-`{-~]/.test(r.charAt(A))&&(!n.encode||!n.encode.includes(r.charAt(A)))?c.push("\\"):(c.push("&#x"+r.charCodeAt(A).toString(16).toUpperCase()+";"),m++))}return c.push(PD(r.slice(m,w),n.after)),c.join("")}function EJ(e,t){return e-t}function PD(e,t){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],a=[],c=e+t;let h=-1,o=0,m;for(;m=n.exec(c);)r.push(m.index);for(;++h<r.length;)o!==r[h]&&a.push(e.slice(o,r[h])),a.push("\\"),o=r[h];return a.push(e.slice(o)),a.join("")}function CJ(){return{enter:{gfmFootnoteDefinition:e,gfmFootnoteDefinitionLabelString:t,gfmFootnoteCall:a,gfmFootnoteCallString:c},exit:{gfmFootnoteDefinition:r,gfmFootnoteDefinitionLabelString:n,gfmFootnoteCall:o,gfmFootnoteCallString:h}};function e(m){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},m)}function t(){this.buffer()}function n(m){const w=this.resume(),A=this.stack[this.stack.length-1];A.label=w,A.identifier=Os(this.sliceSerialize(m)).toLowerCase()}function r(m){this.exit(m)}function a(m){this.enter({type:"footnoteReference",identifier:"",label:""},m)}function c(){this.buffer()}function h(m){const w=this.resume(),A=this.stack[this.stack.length-1];A.label=w,A.identifier=Os(this.sliceSerialize(m)).toLowerCase()}function o(m){this.exit(m)}}function SJ(){return e.peek=t,{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:n,footnoteReference:e}};function e(r,a,c,h){const o=sc(h);let m=o.move("[^");const w=c.enter("footnoteReference"),A=c.enter("reference");return m+=o.move(ID(c,AD(r),{...o.current(),before:m,after:"]"})),A(),w(),m+=o.move("]"),m}function t(){return"["}function n(r,a,c,h){const o=sc(h);let m=o.move("[^");const w=c.enter("footnoteDefinition"),A=c.enter("label");return m+=o.move(ID(c,AD(r),{...o.current(),before:m,after:"]"})),A(),m+=o.move("]:"+(r.children&&r.children.length>0?" ":"")),o.shift(4),m+=o.move(p5(h5(r,c,o.current()),P)),w(),m;function P(O,B,N){return B?(N?"":"    ")+O:O}}}function m5(e,t,n){const r=t.indexStack,a=e.children||[],c=[];let h=-1,o=n.before;r.push(-1);let m=sc(n);for(;++h<a.length;){const w=a[h];let A;if(r[r.length-1]=h,h+1<a.length){let P=t.handle.handlers[a[h+1].type];P&&P.peek&&(P=P.peek),A=P?P(a[h+1],e,t,{before:"",after:"",...m.current()}).charAt(0):""}else A=n.after;c.length>0&&(o==="\r"||o===`
`)&&w.type==="html"&&(c[c.length-1]=c[c.length-1].replace(/(\r?\n|\r)$/," "),o=" ",m=sc(n),m.move(c.join(""))),c.push(m.move(t.handle(w,e,t,{...m.current(),before:o,after:A}))),o=c[c.length-1].slice(-1)}return r.pop(),c.join("")}const TJ={canContainEols:["delete"],enter:{strikethrough:AJ},exit:{strikethrough:MJ}},kJ={unsafe:[{character:"~",inConstruct:"phrasing"}],handlers:{delete:g5}};g5.peek=IJ;function AJ(e){this.enter({type:"delete",children:[]},e)}function MJ(e){this.exit(e)}function g5(e,t,n,r){const a=sc(r),c=n.enter("emphasis");let h=a.move("~~");return h+=m5(e,n,{...a.current(),before:h,after:"~"}),h+=a.move("~~"),c(),h}function IJ(){return"~"}y5.peek=PJ;function y5(e,t,n){let r=e.value||"",a="`",c=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++c<n.unsafe.length;){const h=n.unsafe[c],o=f5(h);let m;if(!!h.atBreak)for(;m=o.exec(r);){let w=m.index;r.charCodeAt(w)===10&&r.charCodeAt(w-1)===13&&w--,r=r.slice(0,w)+" "+r.slice(m.index+1)}}return a+r+a}function PJ(){return"`"}function DJ(e,t={}){const n=(t.align||[]).concat(),r=t.stringLength||LJ,a=[],c=[],h=[],o=[];let m=0,w=-1;for(;++w<e.length;){const N=[],k=[];let V=-1;for(e[w].length>m&&(m=e[w].length);++V<e[w].length;){const U=RJ(e[w][V]);if(t.alignDelimiters!==!1){const W=r(U);k[V]=W,(o[V]===void 0||W>o[V])&&(o[V]=W)}N.push(U)}c[w]=N,h[w]=k}let A=-1;if(typeof n=="object"&&"length"in n)for(;++A<m;)a[A]=DD(n[A]);else{const N=DD(n);for(;++A<m;)a[A]=N}A=-1;const P=[],O=[];for(;++A<m;){const N=a[A];let k="",V="";N===99?(k=":",V=":"):N===108?k=":":N===114&&(V=":");let U=t.alignDelimiters===!1?1:Math.max(1,o[A]-k.length-V.length);const W=k+"-".repeat(U)+V;t.alignDelimiters!==!1&&(U=k.length+U+V.length,U>o[A]&&(o[A]=U),O[A]=U),P[A]=W}c.splice(1,0,P),h.splice(1,0,O),w=-1;const B=[];for(;++w<c.length;){const N=c[w],k=h[w];A=-1;const V=[];for(;++A<m;){const U=N[A]||"";let W="",F="";if(t.alignDelimiters!==!1){const z=o[A]-(k[A]||0),S=a[A];S===114?W=" ".repeat(z):S===99?z%2?(W=" ".repeat(z/2+.5),F=" ".repeat(z/2-.5)):(W=" ".repeat(z/2),F=W):F=" ".repeat(z)}t.delimiterStart!==!1&&!A&&V.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&U==="")&&(t.delimiterStart!==!1||A)&&V.push(" "),t.alignDelimiters!==!1&&V.push(W),V.push(U),t.alignDelimiters!==!1&&V.push(F),t.padding!==!1&&V.push(" "),(t.delimiterEnd!==!1||A!==m-1)&&V.push("|")}B.push(t.delimiterEnd===!1?V.join("").replace(/ +$/,""):V.join(""))}return B.join(`
`)}function RJ(e){return e==null?"":String(e)}function LJ(e){return e.length}function DD(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}const OJ={enter:{table:zJ,tableData:RD,tableHeader:RD,tableRow:FJ},exit:{codeText:NJ,table:BJ,tableData:lE,tableHeader:lE,tableRow:lE}};function zJ(e){const t=e._align;this.enter({type:"table",align:t.map(n=>n==="none"?null:n),children:[]},e),this.setData("inTable",!0)}function BJ(e){this.exit(e),this.setData("inTable")}function FJ(e){this.enter({type:"tableRow",children:[]},e)}function lE(e){this.exit(e)}function RD(e){this.enter({type:"tableCell",children:[]},e)}function NJ(e){let t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,$J));const n=this.stack[this.stack.length-1];n.value=t,this.exit(e)}function $J(e,t){return t==="|"?t:e}function UJ(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,c=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:h,tableRow:o,tableCell:m,inlineCode:O}};function h(B,N,k,V){return w(A(B,k,V),B.align)}function o(B,N,k,V){const U=P(B,k,V),W=w([U]);return W.slice(0,W.indexOf(`
`))}function m(B,N,k,V){const U=k.enter("tableCell"),W=k.enter("phrasing"),F=m5(B,k,{...V,before:c,after:c});return W(),U(),F}function w(B,N){return DJ(B,{align:N,alignDelimiters:r,padding:n,stringLength:a})}function A(B,N,k){const V=B.children;let U=-1;const W=[],F=N.enter("table");for(;++U<V.length;)W[U]=P(V[U],N,k);return F(),W}function P(B,N,k){const V=B.children;let U=-1;const W=[],F=N.enter("tableRow");for(;++U<V.length;)W[U]=m(V[U],B,N,k);return F(),W}function O(B,N,k){let V=y5(B,N,k);return k.stack.includes("tableCell")&&(V=V.replace(/\|/g,"\\$&")),V}}function jJ(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function VJ(e){const t=e.options.listItemIndent||"tab";if(t===1||t==="1")return"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function HJ(e,t,n,r){const a=VJ(n);let c=n.bulletCurrent||jJ(n);t&&t.type==="list"&&t.ordered&&(c=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+c);let h=c.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(h=Math.ceil(h/4)*4);const o=sc(r);o.move(c+" ".repeat(h-c.length)),o.shift(h);const m=n.enter("listItem"),w=p5(h5(e,n,o.current()),A);return m(),w;function A(P,O,B){return O?(B?"":" ".repeat(h))+P:(B?c:c+" ".repeat(h-c.length))+P}}const WJ={exit:{taskListCheckValueChecked:LD,taskListCheckValueUnchecked:LD,paragraph:qJ}},GJ={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:ZJ}};function LD(e){const t=this.stack[this.stack.length-2];t.checked=e.type==="taskListCheckValueChecked"}function qJ(e){const t=this.stack[this.stack.length-2],n=this.stack[this.stack.length-1],r=t.children,a=n.children[0];let c=-1,h;if(t&&t.type==="listItem"&&typeof t.checked=="boolean"&&a&&a.type==="text"){for(;++c<r.length;){const o=r[c];if(o.type==="paragraph"){h=o;break}}h===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}this.exit(e)}function ZJ(e,t,n,r){const a=e.children[0],c=typeof e.checked=="boolean"&&a&&a.type==="paragraph",h="["+(e.checked?"x":" ")+"] ",o=sc(r);c&&o.move(h);let m=HJ(e,t,n,{...r,...o.current()});return c&&(m=m.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,w)),m;function w(A){return A+h}}function XJ(){return[uJ,CJ(),TJ,OJ,WJ]}function KJ(e){return{extensions:[cJ,SJ(),kJ,UJ(e),GJ]}}function YJ(e={}){const t=this.data();n("micromarkExtensions",iJ(e)),n("fromMarkdownExtensions",XJ()),n("toMarkdownExtensions",KJ(e));function n(r,a){(t[r]?t[r]:t[r]=[]).push(a)}}const sk=({text:e})=>g.exports.createElement(rk,{children:e,remarkPlugins:[YJ],components:{img:t=>JJ(t.src)?g.exports.createElement("iframe",{className:"markdown-embed",frameBorder:0,src:t.src}):g.exports.createElement("img",{src:t.src,alt:t.alt})}});function JJ(e){let t=["https://forms.gle","https://docs.google.com","https://www.youtube.com/embed","https://open.spotify.com/embed"];for(let n=0;n<t.length;n++)if(e.startsWith(t[n]))return!0;return!1}const QJ=()=>{const[e,t]=g.exports.useState(-1);return g.exports.useEffect(()=>{document.title="404 Page Not Found | Metropolis",t(Math.floor(Math.random()*3))},[]),g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/404.css"}),g.exports.createElement("div",{className:"main-container card"},g.exports.createElement("h2",{className:"center-align message"},"404: Page Not Found"),g.exports.createElement("img",{className:"comic-img",style:{maxWidth:"100%"},src:`/static/img/404-comics/404-${e}.png`}),g.exports.createElement("div",{className:"display-metropolis valign-wrapper"},g.exports.createElement("img",{className:"inline-logo",src:"/static/img/themes/logos/dark-transparent.png"})),g.exports.createElement("div",{className:"game-container",hidden:!0},g.exports.createElement("input",{type:"button",className:"control-button",id:"up-button",value:"W"}),g.exports.createElement("br",null),g.exports.createElement("div",{className:"row valign-wrapper game-mid"},g.exports.createElement("div",{style:{marginLeft:"auto",marginRight:"auto"}},g.exports.createElement("input",{type:"button",className:"col control-button",id:"left-button",value:"A"}),g.exports.createElement("div",{className:"game-content col"},g.exports.createElement("canvas",{id:"game-canvas",style:{backgroundColor:"black"}}),g.exports.createElement("div",{className:"result-container valign-wrapper"},g.exports.createElement("div",{className:"result-display valign-wrapper",hidden:!0},g.exports.createElement("div",{className:"result-display-text"},g.exports.createElement("span",{className:"result-display-message"},"Start Game"),g.exports.createElement("br",null))))),g.exports.createElement("input",{type:"button",className:"col control-button",id:"right-button",value:"D"}),g.exports.createElement("br",null))),g.exports.createElement("input",{type:"button",className:"control-button",id:"down-button",value:"S"})),g.exports.createElement("p",{className:"center-align"},g.exports.createElement(vn,{to:"https://maclyonsden.com/"},"Return Home"))))},eQ=()=>{const e=g.exports.useContext(Tr),t=Gd(),[n,r]=g.exports.useState(0),[a,c]=g.exports.useState({}),h=encodeURIComponent(window.location.pathname+"/");g.exports.useEffect(()=>{e.getAPI(`${ur.OBJECT}/flatpage/retrieve/${h}?lookup=url`,!1).then(m=>{c(m.data),r(1),document.title=`${m.data.title} | Metropolis`}).catch(m=>{m.response.status!==404&&e.refreshAuth(),r(2)})},[t]);const o=()=>{window.history.back()};return n===0?g.exports.createElement(g.exports.Fragment,null):n===1?g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/flatpage.css"}),g.exports.createElement("div",{className:"resources-page"},g.exports.createElement("a",{id:"back",onClick:o},g.exports.createElement("i",{className:"zmdi zmdi-arrow-left"})),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"content"},g.exports.createElement("h1",{className:"title"},"Resources"),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"content-body"},g.exports.createElement(sk,{text:a.content})))))):g.exports.createElement(QJ,null)},tQ=()=>{const{slug:e}=qd();oi();const t=g.exports.useContext(Tr),[n,r]=g.exports.useState({}),[a,c]=g.exports.useState([]),[h,o]=g.exports.useState([]),[m,w]=g.exports.useState([]);g.exports.useEffect(()=>{document.title=`${n.name} | Metropolis`},[n]),g.exports.useEffect(()=>{const P=`${ur.OBJECT}/organization/retrieve/${e}?lookup=slug`;t.getAPI(P,!1).then(O=>{const B=O.data;r(B),console.log(P),t.getAPI(`${ur.OBJECT}/tag`,!1).then(N=>{const k=N.data.results;console.log(B.tags);const V=[];for(let U=0;U<B.tags.length;U++)for(let W=0;W<k.length;W++)if(B.tags[U]===k[W].id){V.push(k[W]);break}c(V)}).catch(()=>{t.refreshAuth()}),t.getAPI(`${ur.OBJECT}/user?limit=99999999`,!1).then(N=>{const k=N.data.results;o(B.execs.map(V=>{for(let U=0;U<k.length;U++)if(k[U].id===V)return k[U];return null})),w(B.members.map(V=>{for(let U=0;U<k.length;U++)if(k[U].id===V)return k[U];return null}))}).catch(()=>{t.refreshAuth()})}).catch(O=>{t.refreshAuth()})},[]);const A=P=>g.exports.createElement("li",null,g.exports.createElement("i",{className:"zmdi zmdi-link zmdi-hc-lg","aria-hidden":"true"}),g.exports.createElement("a",{href:P.href,target:"_blank",style:{wordBreak:"break-word"}},P.href));return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/detail.css"}),g.exports.createElement("div",{className:"club"},g.exports.createElement("div",{className:"row"},g.exports.createElement("img",{className:"club-banner responsive-img col s12",src:n.banner,alt:"banner of organization"})),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"club-detail"},g.exports.createElement("div",{className:"row club-header"},g.exports.createElement("div",{className:"col m3 s12"},g.exports.createElement("div",{className:"club-logo"},g.exports.createElement("img",{className:"circle",src:n.icon,alt:"icon of organization"}))),g.exports.createElement("div",{className:"col m5 s12"},g.exports.createElement("h2",{className:"club-name"},n.name),g.exports.createElement("div",{className:"tag-section"},a.map(P=>g.exports.createElement(Gg,{tag:P})))),g.exports.createElement("div",{className:"col m4 s12"})),g.exports.createElement("div",{className:"row club-info"},g.exports.createElement("div",{className:"col m8"},g.exports.createElement("div",{className:"description"},n.bio,g.exports.createElement("br",null),g.exports.createElement("br",null),n.owner!==t.user.id?g.exports.createElement(vn,{to:`/club/edit/${n.slug}`},"Edit club details"):g.exports.createElement(g.exports.Fragment,null))),g.exports.createElement("div",{className:"col m4"},g.exports.createElement("ul",{className:"link-section",style:{display:"inline"}},"links"in n?n.links.map(P=>g.exports.createElement(A,{href:P})):g.exports.createElement(g.exports.Fragment,null)))),g.exports.createElement("div",{className:"row"},g.exports.createElement("div",{className:"col s12"},g.exports.createElement("section",{id:"executives"},g.exports.createElement("h4",null,"Executives"),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"members-list"},h.map(P=>P===null?g.exports.createElement(g.exports.Fragment,null):g.exports.createElement(vn,{to:`/user/${P.username}`,key:P.id},g.exports.createElement("div",{className:"member"},g.exports.createElement("div",{className:"member-image"},g.exports.createElement("img",{className:"circle",src:P.gravatar_url,alt:`${P.username}'s profile picture`})),g.exports.createElement("div",{className:"member-text"},`${P.first_name} ${P.last_name}`)))))),g.exports.createElement("section",{id:"members"},g.exports.createElement("h4",null,"Members"),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"members-list"},m.map(P=>P===null?g.exports.createElement(g.exports.Fragment,null):g.exports.createElement(vn,{to:`/user/${P.username}`,key:P.id},g.exports.createElement("div",{className:"member"},g.exports.createElement("div",{className:"member-image"},g.exports.createElement("img",{className:"circle",src:P.gravatar_url,alt:`${P.username}'s profile picture`})),g.exports.createElement("div",{className:"member-text"},`${P.first_name} ${P.last_name}`))))))))))))},nQ=()=>{const e=oi(),{slug:t}=qd(),n=g.exports.useContext(Tr),[r,a]=g.exports.useState({});g.exports.useState("");const[c,h]=g.exports.useState({}),[o,m]=g.exports.useState("");g.exports.useEffect(()=>{const P=`${ur.OBJECT}/organization/retrieve/${t}?lookup=slug`;n.getAPI(P,!1).then(O=>{const B=O.data;a(B),h(B)}),m(r.bio)},[]);const w=P=>{P&&P.preventDefault(),console.log("ogga");const O=`${ur.OBJECT}/organization/single/${r.id}`;n.patchAPI(O,c).then(B=>{n.notify(`Successfully changed ${r.name}'s details`,"success"),e(`/club/${r.id}`)}).catch(B=>{if(console.log(B.response.status),B.response.status===401){n.refreshAuth(),w();return}n.notify("An internal error occured. Please contact an admin to get it fixed.","error")})},A=P=>{m(P.target.value),console.log(o+" "+r.name)};return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/edit-club.css"}),g.exports.createElement("div",{className:"edit-club"},g.exports.createElement("div",{className:"row"},g.exports.createElement("img",{className:"club-banner responsive-img col s12",src:r.banner,alt:"banner of organization"})),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"white-bg box-center"},g.exports.createElement("div",{className:"row page-title"},g.exports.createElement("h1",null,g.exports.createElement("strong",null,"Edit club details for ",r.name))),g.exports.createElement("form",{onSubmit:w},g.exports.createElement("div",{className:"field"},g.exports.createElement("label",{htmlFor:"edit-club-name-textarea"},"Name:"),g.exports.createElement("div",{className:"row edit-club-name"},g.exports.createElement("input",{type:"text",id:"edit-club-name-textarea",defaultValue:r.name,onChange:A}))),g.exports.createElement("div",{className:"field"},g.exports.createElement("label",{htmlFor:"edit-club-status-dropdown"},"Club Status:"),g.exports.createElement("select",{id:"edit-club-status-dropdown",className:"browser-default"},g.exports.createElement("option",{value:"Open Membership"},"Open Membership"),g.exports.createElement("option",{value:"Accepting Applications"},"Accepting Applications"),g.exports.createElement("option",{value:"Closed Applications"},"Closed Applications"))),g.exports.createElement("div",{className:"field"},g.exports.createElement("label",{htmlFor:"edit-club-bio-textarea"},"Bio:"),g.exports.createElement("div",{className:"row edit-club-bio"},g.exports.createElement("textarea",{id:"edit-club-bio-textarea",defaultValue:r.bio,onChange:A}))),g.exports.createElement("div",{className:"field"},g.exports.createElement("div",null,g.exports.createElement("button",{type:"submit",className:"btn"},"Submit"),g.exports.createElement(vn,{to:`/club/${r.slug}`,className:"btn"},"Cancel"))))))))},rQ=()=>{const{slug:e}=qd();oi();const t=g.exports.useContext(Tr),[n,r]=g.exports.useState({}),[a,c]=g.exports.useState({}),[h,o]=g.exports.useState([]);return g.exports.useState([]),g.exports.useState([]),g.exports.useEffect(()=>{const m=`${ur.OBJECT}/blog-post/retrieve/${e}?lookup=slug`;t.getAPI(m).then(w=>{const A=w.data;r(A),t.getAPI(`${ur.USER}/retrieve/${A.author}`).then(P=>{c(P.data)}).catch(()=>{t.refreshAuth()}),t.getAPI(`${ur.OBJECT}/tag`).then(P=>{const O=P.data.results,B=[];for(let N=0;N<A.tags.length;N++)for(let k=0;k<O.length;k++)if(A.tags[N]===O[k].id){B.push(O[k]);break}o(B)}).catch(()=>{t.refreshAuth()})}).catch(w=>{t.refreshAuth()})},[]),a?g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/blog-detail.css"}),g.exports.createElement("div",{className:"container"},g.exports.createElement("div",{className:"card-container"},g.exports.createElement("img",{className:"card-image",src:n.featured_image}),g.exports.createElement("div",{className:"tag-section"},g.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ffcced"}},"test tag"),g.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ccffe1"}},"test tag 2")),g.exports.createElement("h1",{className:"title"},n.title),g.exports.createElement("div",{className:"card-authors"},g.exports.createElement("div",{className:"card-authors-image"},g.exports.createElement(vn,{to:`/user/${a.username}`},g.exports.createElement("img",{className:"circle",src:a.gravatar_url}))),g.exports.createElement("div",{className:"card-authors-text"},g.exports.createElement(vn,{to:`/user/${a.username}`,className:"link"},`${a.first_name} ${a.last_name}`),g.exports.createElement("br",null),"\u2022 ",new Date(n.created_date).toLocaleTimeString(void 0,L0))),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"card-body"},g.exports.createElement(sk,{text:n.body})),g.exports.createElement("br",null),g.exports.createElement(vn,{className:"link",to:"/blog"},g.exports.createElement("i",{className:"zmdi zmdi-chevron-left"})," Return to Blog Posts")))):g.exports.createElement(g.exports.Fragment,null)},iQ=()=>{const{id:e}=qd(),[t,n]=g.exports.useState({body:""}),r=g.exports.useContext(Tr),a=oi();g.exports.useState(!0);const[c,h]=g.exports.useState({}),[o,m]=g.exports.useState({});g.exports.useEffect(()=>{r.getAPI(`${ur.OBJECT}/announcement/retrieve/${e}`,!1).then(B=>{n(B.data)}).catch(B=>{console.log(B),r.refreshAuth()})},[]),g.exports.useEffect(()=>{console.log("ORGANIZATIONS UPDATED:",r.allOrgs),h(r.allOrgs.find(B=>B.id===t.organization))},[r.allOrgs,t]),g.exports.useEffect(()=>{console.log("USERS UPDATED:",r.allUsers);let B=r.allUsers.find(N=>N.id===t.author);console.log("Looking for:",t),console.log("Author found:",B),m(B)},[r.allUsers,t]);const w=B=>bT.map(N=>{const k=N.id===B?"header header-active":"header";return g.exports.createElement("li",{key:N.id,className:k,onClick:()=>a(`/announcements?feed=${N.id}`)},N.text)}),A=B=>g.exports.createElement("div",{className:"prompt"},g.exports.createElement("div",{className:"prompt-text"},g.exports.createElement("p",{id:"approvaltop"},"The following announcement is awaiting your approval."),g.exports.createElement("h5",{id:"approvalbot"},"Approve Announcement?")),g.exports.createElement("div",{className:"prompt-buttons"},g.exports.createElement("a",{className:"checkmark",onClick:N=>{r.putAPI(`${ur.OBJECT}/announcement/single/${e}`,{...t,status:"a"}).then(k=>{console.log("Success!")}).catch(k=>{})}},g.exports.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"}},g.exports.createElement("i",{className:"material-icons"},"check"))),g.exports.createElement("a",{className:"reject",onClick:N=>{M.Modal.getInstance(document.getElementById("reject-popup")).open()}},g.exports.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"}},g.exports.createElement("i",{className:"material-icons",style:{color:"red"}},"clear"))))),[P,O]=g.exports.useState("");return console.log("Debug:",c,o),c&&o&&"name"in c&&"username"in o?g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/announcement-detail.css"}),g.exports.createElement("div",{className:"container"},r.user.is_staff&&g.exports.createElement(A,null),g.exports.createElement("div",{id:"reject-popup",className:"modal reject-modal"},g.exports.createElement("div",{className:"modal-top modal-header"},g.exports.createElement("h5",{className:"header-announcement"},"Add Announcement")),g.exports.createElement("div",{className:"modal-content"},g.exports.createElement("div",{className:"form reason"},g.exports.createElement("h6",{className:"form-label"},"Reason for rejection:"),g.exports.createElement("input",{type:"text",onChange:B=>O(B.target.value)}))),g.exports.createElement("div",{className:"modal-footer"},g.exports.createElement("a",{href:"#!",className:"modal-close waves-effect waves-red btn-flat"},"Cancel"),g.exports.createElement("a",{className:"waves-effect waves-light btn",onClick:B=>{r.putAPI(`${ur.OBJECT}/announcement/single/${e}`,{...t,status:"r",rejection_reason:P}).then(N=>{console.log("Success!"),M.Modal.getInstance(document.getElementById("reject-popup")).close()}).catch(N=>{})}},"Submit!"))),g.exports.createElement("div",{className:"headers"},g.exports.createElement("ul",null,w(""))),g.exports.createElement("div",{className:"card-container"},g.exports.createElement("div",{className:"admin"},g.exports.createElement("a",{className:"link",href:`/admin/core/announcement/${e}/change/`},"Edit")),g.exports.createElement("div",{className:"tag-section"},g.exports.createElement("p",{className:"tag",style:{backgroundColor:"#f9ccff"}},"cultural & community"),g.exports.createElement("p",{className:"tag",style:{backgroundColor:"#ffccd0"}},"school")),g.exports.createElement("h1",{className:"title"},t.title),g.exports.createElement("div",{className:"card-authors"},g.exports.createElement("div",{className:"card-authors-image"},g.exports.createElement(vn,{to:`/club/${c.slug}`},g.exports.createElement("img",{className:"circle",src:c&&c.banner}))),g.exports.createElement("div",{className:"card-authors-text"},g.exports.createElement(vn,{to:`/club/${c.slug}`,className:"link"},c.name),",",g.exports.createElement(vn,{to:`/user/${o.username}`,className:"link"},`${o.first_name} ${o.last_name}`),g.exports.createElement("br",null),"\u2022 ",new Date(t.created_date).toLocaleTimeString(void 0,L0))),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"card-body"},!!t.body&&g.exports.createElement(sk,{text:t.body})),g.exports.createElement("br",null),g.exports.createElement(vn,{className:"link",to:"/announcements"},g.exports.createElement("i",{className:"zmdi zmdi-chevron-left"})," Return to Announcements")))):g.exports.createElement(g.exports.Fragment,null)},oQ=()=>{const e=oi(),t=g.exports.useContext(Tr),r=R0().get("next");return g.exports.useEffect(()=>{document.title="Logout | Metropolis",t.logout(),t.notify("Successfully logged out. See you later!","success"),e(r||"/")}),g.exports.createElement(g.exports.Fragment,null)},aQ={black:"#000",white:"#fff"};var Yg=aQ;const sQ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var tp=sQ;const lQ={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var np=lQ;const uQ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var rp=uQ;const cQ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var ip=cQ;const dQ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var op=dQ;const hQ={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var Zm=hQ;const pQ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var fQ=pQ;function _d(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function v5(e){if(!_d(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=v5(e[n])}),t}function ts(e,t,n={clone:!0}){const r=n.clone?Fe({},e):e;return _d(e)&&_d(t)&&Object.keys(t).forEach(a=>{a!=="__proto__"&&(_d(t[a])&&a in e&&_d(e[a])?r[a]=ts(e[a],t[a],n):n.clone?r[a]=_d(t[a])?v5(t[a]):t[a]:r[a]=t[a])}),r}function lc(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function dn(e){if(typeof e!="string")throw new Error(lc(7));return e.charAt(0).toUpperCase()+e.slice(1)}function eS(...e){return e.reduce((t,n)=>n==null?t:function(...a){t.apply(this,a),n.apply(this,a)},()=>{})}function _5(e,t=166){let n;function r(...a){const c=()=>{e.apply(this,a)};clearTimeout(n),n=setTimeout(c,t)}return r.clear=()=>{clearTimeout(n)},r}function uE(e,t){return g.exports.isValidElement(e)&&t.indexOf(e.type.muiName)!==-1}function yo(e){return e&&e.ownerDocument||document}function $d(e){return yo(e).defaultView||window}function n0(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const mQ=typeof window!="undefined"?g.exports.useLayoutEffect:g.exports.useEffect;var Kl=mQ;let OD=0;function gQ(e){const[t,n]=g.exports.useState(e),r=e||t;return g.exports.useEffect(()=>{t==null&&(OD+=1,n(`mui-${OD}`))},[t]),r}const zD=kE["useId"];function lk(e){if(zD!==void 0){const t=zD();return e!=null?e:t}return gQ(e)}function Id({controlled:e,default:t,name:n,state:r="value"}){const{current:a}=g.exports.useRef(e!==void 0),[c,h]=g.exports.useState(t),o=a?e:c,m=g.exports.useCallback(w=>{a||h(w)},[]);return[o,m]}function Ia(e){const t=g.exports.useRef(e);return Kl(()=>{t.current=e}),g.exports.useCallback((...n)=>(0,t.current)(...n),[])}function Zi(...e){return g.exports.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{n0(n,t)})},e)}let o1=!0,tS=!1,BD;const yQ={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function vQ(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&yQ[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function _Q(e){e.metaKey||e.altKey||e.ctrlKey||(o1=!0)}function cE(){o1=!1}function xQ(){this.visibilityState==="hidden"&&tS&&(o1=!0)}function bQ(e){e.addEventListener("keydown",_Q,!0),e.addEventListener("mousedown",cE,!0),e.addEventListener("pointerdown",cE,!0),e.addEventListener("touchstart",cE,!0),e.addEventListener("visibilitychange",xQ,!0)}function wQ(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return o1||vQ(t)}function EQ(){const e=g.exports.useCallback(a=>{a!=null&&bQ(a.ownerDocument)},[]),t=g.exports.useRef(!1);function n(){return t.current?(tS=!0,window.clearTimeout(BD),BD=window.setTimeout(()=>{tS=!1},100),t.current=!1,!0):!1}function r(a){return wQ(a)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}function x5(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const CQ=e=>{const t=g.exports.useRef({});return g.exports.useEffect(()=>{t.current=e}),t.current};var SQ=CQ;function b5(e,t){const n=Fe({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=Fe({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const a=e[r]||{},c=t[r];n[r]={},!c||!Object.keys(c)?n[r]=a:!a||!Object.keys(a)?n[r]=c:(n[r]=Fe({},c),Object.keys(a).forEach(h=>{n[r][h]=b5(a[h],c[h])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function kr(e,t,n=void 0){const r={};return Object.keys(e).forEach(a=>{r[a]=e[a].reduce((c,h)=>{if(h){const o=t(h);o!==""&&c.push(o),n&&n[h]&&c.push(n[h])}return c},[]).join(" ")}),r}const FD=e=>e,TQ=()=>{let e=FD;return{configure(t){e=t},generate(t){return e(t)},reset(){e=FD}}},kQ=TQ();var w5=kQ;const AQ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function vr(e,t,n="Mui"){const r=AQ[t];return r?`${n}-${r}`:`${w5.generate(e)}-${t}`}function ar(e,t,n="Mui"){const r={};return t.forEach(a=>{r[a]=vr(e,a,n)}),r}function bn(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,c;for(c=0;c<r.length;c++)a=r[c],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function E5(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var MQ=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,IQ=E5(function(e){return MQ.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function PQ(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function DQ(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var RQ=function(){function e(n){var r=this;this._insertTag=function(a){var c;r.tags.length===0?r.insertionPoint?c=r.insertionPoint.nextSibling:r.prepend?c=r.container.firstChild:c=r.before:c=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,c),r.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(DQ(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=PQ(a);try{c.insertRule(r,c.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),No="-ms-",r0="-moz-",$r="-webkit-",C5="comm",uk="rule",ck="decl",LQ="@import",S5="@keyframes",OQ=Math.abs,a1=String.fromCharCode,zQ=Object.assign;function BQ(e,t){return Eo(e,0)^45?(((t<<2^Eo(e,0))<<2^Eo(e,1))<<2^Eo(e,2))<<2^Eo(e,3):0}function T5(e){return e.trim()}function FQ(e,t){return(e=t.exec(e))?e[0]:e}function qr(e,t,n){return e.replace(t,n)}function nS(e,t){return e.indexOf(t)}function Eo(e,t){return e.charCodeAt(t)|0}function Jg(e,t,n){return e.slice(t,n)}function ol(e){return e.length}function dk(e){return e.length}function R_(e,t){return t.push(e),e}function NQ(e,t){return e.map(t).join("")}var s1=1,Xp=1,k5=0,va=0,Wi=0,hf="";function l1(e,t,n,r,a,c,h){return{value:e,root:t,parent:n,type:r,props:a,children:c,line:s1,column:Xp,length:h,return:""}}function Xm(e,t){return zQ(l1("",null,null,"",null,null,0),e,{length:-e.length},t)}function $Q(){return Wi}function UQ(){return Wi=va>0?Eo(hf,--va):0,Xp--,Wi===10&&(Xp=1,s1--),Wi}function Ra(){return Wi=va<k5?Eo(hf,va++):0,Xp++,Wi===10&&(Xp=1,s1++),Wi}function hl(){return Eo(hf,va)}function sx(){return va}function by(e,t){return Jg(hf,e,t)}function Qg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function A5(e){return s1=Xp=1,k5=ol(hf=e),va=0,[]}function M5(e){return hf="",e}function lx(e){return T5(by(va-1,rS(e===91?e+2:e===40?e+1:e)))}function jQ(e){for(;(Wi=hl())&&Wi<33;)Ra();return Qg(e)>2||Qg(Wi)>3?"":" "}function VQ(e,t){for(;--t&&Ra()&&!(Wi<48||Wi>102||Wi>57&&Wi<65||Wi>70&&Wi<97););return by(e,sx()+(t<6&&hl()==32&&Ra()==32))}function rS(e){for(;Ra();)switch(Wi){case e:return va;case 34:case 39:e!==34&&e!==39&&rS(Wi);break;case 40:e===41&&rS(e);break;case 92:Ra();break}return va}function HQ(e,t){for(;Ra()&&e+Wi!==47+10;)if(e+Wi===42+42&&hl()===47)break;return"/*"+by(t,va-1)+"*"+a1(e===47?e:Ra())}function WQ(e){for(;!Qg(hl());)Ra();return by(e,va)}function GQ(e){return M5(ux("",null,null,null,[""],e=A5(e),0,[0],e))}function ux(e,t,n,r,a,c,h,o,m){for(var w=0,A=0,P=h,O=0,B=0,N=0,k=1,V=1,U=1,W=0,F="",z=a,S=c,b=r,D=F;V;)switch(N=W,W=Ra()){case 40:if(N!=108&&Eo(D,P-1)==58){nS(D+=qr(lx(W),"&","&\f"),"&\f")!=-1&&(U=-1);break}case 34:case 39:case 91:D+=lx(W);break;case 9:case 10:case 13:case 32:D+=jQ(N);break;case 92:D+=VQ(sx()-1,7);continue;case 47:switch(hl()){case 42:case 47:R_(qQ(HQ(Ra(),sx()),t,n),m);break;default:D+="/"}break;case 123*k:o[w++]=ol(D)*U;case 125*k:case 59:case 0:switch(W){case 0:case 125:V=0;case 59+A:B>0&&ol(D)-P&&R_(B>32?$D(D+";",r,n,P-1):$D(qr(D," ","")+";",r,n,P-2),m);break;case 59:D+=";";default:if(R_(b=ND(D,t,n,w,A,a,o,F,z=[],S=[],P),c),W===123)if(A===0)ux(D,t,b,b,z,c,P,o,S);else switch(O===99&&Eo(D,3)===110?100:O){case 100:case 109:case 115:ux(e,b,b,r&&R_(ND(e,b,b,0,0,a,o,F,a,z=[],P),S),a,S,P,o,r?z:S);break;default:ux(D,b,b,b,[""],S,0,o,S)}}w=A=B=0,k=U=1,F=D="",P=h;break;case 58:P=1+ol(D),B=N;default:if(k<1){if(W==123)--k;else if(W==125&&k++==0&&UQ()==125)continue}switch(D+=a1(W),W*k){case 38:U=A>0?1:(D+="\f",-1);break;case 44:o[w++]=(ol(D)-1)*U,U=1;break;case 64:hl()===45&&(D+=lx(Ra())),O=hl(),A=P=ol(F=D+=WQ(sx())),W++;break;case 45:N===45&&ol(D)==2&&(k=0)}}return c}function ND(e,t,n,r,a,c,h,o,m,w,A){for(var P=a-1,O=a===0?c:[""],B=dk(O),N=0,k=0,V=0;N<r;++N)for(var U=0,W=Jg(e,P+1,P=OQ(k=h[N])),F=e;U<B;++U)(F=T5(k>0?O[U]+" "+W:qr(W,/&\f/g,O[U])))&&(m[V++]=F);return l1(e,t,n,a===0?uk:o,m,w,A)}function qQ(e,t,n){return l1(e,t,n,C5,a1($Q()),Jg(e,2,-2),0)}function $D(e,t,n,r){return l1(e,t,n,ck,Jg(e,0,r),Jg(e,r+1,-1),r)}function zp(e,t){for(var n="",r=dk(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function ZQ(e,t,n,r){switch(e.type){case LQ:case ck:return e.return=e.return||e.value;case C5:return"";case S5:return e.return=e.value+"{"+zp(e.children,r)+"}";case uk:e.value=e.props.join(",")}return ol(n=zp(e.children,r))?e.return=e.value+"{"+n+"}":""}function XQ(e){var t=dk(e);return function(n,r,a,c){for(var h="",o=0;o<t;o++)h+=e[o](n,r,a,c)||"";return h}}function KQ(e){return function(t){t.root||(t=t.return)&&e(t)}}var YQ=function(t,n,r){for(var a=0,c=0;a=c,c=hl(),a===38&&c===12&&(n[r]=1),!Qg(c);)Ra();return by(t,va)},JQ=function(t,n){var r=-1,a=44;do switch(Qg(a)){case 0:a===38&&hl()===12&&(n[r]=1),t[r]+=YQ(va-1,n,r);break;case 2:t[r]+=lx(a);break;case 4:if(a===44){t[++r]=hl()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=a1(a)}while(a=Ra());return t},QQ=function(t,n){return M5(JQ(A5(t),n))},UD=new WeakMap,eee=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,a=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!UD.get(r))&&!a){UD.set(t,!0);for(var c=[],h=QQ(n,c),o=r.props,m=0,w=0;m<h.length;m++)for(var A=0;A<o.length;A++,w++)t.props[w]=c[m]?h[m].replace(/&\f/g,o[A]):o[A]+" "+h[m]}}},tee=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function I5(e,t){switch(BQ(e,t)){case 5103:return $r+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $r+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $r+e+r0+e+No+e+e;case 6828:case 4268:return $r+e+No+e+e;case 6165:return $r+e+No+"flex-"+e+e;case 5187:return $r+e+qr(e,/(\w+).+(:[^]+)/,$r+"box-$1$2"+No+"flex-$1$2")+e;case 5443:return $r+e+No+"flex-item-"+qr(e,/flex-|-self/,"")+e;case 4675:return $r+e+No+"flex-line-pack"+qr(e,/align-content|flex-|-self/,"")+e;case 5548:return $r+e+No+qr(e,"shrink","negative")+e;case 5292:return $r+e+No+qr(e,"basis","preferred-size")+e;case 6060:return $r+"box-"+qr(e,"-grow","")+$r+e+No+qr(e,"grow","positive")+e;case 4554:return $r+qr(e,/([^-])(transform)/g,"$1"+$r+"$2")+e;case 6187:return qr(qr(qr(e,/(zoom-|grab)/,$r+"$1"),/(image-set)/,$r+"$1"),e,"")+e;case 5495:case 3959:return qr(e,/(image-set\([^]*)/,$r+"$1$`$1");case 4968:return qr(qr(e,/(.+:)(flex-)?(.*)/,$r+"box-pack:$3"+No+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$r+e+e;case 4095:case 3583:case 4068:case 2532:return qr(e,/(.+)-inline(.+)/,$r+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ol(e)-1-t>6)switch(Eo(e,t+1)){case 109:if(Eo(e,t+4)!==45)break;case 102:return qr(e,/(.+:)(.+)-([^]+)/,"$1"+$r+"$2-$3$1"+r0+(Eo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~nS(e,"stretch")?I5(qr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Eo(e,t+1)!==115)break;case 6444:switch(Eo(e,ol(e)-3-(~nS(e,"!important")&&10))){case 107:return qr(e,":",":"+$r)+e;case 101:return qr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+$r+(Eo(e,14)===45?"inline-":"")+"box$3$1"+$r+"$2$3$1"+No+"$2box$3")+e}break;case 5936:switch(Eo(e,t+11)){case 114:return $r+e+No+qr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $r+e+No+qr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $r+e+No+qr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return $r+e+No+e+e}return e}var nee=function(t,n,r,a){if(t.length>-1&&!t.return)switch(t.type){case ck:t.return=I5(t.value,t.length);break;case S5:return zp([Xm(t,{value:qr(t.value,"@","@"+$r)})],a);case uk:if(t.length)return NQ(t.props,function(c){switch(FQ(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zp([Xm(t,{props:[qr(c,/:(read-\w+)/,":"+r0+"$1")]})],a);case"::placeholder":return zp([Xm(t,{props:[qr(c,/:(plac\w+)/,":"+$r+"input-$1")]}),Xm(t,{props:[qr(c,/:(plac\w+)/,":"+r0+"$1")]}),Xm(t,{props:[qr(c,/:(plac\w+)/,No+"input-$1")]})],a)}return""})}},ree=[nee],iee=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(k){var V=k.getAttribute("data-emotion");V.indexOf(" ")!==-1&&(document.head.appendChild(k),k.setAttribute("data-s",""))})}var a=t.stylisPlugins||ree,c={},h,o=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(k){for(var V=k.getAttribute("data-emotion").split(" "),U=1;U<V.length;U++)c[V[U]]=!0;o.push(k)});var m,w=[eee,tee];{var A,P=[ZQ,KQ(function(k){A.insert(k)})],O=XQ(w.concat(a,P)),B=function(V){return zp(GQ(V),O)};m=function(V,U,W,F){A=W,B(V?V+"{"+U.styles+"}":U.styles),F&&(N.inserted[U.name]=!0)}}var N={key:n,sheet:new RQ({key:n,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:c,registered:{},insert:m};return N.sheet.hydrate(o),N},P5={exports:{}},Qr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vo=typeof Symbol=="function"&&Symbol.for,hk=vo?Symbol.for("react.element"):60103,pk=vo?Symbol.for("react.portal"):60106,u1=vo?Symbol.for("react.fragment"):60107,c1=vo?Symbol.for("react.strict_mode"):60108,d1=vo?Symbol.for("react.profiler"):60114,h1=vo?Symbol.for("react.provider"):60109,p1=vo?Symbol.for("react.context"):60110,fk=vo?Symbol.for("react.async_mode"):60111,f1=vo?Symbol.for("react.concurrent_mode"):60111,m1=vo?Symbol.for("react.forward_ref"):60112,g1=vo?Symbol.for("react.suspense"):60113,oee=vo?Symbol.for("react.suspense_list"):60120,y1=vo?Symbol.for("react.memo"):60115,v1=vo?Symbol.for("react.lazy"):60116,aee=vo?Symbol.for("react.block"):60121,see=vo?Symbol.for("react.fundamental"):60117,lee=vo?Symbol.for("react.responder"):60118,uee=vo?Symbol.for("react.scope"):60119;function Fa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hk:switch(e=e.type,e){case fk:case f1:case u1:case d1:case c1:case g1:return e;default:switch(e=e&&e.$$typeof,e){case p1:case m1:case v1:case y1:case h1:return e;default:return t}}case pk:return t}}}function D5(e){return Fa(e)===f1}Qr.AsyncMode=fk;Qr.ConcurrentMode=f1;Qr.ContextConsumer=p1;Qr.ContextProvider=h1;Qr.Element=hk;Qr.ForwardRef=m1;Qr.Fragment=u1;Qr.Lazy=v1;Qr.Memo=y1;Qr.Portal=pk;Qr.Profiler=d1;Qr.StrictMode=c1;Qr.Suspense=g1;Qr.isAsyncMode=function(e){return D5(e)||Fa(e)===fk};Qr.isConcurrentMode=D5;Qr.isContextConsumer=function(e){return Fa(e)===p1};Qr.isContextProvider=function(e){return Fa(e)===h1};Qr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hk};Qr.isForwardRef=function(e){return Fa(e)===m1};Qr.isFragment=function(e){return Fa(e)===u1};Qr.isLazy=function(e){return Fa(e)===v1};Qr.isMemo=function(e){return Fa(e)===y1};Qr.isPortal=function(e){return Fa(e)===pk};Qr.isProfiler=function(e){return Fa(e)===d1};Qr.isStrictMode=function(e){return Fa(e)===c1};Qr.isSuspense=function(e){return Fa(e)===g1};Qr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===u1||e===f1||e===d1||e===c1||e===g1||e===oee||typeof e=="object"&&e!==null&&(e.$$typeof===v1||e.$$typeof===y1||e.$$typeof===h1||e.$$typeof===p1||e.$$typeof===m1||e.$$typeof===see||e.$$typeof===lee||e.$$typeof===uee||e.$$typeof===aee)};Qr.typeOf=Fa;P5.exports=Qr;var R5=P5.exports,cee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},L5={};L5[R5.ForwardRef]=cee;L5[R5.Memo]=dee;var hee=!0;function pee(e,t,n){var r="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):r+=a+" "}),r}var O5=function(t,n,r){var a=t.key+"-"+n.name;(r===!1||hee===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},z5=function(t,n,r){O5(t,n,r);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var c=n;do t.insert(n===c?"."+a:"",c,t.sheet,!0),c=c.next;while(c!==void 0)}};function fee(e){for(var t=0,n,r=0,a=e.length;a>=4;++r,a-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var mee={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},gee=/[A-Z]|^ms/g,yee=/_EMO_([^_]+?)_([^]*?)_EMO_/g,B5=function(t){return t.charCodeAt(1)===45},jD=function(t){return t!=null&&typeof t!="boolean"},dE=E5(function(e){return B5(e)?e:e.replace(gee,"-$&").toLowerCase()}),VD=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(yee,function(r,a,c){return al={name:a,styles:c,next:al},a})}return mee[t]!==1&&!B5(t)&&typeof n=="number"&&n!==0?n+"px":n};function ey(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return al={name:n.name,styles:n.styles,next:al},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)al={name:r.name,styles:r.styles,next:al},r=r.next;var a=n.styles+";";return a}return vee(e,t,n)}case"function":{if(e!==void 0){var c=al,h=n(e);return al=c,ey(e,t,h)}break}}if(t==null)return n;var o=t[n];return o!==void 0?o:n}function vee(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=ey(e,t,n[a])+";";else for(var c in n){var h=n[c];if(typeof h!="object")t!=null&&t[h]!==void 0?r+=c+"{"+t[h]+"}":jD(h)&&(r+=dE(c)+":"+VD(c,h)+";");else if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var o=0;o<h.length;o++)jD(h[o])&&(r+=dE(c)+":"+VD(c,h[o])+";");else{var m=ey(e,t,h);switch(c){case"animation":case"animationName":{r+=dE(c)+":"+m+";";break}default:r+=c+"{"+m+"}"}}}return r}var HD=/label:\s*([^\s;\n{]+)\s*(;|$)/g,al,mk=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var a=!0,c="";al=void 0;var h=t[0];h==null||h.raw===void 0?(a=!1,c+=ey(r,n,h)):c+=h[0];for(var o=1;o<t.length;o++)c+=ey(r,n,t[o]),a&&(c+=h[o]);HD.lastIndex=0;for(var m="",w;(w=HD.exec(c))!==null;)m+="-"+w[1];var A=fee(c)+m;return{name:A,styles:c,next:al}},_ee=function(t){return t()},F5=kE["useInsertionEffect"]?kE["useInsertionEffect"]:!1,xee=F5||_ee,WD=F5||g.exports.useLayoutEffect,N5=g.exports.createContext(typeof HTMLElement!="undefined"?iee({key:"css"}):null);N5.Provider;var $5=function(t){return g.exports.forwardRef(function(n,r){var a=g.exports.useContext(N5);return t(n,a,r)})},U5=g.exports.createContext({}),bee=$5(function(e,t){var n=e.styles,r=mk([n],void 0,g.exports.useContext(U5)),a=g.exports.useRef();return WD(function(){var c=t.key+"-global",h=new t.sheet.constructor({key:c,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,m=document.querySelector('style[data-emotion="'+c+" "+r.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),m!==null&&(o=!0,m.setAttribute("data-emotion",c),h.hydrate([m])),a.current=[h,o],function(){h.flush()}},[t]),WD(function(){var c=a.current,h=c[0],o=c[1];if(o){c[1]=!1;return}if(r.next!==void 0&&z5(t,r.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",r,h,!1)},[t,r.name]),null});function wee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mk(t)}var gk=function(){var t=wee.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Eee=IQ,Cee=function(t){return t!=="theme"},GD=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Eee:Cee},qD=function(t,n,r){var a;if(n){var c=n.shouldForwardProp;a=t.__emotion_forwardProp&&c?function(h){return t.__emotion_forwardProp(h)&&c(h)}:c}return typeof a!="function"&&r&&(a=t.__emotion_forwardProp),a},See=function(t){var n=t.cache,r=t.serialized,a=t.isStringTag;return O5(n,r,a),xee(function(){return z5(n,r,a)}),null},Tee=function e(t,n){var r=t.__emotion_real===t,a=r&&t.__emotion_base||t,c,h;n!==void 0&&(c=n.label,h=n.target);var o=qD(t,n,r),m=o||GD(a),w=!m("as");return function(){var A=arguments,P=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(c!==void 0&&P.push("label:"+c+";"),A[0]==null||A[0].raw===void 0)P.push.apply(P,A);else{P.push(A[0][0]);for(var O=A.length,B=1;B<O;B++)P.push(A[B],A[0][B])}var N=$5(function(k,V,U){var W=w&&k.as||a,F="",z=[],S=k;if(k.theme==null){S={};for(var b in k)S[b]=k[b];S.theme=g.exports.useContext(U5)}typeof k.className=="string"?F=pee(V.registered,z,k.className):k.className!=null&&(F=k.className+" ");var D=mk(P.concat(z),V.registered,S);F+=V.key+"-"+D.name,h!==void 0&&(F+=" "+h);var Y=w&&o===void 0?GD(W):m,re={};for(var ae in k)w&&ae==="as"||Y(ae)&&(re[ae]=k[ae]);return re.className=F,re.ref=U,g.exports.createElement(g.exports.Fragment,null,g.exports.createElement(See,{cache:V,serialized:D,isStringTag:typeof W=="string"}),g.exports.createElement(W,re))});return N.displayName=c!==void 0?c:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=a,N.__emotion_styles=P,N.__emotion_forwardProp=o,Object.defineProperty(N,"toString",{value:function(){return"."+h}}),N.withComponent=function(k,V){return e(k,Fe({},n,V,{shouldForwardProp:qD(N,V,!0)})).apply(void 0,P)},N}},kee=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],iS=Tee.bind();kee.forEach(function(e){iS[e]=iS(e)});var Aee=iS,bt={exports:{}},_1={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mee=g.exports,Iee=Symbol.for("react.element"),Pee=Symbol.for("react.fragment"),Dee=Object.prototype.hasOwnProperty,Ree=Mee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lee={key:!0,ref:!0,__self:!0,__source:!0};function j5(e,t,n){var r,a={},c=null,h=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(h=t.ref);for(r in t)Dee.call(t,r)&&!Lee.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:Iee,type:e,key:c,ref:h,props:a,_owner:Ree.current}}_1.Fragment=Pee;_1.jsx=j5;_1.jsxs=j5;bt.exports=_1;function Oee(e){return e==null||Object.keys(e).length===0}function zee(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?a=>t(Oee(a)?n:a):t;return bt.exports.jsx(bee,{styles:r})}/**
 * @mui/styled-engine v5.11.11
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function V5(e,t){return Aee(e,t)}const Bee=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function bg(e,t){return t?ts(e,t,{clone:!1}):e}const yk={xs:0,sm:600,md:900,lg:1200,xl:1536},ZD={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${yk[e]}px)`};function ml(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const c=r.breakpoints||ZD;return t.reduce((h,o,m)=>(h[c.up(c.keys[m])]=n(t[m]),h),{})}if(typeof t=="object"){const c=r.breakpoints||ZD;return Object.keys(t).reduce((h,o)=>{if(Object.keys(c.values||yk).indexOf(o)!==-1){const m=c.up(o);h[m]=n(t[o],o)}else{const m=o;h[m]=t[m]}return h},{})}return n(t)}function Fee(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,a)=>{const c=e.up(a);return r[c]={},r},{}))||{}}function Nee(e,t){return e.reduce((n,r)=>{const a=n[r];return(!a||Object.keys(a).length===0)&&delete n[r],n},t)}function x1(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((a,c)=>a&&a[c]?a[c]:null,e);if(r!=null)return r}return t.split(".").reduce((r,a)=>r&&r[a]!=null?r[a]:null,e)}function i0(e,t,n,r=n){let a;return typeof e=="function"?a=e(n):Array.isArray(e)?a=e[n]||r:a=x1(e,n)||r,t&&(a=t(a,r,e)),a}function Zr(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:a}=e,c=h=>{if(h[t]==null)return null;const o=h[t],m=h.theme,w=x1(m,r)||{};return ml(h,o,P=>{let O=i0(w,a,P);return P===O&&typeof P=="string"&&(O=i0(w,a,`${t}${P==="default"?"":dn(P)}`,P)),n===!1?O:{[n]:O}})};return c.propTypes={},c.filterProps=[t],c}function b1(...e){const t=e.reduce((r,a)=>(a.filterProps.forEach(c=>{r[c]=a}),r),{}),n=r=>Object.keys(r).reduce((a,c)=>t[c]?bg(a,t[c](r)):a,{});return n.propTypes={},n.filterProps=e.reduce((r,a)=>r.concat(a.filterProps),[]),n}function $ee(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Uee={m:"margin",p:"padding"},jee={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},XD={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Vee=$ee(e=>{if(e.length>2)if(XD[e])e=XD[e];else return[e];const[t,n]=e.split(""),r=Uee[t],a=jee[n]||"";return Array.isArray(a)?a.map(c=>r+c):[r+a]}),vk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],_k=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...vk,..._k];function wy(e,t,n,r){var a;const c=(a=x1(e,t,!1))!=null?a:n;return typeof c=="number"?h=>typeof h=="string"?h:c*h:Array.isArray(c)?h=>typeof h=="string"?h:c[h]:typeof c=="function"?c:()=>{}}function H5(e){return wy(e,"spacing",8)}function Ey(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function Hee(e,t){return n=>e.reduce((r,a)=>(r[a]=Ey(t,n),r),{})}function Wee(e,t,n,r){if(t.indexOf(n)===-1)return null;const a=Vee(n),c=Hee(a,r),h=e[n];return ml(e,h,c)}function W5(e,t){const n=H5(e.theme);return Object.keys(e).map(r=>Wee(e,t,r,n)).reduce(bg,{})}function Ri(e){return W5(e,vk)}Ri.propTypes={};Ri.filterProps=vk;function Li(e){return W5(e,_k)}Li.propTypes={};Li.filterProps=_k;function ll(e){return typeof e!="number"?e:`${e}px solid`}const Gee=Zr({prop:"border",themeKey:"borders",transform:ll}),qee=Zr({prop:"borderTop",themeKey:"borders",transform:ll}),Zee=Zr({prop:"borderRight",themeKey:"borders",transform:ll}),Xee=Zr({prop:"borderBottom",themeKey:"borders",transform:ll}),Kee=Zr({prop:"borderLeft",themeKey:"borders",transform:ll}),Yee=Zr({prop:"borderColor",themeKey:"palette"}),Jee=Zr({prop:"borderTopColor",themeKey:"palette"}),Qee=Zr({prop:"borderRightColor",themeKey:"palette"}),ete=Zr({prop:"borderBottomColor",themeKey:"palette"}),tte=Zr({prop:"borderLeftColor",themeKey:"palette"}),w1=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=wy(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Ey(t,r)});return ml(e,e.borderRadius,n)}return null};w1.propTypes={};w1.filterProps=["borderRadius"];b1(Gee,qee,Zee,Xee,Kee,Yee,Jee,Qee,ete,tte,w1);const E1=e=>{if(e.gap!==void 0&&e.gap!==null){const t=wy(e.theme,"spacing",8),n=r=>({gap:Ey(t,r)});return ml(e,e.gap,n)}return null};E1.propTypes={};E1.filterProps=["gap"];const C1=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=wy(e.theme,"spacing",8),n=r=>({columnGap:Ey(t,r)});return ml(e,e.columnGap,n)}return null};C1.propTypes={};C1.filterProps=["columnGap"];const S1=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=wy(e.theme,"spacing",8),n=r=>({rowGap:Ey(t,r)});return ml(e,e.rowGap,n)}return null};S1.propTypes={};S1.filterProps=["rowGap"];const nte=Zr({prop:"gridColumn"}),rte=Zr({prop:"gridRow"}),ite=Zr({prop:"gridAutoFlow"}),ote=Zr({prop:"gridAutoColumns"}),ate=Zr({prop:"gridAutoRows"}),ste=Zr({prop:"gridTemplateColumns"}),lte=Zr({prop:"gridTemplateRows"}),ute=Zr({prop:"gridTemplateAreas"}),cte=Zr({prop:"gridArea"});b1(E1,C1,S1,nte,rte,ite,ote,ate,ste,lte,ute,cte);function Bp(e,t){return t==="grey"?t:e}const dte=Zr({prop:"color",themeKey:"palette",transform:Bp}),hte=Zr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Bp}),pte=Zr({prop:"backgroundColor",themeKey:"palette",transform:Bp});b1(dte,hte,pte);function Aa(e){return e<=1&&e!==0?`${e*100}%`:e}const fte=Zr({prop:"width",transform:Aa}),xk=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,a,c;return{maxWidth:((r=e.theme)==null||(a=r.breakpoints)==null||(c=a.values)==null?void 0:c[n])||yk[n]||Aa(n)}};return ml(e,e.maxWidth,t)}return null};xk.filterProps=["maxWidth"];const mte=Zr({prop:"minWidth",transform:Aa}),gte=Zr({prop:"height",transform:Aa}),yte=Zr({prop:"maxHeight",transform:Aa}),vte=Zr({prop:"minHeight",transform:Aa});Zr({prop:"size",cssProperty:"width",transform:Aa});Zr({prop:"size",cssProperty:"height",transform:Aa});const _te=Zr({prop:"boxSizing"});b1(fte,xk,mte,gte,yte,vte,_te);const hE=e=>t=>{if(t[e]!==void 0&&t[e]!==null){const n=r=>{var a,c;let h=(a=t.theme.typography)==null?void 0:a[`${e}${t[e]==="default"||t[e]===e?"":dn((c=t[e])==null?void 0:c.toString())}`];if(!h){var o,m;h=(o=t.theme.typography)==null||(m=o[r])==null?void 0:m[e]}return h||(h=r),{[e]:h}};return ml(t,t[e],n)}return null},xte={border:{themeKey:"borders",transform:ll},borderTop:{themeKey:"borders",transform:ll},borderRight:{themeKey:"borders",transform:ll},borderBottom:{themeKey:"borders",transform:ll},borderLeft:{themeKey:"borders",transform:ll},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:w1},color:{themeKey:"palette",transform:Bp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Bp},backgroundColor:{themeKey:"palette",transform:Bp},p:{style:Li},pt:{style:Li},pr:{style:Li},pb:{style:Li},pl:{style:Li},px:{style:Li},py:{style:Li},padding:{style:Li},paddingTop:{style:Li},paddingRight:{style:Li},paddingBottom:{style:Li},paddingLeft:{style:Li},paddingX:{style:Li},paddingY:{style:Li},paddingInline:{style:Li},paddingInlineStart:{style:Li},paddingInlineEnd:{style:Li},paddingBlock:{style:Li},paddingBlockStart:{style:Li},paddingBlockEnd:{style:Li},m:{style:Ri},mt:{style:Ri},mr:{style:Ri},mb:{style:Ri},ml:{style:Ri},mx:{style:Ri},my:{style:Ri},margin:{style:Ri},marginTop:{style:Ri},marginRight:{style:Ri},marginBottom:{style:Ri},marginLeft:{style:Ri},marginX:{style:Ri},marginY:{style:Ri},marginInline:{style:Ri},marginInlineStart:{style:Ri},marginInlineEnd:{style:Ri},marginBlock:{style:Ri},marginBlockStart:{style:Ri},marginBlockEnd:{style:Ri},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:E1},rowGap:{style:S1},columnGap:{style:C1},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Aa},maxWidth:{style:xk},minWidth:{transform:Aa},height:{transform:Aa},maxHeight:{transform:Aa},minHeight:{transform:Aa},boxSizing:{},fontFamily:{themeKey:"typography",style:hE("fontFamily")},fontSize:{themeKey:"typography",style:hE("fontSize")},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography",style:hE("fontWeight")},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};var T1=xte;function bte(...e){const t=e.reduce((r,a)=>r.concat(Object.keys(a)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function wte(e,t){return typeof e=="function"?e(t):e}function Ete(){function e(n,r,a,c){const h={[n]:r,theme:a},o=c[n];if(!o)return{[n]:r};const{cssProperty:m=n,themeKey:w,transform:A,style:P}=o;if(r==null)return null;const O=x1(a,w)||{};return P?P(h):ml(h,r,N=>{let k=i0(O,A,N);return N===k&&typeof N=="string"&&(k=i0(O,A,`${n}${N==="default"?"":dn(N)}`,N)),m===!1?k:{[m]:k}})}function t(n){var r;const{sx:a,theme:c={}}=n||{};if(!a)return null;const h=(r=c.unstable_sxConfig)!=null?r:T1;function o(m){let w=m;if(typeof m=="function")w=m(c);else if(typeof m!="object")return m;if(!w)return null;const A=Fee(c.breakpoints),P=Object.keys(A);let O=A;return Object.keys(w).forEach(B=>{const N=wte(w[B],c);if(N!=null)if(typeof N=="object")if(h[B])O=bg(O,e(B,N,c,h));else{const k=ml({theme:c},N,V=>({[B]:V}));bte(k,N)?O[B]=t({sx:N,theme:c}):O=bg(O,k)}else O=bg(O,e(B,N,c,h))}),Nee(P,O)}return Array.isArray(a)?a.map(o):o(a)}return t}const G5=Ete();G5.filterProps=["sx"];var k1=G5;const Cte=["sx"],Ste=e=>{var t,n;const r={systemProps:{},otherProps:{}},a=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:T1;return Object.keys(e).forEach(c=>{a[c]?r.systemProps[c]=e[c]:r.otherProps[c]=e[c]}),r};function q5(e){const{sx:t}=e,n=bn(e,Cte),{systemProps:r,otherProps:a}=Ste(n);let c;return Array.isArray(t)?c=[r,...t]:typeof t=="function"?c=(...h)=>{const o=t(...h);return _d(o)?Fe({},r,o):r}:c=Fe({},r,t),Fe({},a,{sx:c})}function Z5(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Z5(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function In(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Z5(e))&&(r&&(r+=" "),r+=t);return r}const Tte=["values","unit","step"],kte=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>Fe({},n,{[r.key]:r.val}),{})};function Ate(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,a=bn(e,Tte),c=kte(t),h=Object.keys(c);function o(O){return`@media (min-width:${typeof t[O]=="number"?t[O]:O}${n})`}function m(O){return`@media (max-width:${(typeof t[O]=="number"?t[O]:O)-r/100}${n})`}function w(O,B){const N=h.indexOf(B);return`@media (min-width:${typeof t[O]=="number"?t[O]:O}${n}) and (max-width:${(N!==-1&&typeof t[h[N]]=="number"?t[h[N]]:B)-r/100}${n})`}function A(O){return h.indexOf(O)+1<h.length?w(O,h[h.indexOf(O)+1]):o(O)}function P(O){const B=h.indexOf(O);return B===0?o(h[1]):B===h.length-1?m(h[B]):w(O,h[h.indexOf(O)+1]).replace("@media","@media not all and")}return Fe({keys:h,values:c,up:o,down:m,between:w,only:A,not:P,unit:n},a)}const Mte={borderRadius:4};var Ite=Mte;function Pte(e=8){if(e.mui)return e;const t=H5({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(c=>{const h=t(c);return typeof h=="number"?`${h}px`:h}).join(" ");return n.mui=!0,n}const Dte=["breakpoints","palette","spacing","shape"];function bk(e={},...t){const{breakpoints:n={},palette:r={},spacing:a,shape:c={}}=e,h=bn(e,Dte),o=Ate(n),m=Pte(a);let w=ts({breakpoints:o,direction:"ltr",components:{},palette:Fe({mode:"light"},r),spacing:m,shape:Fe({},Ite,c)},h);return w=t.reduce((A,P)=>ts(A,P),w),w.unstable_sxConfig=Fe({},T1,h==null?void 0:h.unstable_sxConfig),w.unstable_sx=function(P){return k1({sx:P,theme:this})},w}const Rte=g.exports.createContext(null);var Lte=Rte;function Ote(){return g.exports.useContext(Lte)}function zte(e){return Object.keys(e).length===0}function X5(e=null){const t=Ote();return!t||zte(t)?e:t}const Bte=bk();function wk(e=Bte){return X5(e)}const Fte=["className","component"];function Nte(e={}){const{defaultTheme:t,defaultClassName:n="MuiBox-root",generateClassName:r}=e,a=V5("div",{shouldForwardProp:h=>h!=="theme"&&h!=="sx"&&h!=="as"})(k1);return g.exports.forwardRef(function(o,m){const w=wk(t),A=q5(o),{className:P,component:O="div"}=A,B=bn(A,Fte);return bt.exports.jsx(a,Fe({as:O,ref:m,className:In(P,r?r(n):n),theme:w},B))})}const $te=["variant"];function KD(e){return e.length===0}function K5(e){const{variant:t}=e,n=bn(e,$te);let r=t||"";return Object.keys(n).sort().forEach(a=>{a==="color"?r+=KD(r)?e[a]:dn(e[a]):r+=`${KD(r)?a:dn(a)}${dn(e[a].toString())}`}),r}const Ute=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],jte=["theme"],Vte=["theme"];function Km(e){return Object.keys(e).length===0}function Hte(e){return typeof e=="string"&&e.charCodeAt(0)>96}const Wte=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,Gte=(e,t)=>{let n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);const r={};return n.forEach(a=>{const c=K5(a.props);r[c]=a.style}),r},qte=(e,t,n,r)=>{var a,c;const{ownerState:h={}}=e,o=[],m=n==null||(a=n.components)==null||(c=a[r])==null?void 0:c.variants;return m&&m.forEach(w=>{let A=!0;Object.keys(w.props).forEach(P=>{h[P]!==w.props[P]&&e[P]!==w.props[P]&&(A=!1)}),A&&o.push(t[K5(w.props)])}),o};function wg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Zte=bk();function Xte(e={}){const{defaultTheme:t=Zte,rootShouldForwardProp:n=wg,slotShouldForwardProp:r=wg}=e,a=c=>{const h=Km(c.theme)?t:c.theme;return k1(Fe({},c,{theme:h}))};return a.__mui_systemSx=!0,(c,h={})=>{Bee(c,F=>F.filter(z=>!(z!=null&&z.__mui_systemSx)));const{name:o,slot:m,skipVariantsResolver:w,skipSx:A,overridesResolver:P}=h,O=bn(h,Ute),B=w!==void 0?w:m&&m!=="Root"||!1,N=A||!1;let k,V=wg;m==="Root"?V=n:m?V=r:Hte(c)&&(V=void 0);const U=V5(c,Fe({shouldForwardProp:V,label:k},O)),W=(F,...z)=>{const S=z?z.map(re=>typeof re=="function"&&re.__emotion_real!==re?ae=>{let{theme:ee}=ae,de=bn(ae,jte);return re(Fe({theme:Km(ee)?t:ee},de))}:re):[];let b=F;o&&P&&S.push(re=>{const ae=Km(re.theme)?t:re.theme,ee=Wte(o,ae);if(ee){const de={};return Object.entries(ee).forEach(([ke,Oe])=>{de[ke]=typeof Oe=="function"?Oe(Fe({},re,{theme:ae})):Oe}),P(re,de)}return null}),o&&!B&&S.push(re=>{const ae=Km(re.theme)?t:re.theme;return qte(re,Gte(o,ae),ae,o)}),N||S.push(a);const D=S.length-z.length;if(Array.isArray(F)&&D>0){const re=new Array(D).fill("");b=[...F,...re],b.raw=[...F.raw,...re]}else typeof F=="function"&&F.__emotion_real!==F&&(b=re=>{let{theme:ae}=re,ee=bn(re,Vte);return F(Fe({theme:Km(ae)?t:ae},ee))});return U(b,...S)};return U.withConfig&&(W.withConfig=U.withConfig),W}}function Kte(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:b5(t.components[n].defaultProps,r)}function Yte({props:e,name:t,defaultTheme:n}){const r=wk(n);return Kte({theme:r,name:t,props:e})}function Ek(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function Jte(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,a)=>a<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Ud(e){if(e.type)return e;if(e.charAt(0)==="#")return Ud(Jte(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(lc(9,e));let r=e.substring(t+1,e.length-1),a;if(n==="color"){if(r=r.split(" "),a=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a)===-1)throw new Error(lc(10,a))}else r=r.split(",");return r=r.map(c=>parseFloat(c)),{type:n,values:r,colorSpace:a}}function A1(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((a,c)=>c<3?parseInt(a,10):a):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function Qte(e){e=Ud(e);const{values:t}=e,n=t[0],r=t[1]/100,a=t[2]/100,c=r*Math.min(a,1-a),h=(w,A=(w+n/30)%12)=>a-c*Math.max(Math.min(A-3,9-A,1),-1);let o="rgb";const m=[Math.round(h(0)*255),Math.round(h(8)*255),Math.round(h(4)*255)];return e.type==="hsla"&&(o+="a",m.push(t[3])),A1({type:o,values:m})}function oS(e){e=Ud(e);let t=e.type==="hsl"||e.type==="hsla"?Ud(Qte(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ene(e,t){const n=oS(e),r=oS(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Oi(e,t){return e=Ud(e),t=Ek(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,A1(e)}function o0(e,t){if(e=Ud(e),t=Ek(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return A1(e)}function a0(e,t){if(e=Ud(e),t=Ek(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return A1(e)}function tne(e,t=.15){return oS(e)>.5?o0(e,t):a0(e,t)}function nne(e,t){return Fe({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const rne=["mode","contrastThreshold","tonalOffset"],YD={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Yg.white,default:Yg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},pE={text:{primary:Yg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Yg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function JD(e,t,n,r){const a=r.light||r,c=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=a0(e.main,a):t==="dark"&&(e.dark=o0(e.main,c)))}function ine(e="light"){return e==="dark"?{main:rp[200],light:rp[50],dark:rp[400]}:{main:rp[700],light:rp[400],dark:rp[800]}}function one(e="light"){return e==="dark"?{main:np[200],light:np[50],dark:np[400]}:{main:np[500],light:np[300],dark:np[700]}}function ane(e="light"){return e==="dark"?{main:tp[500],light:tp[300],dark:tp[700]}:{main:tp[700],light:tp[400],dark:tp[800]}}function sne(e="light"){return e==="dark"?{main:ip[400],light:ip[300],dark:ip[700]}:{main:ip[700],light:ip[500],dark:ip[900]}}function lne(e="light"){return e==="dark"?{main:op[400],light:op[300],dark:op[700]}:{main:op[800],light:op[500],dark:op[900]}}function une(e="light"){return e==="dark"?{main:Zm[400],light:Zm[300],dark:Zm[700]}:{main:"#ed6c02",light:Zm[500],dark:Zm[900]}}function cne(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,a=bn(e,rne),c=e.primary||ine(t),h=e.secondary||one(t),o=e.error||ane(t),m=e.info||sne(t),w=e.success||lne(t),A=e.warning||une(t);function P(k){return ene(k,pE.text.primary)>=n?pE.text.primary:YD.text.primary}const O=({color:k,name:V,mainShade:U=500,lightShade:W=300,darkShade:F=700})=>{if(k=Fe({},k),!k.main&&k[U]&&(k.main=k[U]),!k.hasOwnProperty("main"))throw new Error(lc(11,V?` (${V})`:"",U));if(typeof k.main!="string")throw new Error(lc(12,V?` (${V})`:"",JSON.stringify(k.main)));return JD(k,"light",W,r),JD(k,"dark",F,r),k.contrastText||(k.contrastText=P(k.main)),k},B={dark:pE,light:YD};return ts(Fe({common:Fe({},Yg),mode:t,primary:O({color:c,name:"primary"}),secondary:O({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:O({color:o,name:"error"}),warning:O({color:A,name:"warning"}),info:O({color:m,name:"info"}),success:O({color:w,name:"success"}),grey:fQ,contrastThreshold:n,getContrastText:P,augmentColor:O,tonalOffset:r},B[t]),a)}const dne=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function hne(e){return Math.round(e*1e5)/1e5}const QD={textTransform:"uppercase"},eR='"Roboto", "Helvetica", "Arial", sans-serif';function pne(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=eR,fontSize:a=14,fontWeightLight:c=300,fontWeightRegular:h=400,fontWeightMedium:o=500,fontWeightBold:m=700,htmlFontSize:w=16,allVariants:A,pxToRem:P}=n,O=bn(n,dne),B=a/14,N=P||(U=>`${U/w*B}rem`),k=(U,W,F,z,S)=>Fe({fontFamily:r,fontWeight:U,fontSize:N(W),lineHeight:F},r===eR?{letterSpacing:`${hne(z/W)}em`}:{},S,A),V={h1:k(c,96,1.167,-1.5),h2:k(c,60,1.2,-.5),h3:k(h,48,1.167,0),h4:k(h,34,1.235,.25),h5:k(h,24,1.334,0),h6:k(o,20,1.6,.15),subtitle1:k(h,16,1.75,.15),subtitle2:k(o,14,1.57,.1),body1:k(h,16,1.5,.15),body2:k(h,14,1.43,.15),button:k(o,14,1.75,.4,QD),caption:k(h,12,1.66,.4),overline:k(h,12,2.66,1,QD),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ts(Fe({htmlFontSize:w,pxToRem:N,fontFamily:r,fontSize:a,fontWeightLight:c,fontWeightRegular:h,fontWeightMedium:o,fontWeightBold:m},V),O,{clone:!1})}const fne=.2,mne=.14,gne=.12;function gi(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${fne})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${mne})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${gne})`].join(",")}const yne=["none",gi(0,2,1,-1,0,1,1,0,0,1,3,0),gi(0,3,1,-2,0,2,2,0,0,1,5,0),gi(0,3,3,-2,0,3,4,0,0,1,8,0),gi(0,2,4,-1,0,4,5,0,0,1,10,0),gi(0,3,5,-1,0,5,8,0,0,1,14,0),gi(0,3,5,-1,0,6,10,0,0,1,18,0),gi(0,4,5,-2,0,7,10,1,0,2,16,1),gi(0,5,5,-3,0,8,10,1,0,3,14,2),gi(0,5,6,-3,0,9,12,1,0,3,16,2),gi(0,6,6,-3,0,10,14,1,0,4,18,3),gi(0,6,7,-4,0,11,15,1,0,4,20,3),gi(0,7,8,-4,0,12,17,2,0,5,22,4),gi(0,7,8,-4,0,13,19,2,0,5,24,4),gi(0,7,9,-4,0,14,21,2,0,5,26,4),gi(0,8,9,-5,0,15,22,2,0,6,28,5),gi(0,8,10,-5,0,16,24,2,0,6,30,5),gi(0,8,11,-5,0,17,26,2,0,6,32,5),gi(0,9,11,-5,0,18,28,2,0,7,34,6),gi(0,9,12,-6,0,19,29,2,0,7,36,6),gi(0,10,13,-6,0,20,31,3,0,8,38,7),gi(0,10,13,-6,0,21,33,3,0,8,40,7),gi(0,10,14,-6,0,22,35,3,0,8,42,7),gi(0,11,14,-7,0,23,36,3,0,9,44,8),gi(0,11,15,-7,0,24,38,3,0,9,46,8)];var vne=yne;const _ne=["duration","easing","delay"],xne={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},bne={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function tR(e){return`${Math.round(e)}ms`}function wne(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Ene(e){const t=Fe({},xne,e.easing),n=Fe({},bne,e.duration);return Fe({getAutoHeightDuration:wne,create:(a=["all"],c={})=>{const{duration:h=n.standard,easing:o=t.easeInOut,delay:m=0}=c;return bn(c,_ne),(Array.isArray(a)?a:[a]).map(w=>`${w} ${typeof h=="string"?h:tR(h)} ${o} ${typeof m=="string"?m:tR(m)}`).join(",")}},e,{easing:t,duration:n})}const Cne={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var Sne=Cne;const Tne=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Y5(e={},...t){const{mixins:n={},palette:r={},transitions:a={},typography:c={}}=e,h=bn(e,Tne);if(e.vars)throw new Error(lc(18));const o=cne(r),m=bk(e);let w=ts(m,{mixins:nne(m.breakpoints,n),palette:o,shadows:vne.slice(),typography:pne(o,c),transitions:Ene(a),zIndex:Fe({},Sne)});return w=ts(w,h),w=t.reduce((A,P)=>ts(A,P),w),w.unstable_sxConfig=Fe({},T1,h==null?void 0:h.unstable_sxConfig),w.unstable_sx=function(P){return k1({sx:P,theme:this})},w}const kne=Y5();var M1=kne;function I1(){return wk(M1)}function Rr({props:e,name:t}){return Yte({props:e,name:t,defaultTheme:M1})}const vl=e=>wg(e)&&e!=="classes",Ane=wg,Mne=Xte({defaultTheme:M1,rootShouldForwardProp:vl});var cn=Mne;const Ine=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)};var nR=Ine;function s0(e){return typeof e=="string"}function Pne(e,t,n){return e===void 0||s0(e)?t:Fe({},t,{ownerState:Fe({},t.ownerState,n)})}const Dne={disableDefaultClasses:!1},Rne=g.exports.createContext(Dne);function J5(e){const{disableDefaultClasses:t}=g.exports.useContext(Rne);return n=>t?"":e(n)}function Q5(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function aS(e,t){return typeof e=="function"?e(t):e}function rR(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function Lne(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:a,className:c}=e;if(!t){const B=In(a==null?void 0:a.className,r==null?void 0:r.className,c,n==null?void 0:n.className),N=Fe({},n==null?void 0:n.style,a==null?void 0:a.style,r==null?void 0:r.style),k=Fe({},n,a,r);return B.length>0&&(k.className=B),Object.keys(N).length>0&&(k.style=N),{props:k,internalRef:void 0}}const h=Q5(Fe({},a,r)),o=rR(r),m=rR(a),w=t(h),A=In(w==null?void 0:w.className,n==null?void 0:n.className,c,a==null?void 0:a.className,r==null?void 0:r.className),P=Fe({},w==null?void 0:w.style,n==null?void 0:n.style,a==null?void 0:a.style,r==null?void 0:r.style),O=Fe({},w,n,m,o);return A.length>0&&(O.className=A),Object.keys(P).length>0&&(O.style=P),{props:O,internalRef:w.ref}}const One=["elementType","externalSlotProps","ownerState"];function l0(e){var t;const{elementType:n,externalSlotProps:r,ownerState:a}=e,c=bn(e,One),h=aS(r,a),{props:o,internalRef:m}=Lne(Fe({},c,{externalSlotProps:h})),w=Zi(m,h==null?void 0:h.ref,(t=e.additionalProps)==null?void 0:t.ref);return Pne(n,Fe({},o,{ref:w}),a)}function iR(e){return e.substring(2).toLowerCase()}function zne(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Bne(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:a,touchEvent:c="onTouchEnd"}=e,h=g.exports.useRef(!1),o=g.exports.useRef(null),m=g.exports.useRef(!1),w=g.exports.useRef(!1);g.exports.useEffect(()=>(setTimeout(()=>{m.current=!0},0),()=>{m.current=!1}),[]);const A=Zi(t.ref,o),P=Ia(N=>{const k=w.current;w.current=!1;const V=yo(o.current);if(!m.current||!o.current||"clientX"in N&&zne(N,V))return;if(h.current){h.current=!1;return}let U;N.composedPath?U=N.composedPath().indexOf(o.current)>-1:U=!V.documentElement.contains(N.target)||o.current.contains(N.target),!U&&(n||!k)&&a(N)}),O=N=>k=>{w.current=!0;const V=t.props[N];V&&V(k)},B={ref:A};return c!==!1&&(B[c]=O(c)),g.exports.useEffect(()=>{if(c!==!1){const N=iR(c),k=yo(o.current),V=()=>{h.current=!0};return k.addEventListener(N,P),k.addEventListener("touchmove",V),()=>{k.removeEventListener(N,P),k.removeEventListener("touchmove",V)}}},[P,c]),r!==!1&&(B[r]=O(r)),g.exports.useEffect(()=>{if(r!==!1){const N=iR(r),k=yo(o.current);return k.addEventListener(N,P),()=>{k.removeEventListener(N,P)}}},[P,r]),bt.exports.jsx(g.exports.Fragment,{children:g.exports.cloneElement(t,B)})}const Fne=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Nne(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function $ne(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function Une(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||$ne(e))}function jne(e){const t=[],n=[];return Array.from(e.querySelectorAll(Fne)).forEach((r,a)=>{const c=Nne(r);c===-1||!Une(r)||(c===0?t.push(r):n.push({documentOrder:a,tabIndex:c,node:r}))}),n.sort((r,a)=>r.tabIndex===a.tabIndex?r.documentOrder-a.documentOrder:r.tabIndex-a.tabIndex).map(r=>r.node).concat(t)}function Vne(){return!0}function Hne(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:a=!1,getTabbable:c=jne,isEnabled:h=Vne,open:o}=e,m=g.exports.useRef(!1),w=g.exports.useRef(null),A=g.exports.useRef(null),P=g.exports.useRef(null),O=g.exports.useRef(null),B=g.exports.useRef(!1),N=g.exports.useRef(null),k=Zi(t.ref,N),V=g.exports.useRef(null);g.exports.useEffect(()=>{!o||!N.current||(B.current=!n)},[n,o]),g.exports.useEffect(()=>{if(!o||!N.current)return;const F=yo(N.current);return N.current.contains(F.activeElement)||(N.current.hasAttribute("tabIndex")||N.current.setAttribute("tabIndex","-1"),B.current&&N.current.focus()),()=>{a||(P.current&&P.current.focus&&(m.current=!0,P.current.focus()),P.current=null)}},[o]),g.exports.useEffect(()=>{if(!o||!N.current)return;const F=yo(N.current),z=D=>{const{current:Y}=N;if(Y!==null){if(!F.hasFocus()||r||!h()||m.current){m.current=!1;return}if(!Y.contains(F.activeElement)){if(D&&O.current!==D.target||F.activeElement!==O.current)O.current=null;else if(O.current!==null)return;if(!B.current)return;let ee=[];if((F.activeElement===w.current||F.activeElement===A.current)&&(ee=c(N.current)),ee.length>0){var re,ae;const de=Boolean(((re=V.current)==null?void 0:re.shiftKey)&&((ae=V.current)==null?void 0:ae.key)==="Tab"),ke=ee[0],Oe=ee[ee.length-1];typeof ke!="string"&&typeof Oe!="string"&&(de?Oe.focus():ke.focus())}else Y.focus()}}},S=D=>{V.current=D,!(r||!h()||D.key!=="Tab")&&F.activeElement===N.current&&D.shiftKey&&(m.current=!0,A.current&&A.current.focus())};F.addEventListener("focusin",z),F.addEventListener("keydown",S,!0);const b=setInterval(()=>{F.activeElement&&F.activeElement.tagName==="BODY"&&z(null)},50);return()=>{clearInterval(b),F.removeEventListener("focusin",z),F.removeEventListener("keydown",S,!0)}},[n,r,a,h,o,c]);const U=F=>{P.current===null&&(P.current=F.relatedTarget),B.current=!0,O.current=F.target;const z=t.props.onFocus;z&&z(F)},W=F=>{P.current===null&&(P.current=F.relatedTarget),B.current=!0};return bt.exports.jsxs(g.exports.Fragment,{children:[bt.exports.jsx("div",{tabIndex:o?0:-1,onFocus:W,ref:w,"data-testid":"sentinelStart"}),g.exports.cloneElement(t,{ref:k,onFocus:U}),bt.exports.jsx("div",{tabIndex:o?0:-1,onFocus:W,ref:A,"data-testid":"sentinelEnd"})]})}var ga="top",as="bottom",ss="right",ya="left",Ck="auto",Cy=[ga,as,ss,ya],Kp="start",ty="end",Wne="clippingParents",eB="viewport",Ym="popper",Gne="reference",oR=Cy.reduce(function(e,t){return e.concat([t+"-"+Kp,t+"-"+ty])},[]),tB=[].concat(Cy,[Ck]).reduce(function(e,t){return e.concat([t,t+"-"+Kp,t+"-"+ty])},[]),qne="beforeRead",Zne="read",Xne="afterRead",Kne="beforeMain",Yne="main",Jne="afterMain",Qne="beforeWrite",ere="write",tre="afterWrite",nre=[qne,Zne,Xne,Kne,Yne,Jne,Qne,ere,tre];function gl(e){return e?(e.nodeName||"").toLowerCase():null}function ds(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function jd(e){var t=ds(e).Element;return e instanceof t||e instanceof Element}function ns(e){var t=ds(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Sk(e){if(typeof ShadowRoot=="undefined")return!1;var t=ds(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function rre(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},a=t.attributes[n]||{},c=t.elements[n];!ns(c)||!gl(c)||(Object.assign(c.style,r),Object.keys(a).forEach(function(h){var o=a[h];o===!1?c.removeAttribute(h):c.setAttribute(h,o===!0?"":o)}))})}function ire(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var a=t.elements[r],c=t.attributes[r]||{},h=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),o=h.reduce(function(m,w){return m[w]="",m},{});!ns(a)||!gl(a)||(Object.assign(a.style,o),Object.keys(c).forEach(function(m){a.removeAttribute(m)}))})}}var ore={name:"applyStyles",enabled:!0,phase:"write",fn:rre,effect:ire,requires:["computeStyles"]};function pl(e){return e.split("-")[0]}var Pd=Math.max,u0=Math.min,Yp=Math.round;function sS(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function nB(){return!/^((?!chrome|android).)*safari/i.test(sS())}function Jp(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),a=1,c=1;t&&ns(e)&&(a=e.offsetWidth>0&&Yp(r.width)/e.offsetWidth||1,c=e.offsetHeight>0&&Yp(r.height)/e.offsetHeight||1);var h=jd(e)?ds(e):window,o=h.visualViewport,m=!nB()&&n,w=(r.left+(m&&o?o.offsetLeft:0))/a,A=(r.top+(m&&o?o.offsetTop:0))/c,P=r.width/a,O=r.height/c;return{width:P,height:O,top:A,right:w+P,bottom:A+O,left:w,x:w,y:A}}function Tk(e){var t=Jp(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function rB(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Sk(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Yl(e){return ds(e).getComputedStyle(e)}function are(e){return["table","td","th"].indexOf(gl(e))>=0}function yc(e){return((jd(e)?e.ownerDocument:e.document)||window.document).documentElement}function P1(e){return gl(e)==="html"?e:e.assignedSlot||e.parentNode||(Sk(e)?e.host:null)||yc(e)}function aR(e){return!ns(e)||Yl(e).position==="fixed"?null:e.offsetParent}function sre(e){var t=/firefox/i.test(sS()),n=/Trident/i.test(sS());if(n&&ns(e)){var r=Yl(e);if(r.position==="fixed")return null}var a=P1(e);for(Sk(a)&&(a=a.host);ns(a)&&["html","body"].indexOf(gl(a))<0;){var c=Yl(a);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||t&&c.willChange==="filter"||t&&c.filter&&c.filter!=="none")return a;a=a.parentNode}return null}function Sy(e){for(var t=ds(e),n=aR(e);n&&are(n)&&Yl(n).position==="static";)n=aR(n);return n&&(gl(n)==="html"||gl(n)==="body"&&Yl(n).position==="static")?t:n||sre(e)||t}function kk(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Eg(e,t,n){return Pd(e,u0(t,n))}function lre(e,t,n){var r=Eg(e,t,n);return r>n?n:r}function iB(){return{top:0,right:0,bottom:0,left:0}}function oB(e){return Object.assign({},iB(),e)}function aB(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var ure=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,oB(typeof t!="number"?t:aB(t,Cy))};function cre(e){var t,n=e.state,r=e.name,a=e.options,c=n.elements.arrow,h=n.modifiersData.popperOffsets,o=pl(n.placement),m=kk(o),w=[ya,ss].indexOf(o)>=0,A=w?"height":"width";if(!(!c||!h)){var P=ure(a.padding,n),O=Tk(c),B=m==="y"?ga:ya,N=m==="y"?as:ss,k=n.rects.reference[A]+n.rects.reference[m]-h[m]-n.rects.popper[A],V=h[m]-n.rects.reference[m],U=Sy(c),W=U?m==="y"?U.clientHeight||0:U.clientWidth||0:0,F=k/2-V/2,z=P[B],S=W-O[A]-P[N],b=W/2-O[A]/2+F,D=Eg(z,b,S),Y=m;n.modifiersData[r]=(t={},t[Y]=D,t.centerOffset=D-b,t)}}function dre(e){var t=e.state,n=e.options,r=n.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||!rB(t.elements.popper,a)||(t.elements.arrow=a))}var hre={name:"arrow",enabled:!0,phase:"main",fn:cre,effect:dre,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Qp(e){return e.split("-")[1]}var pre={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fre(e){var t=e.x,n=e.y,r=window,a=r.devicePixelRatio||1;return{x:Yp(t*a)/a||0,y:Yp(n*a)/a||0}}function sR(e){var t,n=e.popper,r=e.popperRect,a=e.placement,c=e.variation,h=e.offsets,o=e.position,m=e.gpuAcceleration,w=e.adaptive,A=e.roundOffsets,P=e.isFixed,O=h.x,B=O===void 0?0:O,N=h.y,k=N===void 0?0:N,V=typeof A=="function"?A({x:B,y:k}):{x:B,y:k};B=V.x,k=V.y;var U=h.hasOwnProperty("x"),W=h.hasOwnProperty("y"),F=ya,z=ga,S=window;if(w){var b=Sy(n),D="clientHeight",Y="clientWidth";if(b===ds(n)&&(b=yc(n),Yl(b).position!=="static"&&o==="absolute"&&(D="scrollHeight",Y="scrollWidth")),b=b,a===ga||(a===ya||a===ss)&&c===ty){z=as;var re=P&&b===S&&S.visualViewport?S.visualViewport.height:b[D];k-=re-r.height,k*=m?1:-1}if(a===ya||(a===ga||a===as)&&c===ty){F=ss;var ae=P&&b===S&&S.visualViewport?S.visualViewport.width:b[Y];B-=ae-r.width,B*=m?1:-1}}var ee=Object.assign({position:o},w&&pre),de=A===!0?fre({x:B,y:k}):{x:B,y:k};if(B=de.x,k=de.y,m){var ke;return Object.assign({},ee,(ke={},ke[z]=W?"0":"",ke[F]=U?"0":"",ke.transform=(S.devicePixelRatio||1)<=1?"translate("+B+"px, "+k+"px)":"translate3d("+B+"px, "+k+"px, 0)",ke))}return Object.assign({},ee,(t={},t[z]=W?k+"px":"",t[F]=U?B+"px":"",t.transform="",t))}function mre(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=r===void 0?!0:r,c=n.adaptive,h=c===void 0?!0:c,o=n.roundOffsets,m=o===void 0?!0:o,w={placement:pl(t.placement),variation:Qp(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,sR(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:h,roundOffsets:m})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,sR(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var gre={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:mre,data:{}},L_={passive:!0};function yre(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,c=a===void 0?!0:a,h=r.resize,o=h===void 0?!0:h,m=ds(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return c&&w.forEach(function(A){A.addEventListener("scroll",n.update,L_)}),o&&m.addEventListener("resize",n.update,L_),function(){c&&w.forEach(function(A){A.removeEventListener("scroll",n.update,L_)}),o&&m.removeEventListener("resize",n.update,L_)}}var vre={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yre,data:{}},_re={left:"right",right:"left",bottom:"top",top:"bottom"};function cx(e){return e.replace(/left|right|bottom|top/g,function(t){return _re[t]})}var xre={start:"end",end:"start"};function lR(e){return e.replace(/start|end/g,function(t){return xre[t]})}function Ak(e){var t=ds(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Mk(e){return Jp(yc(e)).left+Ak(e).scrollLeft}function bre(e,t){var n=ds(e),r=yc(e),a=n.visualViewport,c=r.clientWidth,h=r.clientHeight,o=0,m=0;if(a){c=a.width,h=a.height;var w=nB();(w||!w&&t==="fixed")&&(o=a.offsetLeft,m=a.offsetTop)}return{width:c,height:h,x:o+Mk(e),y:m}}function wre(e){var t,n=yc(e),r=Ak(e),a=(t=e.ownerDocument)==null?void 0:t.body,c=Pd(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),h=Pd(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),o=-r.scrollLeft+Mk(e),m=-r.scrollTop;return Yl(a||n).direction==="rtl"&&(o+=Pd(n.clientWidth,a?a.clientWidth:0)-c),{width:c,height:h,x:o,y:m}}function Ik(e){var t=Yl(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function sB(e){return["html","body","#document"].indexOf(gl(e))>=0?e.ownerDocument.body:ns(e)&&Ik(e)?e:sB(P1(e))}function Cg(e,t){var n;t===void 0&&(t=[]);var r=sB(e),a=r===((n=e.ownerDocument)==null?void 0:n.body),c=ds(r),h=a?[c].concat(c.visualViewport||[],Ik(r)?r:[]):r,o=t.concat(h);return a?o:o.concat(Cg(P1(h)))}function lS(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ere(e,t){var n=Jp(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function uR(e,t,n){return t===eB?lS(bre(e,n)):jd(t)?Ere(t,n):lS(wre(yc(e)))}function Cre(e){var t=Cg(P1(e)),n=["absolute","fixed"].indexOf(Yl(e).position)>=0,r=n&&ns(e)?Sy(e):e;return jd(r)?t.filter(function(a){return jd(a)&&rB(a,r)&&gl(a)!=="body"}):[]}function Sre(e,t,n,r){var a=t==="clippingParents"?Cre(e):[].concat(t),c=[].concat(a,[n]),h=c[0],o=c.reduce(function(m,w){var A=uR(e,w,r);return m.top=Pd(A.top,m.top),m.right=u0(A.right,m.right),m.bottom=u0(A.bottom,m.bottom),m.left=Pd(A.left,m.left),m},uR(e,h,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function lB(e){var t=e.reference,n=e.element,r=e.placement,a=r?pl(r):null,c=r?Qp(r):null,h=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2,m;switch(a){case ga:m={x:h,y:t.y-n.height};break;case as:m={x:h,y:t.y+t.height};break;case ss:m={x:t.x+t.width,y:o};break;case ya:m={x:t.x-n.width,y:o};break;default:m={x:t.x,y:t.y}}var w=a?kk(a):null;if(w!=null){var A=w==="y"?"height":"width";switch(c){case Kp:m[w]=m[w]-(t[A]/2-n[A]/2);break;case ty:m[w]=m[w]+(t[A]/2-n[A]/2);break}}return m}function ny(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=r===void 0?e.placement:r,c=n.strategy,h=c===void 0?e.strategy:c,o=n.boundary,m=o===void 0?Wne:o,w=n.rootBoundary,A=w===void 0?eB:w,P=n.elementContext,O=P===void 0?Ym:P,B=n.altBoundary,N=B===void 0?!1:B,k=n.padding,V=k===void 0?0:k,U=oB(typeof V!="number"?V:aB(V,Cy)),W=O===Ym?Gne:Ym,F=e.rects.popper,z=e.elements[N?W:O],S=Sre(jd(z)?z:z.contextElement||yc(e.elements.popper),m,A,h),b=Jp(e.elements.reference),D=lB({reference:b,element:F,strategy:"absolute",placement:a}),Y=lS(Object.assign({},F,D)),re=O===Ym?Y:b,ae={top:S.top-re.top+U.top,bottom:re.bottom-S.bottom+U.bottom,left:S.left-re.left+U.left,right:re.right-S.right+U.right},ee=e.modifiersData.offset;if(O===Ym&&ee){var de=ee[a];Object.keys(ae).forEach(function(ke){var Oe=[ss,as].indexOf(ke)>=0?1:-1,Le=[ga,as].indexOf(ke)>=0?"y":"x";ae[ke]+=de[Le]*Oe})}return ae}function Tre(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=n.boundary,c=n.rootBoundary,h=n.padding,o=n.flipVariations,m=n.allowedAutoPlacements,w=m===void 0?tB:m,A=Qp(r),P=A?o?oR:oR.filter(function(N){return Qp(N)===A}):Cy,O=P.filter(function(N){return w.indexOf(N)>=0});O.length===0&&(O=P);var B=O.reduce(function(N,k){return N[k]=ny(e,{placement:k,boundary:a,rootBoundary:c,padding:h})[pl(k)],N},{});return Object.keys(B).sort(function(N,k){return B[N]-B[k]})}function kre(e){if(pl(e)===Ck)return[];var t=cx(e);return[lR(e),t,lR(t)]}function Are(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,c=a===void 0?!0:a,h=n.altAxis,o=h===void 0?!0:h,m=n.fallbackPlacements,w=n.padding,A=n.boundary,P=n.rootBoundary,O=n.altBoundary,B=n.flipVariations,N=B===void 0?!0:B,k=n.allowedAutoPlacements,V=t.options.placement,U=pl(V),W=U===V,F=m||(W||!N?[cx(V)]:kre(V)),z=[V].concat(F).reduce(function($t,an){return $t.concat(pl(an)===Ck?Tre(t,{placement:an,boundary:A,rootBoundary:P,padding:w,flipVariations:N,allowedAutoPlacements:k}):an)},[]),S=t.rects.reference,b=t.rects.popper,D=new Map,Y=!0,re=z[0],ae=0;ae<z.length;ae++){var ee=z[ae],de=pl(ee),ke=Qp(ee)===Kp,Oe=[ga,as].indexOf(de)>=0,Le=Oe?"width":"height",Ee=ny(t,{placement:ee,boundary:A,rootBoundary:P,altBoundary:O,padding:w}),ct=Oe?ke?ss:ya:ke?as:ga;S[Le]>b[Le]&&(ct=cx(ct));var Ze=cx(ct),rt=[];if(c&&rt.push(Ee[de]<=0),o&&rt.push(Ee[ct]<=0,Ee[Ze]<=0),rt.every(function($t){return $t})){re=ee,Y=!1;break}D.set(ee,rt)}if(Y)for(var tt=N?3:1,xe=function(an){var en=z.find(function(ln){var mn=D.get(ln);if(mn)return mn.slice(0,an).every(function(fn){return fn})});if(en)return re=en,"break"},be=tt;be>0;be--){var nn=xe(be);if(nn==="break")break}t.placement!==re&&(t.modifiersData[r]._skip=!0,t.placement=re,t.reset=!0)}}var Mre={name:"flip",enabled:!0,phase:"main",fn:Are,requiresIfExists:["offset"],data:{_skip:!1}};function cR(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function dR(e){return[ga,ss,as,ya].some(function(t){return e[t]>=0})}function Ire(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,c=t.modifiersData.preventOverflow,h=ny(t,{elementContext:"reference"}),o=ny(t,{altBoundary:!0}),m=cR(h,r),w=cR(o,a,c),A=dR(m),P=dR(w);t.modifiersData[n]={referenceClippingOffsets:m,popperEscapeOffsets:w,isReferenceHidden:A,hasPopperEscaped:P},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":A,"data-popper-escaped":P})}var Pre={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ire};function Dre(e,t,n){var r=pl(e),a=[ya,ga].indexOf(r)>=0?-1:1,c=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,h=c[0],o=c[1];return h=h||0,o=(o||0)*a,[ya,ss].indexOf(r)>=0?{x:o,y:h}:{x:h,y:o}}function Rre(e){var t=e.state,n=e.options,r=e.name,a=n.offset,c=a===void 0?[0,0]:a,h=tB.reduce(function(A,P){return A[P]=Dre(P,t.rects,c),A},{}),o=h[t.placement],m=o.x,w=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=m,t.modifiersData.popperOffsets.y+=w),t.modifiersData[r]=h}var Lre={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rre};function Ore(e){var t=e.state,n=e.name;t.modifiersData[n]=lB({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var zre={name:"popperOffsets",enabled:!0,phase:"read",fn:Ore,data:{}};function Bre(e){return e==="x"?"y":"x"}function Fre(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,c=a===void 0?!0:a,h=n.altAxis,o=h===void 0?!1:h,m=n.boundary,w=n.rootBoundary,A=n.altBoundary,P=n.padding,O=n.tether,B=O===void 0?!0:O,N=n.tetherOffset,k=N===void 0?0:N,V=ny(t,{boundary:m,rootBoundary:w,padding:P,altBoundary:A}),U=pl(t.placement),W=Qp(t.placement),F=!W,z=kk(U),S=Bre(z),b=t.modifiersData.popperOffsets,D=t.rects.reference,Y=t.rects.popper,re=typeof k=="function"?k(Object.assign({},t.rects,{placement:t.placement})):k,ae=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),ee=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,de={x:0,y:0};if(!!b){if(c){var ke,Oe=z==="y"?ga:ya,Le=z==="y"?as:ss,Ee=z==="y"?"height":"width",ct=b[z],Ze=ct+V[Oe],rt=ct-V[Le],tt=B?-Y[Ee]/2:0,xe=W===Kp?D[Ee]:Y[Ee],be=W===Kp?-Y[Ee]:-D[Ee],nn=t.elements.arrow,$t=B&&nn?Tk(nn):{width:0,height:0},an=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:iB(),en=an[Oe],ln=an[Le],mn=Eg(0,D[Ee],$t[Ee]),fn=F?D[Ee]/2-tt-mn-en-ae.mainAxis:xe-mn-en-ae.mainAxis,An=F?-D[Ee]/2+tt+mn+ln+ae.mainAxis:be+mn+ln+ae.mainAxis,ze=t.elements.arrow&&Sy(t.elements.arrow),Xe=ze?z==="y"?ze.clientTop||0:ze.clientLeft||0:0,ft=(ke=ee==null?void 0:ee[z])!=null?ke:0,Et=ct+fn-ft-Xe,_t=ct+An-ft,ht=Eg(B?u0(Ze,Et):Ze,ct,B?Pd(rt,_t):rt);b[z]=ht,de[z]=ht-ct}if(o){var Pt,_n=z==="x"?ga:ya,On=z==="x"?as:ss,Ln=b[S],Mn=S==="y"?"height":"width",Zn=Ln+V[_n],Pe=Ln-V[On],Je=[ga,ya].indexOf(U)!==-1,ie=(Pt=ee==null?void 0:ee[S])!=null?Pt:0,ue=Je?Zn:Ln-D[Mn]-Y[Mn]-ie+ae.altAxis,De=Je?Ln+D[Mn]+Y[Mn]-ie-ae.altAxis:Pe,ye=B&&Je?lre(ue,Ln,De):Eg(B?ue:Zn,Ln,B?De:Pe);b[S]=ye,de[S]=ye-Ln}t.modifiersData[r]=de}}var Nre={name:"preventOverflow",enabled:!0,phase:"main",fn:Fre,requiresIfExists:["offset"]};function $re(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ure(e){return e===ds(e)||!ns(e)?Ak(e):$re(e)}function jre(e){var t=e.getBoundingClientRect(),n=Yp(t.width)/e.offsetWidth||1,r=Yp(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Vre(e,t,n){n===void 0&&(n=!1);var r=ns(t),a=ns(t)&&jre(t),c=yc(t),h=Jp(e,a,n),o={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(r||!r&&!n)&&((gl(t)!=="body"||Ik(c))&&(o=Ure(t)),ns(t)?(m=Jp(t,!0),m.x+=t.clientLeft,m.y+=t.clientTop):c&&(m.x=Mk(c))),{x:h.left+o.scrollLeft-m.x,y:h.top+o.scrollTop-m.y,width:h.width,height:h.height}}function Hre(e){var t=new Map,n=new Set,r=[];e.forEach(function(c){t.set(c.name,c)});function a(c){n.add(c.name);var h=[].concat(c.requires||[],c.requiresIfExists||[]);h.forEach(function(o){if(!n.has(o)){var m=t.get(o);m&&a(m)}}),r.push(c)}return e.forEach(function(c){n.has(c.name)||a(c)}),r}function Wre(e){var t=Hre(e);return nre.reduce(function(n,r){return n.concat(t.filter(function(a){return a.phase===r}))},[])}function Gre(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function qre(e){var t=e.reduce(function(n,r){var a=n[r.name];return n[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var hR={placement:"bottom",modifiers:[],strategy:"absolute"};function pR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Zre(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,a=t.defaultOptions,c=a===void 0?hR:a;return function(o,m,w){w===void 0&&(w=c);var A={placement:"bottom",orderedModifiers:[],options:Object.assign({},hR,c),modifiersData:{},elements:{reference:o,popper:m},attributes:{},styles:{}},P=[],O=!1,B={state:A,setOptions:function(U){var W=typeof U=="function"?U(A.options):U;k(),A.options=Object.assign({},c,A.options,W),A.scrollParents={reference:jd(o)?Cg(o):o.contextElement?Cg(o.contextElement):[],popper:Cg(m)};var F=Wre(qre([].concat(r,A.options.modifiers)));return A.orderedModifiers=F.filter(function(z){return z.enabled}),N(),B.update()},forceUpdate:function(){if(!O){var U=A.elements,W=U.reference,F=U.popper;if(!!pR(W,F)){A.rects={reference:Vre(W,Sy(F),A.options.strategy==="fixed"),popper:Tk(F)},A.reset=!1,A.placement=A.options.placement,A.orderedModifiers.forEach(function(ae){return A.modifiersData[ae.name]=Object.assign({},ae.data)});for(var z=0;z<A.orderedModifiers.length;z++){if(A.reset===!0){A.reset=!1,z=-1;continue}var S=A.orderedModifiers[z],b=S.fn,D=S.options,Y=D===void 0?{}:D,re=S.name;typeof b=="function"&&(A=b({state:A,options:Y,name:re,instance:B})||A)}}}},update:Gre(function(){return new Promise(function(V){B.forceUpdate(),V(A)})}),destroy:function(){k(),O=!0}};if(!pR(o,m))return B;B.setOptions(w).then(function(V){!O&&w.onFirstUpdate&&w.onFirstUpdate(V)});function N(){A.orderedModifiers.forEach(function(V){var U=V.name,W=V.options,F=W===void 0?{}:W,z=V.effect;if(typeof z=="function"){var S=z({state:A,name:U,instance:B,options:F}),b=function(){};P.push(S||b)}})}function k(){P.forEach(function(V){return V()}),P=[]}return B}}var Xre=[vre,zre,gre,ore,Lre,Mre,Nre,hre,Pre],Kre=Zre({defaultModifiers:Xre});function Yre(e){return typeof e=="function"?e():e}const Jre=g.exports.forwardRef(function(t,n){const{children:r,container:a,disablePortal:c=!1}=t,[h,o]=g.exports.useState(null),m=Zi(g.exports.isValidElement(r)?r.ref:null,n);if(Kl(()=>{c||o(Yre(a)||document.body)},[a,c]),Kl(()=>{if(h&&!c)return n0(n,h),()=>{n0(n,null)}},[n,h,c]),c){if(g.exports.isValidElement(r)){const w={ref:m};return g.exports.cloneElement(r,w)}return bt.exports.jsx(g.exports.Fragment,{children:r})}return bt.exports.jsx(g.exports.Fragment,{children:h&&Xu.exports.createPortal(r,h)})});var uB=Jre;function Qre(e){return vr("MuiPopper",e)}ar("MuiPopper",["root"]);const eie=["anchorEl","children","component","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","slotProps","slots","TransitionProps"],tie=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function nie(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function uS(e){return typeof e=="function"?e():e}function rie(e){return e.nodeType!==void 0}const iie=()=>kr({root:["root"]},J5(Qre)),oie={},aie=g.exports.forwardRef(function(t,n){var r;const{anchorEl:a,children:c,component:h,direction:o,disablePortal:m,modifiers:w,open:A,ownerState:P,placement:O,popperOptions:B,popperRef:N,slotProps:k={},slots:V={},TransitionProps:U}=t,W=bn(t,eie),F=g.exports.useRef(null),z=Zi(F,n),S=g.exports.useRef(null),b=Zi(S,N),D=g.exports.useRef(b);Kl(()=>{D.current=b},[b]),g.exports.useImperativeHandle(N,()=>S.current,[]);const Y=nie(O,o),[re,ae]=g.exports.useState(Y),[ee,de]=g.exports.useState(uS(a));g.exports.useEffect(()=>{S.current&&S.current.forceUpdate()}),g.exports.useEffect(()=>{a&&de(uS(a))},[a]),Kl(()=>{if(!ee||!A)return;const ct=tt=>{ae(tt.placement)};let Ze=[{name:"preventOverflow",options:{altBoundary:m}},{name:"flip",options:{altBoundary:m}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:tt})=>{ct(tt)}}];w!=null&&(Ze=Ze.concat(w)),B&&B.modifiers!=null&&(Ze=Ze.concat(B.modifiers));const rt=Kre(ee,F.current,Fe({placement:Y},B,{modifiers:Ze}));return D.current(rt),()=>{rt.destroy(),D.current(null)}},[ee,m,w,A,B,Y]);const ke={placement:re};U!==null&&(ke.TransitionProps=U);const Oe=iie(),Le=(r=h!=null?h:V.root)!=null?r:"div",Ee=l0({elementType:Le,externalSlotProps:k.root,externalForwardedProps:W,additionalProps:{role:"tooltip",ref:z},ownerState:Fe({},t,P),className:Oe.root});return bt.exports.jsx(Le,Fe({},Ee,{children:typeof c=="function"?c(ke):c}))}),sie=g.exports.forwardRef(function(t,n){const{anchorEl:r,children:a,container:c,direction:h="ltr",disablePortal:o=!1,keepMounted:m=!1,modifiers:w,open:A,placement:P="bottom",popperOptions:O=oie,popperRef:B,style:N,transition:k=!1,slotProps:V={},slots:U={}}=t,W=bn(t,tie),[F,z]=g.exports.useState(!0),S=()=>{z(!1)},b=()=>{z(!0)};if(!m&&!A&&(!k||F))return null;let D;if(c)D=c;else if(r){const ae=uS(r);D=ae&&rie(ae)?yo(ae).body:yo(null).body}const Y=!A&&m&&(!k||F)?"none":void 0,re=k?{in:A,onEnter:S,onExited:b}:void 0;return bt.exports.jsx(uB,{disablePortal:o,container:D,children:bt.exports.jsx(aie,Fe({anchorEl:r,direction:h,disablePortal:o,modifiers:w,ref:n,open:k?!F:A,placement:P,popperOptions:O,popperRef:B,slotProps:V,slots:U},W,{style:Fe({position:"fixed",top:0,left:0,display:Y},N),TransitionProps:re,children:a}))})});var lie=sie;function uie(e){const t=yo(e);return t.body===e?$d(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Sg(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function fR(e){return parseInt($d(e).getComputedStyle(e).paddingRight,10)||0}function cie(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function mR(e,t,n,r,a){const c=[t,n,...r];[].forEach.call(e.children,h=>{const o=c.indexOf(h)===-1,m=!cie(h);o&&m&&Sg(h,a)})}function fE(e,t){let n=-1;return e.some((r,a)=>t(r)?(n=a,!0):!1),n}function die(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(uie(r)){const h=x5(yo(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${fR(r)+h}px`;const o=yo(r).querySelectorAll(".mui-fixed");[].forEach.call(o,m=>{n.push({value:m.style.paddingRight,property:"padding-right",el:m}),m.style.paddingRight=`${fR(m)+h}px`})}let c;if(r.parentNode instanceof DocumentFragment)c=yo(r).body;else{const h=r.parentElement,o=$d(r);c=(h==null?void 0:h.nodeName)==="HTML"&&o.getComputedStyle(h).overflowY==="scroll"?h:r}n.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return()=>{n.forEach(({value:c,el:h,property:o})=>{c?h.style.setProperty(o,c):h.style.removeProperty(o)})}}function hie(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class pie{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&Sg(t.modalRef,!1);const a=hie(n);mR(n,t.mount,t.modalRef,a,!0);const c=fE(this.containers,h=>h.container===n);return c!==-1?(this.containers[c].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:a}),r)}mount(t,n){const r=fE(this.containers,c=>c.modals.indexOf(t)!==-1),a=this.containers[r];a.restore||(a.restore=die(a,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const a=fE(this.containers,h=>h.modals.indexOf(t)!==-1),c=this.containers[a];if(c.modals.splice(c.modals.indexOf(t),1),this.modals.splice(r,1),c.modals.length===0)c.restore&&c.restore(),t.modalRef&&Sg(t.modalRef,n),mR(c.container,t.mount,t.modalRef,c.hiddenSiblings,!1),this.containers.splice(a,1);else{const h=c.modals[c.modals.length-1];h.modalRef&&Sg(h.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function fie(e){return vr("MuiModal",e)}ar("MuiModal",["root","hidden","backdrop"]);const mie=["children","closeAfterTransition","component","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited","slotProps","slots"],gie=e=>{const{open:t,exited:n}=e;return kr({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},J5(fie))};function yie(e){return typeof e=="function"?e():e}function vie(e){return e?e.props.hasOwnProperty("in"):!1}const _ie=new pie,xie=g.exports.forwardRef(function(t,n){var r,a;const{children:c,closeAfterTransition:h=!1,component:o,container:m,disableAutoFocus:w=!1,disableEnforceFocus:A=!1,disableEscapeKeyDown:P=!1,disablePortal:O=!1,disableRestoreFocus:B=!1,disableScrollLock:N=!1,hideBackdrop:k=!1,keepMounted:V=!1,manager:U=_ie,onBackdropClick:W,onClose:F,onKeyDown:z,open:S,onTransitionEnter:b,onTransitionExited:D,slotProps:Y={},slots:re={}}=t,ae=bn(t,mie),[ee,de]=g.exports.useState(!S),ke=g.exports.useRef({}),Oe=g.exports.useRef(null),Le=g.exports.useRef(null),Ee=Zi(Le,n),ct=vie(c),Ze=(r=t["aria-hidden"])!=null?r:!0,rt=()=>yo(Oe.current),tt=()=>(ke.current.modalRef=Le.current,ke.current.mountNode=Oe.current,ke.current),xe=()=>{U.mount(tt(),{disableScrollLock:N}),Le.current&&(Le.current.scrollTop=0)},be=Ia(()=>{const Pt=yie(m)||rt().body;U.add(tt(),Pt),Le.current&&xe()}),nn=g.exports.useCallback(()=>U.isTopModal(tt()),[U]),$t=Ia(Pt=>{Oe.current=Pt,!(!Pt||!Le.current)&&(S&&nn()?xe():Sg(Le.current,Ze))}),an=g.exports.useCallback(()=>{U.remove(tt(),Ze)},[U,Ze]);g.exports.useEffect(()=>()=>{an()},[an]),g.exports.useEffect(()=>{S?be():(!ct||!h)&&an()},[S,an,ct,h,be]);const en=Fe({},t,{closeAfterTransition:h,disableAutoFocus:w,disableEnforceFocus:A,disableEscapeKeyDown:P,disablePortal:O,disableRestoreFocus:B,disableScrollLock:N,exited:ee,hideBackdrop:k,keepMounted:V}),ln=gie(en),mn=()=>{de(!1),b&&b()},fn=()=>{de(!0),D&&D(),h&&an()},An=Pt=>{Pt.target===Pt.currentTarget&&(W&&W(Pt),F&&F(Pt,"backdropClick"))},ze=Pt=>{z&&z(Pt),!(Pt.key!=="Escape"||!nn())&&(P||(Pt.stopPropagation(),F&&F(Pt,"escapeKeyDown")))},Xe={};c.props.tabIndex===void 0&&(Xe.tabIndex="-1"),ct&&(Xe.onEnter=eS(mn,c.props.onEnter),Xe.onExited=eS(fn,c.props.onExited));const ft=(a=o!=null?o:re.root)!=null?a:"div",Et=l0({elementType:ft,externalSlotProps:Y.root,externalForwardedProps:ae,additionalProps:{ref:Ee,role:"presentation",onKeyDown:ze},className:ln.root,ownerState:en}),_t=re.backdrop,ht=l0({elementType:_t,externalSlotProps:Y.backdrop,additionalProps:{"aria-hidden":!0,onClick:An,open:S},className:ln.backdrop,ownerState:en});return!V&&!S&&(!ct||ee)?null:bt.exports.jsx(uB,{ref:$t,container:m,disablePortal:O,children:bt.exports.jsxs(ft,Fe({},Et,{children:[!k&&_t?bt.exports.jsx(_t,Fe({},ht)):null,bt.exports.jsx(Hne,{disableEnforceFocus:A,disableAutoFocus:w,disableRestoreFocus:B,isEnabled:nn,open:S,children:g.exports.cloneElement(c,Xe)})]}))})});var bie=xie;function wie(e){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:a,ref:c,resumeHideDuration:h}=e,o=g.exports.useRef();g.exports.useEffect(()=>{if(!a)return;function W(F){F.defaultPrevented||(F.key==="Escape"||F.key==="Esc")&&(r==null||r(F,"escapeKeyDown"))}return document.addEventListener("keydown",W),()=>{document.removeEventListener("keydown",W)}},[a,r]);const m=Ia((W,F)=>{r==null||r(W,F)}),w=Ia(W=>{!r||W==null||(clearTimeout(o.current),o.current=setTimeout(()=>{m(null,"timeout")},W))});g.exports.useEffect(()=>(a&&w(t),()=>{clearTimeout(o.current)}),[a,t,w]);const A=W=>{r==null||r(W,"clickaway")},P=()=>{clearTimeout(o.current)},O=g.exports.useCallback(()=>{t!=null&&w(h!=null?h:t*.5)},[t,h,w]),B=W=>F=>{const z=W.onBlur;z==null||z(F),O()},N=W=>F=>{const z=W.onFocus;z==null||z(F),P()},k=W=>F=>{const z=W.onMouseEnter;z==null||z(F),P()},V=W=>F=>{const z=W.onMouseLeave;z==null||z(F),O()};return g.exports.useEffect(()=>{if(!n&&a)return window.addEventListener("focus",O),window.addEventListener("blur",P),()=>{window.removeEventListener("focus",O),window.removeEventListener("blur",P)}},[n,O,a]),{getRootProps:(W={})=>{const F=Q5(e),z=Fe({},F,W);return Fe({ref:c,role:"presentation"},z,{onBlur:B(z),onFocus:N(z),onMouseEnter:k(z),onMouseLeave:V(z)})},onClickAway:A}}const Eie=["onChange","maxRows","minRows","style","value"];function O_(e){return parseInt(e,10)||0}const Cie={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function gR(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const Sie=g.exports.forwardRef(function(t,n){const{onChange:r,maxRows:a,minRows:c=1,style:h,value:o}=t,m=bn(t,Eie),{current:w}=g.exports.useRef(o!=null),A=g.exports.useRef(null),P=Zi(n,A),O=g.exports.useRef(null),B=g.exports.useRef(0),[N,k]=g.exports.useState({outerHeightStyle:0}),V=g.exports.useCallback(()=>{const S=A.current,D=$d(S).getComputedStyle(S);if(D.width==="0px")return{outerHeightStyle:0};const Y=O.current;Y.style.width=D.width,Y.value=S.value||t.placeholder||"x",Y.value.slice(-1)===`
`&&(Y.value+=" ");const re=D.boxSizing,ae=O_(D.paddingBottom)+O_(D.paddingTop),ee=O_(D.borderBottomWidth)+O_(D.borderTopWidth),de=Y.scrollHeight;Y.value="x";const ke=Y.scrollHeight;let Oe=de;c&&(Oe=Math.max(Number(c)*ke,Oe)),a&&(Oe=Math.min(Number(a)*ke,Oe)),Oe=Math.max(Oe,ke);const Le=Oe+(re==="border-box"?ae+ee:0),Ee=Math.abs(Oe-de)<=1;return{outerHeightStyle:Le,overflow:Ee}},[a,c,t.placeholder]),U=(S,b)=>{const{outerHeightStyle:D,overflow:Y}=b;return B.current<20&&(D>0&&Math.abs((S.outerHeightStyle||0)-D)>1||S.overflow!==Y)?(B.current+=1,{overflow:Y,outerHeightStyle:D}):S},W=g.exports.useCallback(()=>{const S=V();gR(S)||k(b=>U(b,S))},[V]),F=()=>{const S=V();gR(S)||Xu.exports.flushSync(()=>{k(b=>U(b,S))})};g.exports.useEffect(()=>{const S=_5(()=>{B.current=0,A.current&&F()});let b;const D=A.current,Y=$d(D);return Y.addEventListener("resize",S),typeof ResizeObserver!="undefined"&&(b=new ResizeObserver(S),b.observe(D)),()=>{S.clear(),Y.removeEventListener("resize",S),b&&b.disconnect()}}),Kl(()=>{W()}),g.exports.useEffect(()=>{B.current=0},[o]);const z=S=>{B.current=0,w||W(),r&&r(S)};return bt.exports.jsxs(g.exports.Fragment,{children:[bt.exports.jsx("textarea",Fe({value:o,onChange:z,ref:P,rows:c,style:Fe({height:N.outerHeightStyle,overflow:N.overflow?"hidden":void 0},h)},m)),bt.exports.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:O,tabIndex:-1,style:Fe({},Cie.shadow,h,{padding:0})})]})});var Tie=Sie;function yR(e){return typeof e.normalize!="undefined"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function kie(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:a="any",stringify:c,trim:h=!1}=e;return(o,{inputValue:m,getOptionLabel:w})=>{let A=h?m.trim():m;n&&(A=A.toLowerCase()),t&&(A=yR(A));const P=A?o.filter(O=>{let B=(c||w)(O);return n&&(B=B.toLowerCase()),t&&(B=yR(B)),a==="start"?B.indexOf(A)===0:B.indexOf(A)>-1}):o;return typeof r=="number"?P.slice(0,r):P}}function mE(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const Aie=kie(),vR=5,Mie=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function Iie(e){const{unstable_isActiveElementInListbox:t=Mie,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:a=!1,autoSelect:c=!1,blurOnSelect:h=!1,clearOnBlur:o=!e.freeSolo,clearOnEscape:m=!1,componentName:w="useAutocomplete",defaultValue:A=e.multiple?[]:null,disableClearable:P=!1,disableCloseOnSelect:O=!1,disabled:B,disabledItemsFocusable:N=!1,disableListWrap:k=!1,filterOptions:V=Aie,filterSelectedOptions:U=!1,freeSolo:W=!1,getOptionDisabled:F,getOptionLabel:z=Ie=>{var Ue;return(Ue=Ie.label)!=null?Ue:Ie},groupBy:S,handleHomeEndKeys:b=!e.freeSolo,id:D,includeInputInList:Y=!1,inputValue:re,isOptionEqualToValue:ae=(Ie,Ue)=>Ie===Ue,multiple:ee=!1,onChange:de,onClose:ke,onHighlightChange:Oe,onInputChange:Le,onOpen:Ee,open:ct,openOnFocus:Ze=!1,options:rt,readOnly:tt=!1,selectOnFocus:xe=!e.freeSolo,value:be}=e,nn=lk(D);let $t=z;$t=Ie=>{const Ue=z(Ie);return typeof Ue!="string"?String(Ue):Ue};const an=g.exports.useRef(!1),en=g.exports.useRef(!0),ln=g.exports.useRef(null),mn=g.exports.useRef(null),[fn,An]=g.exports.useState(null),[ze,Xe]=g.exports.useState(-1),ft=a?0:-1,Et=g.exports.useRef(ft),[_t,ht]=Id({controlled:be,default:A,name:w}),[Pt,_n]=Id({controlled:re,default:"",name:w,state:"inputValue"}),[On,Ln]=g.exports.useState(!1),Mn=g.exports.useCallback((Ie,Ue)=>{if(!(ee?_t.length<Ue.length:Ue!==null)&&!o)return;let pt;if(ee)pt="";else if(Ue==null)pt="";else{const qt=$t(Ue);pt=typeof qt=="string"?qt:""}Pt!==pt&&(_n(pt),Le&&Le(Ie,pt,"reset"))},[$t,Pt,ee,Le,_n,o,_t]),[Zn,Pe]=Id({controlled:ct,default:!1,name:w,state:"open"}),[Je,ie]=g.exports.useState(!0),ue=!ee&&_t!=null&&Pt===$t(_t),De=Zn&&!tt,ye=De?V(rt.filter(Ie=>!(U&&(ee?_t:[_t]).some(Ue=>Ue!==null&&ae(Ie,Ue)))),{inputValue:ue&&Je?"":Pt,getOptionLabel:$t}):[],Se=SQ({filteredOptions:ye,value:_t});g.exports.useEffect(()=>{const Ie=_t!==Se.value;On&&!Ie||W&&!Ie||Mn(null,_t)},[_t,Mn,On,Se.value,W]);const vt=Zn&&ye.length>0&&!tt,Nt=Ia(Ie=>{Ie===-1?ln.current.focus():fn.querySelector(`[data-tag-index="${Ie}"]`).focus()});g.exports.useEffect(()=>{ee&&ze>_t.length-1&&(Xe(-1),Nt(-1))},[_t,ee,ze,Nt]);function Xt(Ie,Ue){if(!mn.current||Ie===-1)return-1;let wt=Ie;for(;;){if(Ue==="next"&&wt===ye.length||Ue==="previous"&&wt===-1)return-1;const pt=mn.current.querySelector(`[data-option-index="${wt}"]`),qt=N?!1:!pt||pt.disabled||pt.getAttribute("aria-disabled")==="true";if(pt&&!pt.hasAttribute("tabindex")||qt)wt+=Ue==="next"?1:-1;else return wt}}const Bn=Ia(({event:Ie,index:Ue,reason:wt="auto"})=>{if(Et.current=Ue,Ue===-1?ln.current.removeAttribute("aria-activedescendant"):ln.current.setAttribute("aria-activedescendant",`${nn}-option-${Ue}`),Oe&&Oe(Ie,Ue===-1?null:ye[Ue],wt),!mn.current)return;const pt=mn.current.querySelector(`[role="option"].${n}-focused`);pt&&(pt.classList.remove(`${n}-focused`),pt.classList.remove(`${n}-focusVisible`));const qt=mn.current.parentElement.querySelector('[role="listbox"]');if(!qt)return;if(Ue===-1){qt.scrollTop=0;return}const tn=mn.current.querySelector(`[data-option-index="${Ue}"]`);if(!!tn&&(tn.classList.add(`${n}-focused`),wt==="keyboard"&&tn.classList.add(`${n}-focusVisible`),qt.scrollHeight>qt.clientHeight&&wt!=="mouse")){const Yt=tn,pn=qt.clientHeight+qt.scrollTop,zn=Yt.offsetTop+Yt.offsetHeight;zn>pn?qt.scrollTop=zn-qt.clientHeight:Yt.offsetTop-Yt.offsetHeight*(S?1.3:0)<qt.scrollTop&&(qt.scrollTop=Yt.offsetTop-Yt.offsetHeight*(S?1.3:0))}}),kn=Ia(({event:Ie,diff:Ue,direction:wt="next",reason:pt="auto"})=>{if(!De)return;const tn=Xt((()=>{const Yt=ye.length-1;if(Ue==="reset")return ft;if(Ue==="start")return 0;if(Ue==="end")return Yt;const pn=Et.current+Ue;return pn<0?pn===-1&&Y?-1:k&&Et.current!==-1||Math.abs(Ue)>1?0:Yt:pn>Yt?pn===Yt+1&&Y?-1:k||Math.abs(Ue)>1?Yt:0:pn})(),wt);if(Bn({index:tn,reason:pt,event:Ie}),r&&Ue!=="reset")if(tn===-1)ln.current.value=Pt;else{const Yt=$t(ye[tn]);ln.current.value=Yt,Yt.toLowerCase().indexOf(Pt.toLowerCase())===0&&Pt.length>0&&ln.current.setSelectionRange(Pt.length,Yt.length)}}),jt=()=>{const Ie=(Ue,wt)=>{const pt=Ue?$t(Ue):"",qt=wt?$t(wt):"";return pt===qt};if(Et.current!==-1&&Se.filteredOptions&&Se.filteredOptions.length!==ye.length&&(ee?_t.length===Se.value.length&&Se.value.every((Ue,wt)=>$t(_t[wt])===$t(Ue)):Ie(Se.value,_t))){const Ue=Se.filteredOptions[Et.current];if(Ue&&ye.some(pt=>$t(pt)===$t(Ue)))return!0}return!1},Rn=g.exports.useCallback(()=>{if(!De||jt())return;const Ie=ee?_t[0]:_t;if(ye.length===0||Ie==null){kn({diff:"reset"});return}if(!!mn.current){if(Ie!=null){const Ue=ye[Et.current];if(ee&&Ue&&mE(_t,pt=>ae(Ue,pt))!==-1)return;const wt=mE(ye,pt=>ae(pt,Ie));wt===-1?kn({diff:"reset"}):Bn({index:wt});return}if(Et.current>=ye.length-1){Bn({index:ye.length-1});return}Bn({index:Et.current})}},[ye.length,ee?!1:_t,U,kn,Bn,De,Pt,ee]),dr=Ia(Ie=>{n0(mn,Ie),Ie&&Rn()});g.exports.useEffect(()=>{Rn()},[Rn]);const Fn=Ie=>{Zn||(Pe(!0),ie(!0),Ee&&Ee(Ie))},Ar=(Ie,Ue)=>{!Zn||(Pe(!1),ke&&ke(Ie,Ue))},hr=(Ie,Ue,wt,pt)=>{if(ee){if(_t.length===Ue.length&&_t.every((qt,tn)=>qt===Ue[tn]))return}else if(_t===Ue)return;de&&de(Ie,Ue,wt,pt),ht(Ue)},Lr=g.exports.useRef(!1),Kn=(Ie,Ue,wt="selectOption",pt="options")=>{let qt=wt,tn=Ue;if(ee){tn=Array.isArray(_t)?_t.slice():[];const Yt=mE(tn,pn=>ae(Ue,pn));Yt===-1?tn.push(Ue):pt!=="freeSolo"&&(tn.splice(Yt,1),qt="removeOption")}Mn(Ie,tn),hr(Ie,tn,qt,{option:Ue}),!O&&(!Ie||!Ie.ctrlKey&&!Ie.metaKey)&&Ar(Ie,qt),(h===!0||h==="touch"&&Lr.current||h==="mouse"&&!Lr.current)&&ln.current.blur()};function Jn(Ie,Ue){if(Ie===-1)return-1;let wt=Ie;for(;;){if(Ue==="next"&&wt===_t.length||Ue==="previous"&&wt===-1)return-1;const pt=fn.querySelector(`[data-tag-index="${wt}"]`);if(!pt||!pt.hasAttribute("tabindex")||pt.disabled||pt.getAttribute("aria-disabled")==="true")wt+=Ue==="next"?1:-1;else return wt}}const Vr=(Ie,Ue)=>{if(!ee)return;Pt===""&&Ar(Ie,"toggleInput");let wt=ze;ze===-1?Pt===""&&Ue==="previous"&&(wt=_t.length-1):(wt+=Ue==="next"?1:-1,wt<0&&(wt=0),wt===_t.length&&(wt=-1)),wt=Jn(wt,Ue),Xe(wt),Nt(wt)},pr=Ie=>{an.current=!0,_n(""),Le&&Le(Ie,"","clear"),hr(Ie,ee?[]:null,"clear")},Fi=Ie=>Ue=>{if(Ie.onKeyDown&&Ie.onKeyDown(Ue),!Ue.defaultMuiPrevented&&(ze!==-1&&["ArrowLeft","ArrowRight"].indexOf(Ue.key)===-1&&(Xe(-1),Nt(-1)),Ue.which!==229))switch(Ue.key){case"Home":De&&b&&(Ue.preventDefault(),kn({diff:"start",direction:"next",reason:"keyboard",event:Ue}));break;case"End":De&&b&&(Ue.preventDefault(),kn({diff:"end",direction:"previous",reason:"keyboard",event:Ue}));break;case"PageUp":Ue.preventDefault(),kn({diff:-vR,direction:"previous",reason:"keyboard",event:Ue}),Fn(Ue);break;case"PageDown":Ue.preventDefault(),kn({diff:vR,direction:"next",reason:"keyboard",event:Ue}),Fn(Ue);break;case"ArrowDown":Ue.preventDefault(),kn({diff:1,direction:"next",reason:"keyboard",event:Ue}),Fn(Ue);break;case"ArrowUp":Ue.preventDefault(),kn({diff:-1,direction:"previous",reason:"keyboard",event:Ue}),Fn(Ue);break;case"ArrowLeft":Vr(Ue,"previous");break;case"ArrowRight":Vr(Ue,"next");break;case"Enter":if(Et.current!==-1&&De){const wt=ye[Et.current],pt=F?F(wt):!1;if(Ue.preventDefault(),pt)return;Kn(Ue,wt,"selectOption"),r&&ln.current.setSelectionRange(ln.current.value.length,ln.current.value.length)}else W&&Pt!==""&&ue===!1&&(ee&&Ue.preventDefault(),Kn(Ue,Pt,"createOption","freeSolo"));break;case"Escape":De?(Ue.preventDefault(),Ue.stopPropagation(),Ar(Ue,"escape")):m&&(Pt!==""||ee&&_t.length>0)&&(Ue.preventDefault(),Ue.stopPropagation(),pr(Ue));break;case"Backspace":if(ee&&!tt&&Pt===""&&_t.length>0){const wt=ze===-1?_t.length-1:ze,pt=_t.slice();pt.splice(wt,1),hr(Ue,pt,"removeOption",{option:_t[wt]})}break;case"Delete":if(ee&&!tt&&Pt===""&&_t.length>0&&ze!==-1){const wt=ze,pt=_t.slice();pt.splice(wt,1),hr(Ue,pt,"removeOption",{option:_t[wt]})}break}},ai=Ie=>{Ln(!0),Ze&&!an.current&&Fn(Ie)},si=Ie=>{if(t(mn)){ln.current.focus();return}Ln(!1),en.current=!0,an.current=!1,c&&Et.current!==-1&&De?Kn(Ie,ye[Et.current],"blur"):c&&W&&Pt!==""?Kn(Ie,Pt,"blur","freeSolo"):o&&Mn(Ie,_t),Ar(Ie,"blur")},Ni=Ie=>{const Ue=Ie.target.value;Pt!==Ue&&(_n(Ue),ie(!1),Le&&Le(Ie,Ue,"input")),Ue===""?!P&&!ee&&hr(Ie,null,"clear"):Fn(Ie)},oo=Ie=>{Bn({event:Ie,index:Number(Ie.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},_e=Ie=>{Bn({event:Ie,index:Number(Ie.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Lr.current=!0},ne=Ie=>{const Ue=Number(Ie.currentTarget.getAttribute("data-option-index"));Kn(Ie,ye[Ue],"selectOption"),Lr.current=!1},se=Ie=>Ue=>{const wt=_t.slice();wt.splice(Ie,1),hr(Ue,wt,"removeOption",{option:_t[Ie]})},fe=Ie=>{Zn?Ar(Ie,"toggleInput"):Fn(Ie)},Me=Ie=>{Ie.target.getAttribute("id")!==nn&&Ie.preventDefault()},We=()=>{ln.current.focus(),xe&&en.current&&ln.current.selectionEnd-ln.current.selectionStart===0&&ln.current.select(),en.current=!1},Qe=Ie=>{(Pt===""||!Zn)&&fe(Ie)};let Ke=W&&Pt.length>0;Ke=Ke||(ee?_t.length>0:_t!==null);let qe=ye;return S&&(qe=ye.reduce((Ie,Ue,wt)=>{const pt=S(Ue);return Ie.length>0&&Ie[Ie.length-1].group===pt?Ie[Ie.length-1].options.push(Ue):Ie.push({key:wt,index:wt,group:pt,options:[Ue]}),Ie},[])),B&&On&&si(),{getRootProps:(Ie={})=>Fe({"aria-owns":vt?`${nn}-listbox`:null},Ie,{onKeyDown:Fi(Ie),onMouseDown:Me,onClick:We}),getInputLabelProps:()=>({id:`${nn}-label`,htmlFor:nn}),getInputProps:()=>({id:nn,value:Pt,onBlur:si,onFocus:ai,onChange:Ni,onMouseDown:Qe,"aria-activedescendant":De?"":null,"aria-autocomplete":r?"both":"list","aria-controls":vt?`${nn}-listbox`:void 0,"aria-expanded":vt,autoComplete:"off",ref:ln,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:B}),getClearProps:()=>({tabIndex:-1,onClick:pr}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:fe}),getTagProps:({index:Ie})=>Fe({key:Ie,"data-tag-index":Ie,tabIndex:-1},!tt&&{onDelete:se(Ie)}),getListboxProps:()=>({role:"listbox",id:`${nn}-listbox`,"aria-labelledby":`${nn}-label`,ref:dr,onMouseDown:Ie=>{Ie.preventDefault()}}),getOptionProps:({index:Ie,option:Ue})=>{const wt=(ee?_t:[_t]).some(qt=>qt!=null&&ae(Ue,qt)),pt=F?F(Ue):!1;return{key:$t(Ue),tabIndex:-1,role:"option",id:`${nn}-option-${Ie}`,onMouseOver:oo,onClick:ne,onTouchStart:_e,"data-option-index":Ie,"aria-disabled":pt,"aria-selected":wt}},id:nn,inputValue:Pt,value:_t,dirty:Ke,expanded:De&&fn,popupOpen:De,focused:On||ze!==-1,anchorEl:fn,setAnchorEl:An,focusedTag:ze,groupedOptions:qe}}function Pie(e){return vr("MuiSvgIcon",e)}ar("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Die=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Rie=e=>{const{color:t,fontSize:n,classes:r}=e,a={root:["root",t!=="inherit"&&`color${dn(t)}`,`fontSize${dn(n)}`]};return kr(a,Pie,r)},Lie=cn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${dn(n.color)}`],t[`fontSize${dn(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,a,c,h,o,m,w,A,P,O,B,N,k,V,U,W;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(a=e.transitions)==null||(c=a.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((h=e.typography)==null||(o=h.pxToRem)==null?void 0:o.call(h,20))||"1.25rem",medium:((m=e.typography)==null||(w=m.pxToRem)==null?void 0:w.call(m,24))||"1.5rem",large:((A=e.typography)==null||(P=A.pxToRem)==null?void 0:P.call(A,35))||"2.1875rem"}[t.fontSize],color:(O=(B=(e.vars||e).palette)==null||(N=B[t.color])==null?void 0:N.main)!=null?O:{action:(k=(e.vars||e).palette)==null||(V=k.action)==null?void 0:V.active,disabled:(U=(e.vars||e).palette)==null||(W=U.action)==null?void 0:W.disabled,inherit:void 0}[t.color]}}),cB=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiSvgIcon"}),{children:a,className:c,color:h="inherit",component:o="svg",fontSize:m="medium",htmlColor:w,inheritViewBox:A=!1,titleAccess:P,viewBox:O="0 0 24 24"}=r,B=bn(r,Die),N=Fe({},r,{color:h,component:o,fontSize:m,instanceFontSize:t.fontSize,inheritViewBox:A,viewBox:O}),k={};A||(k.viewBox=O);const V=Rie(N);return bt.exports.jsxs(Lie,Fe({as:o,className:In(V.root,c),focusable:"false",color:w,"aria-hidden":P?void 0:!0,role:P?"img":void 0,ref:n},k,B,{ownerState:N,children:[a,P?bt.exports.jsx("title",{children:P}):null]}))});cB.muiName="SvgIcon";var _R=cB;function nu(e,t){function n(r,a){return bt.exports.jsx(_R,Fe({"data-testid":`${t}Icon`,ref:a},r,{children:e}))}return n.muiName=_R.muiName,g.exports.memo(g.exports.forwardRef(n))}function cS(e,t){return cS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},cS(e,t)}function dB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,cS(e,t)}var xR={disabled:!1},c0=at.createContext(null),Oie=function(t){return t.scrollTop},ig="unmounted",md="exited",gd="entering",lp="entered",dS="exiting",ru=function(e){dB(t,e);function t(r,a){var c;c=e.call(this,r,a)||this;var h=a,o=h&&!h.isMounting?r.enter:r.appear,m;return c.appearStatus=null,r.in?o?(m=md,c.appearStatus=gd):m=lp:r.unmountOnExit||r.mountOnEnter?m=ig:m=md,c.state={status:m},c.nextCallback=null,c}t.getDerivedStateFromProps=function(a,c){var h=a.in;return h&&c.status===ig?{status:md}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var c=null;if(a!==this.props){var h=this.state.status;this.props.in?h!==gd&&h!==lp&&(c=gd):(h===gd||h===lp)&&(c=dS)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,c,h,o;return c=h=o=a,a!=null&&typeof a!="number"&&(c=a.exit,h=a.enter,o=a.appear!==void 0?a.appear:h),{exit:c,enter:h,appear:o}},n.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===gd){if(this.props.unmountOnExit||this.props.mountOnEnter){var h=this.props.nodeRef?this.props.nodeRef.current:S_.findDOMNode(this);h&&Oie(h)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===md&&this.setState({status:ig})},n.performEnter=function(a){var c=this,h=this.props.enter,o=this.context?this.context.isMounting:a,m=this.props.nodeRef?[o]:[S_.findDOMNode(this),o],w=m[0],A=m[1],P=this.getTimeouts(),O=o?P.appear:P.enter;if(!a&&!h||xR.disabled){this.safeSetState({status:lp},function(){c.props.onEntered(w)});return}this.props.onEnter(w,A),this.safeSetState({status:gd},function(){c.props.onEntering(w,A),c.onTransitionEnd(O,function(){c.safeSetState({status:lp},function(){c.props.onEntered(w,A)})})})},n.performExit=function(){var a=this,c=this.props.exit,h=this.getTimeouts(),o=this.props.nodeRef?void 0:S_.findDOMNode(this);if(!c||xR.disabled){this.safeSetState({status:md},function(){a.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:dS},function(){a.props.onExiting(o),a.onTransitionEnd(h.exit,function(){a.safeSetState({status:md},function(){a.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},n.setNextCallback=function(a){var c=this,h=!0;return this.nextCallback=function(o){h&&(h=!1,c.nextCallback=null,a(o))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},n.onTransitionEnd=function(a,c){this.setNextCallback(c);var h=this.props.nodeRef?this.props.nodeRef.current:S_.findDOMNode(this),o=a==null&&!this.props.addEndListener;if(!h||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var m=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],w=m[0],A=m[1];this.props.addEndListener(w,A)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===ig)return null;var c=this.props,h=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var o=bn(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return at.createElement(c0.Provider,{value:null},typeof h=="function"?h(a,o):at.cloneElement(at.Children.only(h),o))},t}(at.Component);ru.contextType=c0;ru.propTypes={};function ap(){}ru.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ap,onEntering:ap,onEntered:ap,onExit:ap,onExiting:ap,onExited:ap};ru.UNMOUNTED=ig;ru.EXITED=md;ru.ENTERING=gd;ru.ENTERED=lp;ru.EXITING=dS;var hB=ru;function zie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pk(e,t){var n=function(c){return t&&g.exports.isValidElement(c)?t(c):c},r=Object.create(null);return e&&g.exports.Children.map(e,function(a){return a}).forEach(function(a){r[a.key]=n(a)}),r}function Bie(e,t){e=e||{},t=t||{};function n(A){return A in t?t[A]:e[A]}var r=Object.create(null),a=[];for(var c in e)c in t?a.length&&(r[c]=a,a=[]):a.push(c);var h,o={};for(var m in t){if(r[m])for(h=0;h<r[m].length;h++){var w=r[m][h];o[r[m][h]]=n(w)}o[m]=n(m)}for(h=0;h<a.length;h++)o[a[h]]=n(a[h]);return o}function Sd(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Fie(e,t){return Pk(e.children,function(n){return g.exports.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Sd(n,"appear",e),enter:Sd(n,"enter",e),exit:Sd(n,"exit",e)})})}function Nie(e,t,n){var r=Pk(e.children),a=Bie(t,r);return Object.keys(a).forEach(function(c){var h=a[c];if(!!g.exports.isValidElement(h)){var o=c in t,m=c in r,w=t[c],A=g.exports.isValidElement(w)&&!w.props.in;m&&(!o||A)?a[c]=g.exports.cloneElement(h,{onExited:n.bind(null,h),in:!0,exit:Sd(h,"exit",e),enter:Sd(h,"enter",e)}):!m&&o&&!A?a[c]=g.exports.cloneElement(h,{in:!1}):m&&o&&g.exports.isValidElement(w)&&(a[c]=g.exports.cloneElement(h,{onExited:n.bind(null,h),in:w.props.in,exit:Sd(h,"exit",e),enter:Sd(h,"enter",e)}))}}),a}var $ie=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Uie={component:"div",childFactory:function(t){return t}},Dk=function(e){dB(t,e);function t(r,a){var c;c=e.call(this,r,a)||this;var h=c.handleExited.bind(zie(c));return c.state={contextValue:{isMounting:!0},handleExited:h,firstRender:!0},c}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,c){var h=c.children,o=c.handleExited,m=c.firstRender;return{children:m?Fie(a,o):Nie(a,h,o),firstRender:!1}},n.handleExited=function(a,c){var h=Pk(this.props.children);a.key in h||(a.props.onExited&&a.props.onExited(c),this.mounted&&this.setState(function(o){var m=Fe({},o.children);return delete m[a.key],{children:m}}))},n.render=function(){var a=this.props,c=a.component,h=a.childFactory,o=bn(a,["component","childFactory"]),m=this.state.contextValue,w=$ie(this.state.children).map(h);return delete o.appear,delete o.enter,delete o.exit,c===null?at.createElement(c0.Provider,{value:m},w):at.createElement(c0.Provider,{value:m},at.createElement(c,o,w))},t}(at.Component);Dk.propTypes={};Dk.defaultProps=Uie;var jie=Dk;const pB=e=>e.scrollTop;function d0(e,t){var n,r;const{timeout:a,easing:c,style:h={}}=e;return{duration:(n=h.transitionDuration)!=null?n:typeof a=="number"?a:a[t.mode]||0,easing:(r=h.transitionTimingFunction)!=null?r:typeof c=="object"?c[t.mode]:c,delay:h.transitionDelay}}function Vie(e){return vr("MuiPaper",e)}ar("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Hie=["className","component","elevation","square","variant"],Wie=e=>{const{square:t,elevation:n,variant:r,classes:a}=e,c={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return kr(c,Vie,a)},Gie=cn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return Fe({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Fe({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Oi("#fff",nR(t.elevation))}, ${Oi("#fff",nR(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),qie=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiPaper"}),{className:a,component:c="div",elevation:h=1,square:o=!1,variant:m="elevation"}=r,w=bn(r,Hie),A=Fe({},r,{component:c,elevation:h,square:o,variant:m}),P=Wie(A);return bt.exports.jsx(Gie,Fe({as:c,ownerState:A,className:In(P.root,a),ref:n},w))});var pf=qie;function Zie(e){const{className:t,classes:n,pulsate:r=!1,rippleX:a,rippleY:c,rippleSize:h,in:o,onExited:m,timeout:w}=e,[A,P]=g.exports.useState(!1),O=In(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),B={width:h,height:h,top:-(h/2)+c,left:-(h/2)+a},N=In(n.child,A&&n.childLeaving,r&&n.childPulsate);return!o&&!A&&P(!0),g.exports.useEffect(()=>{if(!o&&m!=null){const k=setTimeout(m,w);return()=>{clearTimeout(k)}}},[m,o,w]),bt.exports.jsx("span",{className:O,style:B,children:bt.exports.jsx("span",{className:N})})}const Xie=ar("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var Za=Xie;const Kie=["center","classes","className"];let D1=e=>e,bR,wR,ER,CR;const hS=550,Yie=80,Jie=gk(bR||(bR=D1`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Qie=gk(wR||(wR=D1`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),eoe=gk(ER||(ER=D1`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),toe=cn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),noe=cn(Zie,{name:"MuiTouchRipple",slot:"Ripple"})(CR||(CR=D1`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Za.rippleVisible,Jie,hS,({theme:e})=>e.transitions.easing.easeInOut,Za.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Za.child,Za.childLeaving,Qie,hS,({theme:e})=>e.transitions.easing.easeInOut,Za.childPulsate,eoe,({theme:e})=>e.transitions.easing.easeInOut),roe=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:c={},className:h}=r,o=bn(r,Kie),[m,w]=g.exports.useState([]),A=g.exports.useRef(0),P=g.exports.useRef(null);g.exports.useEffect(()=>{P.current&&(P.current(),P.current=null)},[m]);const O=g.exports.useRef(!1),B=g.exports.useRef(null),N=g.exports.useRef(null),k=g.exports.useRef(null);g.exports.useEffect(()=>()=>{clearTimeout(B.current)},[]);const V=g.exports.useCallback(z=>{const{pulsate:S,rippleX:b,rippleY:D,rippleSize:Y,cb:re}=z;w(ae=>[...ae,bt.exports.jsx(noe,{classes:{ripple:In(c.ripple,Za.ripple),rippleVisible:In(c.rippleVisible,Za.rippleVisible),ripplePulsate:In(c.ripplePulsate,Za.ripplePulsate),child:In(c.child,Za.child),childLeaving:In(c.childLeaving,Za.childLeaving),childPulsate:In(c.childPulsate,Za.childPulsate)},timeout:hS,pulsate:S,rippleX:b,rippleY:D,rippleSize:Y},A.current)]),A.current+=1,P.current=re},[c]),U=g.exports.useCallback((z={},S={},b=()=>{})=>{const{pulsate:D=!1,center:Y=a||S.pulsate,fakeElement:re=!1}=S;if((z==null?void 0:z.type)==="mousedown"&&O.current){O.current=!1;return}(z==null?void 0:z.type)==="touchstart"&&(O.current=!0);const ae=re?null:k.current,ee=ae?ae.getBoundingClientRect():{width:0,height:0,left:0,top:0};let de,ke,Oe;if(Y||z===void 0||z.clientX===0&&z.clientY===0||!z.clientX&&!z.touches)de=Math.round(ee.width/2),ke=Math.round(ee.height/2);else{const{clientX:Le,clientY:Ee}=z.touches&&z.touches.length>0?z.touches[0]:z;de=Math.round(Le-ee.left),ke=Math.round(Ee-ee.top)}if(Y)Oe=Math.sqrt((2*ee.width**2+ee.height**2)/3),Oe%2===0&&(Oe+=1);else{const Le=Math.max(Math.abs((ae?ae.clientWidth:0)-de),de)*2+2,Ee=Math.max(Math.abs((ae?ae.clientHeight:0)-ke),ke)*2+2;Oe=Math.sqrt(Le**2+Ee**2)}z!=null&&z.touches?N.current===null&&(N.current=()=>{V({pulsate:D,rippleX:de,rippleY:ke,rippleSize:Oe,cb:b})},B.current=setTimeout(()=>{N.current&&(N.current(),N.current=null)},Yie)):V({pulsate:D,rippleX:de,rippleY:ke,rippleSize:Oe,cb:b})},[a,V]),W=g.exports.useCallback(()=>{U({},{pulsate:!0})},[U]),F=g.exports.useCallback((z,S)=>{if(clearTimeout(B.current),(z==null?void 0:z.type)==="touchend"&&N.current){N.current(),N.current=null,B.current=setTimeout(()=>{F(z,S)});return}N.current=null,w(b=>b.length>0?b.slice(1):b),P.current=S},[]);return g.exports.useImperativeHandle(n,()=>({pulsate:W,start:U,stop:F}),[W,U,F]),bt.exports.jsx(toe,Fe({className:In(Za.root,c.root,h),ref:k},o,{children:bt.exports.jsx(jie,{component:null,exit:!0,children:m})}))});var ioe=roe;function ooe(e){return vr("MuiButtonBase",e)}const aoe=ar("MuiButtonBase",["root","disabled","focusVisible"]);var soe=aoe;const loe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],uoe=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:a}=e,h=kr({root:["root",t&&"disabled",n&&"focusVisible"]},ooe,a);return n&&r&&(h.root+=` ${r}`),h},coe=cn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${soe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),doe=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:c=!1,children:h,className:o,component:m="button",disabled:w=!1,disableRipple:A=!1,disableTouchRipple:P=!1,focusRipple:O=!1,LinkComponent:B="a",onBlur:N,onClick:k,onContextMenu:V,onDragLeave:U,onFocus:W,onFocusVisible:F,onKeyDown:z,onKeyUp:S,onMouseDown:b,onMouseLeave:D,onMouseUp:Y,onTouchEnd:re,onTouchMove:ae,onTouchStart:ee,tabIndex:de=0,TouchRippleProps:ke,touchRippleRef:Oe,type:Le}=r,Ee=bn(r,loe),ct=g.exports.useRef(null),Ze=g.exports.useRef(null),rt=Zi(Ze,Oe),{isFocusVisibleRef:tt,onFocus:xe,onBlur:be,ref:nn}=EQ(),[$t,an]=g.exports.useState(!1);w&&$t&&an(!1),g.exports.useImperativeHandle(a,()=>({focusVisible:()=>{an(!0),ct.current.focus()}}),[]);const[en,ln]=g.exports.useState(!1);g.exports.useEffect(()=>{ln(!0)},[]);const mn=en&&!A&&!w;g.exports.useEffect(()=>{$t&&O&&!A&&en&&Ze.current.pulsate()},[A,O,$t,en]);function fn(Se,vt,Nt=P){return Ia(Xt=>(vt&&vt(Xt),!Nt&&Ze.current&&Ze.current[Se](Xt),!0))}const An=fn("start",b),ze=fn("stop",V),Xe=fn("stop",U),ft=fn("stop",Y),Et=fn("stop",Se=>{$t&&Se.preventDefault(),D&&D(Se)}),_t=fn("start",ee),ht=fn("stop",re),Pt=fn("stop",ae),_n=fn("stop",Se=>{be(Se),tt.current===!1&&an(!1),N&&N(Se)},!1),On=Ia(Se=>{ct.current||(ct.current=Se.currentTarget),xe(Se),tt.current===!0&&(an(!0),F&&F(Se)),W&&W(Se)}),Ln=()=>{const Se=ct.current;return m&&m!=="button"&&!(Se.tagName==="A"&&Se.href)},Mn=g.exports.useRef(!1),Zn=Ia(Se=>{O&&!Mn.current&&$t&&Ze.current&&Se.key===" "&&(Mn.current=!0,Ze.current.stop(Se,()=>{Ze.current.start(Se)})),Se.target===Se.currentTarget&&Ln()&&Se.key===" "&&Se.preventDefault(),z&&z(Se),Se.target===Se.currentTarget&&Ln()&&Se.key==="Enter"&&!w&&(Se.preventDefault(),k&&k(Se))}),Pe=Ia(Se=>{O&&Se.key===" "&&Ze.current&&$t&&!Se.defaultPrevented&&(Mn.current=!1,Ze.current.stop(Se,()=>{Ze.current.pulsate(Se)})),S&&S(Se),k&&Se.target===Se.currentTarget&&Ln()&&Se.key===" "&&!Se.defaultPrevented&&k(Se)});let Je=m;Je==="button"&&(Ee.href||Ee.to)&&(Je=B);const ie={};Je==="button"?(ie.type=Le===void 0?"button":Le,ie.disabled=w):(!Ee.href&&!Ee.to&&(ie.role="button"),w&&(ie["aria-disabled"]=w));const ue=Zi(n,nn,ct),De=Fe({},r,{centerRipple:c,component:m,disabled:w,disableRipple:A,disableTouchRipple:P,focusRipple:O,tabIndex:de,focusVisible:$t}),ye=uoe(De);return bt.exports.jsxs(coe,Fe({as:Je,className:In(ye.root,o),ownerState:De,onBlur:_n,onClick:k,onContextMenu:ze,onFocus:On,onKeyDown:Zn,onKeyUp:Pe,onMouseDown:An,onMouseLeave:Et,onMouseUp:ft,onDragLeave:Xe,onTouchEnd:ht,onTouchMove:Pt,onTouchStart:_t,ref:ue,tabIndex:w?-1:de,type:Le},ie,Ee,{children:[h,mn?bt.exports.jsx(ioe,Fe({ref:rt,center:c},ke)):null]}))});var ry=doe;function hoe(e){return vr("MuiAlert",e)}const poe=ar("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var SR=poe;function foe(e){return vr("MuiIconButton",e)}const moe=ar("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var goe=moe;const yoe=["edge","children","className","color","disabled","disableFocusRipple","size"],voe=e=>{const{classes:t,disabled:n,color:r,edge:a,size:c}=e,h={root:["root",n&&"disabled",r!=="default"&&`color${dn(r)}`,a&&`edge${dn(a)}`,`size${dn(c)}`]};return kr(h,foe,t)},_oe=cn(ry,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${dn(n.color)}`],n.edge&&t[`edge${dn(n.edge)}`],t[`size${dn(n.size)}`]]}})(({theme:e,ownerState:t})=>Fe({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Oi(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const r=(n=(e.vars||e).palette)==null?void 0:n[t.color];return Fe({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&Fe({color:r==null?void 0:r.main},!t.disableRipple&&{"&:hover":Fe({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Oi(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${goe.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),xoe=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiIconButton"}),{edge:a=!1,children:c,className:h,color:o="default",disabled:m=!1,disableFocusRipple:w=!1,size:A="medium"}=r,P=bn(r,yoe),O=Fe({},r,{edge:a,color:o,disabled:m,disableFocusRipple:w,size:A}),B=voe(O);return bt.exports.jsx(_oe,Fe({className:In(B.root,h),centerRipple:!0,focusRipple:!w,disabled:m,ref:n,ownerState:O},P,{children:c}))});var Rk=xoe,boe=nu(bt.exports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),woe=nu(bt.exports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Eoe=nu(bt.exports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Coe=nu(bt.exports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),fB=nu(bt.exports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const Soe=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Toe=e=>{const{variant:t,color:n,severity:r,classes:a}=e,c={root:["root",`${t}${dn(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return kr(c,hoe,a)},koe=cn(pf,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${dn(n.color||n.severity)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?o0:a0,r=e.palette.mode==="light"?a0:o0,a=t.color||t.severity;return Fe({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},a&&t.variant==="standard"&&{color:e.vars?e.vars.palette.Alert[`${a}Color`]:n(e.palette[a].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${a}StandardBg`]:r(e.palette[a].light,.9),[`& .${SR.icon}`]:e.vars?{color:e.vars.palette.Alert[`${a}IconColor`]}:{color:e.palette[a].main}},a&&t.variant==="outlined"&&{color:e.vars?e.vars.palette.Alert[`${a}Color`]:n(e.palette[a].light,.6),border:`1px solid ${(e.vars||e).palette[a].light}`,[`& .${SR.icon}`]:e.vars?{color:e.vars.palette.Alert[`${a}IconColor`]}:{color:e.palette[a].main}},a&&t.variant==="filled"&&Fe({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${a}FilledColor`],backgroundColor:e.vars.palette.Alert[`${a}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[a].dark:e.palette[a].main,color:e.palette.getContrastText(e.palette[a].main)}))}),Aoe=cn("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Moe=cn("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),TR=cn("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),kR={success:bt.exports.jsx(boe,{fontSize:"inherit"}),warning:bt.exports.jsx(woe,{fontSize:"inherit"}),error:bt.exports.jsx(Eoe,{fontSize:"inherit"}),info:bt.exports.jsx(Coe,{fontSize:"inherit"})},Ioe=g.exports.forwardRef(function(t,n){var r,a,c,h,o,m;const w=Rr({props:t,name:"MuiAlert"}),{action:A,children:P,className:O,closeText:B="Close",color:N,components:k={},componentsProps:V={},icon:U,iconMapping:W=kR,onClose:F,role:z="alert",severity:S="success",slotProps:b={},slots:D={},variant:Y="standard"}=w,re=bn(w,Soe),ae=Fe({},w,{color:N,severity:S,variant:Y}),ee=Toe(ae),de=(r=(a=D.closeButton)!=null?a:k.CloseButton)!=null?r:Rk,ke=(c=(h=D.closeIcon)!=null?h:k.CloseIcon)!=null?c:fB,Oe=(o=b.closeButton)!=null?o:V.closeButton,Le=(m=b.closeIcon)!=null?m:V.closeIcon;return bt.exports.jsxs(koe,Fe({role:z,elevation:0,ownerState:ae,className:In(ee.root,O),ref:n},re,{children:[U!==!1?bt.exports.jsx(Aoe,{ownerState:ae,className:ee.icon,children:U||W[S]||kR[S]}):null,bt.exports.jsx(Moe,{ownerState:ae,className:ee.message,children:P}),A!=null?bt.exports.jsx(TR,{ownerState:ae,className:ee.action,children:A}):null,A==null&&F?bt.exports.jsx(TR,{ownerState:ae,className:ee.action,children:bt.exports.jsx(de,Fe({size:"small","aria-label":B,title:B,color:"inherit",onClick:F},Oe,{children:bt.exports.jsx(ke,Fe({fontSize:"small"},Le))}))}):null]}))});var Poe=Ioe;function Doe(e){return vr("MuiTypography",e)}ar("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Roe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Loe=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:a,variant:c,classes:h}=e,o={root:["root",c,e.align!=="inherit"&&`align${dn(t)}`,n&&"gutterBottom",r&&"noWrap",a&&"paragraph"]};return kr(o,Doe,h)},Ooe=cn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${dn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>Fe({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),AR={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},zoe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Boe=e=>zoe[e]||e,Foe=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiTypography"}),a=Boe(r.color),c=q5(Fe({},r,{color:a})),{align:h="inherit",className:o,component:m,gutterBottom:w=!1,noWrap:A=!1,paragraph:P=!1,variant:O="body1",variantMapping:B=AR}=c,N=bn(c,Roe),k=Fe({},c,{align:h,color:a,className:o,component:m,gutterBottom:w,noWrap:A,paragraph:P,variant:O,variantMapping:B}),V=m||(P?"p":B[O]||AR[O])||"span",U=Loe(k);return bt.exports.jsx(Ooe,Fe({as:V,ref:n,ownerState:k,className:In(U.root,o)},N))});var MR=Foe;const Noe=["components","componentsProps","slots","slotProps"],$oe=cn(lie,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Uoe=g.exports.forwardRef(function(t,n){var r;const a=X5(),c=Rr({props:t,name:"MuiPopper"}),{components:h,componentsProps:o,slots:m,slotProps:w}=c,A=bn(c,Noe),P=(r=m==null?void 0:m.root)!=null?r:h==null?void 0:h.Root;return bt.exports.jsx($oe,Fe({direction:a==null?void 0:a.direction,slots:{root:P},slotProps:w!=null?w:o},A,{ref:n}))});var mB=Uoe;function joe(e){return vr("MuiListSubheader",e)}ar("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Voe=["className","color","component","disableGutters","disableSticky","inset"],Hoe=e=>{const{classes:t,color:n,disableGutters:r,inset:a,disableSticky:c}=e,h={root:["root",n!=="default"&&`color${dn(n)}`,!r&&"gutters",a&&"inset",!c&&"sticky"]};return kr(h,joe,t)},Woe=cn("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${dn(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>Fe({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),gB=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiListSubheader"}),{className:a,color:c="default",component:h="li",disableGutters:o=!1,disableSticky:m=!1,inset:w=!1}=r,A=bn(r,Voe),P=Fe({},r,{color:c,component:h,disableGutters:o,disableSticky:m,inset:w}),O=Hoe(P);return bt.exports.jsx(Woe,Fe({as:h,className:In(O.root,a),ref:n,ownerState:P},A))});gB.muiSkipListHighlight=!0;var Goe=gB,qoe=nu(bt.exports.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Zoe(e){return vr("MuiChip",e)}const Xoe=ar("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]);var Pr=Xoe;const Koe=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Yoe=e=>{const{classes:t,disabled:n,size:r,color:a,iconColor:c,onDelete:h,clickable:o,variant:m}=e,w={root:["root",m,n&&"disabled",`size${dn(r)}`,`color${dn(a)}`,o&&"clickable",o&&`clickableColor${dn(a)}`,h&&"deletable",h&&`deletableColor${dn(a)}`,`${m}${dn(a)}`],label:["label",`label${dn(r)}`],avatar:["avatar",`avatar${dn(r)}`,`avatarColor${dn(a)}`],icon:["icon",`icon${dn(r)}`,`iconColor${dn(c)}`],deleteIcon:["deleteIcon",`deleteIcon${dn(r)}`,`deleteIconColor${dn(a)}`,`deleteIcon${dn(m)}Color${dn(a)}`]};return kr(w,Zoe,t)},Joe=cn("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:a,clickable:c,onDelete:h,size:o,variant:m}=n;return[{[`& .${Pr.avatar}`]:t.avatar},{[`& .${Pr.avatar}`]:t[`avatar${dn(o)}`]},{[`& .${Pr.avatar}`]:t[`avatarColor${dn(r)}`]},{[`& .${Pr.icon}`]:t.icon},{[`& .${Pr.icon}`]:t[`icon${dn(o)}`]},{[`& .${Pr.icon}`]:t[`iconColor${dn(a)}`]},{[`& .${Pr.deleteIcon}`]:t.deleteIcon},{[`& .${Pr.deleteIcon}`]:t[`deleteIcon${dn(o)}`]},{[`& .${Pr.deleteIcon}`]:t[`deleteIconColor${dn(r)}`]},{[`& .${Pr.deleteIcon}`]:t[`deleteIcon${dn(m)}Color${dn(r)}`]},t.root,t[`size${dn(o)}`],t[`color${dn(r)}`],c&&t.clickable,c&&r!=="default"&&t[`clickableColor${dn(r)})`],h&&t.deletable,h&&r!=="default"&&t[`deletableColor${dn(r)}`],t[m],t[`${m}${dn(r)}`]]}})(({theme:e,ownerState:t})=>{const n=Oi(e.palette.text.primary,.26),r=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return Fe({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Pr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Pr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:r,fontSize:e.typography.pxToRem(12)},[`& .${Pr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Pr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Pr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Pr.icon}`]:Fe({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&Fe({color:e.vars?e.vars.palette.Chip.defaultIconColor:r},t.color!=="default"&&{color:"inherit"})),[`& .${Pr.deleteIcon}`]:Fe({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:n,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Oi(n,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:Oi(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${Pr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Oi(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${Pr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>Fe({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Oi(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Pr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Oi(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${Pr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>Fe({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Pr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Pr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Pr.avatar}`]:{marginLeft:4},[`& .${Pr.avatarSmall}`]:{marginLeft:2},[`& .${Pr.icon}`]:{marginLeft:4},[`& .${Pr.iconSmall}`]:{marginLeft:2},[`& .${Pr.deleteIcon}`]:{marginRight:5},[`& .${Pr.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Oi(e.palette[t.color].main,.7)}`,[`&.${Pr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Oi(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${Pr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Oi(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${Pr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Oi(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),Qoe=cn("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${dn(r)}`]]}})(({ownerState:e})=>Fe({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.size==="small"&&{paddingLeft:8,paddingRight:8}));function IR(e){return e.key==="Backspace"||e.key==="Delete"}const eae=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiChip"}),{avatar:a,className:c,clickable:h,color:o="default",component:m,deleteIcon:w,disabled:A=!1,icon:P,label:O,onClick:B,onDelete:N,onKeyDown:k,onKeyUp:V,size:U="medium",variant:W="filled",tabIndex:F,skipFocusWhenDisabled:z=!1}=r,S=bn(r,Koe),b=g.exports.useRef(null),D=Zi(b,n),Y=rt=>{rt.stopPropagation(),N&&N(rt)},re=rt=>{rt.currentTarget===rt.target&&IR(rt)&&rt.preventDefault(),k&&k(rt)},ae=rt=>{rt.currentTarget===rt.target&&(N&&IR(rt)?N(rt):rt.key==="Escape"&&b.current&&b.current.blur()),V&&V(rt)},ee=h!==!1&&B?!0:h,de=ee||N?ry:m||"div",ke=Fe({},r,{component:de,disabled:A,size:U,color:o,iconColor:g.exports.isValidElement(P)&&P.props.color||o,onDelete:!!N,clickable:ee,variant:W}),Oe=Yoe(ke),Le=de===ry?Fe({component:m||"div",focusVisibleClassName:Oe.focusVisible},N&&{disableRipple:!0}):{};let Ee=null;N&&(Ee=w&&g.exports.isValidElement(w)?g.exports.cloneElement(w,{className:In(w.props.className,Oe.deleteIcon),onClick:Y}):bt.exports.jsx(qoe,{className:In(Oe.deleteIcon),onClick:Y}));let ct=null;a&&g.exports.isValidElement(a)&&(ct=g.exports.cloneElement(a,{className:In(Oe.avatar,a.props.className)}));let Ze=null;return P&&g.exports.isValidElement(P)&&(Ze=g.exports.cloneElement(P,{className:In(Oe.icon,P.props.className)})),bt.exports.jsxs(Joe,Fe({as:de,className:In(Oe.root,c),disabled:ee&&A?!0:void 0,onClick:B,onKeyDown:re,onKeyUp:ae,ref:D,tabIndex:z&&A?-1:F,ownerState:ke},Le,S,{children:[ct||Ze,bt.exports.jsx(Qoe,{className:In(Oe.label),ownerState:ke,children:O}),Ee]}))});var tae=eae;function vc({props:e,states:t,muiFormControl:n}){return t.reduce((r,a)=>(r[a]=e[a],n&&typeof e[a]=="undefined"&&(r[a]=n[a]),r),{})}const nae=g.exports.createContext(void 0);var Lk=nae;function iu(){return g.exports.useContext(Lk)}function rae(e){return bt.exports.jsx(zee,Fe({},e,{defaultTheme:M1}))}function PR(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Ok(e,t=!1){return e&&(PR(e.value)&&e.value!==""||t&&PR(e.defaultValue)&&e.defaultValue!=="")}function iae(e){return e.startAdornment}function oae(e){return vr("MuiInputBase",e)}const aae=ar("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var Ta=aae;const sae=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],R1=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${dn(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},L1=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},lae=e=>{const{classes:t,color:n,disabled:r,error:a,endAdornment:c,focused:h,formControl:o,fullWidth:m,hiddenLabel:w,multiline:A,readOnly:P,size:O,startAdornment:B,type:N}=e,k={root:["root",`color${dn(n)}`,r&&"disabled",a&&"error",m&&"fullWidth",h&&"focused",o&&"formControl",O==="small"&&"sizeSmall",A&&"multiline",B&&"adornedStart",c&&"adornedEnd",w&&"hiddenLabel",P&&"readOnly"],input:["input",r&&"disabled",N==="search"&&"inputTypeSearch",A&&"inputMultiline",O==="small"&&"inputSizeSmall",w&&"inputHiddenLabel",B&&"inputAdornedStart",c&&"inputAdornedEnd",P&&"readOnly"]};return kr(k,oae,t)},O1=cn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:R1})(({theme:e,ownerState:t})=>Fe({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ta.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&Fe({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),z1=cn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:L1})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=Fe({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),a={opacity:"0 !important"},c=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return Fe({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ta.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":c,"&:focus::-moz-placeholder":c,"&:focus:-ms-input-placeholder":c,"&:focus::-ms-input-placeholder":c},[`&.${Ta.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),uae=bt.exports.jsx(rae,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),cae=g.exports.forwardRef(function(t,n){var r;const a=Rr({props:t,name:"MuiInputBase"}),{"aria-describedby":c,autoComplete:h,autoFocus:o,className:m,components:w={},componentsProps:A={},defaultValue:P,disabled:O,disableInjectingGlobalStyles:B,endAdornment:N,fullWidth:k=!1,id:V,inputComponent:U="input",inputProps:W={},inputRef:F,maxRows:z,minRows:S,multiline:b=!1,name:D,onBlur:Y,onChange:re,onClick:ae,onFocus:ee,onKeyDown:de,onKeyUp:ke,placeholder:Oe,readOnly:Le,renderSuffix:Ee,rows:ct,slotProps:Ze={},slots:rt={},startAdornment:tt,type:xe="text",value:be}=a,nn=bn(a,sae),$t=W.value!=null?W.value:be,{current:an}=g.exports.useRef($t!=null),en=g.exports.useRef(),ln=g.exports.useCallback(ye=>{},[]),mn=Zi(en,F,W.ref,ln),[fn,An]=g.exports.useState(!1),ze=iu(),Xe=vc({props:a,muiFormControl:ze,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Xe.focused=ze?ze.focused:fn,g.exports.useEffect(()=>{!ze&&O&&fn&&(An(!1),Y&&Y())},[ze,O,fn,Y]);const ft=ze&&ze.onFilled,Et=ze&&ze.onEmpty,_t=g.exports.useCallback(ye=>{Ok(ye)?ft&&ft():Et&&Et()},[ft,Et]);Kl(()=>{an&&_t({value:$t})},[$t,_t,an]);const ht=ye=>{if(Xe.disabled){ye.stopPropagation();return}ee&&ee(ye),W.onFocus&&W.onFocus(ye),ze&&ze.onFocus?ze.onFocus(ye):An(!0)},Pt=ye=>{Y&&Y(ye),W.onBlur&&W.onBlur(ye),ze&&ze.onBlur?ze.onBlur(ye):An(!1)},_n=(ye,...Se)=>{if(!an){const vt=ye.target||en.current;if(vt==null)throw new Error(lc(1));_t({value:vt.value})}W.onChange&&W.onChange(ye,...Se),re&&re(ye,...Se)};g.exports.useEffect(()=>{_t(en.current)},[]);const On=ye=>{en.current&&ye.currentTarget===ye.target&&en.current.focus(),ae&&ae(ye)};let Ln=U,Mn=W;b&&Ln==="input"&&(ct?Mn=Fe({type:void 0,minRows:ct,maxRows:ct},Mn):Mn=Fe({type:void 0,maxRows:z,minRows:S},Mn),Ln=Tie);const Zn=ye=>{_t(ye.animationName==="mui-auto-fill-cancel"?en.current:{value:"x"})};g.exports.useEffect(()=>{ze&&ze.setAdornedStart(Boolean(tt))},[ze,tt]);const Pe=Fe({},a,{color:Xe.color||"primary",disabled:Xe.disabled,endAdornment:N,error:Xe.error,focused:Xe.focused,formControl:ze,fullWidth:k,hiddenLabel:Xe.hiddenLabel,multiline:b,size:Xe.size,startAdornment:tt,type:xe}),Je=lae(Pe),ie=rt.root||w.Root||O1,ue=Ze.root||A.root||{},De=rt.input||w.Input||z1;return Mn=Fe({},Mn,(r=Ze.input)!=null?r:A.input),bt.exports.jsxs(g.exports.Fragment,{children:[!B&&uae,bt.exports.jsxs(ie,Fe({},ue,!s0(ie)&&{ownerState:Fe({},Pe,ue.ownerState)},{ref:n,onClick:On},nn,{className:In(Je.root,ue.className,m,Le&&"MuiInputBase-readOnly"),children:[tt,bt.exports.jsx(Lk.Provider,{value:null,children:bt.exports.jsx(De,Fe({ownerState:Pe,"aria-invalid":Xe.error,"aria-describedby":c,autoComplete:h,autoFocus:o,defaultValue:P,disabled:Xe.disabled,id:V,onAnimationStart:Zn,name:D,placeholder:Oe,readOnly:Le,required:Xe.required,rows:ct,value:$t,onKeyDown:de,onKeyUp:ke,type:xe},Mn,!s0(De)&&{as:Ln,ownerState:Fe({},Pe,Mn.ownerState)},{ref:mn,className:In(Je.input,Mn.className,Le&&"MuiInputBase-readOnly"),onBlur:Pt,onChange:_n,onFocus:ht}))}),N,Ee?Ee(Fe({},Xe,{startAdornment:tt})):null]}))]})});var zk=cae;function dae(e){return vr("MuiInput",e)}const hae=Fe({},Ta,ar("MuiInput",["root","underline","input"]));var Hu=hae;function pae(e){return vr("MuiOutlinedInput",e)}const fae=Fe({},Ta,ar("MuiOutlinedInput",["root","notchedOutline","input"]));var il=fae;function mae(e){return vr("MuiFilledInput",e)}const gae=Fe({},Ta,ar("MuiFilledInput",["root","underline","input"]));var ka=gae,yB=nu(bt.exports.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function yae(e){return vr("MuiAutocomplete",e)}const vae=ar("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var or=vae,DR,RR;const _ae=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],xae=e=>{const{classes:t,disablePortal:n,expanded:r,focused:a,fullWidth:c,hasClearIcon:h,hasPopupIcon:o,inputFocused:m,popupOpen:w,size:A}=e,P={root:["root",r&&"expanded",a&&"focused",c&&"fullWidth",h&&"hasClearIcon",o&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",m&&"inputFocused"],tag:["tag",`tagSize${dn(A)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",w&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return kr(P,yae,t)},bae=cn("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:a,hasPopupIcon:c,inputFocused:h,size:o}=n;return[{[`& .${or.tag}`]:t.tag},{[`& .${or.tag}`]:t[`tagSize${dn(o)}`]},{[`& .${or.inputRoot}`]:t.inputRoot},{[`& .${or.input}`]:t.input},{[`& .${or.input}`]:h&&t.inputFocused},t.root,r&&t.fullWidth,c&&t.hasPopupIcon,a&&t.hasClearIcon]}})(({ownerState:e})=>Fe({[`&.${or.focused} .${or.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${or.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${or.tag}`]:Fe({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${or.inputRoot}`]:{flexWrap:"wrap",[`.${or.hasPopupIcon}&, .${or.hasClearIcon}&`]:{paddingRight:26+4},[`.${or.hasPopupIcon}.${or.hasClearIcon}&`]:{paddingRight:52+4},[`& .${or.input}`]:{width:0,minWidth:30}},[`& .${Hu.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Hu.root}.${Ta.sizeSmall}`]:{[`& .${Hu.input}`]:{padding:"2px 4px 3px 0"}},[`& .${il.root}`]:{padding:9,[`.${or.hasPopupIcon}&, .${or.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${or.hasPopupIcon}.${or.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${or.input}`]:{padding:"7.5px 4px 7.5px 6px"},[`& .${or.endAdornment}`]:{right:9}},[`& .${il.root}.${Ta.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${or.input}`]:{padding:"2.5px 4px 2.5px 6px"}},[`& .${ka.root}`]:{paddingTop:19,paddingLeft:8,[`.${or.hasPopupIcon}&, .${or.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${or.hasPopupIcon}.${or.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${ka.input}`]:{padding:"7px 4px"},[`& .${or.endAdornment}`]:{right:9}},[`& .${ka.root}.${Ta.sizeSmall}`]:{paddingBottom:1,[`& .${ka.input}`]:{padding:"2.5px 4px"}},[`& .${Ta.hiddenLabel}`]:{paddingTop:8},[`& .${ka.root}.${Ta.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${or.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${ka.root}.${Ta.hiddenLabel}.${Ta.sizeSmall}`]:{[`& .${or.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${or.input}`]:Fe({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),wae=cn("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),Eae=cn(Rk,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Cae=cn(Rk,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>Fe({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>Fe({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),Sae=cn(mB,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${or.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>Fe({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),Tae=cn(pf,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>Fe({},e.typography.body1,{overflow:"auto"})),kae=cn("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Aae=cn("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Mae=cn("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${or.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${or.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${or.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Oi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${or.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Oi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${or.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Oi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),Iae=cn(Goe,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),Pae=cn("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${or.option}`]:{paddingLeft:24}}),Dae=g.exports.forwardRef(function(t,n){var r,a,c,h;const o=Rr({props:t,name:"MuiAutocomplete"}),{autoComplete:m=!1,autoHighlight:w=!1,autoSelect:A=!1,blurOnSelect:P=!1,ChipProps:O,className:B,clearIcon:N=DR||(DR=bt.exports.jsx(fB,{fontSize:"small"})),clearOnBlur:k=!o.freeSolo,clearOnEscape:V=!1,clearText:U="Clear",closeText:W="Close",componentsProps:F={},defaultValue:z=o.multiple?[]:null,disableClearable:S=!1,disableCloseOnSelect:b=!1,disabled:D=!1,disabledItemsFocusable:Y=!1,disableListWrap:re=!1,disablePortal:ae=!1,filterSelectedOptions:ee=!1,forcePopupIcon:de="auto",freeSolo:ke=!1,fullWidth:Oe=!1,getLimitTagsText:Le=fe=>`+${fe}`,getOptionLabel:Ee=fe=>{var Me;return(Me=fe.label)!=null?Me:fe},groupBy:ct,handleHomeEndKeys:Ze=!o.freeSolo,includeInputInList:rt=!1,limitTags:tt=-1,ListboxComponent:xe="ul",ListboxProps:be,loading:nn=!1,loadingText:$t="Loading\u2026",multiple:an=!1,noOptionsText:en="No options",openOnFocus:ln=!1,openText:mn="Open",PaperComponent:fn=pf,PopperComponent:An=mB,popupIcon:ze=RR||(RR=bt.exports.jsx(yB,{})),readOnly:Xe=!1,renderGroup:ft,renderInput:Et,renderOption:_t,renderTags:ht,selectOnFocus:Pt=!o.freeSolo,size:_n="medium",slotProps:On={}}=o,Ln=bn(o,_ae),{getRootProps:Mn,getInputProps:Zn,getInputLabelProps:Pe,getPopupIndicatorProps:Je,getClearProps:ie,getTagProps:ue,getListboxProps:De,getOptionProps:ye,value:Se,dirty:vt,expanded:Nt,id:Xt,popupOpen:Bn,focused:kn,focusedTag:jt,anchorEl:Rn,setAnchorEl:dr,inputValue:Fn,groupedOptions:Ar}=Iie(Fe({},o,{componentName:"Autocomplete"})),hr=!S&&!D&&vt&&!Xe,Lr=(!ke||de===!0)&&de!==!1,Kn=Fe({},o,{disablePortal:ae,expanded:Nt,focused:kn,fullWidth:Oe,hasClearIcon:hr,hasPopupIcon:Lr,inputFocused:jt===-1,popupOpen:Bn,size:_n}),Jn=xae(Kn);let Vr;if(an&&Se.length>0){const fe=Me=>Fe({className:Jn.tag,disabled:D},ue(Me));ht?Vr=ht(Se,fe,Kn):Vr=Se.map((Me,We)=>bt.exports.jsx(tae,Fe({label:Ee(Me),size:_n},fe({index:We}),O)))}if(tt>-1&&Array.isArray(Vr)){const fe=Vr.length-tt;!kn&&fe>0&&(Vr=Vr.splice(0,tt),Vr.push(bt.exports.jsx("span",{className:Jn.tag,children:Le(fe)},Vr.length)))}const Fi=ft||(fe=>bt.exports.jsxs("li",{children:[bt.exports.jsx(Iae,{className:Jn.groupLabel,ownerState:Kn,component:"div",children:fe.group}),bt.exports.jsx(Pae,{className:Jn.groupUl,ownerState:Kn,children:fe.children})]},fe.key)),si=_t||((fe,Me)=>bt.exports.jsx("li",Fe({},fe,{children:Ee(Me)}))),Ni=(fe,Me)=>{const We=ye({option:fe,index:Me});return si(Fe({},We,{className:Jn.option}),fe,{selected:We["aria-selected"],index:Me,inputValue:Fn})},oo=(r=On.clearIndicator)!=null?r:F.clearIndicator,_e=(a=On.paper)!=null?a:F.paper,ne=(c=On.popper)!=null?c:F.popper,se=(h=On.popupIndicator)!=null?h:F.popupIndicator;return bt.exports.jsxs(g.exports.Fragment,{children:[bt.exports.jsx(bae,Fe({ref:n,className:In(Jn.root,B),ownerState:Kn},Mn(Ln),{children:Et({id:Xt,disabled:D,fullWidth:!0,size:_n==="small"?"small":void 0,InputLabelProps:Pe(),InputProps:Fe({ref:dr,className:Jn.inputRoot,startAdornment:Vr},(hr||Lr)&&{endAdornment:bt.exports.jsxs(wae,{className:Jn.endAdornment,ownerState:Kn,children:[hr?bt.exports.jsx(Eae,Fe({},ie(),{"aria-label":U,title:U,ownerState:Kn},oo,{className:In(Jn.clearIndicator,oo==null?void 0:oo.className),children:N})):null,Lr?bt.exports.jsx(Cae,Fe({},Je(),{disabled:D,"aria-label":Bn?W:mn,title:Bn?W:mn,ownerState:Kn},se,{className:In(Jn.popupIndicator,se==null?void 0:se.className),children:ze})):null]})}),inputProps:Fe({className:Jn.input,disabled:D,readOnly:Xe},Zn())})})),Rn?bt.exports.jsx(Sae,Fe({as:An,disablePortal:ae,style:{width:Rn?Rn.clientWidth:null},ownerState:Kn,role:"presentation",anchorEl:Rn,open:Bn},ne,{className:In(Jn.popper,ne==null?void 0:ne.className),children:bt.exports.jsxs(Tae,Fe({ownerState:Kn,as:fn},_e,{className:In(Jn.paper,_e==null?void 0:_e.className),children:[nn&&Ar.length===0?bt.exports.jsx(kae,{className:Jn.loading,ownerState:Kn,children:$t}):null,Ar.length===0&&!ke&&!nn?bt.exports.jsx(Aae,{className:Jn.noOptions,ownerState:Kn,role:"presentation",onMouseDown:fe=>{fe.preventDefault()},children:en}):null,Ar.length>0?bt.exports.jsx(Mae,Fe({as:xe,className:Jn.listbox,ownerState:Kn},De(),be,{children:Ar.map((fe,Me)=>ct?Fi({key:fe.key,group:fe.group,children:fe.options.map((We,Qe)=>Ni(We,fe.index+Qe))}):Ni(fe,Me))})):null]}))})):null]})});var Rae=Dae;const Lae=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Oae={entering:{opacity:1},entered:{opacity:1}},zae=g.exports.forwardRef(function(t,n){const r=I1(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:c,appear:h=!0,children:o,easing:m,in:w,onEnter:A,onEntered:P,onEntering:O,onExit:B,onExited:N,onExiting:k,style:V,timeout:U=a,TransitionComponent:W=hB}=t,F=bn(t,Lae),z=g.exports.useRef(null),S=Zi(z,o.ref,n),b=Oe=>Le=>{if(Oe){const Ee=z.current;Le===void 0?Oe(Ee):Oe(Ee,Le)}},D=b(O),Y=b((Oe,Le)=>{pB(Oe);const Ee=d0({style:V,timeout:U,easing:m},{mode:"enter"});Oe.style.webkitTransition=r.transitions.create("opacity",Ee),Oe.style.transition=r.transitions.create("opacity",Ee),A&&A(Oe,Le)}),re=b(P),ae=b(k),ee=b(Oe=>{const Le=d0({style:V,timeout:U,easing:m},{mode:"exit"});Oe.style.webkitTransition=r.transitions.create("opacity",Le),Oe.style.transition=r.transitions.create("opacity",Le),B&&B(Oe)}),de=b(N),ke=Oe=>{c&&c(z.current,Oe)};return bt.exports.jsx(W,Fe({appear:h,in:w,nodeRef:z,onEnter:Y,onEntered:re,onEntering:D,onExit:ee,onExited:de,onExiting:ae,addEndListener:ke,timeout:U},F,{children:(Oe,Le)=>g.exports.cloneElement(o,Fe({style:Fe({opacity:0,visibility:Oe==="exited"&&!w?"hidden":void 0},Oae[Oe],V,o.props.style),ref:S},Le))}))});var Bae=zae;function Fae(e){return vr("MuiBackdrop",e)}ar("MuiBackdrop",["root","invisible"]);const Nae=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],$ae=e=>{const{classes:t,invisible:n}=e;return kr({root:["root",n&&"invisible"]},Fae,t)},Uae=cn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>Fe({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),jae=g.exports.forwardRef(function(t,n){var r,a,c;const h=Rr({props:t,name:"MuiBackdrop"}),{children:o,className:m,component:w="div",components:A={},componentsProps:P={},invisible:O=!1,open:B,slotProps:N={},slots:k={},TransitionComponent:V=Bae,transitionDuration:U}=h,W=bn(h,Nae),F=Fe({},h,{component:w,invisible:O}),z=$ae(F),S=(r=N.root)!=null?r:P.root;return bt.exports.jsx(V,Fe({in:B,timeout:U},W,{children:bt.exports.jsx(Uae,Fe({"aria-hidden":!0},S,{as:(a=(c=k.root)!=null?c:A.Root)!=null?a:w,className:In(z.root,m,S==null?void 0:S.className),ownerState:Fe({},F,S==null?void 0:S.ownerState),classes:z,ref:n,children:o}))}))});var Vae=jae;const Hae=Y5(),Wae=Nte({defaultTheme:Hae,defaultClassName:"MuiBox-root",generateClassName:w5.generate});var Gae=Wae;function qae(e){return vr("PrivateSwitchBase",e)}ar("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Zae=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Xae=e=>{const{classes:t,checked:n,disabled:r,edge:a}=e,c={root:["root",n&&"checked",r&&"disabled",a&&`edge${dn(a)}`],input:["input"]};return kr(c,qae,t)},Kae=cn(ry)(({ownerState:e})=>Fe({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Yae=cn("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Jae=g.exports.forwardRef(function(t,n){const{autoFocus:r,checked:a,checkedIcon:c,className:h,defaultChecked:o,disabled:m,disableFocusRipple:w=!1,edge:A=!1,icon:P,id:O,inputProps:B,inputRef:N,name:k,onBlur:V,onChange:U,onFocus:W,readOnly:F,required:z=!1,tabIndex:S,type:b,value:D}=t,Y=bn(t,Zae),[re,ae]=Id({controlled:a,default:Boolean(o),name:"SwitchBase",state:"checked"}),ee=iu(),de=rt=>{W&&W(rt),ee&&ee.onFocus&&ee.onFocus(rt)},ke=rt=>{V&&V(rt),ee&&ee.onBlur&&ee.onBlur(rt)},Oe=rt=>{if(rt.nativeEvent.defaultPrevented)return;const tt=rt.target.checked;ae(tt),U&&U(rt,tt)};let Le=m;ee&&typeof Le=="undefined"&&(Le=ee.disabled);const Ee=b==="checkbox"||b==="radio",ct=Fe({},t,{checked:re,disabled:Le,disableFocusRipple:w,edge:A}),Ze=Xae(ct);return bt.exports.jsxs(Kae,Fe({component:"span",className:In(Ze.root,h),centerRipple:!0,focusRipple:!w,disabled:Le,tabIndex:null,role:void 0,onFocus:de,onBlur:ke,ownerState:ct,ref:n},Y,{children:[bt.exports.jsx(Yae,Fe({autoFocus:r,checked:a,defaultChecked:o,className:Ze.input,disabled:Le,id:Ee?O:void 0,name:k,onChange:Oe,readOnly:F,ref:N,required:z,ownerState:ct,tabIndex:S,type:b},b==="checkbox"&&D===void 0?{}:{value:D},B)),re?c:P]}))});var Qae=Jae;const ese=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","slotProps","slots","theme"],tse=cn("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>Fe({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),nse=cn(Vae,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),rse=g.exports.forwardRef(function(t,n){var r,a,c,h,o,m;const w=Rr({name:"MuiModal",props:t}),{BackdropComponent:A=nse,BackdropProps:P,classes:O,className:B,closeAfterTransition:N=!1,children:k,component:V,components:U={},componentsProps:W={},disableAutoFocus:F=!1,disableEnforceFocus:z=!1,disableEscapeKeyDown:S=!1,disablePortal:b=!1,disableRestoreFocus:D=!1,disableScrollLock:Y=!1,hideBackdrop:re=!1,keepMounted:ae=!1,slotProps:ee,slots:de,theme:ke}=w,Oe=bn(w,ese),[Le,Ee]=g.exports.useState(!0),ct={closeAfterTransition:N,disableAutoFocus:F,disableEnforceFocus:z,disableEscapeKeyDown:S,disablePortal:b,disableRestoreFocus:D,disableScrollLock:Y,hideBackdrop:re,keepMounted:ae},Ze=Fe({},w,ct,{exited:Le}),rt=(r=(a=de==null?void 0:de.root)!=null?a:U.Root)!=null?r:tse,tt=(c=(h=de==null?void 0:de.backdrop)!=null?h:U.Backdrop)!=null?c:A,xe=(o=ee==null?void 0:ee.root)!=null?o:W.root,be=(m=ee==null?void 0:ee.backdrop)!=null?m:W.backdrop;return bt.exports.jsx(bie,Fe({slots:{root:rt,backdrop:tt},slotProps:{root:()=>Fe({},aS(xe,Ze),!s0(rt)&&{as:V,theme:ke},{className:In(B,xe==null?void 0:xe.className,O==null?void 0:O.root,!Ze.open&&Ze.exited&&(O==null?void 0:O.hidden))}),backdrop:()=>Fe({},P,aS(be,Ze),{className:In(be==null?void 0:be.className,O==null?void 0:O.backdrop)})},onTransitionEnter:()=>Ee(!1),onTransitionExited:()=>Ee(!0),ref:n},Oe,ct,{children:k}))});var ise=rse;const ose=ar("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var LR=ose;const ase=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],sse=e=>{const{classes:t,disableUnderline:n}=e,a=kr({root:["root",!n&&"underline"],input:["input"]},mae,t);return Fe({},t,a)},lse=cn(O1,{shouldForwardProp:e=>vl(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...R1(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const r=e.palette.mode==="light",a=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",c=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",h=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",o=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Fe({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:h,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c}},[`&.${ka.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:c},[`&.${ka.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:o}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${ka.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${ka.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${ka.disabled}, .${ka.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${ka.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&Fe({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),use=cn(z1,{name:"MuiFilledInput",slot:"Input",overridesResolver:L1})(({theme:e,ownerState:t})=>Fe({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),vB=g.exports.forwardRef(function(t,n){var r,a,c,h;const o=Rr({props:t,name:"MuiFilledInput"}),{components:m={},componentsProps:w,fullWidth:A=!1,inputComponent:P="input",multiline:O=!1,slotProps:B,slots:N={},type:k="text"}=o,V=bn(o,ase),U=Fe({},o,{fullWidth:A,inputComponent:P,multiline:O,type:k}),W=sse(o),F={root:{ownerState:U},input:{ownerState:U}},z=(B!=null?B:w)?ts(B!=null?B:w,F):F,S=(r=(a=N.root)!=null?a:m.Root)!=null?r:lse,b=(c=(h=N.input)!=null?h:m.Input)!=null?c:use;return bt.exports.jsx(zk,Fe({slots:{root:S,input:b},componentsProps:z,fullWidth:A,inputComponent:P,multiline:O,ref:n,type:k},V,{classes:W}))});vB.muiName="Input";var _B=vB;function cse(e){return vr("MuiFormControl",e)}ar("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const dse=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],hse=e=>{const{classes:t,margin:n,fullWidth:r}=e,a={root:["root",n!=="none"&&`margin${dn(n)}`,r&&"fullWidth"]};return kr(a,cse,t)},pse=cn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>Fe({},t.root,t[`margin${dn(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>Fe({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),fse=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiFormControl"}),{children:a,className:c,color:h="primary",component:o="div",disabled:m=!1,error:w=!1,focused:A,fullWidth:P=!1,hiddenLabel:O=!1,margin:B="none",required:N=!1,size:k="medium",variant:V="outlined"}=r,U=bn(r,dse),W=Fe({},r,{color:h,component:o,disabled:m,error:w,fullWidth:P,hiddenLabel:O,margin:B,required:N,size:k,variant:V}),F=hse(W),[z,S]=g.exports.useState(()=>{let ke=!1;return a&&g.exports.Children.forEach(a,Oe=>{if(!uE(Oe,["Input","Select"]))return;const Le=uE(Oe,["Select"])?Oe.props.input:Oe;Le&&iae(Le.props)&&(ke=!0)}),ke}),[b,D]=g.exports.useState(()=>{let ke=!1;return a&&g.exports.Children.forEach(a,Oe=>{!uE(Oe,["Input","Select"])||Ok(Oe.props,!0)&&(ke=!0)}),ke}),[Y,re]=g.exports.useState(!1);m&&Y&&re(!1);const ae=A!==void 0&&!m?A:Y;let ee;const de=g.exports.useMemo(()=>({adornedStart:z,setAdornedStart:S,color:h,disabled:m,error:w,filled:b,focused:ae,fullWidth:P,hiddenLabel:O,size:k,onBlur:()=>{re(!1)},onEmpty:()=>{D(!1)},onFilled:()=>{D(!0)},onFocus:()=>{re(!0)},registerEffect:ee,required:N,variant:V}),[z,h,m,w,b,ae,P,O,ee,N,k,V]);return bt.exports.jsx(Lk.Provider,{value:de,children:bt.exports.jsx(pse,Fe({as:o,ownerState:W,className:In(F.root,c),ref:n},U,{children:a}))})});var Bk=fse;function mse(e){return vr("MuiFormControlLabel",e)}const gse=ar("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]);var z_=gse;const yse=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","slotProps","value"],vse=e=>{const{classes:t,disabled:n,labelPlacement:r,error:a}=e,c={root:["root",n&&"disabled",`labelPlacement${dn(r)}`,a&&"error"],label:["label",n&&"disabled"]};return kr(c,mse,t)},_se=cn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${z_.label}`]:t.label},t.root,t[`labelPlacement${dn(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>Fe({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${z_.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${z_.label}`]:{[`&.${z_.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),xse=g.exports.forwardRef(function(t,n){var r;const a=Rr({props:t,name:"MuiFormControlLabel"}),{className:c,componentsProps:h={},control:o,disabled:m,disableTypography:w,label:A,labelPlacement:P="end",slotProps:O={}}=a,B=bn(a,yse),N=iu();let k=m;typeof k=="undefined"&&typeof o.props.disabled!="undefined"&&(k=o.props.disabled),typeof k=="undefined"&&N&&(k=N.disabled);const V={disabled:k};["checked","name","onChange","value","inputRef"].forEach(b=>{typeof o.props[b]=="undefined"&&typeof a[b]!="undefined"&&(V[b]=a[b])});const U=vc({props:a,muiFormControl:N,states:["error"]}),W=Fe({},a,{disabled:k,labelPlacement:P,error:U.error}),F=vse(W),z=(r=O.typography)!=null?r:h.typography;let S=A;return S!=null&&S.type!==MR&&!w&&(S=bt.exports.jsx(MR,Fe({component:"span"},z,{className:In(F.label,z==null?void 0:z.className),children:S}))),bt.exports.jsxs(_se,Fe({className:In(F.root,c),ownerState:W,ref:n},B,{children:[g.exports.cloneElement(o,V),S]}))});var gE=xse;function bse(e){return vr("MuiFormGroup",e)}ar("MuiFormGroup",["root","row","error"]);const wse=["className","row"],Ese=e=>{const{classes:t,row:n,error:r}=e;return kr({root:["root",n&&"row",r&&"error"]},bse,t)},Cse=cn("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>Fe({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Sse=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiFormGroup"}),{className:a,row:c=!1}=r,h=bn(r,wse),o=iu(),m=vc({props:r,muiFormControl:o,states:["error"]}),w=Fe({},r,{row:c,error:m.error}),A=Ese(w);return bt.exports.jsx(Cse,Fe({className:In(A.root,a),ownerState:w,ref:n},h))});var Tse=Sse;function kse(e){return vr("MuiFormHelperText",e)}const Ase=ar("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var OR=Ase,zR;const Mse=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Ise=e=>{const{classes:t,contained:n,size:r,disabled:a,error:c,filled:h,focused:o,required:m}=e,w={root:["root",a&&"disabled",c&&"error",r&&`size${dn(r)}`,n&&"contained",o&&"focused",h&&"filled",m&&"required"]};return kr(w,kse,t)},Pse=cn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${dn(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>Fe({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${OR.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${OR.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),Dse=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiFormHelperText"}),{children:a,className:c,component:h="p"}=r,o=bn(r,Mse),m=iu(),w=vc({props:r,muiFormControl:m,states:["variant","size","disabled","error","filled","focused","required"]}),A=Fe({},r,{component:h,contained:w.variant==="filled"||w.variant==="outlined",variant:w.variant,size:w.size,disabled:w.disabled,error:w.error,filled:w.filled,focused:w.focused,required:w.required}),P=Ise(A);return bt.exports.jsx(Pse,Fe({as:h,ownerState:A,className:In(P.root,c),ref:n},o,{children:a===" "?zR||(zR=bt.exports.jsx("span",{className:"notranslate",children:"\u200B"})):a}))});var Rse=Dse;function Lse(e){return vr("MuiFormLabel",e)}const Ose=ar("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);var Tg=Ose;const zse=["children","className","color","component","disabled","error","filled","focused","required"],Bse=e=>{const{classes:t,color:n,focused:r,disabled:a,error:c,filled:h,required:o}=e,m={root:["root",`color${dn(n)}`,a&&"disabled",c&&"error",h&&"filled",r&&"focused",o&&"required"],asterisk:["asterisk",c&&"error"]};return kr(m,Lse,t)},Fse=cn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>Fe({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>Fe({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Tg.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Tg.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Tg.error}`]:{color:(e.vars||e).palette.error.main}})),Nse=cn("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Tg.error}`]:{color:(e.vars||e).palette.error.main}})),$se=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiFormLabel"}),{children:a,className:c,component:h="label"}=r,o=bn(r,zse),m=iu(),w=vc({props:r,muiFormControl:m,states:["color","required","focused","disabled","error","filled"]}),A=Fe({},r,{color:w.color||"primary",component:h,disabled:w.disabled,error:w.error,filled:w.filled,focused:w.focused,required:w.required}),P=Bse(A);return bt.exports.jsxs(Fse,Fe({as:h,ownerState:A,className:In(P.root,c),ref:n},o,{children:[a,w.required&&bt.exports.jsxs(Nse,{ownerState:A,"aria-hidden":!0,className:P.asterisk,children:["\u2009","*"]})]}))});var xB=$se;const Use=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function pS(e){return`scale(${e}, ${e**2})`}const jse={entering:{opacity:1,transform:pS(1)},entered:{opacity:1,transform:"none"}},yE=typeof navigator!="undefined"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),bB=g.exports.forwardRef(function(t,n){const{addEndListener:r,appear:a=!0,children:c,easing:h,in:o,onEnter:m,onEntered:w,onEntering:A,onExit:P,onExited:O,onExiting:B,style:N,timeout:k="auto",TransitionComponent:V=hB}=t,U=bn(t,Use),W=g.exports.useRef(),F=g.exports.useRef(),z=I1(),S=g.exports.useRef(null),b=Zi(S,c.ref,n),D=Le=>Ee=>{if(Le){const ct=S.current;Ee===void 0?Le(ct):Le(ct,Ee)}},Y=D(A),re=D((Le,Ee)=>{pB(Le);const{duration:ct,delay:Ze,easing:rt}=d0({style:N,timeout:k,easing:h},{mode:"enter"});let tt;k==="auto"?(tt=z.transitions.getAutoHeightDuration(Le.clientHeight),F.current=tt):tt=ct,Le.style.transition=[z.transitions.create("opacity",{duration:tt,delay:Ze}),z.transitions.create("transform",{duration:yE?tt:tt*.666,delay:Ze,easing:rt})].join(","),m&&m(Le,Ee)}),ae=D(w),ee=D(B),de=D(Le=>{const{duration:Ee,delay:ct,easing:Ze}=d0({style:N,timeout:k,easing:h},{mode:"exit"});let rt;k==="auto"?(rt=z.transitions.getAutoHeightDuration(Le.clientHeight),F.current=rt):rt=Ee,Le.style.transition=[z.transitions.create("opacity",{duration:rt,delay:ct}),z.transitions.create("transform",{duration:yE?rt:rt*.666,delay:yE?ct:ct||rt*.333,easing:Ze})].join(","),Le.style.opacity=0,Le.style.transform=pS(.75),P&&P(Le)}),ke=D(O),Oe=Le=>{k==="auto"&&(W.current=setTimeout(Le,F.current||0)),r&&r(S.current,Le)};return g.exports.useEffect(()=>()=>{clearTimeout(W.current)},[]),bt.exports.jsx(V,Fe({appear:a,in:o,nodeRef:S,onEnter:re,onEntered:ae,onEntering:Y,onExit:de,onExited:ke,onExiting:ee,addEndListener:Oe,timeout:k==="auto"?null:k},U,{children:(Le,Ee)=>g.exports.cloneElement(c,Fe({style:Fe({opacity:0,transform:pS(.75),visibility:Le==="exited"&&!o?"hidden":void 0},jse[Le],N,c.props.style),ref:b},Ee))}))});bB.muiSupportAuto=!0;var wB=bB;const Vse=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Hse=e=>{const{classes:t,disableUnderline:n}=e,a=kr({root:["root",!n&&"underline"],input:["input"]},dae,t);return Fe({},t,a)},Wse=cn(O1,{shouldForwardProp:e=>vl(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...R1(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),Fe({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Hu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Hu.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Hu.disabled}, .${Hu.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Hu.disabled}:before`]:{borderBottomStyle:"dotted"}})}),Gse=cn(z1,{name:"MuiInput",slot:"Input",overridesResolver:L1})({}),EB=g.exports.forwardRef(function(t,n){var r,a,c,h;const o=Rr({props:t,name:"MuiInput"}),{disableUnderline:m,components:w={},componentsProps:A,fullWidth:P=!1,inputComponent:O="input",multiline:B=!1,slotProps:N,slots:k={},type:V="text"}=o,U=bn(o,Vse),W=Hse(o),z={root:{ownerState:{disableUnderline:m}}},S=(N!=null?N:A)?ts(N!=null?N:A,z):z,b=(r=(a=k.root)!=null?a:w.Root)!=null?r:Wse,D=(c=(h=k.input)!=null?h:w.Input)!=null?c:Gse;return bt.exports.jsx(zk,Fe({slots:{root:b,input:D},slotProps:S,fullWidth:P,inputComponent:O,multiline:B,ref:n,type:V},U,{classes:W}))});EB.muiName="Input";var CB=EB;function qse(e){return vr("MuiInputLabel",e)}ar("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Zse=["disableAnimation","margin","shrink","variant","className"],Xse=e=>{const{classes:t,formControl:n,size:r,shrink:a,disableAnimation:c,variant:h,required:o}=e,w=kr({root:["root",n&&"formControl",!c&&"animated",a&&"shrink",r==="small"&&"sizeSmall",h],asterisk:[o&&"asterisk"]},qse,t);return Fe({},t,w)},Kse=cn(xB,{shouldForwardProp:e=>vl(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Tg.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(({theme:e,ownerState:t})=>Fe({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&Fe({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&Fe({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&Fe({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Yse=g.exports.forwardRef(function(t,n){const r=Rr({name:"MuiInputLabel",props:t}),{disableAnimation:a=!1,shrink:c,className:h}=r,o=bn(r,Zse),m=iu();let w=c;typeof w=="undefined"&&m&&(w=m.filled||m.focused||m.adornedStart);const A=vc({props:r,muiFormControl:m,states:["size","variant","required"]}),P=Fe({},r,{disableAnimation:a,formControl:m,shrink:w,size:A.size,variant:A.variant,required:A.required}),O=Xse(P);return bt.exports.jsx(Kse,Fe({"data-shrink":w,ownerState:P,ref:n,className:In(O.root,h)},o,{classes:O}))});var SB=Yse;const Jse=g.exports.createContext({});var fS=Jse;function Qse(e){return vr("MuiList",e)}ar("MuiList",["root","padding","dense","subheader"]);const ele=["children","className","component","dense","disablePadding","subheader"],tle=e=>{const{classes:t,disablePadding:n,dense:r,subheader:a}=e;return kr({root:["root",!n&&"padding",r&&"dense",a&&"subheader"]},Qse,t)},nle=cn("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>Fe({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),rle=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiList"}),{children:a,className:c,component:h="ul",dense:o=!1,disablePadding:m=!1,subheader:w}=r,A=bn(r,ele),P=g.exports.useMemo(()=>({dense:o}),[o]),O=Fe({},r,{component:h,dense:o,disablePadding:m}),B=tle(O);return bt.exports.jsx(fS.Provider,{value:P,children:bt.exports.jsxs(nle,Fe({as:h,className:In(B.root,c),ref:n,ownerState:O},A,{children:[w,a]}))})});var ile=rle;const ole=ar("MuiListItemIcon",["root","alignItemsFlexStart"]);var BR=ole;const ale=ar("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var FR=ale;const sle=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function vE(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function NR(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function TB(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Jm(e,t,n,r,a,c){let h=!1,o=a(e,t,t?n:!1);for(;o;){if(o===e.firstChild){if(h)return!1;h=!0}const m=r?!1:o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||!TB(o,c)||m)o=a(e,o,n);else return o.focus(),!0}return!1}const lle=g.exports.forwardRef(function(t,n){const{actions:r,autoFocus:a=!1,autoFocusItem:c=!1,children:h,className:o,disabledItemsFocusable:m=!1,disableListWrap:w=!1,onKeyDown:A,variant:P="selectedMenu"}=t,O=bn(t,sle),B=g.exports.useRef(null),N=g.exports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Kl(()=>{a&&B.current.focus()},[a]),g.exports.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(F,z)=>{const S=!B.current.style.width;if(F.clientHeight<B.current.clientHeight&&S){const b=`${x5(yo(F))}px`;B.current.style[z.direction==="rtl"?"paddingLeft":"paddingRight"]=b,B.current.style.width=`calc(100% + ${b})`}return B.current}}),[]);const k=F=>{const z=B.current,S=F.key,b=yo(z).activeElement;if(S==="ArrowDown")F.preventDefault(),Jm(z,b,w,m,vE);else if(S==="ArrowUp")F.preventDefault(),Jm(z,b,w,m,NR);else if(S==="Home")F.preventDefault(),Jm(z,null,w,m,vE);else if(S==="End")F.preventDefault(),Jm(z,null,w,m,NR);else if(S.length===1){const D=N.current,Y=S.toLowerCase(),re=performance.now();D.keys.length>0&&(re-D.lastTime>500?(D.keys=[],D.repeating=!0,D.previousKeyMatched=!0):D.repeating&&Y!==D.keys[0]&&(D.repeating=!1)),D.lastTime=re,D.keys.push(Y);const ae=b&&!D.repeating&&TB(b,D);D.previousKeyMatched&&(ae||Jm(z,b,!1,m,vE,D))?F.preventDefault():D.previousKeyMatched=!1}A&&A(F)},V=Zi(B,n);let U=-1;g.exports.Children.forEach(h,(F,z)=>{!g.exports.isValidElement(F)||(F.props.disabled||(P==="selectedMenu"&&F.props.selected||U===-1)&&(U=z),U===z&&(F.props.disabled||F.props.muiSkipListHighlight||F.type.muiSkipListHighlight)&&(U+=1,U>=h.length&&(U=-1)))});const W=g.exports.Children.map(h,(F,z)=>{if(z===U){const S={};return c&&(S.autoFocus=!0),F.props.tabIndex===void 0&&P==="selectedMenu"&&(S.tabIndex=0),g.exports.cloneElement(F,S)}return F});return bt.exports.jsx(ile,Fe({role:"menu",ref:V,className:o,onKeyDown:k,tabIndex:a?0:-1},O,{children:W}))});var ule=lle;function cle(e){return vr("MuiPopover",e)}ar("MuiPopover",["root","paper"]);const dle=["onEntering"],hle=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function $R(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function UR(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function jR(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function _E(e){return typeof e=="function"?e():e}const ple=e=>{const{classes:t}=e;return kr({root:["root"],paper:["paper"]},cle,t)},fle=cn(ise,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),mle=cn(pf,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),gle=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiPopover"}),{action:a,anchorEl:c,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:o,anchorReference:m="anchorEl",children:w,className:A,container:P,elevation:O=8,marginThreshold:B=16,open:N,PaperProps:k={},transformOrigin:V={vertical:"top",horizontal:"left"},TransitionComponent:U=wB,transitionDuration:W="auto",TransitionProps:{onEntering:F}={}}=r,z=bn(r.TransitionProps,dle),S=bn(r,hle),b=g.exports.useRef(),D=Zi(b,k.ref),Y=Fe({},r,{anchorOrigin:h,anchorReference:m,elevation:O,marginThreshold:B,PaperProps:k,transformOrigin:V,TransitionComponent:U,transitionDuration:W,TransitionProps:z}),re=ple(Y),ae=g.exports.useCallback(()=>{if(m==="anchorPosition")return o;const tt=_E(c),be=(tt&&tt.nodeType===1?tt:yo(b.current).body).getBoundingClientRect();return{top:be.top+$R(be,h.vertical),left:be.left+UR(be,h.horizontal)}},[c,h.horizontal,h.vertical,o,m]),ee=g.exports.useCallback(tt=>({vertical:$R(tt,V.vertical),horizontal:UR(tt,V.horizontal)}),[V.horizontal,V.vertical]),de=g.exports.useCallback(tt=>{const xe={width:tt.offsetWidth,height:tt.offsetHeight},be=ee(xe);if(m==="none")return{top:null,left:null,transformOrigin:jR(be)};const nn=ae();let $t=nn.top-be.vertical,an=nn.left-be.horizontal;const en=$t+xe.height,ln=an+xe.width,mn=$d(_E(c)),fn=mn.innerHeight-B,An=mn.innerWidth-B;if($t<B){const ze=$t-B;$t-=ze,be.vertical+=ze}else if(en>fn){const ze=en-fn;$t-=ze,be.vertical+=ze}if(an<B){const ze=an-B;an-=ze,be.horizontal+=ze}else if(ln>An){const ze=ln-An;an-=ze,be.horizontal+=ze}return{top:`${Math.round($t)}px`,left:`${Math.round(an)}px`,transformOrigin:jR(be)}},[c,m,ae,ee,B]),[ke,Oe]=g.exports.useState(N),Le=g.exports.useCallback(()=>{const tt=b.current;if(!tt)return;const xe=de(tt);xe.top!==null&&(tt.style.top=xe.top),xe.left!==null&&(tt.style.left=xe.left),tt.style.transformOrigin=xe.transformOrigin,Oe(!0)},[de]),Ee=(tt,xe)=>{F&&F(tt,xe),Le()},ct=()=>{Oe(!1)};g.exports.useEffect(()=>{N&&Le()}),g.exports.useImperativeHandle(a,()=>N?{updatePosition:()=>{Le()}}:null,[N,Le]),g.exports.useEffect(()=>{if(!N)return;const tt=_5(()=>{Le()}),xe=$d(c);return xe.addEventListener("resize",tt),()=>{tt.clear(),xe.removeEventListener("resize",tt)}},[c,N,Le]);let Ze=W;W==="auto"&&!U.muiSupportAuto&&(Ze=void 0);const rt=P||(c?yo(_E(c)).body:void 0);return bt.exports.jsx(fle,Fe({BackdropProps:{invisible:!0},className:In(re.root,A),container:rt,open:N,ref:n,ownerState:Y},S,{children:bt.exports.jsx(U,Fe({appear:!0,in:N,onEntering:Ee,onExited:ct,timeout:Ze},z,{children:bt.exports.jsx(mle,Fe({elevation:O},k,{ref:D,className:In(re.paper,k.className)},ke?void 0:{style:Fe({},k.style,{opacity:0})},{ownerState:Y,children:w}))}))}))});var yle=gle;function vle(e){return vr("MuiMenu",e)}ar("MuiMenu",["root","paper","list"]);const _le=["onEntering"],xle=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],ble={vertical:"top",horizontal:"right"},wle={vertical:"top",horizontal:"left"},Ele=e=>{const{classes:t}=e;return kr({root:["root"],paper:["paper"],list:["list"]},vle,t)},Cle=cn(yle,{shouldForwardProp:e=>vl(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Sle=cn(pf,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Tle=cn(ule,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),kle=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:c,disableAutoFocusItem:h=!1,MenuListProps:o={},onClose:m,open:w,PaperProps:A={},PopoverClasses:P,transitionDuration:O="auto",TransitionProps:{onEntering:B}={},variant:N="selectedMenu"}=r,k=bn(r.TransitionProps,_le),V=bn(r,xle),U=I1(),W=U.direction==="rtl",F=Fe({},r,{autoFocus:a,disableAutoFocusItem:h,MenuListProps:o,onEntering:B,PaperProps:A,transitionDuration:O,TransitionProps:k,variant:N}),z=Ele(F),S=a&&!h&&w,b=g.exports.useRef(null),D=(ae,ee)=>{b.current&&b.current.adjustStyleForScrollbar(ae,U),B&&B(ae,ee)},Y=ae=>{ae.key==="Tab"&&(ae.preventDefault(),m&&m(ae,"tabKeyDown"))};let re=-1;return g.exports.Children.map(c,(ae,ee)=>{!g.exports.isValidElement(ae)||ae.props.disabled||(N==="selectedMenu"&&ae.props.selected||re===-1)&&(re=ee)}),bt.exports.jsx(Cle,Fe({onClose:m,anchorOrigin:{vertical:"bottom",horizontal:W?"right":"left"},transformOrigin:W?ble:wle,PaperProps:Fe({as:Sle},A,{classes:Fe({},A.classes,{root:z.paper})}),className:z.root,open:w,ref:n,transitionDuration:O,TransitionProps:Fe({onEntering:D},k),ownerState:F},V,{classes:P,children:bt.exports.jsx(Tle,Fe({onKeyDown:Y,actions:b,autoFocus:a&&(re===-1||h),autoFocusItem:S,variant:N},o,{className:In(z.list,o.className),children:c}))}))});var Ale=kle;function Mle(e){return vr("MuiMenuItem",e)}const Ile=ar("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var Qm=Ile;const Ple=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],Dle=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},Rle=e=>{const{disabled:t,dense:n,divider:r,disableGutters:a,selected:c,classes:h}=e,m=kr({root:["root",n&&"dense",t&&"disabled",!a&&"gutters",r&&"divider",c&&"selected"]},Mle,h);return Fe({},h,m)},Lle=cn(ry,{shouldForwardProp:e=>vl(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:Dle})(({theme:e,ownerState:t})=>Fe({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Qm.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Oi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Qm.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Oi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Qm.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Oi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Oi(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Qm.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Qm.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${LR.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${LR.inset}`]:{marginLeft:52},[`& .${FR.root}`]:{marginTop:0,marginBottom:0},[`& .${FR.inset}`]:{paddingLeft:36},[`& .${BR.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&Fe({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${BR.root} svg`]:{fontSize:"1.25rem"}}))),Ole=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiMenuItem"}),{autoFocus:a=!1,component:c="li",dense:h=!1,divider:o=!1,disableGutters:m=!1,focusVisibleClassName:w,role:A="menuitem",tabIndex:P,className:O}=r,B=bn(r,Ple),N=g.exports.useContext(fS),k=g.exports.useMemo(()=>({dense:h||N.dense||!1,disableGutters:m}),[N.dense,h,m]),V=g.exports.useRef(null);Kl(()=>{a&&V.current&&V.current.focus()},[a]);const U=Fe({},r,{dense:k.dense,divider:o,disableGutters:m}),W=Rle(r),F=Zi(V,n);let z;return r.disabled||(z=P!==void 0?P:-1),bt.exports.jsx(fS.Provider,{value:k,children:bt.exports.jsx(Lle,Fe({ref:F,role:A,tabIndex:z,component:c,focusVisibleClassName:In(W.focusVisible,w),className:In(W.root,O)},B,{ownerState:U,classes:W}))})});var zle=Ole;function Ble(e){return vr("MuiNativeSelect",e)}const Fle=ar("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var Fk=Fle;const Nle=["className","disabled","IconComponent","inputRef","variant"],$le=e=>{const{classes:t,variant:n,disabled:r,multiple:a,open:c}=e,h={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon",`icon${dn(n)}`,c&&"iconOpen",r&&"disabled"]};return kr(h,Ble,t)},kB=({ownerState:e,theme:t})=>Fe({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Fe({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${Fk.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),Ule=cn("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:vl,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],{[`&.${Fk.multiple}`]:t.multiple}]}})(kB),AB=({ownerState:e,theme:t})=>Fe({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${Fk.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),jle=cn("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${dn(n.variant)}`],n.open&&t.iconOpen]}})(AB),Vle=g.exports.forwardRef(function(t,n){const{className:r,disabled:a,IconComponent:c,inputRef:h,variant:o="standard"}=t,m=bn(t,Nle),w=Fe({},t,{disabled:a,variant:o}),A=$le(w);return bt.exports.jsxs(g.exports.Fragment,{children:[bt.exports.jsx(Ule,Fe({ownerState:w,className:In(A.select,r),disabled:a,ref:h||n},m)),t.multiple?null:bt.exports.jsx(jle,{as:c,ownerState:w,className:A.icon})]})});var Hle=Vle,VR;const Wle=["children","classes","className","label","notched"],Gle=cn("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),qle=cn("legend")(({ownerState:e,theme:t})=>Fe({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&Fe({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function Zle(e){const{className:t,label:n,notched:r}=e,a=bn(e,Wle),c=n!=null&&n!=="",h=Fe({},e,{notched:r,withLabel:c});return bt.exports.jsx(Gle,Fe({"aria-hidden":!0,className:t,ownerState:h},a,{children:bt.exports.jsx(qle,{ownerState:h,children:c?bt.exports.jsx("span",{children:n}):VR||(VR=bt.exports.jsx("span",{className:"notranslate",children:"\u200B"}))})}))}const Xle=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Kle=e=>{const{classes:t}=e,r=kr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},pae,t);return Fe({},t,r)},Yle=cn(O1,{shouldForwardProp:e=>vl(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:R1})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Fe({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${il.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${il.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${il.focused} .${il.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${il.error} .${il.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${il.disabled} .${il.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&Fe({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),Jle=cn(Zle,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),Qle=cn(z1,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:L1})(({theme:e,ownerState:t})=>Fe({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),MB=g.exports.forwardRef(function(t,n){var r,a,c,h,o;const m=Rr({props:t,name:"MuiOutlinedInput"}),{components:w={},fullWidth:A=!1,inputComponent:P="input",label:O,multiline:B=!1,notched:N,slots:k={},type:V="text"}=m,U=bn(m,Xle),W=Kle(m),F=iu(),z=vc({props:m,muiFormControl:F,states:["required"]}),S=Fe({},m,{color:z.color||"primary",disabled:z.disabled,error:z.error,focused:z.focused,formControl:F,fullWidth:A,hiddenLabel:z.hiddenLabel,multiline:B,size:z.size,type:V}),b=(r=(a=k.root)!=null?a:w.Root)!=null?r:Yle,D=(c=(h=k.input)!=null?h:w.Input)!=null?c:Qle;return bt.exports.jsx(zk,Fe({slots:{root:b,input:D},renderSuffix:Y=>bt.exports.jsx(Jle,{ownerState:S,className:W.notchedOutline,label:O!=null&&O!==""&&z.required?o||(o=bt.exports.jsxs(g.exports.Fragment,{children:[O,"\u2009","*"]})):O,notched:typeof N!="undefined"?N:Boolean(Y.startAdornment||Y.filled||Y.focused)}),fullWidth:A,inputComponent:P,multiline:B,ref:n,type:V},U,{classes:Fe({},W,{notchedOutline:null})}))});MB.muiName="Input";var IB=MB,eue=nu(bt.exports.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),tue=nu(bt.exports.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");const nue=cn("span")({position:"relative",display:"flex"}),rue=cn(eue)({transform:"scale(1)"}),iue=cn(tue)(({theme:e,ownerState:t})=>Fe({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function PB(e){const{checked:t=!1,classes:n={},fontSize:r}=e,a=Fe({},e,{checked:t});return bt.exports.jsxs(nue,{className:n.root,ownerState:a,children:[bt.exports.jsx(rue,{fontSize:r,className:n.background,ownerState:a}),bt.exports.jsx(iue,{fontSize:r,className:n.dot,ownerState:a})]})}const oue=g.exports.createContext(void 0);var DB=oue;function aue(){return g.exports.useContext(DB)}function sue(e){return vr("MuiRadio",e)}const lue=ar("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);var HR=lue;const uue=["checked","checkedIcon","color","icon","name","onChange","size","className"],cue=e=>{const{classes:t,color:n}=e,r={root:["root",`color${dn(n)}`]};return Fe({},t,kr(r,sue,t))},due=cn(Qae,{shouldForwardProp:e=>vl(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${dn(n.color)}`]]}})(({theme:e,ownerState:t})=>Fe({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Oi(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${HR.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${HR.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function hue(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const WR=bt.exports.jsx(PB,{checked:!0}),GR=bt.exports.jsx(PB,{}),pue=g.exports.forwardRef(function(t,n){var r,a;const c=Rr({props:t,name:"MuiRadio"}),{checked:h,checkedIcon:o=WR,color:m="primary",icon:w=GR,name:A,onChange:P,size:O="medium",className:B}=c,N=bn(c,uue),k=Fe({},c,{color:m,size:O}),V=cue(k),U=aue();let W=h;const F=eS(P,U&&U.onChange);let z=A;return U&&(typeof W=="undefined"&&(W=hue(U.value,c.value)),typeof z=="undefined"&&(z=U.name)),bt.exports.jsx(due,Fe({type:"radio",icon:g.exports.cloneElement(w,{fontSize:(r=GR.props.fontSize)!=null?r:O}),checkedIcon:g.exports.cloneElement(o,{fontSize:(a=WR.props.fontSize)!=null?a:O}),ownerState:k,classes:V,name:z,checked:W,onChange:F,ref:n,className:In(V.root,B)},N))});var xE=pue;const fue=["actions","children","defaultValue","name","onChange","value"],mue=g.exports.forwardRef(function(t,n){const{actions:r,children:a,defaultValue:c,name:h,onChange:o,value:m}=t,w=bn(t,fue),A=g.exports.useRef(null),[P,O]=Id({controlled:m,default:c,name:"RadioGroup"});g.exports.useImperativeHandle(r,()=>({focus:()=>{let V=A.current.querySelector("input:not(:disabled):checked");V||(V=A.current.querySelector("input:not(:disabled)")),V&&V.focus()}}),[]);const B=Zi(n,A),N=lk(h),k=g.exports.useMemo(()=>({name:N,onChange(V){O(V.target.value),o&&o(V,V.target.value)},value:P}),[N,o,O,P]);return bt.exports.jsx(DB.Provider,{value:k,children:bt.exports.jsx(Tse,Fe({role:"radiogroup",ref:B},w,{children:a}))})});var gue=mue;function yue(e){return vr("MuiSelect",e)}const vue=ar("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var B_=vue,qR;const _ue=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],xue=cn("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${B_.select}`]:t.select},{[`&.${B_.select}`]:t[n.variant]},{[`&.${B_.multiple}`]:t.multiple}]}})(kB,{[`&.${B_.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),bue=cn("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${dn(n.variant)}`],n.open&&t.iconOpen]}})(AB),wue=cn("input",{shouldForwardProp:e=>Ane(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function ZR(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Eue(e){return e==null||typeof e=="string"&&!e.trim()}const Cue=e=>{const{classes:t,variant:n,disabled:r,multiple:a,open:c}=e,h={select:["select",n,r&&"disabled",a&&"multiple"],icon:["icon",`icon${dn(n)}`,c&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return kr(h,yue,t)},Sue=g.exports.forwardRef(function(t,n){const{"aria-describedby":r,"aria-label":a,autoFocus:c,autoWidth:h,children:o,className:m,defaultOpen:w,defaultValue:A,disabled:P,displayEmpty:O,IconComponent:B,inputRef:N,labelId:k,MenuProps:V={},multiple:U,name:W,onBlur:F,onChange:z,onClose:S,onFocus:b,onOpen:D,open:Y,readOnly:re,renderValue:ae,SelectDisplayProps:ee={},tabIndex:de,value:ke,variant:Oe="standard"}=t,Le=bn(t,_ue),[Ee,ct]=Id({controlled:ke,default:A,name:"Select"}),[Ze,rt]=Id({controlled:Y,default:w,name:"Select"}),tt=g.exports.useRef(null),xe=g.exports.useRef(null),[be,nn]=g.exports.useState(null),{current:$t}=g.exports.useRef(Y!=null),[an,en]=g.exports.useState(),ln=Zi(n,N),mn=g.exports.useCallback(Se=>{xe.current=Se,Se&&nn(Se)},[]),fn=be==null?void 0:be.parentNode;g.exports.useImperativeHandle(ln,()=>({focus:()=>{xe.current.focus()},node:tt.current,value:Ee}),[Ee]),g.exports.useEffect(()=>{w&&Ze&&be&&!$t&&(en(h?null:fn.clientWidth),xe.current.focus())},[be,h]),g.exports.useEffect(()=>{c&&xe.current.focus()},[c]),g.exports.useEffect(()=>{if(!k)return;const Se=yo(xe.current).getElementById(k);if(Se){const vt=()=>{getSelection().isCollapsed&&xe.current.focus()};return Se.addEventListener("click",vt),()=>{Se.removeEventListener("click",vt)}}},[k]);const An=(Se,vt)=>{Se?D&&D(vt):S&&S(vt),$t||(en(h?null:fn.clientWidth),rt(Se))},ze=Se=>{Se.button===0&&(Se.preventDefault(),xe.current.focus(),An(!0,Se))},Xe=Se=>{An(!1,Se)},ft=g.exports.Children.toArray(o),Et=Se=>{const vt=ft.map(Xt=>Xt.props.value).indexOf(Se.target.value);if(vt===-1)return;const Nt=ft[vt];ct(Nt.props.value),z&&z(Se,Nt)},_t=Se=>vt=>{let Nt;if(!!vt.currentTarget.hasAttribute("tabindex")){if(U){Nt=Array.isArray(Ee)?Ee.slice():[];const Xt=Ee.indexOf(Se.props.value);Xt===-1?Nt.push(Se.props.value):Nt.splice(Xt,1)}else Nt=Se.props.value;if(Se.props.onClick&&Se.props.onClick(vt),Ee!==Nt&&(ct(Nt),z)){const Xt=vt.nativeEvent||vt,Bn=new Xt.constructor(Xt.type,Xt);Object.defineProperty(Bn,"target",{writable:!0,value:{value:Nt,name:W}}),z(Bn,Se)}U||An(!1,vt)}},ht=Se=>{re||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Se.key)!==-1&&(Se.preventDefault(),An(!0,Se))},Pt=be!==null&&Ze,_n=Se=>{!Pt&&F&&(Object.defineProperty(Se,"target",{writable:!0,value:{value:Ee,name:W}}),F(Se))};delete Le["aria-invalid"];let On,Ln;const Mn=[];let Zn=!1;(Ok({value:Ee})||O)&&(ae?On=ae(Ee):Zn=!0);const Pe=ft.map(Se=>{if(!g.exports.isValidElement(Se))return null;let vt;if(U){if(!Array.isArray(Ee))throw new Error(lc(2));vt=Ee.some(Nt=>ZR(Nt,Se.props.value)),vt&&Zn&&Mn.push(Se.props.children)}else vt=ZR(Ee,Se.props.value),vt&&Zn&&(Ln=Se.props.children);return g.exports.cloneElement(Se,{"aria-selected":vt?"true":"false",onClick:_t(Se),onKeyUp:Nt=>{Nt.key===" "&&Nt.preventDefault(),Se.props.onKeyUp&&Se.props.onKeyUp(Nt)},role:"option",selected:vt,value:void 0,"data-value":Se.props.value})});Zn&&(U?Mn.length===0?On=null:On=Mn.reduce((Se,vt,Nt)=>(Se.push(vt),Nt<Mn.length-1&&Se.push(", "),Se),[]):On=Ln);let Je=an;!h&&$t&&be&&(Je=fn.clientWidth);let ie;typeof de!="undefined"?ie=de:ie=P?null:0;const ue=ee.id||(W?`mui-component-select-${W}`:void 0),De=Fe({},t,{variant:Oe,value:Ee,open:Pt}),ye=Cue(De);return bt.exports.jsxs(g.exports.Fragment,{children:[bt.exports.jsx(xue,Fe({ref:mn,tabIndex:ie,role:"button","aria-disabled":P?"true":void 0,"aria-expanded":Pt?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[k,ue].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:ht,onMouseDown:P||re?null:ze,onBlur:_n,onFocus:b},ee,{ownerState:De,className:In(ee.className,ye.select,m),id:ue,children:Eue(On)?qR||(qR=bt.exports.jsx("span",{className:"notranslate",children:"\u200B"})):On})),bt.exports.jsx(wue,Fe({value:Array.isArray(Ee)?Ee.join(","):Ee,name:W,ref:tt,"aria-hidden":!0,onChange:Et,tabIndex:-1,disabled:P,className:ye.nativeInput,autoFocus:c,ownerState:De},Le)),bt.exports.jsx(bue,{as:B,className:ye.icon,ownerState:De}),bt.exports.jsx(Ale,Fe({id:`menu-${W||""}`,anchorEl:fn,open:Pt,onClose:Xe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},V,{MenuListProps:Fe({"aria-labelledby":k,role:"listbox",disableListWrap:!0},V.MenuListProps),PaperProps:Fe({},V.PaperProps,{style:Fe({minWidth:Je},V.PaperProps!=null?V.PaperProps.style:null)}),children:Pe}))]})});var Tue=Sue,XR,KR;const kue=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Aue=e=>{const{classes:t}=e;return t},Nk={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>vl(e)&&e!=="variant",slot:"Root"},Mue=cn(CB,Nk)(""),Iue=cn(IB,Nk)(""),Pue=cn(_B,Nk)(""),RB=g.exports.forwardRef(function(t,n){const r=Rr({name:"MuiSelect",props:t}),{autoWidth:a=!1,children:c,classes:h={},className:o,defaultOpen:m=!1,displayEmpty:w=!1,IconComponent:A=yB,id:P,input:O,inputProps:B,label:N,labelId:k,MenuProps:V,multiple:U=!1,native:W=!1,onClose:F,onOpen:z,open:S,renderValue:b,SelectDisplayProps:D,variant:Y="outlined"}=r,re=bn(r,kue),ae=W?Hle:Tue,ee=iu(),ke=vc({props:r,muiFormControl:ee,states:["variant"]}).variant||Y,Oe=O||{standard:XR||(XR=bt.exports.jsx(Mue,{})),outlined:bt.exports.jsx(Iue,{label:N}),filled:KR||(KR=bt.exports.jsx(Pue,{}))}[ke],Le=Fe({},r,{variant:ke,classes:h}),Ee=Aue(Le),ct=Zi(n,Oe.ref);return bt.exports.jsx(g.exports.Fragment,{children:g.exports.cloneElement(Oe,Fe({inputComponent:ae,inputProps:Fe({children:c,IconComponent:A,variant:ke,type:void 0,multiple:U},W?{id:P}:{autoWidth:a,defaultOpen:m,displayEmpty:w,labelId:k,MenuProps:V,onClose:F,onOpen:z,open:S,renderValue:b,SelectDisplayProps:Fe({id:P},D)},B,{classes:B?ts(Ee,B.classes):Ee},O?O.props.inputProps:{})},U&&W&&ke==="outlined"?{notched:!0}:{},{ref:ct,className:In(Oe.props.className,o)},!O&&{variant:ke},re))})});RB.muiName="Select";var LB=RB;function Due(e){return vr("MuiSnackbarContent",e)}ar("MuiSnackbarContent",["root","message","action"]);const Rue=["action","className","message","role"],Lue=e=>{const{classes:t}=e;return kr({root:["root"],action:["action"],message:["message"]},Due,t)},Oue=cn(pf,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=tne(e.palette.background.default,t);return Fe({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),zue=cn("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),Bue=cn("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Fue=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiSnackbarContent"}),{action:a,className:c,message:h,role:o="alert"}=r,m=bn(r,Rue),w=r,A=Lue(w);return bt.exports.jsxs(Oue,Fe({role:o,square:!0,elevation:6,className:In(A.root,c),ownerState:w,ref:n},m,{children:[bt.exports.jsx(zue,{className:A.message,ownerState:w,children:h}),a?bt.exports.jsx(Bue,{className:A.action,ownerState:w,children:a}):null]}))});var Nue=Fue;function $ue(e){return vr("MuiSnackbar",e)}ar("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Uue=["onEnter","onExited"],jue=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],Vue=e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${dn(n.vertical)}${dn(n.horizontal)}`]};return kr(r,$ue,t)},YR=cn("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${dn(n.anchorOrigin.vertical)}${dn(n.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return Fe({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:Fe({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&n,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Hue=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiSnackbar"}),a=I1(),c={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:h,anchorOrigin:{vertical:o,horizontal:m}={vertical:"bottom",horizontal:"left"},autoHideDuration:w=null,children:A,className:P,ClickAwayListenerProps:O,ContentProps:B,disableWindowBlurListener:N=!1,message:k,open:V,TransitionComponent:U=wB,transitionDuration:W=c,TransitionProps:{onEnter:F,onExited:z}={}}=r,S=bn(r.TransitionProps,Uue),b=bn(r,jue),D=Fe({},r,{anchorOrigin:{vertical:o,horizontal:m},autoHideDuration:w,disableWindowBlurListener:N,TransitionComponent:U,transitionDuration:W}),Y=Vue(D),{getRootProps:re,onClickAway:ae}=wie(Fe({},D,{ref:n})),[ee,de]=g.exports.useState(!0),ke=l0({elementType:YR,getSlotProps:re,externalForwardedProps:b,ownerState:D,className:[Y.root,P]}),Oe=Ee=>{de(!0),z&&z(Ee)},Le=(Ee,ct)=>{de(!1),F&&F(Ee,ct)};return!V&&ee?null:bt.exports.jsx(Bne,Fe({onClickAway:ae},O,{children:bt.exports.jsx(YR,Fe({},ke,{children:bt.exports.jsx(U,Fe({appear:!0,in:V,timeout:W,direction:o==="top"?"down":"up",onEnter:Le,onExited:Oe},S,{children:A||bt.exports.jsx(Nue,Fe({message:k,action:h},B))}))}))}))});var Wue=Hue;function Gue(e){return vr("MuiTextField",e)}ar("MuiTextField",["root"]);const que=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Zue={standard:CB,filled:_B,outlined:IB},Xue=e=>{const{classes:t}=e;return kr({root:["root"]},Gue,t)},Kue=cn(Bk,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yue=g.exports.forwardRef(function(t,n){const r=Rr({props:t,name:"MuiTextField"}),{autoComplete:a,autoFocus:c=!1,children:h,className:o,color:m="primary",defaultValue:w,disabled:A=!1,error:P=!1,FormHelperTextProps:O,fullWidth:B=!1,helperText:N,id:k,InputLabelProps:V,inputProps:U,InputProps:W,inputRef:F,label:z,maxRows:S,minRows:b,multiline:D=!1,name:Y,onBlur:re,onChange:ae,onFocus:ee,placeholder:de,required:ke=!1,rows:Oe,select:Le=!1,SelectProps:Ee,type:ct,value:Ze,variant:rt="outlined"}=r,tt=bn(r,que),xe=Fe({},r,{autoFocus:c,color:m,disabled:A,error:P,fullWidth:B,multiline:D,required:ke,select:Le,variant:rt}),be=Xue(xe),nn={};rt==="outlined"&&(V&&typeof V.shrink!="undefined"&&(nn.notched=V.shrink),nn.label=z),Le&&((!Ee||!Ee.native)&&(nn.id=void 0),nn["aria-describedby"]=void 0);const $t=lk(k),an=N&&$t?`${$t}-helper-text`:void 0,en=z&&$t?`${$t}-label`:void 0,ln=Zue[rt],mn=bt.exports.jsx(ln,Fe({"aria-describedby":an,autoComplete:a,autoFocus:c,defaultValue:w,fullWidth:B,multiline:D,name:Y,rows:Oe,maxRows:S,minRows:b,type:ct,value:Ze,id:$t,inputRef:F,onBlur:re,onChange:ae,onFocus:ee,placeholder:de,inputProps:U},nn,W));return bt.exports.jsxs(Kue,Fe({className:In(be.root,o),disabled:A,error:P,fullWidth:B,ref:n,required:ke,color:m,variant:rt,ownerState:xe},tt,{children:[z!=null&&z!==""&&bt.exports.jsx(SB,Fe({htmlFor:$t,id:en},V,{children:z})),Le?bt.exports.jsx(LB,Fe({"aria-describedby":an,id:$t,labelId:en,value:Ze,input:mn},Ee,{children:h})):mn,N&&bt.exports.jsx(Rse,Fe({id:an},O,{children:N}))]}))});var Jue=Yue;const Que=e=>{const t=c=>{const h=c.course_1,o=c.course_2;return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("td",null,h?h.code:"-"),g.exports.createElement("td",null,o?o.code:"-"))},n=e.timetable,[r,a]=g.exports.useState(Array(5));return g.exports.useEffect(()=>{for(let c=0;c<n.courses.length;c++){const h=n.courses[c];r[h.position]=h}a([...r])},[]),g.exports.createElement("details",{className:"mb-3"},g.exports.createElement("summary",{className:"card-top"},g.exports.createElement("span",{className:"card-title"},g.exports.createElement("strong",null,n.term.name))),g.exports.createElement("div",{className:"card-body timetable-details",id:"card-body-1",hidden:!1},g.exports.createElement("p",{className:"card-text"}),g.exports.createElement("table",{className:"table"},g.exports.createElement("thead",null,g.exports.createElement("tr",null,g.exports.createElement("th",{scope:"col"},"Period"),g.exports.createElement("th",{scope:"col"},"Day 1"),g.exports.createElement("th",{scope:"col"},"Day 2"))),g.exports.createElement("tbody",null,g.exports.createElement("tr",null,g.exports.createElement("th",{scope:"row"},"09:00 am - 10:15 am"),g.exports.createElement(t,{course_1:r[1],course_2:r[1]})),g.exports.createElement("tr",null,g.exports.createElement("th",{scope:"row"},"10:20 am - 11:35 am"),g.exports.createElement(t,{course_1:r[2],course_2:r[2]})),g.exports.createElement("tr",null,g.exports.createElement("th",{scope:"row"},"12:20 pm - 01:35 pm"),g.exports.createElement(t,{course_1:r[3],course_2:r[4]})),g.exports.createElement("tr",null,g.exports.createElement("th",{scope:"row"},"01:40 pm - 02:55 pm"),g.exports.createElement(t,{course_1:r[4],course_2:r[3]})))),g.exports.createElement("p",null),g.exports.createElement(vn,{to:`/timetable/edit/${n.term.id}`,className:"card-link"},"Edit timetable")))},ece=()=>{const e=oi(),[t,n]=g.exports.useState({}),r=g.exports.useContext(Tr);g.exports.useEffect(()=>{no()||e("/accounts/login")});const a=()=>{no()&&r.getAPI(ur.TIMETABLE,!0).then(c=>{n(c.data)}).catch(c=>{c.response.status!==404&&(r.refreshAuth(),a())})};return g.exports.useEffect(()=>{a()},[]),g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/list.css"}),g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/main.css"}),g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/base.css"}),g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/secondary.css"}),g.exports.createElement("div",{className:"container"},g.exports.createElement(h4,null),g.exports.createElement("div",{className:"white-bg"},"id"in t?g.exports.createElement(Que,{timetable:t}):g.exports.createElement("div",{className:"timetable-add-container"},g.exports.createElement("div",{className:"card-body"},g.exports.createElement("form",{onSubmit:c=>{c.preventDefault(),console.log("Submitted")}},g.exports.createElement("h5",{className:"card-title"},"Add timetable"),g.exports.createElement("hr",null),g.exports.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:"M5IY2bEzx9c5zEI25e3yzsF7XGycqazLGhT6fs8hrUw5fUunY4kgQZETZDpblGVm"}),g.exports.createElement(Gae,{sx:{minWidth:120}},g.exports.createElement(Bk,{fullWidth:!0},g.exports.createElement(SB,{id:"demo-simple-select-label"},"Term"),g.exports.createElement(LB,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:0,label:"Term",onChange:()=>{}},g.exports.createElement(zle,{value:0},"---------")))),g.exports.createElement("div",{className:"mt-3"},g.exports.createElement("button",{type:"submit",id:"continue-button",className:"btn btn-primary mr-2",style:{letterSpacing:0}},"Continue"),g.exports.createElement(vn,{to:"/user/1",className:"btn btn-primary",role:"button","aria-pressed":"true"},"Cancel"))))))))};var OB={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Uo,function(){var n,r,a;function c(o,m){if(!n)n=m;else if(!r)r=m;else{var w="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",A={};n(A),a=m(A),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(a.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}c(["exports"],function(o){var m=typeof self!="undefined"?self:{},w="2.14.1";let A;const P={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(A==null){const s=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{A={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):s}catch{A=s}}return A},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!P.API_URL)return null;try{const s=new URL(P.API_URL);return s.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":s.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},O={supported:!1,testSupport:function(s){!k&&N&&(V?U(s):B=s)}};let B,N,k=!1,V=!1;function U(s){const i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,N),s.isContextLost())return;O.supported=!0}catch{}s.deleteTexture(i),k=!0}m.document&&(N=m.document.createElement("img"),N.onload=function(){B&&U(B),B=null,V=!0},N.onerror=function(){k=!0,B=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const W="01";var F=z;function z(s,i,l,d){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(d-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=l,this.p2y=d}z.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,d=0;d<8;d++){var f=this.sampleCurveX(l)-s;if(Math.abs(f)<i)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=f/v}var x=0,C=1;for(l=s,d=0;d<20&&(f=this.sampleCurveX(l),!(Math.abs(f-s)<i));d++)s>f?x=l:C=l,l=.5*(C-x)+x;return l},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var S=b;function b(s,i){this.x=s,this.y=i}b.prototype={clone:function(){return new b(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,l=s.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),l=Math.sin(s),d=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=d,this},_rotateAround:function(s,i){var l=Math.cos(s),d=Math.sin(s),f=i.y+d*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-d*(this.y-i.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},b.convert=function(s){return s instanceof b?s:Array.isArray(s)?new b(s[0],s[1]):s};const D=Math.PI/180,Y=180/Math.PI;function re(s){return s*D}function ae(s){return s*Y}const ee=[[0,0],[1,0],[1,1],[0,1]];function de(s){if(s<=0)return 0;if(s>=1)return 1;const i=s*s,l=i*s;return 4*(s<.5?l:3*(s-i)+l-.75)}function ke(s,i,l,d){const f=new F(s,i,l,d);return function(v){return f.solve(v)}}const Oe=ke(.25,.1,.25,1);function Le(s,i,l){return Math.min(l,Math.max(i,s))}function Ee(s,i,l){return(l=Le((l-s)/(i-s),0,1))*l*(3-2*l)}function ct(s,i,l){const d=l-i,f=((s-i)%d+d)%d+i;return f===i?l:f}function Ze(s,i,l){if(!s.length)return l(null,[]);let d=s.length;const f=new Array(s.length);let v=null;s.forEach((x,C)=>{i(x,(I,R)=>{I&&(v=I),f[C]=R,--d==0&&l(v,f)})})}function rt(s){const i=[];for(const l in s)i.push(s[l]);return i}function tt(s,...i){for(const l of i)for(const d in l)s[d]=l[d];return s}let xe=1;function be(){return xe++}function nn(){return function s(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)}()}function $t(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function an(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function en(s,i){s.forEach(l=>{i[l]&&(i[l]=i[l].bind(i))})}function ln(s,i){return s.indexOf(i,s.length-i.length)!==-1}function mn(s,i,l){const d={};for(const f in s)d[f]=i.call(l||this,s[f],f,s);return d}function fn(s,i,l){const d={};for(const f in s)i.call(l||this,s[f],f,s)&&(d[f]=s[f]);return d}function An(s){return Array.isArray(s)?s.map(An):typeof s=="object"&&s?mn(s,An):s}const ze={};function Xe(s){ze[s]||(typeof console!="undefined"&&console.warn(s),ze[s]=!0)}function ft(s,i,l){return(l.y-s.y)*(i.x-s.x)>(i.y-s.y)*(l.x-s.x)}function Et(s){let i=0;for(let l,d,f=0,v=s.length,x=v-1;f<v;x=f++)l=s[f],d=s[x],i+=(d.x-l.x)*(l.y+d.y);return i}function _t(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function ht(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,f,v)=>{const x=f||v;return i[d]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i}let Pt=null;function _n(s){if(Pt==null){const i=s.navigator?s.navigator.userAgent:null;Pt=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Pt}function On(s){try{const i=m[s];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function Ln(s,i){return[s[4*i],s[4*i+1],s[4*i+2],s[4*i+3]]}const Mn="mapbox-tiles";let Zn,Pe,Je=500,ie=50;function ue(){try{return m.caches}catch{}}function De(){ue()&&!Zn&&(Zn=m.caches.open(Mn))}function ye(s){const i=s.indexOf("?");if(i<0)return s;const l=function(f){const v=f.indexOf("?");return v>0?f.slice(v+1).split("&"):[]}(s),d=l.filter(f=>{const v=f.split("=");return v[0]==="language"||v[0]==="worldview"});return d.length?`${s.slice(0,i)}?${d.join("&")}`:s.slice(0,i)}let Se=1/0;const vt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(vt);class Nt extends Error{constructor(i,l,d){l===401&&Kn(d)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=l,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Xt=_t()?()=>self.worker&&self.worker.referrer:()=>(m.location.protocol==="blob:"?m.parent:m).location.href,Bn=function(s,i){if(!(/^file:/.test(l=s.url)||/^file:/.test(Xt())&&!/^\w+:/.test(l))){if(m.fetch&&m.Request&&m.AbortController&&m.Request.prototype.hasOwnProperty("signal"))return function(d,f){const v=new m.AbortController,x=new m.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:Xt(),referrerPolicy:d.referrerPolicy,signal:v.signal});let C=!1,I=!1;const R=(H=x.url).indexOf("sku=")>0&&Kn(H);var H;d.type==="json"&&x.headers.set("Accept","application/json");const q=(J,Q,oe)=>{if(I)return;if(J&&J.message!=="SecurityError"&&Xe(J),Q&&oe)return Z(Q);const he=Date.now();m.fetch(x).then(Ce=>{if(Ce.ok){const Ne=R?Ce.clone():null;return Z(Ce,Ne,he)}return f(new Nt(Ce.statusText,Ce.status,d.url))}).catch(Ce=>{Ce.name!=="AbortError"&&f(new Error(`${Ce.message} ${d.url}`))})},Z=(J,Q,oe)=>{(d.type==="arrayBuffer"?J.arrayBuffer():d.type==="json"?J.json():J.text()).then(he=>{I||(Q&&oe&&function(Ce,Ne,we){if(De(),!Zn)return;const Be={status:Ne.status,statusText:Ne.statusText,headers:new m.Headers};Ne.headers.forEach((lt,it)=>Be.headers.set(it,lt));const Ve=ht(Ne.headers.get("Cache-Control")||"");if(Ve["no-store"])return;Ve["max-age"]&&Be.headers.set("Expires",new Date(we+1e3*Ve["max-age"]).toUTCString());const $e=Be.headers.get("Expires");$e&&(new Date($e).getTime()-we<42e4||function(lt,it){if(Pe===void 0)try{new Response(new ReadableStream),Pe=!0}catch{Pe=!1}Pe?it(lt.body):lt.blob().then(it)}(Ne,lt=>{const it=new m.Response(lt,Be);De(),Zn&&Zn.then(St=>St.put(ye(Ce.url),it)).catch(St=>Xe(St.message))}))}(x,Q,oe),C=!0,f(null,he,J.headers.get("Cache-Control"),J.headers.get("Expires")))}).catch(he=>{I||f(new Error(he.message))})};return R?function(J,Q){if(De(),!Zn)return Q(null);const oe=ye(J.url);Zn.then(he=>{he.match(oe).then(Ce=>{const Ne=function(we){if(!we)return!1;const Be=new Date(we.headers.get("Expires")||0),Ve=ht(we.headers.get("Cache-Control")||"");return Be>Date.now()&&!Ve["no-cache"]}(Ce);he.delete(oe),Ne&&he.put(oe,Ce.clone()),Q(null,Ce,Ne)}).catch(Q)}).catch(Q)}(x,q):q(null,null),{cancel:()=>{I=!0,C||v.abort()}}}(s,i);if(_t()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,i,void 0,!0)}var l;return function(d,f){const v=new m.XMLHttpRequest;v.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(v.responseType="arraybuffer");for(const x in d.headers)v.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=d.credentials==="include",v.onerror=()=>{f(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(d.type==="json")try{x=JSON.parse(v.response)}catch(C){return f(C)}f(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else f(new Nt(v.statusText,v.status,d.url))},v.send(d.body),{cancel:()=>v.abort()}}(s,i)},kn=function(s,i){return Bn(tt(s,{type:"arrayBuffer"}),i)};function jt(s){const i=m.document.createElement("a");return i.href=s,i.protocol===m.document.location.protocol&&i.host===m.document.location.host}const Rn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let dr,Fn;dr=[],Fn=0;const Ar=function(s,i){if(O.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),Fn>=P.MAX_PARALLEL_IMAGE_REQUESTS){const v={requestParameters:s,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return dr.push(v),v}Fn++;let l=!1;const d=()=>{if(!l)for(l=!0,Fn--;dr.length&&Fn<P.MAX_PARALLEL_IMAGE_REQUESTS;){const v=dr.shift(),{requestParameters:x,callback:C,cancelled:I}=v;I||(v.cancel=Ar(x,C).cancel)}},f=kn(s,(v,x,C,I)=>{d(),v?i(v):x&&(m.createImageBitmap?function(R,H){const q=new m.Blob([new Uint8Array(R)],{type:"image/png"});m.createImageBitmap(q).then(Z=>{H(null,Z)}).catch(Z=>{H(new Error(`Could not load image because of ${Z.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(x,(R,H)=>i(R,H,C,I)):function(R,H){const q=new m.Image,Z=m.URL;q.onload=()=>{H(null,q),Z.revokeObjectURL(q.src),q.onload=null,m.requestAnimationFrame(()=>{q.src=Rn})},q.onerror=()=>H(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const J=new m.Blob([new Uint8Array(R)],{type:"image/png"});q.src=R.byteLength?Z.createObjectURL(J):Rn}(x,(R,H)=>i(R,H,C,I)))});return{cancel:()=>{f.cancel(),d()}}},hr="NO_ACCESS_TOKEN";function Lr(s){return s.indexOf("mapbox:")===0}function Kn(s){return P.API_URL_REGEX.test(s)}function Jn(s){return P.API_CDN_URL_REGEX.test(s)}function Vr(s){return P.API_STYLE_REGEX.test(s)&&!pr(s)}function pr(s){return P.API_SPRITE_REGEX.test(s)}const Fi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ai(s){const i=s.match(Fi);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function si(s){const i=s.params.length?`?${s.params.join("&")}`:"";return`${s.protocol}://${s.authority}${s.path}${i}`}function Ni(s){if(!s)return null;const i=s.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(m.atob(i[1]).split("").map(l=>"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class oo{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const l=Ni(P.ACCESS_TOKEN);let d="";return d=l&&l.u?m.btoa(encodeURIComponent(l.u).replace(/%([0-9A-F]{2})/g,(f,v)=>String.fromCharCode(Number("0x"+v)))):P.ACCESS_TOKEN||"",i?`mapbox.eventData.${i}:${d}`:`mapbox.eventData:${d}`}fetchEventData(){const i=On("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(i)try{const f=m.localStorage.getItem(l);f&&(this.eventData=JSON.parse(f));const v=m.localStorage.getItem(d);v&&(this.anonId=v)}catch{Xe("Unable to read from LocalStorage")}}saveEventData(){const i=On("localStorage"),l=this.getStorageKey(),d=this.getStorageKey("uuid");if(i)try{m.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&m.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{Xe("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,l,d,f){if(!P.EVENTS_URL)return;const v=ai(P.EVENTS_URL);v.params.push(`access_token=${f||P.ACCESS_TOKEN||""}`);const x={event:this.type,created:new Date(i).toISOString()},C=l?tt(x,l):x,I={url:si(v),headers:{"Content-Type":"text/plain"},body:JSON.stringify([C])};this.pendingRequest=function(R,H){return Bn(tt(R,{method:"POST"}),H)}(I,R=>{this.pendingRequest=null,d(R),this.saveEventData(),this.processRequests(f)})}queueRequest(i,l){this.queue.push(i),this.processRequests(l)}}const _e=new class extends oo{constructor(s){super("appUserTurnstile"),this._customAccessToken=s}postTurnstileEvent(s,i){P.EVENTS_URL&&P.ACCESS_TOKEN&&Array.isArray(s)&&s.some(l=>Lr(l)||Kn(l))&&this.queueRequest(Date.now(),i)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=Ni(P.ACCESS_TOKEN),l=i?i.u:P.ACCESS_TOKEN;let d=l!==this.eventData.tokenU;an(this.anonId)||(this.anonId=nn(),d=!0);const f=this.queue.shift();if(this.eventData.lastSuccess){const v=new Date(this.eventData.lastSuccess),x=new Date(f),C=(f-this.eventData.lastSuccess)/864e5;d=d||C>=1||C<-1||v.getDate()!==x.getDate()}else d=!0;d?this.postEvent(f,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:W,"enabled.telemetry":!1,userId:this.anonId},v=>{v||(this.eventData.lastSuccess=f,this.eventData.tokenU=l)},s):this.processRequests()}},ne=_e.postTurnstileEvent.bind(_e),se=new class extends oo{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(s,i,l,d){this.skuToken=i,this.errorCb=d,P.EVENTS_URL&&(l||P.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(hr)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),an(this.anonId)||(this.anonId=nn()),this.postEvent(l,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:W,skuToken:this.skuToken,userId:this.anonId},d=>{d?this.errorCb(d):i&&(this.success[i]=!0)},s))}},fe=se.postMapLoadEvent.bind(se),Me=new class extends oo{constructor(){super("gljs.performance")}postPerformanceEvent(s,i){P.EVENTS_URL&&(s||P.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},s)}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:l}=this.queue.shift(),d=function(f){const v=m.performance.getEntriesByType("resource"),x=m.performance.getEntriesByType("mark"),C=function(Z){const J={};if(Z){for(const Q in Z)if(Q!=="other")for(const oe of Z[Q]){const he=`${Q}ResolveRangeMin`,Ce=`${Q}ResolveRangeMax`,Ne=`${Q}RequestCount`,we=`${Q}RequestCachedCount`;J[he]=Math.min(J[he]||1/0,oe.startTime),J[Ce]=Math.max(J[Ce]||-1/0,oe.responseEnd);const Be=Ve=>{J[Ve]===void 0&&(J[Ve]=0),++J[Ve]};oe.transferSize!==void 0&&oe.transferSize===0&&Be(we),Be(Ne)}}return J}(function(Z,J){const Q={};if(Z)for(const oe of Z){const he=J(oe);Q[he]===void 0&&(Q[he]=[]),Q[he].push(oe)}return Q}(v,wt)),I=m.devicePixelRatio,R=m.navigator.connection||m.navigator.mozConnection||m.navigator.webkitConnection,H={counters:[],metadata:[],attributes:[]},q=(Z,J,Q)=>{Q!=null&&Z.push({name:J,value:Q.toString()})};for(const Z in C)q(H.counters,Z,C[Z]);if(f.interactionRange[0]!==1/0&&f.interactionRange[1]!==-1/0&&(q(H.counters,"interactionRangeMin",f.interactionRange[0]),q(H.counters,"interactionRangeMax",f.interactionRange[1])),x)for(const Z of Object.keys(Ie)){const J=Ie[Z],Q=x.find(oe=>oe.name===J);Q&&q(H.counters,J,Q.startTime)}return q(H.counters,"visibilityHidden",f.visibilityHidden),q(H.attributes,"style",function(Z){if(Z)for(const J of Z){const Q=J.name.split("?")[0];if(Vr(Q)){const oe=Q.split("/").slice(-2);if(oe.length===2)return`mapbox://styles/${oe[0]}/${oe[1]}`}}}(v)),q(H.attributes,"terrainEnabled",f.terrainEnabled?"true":"false"),q(H.attributes,"fogEnabled",f.fogEnabled?"true":"false"),q(H.attributes,"projection",f.projection),q(H.attributes,"zoom",f.zoom),q(H.metadata,"devicePixelRatio",I),q(H.metadata,"connectionEffectiveType",R?R.effectiveType:void 0),q(H.metadata,"navigatorUserAgent",m.navigator.userAgent),q(H.metadata,"screenWidth",m.screen.width),q(H.metadata,"screenHeight",m.screen.height),q(H.metadata,"windowWidth",m.innerWidth),q(H.metadata,"windowHeight",m.innerHeight),q(H.metadata,"mapWidth",f.width/I),q(H.metadata,"mapHeight",f.height/I),q(H.metadata,"webglRenderer",f.renderer),q(H.metadata,"webglVendor",f.vendor),q(H.metadata,"sdkVersion",w),q(H.metadata,"sdkIdentifier","mapbox-gl-js"),H}(l);for(const f of d.metadata);for(const f of d.counters);for(const f of d.attributes);this.postEvent(i,d,()=>{},s)}},We=Me.postPerformanceEvent.bind(Me),Qe=new class extends oo{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(s,i,l,d){if(!P.API_URL||!P.SESSION_PATH)return;const f=ai(P.API_URL+P.SESSION_PATH);f.params.push(`sku=${i||""}`),f.params.push(`access_token=${d||P.ACCESS_TOKEN||""}`);const v={url:si(f),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(x,C){return Bn(tt(x,{method:"GET"}),C)}(v,x=>{this.pendingRequest=null,l(x),this.saveEventData(),this.processRequests(d)})}getSessionAPI(s,i,l,d){this.skuToken=i,this.errorCb=d,P.SESSION_PATH&&P.API_URL&&(l||P.ACCESS_TOKEN?this.queueRequest({id:s,timestamp:Date.now()},l):this.errorCb(new Error(hr)))}processRequests(s){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:l}=this.queue.shift();i&&this.success[i]||this.getSession(l,this.skuToken,d=>{d?this.errorCb(d):i&&(this.success[i]=!0)},s)}},Ke=Qe.getSessionAPI.bind(Qe),qe=new Set,Ie={create:"create",load:"load",fullLoad:"fullLoad"},Ue={mark(s){m.performance.mark(s)},measure(s,i,l){m.performance.measure(s,i,l)}};function wt(s){const i=s.name.split("?")[0];return Jn(i)&&i.includes("mapbox-gl.js")?"javascript":Jn(i)&&i.includes("mapbox-gl.css")?"css":function(l){return P.API_FONTS_REGEX.test(l)}(i)?"fontRange":pr(i)?"sprite":Vr(i)?"style":function(l){return P.API_TILEJSON_REGEX.test(l)}(i)?"tilejson":"other"}const pt=m.performance;function qt(s){const i=s?s.url.toString():void 0;return pt.getEntriesByName(i)}let tn,Yt,pn,zn;const ir={now:()=>pn!==void 0?pn:m.performance.now(),setNow(s){pn=s},restoreNow(){pn=void 0},frame(s){const i=m.requestAnimationFrame(s);return{cancel:()=>m.cancelAnimationFrame(i)}},getImageData(s,i=0){const{width:l,height:d}=s;zn||(zn=m.document.createElement("canvas"));const f=zn.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return(l>zn.width||d>zn.height)&&(zn.width=l,zn.height=d),f.clearRect(-i,-i,l+2*i,d+2*i),f.drawImage(s,0,0,l,d),f.getImageData(-i,-i,l+2*i,d+2*i)},resolveURL:s=>(tn||(tn=m.document.createElement("a")),tn.href=s,tn.href),get devicePixelRatio(){return m.devicePixelRatio},get prefersReducedMotion(){return!!m.matchMedia&&(Yt==null&&(Yt=m.matchMedia("(prefers-reduced-motion: reduce)")),Yt.matches)}};function wn(s,i,l){l[s]&&l[s].indexOf(i)!==-1||(l[s]=l[s]||[],l[s].push(i))}function _r(s,i,l){if(l&&l[s]){const d=l[s].indexOf(i);d!==-1&&l[s].splice(d,1)}}class xr{constructor(i,l={}){tt(this,l),this.type=i}}class Bs extends xr{constructor(i,l={}){super("error",tt({error:i},l))}}class hs{on(i,l){return this._listeners=this._listeners||{},wn(i,l,this._listeners),this}off(i,l){return _r(i,l,this._listeners),_r(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},wn(i,l,this._oneTimeListeners),this):new Promise(d=>this.once(i,d))}fire(i,l){typeof i=="string"&&(i=new xr(i,l||{}));const d=i.type;if(this.listens(d)){i.target=this;const f=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const C of f)C.call(this,i);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const C of v)_r(d,C,this._oneTimeListeners),C.call(this,i);const x=this._eventedParent;x&&(tt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof Bs&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var Ct=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ps(s,...i){for(const l of i)for(const d in l)s[d]=l[d];return s}function bi(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Fs(s){if(Array.isArray(s))return s.map(Fs);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const l in s)i[l]=Fs(s[l]);return i}return bi(s)}class Ty extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}var Na=Ty;class ou{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[d,f]of l)this.bindings[d]=f}concat(i){return new ou(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var ky=ou;const au={kind:"null"},Vt={kind:"number"},Xn={kind:"string"},Vn={kind:"boolean"},$a={kind:"color"},_l={kind:"object"},Un={kind:"value"},_c={kind:"collator"},su={kind:"formatted"},lu={kind:"resolvedImage"};function _o(s,i){return{kind:"array",itemType:s,N:i}}function Or(s){if(s.kind==="array"){const i=Or(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const Ay=[au,Vt,Xn,Vn,$a,su,_l,_o(Un),lu];function Mo(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Mo(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const l of Ay)if(!Mo(l,i))return null}}return`Expected ${Or(s)} but found ${Or(i)} instead.`}function mf(s,i){return i.some(l=>l.kind===s.kind)}function xl(s,i){return i.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}var gf,Yd={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function xc(s){return(s=Math.round(s))<0?0:s>255?255:s}function bl(s){return xc(s[s.length-1]==="%"?parseFloat(s)/100*255:parseInt(s))}function uu(s){return(i=s[s.length-1]==="%"?parseFloat(s)/100:parseFloat(s))<0?0:i>1?1:i;var i}function yf(s,i,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?s+(i-s)*l*6:2*l<1?i:3*l<2?s+(i-s)*(2/3-l)*6:s}try{gf={}.parseCSSColor=function(s){var i,l=s.replace(/ /g,"").toLowerCase();if(l in Yd)return Yd[l].slice();if(l[0]==="#")return l.length===4?(i=parseInt(l.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:l.length===7&&(i=parseInt(l.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var d=l.indexOf("("),f=l.indexOf(")");if(d!==-1&&f+1===l.length){var v=l.substr(0,d),x=l.substr(d+1,f-(d+1)).split(","),C=1;switch(v){case"rgba":if(x.length!==4)return null;C=uu(x.pop());case"rgb":return x.length!==3?null:[bl(x[0]),bl(x[1]),bl(x[2]),C];case"hsla":if(x.length!==4)return null;C=uu(x.pop());case"hsl":if(x.length!==3)return null;var I=(parseFloat(x[0])%360+360)%360/360,R=uu(x[1]),H=uu(x[2]),q=H<=.5?H*(R+1):H+R-H*R,Z=2*H-q;return[xc(255*yf(Z,q,I+1/3)),xc(255*yf(Z,q,I)),xc(255*yf(Z,q,I-1/3)),C];default:return null}}return null}}catch{}class Io{constructor(i,l,d,f=1){this.r=i,this.g=l,this.b=d,this.a=f}static parse(i){if(!i)return;if(i instanceof Io)return i;if(typeof i!="string")return;const l=gf(i);return l?new Io(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[i,l,d,f]=this.toArray();return`rgba(${Math.round(i)},${Math.round(l)},${Math.round(d)},${f})`}toArray(){const{r:i,g:l,b:d,a:f}=this;return f===0?[0,0,0,0]:[255*i/f,255*l/f,255*d/f,f]}toArray01(){const{r:i,g:l,b:d,a:f}=this;return f===0?[0,0,0,0]:[i/f,l/f,d/f,f]}toArray01PremultipliedAlpha(){const{r:i,g:l,b:d,a:f}=this;return[i,l,d,f]}}Io.black=new Io(0,0,0,1),Io.white=new Io(1,1,1,1),Io.transparent=new Io(0,0,0,0),Io.red=new Io(1,0,0,1),Io.blue=new Io(0,0,1,1);var pi=Io;class Jd{constructor(i,l,d){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class bc{constructor(i,l,d,f,v){this.text=i.normalize?i.normalize():i,this.image=l,this.scale=d,this.fontStack=f,this.textColor=v}}class Po{constructor(i){this.sections=i}static fromString(i){return new Po([new bc(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Po?i:Po.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const l of this.sections){if(l.image){i.push(["image",l.image.name]);continue}i.push(l.text);const d={};l.fontStack&&(d["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(d["font-scale"]=l.scale),l.textColor&&(d["text-color"]=["rgba"].concat(l.textColor.toArray())),i.push(d)}return i}}class xo{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new xo({name:i,available:!1}):null}serialize(){return["image",this.name]}}function My(s,i,l,d){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[s,i,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[s,i,l,d]:[s,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qd(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof pi||s instanceof Jd||s instanceof Po||s instanceof xo)return!0;if(Array.isArray(s)){for(const i of s)if(!Qd(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!Qd(s[i]))return!1;return!0}return!1}function Pi(s){if(s===null)return au;if(typeof s=="string")return Xn;if(typeof s=="boolean")return Vn;if(typeof s=="number")return Vt;if(s instanceof pi)return $a;if(s instanceof Jd)return _c;if(s instanceof Po)return su;if(s instanceof xo)return lu;if(Array.isArray(s)){const i=s.length;let l;for(const d of s){const f=Pi(d);if(l){if(l===f)continue;l=Un;break}l=f}return _o(l||Un,i)}return _l}function wc(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof pi||s instanceof Po||s instanceof xo?s.toString():JSON.stringify(s)}class vf{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Qd(i[1]))return l.error("invalid value");const d=i[1];let f=Pi(d);const v=l.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new vf(f,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof pi?["rgba"].concat(this.value.toArray()):this.value instanceof Po?this.value.serialize():this.value}}var Ec=vf,Xi=class{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}};const eh={string:Xn,number:Vt,boolean:Vn,object:_l};class cu{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let d,f=1;const v=i[0];if(v==="array"){let C,I;if(i.length>2){const R=i[1];if(typeof R!="string"||!(R in eh)||R==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);C=eh[R],f++}else C=Un;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);I=i[2],f++}d=_o(C,I)}else d=eh[v];const x=[];for(;f<i.length;f++){const C=l.parse(i[f],f,Un);if(!C)return null;x.push(C)}return new cu(d,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(i);if(!Mo(this.type,Pi(d)))return d;if(l===this.args.length-1)throw new Xi(`Expected value to be of type ${Or(this.type)}, but found ${Or(Pi(d))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,l=[i.kind];if(i.kind==="array"){const d=i.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){l.push(d.kind);const f=i.N;(typeof f=="number"||this.args.length>1)&&l.push(f)}}return l.concat(this.args.map(d=>d.serialize()))}}var fs=cu;class Cc{constructor(i){this.type=su,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const d=i[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=i.length-1;++x){const C=i[x];if(v&&typeof C=="object"&&!Array.isArray(C)){v=!1;let I=null;if(C["font-scale"]&&(I=l.parse(C["font-scale"],1,Vt),!I))return null;let R=null;if(C["text-font"]&&(R=l.parse(C["text-font"],1,_o(Xn)),!R))return null;let H=null;if(C["text-color"]&&(H=l.parse(C["text-color"],1,$a),!H))return null;const q=f[f.length-1];q.scale=I,q.font=R,q.textColor=H}else{const I=l.parse(i[x],1,Un);if(!I)return null;const R=I.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:I,scale:null,font:null,textColor:null})}}return new Cc(f)}evaluate(i){return new Po(this.sections.map(l=>{const d=l.content.evaluate(i);return Pi(d)===lu?new bc("",d,null,null,null):new bc(wc(d),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const l of this.sections){i.push(l.content.serialize());const d={};l.scale&&(d["font-scale"]=l.scale.serialize()),l.font&&(d["text-font"]=l.font.serialize()),l.textColor&&(d["text-color"]=l.textColor.serialize()),i.push(d)}return i}}class th{constructor(i){this.type=lu,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const d=l.parse(i[1],1,Xn);return d?new th(d):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),d=xo.fromString(l);return d&&i.availableImages&&(d.available=i.availableImages.indexOf(l)>-1),d}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const N1={"to-boolean":Vn,"to-color":$a,"to-number":Vt,"to-string":Xn};class _f{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const d=i[0];if((d==="to-boolean"||d==="to-string")&&i.length!==2)return l.error("Expected one argument.");const f=N1[d],v=[];for(let x=1;x<i.length;x++){const C=l.parse(i[x],x,Un);if(!C)return null;v.push(C)}return new _f(f,v)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let l,d;for(const f of this.args){if(l=f.evaluate(i),d=null,l instanceof pi)return l;if(typeof l=="string"){const v=i.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:My(l[0],l[1],l[2],l[3]),!d))return new pi(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Xi(d||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const d of this.args){if(l=d.evaluate(i),l===null)return 0;const f=Number(l);if(!isNaN(f))return f}throw new Xi(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?Po.fromString(wc(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?xo.fromString(wc(this.args[0].evaluate(i))):wc(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Cc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new th(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(l=>{i.push(l.serialize())}),i}}var du=_f;const Iy=["Unknown","Point","LineString","Polygon"];var Sc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Iy[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:l,y:d}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(l*i-s[0])+this.featureDistanceData.bearing[1]*(d*i-s[1])}return 0}parseColor(s){let i=this._parseColorCache[s];return i||(i=this._parseColorCache[s]=pi.parse(s)),i}};class hu{constructor(i,l,d,f){this.name=i,this.type=l,this._evaluate=d,this.args=f}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,l){const d=i[0],f=hu.definitions[d];if(!f)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,C=x.filter(([R])=>!Array.isArray(R)||R.length===i.length-1);let I=null;for(const[R,H]of C){I=new Sf(l.registry,l.path,null,l.scope);const q=[];let Z=!1;for(let J=1;J<i.length;J++){const Q=i[J],oe=Array.isArray(R)?R[J-1]:R.type,he=I.parse(Q,1+q.length,oe);if(!he){Z=!0;break}q.push(he)}if(!Z)if(Array.isArray(R)&&R.length!==q.length)I.error(`Expected ${R.length} arguments, but found ${q.length} instead.`);else{for(let J=0;J<q.length;J++){const Q=Array.isArray(R)?R[J]:R.type,oe=q[J];I.concat(J+1).checkSubtype(Q,oe.type)}if(I.errors.length===0)return new hu(d,v,H,q)}}if(C.length===1)l.errors.push(...I.errors);else{const R=(C.length?C:x).map(([q])=>{return Z=q,Array.isArray(Z)?`(${Z.map(Or).join(", ")})`:`(${Or(Z.type)}...)`;var Z}).join(" | "),H=[];for(let q=1;q<i.length;q++){const Z=l.parse(i[q],1+H.length);if(!Z)return null;H.push(Or(Z.type))}l.error(`Expected arguments of type ${R}, but found (${H.join(", ")}) instead.`)}return null}static register(i,l){hu.definitions=l;for(const d in l)i[d]=hu}}var Ns=hu;class nh{constructor(i,l,d){this.type=_c,this.locale=d,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const d=i[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const f=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Vn);if(!f)return null;const v=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Vn);if(!v)return null;let x=null;return d.locale&&(x=l.parse(d.locale,1,Xn),!x)?null:new nh(f,v,x)}evaluate(i){return new Jd(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const $s=8192;function ta(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function Tc(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function Py(s,i){const l=(180+s[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,f=Math.pow(2,i.z);return[Math.round(l*f*$s),Math.round(d*f*$s)]}function Dy(s,i,l){const d=s[0]-i[0],f=s[1]-i[1],v=s[0]-l[0],x=s[1]-l[1];return d*x-v*f==0&&d*v<=0&&f*x<=0}function rh(s,i){let l=!1;for(let x=0,C=i.length;x<C;x++){const I=i[x];for(let R=0,H=I.length;R<H-1;R++){if(Dy(s,I[R],I[R+1]))return!1;(f=I[R])[1]>(d=s)[1]!=(v=I[R+1])[1]>d[1]&&d[0]<(v[0]-f[0])*(d[1]-f[1])/(v[1]-f[1])+f[0]&&(l=!l)}}var d,f,v;return l}function Ry(s,i){for(let l=0;l<i.length;l++)if(rh(s,i[l]))return!0;return!1}function xf(s,i,l,d){const f=d[0]-l[0],v=d[1]-l[1],x=(s[0]-l[0])*v-f*(s[1]-l[1]),C=(i[0]-l[0])*v-f*(i[1]-l[1]);return x>0&&C<0||x<0&&C>0}function bf(s,i,l){for(const R of l)for(let H=0;H<R.length-1;++H)if((C=[(x=R[H+1])[0]-(v=R[H])[0],x[1]-v[1]])[0]*(I=[(f=i)[0]-(d=s)[0],f[1]-d[1]])[1]-C[1]*I[0]!=0&&xf(d,f,v,x)&&xf(v,x,d,f))return!0;var d,f,v,x,C,I;return!1}function pu(s,i){for(let l=0;l<s.length;++l)if(!rh(s[l],i))return!1;for(let l=0;l<s.length-1;++l)if(bf(s[l],s[l+1],i))return!1;return!0}function Ly(s,i){for(let l=0;l<i.length;l++)if(pu(s,i[l]))return!0;return!1}function ih(s,i,l){const d=[];for(let f=0;f<s.length;f++){const v=[];for(let x=0;x<s[f].length;x++){const C=Py(s[f][x],l);ta(i,C),v.push(C)}d.push(v)}return d}function oh(s,i,l){const d=[];for(let f=0;f<s.length;f++){const v=ih(s[f],i,l);d.push(v)}return d}function wf(s,i,l,d){if(s[0]<l[0]||s[0]>l[2]){const f=.5*d;let v=s[0]-l[0]>f?-d:l[0]-s[0]>f?d:0;v===0&&(v=s[0]-l[2]>f?-d:l[2]-s[0]>f?d:0),s[0]+=v}ta(i,s)}function wl(s,i,l,d){const f=Math.pow(2,d.z)*$s,v=[d.x*$s,d.y*$s],x=[];if(!s)return x;for(const C of s)for(const I of C){const R=[I.x+v[0],I.y+v[1]];wf(R,i,l,f),x.push(R)}return x}function sr(s,i,l,d){const f=Math.pow(2,d.z)*$s,v=[d.x*$s,d.y*$s],x=[];if(!s)return x;for(const I of s){const R=[];for(const H of I){const q=[H.x+v[0],H.y+v[1]];ta(i,q),R.push(q)}x.push(R)}if(i[2]-i[0]<=f/2){(C=i)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const I of x)for(const R of I)wf(R,i,l,f)}var C;return x}class kc{constructor(i,l){this.type=Vn,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Qd(i[1])){const d=i[1];if(d.type==="FeatureCollection")for(let f=0;f<d.features.length;++f){const v=d.features[f].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new kc(d,d.features[f].geometry)}else if(d.type==="Feature"){const f=d.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new kc(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new kc(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,d){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(d.type==="Polygon"){const C=ih(d.coordinates,v,x),I=wl(l.geometry(),f,v,x);if(!Tc(f,v))return!1;for(const R of I)if(!rh(R,C))return!1}if(d.type==="MultiPolygon"){const C=oh(d.coordinates,v,x),I=wl(l.geometry(),f,v,x);if(!Tc(f,v))return!1;for(const R of I)if(!Ry(R,C))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,d){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(!x)return!1;if(d.type==="Polygon"){const C=ih(d.coordinates,v,x),I=sr(l.geometry(),f,v,x);if(!Tc(f,v))return!1;for(const R of I)if(!pu(R,C))return!1}if(d.type==="MultiPolygon"){const C=oh(d.coordinates,v,x),I=sr(l.geometry(),f,v,x);if(!Tc(f,v))return!1;for(const R of I)if(!Ly(R,C))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Ef=kc;function Ac(s){if(s instanceof Ns&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Ef)return!1;let i=!0;return s.eachChild(l=>{i&&!Ac(l)&&(i=!1)}),i}function Mc(s){if(s instanceof Ns&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(l=>{i&&!Mc(l)&&(i=!1)}),i}function ah(s,i){if(s instanceof Ns&&i.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(d=>{l&&!ah(d,i)&&(l=!1)}),l}class sh{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=i[1];return l.scope.has(d)?new sh(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Cf=sh;class lh{constructor(i,l=[],d,f=new ky,v=[]){this.registry=i,this.path=l,this.key=l.map(x=>`[${x}]`).join(""),this.scope=f,this.errors=v,this.expectedType=d}parse(i,l,d,f,v={}){return l?this.concat(l,d,f)._parse(i,v):this._parse(i,v)}_parse(i,l){function d(f,v,x){return x==="assert"?new fs(v,[f]):x==="coerce"?new du(v,[f]):f}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=i[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(i,this);if(!x)return null;if(this.expectedType){const C=this.expectedType,I=x.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||I.kind!=="value")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string"){if(this.checkSubtype(C,I))return null}else x=d(x,C,l.typeAnnotation||"coerce");else x=d(x,C,l.typeAnnotation||"assert")}if(!(x instanceof Ec)&&x.type.kind!=="resolvedImage"&&Us(x)){const C=new Sc;try{x=new Ec(x.type,x.evaluate(C))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,d){const f=typeof i=="number"?this.path.concat(i):this.path,v=d?this.scope.concat(d):this.scope;return new lh(this.registry,f,l||null,v,this.errors)}error(i,...l){const d=`${this.key}${l.map(f=>`[${f}]`).join("")}`;this.errors.push(new Na(d,i))}checkSubtype(i,l){const d=Mo(i,l);return d&&this.error(d),d}}var Sf=lh;function Us(s){if(s instanceof Cf)return Us(s.boundExpression);if(s instanceof Ns&&s.name==="error"||s instanceof nh||s instanceof Ef)return!1;const i=s instanceof du||s instanceof fs;let l=!0;return s.eachChild(d=>{l=i?l&&Us(d):l&&d instanceof Ec}),!!l&&Ac(s)&&ah(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function El(s,i){const l=s.length-1;let d,f,v=0,x=l,C=0;for(;v<=x;)if(C=Math.floor((v+x)/2),d=s[C],f=s[C+1],d<=i){if(C===l||i<f)return C;v=C+1}else{if(!(d>i))throw new Xi("Input is not a number.");x=C-1}return 0}class uh{constructor(i,l,d){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[f,v]of d)this.labels.push(f),this.outputs.push(v)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(i[1],1,Vt);if(!d)return null;const f=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let x=1;x<i.length;x+=2){const C=x===1?-1/0:i[x],I=i[x+1],R=x,H=x+1;if(typeof C!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(f.length&&f[f.length-1][0]>=C)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const q=l.parse(I,H,v);if(!q)return null;v=v||q.type,f.push([C,q])}return new uh(v,d,f)}evaluate(i){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(i);const f=this.input.evaluate(i);if(f<=l[0])return d[0].evaluate(i);const v=l.length;return f>=l[v-1]?d[v-1].evaluate(i):d[El(l,f)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&i.push(this.labels[l]),i.push(this.outputs[l].serialize());return i}}var Tf=uh;function Qn(s,i,l){return s*(1-l)+i*l}var Ic=Object.freeze({__proto__:null,number:Qn,color:function(s,i,l){return new pi(Qn(s.r,i.r,l),Qn(s.g,i.g,l),Qn(s.b,i.b,l),Qn(s.a,i.a,l))},array:function(s,i,l){return s.map((d,f)=>Qn(d,i[f],l))}});const Oy=.95047,zy=1.08883,kf=4/29,Af=6/29,Mf=3*Af*Af,By=Math.PI/180,$1=180/Math.PI;function ch(s){return s>.008856451679035631?Math.pow(s,1/3):s/Mf+kf}function If(s){return s>Af?s*s*s:Mf*(s-kf)}function dh(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function hh(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Fy(s){const i=hh(s.r),l=hh(s.g),d=hh(s.b),f=ch((.4124564*i+.3575761*l+.1804375*d)/Oy),v=ch((.2126729*i+.7151522*l+.072175*d)/1);return{l:116*v-16,a:500*(f-v),b:200*(v-ch((.0193339*i+.119192*l+.9503041*d)/zy)),alpha:s.a}}function Ny(s){let i=(s.l+16)/116,l=isNaN(s.a)?i:i+s.a/500,d=isNaN(s.b)?i:i-s.b/200;return i=1*If(i),l=Oy*If(l),d=zy*If(d),new pi(dh(3.2404542*l-1.5371385*i-.4985314*d),dh(-.969266*l+1.8760108*i+.041556*d),dh(.0556434*l-.2040259*i+1.0572252*d),s.alpha)}function U1(s,i,l){const d=i-s;return s+l*(d>180||d<-180?d-360*Math.round(d/360):d)}const Pc={forward:Fy,reverse:Ny,interpolate:function(s,i,l){return{l:Qn(s.l,i.l,l),a:Qn(s.a,i.a,l),b:Qn(s.b,i.b,l),alpha:Qn(s.alpha,i.alpha,l)}}},Dc={forward:function(s){const{l:i,a:l,b:d}=Fy(s),f=Math.atan2(d,l)*$1;return{h:f<0?f+360:f,c:Math.sqrt(l*l+d*d),l:i,alpha:s.a}},reverse:function(s){const i=s.h*By,l=s.c;return Ny({l:s.l,a:Math.cos(i)*l,b:Math.sin(i)*l,alpha:s.alpha})},interpolate:function(s,i,l){return{h:U1(s.h,i.h,l),c:Qn(s.c,i.c,l),l:Qn(s.l,i.l,l),alpha:Qn(s.alpha,i.alpha,l)}}};var $y=Object.freeze({__proto__:null,lab:Pc,hcl:Dc});class Rc{constructor(i,l,d,f,v){this.type=i,this.operator=l,this.interpolation=d,this.input=f,this.labels=[],this.outputs=[];for(const[x,C]of v)this.labels.push(x),this.outputs.push(C)}static interpolationFactor(i,l,d,f){let v=0;if(i.name==="exponential")v=Pf(l,i.base,d,f);else if(i.name==="linear")v=Pf(l,1,d,f);else if(i.name==="cubic-bezier"){const x=i.controlPoints;v=new F(x[0],x[1],x[2],x[3]).solve(Pf(l,1,d,f))}return v}static parse(i,l){let[d,f,v,...x]=i;if(!Array.isArray(f)||f.length===0)return l.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const R=f[1];if(typeof R!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:R}}else{if(f[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const R=f.slice(1);if(R.length!==4||R.some(H=>typeof H!="number"||H<0||H>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:R}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,Vt),!v)return null;const C=[];let I=null;d==="interpolate-hcl"||d==="interpolate-lab"?I=$a:l.expectedType&&l.expectedType.kind!=="value"&&(I=l.expectedType);for(let R=0;R<x.length;R+=2){const H=x[R],q=x[R+1],Z=R+3,J=R+4;if(typeof H!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(C.length&&C[C.length-1][0]>=H)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const Q=l.parse(q,J,I);if(!Q)return null;I=I||Q.type,C.push([H,Q])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new Rc(I,d,f,v,C):l.error(`Type ${Or(I)} is not interpolatable.`)}evaluate(i){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(i);const f=this.input.evaluate(i);if(f<=l[0])return d[0].evaluate(i);const v=l.length;if(f>=l[v-1])return d[v-1].evaluate(i);const x=El(l,f),C=Rc.interpolationFactor(this.interpolation,f,l[x],l[x+1]),I=d[x].evaluate(i),R=d[x+1].evaluate(i);return this.operator==="interpolate"?Ic[this.type.kind.toLowerCase()](I,R,C):this.operator==="interpolate-hcl"?Dc.reverse(Dc.interpolate(Dc.forward(I),Dc.forward(R),C)):Pc.reverse(Pc.interpolate(Pc.forward(I),Pc.forward(R),C))}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,i,this.input.serialize()];for(let d=0;d<this.labels.length;d++)l.push(this.labels[d],this.outputs[d].serialize());return l}}function Pf(s,i,l,d){const f=d-l,v=s-l;return f===0?0:i===1?v/f:(Math.pow(i,v)-1)/(Math.pow(i,f)-1)}var Ua=Rc;class Df{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expectected at least one argument.");let d=null;const f=l.expectedType;f&&f.kind!=="value"&&(d=f);const v=[];for(const C of i.slice(1)){const I=l.parse(C,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!I)return null;d=d||I.type,v.push(I)}const x=f&&v.some(C=>Mo(f,C.type));return new Df(x?Un:d,v)}evaluate(i){let l,d=null,f=0;for(const v of this.args){if(f++,d=v.evaluate(i),d&&d instanceof xo&&!d.available&&(l||(l=d),d=null,f===this.args.length))return l;if(d!==null)break}return d}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var Uy=Df;class ph{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const d=[];for(let v=1;v<i.length-1;v+=2){const x=i[v];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const C=l.parse(i[v+1],v+1);if(!C)return null;d.push([x,C])}const f=l.parse(i[i.length-1],i.length-1,l.expectedType,d);return f?new ph(d,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[l,d]of this.bindings)i.push(l,d.serialize());return i.push(this.result.serialize()),i}}var Rf=ph;class fh{constructor(i,l,d){this.type=i,this.index=l,this.input=d}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,Vt),f=l.parse(i[2],2,_o(l.expectedType||Un));return d&&f?new fh(f.type.itemType,d,f):null}evaluate(i){const l=this.index.evaluate(i),d=this.input.evaluate(i);if(l<0)throw new Xi(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new Xi(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new Xi(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var j1=fh;class Lf{constructor(i,l){this.type=Vn,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,Un),f=l.parse(i[2],2,Un);return d&&f?mf(d.type,[Vn,Xn,Vt,au,Un])?new Lf(d,f):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Or(d.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(d==null)return!1;if(!xl(l,["boolean","string","number","null"]))throw new Xi(`Expected first argument to be of type boolean, string, number or null, but found ${Or(Pi(l))} instead.`);if(!xl(d,["string","array"]))throw new Xi(`Expected second argument to be of type array or string, but found ${Or(Pi(d))} instead.`);return d.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var jy=Lf;class Lc{constructor(i,l,d){this.type=Vt,this.needle=i,this.haystack=l,this.fromIndex=d}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,Un),f=l.parse(i[2],2,Un);if(!d||!f)return null;if(!mf(d.type,[Vn,Xn,Vt,au,Un]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Or(d.type)} instead`);if(i.length===4){const v=l.parse(i[3],3,Vt);return v?new Lc(d,f,v):null}return new Lc(d,f)}evaluate(i){const l=this.needle.evaluate(i),d=this.haystack.evaluate(i);if(!xl(l,["boolean","string","number","null"]))throw new Xi(`Expected first argument to be of type boolean, string, number or null, but found ${Or(Pi(l))} instead.`);if(!xl(d,["string","array"]))throw new Xi(`Expected second argument to be of type array or string, but found ${Or(Pi(d))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(i);return d.indexOf(l,f)}return d.indexOf(l)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Vy=Lc;class Of{constructor(i,l,d,f,v,x){this.inputType=i,this.type=l,this.input=d,this.cases=f,this.outputs=v,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let d,f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);const v={},x=[];for(let R=2;R<i.length-1;R+=2){let H=i[R];const q=i[R+1];Array.isArray(H)||(H=[H]);const Z=l.concat(R);if(H.length===0)return Z.error("Expected at least one branch label.");for(const Q of H){if(typeof Q!="number"&&typeof Q!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Z.error("Numeric branch labels must be integer values.");if(d){if(Z.checkSubtype(d,Pi(Q)))return null}else d=Pi(Q);if(v[String(Q)]!==void 0)return Z.error("Branch labels must be unique.");v[String(Q)]=x.length}const J=l.parse(q,R,f);if(!J)return null;f=f||J.type,x.push(J)}const C=l.parse(i[1],1,Un);if(!C)return null;const I=l.parse(i[i.length-1],i.length-1,f);return I?C.type.kind!=="value"&&l.concat(1).checkSubtype(d,C.type)?null:new Of(d,f,C,v,x,I):null}evaluate(i){const l=this.input.evaluate(i);return(Pi(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),d=[],f={};for(const x of l){const C=f[this.cases[x]];C===void 0?(f[this.cases[x]]=d.length,d.push([this.cases[x],[x]])):d[C][1].push(x)}const v=x=>this.inputType.kind==="number"?Number(x):x;for(const[x,C]of d)i.push(C.length===1?v(C[0]):C.map(v)),i.push(this.outputs[x].serialize());return i.push(this.otherwise.serialize()),i}}var V1=Of;class zf{constructor(i,l,d){this.type=i,this.branches=l,this.otherwise=d}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const f=[];for(let x=1;x<i.length-1;x+=2){const C=l.parse(i[x],x,Vn);if(!C)return null;const I=l.parse(i[x+1],x+1,d);if(!I)return null;f.push([C,I]),d=d||I.type}const v=l.parse(i[i.length-1],i.length-1,d);return v?new zf(d,f,v):null}evaluate(i){for(const[l,d]of this.branches)if(l.evaluate(i))return d.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,d]of this.branches)i(l),i(d);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(l=>{i.push(l.serialize())}),i}}var H1=zf;class Cl{constructor(i,l,d,f){this.type=i,this.input=l,this.beginIndex=d,this.endIndex=f}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const d=l.parse(i[1],1,Un),f=l.parse(i[2],2,Vt);if(!d||!f)return null;if(!mf(d.type,[_o(Un),Xn,Un]))return l.error(`Expected first argument to be of type array or string, but found ${Or(d.type)} instead`);if(i.length===4){const v=l.parse(i[3],3,Vt);return v?new Cl(d.type,d,f,v):null}return new Cl(d.type,d,f)}evaluate(i){const l=this.input.evaluate(i),d=this.beginIndex.evaluate(i);if(!xl(l,["string","array"]))throw new Xi(`Expected first argument to be of type array or string, but found ${Or(Pi(l))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(i);return l.slice(d,f)}return l.slice(d)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Hy=Cl;function Bf(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Wy(s,i,l,d){return d.compare(i,l)===0}function fu(s,i,l){const d=s!=="=="&&s!=="!=";return class zB{constructor(v,x,C){this.type=Vn,this.lhs=v,this.rhs=x,this.collator=C,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const C=v[0];let I=x.parse(v[1],1,Un);if(!I)return null;if(!Bf(C,I.type))return x.concat(1).error(`"${C}" comparisons are not supported for type '${Or(I.type)}'.`);let R=x.parse(v[2],2,Un);if(!R)return null;if(!Bf(C,R.type))return x.concat(2).error(`"${C}" comparisons are not supported for type '${Or(R.type)}'.`);if(I.type.kind!==R.type.kind&&I.type.kind!=="value"&&R.type.kind!=="value")return x.error(`Cannot compare types '${Or(I.type)}' and '${Or(R.type)}'.`);d&&(I.type.kind==="value"&&R.type.kind!=="value"?I=new fs(R.type,[I]):I.type.kind!=="value"&&R.type.kind==="value"&&(R=new fs(I.type,[R])));let H=null;if(v.length===4){if(I.type.kind!=="string"&&R.type.kind!=="string"&&I.type.kind!=="value"&&R.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(H=x.parse(v[3],3,_c),!H)return null}return new zB(I,R,H)}evaluate(v){const x=this.lhs.evaluate(v),C=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const I=Pi(x),R=Pi(C);if(I.kind!==R.kind||I.kind!=="string"&&I.kind!=="number")throw new Xi(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${I.kind}, ${R.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const I=Pi(x),R=Pi(C);if(I.kind!=="string"||R.kind!=="string")return i(v,x,C)}return this.collator?l(v,x,C,this.collator.evaluate(v)):i(v,x,C)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}serialize(){const v=[s];return this.eachChild(x=>{v.push(x.serialize())}),v}}}const W1=fu("==",function(s,i,l){return i===l},Wy),Gy=fu("!=",function(s,i,l){return i!==l},function(s,i,l,d){return!Wy(0,i,l,d)}),qy=fu("<",function(s,i,l){return i<l},function(s,i,l,d){return d.compare(i,l)<0}),Zy=fu(">",function(s,i,l){return i>l},function(s,i,l,d){return d.compare(i,l)>0}),Ff=fu("<=",function(s,i,l){return i<=l},function(s,i,l,d){return d.compare(i,l)<=0}),G1=fu(">=",function(s,i,l){return i>=l},function(s,i,l,d){return d.compare(i,l)>=0});class Nf{constructor(i,l,d,f,v,x){this.type=Xn,this.number=i,this.locale=l,this.currency=d,this.unit=f,this.minFractionDigits=v,this.maxFractionDigits=x}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const d=l.parse(i[1],1,Vt);if(!d)return null;const f=i[2];if(typeof f!="object"||Array.isArray(f))return l.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=l.parse(f.locale,1,Xn),!v))return null;let x=null;if(f.currency&&(x=l.parse(f.currency,1,Xn),!x))return null;let C=null;if(f.unit&&(C=l.parse(f.unit,1,Xn),!C))return null;let I=null;if(f["min-fraction-digits"]&&(I=l.parse(f["min-fraction-digits"],1,Vt),!I))return null;let R=null;return f["max-fraction-digits"]&&(R=l.parse(f["max-fraction-digits"],1,Vt),!R)?null:new Nf(d,v,x,C,I,R)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class $f{constructor(i){this.type=Vt,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const d=l.parse(i[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Or(d.type)} instead.`):new $f(d):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string"||Array.isArray(l))return l.length;throw new Xi(`Expected value to be of type string or array, but found ${Or(Pi(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(l=>{i.push(l.serialize())}),i}}const Xy={"==":W1,"!=":Gy,">":Zy,"<":qy,">=":G1,"<=":Ff,array:fs,at:j1,boolean:fs,case:H1,coalesce:Uy,collator:nh,format:Cc,image:th,in:jy,"index-of":Vy,interpolate:Ua,"interpolate-hcl":Ua,"interpolate-lab":Ua,length:$f,let:Rf,literal:Ec,match:V1,number:fs,"number-format":Nf,object:fs,slice:Hy,step:Tf,string:fs,"to-boolean":du,"to-color":du,"to-number":du,"to-string":du,var:Cf,within:Ef};function Ky(s,[i,l,d,f]){i=i.evaluate(s),l=l.evaluate(s),d=d.evaluate(s);const v=f?f.evaluate(s):1,x=My(i,l,d,v);if(x)throw new Xi(x);return new pi(i/255*v,l/255*v,d/255*v,v)}function Yy(s,i){return s in i}function Uf(s,i){const l=i[s];return l===void 0?null:l}function js(s){return{type:s}}Ns.register(Xy,{error:[{kind:"error"},[Xn],(s,[i])=>{throw new Xi(i.evaluate(s))}],typeof:[Xn,[Un],(s,[i])=>Or(Pi(i.evaluate(s)))],"to-rgba":[_o(Vt,4),[$a],(s,[i])=>i.evaluate(s).toArray()],rgb:[$a,[Vt,Vt,Vt],Ky],rgba:[$a,[Vt,Vt,Vt,Vt],Ky],has:{type:Vn,overloads:[[[Xn],(s,[i])=>Yy(i.evaluate(s),s.properties())],[[Xn,_l],(s,[i,l])=>Yy(i.evaluate(s),l.evaluate(s))]]},get:{type:Un,overloads:[[[Xn],(s,[i])=>Uf(i.evaluate(s),s.properties())],[[Xn,_l],(s,[i,l])=>Uf(i.evaluate(s),l.evaluate(s))]]},"feature-state":[Un,[Xn],(s,[i])=>Uf(i.evaluate(s),s.featureState||{})],properties:[_l,[],s=>s.properties()],"geometry-type":[Xn,[],s=>s.geometryType()],id:[Un,[],s=>s.id()],zoom:[Vt,[],s=>s.globals.zoom],pitch:[Vt,[],s=>s.globals.pitch||0],"distance-from-center":[Vt,[],s=>s.distanceFromCenter()],"heatmap-density":[Vt,[],s=>s.globals.heatmapDensity||0],"line-progress":[Vt,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[Vt,[],s=>s.globals.skyRadialProgress||0],accumulated:[Un,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Vt,js(Vt),(s,i)=>{let l=0;for(const d of i)l+=d.evaluate(s);return l}],"*":[Vt,js(Vt),(s,i)=>{let l=1;for(const d of i)l*=d.evaluate(s);return l}],"-":{type:Vt,overloads:[[[Vt,Vt],(s,[i,l])=>i.evaluate(s)-l.evaluate(s)],[[Vt],(s,[i])=>-i.evaluate(s)]]},"/":[Vt,[Vt,Vt],(s,[i,l])=>i.evaluate(s)/l.evaluate(s)],"%":[Vt,[Vt,Vt],(s,[i,l])=>i.evaluate(s)%l.evaluate(s)],ln2:[Vt,[],()=>Math.LN2],pi:[Vt,[],()=>Math.PI],e:[Vt,[],()=>Math.E],"^":[Vt,[Vt,Vt],(s,[i,l])=>Math.pow(i.evaluate(s),l.evaluate(s))],sqrt:[Vt,[Vt],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Vt,[Vt],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Vt,[Vt],(s,[i])=>Math.log(i.evaluate(s))],log2:[Vt,[Vt],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Vt,[Vt],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Vt,[Vt],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Vt,[Vt],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Vt,[Vt],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Vt,[Vt],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Vt,[Vt],(s,[i])=>Math.atan(i.evaluate(s))],min:[Vt,js(Vt),(s,i)=>Math.min(...i.map(l=>l.evaluate(s)))],max:[Vt,js(Vt),(s,i)=>Math.max(...i.map(l=>l.evaluate(s)))],abs:[Vt,[Vt],(s,[i])=>Math.abs(i.evaluate(s))],round:[Vt,[Vt],(s,[i])=>{const l=i.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[Vt,[Vt],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Vt,[Vt],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[Vn,[Xn,Un],(s,[i,l])=>s.properties()[i.value]===l.value],"filter-id-==":[Vn,[Un],(s,[i])=>s.id()===i.value],"filter-type-==":[Vn,[Xn],(s,[i])=>s.geometryType()===i.value],"filter-<":[Vn,[Xn,Un],(s,[i,l])=>{const d=s.properties()[i.value],f=l.value;return typeof d==typeof f&&d<f}],"filter-id-<":[Vn,[Un],(s,[i])=>{const l=s.id(),d=i.value;return typeof l==typeof d&&l<d}],"filter->":[Vn,[Xn,Un],(s,[i,l])=>{const d=s.properties()[i.value],f=l.value;return typeof d==typeof f&&d>f}],"filter-id->":[Vn,[Un],(s,[i])=>{const l=s.id(),d=i.value;return typeof l==typeof d&&l>d}],"filter-<=":[Vn,[Xn,Un],(s,[i,l])=>{const d=s.properties()[i.value],f=l.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[Vn,[Un],(s,[i])=>{const l=s.id(),d=i.value;return typeof l==typeof d&&l<=d}],"filter->=":[Vn,[Xn,Un],(s,[i,l])=>{const d=s.properties()[i.value],f=l.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[Vn,[Un],(s,[i])=>{const l=s.id(),d=i.value;return typeof l==typeof d&&l>=d}],"filter-has":[Vn,[Un],(s,[i])=>i.value in s.properties()],"filter-has-id":[Vn,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Vn,[_o(Xn)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[Vn,[_o(Un)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[Vn,[Xn,_o(Un)],(s,[i,l])=>l.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[Vn,[Xn,_o(Un)],(s,[i,l])=>function(d,f,v,x){for(;v<=x;){const C=v+x>>1;if(f[C]===d)return!0;f[C]>d?x=C-1:v=C+1}return!1}(s.properties()[i.value],l.value,0,l.value.length-1)],all:{type:Vn,overloads:[[[Vn,Vn],(s,[i,l])=>i.evaluate(s)&&l.evaluate(s)],[js(Vn),(s,i)=>{for(const l of i)if(!l.evaluate(s))return!1;return!0}]]},any:{type:Vn,overloads:[[[Vn,Vn],(s,[i,l])=>i.evaluate(s)||l.evaluate(s)],[js(Vn),(s,i)=>{for(const l of i)if(l.evaluate(s))return!0;return!1}]]},"!":[Vn,[Vn],(s,[i])=>!i.evaluate(s)],"is-supported-script":[Vn,[Xn],(s,[i])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(i.evaluate(s))}],upcase:[Xn,[Xn],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[Xn,[Xn],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[Xn,js(Un),(s,i)=>i.map(l=>wc(l.evaluate(s))).join("")],"resolved-locale":[Xn,[_c],(s,[i])=>i.evaluate(s).resolvedLocale()]});var mu=Xy;function Oc(s){return{result:"success",value:s}}function gu(s){return{result:"error",value:s}}function yu(s){return s["property-type"]==="data-driven"}function ms(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function mh(s){return!!s.expression&&s.expression.interpolated}function Yn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function gh(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function q1(s){return s}function jf(s,i){const l=i.type==="color",d=s.stops&&typeof s.stops[0][0]=="object",f=d||!(d||s.property!==void 0),v=s.type||(mh(i)?"exponential":"interval");if(l&&((s=ps({},s)).stops&&(s.stops=s.stops.map(R=>[R[0],pi.parse(R[1])])),s.default=pi.parse(s.default?s.default:i.default)),s.colorSpace&&s.colorSpace!=="rgb"&&!$y[s.colorSpace])throw new Error(`Unknown color space: ${s.colorSpace}`);let x,C,I;if(v==="exponential")x=yh;else if(v==="interval")x=Jy;else if(v==="categorical"){x=Vf,C=Object.create(null);for(const R of s.stops)C[R[0]]=R[1];I=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);x=Qy}if(d){const R={},H=[];for(let J=0;J<s.stops.length;J++){const Q=s.stops[J],oe=Q[0].zoom;R[oe]===void 0&&(R[oe]={zoom:oe,type:s.type,property:s.property,default:s.default,stops:[]},H.push(oe)),R[oe].stops.push([Q[0].value,Q[1]])}const q=[];for(const J of H)q.push([R[J].zoom,jf(R[J],i)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:Ua.interpolationFactor.bind(void 0,Z),zoomStops:q.map(J=>J[0]),evaluate:({zoom:J},Q)=>yh({stops:q,base:s.base},i,J).evaluate(J,Q)}}if(f){const R=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:Ua.interpolationFactor.bind(void 0,R),zoomStops:s.stops.map(H=>H[0]),evaluate:({zoom:H})=>x(s,i,H,C,I)}}return{kind:"source",evaluate(R,H){const q=H&&H.properties?H.properties[s.property]:void 0;return q===void 0?zc(s.default,i.default):x(s,i,q,C,I)}}}function zc(s,i,l){return s!==void 0?s:i!==void 0?i:l!==void 0?l:void 0}function Vf(s,i,l,d,f){return zc(typeof l===f?d[l]:void 0,s.default,i.default)}function Jy(s,i,l){if(Yn(l)!=="number")return zc(s.default,i.default);const d=s.stops.length;if(d===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[d-1][0])return s.stops[d-1][1];const f=El(s.stops.map(v=>v[0]),l);return s.stops[f][1]}function yh(s,i,l){const d=s.base!==void 0?s.base:1;if(Yn(l)!=="number")return zc(s.default,i.default);const f=s.stops.length;if(f===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[f-1][0])return s.stops[f-1][1];const v=El(s.stops.map(H=>H[0]),l),x=function(H,q,Z,J){const Q=J-Z,oe=H-Z;return Q===0?0:q===1?oe/Q:(Math.pow(q,oe)-1)/(Math.pow(q,Q)-1)}(l,d,s.stops[v][0],s.stops[v+1][0]),C=s.stops[v][1],I=s.stops[v+1][1];let R=Ic[i.type]||q1;if(s.colorSpace&&s.colorSpace!=="rgb"){const H=$y[s.colorSpace];R=(q,Z)=>H.reverse(H.interpolate(H.forward(q),H.forward(Z),x))}return typeof C.evaluate=="function"?{evaluate(...H){const q=C.evaluate.apply(void 0,H),Z=I.evaluate.apply(void 0,H);if(q!==void 0&&Z!==void 0)return R(q,Z,x)}}:R(C,I,x)}function Qy(s,i,l){return i.type==="color"?l=pi.parse(l):i.type==="formatted"?l=Po.fromString(l.toString()):i.type==="resolvedImage"?l=xo.fromString(l.toString()):Yn(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0),zc(l,s.default,i.default)}class vh{constructor(i,l){this.expression=i,this._warningHistory={},this._evaluator=new Sc,this._defaultValue=l?function(d){return d.type==="color"&&(gh(d.default)||Array.isArray(d.default))?new pi(0,0,0,0):d.type==="color"?pi.parse(d.default)||null:d.default===void 0?null:d.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,d,f,v,x,C,I){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=f||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(i,l,d,f,v,x,C,I){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=f||null,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null,this._evaluator.featureTileCoord=C||null,this._evaluator.featureDistanceData=I||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new Xi(`Expected value to be one of ${Object.keys(this._enumValues).map(H=>JSON.stringify(H)).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console!="undefined"&&console.warn(R.message)),this._defaultValue}}}function vu(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in mu}function _u(s,i){const l=new Sf(mu,[],i?function(f){const v={color:$a,string:Xn,number:Vt,enum:Xn,boolean:Vn,formatted:su,resolvedImage:lu};return f.type==="array"?_o(v[f.value]||Un,f.length):v[f.type]}(i):void 0),d=l.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Oc(new vh(d,i)):gu(l.errors)}class _h{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!Mc(l.expression)}evaluateWithoutErrorHandling(i,l,d,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,d,f,v,x)}evaluate(i,l,d,f,v,x){return this._styleExpression.evaluate(i,l,d,f,v,x)}}class Sl{constructor(i,l,d,f){this.kind=i,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!Mc(l.expression),this.interpolationType=f}evaluateWithoutErrorHandling(i,l,d,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,d,f,v,x)}evaluate(i,l,d,f,v,x){return this._styleExpression.evaluate(i,l,d,f,v,x)}interpolationFactor(i,l,d){return this.interpolationType?Ua.interpolationFactor(this.interpolationType,i,l,d):0}}function Tl(s,i){if((s=_u(s,i)).result==="error")return s;const l=s.value.expression,d=Ac(l);if(!d&&!yu(i))return gu([new Na("","data expressions not supported")]);const f=ah(l,["zoom","pitch","distance-from-center"]);if(!f&&!ms(i))return gu([new Na("","zoom expressions not supported")]);const v=Fc(l);return v||f?v instanceof Na?gu([v]):v instanceof Ua&&!mh(i)?gu([new Na("",'"interpolate" expressions cannot be used with this property')]):Oc(v?new Sl(d?"camera":"composite",s.value,v.labels,v instanceof Ua?v.interpolation:void 0):new _h(d?"constant":"source",s.value)):gu([new Na("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bc{constructor(i,l){this._parameters=i,this._specification=l,ps(this,jf(this._parameters,this._specification))}static deserialize(i){return new Bc(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Fc(s){let i=null;if(s instanceof Rf)i=Fc(s.result);else if(s instanceof Uy){for(const l of s.args)if(i=Fc(l),i)break}else(s instanceof Tf||s instanceof Ua)&&s.input instanceof Ns&&s.input.name==="zoom"&&(i=s);return i instanceof Na||s.eachChild(l=>{const d=Fc(l);d instanceof Na?i=d:!i&&d?i=new Na("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&d&&i!==d&&(i=new Na("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Jt{constructor(i,l,d,f){this.message=(i?`${i}: `:"")+d,f&&(this.identifier=f),l!=null&&l.__line__&&(this.line=l.__line__)}}function na(s){const i=s.key,l=s.value,d=s.valueSpec||{},f=s.objectElementValidators||{},v=s.style,x=s.styleSpec;let C=[];const I=Yn(l);if(I!=="object")return[new Jt(i,l,`object expected, ${I} found`)];for(const R in l){const H=R.split(".")[0],q=d[H]||d["*"];let Z;f[H]?Z=f[H]:d[H]?Z=ao:f["*"]?Z=f["*"]:d["*"]&&(Z=ao),Z?C=C.concat(Z({key:(i&&`${i}.`)+R,value:l[R],valueSpec:q,style:v,styleSpec:x,object:l,objectKey:R},l)):C.push(new Jt(i,l[R],`unknown property "${R}"`))}for(const R in d)f[R]||d[R].required&&d[R].default===void 0&&l[R]===void 0&&C.push(new Jt(i,l,`missing required property "${R}"`));return C}function ev(s){const i=s.value,l=s.valueSpec,d=s.style,f=s.styleSpec,v=s.key,x=s.arrayElementValidator||ao;if(Yn(i)!=="array")return[new Jt(v,i,`array expected, ${Yn(i)} found`)];if(l.length&&i.length!==l.length)return[new Jt(v,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new Jt(v,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let C={type:l.value,values:l.values,minimum:l.minimum,maximum:l.maximum,function:void 0};f.$version<7&&(C.function=l.function),Yn(l.value)==="object"&&(C=l.value);let I=[];for(let R=0;R<i.length;R++)I=I.concat(x({array:i,arrayIndex:R,value:i[R],valueSpec:C,style:d,styleSpec:f,key:`${v}[${R}]`}));return I}function Hf(s){const i=s.key,l=s.value,d=s.valueSpec;let f=Yn(l);if(f==="number"&&l!=l&&(f="NaN"),f!=="number")return[new Jt(i,l,`number expected, ${f} found`)];if("minimum"in d){let v=d.minimum;if(Yn(d.minimum)==="array"&&(v=d.minimum[s.arrayIndex]),l<v)return[new Jt(i,l,`${l} is less than the minimum value ${v}`)]}if("maximum"in d){let v=d.maximum;if(Yn(d.maximum)==="array"&&(v=d.maximum[s.arrayIndex]),l>v)return[new Jt(i,l,`${l} is greater than the maximum value ${v}`)]}return[]}function Nc(s){const i=s.valueSpec,l=bi(s.value.type);let d,f,v,x={};const C=l!=="categorical"&&s.value.property===void 0,I=!C,R=Yn(s.value.stops)==="array"&&Yn(s.value.stops[0])==="array"&&Yn(s.value.stops[0][0])==="object",H=na({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(J){if(l==="identity")return[new Jt(J.key,J.value,'identity function may not have a "stops" property')];let Q=[];const oe=J.value;return Q=Q.concat(ev({key:J.key,value:oe,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:q})),Yn(oe)==="array"&&oe.length===0&&Q.push(new Jt(J.key,oe,"array must have at least one stop")),Q},default:function(J){return ao({key:J.key,value:J.value,valueSpec:i,style:J.style,styleSpec:J.styleSpec})}}});return l==="identity"&&C&&H.push(new Jt(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||H.push(new Jt(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!mh(s.valueSpec)&&H.push(new Jt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(I&&!yu(s.valueSpec)?H.push(new Jt(s.key,s.value,"property functions not supported")):C&&!ms(s.valueSpec)&&H.push(new Jt(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!R||s.value.property!==void 0||H.push(new Jt(s.key,s.value,'"property" property is required')),H;function q(J){let Q=[];const oe=J.value,he=J.key;if(Yn(oe)!=="array")return[new Jt(he,oe,`array expected, ${Yn(oe)} found`)];if(oe.length!==2)return[new Jt(he,oe,`array length 2 expected, length ${oe.length} found`)];if(R){if(Yn(oe[0])!=="object")return[new Jt(he,oe,`object expected, ${Yn(oe[0])} found`)];if(oe[0].zoom===void 0)return[new Jt(he,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new Jt(he,oe,"object stop key must have value")];const Ce=bi(oe[0].zoom);if(typeof Ce!="number")return[new Jt(he,oe[0].zoom,"stop zoom values must be numbers")];if(v&&v>Ce)return[new Jt(he,oe[0].zoom,"stop zoom values must appear in ascending order")];Ce!==v&&(v=Ce,f=void 0,x={}),Q=Q.concat(na({key:`${he}[0]`,value:oe[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Hf,value:Z}}))}else Q=Q.concat(Z({key:`${he}[0]`,value:oe[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},oe));return vu(Fs(oe[1]))?Q.concat([new Jt(`${he}[1]`,oe[1],"expressions are not allowed in function stops.")]):Q.concat(ao({key:`${he}[1]`,value:oe[1],valueSpec:i,style:J.style,styleSpec:J.styleSpec}))}function Z(J,Q){const oe=Yn(J.value),he=bi(J.value),Ce=J.value!==null?J.value:Q;if(d){if(oe!==d)return[new Jt(J.key,Ce,`${oe} stop domain type must match previous stop domain type ${d}`)]}else d=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean"&&typeof he!="number"&&typeof he!="string"&&typeof he!="boolean")return[new Jt(J.key,Ce,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&l!=="categorical"){let Ne=`number expected, ${oe} found`;return yu(i)&&l===void 0&&(Ne+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Jt(J.key,Ce,Ne)]}return l!=="categorical"||oe!=="number"||typeof he=="number"&&isFinite(he)&&Math.floor(he)===he?l!=="categorical"&&oe==="number"&&typeof he=="number"&&typeof f=="number"&&f!==void 0&&he<f?[new Jt(J.key,Ce,"stop domain values must appear in ascending order")]:(f=he,l==="categorical"&&he in x?[new Jt(J.key,Ce,"stop domain values must be unique")]:(x[he]=!0,[])):[new Jt(J.key,Ce,`integer expected, found ${String(he)}`)]}}function xu(s){const i=(s.expressionContext==="property"?Tl:_u)(Fs(s.value),s.valueSpec);if(i.result==="error")return i.value.map(d=>new Jt(`${s.key}${d.key}`,s.value,d.message));const l=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new Jt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Mc(l))return[new Jt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter")return tv(l,s);if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!ah(l,["zoom","feature-state"]))return[new Jt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Ac(l))return[new Jt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tv(s,i){const l=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const f of i.valueSpec.expression.parameters)l.delete(f);if(l.size===0)return[];const d=[];return s instanceof Ns&&l.has(s.name)?[new Jt(i.key,i.value,`["${s.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(s.eachChild(f=>{d.push(...tv(f,i))}),d)}function xh(s){const i=s.key,l=s.value,d=s.valueSpec,f=[];return Array.isArray(d.values)?d.values.indexOf(bi(l))===-1&&f.push(new Jt(i,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(bi(l))===-1&&f.push(new Jt(i,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),f}function Wf(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!Wf(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function bh(s,i="fill"){if(s==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Wf(s)||(s=Eh(s));const l=s;let d=!0;try{d=function(R){if(!Vi(R))return R;let H=Fs(R);return Uc(H),H=$c(H),H}(l)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(l,null,2)}
        `)}const f=Ct[`filter_${i}`],v=_u(d,f);let x=null;if(v.result==="error")throw new Error(v.value.map(R=>`${R.key}: ${R.message}`).join(", "));x=(R,H,q)=>v.value.evaluate(R,H,{},q);let C=null,I=null;if(d!==l){const R=_u(l,f);if(R.result==="error")throw new Error(R.value.map(H=>`${H.key}: ${H.message}`).join(", "));C=(H,q,Z,J,Q)=>R.value.evaluate(H,q,{},Z,void 0,void 0,J,Q),I=!Ac(R.value.expression)}return{filter:x,dynamicFilter:C||void 0,needGeometry:nv(d),needFeature:!!I}}function $c(s){if(!Array.isArray(s))return s;const i=function(l){if(wh.has(l[0])){for(let d=1;d<l.length;d++)if(Vi(l[d]))return!0}return l}(s);return i===!0?i:i.map(l=>$c(l))}function Uc(s){let i=!1;const l=[];if(s[0]==="case"){for(let d=1;d<s.length-1;d+=2)i=i||Vi(s[d]),l.push(s[d+1]);l.push(s[s.length-1])}else if(s[0]==="match"){i=i||Vi(s[1]);for(let d=2;d<s.length-1;d+=2)l.push(s[d+1]);l.push(s[s.length-1])}else if(s[0]==="step"){i=i||Vi(s[1]);for(let d=1;d<s.length-1;d+=2)l.push(s[d+1])}i&&(s.length=0,s.push("any",...l));for(let d=1;d<s.length;d++)Uc(s[d])}function Vi(s){if(!Array.isArray(s))return!1;if((i=s[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let l=1;l<s.length;l++)if(Vi(s[l]))return!0;return!1}const wh=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Z1(s,i){return s<i?-1:s>i?1:0}function nv(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let i=1;i<s.length;i++)if(nv(s[i]))return!0;return!1}function Eh(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?Gf(s[1],s[2],"=="):i==="!="?bu(Gf(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Gf(s[1],s[2],i):i==="any"?(l=s.slice(1),["any"].concat(l.map(Eh))):i==="all"?["all"].concat(s.slice(1).map(Eh)):i==="none"?["all"].concat(s.slice(1).map(Eh).map(bu)):i==="in"?Ch(s[1],s.slice(2)):i==="!in"?bu(Ch(s[1],s.slice(2))):i==="has"?rv(s[1]):i==="!has"?bu(rv(s[1])):i!=="within"||s;var l}function Gf(s,i,l){switch(s){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,s,i]}}function Ch(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",s,["literal",i.sort(Z1)]]:["filter-in-small",s,["literal",i]]}}function rv(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function bu(s){return["!",s]}function qf(s){return Wf(Fs(s.value))?xu(ps({},s,{expressionContext:"filter",valueSpec:s.styleSpec[`filter_${s.layerType||"fill"}`]})):iv(s)}function iv(s){const i=s.value,l=s.key;if(Yn(i)!=="array")return[new Jt(l,i,`array expected, ${Yn(i)} found`)];const d=s.styleSpec;let f,v=[];if(i.length<1)return[new Jt(l,i,"filter array must have at least 1 element")];switch(v=v.concat(xh({key:`${l}[0]`,value:i[0],valueSpec:d.filter_operator,style:s.style,styleSpec:s.styleSpec})),bi(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&bi(i[1])==="$type"&&v.push(new Jt(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&v.push(new Jt(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(f=Yn(i[1]),f!=="string"&&v.push(new Jt(`${l}[1]`,i[1],`string expected, ${f} found`)));for(let x=2;x<i.length;x++)f=Yn(i[x]),bi(i[1])==="$type"?v=v.concat(xh({key:`${l}[${x}]`,value:i[x],valueSpec:d.geometry_type,style:s.style,styleSpec:s.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Jt(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)v=v.concat(iv({key:`${l}[${x}]`,value:i[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":f=Yn(i[1]),i.length!==2?v.push(new Jt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Jt(`${l}[1]`,i[1],`string expected, ${f} found`));break;case"within":f=Yn(i[1]),i.length!==2?v.push(new Jt(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):f!=="object"&&v.push(new Jt(`${l}[1]`,i[1],`object expected, ${f} found`))}return v}function Sh(s,i){const l=s.key,d=s.style,f=s.styleSpec,v=s.value,x=s.objectKey,C=f[`${i}_${s.layerType}`];if(!C)return[];const I=x.match(/^(.*)-transition$/);if(i==="paint"&&I&&C[I[1]]&&C[I[1]].transition)return ao({key:l,value:v,valueSpec:f.transition,style:d,styleSpec:f});const R=s.valueSpec||C[x];if(!R)return[new Jt(l,v,`unknown property "${x}"`)];let H;if(Yn(v)==="string"&&yu(R)&&!R.tokens&&(H=/^{([^}]+)}$/.exec(v))){const Z=`\`{ "type": "identity", "property": ${H?JSON.stringify(H[1]):'"_"'} }\``;return[new Jt(l,v,`"${x}" does not support interpolation syntax
Use an identity property function instead: ${Z}.`)]}const q=[];return s.layerType==="symbol"&&(x==="text-field"&&d&&!d.glyphs&&q.push(new Jt(l,v,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&gh(Fs(v))&&bi(v.type)==="identity"&&q.push(new Jt(l,v,'"text-font" does not support identity functions'))),q.concat(ao({key:s.key,value:v,valueSpec:R,style:d,styleSpec:f,expressionContext:"property",propertyType:i,propertyKey:x}))}function ov(s){return Sh(s,"paint")}function Zf(s){return Sh(s,"layout")}function Xf(s){let i=[];const l=s.value,d=s.key,f=s.style,v=s.styleSpec;l.type||l.ref||i.push(new Jt(d,l,'either "type" or "ref" is required'));let x=bi(l.type);const C=bi(l.ref);if(l.id){const I=bi(l.id);for(let R=0;R<s.arrayIndex;R++){const H=f.layers[R];bi(H.id)===I&&i.push(new Jt(d,l.id,`duplicate layer id "${l.id}", previously used at line ${H.id.__line__}`))}}if("ref"in l){let I;["type","source","source-layer","filter","layout"].forEach(R=>{R in l&&i.push(new Jt(d,l[R],`"${R}" is prohibited for ref layers`))}),f.layers.forEach(R=>{bi(R.id)===C&&(I=R)}),I?I.ref?i.push(new Jt(d,l.ref,"ref cannot reference another ref layer")):x=bi(I.type):typeof C=="string"&&i.push(new Jt(d,l.ref,`ref layer "${C}" not found`))}else if(x!=="background"&&x!=="sky")if(l.source){const I=f.sources&&f.sources[l.source],R=I&&bi(I.type);I?R==="vector"&&x==="raster"?i.push(new Jt(d,l.source,`layer "${l.id}" requires a raster source`)):R==="raster"&&x!=="raster"?i.push(new Jt(d,l.source,`layer "${l.id}" requires a vector source`)):R!=="vector"||l["source-layer"]?R==="raster-dem"&&x!=="hillshade"?i.push(new Jt(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]&&!l.paint["line-trim-offset"]||R==="geojson"&&I.lineMetrics||i.push(new Jt(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Jt(d,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new Jt(d,l.source,`source "${l.source}" not found`))}else i.push(new Jt(d,l,'missing required property "source"'));return i=i.concat(na({key:d,value:l,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ao({key:`${d}.type`,value:l.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,object:l,objectKey:"type"}),filter:I=>qf(ps({layerType:x},I)),layout:I=>na({layer:l,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":R=>Zf(ps({layerType:x},R))}}),paint:I=>na({layer:l,key:I.key,value:I.value,valueSpec:{},style:I.style,styleSpec:I.styleSpec,objectElementValidators:{"*":R=>ov(ps({layerType:x},R))}})}})),i}function wu(s){const i=s.value,l=s.key,d=Yn(i);return d!=="string"?[new Jt(l,i,`string expected, ${d} found`)]:[]}const Th={promoteId:function({key:s,value:i}){if(Yn(i)==="string")return wu({key:s,value:i});{const l=[];for(const d in i)l.push(...wu({key:`${s}.${d}`,value:i[d]}));return l}}};function jc(s){const i=s.value,l=s.key,d=s.styleSpec,f=s.style;if(!i.type)return[new Jt(l,i,'"type" is required')];const v=bi(i.type);let x;switch(v){case"vector":case"raster":case"raster-dem":return x=na({key:l,value:i,valueSpec:d[`source_${v.replace("-","_")}`],style:s.style,styleSpec:d,objectElementValidators:Th}),x;case"geojson":if(x=na({key:l,value:i,valueSpec:d.source_geojson,style:f,styleSpec:d,objectElementValidators:Th}),i.cluster)for(const C in i.clusterProperties){const[I,R]=i.clusterProperties[C],H=typeof I=="string"?[I,["accumulated"],["get",C]]:I;x.push(...xu({key:`${l}.${C}.map`,value:R,expressionContext:"cluster-map"})),x.push(...xu({key:`${l}.${C}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return x;case"video":return na({key:l,value:i,valueSpec:d.source_video,style:f,styleSpec:d});case"image":return na({key:l,value:i,valueSpec:d.source_image,style:f,styleSpec:d});case"canvas":return[new Jt(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xh({key:`${l}.type`,value:i.type,valueSpec:{values:av(d)},style:f,styleSpec:d})}}function av(s){return s.source.reduce((i,l)=>{const d=s[l];return d.type.type==="enum"&&(i=i.concat(Object.keys(d.type.values))),i},[])}function sv(s){const i=s.value,l=s.styleSpec,d=l.light,f=s.style;let v=[];const x=Yn(i);if(i===void 0)return v;if(x!=="object")return v=v.concat([new Jt("light",i,`object expected, ${x} found`)]),v;for(const C in i){const I=C.match(/^(.*)-transition$/);v=v.concat(I&&d[I[1]]&&d[I[1]].transition?ao({key:C,value:i[C],valueSpec:l.transition,style:f,styleSpec:l}):d[C]?ao({key:C,value:i[C],valueSpec:d[C],style:f,styleSpec:l}):[new Jt(C,i[C],`unknown property "${C}"`)])}return v}function Kf(s){const i=s.value,l=s.key,d=s.style,f=s.styleSpec,v=f.terrain;let x=[];const C=Yn(i);if(i===void 0)return x;if(C!=="object")return x=x.concat([new Jt("terrain",i,`object expected, ${C} found`)]),x;for(const I in i){const R=I.match(/^(.*)-transition$/);x=x.concat(R&&v[R[1]]&&v[R[1]].transition?ao({key:I,value:i[I],valueSpec:f.transition,style:d,styleSpec:f}):v[I]?ao({key:I,value:i[I],valueSpec:v[I],style:d,styleSpec:f}):[new Jt(I,i[I],`unknown property "${I}"`)])}if(i.source){const I=d.sources&&d.sources[i.source],R=I&&bi(I.type);I?R!=="raster-dem"&&x.push(new Jt(l,i.source,`terrain cannot be used with a source of type ${String(R)}, it only be used with a "raster-dem" source type`)):x.push(new Jt(l,i.source,`source "${i.source}" not found`))}else x.push(new Jt(l,i,'terrain is missing required property "source"'));return x}function lv(s){const i=s.value,l=s.style,d=s.styleSpec,f=d.fog;let v=[];const x=Yn(i);if(i===void 0)return v;if(x!=="object")return v=v.concat([new Jt("fog",i,`object expected, ${x} found`)]),v;for(const C in i){const I=C.match(/^(.*)-transition$/);v=v.concat(I&&f[I[1]]&&f[I[1]].transition?ao({key:C,value:i[C],valueSpec:d.transition,style:l,styleSpec:d}):f[C]?ao({key:C,value:i[C],valueSpec:f[C],style:l,styleSpec:d}):[new Jt(C,i[C],`unknown property "${C}"`)])}return v}const kh={"*":()=>[],array:ev,boolean:function(s){const i=s.value,l=s.key,d=Yn(i);return d!=="boolean"?[new Jt(l,i,`boolean expected, ${d} found`)]:[]},number:Hf,color:function(s){const i=s.key,l=s.value,d=Yn(l);return d!=="string"?[new Jt(i,l,`color expected, ${d} found`)]:gf(l)===null?[new Jt(i,l,`color expected, "${l}" found`)]:[]},enum:xh,filter:qf,function:Nc,layer:Xf,object:na,source:jc,light:sv,terrain:Kf,fog:lv,string:wu,formatted:function(s){return wu(s).length===0?[]:xu(s)},resolvedImage:function(s){return wu(s).length===0?[]:xu(s)},projection:function(s){const i=s.value,l=s.styleSpec,d=l.projection,f=s.style;let v=[];const x=Yn(i);if(x==="object")for(const C in i)v=v.concat(ao({key:C,value:i[C],valueSpec:d[C],style:f,styleSpec:l}));else x!=="string"&&(v=v.concat([new Jt("projection",i,`object or string expected, ${x} found`)]));return v}};function ao(s){const i=s.value,l=s.valueSpec,d=s.styleSpec;return l.expression&&gh(bi(i))?Nc(s):l.expression&&vu(Fs(i))?xu(s):l.type&&kh[l.type]?kh[l.type](s):na(ps({},s,{valueSpec:l.type?d[l.type]:l}))}function X1(s){const i=s.value,l=s.key,d=wu(s);return d.length||(i.indexOf("{fontstack}")===-1&&d.push(new Jt(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&d.push(new Jt(l,i,'"glyphs" url must include a "{range}" token'))),d}function uv(s,i=Ct){return gs(ao({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,objectElementValidators:{glyphs:X1,"*":()=>[]}}))}const K1=s=>gs(ov(s)),cv=s=>gs(Zf(s));function gs(s){return s.slice().sort((i,l)=>i.line&&l.line?i.line-l.line:0)}function dv(s,i){let l=!1;if(i&&i.length)for(const d of i)s.fire(new Bs(new Error(d.message))),l=!0;return l}var Eu=ja;function ja(s,i,l){var d=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var f=new Int32Array(this.arrayBuffer);s=f[0],this.d=(i=f[1])+2*(l=f[2]);for(var v=0;v<this.d*this.d;v++){var x=f[3+v],C=f[3+v+1];d.push(x===C?null:f.subarray(x,C))}var I=f[3+d.length+1];this.keys=f.subarray(f[3+d.length],I),this.bboxes=f.subarray(I),this.insert=this._insertReadonly}else{this.d=i+2*l;for(var R=0;R<this.d*this.d;R++)d.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=s,this.padding=l,this.scale=i/s,this.uid=0;var H=l/i*s;this.min=-H,this.max=s+H}ja.prototype.insert=function(s,i,l,d,f){this._forEachCell(i,l,d,f,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(f)},ja.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ja.prototype._insertCell=function(s,i,l,d,f,v){this.cells[f].push(v)},ja.prototype.query=function(s,i,l,d,f){var v=this.min,x=this.max;if(s<=v&&i<=v&&x<=l&&x<=d&&!f)return Array.prototype.slice.call(this.keys);var C=[];return this._forEachCell(s,i,l,d,this._queryCell,C,{},f),C},ja.prototype._queryCell=function(s,i,l,d,f,v,x,C){var I=this.cells[f];if(I!==null)for(var R=this.keys,H=this.bboxes,q=0;q<I.length;q++){var Z=I[q];if(x[Z]===void 0){var J=4*Z;(C?C(H[J+0],H[J+1],H[J+2],H[J+3]):s<=H[J+2]&&i<=H[J+3]&&l>=H[J+0]&&d>=H[J+1])?(x[Z]=!0,v.push(R[Z])):x[Z]=!1}}},ja.prototype._forEachCell=function(s,i,l,d,f,v,x,C){for(var I=this._convertToCellCoord(s),R=this._convertToCellCoord(i),H=this._convertToCellCoord(l),q=this._convertToCellCoord(d),Z=I;Z<=H;Z++)for(var J=R;J<=q;J++){var Q=this.d*J+Z;if((!C||C(this._convertFromCellCoord(Z),this._convertFromCellCoord(J),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(J+1)))&&f.call(this,s,i,l,d,Q,v,x,C))return}},ja.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},ja.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},ja.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,i=3+this.cells.length+1+1,l=0,d=0;d<this.cells.length;d++)l+=this.cells[d].length;var f=new Int32Array(i+l+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var v=i,x=0;x<s.length;x++){var C=s[x];f[3+x]=v,f.set(C,v),v+=C.length}return f[3+s.length]=v,f.set(this.keys,v),f[3+s.length+1]=v+=this.keys.length,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer};const Ah={};function rn(s,i,l={}){Object.defineProperty(s,"_classRegistryKey",{value:i,writeable:!1}),Ah[i]={klass:s,omit:l.omit||[]}}rn(Object,"Object"),Eu.serialize=function(s,i){const l=s.toArrayBuffer();return i&&i.push(l),{buffer:l}},Eu.deserialize=function(s){return new Eu(s.buffer)},Object.defineProperty(Eu,"name",{value:"Grid"}),rn(Eu,"Grid"),rn(pi,"Color"),rn(Error,"Error"),rn(Nt,"AJAXError"),rn(xo,"ResolvedImage"),rn(Bc,"StylePropertyFunction"),rn(vh,"StyleExpression",{omit:["_evaluator"]}),rn(Sl,"ZoomDependentExpression"),rn(_h,"ZoomConstantExpression"),rn(Ns,"CompoundExpression",{omit:["_evaluate"]});for(const s in mu)Ah[mu[s]._classRegistryKey]||rn(mu[s],`Expression${s}`);function hv(s){return s&&typeof ArrayBuffer!="undefined"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Vc(s){return m.ImageBitmap&&s instanceof m.ImageBitmap}function Hc(s,i){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(hv(s)||Vc(s))return i&&i.push(s),s;if(ArrayBuffer.isView(s)){const l=s;return i&&i.push(l.buffer),l}if(s instanceof m.ImageData)return i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const l=[];for(const d of s)l.push(Hc(d,i));return l}if(typeof s=="object"){const l=s.constructor,d=l._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const f=l.serialize?l.serialize(s,i):{};if(!l.serialize){for(const v in s)s.hasOwnProperty(v)&&(Ah[d].omit.indexOf(v)>=0||(f[v]=Hc(s[v],i)));s instanceof Error&&(f.message=s.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(f.$name=d),f}throw new Error("can't serialize object of type "+typeof s)}function Wc(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||hv(s)||Vc(s)||ArrayBuffer.isView(s)||s instanceof m.ImageData)return s;if(Array.isArray(s))return s.map(Wc);if(typeof s=="object"){const i=s.$name||"Object",{klass:l}=Ah[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(s);const d=Object.create(l.prototype);for(const f of Object.keys(s))f!=="$name"&&(d[f]=Wc(s[f]));return d}throw new Error("can't deserialize object of type "+typeof s)}const Gc=s=>s>=1536&&s<=1791,pv=s=>s>=1872&&s<=1919,Yf=s=>s>=2208&&s<=2303,fv=s=>s>=11904&&s<=12031,Jf=s=>s>=12032&&s<=12255,Qf=s=>s>=12272&&s<=12287,qc=s=>s>=12288&&s<=12351,Mh=s=>s>=12352&&s<=12447,Cu=s=>s>=12448&&s<=12543,Ih=s=>s>=12544&&s<=12591,mv=s=>s>=12704&&s<=12735,gv=s=>s>=12736&&s<=12783,em=s=>s>=12784&&s<=12799,yv=s=>s>=12800&&s<=13055,vv=s=>s>=13056&&s<=13311,_v=s=>s>=13312&&s<=19903,tm=s=>s>=19968&&s<=40959,xv=s=>s>=40960&&s<=42127,bv=s=>s>=42128&&s<=42191,wv=s=>s>=44032&&s<=55215,Ev=s=>s>=63744&&s<=64255,Ph=s=>s>=64336&&s<=65023,Zc=s=>s>=65040&&s<=65055,y=s=>s>=65072&&s<=65103,u=s=>s>=65104&&s<=65135,p=s=>s>=65136&&s<=65279,_=s=>s>=65280&&s<=65519;function E(s){for(const i of s)if(j(i.charCodeAt(0)))return!0;return!1}function T(s){for(const i of s)if(!L(i.charCodeAt(0)))return!1;return!0}function L(s){return!(Gc(s)||pv(s)||Yf(s)||Ph(s)||p(s))}function j(s){return!(s!==746&&s!==747&&(s<4352||!(mv(s)||Ih(s)||y(s)&&!(s>=65097&&s<=65103)||Ev(s)||vv(s)||fv(s)||gv(s)||!(!qc(s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||_v(s)||tm(s)||yv(s)||(i=>i>=12592&&i<=12687)(s)||(i=>i>=43360&&i<=43391)(s)||(i=>i>=55216&&i<=55295)(s)||(i=>i>=4352&&i<=4607)(s)||wv(s)||Mh(s)||Qf(s)||(i=>i>=12688&&i<=12703)(s)||Jf(s)||em(s)||Cu(s)&&s!==12540||!(!_(s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!u(s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||(i=>i>=5120&&i<=5759)(s)||(i=>i>=6320&&i<=6399)(s)||Zc(s)||(i=>i>=19904&&i<=19967)(s)||xv(s)||bv(s))))}function G(s){return!(j(s)||function(i){return!!((l=>l>=128&&l<=255)(i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||(l=>l>=8192&&l<=8303)(i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||(l=>l>=8448&&l<=8527)(i)||(l=>l>=8528&&l<=8591)(i)||(l=>l>=8960&&l<=9215)(i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||(l=>l>=9216&&l<=9279)(i)&&i!==9251||(l=>l>=9280&&l<=9311)(i)||(l=>l>=9312&&l<=9471)(i)||(l=>l>=9632&&l<=9727)(i)||(l=>l>=9728&&l<=9983)(i)&&!(i>=9754&&i<=9759)||(l=>l>=11008&&l<=11263)(i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||qc(i)||Cu(i)||(l=>l>=57344&&l<=63743)(i)||y(i)||u(i)||_(i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}function K(s){return s>=1424&&s<=2303||Ph(s)||p(s)}function X(s,i){return!(!i&&K(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||(l=>l>=6016&&l<=6143)(s))}function te(s){for(const i of s)if(K(i.charCodeAt(0)))return!0;return!1}const ce="deferred",pe="loading",me="loaded";let ge=null,ve="unavailable",le=null;const Ae=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(ve="error"),ge&&ge(s)};function Te(){Re.fire(new xr("pluginStateChange",{pluginStatus:ve,pluginURL:le}))}const Re=new hs,He=function(){return ve},je=function(){if(ve!==ce||!le)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ve=pe,Te(),le&&kn({url:le},s=>{s?Ae(s):(ve=me,Te())})},Ge={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ve===me||Ge.applyArabicShaping!=null,isLoading:()=>ve===pe,setState(s){ve=s.pluginStatus,le=s.pluginURL},isParsed:()=>Ge.applyArabicShaping!=null&&Ge.processBidirectionalText!=null&&Ge.processStyledBidirectionalText!=null,getPluginURL:()=>le};class et{constructor(i,l){this.zoom=i,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return function(l,d){for(const f of l)if(!X(f.charCodeAt(0),d))return!1;return!0}(i,Ge.isLoaded())}}class ot{constructor(i,l){this.property=i,this.value=l,this.expression=function(d,f){if(gh(d))return new Bc(d,f);if(vu(d)){const v=Tl(d,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return typeof d=="string"&&f.type==="color"&&(v=pi.parse(d)),{kind:"constant",evaluate:()=>v}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,l,d){return this.property.possiblyEvaluate(this,i,l,d)}}class ut{constructor(i){this.property=i,this.value=new ot(i,void 0)}transitioned(i,l){return new nt(this.property,this.value,l,tt({},i.transition,this.transition),i.now)}untransitioned(){return new nt(this.property,this.value,null,{},0)}}class Ut{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return An(this._values[i].value.value)}setValue(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new ut(this._values[i].property)),this._values[i].value=new ot(this._values[i].property,l===null?void 0:An(l))}getTransition(i){return An(this._values[i].transition)}setTransition(i,l){this._values.hasOwnProperty(i)||(this._values[i]=new ut(this._values[i].property)),this._values[i].transition=An(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(i[l]=d);const f=this.getTransition(l);f!==void 0&&(i[`${l}-transition`]=f)}return i}transitioned(i,l){const d=new Mt(this._properties);for(const f of Object.keys(this._values))d._values[f]=this._values[f].transitioned(i,l._values[f]);return d}untransitioned(){const i=new Mt(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class nt{constructor(i,l,d,f,v){const x=f.delay||0,C=f.duration||0;v=v||0,this.property=i,this.value=l,this.begin=v+x,this.end=this.begin+C,i.specification.transition&&(f.delay||f.duration)&&(this.prior=d)}possiblyEvaluate(i,l,d){const f=i.now||0,v=this.value.possiblyEvaluate(i,l,d),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(i,l,d);{const C=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,d),v,de(C))}}return v}}class Mt{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,d){const f=new st(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(i,l,d);return f}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class yt{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return An(this._values[i].value)}setValue(i,l){this._values[i]=new ot(this._values[i].property,l===null?void 0:An(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(i[l]=d)}return i}possiblyEvaluate(i,l,d){const f=new st(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(i,l,d);return f}}class Rt{constructor(i,l,d){this.property=i,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,d,f){return this.property.evaluate(this.value,this.parameters,i,l,d,f)}}class st{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class Ye{constructor(i){this.specification=i}possiblyEvaluate(i,l){return i.expression.evaluate(l)}interpolate(i,l,d){const f=Ic[this.specification.type];return f?f(i,l,d):i}}class dt{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,d,f){return new Rt(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},d,f)}:i.expression,l)}interpolate(i,l,d){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Rt(this,{kind:"constant",value:void 0},i.parameters);const f=Ic[this.specification.type];return f?new Rt(this,{kind:"constant",value:f(i.value.value,l.value.value,d)},i.parameters):i}evaluate(i,l,d,f,v,x){return i.kind==="constant"?i.value:i.evaluate(l,d,f,v,x)}}class Dt{constructor(i){this.specification=i}possiblyEvaluate(i,l,d,f){return!!i.expression.evaluate(l,null,{},d,f)}interpolate(){return!1}}class Ot{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new et(0,{});for(const d in i){const f=i[d];f.specification.overridable&&this.overridableProperties.push(d);const v=this.defaultPropertyValues[d]=new ot(f,void 0),x=this.defaultTransitionablePropertyValues[d]=new ut(f);this.defaultTransitioningPropertyValues[d]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=v.possiblyEvaluate(l)}}}function un(s,i){return 256*(s=Le(Math.floor(s),0,255))+Le(Math.floor(i),0,255)}rn(dt,"DataDrivenProperty"),rn(Ye,"DataConstantProperty"),rn(Dt,"ColorRampProperty");const Nn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class on{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Qt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function hn(s,i=1){let l=0,d=0;return{members:s.map(f=>{const v=Nn[f.type].BYTES_PER_ELEMENT,x=l=Hn(l,Math.max(i,v)),C=f.components||1;return d=Math.max(d,v),l+=v*C,{name:f.name,type:f.type,components:C,offset:x}}),size:Hn(l,Math.max(d,i)),alignment:i}}function Hn(s,i){return Math.ceil(s/i)*i}class gn extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const f=2*i;return this.int16[f+0]=l,this.int16[f+1]=d,i}}gn.prototype.bytesPerElement=4,rn(gn,"StructArrayLayout2i4");class lr extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,d)}emplace(i,l,d,f){const v=3*i;return this.int16[v+0]=l,this.int16[v+1]=d,this.int16[v+2]=f,i}}lr.prototype.bytesPerElement=6,rn(lr,"StructArrayLayout3i6");class fr extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d,f)}emplace(i,l,d,f,v){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=d,this.int16[x+2]=f,this.int16[x+3]=v,i}}fr.prototype.bytesPerElement=8,rn(fr,"StructArrayLayout4i8");class zr extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v,x,C){const I=this.length;return this.resize(I+1),this.emplace(I,i,l,d,f,v,x,C)}emplace(i,l,d,f,v,x,C,I){const R=6*i,H=12*i,q=3*i;return this.int16[R+0]=l,this.int16[R+1]=d,this.uint8[H+4]=f,this.uint8[H+5]=v,this.uint8[H+6]=x,this.uint8[H+7]=C,this.float32[q+2]=I,i}}zr.prototype.bytesPerElement=12,rn(zr,"StructArrayLayout2i4ub1f12");class Mr extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d,f)}emplace(i,l,d,f,v){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=d,this.float32[x+2]=f,this.float32[x+3]=v,i}}Mr.prototype.bytesPerElement=16,rn(Mr,"StructArrayLayout4f16");class wi extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,f,v)}emplace(i,l,d,f,v,x){const C=6*i,I=3*i;return this.uint16[C+0]=l,this.uint16[C+1]=d,this.uint16[C+2]=f,this.uint16[C+3]=v,this.float32[I+2]=x,i}}wi.prototype.bytesPerElement=12,rn(wi,"StructArrayLayout4ui1f12");class Do extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d,f)}emplace(i,l,d,f,v){const x=4*i;return this.uint16[x+0]=l,this.uint16[x+1]=d,this.uint16[x+2]=f,this.uint16[x+3]=v,i}}Do.prototype.bytesPerElement=8,rn(Do,"StructArrayLayout4ui8");class xa extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v,x){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,d,f,v,x)}emplace(i,l,d,f,v,x,C){const I=6*i;return this.int16[I+0]=l,this.int16[I+1]=d,this.int16[I+2]=f,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=C,i}}xa.prototype.bytesPerElement=12,rn(xa,"StructArrayLayout6i12");class ys extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v,x,C,I,R,H,q,Z){const J=this.length;return this.resize(J+1),this.emplace(J,i,l,d,f,v,x,C,I,R,H,q,Z)}emplace(i,l,d,f,v,x,C,I,R,H,q,Z,J){const Q=12*i;return this.int16[Q+0]=l,this.int16[Q+1]=d,this.int16[Q+2]=f,this.int16[Q+3]=v,this.uint16[Q+4]=x,this.uint16[Q+5]=C,this.uint16[Q+6]=I,this.uint16[Q+7]=R,this.int16[Q+8]=H,this.int16[Q+9]=q,this.int16[Q+10]=Z,this.int16[Q+11]=J,i}}ys.prototype.bytesPerElement=24,rn(ys,"StructArrayLayout4i4ui4i24");class Xr extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v,x){const C=this.length;return this.resize(C+1),this.emplace(C,i,l,d,f,v,x)}emplace(i,l,d,f,v,x,C){const I=10*i,R=5*i;return this.int16[I+0]=l,this.int16[I+1]=d,this.int16[I+2]=f,this.float32[R+2]=v,this.float32[R+3]=x,this.float32[R+4]=C,i}}Xr.prototype.bytesPerElement=20,rn(Xr,"StructArrayLayout3i3f20");class Ir extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}Ir.prototype.bytesPerElement=4,rn(Ir,"StructArrayLayout1ul4");class nr extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v,x,C,I,R,H,q,Z,J){const Q=this.length;return this.resize(Q+1),this.emplace(Q,i,l,d,f,v,x,C,I,R,H,q,Z,J)}emplace(i,l,d,f,v,x,C,I,R,H,q,Z,J,Q){const oe=20*i,he=10*i;return this.int16[oe+0]=l,this.int16[oe+1]=d,this.int16[oe+2]=f,this.int16[oe+3]=v,this.int16[oe+4]=x,this.float32[he+3]=C,this.float32[he+4]=I,this.float32[he+5]=R,this.float32[he+6]=H,this.int16[oe+14]=q,this.uint32[he+8]=Z,this.uint16[oe+18]=J,this.uint16[oe+19]=Q,i}}nr.prototype.bytesPerElement=40,rn(nr,"StructArrayLayout5i4f1i1ul2ui40");class li extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v,x,C){const I=this.length;return this.resize(I+1),this.emplace(I,i,l,d,f,v,x,C)}emplace(i,l,d,f,v,x,C,I){const R=8*i;return this.int16[R+0]=l,this.int16[R+1]=d,this.int16[R+2]=f,this.int16[R+4]=v,this.int16[R+5]=x,this.int16[R+6]=C,this.int16[R+7]=I,i}}li.prototype.bytesPerElement=16,rn(li,"StructArrayLayout3i2i2i16");class so extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,f,v)}emplace(i,l,d,f,v,x){const C=4*i,I=8*i;return this.float32[C+0]=l,this.float32[C+1]=d,this.float32[C+2]=f,this.int16[I+6]=v,this.int16[I+7]=x,i}}so.prototype.bytesPerElement=16,rn(so,"StructArrayLayout2f1f2i16");class Hr extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d,f)}emplace(i,l,d,f,v){const x=12*i,C=3*i;return this.uint8[x+0]=l,this.uint8[x+1]=d,this.float32[C+1]=f,this.float32[C+2]=v,i}}Hr.prototype.bytesPerElement=12,rn(Hr,"StructArrayLayout2ub2f12");class lo extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,d)}emplace(i,l,d,f){const v=3*i;return this.float32[v+0]=l,this.float32[v+1]=d,this.float32[v+2]=f,i}}lo.prototype.bytesPerElement=12,rn(lo,"StructArrayLayout3f12");class uo extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d){const f=this.length;return this.resize(f+1),this.emplace(f,i,l,d)}emplace(i,l,d,f){const v=3*i;return this.uint16[v+0]=l,this.uint16[v+1]=d,this.uint16[v+2]=f,i}}uo.prototype.bytesPerElement=6,rn(uo,"StructArrayLayout3ui6");class Vs extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v,x,C,I,R,H,q,Z,J,Q,oe,he,Ce,Ne,we,Be,Ve){const $e=this.length;return this.resize($e+1),this.emplace($e,i,l,d,f,v,x,C,I,R,H,q,Z,J,Q,oe,he,Ce,Ne,we,Be,Ve)}emplace(i,l,d,f,v,x,C,I,R,H,q,Z,J,Q,oe,he,Ce,Ne,we,Be,Ve,$e){const lt=30*i,it=15*i,St=60*i;return this.int16[lt+0]=l,this.int16[lt+1]=d,this.int16[lt+2]=f,this.float32[it+2]=v,this.float32[it+3]=x,this.uint16[lt+8]=C,this.uint16[lt+9]=I,this.uint32[it+5]=R,this.uint32[it+6]=H,this.uint32[it+7]=q,this.uint16[lt+16]=Z,this.uint16[lt+17]=J,this.uint16[lt+18]=Q,this.float32[it+10]=oe,this.float32[it+11]=he,this.uint8[St+48]=Ce,this.uint8[St+49]=Ne,this.uint8[St+50]=we,this.uint32[it+13]=Be,this.int16[lt+28]=Ve,this.uint8[St+58]=$e,i}}Vs.prototype.bytesPerElement=60,rn(Vs,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Su extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v,x,C,I,R,H,q,Z,J,Q,oe,he,Ce,Ne,we,Be,Ve,$e,lt,it,St,Bt,mt,At,It,Lt){const Ft=this.length;return this.resize(Ft+1),this.emplace(Ft,i,l,d,f,v,x,C,I,R,H,q,Z,J,Q,oe,he,Ce,Ne,we,Be,Ve,$e,lt,it,St,Bt,mt,At,It,Lt)}emplace(i,l,d,f,v,x,C,I,R,H,q,Z,J,Q,oe,he,Ce,Ne,we,Be,Ve,$e,lt,it,St,Bt,mt,At,It,Lt,Ft){const gt=38*i,Ht=19*i;return this.int16[gt+0]=l,this.int16[gt+1]=d,this.int16[gt+2]=f,this.float32[Ht+2]=v,this.float32[Ht+3]=x,this.int16[gt+8]=C,this.int16[gt+9]=I,this.int16[gt+10]=R,this.int16[gt+11]=H,this.int16[gt+12]=q,this.int16[gt+13]=Z,this.uint16[gt+14]=J,this.uint16[gt+15]=Q,this.uint16[gt+16]=oe,this.uint16[gt+17]=he,this.uint16[gt+18]=Ce,this.uint16[gt+19]=Ne,this.uint16[gt+20]=we,this.uint16[gt+21]=Be,this.uint16[gt+22]=Ve,this.uint16[gt+23]=$e,this.uint16[gt+24]=lt,this.uint16[gt+25]=it,this.uint16[gt+26]=St,this.uint16[gt+27]=Bt,this.uint16[gt+28]=mt,this.uint32[Ht+15]=At,this.float32[Ht+16]=It,this.float32[Ht+17]=Lt,this.float32[Ht+18]=Ft,i}}Su.prototype.bytesPerElement=76,rn(Su,"StructArrayLayout3i2f6i15ui1ul3f76");class Go extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}Go.prototype.bytesPerElement=4,rn(Go,"StructArrayLayout1f4");class ra extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,d,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,d,f,v)}emplace(i,l,d,f,v,x){const C=5*i;return this.float32[C+0]=l,this.float32[C+1]=d,this.float32[C+2]=f,this.float32[C+3]=v,this.float32[C+4]=x,i}}ra.prototype.bytesPerElement=20,rn(ra,"StructArrayLayout5f20");class vs extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,d,f){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,d,f)}emplace(i,l,d,f,v){const x=6*i;return this.uint32[3*i+0]=l,this.uint16[x+2]=d,this.uint16[x+3]=f,this.uint16[x+4]=v,i}}vs.prototype.bytesPerElement=12,rn(vs,"StructArrayLayout1ul3ui12");class Hs extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const f=2*i;return this.uint16[f+0]=l,this.uint16[f+1]=d,i}}Hs.prototype.bytesPerElement=4,rn(Hs,"StructArrayLayout2ui4");class Ws extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}Ws.prototype.bytesPerElement=2,rn(Ws,"StructArrayLayout1ui2");class Tu extends Qt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const d=this.length;return this.resize(d+1),this.emplace(d,i,l)}emplace(i,l,d){const f=2*i;return this.float32[f+0]=l,this.float32[f+1]=d,i}}Tu.prototype.bytesPerElement=8,rn(Tu,"StructArrayLayout2f8");class Wk extends on{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Wk.prototype.size=40;class Y1 extends nr{get(i){return new Wk(this,i)}}rn(Y1,"CollisionBoxArray");class Gk extends on{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}Gk.prototype.size=60;class qk extends Vs{get(i){return new Gk(this,i)}}rn(qk,"PlacedSymbolArray");class Zk extends on{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Zk.prototype.size=76;class Xk extends Su{get(i){return new Zk(this,i)}}rn(Xk,"SymbolInstanceArray");class Kk extends Go{getoffsetX(i){return this.float32[1*i+0]}}rn(Kk,"GlyphOffsetArray");class Yk extends gn{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}rn(Yk,"SymbolLineVertexArray");class Jk extends on{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Jk.prototype.size=12;class Qk extends vs{get(i){return new Jk(this,i)}}rn(Qk,"FeatureIndexArray");class e2 extends Hs{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}rn(e2,"FillExtrusionCentroidArray");const vF=hn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),_F=hn([{name:"a_dash",components:4,type:"Uint16"}]);var Xc={},xF={get exports(){return Xc},set exports(s){Xc=s}},J1={};({get exports(){return J1},set exports(s){J1=s}}).exports=function(s,i){var l,d,f,v,x,C,I,R;for(d=s.length-(l=3&s.length),f=i,x=3432918353,C=461845907,R=0;R<d;)I=255&s.charCodeAt(R)|(255&s.charCodeAt(++R))<<8|(255&s.charCodeAt(++R))<<16|(255&s.charCodeAt(++R))<<24,++R,f=27492+(65535&(v=5*(65535&(f=(f^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(I=0,l){case 3:I^=(255&s.charCodeAt(R+2))<<16;case 2:I^=(255&s.charCodeAt(R+1))<<8;case 1:f^=I=(65535&(I=(I=(65535&(I^=255&s.charCodeAt(R)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295}return f^=s.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Q1={};({get exports(){return Q1},set exports(s){Q1=s}}).exports=function(s,i){for(var l,d=s.length,f=i^d,v=0;d>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(v)|(255&s.charCodeAt(++v))<<8|(255&s.charCodeAt(++v))<<16|(255&s.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:f^=(255&s.charCodeAt(v+2))<<16;case 2:f^=(255&s.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&s.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var t2=J1,bF=Q1;xF.exports=t2,Xc.murmur3=t2,Xc.murmur2=bF;class Cv{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,d,f){this.ids.push(n2(i)),this.positions.push(l,d,f)}getPositions(i){const l=n2(i);let d=0,f=this.ids.length-1;for(;d<f;){const x=d+f>>1;this.ids[x]>=l?f=x:d=x+1}const v=[];for(;this.ids[d]===l;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(i,l){const d=new Float64Array(i.ids),f=new Uint32Array(i.positions);return eb(d,f,0,d.length-1),l&&l.push(d.buffer,f.buffer),{ids:d,positions:f}}static deserialize(i){const l=new Cv;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function n2(s){const i=+s;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:Xc(String(s))}function eb(s,i,l,d){for(;l<d;){const f=s[l+d>>1];let v=l-1,x=d+1;for(;;){do v++;while(s[v]<f);do x--;while(s[x]>f);if(v>=x)break;Sv(s,v,x),Sv(i,3*v,3*x),Sv(i,3*v+1,3*x+1),Sv(i,3*v+2,3*x+2)}x-l<d-x?(eb(s,i,l,x),l=x+1):(eb(s,i,x+1,d),d=x)}}function Sv(s,i,l){const d=s[i];s[i]=s[l],s[l]=d}rn(Cv,"FeaturePositionMap");class kl{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,l),this.initialized=!0),!!this.location}}class Tv extends kl{constructor(i){super(i),this.current=0}set(i,l,d){this.fetchUniformLocation(i,l)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class r2 extends kl{constructor(i){super(i),this.current=[0,0,0,0]}set(i,l,d){this.fetchUniformLocation(i,l)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class i2 extends kl{constructor(i){super(i),this.current=pi.transparent}set(i,l,d){this.fetchUniformLocation(i,l)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const wF=new Float32Array(16),EF=new Float32Array(9),CF=new Float32Array(4);function tb(s){return[un(255*s.r,255*s.g),un(255*s.b,255*s.a)]}class nm{constructor(i,l,d){this.value=i,this.uniformNames=l.map(f=>`u_${f}`),this.type=d}setUniform(i,l,d,f,v){l.set(i,v,f.constantOr(this.value))}getBinding(i,l){return this.type==="color"?new i2(i):new Tv(i)}}class Dh{constructor(i,l){this.uniformNames=l.map(d=>`u_${d}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,l,d,f,v){const x=v==="u_pattern"||v==="u_dash"?this.pattern:v==="u_pixel_ratio"?this.pixelRatio:null;x&&l.set(i,v,x)}getBinding(i,l){return l==="u_pattern"||l==="u_dash"?new r2(i):new Tv(i)}}class Al{constructor(i,l,d,f){this.expression=i,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(i,l,d,f,v,x){const C=this.paintVertexArray.length,I=this.expression.evaluate(new et(0),l,{},v,f,x);this.paintVertexArray.resize(i),this._setPaintValue(C,i,I)}updatePaintArray(i,l,d,f,v){const x=this.expression.evaluate({zoom:0},d,f,void 0,v);this._setPaintValue(i,l,x)}_setPaintValue(i,l,d){if(this.type==="color"){const f=tb(d);for(let v=i;v<l;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=i;f<l;f++)this.paintVertexArray.emplace(f,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _s{constructor(i,l,d,f,v,x){this.expression=i,this.uniformNames=l.map(C=>`u_${C}_t`),this.type=d,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(C=>({name:`a_${C}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,d,f,v,x){const C=this.expression.evaluate(new et(this.zoom),l,{},v,f,x),I=this.expression.evaluate(new et(this.zoom+1),l,{},v,f,x),R=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(R,i,C,I)}updatePaintArray(i,l,d,f,v){const x=this.expression.evaluate({zoom:this.zoom},d,f,void 0,v),C=this.expression.evaluate({zoom:this.zoom+1},d,f,void 0,v);this._setPaintValue(i,l,x,C)}_setPaintValue(i,l,d,f){if(this.type==="color"){const v=tb(d),x=tb(f);for(let C=i;C<l;C++)this.paintVertexArray.emplace(C,v[0],v[1],x[0],x[1])}else{for(let v=i;v<l;v++)this.paintVertexArray.emplace(v,d,f);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l,d,f,v){const x=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,C=Le(this.expression.interpolationFactor(x,this.zoom,this.zoom+1),0,1);l.set(i,v,C)}getBinding(i,l){return new Tv(i)}}class ku{constructor(i,l,d,f,v){this.expression=i,this.layerId=v,this.paintVertexAttributes=(d==="array"?_F:vF).members;for(let x=0;x<l.length;++x);this.paintVertexArray=new f}populatePaintArray(i,l,d){const f=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(f,i,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(i,l,d,f,v,x){this._setPaintValues(i,l,d.patterns&&d.patterns[this.layerId],x)}_setPaintValues(i,l,d,f){if(!f||!d)return;const v=f[d];if(!v)return;const{tl:x,br:C,pixelRatio:I}=v;for(let R=i;R<l;R++)this.paintVertexArray.emplace(R,x[0],x[1],C[0],C[1],I)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Au{constructor(i,l,d=()=>!0){this.binders={},this._buffers=[];const f=[];for(const v in i.paint._values){if(!d(v))continue;const x=i.paint.get(v);if(!(x instanceof Rt&&yu(x.property.specification)))continue;const C=TF(v,i.type),I=x.value,R=x.property.specification.type,H=!!x.property.useIntegerZoom,q=v==="line-dasharray"||v.endsWith("pattern"),Z=v==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||Z)if(I.kind==="source"||Z||q){const J=o2(v,R,"source");this.binders[v]=q?new ku(I,C,R,J,i.id):new Al(I,C,R,J),f.push(`/a_${v}`)}else{const J=o2(v,R,"composite");this.binders[v]=new _s(I,C,R,H,l,J),f.push(`/z_${v}`)}else this.binders[v]=q?new Dh(I.value,C):new nm(I.value,C,R),f.push(`/u_${v}`)}this.cacheKey=f.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof Al||l instanceof _s?l.maxValue:0}populatePaintArrays(i,l,d,f,v,x){for(const C in this.binders){const I=this.binders[C];(I instanceof Al||I instanceof _s||I instanceof ku)&&I.populatePaintArray(i,l,d,f,v,x)}}setConstantPatternPositions(i){for(const l in this.binders){const d=this.binders[l];d instanceof Dh&&d.setConstantPatternPositions(i)}}updatePaintArrays(i,l,d,f,v,x){let C=!1;for(const I in i){const R=l.getPositions(I);for(const H of R){const q=d.feature(H.index);for(const Z in this.binders){const J=this.binders[Z];if((J instanceof Al||J instanceof _s||J instanceof ku)&&J.expression.isStateDependent===!0){const Q=f.paint.get(Z);J.expression=Q.value,J.updatePaintArray(H.start,H.end,q,i[I],v,x),C=!0}}}}return C}defines(){const i=[];for(const l in this.binders){const d=this.binders[l];(d instanceof nm||d instanceof Dh)&&i.push(...d.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof Al||d instanceof _s||d instanceof ku)for(let f=0;f<d.paintVertexAttributes.length;f++)i.push(d.paintVertexAttributes[f].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof nm||d instanceof Dh||d instanceof _s)for(const f of d.uniformNames)i.push(f)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const l=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof nm||f instanceof Dh||f instanceof _s)for(const v of f.uniformNames)l.push({name:v,property:d,binding:f.getBinding(i,v)})}return l}setUniforms(i,l,d,f,v){for(const{name:x,property:C,binding:I}of d)this.binders[C].setUniform(i,I,v,f.get(C),x)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const l=this.binders[i];(l instanceof Al||l instanceof _s||l instanceof ku)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(i){for(const l in this.binders){const d=this.binders[l];(d instanceof Al||d instanceof _s||d instanceof ku)&&d.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof Al||l instanceof _s||l instanceof ku)&&l.destroy()}}}class Kc{constructor(i,l,d=()=>!0){this.programConfigurations={};for(const f of i)this.programConfigurations[f.id]=new Au(f,l,d);this.needsUpload=!1,this._featureMap=new Cv,this._bufferOffset=0}populatePaintArrays(i,l,d,f,v,x,C){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(i,l,f,v,x,C);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,d,f,v){for(const x of d)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(i,this._featureMap,l,x,f,v)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const SF={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function TF(s,i){return SF[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}const kF={"line-pattern":{source:wi,composite:wi},"fill-pattern":{source:wi,composite:wi},"fill-extrusion-pattern":{source:wi,composite:wi},"line-dasharray":{source:Do,composite:Do}},AF={color:{source:Tu,composite:Mr},number:{source:Go,composite:Tu}};function o2(s,i,l){const d=kF[s];return d&&d[l]||AF[i][l]}rn(nm,"ConstantBinder"),rn(Dh,"PatternConstantBinder"),rn(Al,"SourceExpressionBinder"),rn(ku,"PatternCompositeBinder"),rn(_s,"CompositeExpressionBinder"),rn(Au,"ProgramConfiguration",{omit:["_buffers"]}),rn(Kc,"ProgramConfigurationSet");const kv="-transition";class xs extends hs{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new yt(l.layout)),l.paint)){this._transitionablePaint=new Ut(l.paint);for(const d in i.paint)this.setPaintProperty(d,i.paint[d],{validate:!1});for(const d in i.layout)this.setLayoutProperty(d,i.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new st(l.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,l,d={}){l!=null&&this._validate(cv,`layers.${this.id}.layout.${i}`,i,l,d)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return ln(i,kv)?this._transitionablePaint.getTransition(i.slice(0,-kv.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,d={}){if(l!=null&&this._validate(K1,`layers.${this.id}.paint.${i}`,i,l,d))return!1;if(ln(i,kv))return this._transitionablePaint.setTransition(i.slice(0,-kv.length),l||void 0),!1;{const f=this._transitionablePaint._values[i],v=f.value.isDataDriven(),x=f.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const C=this._transitionablePaint._values[i].value,I=C.isDataDriven(),R=ln(i,"pattern")||i==="line-dasharray";return I||v||R||this._handleOverridablePaintPropertyUpdate(i,x,C)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,l,d){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),fn(i,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(i,l,d,f,v={}){return(!v||v.validate!==!1)&&dv(this,i.call(uv,{key:l,layerType:this.type,objectKey:d,value:f,styleSpec:Ct,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Rt&&yu(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=bh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const MF=hn([{name:"a_pos",components:2,type:"Int16"}],4),IF=hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ei{constructor(i=[]){this.segments=i}prepareSegment(i,l,d,f){let v=this.segments[this.segments.length-1];return i>Ei.MAX_VERTEX_ARRAY_LENGTH&&Xe(`Max vertices per segment is ${Ei.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!v||v.vertexLength+i>Ei.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:l.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,d,f){return new Ei([{vertexOffset:i,primitiveOffset:l,vertexLength:d,primitiveLength:f,vaos:{},sortKey:0}])}}Ei.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rn(Ei,"SegmentVector");var Tn=8192;class Mu{constructor(i,l){i&&(l?this.setSouthWest(i).setNorthEast(l):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof tr?new tr(i.lng,i.lat):tr.convert(i),this}setSouthWest(i){return this._sw=i instanceof tr?new tr(i.lng,i.lat):tr.convert(i),this}extend(i){const l=this._sw,d=this._ne;let f,v;if(i instanceof tr)f=i,v=i;else{if(!(i instanceof Mu))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Mu.convert(i)):this.extend(tr.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(tr.convert(i)):this;if(f=i._sw,v=i._ne,!f||!v)return this}return l||d?(l.lng=Math.min(f.lng,l.lng),l.lat=Math.min(f.lat,l.lat),d.lng=Math.max(v.lng,d.lng),d.lat=Math.max(v.lat,d.lat)):(this._sw=new tr(f.lng,f.lat),this._ne=new tr(v.lng,v.lat)),this}getCenter(){return new tr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new tr(this.getWest(),this.getNorth())}getSouthEast(){return new tr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:l,lat:d}=tr.convert(i);let f=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(i){return!i||i instanceof Mu?i:new Mu(i)}}var Av=1e-6,ia=typeof Float32Array!="undefined"?Float32Array:Array;function a2(){var s=new ia(9);return ia!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function s2(s,i,l){var d=i[0],f=i[1],v=i[2],x=i[3],C=i[4],I=i[5],R=i[6],H=i[7],q=i[8],Z=l[0],J=l[1],Q=l[2],oe=l[3],he=l[4],Ce=l[5],Ne=l[6],we=l[7],Be=l[8];return s[0]=Z*d+J*x+Q*R,s[1]=Z*f+J*C+Q*H,s[2]=Z*v+J*I+Q*q,s[3]=oe*d+he*x+Ce*R,s[4]=oe*f+he*C+Ce*H,s[5]=oe*v+he*I+Ce*q,s[6]=Ne*d+we*x+Be*R,s[7]=Ne*f+we*C+Be*H,s[8]=Ne*v+we*I+Be*q,s}function bs(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function nb(s,i){var l=i[0],d=i[1],f=i[2],v=i[3],x=i[4],C=i[5],I=i[6],R=i[7],H=i[8],q=i[9],Z=i[10],J=i[11],Q=i[12],oe=i[13],he=i[14],Ce=i[15],Ne=l*C-d*x,we=l*I-f*x,Be=l*R-v*x,Ve=d*I-f*C,$e=d*R-v*C,lt=f*R-v*I,it=H*oe-q*Q,St=H*he-Z*Q,Bt=H*Ce-J*Q,mt=q*he-Z*oe,At=q*Ce-J*oe,It=Z*Ce-J*he,Lt=Ne*It-we*At+Be*mt+Ve*Bt-$e*St+lt*it;return Lt?(s[0]=(C*It-I*At+R*mt)*(Lt=1/Lt),s[1]=(f*At-d*It-v*mt)*Lt,s[2]=(oe*lt-he*$e+Ce*Ve)*Lt,s[3]=(Z*$e-q*lt-J*Ve)*Lt,s[4]=(I*Bt-x*It-R*St)*Lt,s[5]=(l*It-f*Bt+v*St)*Lt,s[6]=(he*Be-Q*lt-Ce*we)*Lt,s[7]=(H*lt-Z*Be+J*we)*Lt,s[8]=(x*At-C*Bt+R*it)*Lt,s[9]=(d*Bt-l*At-v*it)*Lt,s[10]=(Q*$e-oe*Be+Ce*Ne)*Lt,s[11]=(q*Be-H*$e-J*Ne)*Lt,s[12]=(C*St-x*mt-I*it)*Lt,s[13]=(l*mt-d*St+f*it)*Lt,s[14]=(oe*we-Q*Ve-he*Ne)*Lt,s[15]=(H*Ve-q*we+Z*Ne)*Lt,s):null}function Yc(s,i,l){var d=i[0],f=i[1],v=i[2],x=i[3],C=i[4],I=i[5],R=i[6],H=i[7],q=i[8],Z=i[9],J=i[10],Q=i[11],oe=i[12],he=i[13],Ce=i[14],Ne=i[15],we=l[0],Be=l[1],Ve=l[2],$e=l[3];return s[0]=we*d+Be*C+Ve*q+$e*oe,s[1]=we*f+Be*I+Ve*Z+$e*he,s[2]=we*v+Be*R+Ve*J+$e*Ce,s[3]=we*x+Be*H+Ve*Q+$e*Ne,s[4]=(we=l[4])*d+(Be=l[5])*C+(Ve=l[6])*q+($e=l[7])*oe,s[5]=we*f+Be*I+Ve*Z+$e*he,s[6]=we*v+Be*R+Ve*J+$e*Ce,s[7]=we*x+Be*H+Ve*Q+$e*Ne,s[8]=(we=l[8])*d+(Be=l[9])*C+(Ve=l[10])*q+($e=l[11])*oe,s[9]=we*f+Be*I+Ve*Z+$e*he,s[10]=we*v+Be*R+Ve*J+$e*Ce,s[11]=we*x+Be*H+Ve*Q+$e*Ne,s[12]=(we=l[12])*d+(Be=l[13])*C+(Ve=l[14])*q+($e=l[15])*oe,s[13]=we*f+Be*I+Ve*Z+$e*he,s[14]=we*v+Be*R+Ve*J+$e*Ce,s[15]=we*x+Be*H+Ve*Q+$e*Ne,s}function rm(s,i,l){var d,f,v,x,C,I,R,H,q,Z,J,Q,oe=l[0],he=l[1],Ce=l[2];return i===s?(s[12]=i[0]*oe+i[4]*he+i[8]*Ce+i[12],s[13]=i[1]*oe+i[5]*he+i[9]*Ce+i[13],s[14]=i[2]*oe+i[6]*he+i[10]*Ce+i[14],s[15]=i[3]*oe+i[7]*he+i[11]*Ce+i[15]):(f=i[1],v=i[2],x=i[3],C=i[4],I=i[5],R=i[6],H=i[7],q=i[8],Z=i[9],J=i[10],Q=i[11],s[0]=d=i[0],s[1]=f,s[2]=v,s[3]=x,s[4]=C,s[5]=I,s[6]=R,s[7]=H,s[8]=q,s[9]=Z,s[10]=J,s[11]=Q,s[12]=d*oe+C*he+q*Ce+i[12],s[13]=f*oe+I*he+Z*Ce+i[13],s[14]=v*oe+R*he+J*Ce+i[14],s[15]=x*oe+H*he+Q*Ce+i[15]),s}function Jc(s,i,l){var d=l[0],f=l[1],v=l[2];return s[0]=i[0]*d,s[1]=i[1]*d,s[2]=i[2]*d,s[3]=i[3]*d,s[4]=i[4]*f,s[5]=i[5]*f,s[6]=i[6]*f,s[7]=i[7]*f,s[8]=i[8]*v,s[9]=i[9]*v,s[10]=i[10]*v,s[11]=i[11]*v,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s}function rb(s,i,l){var d=Math.sin(l),f=Math.cos(l),v=i[4],x=i[5],C=i[6],I=i[7],R=i[8],H=i[9],q=i[10],Z=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=v*f+R*d,s[5]=x*f+H*d,s[6]=C*f+q*d,s[7]=I*f+Z*d,s[8]=R*f-v*d,s[9]=H*f-x*d,s[10]=q*f-C*d,s[11]=Z*f-I*d,s}function Mv(s,i,l){var d=Math.sin(l),f=Math.cos(l),v=i[0],x=i[1],C=i[2],I=i[3],R=i[8],H=i[9],q=i[10],Z=i[11];return i!==s&&(s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=v*f-R*d,s[1]=x*f-H*d,s[2]=C*f-q*d,s[3]=I*f-Z*d,s[8]=v*d+R*f,s[9]=x*d+H*f,s[10]=C*d+q*f,s[11]=I*d+Z*f,s}function l2(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function u2(s,i,l){var d,f,v,x=l[0],C=l[1],I=l[2],R=Math.hypot(x,C,I);return R<Av?null:(x*=R=1/R,C*=R,I*=R,d=Math.sin(i),f=Math.cos(i),s[0]=x*x*(v=1-f)+f,s[1]=C*x*v+I*d,s[2]=I*x*v-C*d,s[3]=0,s[4]=x*C*v-I*d,s[5]=C*C*v+f,s[6]=I*C*v+x*d,s[7]=0,s[8]=x*I*v+C*d,s[9]=C*I*v-x*d,s[10]=I*I*v+f,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var PF=Yc;function ib(){var s=new ia(3);return ia!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function c2(s){var i=new ia(3);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i}function im(s){return Math.hypot(s[0],s[1],s[2])}function Rh(s,i,l){var d=new ia(3);return d[0]=s,d[1]=i,d[2]=l,d}function Ml(s,i,l){return s[0]=i[0]+l[0],s[1]=i[1]+l[1],s[2]=i[2]+l[2],s}function ob(s,i,l){return s[0]=i[0]-l[0],s[1]=i[1]-l[1],s[2]=i[2]-l[2],s}function d2(s,i,l){return s[0]=i[0]*l[0],s[1]=i[1]*l[1],s[2]=i[2]*l[2],s}function om(s,i,l){return s[0]=Math.min(i[0],l[0]),s[1]=Math.min(i[1],l[1]),s[2]=Math.min(i[2],l[2]),s}function am(s,i,l){return s[0]=Math.max(i[0],l[0]),s[1]=Math.max(i[1],l[1]),s[2]=Math.max(i[2],l[2]),s}function ba(s,i,l){return s[0]=i[0]*l,s[1]=i[1]*l,s[2]=i[2]*l,s}function sm(s,i,l,d){return s[0]=i[0]+l[0]*d,s[1]=i[1]+l[1]*d,s[2]=i[2]+l[2]*d,s}function Ro(s,i){var l=i[0],d=i[1],f=i[2],v=l*l+d*d+f*f;return v>0&&(v=1/Math.sqrt(v)),s[0]=i[0]*v,s[1]=i[1]*v,s[2]=i[2]*v,s}function Va(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]}function ab(s,i,l){var d=i[0],f=i[1],v=i[2],x=l[0],C=l[1],I=l[2];return s[0]=f*I-v*C,s[1]=v*x-d*I,s[2]=d*C-f*x,s}function fi(s,i,l){var d=i[0],f=i[1],v=i[2],x=l[3]*d+l[7]*f+l[11]*v+l[15];return s[0]=(l[0]*d+l[4]*f+l[8]*v+l[12])/(x=x||1),s[1]=(l[1]*d+l[5]*f+l[9]*v+l[13])/x,s[2]=(l[2]*d+l[6]*f+l[10]*v+l[14])/x,s}function h2(s,i,l){var d=l[0],f=l[1],v=l[2],x=i[0],C=i[1],I=i[2],R=f*I-v*C,H=v*x-d*I,q=d*C-f*x,Z=f*q-v*H,J=v*R-d*q,Q=d*H-f*R,oe=2*l[3];return H*=oe,q*=oe,J*=2,Q*=2,s[0]=x+(R*=oe)+(Z*=2),s[1]=C+H+J,s[2]=I+q+Q,s}var lm,ws=ob,DF=d2,RF=im;function p2(s,i,l){return s[0]=i[0]*l,s[1]=i[1]*l,s[2]=i[2]*l,s[3]=i[3]*l,s}function f2(s,i){var l=i[0],d=i[1],f=i[2],v=i[3],x=l*l+d*d+f*f+v*v;return x>0&&(x=1/Math.sqrt(x)),s[0]=l*x,s[1]=d*x,s[2]=f*x,s[3]=v*x,s}function Qc(s,i,l){var d=i[0],f=i[1],v=i[2],x=i[3];return s[0]=l[0]*d+l[4]*f+l[8]*v+l[12]*x,s[1]=l[1]*d+l[5]*f+l[9]*v+l[13]*x,s[2]=l[2]*d+l[6]*f+l[10]*v+l[14]*x,s[3]=l[3]*d+l[7]*f+l[11]*v+l[15]*x,s}function m2(){var s=new ia(4);return ia!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function g2(s){return s[0]=0,s[1]=0,s[2]=0,s[3]=1,s}function y2(s,i,l){l*=.5;var d=i[0],f=i[1],v=i[2],x=i[3],C=Math.sin(l),I=Math.cos(l);return s[0]=d*I+x*C,s[1]=f*I+v*C,s[2]=v*I-f*C,s[3]=x*I-d*C,s}function v2(s,i,l){l*=.5;var d=i[0],f=i[1],v=i[2],x=i[3],C=Math.sin(l),I=Math.cos(l);return s[0]=d*I-v*C,s[1]=f*I+x*C,s[2]=v*I+d*C,s[3]=x*I-f*C,s}ib(),lm=new ia(4),ia!=Float32Array&&(lm[0]=0,lm[1]=0,lm[2]=0,lm[3]=0);var LF=f2;ib(),Rh(1,0,0),Rh(0,1,0),m2(),m2(),a2();const OF=hn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:_2}=OF,x2=hn([{name:"a_pos_3",components:3,type:"Int16"}]);var um=hn([{name:"a_pos",type:"Int16",components:2}]);class sb{constructor(i,l){this.pos=i,this.dir=l}intersectsPlane(i,l,d){const f=Va(l,this.dir);if(Math.abs(f)<1e-6)return!1;const v=((i[0]-this.pos[0])*l[0]+(i[1]-this.pos[1])*l[1]+(i[2]-this.pos[2])*l[2])/f;return d[0]=this.pos[0]+this.dir[0]*v,d[1]=this.pos[1]+this.dir[1]*v,d[2]=this.pos[2]+this.dir[2]*v,!0}closestPointOnSphere(i,l,d){if(function(J,Q){var oe=J[0],he=J[1],Ce=J[2],Ne=Q[0],we=Q[1],Be=Q[2];return Math.abs(oe-Ne)<=Av*Math.max(1,Math.abs(oe),Math.abs(Ne))&&Math.abs(he-we)<=Av*Math.max(1,Math.abs(he),Math.abs(we))&&Math.abs(Ce-Be)<=Av*Math.max(1,Math.abs(Ce),Math.abs(Be))}(this.pos,i)||l===0)return d[0]=d[1]=d[2]=0,!1;const[f,v,x]=this.dir,C=this.pos[0]-i[0],I=this.pos[1]-i[1],R=this.pos[2]-i[2],H=f*f+v*v+x*x,q=2*(C*f+I*v+R*x),Z=q*q-4*H*(C*C+I*I+R*R-l*l);if(Z<0){const J=Math.max(-q/2,0),Q=C+f*J,oe=I+v*J,he=R+x*J,Ce=Math.hypot(Q,oe,he);return d[0]=Q*l/Ce,d[1]=oe*l/Ce,d[2]=he*l/Ce,!1}{const J=(-q-Math.sqrt(Z))/(2*H);if(J<0){const Q=Math.hypot(C,I,R);return d[0]=C*l/Q,d[1]=I*l/Q,d[2]=R*l/Q,!1}return d[0]=C+f*J,d[1]=I+v*J,d[2]=R+x*J,!0}}}class lb{constructor(i,l,d,f,v){this.TL=i,this.TR=l,this.BR=d,this.BL=f,this.horizon=v}static fromInvProjectionMatrix(i,l,d){const f=[-1,1,1],v=[1,1,1],x=[1,-1,1],C=[-1,-1,1],I=fi(f,f,i),R=fi(v,v,i),H=fi(x,x,i),q=fi(C,C,i);return new lb(I,R,H,q,l/d)}}class ub{constructor(i,l){this.points=i,this.planes=l}static fromInvProjectionMatrix(i,l,d,f){const v=Math.pow(2,d),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const R=Qc([],I,i),H=1/R[3]/l*v;return function(q,Z,J){return q[0]=Z[0]*J[0],q[1]=Z[1]*J[1],q[2]=Z[2]*J[2],q[3]=Z[3]*J[3],q}(R,R,[H,H,f?1/R[3]:H,H])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const R=Ro([],ab([],ws([],x[I[0]],x[I[1]]),ws([],x[I[2]],x[I[1]]))),H=-Va(R,x[I[1]]);return R.concat(H)});return new ub(x,C)}}class Lo{static fromPoints(i){const l=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0];for(const f of i)om(l,l,f),am(d,d,f);return new Lo(l,d)}static applyTransform(i,l){const d=i.getCorners();for(let f=0;f<d.length;++f)fi(d[f],d[f],l);return Lo.fromPoints(d)}constructor(i,l){this.min=i,this.max=l,this.center=ba([],Ml([],this.min,this.max),.5)}quadrant(i){const l=[i%2==0,i<2],d=c2(this.min),f=c2(this.max);for(let v=0;v<l.length;v++)d[v]=l[v]?this.min[v]:this.center[v],f[v]=l[v]?this.center[v]:this.max[v];return f[2]=this.max[2],new Lo(d,f)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,l=this.max;return[[i[0],i[1],i[2]],[l[0],i[1],i[2]],[l[0],l[1],i[2]],[i[0],l[1],i[2]],[i[0],i[1],l[2]],[l[0],i[1],l[2]],[l[0],l[1],l[2]],[i[0],l[1],l[2]]]}intersects(i){const l=this.getCorners();let d=!0;for(let f=0;f<i.planes.length;f++){const v=i.planes[f];let x=0;for(let C=0;C<l.length;C++)x+=Va(v,l[C])+v[3]>=0;if(x===0)return 0;x!==l.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let v=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const I=i.points[C][f]-this.min[f];v=Math.min(v,I),x=Math.max(x,I)}if(x<0||v>this.max[f]-this.min[f])return 0}return 1}}const Gs=Tn/Math.PI/2,ed=64,cm=[ed,32,16],Ha=-Gs,Wa=Gs,zF=[new Lo([Ha,Ha,Ha],[Wa,Wa,Wa]),new Lo([Ha,Ha,Ha],[0,0,Wa]),new Lo([0,Ha,Ha],[Wa,0,Wa]),new Lo([Ha,0,Ha],[0,Wa,Wa]),new Lo([0,0,Ha],[Wa,Wa,Wa])];function Iv(s){return s*Gs/pm}function b2(s,i,l,d=!0){const f=ba([],s._camera.position,s.worldSize),v=[i,l,1,1];Qc(v,v,s.pixelMatrixInverse),p2(v,v,1/v[3]);const x=Ro([],ws([],v,f)),C=s.globeMatrix,I=[C[12],C[13],C[14]],R=ws([],I,f),H=im(R),q=Ro([],R),Z=s.worldSize/(2*Math.PI),J=Va(q,x),Q=Math.asin(Z/H);if(Q<Math.acos(J)){if(!d)return null;const Bt=[],mt=[];ba(Bt,x,H/J),Ro(mt,ws(mt,Bt,R)),Ro(x,Ml(x,R,ba(x,mt,Math.tan(Q)*H)))}const oe=[];new sb(f,x).closestPointOnSphere(I,Z,oe);const he=Ro([],Ln(C,0)),Ce=Ro([],Ln(C,1)),Ne=Ro([],Ln(C,2)),we=Va(he,oe),Be=Va(Ce,oe),Ve=Va(Ne,oe),$e=ae(Math.asin(-Be/Z));let lt=ae(Math.atan2(we,Ve));lt=s.center.lng+function(Bt,mt){const At=(mt-Bt+180)%360-180;return At<-180?At+360:At}(s.center.lng,lt);const it=Zs(lt),St=Le(Xs($e),0,1);return new Bh(it,St)}class BF{constructor(i,l,d){this.a=ws([],i,d),this.b=ws([],l,d),this.center=d;const f=Ro([],this.a),v=Ro([],this.b);this.angle=Math.acos(Va(f,v))}}function cb(s,i){if(s.angle===0)return null;let l;return l=s.a[i]===0?1/s.angle*.5*Math.PI:1/s.angle*Math.atan(s.b[i]/s.a[i]/Math.sin(s.angle)-1/Math.tan(s.angle)),l<0||l>1?null:function(d,f,v,x){const C=Math.sin(v);return d*(Math.sin((1-x)*v)/C)+f*(Math.sin(x*v)/C)}(s.a[i],s.b[i],s.angle,Le(l,0,1))+s.center[i]}function qs(s){if(s.z<=1)return zF[s.z+2*s.y+s.x];const i=db(Pv(s));return Lo.fromPoints(i)}function td(s,i,l){return ba(s,s,1-l),sm(s,s,i,l)}function w2(s,i){const l=zh(i.zoom);if(l===0)return qs(s);const d=Pv(s),f=db(d),v=Zs(d.getWest())*i.worldSize,x=Zs(d.getEast())*i.worldSize,C=Xs(d.getNorth())*i.worldSize,I=Xs(d.getSouth())*i.worldSize,R=[v,C,0],H=[x,C,0],q=[v,I,0],Z=[x,I,0],J=nb([],i.globeMatrix);return fi(R,R,J),fi(H,H,J),fi(q,q,J),fi(Z,Z,J),f[0]=td(f[0],q,l),f[1]=td(f[1],Z,l),f[2]=td(f[2],H,l),f[3]=td(f[3],R,l),Lo.fromPoints(f)}function E2(s,i,l){for(const d of s)fi(d,d,i),ba(d,d,l)}function FF(s,i,l){const d=i/s.worldSize,f=s.globeMatrix;if(l.z<=1){const it=qs(l).getCorners();return E2(it,f,d),Lo.fromPoints(it)}const v=Pv(l),x=db(v);E2(x,f,d);const C=Number.MAX_VALUE,I=[-C,-C,-C],R=[C,C,C];if(v.contains(s.center)){for(const Bt of x)om(R,R,Bt),am(I,I,Bt);I[2]=0;const it=s.point,St=[it.x*d,it.y*d,0];return om(R,R,St),am(I,I,St),new Lo(R,I)}const H=[f[12]*d,f[13]*d,f[14]*d],q=v.getCenter(),Z=Le(s.center.lat,-ho,ho),J=Le(q.lat,-ho,ho),Q=Zs(s.center.lng),oe=Xs(Z);let he=Q-Zs(q.lng);const Ce=oe-Xs(J);he>.5?he-=1:he<-.5&&(he+=1);let Ne=0;Math.abs(he)>Math.abs(Ce)?Ne=he>=0?1:3:(Ne=Ce>=0?0:2,sm(H,H,[f[4]*d,f[5]*d,f[6]*d],-Math.sin(re(Ce>=0?v.getSouth():v.getNorth()))*Gs));const we=x[Ne],Be=x[(Ne+1)%4],Ve=new BF(we,Be,H),$e=[cb(Ve,0)||we[0],cb(Ve,1)||we[1],cb(Ve,2)||we[2]],lt=zh(s.zoom);if(lt>0){const it=function({x:Bt,y:mt,z:At},It,Lt,Ft,gt){const Ht=1/(1<<At);let xn=Bt*Ht,Kt=xn+Ht,sn=mt*Ht,Wt=sn+Ht,En=0;const Wn=(xn+Kt)/2-Ft;return Wn>.5?En=-1:Wn<-.5&&(En=1),xn=((xn+En)*It-(Ft*=It))*Lt+Ft,Kt=((Kt+En)*It-Ft)*Lt+Ft,sn=(sn*It-(gt*=It))*Lt+gt,Wt=(Wt*It-gt)*Lt+gt,[[xn,Wt,0],[Kt,Wt,0],[Kt,sn,0],[xn,sn,0]]}(l,i,s._pixelsPerMercatorPixel,Q,oe);for(let Bt=0;Bt<x.length;Bt++)td(x[Bt],it[Bt],lt);const St=Ml([],it[Ne],it[(Ne+1)%4]);ba(St,St,.5),td($e,St,lt)}for(const it of x)om(R,R,it),am(I,I,it);return R[2]=Math.min(we[2],Be[2]),om(R,R,$e),am(I,I,$e),new Lo(R,I)}function Pv({x:s,y:i,z:l}){const d=1/(1<<l),f=new tr(wa(s*d),co((i+1)*d)),v=new tr(wa((s+1)*d),co(i*d));return new Mu(f,v)}function db(s){const i=re(s.getNorth()),l=re(s.getSouth()),d=Math.cos(i),f=Math.cos(l),v=Math.sin(i),x=Math.sin(l),C=s.getWest(),I=s.getEast();return[Lh(f,x,C),Lh(f,x,I),Lh(d,v,I),Lh(d,v,C)]}function Lh(s,i,l,d=Gs){return l=re(l),[s*Math.sin(l)*d,-i*d,s*Math.cos(l)*d]}function Oh(s,i,l){return Lh(Math.cos(re(s)),Math.sin(re(s)),i,l)}function dm(s,i,l,d){const f=1<<l.z,v=(s/Tn+l.x)/f;return Oh(co((i/Tn+l.y)/f),wa(v),d)}function Dv({min:s,max:i}){return 16383/Math.max(i[0]-s[0],i[1]-s[1],i[2]-s[2])}const C2=new Float64Array(16);function hm(s){const i=Dv(s),l=l2(C2,[i,i,i]);return rm(l,l,((d=[])[0]=-(f=s.min)[0],d[1]=-f[1],d[2]=-f[2],d));var d,f}function hb(s){const i=(d=s.min,(l=C2)[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=d[0],l[13]=d[1],l[14]=d[2],l[15]=1,l);var l,d;const f=1/Dv(s);return Jc(i,i,[f,f,f])}function S2(s,i,l,d,f){const v=function(I){const R=Tn/(2*Math.PI);return I/(2*Math.PI)/R}(l),x=[s,i,-l/(2*Math.PI)],C=bs(new Float64Array(16));return rm(C,C,x),Jc(C,C,[v,v,v]),rb(C,C,re(-f)),Mv(C,C,re(-d)),C}function zh(s){return Ee(5,6,s)}function T2(s,i){const l=Oh(i.lat,i.lng),d=function(Q){const oe=Oh(Q._center.lat,Q._center.lng);let he=ab([],Rh(0,1,0),oe);const Ce=u2([],-Q.angle,oe);he=fi(he,he,Ce),u2(Ce,-Q._pitch,he);const Ne=Ro([],oe);return ba(Ne,Ne,Iv(Q.cameraToCenterDistance/Q.pixelsPerMeter)),fi(Ne,Ne,Ce),Ml([],oe,Ne)}(s);return x=(f=ob([],d,l))[0],C=f[1],I=f[2],R=(v=l)[0],H=v[1],q=v[2],J=(Z=Math.sqrt(x*x+C*C+I*I)*Math.sqrt(R*R+H*H+q*q))&&Va(f,v)/Z,Math.acos(Math.min(Math.max(J,-1),1));var f,v,x,C,I,R,H,q,Z,J}function pb(s,i){return T2(s,i)>Math.PI/2*1.01}const k2=re(85),NF=Math.cos(k2),$F=Math.sin(k2),pm=63710088e-1,A2=2*Math.PI*pm;class tr{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new tr(ct(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,d=this.lat*l,f=i.lat*l,v=Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos((i.lng-this.lng)*l);return pm*Math.acos(Math.min(v,1))}toBounds(i=0){const l=360*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return new Mu(new tr(this.lng-d,this.lat-l),new tr(this.lng+d,this.lat+l))}toEcef(i){const l=Iv(i);return Oh(this.lat,this.lng,Gs+l)}static convert(i){if(i instanceof tr)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new tr(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new tr(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function fb(s){return A2*Math.cos(s*Math.PI/180)}function Zs(s){return(180+s)/360}function Xs(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function Es(s,i){return s/fb(i)}function wa(s){return 360*s-180}function co(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function M2(s,i){return s*fb(co(i))}const ho=85.051129;function I2(s){return 1/Math.cos(s*Math.PI/180)}class Bh{constructor(i,l,d=0){this.x=+i,this.y=+l,this.z=+d}static fromLngLat(i,l=0){const d=tr.convert(i);return new Bh(Zs(d.lng),Xs(d.lat),Es(l,d.lat))}toLngLat(){return new tr(wa(this.x),co(this.y))}toAltitude(){return M2(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/A2*I2(co(this.y))}}function mb(s,i,l,d,f,v,x,C,I){const R=(i+d)/2,H=(l+f)/2,q=new S(R,H);C(q),function(Z,J,Q,oe,he,Ce){const Ne=Q-he,we=oe-Ce;return Math.abs((oe-J)*Ne-(Q-Z)*we)/Math.hypot(Ne,we)}(q.x,q.y,v.x,v.y,x.x,x.y)>=I?(mb(s,i,l,R,H,v,q,C,I),mb(s,R,H,d,f,q,x,C,I)):s.push(x)}function P2(s,i,l){let d=s[0],f=d.x,v=d.y;i(d);const x=[d];for(let C=1;C<s.length;C++){const I=s[C],{x:R,y:H}=I;i(I),mb(x,f,v,R,H,d,I,i,l),f=R,v=H,d=I}return x}function gb(s,i,l,d){if(d(i,l)){const f=i.add(l)._mult(.5);gb(s,i,f,d),gb(s,f,l,d)}else s.push(l)}function UF(s,i){let l=s[0];const d=[l];for(let f=1;f<s.length;f++){const v=s[f];gb(d,l,v,i),l=v}return d}const yb=Math.pow(2,14)-1,D2=-yb-1;function jF(s,i){const l=Math.round(s.x*i),d=Math.round(s.y*i);return s.x=Le(l,D2,yb),s.y=Le(d,D2,yb),(l<s.x||l>s.x+1||d<s.y||d>s.y+1)&&Xe("Geometry exceeds allowed extent, reduce your vector tile buffer size"),s}function Il(s,i,l){const d=s.loadGeometry(),f=s.extent,v=Tn/f;if(i&&l&&l.projection.isReprojectedInTileSpace){const x=1<<i.z,{scale:C,x:I,y:R,projection:H}=l,q=Z=>{const J=wa((i.x+Z.x/f)/x),Q=co((i.y+Z.y/f)/x),oe=H.project(J,Q);Z.x=(oe.x*C-I)*f,Z.y=(oe.y*C-R)*f};for(let Z=0;Z<d.length;Z++)if(s.type!==1)d[Z]=P2(d[Z],q,1);else{const J=[];for(const Q of d[Z])Q.x<0||Q.x>=f||Q.y<0||Q.y>=f||(q(Q),J.push(Q));d[Z]=J}}for(const x of d)for(const C of x)jF(C,v);return d}function nd(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?Il(s):[]}}function Rv(s,i,l,d,f){s.emplaceBack(2*i+(d+1)/2,2*l+(f+1)/2)}function Lv(s,i,l){s.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class vb{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new gn,this.indexArray=new uo,this.segments=new Ei,this.programConfigurations=new Kc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d,f){const v=this.layers[0],x=[];let C=null;v.type==="circle"&&(C=v.layout.get("circle-sort-key"));for(const{feature:R,id:H,index:q,sourceLayerIndex:Z}of i){const J=this.layers[0]._featureFilter.needGeometry,Q=nd(R,J);if(!this.layers[0]._featureFilter.filter(new et(this.zoom),Q,d))continue;const oe=C?C.evaluate(Q,{},d):void 0,he={id:H,properties:R.properties,type:R.type,sourceLayerIndex:Z,index:q,geometry:J?Q.geometry:Il(R,d,f),patterns:{},sortKey:oe};x.push(he)}C&&x.sort((R,H)=>R.sortKey-H.sortKey);let I=null;f.projection.name==="globe"&&(this.globeExtVertexArray=new xa,I=f.projection);for(const R of x){const{geometry:H,index:q,sourceLayerIndex:Z}=R,J=i[q].feature;this.addFeature(R,H,q,l.availableImages,d,I),l.featureIndex.insert(J,H,q,Z,this.index)}}update(i,l,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,MF.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,IF.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,l,d,f,v,x){for(const C of l)for(const I of C){const R=I.x,H=I.y;if(R<0||R>=Tn||H<0||H>=Tn)continue;if(x){const J=x.projectTilePoint(R,H,v),Q=x.upVector(v,R,H),oe=this.globeExtVertexArray;Lv(oe,J,Q),Lv(oe,J,Q),Lv(oe,J,Q),Lv(oe,J,Q)}const q=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),Z=q.vertexLength;Rv(this.layoutVertexArray,R,H,-1,-1),Rv(this.layoutVertexArray,R,H,1,-1),Rv(this.layoutVertexArray,R,H,1,1),Rv(this.layoutVertexArray,R,H,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+2,Z+3),q.vertexLength+=4,q.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,{},f,v)}}function R2(s,i){for(let l=0;l<s.length;l++)if(rd(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(rd(s,i[l]))return!0;return!!_b(s,i)}function VF(s,i,l){return!!rd(s,i)||!!xb(i,s,l)}function L2(s,i){if(s.length===1)return z2(i,s[0]);for(let l=0;l<i.length;l++){const d=i[l];for(let f=0;f<d.length;f++)if(rd(s,d[f]))return!0}for(let l=0;l<s.length;l++)if(z2(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(_b(s,i[l]))return!0;return!1}function HF(s,i,l){if(s.length>1){if(_b(s,i))return!0;for(let d=0;d<i.length;d++)if(xb(i[d],s,l))return!0}for(let d=0;d<s.length;d++)if(xb(s[d],i,l))return!0;return!1}function _b(s,i){if(s.length===0||i.length===0)return!1;for(let l=0;l<s.length-1;l++){const d=s[l],f=s[l+1];for(let v=0;v<i.length-1;v++)if(WF(d,f,i[v],i[v+1]))return!0}return!1}function WF(s,i,l,d){return ft(s,l,d)!==ft(i,l,d)&&ft(s,i,l)!==ft(s,i,d)}function xb(s,i,l){const d=l*l;if(i.length===1)return s.distSqr(i[0])<d;for(let f=1;f<i.length;f++)if(O2(s,i[f-1],i[f])<d)return!0;return!1}function O2(s,i,l){const d=i.distSqr(l);if(d===0)return s.distSqr(i);const f=((s.x-i.x)*(l.x-i.x)+(s.y-i.y)*(l.y-i.y))/d;return s.distSqr(f<0?i:f>1?l:l.sub(i)._mult(f)._add(i))}function z2(s,i){let l,d,f,v=!1;for(let x=0;x<s.length;x++){l=s[x];for(let C=0,I=l.length-1;C<l.length;I=C++)d=l[C],f=l[I],d.y>i.y!=f.y>i.y&&i.x<(f.x-d.x)*(i.y-d.y)/(f.y-d.y)+d.x&&(v=!v)}return v}function rd(s,i){let l=!1;for(let d=0,f=s.length-1;d<s.length;f=d++){const v=s[d],x=s[f];v.y>i.y!=x.y>i.y&&i.x<(x.x-v.x)*(i.y-v.y)/(x.y-v.y)+v.x&&(l=!l)}return l}function B2(s,i,l,d,f){for(const x of s)if(i<=x.x&&l<=x.y&&d>=x.x&&f>=x.y)return!0;const v=[new S(i,l),new S(i,f),new S(d,f),new S(d,l)];if(s.length>2){for(const x of v)if(rd(s,x))return!0}for(let x=0;x<s.length-1;x++)if(GF(s[x],s[x+1],v))return!0;return!1}function GF(s,i,l){const d=l[0],f=l[2];if(s.x<d.x&&i.x<d.x||s.x>f.x&&i.x>f.x||s.y<d.y&&i.y<d.y||s.y>f.y&&i.y>f.y)return!1;const v=ft(s,i,l[0]);return v!==ft(s,i,l[1])||v!==ft(s,i,l[2])||v!==ft(s,i,l[3])}function Fh(s,i,l){const d=i.paint.get(s).value;return d.kind==="constant"?d.value:l.programConfigurations.get(i.id).getMaxValue(s)}function Ov(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function F2(s,i,l,d,f){if(!i[0]&&!i[1])return s;const v=S.convert(i)._mult(f);l==="viewport"&&v._rotate(-d);const x=[];for(let C=0;C<s.length;C++)x.push(s[C].sub(v));return x}function N2(s,i,l,d){const f=S.convert(s)._mult(d);return i==="viewport"&&f._rotate(-l),f}rn(vb,"CircleBucket",{omit:["layers"]});const qF=new Ot({"circle-sort-key":new dt(Ct.layout_circle["circle-sort-key"])});var ZF={paint:new Ot({"circle-radius":new dt(Ct.paint_circle["circle-radius"]),"circle-color":new dt(Ct.paint_circle["circle-color"]),"circle-blur":new dt(Ct.paint_circle["circle-blur"]),"circle-opacity":new dt(Ct.paint_circle["circle-opacity"]),"circle-translate":new Ye(Ct.paint_circle["circle-translate"]),"circle-translate-anchor":new Ye(Ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ye(Ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ye(Ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new dt(Ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new dt(Ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new dt(Ct.paint_circle["circle-stroke-opacity"])}),layout:qF};function $2(s,i,l,d,f,v,x,C,I){if(v&&s.queryGeometry.isAboveHorizon)return!1;v&&(I*=s.pixelToTileUnitsFactor);const R=s.tileID.canonical,H=l.projection.upVectorScale(R,l.center.lat,l.worldSize).metersToTile;for(const q of i)for(const Z of q){const J=Z.add(C),Q=f&&l.elevation?l.elevation.exaggeration()*f.getElevationAt(J.x,J.y,!0):0,oe=l.projection.projectTilePoint(J.x,J.y,R);if(Q>0){const we=l.projection.upVector(R,J.x,J.y);oe.x+=we[0]*H*Q,oe.y+=we[1]*H*Q,oe.z+=we[2]*H*Q}const he=v?J:XF(oe.x,oe.y,oe.z,d),Ce=v?s.tilespaceRays.map(we=>YF(we,Q)):s.queryGeometry.screenGeometry,Ne=Qc([],[oe.x,oe.y,oe.z,1],d);if(!x&&v?I*=Ne[3]/l.cameraToCenterDistance:x&&!v&&(I*=l.cameraToCenterDistance/Ne[3]),v){const we=co((Z.y/Tn+R.y)/(1<<R.z));I/=l.projection.pixelsPerMeter(we,1)/Es(1,we)}if(VF(Ce,he,I))return!0}return!1}function XF(s,i,l,d){const f=Qc([],[s,i,l,1],d);return new S(f[0]/f[3],f[1]/f[3])}const U2=Rh(0,0,0),KF=Rh(0,0,1);function YF(s,i){const l=ib();return U2[2]=i,s.intersectsPlane(U2,KF,l),new S(l[0],l[1])}class j2 extends vb{}function V2(s,{width:i,height:l},d,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==i*l*d)throw new RangeError("mismatched image size")}else f=new Uint8Array(i*l*d);return s.width=i,s.height=l,s.data=f,s}function H2(s,i,l){const{width:d,height:f}=i;d===s.width&&f===s.height||(bb(s,i,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,d),height:Math.min(s.height,f)},l),s.width=d,s.height=f,s.data=i.data)}function bb(s,i,l,d,f,v){if(f.width===0||f.height===0)return i;if(f.width>s.width||f.height>s.height||l.x>s.width-f.width||l.y>s.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>i.width||f.height>i.height||d.x>i.width-f.width||d.y>i.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,C=i.data;for(let I=0;I<f.height;I++){const R=((l.y+I)*s.width+l.x)*v,H=((d.y+I)*i.width+d.x)*v;for(let q=0;q<f.width*v;q++)C[H+q]=x[R+q]}return i}rn(j2,"HeatmapBucket",{omit:["layers"]});class Pl{constructor(i,l){V2(this,i,1,l)}resize(i){H2(this,new Pl(i),1)}clone(){return new Pl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,d,f,v){bb(i,l,d,f,v,1)}}class oa{constructor(i,l){V2(this,i,4,l)}resize(i){H2(this,new oa(i),4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new oa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,d,f,v){bb(i,l,d,f,v,4)}}rn(Pl,"AlphaImage"),rn(oa,"RGBAImage");var JF={paint:new Ot({"heatmap-radius":new dt(Ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new dt(Ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ye(Ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dt(Ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ye(Ct.paint_heatmap["heatmap-opacity"])})};function wb(s){const i={},l=s.resolution||256,d=s.clips?s.clips.length:1,f=s.image||new oa({width:l,height:d}),v=(x,C,I)=>{i[s.evaluationKey]=I;const R=s.expression.evaluate(i);f.data[x+C+0]=Math.floor(255*R.r/R.a),f.data[x+C+1]=Math.floor(255*R.g/R.a),f.data[x+C+2]=Math.floor(255*R.b/R.a),f.data[x+C+3]=Math.floor(255*R.a)};if(s.clips)for(let x=0,C=0;x<d;++x,C+=4*l)for(let I=0,R=0;I<l;I++,R+=4){const H=I/(l-1),{start:q,end:Z}=s.clips[x];v(C,R,q*(1-H)+Z*H)}else for(let x=0,C=0;x<l;x++,C+=4)v(0,C,x/(l-1));return f}var QF={paint:new Ot({"hillshade-illumination-direction":new Ye(Ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ye(Ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ye(Ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ye(Ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ye(Ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ye(Ct.paint_hillshade["hillshade-accent-color"])})};const eN=hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:tN}=eN;var Nh={};function zv(s,i,l){l=l||2;var d,f,v,x,C,I,R,H=i&&i.length,q=H?i[0]*l:s.length,Z=W2(s,0,q,l,!0),J=[];if(!Z||Z.next===Z.prev)return J;if(H&&(Z=function(oe,he,Ce,Ne){var we,Be,Ve,$e=[];for(we=0,Be=he.length;we<Be;we++)(Ve=W2(oe,he[we]*Ne,we<Be-1?he[we+1]*Ne:oe.length,Ne,!1))===Ve.next&&(Ve.steiner=!0),$e.push(uN(Ve));for($e.sort(aN),we=0;we<$e.length;we++)Ce=sN($e[we],Ce);return Ce}(s,i,Z,l)),s.length>80*l){d=v=s[0],f=x=s[1];for(var Q=l;Q<q;Q+=l)(C=s[Q])<d&&(d=C),(I=s[Q+1])<f&&(f=I),C>v&&(v=C),I>x&&(x=I);R=(R=Math.max(v-d,x-f))!==0?32767/R:0}return fm(Z,J,l,d,f,R,0),J}function W2(s,i,l,d,f){var v,x;if(f===Sb(s,i,l,d)>0)for(v=i;v<l;v+=d)x=Z2(v,s[v],s[v+1],x);else for(v=l-d;v>=i;v-=d)x=Z2(v,s[v],s[v+1],x);return x&&Bv(x,x.next)&&(gm(x),x=x.next),x}function id(s,i){if(!s)return s;i||(i=s);var l,d=s;do if(l=!1,d.steiner||!Bv(d,d.next)&&Ci(d.prev,d,d.next)!==0)d=d.next;else{if(gm(d),(d=i=d.prev)===d.next)break;l=!0}while(l||d!==i);return i}function fm(s,i,l,d,f,v,x){if(s){!x&&v&&function(H,q,Z,J){var Q=H;do Q.z===0&&(Q.z=Eb(Q.x,Q.y,q,Z,J)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==H);Q.prevZ.nextZ=null,Q.prevZ=null,function(oe){var he,Ce,Ne,we,Be,Ve,$e,lt,it=1;do{for(Ce=oe,oe=null,Be=null,Ve=0;Ce;){for(Ve++,Ne=Ce,$e=0,he=0;he<it&&($e++,Ne=Ne.nextZ);he++);for(lt=it;$e>0||lt>0&&Ne;)$e!==0&&(lt===0||!Ne||Ce.z<=Ne.z)?(we=Ce,Ce=Ce.nextZ,$e--):(we=Ne,Ne=Ne.nextZ,lt--),Be?Be.nextZ=we:oe=we,we.prevZ=Be,Be=we;Ce=Ne}Be.nextZ=null,it*=2}while(Ve>1)}(Q)}(s,d,f,v);for(var C,I,R=s;s.prev!==s.next;)if(C=s.prev,I=s.next,v?rN(s,d,f,v):nN(s))i.push(C.i/l|0),i.push(s.i/l|0),i.push(I.i/l|0),gm(s),s=I.next,R=I.next;else if((s=I)===R){x?x===1?fm(s=iN(id(s),i,l),i,l,d,f,v,2):x===2&&oN(s,i,l,d,f,v):fm(id(s),i,l,d,f,v,1);break}}}function nN(s){var i=s.prev,l=s,d=s.next;if(Ci(i,l,d)>=0)return!1;for(var f=i.x,v=l.x,x=d.x,C=i.y,I=l.y,R=d.y,H=f<v?f<x?f:x:v<x?v:x,q=C<I?C<R?C:R:I<R?I:R,Z=f>v?f>x?f:x:v>x?v:x,J=C>I?C>R?C:R:I>R?I:R,Q=d.next;Q!==i;){if(Q.x>=H&&Q.x<=Z&&Q.y>=q&&Q.y<=J&&$h(f,C,v,I,x,R,Q.x,Q.y)&&Ci(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function rN(s,i,l,d){var f=s.prev,v=s,x=s.next;if(Ci(f,v,x)>=0)return!1;for(var C=f.x,I=v.x,R=x.x,H=f.y,q=v.y,Z=x.y,J=C<I?C<R?C:R:I<R?I:R,Q=H<q?H<Z?H:Z:q<Z?q:Z,oe=C>I?C>R?C:R:I>R?I:R,he=H>q?H>Z?H:Z:q>Z?q:Z,Ce=Eb(J,Q,i,l,d),Ne=Eb(oe,he,i,l,d),we=s.prevZ,Be=s.nextZ;we&&we.z>=Ce&&Be&&Be.z<=Ne;){if(we.x>=J&&we.x<=oe&&we.y>=Q&&we.y<=he&&we!==f&&we!==x&&$h(C,H,I,q,R,Z,we.x,we.y)&&Ci(we.prev,we,we.next)>=0||(we=we.prevZ,Be.x>=J&&Be.x<=oe&&Be.y>=Q&&Be.y<=he&&Be!==f&&Be!==x&&$h(C,H,I,q,R,Z,Be.x,Be.y)&&Ci(Be.prev,Be,Be.next)>=0))return!1;Be=Be.nextZ}for(;we&&we.z>=Ce;){if(we.x>=J&&we.x<=oe&&we.y>=Q&&we.y<=he&&we!==f&&we!==x&&$h(C,H,I,q,R,Z,we.x,we.y)&&Ci(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Be&&Be.z<=Ne;){if(Be.x>=J&&Be.x<=oe&&Be.y>=Q&&Be.y<=he&&Be!==f&&Be!==x&&$h(C,H,I,q,R,Z,Be.x,Be.y)&&Ci(Be.prev,Be,Be.next)>=0)return!1;Be=Be.nextZ}return!0}function iN(s,i,l){var d=s;do{var f=d.prev,v=d.next.next;!Bv(f,v)&&G2(f,d,d.next,v)&&mm(f,v)&&mm(v,f)&&(i.push(f.i/l|0),i.push(d.i/l|0),i.push(v.i/l|0),gm(d),gm(d.next),d=s=v),d=d.next}while(d!==s);return id(d)}function oN(s,i,l,d,f,v){var x=s;do{for(var C=x.next.next;C!==x.prev;){if(x.i!==C.i&&cN(x,C)){var I=q2(x,C);return x=id(x,x.next),I=id(I,I.next),fm(x,i,l,d,f,v,0),void fm(I,i,l,d,f,v,0)}C=C.next}x=x.next}while(x!==s)}function aN(s,i){return s.x-i.x}function sN(s,i){var l=function(f,v){var x,C=v,I=f.x,R=f.y,H=-1/0;do{if(R<=C.y&&R>=C.next.y&&C.next.y!==C.y){var q=C.x+(R-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(q<=I&&q>H&&(H=q,x=C.x<C.next.x?C:C.next,q===I))return x}C=C.next}while(C!==v);if(!x)return null;var Z,J=x,Q=x.x,oe=x.y,he=1/0;C=x;do I>=C.x&&C.x>=Q&&I!==C.x&&$h(R<oe?I:H,R,Q,oe,R<oe?H:I,R,C.x,C.y)&&(Z=Math.abs(R-C.y)/(I-C.x),mm(C,f)&&(Z<he||Z===he&&(C.x>x.x||C.x===x.x&&lN(x,C)))&&(x=C,he=Z)),C=C.next;while(C!==J);return x}(s,i);if(!l)return i;var d=q2(l,s);return id(d,d.next),id(l,l.next)}function lN(s,i){return Ci(s.prev,s,i.prev)<0&&Ci(i.next,s,s.next)<0}function Eb(s,i,l,d,f){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*f|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-d)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function uN(s){var i=s,l=s;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==s);return l}function $h(s,i,l,d,f,v,x,C){return(f-x)*(i-C)>=(s-x)*(v-C)&&(s-x)*(d-C)>=(l-x)*(i-C)&&(l-x)*(v-C)>=(f-x)*(d-C)}function cN(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(l,d){var f=l;do{if(f.i!==l.i&&f.next.i!==l.i&&f.i!==d.i&&f.next.i!==d.i&&G2(f,f.next,l,d))return!0;f=f.next}while(f!==l);return!1}(s,i)&&(mm(s,i)&&mm(i,s)&&function(l,d){var f=l,v=!1,x=(l.x+d.x)/2,C=(l.y+d.y)/2;do f.y>C!=f.next.y>C&&f.next.y!==f.y&&x<(f.next.x-f.x)*(C-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==l);return v}(s,i)&&(Ci(s.prev,s,i.prev)||Ci(s,i.prev,i))||Bv(s,i)&&Ci(s.prev,s,s.next)>0&&Ci(i.prev,i,i.next)>0)}function Ci(s,i,l){return(i.y-s.y)*(l.x-i.x)-(i.x-s.x)*(l.y-i.y)}function Bv(s,i){return s.x===i.x&&s.y===i.y}function G2(s,i,l,d){var f=Nv(Ci(s,i,l)),v=Nv(Ci(s,i,d)),x=Nv(Ci(l,d,s)),C=Nv(Ci(l,d,i));return f!==v&&x!==C||!(f!==0||!Fv(s,l,i))||!(v!==0||!Fv(s,d,i))||!(x!==0||!Fv(l,s,d))||!(C!==0||!Fv(l,i,d))}function Fv(s,i,l){return i.x<=Math.max(s.x,l.x)&&i.x>=Math.min(s.x,l.x)&&i.y<=Math.max(s.y,l.y)&&i.y>=Math.min(s.y,l.y)}function Nv(s){return s>0?1:s<0?-1:0}function mm(s,i){return Ci(s.prev,s,s.next)<0?Ci(s,i,s.next)>=0&&Ci(s,s.prev,i)>=0:Ci(s,i,s.prev)<0||Ci(s,s.next,i)<0}function q2(s,i){var l=new Cb(s.i,s.x,s.y),d=new Cb(i.i,i.x,i.y),f=s.next,v=i.prev;return s.next=i,i.prev=s,l.next=f,f.prev=l,d.next=l,l.prev=d,v.next=d,d.prev=v,d}function Z2(s,i,l,d){var f=new Cb(s,i,l);return d?(f.next=d.next,f.prev=d,d.next.prev=f,d.next=f):(f.prev=f,f.next=f),f}function gm(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Cb(s,i,l){this.i=s,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sb(s,i,l,d){for(var f=0,v=i,x=l-d;v<l;v+=d)f+=(s[x]-s[v])*(s[v+1]+s[x+1]),x=v;return f}function dN(s,i,l,d,f){X2(s,i,l||0,d||s.length-1,f||hN)}function X2(s,i,l,d,f){for(;d>l;){if(d-l>600){var v=d-l+1,x=i-l+1,C=Math.log(v),I=.5*Math.exp(2*C/3),R=.5*Math.sqrt(C*I*(v-I)/v)*(x-v/2<0?-1:1);X2(s,i,Math.max(l,Math.floor(i-x*I/v+R)),Math.min(d,Math.floor(i+(v-x)*I/v+R)),f)}var H=s[i],q=l,Z=d;for(ym(s,l,i),f(s[d],H)>0&&ym(s,l,d);q<Z;){for(ym(s,q,Z),q++,Z--;f(s[q],H)<0;)q++;for(;f(s[Z],H)>0;)Z--}f(s[l],H)===0?ym(s,l,Z):ym(s,++Z,d),Z<=i&&(l=Z+1),i<=Z&&(d=Z-1)}}function ym(s,i,l){var d=s[i];s[i]=s[l],s[l]=d}function hN(s,i){return s<i?-1:s>i?1:0}function Tb(s,i){const l=s.length;if(l<=1)return[s];const d=[];let f,v;for(let x=0;x<l;x++){const C=Et(s[x]);C!==0&&(s[x].area=Math.abs(C),v===void 0&&(v=C<0),v===C<0?(f&&d.push(f),f=[s[x]]):f.push(s[x]))}if(f&&d.push(f),i>1)for(let x=0;x<d.length;x++)d[x].length<=i||(dN(d[x],i,1,d[x].length-1,pN),d[x]=d[x].slice(0,i));return d}function pN(s,i){return i.area-s.area}function kb(s,i,l){const d=l.patternDependencies;let f=!1;for(const v of i){const x=v.paint.get(`${s}-pattern`);x.isConstant()||(f=!0);const C=x.constantOr(null);C&&(f=!0,d[C]=!0)}return f}function Ab(s,i,l,d,f){const v=f.patternDependencies;for(const x of i){const C=x.paint.get(`${s}-pattern`).value;if(C.kind!=="constant"){let I=C.evaluate({zoom:d},l,{},f.availableImages);I=I&&I.name?I.name:I,v[I]=!0,l.patterns[x.id]=I}}return l}({get exports(){return Nh},set exports(s){Nh=s}}).exports=zv,Nh.default=zv,zv.deviation=function(s,i,l,d){var f=i&&i.length,v=Math.abs(Sb(s,0,f?i[0]*l:s.length,l));if(f)for(var x=0,C=i.length;x<C;x++)v-=Math.abs(Sb(s,i[x]*l,x<C-1?i[x+1]*l:s.length,l));var I=0;for(x=0;x<d.length;x+=3){var R=d[x]*l,H=d[x+1]*l,q=d[x+2]*l;I+=Math.abs((s[R]-s[q])*(s[H+1]-s[R+1])-(s[R]-s[H])*(s[q+1]-s[R+1]))}return v===0&&I===0?0:Math.abs((I-v)/v)},zv.flatten=function(s){for(var i=s[0][0].length,l={vertices:[],holes:[],dimensions:i},d=0,f=0;f<s.length;f++){for(var v=0;v<s[f].length;v++)for(var x=0;x<i;x++)l.vertices.push(s[f][v][x]);f>0&&l.holes.push(d+=s[f-1].length)}return l};class $v{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new gn,this.indexArray=new uo,this.indexArray2=new Hs,this.programConfigurations=new Kc(i.layers,i.zoom),this.segments=new Ei,this.segments2=new Ei,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=i.projection}populate(i,l,d,f){this.hasPattern=kb("fill",this.layers,l);const v=this.layers[0].layout.get("fill-sort-key"),x=[];for(const{feature:C,id:I,index:R,sourceLayerIndex:H}of i){const q=this.layers[0]._featureFilter.needGeometry,Z=nd(C,q);if(!this.layers[0]._featureFilter.filter(new et(this.zoom),Z,d))continue;const J=v?v.evaluate(Z,{},d,l.availableImages):void 0,Q={id:I,properties:C.properties,type:C.type,sourceLayerIndex:H,index:R,geometry:q?Z.geometry:Il(C,d,f),patterns:{},sortKey:J};x.push(Q)}v&&x.sort((C,I)=>C.sortKey-I.sortKey);for(const C of x){const{geometry:I,index:R,sourceLayerIndex:H}=C;if(this.hasPattern){const q=Ab("fill",this.layers,C,this.zoom,l);this.patternFeatures.push(q)}else this.addFeature(C,I,R,d,{},l.availableImages);l.featureIndex.insert(i[R].feature,I,R,H,this.index)}}update(i,l,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,f)}addFeatures(i,l,d,f,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,tN),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,d,f,v,x=[]){for(const C of Tb(l,500)){let I=0;for(const Q of C)I+=Q.length;const R=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),H=R.vertexLength,q=[],Z=[];for(const Q of C){if(Q.length===0)continue;Q!==C[0]&&Z.push(q.length/2);const oe=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),he=oe.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(he+Q.length-1,he),q.push(Q[0].x),q.push(Q[0].y);for(let Ce=1;Ce<Q.length;Ce++)this.layoutVertexArray.emplaceBack(Q[Ce].x,Q[Ce].y),this.indexArray2.emplaceBack(he+Ce-1,he+Ce),q.push(Q[Ce].x),q.push(Q[Ce].y);oe.vertexLength+=Q.length,oe.primitiveLength+=Q.length}const J=Nh(q,Z);for(let Q=0;Q<J.length;Q+=3)this.indexArray.emplaceBack(H+J[Q],H+J[Q+1],H+J[Q+2]);R.vertexLength+=I,R.primitiveLength+=J.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,v,x,f)}}rn($v,"FillBucket",{omit:["layers","patternFeatures"]});const fN=new Ot({"fill-sort-key":new dt(Ct.layout_fill["fill-sort-key"])});var mN={paint:new Ot({"fill-antialias":new Ye(Ct.paint_fill["fill-antialias"]),"fill-opacity":new dt(Ct.paint_fill["fill-opacity"]),"fill-color":new dt(Ct.paint_fill["fill-color"]),"fill-outline-color":new dt(Ct.paint_fill["fill-outline-color"]),"fill-translate":new Ye(Ct.paint_fill["fill-translate"]),"fill-translate-anchor":new Ye(Ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new dt(Ct.paint_fill["fill-pattern"])}),layout:fN};const gN=hn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),yN=hn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),vN=hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:_N}=gN;var Uv={},xN=S,K2=Uh;function Uh(s,i,l,d,f){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=d,this._values=f,s.readFields(bN,this,i)}function bN(s,i,l){s==1?i.id=l.readVarint():s==2?function(d,f){for(var v=d.readVarint()+d.pos;d.pos<v;){var x=f._keys[d.readVarint()],C=f._values[d.readVarint()];f.properties[x]=C}}(l,i):s==3?i.type=l.readVarint():s==4&&(i._geometry=l.pos)}function wN(s){for(var i,l,d=0,f=0,v=s.length,x=v-1;f<v;x=f++)d+=((l=s[x]).x-(i=s[f]).x)*(i.y+l.y);return d}Uh.types=["Unknown","Point","LineString","Polygon"],Uh.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,l=s.readVarint()+s.pos,d=1,f=0,v=0,x=0,C=[];s.pos<l;){if(f<=0){var I=s.readVarint();d=7&I,f=I>>3}if(f--,d===1||d===2)v+=s.readSVarint(),x+=s.readSVarint(),d===1&&(i&&C.push(i),i=[]),i.push(new xN(v,x));else{if(d!==7)throw new Error("unknown command "+d);i&&i.push(i[0].clone())}}return i&&C.push(i),C},Uh.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,l=1,d=0,f=0,v=0,x=1/0,C=-1/0,I=1/0,R=-1/0;s.pos<i;){if(d<=0){var H=s.readVarint();l=7&H,d=H>>3}if(d--,l===1||l===2)(f+=s.readSVarint())<x&&(x=f),f>C&&(C=f),(v+=s.readSVarint())<I&&(I=v),v>R&&(R=v);else if(l!==7)throw new Error("unknown command "+l)}return[x,I,C,R]},Uh.prototype.toGeoJSON=function(s,i,l){var d,f,v=this.extent*Math.pow(2,l),x=this.extent*s,C=this.extent*i,I=this.loadGeometry(),R=Uh.types[this.type];function H(J){for(var Q=0;Q<J.length;Q++){var oe=J[Q];J[Q]=[360*(oe.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+C)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(d=0;d<I.length;d++)q[d]=I[d][0];H(I=q);break;case 2:for(d=0;d<I.length;d++)H(I[d]);break;case 3:for(I=function(J){var Q=J.length;if(Q<=1)return[J];for(var oe,he,Ce=[],Ne=0;Ne<Q;Ne++){var we=wN(J[Ne]);we!==0&&(he===void 0&&(he=we<0),he===we<0?(oe&&Ce.push(oe),oe=[J[Ne]]):oe.push(J[Ne]))}return oe&&Ce.push(oe),Ce}(I),d=0;d<I.length;d++)for(f=0;f<I[d].length;f++)H(I[d][f])}I.length===1?I=I[0]:R="Multi"+R;var Z={type:"Feature",geometry:{type:R,coordinates:I},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var EN=K2,Y2=J2;function J2(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(CN,this,i),this.length=this._features.length}function CN(s,i,l){s===15?i.version=l.readVarint():s===1?i.name=l.readString():s===5?i.extent=l.readVarint():s===2?i._features.push(l.pos):s===3?i._keys.push(l.readString()):s===4&&i._values.push(function(d){for(var f=null,v=d.readVarint()+d.pos;d.pos<v;){var x=d.readVarint()>>3;f=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return f}(l))}J2.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new EN(this._pbf,i,this.extent,this._keys,this._values)};var SN=Y2;function TN(s,i,l){if(s===3){var d=new SN(l,l.readVarint()+l.pos);d.length&&(i[d.name]=d)}}var Mb=Uv.VectorTile=function(s,i){this.layers=s.readFields(TN,{},i)},jv=Uv.VectorTileFeature=K2;function Vv(s,i,l,d){const f=[],v=d===0?(x,C,I,R,H,q)=>{x.push(new S(q,I+(q-C)/(R-C)*(H-I)))}:(x,C,I,R,H,q)=>{x.push(new S(C+(q-I)/(H-I)*(R-C),q))};for(const x of s){const C=[];for(const I of x){if(I.length<=2)continue;const R=[];for(let Z=0;Z<I.length-1;Z++){const J=I[Z].x,Q=I[Z].y,oe=I[Z+1].x,he=I[Z+1].y,Ce=d===0?J:Q,Ne=d===0?oe:he;Ce<i?Ne>i&&v(R,J,Q,oe,he,i):Ce>l?Ne<l&&v(R,J,Q,oe,he,l):R.push(I[Z]),Ne<i&&Ce>=i&&v(R,J,Q,oe,he,i),Ne>l&&Ce<=l&&v(R,J,Q,oe,he,l)}let H=I[I.length-1];const q=d===0?H.x:H.y;q>=i&&q<=l&&R.push(H),R.length&&(H=R[R.length-1],R[0].x===H.x&&R[0].y===H.y||R.push(R[0]),C.push(R))}C.length&&f.push(C)}return f}Uv.VectorTileLayer=Y2;const kN=jv.types,AN=Math.pow(2,13);function vm(s,i,l,d,f,v,x,C){s.emplaceBack((i<<1)+x,(l<<1)+v,(Math.floor(d*AN)<<1)+f,Math.round(C))}function _m(s,i,l){s.emplaceBack(i.x,i.y,i.z,l[0]*16384,l[1]*16384,l[2]*16384)}class Q2{constructor(){this.acc=new S(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new S(i.x,i.y),this.max=new S(i.x,i.y))}append(i,l){this.currentPolyCount.edges++,this.acc._add(i);const d=this.min,f=this.max;i.x<d.x?d.x=i.x:i.x>f.x&&(f.x=i.x),i.y<d.y?d.y=i.y:i.y>f.y&&(f.y=i.y),((i.x===0||i.x===Tn)&&i.x===l.x)!=((i.y===0||i.y===Tn)&&i.y===l.y)&&this.processBorderOverlap(i,l),l.x<0!=i.x<0&&this.addBorderIntersection(0,Qn(l.y,i.y,(0-l.x)/(i.x-l.x))),l.x>Tn!=i.x>Tn&&this.addBorderIntersection(1,Qn(l.y,i.y,(Tn-l.x)/(i.x-l.x))),l.y<0!=i.y<0&&this.addBorderIntersection(2,Qn(l.x,i.x,(0-l.y)/(i.y-l.y))),l.y>Tn!=i.y>Tn&&this.addBorderIntersection(3,Qn(l.x,i.x,(Tn-l.y)/(i.y-l.y)))}addBorderIntersection(i,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[i];l<d[0]&&(d[0]=l),l>d[1]&&(d[1]=l)}processBorderOverlap(i,l){if(i.x===l.x){if(i.y===l.y)return;const d=i.x===0?0:1;this.addBorderIntersection(d,l.y),this.addBorderIntersection(d,i.y)}else{const d=i.y===0?2:3;this.addBorderIntersection(d,l.x),this.addBorderIntersection(d,i.x)}}centroid(){const i=this.polyCount.reduce((l,d)=>l+d.edges,0);return i!==0?this.acc.div(i)._round():new S(0,0)}span(){return new S(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,l)=>i+ +(l[0]!==Number.MAX_VALUE),0)}}class xm{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new fr,this.centroidVertexArray=new e2,this.indexArray=new uo,this.programConfigurations=new Kc(i.layers,i.zoom),this.segments=new Ei,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.enableTerrain=i.enableTerrain}populate(i,l,d,f){this.features=[],this.hasPattern=kb("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(v){const x=Math.exp(Math.PI*(1-v.y/(1<<v.z)*2));return 80150034*x/(x*x+1)/Tn/(1<<v.z)}(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:v,id:x,index:C,sourceLayerIndex:I}of i){const R=this.layers[0]._featureFilter.needGeometry,H=nd(v,R);if(!this.layers[0]._featureFilter.filter(new et(this.zoom),H,d))continue;const q={id:x,sourceLayerIndex:I,index:C,geometry:R?H.geometry:Il(v,d,f),properties:v.properties,type:v.type,patterns:{}},Z=this.layoutVertexArray.length;this.hasPattern?this.features.push(Ab("fill-extrusion",this.layers,q,this.zoom,l)):this.addFeature(q,q.geometry,C,d,{},l.availableImages,f),l.featureIndex.insert(v,q.geometry,C,I,this.index,Z)}this.sortBorders()}addFeatures(i,l,d,f,v){for(const x of this.features){const{geometry:C}=x;this.addFeature(x,C,x.index,l,d,f,v)}this.sortBorders()}update(i,l,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,_N),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,vN.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,yN.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,d,f,v,x,C){const I=[new S(0,0),new S(Tn,Tn)],R=C.projection,H=R.name==="globe",q=this.enableTerrain&&!H?new Q2:null,Z=kN[i.type]==="Polygon";H&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new xa);const J=Tb(l,500);for(let Ce=J.length-1;Ce>=0;Ce--){const Ne=J[Ce];(Ne.length===0||(Q=Ne[0]).every(we=>we.x<=0)||Q.every(we=>we.x>=Tn)||Q.every(we=>we.y<=0)||Q.every(we=>we.y>=Tn))&&J.splice(Ce,1)}var Q;let oe;if(H)oe=aA(J,I,f);else{oe=[];for(const Ce of J)oe.push({polygon:Ce,bounds:I})}const he=Z?this.edgeRadius:0;for(const{polygon:Ce,bounds:Ne}of oe){let we=0,Be=0;for(const $e of Ce)Z&&!$e[0].equals($e[$e.length-1])&&$e.push($e[0]),Be+=Z?$e.length-1:$e.length;const Ve=this.segments.prepareSegment((Z?5:4)*Be,this.layoutVertexArray,this.indexArray);if(Z){const $e=[],lt=[];we=Ve.vertexLength;for(const St of Ce){let Bt,mt;St.length&&St!==Ce[0]&&lt.push($e.length/2),Bt=St[1].sub(St[0])._perp()._unit();for(let At=1;At<St.length;At++){const It=St[At],Lt=St[At===St.length-1?1:At+1];let{x:Ft,y:gt}=It;if(he){mt=Lt.sub(It)._perp()._unit();const Ht=Bt.add(mt)._unit(),xn=he*Math.min(4,1/(Bt.x*Ht.x+Bt.y*Ht.y));Ft+=xn*Ht.x,gt+=xn*Ht.y,Bt=mt}vm(this.layoutVertexArray,Ft,gt,0,0,1,1,0),Ve.vertexLength++,$e.push(It.x,It.y),H&&_m(this.layoutVertexExtArray,R.projectTilePoint(Ft,gt,f),R.upVector(f,Ft,gt))}}const it=Nh($e,lt);for(let St=0;St<it.length;St+=3)this.indexArray.emplaceBack(we+it[St],we+it[St+2],we+it[St+1]),Ve.primitiveLength++}for(const $e of Ce){q&&$e.length&&q.startRing($e[0]);let lt,it,St,Bt=$e.length>4&&rA($e[$e.length-2],$e[0],$e[1]),mt=he?MN($e[$e.length-2],$e[0],$e[1],he):0;it=$e[1].sub($e[0])._perp()._unit();let At=!0;for(let It=1,Lt=0;It<$e.length;It++){let Ft=$e[It-1],gt=$e[It];const Ht=$e[It===$e.length-1?1:It+1];if(q&&Z&&q.currentPolyCount.top++,nA(gt,Ft,Ne)){he&&(it=Ht.sub(gt)._perp()._unit(),At=!At);continue}q&&q.append(gt,Ft);const xn=gt.sub(Ft)._perp(),Kt=xn.x/(Math.abs(xn.x)+Math.abs(xn.y)),sn=xn.y>0?1:0,Wt=Ft.dist(gt);if(Lt+Wt>32768&&(Lt=0),he){St=Ht.sub(gt)._perp()._unit();let $n=tA(Ft,gt,Ht,eA(it,St),he);isNaN($n)&&($n=0);const Sn=gt.sub(Ft)._unit();Ft=Ft.add(Sn.mult(mt))._round(),gt=gt.add(Sn.mult(-$n))._round(),mt=$n,it=St}const En=Ve.vertexLength,Wn=$e.length>4&&rA(Ft,gt,Ht);let jn=iA(Lt,Bt,At);if(vm(this.layoutVertexArray,Ft.x,Ft.y,Kt,sn,0,0,jn),vm(this.layoutVertexArray,Ft.x,Ft.y,Kt,sn,0,1,jn),Lt+=Wt,jn=iA(Lt,Wn,!At),Bt=Wn,vm(this.layoutVertexArray,gt.x,gt.y,Kt,sn,0,0,jn),vm(this.layoutVertexArray,gt.x,gt.y,Kt,sn,0,1,jn),Ve.vertexLength+=4,this.indexArray.emplaceBack(En+0,En+1,En+2),this.indexArray.emplaceBack(En+1,En+3,En+2),Ve.primitiveLength+=2,he){const $n=we+(It===1?$e.length-2:It-2),Sn=It===1?we:$n+1;if(this.indexArray.emplaceBack(En+1,$n,En+3),this.indexArray.emplaceBack($n,Sn,En+3),Ve.primitiveLength+=2,lt===void 0&&(lt=En),!nA(Ht,$e[It],Ne)){const gr=It===$e.length-1?lt:Ve.vertexLength;this.indexArray.emplaceBack(En+2,En+3,gr),this.indexArray.emplaceBack(En+3,gr+1,gr),this.indexArray.emplaceBack(En+3,Sn,gr+1),Ve.primitiveLength+=3}At=!At}if(H){const $n=this.layoutVertexExtArray,Sn=R.projectTilePoint(Ft.x,Ft.y,f),gr=R.projectTilePoint(gt.x,gt.y,f),Pn=R.upVector(f,Ft.x,Ft.y),Gn=R.upVector(f,gt.x,gt.y);_m($n,Sn,Pn),_m($n,Sn,Pn),_m($n,gr,Gn),_m($n,gr,Gn)}}Z&&(we+=$e.length-1)}}if(q&&q.polyCount.length>0){if(q.borders){q.vertexArrayOffset=this.centroidVertexArray.length;const Ce=q.borders,Ne=this.featuresOnBorder.push(q)-1;for(let we=0;we<4;we++)Ce[we][0]!==Number.MAX_VALUE&&this.borders[we].push(Ne)}this.encodeCentroid(q.borders?void 0:q.centroid(),q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,v,x,f)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((l,d)=>this.featuresOnBorder[l].borders[i][0]-this.featuresOnBorder[d].borders[i][0])}encodeCentroid(i,l,d=!0){let f,v;if(i)if(i.y!==0){const C=l.span()._mult(this.tileToMeter);f=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(C.x/10)),v=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(C.y/10))}else f=Math.ceil(7*(i.x+450)),v=0;else f=0,v=+d;let x=d?this.centroidVertexArray.length:l.vertexArrayOffset;for(const C of l.polyCount){d&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*C.edges+C.top);for(let I=0;I<C.top;I++)this.centroidVertexArray.emplace(x++,f,v);for(let I=0;I<2*C.edges;I++)this.centroidVertexArray.emplace(x++,0,v),this.centroidVertexArray.emplace(x++,f,v)}}}function eA(s,i){const l=s.add(i)._unit();return s.x*l.x+s.y*l.y}function MN(s,i,l,d){const f=i.sub(s)._perp()._unit(),v=l.sub(i)._perp()._unit();return tA(s,i,l,eA(f,v),d)}function tA(s,i,l,d,f){const v=Math.sqrt(1-d*d);return Math.min(s.dist(i)/3,i.dist(l)/3,f*v/d)}function nA(s,i,l){return s.x<l[0].x&&i.x<l[0].x||s.x>l[1].x&&i.x>l[1].x||s.y<l[0].y&&i.y<l[0].y||s.y>l[1].y&&i.y>l[1].y}function rA(s,i,l){if(s.x<0||s.x>=Tn||i.x<0||i.x>=Tn||l.x<0||l.x>=Tn)return!1;const d=l.sub(i),f=d.perp(),v=s.sub(i);return(d.x*v.x+d.y*v.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(v.x*v.x+v.y*v.y))>-.866&&f.x*v.x+f.y*v.y<0}function iA(s,i,l){const d=i?2|s:-3&s;return l?1|d:-2&d}function oA(){const s=Math.PI/32,i=Math.tan(s),l=pm;return l*Math.sqrt(1+2*i*i)-l}function aA(s,i,l){const d=1<<l.z,f=wa(l.x/d),v=wa((l.x+1)/d),x=co(l.y/d),C=co((l.y+1)/d);return function(I,R,H,q,Z=0,J){const Q=[];if(!I.length||!H||!q)return Q;const oe=($e,lt)=>{for(const it of $e)Q.push({polygon:it,bounds:lt})},he=Math.ceil(Math.log2(H)),Ce=Math.ceil(Math.log2(q)),Ne=he-Ce,we=[];for(let $e=0;$e<Math.abs(Ne);$e++)we.push(Ne>0?0:1);for(let $e=0;$e<Math.min(he,Ce);$e++)we.push(0),we.push(1);let Be=I;if(Be=Vv(Be,R[0].y-Z,R[1].y+Z,1),Be=Vv(Be,R[0].x-Z,R[1].x+Z,0),!Be.length)return Q;const Ve=[];for(we.length?Ve.push({polygons:Be,bounds:R,depth:0}):oe(Be,R);Ve.length;){const $e=Ve.pop(),lt=$e.depth,it=we[lt],St=$e.bounds[0],Bt=$e.bounds[1],mt=it===0?St.x:St.y,At=it===0?Bt.x:Bt.y,It=J?J(it,mt,At):.5*(mt+At),Lt=Vv($e.polygons,mt-Z,It+Z,it),Ft=Vv($e.polygons,It-Z,At+Z,it);if(Lt.length){const gt=[St,new S(it===0?It:Bt.x,it===1?It:Bt.y)];we.length>lt+1?Ve.push({polygons:Lt,bounds:gt,depth:lt+1}):oe(Lt,gt)}if(Ft.length){const gt=[new S(it===0?It:St.x,it===1?It:St.y),Bt];we.length>lt+1?Ve.push({polygons:Ft,bounds:gt,depth:lt+1}):oe(Ft,gt)}}return Q}(s,i,Math.ceil((v-f)/11.25),Math.ceil((x-C)/11.25),1,(I,R,H)=>{if(I===0)return .5*(R+H);{const q=co((l.y+R/Tn)/d);return(Xs(.5*(co((l.y+H/Tn)/d)+q))*d-l.y)*Tn}})}rn(xm,"FillExtrusionBucket",{omit:["layers","features"]}),rn(Q2,"PartMetadata");const IN=new Ot({"fill-extrusion-edge-radius":new Ye(Ct["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var PN={paint:new Ot({"fill-extrusion-opacity":new Ye(Ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new dt(Ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ye(Ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ye(Ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new dt(Ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new dt(Ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new dt(Ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ye(Ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ye(Ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ye(Ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:IN};function sA(s,i,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[s*d-2*Math.PI*6378137/2,i*d-2*Math.PI*6378137/2]}class Hv{constructor(i,l,d){this.z=i,this.x=l,this.y=d,this.key=bm(0,i,i,l,d)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l){const d=function(v,x,C){var I=sA(256*v,256*(x=Math.pow(2,C)-x-1),C),R=sA(256*(v+1),256*(x+1),C);return I[0]+","+I[1]+","+R[0]+","+R[1]}(this.x,this.y,this.z),f=function(v,x,C){let I,R="";for(let H=v;H>0;H--)I=1<<H-1,R+=(x&I?1:0)+(C&I?2:0);return R}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",f).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lA{constructor(i,l){this.wrap=i,this.canonical=l,this.key=bm(i,l.z,l.z,l.x,l.y)}}class Oo{constructor(i,l,d,f,v){this.overscaledZ=i,this.wrap=l,this.canonical=new Hv(d,+f,+v),this.key=l===0&&i===d?this.canonical.key:bm(l,i,d,f,v)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const l=this.canonical.z-i;return i>this.canonical.z?new Oo(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Oo(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l=!0){if(this.overscaledZ===i&&l)return this.key;if(i>this.canonical.z)return bm(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-i;return bm(this.wrap*+l,i,i,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Oo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,f=2*this.canonical.y;return[new Oo(l,this.wrap,l,d,f),new Oo(l,this.wrap,l,d+1,f),new Oo(l,this.wrap,l,d,f+1),new Oo(l,this.wrap,l,d+1,f+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Oo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Oo(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lA(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function bm(s,i,l,d,f){const v=1<<Math.min(l,22);let x=v*(f%v)+d%v;return s&&l<22&&(x+=v*v*((s<0?-2*s-1:2*s)%(1<<2*(22-l)))),16*(32*x+l)+(i-l)}rn(Hv,"CanonicalTileID"),rn(Oo,"OverscaledTileID",{omit:["projMatrix"]});class jh extends S{constructor(i,l,d){super(i,l),this.z=d}}function wm(s,i){return s.x*i.x+s.y*i.y}function uA(s,i){if(s.length===1){let l=0;const d=i[l++];let f;for(;!f||d.equals(f);)if(f=i[l++],!f)return 1/0;for(;l<i.length;l++){const v=i[l],x=s[0],C=f.sub(d),I=v.sub(d),R=x.sub(d),H=wm(C,C),q=wm(C,I),Z=wm(I,I),J=wm(R,C),Q=wm(R,I),oe=H*Z-q*q,he=(Z*J-q*Q)/oe,Ce=(H*Q-q*J)/oe,Ne=d.z*(1-he-Ce)+f.z*he+v.z*Ce;if(isFinite(Ne))return Ne}return 1/0}{let l=1/0;for(const d of i)l=Math.min(l,d.z);return l}}function cA(s,i,l,d,f,v,x,C){const I=x*f.getElevationAt(s,i,!0,!0),R=v[0]!==0,H=R?v[1]===0?x*(v[0]/7-450):x*function(q,Z,J){const Q=Math.floor(Z[0]/8),oe=Math.floor(Z[1]/8),he=10*(Z[0]-8*Q),Ce=10*(Z[1]-8*oe),Ne=q.getElevationAt(Q,oe,!0,!0),we=q.getMeterToDEM(J),Be=Math.floor(.5*(he*we-1)),Ve=Math.floor(.5*(Ce*we-1)),$e=q.tileCoordToPixel(Q,oe),lt=2*Be+1,it=2*Ve+1,St=function(Ft,gt,Ht,xn,Kt){return[Ft.getElevationAtPixel(gt,Ht,!0),Ft.getElevationAtPixel(gt+Kt,Ht,!0),Ft.getElevationAtPixel(gt,Ht+Kt,!0),Ft.getElevationAtPixel(gt+xn,Ht+Kt,!0)]}(q,$e.x-Be,$e.y-Ve,lt,it),Bt=Math.abs(St[0]-St[1]),mt=Math.abs(St[2]-St[3]),At=Math.abs(St[0]-St[2])+Math.abs(St[1]-St[3]),It=Math.min(.25,.5*we*(Bt+mt)/lt),Lt=Math.min(.25,.5*we*At/it);return Ne+Math.max(It*he,Lt*Ce)}(f,v,C):I;return{base:I+(l===0)?-1:l,top:R?Math.max(H+d,I+l+2):I+d}}const DN=hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:RN}=DN,LN=hn([{name:"a_packed",components:4,type:"Float32"}]),{members:ON}=LN,zN=jv.types,BN=Math.cos(Math.PI/180*37.5);class Wv{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new zr,this.layoutVertexArray2=new Mr,this.indexArray=new uo,this.programConfigurations=new Kc(i.layers,i.zoom),this.segments=new Ei,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,d,f){this.hasPattern=kb("line",this.layers,l);const v=this.layers[0].layout.get("line-sort-key"),x=[];for(const{feature:H,id:q,index:Z,sourceLayerIndex:J}of i){const Q=this.layers[0]._featureFilter.needGeometry,oe=nd(H,Q);if(!this.layers[0]._featureFilter.filter(new et(this.zoom),oe,d))continue;const he=v?v.evaluate(oe,{},d):void 0,Ce={id:q,properties:H.properties,type:H.type,sourceLayerIndex:J,index:Z,geometry:Q?oe.geometry:Il(H,d,f),patterns:{},sortKey:he};x.push(Ce)}v&&x.sort((H,q)=>H.sortKey-q.sortKey);const{lineAtlas:C,featureIndex:I}=l,R=this.addConstantDashes(C);for(const H of x){const{geometry:q,index:Z,sourceLayerIndex:J}=H;if(R&&this.addFeatureDashes(H,C),this.hasPattern){const Q=Ab("line",this.layers,H,this.zoom,l);this.patternFeatures.push(Q)}else this.addFeature(H,q,Z,d,C.positions,l.availableImages);I.insert(i[Z].feature,q,Z,J,this.index)}}addConstantDashes(i){let l=!1;for(const d of this.layers){const f=d.paint.get("line-dasharray").value,v=d.layout.get("line-cap").value;if(f.kind!=="constant"||v.kind!=="constant")l=!0;else{const x=v.value,C=f.value;if(!C)continue;i.addDash(C,x)}}return l}addFeatureDashes(i,l){const d=this.zoom;for(const f of this.layers){const v=f.paint.get("line-dasharray").value,x=f.layout.get("line-cap").value;if(v.kind==="constant"&&x.kind==="constant")continue;let C,I;if(v.kind==="constant"){if(C=v.value,!C)continue}else C=v.evaluate({zoom:d},i);I=x.kind==="constant"?x.value:x.evaluate({zoom:d},i),l.addDash(C,I),i.patterns[f.id]=l.getKey(C,I)}}update(i,l,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,d,f)}addFeatures(i,l,d,f,v){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,l,d,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,ON)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,RN),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,d,f,v,x){const C=this.layers[0].layout,I=C.get("line-join").evaluate(i,{}),R=C.get("line-cap").evaluate(i,{}),H=C.get("line-miter-limit"),q=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const Z of l)this.addLine(Z,i,I,R,H,q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,d,v,x,f)}addLine(i,l,d,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ce=0;Ce<i.length-1;Ce++)this.totalDistance+=i[Ce].dist(i[Ce+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C=zN[l.type]==="Polygon";let I=i.length;for(;I>=2&&i[I-1].equals(i[I-2]);)I--;let R=0;for(;R<I-1&&i[R].equals(i[R+1]);)R++;if(I<(C?3:2))return;d==="bevel"&&(v=1.05);const H=this.overscaling<=16?122880/(512*this.overscaling):0,q=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let Z,J,Q,oe,he;this.e1=this.e2=-1,C&&(Z=i[I-2],he=i[R].sub(Z)._unit()._perp());for(let Ce=R;Ce<I;Ce++){if(Q=Ce===I-1?C?i[R+1]:void 0:i[Ce+1],Q&&i[Ce].equals(Q))continue;he&&(oe=he),Z&&(J=Z),Z=i[Ce],he=Q?Q.sub(Z)._unit()._perp():oe,oe=oe||he;let Ne=oe.add(he);Ne.x===0&&Ne.y===0||Ne._unit();const we=oe.x*he.x+oe.y*he.y,Be=Ne.x*he.x+Ne.y*he.y,Ve=Be!==0?1/Be:1/0,$e=2*Math.sqrt(2-2*Be),lt=Be<BN&&J&&Q,it=oe.x*he.y-oe.y*he.x>0;if(lt&&Ce>R){const mt=Z.dist(J);if(mt>2*H){const At=Z.sub(Z.sub(J)._mult(H/mt)._round());this.updateDistance(J,At),this.addCurrentVertex(At,oe,0,0,q),J=At}}const St=J&&Q;let Bt=St?d:C?"butt":f;if(St&&Bt==="round"&&(Ve<x?Bt="miter":Ve<=2&&(Bt="fakeround")),Bt==="miter"&&Ve>v&&(Bt="bevel"),Bt==="bevel"&&(Ve>2&&(Bt="flipbevel"),Ve<v&&(Bt="miter")),J&&this.updateDistance(J,Z),Bt==="miter")Ne._mult(Ve),this.addCurrentVertex(Z,Ne,0,0,q);else if(Bt==="flipbevel"){if(Ve>100)Ne=he.mult(-1);else{const mt=Ve*oe.add(he).mag()/oe.sub(he).mag();Ne._perp()._mult(mt*(it?-1:1))}this.addCurrentVertex(Z,Ne,0,0,q),this.addCurrentVertex(Z,Ne.mult(-1),0,0,q)}else if(Bt==="bevel"||Bt==="fakeround"){const mt=-Math.sqrt(Ve*Ve-1),At=it?mt:0,It=it?0:mt;if(J&&this.addCurrentVertex(Z,oe,At,It,q),Bt==="fakeround"){const Lt=Math.round(180*$e/Math.PI/20);for(let Ft=1;Ft<Lt;Ft++){let gt=Ft/Lt;if(gt!==.5){const xn=gt-.5;gt+=gt*xn*(gt-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*xn*xn+(.848013+we*(.215638*we-1.06021)))}const Ht=he.sub(oe)._mult(gt)._add(oe)._unit()._mult(it?-1:1);this.addHalfVertex(Z,Ht.x,Ht.y,!1,it,0,q)}}Q&&this.addCurrentVertex(Z,he,-At,-It,q)}else if(Bt==="butt")this.addCurrentVertex(Z,Ne,0,0,q);else if(Bt==="square"){const mt=J?1:-1;J||this.addCurrentVertex(Z,Ne,mt,mt,q),this.addCurrentVertex(Z,Ne,0,0,q),J&&this.addCurrentVertex(Z,Ne,mt,mt,q)}else Bt==="round"&&(J&&(this.addCurrentVertex(Z,oe,0,0,q),this.addCurrentVertex(Z,oe,1,1,q,!0)),Q&&(this.addCurrentVertex(Z,he,-1,-1,q,!0),this.addCurrentVertex(Z,he,0,0,q)));if(lt&&Ce<I-1){const mt=Z.dist(Q);if(mt>2*H){const At=Z.add(Q.sub(Z)._mult(H/mt)._round());this.updateDistance(Z,At),this.addCurrentVertex(At,he,0,0,q),Z=At}}}}addCurrentVertex(i,l,d,f,v,x=!1){const C=l.y*f-l.x,I=-l.y-l.x*f;this.addHalfVertex(i,l.x+l.y*d,l.y-l.x*d,x,!1,d,v),this.addHalfVertex(i,C,I,x,!0,-f,v)}addHalfVertex({x:i,y:l},d,f,v,x,C,I){this.layoutVertexArray.emplaceBack((i<<1)+(v?1:0),(l<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*f)+128,1+(C===0?0:C<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const R=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),I.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}rn(Wv,"LineBucket",{omit:["layers","patternFeatures"]});const FN=new Ot({"line-cap":new dt(Ct.layout_line["line-cap"]),"line-join":new dt(Ct.layout_line["line-join"]),"line-miter-limit":new Ye(Ct.layout_line["line-miter-limit"]),"line-round-limit":new Ye(Ct.layout_line["line-round-limit"]),"line-sort-key":new dt(Ct.layout_line["line-sort-key"])});var dA={paint:new Ot({"line-opacity":new dt(Ct.paint_line["line-opacity"]),"line-color":new dt(Ct.paint_line["line-color"]),"line-translate":new Ye(Ct.paint_line["line-translate"]),"line-translate-anchor":new Ye(Ct.paint_line["line-translate-anchor"]),"line-width":new dt(Ct.paint_line["line-width"]),"line-gap-width":new dt(Ct.paint_line["line-gap-width"]),"line-offset":new dt(Ct.paint_line["line-offset"]),"line-blur":new dt(Ct.paint_line["line-blur"]),"line-dasharray":new dt(Ct.paint_line["line-dasharray"]),"line-pattern":new dt(Ct.paint_line["line-pattern"]),"line-gradient":new Dt(Ct.paint_line["line-gradient"]),"line-trim-offset":new Ye(Ct.paint_line["line-trim-offset"])}),layout:FN};const hA=new class extends dt{possiblyEvaluate(s,i){return i=new et(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(s,i)}evaluate(s,i,l,d){return i=tt({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(s,i,l,d)}}(dA.paint.properties["line-width"].specification);function pA(s,i){return i>0?i+2*s:s}hA.useIntegerZoom=!0;const NN=hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$N=hn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),UN=hn([{name:"a_projected_pos",components:4,type:"Float32"}],4);hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jN=hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),VN=hn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const fA=hn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),HN=hn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);hn([{name:"triangle",components:3,type:"Uint16"}]),hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),hn([{type:"Float32",name:"offsetX"}]),hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var po=24;const Ks=128;function Ib(s,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new et(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:f}=l;let v=0;for(;v<d.length&&d[v]<=s;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<s+1;)x++;x=Math.min(d.length-1,x);const C=d[v],I=d[x];return l.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:I,interpolationType:f}:{kind:"camera",minZoom:C,maxZoom:I,minSize:l.evaluate(new et(C)),maxSize:l.evaluate(new et(I)),interpolationType:f}}}function Gv(s,{uSize:i,uSizeT:l},{lowerSize:d,upperSize:f}){return s.kind==="source"?d/Ks:s.kind==="composite"?Qn(d/Ks,f/Ks,l):i}function Vh(s,i){let l=0,d=0;if(s.kind==="constant")d=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=s,C=f?Le(Ua.interpolationFactor(f,i,v,x),0,1):0;s.kind==="camera"?d=Qn(s.minSize,s.maxSize,C):l=C}return{uSizeT:l,uSize:d}}var WN=Object.freeze({__proto__:null,getSizeData:Ib,evaluateSizeForFeature:Gv,evaluateSizeForZoom:Vh,SIZE_PACK_FACTOR:Ks});function GN(s,i,l){return s.sections.forEach(d=>{d.text=function(f,v,x){const C=v.layout.get("text-transform").evaluate(x,{});return C==="uppercase"?f=f.toLocaleUpperCase():C==="lowercase"&&(f=f.toLocaleLowerCase()),Ge.applyArabicShaping&&(f=Ge.applyArabicShaping(f)),f}(d.text,i,l)}),s}const Em={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42","\u2190":"\u2191","\u2192":"\u2193"};function qN(s){return s==="\uFE36"||s==="\uFE48"||s==="\uFE38"||s==="\uFE44"||s==="\uFE42"||s==="\uFE3E"||s==="\uFE3C"||s==="\uFE3A"||s==="\uFE18"||s==="\uFE40"||s==="\uFE10"||s==="\uFE13"||s==="\uFE14"||s==="\uFF40"||s==="\uFFE3"||s==="\uFE11"||s==="\uFE12"}function ZN(s){return s==="\uFE35"||s==="\uFE47"||s==="\uFE37"||s==="\uFE43"||s==="\uFE41"||s==="\uFE3D"||s==="\uFE3B"||s==="\uFE39"||s==="\uFE17"||s==="\uFE3F"}var Cm=Br,mA=function(s,i,l,d,f){var v,x,C=8*f-d-1,I=(1<<C)-1,R=I>>1,H=-7,q=l?f-1:0,Z=l?-1:1,J=s[i+q];for(q+=Z,v=J&(1<<-H)-1,J>>=-H,H+=C;H>0;v=256*v+s[i+q],q+=Z,H-=8);for(x=v&(1<<-H)-1,v>>=-H,H+=d;H>0;x=256*x+s[i+q],q+=Z,H-=8);if(v===0)v=1-R;else{if(v===I)return x?NaN:1/0*(J?-1:1);x+=Math.pow(2,d),v-=R}return(J?-1:1)*x*Math.pow(2,v-d)},gA=function(s,i,l,d,f,v){var x,C,I,R=8*v-f-1,H=(1<<R)-1,q=H>>1,Z=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=d?0:v-1,Q=d?1:-1,oe=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(C=isNaN(i)?1:0,x=H):(x=Math.floor(Math.log(i)/Math.LN2),i*(I=Math.pow(2,-x))<1&&(x--,I*=2),(i+=x+q>=1?Z/I:Z*Math.pow(2,1-q))*I>=2&&(x++,I/=2),x+q>=H?(C=0,x=H):x+q>=1?(C=(i*I-1)*Math.pow(2,f),x+=q):(C=i*Math.pow(2,q-1)*Math.pow(2,f),x=0));f>=8;s[l+J]=255&C,J+=Q,C/=256,f-=8);for(x=x<<f|C,R+=f;R>0;s[l+J]=255&x,J+=Q,x/=256,R-=8);s[l+J-Q]|=128*oe};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Br(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Br.Varint=0,Br.Fixed64=1,Br.Bytes=2,Br.Fixed32=5;var Pb=4294967296,yA=1/Pb,vA=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Dl(s){return s.type===Br.Bytes?s.readVarint()+s.pos:s.pos+1}function Hh(s,i,l){return l?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function _A(s,i,l){var d=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(d);for(var f=l.pos-1;f>=s;f--)l.buf[f+d]=l.buf[f]}function XN(s,i){for(var l=0;l<s.length;l++)i.writeVarint(s[l])}function KN(s,i){for(var l=0;l<s.length;l++)i.writeSVarint(s[l])}function YN(s,i){for(var l=0;l<s.length;l++)i.writeFloat(s[l])}function JN(s,i){for(var l=0;l<s.length;l++)i.writeDouble(s[l])}function QN(s,i){for(var l=0;l<s.length;l++)i.writeBoolean(s[l])}function e6(s,i){for(var l=0;l<s.length;l++)i.writeFixed32(s[l])}function t6(s,i){for(var l=0;l<s.length;l++)i.writeSFixed32(s[l])}function n6(s,i){for(var l=0;l<s.length;l++)i.writeFixed64(s[l])}function r6(s,i){for(var l=0;l<s.length;l++)i.writeSFixed64(s[l])}function qv(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function Wh(s,i,l){s[l]=i,s[l+1]=i>>>8,s[l+2]=i>>>16,s[l+3]=i>>>24}function xA(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}function i6(s,i,l){i.glyphs=[],s===1&&l.readMessage(o6,i)}function o6(s,i,l){if(s===3){const{id:d,bitmap:f,width:v,height:x,left:C,top:I,advance:R}=l.readMessage(a6,{});i.glyphs.push({id:d,bitmap:new Pl({width:v+6,height:x+6},f),metrics:{width:v,height:x,left:C,top:I,advance:R}})}else s===4?i.ascender=l.readSVarint():s===5&&(i.descender=l.readSVarint())}function a6(s,i,l){s===1?i.id=l.readVarint():s===2?i.bitmap=l.readBytes():s===3?i.width=l.readVarint():s===4?i.height=l.readVarint():s===5?i.left=l.readSVarint():s===6?i.top=l.readSVarint():s===7&&(i.advance=l.readVarint())}function Db(s){let i=0,l=0;for(const x of s)i+=x.w*x.h,l=Math.max(l,x.w);s.sort((x,C)=>C.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let f=0,v=0;for(const x of s)for(let C=d.length-1;C>=0;C--){const I=d[C];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===I.w&&x.h===I.h){const R=d.pop();C<d.length&&(d[C]=R)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(d.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:f,h:v,fill:i/(f*v)||0}}Br.prototype={destroy:function(){this.buf=null},readFields:function(s,i,l){for(l=l||this.length;this.pos<l;){var d=this.readVarint(),f=d>>3,v=this.pos;this.type=7&d,s(f,i,this),this.pos===v&&this.skip(d)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=qv(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=xA(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=qv(this.buf,this.pos)+qv(this.buf,this.pos+4)*Pb;return this.pos+=8,s},readSFixed64:function(){var s=qv(this.buf,this.pos)+xA(this.buf,this.pos+4)*Pb;return this.pos+=8,s},readFloat:function(){var s=mA(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=mA(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,l,d=this.buf;return i=127&(l=d[this.pos++]),l<128?i:(i|=(127&(l=d[this.pos++]))<<7,l<128?i:(i|=(127&(l=d[this.pos++]))<<14,l<128?i:(i|=(127&(l=d[this.pos++]))<<21,l<128?i:function(f,v,x){var C,I,R=x.buf;if(C=(112&(I=R[x.pos++]))>>4,I<128||(C|=(127&(I=R[x.pos++]))<<3,I<128)||(C|=(127&(I=R[x.pos++]))<<10,I<128)||(C|=(127&(I=R[x.pos++]))<<17,I<128)||(C|=(127&(I=R[x.pos++]))<<24,I<128)||(C|=(1&(I=R[x.pos++]))<<31,I<128))return Hh(f,C,v);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=d[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&vA?function(l,d,f){return vA.decode(l.subarray(d,f))}(this.buf,i,s):function(l,d,f){for(var v="",x=d;x<f;){var C,I,R,H=l[x],q=null,Z=H>239?4:H>223?3:H>191?2:1;if(x+Z>f)break;Z===1?H<128&&(q=H):Z===2?(192&(C=l[x+1]))==128&&(q=(31&H)<<6|63&C)<=127&&(q=null):Z===3?(I=l[x+2],(192&(C=l[x+1]))==128&&(192&I)==128&&((q=(15&H)<<12|(63&C)<<6|63&I)<=2047||q>=55296&&q<=57343)&&(q=null)):Z===4&&(I=l[x+2],R=l[x+3],(192&(C=l[x+1]))==128&&(192&I)==128&&(192&R)==128&&((q=(15&H)<<18|(63&C)<<12|(63&I)<<6|63&R)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,Z=1):q>65535&&(q-=65536,v+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),v+=String.fromCharCode(q),x+=Z}return v}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==Br.Bytes)return s.push(this.readVarint(i));var l=Dl(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==Br.Bytes)return s.push(this.readSVarint());var i=Dl(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Br.Bytes)return s.push(this.readBoolean());var i=Dl(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Br.Bytes)return s.push(this.readFloat());var i=Dl(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Br.Bytes)return s.push(this.readDouble());var i=Dl(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Br.Bytes)return s.push(this.readFixed32());var i=Dl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Br.Bytes)return s.push(this.readSFixed32());var i=Dl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Br.Bytes)return s.push(this.readFixed64());var i=Dl(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Br.Bytes)return s.push(this.readSFixed64());var i=Dl(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===Br.Varint)for(;this.buf[this.pos++]>127;);else if(i===Br.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Br.Fixed32)this.pos+=4;else{if(i!==Br.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Wh(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Wh(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Wh(this.buf,-1&s,this.pos),Wh(this.buf,Math.floor(s*yA),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Wh(this.buf,-1&s,this.pos),Wh(this.buf,Math.floor(s*yA),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,l){var d,f;if(i>=0?(d=i%4294967296|0,f=i/4294967296|0):(f=~(-i/4294967296),4294967295^(d=~(-i%4294967296))?d=d+1|0:(d=0,f=f+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,x,C){C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,C.buf[C.pos]=127&(v>>>=7)}(d,0,l),function(v,x){var C=(7&v)<<4;x.buf[x.pos++]|=C|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(Boolean(s))},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(d,f,v){for(var x,C,I=0;I<f.length;I++){if((x=f.charCodeAt(I))>55295&&x<57344){if(!C){x>56319||I+1===f.length?(d[v++]=239,d[v++]=191,d[v++]=189):C=x;continue}if(x<56320){d[v++]=239,d[v++]=191,d[v++]=189,C=x;continue}x=C-55296<<10|x-56320|65536,C=null}else C&&(d[v++]=239,d[v++]=191,d[v++]=189,C=null);x<128?d[v++]=x:(x<2048?d[v++]=x>>6|192:(x<65536?d[v++]=x>>12|224:(d[v++]=x>>18|240,d[v++]=x>>12&63|128),d[v++]=x>>6&63|128),d[v++]=63&x|128)}return v}(this.buf,s,this.pos);var l=this.pos-i;l>=128&&_A(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),gA(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),gA(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,i){this.pos++;var l=this.pos;s(i,this);var d=this.pos-l;d>=128&&_A(l,d,this),this.pos=l-1,this.writeVarint(d),this.pos+=d},writeMessage:function(s,i,l){this.writeTag(s,Br.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,XN,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,KN,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,QN,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,YN,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,JN,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,e6,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,t6,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,n6,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,r6,i)},writeBytesField:function(s,i){this.writeTag(s,Br.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,Br.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,Br.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,Br.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,Br.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,Br.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,Br.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,Br.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,Br.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,Br.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,Boolean(i))}};class Rb{constructor(i,{pixelRatio:l,version:d,stretchX:f,stretchY:v,content:x}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=f,this.stretchY=v,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class bA{constructor(i,l){const d={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(i,d,v),this.addImages(l,f,v);const{w:x,h:C}=Db(v),I=new oa({width:x||1,height:C||1});for(const R in i){const H=i[R],q=d[R].paddedRect;oa.copy(H.data,I,{x:0,y:0},{x:q.x+1,y:q.y+1},H.data)}for(const R in l){const H=l[R],q=f[R].paddedRect,Z=q.x+1,J=q.y+1,Q=H.data.width,oe=H.data.height;oa.copy(H.data,I,{x:0,y:0},{x:Z,y:J},H.data),oa.copy(H.data,I,{x:0,y:oe-1},{x:Z,y:J-1},{width:Q,height:1}),oa.copy(H.data,I,{x:0,y:0},{x:Z,y:J+oe},{width:Q,height:1}),oa.copy(H.data,I,{x:Q-1,y:0},{x:Z-1,y:J},{width:1,height:oe}),oa.copy(H.data,I,{x:0,y:0},{x:Z+Q,y:J},{width:1,height:oe})}this.image=I,this.iconPositions=d,this.patternPositions=f}addImages(i,l,d){for(const f in i){const v=i[f],x={x:0,y:0,w:v.data.width+2,h:v.data.height+2};d.push(x),l[f]=new Rb(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(i,l){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(d=>i.hasImage(d)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in i.updatedImages)this.patchUpdatedImage(this.iconPositions[d],i.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],i.getImage(d),l)}patchUpdatedImage(i,l,d){if(!i||!l||i.version===l.version)return;i.version=l.version;const[f,v]=i.tl;d.update(l.data,void 0,{x:f,y:v})}}rn(Rb,"ImagePosition"),rn(bA,"ImageAtlas");const Ea={horizontal:1,vertical:2,horizontalOnly:3};class Sm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,l){const d=new Sm;return d.scale=i||1,d.fontStack=l,d}static forImage(i){const l=new Sm;return l.imageName=i,l}}class Gh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const d=new Gh;for(let f=0;f<i.sections.length;f++){const v=i.sections[f];v.image?d.addImageSection(v):d.addTextSection(v,l)}return d}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(l,d){let f="";for(let v=0;v<l.length;v++){const x=l.charCodeAt(v+1)||null,C=l.charCodeAt(v-1)||null;f+=!d&&(x&&G(x)&&!Em[l[v+1]]||C&&G(C)&&!Em[l[v-1]])||!Em[l[v]]?l[v]:Em[l[v]]}return f}(this.text,i)}trim(){let i=0;for(let d=0;d<this.text.length&&Zv[this.text.charCodeAt(d)];d++)i++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=i&&Zv[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const d=new Gh;return d.text=this.text.substring(i,l),d.sectionIndex=this.sectionIndex.slice(i,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}addTextSection(i,l){this.text+=i.text,this.sections.push(Sm.forText(i.scale,i.fontStack||l));const d=this.sections.length-1;for(let f=0;f<i.text.length;++f)this.sectionIndex.push(d)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Xe("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Sm.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Xe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Lb(s,i,l,d,f,v,x,C,I,R,H,q,Z,J,Q){const oe=Gh.fromFeature(s,f);q===Ea.vertical&&oe.verticalizePunctuation(Z);let he=[];const Ce=function($e,lt,it,St,Bt,mt){if(!$e)return[];const At=[],It=function(Ht,xn,Kt,sn,Wt,En){let Wn=0;for(let jn=0;jn<Ht.length();jn++){const $n=Ht.getSection(jn);Wn+=wA(Ht.getCharCode(jn),$n,sn,Wt,xn,En)}return Wn/Math.max(1,Math.ceil(Wn/Kt))}($e,lt,it,St,Bt,mt),Lt=$e.text.indexOf("\u200B")>=0;let Ft=0;for(let Ht=0;Ht<$e.length();Ht++){const xn=$e.getSection(Ht),Kt=$e.getCharCode(Ht);if(Zv[Kt]||(Ft+=wA(Kt,xn,St,Bt,lt,mt)),Ht<$e.length()-1){const sn=!((gt=Kt)<11904||!(mv(gt)||Ih(gt)||y(gt)||Ev(gt)||vv(gt)||fv(gt)||gv(gt)||qc(gt)||_v(gt)||tm(gt)||yv(gt)||_(gt)||Mh(gt)||Qf(gt)||Jf(gt)||em(gt)||Cu(gt)||Zc(gt)||bv(gt)||xv(gt)));(s6[Kt]||sn||xn.imageName)&&At.push(CA(Ht+1,Ft,It,At,l6(Kt,$e.getCharCode(Ht+1),sn&&Lt),!1))}}var gt;return SA(CA($e.length(),Ft,It,At,0,!0))}(oe,R,v,i,d,J),{processBidirectionalText:Ne,processStyledBidirectionalText:we}=Ge;if(Ne&&oe.sections.length===1){const $e=Ne(oe.toString(),Ce);for(const lt of $e){const it=new Gh;it.text=lt,it.sections=oe.sections;for(let St=0;St<lt.length;St++)it.sectionIndex.push(0);he.push(it)}}else if(we){const $e=we(oe.text,oe.sectionIndex,Ce);for(const lt of $e){const it=new Gh;it.text=lt[0],it.sectionIndex=lt[1],it.sections=oe.sections,he.push(it)}}else he=function($e,lt){const it=[],St=$e.text;let Bt=0;for(const mt of lt)it.push($e.substring(Bt,mt)),Bt=mt;return Bt<St.length&&it.push($e.substring(Bt,St.length)),it}(oe,Ce);const Be=[],Ve={positionedLines:Be,text:oe.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:q,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function($e,lt,it,St,Bt,mt,At,It,Lt,Ft,gt,Ht){let xn=0,Kt=0,sn=0;const Wt=It==="right"?1:It==="left"?0:.5;let En=!1;for(const Pn of Bt){const Gn=Pn.getSections();for(const br of Gn){if(br.imageName)continue;const Wr=lt[br.fontStack];if(Wr&&(En=Wr.ascender!==void 0&&Wr.descender!==void 0,!En))break}if(!En)break}let Wn=0;for(const Pn of Bt){Pn.trim();const Gn=Pn.getMaxScale(),br=(Gn-1)*po,Wr={positionedGlyphs:[],lineOffset:0};$e.positionedLines[Wn]=Wr;const Fr=Wr.positionedGlyphs;let Gr=0;if(!Pn.length()){Kt+=mt,++Wn;continue}let Kr=0,ui=0;for(let yr=0;yr<Pn.length();yr++){const Di=Pn.getSection(yr),Si=Pn.getSectionIndex(yr),rr=Pn.getCharCode(yr);let ti=Di.scale,$i=null,wr=null,mi=null,bo=po,Yi=0;const Ji=!(Lt===Ea.horizontal||!gt&&!j(rr)||gt&&(Zv[rr]||(jn=rr,Gc(jn)||pv(jn)||Yf(jn)||Ph(jn)||p(jn))));if(Di.imageName){const zo=St[Di.imageName];if(!zo)continue;mi=Di.imageName,$e.iconsInText=$e.iconsInText||!0,wr=zo.paddedRect;const Qi=zo.displaySize;ti=ti*po/Ht,$i={width:Qi[0],height:Qi[1],left:1,top:-3,advance:Ji?Qi[1]:Qi[0],localGlyph:!1},Yi=En?-$i.height*ti:Gn*po-17-Qi[1]*ti,bo=$i.advance;const Ll=(Ji?Qi[0]:Qi[1])*ti-po*Gn;Ll>0&&Ll>Gr&&(Gr=Ll)}else{const zo=it[Di.fontStack];if(!zo)continue;zo[rr]&&(wr=zo[rr]);const Qi=lt[Di.fontStack];if(!Qi)continue;const Ll=Qi.glyphs[rr];if(!Ll)continue;if($i=Ll.metrics,bo=rr!==8203?po:0,En){const Yh=Qi.ascender!==void 0?Math.abs(Qi.ascender):0,Rm=Qi.descender!==void 0?Math.abs(Qi.descender):0,Lm=(Yh+Rm)*ti;Kr<Lm&&(Kr=Lm,ui=(Yh-Rm)/2*ti),Yi=-Yh*ti}else Yi=(Gn-ti)*po-17}Ji?($e.verticalizable=!0,Fr.push({glyph:rr,imageName:mi,x:xn,y:Kt+Yi,vertical:Ji,scale:ti,localGlyph:$i.localGlyph,fontStack:Di.fontStack,sectionIndex:Si,metrics:$i,rect:wr}),xn+=bo*ti+Ft):(Fr.push({glyph:rr,imageName:mi,x:xn,y:Kt+Yi,vertical:Ji,scale:ti,localGlyph:$i.localGlyph,fontStack:Di.fontStack,sectionIndex:Si,metrics:$i,rect:wr}),xn+=$i.advance*ti+Ft)}Fr.length!==0&&(sn=Math.max(xn-Ft,sn),En?TA(Fr,Wt,Gr,ui,mt*Gn/2):TA(Fr,Wt,Gr,0,mt/2)),xn=0;const Ki=mt*Gn+Gr;Wr.lineOffset=Math.max(Gr,br),Kt+=Ki,++Wn}var jn;const $n=Kt,{horizontalAlign:Sn,verticalAlign:gr}=Ob(At);(function(Pn,Gn,br,Wr,Fr,Gr){const Kr=(Gn-br)*Fr,ui=-Gr*Wr;for(const Ki of Pn)for(const yr of Ki.positionedGlyphs)yr.x+=Kr,yr.y+=ui})($e.positionedLines,Wt,Sn,gr,sn,$n),$e.top+=-gr*$n,$e.bottom=$e.top+$n,$e.left+=-Sn*sn,$e.right=$e.left+sn,$e.hasBaseline=En}(Ve,i,l,d,he,x,C,I,q,R,Z,Q),!function($e){for(const lt of $e)if(lt.positionedGlyphs.length!==0)return!1;return!0}(Be)&&Ve}const Zv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},s6={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function wA(s,i,l,d,f,v){if(i.imageName){const x=d[i.imageName];return x?x.displaySize[0]*i.scale*po/v+f:0}{const x=l[i.fontStack],C=x&&x.glyphs[s];return C?C.metrics.advance*i.scale+f:0}}function EA(s,i,l,d){const f=Math.pow(s-i,2);return d?s<i?f/2:2*f:f+Math.abs(l)*l}function l6(s,i,l){let d=0;return s===10&&(d-=1e4),l&&(d+=150),s!==40&&s!==65288||(d+=50),i!==41&&i!==65289||(d+=50),d}function CA(s,i,l,d,f,v){let x=null,C=EA(i,l,f,v);for(const I of d){const R=EA(i-I.x,l,f,v)+I.badness;R<=C&&(x=I,C=R)}return{index:s,x:i,priorBreak:x,badness:C}}function SA(s){return s?SA(s.priorBreak).concat(s.index):[]}function Ob(s){let i=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function TA(s,i,l,d,f){if(!(i||l||d||f))return;const v=s.length-1,x=s[v],C=(x.x+x.metrics.advance*x.scale)*i;for(let I=0;I<=v;I++)s[I].x-=C,s[I].y+=l+d+f}function u6(s,i,l){const{horizontalAlign:d,verticalAlign:f}=Ob(l),v=i[0]-s.displaySize[0]*d,x=i[1]-s.displaySize[1]*f;return{image:s,top:x,bottom:x+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function kA(s,i,l,d,f,v){const x=s.image;let C;if(x.content){const he=x.content,Ce=x.pixelRatio||1;C=[he[0]/Ce,he[1]/Ce,x.displaySize[0]-he[2]/Ce,x.displaySize[1]-he[3]/Ce]}const I=i.left*v,R=i.right*v;let H,q,Z,J;l==="width"||l==="both"?(J=f[0]+I-d[3],q=f[0]+R+d[1]):(J=f[0]+(I+R-x.displaySize[0])/2,q=J+x.displaySize[0]);const Q=i.top*v,oe=i.bottom*v;return l==="height"||l==="both"?(H=f[1]+Q-d[0],Z=f[1]+oe+d[2]):(H=f[1]+(Q+oe-x.displaySize[1])/2,Z=H+x.displaySize[1]),{image:x,top:H,right:q,bottom:Z,left:J,collisionPadding:C}}class Rl extends S{constructor(i,l,d,f,v){super(i,l),this.angle=f,this.z=d,v!==void 0&&(this.segment=v)}clone(){return new Rl(this.x,this.y,this.z,this.angle,this.segment)}}function AA(s,i,l,d,f){if(i.segment===void 0)return!0;let v=i,x=i.segment+1,C=0;for(;C>-l/2;){if(x--,x<0)return!1;C-=s[x].dist(v),v=s[x]}C+=s[x].dist(s[x+1]),x++;const I=[];let R=0;for(;C<l/2;){const H=s[x],q=s[x+1];if(!q)return!1;let Z=s[x-1].angleTo(H)-H.angleTo(q);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:C,angleDelta:Z}),R+=Z;C-I[0].distance>d;)R-=I.shift().angleDelta;if(R>f)return!1;x++,C+=H.dist(q)}return!0}function MA(s){let i=0;for(let l=0;l<s.length-1;l++)i+=s[l].dist(s[l+1]);return i}function IA(s,i,l){return s?.6*i*l:0}function PA(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function c6(s,i,l,d,f,v){const x=IA(l,f,v),C=PA(l,d)*v;let I=0;const R=MA(s)/2;for(let H=0;H<s.length-1;H++){const q=s[H],Z=s[H+1],J=q.dist(Z);if(I+J>R){const Q=(R-I)/J,oe=Qn(q.x,Z.x,Q),he=Qn(q.y,Z.y,Q),Ce=new Rl(oe,he,0,Z.angleTo(q),H);return!x||AA(s,Ce,C,x,i)?Ce:void 0}I+=J}}function d6(s,i,l,d,f,v,x,C,I){const R=IA(d,v,x),H=PA(d,f),q=H*x,Z=s[0].x===0||s[0].x===I||s[0].y===0||s[0].y===I;return i-q<i/4&&(i=q+i/4),DA(s,Z?i/2*C%i:(H/2+2*v)*x*C%i,i,R,l,q,Z,!1,I)}function DA(s,i,l,d,f,v,x,C,I){const R=v/2,H=MA(s);let q=0,Z=i-l,J=[];for(let Q=0;Q<s.length-1;Q++){const oe=s[Q],he=s[Q+1],Ce=oe.dist(he),Ne=he.angleTo(oe);for(;Z+l<q+Ce;){Z+=l;const we=(Z-q)/Ce,Be=Qn(oe.x,he.x,we),Ve=Qn(oe.y,he.y,we);if(Be>=0&&Be<I&&Ve>=0&&Ve<I&&Z-R>=0&&Z+R<=H){const $e=new Rl(Be,Ve,0,Ne,Q);$e._round(),d&&!AA(s,$e,v,d,f)||J.push($e)}}q+=Ce}return C||J.length||x||(J=DA(s,q/2,l,d,f,v,x,!0,I)),J}function RA(s,i,l,d,f){const v=[];for(let x=0;x<s.length;x++){const C=s[x];let I;for(let R=0;R<C.length-1;R++){let H=C[R],q=C[R+1];H.x<i&&q.x<i||(H.x<i?H=new S(i,H.y+(i-H.x)/(q.x-H.x)*(q.y-H.y))._round():q.x<i&&(q=new S(i,H.y+(i-H.x)/(q.x-H.x)*(q.y-H.y))._round()),H.y<l&&q.y<l||(H.y<l?H=new S(H.x+(l-H.y)/(q.y-H.y)*(q.x-H.x),l)._round():q.y<l&&(q=new S(H.x+(l-H.y)/(q.y-H.y)*(q.x-H.x),l)._round()),H.x>=d&&q.x>=d||(H.x>=d?H=new S(d,H.y+(d-H.x)/(q.x-H.x)*(q.y-H.y))._round():q.x>=d&&(q=new S(d,H.y+(d-H.x)/(q.x-H.x)*(q.y-H.y))._round()),H.y>=f&&q.y>=f||(H.y>=f?H=new S(H.x+(f-H.y)/(q.y-H.y)*(q.x-H.x),f)._round():q.y>=f&&(q=new S(H.x+(f-H.y)/(q.y-H.y)*(q.x-H.x),f)._round()),I&&H.equals(I[I.length-1])||(I=[H],v.push(I)),I.push(q)))))}}return v}rn(Rl,"Anchor");const Tm=1e20;function LA(s,i,l,d,f,v,x,C,I){for(let R=i;R<i+d;R++)OA(s,l*v+R,v,f,x,C,I);for(let R=l;R<l+f;R++)OA(s,R*v+i,1,d,x,C,I)}function OA(s,i,l,d,f,v,x){v[0]=0,x[0]=-Tm,x[1]=Tm,f[0]=s[i];for(let C=1,I=0,R=0;C<d;C++){f[C]=s[i+C*l];const H=C*C;do{const q=v[I];R=(f[C]-f[q]+H-q*q)/(C-q)/2}while(R<=x[I]&&--I>-1);I++,v[I]=C,x[I]=R,x[I+1]=Tm}for(let C=0,I=0;C<d;C++){for(;x[I+1]<C;)I++;const R=v[I],H=C-R;s[i+C*l]=f[R]+H*H}}const zb={none:0,ideographs:1,all:2};class qh{constructor(i,l,d){this.requestManager=i,this.localGlyphMode=l,this.localFontFamily=d,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,l){const d=[];for(const f in i)for(const v of i[f])d.push({stack:f,id:v});Ze(d,({stack:f,id:v},x)=>{let C=this.entries[f];C||(C=this.entries[f]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let I=C.glyphs[v];if(I!==void 0)return void x(null,{stack:f,id:v,glyph:I});if(I=this._tinySDF(C,f,v),I)return C.glyphs[v]=I,void x(null,{stack:f,id:v,glyph:I});const R=Math.floor(v/256);if(256*R>65535)return void x(new Error("glyphs > 65535 not supported"));if(C.ranges[R])return void x(null,{stack:f,id:v,glyph:I});let H=C.requests[R];H||(H=C.requests[R]=[],qh.loadGlyphRange(f,R,this.url,this.requestManager,(q,Z)=>{if(Z){C.ascender=Z.ascender,C.descender=Z.descender;for(const J in Z.glyphs)this._doesCharSupportLocalGlyph(+J)||(C.glyphs[+J]=Z.glyphs[+J]);C.ranges[R]=!0}for(const J of H)J(q,Z);delete C.requests[R]})),H.push((q,Z)=>{q?x(q):Z&&x(null,{stack:f,id:v,glyph:Z.glyphs[v]||null})})},(f,v)=>{if(f)l(f);else if(v){const x={};for(const{stack:C,id:I,glyph:R}of v)x[C]===void 0&&(x[C]={}),x[C].glyphs===void 0&&(x[C].glyphs={}),x[C].glyphs[I]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics},x[C].ascender=this.entries[C].ascender,x[C].descender=this.entries[C].descender;l(null,x)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==zb.none&&(this.localGlyphMode===zb.all?!!this.localFontFamily:!!this.localFontFamily&&(tm(i)||wv(i)||Mh(i)||Cu(i)||qc(i)))}_tinySDF(i,l,d){const f=this.localFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let v=i.tinySDF;if(!v){let oe="400";/bold/i.test(l)?oe="900":/medium/i.test(l)?oe="500":/light/i.test(l)&&(oe="200"),v=i.tinySDF=new qh.TinySDF({fontFamily:f,fontWeight:oe,fontSize:48,buffer:6,radius:16}),v.fontWeight=oe}if(this.localGlyphs[v.fontWeight][d])return this.localGlyphs[v.fontWeight][d];const x=String.fromCharCode(d),{data:C,width:I,height:R,glyphWidth:H,glyphHeight:q,glyphLeft:Z,glyphTop:J,glyphAdvance:Q}=v.draw(x);return this.localGlyphs[v.fontWeight][d]={id:d,bitmap:new Pl({width:I,height:R},C),metrics:{width:H/2,height:q/2,left:Z/2,top:J/2-27,advance:Q/2,localGlyph:!0}}}}function zA(s,i,l,d){const f=[],v=s.image,x=v.pixelRatio,C=v.paddedRect.w-2,I=v.paddedRect.h-2,R=s.right-s.left,H=s.bottom-s.top,q=v.stretchX||[[0,C]],Z=v.stretchY||[[0,I]],J=(mt,At)=>mt+At[1]-At[0],Q=q.reduce(J,0),oe=Z.reduce(J,0),he=C-Q,Ce=I-oe;let Ne=0,we=Q,Be=0,Ve=oe,$e=0,lt=he,it=0,St=Ce;if(v.content&&d){const mt=v.content;Ne=Xv(q,0,mt[0]),Be=Xv(Z,0,mt[1]),we=Xv(q,mt[0],mt[2]),Ve=Xv(Z,mt[1],mt[3]),$e=mt[0]-Ne,it=mt[1]-Be,lt=mt[2]-mt[0]-we,St=mt[3]-mt[1]-Ve}const Bt=(mt,At,It,Lt)=>{const Ft=Kv(mt.stretch-Ne,we,R,s.left),gt=Yv(mt.fixed-$e,lt,mt.stretch,Q),Ht=Kv(At.stretch-Be,Ve,H,s.top),xn=Yv(At.fixed-it,St,At.stretch,oe),Kt=Kv(It.stretch-Ne,we,R,s.left),sn=Yv(It.fixed-$e,lt,It.stretch,Q),Wt=Kv(Lt.stretch-Be,Ve,H,s.top),En=Yv(Lt.fixed-it,St,Lt.stretch,oe),Wn=new S(Ft,Ht),jn=new S(Kt,Ht),$n=new S(Kt,Wt),Sn=new S(Ft,Wt),gr=new S(gt/x,xn/x),Pn=new S(sn/x,En/x),Gn=i*Math.PI/180;if(Gn){const Fr=Math.sin(Gn),Gr=Math.cos(Gn),Kr=[Gr,-Fr,Fr,Gr];Wn._matMult(Kr),jn._matMult(Kr),Sn._matMult(Kr),$n._matMult(Kr)}const br=mt.stretch+mt.fixed,Wr=At.stretch+At.fixed;return{tl:Wn,tr:jn,bl:Sn,br:$n,tex:{x:v.paddedRect.x+1+br,y:v.paddedRect.y+1+Wr,w:It.stretch+It.fixed-br,h:Lt.stretch+Lt.fixed-Wr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gr,pixelOffsetBR:Pn,minFontScaleX:lt/x/R,minFontScaleY:St/x/H,isSDF:l}};if(d&&(v.stretchX||v.stretchY)){const mt=BA(q,he,Q),At=BA(Z,Ce,oe);for(let It=0;It<mt.length-1;It++){const Lt=mt[It],Ft=mt[It+1];for(let gt=0;gt<At.length-1;gt++)f.push(Bt(Lt,At[gt],Ft,At[gt+1]))}}else f.push(Bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:I+1}));return f}function Xv(s,i,l){let d=0;for(const f of s)d+=Math.max(i,Math.min(l,f[1]))-Math.max(i,Math.min(l,f[0]));return d}function BA(s,i,l){const d=[{fixed:-1,stretch:0}];for(const[f,v]of s){const x=d[d.length-1];d.push({fixed:f-x.stretch,stretch:x.stretch}),d.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return d.push({fixed:i+1,stretch:l}),d}function Kv(s,i,l,d){return s/i*l+d}function Yv(s,i,l,d){return s-i*l/d}function h6(s,i,l,d){const f=i+s.positionedLines[d].lineOffset;return d===0?l+f/2:l+(f+(i+s.positionedLines[d-1].lineOffset))/2}qh.loadGlyphRange=function(s,i,l,d,f){const v=256*i,x=v+255,C=d.transformRequest(d.normalizeGlyphsURL(l).replace("{fontstack}",s).replace("{range}",`${v}-${x}`),vt.Glyphs);kn(C,(I,R)=>{if(I)f(I);else if(R){const H={},q=function(Z){return new Cm(Z).readFields(i6,{})}(R);for(const Z of q.glyphs)H[Z.id]=Z;f(null,{glyphs:H,ascender:q.ascender,descender:q.descender})}})},qh.TinySDF=class{constructor({fontSize:s=24,buffer:i=3,radius:l=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:v="normal",fontStyle:x="normal"}={}){this.buffer=i,this.cutoff=d,this.radius=l;const C=this.size=s+4*i,I=this._createCanvas(C),R=this.ctx=I.getContext("2d",{willReadFrequently:!0});R.font=`${x} ${v} ${s}px ${f}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(s){const i=document.createElement("canvas");return i.width=i.height=s,i}draw(s){const{width:i,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:v}=this.ctx.measureText(s),x=Math.ceil(l),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-f))),I=Math.min(this.size-this.buffer,x+Math.ceil(d)),R=C+2*this.buffer,H=I+2*this.buffer,q=Math.max(R*H,0),Z=new Uint8ClampedArray(q),J={data:Z,width:R,height:H,glyphWidth:C,glyphHeight:I,glyphTop:x,glyphLeft:0,glyphAdvance:i};if(C===0||I===0)return J;const{ctx:Q,buffer:oe,gridInner:he,gridOuter:Ce}=this;Q.clearRect(oe,oe,C,I),Q.fillText(s,oe,oe+x);const Ne=Q.getImageData(oe,oe,C,I);Ce.fill(Tm,0,q),he.fill(0,0,q);for(let we=0;we<I;we++)for(let Be=0;Be<C;Be++){const Ve=Ne.data[4*(we*C+Be)+3]/255;if(Ve===0)continue;const $e=(we+oe)*R+Be+oe;if(Ve===1)Ce[$e]=0,he[$e]=Tm;else{const lt=.5-Ve;Ce[$e]=lt>0?lt*lt:0,he[$e]=lt<0?lt*lt:0}}LA(Ce,0,0,R,H,R,this.f,this.v,this.z),LA(he,oe,oe,C,I,R,this.f,this.v,this.z);for(let we=0;we<q;we++){const Be=Math.sqrt(Ce[we])-Math.sqrt(he[we]);Z[we]=Math.round(255-255*(Be/this.radius+this.cutoff))}return J}};class p6{constructor(i=[],l=f6){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:d}=this,f=l[i];for(;i>0;){const v=i-1>>1,x=l[v];if(d(f,x)>=0)break;l[i]=x,i=v}l[i]=f}_down(i){const{data:l,compare:d}=this,f=this.length>>1,v=l[i];for(;i<f;){let x=1+(i<<1),C=l[x];const I=x+1;if(I<this.length&&d(l[I],C)<0&&(x=I,C=l[I]),d(C,v)>=0)break;l[i]=C,i=x}l[i]=v}}function f6(s,i){return s<i?-1:s>i?1:0}function m6(s,i=1,l=!1){let d=1/0,f=1/0,v=-1/0,x=-1/0;const C=s[0];for(let J=0;J<C.length;J++){const Q=C[J];(!J||Q.x<d)&&(d=Q.x),(!J||Q.y<f)&&(f=Q.y),(!J||Q.x>v)&&(v=Q.x),(!J||Q.y>x)&&(x=Q.y)}const I=Math.min(v-d,x-f);let R=I/2;const H=new p6([],g6);if(I===0)return new S(d,f);for(let J=d;J<v;J+=I)for(let Q=f;Q<x;Q+=I)H.push(new Zh(J+R,Q+R,R,s));let q=function(J){let Q=0,oe=0,he=0;const Ce=J[0];for(let Ne=0,we=Ce.length,Be=we-1;Ne<we;Be=Ne++){const Ve=Ce[Ne],$e=Ce[Be],lt=Ve.x*$e.y-$e.x*Ve.y;oe+=(Ve.x+$e.x)*lt,he+=(Ve.y+$e.y)*lt,Q+=3*lt}return new Zh(oe/Q,he/Q,0,J)}(s),Z=H.length;for(;H.length;){const J=H.pop();(J.d>q.d||!q.d)&&(q=J,l&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,Z)),J.max-q.d<=i||(R=J.h/2,H.push(new Zh(J.p.x-R,J.p.y-R,R,s)),H.push(new Zh(J.p.x+R,J.p.y-R,R,s)),H.push(new Zh(J.p.x-R,J.p.y+R,R,s)),H.push(new Zh(J.p.x+R,J.p.y+R,R,s)),Z+=4)}return l&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${q.d}`)),q.p}function g6(s,i){return i.max-s.max}class Zh{constructor(i,l,d,f){this.p=new S(i,l),this.h=d,this.d=function(v,x){let C=!1,I=1/0;for(let R=0;R<x.length;R++){const H=x[R];for(let q=0,Z=H.length,J=Z-1;q<Z;J=q++){const Q=H[q],oe=H[J];Q.y>v.y!=oe.y>v.y&&v.x<(oe.x-Q.x)*(v.y-Q.y)/(oe.y-Q.y)+Q.x&&(C=!C),I=Math.min(I,O2(v,Q,oe))}}return(C?1:-1)*Math.sqrt(I)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}}const Bb=Number.POSITIVE_INFINITY,y6=Math.sqrt(2);function FA(s,[i,l]){let d=0,f=0;if(l===Bb){i<0&&(i=0);const v=i/y6;switch(s){case"top-right":case"top-left":f=v-7;break;case"bottom-right":case"bottom-left":f=7-v;break;case"bottom":f=7-i;break;case"top":f=i-7}switch(s){case"top-right":case"bottom-right":d=-v;break;case"top-left":case"bottom-left":d=v;break;case"left":d=i;break;case"right":d=-i}}else{switch(i=Math.abs(i),l=Math.abs(l),s){case"top-right":case"top-left":case"top":f=l-7;break;case"bottom-right":case"bottom-left":case"bottom":f=7-l}switch(s){case"top-right":case"bottom-right":case"right":d=-i;break;case"top-left":case"bottom-left":case"left":d=i}}return[d,f]}function v6(s,i,l,d,f,v,x,C,I,R){s.createArrays(),s.tilePixelRatio=Tn/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;const H=s.layers[0].layout,q=s.layers[0]._unevaluatedLayout._values,Z={};if(s.textSizeData.kind==="composite"){const{minZoom:oe,maxZoom:he}=s.textSizeData;Z.compositeTextSizes=[q["text-size"].possiblyEvaluate(new et(oe),C),q["text-size"].possiblyEvaluate(new et(he),C)]}if(s.iconSizeData.kind==="composite"){const{minZoom:oe,maxZoom:he}=s.iconSizeData;Z.compositeIconSizes=[q["icon-size"].possiblyEvaluate(new et(oe),C),q["icon-size"].possiblyEvaluate(new et(he),C)]}Z.layoutTextSize=q["text-size"].possiblyEvaluate(new et(I+1),C),Z.layoutIconSize=q["icon-size"].possiblyEvaluate(new et(I+1),C),Z.textMaxSize=q["text-size"].possiblyEvaluate(new et(18),C);const J=H.get("text-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",Q=H.get("text-size");for(const oe of s.features){const he=H.get("text-font").evaluate(oe,{},C).join(","),Ce=Q.evaluate(oe,{},C),Ne=Z.layoutTextSize.evaluate(oe,{},C),we=(Z.layoutIconSize.evaluate(oe,{},C),{horizontal:{},vertical:void 0}),Be=oe.text;let Ve,$e=[0,0];if(Be){const St=Be.toString(),Bt=H.get("text-letter-spacing").evaluate(oe,{},C)*po,mt=H.get("text-line-height").evaluate(oe,{},C)*po,At=T(St)?Bt:0,It=H.get("text-anchor").evaluate(oe,{},C),Lt=H.get("text-variable-anchor");if(!Lt){const Kt=H.get("text-radial-offset").evaluate(oe,{},C);$e=Kt?FA(It,[Kt*po,Bb]):H.get("text-offset").evaluate(oe,{},C).map(sn=>sn*po)}let Ft=J?"center":H.get("text-justify").evaluate(oe,{},C);const gt=H.get("symbol-placement")==="point",Ht=gt?H.get("text-max-width").evaluate(oe,{},C)*po:1/0,xn=Kt=>{s.allowVerticalPlacement&&E(St)&&(we.vertical=Lb(Be,i,l,f,he,Ht,mt,It,Kt,At,$e,Ea.vertical,!0,Ne,Ce))};if(!J&&Lt){const Kt=Ft==="auto"?Lt.map(Wt=>Fb(Wt)):[Ft];let sn=!1;for(let Wt=0;Wt<Kt.length;Wt++){const En=Kt[Wt];if(!we.horizontal[En])if(sn)we.horizontal[En]=we.horizontal[0];else{const Wn=Lb(Be,i,l,f,he,Ht,mt,"center",En,At,$e,Ea.horizontal,!1,Ne,Ce);Wn&&(we.horizontal[En]=Wn,sn=Wn.positionedLines.length===1)}}xn("left")}else{if(Ft==="auto"&&(Ft=Fb(It)),gt||H.get("text-writing-mode").indexOf("horizontal")>=0||!E(St)){const Kt=Lb(Be,i,l,f,he,Ht,mt,It,Ft,At,$e,Ea.horizontal,!1,Ne,Ce);Kt&&(we.horizontal[Ft]=Kt)}xn(gt?"left":Ft)}}let lt=!1;if(oe.icon&&oe.icon.name){const St=d[oe.icon.name];St&&(Ve=u6(f[oe.icon.name],H.get("icon-offset").evaluate(oe,{},C),H.get("icon-anchor").evaluate(oe,{},C)),lt=St.sdf,s.sdfIcons===void 0?s.sdfIcons=St.sdf:s.sdfIcons!==St.sdf&&Xe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(St.pixelRatio!==s.pixelRatio||H.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}const it=$A(we.horizontal)||we.vertical;s.iconsInText||(s.iconsInText=!!it&&it.iconsInText),(it||Ve)&&_6(s,oe,we,Ve,d,Z,Ne,0,$e,lt,x,C,R)}v&&s.generateCollisionDebugBuffers(I,s.collisionBoxArray)}function Fb(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _6(s,i,l,d,f,v,x,C,I,R,H,q,Z){let J=v.textMaxSize.evaluate(i,{},q);J===void 0&&(J=x);const Q=s.layers[0].layout,oe=Q.get("icon-offset").evaluate(i,{},q),he=$A(l.horizontal)||l.vertical,Ce=Z.name==="globe",Ne=x/24,we=s.tilePixelRatio*J/24,Be=(At=s.overscaling,s.zoom>18&&At>2&&(At>>=1),Math.max(Tn/(512*At),1)*Q.get("symbol-spacing")),Ve=Q.get("text-padding")*s.tilePixelRatio,$e=Q.get("icon-padding")*s.tilePixelRatio,lt=re(Q.get("text-max-angle")),it=Q.get("text-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",St=Q.get("icon-rotation-alignment")==="map"&&Q.get("symbol-placement")!=="point",Bt=Q.get("symbol-placement"),mt=Be/2;var At;const It=Q.get("icon-text-fit");let Lt;d&&It!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(Lt=kA(d,l.vertical,It,Q.get("icon-text-fit-padding"),oe,Ne)),he&&(d=kA(d,he,It,Q.get("icon-text-fit-padding"),oe,Ne)));const Ft=(gt,Ht,xn)=>{if(Ht.x<0||Ht.x>=Tn||Ht.y<0||Ht.y>=Tn)return;let Kt=null;if(Ce){const{x:sn,y:Wt,z:En}=Z.projectTilePoint(Ht.x,Ht.y,xn);Kt={anchor:new Rl(sn,Wt,En,0,void 0),up:Z.upVector(xn,Ht.x,Ht.y)}}(function(sn,Wt,En,Wn,jn,$n,Sn,gr,Pn,Gn,br,Wr,Fr,Gr,Kr,ui,Ki,yr,Di,Si,rr,ti,$i,wr,mi){const bo=sn.addToLineVertexArray(Wt,Wn);let Yi,Ji,zo,Qi,Ll,Yh,Rm,Lm=0,mM=0,gM=0,yM=0,Kb=-1,Yb=-1;const el={};let vM=Xc("");const sd=En?En.anchor:Wt;let Jb=0,Qb=0;if(Pn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Jb,Qb]=Pn.layout.get("text-offset").evaluate(rr,{},mi).map(aa=>aa*po):(Jb=Pn.layout.get("text-radial-offset").evaluate(rr,{},mi)*po,Qb=Bb),sn.allowVerticalPlacement&&jn.vertical){const aa=jn.vertical;if(Kr)Yh=Nb(aa),gr&&(Rm=Nb(gr));else{const sa=Pn.layout.get("text-rotate").evaluate(rr,{},mi)+90;zo=Jv(Gn,sd,Wt,br,Wr,Fr,aa,Gr,sa,ui),gr&&(Qi=Jv(Gn,sd,Wt,br,Wr,Fr,gr,yr,sa))}}if($n){const aa=Pn.layout.get("icon-rotate").evaluate(rr,{},mi),sa=Pn.layout.get("icon-text-fit")!=="none",Om=zA($n,aa,$i,sa),tw=gr?zA(gr,aa,$i,sa):void 0;Ji=Jv(Gn,sd,Wt,br,Wr,Fr,$n,yr,aa),Lm=4*Om.length;const _M=sn.iconSizeData;let ld=null;_M.kind==="source"?(ld=[Ks*Pn.layout.get("icon-size").evaluate(rr,{},mi)],ld[0]>Iu&&Xe(`${sn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):_M.kind==="composite"&&(ld=[Ks*ti.compositeIconSizes[0].evaluate(rr,{},mi),Ks*ti.compositeIconSizes[1].evaluate(rr,{},mi)],(ld[0]>Iu||ld[1]>Iu)&&Xe(`${sn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),sn.addSymbols(sn.icon,Om,ld,Si,Di,rr,!1,En,Wt,bo.lineStartIndex,bo.lineLength,-1,wr,mi),Kb=sn.icon.placedSymbolArray.length-1,tw&&(mM=4*tw.length,sn.addSymbols(sn.icon,tw,ld,Si,Di,rr,Ea.vertical,En,Wt,bo.lineStartIndex,bo.lineLength,-1,wr,mi),Yb=sn.icon.placedSymbolArray.length-1)}for(const aa in jn.horizontal){const sa=jn.horizontal[aa];Yi||(vM=Xc(sa.text),Kr?Ll=Nb(sa):Yi=Jv(Gn,sd,Wt,br,Wr,Fr,sa,Gr,Pn.layout.get("text-rotate").evaluate(rr,{},mi),ui));const Om=sa.positionedLines.length===1;if(gM+=NA(sn,En,Wt,sa,Sn,Pn,Kr,rr,ui,bo,jn.vertical?Ea.horizontal:Ea.horizontalOnly,Om?Object.keys(jn.horizontal):[aa],el,Kb,ti,wr,mi),Om)break}jn.vertical&&(yM+=NA(sn,En,Wt,jn.vertical,Sn,Pn,Kr,rr,ui,bo,Ea.vertical,["vertical"],el,Yb,ti,wr,mi));let zu=-1;const ew=(aa,sa)=>aa?Math.max(aa,sa):sa;zu=ew(Ll,zu),zu=ew(Yh,zu),zu=ew(Rm,zu);const q6=zu>-1?1:0;sn.glyphOffsetArray.length>=Du.MAX_GLYPHS&&Xe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),rr.sortKey!==void 0&&sn.addToSortKeyRanges(sn.symbolInstances.length,rr.sortKey),sn.symbolInstances.emplaceBack(sd.x,sd.y,sd.z,Wt.x,Wt.y,el.right>=0?el.right:-1,el.center>=0?el.center:-1,el.left>=0?el.left:-1,el.vertical>=0?el.vertical:-1,Kb,Yb,vM,Yi!==void 0?Yi:sn.collisionBoxArray.length,Yi!==void 0?Yi+1:sn.collisionBoxArray.length,zo!==void 0?zo:sn.collisionBoxArray.length,zo!==void 0?zo+1:sn.collisionBoxArray.length,Ji!==void 0?Ji:sn.collisionBoxArray.length,Ji!==void 0?Ji+1:sn.collisionBoxArray.length,Qi||sn.collisionBoxArray.length,Qi?Qi+1:sn.collisionBoxArray.length,br,gM,yM,Lm,mM,q6,0,Jb,Qb,zu)})(s,Ht,Kt,gt,l,d,f,Lt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,Ve,it,I,0,$e,St,oe,i,v,R,H,q)};if(Bt==="line")for(const gt of RA(i.geometry,0,0,Tn,Tn)){const Ht=d6(gt,Be,lt,l.vertical||he,d,24,we,s.overscaling,Tn);for(const xn of Ht){const Kt=he;Kt&&x6(s,Kt.text,mt,xn)||Ft(gt,xn,q)}}else if(Bt==="line-center"){for(const gt of i.geometry)if(gt.length>1){const Ht=c6(gt,lt,l.vertical||he,d,24,we);Ht&&Ft(gt,Ht,q)}}else if(i.type==="Polygon")for(const gt of Tb(i.geometry,0)){const Ht=m6(gt,16);Ft(gt[0],new Rl(Ht.x,Ht.y,0,0,void 0),q)}else if(i.type==="LineString")for(const gt of i.geometry)Ft(gt,new Rl(gt[0].x,gt[0].y,0,0,void 0),q);else if(i.type==="Point")for(const gt of i.geometry)for(const Ht of gt)Ft([Ht],new Rl(Ht.x,Ht.y,0,0,void 0),q)}const Iu=32640;function NA(s,i,l,d,f,v,x,C,I,R,H,q,Z,J,Q,oe,he){const Ce=function(Be,Ve,$e,lt,it,St,Bt,mt){const At=[];if(Ve.positionedLines.length===0)return At;const It=lt.layout.get("text-rotate").evaluate(St,{})*Math.PI/180,Lt=function(Kt){const sn=Kt[0],Wt=Kt[1],En=sn*Wt;return En>0?[sn,-Wt]:En<0?[-sn,Wt]:sn===0?[Wt,sn]:[Wt,-sn]}($e);let Ft=Math.abs(Ve.top-Ve.bottom);for(const Kt of Ve.positionedLines)Ft-=Kt.lineOffset;const gt=Ve.positionedLines.length,Ht=Ft/gt;let xn=Ve.top-$e[1];for(let Kt=0;Kt<gt;++Kt){const sn=Ve.positionedLines[Kt];xn=h6(Ve,Ht,xn,Kt);for(const Wt of sn.positionedGlyphs){if(!Wt.rect)continue;const En=Wt.rect||{};let Wn=4,jn=!0,$n=1,Sn=0;if(Wt.imageName){const wr=Bt[Wt.imageName];if(!wr)continue;if(wr.sdf){Xe("SDF images are not supported in formatted text and will be ignored.");continue}jn=!1,$n=wr.pixelRatio,Wn=1/$n}const gr=(it||mt)&&Wt.vertical,Pn=Wt.metrics.advance*Wt.scale/2,Gn=Wt.metrics,br=Wt.rect;if(br===null)continue;mt&&Ve.verticalizable&&(Sn=Wt.imageName?Pn-Wt.metrics.width*Wt.scale/2:0);const Wr=it?[Wt.x+Pn,Wt.y]:[0,0];let Fr=[0,0],Gr=[0,0],Kr=!1;it||(gr?(Gr=[Wt.x+Pn+Lt[0],Wt.y+Lt[1]-Sn],Kr=!0):Fr=[Wt.x+Pn+$e[0],Wt.y+$e[1]-Sn]);const ui=br.w*Wt.scale/($n*(Wt.localGlyph?2:1)),Ki=br.h*Wt.scale/($n*(Wt.localGlyph?2:1));let yr,Di,Si,rr;if(gr){const wr=Wt.y-xn,mi=new S(-Pn,Pn-wr),bo=-Math.PI/2,Yi=new S(...Gr);yr=new S(-Pn+Fr[0],Fr[1]),yr._rotateAround(bo,mi)._add(Yi),yr.x+=-wr+Pn,yr.y-=(Gn.left-Wn)*Wt.scale;const Ji=Wt.imageName?Gn.advance*Wt.scale:po*Wt.scale,zo=String.fromCharCode(Wt.glyph);qN(zo)?yr.x+=(1-Wn)*Wt.scale:ZN(zo)?yr.x+=Ji-Gn.height*Wt.scale+(-Wn-1)*Wt.scale:yr.x+=Wt.imageName||Gn.width+2*Wn===br.w&&Gn.height+2*Wn===br.h?(Ji-Ki)/2:(Ji-(Gn.height+2*Wn)*Wt.scale)/2,Di=new S(yr.x,yr.y-ui),Si=new S(yr.x+Ki,yr.y),rr=new S(yr.x+Ki,yr.y-ui)}else{const wr=(Gn.left-Wn)*Wt.scale-Pn+Fr[0],mi=(-Gn.top-Wn)*Wt.scale+Fr[1],bo=wr+ui,Yi=mi+Ki;yr=new S(wr,mi),Di=new S(bo,mi),Si=new S(wr,Yi),rr=new S(bo,Yi)}if(It){let wr;wr=it?new S(0,0):Kr?new S(Lt[0],Lt[1]):new S($e[0],$e[1]),yr._rotateAround(It,wr),Di._rotateAround(It,wr),Si._rotateAround(It,wr),rr._rotateAround(It,wr)}const ti=new S(0,0),$i=new S(0,0);At.push({tl:yr,tr:Di,bl:Si,br:rr,tex:En,writingMode:Ve.writingMode,glyphOffset:Wr,sectionIndex:Wt.sectionIndex,isSDF:jn,pixelOffsetTL:ti,pixelOffsetBR:$i,minFontScaleX:0,minFontScaleY:0})}}return At}(0,d,I,v,x,C,f,s.allowVerticalPlacement),Ne=s.textSizeData;let we=null;Ne.kind==="source"?(we=[Ks*v.layout.get("text-size").evaluate(C,{},he)],we[0]>Iu&&Xe(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ne.kind==="composite"&&(we=[Ks*Q.compositeTextSizes[0].evaluate(C,{},he),Ks*Q.compositeTextSizes[1].evaluate(C,{},he)],(we[0]>Iu||we[1]>Iu)&&Xe(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,Ce,we,I,x,C,H,i,l,R.lineStartIndex,R.lineLength,J,oe,he);for(const Be of q)Z[Be]=s.text.placedSymbolArray.length-1;return 4*Ce.length}function $A(s){for(const i in s)return s[i];return null}function Jv(s,i,l,d,f,v,x,C,I,R){let H=x.top,q=x.bottom,Z=x.left,J=x.right;const Q=x.collisionPadding;if(Q&&(Z-=Q[0],H-=Q[1],J+=Q[2],q+=Q[3]),I){const oe=new S(Z,H),he=new S(J,H),Ce=new S(Z,q),Ne=new S(J,q),we=re(I);let Be=new S(0,0);R&&(Be=new S(R[0],R[1])),oe._rotateAround(we,Be),he._rotateAround(we,Be),Ce._rotateAround(we,Be),Ne._rotateAround(we,Be),Z=Math.min(oe.x,he.x,Ce.x,Ne.x),J=Math.max(oe.x,he.x,Ce.x,Ne.x),H=Math.min(oe.y,he.y,Ce.y,Ne.y),q=Math.max(oe.y,he.y,Ce.y,Ne.y)}return s.emplaceBack(i.x,i.y,i.z,l.x,l.y,Z,H,J,q,C,d,f,v),s.length-1}function Nb(s){s.collisionPadding&&(s.top-=s.collisionPadding[1],s.bottom+=s.collisionPadding[3]);const i=s.bottom-s.top;return i>0?Math.max(10,i):null}function x6(s,i,l,d){const f=s.compareText;if(i in f){const v=f[i];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<l)return!0}else f[i]=[];return f[i].push(d),!1}function UA(s,i){const l=s.fovAboveCenter,d=s.elevation?s.elevation.getMinElevationBelowMSL()*i:0,f=(s._camera.position[2]*s.worldSize-d)/Math.cos(s._pitch),v=Math.sin(l)*f/Math.sin(Math.max(Math.PI/2-s._pitch-l,.01)),x=Math.sin(s._pitch)*v+f;return Math.min(1.01*x,f*(1/s._horizonShift))}function od(s,i){if(!i.isReprojectedInTileSpace)return{scale:1<<s.z,x:s.x,y:s.y,x2:s.x+1,y2:s.y+1,projection:i};const l=Math.pow(2,-s.z),d=s.x*l,f=(s.x+1)*l,v=s.y*l,x=(s.y+1)*l,C=wa(d),I=wa(f),R=co(v),H=co(x),q=i.project(C,R),Z=i.project(I,R),J=i.project(I,H),Q=i.project(C,H);let oe=Math.min(q.x,Z.x,J.x,Q.x),he=Math.min(q.y,Z.y,J.y,Q.y),Ce=Math.max(q.x,Z.x,J.x,Q.x),Ne=Math.max(q.y,Z.y,J.y,Q.y);const we=l/16;function Be($e,lt,it,St,Bt,mt){const At=(it+Bt)/2,It=(St+mt)/2,Lt=i.project(wa(At),co(It)),Ft=Math.max(0,oe-Lt.x,he-Lt.y,Lt.x-Ce,Lt.y-Ne);oe=Math.min(oe,Lt.x),Ce=Math.max(Ce,Lt.x),he=Math.min(he,Lt.y),Ne=Math.max(Ne,Lt.y),Ft>we&&(Be($e,Lt,it,St,At,It),Be(Lt,lt,At,It,Bt,mt))}Be(q,Z,d,v,f,v),Be(Z,J,f,v,f,x),Be(J,Q,f,x,d,x),Be(Q,q,d,x,d,v),oe-=we,he-=we,Ce+=we,Ne+=we;const Ve=1/Math.max(Ce-oe,Ne-he);return{scale:Ve,x:oe*Ve,y:he*Ve,x2:Ce*Ve,y2:Ne*Ve,projection:i}}const b6=bs(new Float32Array(16));class Pu{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,l){return{x:0,y:0,z:0}}unproject(i,l){return new tr(0,0)}projectTilePoint(i,l,d){return{x:i,y:l,z:0}}locationPoint(i,l,d=!0){return i._coordinatePoint(i.locationCoordinate(l),d)}pixelsPerMeter(i,l){return Es(1,i)*l}pixelSpaceConversion(i,l,d){return 1}farthestPixelDistance(i){return UA(i,i.pixelsPerMeter)}pointCoordinate(i,l,d,f){const v=i.horizonLineFromTop(!1),x=new S(l,Math.max(v,d));return i.rayIntersectionCoordinate(i.pointRayIntersection(x,f))}pointCoordinate3D(i,l,d){const f=new S(l,d);if(i.elevation)return i.elevation.pointCoordinate(f);{const v=this.pointCoordinate(i,f.x,f.y,0);return[v.x,v.y,v.z]}}isPointAboveHorizon(i,l){if(i.elevation)return!this.pointCoordinate3D(i,l.x,l.y);const d=i.horizonLineFromTop();return l.y<d}createInversionMatrix(i,l){return b6}createTileMatrix(i,l,d){let f,v,x;const C=d.canonical,I=bs(new Float64Array(16));if(this.isReprojectedInTileSpace){const R=od(C,this);f=1,v=R.x+d.wrap*R.scale,x=R.y,Jc(I,I,[f/R.scale,f/R.scale,i.pixelsPerMeter/l])}else f=l/i.zoomScale(C.z),v=(C.x+Math.pow(2,C.z)*d.wrap)*f,x=C.y*f;return rm(I,I,[v,x,0]),Jc(I,I,[f/Tn,f/Tn,1]),I}upVector(i,l,d){return[0,0,1]}upVectorScale(i,l,d){return{metersToTile:1}}}class w6 extends Pu{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[l,d]=this.parallels=i.parallels||[29.5,45.5],f=Math.sin(re(l));this.n=(f+Math.sin(re(d)))/2,this.c=1+f*(2*this.n-f),this.r0=Math.sqrt(this.c)/this.n}project(i,l){const{n:d,c:f,r0:v}=this,x=re(i-this.center[0]),C=re(l),I=Math.sqrt(f-2*d*Math.sin(C))/d;return{x:I*Math.sin(x*d),y:I*Math.cos(x*d)-v,z:0}}unproject(i,l){const{n:d,c:f,r0:v}=this,x=v+l;let C=Math.atan2(i,Math.abs(x))*Math.sign(x);x*d<0&&(C-=Math.PI*Math.sign(i)*Math.sign(x));const I=re(this.center[0])*d;C=ct(C,-Math.PI-I,Math.PI-I);const R=Le(ae(C/d)+this.center[0],-180,180),H=Math.asin(Le((f-(i*i+x*x)*d*d)/(2*d),-1,1)),q=Le(ae(H),-ho,ho);return new tr(R,q)}}const km=1.340264,Am=-.081106,Mm=893e-6,Im=.003796,Qv=Math.sqrt(3)/2;class E6 extends Pu{project(i,l){l=l/180*Math.PI,i=i/180*Math.PI;const d=Math.asin(Qv*Math.sin(l)),f=d*d,v=f*f*f;return{x:.5*(i*Math.cos(d)/(Qv*(km+3*Am*f+v*(7*Mm+9*Im*f)))/Math.PI+.5),y:1-.5*(d*(km+Am*f+v*(Mm+Im*f))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,f=d*d,v=f*f*f;for(let H,q,Z,J=0;J<12&&(q=d*(km+Am*f+v*(Mm+Im*f))-l,Z=km+3*Am*f+v*(7*Mm+9*Im*f),H=q/Z,d=Le(d-H,-Math.PI/3,Math.PI/3),f=d*d,v=f*f*f,!(Math.abs(H)<1e-12));++J);const x=Qv*i*(km+3*Am*f+v*(7*Mm+9*Im*f))/Math.cos(d),C=Math.asin(Math.sin(d)/Qv),I=Le(180*x/Math.PI,-180,180),R=Le(180*C/Math.PI,-ho,ho);return new tr(I,R)}}class C6 extends Pu{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){return{x:.5+i/360,y:.5-l/360,z:0}}unproject(i,l){const d=360*(i-.5),f=Le(360*(.5-l),-ho,ho);return new tr(d,f)}}const Xh=Math.PI/2;function e_(s){return Math.tan((Xh+s)/2)}class S6 extends Pu{constructor(i){super(i),this.center=i.center||[0,30];const[l,d]=this.parallels=i.parallels||[30,30];let f=re(l),v=re(d);this.southernCenter=f+v<0,this.southernCenter&&(f=-f,v=-v);const x=Math.cos(f),C=e_(f);this.n=f===v?Math.sin(f):Math.log(x/Math.cos(v))/Math.log(e_(v)/C),this.f=x*Math.pow(e_(f),this.n)/this.n}project(i,l){l=re(l),this.southernCenter&&(l=-l),i=re(i-this.center[0]);const d=1e-6,{n:f,f:v}=this;v>0?l<-Xh+d&&(l=-Xh+d):l>Xh-d&&(l=Xh-d);const x=v/Math.pow(e_(l),f);let C=x*Math.sin(f*i),I=v-x*Math.cos(f*i);return C=.5*(C/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:C,y:this.southernCenter?I:1-I,z:0}}unproject(i,l){i=(2*i-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:d,f}=this,v=f-l,x=Math.sign(v),C=Math.sign(d)*Math.sqrt(i*i+v*v);let I=Math.atan2(i,Math.abs(v))*x;v*d<0&&(I-=Math.PI*Math.sign(i)*x);const R=Le(ae(I/d)+this.center[0],-180,180),H=Le(ae(2*Math.atan(Math.pow(f/C,1/d))-Xh),-ho,ho);return new tr(R,this.southernCenter?-H:H)}}class jA extends Pu{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,l){return{x:Zs(i),y:Xs(l),z:0}}unproject(i,l){const d=wa(i),f=co(l);return new tr(d,f)}}const VA=re(ho);class T6 extends Pu{project(i,l){const d=(l=re(l))*l,f=d*d;return{x:.5*((i=re(i))*(.8707-.131979*d+f*(f*(.003971*d-.001529*f)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+d*(.015085+f*(.028874*d-.044475-.005916*f)))/Math.PI+1),z:0}}unproject(i,l){i=(2*i-.5)*Math.PI;let d=l=(2*(1-l)-1)*Math.PI,f=25,v=0,x=d*d;do{x=d*d;const R=x*x;v=(d*(1.007226+x*(.015085+R*(.028874*x-.044475-.005916*R)))-l)/(1.007226+x*(.045255+R*(.259866*x-.311325-.005916*11*R))),d=Le(d-v,-VA,VA)}while(Math.abs(v)>1e-6&&--f>0);x=d*d;const C=Le(ae(i/(.8707+x*(x*(x*x*x*(.003971-.001529*x)-.013791)-.131979))),-180,180),I=ae(d);return new tr(C,I)}}const HA=re(ho);class k6 extends Pu{project(i,l){l=re(l),i=re(i);const d=Math.cos(l),f=2/Math.PI,v=Math.acos(d*Math.cos(i/2)),x=Math.sin(v)/v,C=.5*(i*f+2*d*Math.sin(i/2)/x)||0,I=.5*(l+Math.sin(l)/x)||0;return{x:.5*(C/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(i,l){let d=i=(2*i-.5)*Math.PI,f=l=(2*(1-l)-1)*Math.PI,v=25;const x=1e-6;let C=0,I=0;do{const R=Math.cos(f),H=Math.sin(f),q=2*H*R,Z=H*H,J=R*R,Q=Math.cos(d/2),oe=Math.sin(d/2),he=2*Q*oe,Ce=oe*oe,Ne=1-J*Q*Q,we=Ne?1/Ne:0,Be=Ne?Math.acos(R*Q)*Math.sqrt(1/Ne):0,Ve=.5*(2*Be*R*oe+2*d/Math.PI)-i,$e=.5*(Be*H+f)-l,lt=.5*we*(J*Ce+Be*R*Q*Z)+1/Math.PI,it=we*(he*q/4-Be*H*oe),St=.125*we*(q*oe-Be*H*J*he),Bt=.5*we*(Z*Q+Be*Ce*R)+.5,mt=it*St-Bt*lt;C=($e*it-Ve*Bt)/mt,I=(Ve*St-$e*lt)/mt,d=Le(d-C,-Math.PI,Math.PI),f=Le(f-I,-HA,HA)}while((Math.abs(C)>x||Math.abs(I)>x)&&--v>0);return new tr(ae(d),ae(f))}}class WA extends Pu{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(re(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,l){const{scale:d,cosPhi:f}=this;return{x:re(i)*f*d+.5,y:-Math.sin(re(l))/f*d+.5,z:0}}unproject(i,l){const{scale:d,cosPhi:f}=this,v=-(l-.5)/d,x=Le(ae((i-.5)/d)/f,-180,180),C=Math.asin(Le(v*f,-1,1)),I=Le(ae(C),-ho,ho);return new tr(x,I)}}class A6 extends jA{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,l,d){const f=dm(i,l,d);return fi(f,f,hm(qs(d))),{x:f[0],y:f[1],z:f[2]}}locationPoint(i,l){const d=Oh(l.lat,l.lng),f=Ro([],d),v=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(l),i._centerAltitude):i._centerAltitude;sm(d,d,f,Es(1,0)*Tn*v);const x=bs(new Float64Array(16));return Yc(x,i.pixelMatrix,i.globeMatrix),fi(d,d,x),new S(d[0],d[1])}pixelsPerMeter(i,l){return Es(1,0)*l}pixelSpaceConversion(i,l,d){const f=Es(1,i)*l,v=Qn(Es(1,45)*l,f,d);return this.pixelsPerMeter(i,l)/v}createTileMatrix(i,l,d){const f=hb(qs(d.canonical));return Yc(new Float64Array(16),i.globeMatrix,f)}createInversionMatrix(i,l){const{center:d}=i,f=hm(qs(l));return Mv(f,f,re(d.lng)),rb(f,f,re(d.lat)),Jc(f,f,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(f)}pointCoordinate(i,l,d,f){return b2(i,l,d,!0)||new Bh(0,0)}pointCoordinate3D(i,l,d){const f=this.pointCoordinate(i,l,d,0);return[f.x,f.y,f.z]}isPointAboveHorizon(i,l){return!b2(i,l.x,l.y,!1)}farthestPixelDistance(i){const l=function(f,v){const x=f.cameraToCenterDistance,C=f._centerAltitude*v,I=f._camera,R=f._camera.forward(),H=Ml([],ba([],R,-x),[0,0,C]),q=f.worldSize/(2*Math.PI),Z=[0,0,-q],J=f.width/f.height,Q=Math.tan(f.fovAboveCenter),oe=ba([],I.up(),Q),he=ba([],I.right(),Q*J),Ce=Ro([],Ml([],Ml([],R,oe),he)),Ne=[];let we;if(new sb(H,Ce).closestPointOnSphere(Z,q,Ne)){const Be=Ml([],Ne,Z),Ve=ws([],Be,H);we=Math.cos(f.fovAboveCenter)*im(Ve)}else{const Be=ws([],H,Z),Ve=ws([],Z,H);Ro(Ve,Ve);const $e=im(Be)-q;we=Math.sqrt($e*($e+2*q));const lt=Math.acos(we/(q+$e))-Math.acos(Va(R,Ve));we*=Math.cos(lt)}return 1.01*we}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),d=zh(i.zoom);if(d>0){const f=UA(i,Es(1,i.center.lat)*i.worldSize),v=i.worldSize/(2*Math.PI),x=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Qn(l,f+v*(1-Math.cos(x)),Math.pow(d,10))}return l}upVector(i,l,d){return dm(l,d,i,1)}upVectorScale(i){return{metersToTile:Iv(Dv(qs(i)))}}}function GA(s){const i=s.parallels,l=!!i&&Math.abs(i[0]+i[1])<.01;switch(s.name){case"mercator":return new jA(s);case"equirectangular":return new C6(s);case"naturalEarth":return new T6(s);case"equalEarth":return new E6(s);case"winkelTripel":return new k6(s);case"albers":return l?new WA(s):new w6(s);case"lambertConformalConic":return l?new WA(s):new S6(s);case"globe":return new A6(s)}throw new Error(`Invalid projection name: ${s.name}`)}const M6=jv.types,I6=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function t_(s,i,l,d,f,v,x,C,I,R,H,q,Z){const J=C?Math.min(Iu,Math.round(C[0])):0,Q=C?Math.min(Iu,Math.round(C[1])):0;s.emplaceBack(i,l,Math.round(32*d),Math.round(32*f),v,x,(J<<1)+(I?1:0),Q,16*R,16*H,256*q,256*Z)}function n_(s,i,l,d,f,v,x){s.emplaceBack(i,l,d,f,v,x)}function r_(s,i,l,d,f){s.emplaceBack(i,l,d,f),s.emplaceBack(i,l,d,f),s.emplaceBack(i,l,d,f),s.emplaceBack(i,l,d,f)}function P6(s){for(const i of s.sections)if(te(i.text))return!0;return!1}class $b{constructor(i){this.layoutVertexArray=new ys,this.indexArray=new uo,this.programConfigurations=i,this.segments=new Ei,this.dynamicLayoutVertexArray=new Mr,this.opacityVertexArray=new Ir,this.placedSymbolArray=new qk,this.globeExtVertexArray=new Xr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,d,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,NN.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,UN.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,I6,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,$N.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||f)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}rn($b,"SymbolBuffers");class Ub{constructor(i,l,d){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new d,this.segments=new Ei,this.collisionVertexArray=new Hr,this.collisionVertexArrayExt=new lo}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,jN.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,VN.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}rn(Ub,"CollisionBuffers");class Du{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bs([]),this.placementViewportMatrix=bs([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ib(this.zoom,l["text-size"]),this.iconSizeData=Ib(this.zoom,l["icon-size"]);const d=this.layers[0].layout,f=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&f.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(x=>Ea[x]),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new $b(new Kc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new $b(new Kc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Kk,this.lineVertexArray=new Yk,this.symbolInstances=new Xk}calculateGlyphDependencies(i,l,d,f,v){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,f&&v){const C=Em[i.charAt(x)];C&&(l[C.charCodeAt(0)]=!0)}}populate(i,l,d,f){const v=this.layers[0],x=v.layout,C=this.projection.name==="globe",I=x.get("text-font"),R=x.get("text-field"),H=x.get("icon-image"),q=(R.value.kind!=="constant"||R.value.value instanceof Po&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),Z=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,J=x.get("symbol-sort-key");if(this.features=[],!q&&!Z)return;const Q=l.iconDependencies,oe=l.glyphDependencies,he=l.availableImages,Ce=new et(this.zoom);for(const{feature:Ne,id:we,index:Be,sourceLayerIndex:Ve}of i){const $e=v._featureFilter.needGeometry,lt=nd(Ne,$e);if(!v._featureFilter.filter(Ce,lt,d))continue;if($e||(lt.geometry=Il(Ne,d,f)),C&&Ne.type!==1&&d.z<=5){const mt=lt.geometry,At=.98078528056,It=(Lt,Ft)=>Va(dm(Lt.x,Lt.y,d,1),dm(Ft.x,Ft.y,d,1))<At;for(let Lt=0;Lt<mt.length;Lt++)mt[Lt]=UF(mt[Lt],It)}let it,St;if(q){const mt=v.getValueAndResolveTokens("text-field",lt,d,he),At=Po.factory(mt);P6(At)&&(this.hasRTLText=!0),(!this.hasRTLText||He()==="unavailable"||this.hasRTLText&&Ge.isParsed())&&(it=GN(At,v,lt))}if(Z){const mt=v.getValueAndResolveTokens("icon-image",lt,d,he);St=mt instanceof xo?mt:xo.fromString(mt)}if(!it&&!St)continue;const Bt=this.sortFeaturesByKey?J.evaluate(lt,{},d):void 0;if(this.features.push({id:we,text:it,icon:St,index:Be,sourceLayerIndex:Ve,geometry:lt.geometry,properties:Ne.properties,type:M6[Ne.type],sortKey:Bt}),St&&(Q[St.name]=!0),it){const mt=I.evaluate(lt,{},d).join(","),At=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ea.vertical)>=0;for(const It of it.sections)if(It.image)Q[It.image.name]=!0;else{const Lt=E(it.toString()),Ft=It.fontStack||mt,gt=oe[Ft]=oe[Ft]||{};this.calculateGlyphDependencies(It.text,gt,At,this.allowVerticalPlacement,Lt)}}}x.get("symbol-placement")==="line"&&(this.features=function(Ne){const we={},Be={},Ve=[];let $e=0;function lt(mt){Ve.push(Ne[mt]),$e++}function it(mt,At,It){const Lt=Be[mt];return delete Be[mt],Be[At]=Lt,Ve[Lt].geometry[0].pop(),Ve[Lt].geometry[0]=Ve[Lt].geometry[0].concat(It[0]),Lt}function St(mt,At,It){const Lt=we[At];return delete we[At],we[mt]=Lt,Ve[Lt].geometry[0].shift(),Ve[Lt].geometry[0]=It[0].concat(Ve[Lt].geometry[0]),Lt}function Bt(mt,At,It){const Lt=It?At[0][At[0].length-1]:At[0][0];return`${mt}:${Lt.x}:${Lt.y}`}for(let mt=0;mt<Ne.length;mt++){const At=Ne[mt],It=At.geometry,Lt=At.text?At.text.toString():null;if(!Lt){lt(mt);continue}const Ft=Bt(Lt,It),gt=Bt(Lt,It,!0);if(Ft in Be&&gt in we&&Be[Ft]!==we[gt]){const Ht=St(Ft,gt,It),xn=it(Ft,gt,Ve[Ht].geometry);delete we[Ft],delete Be[gt],Be[Bt(Lt,Ve[xn].geometry,!0)]=xn,Ve[Ht].geometry=null}else Ft in Be?it(Ft,gt,It):gt in we?St(Ft,gt,It):(lt(mt),we[Ft]=$e-1,Be[gt]=$e-1)}return Ve.filter(mt=>mt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ne,we)=>Ne.sortKey-we.sortKey)}update(i,l,d,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,d,f),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,d,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=GA(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const d=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x:f,y:v}of l)this.lineVertexArray.emplaceBack(f,v);return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(i,l,d,f,v,x,C,I,R,H,q,Z,J,Q){const oe=i.indexArray,he=i.layoutVertexArray,Ce=i.globeExtVertexArray,Ne=i.segments.prepareSegment(4*l.length,he,oe,this.canOverlap?x.sortKey:void 0),we=this.glyphOffsetArray.length,Be=Ne.vertexLength,Ve=this.allowVerticalPlacement&&C===Ea.vertical?Math.PI/2:0,$e=x.text&&x.text.sections;for(let it=0;it<l.length;it++){const{tl:St,tr:Bt,bl:mt,br:At,tex:It,pixelOffsetTL:Lt,pixelOffsetBR:Ft,minFontScaleX:gt,minFontScaleY:Ht,glyphOffset:xn,isSDF:Kt,sectionIndex:sn}=l[it],Wt=Ne.vertexLength,En=xn[1];if(t_(he,R.x,R.y,St.x,En+St.y,It.x,It.y,d,Kt,Lt.x,Lt.y,gt,Ht),t_(he,R.x,R.y,Bt.x,En+Bt.y,It.x+It.w,It.y,d,Kt,Ft.x,Lt.y,gt,Ht),t_(he,R.x,R.y,mt.x,En+mt.y,It.x,It.y+It.h,d,Kt,Lt.x,Ft.y,gt,Ht),t_(he,R.x,R.y,At.x,En+At.y,It.x+It.w,It.y+It.h,d,Kt,Ft.x,Ft.y,gt,Ht),I){const{x:Wn,y:jn,z:$n}=I.anchor,[Sn,gr,Pn]=I.up;n_(Ce,Wn,jn,$n,Sn,gr,Pn),n_(Ce,Wn,jn,$n,Sn,gr,Pn),n_(Ce,Wn,jn,$n,Sn,gr,Pn),n_(Ce,Wn,jn,$n,Sn,gr,Pn),r_(i.dynamicLayoutVertexArray,Wn,jn,$n,Ve)}else r_(i.dynamicLayoutVertexArray,R.x,R.y,R.z,Ve);oe.emplaceBack(Wt,Wt+1,Wt+2),oe.emplaceBack(Wt+1,Wt+2,Wt+3),Ne.vertexLength+=4,Ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(xn[0]),it!==l.length-1&&sn===l[it+1].sectionIndex||i.programConfigurations.populatePaintArrays(he.length,x,x.index,{},J,Q,$e&&$e[sn])}const lt=I?I.anchor:R;i.placedSymbolArray.emplaceBack(lt.x,lt.y,lt.z,R.x,R.y,we,this.glyphOffsetArray.length-we,Be,H,q,R.segment,d?d[0]:0,d?d[1]:0,f[0],f[1],C,0,!1,0,Z,0)}_commitLayoutVertex(i,l,d,f,v,x,C){i.emplaceBack(l,d,f,v,x,Math.round(C.x),Math.round(C.y))}_addCollisionDebugVertices(i,l,d,f,v,x,C){const I=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),R=I.vertexLength,H=C.tileAnchorX,q=C.tileAnchorY;for(let J=0;J<4;J++)d.collisionVertexArray.emplaceBack(0,0,0,0);d.collisionVertexArrayExt.emplaceBack(l,-i.padding,-i.padding),d.collisionVertexArrayExt.emplaceBack(l,i.padding,-i.padding),d.collisionVertexArrayExt.emplaceBack(l,i.padding,i.padding),d.collisionVertexArrayExt.emplaceBack(l,-i.padding,i.padding),this._commitLayoutVertex(d.layoutVertexArray,f,v,x,H,q,new S(i.x1,i.y1)),this._commitLayoutVertex(d.layoutVertexArray,f,v,x,H,q,new S(i.x2,i.y1)),this._commitLayoutVertex(d.layoutVertexArray,f,v,x,H,q,new S(i.x2,i.y2)),this._commitLayoutVertex(d.layoutVertexArray,f,v,x,H,q,new S(i.x1,i.y2)),I.vertexLength+=4;const Z=d.indexArray;Z.emplaceBack(R,R+1),Z.emplaceBack(R+1,R+2),Z.emplaceBack(R+2,R+3),Z.emplaceBack(R+3,R),I.primitiveLength+=4}_addTextDebugCollisionBoxes(i,l,d,f,v,x){for(let C=f;C<v;C++){const I=d.get(C),R=this.getSymbolInstanceTextSize(i,x,l,C);this._addCollisionDebugVertices(I,R,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,x)}}_addIconDebugCollisionBoxes(i,l,d,f,v,x){for(let C=f;C<v;C++){const I=d.get(C),R=this.getSymbolInstanceIconSize(i,l,x.placedIconSymbolIndex);this._addCollisionDebugVertices(I,R,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,x)}}generateCollisionDebugBuffers(i,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ub(li,fA.members,Hs),this.iconCollisionBox=new Ub(li,fA.members,Hs);const d=Vh(this.iconSizeData,i),f=Vh(this.textSizeData,i);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._addTextDebugCollisionBoxes(f,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._addTextDebugCollisionBoxes(f,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._addIconDebugCollisionBoxes(d,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x),this._addIconDebugCollisionBoxes(d,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x)}}getSymbolInstanceTextSize(i,l,d,f){const v=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:f),x=Gv(this.textSizeData,i,v)/po;return this.tilePixelRatio*x}getSymbolInstanceIconSize(i,l,d){const f=this.icon.placedSymbolArray.get(d),v=Gv(this.iconSizeData,i,f);return this.tilePixelRatio*v}_commitDebugCollisionVertexUpdate(i,l,d){i.emplaceBack(l,-d,-d),i.emplaceBack(l,d,-d),i.emplaceBack(l,d,d),i.emplaceBack(l,-d,d)}_updateTextDebugCollisionBoxes(i,l,d,f,v,x){for(let C=f;C<v;C++){const I=d.get(C),R=this.getSymbolInstanceTextSize(i,x,l,C);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,R,I.padding)}}_updateIconDebugCollisionBoxes(i,l,d,f,v,x){for(let C=f;C<v;C++){const I=d.get(C),R=this.getSymbolInstanceIconSize(i,l,x);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,R,I.padding)}}updateCollisionDebugBuffers(i,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=Vh(this.iconSizeData,i),f=Vh(this.textSizeData,i);for(let v=0;v<this.symbolInstances.length;v++){const x=this.symbolInstances.get(v);this._updateTextDebugCollisionBoxes(f,i,l,x.textBoxStartIndex,x.textBoxEndIndex,x),this._updateTextDebugCollisionBoxes(f,i,l,x.verticalTextBoxStartIndex,x.verticalTextBoxEndIndex,x),this._updateIconDebugCollisionBoxes(d,i,l,x.iconBoxStartIndex,x.iconBoxEndIndex,x.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(d,i,l,x.verticalIconBoxStartIndex,x.verticalIconBoxEndIndex,x.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,l,d,f,v,x,C,I,R){const H={};if(l<d){const{x1:q,y1:Z,x2:J,y2:Q,padding:oe,projectedAnchorX:he,projectedAnchorY:Ce,projectedAnchorZ:Ne,tileAnchorX:we,tileAnchorY:Be,featureIndex:Ve}=i.get(l);H.textBox={x1:q,y1:Z,x2:J,y2:Q,padding:oe,projectedAnchorX:he,projectedAnchorY:Ce,projectedAnchorZ:Ne,tileAnchorX:we,tileAnchorY:Be},H.textFeatureIndex=Ve}if(f<v){const{x1:q,y1:Z,x2:J,y2:Q,padding:oe,projectedAnchorX:he,projectedAnchorY:Ce,projectedAnchorZ:Ne,tileAnchorX:we,tileAnchorY:Be,featureIndex:Ve}=i.get(f);H.verticalTextBox={x1:q,y1:Z,x2:J,y2:Q,padding:oe,projectedAnchorX:he,projectedAnchorY:Ce,projectedAnchorZ:Ne,tileAnchorX:we,tileAnchorY:Be},H.verticalTextFeatureIndex=Ve}if(x<C){const{x1:q,y1:Z,x2:J,y2:Q,padding:oe,projectedAnchorX:he,projectedAnchorY:Ce,projectedAnchorZ:Ne,tileAnchorX:we,tileAnchorY:Be,featureIndex:Ve}=i.get(x);H.iconBox={x1:q,y1:Z,x2:J,y2:Q,padding:oe,projectedAnchorX:he,projectedAnchorY:Ce,projectedAnchorZ:Ne,tileAnchorX:we,tileAnchorY:Be},H.iconFeatureIndex=Ve}if(I<R){const{x1:q,y1:Z,x2:J,y2:Q,padding:oe,projectedAnchorX:he,projectedAnchorY:Ce,projectedAnchorZ:Ne,tileAnchorX:we,tileAnchorY:Be,featureIndex:Ve}=i.get(I);H.verticalIconBox={x1:q,y1:Z,x2:J,y2:Q,padding:oe,projectedAnchorX:he,projectedAnchorY:Ce,projectedAnchorZ:Ne,tileAnchorX:we,tileAnchorY:Be},H.verticalIconFeatureIndex=Ve}return H}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const d=i.placedSymbolArray.get(l),f=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<f;v+=4)i.indexArray.emplaceBack(v,v+1,v+2),i.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),d=Math.cos(i),f=[],v=[],x=[];for(let C=0;C<this.symbolInstances.length;++C){x.push(C);const I=this.symbolInstances.get(C);f.push(0|Math.round(l*I.tileAnchorX+d*I.tileAnchorY)),v.push(I.featureIndex)}return x.sort((C,I)=>f[C]-f[I]||v[I]-v[C]),x}addToSortKeyRanges(i,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex);const{rightJustifiedTextSymbolIndex:f,centerJustifiedTextSymbolIndex:v,leftJustifiedTextSymbolIndex:x,verticalPlacedTextSymbolIndex:C,placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:R}=d;f>=0&&this.addIndicesForPlacedSymbol(this.text,f),v>=0&&v!==f&&this.addIndicesForPlacedSymbol(this.text,v),x>=0&&x!==v&&x!==f&&this.addIndicesForPlacedSymbol(this.text,x),C>=0&&this.addIndicesForPlacedSymbol(this.text,C),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I),R>=0&&this.addIndicesForPlacedSymbol(this.icon,R)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}rn(Du,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Du.MAX_GLYPHS=65535,Du.addDynamicAttributes=r_;const D6=new Ot({"symbol-placement":new Ye(Ct.layout_symbol["symbol-placement"]),"symbol-spacing":new Ye(Ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ye(Ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new dt(Ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ye(Ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ye(Ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ye(Ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ye(Ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ye(Ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new dt(Ct.layout_symbol["icon-size"]),"icon-text-fit":new Ye(Ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ye(Ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new dt(Ct.layout_symbol["icon-image"]),"icon-rotate":new dt(Ct.layout_symbol["icon-rotate"]),"icon-padding":new Ye(Ct.layout_symbol["icon-padding"]),"icon-keep-upright":new Ye(Ct.layout_symbol["icon-keep-upright"]),"icon-offset":new dt(Ct.layout_symbol["icon-offset"]),"icon-anchor":new dt(Ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ye(Ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ye(Ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ye(Ct.layout_symbol["text-rotation-alignment"]),"text-field":new dt(Ct.layout_symbol["text-field"]),"text-font":new dt(Ct.layout_symbol["text-font"]),"text-size":new dt(Ct.layout_symbol["text-size"]),"text-max-width":new dt(Ct.layout_symbol["text-max-width"]),"text-line-height":new dt(Ct.layout_symbol["text-line-height"]),"text-letter-spacing":new dt(Ct.layout_symbol["text-letter-spacing"]),"text-justify":new dt(Ct.layout_symbol["text-justify"]),"text-radial-offset":new dt(Ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ye(Ct.layout_symbol["text-variable-anchor"]),"text-anchor":new dt(Ct.layout_symbol["text-anchor"]),"text-max-angle":new Ye(Ct.layout_symbol["text-max-angle"]),"text-writing-mode":new Ye(Ct.layout_symbol["text-writing-mode"]),"text-rotate":new dt(Ct.layout_symbol["text-rotate"]),"text-padding":new Ye(Ct.layout_symbol["text-padding"]),"text-keep-upright":new Ye(Ct.layout_symbol["text-keep-upright"]),"text-transform":new dt(Ct.layout_symbol["text-transform"]),"text-offset":new dt(Ct.layout_symbol["text-offset"]),"text-allow-overlap":new Ye(Ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ye(Ct.layout_symbol["text-ignore-placement"]),"text-optional":new Ye(Ct.layout_symbol["text-optional"])});var jb={paint:new Ot({"icon-opacity":new dt(Ct.paint_symbol["icon-opacity"]),"icon-color":new dt(Ct.paint_symbol["icon-color"]),"icon-halo-color":new dt(Ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new dt(Ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new dt(Ct.paint_symbol["icon-halo-blur"]),"icon-translate":new Ye(Ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ye(Ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new dt(Ct.paint_symbol["text-opacity"]),"text-color":new dt(Ct.paint_symbol["text-color"],{runtimeType:$a,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new dt(Ct.paint_symbol["text-halo-color"]),"text-halo-width":new dt(Ct.paint_symbol["text-halo-width"]),"text-halo-blur":new dt(Ct.paint_symbol["text-halo-blur"]),"text-translate":new Ye(Ct.paint_symbol["text-translate"]),"text-translate-anchor":new Ye(Ct.paint_symbol["text-translate-anchor"])}),layout:D6};class qA{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:au,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rn(qA,"FormatSectionOverride",{omit:["defaultValue"]});class i_ extends xs{constructor(i){super(i,jb)}recalculate(i,l){super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const f=[];for(const v of d)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,l,d,f){const v=this.layout.get(i).evaluate(l,{},d,f),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||vu(x.value)||!v?v:function(C,I){return I.replace(/{([^{}]+)}/g,(R,H)=>H in C?String(C[H]):"")}(l.properties,v)}createBucket(i){return new Du(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of jb.paint.overridableProperties){if(!i_.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),d=new qA(l),f=new vh(d,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new _h("source",f):new Sl("composite",f,l.value.zoomStops,l.value._interpolationType),this.paint._values[i]=new Rt(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&i_.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const d=i.get("text-field"),f=jb.paint.properties[l];let v=!1;const x=C=>{for(const I of C)if(f.overrides&&f.overrides.hasOverride(I))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Po)x(d.value.value.sections);else if(d.value.kind==="source"){const C=R=>{v||(R instanceof Ec&&Pi(R.value)===su?x(R.value.sections):R instanceof Cc?x(R.sections):R.eachChild(C))},I=d.value;I._styleExpression&&C(I._styleExpression.expression)}return v}getProgramConfiguration(i){return new Au(this,i)}}var R6={paint:new Ot({"background-color":new Ye(Ct.paint_background["background-color"]),"background-pattern":new Ye(Ct.paint_background["background-pattern"]),"background-opacity":new Ye(Ct.paint_background["background-opacity"])})},L6={paint:new Ot({"raster-opacity":new Ye(Ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ye(Ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ye(Ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ye(Ct.paint_raster["raster-brightness-max"]),"raster-saturation":new Ye(Ct.paint_raster["raster-saturation"]),"raster-contrast":new Ye(Ct.paint_raster["raster-contrast"]),"raster-resampling":new Ye(Ct.paint_raster["raster-resampling"]),"raster-fade-duration":new Ye(Ct.paint_raster["raster-fade-duration"])})};class O6 extends xs{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var z6={paint:new Ot({"sky-type":new Ye(Ct.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ye(Ct.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ye(Ct.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ye(Ct.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ye(Ct.paint_sky["sky-gradient-radius"]),"sky-gradient":new Dt(Ct.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ye(Ct.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ye(Ct.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ye(Ct.paint_sky["sky-opacity"])})};function Vb(s,i,l){const d=[0,0,1],f=g2([]);return v2(f,f,l?-re(s)+Math.PI:re(s)),y2(f,f,-re(i)),h2(d,d,f),Ro(d,d)}const B6={circle:class extends xs{constructor(s){super(s,ZF)}createBucket(s){return new vb(s)}queryRadius(s){const i=s;return Fh("circle-radius",this,i)+Fh("circle-stroke-width",this,i)+Ov(this.paint.get("circle-translate"))}queryIntersectsFeature(s,i,l,d,f,v,x,C){const I=N2(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),R=this.paint.get("circle-radius").evaluate(i,l)+this.paint.get("circle-stroke-width").evaluate(i,l);return $2(s,d,v,x,C,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,R)}getProgramIds(){return["circle"]}getProgramConfiguration(s){return new Au(this,s)}},heatmap:class extends xs{createBucket(s){return new j2(s)}constructor(s){super(s,JF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=wb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(s){return Fh("heatmap-radius",this,s)}queryIntersectsFeature(s,i,l,d,f,v,x,C){const I=this.paint.get("heatmap-radius").evaluate(i,l);return $2(s,d,v,x,C,!0,!0,new S(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(s){return new Au(this,s)}},hillshade:class extends xs{constructor(s){super(s,QF)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends xs{constructor(s){super(s,mN)}getProgramIds(){const s=this.paint.get("fill-pattern"),i=s&&s.constantOr(1),l=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getProgramConfiguration(s){return new Au(this,s)}recalculate(s,i){super.recalculate(s,i);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new $v(s)}queryRadius(){return Ov(this.paint.get("fill-translate"))}queryIntersectsFeature(s,i,l,d,f,v){return!s.queryGeometry.isAboveHorizon&&L2(F2(s.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}},"fill-extrusion":class extends xs{constructor(s){super(s,PN)}createBucket(s){return new xm(s)}queryRadius(){return Ov(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(s){return new Au(this,s)}queryIntersectsFeature(s,i,l,d,f,v,x,C,I){const R=N2(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),H=this.paint.get("fill-extrusion-height").evaluate(i,l),q=this.paint.get("fill-extrusion-base").evaluate(i,l),Z=[0,0],J=C&&v.elevation,Q=v.elevation?v.elevation.exaggeration():1,oe=s.tile.getBucket(this);if(J&&oe instanceof xm){const Be=oe.centroidVertexArray,Ve=I+1;Ve<Be.length&&(Z[0]=Be.geta_centroid_pos0(Ve),Z[1]=Be.geta_centroid_pos1(Ve))}if(Z[0]===0&&Z[1]===1)return!1;v.projection.name==="globe"&&(d=aA([d],[new S(0,0),new S(Tn,Tn)],s.tileID.canonical).map(Be=>Be.polygon).flat());const he=J?C:null,[Ce,Ne]=function(Be,Ve,$e,lt,it,St,Bt,mt,At,It,Lt){return Be.projection.name==="globe"?function(Ft,gt,Ht,xn,Kt,sn,Wt,En,Wn,jn,$n){const Sn=[],gr=[],Pn=Ft.projection.upVectorScale($n,Ft.center.lat,Ft.worldSize).metersToTile,Gn=[0,0,0,1],br=[0,0,0,1],Wr=(Gr,Kr,ui,Ki)=>{Gr[0]=Kr,Gr[1]=ui,Gr[2]=Ki,Gr[3]=1},Fr=oA();Ht>0&&(Ht+=Fr),xn+=Fr;for(const Gr of gt){const Kr=[],ui=[];for(const Ki of Gr){const yr=Ki.x+Kt.x,Di=Ki.y+Kt.y,Si=Ft.projection.projectTilePoint(yr,Di,$n),rr=Ft.projection.upVector($n,Ki.x,Ki.y);let ti=Ht,$i=xn;if(Wt){const wr=cA(yr,Di,Ht,xn,Wt,En,Wn,jn);ti+=wr.base,$i+=wr.top}Ht!==0?Wr(Gn,Si.x+rr[0]*Pn*ti,Si.y+rr[1]*Pn*ti,Si.z+rr[2]*Pn*ti):Wr(Gn,Si.x,Si.y,Si.z),Wr(br,Si.x+rr[0]*Pn*$i,Si.y+rr[1]*Pn*$i,Si.z+rr[2]*Pn*$i),fi(Gn,Gn,sn),fi(br,br,sn),Kr.push(new jh(Gn[0],Gn[1],Gn[2])),ui.push(new jh(br[0],br[1],br[2]))}Sn.push(Kr),gr.push(ui)}return[Sn,gr]}(Be,Ve,$e,lt,it,St,Bt,mt,At,It,Lt):Bt?function(Ft,gt,Ht,xn,Kt,sn,Wt,En,Wn){const jn=[],$n=[],Sn=[0,0,0,1];for(const gr of Ft){const Pn=[],Gn=[];for(const br of gr){const Wr=br.x+xn.x,Fr=br.y+xn.y,Gr=cA(Wr,Fr,gt,Ht,sn,Wt,En,Wn);Sn[0]=Wr,Sn[1]=Fr,Sn[2]=Gr.base,Sn[3]=1,Qc(Sn,Sn,Kt),Sn[3]=Math.max(Sn[3],1e-5);const Kr=new jh(Sn[0]/Sn[3],Sn[1]/Sn[3],Sn[2]/Sn[3]);Sn[0]=Wr,Sn[1]=Fr,Sn[2]=Gr.top,Sn[3]=1,Qc(Sn,Sn,Kt),Sn[3]=Math.max(Sn[3],1e-5);const ui=new jh(Sn[0]/Sn[3],Sn[1]/Sn[3],Sn[2]/Sn[3]);Pn.push(Kr),Gn.push(ui)}jn.push(Pn),$n.push(Gn)}return[jn,$n]}(Ve,$e,lt,it,St,Bt,mt,At,It):function(Ft,gt,Ht,xn,Kt){const sn=[],Wt=[],En=Kt[8]*gt,Wn=Kt[9]*gt,jn=Kt[10]*gt,$n=Kt[11]*gt,Sn=Kt[8]*Ht,gr=Kt[9]*Ht,Pn=Kt[10]*Ht,Gn=Kt[11]*Ht;for(const br of Ft){const Wr=[],Fr=[];for(const Gr of br){const Kr=Gr.x+xn.x,ui=Gr.y+xn.y,Ki=Kt[0]*Kr+Kt[4]*ui+Kt[12],yr=Kt[1]*Kr+Kt[5]*ui+Kt[13],Di=Kt[2]*Kr+Kt[6]*ui+Kt[14],Si=Kt[3]*Kr+Kt[7]*ui+Kt[15],rr=Ki+En,ti=yr+Wn,$i=Di+jn,wr=Math.max(Si+$n,1e-5),mi=Ki+Sn,bo=yr+gr,Yi=Di+Pn,Ji=Math.max(Si+Gn,1e-5);Wr.push(new jh(rr/wr,ti/wr,$i/wr)),Fr.push(new jh(mi/Ji,bo/Ji,Yi/Ji))}sn.push(Wr),Wt.push(Fr)}return[sn,Wt]}(Ve,$e,lt,it,St)}(v,d,q,H,R,x,he,Z,Q,v.center.lat,s.tileID.canonical),we=s.queryGeometry;return function(Be,Ve,$e){let lt=1/0;L2($e,Ve)&&(lt=uA($e,Ve[0]));for(let it=0;it<Ve.length;it++){const St=Ve[it],Bt=Be[it];for(let mt=0;mt<St.length-1;mt++){const At=St[mt],It=[At,St[mt+1],Bt[mt+1],Bt[mt],At];R2($e,It)&&(lt=Math.min(lt,uA($e,It)))}}return lt!==1/0&&lt}(Ce,Ne,we.isPointQuery()?we.screenBounds:we.screenGeometry)}},line:class extends xs{constructor(s){super(s,dA),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Tf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(s,i){super.recalculate(s,i),this.paint._values["line-floorwidth"]=hA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new Wv(s)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(s){return new Au(this,s)}queryRadius(s){const i=s,l=pA(Fh("line-width",this,i),Fh("line-gap-width",this,i)),d=Fh("line-offset",this,i);return l/2+Math.abs(d)+Ov(this.paint.get("line-translate"))}queryIntersectsFeature(s,i,l,d,f,v){if(s.queryGeometry.isAboveHorizon)return!1;const x=F2(s.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),v.angle,s.pixelToTileUnitsFactor),C=s.pixelToTileUnitsFactor/2*pA(this.paint.get("line-width").evaluate(i,l),this.paint.get("line-gap-width").evaluate(i,l)),I=this.paint.get("line-offset").evaluate(i,l);return I&&(d=function(R,H){const q=[],Z=new S(0,0);for(let J=0;J<R.length;J++){const Q=R[J],oe=[];for(let he=0;he<Q.length;he++){const Ce=Q[he-1],Ne=Q[he],we=Q[he+1],Be=he===0?Z:Ne.sub(Ce)._unit()._perp(),Ve=he===Q.length-1?Z:we.sub(Ne)._unit()._perp(),$e=Be._add(Ve)._unit();$e._mult(1/($e.x*Ve.x+$e.y*Ve.y)),oe.push($e._mult(H)._add(Ne))}q.push(oe)}return q}(d,I*s.pixelToTileUnitsFactor)),function(R,H,q){for(let Z=0;Z<H.length;Z++){const J=H[Z];if(R.length>=3){for(let Q=0;Q<J.length;Q++)if(rd(R,J[Q]))return!0}if(HF(R,J,q))return!0}return!1}(x,d,C)}isTileClipped(){return!0}},symbol:i_,background:class extends xs{constructor(s){super(s,R6)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends xs{constructor(s){super(s,L6)}getProgramIds(){return["raster"]}},sky:class extends xs{constructor(s){super(s,z6),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="sky-gradient"?this._updateColorRamp():s!=="sky-atmosphere-sun"&&s!=="sky-atmosphere-halo-color"&&s!=="sky-atmosphere-color"&&s!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=wb({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(s){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=s.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(s,i){if(this.paint.get("sky-type")==="atmosphere"){const d=this.paint.get("sky-atmosphere-sun"),f=!d,v=s.style.light,x=v.properties.get("position");return f&&v.properties.get("anchor")==="viewport"&&Xe("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),f?Vb(x.azimuthal,90-x.polar,i):Vb(d[0],90-d[1],i)}const l=this.paint.get("sky-gradient-center");return Vb(l[0],90-l[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(s){this._skyboxInvalidated=!1,this._lightPosition=s.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const s=this.paint.get("sky-type");return s==="atmosphere"?["skyboxCapture","skybox"]:s==="gradient"?["skyboxGradient"]:null}}};class Pm{constructor(i,l,d,f){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(l,f)}update(i,l,d){const{width:f,height:v}=i,{context:x}=this,{gl:C}=x,{HTMLImageElement:I,HTMLCanvasElement:R,HTMLVideoElement:H,ImageData:q,ImageBitmap:Z}=m;if(C.bindTexture(C.TEXTURE_2D,this.texture),x.pixelStoreUnpackFlipY.set(!1),x.pixelStoreUnpack.set(1),x.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!l||l.premultiply!==!1)),d||this.size&&this.size[0]===f&&this.size[1]===v){const{x:J,y:Q}=d||{x:0,y:0};i instanceof I||i instanceof R||i instanceof H||i instanceof q||Z&&i instanceof Z?C.texSubImage2D(C.TEXTURE_2D,0,J,Q,C.RGBA,C.UNSIGNED_BYTE,i):C.texSubImage2D(C.TEXTURE_2D,0,J,Q,f,v,C.RGBA,C.UNSIGNED_BYTE,i.data)}else this.size=[f,v],i instanceof I||i instanceof R||i instanceof H||i instanceof q||Z&&i instanceof Z?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,i):C.texImage2D(C.TEXTURE_2D,0,this.format,f,v,0,this.format,C.UNSIGNED_BYTE,i.data);this.useMipmap=Boolean(l&&l.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&C.generateMipmap(C.TEXTURE_2D)}bind(i,l){const{context:d}=this,{gl:f}=d;f.bindTexture(f.TEXTURE_2D,this.texture),i!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap?i===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_NEAREST:i),this.filter=i),l!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,l),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class F6{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class N6{constructor(){this.tasks={},this.taskQueue=[],en(["process"],this),this.invoker=new F6(this.process),this.nextId=0}add(i,l){const d=this.nextId++,f=function({type:v,isSymbolTile:x,zoom:C}){return C=C||0,v==="message"?0:v!=="maybePrepare"||x?v!=="parseTile"||x?v==="parseTile"&&x?300-C:v==="maybePrepare"&&x?400-C:500:200-C:100-C}(l);if(f===0){_t();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[d]={fn:i,metadata:l,priority:f,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){_t();try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const l=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let i=null,l=1/0;for(let f=0;f<this.taskQueue.length;f++){const v=this.tasks[this.taskQueue[f]];v.priority<l&&(l=v.priority,i=f)}if(i===null)return null;const d=this.taskQueue[i];return this.taskQueue.splice(i,1),d}remove(){this.invoker.remove()}}class ZA{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const d=i[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const $6=["tile","layer","source","sourceLayer","state"];class XA{constructor(i,l,d,f,v){this.type="Feature",this._vectorTileFeature=i,this._z=l,this._x=d,this._y=f,this.properties=i.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const l of $6)this[l]!==void 0&&(i[l]=this[l]);return i}}const Ga=32,Ys=33,Ru=new Uint16Array(8184);for(let s=0;s<2046;s++){let i=s+2,l=0,d=0,f=0,v=0,x=0,C=0;for(1&i?f=v=x=Ga:l=d=C=Ga;(i>>=1)>1;){const R=l+f>>1,H=d+v>>1;1&i?(f=l,v=d,l=x,d=C):(l=f,d=v,f=x,v=C),x=R,C=H}const I=4*s;Ru[I+0]=l,Ru[I+1]=d,Ru[I+2]=f,Ru[I+3]=v}const Js=new Uint16Array(2178),Lu=new Uint8Array(1089),o_=new Uint16Array(1089);function KA(s){return s===0?-.03125:s===32?.03125:0}var YA=hn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const JA={type:2,extent:Tn,loadGeometry:()=>[[new S(0,0),new S(8193,0),new S(8193,8193),new S(0,8193),new S(0,0)]]};class Hb{constructor(i,l,d,f,v){this.tileID=i,this.uid=be(),this.uses=0,this.tileSize=l,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=v,this.expiredRequestCount=0,this.state="loading",f&&f.transform&&(this.projection=f.transform.projection)}registerFadeDuration(i){const l=i+this.timeAdded;l<ir.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=od(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,l,d){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(f,v){const x={};if(!v)return x;for(const C of f){const I=C.layerIds.map(R=>v.getLayer(R)).filter(Boolean);if(I.length!==0){C.layers=I,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(R=>I.filter(H=>H.id===R)[0]));for(const R of I)x[R.id]=C}}return x}(i.buckets,l.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const v=this.buckets[f];if(v instanceof Du){if(this.hasSymbolBuckets=!0,!d)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const v=this.buckets[f];if(v instanceof Du&&v.hasRTLText){this.hasRTLText=!0,Ge.isLoading()||Ge.isLoaded()||He()!=="deferred"||je();break}}this.queryPadding=0;for(const f in this.buckets){const v=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(f).queryRadius(v))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new Y1}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(i)}const l=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Pm(i,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Pm(i,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Pm(i,this.lineAtlas.image,l.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,l,d,f,v,x,C,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:f,pixelPosMatrix:C,transform:x,params:v,tileTransform:this.tileTransform},i,l,d):{}}querySourceFeatures(i,l){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),v=l?l.sourceLayer:"",x=f._geojsonTileLayer||f[v];if(!x)return;const C=bh(l&&l.filter),{z:I,x:R,y:H}=this.tileID.canonical,q={z:I,x:R,y:H};for(let Z=0;Z<x.length;Z++){const J=x.feature(Z);if(C.needGeometry){const he=nd(J,!0);if(!C.filter(new et(this.tileID.overscaledZ),he,this.tileID.canonical))continue}else if(!C.filter(new et(this.tileID.overscaledZ),J))continue;const Q=d.getId(J,v),oe=new XA(J,I,R,H,Q);oe.tile=q,i.push(oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const l=this.expirationTime;if(i.cacheControl){const d=ht(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(l)if(this.expirationTime<l)f=!0;else{const v=this.expirationTime-l;v?this.expirationTime=d+Math.max(v,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!l)return;const d=this.latestFeatureIndex.loadVTLayers(),f=l.style.listImages();for(const v in this.buckets){if(!l.style.hasLayer(v))continue;const x=this.buckets[v],C=x.layers[0].sourceLayer||"_geojsonTileLayer",I=d[C],R=i[C];if(!I||!R||Object.keys(R).length===0)continue;if(x.update(R,I,f,this.imageAtlas&&this.imageAtlas.patternPositions||{}),x instanceof Wv||x instanceof $v){const q=l.style._getSourceCache(x.layers[0].source);l._terrain&&l._terrain.enabled&&q&&x.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(q.id,this.tileID)}const H=l&&l.style&&l.style.getLayer(v);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ir.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=ir.now()+i}setTexture(i,l){const d=l.context,f=d.gl;this.texture=this.texture||l.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new Pm(d,i,f.RGBA,{useMipmap:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE))}setDependencies(i,l){const d={};for(const f of l)d[f]=!0;this.dependencies[i]=d}hasDependency(i,l){for(const d of i){const f=this.dependencies[d];if(f){for(const v of l)if(f[v])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,l){if(!l||l.name==="mercator"||this._tileDebugBuffer)return;const d=Il(JA,this.tileID.canonical,this.tileTransform)[0],f=new gn,v=new Ws;for(let x=0;x<d.length;x++){const{x:C,y:I}=d[x];f.emplaceBack(C,I),v.emplaceBack(x)}v.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(v),this._tileDebugBuffer=i.createVertexBuffer(f,um.members),this._tileDebugSegments=Ei.simpleSegment(0,0,f.length,v.length)}_makeTileBoundsBuffers(i,l){if(this._tileBoundsBuffer||!l||l.name==="mercator")return;const d=Il(JA,this.tileID.canonical,this.tileTransform)[0];let f,v;if(this.isRaster){const x=function(C,I){const R=od(C,I),H=Math.pow(2,C.z);for(let he=0;he<Ys;he++)for(let Ce=0;Ce<Ys;Ce++){const Ne=wa((C.x+(Ce+KA(Ce))/Ga)/H),we=co((C.y+(he+KA(he))/Ga)/H),Be=I.project(Ne,we),Ve=he*Ys+Ce;Js[2*Ve+0]=Math.round((Be.x*R.scale-R.x)*Tn),Js[2*Ve+1]=Math.round((Be.y*R.scale-R.y)*Tn)}Lu.fill(0),o_.fill(0);for(let he=2045;he>=0;he--){const Ce=4*he,Ne=Ru[Ce+0],we=Ru[Ce+1],Be=Ru[Ce+2],Ve=Ru[Ce+3],$e=Ne+Be>>1,lt=we+Ve>>1,it=$e+lt-we,St=lt+Ne-$e,Bt=we*Ys+Ne,mt=Ve*Ys+Be,At=lt*Ys+$e,It=Math.hypot((Js[2*Bt+0]+Js[2*mt+0])/2-Js[2*At+0],(Js[2*Bt+1]+Js[2*mt+1])/2-Js[2*At+1])>=16;if(Lu[At]=Lu[At]||(It?1:0),he<1022){const Lt=(we+St>>1)*Ys+(Ne+it>>1),Ft=(Ve+St>>1)*Ys+(Be+it>>1);Lu[At]=Lu[At]||Lu[Lt]||Lu[Ft]}}const q=new fr,Z=new uo;let J=0;function Q(he,Ce){const Ne=Ce*Ys+he;return o_[Ne]===0&&(q.emplaceBack(Js[2*Ne+0],Js[2*Ne+1],he*Tn/Ga,Ce*Tn/Ga),o_[Ne]=++J),o_[Ne]-1}function oe(he,Ce,Ne,we,Be,Ve){const $e=he+Ne>>1,lt=Ce+we>>1;if(Math.abs(he-Be)+Math.abs(Ce-Ve)>1&&Lu[lt*Ys+$e])oe(Be,Ve,he,Ce,$e,lt),oe(Ne,we,Be,Ve,$e,lt);else{const it=Q(he,Ce),St=Q(Ne,we),Bt=Q(Be,Ve);Z.emplaceBack(it,St,Bt)}}return oe(0,0,Ga,Ga,Ga,0),oe(Ga,Ga,0,0,0,Ga),{vertices:q,indices:Z}}(this.tileID.canonical,l);f=x.vertices,v=x.indices}else{f=new fr,v=new uo;for(const{x:C,y:I}of d)f.emplaceBack(C,I,0,0);const x=Nh(f.int16,void 0,4);for(let C=0;C<x.length;C+=3)v.emplaceBack(x[C],x[C+1],x[C+2])}this._tileBoundsBuffer=i.createVertexBuffer(f,YA.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(v),this._tileBoundsSegments=Ei.simpleSegment(0,0,f.length,v.length)}_makeGlobeTileDebugBuffers(i,l){const d=l.projection;if(!d||d.name!=="globe"||l.freezeTileCoverage)return;const f=this.tileID.canonical,v=hm(w2(f,l)),x=zh(l.zoom);let C;x>0&&(C=nb(new Float64Array(16),l.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,f,l,v,C,x),this._makeGlobeTileDebugTextBuffer(i,f,l,v,C,x)}_globePoint(i,l,d,f,v,x,C){let I=dm(i,l,d);if(x){const R=1<<d.z,H=Zs(f.center.lng),q=Xs(f.center.lat),Z=(d.x+.5)/R-H;let J=0;Z>.5?J=-1:Z<-.5&&(J=1);let Q=(i/Tn+d.x)/R+J,oe=(l/Tn+d.y)/R;Q=(Q-H)*f._pixelsPerMercatorPixel+H,oe=(oe-q)*f._pixelsPerMercatorPixel+q;const he=[Q*f.worldSize,oe*f.worldSize,0];fi(he,he,x),I=td(I,he,C)}return fi(I,I,v)}_makeGlobeTileDebugBorderBuffer(i,l,d,f,v,x){const C=new gn,I=new Ws,R=new lr,H=(Z,J,Q,oe,he)=>{const Ce=(Q-Z)/(he-1),Ne=(oe-J)/(he-1),we=C.length;for(let Be=0;Be<he;Be++){const Ve=Z+Be*Ce,$e=J+Be*Ne;C.emplaceBack(Ve,$e);const lt=this._globePoint(Ve,$e,l,d,f,v,x);R.emplaceBack(lt[0],lt[1],lt[2]),I.emplaceBack(we+Be)}},q=Tn;H(0,0,q,0,16),H(q,0,q,q,16),H(q,q,0,q,16),H(0,q,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(I),this._tileDebugBuffer=i.createVertexBuffer(C,um.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(R,x2.members),this._tileDebugSegments=Ei.simpleSegment(0,0,C.length,I.length)}_makeGlobeTileDebugTextBuffer(i,l,d,f,v,x){const C=new gn,I=new uo,R=new lr,H=25;I.reserve(32),C.reserve(H),R.reserve(H);const q=(Z,J)=>H*Z+J;for(let Z=0;Z<H;Z++){const J=2048*Z;for(let Q=0;Q<H;Q++){const oe=2048*Q;C.emplaceBack(oe,J);const he=this._globePoint(oe,J,l,d,f,v,x);R.emplaceBack(he[0],he[1],he[2])}}for(let Z=0;Z<4;Z++)for(let J=0;J<4;J++){const Q=q(Z,J),oe=q(Z,J+1),he=q(Z+1,J),Ce=q(Z+1,J+1);I.emplaceBack(Q,oe,he),I.emplaceBack(he,oe,Ce)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(I),this._tileDebugTextBuffer=i.createVertexBuffer(C,um.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(R,x2.members),this._tileDebugTextSegments=Ei.simpleSegment(0,0,H,32)}}class U6{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,l,d){const f=String(l);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][f]=this.stateChanges[i][f]||{},tt(this.stateChanges[i][f],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const v in this.state[i])v!==f&&(this.deletedStates[i][v]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][f]===null){this.deletedStates[i][f]={};for(const v in this.state[i][f])d[v]||(this.deletedStates[i][f][v]=null)}else for(const v in d)this.deletedStates[i]&&this.deletedStates[i][f]&&this.deletedStates[i][f][v]===null&&delete this.deletedStates[i][f][v]}removeFeatureState(i,l,d){if(this.deletedStates[i]===null)return;const f=String(l);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&l!==void 0)this.deletedStates[i][f]!==null&&(this.deletedStates[i][f]=this.deletedStates[i][f]||{},this.deletedStates[i][f][d]=null);else if(l!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][f])for(d in this.deletedStates[i][f]={},this.stateChanges[i][f])this.deletedStates[i][f][d]=null;else this.deletedStates[i][f]=null;else this.deletedStates[i]=null}getState(i,l){const d=String(l),f=tt({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const v=this.deletedStates[i][l];if(v===null)return{};for(const x in v)delete f[x]}return f}initializeTileState(i,l){i.setFeatureState(this.state,l)}coalesceChanges(i,l){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const v={};for(const x in this.stateChanges[f])this.state[f][x]||(this.state[f][x]={}),tt(this.state[f][x],this.stateChanges[f][x]),v[x]=this.state[f][x];d[f]=v}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const v={};if(this.deletedStates[f]===null)for(const x in this.state[f])v[x]={},this.state[f][x]={};else for(const x in this.deletedStates[f]){if(this.deletedStates[f][x]===null)this.state[f][x]={};else if(this.state[f][x])for(const C of Object.keys(this.deletedStates[f][x]))delete this.state[f][x][C];v[x]=this.state[f][x]}d[f]=d[f]||{},tt(d[f],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const f in i)i[f].setFeatureState(d,l)}}class QA{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,l){const d=this.toIdx(i,l);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(i,l){return this.leaves[this.toIdx(i,l)]}toIdx(i,l){return l*this.size+i}}function eM(s,i,l,d){let f=0,v=Number.MAX_VALUE;for(let x=0;x<3;x++)if(Math.abs(d[x])<1e-15){if(l[x]<s[x]||l[x]>i[x])return null}else{const C=1/d[x];let I=(s[x]-l[x])*C,R=(i[x]-l[x])*C;if(I>R){const H=I;I=R,R=H}if(I>f&&(f=I),R<v&&(v=R),f>v)return null}return f}function tM(s,i,l,d,f,v,x,C,I,R,H){const q=d-s,Z=f-i,J=v-l,Q=x-s,oe=C-i,he=I-l,Ce=H[1]*he-H[2]*oe,Ne=H[2]*Q-H[0]*he,we=H[0]*oe-H[1]*Q,Be=q*Ce+Z*Ne+J*we;if(Math.abs(Be)<1e-15)return null;const Ve=1/Be,$e=R[0]-s,lt=R[1]-i,it=R[2]-l,St=($e*Ce+lt*Ne+it*we)*Ve;if(St<0||St>1)return null;const Bt=lt*J-it*Z,mt=it*q-$e*J,At=$e*Z-lt*q,It=(H[0]*Bt+H[1]*mt+H[2]*At)*Ve;return It<0||St+It>1?null:(Q*Bt+oe*mt+he*At)*Ve}function nM(s,i,l){return(s-i)/(l-i)}function rM(s,i,l,d,f,v,x,C,I){const R=1<<l,H=v-d,q=x-f,Z=(s+1)/R*H+d,J=(i+0)/R*q+f,Q=(i+1)/R*q+f;C[0]=(s+0)/R*H+d,C[1]=J,I[0]=Z,I[1]=Q}class iM{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(v){const x=Math.ceil(Math.log2(v.dim/8)),C=[];let I=Math.ceil(Math.pow(2,x));const R=1/I,H=(J,Q,oe,he,Ce)=>{const Ne=he?1:0,we=(J+1)*oe-Ne,Be=Q*oe,Ve=(Q+1)*oe-Ne;Ce[0]=J*oe,Ce[1]=Be,Ce[2]=we,Ce[3]=Ve};let q=new QA(I);const Z=[];for(let J=0;J<I*I;J++){H(J%I,Math.floor(J/I),R,!1,Z);const Q=Ou(Z[0],Z[1],v),oe=Ou(Z[2],Z[1],v),he=Ou(Z[2],Z[3],v),Ce=Ou(Z[0],Z[3],v);q.minimums.push(Math.min(Q,oe,he,Ce)),q.maximums.push(Math.max(Q,oe,he,Ce)),q.leaves.push(1)}for(C.push(q),I/=2;I>=1;I/=2){const J=C[C.length-1];q=new QA(I);for(let Q=0;Q<I*I;Q++){H(Q%I,Math.floor(Q/I),2,!0,Z);const oe=J.getElevation(Z[0],Z[1]),he=J.getElevation(Z[2],Z[1]),Ce=J.getElevation(Z[2],Z[3]),Ne=J.getElevation(Z[0],Z[3]),we=J.isLeaf(Z[0],Z[1]),Be=J.isLeaf(Z[2],Z[1]),Ve=J.isLeaf(Z[2],Z[3]),$e=J.isLeaf(Z[0],Z[3]),lt=Math.min(oe.min,he.min,Ce.min,Ne.min),it=Math.max(oe.max,he.max,Ce.max,Ne.max),St=we&&Be&&Ve&&$e;q.maximums.push(it),q.minimums.push(lt),q.leaves.push(it-lt<=5&&St?1:0)}C.push(q)}return C}(this.dem),d=l.length-1,f=l[d];this._addNode(f.minimums[0],f.maximums[0],f.leaves[0]),this._construct(l,0,0,d,0)}raycastRoot(i,l,d,f,v,x,C=1){return eM([i,l,-100],[d,f,this.maximums[0]*C],v,x)}raycast(i,l,d,f,v,x,C=1){if(!this.nodeCount)return null;const I=this.raycastRoot(i,l,d,f,v,x,C);if(I==null)return null;const R=[],H=[],q=[],Z=[],J=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;J.length>0;){const{idx:Q,t:oe,nodex:he,nodey:Ce,depth:Ne}=J.pop();if(this.leaves[Q]){rM(he,Ce,Ne,i,l,d,f,q,Z);const Be=1<<Ne,Ve=(he+0)/Be,$e=(he+1)/Be,lt=(Ce+0)/Be,it=(Ce+1)/Be,St=Ou(Ve,lt,this.dem)*C,Bt=Ou($e,lt,this.dem)*C,mt=Ou($e,it,this.dem)*C,At=Ou(Ve,it,this.dem)*C,It=tM(q[0],q[1],St,Z[0],q[1],Bt,Z[0],Z[1],mt,v,x),Lt=tM(Z[0],Z[1],mt,q[0],Z[1],At,q[0],q[1],St,v,x),Ft=Math.min(It!==null?It:Number.MAX_VALUE,Lt!==null?Lt:Number.MAX_VALUE);if(Ft!==Number.MAX_VALUE)return Ft;{const gt=sm([],v,x,oe);if(oM(St,Bt,At,mt,nM(gt[0],q[0],Z[0]),nM(gt[1],q[1],Z[1]))>=gt[2])return oe}continue}let we=0;for(let Be=0;Be<this._siblingOffset.length;Be++){rM((he<<1)+this._siblingOffset[Be][0],(Ce<<1)+this._siblingOffset[Be][1],Ne+1,i,l,d,f,q,Z),q[2]=-100,Z[2]=this.maximums[this.childOffsets[Q]+Be]*C;const Ve=eM(q,Z,v,x);if(Ve!=null){const $e=Ve;R[Be]=$e;let lt=!1;for(let it=0;it<we&&!lt;it++)$e>=R[H[it]]&&(H.splice(it,0,Be),lt=!0);lt||(H[we]=Be),we++}}for(let Be=0;Be<we;Be++){const Ve=H[Be];J.push({idx:this.childOffsets[Q]+Ve,t:R[Ve],nodex:(he<<1)+this._siblingOffset[Ve][0],nodey:(Ce<<1)+this._siblingOffset[Ve][1],depth:Ne+1})}}return null}_addNode(i,l,d){return this.minimums.push(i),this.maximums.push(l),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(i,l,d,f,v){if(i[f].isLeaf(l,d)===1)return;this.childOffsets[v]||(this.childOffsets[v]=this.nodeCount);const x=f-1,C=i[x];let I=0,R=0;for(let H=0;H<this._siblingOffset.length;H++){const q=2*l+this._siblingOffset[H][0],Z=2*d+this._siblingOffset[H][1],J=C.getElevation(q,Z),Q=C.isLeaf(q,Z),oe=this._addNode(J.min,J.max,Q);Q&&(I|=1<<H),R||(R=oe)}for(let H=0;H<this._siblingOffset.length;H++)I&1<<H||this._construct(i,2*l+this._siblingOffset[H][0],2*d+this._siblingOffset[H][1],x,R+H)}}function oM(s,i,l,d,f,v){return Qn(Qn(s,l,v),Qn(i,d,v),f)}function Ou(s,i,l){const d=l.dim,f=Le(s*d-.5,0,d-1),v=Le(i*d-.5,0,d-1),x=Math.floor(f),C=Math.floor(v),I=Math.min(x+1,d-1),R=Math.min(C+1,d-1);return oM(l.get(x,C),l.get(I,C),l.get(x,R),l.get(I,R),f-x,v-C)}const aM={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function j6(s,i,l){return(256*s*256+256*i+l)/10-1e4}function V6(s,i,l){return 256*s+i+l/256-32768}class a_{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,l,d,f=!1,v=!1){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return Xe(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const x=this.dim=l.height-2,C=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.encoding=d||"mapbox",this.borderReady=f,!f){for(let I=0;I<x;I++)C[this._idx(-1,I)]=C[this._idx(0,I)],C[this._idx(x,I)]=C[this._idx(x-1,I)],C[this._idx(I,-1)]=C[this._idx(I,0)],C[this._idx(I,x)]=C[this._idx(I,x-1)];C[this._idx(-1,-1)]=C[this._idx(0,0)],C[this._idx(x,-1)]=C[this._idx(x-1,0)],C[this._idx(-1,x)]=C[this._idx(0,x-1)],C[this._idx(x,x)]=C[this._idx(x-1,x-1)],v&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new iM(this)}get(i,l,d=!1){d&&(i=Le(i,-1,this.dim),l=Le(l,-1,this.dim));const f=4*this._idx(i,l);return(this.encoding==="terrarium"?V6:j6)(this.pixels[f],this.pixels[f+1],this.pixels[f+2])}static getUnpackVector(i){return aM[i]}get unpackVector(){return aM[this.encoding]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}static pack(i,l){const d=[0,0,0,0],f=a_.getUnpackVector(l);let v=Math.floor((i+f[3])/f[2]);return d[2]=v%256,v=Math.floor(v/256),d[1]=v%256,v=Math.floor(v/256),d[0]=v,d}getPixels(){return new oa({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,l,d){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let f=l*this.dim,v=l*this.dim+this.dim,x=d*this.dim,C=d*this.dim+this.dim;switch(l){case-1:f=v-1;break;case 1:v=f+1}switch(d){case-1:x=C-1;break;case 1:C=x+1}const I=-l*this.dim,R=-d*this.dim;for(let H=x;H<C;H++)for(let q=f;q<v;q++){const Z=4*this._idx(q,H),J=4*this._idx(q+I,H+R);this.pixels[Z+0]=i.pixels[J+0],this.pixels[Z+1]=i.pixels[J+1],this.pixels[Z+2]=i.pixels[J+2],this.pixels[Z+3]=i.pixels[J+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}rn(a_,"DEMData"),rn(iM,"DemMinMaxQuadTree",{omit:["dem"]});class H6{constructor(i,l){this.max=i,this.onRemove=l,this.reset()}reset(){for(const i in this.data)for(const l of this.data[i])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(i,l,d){const f=i.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const v={value:l,timeout:void 0};if(d!==void 0&&(v.timeout=setTimeout(()=>{this.remove(i,v)},d)),this.data[f].push(v),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const l=this.data[i].shift();return l.timeout&&clearTimeout(l.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),l.value}getByKey(i){const l=this.data[i];return l?l[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,l){if(!this.has(i))return this;const d=i.wrapped().key,f=l===void 0?0:this.data[d].indexOf(l),v=this.data[d][f];return this.data[d].splice(f,1),v.timeout&&clearTimeout(v.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(v.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(i){const l=[];for(const d in this.data)for(const f of this.data[d])i(f.value)||l.push(f);for(const d of l)this.remove(d.value.tileID,d)}}class Kh{constructor(i,l,d){this.func=i,this.mask=l,this.range=d}}Kh.ReadOnly=!1,Kh.ReadWrite=!0,Kh.disabled=new Kh(519,Kh.ReadOnly,[0,1]);const Wb=7680;class Gb{constructor(i,l,d,f,v,x){this.test=i,this.ref=l,this.mask=d,this.fail=f,this.depthFail=v,this.pass=x}}Gb.disabled=new Gb({func:519,mask:0},0,0,Wb,Wb,Wb);class Qs{constructor(i,l,d){this.blendFunction=i,this.blendColor=l,this.mask=d}}Qs.Replace=[1,0],Qs.disabled=new Qs(Qs.Replace,pi.transparent,[!1,!1,!1,!1]),Qs.unblended=new Qs(Qs.Replace,pi.transparent,[!0,!0,!0,!0]),Qs.alphaBlended=new Qs([1,771],pi.transparent,[!0,!0,!0,!0]);const qb=1029,Zb=2305;class Cs{constructor(i,l,d){this.enable=i,this.mode=l,this.frontFace=d}}Cs.disabled=new Cs(!1,qb,Zb),Cs.backCCW=new Cs(!0,qb,Zb),Cs.backCW=new Cs(!0,qb,2304),Cs.frontCW=new Cs(!0,1028,2304),Cs.frontCCW=new Cs(!0,1028,Zb);class ad extends hs{constructor(i,l,d){super(),this.id=i,this._onlySymbols=d,l.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),l.on("error",()=>{this._sourceErrored=!0}),this._source=l,this._tiles={},this._cache=new H6(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=l.minTileCacheSize,this._maxTileCacheSize=l.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new U6,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const l=this._tiles[i];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,l){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,l)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const d=this._tiles[l];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return rt(this._tiles).map(i=>i.tileID).sort(sM).map(i=>i.key)}getRenderableIds(i){const l=[];for(const d in this._tiles)this._isIdRenderable(+d,i)&&l.push(this._tiles[d]);return i?l.sort((d,f)=>{const v=d.tileID,x=f.tileID,C=new S(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),I=new S(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-x.overscaledZ||I.y-C.y||I.x-C.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(sM).map(d=>d.key)}hasRenderableParent(i){const l=this.findLoadedParent(i,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(i,l){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(l||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,l){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=l),this._loadTile(d,this._tileLoaded.bind(this,d,i,l)))}_tileLoaded(i,l,d,f){if(f)if(i.state="errored",f.status!==404)this._source.fire(new Bs(f,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const v=this.map.painter.terrain;this.update(this.transform,v.getScaledDemTileSize(),!0),v.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=ir.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(l,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new xr("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const l=this.getRenderableIds();for(let f=0;f<l.length;f++){const v=l[f];if(i.neighboringTiles&&i.neighboringTiles[v]){const x=this.getTileByID(v);d(i,x),d(x,i)}}function d(f,v){if(!f.dem||f.dem.borderReady)return;f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0;let x=v.tileID.canonical.x-f.tileID.canonical.x;const C=v.tileID.canonical.y-f.tileID.canonical.y,I=Math.pow(2,f.tileID.canonical.z),R=v.tileID.key;x===0&&C===0||Math.abs(C)>1||(Math.abs(x)>1&&(Math.abs(x+I)===1?x+=I:Math.abs(x-I)===1&&(x-=I)),v.dem&&f.dem&&(f.dem.backfillBorder(v.dem,x,C),f.neighboringTiles&&f.neighboringTiles[R]&&(f.neighboringTiles[R].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,l,d,f){for(const v in this._tiles){let x=this._tiles[v];if(f[v]||!x.hasData()||x.tileID.overscaledZ<=l||x.tileID.overscaledZ>d)continue;let C=x.tileID;for(;x&&x.tileID.overscaledZ>l+1;){const R=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[R.key],x&&x.hasData()&&(C=R)}let I=C;for(;I.overscaledZ>l;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){f[C.key]=C;break}}}findLoadedParent(i,l){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=i.overscaledZ-1;d>=l;d--){const f=i.scaledTo(d),v=this._getLoadedTile(f);if(v)return v}}_getLoadedTile(i){const l=this._tiles[i.key];return l&&l.hasData()?l:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,l){l=l||this._source.tileSize;const d=Math.ceil(i.width/l)+1,f=Math.ceil(i.height/l)+1,v=Math.floor(d*f*5),x=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,v):v,C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(C)}handleWrapJump(i){const l=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,l){const d={};for(const f in this._tiles){const v=this._tiles[f];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),d[v.tileID.key]=v}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(+f,this._tiles[f])}}update(i,l,d){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;let f;this.updateCacheSize(i,l),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(C=>new Oo(C.canonical.z,C.wrap,C.canonical.z,C.canonical.x,C.canonical.y)):(f=i.coveringTiles({tileSize:l||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(C=>this._source.hasTile(C)))):f=[];const v=this._updateRetainedTiles(f);if(lM(this._source.type)&&f.length!==0){const C={},I={},R=Object.keys(v);for(const q of R){const Z=v[q],J=this._tiles[q];if(!J||J.fadeEndTime&&J.fadeEndTime<=ir.now())continue;const Q=this.findLoadedParent(Z,Math.max(Z.overscaledZ-ad.maxOverzooming,this._source.minzoom));Q&&(this._addTile(Q.tileID),C[Q.tileID.key]=Q.tileID),I[q]=Z}const H=f[f.length-1].overscaledZ;for(const q in this._tiles){const Z=this._tiles[q];if(v[q]||!Z.hasData())continue;let J=Z.tileID;for(;J.overscaledZ>H;){J=J.scaledTo(J.overscaledZ-1);const Q=this._tiles[J.key];if(Q&&Q.hasData()&&I[J.key]){v[q]=Z.tileID;break}}}for(const q in C)v[q]||(this._coveredTiles[q]=!0,v[q]=C[q])}for(const C in v)this._tiles[C].clearFadeHold();const x=function(C,I){const R=[];for(const H in C)H in I||R.push(H);return R}(this._tiles,v);for(const C of x){const I=this._tiles[C];I.hasSymbolBuckets&&!I.holdingForFade()?I.setHoldDuration(this.map._fadeDuration):I.hasSymbolBuckets&&!I.symbolFadeFinished()||this._removeTile(+C)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const l={};if(i.length===0)return l;const d={},f=i.reduce((R,H)=>Math.min(R,H.overscaledZ),1/0),v=i[0].overscaledZ,x=Math.max(v-ad.maxOverzooming,this._source.minzoom),C=Math.max(v+ad.maxUnderzooming,this._source.minzoom),I={};for(const R of i){const H=this._addTile(R);l[R.key]=R,H.hasData()||f<this._source.maxzoom&&(I[R.key]=R)}this._retainLoadedChildren(I,f,C,l);for(const R of i){let H=this._tiles[R.key];if(H.hasData())continue;if(R.canonical.z>=this._source.maxzoom){const Z=R.children(this._source.maxzoom)[0],J=this.getTile(Z);if(J&&J.hasData()){l[Z.key]=Z;continue}}else{const Z=R.children(this._source.maxzoom);if(l[Z[0].key]&&l[Z[1].key]&&l[Z[2].key]&&l[Z[3].key])continue}let q=H.wasRequested();for(let Z=R.overscaledZ-1;Z>=x;--Z){const J=R.scaledTo(Z);if(d[J.key]||(d[J.key]=!0,H=this.getTile(J),!H&&q&&(H=this._addTile(J)),H&&(l[J.key]=J,q=H.wasRequested(),H.hasData())))break}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const l=[];let d,f=this._tiles[i].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}l.push(f.key);const v=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(v),d)break;f=v}for(const v of l)this._loadedParentTiles[v]=d}}_addTile(i){let l=this._tiles[i.key];if(l)return l;l=this._cache.getAndRemove(i),l&&(this._setTileReloadTimer(i.key,l),l.tileID=i,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,l)));const d=Boolean(l);if(!d){const f=this.map?this.map.painter:null;l=new Hb(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,f,this._isRaster),this._loadTile(l,this._tileLoaded.bind(this,l,i.key,l.state))}return l?(l.uses++,this._tiles[i.key]=l,d||this._source.fire(new xr("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l):null}_setTileReloadTimer(i,l){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=l.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const l=this._tiles[i];l&&(l.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,l,d){const f=[],v=this.transform;if(!v)return f;const x=v.projection.name==="globe",C=Zs(v.center.lng);for(const I in this._tiles){const R=this._tiles[I];if(d&&R.clearQueryDebugViz(),R.holdingForFade())continue;let H;if(x){const q=R.tileID.canonical;if(q.z===0){const Z=[Math.abs(Le(C,...Dm(q,-1))-C),Math.abs(Le(C,...Dm(q,1))-C)];H=[0,2*Z.indexOf(Math.min(...Z))-1]}else{const Z=[Math.abs(Le(C,...Dm(q,-1))-C),Math.abs(Le(C,...Dm(q,0))-C),Math.abs(Le(C,...Dm(q,1))-C)];H=[Z.indexOf(Math.min(...Z))-1]}}else H=[0];for(const q of H){const Z=i.containsTile(R,v,l,q);Z&&f.push(Z)}}return f}getVisibleCoordinates(i){const l=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);for(const d of l)d.projMatrix=this.transform.calculateProjMatrix(d.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(lM(this._source.type))for(const i in this._tiles){const l=this._tiles[i];if(l.fadeEndTime!==void 0&&l.fadeEndTime>=ir.now())return!0}return!1}setFeatureState(i,l,d){this._state.updateState(i=i||"_geojsonTileLayer",l,d)}removeFeatureState(i,l,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",l,d)}getFeatureState(i,l){return this._state.getState(i=i||"_geojsonTileLayer",l)}setDependencies(i,l,d){const f=this._tiles[i];f&&f.setDependencies(l,d)}reloadTilesForDependencies(i,l){for(const d in this._tiles)this._tiles[d].hasDependency(i,l)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(i,l))}_preloadTiles(i,l){const d=new Map,f=Array.isArray(i)?i:[i],v=this.map.painter.terrain,x=this.usedForTerrain&&v?v.getScaledDemTileSize():this._source.tileSize;for(const C of f){const I=C.coveringTiles({tileSize:x,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const R of I)d.set(R.key,R);this.usedForTerrain&&C.updateElevation(!1)}Ze(Array.from(d.values()),(C,I)=>{const R=new Hb(C,this._source.tileSize*C.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(R,H=>{this._source.type==="raster-dem"&&R.dem&&this._backfillDEM(R),I(H,R)})},l)}}function sM(s,i){const l=Math.abs(2*s.wrap)-+(s.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return s.overscaledZ-i.overscaledZ||d-l||i.canonical.y-s.canonical.y||i.canonical.x-s.canonical.x}function lM(s){return s==="raster"||s==="image"||s==="video"||s==="custom"}function Dm(s,i){const l=1<<s.z;return[s.x/l+i,(s.x+1)/l+i]}ad.maxOverzooming=10,ad.maxUnderzooming=3;class s_{constructor(i,l,d){this._demTile=i,this._dem=this._demTile.dem,this._scale=l,this._offset=d}static create(i,l,d){const f=d||i.findDEMTileFor(l);if(!f||!f.dem)return;const v=f.dem,x=f.tileID,C=1<<l.canonical.z-x.canonical.z;return new s_(f,f.tileSize/Tn/C,[(l.canonical.x/C-x.canonical.x)*v.dim,(l.canonical.y/C-x.canonical.y)*v.dim])}tileCoordToPixel(i,l){const d=l*this._scale+this._offset[1],f=Math.floor(i*this._scale+this._offset[0]),v=Math.floor(d);return new S(f,v)}getElevationAt(i,l,d,f){const v=i*this._scale+this._offset[0],x=l*this._scale+this._offset[1],C=Math.floor(v),I=Math.floor(x),R=this._dem;return f=!!f,d?Qn(Qn(R.get(C,I,f),R.get(C,I+1,f),x-I),Qn(R.get(C+1,I,f),R.get(C+1,I+1,f),x-I),v-C):R.get(C,I,f)}getElevationAtPixel(i,l,d){return this._dem.get(i,l,!!d)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*Es(1,i)*this._dem.stride}}class uM{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Eu(Tn,16,0),this.featureIndexArray=new Qk,this.promoteId=l}insert(i,l,d,f,v,x=0){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,f,v,x);const I=this.grid;for(let R=0;R<l.length;R++){const H=l[R],q=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<H.length;Z++){const J=H[Z];q[0]=Math.min(q[0],J.x),q[1]=Math.min(q[1],J.y),q[2]=Math.max(q[2],J.x),q[3]=Math.max(q[3],J.y)}q[0]<Tn&&q[1]<Tn&&q[2]>=0&&q[3]>=0&&I.insert(C,q[0],q[1],q[2],q[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Mb(new Cm(this.rawTileData)).layers,this.sourceLayerCoder=new ZA(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,l,d,f){this.loadVTLayers();const v=i.params||{},x=bh(v.filter),C=i.tileResult,I=i.transform,R=C.bufferedTilespaceBounds,H=this.grid.query(R.min.x,R.min.y,R.max.x,R.max.y,(Q,oe,he,Ce)=>B2(C.bufferedTilespaceGeometry,Q,oe,he,Ce));H.sort(W6);let q=null;I.elevation&&H.length>0&&(q=s_.create(I.elevation,this.tileID));const Z={};let J;for(let Q=0;Q<H.length;Q++){const oe=H[Q];if(oe===J)continue;J=oe;const he=this.featureIndexArray.get(oe);let Ce=null;this.loadMatchingFeature(Z,he,x,v.layers,v.availableImages,l,d,f,(Ne,we,Be,Ve=0)=>(Ce||(Ce=Il(Ne,this.tileID.canonical,i.tileTransform)),we.queryIntersectsFeature(C,Ne,Be,Ce,this.z,i.transform,i.pixelPosMatrix,q,Ve)))}return Z}loadMatchingFeature(i,l,d,f,v,x,C,I,R){const{featureIndex:H,bucketIndex:q,sourceLayerIndex:Z,layoutVertexArrayOffset:J}=l,Q=this.bucketLayerIDs[q];if(f&&!function(Ne,we){for(let Be=0;Be<Ne.length;Be++)if(we.indexOf(Ne[Be])>=0)return!0;return!1}(f,Q))return;const oe=this.sourceLayerCoder.decode(Z),he=this.vtLayers[oe].feature(H);if(d.needGeometry){const Ne=nd(he,!0);if(!d.filter(new et(this.tileID.overscaledZ),Ne,this.tileID.canonical))return}else if(!d.filter(new et(this.tileID.overscaledZ),he))return;const Ce=this.getId(he,oe);for(let Ne=0;Ne<Q.length;Ne++){const we=Q[Ne];if(f&&f.indexOf(we)<0)continue;const Be=x[we];if(!Be)continue;let Ve={};Ce!==void 0&&I&&(Ve=I.getState(Be.sourceLayer||"_geojsonTileLayer",Ce));const $e=tt({},C[we]);$e.paint=cM($e.paint,Be.paint,he,Ve,v),$e.layout=cM($e.layout,Be.layout,he,Ve,v);const lt=!R||R(he,Be,Ve,J);if(!lt)continue;const it=new XA(he,this.z,this.x,this.y,Ce);it.layer=$e;let St=i[we];St===void 0&&(St=i[we]=[]),St.push({featureIndex:H,feature:it,intersectionZ:lt})}}lookupSymbolFeatures(i,l,d,f,v,x,C,I){const R={};this.loadVTLayers();const H=bh(v);for(const q of i)this.loadMatchingFeature(R,{bucketIndex:d,sourceLayerIndex:f,featureIndex:q,layoutVertexArrayOffset:0},H,x,C,I,l);return R}loadFeature(i){const{featureIndex:l,sourceLayerIndex:d}=i;this.loadVTLayers();const f=this.sourceLayerCoder.decode(d),v=this.vtFeatures[f];if(v[l])return v[l];const x=this.vtLayers[f].feature(l);return v[l]=x,x}hasLayer(i){for(const l of this.bucketLayerIDs)for(const d of l)if(i===d)return!0;return!1}getId(i,l){let d=i.id;if(this.promoteId){const f=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];f!=null&&(d=i.properties[f]),typeof d=="boolean"&&(d=Number(d))}return d}}function cM(s,i,l,d,f){return mn(s,(v,x)=>{const C=i instanceof st?i.get(x):null;return C&&C.evaluate?C.evaluate(l,d,f):C})}function W6(s,i){return i-s}rn(uM,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class dM{constructor(i,l){this.width=i,this.height=l,this.nextRow=0,this.image=new Pl({width:i,height:l}),this.positions={},this.uploaded=!1}getDash(i,l){const d=this.getKey(i,l);return this.positions[d]}trim(){const i=this.width,l=this.height=$t(this.nextRow);this.image.resize({width:i,height:l})}getKey(i,l){return i.join(",")+l}getDashRanges(i,l,d){const f=[];let v=i.length%2==1?-i[i.length-1]*d:0,x=i[0]*d,C=!0;f.push({left:v,right:x,isDash:C,zeroLength:i[0]===0});let I=i[0];for(let R=1;R<i.length;R++){C=!C;const H=i[R];v=I*d,I+=H,x=I*d,f.push({left:v,right:x,isDash:C,zeroLength:H===0})}return f}addRoundDash(i,l,d){const f=l/2;for(let v=-d;v<=d;v++){const x=this.width*(this.nextRow+d+v);let C=0,I=i[C];for(let R=0;R<this.width;R++){R/I.right>1&&(I=i[++C]);const H=Math.abs(R-I.left),q=Math.abs(R-I.right),Z=Math.min(H,q);let J;const Q=v/d*(f+1);if(I.isDash){const oe=f-Math.abs(Q);J=Math.sqrt(Z*Z+oe*oe)}else J=f-Math.sqrt(Z*Z+Q*Q);this.image.data[x+R]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(i,l){for(let I=i.length-1;I>=0;--I){const R=i[I],H=i[I+1];R.zeroLength?i.splice(I,1):H&&H.isDash===R.isDash&&(H.left=R.left,i.splice(I,1))}const d=i[0],f=i[i.length-1];d.isDash===f.isDash&&(d.left=f.left-this.width,f.right=d.right+this.width);const v=this.width*this.nextRow;let x=0,C=i[x];for(let I=0;I<this.width;I++){I/C.right>1&&(C=i[++x]);const R=Math.abs(I-C.left),H=Math.abs(I-C.right),q=Math.min(R,H);this.image.data[v+I]=Math.max(0,Math.min(255,(C.isDash?q:-q)+l+128))}}addDash(i,l){const d=this.getKey(i,l);if(this.positions[d])return this.positions[d];const f=l==="round",v=f?7:0,x=2*v+1;if(this.nextRow+x>this.height)return Xe("LineAtlas out of space"),null;i.length===0&&i.push(1);let C=0;for(let H=0;H<i.length;H++)i[H]<0&&(Xe("Negative value is found in line dasharray, replacing values with 0"),i[H]=0),C+=i[H];if(C!==0){const H=this.width/C,q=this.getDashRanges(i,this.width,H);f?this.addRoundDash(q,H,v):this.addRegularDash(q,l==="square"?.5*H:0)}const I=this.nextRow+v;this.nextRow+=x;const R={tl:[I,v],br:[C,0]};return this.positions[d]=R,R}}rn(dM,"LineAtlas");class hM{constructor(i){const l={},d=[];for(const C in i){const I=i[C],R=l[C]={};for(const H in I.glyphs){const q=I.glyphs[+H];if(!q||q.bitmap.width===0||q.bitmap.height===0)continue;const Z=q.metrics.localGlyph?2:1,J={x:0,y:0,w:q.bitmap.width+2*Z,h:q.bitmap.height+2*Z};d.push(J),R[H]=J}}const{w:f,h:v}=Db(d),x=new Pl({width:f||1,height:v||1});for(const C in i){const I=i[C];for(const R in I.glyphs){const H=I.glyphs[+R];if(!H||H.bitmap.width===0||H.bitmap.height===0)continue;const q=l[C][R],Z=H.metrics.localGlyph?2:1;Pl.copy(H.bitmap,x,{x:0,y:0},{x:q.x+Z,y:q.y+Z},H.bitmap)}}this.image=x,this.positions=l}}rn(hM,"GlyphAtlas");class G6{constructor(i){this.tileID=new Oo(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=od(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,l,d,f,v){this.status="parsing",this.data=i,this.collisionBoxArray=new Y1;const x=new ZA(Object.keys(i.layers).sort()),C=new uM(this.tileID,this.promoteId);C.bucketLayerIDs=[];const I={},R=new dM(256,256),H={featureIndex:C,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:R,availableImages:d},q=l.familiesBySource[this.source];for(const Ve in q){const $e=i.layers[Ve];if(!$e)continue;let lt=!1,it=!1;for(const mt of q[Ve])mt[0].type==="symbol"?lt=!0:it=!0;if(this.isSymbolTile===!0&&!lt||this.isSymbolTile===!1&&!it)continue;$e.version===1&&Xe(`Vector tile source "${this.source}" layer "${Ve}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const St=x.encode(Ve),Bt=[];for(let mt=0;mt<$e.length;mt++){const At=$e.feature(mt),It=C.getId(At,Ve);Bt.push({feature:At,id:It,index:mt,sourceLayerIndex:St})}for(const mt of q[Ve]){const At=mt[0];this.isSymbolTile!==void 0&&At.type==="symbol"!==this.isSymbolTile||At.minzoom&&this.zoom<Math.floor(At.minzoom)||At.maxzoom&&this.zoom>=At.maxzoom||At.visibility!=="none"&&(Xb(mt,this.zoom,d),(I[At.id]=At.createBucket({index:C.bucketLayerIDs.length,layers:mt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:St,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:d})).populate(Bt,H,this.tileID.canonical,this.tileTransform),C.bucketLayerIDs.push(mt.map(It=>It.id)))}}let Z,J,Q,oe;R.trim();const he={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ce=mn(H.glyphDependencies,Ve=>Object.keys(Ve).map(Number));Object.keys(Ce).length?f.send("getGlyphs",{uid:this.uid,stacks:Ce},(Ve,$e)=>{Z||(Z=Ve,J=$e,Be.call(this))},void 0,!1,he):J={};const Ne=Object.keys(H.iconDependencies);Ne.length?f.send("getImages",{icons:Ne,source:this.source,tileID:this.tileID,type:"icons"},(Ve,$e)=>{Z||(Z=Ve,Q=$e,Be.call(this))},void 0,!1,he):Q={};const we=Object.keys(H.patternDependencies);function Be(){if(Z)return v(Z);if(J&&Q&&oe){const Ve=new hM(J),$e=new bA(Q,oe);for(const lt in I){const it=I[lt];it instanceof Du?(Xb(it.layers,this.zoom,d),v6(it,J,Ve.positions,Q,$e.iconPositions,this.showCollisionBoxes,d,this.tileID.canonical,this.tileZoom,this.projection)):it.hasPattern&&(it instanceof Wv||it instanceof $v||it instanceof xm)&&(Xb(it.layers,this.zoom,d),it.addFeatures(H,this.tileID.canonical,$e.patternPositions,d,this.tileTransform))}this.status="done",v(null,{buckets:rt(I).filter(lt=>!lt.isEmpty()),featureIndex:C,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ve.image,lineAtlas:R,imageAtlas:$e,glyphMap:this.returnDependencies?J:null,iconMap:this.returnDependencies?Q:null,glyphPositions:this.returnDependencies?Ve.positions:null})}}we.length?f.send("getImages",{icons:we,source:this.source,tileID:this.tileID,type:"patterns"},(Ve,$e)=>{Z||(Z=Ve,oe=$e,Be.call(this))},void 0,!1,he):oe={},Be.call(this)}}function Xb(s,i,l){const d=new et(i);for(const f of s)f.recalculate(d,l)}class pM{constructor(i){this.entries={},this.scheduler=i}request(i,l,d,f){const v=this.entries[i]=this.entries[i]||{callbacks:[]};if(v.result){const[x,C]=v.result;return this.scheduler?this.scheduler.add(()=>{f(x,C)},l):f(x,C),()=>{}}return v.callbacks.push(f),v.cancel||(v.cancel=d((x,C)=>{v.result=[x,C];for(const I of v.callbacks)this.scheduler?this.scheduler.add(()=>{I(x,C)},l):I(x,C);setTimeout(()=>delete this.entries[i],3e3)})),()=>{v.result||(v.callbacks=v.callbacks.filter(x=>x!==f),v.callbacks.length||(v.cancel(),delete this.entries[i]))}}}function fM(s,i,l){const d=JSON.stringify(s.request);return s.data&&(this.deduped.entries[d]={result:[null,s.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom},f=>{const v=kn(s.request,(x,C,I,R)=>{x?f(x):C&&f(null,{vectorTile:l?void 0:new Mb(new Cm(C)),rawData:C,cacheControl:I,expires:R})});return()=>{v.cancel(),f()}},i)}o.ARRAY_TYPE=ia,o.AUTH_ERR_MSG=hr,o.Aabb=Lo,o.Actor=class{constructor(s,i,l){this.target=s,this.parent=i,this.mapId=l,this.callbacks={},this.cancelCallbacks={},en(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=_t()?s:m,this.scheduler=new N6}send(s,i,l,d,f=!1,v){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(l.metadata=v,this.callbacks[x]=l);const C=_n(this.globalScope)?void 0:[];return this.target.postMessage({id:x,type:s,hasCallback:!!l,targetMapId:d,mustQueue:f,sourceMapId:this.mapId,data:Hc(i,C)},C),{cancel:()=>{l&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(s){const i=s.data,l=i.id;if(l&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const d=this.cancelCallbacks[l];delete this.cancelCallbacks[l],d&&d.cancel()}else if(i.mustQueue||_t()){const d=this.callbacks[l];this.cancelCallbacks[l]=this.scheduler.add(()=>this.processTask(l,i),d&&d.metadata||{type:"message"})}else this.processTask(l,i)}processTask(s,i){if(i.type==="<response>"){const l=this.callbacks[s];delete this.callbacks[s],l&&(i.error?l(Wc(i.error)):l(null,Wc(i.data)))}else{const l=_n(this.globalScope)?void 0:[],d=i.hasCallback?(v,x)=>{delete this.cancelCallbacks[s],this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:v?Hc(v):null,data:Hc(x,l)},l)}:v=>{},f=Wc(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,f,d);else if(this.parent.getWorkerSource){const v=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,v[0],f.source)[v[1]](f,d)}else d(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=Hv,o.Color=pi,o.ColorMode=Qs,o.CullFaceMode=Cs,o.DEMData=a_,o.DataConstantProperty=Ye,o.DedupedRequest=pM,o.DepthMode=Kh,o.EXTENT=Tn,o.Elevation=class{isDataAvailableAtPoint(s){const i=this._source();if(this.isUsingMockSource()||!i||s.y<0||s.y>1)return!1;const l=i.getSource().maxzoom,d=1<<l,f=Math.floor(s.x),v=Math.floor((s.x-f)*d),x=Math.floor(s.y*d),C=this.findDEMTileFor(new Oo(l,f,l,v,x));return!(!C||!C.dem)}getAtPointOrZero(s,i=0){return this.getAtPoint(s,i)||0}getAtPoint(s,i,l=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const d=this._source();if(!d||s.y<0||s.y>1)return i;const f=d.getSource().maxzoom,v=1<<f,x=Math.floor(s.x),C=s.x-x,I=new Oo(f,x,f,Math.floor(C*v),Math.floor(s.y*v)),R=this.findDEMTileFor(I);if(!R||!R.dem)return i;const H=R.dem,q=1<<R.tileID.canonical.z,Z=(C*q-R.tileID.canonical.x)*H.dim,J=(s.y*q-R.tileID.canonical.y)*H.dim,Q=Math.floor(Z),oe=Math.floor(J);return(l?this.exaggeration():1)*Qn(Qn(H.get(Q,oe),H.get(Q,oe+1),J-oe),Qn(H.get(Q+1,oe),H.get(Q+1,oe+1),J-oe),Z-Q)}getAtTileOffset(s,i,l){const d=1<<s.canonical.z;return this.getAtPointOrZero(new Bh(s.wrap+(s.canonical.x+i/Tn)/d,(s.canonical.y+l/Tn)/d))}getAtTileOffsetFunc(s,i,l,d){return f=>{const v=this.getAtTileOffset(s,f.x,f.y),x=d.upVector(s.canonical,f.x,f.y);return ba(x,x,v*d.upVectorScale(s.canonical,i,l).metersToTile),x}}getForTilePoints(s,i,l,d){if(this.isUsingMockSource())return!1;const f=s_.create(this,s,d);return!!f&&(i.forEach(v=>{v[2]=this.exaggeration()*f.getElevationAt(v[0],v[1],l)}),!0)}getMinMaxForTile(s){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(s);if(!i||!i.dem)return null;const l=i.dem.tree,d=i.tileID,f=1<<s.canonical.z-d.canonical.z;let v=s.canonical.x/f-d.canonical.x,x=s.canonical.y/f-d.canonical.y,C=0;for(let I=0;I<s.canonical.z-d.canonical.z&&!l.leaves[C];I++){v*=2,x*=2;const R=2*Math.floor(x)+Math.floor(v);C=l.childOffsets[C]+R,v%=1,x%=1}return{min:this.exaggeration()*l.minimums[C],max:this.exaggeration()*l.maximums[C]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(s,i,l){throw new Error("Pure virtual method called.")}pointCoordinate(s){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(s){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=Bs,o.EvaluationParameters=et,o.Event=xr,o.Evented=hs,o.FillExtrusionBucket=xm,o.Frustum=ub,o.FrustumCorners=lb,o.GLOBE_RADIUS=Gs,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(s){this._createGrid(s),this._createPoles(s)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const s of this._poleSegments)s.destroy();for(const s of this._gridSegments)s.withSkirts.destroy(),s.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const s of this._wireframeSegments)s.destroy()}}_fillGridMeshWithLods(s,i){const l=new gn,d=new uo,f=[],v=s+1+2,x=i[0]+1,C=i[0]+1+(1+i.length),I=(R,H,q)=>{let Z=R===v-1?R-2:R===0?R:R-1;return Z+=q?24575:0,[Z,H]};for(let R=0;R<v;++R)l.emplaceBack(...I(R,0,!0));for(let R=0;R<x;++R)for(let H=0;H<v;++H)l.emplaceBack(...I(H,R,(H===0||H===v-1)&&!0));for(let R=0;R<i.length;++R){const H=i[R];for(let q=0;q<v;++q)l.emplaceBack(...I(q,H,!0))}for(let R=0;R<i.length;++R){const H=d.length,q=i[R]+1+2,Z=new uo;for(let oe=0;oe<q-1;oe++){const he=oe===q-2,Ce=he?v*(C-i.length+R-oe):v;for(let Ne=0;Ne<v-1;Ne++){const we=oe*v+Ne;oe===0||he||Ne===0||Ne===v-2?(Z.emplaceBack(we+1,we,we+Ce),Z.emplaceBack(we+Ce,we+Ce+1,we+1)):(d.emplaceBack(we+1,we,we+Ce),d.emplaceBack(we+Ce,we+Ce+1,we+1))}}const J=Ei.simpleSegment(0,H,l.length,d.length-H);for(let oe=0;oe<Z.uint16.length;oe+=3)d.emplaceBack(Z.uint16[oe],Z.uint16[oe+1],Z.uint16[oe+2]);const Q=Ei.simpleSegment(0,H,l.length,d.length-H);f.push({withoutSkirts:J,withSkirts:Q})}return{vertices:l,indices:d,segments:f}}_createGrid(s){const i=this._fillGridMeshWithLods(ed,cm);this._gridSegments=i.segments,this._gridBuffer=s.createVertexBuffer(i.vertices,um.members),this._gridIndexBuffer=s.createIndexBuffer(i.indices,!0)}_createPoles(s){const i=new uo;for(let f=0;f<=ed;f++)i.emplaceBack(0,f+1,f+2);this._poleIndexBuffer=s.createIndexBuffer(i,!0);const l=new ra,d=new ra;this._poleSegments=[];for(let f=0,v=0;f<5;f++){const x=360/(1<<f);l.emplaceBack(0,-Gs,0,.5,0),d.emplaceBack(0,-Gs,0,.5,1);for(let C=0;C<=ed;C++){const I=C/ed,R=Qn(0,x,I),[H,q,Z]=Lh(NF,$F,R,Gs);l.emplaceBack(H,q,Z,I,0),d.emplaceBack(H,q,Z,I,1)}this._poleSegments.push(Ei.simpleSegment(v,0,66,64)),v+=66}this._poleNorthVertexBuffer=s.createVertexBuffer(l,_2,!1),this._poleSouthVertexBuffer=s.createVertexBuffer(d,_2,!1)}getGridBuffers(s,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[s].withSkirts:this._gridSegments[s].withoutSkirts]}getPoleBuffers(s){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[s]]}getWirefameBuffers(s,i){if(!this._wireframeSegments){const l=new Hs,d=ed,f=d+1+2,v=1;this._wireframeSegments=[];for(let x=0,C=0;x<cm.length;x++){const I=cm[x];for(let H=v;H<I+v;H++)for(let q=v;q<d+v;q++){const Z=H*f+q;l.emplaceBack(Z,Z+1),l.emplaceBack(Z,Z+f),l.emplaceBack(Z,Z+f+1)}const R=I*d*3;this._wireframeSegments.push(Ei.simpleSegment(0,C,(I+1)*f,R)),C+=R}this._wireframeIndexBuffer=s.createIndexBuffer(l)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=qh,o.ImagePosition=Rb,o.LivePerformanceUtils=Ue,o.LngLat=tr,o.LngLatBounds=Mu,o.LocalGlyphMode=zb,o.MAX_MERCATOR_LATITUDE=ho,o.MercatorCoordinate=Bh,o.ONE_EM=po,o.OverscaledTileID=Oo,o.PerformanceMarkers=Ie,o.Properties=Ot,o.RGBAImage=oa,o.Ray=sb,o.RequestManager=class{constructor(s,i,l){this._transformRequestFn=s,this._customAccessToken=i,this._silenceAuthErrors=!!l,this._createSkuToken()}_createSkuToken(){const s=function(){let i="";for(let l=0;l<10;l++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",W,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,i){return this._transformRequestFn&&this._transformRequestFn(s,i)||{url:s}}normalizeStyleURL(s,i){if(!Lr(s))return s;const l=ai(s);return l.path=`/styles/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeGlyphsURL(s,i){if(!Lr(s))return s;const l=ai(s);return l.path=`/fonts/v1${l.path}`,this._makeAPIURL(l,this._customAccessToken||i)}normalizeSourceURL(s,i,l,d){if(!Lr(s))return s;const f=ai(s);return f.path=`/v4/${f.authority}.json`,f.params.push("secure"),l&&f.params.push(`language=${l}`),d&&f.params.push(`worldview=${d}`),this._makeAPIURL(f,this._customAccessToken||i)}normalizeSpriteURL(s,i,l,d){const f=ai(s);return Lr(s)?(f.path=`/styles/v1${f.path}/sprite${i}${l}`,this._makeAPIURL(f,this._customAccessToken||d)):(f.path+=`${i}${l}`,si(f))}normalizeTileURL(s,i,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!Lr(s))return s;const d=ai(s);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||l&&d.authority!=="raster"&&l===512?"@2x":""}${O.supported?".webp":"$1"}`),d.authority==="raster"?d.path=`/${P.RASTER_URL_PREFIX}${d.path}`:(d.path=d.path.replace(/^.+\/v4\//,"/"),d.path=`/${P.TILE_URL_VERSION}${d.path}`);const f=this._customAccessToken||function(v){for(const x of v){const C=x.match(/^access_token=(.*)$/);if(C)return C[1]}return null}(d.params)||P.ACCESS_TOKEN;return P.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&d.params.push(`sku=${this._skuToken}`),this._makeAPIURL(d,f)}canonicalizeTileURL(s,i){const l=ai(s);if(!l.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!l.path.match(/\.[\w]+$/))return s;let d="mapbox://";l.path.match(/^\/raster\/v1\//)?d+=`raster/${l.path.replace(`/${P.RASTER_URL_PREFIX}/`,"")}`:d+=`tiles/${l.path.replace(`/${P.TILE_URL_VERSION}/`,"")}`;let f=l.params;return i&&(f=f.filter(v=>!v.match(/^access_token=/))),f.length&&(d+=`?${f.join("&")}`),d}canonicalizeTileset(s,i){const l=!!i&&Lr(i),d=[];for(const f of s.tiles||[])Kn(f)?d.push(this.canonicalizeTileURL(f,l)):d.push(f);return d}_makeAPIURL(s,i){const l="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",d=ai(P.API_URL);if(s.protocol=d.protocol,s.authority=d.authority,s.protocol==="http"){const f=s.params.indexOf("secure");f>=0&&s.params.splice(f,1)}if(d.path!=="/"&&(s.path=`${d.path}${s.path}`),!P.REQUIRE_ACCESS_TOKEN)return si(s);if(i=i||P.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${l}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${l}`)}return s.params=s.params.filter(f=>f.indexOf("access_token")===-1),s.params.push(`access_token=${i||""}`),si(s)}},o.ResourceType=vt,o.SegmentVector=Ei,o.SourceCache=ad,o.StencilMode=Gb,o.StructArrayLayout1ui2=Ws,o.StructArrayLayout2f1f2i16=so,o.StructArrayLayout2i4=gn,o.StructArrayLayout2ui4=Hs,o.StructArrayLayout3f12=lo,o.StructArrayLayout3ui6=uo,o.StructArrayLayout4i8=fr,o.StructArrayLayout5f20=ra,o.Texture=Pm,o.Tile=Hb,o.Transitionable=Ut,o.Uniform1f=Tv,o.Uniform1i=class extends kl{constructor(s){super(s),this.current=0}set(s,i,l){this.fetchUniformLocation(s,i)&&this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.Uniform2f=class extends kl{constructor(s){super(s),this.current=[0,0]}set(s,i,l){this.fetchUniformLocation(s,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1])))}},o.Uniform3f=class extends kl{constructor(s){super(s),this.current=[0,0,0]}set(s,i,l){this.fetchUniformLocation(s,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2])))}},o.Uniform4f=r2,o.UniformColor=i2,o.UniformMatrix2f=class extends kl{constructor(s){super(s),this.current=CF}set(s,i,l){if(this.fetchUniformLocation(s,i)){for(let d=0;d<4;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix2fv(this.location,!1,l);break}}}},o.UniformMatrix3f=class extends kl{constructor(s){super(s),this.current=EF}set(s,i,l){if(this.fetchUniformLocation(s,i)){for(let d=0;d<9;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.UniformMatrix4f=class extends kl{constructor(s){super(s),this.current=wF}set(s,i,l){if(this.fetchUniformLocation(s,i)){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let d=1;d<16;d++)if(l[d]!==this.current[d]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}}},o.UnwrappedTileID=lA,o.ValidationError=Jt,o.VectorTileFeature=jv,o.VectorTileWorkerSource=class extends hs{constructor(s,i,l,d,f){super(),this.actor=s,this.layerIndex=i,this.availableImages=l,this.loadVectorData=f||fM,this.loading={},this.loaded={},this.deduped=new pM(s.scheduler),this.isSpriteLoaded=d,this.scheduler=s.scheduler}loadTile(s,i){const l=s.uid,d=s&&s.request,f=d&&d.collectResourceTiming,v=this.loading[l]=new G6(s);v.abort=this.loadVectorData(s,(x,C)=>{const I=!this.loading[l];if(delete this.loading[l],I||x||!C)return v.status="done",I||(this.loaded[l]=v),i(x);const R=C.rawData,H={};C.expires&&(H.expires=C.expires),C.cacheControl&&(H.cacheControl=C.cacheControl),v.vectorTile=C.vectorTile||new Mb(new Cm(R));const q=()=>{v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,(Z,J)=>{if(Z||!J)return i(Z);const Q={};if(f){const oe=qt(d);oe.length>0&&(Q.resourceTiming=JSON.parse(JSON.stringify(oe)))}i(null,tt({rawTileData:R.slice(0)},J,H,Q))})};this.isSpriteLoaded?q():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(q,{type:"parseTile",isSymbolTile:s.isSymbolTile,zoom:s.tileZoom}):q()}),this.loaded=this.loaded||{},this.loaded[l]=v})}reloadTile(s,i){const l=this.loaded,d=s.uid,f=this;if(l&&l[d]){const v=l[d];v.showCollisionBoxes=s.showCollisionBoxes,v.enableTerrain=!!s.enableTerrain,v.projection=s.projection,v.tileTransform=od(s.tileID.canonical,s.projection);const x=(C,I)=>{const R=v.reloadCallback;R&&(delete v.reloadCallback,v.parse(v.vectorTile,f.layerIndex,this.availableImages,f.actor,R)),i(C,I)};v.status==="parsing"?v.reloadCallback=x:v.status==="done"&&(v.vectorTile?v.parse(v.vectorTile,this.layerIndex,this.availableImages,this.actor,x):x())}}abortTile(s,i){const l=s.uid,d=this.loading[l];d&&(d.abort&&d.abort(),delete this.loading[l]),i()}removeTile(s,i){const l=this.loaded,d=s.uid;l&&l[d]&&delete l[d],i()}},o.WritingMode=Ea,o.ZoomDependentExpression=Sl,o.add=Ml,o.addDynamicAttributes=r_,o.adjoint=function(s,i){var l=i[0],d=i[1],f=i[2],v=i[3],x=i[4],C=i[5],I=i[6],R=i[7],H=i[8];return s[0]=x*H-C*R,s[1]=f*R-d*H,s[2]=d*C-f*x,s[3]=C*I-v*H,s[4]=l*H-f*I,s[5]=f*v-l*C,s[6]=v*R-x*I,s[7]=d*I-l*R,s[8]=l*x-d*v,s},o.asyncAll=Ze,o.bezier=ke,o.bindAll=en,o.boundsAttributes=YA,o.bufferConvexPolygon=function(s,i){const l=[];for(let d=0;d<s.length;d++){const f=ct(d-1,-1,s.length-1),v=ct(d+1,-1,s.length-1),x=s[d],C=s[v],I=s[f].sub(x).unit(),R=C.sub(x).unit(),H=R.angleWithSep(I.x,I.y),q=I.add(R).unit().mult(-1*i/Math.sin(H/2));l.push(x.add(q))}return l},o.cacheEntryPossiblyAdded=function(s){Se++,Se>ie&&(s.getActor().send("enforceCacheSizeLimit",Je),Se=0)},o.calculateGlobeLabelMatrix=function(s,i){const{x:l,y:d}=s.point,f=S2(l,d,s.worldSize/s._pixelsPerMercatorPixel,0,0);return Yc(f,f,hb(qs(i)))},o.calculateGlobeMatrix=function(s){const{x:i,y:l}=s.point,{lng:d,lat:f}=s._center;return S2(i,l,s.worldSize,d,f)},o.calculateGlobeMercatorMatrix=function(s){const i=s.pixelsPerMeter,l=i/Es(1,s.center.lat),d=bs(new Float64Array(16));return rm(d,d,[s.point.x,s.point.y,0]),Jc(d,d,[l,l,i]),Float32Array.from(d)},o.circumferenceAtLatitude=fb,o.clamp=Le,o.clearTileCache=function(s){if(!ue())return;const i=m.caches.delete(Mn);s&&i.catch(s).then(()=>s())},o.clipLine=RA,o.clone=function(s){var i=new ia(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},o.clone$1=An,o.collisionCircleLayout=HN,o.config=P,o.conjugate=function(s,i){return s[0]=-i[0],s[1]=-i[1],s[2]=-i[2],s[3]=i[3],s},o.create=function(){var s=new ia(16);return ia!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},o.create$1=a2,o.createExpression=_u,o.createLayout=hn,o.createStyleLayer=function(s){return s.type==="custom"?new O6(s):new B6[s.type](s)},o.cross=ab,o.degToRad=re,o.distance=function(s,i){return Math.hypot(i[0]-s[0],i[1]-s[1],i[2]-s[2])},o.div=function(s,i,l){return s[0]=i[0]/l[0],s[1]=i[1]/l[1],s[2]=i[2]/l[2],s},o.dot=Va,o.earthRadius=pm,o.ease=Oe,o.easeCubicInOut=de,o.ecefToLatLng=function([s,i,l]){const d=Math.hypot(s,i,l),f=Math.atan2(s,l),v=.5*Math.PI-Math.acos(-i/d);return new tr(ae(f),ae(v))},o.emitValidationErrors=dv,o.endsWith=ln,o.enforceCacheSizeLimit=function(s){De(),Zn&&Zn.then(i=>{i.keys().then(l=>{for(let d=0;d<l.length-s;d++)i.delete(l[d])})})},o.evaluateSizeForFeature=Gv,o.evaluateSizeForZoom=Vh,o.evaluateVariableOffset=FA,o.evented=Re,o.exactEquals=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]},o.exactEquals$1=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]},o.exported=ir,o.exported$1=O,o.extend=tt,o.extend$1=ps,o.fillExtrusionHeightLift=oA,o.filterObject=fn,o.fromMat4=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[4],s[4]=i[5],s[5]=i[6],s[6]=i[8],s[7]=i[9],s[8]=i[10],s},o.fromQuat=function(s,i){var l=i[0],d=i[1],f=i[2],v=i[3],x=l+l,C=d+d,I=f+f,R=l*x,H=d*x,q=d*C,Z=f*x,J=f*C,Q=f*I,oe=v*x,he=v*C,Ce=v*I;return s[0]=1-q-Q,s[1]=H+Ce,s[2]=Z-he,s[3]=0,s[4]=H-Ce,s[5]=1-R-Q,s[6]=J+oe,s[7]=0,s[8]=Z+he,s[9]=J-oe,s[10]=1-R-q,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},o.fromRotation=function(s,i){var l=Math.sin(i),d=Math.cos(i);return s[0]=d,s[1]=l,s[2]=0,s[3]=-l,s[4]=d,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},o.fromScaling=l2,o.furthestTileCorner=function(s){const i=Math.round((s+45+360)%360/90)%4;return ee[i]},o.getAABBPointSquareDist=function(s,i,l){let d=0;for(let f=0;f<2;++f){const v=l?l[f]:0;s[f]>v&&(d+=(s[f]-v)*(s[f]-v)),i[f]<v&&(d+=(v-i[f])*(v-i[f]))}return d},o.getAnchorAlignment=Ob,o.getAnchorJustification=Fb,o.getBounds=function(s){let i=1/0,l=1/0,d=-1/0,f=-1/0;for(const v of s)i=Math.min(i,v.x),l=Math.min(l,v.y),d=Math.max(d,v.x),f=Math.max(f,v.y);return{min:new S(i,l),max:new S(d,f)}},o.getColumn=Ln,o.getGridMatrix=function(s,i,l,d){const f=i.getNorth(),v=i.getSouth(),x=i.getWest(),C=i.getEast(),I=1<<s.z,R=C-x,H=f-v,q=R/ed,Z=-H/cm[l],J=[0,q,0,Z,0,0,f,x,0];if(s.z>0){const Q=180/d;s2(J,J,[Q/R+1,0,0,0,Q/H+1,0,-.5*Q/q,.5*Q/Z,1])}return J[2]=I,J[5]=s.x,J[8]=s.y,J},o.getImage=Ar,o.getJSON=function(s,i){return Bn(tt(s,{type:"json"}),i)},o.getLatitudinalLod=function(s){const i=ho-5;s=Le(s,-i,i)/i*90;const l=Math.pow(Math.abs(Math.sin(re(s))),3);return Math.round(l*(cm.length-1))},o.getMapSessionAPI=Ke,o.getPerformanceMeasurement=qt,o.getProjection=GA,o.getRTLTextPluginStatus=He,o.getReferrer=Xt,o.getTilePoint=function(s,{x:i,y:l},d=0){return new S(((i-d)*s.scale-s.x)*Tn,(l*s.scale-s.y)*Tn)},o.getTileVec3=function(s,i,l=0){return Rh(((i.x-l)*s.scale-s.x)*Tn,(i.y*s.scale-s.y)*Tn,M2(i.z,i.y))},o.getVideo=function(s,i){const l=m.document.createElement("video");l.muted=!0,l.onloadstart=function(){i(null,l)};for(let d=0;d<s.length;d++){const f=m.document.createElement("source");jt(s[d])||(l.crossOrigin="Anonymous"),f.src=s[d],l.appendChild(f)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(s){const i=[0,0,0],l=bs(new Float64Array(16));return Yc(l,s.pixelMatrix,s.globeMatrix),fi(i,i,l),new S(i[0],i[1])},o.globeDenormalizeECEF=hb,o.globeECEFOrigin=function(s,i){const l=[0,0,0];return fi(l,l,hm(qs(i.canonical))),fi(l,l,s),l},o.globeMetersToEcef=Iv,o.globeNormalizeECEF=hm,o.globePixelsToTileUnits=function(s,i){return Tn/(512*Math.pow(2,s))*Dv(qs(i))},o.globePoleMatrixForTile=function(s,i,l){const d=bs(new Float64Array(16)),f=(i/(1<<s)-.5)*Math.PI*2;return Mv(d,l.globeMatrix,f),Float32Array.from(d)},o.globeTileBounds=qs,o.globeTiltAtLngLat=T2,o.globeToMercatorTransition=zh,o.globeUseCustomAntiAliasing=function(s,i,l){const d=zh(l.zoom),f=s.style.map._antialias,v=!!i.extStandardDerivatives,x=i.extStandardDerivativesForceOff||s.terrain&&s.terrain.exaggeration()>0;return d===0&&!f&&!x&&v},o.identity=bs,o.identity$1=g2,o.invert=nb,o.isFullscreen=function(){return!!m.document.fullscreenElement||!!m.document.webkitFullscreenElement},o.isLngLatBehindGlobe=pb,o.isMapAuthenticated=function(s){return qe.has(s)},o.isMapboxURL=Lr,o.isSafariWithAntialiasingBug=function(s){const i=s.navigator?s.navigator.userAgent:null;return!!_n(s)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=co,o.latLngToECEF=Oh,o.len=RF,o.length=im,o.length$1=function(s){return Math.hypot(s[0],s[1],s[2],s[3])},o.lngFromMercatorX=wa,o.loadVectorTile=fM,o.makeRequest=Bn,o.mapValue=function(s,i,l,d,f){return Le((s-i)/(l-i)*(f-d)+d,d,f)},o.mercatorScale=I2,o.mercatorXfromLng=Zs,o.mercatorYfromLat=Xs,o.mercatorZfromAltitude=Es,o.mul=PF,o.mul$1=DF,o.multiply=Yc,o.multiply$1=s2,o.multiply$2=d2,o.nextPowerOfTwo=$t,o.normalize=Ro,o.normalize$1=LF,o.normalize$2=f2,o.number=Qn,o.ortho=function(s,i,l,d,f,v,x){var C=1/(i-l),I=1/(d-f),R=1/(v-x);return s[0]=-2*C,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*I,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*R,s[11]=0,s[12]=(i+l)*C,s[13]=(f+d)*I,s[14]=(x+v)*R,s[15]=1,s},o.pbf=Cm,o.perspective=function(s,i,l,d,f){var v,x=1/Math.tan(i/2);return s[0]=x/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,f!=null&&f!==1/0?(s[10]=(f+d)*(v=1/(d-f)),s[14]=2*f*d*v):(s[10]=-1,s[14]=-2*d),s},o.pick=function(s,i){const l={};for(let d=0;d<i.length;d++){const f=i[d];f in s&&(l[f]=s[f])}return l},o.plugin=Ge,o.pointGeometry=S,o.polesInViewport=function(s){const i=bs(new Float64Array(16));Yc(i,s.pixelMatrix,s.globeMatrix);const l=[0,Ha,0],d=[0,Wa,0];return fi(l,l,i),fi(d,d,i),[l[0]>0&&l[0]<=s.width&&l[1]>0&&l[1]<=s.height&&!pb(s,new tr(s.center.lat,90)),d[0]>0&&d[0]<=s.width&&d[1]>0&&d[1]<=s.height&&!pb(s,new tr(s.center.lat,-90))]},o.polygonContainsPoint=rd,o.polygonIntersectsBox=B2,o.polygonIntersectsPolygon=R2,o.polygonizeBounds=function(s,i,l=0,d=!0){const f=new S(l,l),v=s.sub(f),x=i.add(f),C=[v,new S(x.x,v.y),x,new S(v.x,x.y)];return d&&C.push(v.clone()),C},o.posAttributes=um,o.postMapLoadEvent=fe,o.postPerformanceEvent=We,o.postTurnstileEvent=ne,o.potpack=Db,o.prevPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.floor(Math.log(s)/Math.LN2))},o.radToDeg=ae,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(s){return s({pluginStatus:ve,pluginURL:le}),Re.on("pluginStateChange",s),s},o.removeAuthState=function(s){qe.delete(s)},o.renderColorRamp=wb,o.resample=P2,o.rotateX=rb,o.rotateX$1=y2,o.rotateY=Mv,o.rotateY$1=v2,o.rotateZ=function(s,i,l){var d=Math.sin(l),f=Math.cos(l),v=i[0],x=i[1],C=i[2],I=i[3],R=i[4],H=i[5],q=i[6],Z=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=v*f+R*d,s[1]=x*f+H*d,s[2]=C*f+q*d,s[3]=I*f+Z*d,s[4]=R*f-v*d,s[5]=H*f-x*d,s[6]=q*f-C*d,s[7]=Z*f-I*d,s},o.rotateZ$1=function(s,i,l){l*=.5;var d=i[0],f=i[1],v=i[2],x=i[3],C=Math.sin(l),I=Math.cos(l);return s[0]=d*I+f*C,s[1]=f*I-d*C,s[2]=v*I+x*C,s[3]=x*I-v*C,s},o.scale=Jc,o.scale$1=p2,o.scale$2=ba,o.scaleAndAdd=sm,o.set=function(s,i,l,d){return s[0]=i,s[1]=l,s[2]=d,s},o.setCacheLimits=function(s,i){Je=s,ie=i},o.setColumn=function(s,i,l){s[4*i+0]=l[0],s[4*i+1]=l[1],s[4*i+2]=l[2],s[4*i+3]=l[3]},o.setRTLTextPlugin=function(s,i,l=!1){if(ve===ce||ve===pe||ve===me)throw new Error("setRTLTextPlugin cannot be called multiple times.");le=ir.resolveURL(s),ve=ce,ge=i,Te(),l||je()},o.smoothstep=Ee,o.spec=Ct,o.squaredLength=function(s){var i=s[0],l=s[1],d=s[2];return i*i+l*l+d*d},o.storeAuthState=function(s,i){i?qe.add(s):qe.delete(s)},o.sub=ws,o.subtract=ob,o.symbolSize=WN,o.tileAABB=function(s,i,l,d,f,v,x,C,I){if(I.name==="globe")return FF(s,i,new Hv(l,d,f));const R=od({z:l,x:d,y:f},I);return new Lo([(v+R.x/R.scale)*i,i*(R.y/R.scale),x],[(v+R.x2/R.scale)*i,i*(R.y2/R.scale),C])},o.tileCornersToBounds=Pv,o.tileTransform=od,o.transformMat3=function(s,i,l){var d=i[0],f=i[1],v=i[2];return s[0]=d*l[0]+f*l[3]+v*l[6],s[1]=d*l[1]+f*l[4]+v*l[7],s[2]=d*l[2]+f*l[5]+v*l[8],s},o.transformMat4=fi,o.transformMat4$1=Qc,o.transformQuat=h2,o.transitionTileAABBinECEF=w2,o.translate=rm,o.transpose=function(s,i){if(s===i){var l=i[1],d=i[2],f=i[5];s[1]=i[3],s[2]=i[6],s[3]=l,s[5]=i[7],s[6]=d,s[7]=f}else s[0]=i[0],s[1]=i[3],s[2]=i[6],s[3]=i[1],s[4]=i[4],s[5]=i[7],s[6]=i[2],s[7]=i[5],s[8]=i[8];return s},o.triggerPluginCompletionEvent=Ae,o.uniqueId=be,o.updateGlobeVertexNormal=function(s,i,l,d,f){const v=5*i+2;s.float32[v+0]=l,s.float32[v+1]=d,s.float32[v+2]=f},o.validateCustomStyleLayer=function(s){const i=[],l=s.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=s=>gs(qf(s)),o.validateFog=s=>gs(lv(s)),o.validateLayer=s=>gs(Xf(s)),o.validateLight=s=>gs(sv(s)),o.validateSource=s=>gs(jc(s)),o.validateStyle=uv,o.validateTerrain=s=>gs(Kf(s)),o.values=rt,o.vectorTile=Uv,o.version=w,o.warnOnce=Xe,o.window=m,o.wrap=ct}),c(["./shared"],function(o){function m(_e){if(typeof _e=="number"||typeof _e=="boolean"||typeof _e=="string"||_e==null)return JSON.stringify(_e);if(Array.isArray(_e)){let se="[";for(const fe of _e)se+=`${m(fe)},`;return`${se}]`}let ne="{";for(const se of Object.keys(_e).sort())ne+=`${se}:${m(_e[se])},`;return`${ne}}`}function w(_e){let ne="";for(const se of o.refProperties)ne+=`/${m(_e[se])}`;return ne}class A{constructor(ne){this.keyCache={},ne&&this.replace(ne)}replace(ne){this._layerConfigs={},this._layers={},this.update(ne,[])}update(ne,se){for(const Me of ne)this._layerConfigs[Me.id]=Me,(this._layers[Me.id]=o.createStyleLayer(Me)).compileFilter(),this.keyCache[Me.id]&&delete this.keyCache[Me.id];for(const Me of se)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const fe=function(Me,We){const Qe={};for(let qe=0;qe<Me.length;qe++){const Ie=We&&We[Me[qe].id]||w(Me[qe]);We&&(We[Me[qe].id]=Ie);let Ue=Qe[Ie];Ue||(Ue=Qe[Ie]=[]),Ue.push(Me[qe])}const Ke=[];for(const qe in Qe)Ke.push(Qe[qe]);return Ke}(o.values(this._layerConfigs),this.keyCache);for(const Me of fe){const We=Me.map(wt=>this._layers[wt.id]),Qe=We[0];if(Qe.visibility==="none")continue;const Ke=Qe.source||"";let qe=this.familiesBySource[Ke];qe||(qe=this.familiesBySource[Ke]={});const Ie=Qe.sourceLayer||"_geojsonTileLayer";let Ue=qe[Ie];Ue||(Ue=qe[Ie]=[]),Ue.push(We)}}}class P{loadTile(ne,se){const{uid:fe,encoding:Me,rawImageData:We,padding:Qe,buildQuadTree:Ke}=ne,qe=o.window.ImageBitmap&&We instanceof o.window.ImageBitmap?this.getImageData(We,Qe):We;se(null,new o.DEMData(fe,qe,Me,Qe<1,Ke))}getImageData(ne,se){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ne.width,ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=ne.width,this.offscreenCanvas.height=ne.height,this.offscreenCanvasContext.drawImage(ne,0,0,ne.width,ne.height);const fe=this.offscreenCanvasContext.getImageData(-se,-se,ne.width+2*se,ne.height+2*se);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),fe}}var O=function _e(ne,se){var fe,Me=ne&&ne.type;if(Me==="FeatureCollection")for(fe=0;fe<ne.features.length;fe++)_e(ne.features[fe],se);else if(Me==="GeometryCollection")for(fe=0;fe<ne.geometries.length;fe++)_e(ne.geometries[fe],se);else if(Me==="Feature")_e(ne.geometry,se);else if(Me==="Polygon")B(ne.coordinates,se);else if(Me==="MultiPolygon")for(fe=0;fe<ne.coordinates.length;fe++)B(ne.coordinates[fe],se);return ne};function B(_e,ne){if(_e.length!==0){N(_e[0],ne);for(var se=1;se<_e.length;se++)N(_e[se],!ne)}}function N(_e,ne){for(var se=0,fe=0,Me=0,We=_e.length,Qe=We-1;Me<We;Qe=Me++){var Ke=(_e[Me][0]-_e[Qe][0])*(_e[Qe][1]+_e[Me][1]),qe=se+Ke;fe+=Math.abs(se)>=Math.abs(Ke)?se-qe+Ke:Ke-qe+se,se=qe}se+fe>=0!=!!ne&&_e.reverse()}const k=o.VectorTileFeature.prototype.toGeoJSON;class V{constructor(ne){this._feature=ne,this.extent=o.EXTENT,this.type=ne.type,this.properties=ne.tags,"id"in ne&&!isNaN(ne.id)&&(this.id=parseInt(ne.id,10))}loadGeometry(){if(this._feature.type===1){const ne=[];for(const se of this._feature.geometry)ne.push([new o.pointGeometry(se[0],se[1])]);return ne}{const ne=[];for(const se of this._feature.geometry){const fe=[];for(const Me of se)fe.push(new o.pointGeometry(Me[0],Me[1]));ne.push(fe)}return ne}}toGeoJSON(ne,se,fe){return k.call(this,ne,se,fe)}}class U{constructor(ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=ne.length,this._features=ne}feature(ne){return new V(this._features[ne])}}var W={},F={get exports(){return W},set exports(_e){W=_e}},z=o.pointGeometry,S=o.vectorTile.VectorTileFeature,b=D;function D(_e,ne){this.options=ne||{},this.features=_e,this.length=_e.length}function Y(_e,ne){this.id=typeof _e.id=="number"?_e.id:void 0,this.type=_e.type,this.rawGeometry=_e.type===1?[_e.geometry]:_e.geometry,this.properties=_e.tags,this.extent=ne||4096}D.prototype.feature=function(_e){return new Y(this.features[_e],this.options.extent)},Y.prototype.loadGeometry=function(){var _e=this.rawGeometry;this.geometry=[];for(var ne=0;ne<_e.length;ne++){for(var se=_e[ne],fe=[],Me=0;Me<se.length;Me++)fe.push(new z(se[Me][0],se[Me][1]));this.geometry.push(fe)}return this.geometry},Y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _e=this.geometry,ne=1/0,se=-1/0,fe=1/0,Me=-1/0,We=0;We<_e.length;We++)for(var Qe=_e[We],Ke=0;Ke<Qe.length;Ke++){var qe=Qe[Ke];ne=Math.min(ne,qe.x),se=Math.max(se,qe.x),fe=Math.min(fe,qe.y),Me=Math.max(Me,qe.y)}return[ne,fe,se,Me]},Y.prototype.toGeoJSON=S.prototype.toGeoJSON;var re=o.pbf,ae=b;function ee(_e){var ne=new re;return function(se,fe){for(var Me in se.layers)fe.writeMessage(3,de,se.layers[Me])}(_e,ne),ne.finish()}function de(_e,ne){var se;ne.writeVarintField(15,_e.version||1),ne.writeStringField(1,_e.name||""),ne.writeVarintField(5,_e.extent||4096);var fe={keys:[],values:[],keycache:{},valuecache:{}};for(se=0;se<_e.length;se++)fe.feature=_e.feature(se),ne.writeMessage(2,ke,fe);var Me=fe.keys;for(se=0;se<Me.length;se++)ne.writeStringField(3,Me[se]);var We=fe.values;for(se=0;se<We.length;se++)ne.writeMessage(4,Ze,We[se])}function ke(_e,ne){var se=_e.feature;se.id!==void 0&&ne.writeVarintField(1,se.id),ne.writeMessage(2,Oe,_e),ne.writeVarintField(3,se.type),ne.writeMessage(4,ct,se)}function Oe(_e,ne){var se=_e.feature,fe=_e.keys,Me=_e.values,We=_e.keycache,Qe=_e.valuecache;for(var Ke in se.properties){var qe=se.properties[Ke],Ie=We[Ke];if(qe!==null){Ie===void 0&&(fe.push(Ke),We[Ke]=Ie=fe.length-1),ne.writeVarint(Ie);var Ue=typeof qe;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(qe=JSON.stringify(qe));var wt=Ue+":"+qe,pt=Qe[wt];pt===void 0&&(Me.push(qe),Qe[wt]=pt=Me.length-1),ne.writeVarint(pt)}}}function Le(_e,ne){return(ne<<3)+(7&_e)}function Ee(_e){return _e<<1^_e>>31}function ct(_e,ne){for(var se=_e.loadGeometry(),fe=_e.type,Me=0,We=0,Qe=se.length,Ke=0;Ke<Qe;Ke++){var qe=se[Ke],Ie=1;fe===1&&(Ie=qe.length),ne.writeVarint(Le(1,Ie));for(var Ue=fe===3?qe.length-1:qe.length,wt=0;wt<Ue;wt++){wt===1&&fe!==1&&ne.writeVarint(Le(2,Ue-1));var pt=qe[wt].x-Me,qt=qe[wt].y-We;ne.writeVarint(Ee(pt)),ne.writeVarint(Ee(qt)),Me+=pt,We+=qt}fe===3&&ne.writeVarint(Le(7,1))}}function Ze(_e,ne){var se=typeof _e;se==="string"?ne.writeStringField(1,_e):se==="boolean"?ne.writeBooleanField(7,_e):se==="number"&&(_e%1!=0?ne.writeDoubleField(3,_e):_e<0?ne.writeSVarintField(6,_e):ne.writeVarintField(5,_e))}function rt(_e,ne,se,fe,Me,We){if(Me-fe<=se)return;const Qe=fe+Me>>1;tt(_e,ne,Qe,fe,Me,We%2),rt(_e,ne,se,fe,Qe-1,We+1),rt(_e,ne,se,Qe+1,Me,We+1)}function tt(_e,ne,se,fe,Me,We){for(;Me>fe;){if(Me-fe>600){const Ie=Me-fe+1,Ue=se-fe+1,wt=Math.log(Ie),pt=.5*Math.exp(2*wt/3),qt=.5*Math.sqrt(wt*pt*(Ie-pt)/Ie)*(Ue-Ie/2<0?-1:1);tt(_e,ne,se,Math.max(fe,Math.floor(se-Ue*pt/Ie+qt)),Math.min(Me,Math.floor(se+(Ie-Ue)*pt/Ie+qt)),We)}const Qe=ne[2*se+We];let Ke=fe,qe=Me;for(xe(_e,ne,fe,se),ne[2*Me+We]>Qe&&xe(_e,ne,fe,Me);Ke<qe;){for(xe(_e,ne,Ke,qe),Ke++,qe--;ne[2*Ke+We]<Qe;)Ke++;for(;ne[2*qe+We]>Qe;)qe--}ne[2*fe+We]===Qe?xe(_e,ne,fe,qe):(qe++,xe(_e,ne,qe,Me)),qe<=se&&(fe=qe+1),se<=qe&&(Me=qe-1)}}function xe(_e,ne,se,fe){be(_e,se,fe),be(ne,2*se,2*fe),be(ne,2*se+1,2*fe+1)}function be(_e,ne,se){const fe=_e[ne];_e[ne]=_e[se],_e[se]=fe}function nn(_e,ne,se,fe){const Me=_e-se,We=ne-fe;return Me*Me+We*We}F.exports=ee,W.fromVectorTileJs=ee,W.fromGeojsonVt=function(_e,ne){ne=ne||{};var se={};for(var fe in _e)se[fe]=new ae(_e[fe].features,ne),se[fe].name=fe,se[fe].version=ne.version,se[fe].extent=ne.extent;return ee({layers:se})},W.GeoJSONWrapper=ae;const $t=_e=>_e[0],an=_e=>_e[1];class en{constructor(ne,se=$t,fe=an,Me=64,We=Float64Array){this.nodeSize=Me,this.points=ne;const Qe=ne.length<65536?Uint16Array:Uint32Array,Ke=this.ids=new Qe(ne.length),qe=this.coords=new We(2*ne.length);for(let Ie=0;Ie<ne.length;Ie++)Ke[Ie]=Ie,qe[2*Ie]=se(ne[Ie]),qe[2*Ie+1]=fe(ne[Ie]);rt(Ke,qe,Me,0,Ke.length-1,0)}range(ne,se,fe,Me){return function(We,Qe,Ke,qe,Ie,Ue,wt){const pt=[0,We.length-1,0],qt=[];let tn,Yt;for(;pt.length;){const pn=pt.pop(),zn=pt.pop(),ir=pt.pop();if(zn-ir<=wt){for(let xr=ir;xr<=zn;xr++)tn=Qe[2*xr],Yt=Qe[2*xr+1],tn>=Ke&&tn<=Ie&&Yt>=qe&&Yt<=Ue&&qt.push(We[xr]);continue}const wn=Math.floor((ir+zn)/2);tn=Qe[2*wn],Yt=Qe[2*wn+1],tn>=Ke&&tn<=Ie&&Yt>=qe&&Yt<=Ue&&qt.push(We[wn]);const _r=(pn+1)%2;(pn===0?Ke<=tn:qe<=Yt)&&(pt.push(ir),pt.push(wn-1),pt.push(_r)),(pn===0?Ie>=tn:Ue>=Yt)&&(pt.push(wn+1),pt.push(zn),pt.push(_r))}return qt}(this.ids,this.coords,ne,se,fe,Me,this.nodeSize)}within(ne,se,fe){return function(Me,We,Qe,Ke,qe,Ie){const Ue=[0,Me.length-1,0],wt=[],pt=qe*qe;for(;Ue.length;){const qt=Ue.pop(),tn=Ue.pop(),Yt=Ue.pop();if(tn-Yt<=Ie){for(let _r=Yt;_r<=tn;_r++)nn(We[2*_r],We[2*_r+1],Qe,Ke)<=pt&&wt.push(Me[_r]);continue}const pn=Math.floor((Yt+tn)/2),zn=We[2*pn],ir=We[2*pn+1];nn(zn,ir,Qe,Ke)<=pt&&wt.push(Me[pn]);const wn=(qt+1)%2;(qt===0?Qe-qe<=zn:Ke-qe<=ir)&&(Ue.push(Yt),Ue.push(pn-1),Ue.push(wn)),(qt===0?Qe+qe>=zn:Ke+qe>=ir)&&(Ue.push(pn+1),Ue.push(tn),Ue.push(wn))}return wt}(this.ids,this.coords,ne,se,fe,this.nodeSize)}}const ln={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},mn=Math.fround||(fn=new Float32Array(1),_e=>(fn[0]=+_e,fn[0]));var fn;class An{constructor(ne){this.options=_n(Object.create(ln),ne),this.trees=new Array(this.options.maxZoom+1)}load(ne){const{log:se,minZoom:fe,maxZoom:Me,nodeSize:We}=this.options;se&&console.time("total time");const Qe=`prepare ${ne.length} points`;se&&console.time(Qe),this.points=ne;let Ke=[];for(let qe=0;qe<ne.length;qe++)ne[qe].geometry&&Ke.push(Xe(ne[qe],qe));this.trees[Me+1]=new en(Ke,On,Ln,We,Float32Array),se&&console.timeEnd(Qe);for(let qe=Me;qe>=fe;qe--){const Ie=+Date.now();Ke=this._cluster(Ke,qe),this.trees[qe]=new en(Ke,On,Ln,We,Float32Array),se&&console.log("z%d: %d clusters in %dms",qe,Ke.length,+Date.now()-Ie)}return se&&console.timeEnd("total time"),this}getClusters(ne,se){let fe=((ne[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,ne[1]));let We=ne[2]===180?180:((ne[2]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)fe=-180,We=180;else if(fe>We){const Ue=this.getClusters([fe,Me,180,Qe],se),wt=this.getClusters([-180,Me,We,Qe],se);return Ue.concat(wt)}const Ke=this.trees[this._limitZoom(se)],qe=Ke.range(_t(fe),ht(Qe),_t(We),ht(Me)),Ie=[];for(const Ue of qe){const wt=Ke.points[Ue];Ie.push(wt.numPoints?ft(wt):this.points[wt.index])}return Ie}getChildren(ne){const se=this._getOriginId(ne),fe=this._getOriginZoom(ne),Me="No cluster with the specified id.",We=this.trees[fe];if(!We)throw new Error(Me);const Qe=We.points[se];if(!Qe)throw new Error(Me);const Ke=this.options.radius/(this.options.extent*Math.pow(2,fe-1)),qe=We.within(Qe.x,Qe.y,Ke),Ie=[];for(const Ue of qe){const wt=We.points[Ue];wt.parentId===ne&&Ie.push(wt.numPoints?ft(wt):this.points[wt.index])}if(Ie.length===0)throw new Error(Me);return Ie}getLeaves(ne,se,fe){const Me=[];return this._appendLeaves(Me,ne,se=se||10,fe=fe||0,0),Me}getTile(ne,se,fe){const Me=this.trees[this._limitZoom(ne)],We=Math.pow(2,ne),{extent:Qe,radius:Ke}=this.options,qe=Ke/Qe,Ie=(fe-qe)/We,Ue=(fe+1+qe)/We,wt={features:[]};return this._addTileFeatures(Me.range((se-qe)/We,Ie,(se+1+qe)/We,Ue),Me.points,se,fe,We,wt),se===0&&this._addTileFeatures(Me.range(1-qe/We,Ie,1,Ue),Me.points,We,fe,We,wt),se===We-1&&this._addTileFeatures(Me.range(0,Ie,qe/We,Ue),Me.points,-1,fe,We,wt),wt.features.length?wt:null}getClusterExpansionZoom(ne){let se=this._getOriginZoom(ne)-1;for(;se<=this.options.maxZoom;){const fe=this.getChildren(ne);if(se++,fe.length!==1)break;ne=fe[0].properties.cluster_id}return se}_appendLeaves(ne,se,fe,Me,We){const Qe=this.getChildren(se);for(const Ke of Qe){const qe=Ke.properties;if(qe&&qe.cluster?We+qe.point_count<=Me?We+=qe.point_count:We=this._appendLeaves(ne,qe.cluster_id,fe,Me,We):We<Me?We++:ne.push(Ke),ne.length===fe)break}return We}_addTileFeatures(ne,se,fe,Me,We,Qe){for(const Ke of ne){const qe=se[Ke],Ie=qe.numPoints;let Ue,wt,pt;if(Ie)Ue=Et(qe),wt=qe.x,pt=qe.y;else{const Yt=this.points[qe.index];Ue=Yt.properties,wt=_t(Yt.geometry.coordinates[0]),pt=ht(Yt.geometry.coordinates[1])}const qt={type:1,geometry:[[Math.round(this.options.extent*(wt*We-fe)),Math.round(this.options.extent*(pt*We-Me))]],tags:Ue};let tn;Ie?tn=qe.id:this.options.generateId?tn=qe.index:this.points[qe.index].id&&(tn=this.points[qe.index].id),tn!==void 0&&(qt.id=tn),Qe.features.push(qt)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+ne),this.options.maxZoom+1))}_cluster(ne,se){const fe=[],{radius:Me,extent:We,reduce:Qe,minPoints:Ke}=this.options,qe=Me/(We*Math.pow(2,se));for(let Ie=0;Ie<ne.length;Ie++){const Ue=ne[Ie];if(Ue.zoom<=se)continue;Ue.zoom=se;const wt=this.trees[se+1],pt=wt.within(Ue.x,Ue.y,qe),qt=Ue.numPoints||1;let tn=qt;for(const Yt of pt){const pn=wt.points[Yt];pn.zoom>se&&(tn+=pn.numPoints||1)}if(tn>qt&&tn>=Ke){let Yt=Ue.x*qt,pn=Ue.y*qt,zn=Qe&&qt>1?this._map(Ue,!0):null;const ir=(Ie<<5)+(se+1)+this.points.length;for(const wn of pt){const _r=wt.points[wn];if(_r.zoom<=se)continue;_r.zoom=se;const xr=_r.numPoints||1;Yt+=_r.x*xr,pn+=_r.y*xr,_r.parentId=ir,Qe&&(zn||(zn=this._map(Ue,!0)),Qe(zn,this._map(_r)))}Ue.parentId=ir,fe.push(ze(Yt/tn,pn/tn,ir,tn,zn))}else if(fe.push(Ue),tn>1)for(const Yt of pt){const pn=wt.points[Yt];pn.zoom<=se||(pn.zoom=se,fe.push(pn))}}return fe}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,se){if(ne.numPoints)return se?_n({},ne.properties):ne.properties;const fe=this.points[ne.index].properties,Me=this.options.map(fe);return se&&Me===fe?_n({},Me):Me}}function ze(_e,ne,se,fe,Me){return{x:mn(_e),y:mn(ne),zoom:1/0,id:se,parentId:-1,numPoints:fe,properties:Me}}function Xe(_e,ne){const[se,fe]=_e.geometry.coordinates;return{x:mn(_t(se)),y:mn(ht(fe)),zoom:1/0,index:ne,parentId:-1}}function ft(_e){return{type:"Feature",id:_e.id,properties:Et(_e),geometry:{type:"Point",coordinates:[(ne=_e.x,360*(ne-.5)),Pt(_e.y)]}};var ne}function Et(_e){const ne=_e.numPoints,se=ne>=1e4?`${Math.round(ne/1e3)}k`:ne>=1e3?Math.round(ne/100)/10+"k":ne;return _n(_n({},_e.properties),{cluster:!0,cluster_id:_e.id,point_count:ne,point_count_abbreviated:se})}function _t(_e){return _e/360+.5}function ht(_e){const ne=Math.sin(_e*Math.PI/180),se=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return se<0?0:se>1?1:se}function Pt(_e){const ne=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function _n(_e,ne){for(const se in ne)_e[se]=ne[se];return _e}function On(_e){return _e.x}function Ln(_e){return _e.y}function Mn(_e,ne,se,fe){for(var Me,We=fe,Qe=se-ne>>1,Ke=se-ne,qe=_e[ne],Ie=_e[ne+1],Ue=_e[se],wt=_e[se+1],pt=ne+3;pt<se;pt+=3){var qt=Zn(_e[pt],_e[pt+1],qe,Ie,Ue,wt);if(qt>We)Me=pt,We=qt;else if(qt===We){var tn=Math.abs(pt-Qe);tn<Ke&&(Me=pt,Ke=tn)}}We>fe&&(Me-ne>3&&Mn(_e,ne,Me,fe),_e[Me+2]=We,se-Me>3&&Mn(_e,Me,se,fe))}function Zn(_e,ne,se,fe,Me,We){var Qe=Me-se,Ke=We-fe;if(Qe!==0||Ke!==0){var qe=((_e-se)*Qe+(ne-fe)*Ke)/(Qe*Qe+Ke*Ke);qe>1?(se=Me,fe=We):qe>0&&(se+=Qe*qe,fe+=Ke*qe)}return(Qe=_e-se)*Qe+(Ke=ne-fe)*Ke}function Pe(_e,ne,se,fe){var Me={id:_e===void 0?null:_e,type:ne,geometry:se,tags:fe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(We){var Qe=We.geometry,Ke=We.type;if(Ke==="Point"||Ke==="MultiPoint"||Ke==="LineString")Je(We,Qe);else if(Ke==="Polygon"||Ke==="MultiLineString")for(var qe=0;qe<Qe.length;qe++)Je(We,Qe[qe]);else if(Ke==="MultiPolygon")for(qe=0;qe<Qe.length;qe++)for(var Ie=0;Ie<Qe[qe].length;Ie++)Je(We,Qe[qe][Ie])}(Me),Me}function Je(_e,ne){for(var se=0;se<ne.length;se+=3)_e.minX=Math.min(_e.minX,ne[se]),_e.minY=Math.min(_e.minY,ne[se+1]),_e.maxX=Math.max(_e.maxX,ne[se]),_e.maxY=Math.max(_e.maxY,ne[se+1])}function ie(_e,ne,se,fe){if(ne.geometry){var Me=ne.geometry.coordinates,We=ne.geometry.type,Qe=Math.pow(se.tolerance/((1<<se.maxZoom)*se.extent),2),Ke=[],qe=ne.id;if(se.promoteId?qe=ne.properties[se.promoteId]:se.generateId&&(qe=fe||0),We==="Point")ue(Me,Ke);else if(We==="MultiPoint")for(var Ie=0;Ie<Me.length;Ie++)ue(Me[Ie],Ke);else if(We==="LineString")De(Me,Ke,Qe,!1);else if(We==="MultiLineString"){if(se.lineMetrics){for(Ie=0;Ie<Me.length;Ie++)De(Me[Ie],Ke=[],Qe,!1),_e.push(Pe(qe,"LineString",Ke,ne.properties));return}ye(Me,Ke,Qe,!1)}else if(We==="Polygon")ye(Me,Ke,Qe,!0);else{if(We!=="MultiPolygon"){if(We==="GeometryCollection"){for(Ie=0;Ie<ne.geometry.geometries.length;Ie++)ie(_e,{id:qe,geometry:ne.geometry.geometries[Ie],properties:ne.properties},se,fe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ie=0;Ie<Me.length;Ie++){var Ue=[];ye(Me[Ie],Ue,Qe,!0),Ke.push(Ue)}}_e.push(Pe(qe,We,Ke,ne.properties))}}function ue(_e,ne){ne.push(Se(_e[0])),ne.push(vt(_e[1])),ne.push(0)}function De(_e,ne,se,fe){for(var Me,We,Qe=0,Ke=0;Ke<_e.length;Ke++){var qe=Se(_e[Ke][0]),Ie=vt(_e[Ke][1]);ne.push(qe),ne.push(Ie),ne.push(0),Ke>0&&(Qe+=fe?(Me*Ie-qe*We)/2:Math.sqrt(Math.pow(qe-Me,2)+Math.pow(Ie-We,2))),Me=qe,We=Ie}var Ue=ne.length-3;ne[2]=1,Mn(ne,0,Ue,se),ne[Ue+2]=1,ne.size=Math.abs(Qe),ne.start=0,ne.end=ne.size}function ye(_e,ne,se,fe){for(var Me=0;Me<_e.length;Me++){var We=[];De(_e[Me],We,se,fe),ne.push(We)}}function Se(_e){return _e/360+.5}function vt(_e){var ne=Math.sin(_e*Math.PI/180),se=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return se<0?0:se>1?1:se}function Nt(_e,ne,se,fe,Me,We,Qe,Ke){if(fe/=ne,We>=(se/=ne)&&Qe<fe)return _e;if(Qe<se||We>=fe)return null;for(var qe=[],Ie=0;Ie<_e.length;Ie++){var Ue=_e[Ie],wt=Ue.geometry,pt=Ue.type,qt=Me===0?Ue.minX:Ue.minY,tn=Me===0?Ue.maxX:Ue.maxY;if(qt>=se&&tn<fe)qe.push(Ue);else if(!(tn<se||qt>=fe)){var Yt=[];if(pt==="Point"||pt==="MultiPoint")Xt(wt,Yt,se,fe,Me);else if(pt==="LineString")Bn(wt,Yt,se,fe,Me,!1,Ke.lineMetrics);else if(pt==="MultiLineString")jt(wt,Yt,se,fe,Me,!1);else if(pt==="Polygon")jt(wt,Yt,se,fe,Me,!0);else if(pt==="MultiPolygon")for(var pn=0;pn<wt.length;pn++){var zn=[];jt(wt[pn],zn,se,fe,Me,!0),zn.length&&Yt.push(zn)}if(Yt.length){if(Ke.lineMetrics&&pt==="LineString"){for(pn=0;pn<Yt.length;pn++)qe.push(Pe(Ue.id,pt,Yt[pn],Ue.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(Yt.length===1?(pt="LineString",Yt=Yt[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=Yt.length===3?"Point":"MultiPoint"),qe.push(Pe(Ue.id,pt,Yt,Ue.tags))}}}return qe.length?qe:null}function Xt(_e,ne,se,fe,Me){for(var We=0;We<_e.length;We+=3){var Qe=_e[We+Me];Qe>=se&&Qe<=fe&&(ne.push(_e[We]),ne.push(_e[We+1]),ne.push(_e[We+2]))}}function Bn(_e,ne,se,fe,Me,We,Qe){for(var Ke,qe,Ie=kn(_e),Ue=Me===0?dr:Fn,wt=_e.start,pt=0;pt<_e.length-3;pt+=3){var qt=_e[pt],tn=_e[pt+1],Yt=_e[pt+2],pn=_e[pt+3],zn=_e[pt+4],ir=Me===0?qt:tn,wn=Me===0?pn:zn,_r=!1;Qe&&(Ke=Math.sqrt(Math.pow(qt-pn,2)+Math.pow(tn-zn,2))),ir<se?wn>se&&(qe=Ue(Ie,qt,tn,pn,zn,se),Qe&&(Ie.start=wt+Ke*qe)):ir>fe?wn<fe&&(qe=Ue(Ie,qt,tn,pn,zn,fe),Qe&&(Ie.start=wt+Ke*qe)):Rn(Ie,qt,tn,Yt),wn<se&&ir>=se&&(qe=Ue(Ie,qt,tn,pn,zn,se),_r=!0),wn>fe&&ir<=fe&&(qe=Ue(Ie,qt,tn,pn,zn,fe),_r=!0),!We&&_r&&(Qe&&(Ie.end=wt+Ke*qe),ne.push(Ie),Ie=kn(_e)),Qe&&(wt+=Ke)}var xr=_e.length-3;qt=_e[xr],tn=_e[xr+1],Yt=_e[xr+2],(ir=Me===0?qt:tn)>=se&&ir<=fe&&Rn(Ie,qt,tn,Yt),xr=Ie.length-3,We&&xr>=3&&(Ie[xr]!==Ie[0]||Ie[xr+1]!==Ie[1])&&Rn(Ie,Ie[0],Ie[1],Ie[2]),Ie.length&&ne.push(Ie)}function kn(_e){var ne=[];return ne.size=_e.size,ne.start=_e.start,ne.end=_e.end,ne}function jt(_e,ne,se,fe,Me,We){for(var Qe=0;Qe<_e.length;Qe++)Bn(_e[Qe],ne,se,fe,Me,We,!1)}function Rn(_e,ne,se,fe){_e.push(ne),_e.push(se),_e.push(fe)}function dr(_e,ne,se,fe,Me,We){var Qe=(We-ne)/(fe-ne);return _e.push(We),_e.push(se+(Me-se)*Qe),_e.push(1),Qe}function Fn(_e,ne,se,fe,Me,We){var Qe=(We-se)/(Me-se);return _e.push(ne+(fe-ne)*Qe),_e.push(We),_e.push(1),Qe}function Ar(_e,ne){for(var se=[],fe=0;fe<_e.length;fe++){var Me,We=_e[fe],Qe=We.type;if(Qe==="Point"||Qe==="MultiPoint"||Qe==="LineString")Me=hr(We.geometry,ne);else if(Qe==="MultiLineString"||Qe==="Polygon"){Me=[];for(var Ke=0;Ke<We.geometry.length;Ke++)Me.push(hr(We.geometry[Ke],ne))}else if(Qe==="MultiPolygon")for(Me=[],Ke=0;Ke<We.geometry.length;Ke++){for(var qe=[],Ie=0;Ie<We.geometry[Ke].length;Ie++)qe.push(hr(We.geometry[Ke][Ie],ne));Me.push(qe)}se.push(Pe(We.id,Qe,Me,We.tags))}return se}function hr(_e,ne){var se=[];se.size=_e.size,_e.start!==void 0&&(se.start=_e.start,se.end=_e.end);for(var fe=0;fe<_e.length;fe+=3)se.push(_e[fe]+ne,_e[fe+1],_e[fe+2]);return se}function Lr(_e,ne){if(_e.transformed)return _e;var se,fe,Me,We=1<<_e.z,Qe=_e.x,Ke=_e.y;for(se=0;se<_e.features.length;se++){var qe=_e.features[se],Ie=qe.geometry,Ue=qe.type;if(qe.geometry=[],Ue===1)for(fe=0;fe<Ie.length;fe+=2)qe.geometry.push(Kn(Ie[fe],Ie[fe+1],ne,We,Qe,Ke));else for(fe=0;fe<Ie.length;fe++){var wt=[];for(Me=0;Me<Ie[fe].length;Me+=2)wt.push(Kn(Ie[fe][Me],Ie[fe][Me+1],ne,We,Qe,Ke));qe.geometry.push(wt)}}return _e.transformed=!0,_e}function Kn(_e,ne,se,fe,Me,We){return[Math.round(se*(_e*fe-Me)),Math.round(se*(ne*fe-We))]}function Jn(_e,ne,se,fe,Me){for(var We=ne===Me.maxZoom?0:Me.tolerance/((1<<ne)*Me.extent),Qe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:se,y:fe,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ke=0;Ke<_e.length;Ke++){Qe.numFeatures++,Vr(Qe,_e[Ke],We,Me);var qe=_e[Ke].minX,Ie=_e[Ke].minY,Ue=_e[Ke].maxX,wt=_e[Ke].maxY;qe<Qe.minX&&(Qe.minX=qe),Ie<Qe.minY&&(Qe.minY=Ie),Ue>Qe.maxX&&(Qe.maxX=Ue),wt>Qe.maxY&&(Qe.maxY=wt)}return Qe}function Vr(_e,ne,se,fe){var Me=ne.geometry,We=ne.type,Qe=[];if(We==="Point"||We==="MultiPoint")for(var Ke=0;Ke<Me.length;Ke+=3)Qe.push(Me[Ke]),Qe.push(Me[Ke+1]),_e.numPoints++,_e.numSimplified++;else if(We==="LineString")pr(Qe,Me,_e,se,!1,!1);else if(We==="MultiLineString"||We==="Polygon")for(Ke=0;Ke<Me.length;Ke++)pr(Qe,Me[Ke],_e,se,We==="Polygon",Ke===0);else if(We==="MultiPolygon")for(var qe=0;qe<Me.length;qe++){var Ie=Me[qe];for(Ke=0;Ke<Ie.length;Ke++)pr(Qe,Ie[Ke],_e,se,!0,Ke===0)}if(Qe.length){var Ue=ne.tags||null;if(We==="LineString"&&fe.lineMetrics){for(var wt in Ue={},ne.tags)Ue[wt]=ne.tags[wt];Ue.mapbox_clip_start=Me.start/Me.size,Ue.mapbox_clip_end=Me.end/Me.size}var pt={geometry:Qe,type:We==="Polygon"||We==="MultiPolygon"?3:We==="LineString"||We==="MultiLineString"?2:1,tags:Ue};ne.id!==null&&(pt.id=ne.id),_e.features.push(pt)}}function pr(_e,ne,se,fe,Me,We){var Qe=fe*fe;if(fe>0&&ne.size<(Me?Qe:fe))se.numPoints+=ne.length/3;else{for(var Ke=[],qe=0;qe<ne.length;qe+=3)(fe===0||ne[qe+2]>Qe)&&(se.numSimplified++,Ke.push(ne[qe]),Ke.push(ne[qe+1])),se.numPoints++;Me&&function(Ie,Ue){for(var wt=0,pt=0,qt=Ie.length,tn=qt-2;pt<qt;tn=pt,pt+=2)wt+=(Ie[pt]-Ie[tn])*(Ie[pt+1]+Ie[tn+1]);if(wt>0===Ue)for(pt=0,qt=Ie.length;pt<qt/2;pt+=2){var Yt=Ie[pt],pn=Ie[pt+1];Ie[pt]=Ie[qt-2-pt],Ie[pt+1]=Ie[qt-1-pt],Ie[qt-2-pt]=Yt,Ie[qt-1-pt]=pn}}(Ke,We),_e.push(Ke)}}function Fi(_e,ne){var se=(ne=this.options=function(Me,We){for(var Qe in We)Me[Qe]=We[Qe];return Me}(Object.create(this.options),ne)).debug;if(se&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");var fe=function(Me,We){var Qe=[];if(Me.type==="FeatureCollection")for(var Ke=0;Ke<Me.features.length;Ke++)ie(Qe,Me.features[Ke],We,Ke);else ie(Qe,Me.type==="Feature"?Me:{geometry:Me},We);return Qe}(_e,ne);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),fe=function(Me,We){var Qe=We.buffer/We.extent,Ke=Me,qe=Nt(Me,1,-1-Qe,Qe,0,-1,2,We),Ie=Nt(Me,1,1-Qe,2+Qe,0,-1,2,We);return(qe||Ie)&&(Ke=Nt(Me,1,-Qe,1+Qe,0,-1,2,We)||[],qe&&(Ke=Ar(qe,1).concat(Ke)),Ie&&(Ke=Ke.concat(Ar(Ie,-1)))),Ke}(fe,ne),fe.length&&this.splitTile(fe,0,0,0),se&&(fe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ai(_e,ne,se){return 32*((1<<_e)*se+ne)+_e}function si(_e,ne){const se=_e.tileID.canonical;if(!this._geoJSONIndex)return ne(null,null);const fe=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!fe)return ne(null,null);const Me=new U(fe.features);let We=W(Me);We.byteOffset===0&&We.byteLength===We.buffer.byteLength||(We=new Uint8Array(We)),ne(null,{vectorTile:Me,rawData:We.buffer})}Fi.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Fi.prototype.splitTile=function(_e,ne,se,fe,Me,We,Qe){for(var Ke=[_e,ne,se,fe],qe=this.options,Ie=qe.debug;Ke.length;){fe=Ke.pop(),se=Ke.pop(),ne=Ke.pop(),_e=Ke.pop();var Ue=1<<ne,wt=ai(ne,se,fe),pt=this.tiles[wt];if(!pt&&(Ie>1&&console.time("creation"),pt=this.tiles[wt]=Jn(_e,ne,se,fe,qe),this.tileCoords.push({z:ne,x:se,y:fe}),Ie)){Ie>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,se,fe,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var qt="z"+ne;this.stats[qt]=(this.stats[qt]||0)+1,this.total++}if(pt.source=_e,Me){if(ne===qe.maxZoom||ne===Me)continue;var tn=1<<Me-ne;if(se!==Math.floor(We/tn)||fe!==Math.floor(Qe/tn))continue}else if(ne===qe.indexMaxZoom||pt.numPoints<=qe.indexMaxPoints)continue;if(pt.source=null,_e.length!==0){Ie>1&&console.time("clipping");var Yt,pn,zn,ir,wn,_r,xr=.5*qe.buffer/qe.extent,Bs=.5-xr,hs=.5+xr,Ct=1+xr;Yt=pn=zn=ir=null,wn=Nt(_e,Ue,se-xr,se+hs,0,pt.minX,pt.maxX,qe),_r=Nt(_e,Ue,se+Bs,se+Ct,0,pt.minX,pt.maxX,qe),_e=null,wn&&(Yt=Nt(wn,Ue,fe-xr,fe+hs,1,pt.minY,pt.maxY,qe),pn=Nt(wn,Ue,fe+Bs,fe+Ct,1,pt.minY,pt.maxY,qe),wn=null),_r&&(zn=Nt(_r,Ue,fe-xr,fe+hs,1,pt.minY,pt.maxY,qe),ir=Nt(_r,Ue,fe+Bs,fe+Ct,1,pt.minY,pt.maxY,qe),_r=null),Ie>1&&console.timeEnd("clipping"),Ke.push(Yt||[],ne+1,2*se,2*fe),Ke.push(pn||[],ne+1,2*se,2*fe+1),Ke.push(zn||[],ne+1,2*se+1,2*fe),Ke.push(ir||[],ne+1,2*se+1,2*fe+1)}}},Fi.prototype.getTile=function(_e,ne,se){var fe=this.options,Me=fe.extent,We=fe.debug;if(_e<0||_e>24)return null;var Qe=1<<_e,Ke=ai(_e,ne=(ne%Qe+Qe)%Qe,se);if(this.tiles[Ke])return Lr(this.tiles[Ke],Me);We>1&&console.log("drilling down to z%d-%d-%d",_e,ne,se);for(var qe,Ie=_e,Ue=ne,wt=se;!qe&&Ie>0;)Ie--,Ue=Math.floor(Ue/2),wt=Math.floor(wt/2),qe=this.tiles[ai(Ie,Ue,wt)];return qe&&qe.source?(We>1&&console.log("found parent tile z%d-%d-%d",Ie,Ue,wt),We>1&&console.time("drilling down"),this.splitTile(qe.source,Ie,Ue,wt,_e,ne,se),We>1&&console.timeEnd("drilling down"),this.tiles[Ke]?Lr(this.tiles[Ke],Me):null):null};class Ni extends o.VectorTileWorkerSource{constructor(ne,se,fe,Me,We){super(ne,se,fe,Me,si),We&&(this.loadGeoJSON=We)}loadData(ne,se){const fe=ne&&ne.request,Me=fe&&fe.collectResourceTiming;this.loadGeoJSON(ne,(We,Qe)=>{if(We||!Qe)return se(We);if(typeof Qe!="object")return se(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`));{O(Qe,!0);try{if(ne.filter){const qe=o.createExpression(ne.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qe.result==="error")throw new Error(qe.value.map(Ue=>`${Ue.key}: ${Ue.message}`).join(", "));const Ie=Qe.features.filter(Ue=>qe.value.evaluate({zoom:0},Ue));Qe={type:"FeatureCollection",features:Ie}}this._geoJSONIndex=ne.cluster?new An(function({superclusterOptions:qe,clusterProperties:Ie}){if(!Ie||!qe)return qe;const Ue={},wt={},pt={accumulated:null,zoom:0},qt={properties:null},tn=Object.keys(Ie);for(const Yt of tn){const[pn,zn]=Ie[Yt],ir=o.createExpression(zn),wn=o.createExpression(typeof pn=="string"?[pn,["accumulated"],["get",Yt]]:pn);Ue[Yt]=ir.value,wt[Yt]=wn.value}return qe.map=Yt=>{qt.properties=Yt;const pn={};for(const zn of tn)pn[zn]=Ue[zn].evaluate(pt,qt);return pn},qe.reduce=(Yt,pn)=>{qt.properties=pn;for(const zn of tn)pt.accumulated=Yt[zn],Yt[zn]=wt[zn].evaluate(pt,qt)},qe}(ne)).load(Qe.features):function(qe,Ie){return new Fi(qe,Ie)}(Qe,ne.geojsonVtOptions)}catch(qe){return se(qe)}this.loaded={};const Ke={};if(Me){const qe=o.getPerformanceMeasurement(fe);qe&&(Ke.resourceTiming={},Ke.resourceTiming[ne.source]=JSON.parse(JSON.stringify(qe)))}se(null,Ke)}})}reloadTile(ne,se){const fe=this.loaded;return fe&&fe[ne.uid]?super.reloadTile(ne,se):this.loadTile(ne,se)}loadGeoJSON(ne,se){if(ne.request)o.getJSON(ne.request,se);else{if(typeof ne.data!="string")return se(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`));try{return se(null,JSON.parse(ne.data))}catch{return se(new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ne,se){try{se(null,this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId))}catch(fe){se(fe)}}getClusterChildren(ne,se){try{se(null,this._geoJSONIndex.getChildren(ne.clusterId))}catch(fe){se(fe)}}getClusterLeaves(ne,se){try{se(null,this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset))}catch(fe){se(fe)}}}class oo{constructor(ne){this.self=ne,this.actor=new o.Actor(ne,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Ni},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(se,fe)=>{if(this.workerSourceTypes[se])throw new Error(`Worker source with name "${se}" already registered.`);this.workerSourceTypes[se]=fe},this.self.registerRTLTextPlugin=se=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=se.applyArabicShaping,o.plugin.processBidirectionalText=se.processBidirectionalText,o.plugin.processStyledBidirectionalText=se.processStyledBidirectionalText}}clearCaches(ne,se,fe){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne],fe()}checkIfReady(ne,se,fe){fe()}setReferrer(ne,se){this.referrer=se}spriteLoaded(ne,se){this.isSpriteLoaded[ne]=se;for(const fe in this.workerSources[ne]){const Me=this.workerSources[ne][fe];for(const We in Me)Me[We]instanceof o.VectorTileWorkerSource&&(Me[We].isSpriteLoaded=se,Me[We].fire(new o.Event("isSpriteLoaded")))}}setImages(ne,se,fe){this.availableImages[ne]=se;for(const Me in this.workerSources[ne]){const We=this.workerSources[ne][Me];for(const Qe in We)We[Qe].availableImages=se}fe()}enableTerrain(ne,se,fe){this.terrain=se,fe()}setProjection(ne,se){this.projections[ne]=o.getProjection(se)}setLayers(ne,se,fe){this.getLayerIndex(ne).replace(se),fe()}updateLayers(ne,se,fe){this.getLayerIndex(ne).update(se.layers,se.removedIds),fe()}loadTile(ne,se,fe){const Me=this.enableTerrain?o.extend({enableTerrain:this.terrain},se):se;Me.projection=this.projections[ne]||this.defaultProjection,this.getWorkerSource(ne,se.type,se.source).loadTile(Me,fe)}loadDEMTile(ne,se,fe){const Me=this.enableTerrain?o.extend({buildQuadTree:this.terrain},se):se;this.getDEMWorkerSource(ne,se.source).loadTile(Me,fe)}reloadTile(ne,se,fe){const Me=this.enableTerrain?o.extend({enableTerrain:this.terrain},se):se;Me.projection=this.projections[ne]||this.defaultProjection,this.getWorkerSource(ne,se.type,se.source).reloadTile(Me,fe)}abortTile(ne,se,fe){this.getWorkerSource(ne,se.type,se.source).abortTile(se,fe)}removeTile(ne,se,fe){this.getWorkerSource(ne,se.type,se.source).removeTile(se,fe)}removeSource(ne,se,fe){if(!this.workerSources[ne]||!this.workerSources[ne][se.type]||!this.workerSources[ne][se.type][se.source])return;const Me=this.workerSources[ne][se.type][se.source];delete this.workerSources[ne][se.type][se.source],Me.removeSource!==void 0?Me.removeSource(se,fe):fe()}loadWorkerSource(ne,se,fe){try{this.self.importScripts(se.url),fe()}catch(Me){fe(Me.toString())}}syncRTLPluginState(ne,se,fe){try{o.plugin.setState(se);const Me=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Me!=null){this.self.importScripts(Me);const We=o.plugin.isParsed();fe(We?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Me}`),We)}}catch(Me){fe(Me.toString())}}getAvailableImages(ne){let se=this.availableImages[ne];return se||(se=[]),se}getLayerIndex(ne){let se=this.layerIndexes[ne];return se||(se=this.layerIndexes[ne]=new A),se}getWorkerSource(ne,se,fe){if(this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][se]||(this.workerSources[ne][se]={}),!this.workerSources[ne][se][fe]){const Me={send:(We,Qe,Ke,qe,Ie,Ue)=>{this.actor.send(We,Qe,Ke,ne,Ie,Ue)},scheduler:this.actor.scheduler};this.workerSources[ne][se][fe]=new this.workerSourceTypes[se](Me,this.getLayerIndex(ne),this.getAvailableImages(ne),this.isSpriteLoaded[ne])}return this.workerSources[ne][se][fe]}getDEMWorkerSource(ne,se){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][se]||(this.demWorkerSources[ne][se]=new P),this.demWorkerSources[ne][se]}enforceCacheSizeLimit(ne,se){o.enforceCacheSizeLimit(se)}getWorkerPerformanceMetrics(ne,se,fe){fe(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new oo(self)),oo}),c(["./shared"],function(o){function m(y,u){if(Array.isArray(y)){if(!Array.isArray(u)||y.length!==u.length)return!1;for(let p=0;p<y.length;p++)if(!m(y[p],u[p]))return!1;return!0}if(typeof y=="object"&&y!==null&&u!==null){if(typeof u!="object"||Object.keys(y).length!==Object.keys(u).length)return!1;for(const p in y)if(!m(y[p],u[p]))return!1;return!0}return y===u}var w=A;function A(y){return!function(u){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,E,T=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(T);try{E=new Worker(L),_=!0}catch{_=!1}return E&&E.terminate(),URL.revokeObjectURL(L),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var E=_.getContext("2d");if(!E)return!1;var T=E.getImageData(0,0,1,1);return T&&T.width===_.width}()?(P[p=u&&u.failIfMajorPerformanceCaveat]===void 0&&(P[p]=function(_){var E,T=function(L){var j=document.createElement("canvas"),G=Object.create(A.webGLContextAttributes);return G.failIfMajorPerformanceCaveat=L,j.getContext("webgl",G)||j.getContext("experimental-webgl",G)}(_);if(!T)return!1;try{E=T.createShader(T.VERTEX_SHADER)}catch{return!1}return!(!E||T.isContextLost())&&(T.shaderSource(E,"void main() {}"),T.compileShader(E),T.getShaderParameter(E,T.COMPILE_STATUS)===!0)}(p)),P[p]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var p}(y)}var P={};function O(y,u,p){const _=o.window.document.createElement(y);return u!==void 0&&(_.className=u),p&&p.appendChild(_),_}function B(y,u,p){const _=o.window.document.createElementNS("http://www.w3.org/2000/svg",y);for(const E of Object.keys(u))_.setAttributeNS(null,E,u[E]);return p&&p.appendChild(_),_}A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const N=o.window.document&&o.window.document.documentElement.style,k=N&&N.userSelect!==void 0?"userSelect":"WebkitUserSelect";let V;function U(){N&&k&&(V=N[k],N[k]="none")}function W(){N&&k&&(N[k]=V)}function F(y){y.preventDefault(),y.stopPropagation(),o.window.removeEventListener("click",F,!0)}function z(){o.window.addEventListener("click",F,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",F,!0)},0)}function S(y,u){const p=y.getBoundingClientRect();return Y(y,p,u)}function b(y,u){const p=y.getBoundingClientRect(),_=[];for(let E=0;E<u.length;E++)_.push(Y(y,p,u[E]));return _}function D(y){return o.window.InstallTrigger!==void 0&&y.button===2&&y.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:y.button}function Y(y,u,p){const _=y.offsetWidth===u.width?1:y.offsetWidth/u.width;return new o.pointGeometry((p.clientX-u.left)*_,(p.clientY-u.top)*_)}function re(y,u){var p=u[0],_=u[1],E=u[2],T=u[3],L=p*T-E*_;return L?(y[0]=T*(L=1/L),y[1]=-_*L,y[2]=-E*L,y[3]=p*L,y):null}function ae(y){const{userImage:u}=y;return!!(u&&u.render&&u.render())&&(y.data.replace(new Uint8Array(u.data.buffer)),!0)}class ee extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,callback:_}of this.requestors)this._notify(p,_);this.requestors=[]}}hasImage(u){return!!this.getImage(u)}getImage(u){return this.images[u]}addImage(u,p){this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let _=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),_=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),_=!1),this._validateContent(p.content,p)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),_=!1),_}_validateStretch(u,p){if(!u)return!0;let _=0;for(const E of u){if(E[0]<_||E[1]<E[0]||p<E[1])return!1;_=E[1]}return!0}_validateContent(u,p){return!(u&&(u.length!==4||u[0]<0||p.data.width<u[0]||u[1]<0||p.data.height<u[1]||u[2]<0||p.data.width<u[2]||u[3]<0||p.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,p){p.version=this.images[u].version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,p){let _=!0;if(!this.isLoaded())for(const E of u)this.images[E]||(_=!1);this.isLoaded()||_?this._notify(u,p):this.requestors.push({ids:u,callback:p})}_notify(u,p){const _={};for(const E of u){this.images[E]||this.fire(new o.Event("styleimagemissing",{id:E}));const T=this.images[E];T?_[E]={data:T.data.clone(),pixelRatio:T.pixelRatio,sdf:T.sdf,version:T.version,stretchX:T.stretchX,stretchY:T.stretchY,content:T.content,hasRenderCallback:Boolean(T.userImage&&T.userImage.render)}:o.warnOnce(`Image "${E}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,_)}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],_=this.getImage(u);if(!_)return null;if(p&&p.position.version===_.version)return p.position;if(p)p.position.version=_.version;else{const E={w:_.data.width+2,h:_.data.height+2,x:0,y:0},T=new o.ImagePosition(E,_);this.patterns[u]={bin:E,position:T}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(u,this.atlasImage,p.RGBA),this.atlasTexture&&this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const T in this.patterns)u.push(this.patterns[T].bin);const{w:p,h:_}=o.potpack(u),E=this.atlasImage;E.resize({width:p||1,height:_||1});for(const T in this.patterns){const{bin:L}=this.patterns[T],j=L.x+1,G=L.y+1,K=this.images[T].data,X=K.width,te=K.height;o.RGBAImage.copy(K,E,{x:0,y:0},{x:j,y:G},{width:X,height:te}),o.RGBAImage.copy(K,E,{x:0,y:te-1},{x:j,y:G-1},{width:X,height:1}),o.RGBAImage.copy(K,E,{x:0,y:0},{x:j,y:G+te},{width:X,height:1}),o.RGBAImage.copy(K,E,{x:X-1,y:0},{x:j-1,y:G},{width:1,height:te}),o.RGBAImage.copy(K,E,{x:0,y:0},{x:j+X,y:G},{width:1,height:te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const _=this.images[p];ae(_)&&this.updateImage(p,_)}}}const de=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(y,u){return function([p,_,E]){const T=o.degToRad(_+90),L=o.degToRad(E);return{x:p*Math.cos(T)*Math.sin(L),y:p*Math.sin(T)*Math.sin(L),z:p*Math.cos(L),azimuthal:_,polar:E}}(y.expression.evaluate(u))}interpolate(y,u,p){return{x:o.number(y.x,u.x,p),y:o.number(y.y,u.y,p),z:o.number(y.z,u.z,p),azimuthal:o.number(y.azimuthal,u.azimuthal,p),polar:o.number(y.polar,u.polar,p)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),ke="-transition";class Oe extends o.Evented{constructor(u){super(),this._transitionable=new o.Transitionable(de),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(o.validateLight,u,p))for(const _ in u){const E=u[_];o.endsWith(_,ke)?this._transitionable.setTransition(_.slice(0,-ke.length),E):this._transitionable.setValue(_,E)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Le=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),Ee="-transition";class ct extends o.Evented{constructor(u,p){super(),this._transitionable=new o.Transitionable(Le),this.set(u),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=p}get(){return this._transitionable.serialize()}set(u){for(const p in u){const _=u[p];o.endsWith(p,Ee)?this._transitionable.setTransition(p.slice(0,-Ee.length),_):this._transitionable.setValue(p,_)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}}function Ze(y,u,p,_){const E=o.smoothstep(45,65,p),[T,L]=rt(y,_),j=o.length(u);let G=1-Math.min(1,Math.exp((j-T)/(L-T)*-6));return G*=G*G,G=Math.min(1,1.00747*G),G*E*y.alpha}function rt(y,u){const p=.5/Math.tan(.5*u);return[y.range[0]+p,y.range[1]+p]}const tt=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),xe="-transition";class be extends o.Evented{constructor(u,p){super(),this._transitionable=new o.Transitionable(tt),this.set(u),this._transitioning=this._transitionable.untransitioned(),this._transform=p}get state(){const u=this._transform,p=u.projection.name==="globe",_=o.globeToMercatorTransition(u.zoom),E=this.properties.get("range"),T=[.5,3];return{range:p?[o.number(T[0],E[0],_),o.number(T[1],E[1],_)]:E,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(u,p={}){if(!this._validate(o.validateFog,u,p)){for(const _ of Object.keys(o.spec.fog))u&&u[_]===void 0&&(u[_]=o.spec.fog[_].default);for(const _ in u){const E=u[_];o.endsWith(_,xe)?this._transitionable.setTransition(_.slice(0,-xe.length),E):this._transitionable.setValue(_,E)}}}getOpacity(u){if(!this._transform.projection.supportsFog)return 0;const p=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,u))*p.a}getOpacityAtLatLng(u,p){return this._transform.projection.supportsFog?function(_,E,T){const L=o.MercatorCoordinate.fromLngLat(E),j=T.elevation?T.elevation.getAtPointOrZero(L):0,G=[L.x,L.y,j];return o.transformMat4(G,G,T.mercatorFogMatrix),Ze(_,G,T.pitch,T._fov)}(this.state,u,p):0}getFovAdjustedRange(u){return this._transform.projection.supportsFog?rt(this.state,u):[0,1]}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class nn{constructor(u,p){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const _=this.workerPool.acquire(this.id);for(let E=0;E<_.length;E++){const T=new nn.Actor(_[E],p,this.id);T.name=`Worker ${E}`,this.actors.push(T)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(u,p,_){o.asyncAll(this.actors,(E,T)=>{E.send(u,p,T)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(u=>{u.remove()}),this.actors=[],this.workerPool.release(this.id)}}function $t(y,u,p){return u*(o.EXTENT/(y.tileSize*Math.pow(2,p-y.tileID.overscaledZ)))}nn.Actor=o.Actor;class an{constructor(u,p,_,E){this.screenBounds=u,this.cameraPoint=p,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,E)}static createFromScreenPoints(u,p){let _,E;if(u instanceof o.pointGeometry||typeof u[0]=="number"){const T=o.pointGeometry.convert(u);_=[T],E=p.isPointAboveHorizon(T)}else{const T=o.pointGeometry.convert(u[0]),L=o.pointGeometry.convert(u[1]);_=[T,L],E=o.polygonizeBounds(T,L).every(j=>p.isPointAboveHorizon(j))}return new an(_,p.getCameraPoint(),E,p)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(u){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],u)}bufferedCameraGeometry(u){const p=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],E=o.polygonizeBounds(p,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>p.x&&this.cameraPoint.x<_.x?E.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?E[2]=this.cameraPoint:this.cameraPoint.x<=p.x&&(E[3]=this.cameraPoint)),o.bufferConvexPolygon(E,u)}bufferedCameraGeometryGlobe(u){const p=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],E=o.polygonizeBounds(p,_,u),T=this.cameraPoint.clone();switch(3*((T.y>p.y)+(T.y>_.y))+((T.x>p.x)+(T.x>_.x))){case 0:E[0]=T,E[4]=T.clone();break;case 1:E.splice(1,0,T);break;case 2:E[1]=T;break;case 3:E.splice(4,0,T);break;case 5:E.splice(2,0,T);break;case 6:E[3]=T;break;case 7:E.splice(3,0,T);break;case 8:E[2]=T}return E}containsTile(u,p,_,E=0){const T=u.queryPadding/p._pixelsPerMercatorPixel+1,L=_?this._bufferedCameraMercator(T,p):this._bufferedScreenMercator(T,p);let j=u.tileID.wrap+(L.unwrapped?E:0);const G=L.polygon.map(ve=>o.getTilePoint(u.tileTransform,ve,j));if(!o.polygonIntersectsBox(G,0,0,o.EXTENT,o.EXTENT))return;j=u.tileID.wrap+(this.screenGeometryMercator.unwrapped?E:0);const K=this.screenGeometryMercator.polygon.map(ve=>o.getTileVec3(u.tileTransform,ve,j)),X=K.map(ve=>new o.pointGeometry(ve[0],ve[1])),te=p.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),ce=o.getTileVec3(u.tileTransform,te,j),pe=K.map(ve=>{const le=o.sub(ve,ve,ce);return o.normalize(le,le),new o.Ray(ce,le)}),me=$t(u,1,p.zoom)*p._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:X,tilespaceRays:pe,bufferedTilespaceGeometry:G,bufferedTilespaceBounds:(ge=o.getBounds(G),ge.min.x=o.clamp(ge.min.x,0,o.EXTENT),ge.min.y=o.clamp(ge.min.y,0,o.EXTENT),ge.max.x=o.clamp(ge.max.x,0,o.EXTENT),ge.max.y=o.clamp(ge.max.y,0,o.EXTENT),ge),tile:u,tileID:u.tileID,pixelToTileUnitsFactor:me};var ge}_bufferedScreenMercator(u,p){const _=mn(u);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let E;return E=p.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(u),p):{polygon:this.bufferedScreenGeometry(u).map(T=>p.pointCoordinate3D(T)),unwrapped:!0},this._screenRaycastCache[_]=E,E}}_bufferedCameraMercator(u,p){const _=mn(u);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let E;return E=p.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(u),p):{polygon:this.bufferedCameraGeometry(u).map(T=>p.pointCoordinate3D(T)),unwrapped:!0},this._cameraRaycastCache[_]=E,E}}_projectAndResample(u,p){const _=function(T,L){const j=o.multiply([],L.pixelMatrix,L.globeMatrix),G=[0,-o.GLOBE_RADIUS,0,1],K=[0,o.GLOBE_RADIUS,0,1],X=[0,0,0,1];o.transformMat4$1(G,G,j),o.transformMat4$1(K,K,j),o.transformMat4$1(X,X,j);const te=new o.pointGeometry(G[0]/G[3],G[1]/G[3]),ce=new o.pointGeometry(K[0]/K[3],K[1]/K[3]),pe=o.polygonContainsPoint(T,te)&&G[3]<X[3],me=o.polygonContainsPoint(T,ce)&&K[3]<X[3];if(!pe&&!me)return null;const ge=function(Ge,et,ot){for(let ut=1;ut<Ge.length;ut++){const Ut=ln(et.pointCoordinate3D(Ge[ut-1]).x),nt=ln(et.pointCoordinate3D(Ge[ut]).x);if(ot<0){if(Ut<nt)return{idx:ut,t:-Ut/(nt-1-Ut)}}else if(nt<Ut)return{idx:ut,t:(1-Ut)/(nt+1-Ut)}}return null}(T,L,pe?-1:1);if(!ge)return null;const{idx:ve,t:le}=ge;let Ae=ve>1?en(T.slice(0,ve),L):[],Te=ve<T.length?en(T.slice(ve),L):[];Ae=Ae.map(Ge=>new o.pointGeometry(ln(Ge.x),Ge.y)),Te=Te.map(Ge=>new o.pointGeometry(ln(Ge.x),Ge.y));const Re=[...Ae];Re.length===0&&Re.push(Te[Te.length-1]);const He=o.number(Re[Re.length-1].y,(Te.length===0?Ae[0]:Te[0]).y,le);let je;return je=pe?[new o.pointGeometry(0,He),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,He)]:[new o.pointGeometry(1,He),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,He)],Re.push(...je),Te.length===0?Re.push(Ae[0]):Re.push(...Te),{polygon:Re.map(Ge=>new o.MercatorCoordinate(Ge.x,Ge.y)),unwrapped:!1}}(u,p);if(_)return _;const E=function(T,L){let j=!1,G=-1/0,K=0;for(let te=0;te<T.length-1;te++)T[te].x>G&&(G=T[te].x,K=te);for(let te=0;te<T.length-1;te++){const ce=(K+te)%(T.length-1),pe=T[ce],me=T[ce+1];Math.abs(pe.x-me.x)>.5&&(pe.x<me.x?(pe.x+=1,ce===0&&(T[T.length-1].x+=1)):(me.x+=1,ce+1===T.length-1&&(T[0].x+=1)),j=!0)}const X=o.mercatorXfromLng(L.center.lng);return j&&X<Math.abs(X-1)&&T.forEach(te=>{te.x-=1}),{polygon:T,unwrapped:j}}(en(u,p).map(T=>new o.pointGeometry(ln(T.x),T.y)),p);return{polygon:E.polygon.map(T=>new o.MercatorCoordinate(T.x,T.y)),unwrapped:E.unwrapped}}}function en(y,u){return o.resample(y,p=>{const _=u.pointCoordinate3D(p);p.x=_.x,p.y=_.y},1/256)}function ln(y){return y<0?1+y%1:y%1}function mn(y){return 100*y|0}function fn(y,u,p,_,E){const T=function(L,j){if(L)return E(L);if(j){y.url&&j.tiles&&y.tiles&&delete y.tiles;const G=o.pick(o.extend(j,y),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);j.vector_layers&&(G.vectorLayers=j.vector_layers,G.vectorLayerIds=G.vectorLayers.map(K=>K.id)),G.tiles=u.canonicalizeTileset(G,y.url),E(null,G)}};return y.url?o.getJSON(u.transformRequest(u.normalizeSourceURL(y.url,null,p,_),o.ResourceType.Source),T):o.exported.frame(()=>T(null,y))}class An{constructor(u,p,_){this.bounds=o.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=_||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),_=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),E=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),T=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),L=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return u.x>=_&&u.x<T&&u.y>=E&&u.y<L}}class ze{constructor(u,p,_){this.context=u;const E=u.gl;this.buffer=E.createBuffer(),this.dynamicDraw=Boolean(_),this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),E.bufferData(E.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ft{constructor(u,p,_,E){this.length=p.length,this.attributes=_,this.itemSize=p.bytesPerElement,this.dynamicDraw=E,this.context=u;const T=u.gl;this.buffer=T.createBuffer(),u.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||p.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let _=0;_<this.attributes.length;_++){const E=p.attributes[this.attributes[_].name];E!==void 0&&u.enableVertexAttribArray(E)}}setVertexAttribPointers(u,p,_){for(let E=0;E<this.attributes.length;E++){const T=this.attributes[E],L=p.attributes[T.name];L!==void 0&&u.vertexAttribPointer(L,T.components,u[Xe[T.type]],!1,this.itemSize,T.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Et{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class _t extends Et{getDefault(){return o.Color.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class ht extends Et{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Pt extends Et{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class _n extends Et{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class On extends Et{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Ln extends Et{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class Mn extends Et{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Zn extends Et{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Pe extends Et{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class Je extends Et{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class ie extends Et{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class ue extends Et{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class De extends Et{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class ye extends Et{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Se extends Et{getDefault(){return o.Color.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class vt extends Et{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Nt extends Et{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class Xt extends Et{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Bn extends Et{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class kn extends Et{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class jt extends Et{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Rn extends Et{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class dr extends Et{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Fn extends Et{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Ar extends Et{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class hr extends Et{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Lr extends Et{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Kn extends Et{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class Jn extends Et{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Vr extends Et{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class pr extends Et{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class Fi extends Et{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class ai extends Fi{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class si extends Fi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,this.attachment(),p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Ni extends si{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class oo{constructor(u,p,_,E){this.context=u,this.width=p,this.height=_;const T=this.framebuffer=u.gl.createFramebuffer();this.colorAttachment=new ai(u,T),E&&(this.depthAttachment=new si(u,T))}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const _=this.depthAttachment.get();_&&u.deleteRenderbuffer(_)}u.deleteFramebuffer(this.framebuffer)}}class _e{constructor(u,p=!1){if(this.gl=u,this.isWebGL2=p,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),p){const _=u;this.extVertexArrayObject={createVertexArrayOES:_.createVertexArray.bind(u),deleteVertexArrayOES:_.deleteVertexArray.bind(u),bindVertexArrayOES:_.bindVertexArray.bind(u)}}this.clearColor=new _t(this),this.clearDepth=new ht(this),this.clearStencil=new Pt(this),this.colorMask=new _n(this),this.depthMask=new On(this),this.stencilMask=new Ln(this),this.stencilFunc=new Mn(this),this.stencilOp=new Zn(this),this.stencilTest=new Pe(this),this.depthRange=new Je(this),this.depthTest=new ie(this),this.depthFunc=new ue(this),this.blend=new De(this),this.blendFunc=new ye(this),this.blendColor=new Se(this),this.blendEquation=new vt(this),this.cullFace=new Nt(this),this.cullFaceSide=new Xt(this),this.frontFace=new Bn(this),this.program=new kn(this),this.activeTexture=new jt(this),this.viewport=new Rn(this),this.bindFramebuffer=new dr(this),this.bindRenderbuffer=new Fn(this),this.bindTexture=new Ar(this),this.bindVertexBuffer=new hr(this),this.bindElementBuffer=new Lr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Kn(this),this.pixelStoreUnpack=new Jn(this),this.pixelStoreUnpackPremultiplyAlpha=new Vr(this),this.pixelStoreUnpackFlipY=new pr(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=u.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=u.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=u.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),p||(this.extTextureHalfFloat=u.getExtension("OES_texture_half_float")),(p||this.extTextureHalfFloat&&u.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=p||u.getExtension("OES_standard_derivatives"),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new ze(this,u,p)}createVertexBuffer(u,p,_){return new ft(this,u,p,_)}createRenderbuffer(u,p,_){const E=this.gl,T=E.createRenderbuffer();return this.bindRenderbuffer.set(T),E.renderbufferStorage(E.RENDERBUFFER,u,p,_),this.bindRenderbuffer.set(null),T}createFramebuffer(u,p,_){return new oo(this,u,p,_)}clear({color:u,depth:p,stencil:_}){const E=this.gl;let T=0;u&&(T|=E.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(T|=E.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),_!==void 0&&(T|=E.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),E.clear(T)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){m(u.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class ne extends o.Evented{constructor(u,p,_,E){if(super(),this.id=u,this.dispatcher=_,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(p,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(E),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(u){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const p=Array.isArray(this.map._language)?this.map._language.join():this.map._language,_=this.map._worldview;this._tileJSONRequest=fn(this._options,this.map._requestManager,p,_,(E,T)=>{this._tileJSONRequest=null,this._loaded=!0,E?(p&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${p}`),_&&_.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${_}`),this.fire(new o.ErrorEvent(E))):T&&(o.extend(this,T),T.bounds&&(this.tileBounds=new An(T.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(T.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(E)})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(u,p){const _=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),E={request:this.map._requestManager.transformRequest(_,o.ResourceType.Tile),data:void 0,uid:u.uid,tileID:u.tileID,tileZoom:u.tileZoom,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:u.isSymbolTile};if(E.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired")u.state==="loading"?u.reloadCallback=p:u.request=u.actor.send("reloadTile",E,T.bind(this));else if(u.actor=this._tileWorkers[_]=this._tileWorkers[_]||this.dispatcher.getActor(),this.dispatcher.ready)u.request=u.actor.send("loadTile",E,T.bind(this),void 0,!0);else{const L=o.loadVectorTile.call({deduped:this._deduped},E,(j,G)=>{j||!G?T.call(this,j):(E.data={cacheControl:G.cacheControl,expires:G.expires,rawData:G.rawData.slice(0)},u.actor&&u.actor.send("loadTile",E,T.bind(this),void 0,!0))},!0);u.request={cancel:L}}function T(L,j){return delete u.request,u.aborted?p(null):L&&L.status!==404?p(L):(j&&j.resourceTiming&&(u.resourceTiming=j.resourceTiming),this.map._refreshExpiredTiles&&j&&u.setExpiryData(j),u.loadVectorData(j,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id})}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class se extends o.Evented{constructor(u,p,_,E){super(),this.id=u,this.dispatcher=_,this.setEventedParent(E),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},p),o.extend(this,o.pick(p,["url","scheme","tileSize"]))}load(u){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=fn(this._options,this.map._requestManager,null,null,(p,_)=>{this._tileJSONRequest=null,this._loaded=!0,p?this.fire(new o.ErrorEvent(p)):_&&(o.extend(this,_),_.bounds&&(this.tileBounds=new An(_.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(_.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),u&&u(p)})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(u){return this._options.tiles=u,this.reload(),this}setUrl(u){return this.url=u,this._options.url=u,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,p){const _=o.exported.devicePixelRatio>=2,E=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);u.request=o.getImage(this.map._requestManager.transformRequest(E,o.ResourceType.Tile),(T,L,j,G)=>(delete u.request,u.aborted?(u.state="unloaded",p(null)):T?(u.state="errored",p(T)):L?(this.map._refreshExpiredTiles&&u.setExpiryData({cacheControl:j,expires:G}),u.setTexture(L,this.map.painter),u.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void p(null)):p(null)))}static loadTileData(u,p,_){u.setTexture(p,_)}static unloadTileData(u,p){u.texture&&p.saveTileTexture(u.texture)}abortTile(u,p){u.request&&(u.request.cancel(),delete u.request),p()}unloadTile(u,p){u.texture&&this.map.painter.saveTileTexture(u.texture),p()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let fe;function Me(y,u,p,_,E,T,L,j){const G=[y,p,E,u,_,T,1,1,1],K=[L,j,1],X=o.adjoint([],G),[te,ce,pe]=o.transformMat3(K,K,o.transpose(X,X));return o.multiply$1(G,[te,0,0,0,ce,0,0,0,pe],G)}class We extends o.Evented{constructor(u,p,_,E){super(),this.id=u,this.dispatcher=_,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(E),this.options=p,this._dirty=!1}load(u,p){this._loaded=p||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(_,E)=>{if(this._imageRequest=null,this._loaded=!0,_)this.fire(new o.ErrorEvent(_));else if(E){const{HTMLImageElement:T}=o.window;this.image=E instanceof T?o.exported.getImageData(E):E,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,u&&(this.coordinates=u),this._finishLoading()}})}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this._imageRequest&&u.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=u.url,this.load(u.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(u){this.coordinates=u,this._boundsArray=void 0;const p=u.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let E=1/0,T=1/0,L=-1/0,j=-1/0;for(const te of _)E=Math.min(E,te.x),T=Math.min(T,te.y),L=Math.max(L,te.x),j=Math.max(j,te.y);const G=Math.max(L-E,j-T),K=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),X=Math.pow(2,K);return new o.CanonicalTileID(K,Math.floor((E+L)/2*X),Math.floor((T+j)/2*X))}(p),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(u){for(const G in this.tiles){const K=this.tiles[G];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture)}if(this._boundsArray)return;const p=o.tileTransform(this.tileID,this.map.transform.projection),[_,E,T,L]=this.coordinates.map(G=>{const K=p.projection.project(G[0],G[1]);return o.getTilePoint(p,K)._round()});this.perspectiveTransform=function(G,K,X,te,ce,pe,me,ge,ve,le){const Ae=Me(0,0,G,0,0,K,G,K),Te=Me(X,te,ce,pe,me,ge,ve,le);return o.multiply$1(Te,o.adjoint(Ae,Ae),Te),[Te[6]/Te[8]*G/o.EXTENT,Te[7]/Te[8]*K/o.EXTENT]}(this.width,this.height,_.x,_.y,E.x,E.y,L.x,L.y,T.x,T.y);const j=this._boundsArray=new o.StructArrayLayout4i8;j.emplaceBack(_.x,_.y,0,0),j.emplaceBack(E.x,E.y,o.EXTENT,0),j.emplaceBack(L.x,L.y,0,o.EXTENT),j.emplaceBack(T.x,T.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=u.createVertexBuffer(j,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,p=u.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(u,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(u)}loadTile(u,p){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},p(null)):(u.state="errored",p(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Qe={vector:ne,raster:se,"raster-dem":class extends se{constructor(y,u,p,_){super(y,u,p,_),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}loadTile(y,u){const p=this.map._requestManager.normalizeTileURL(y.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(E,T){E&&(y.state="errored",u(E)),T&&(y.dem=T,y.dem.onDeserialize(),y.needsHillshadePrepare=!0,y.needsDEMTextureUpload=!0,y.state="loaded",u(null))}y.request=o.getImage(this.map._requestManager.transformRequest(p,o.ResourceType.Tile),function(E,T,L,j){if(delete y.request,y.aborted)y.state="unloaded",u(null);else if(E)y.state="errored",u(E);else if(T){this.map._refreshExpiredTiles&&y.setExpiryData({cacheControl:L,expires:j});const G=o.window.ImageBitmap&&T instanceof o.window.ImageBitmap&&(fe==null&&(fe=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),fe),K=1-(T.width-o.prevPowerOfTwo(T.width))/2;K<1||y.neighboringTiles||(y.neighboringTiles=this._getNeighboringTiles(y.tileID));const X=G?T:o.exported.getImageData(T,K),te={uid:y.uid,coord:y.tileID,source:this.id,rawImageData:X,encoding:this.encoding,padding:K};y.actor&&y.state!=="expired"||(y.actor=this.dispatcher.getActor(),y.actor.send("loadDEMTile",te,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(y){const u=y.canonical,p=Math.pow(2,u.z),_=(u.x-1+p)%p,E=u.x===0?y.wrap-1:y.wrap,T=(u.x+1+p)%p,L=u.x+1===p?y.wrap+1:y.wrap,j={};return j[new o.OverscaledTileID(y.overscaledZ,E,u.z,_,u.y).key]={backfilled:!1},j[new o.OverscaledTileID(y.overscaledZ,L,u.z,T,u.y).key]={backfilled:!1},u.y>0&&(j[new o.OverscaledTileID(y.overscaledZ,E,u.z,_,u.y-1).key]={backfilled:!1},j[new o.OverscaledTileID(y.overscaledZ,y.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},j[new o.OverscaledTileID(y.overscaledZ,L,u.z,T,u.y-1).key]={backfilled:!1}),u.y+1<p&&(j[new o.OverscaledTileID(y.overscaledZ,E,u.z,_,u.y+1).key]={backfilled:!1},j[new o.OverscaledTileID(y.overscaledZ,y.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},j[new o.OverscaledTileID(y.overscaledZ,L,u.z,T,u.y+1).key]={backfilled:!1}),j}unloadTile(y){y.demTexture&&this.map.painter.saveTileTexture(y.demTexture),y.fbo&&(y.fbo.destroy(),delete y.fbo),y.dem&&delete y.dem,delete y.neighboringTiles,y.state="unloaded"}},geojson:class extends o.Evented{constructor(y,u,p,_){super(),this.id=y,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=p.getActor(),this.setEventedParent(_),this._data=u.data,this._options=o.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*E,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.EXTENT,radius:(u.clusterRadius!==void 0?u.clusterRadius:50)*E,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}onAdd(y){this.map=y,this.setData(this._data)}setData(y){return this._data=y,this._updateWorkerData(),this}getClusterExpansionZoom(y,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:y,source:this.id},u),this}getClusterChildren(y,u){return this.actor.send("geojson.getClusterChildren",{clusterId:y,source:this.id},u),this}getClusterLeaves(y,u,p,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:y,limit:u,offset:p},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const y=o.extend({},this.workerOptions),u=this._data;typeof u=="string"?(y.request=this.map._requestManager.transformRequest(o.exported.resolveURL(u),o.ResourceType.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,y,(p,_)=>{if(this._loaded=!0,this._pendingLoad=null,p)this.fire(new o.ErrorEvent(p));else{const E={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(E.resourceTiming=_.resourceTiming[this.id]),this.fire(new o.Event("data",E)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(y,u){const p=y.actor?"reloadTile":"loadTile";y.actor=this.actor,y.request=this.actor.send(p,{type:this.type,uid:y.uid,tileID:y.tileID,tileZoom:y.tileZoom,zoom:y.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,E)=>(delete y.request,y.unloadVectorData(),y.aborted?u(null):_?u(_):(y.loadVectorData(E,this.map.painter,p==="reloadTile"),u(null))),void 0,p==="loadTile")}abortTile(y){y.request&&(y.request.cancel(),delete y.request),y.aborted=!0}unloadTile(y){y.unloadVectorData(),this.actor.send("removeTile",{uid:y.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends We{constructor(y,u,p,_){super(y,u,p,_),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const y=this.options;this.urls=[];for(const u of y.urls)this.urls.push(this.map._requestManager.transformRequest(u,o.ResourceType.Source).url);o.getVideo(this.urls,(u,p)=>{this._loaded=!0,u?this.fire(new o.ErrorEvent(u)):p&&(this.video=p,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(y){if(this.video){const u=this.video.seekable;y<u.start(0)||y>u.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=y}}getVideo(){return this.video}onAdd(y){this.map||(this.map=y,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const y=this.map.painter.context,u=y.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(y,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(y)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:We,canvas:class extends We{constructor(y,u,p,_){super(y,u,p,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(T=>typeof T!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${y}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${y}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${y}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${y}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${y}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(y){this.map=y,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let y=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,y=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,y=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context;this.texture?(y||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(u,this.canvas,u.gl.RGBA,{premultiply:!0}),this._prepareData(u)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const y of[this.canvas.width,this.canvas.height])if(isNaN(y)||y<=0)return!0;return!1}},custom:class extends o.Evented{constructor(y,u,p,_){super(),this.id=y,this.type="custom",this._dataType="raster",this._dispatcher=p,this._implementation=u,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new An(this._implementation.bounds,this.minzoom,this.maxzoom)),u.update=this._update.bind(this),u.clearTiles=this._clearTiles.bind(this),u.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(u,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(y){this._map=y,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(y),this.load()}onRemove(y){this._implementation.onRemove&&this._implementation.onRemove(y)}hasTile(y){if(this._implementation.hasTile){const{x:u,y:p,z:_}=y.canonical;return this._implementation.hasTile({x:u,y:p,z:_})}return!this.tileBounds||this.tileBounds.contains(y.canonical)}loadTile(y,u){const{x:p,y:_,z:E}=y.tileID.canonical,T=new o.window.AbortController;y.request=Promise.resolve(this._implementation.loadTile({x:p,y:_,z:E},{signal:T.signal})).then(function(L){return delete y.request,y.aborted?(y.state="unloaded",u(null)):L===void 0?(y.state="errored",u(null)):L===null?(this.loadTileData(y,{width:this.tileSize,height:this.tileSize,data:null}),y.state="loaded",u(null)):function(j){return j instanceof o.window.ImageData||j instanceof o.window.HTMLCanvasElement||j instanceof o.window.ImageBitmap||j instanceof o.window.HTMLImageElement}(L)?(this.loadTileData(y,L),y.state="loaded",void u(null)):(y.state="errored",u(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(L=>{L.code!==20&&(y.state="errored",u(L))}),y.request.cancel=()=>T.abort()}loadTileData(y,u){se.loadTileData(y,u,this._map.painter)}unloadTileData(y){se.unloadTileData(y,this._map.painter)}unloadTile(y,u){if(this.unloadTileData(y),this._implementation.unloadTile){const{x:p,y:_,z:E}=y.tileID.canonical;this._implementation.unloadTile({x:p,y:_,z:E})}u()}abortTile(y,u){y.request&&y.request.cancel&&(y.request.cancel(),delete y.request),u()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(y=>({x:y.canonical.x,y:y.canonical.y,z:y.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ke=function(y,u,p,_){const E=new Qe[u.type](y,u,p,_);if(E.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${E.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],E),E};function qe(y,u){const p=o.identity([]);return o.scale(p,p,[.5*y.width,.5*-y.height,1]),o.translate(p,p,[1,-1,0]),o.multiply(p,p,y.calculateProjMatrix(u.toUnwrapped())),Float32Array.from(p)}function Ie(y,u,p,_,E,T,L,j=!1){const G=y.tilesIn(_,L,j);G.sort(wt);const K=[];for(const te of G)K.push({wrappedTileID:te.tile.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(u,p,y._state,te,E,T,qe(y.transform,te.tile.tileID),j)});const X=function(te){const ce={},pe={};for(const me of te){const ge=me.queryResults,ve=me.wrappedTileID,le=pe[ve]=pe[ve]||{};for(const Ae in ge){const Te=ge[Ae],Re=le[Ae]=le[Ae]||{},He=ce[Ae]=ce[Ae]||[];for(const je of Te)Re[je.featureIndex]||(Re[je.featureIndex]=!0,He.push(je))}}return ce}(K);for(const te in X)X[te].forEach(ce=>{const pe=ce.feature,me=pe.layer;me&&me.type!=="background"&&me.type!=="sky"&&(pe.source=me.source,me["source-layer"]&&(pe.sourceLayer=me["source-layer"]),pe.state=pe.id!==void 0?y.getFeatureState(me["source-layer"],pe.id):{})});return X}function Ue(y,u){const p=y.getRenderableIds().map(T=>y.getTileByID(T)),_=[],E={};for(let T=0;T<p.length;T++){const L=p[T],j=L.tileID.canonical.key;E[j]||(E[j]=!0,L.querySourceFeatures(_,u))}return _}function wt(y,u){const p=y.tileID,_=u.tileID;return p.overscaledZ-_.overscaledZ||p.canonical.y-_.canonical.y||p.wrap-_.wrap||p.canonical.x-_.canonical.x}function pt(){return Zc.workerClass!=null?new Zc.workerClass:new o.window.Worker(Zc.workerUrl)}const qt="mapboxgl_preloaded_worker_pool";class tn{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<tn.workerCount;)this.workers.push(new pt);return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qt]}numActive(){return Object.keys(this.active).length}}let Yt;function pn(){return Yt||(Yt=new tn),Yt}function zn(y,u){const p={};for(const _ in y)_!=="ref"&&(p[_]=y[_]);return o.refProperties.forEach(_=>{_ in u&&(p[_]=u[_])}),p}function ir(y){y=y.slice();const u=Object.create(null);for(let p=0;p<y.length;p++)u[y[p].id]=y[p];for(let p=0;p<y.length;p++)"ref"in y[p]&&(y[p]=zn(y[p],u[y[p].ref]));return y}tn.workerCount=2;const wn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function _r(y,u,p){p.push({command:wn.addSource,args:[y,u[y]]})}function xr(y,u,p){u.push({command:wn.removeSource,args:[y]}),p[y]=!0}function Bs(y,u,p,_){xr(y,p,_),_r(y,u,p)}function hs(y,u,p){let _;for(_ in y[p])if(y[p].hasOwnProperty(_)&&_!=="data"&&!m(y[p][_],u[p][_]))return!1;for(_ in u[p])if(u[p].hasOwnProperty(_)&&_!=="data"&&!m(y[p][_],u[p][_]))return!1;return!0}function Ct(y,u,p,_,E,T){let L;for(L in u=u||{},y=y||{})y.hasOwnProperty(L)&&(m(y[L],u[L])||p.push({command:T,args:[_,L,u[L],E]}));for(L in u)u.hasOwnProperty(L)&&!y.hasOwnProperty(L)&&(m(y[L],u[L])||p.push({command:T,args:[_,L,u[L],E]}))}function ps(y){return y.id}function bi(y,u){return y[u.id]=u,y}class Fs{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=o.clamp(u,0,1);let p=1,_=this._distances[p];const E=u*this.paddedLength+this.padding;for(;_<E&&p<this._distances.length;)_=this._distances[++p];const T=p-1,L=this._distances[T],j=_-L,G=j>0?(E-L)/j:0;return this.points[T].mult(1-G).add(this.points[p].mult(G))}}class Ty{constructor(u,p,_){const E=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(u/_),this.yCellCount=Math.ceil(p/_);for(let L=0;L<this.xCellCount*this.yCellCount;L++)E.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,_,E,T){this._forEachCell(p,_,E,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(E),this.bboxes.push(T)}insertCircle(u,p,_,E){this._forEachCell(p-E,_-E,p+E,_+E,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(_),this.circles.push(E)}_insertBoxCell(u,p,_,E,T,L){this.boxCells[T].push(L)}_insertCircleCell(u,p,_,E,T,L){this.circleCells[T].push(L)}_query(u,p,_,E,T,L){if(_<0||u>this.width||E<0||p>this.height)return!T&&[];const j=[];if(u<=0&&p<=0&&this.width<=_&&this.height<=E){if(T)return!0;for(let G=0;G<this.boxKeys.length;G++)j.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const K=this.circles[3*G],X=this.circles[3*G+1],te=this.circles[3*G+2];j.push({key:this.circleKeys[G],x1:K-te,y1:X-te,x2:K+te,y2:X+te})}return L?j.filter(L):j}return this._forEachCell(u,p,_,E,this._queryCell,j,{hitTest:T,seenUids:{box:{},circle:{}}},L),T?j.length>0:j}_queryCircle(u,p,_,E,T){const L=u-_,j=u+_,G=p-_,K=p+_;if(j<0||L>this.width||K<0||G>this.height)return!E&&[];const X=[];return this._forEachCell(L,G,j,K,this._queryCellCircle,X,{hitTest:E,circle:{x:u,y:p,radius:_},seenUids:{box:{},circle:{}}},T),E?X.length>0:X}query(u,p,_,E,T){return this._query(u,p,_,E,!1,T)}hitTest(u,p,_,E,T){return this._query(u,p,_,E,!0,T)}hitTestCircle(u,p,_,E){return this._queryCircle(u,p,_,!0,E)}_queryCell(u,p,_,E,T,L,j,G){const K=j.seenUids,X=this.boxCells[T];if(X!==null){const ce=this.bboxes;for(const pe of X)if(!K.box[pe]){K.box[pe]=!0;const me=4*pe;if(u<=ce[me+2]&&p<=ce[me+3]&&_>=ce[me+0]&&E>=ce[me+1]&&(!G||G(this.boxKeys[pe]))){if(j.hitTest)return L.push(!0),!0;L.push({key:this.boxKeys[pe],x1:ce[me],y1:ce[me+1],x2:ce[me+2],y2:ce[me+3]})}}}const te=this.circleCells[T];if(te!==null){const ce=this.circles;for(const pe of te)if(!K.circle[pe]){K.circle[pe]=!0;const me=3*pe;if(this._circleAndRectCollide(ce[me],ce[me+1],ce[me+2],u,p,_,E)&&(!G||G(this.circleKeys[pe]))){if(j.hitTest)return L.push(!0),!0;{const ge=ce[me],ve=ce[me+1],le=ce[me+2];L.push({key:this.circleKeys[pe],x1:ge-le,y1:ve-le,x2:ge+le,y2:ve+le})}}}}}_queryCellCircle(u,p,_,E,T,L,j,G){const K=j.circle,X=j.seenUids,te=this.boxCells[T];if(te!==null){const pe=this.bboxes;for(const me of te)if(!X.box[me]){X.box[me]=!0;const ge=4*me;if(this._circleAndRectCollide(K.x,K.y,K.radius,pe[ge+0],pe[ge+1],pe[ge+2],pe[ge+3])&&(!G||G(this.boxKeys[me])))return L.push(!0),!0}}const ce=this.circleCells[T];if(ce!==null){const pe=this.circles;for(const me of ce)if(!X.circle[me]){X.circle[me]=!0;const ge=3*me;if(this._circlesCollide(pe[ge],pe[ge+1],pe[ge+2],K.x,K.y,K.radius)&&(!G||G(this.circleKeys[me])))return L.push(!0),!0}}}_forEachCell(u,p,_,E,T,L,j,G){const K=this._convertToXCellCoord(u),X=this._convertToYCellCoord(p),te=this._convertToXCellCoord(_),ce=this._convertToYCellCoord(E);for(let pe=K;pe<=te;pe++)for(let me=X;me<=ce;me++)if(T.call(this,u,p,_,E,this.xCellCount*me+pe,L,j,G))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,_,E,T,L){const j=E-u,G=T-p,K=_+L;return K*K>j*j+G*G}_circleAndRectCollide(u,p,_,E,T,L,j){const G=(L-E)/2,K=Math.abs(u-(E+G));if(K>G+_)return!1;const X=(j-T)/2,te=Math.abs(p-(T+X));if(te>X+_)return!1;if(K<=G||te<=X)return!0;const ce=K-G,pe=te-X;return ce*ce+pe*pe<=_*_}}const Na=Math.tan(85*Math.PI/180);function ou(y,u,p,_,E,T,L){const j=o.create();if(p)if(T.name==="globe"){const G=o.calculateGlobeLabelMatrix(E,u);o.multiply(j,j,G)}else{const G=re([],L);j[0]=G[0],j[1]=G[1],j[4]=G[2],j[5]=G[3],_||o.rotateZ(j,j,E.angle)}else o.multiply(j,E.labelPlaneMatrix,y);return j}function ky(y,u,p,_,E,T,L){const j=ou(y,u,p,_,E,T,L);return T.name==="globe"&&p||(j[2]=j[6]=j[10]=j[14]=0),j}function au(y,u,p,_,E,T,L){if(p){if(T.name==="globe"){const j=ou(y,u,p,_,E,T,L);return o.invert(j,j),o.multiply(j,y,j),j}{const j=o.clone(y),G=o.identity([]);return G[0]=L[0],G[1]=L[1],G[4]=L[2],G[5]=L[3],o.multiply(j,j,G),_||o.rotateZ(j,j,-E.angle),j}}return E.glCoordMatrix}function Vt(y,u,p,_){const E=[y,u,p,1];p?o.transformMat4$1(E,E,_):Ay(E,E,_);const T=E[3];return E[0]/=T,E[1]/=T,E[2]/=T,E}function Xn(y,u){return Math.min(.5+y/u*.5,1.5)}function Vn(y,u){const p=y[0]/y[3],_=y[1]/y[3];return p>=-u[0]&&p<=u[0]&&_>=-u[1]&&_<=u[1]}function $a(y,u,p,_,E,T,L,j,G,K){const X=p.transform,te=_?y.textSizeData:y.iconSizeData,ce=o.evaluateSizeForZoom(te,p.transform.zoom),pe=X.projection.name==="globe",me=[256/p.width*2+1,256/p.height*2+1],ge=_?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ge.clear();let ve=null;pe&&(ve=_?y.text.globeExtVertexArray:y.icon.globeExtVertexArray);const le=y.lineVertexArray,Ae=_?y.text.placedSymbolArray:y.icon.placedSymbolArray,Te=p.transform.width/p.transform.height;let Re,He=!1;for(let je=0;je<Ae.length;je++){const Ge=Ae.get(je),{numGlyphs:et,writingMode:ot}=Ge;if(ot!==o.WritingMode.vertical||He||Re===o.WritingMode.horizontal||(He=!0),Re=ot,(Ge.hidden||ot===o.WritingMode.vertical)&&!He){Or(et,ge);continue}He=!1;const ut=new o.pointGeometry(Ge.tileAnchorX,Ge.tileAnchorY);let{x:Ut,y:nt,z:Mt}=X.projection.projectTilePoint(ut.x,ut.y,K.canonical);if(G){const[Nn,on,Qt]=G(ut);Ut+=Nn,nt+=on,Mt+=Qt}const yt=[Ut,nt,Mt,1];if(o.transformMat4$1(yt,yt,u),!Vn(yt,me)){Or(et,ge);continue}const Rt=Xn(p.transform.cameraToCenterDistance,yt[3]),st=o.evaluateSizeForFeature(te,ce,Ge),Ye=L?st/Rt:st*Rt,dt=Vt(Ut,nt,Mt,E);if(dt[3]<=0){Or(et,ge);continue}let Dt={};const Ot=L?null:G,un=_c(Ge,Ye,!1,j,u,E,T,y.glyphOffsetArray,le,ge,ve,dt,ut,Dt,Te,Ot,X.projection,K,L);He=un.useVertical,Ot&&un.needsFlipping&&(Dt={}),(un.notEnoughRoom||He||un.needsFlipping&&_c(Ge,Ye,!0,j,u,E,T,y.glyphOffsetArray,le,ge,ve,dt,ut,Dt,Te,Ot,X.projection,K,L).notEnoughRoom)&&Or(et,ge)}_?(y.text.dynamicLayoutVertexBuffer.updateData(ge),ve&&y.text.globeExtVertexBuffer.updateData(ve)):(y.icon.dynamicLayoutVertexBuffer.updateData(ge),ve&&y.icon.globeExtVertexBuffer.updateData(ve))}function _l(y,u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge){const{lineStartIndex:ve,glyphStartIndex:le,segment:Ae}=j,Te=le+j.numGlyphs,Re=ve+j.lineLength,He=u.getoffsetX(le),je=u.getoffsetX(Te-1),Ge=_o(y*He,p,_,E,T,L,Ae,ve,Re,G,K,X,te,ce,!0,pe,me,ge);if(!Ge)return null;const et=_o(y*je,p,_,E,T,L,Ae,ve,Re,G,K,X,te,ce,!0,pe,me,ge);return et?{first:Ge,last:et}:null}function Un(y,u,p,_){return y===o.WritingMode.horizontal&&Math.abs(_)>Math.abs(p)?{useVertical:!0}:y===o.WritingMode.vertical?_>0?{needsFlipping:!0}:null:u!==0&&function(E,T){return E===0||Math.abs(T/E)>Na}(p,_)?u===1?{needsFlipping:!0}:null:p<0?{needsFlipping:!0}:null}function _c(y,u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge,ve,le,Ae){const Te=u/24,Re=y.lineOffsetX*Te,He=y.lineOffsetY*Te,{lineStartIndex:je,glyphStartIndex:Ge,numGlyphs:et,segment:ot,writingMode:ut,flipState:Ut}=y,nt=je+y.lineLength,Mt=yt=>{if(X){const[dt,Dt,Ot]=yt.up,un=K.length;o.updateGlobeVertexNormal(X,un+0,dt,Dt,Ot),o.updateGlobeVertexNormal(X,un+1,dt,Dt,Ot),o.updateGlobeVertexNormal(X,un+2,dt,Dt,Ot),o.updateGlobeVertexNormal(X,un+3,dt,Dt,Ot)}const[Rt,st,Ye]=yt.point;o.addDynamicAttributes(K,Rt,st,Ye,yt.angle)};if(et>1){const yt=_l(Te,j,Re,He,p,te,ce,y,G,T,pe,ge,!1,ve,le,Ae);if(!yt)return{notEnoughRoom:!0};if(_&&!p){let[Rt,st,Ye]=yt.first.point,[dt,Dt,Ot]=yt.last.point;[Rt,st]=Vt(Rt,st,Ye,L),[dt,Dt]=Vt(dt,Dt,Ot,L);const un=Un(ut,Ut,(dt-Rt)*me,Dt-st);if(y.flipState=un&&un.needsFlipping?1:2,un)return un}Mt(yt.first);for(let Rt=Ge+1;Rt<Ge+et-1;Rt++){const st=_o(Te*j.getoffsetX(Rt),Re,He,p,te,ce,ot,je,nt,G,T,pe,ge,!1,!1,ve,le,Ae);if(!st)return K.length-=4*(Rt-Ge),{notEnoughRoom:!0};Mt(st)}Mt(yt.last)}else{if(_&&!p){const Rt=Vt(ce.x,ce.y,0,E),st=je+ot+1,Ye=new o.pointGeometry(G.getx(st),G.gety(st)),dt=Vt(Ye.x,Ye.y,0,E),Dt=dt[3]>0?dt:lu(ce,Ye,Rt,1,E,void 0,ve,le.canonical),Ot=Un(ut,Ut,(Dt[0]-Rt[0])*me,Dt[1]-Rt[1]);if(y.flipState=Ot&&Ot.needsFlipping?1:2,Ot)return Ot}const yt=_o(Te*j.getoffsetX(Ge),Re,He,p,te,ce,ot,je,nt,G,T,pe,ge,!1,!1,ve,le,Ae);if(!yt)return{notEnoughRoom:!0};Mt(yt)}return{}}function su(y,u,p,_,E){const{x:T,y:L,z:j}=_.projectTilePoint(y.x,y.y,u);if(!E)return Vt(T,L,j,p);const[G,K,X]=E(y);return Vt(T+G,L+K,j+X,p)}function lu(y,u,p,_,E,T,L,j){const G=su(y.sub(u)._unit()._add(y),j,E,L,T);return o.sub(G,p,G),o.normalize(G,G),o.scaleAndAdd(G,p,G,_)}function _o(y,u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge,ve,le){const Ae=_?y-u:y+u;let Te=Ae>0?1:-1,Re=0;_&&(Te*=-1,Re=Math.PI),Te<0&&(Re+=Math.PI);let He=j+L+(Te>0?0:1)|0,je=E,Ge=E,et=0,ot=0;const ut=Math.abs(Ae),Ut=[],nt=[];let Mt=T,yt=Mt;const Rt=()=>lu(yt,Mt,Ge,ut-et+1,X,ce,ge,ve.canonical);for(;et+ot<=ut;){if(He+=Te,He<j||He>=G)return null;if(Ge=je,yt=Mt,Ut.push(Ge),pe&&nt.push(yt),Mt=new o.pointGeometry(K.getx(He),K.gety(He)),je=te[He],!je){const Qt=su(Mt,ve.canonical,X,ge,ce);je=Qt[3]>0?te[He]=Qt:Rt()}et+=ot,ot=o.distance(Ge,je)}me&&ce&&(te[He]&&(je=Rt(),ot=o.distance(Ge,je)),te[He]=je);const st=(ut-et)/ot,Ye=Mt.sub(yt)._mult(st)._add(yt),dt=o.sub([],je,Ge),Dt=o.scaleAndAdd([],Ge,dt,st);let Ot=[0,0,1],un=dt[0],Nn=dt[1];if(le&&(Ot=ge.upVector(ve.canonical,Ye.x,Ye.y),Ot[0]!==0||Ot[1]!==0||Ot[2]!==1)){const Qt=[Ot[2],0,-Ot[0]],hn=o.cross([],Ot,Qt);o.normalize(Qt,Qt),o.normalize(hn,hn),un=o.dot(dt,Qt),Nn=o.dot(dt,hn)}if(p){const Qt=o.cross([],Ot,dt);o.normalize(Qt,Qt),o.scaleAndAdd(Dt,Dt,Qt,p*Te)}const on=Re+Math.atan2(Nn,un);return Ut.push(Dt),pe&&nt.push(Ye),{point:Dt,angle:on,path:Ut,tilePath:nt,up:Ot}}function Or(y,u){const p=u.length,_=p+4*y;u.resize(_),u.float32.fill(-1/0,4*p,4*_)}function Ay(y,u,p){const _=u[0],E=u[1];return y[0]=p[0]*_+p[4]*E+p[12],y[1]=p[1]*_+p[5]*E+p[13],y[3]=p[3]*_+p[7]*E+p[15],y}const Mo=100;class mf{constructor(u,p,_=new Ty(u.width+200,u.height+200,25),E=new Ty(u.width+200,u.height+200,25)){this.transform=u,this.grid=_,this.ignoredGrid=E,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+Mo,this.screenBottomBoundary=u.height+Mo,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.fogState=p}placeCollisionBox(u,p,_,E,T,L,j,G){let K=_.projectedAnchorX,X=_.projectedAnchorY,te=_.projectedAnchorZ;const ce=_.elevation,pe=_.tileID,me=u.getProjection();if(ce&&pe){const[je,Ge,et]=me.upVector(pe.canonical,_.tileAnchorX,_.tileAnchorY),ot=me.upVectorScale(pe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;K+=je*ce*ot,X+=Ge*ce*ot,te+=et*ce*ot}const ge=this.projectAndGetPerspectiveRatio(j,K,X,te,_.tileID,me.name==="globe"||!!ce||this.transform.pitch>0,me),ve=L*ge.perspectiveRatio,le=(_.x1*p+E.x-_.padding)*ve+ge.point.x,Ae=(_.y1*p+E.y-_.padding)*ve+ge.point.y,Te=(_.x2*p+E.x+_.padding)*ve+ge.point.x,Re=(_.y2*p+E.y+_.padding)*ve+ge.point.y,He=ge.perspectiveRatio<=.55||ge.occluded;return!this.isInsideGrid(le,Ae,Te,Re)||!T&&this.grid.hitTest(le,Ae,Te,Re,G)||He?{box:[],offscreen:!1,occluded:ge.occluded}:{box:[le,Ae,Te,Re],offscreen:this.isOffscreen(le,Ae,Te,Re),occluded:!1}}placeCollisionCircles(u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge){const ve=[],le=this.transform.elevation,Ae=u.getProjection(),Te=le?le.getAtTileOffsetFunc(ge,this.transform.center.lat,this.transform.worldSize,Ae):null,Re=new o.pointGeometry(_.tileAnchorX,_.tileAnchorY);let{x:He,y:je,z:Ge}=Ae.projectTilePoint(Re.x,Re.y,ge.canonical);if(Te){const[Ye,dt,Dt]=Te(Re);He+=Ye,je+=dt,Ge+=Dt}const et=Ae.name==="globe",ot=this.projectAndGetPerspectiveRatio(j,He,je,Ge,ge,et||!!le||this.transform.pitch>0,Ae),{perspectiveRatio:ut}=ot,Ut=(te?L/ut:L*ut)/o.ONE_EM,nt=Vt(He,je,Ge,G),Mt=ot.signedDistanceFromCamera>0?_l(Ut,T,_.lineOffsetX*Ut,_.lineOffsetY*Ut,!1,nt,Re,_,E,G,{},le&&!te?Te:null,te&&!!le,Ae,ge,te):null;let yt=!1,Rt=!1,st=!0;if(Mt&&!ot.occluded){const Ye=.5*pe*ut+me,dt=new o.pointGeometry(-100,-100),Dt=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Ot=new Fs,{first:un,last:Nn}=Mt,on=un.path.length;let Qt=[];for(let gn=on-1;gn>=1;gn--)Qt.push(un.path[gn]);for(let gn=1;gn<Nn.path.length;gn++)Qt.push(Nn.path[gn]);const hn=2.5*Ye;K&&(Qt=Qt.map(([gn,lr,fr],zr)=>(Te&&!et&&(fr=Te(zr<on-1?un.tilePath[on-1-zr]:Nn.tilePath[zr-on+2])[2]),Vt(gn,lr,fr,K))),Qt.some(gn=>gn[3]<=0)&&(Qt=[]));let Hn=[];if(Qt.length>0){let gn=1/0,lr=-1/0,fr=1/0,zr=-1/0;for(const Mr of Qt)gn=Math.min(gn,Mr[0]),fr=Math.min(fr,Mr[1]),lr=Math.max(lr,Mr[0]),zr=Math.max(zr,Mr[1]);lr>=dt.x&&gn<=Dt.x&&zr>=dt.y&&fr<=Dt.y&&(Hn=[Qt.map(Mr=>new o.pointGeometry(Mr[0],Mr[1]))],(gn<dt.x||lr>Dt.x||fr<dt.y||zr>Dt.y)&&(Hn=o.clipLine(Hn,dt.x,dt.y,Dt.x,Dt.y)))}for(const gn of Hn){Ot.reset(gn,.25*Ye);let lr=0;lr=Ot.length<=.5*Ye?1:Math.ceil(Ot.paddedLength/hn)+1;for(let fr=0;fr<lr;fr++){const zr=fr/Math.max(lr-1,1),Mr=Ot.lerp(zr),wi=Mr.x+Mo,Do=Mr.y+Mo;ve.push(wi,Do,Ye,0);const xa=wi-Ye,ys=Do-Ye,Xr=wi+Ye,Ir=Do+Ye;if(st=st&&this.isOffscreen(xa,ys,Xr,Ir),Rt=Rt||this.isInsideGrid(xa,ys,Xr,Ir),!p&&this.grid.hitTestCircle(wi,Do,Ye,ce)&&(yt=!0,!X))return{circles:[],offscreen:!1,collisionDetected:yt,occluded:!1}}}}return{circles:!X&&yt||!Rt?[]:ve,offscreen:st,collisionDetected:yt,occluded:ot.occluded}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let _=1/0,E=1/0,T=-1/0,L=-1/0;for(const X of u){const te=new o.pointGeometry(X.x+Mo,X.y+Mo);_=Math.min(_,te.x),E=Math.min(E,te.y),T=Math.max(T,te.x),L=Math.max(L,te.y),p.push(te)}const j=this.grid.query(_,E,T,L).concat(this.ignoredGrid.query(_,E,T,L)),G={},K={};for(const X of j){const te=X.key;if(G[te.bucketInstanceId]===void 0&&(G[te.bucketInstanceId]={}),G[te.bucketInstanceId][te.featureIndex])continue;const ce=[new o.pointGeometry(X.x1,X.y1),new o.pointGeometry(X.x2,X.y1),new o.pointGeometry(X.x2,X.y2),new o.pointGeometry(X.x1,X.y2)];o.polygonIntersectsPolygon(p,ce)&&(G[te.bucketInstanceId][te.featureIndex]=!0,K[te.bucketInstanceId]===void 0&&(K[te.bucketInstanceId]=[]),K[te.bucketInstanceId].push(te.featureIndex))}return K}insertCollisionBox(u,p,_,E,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:E,collisionGroupID:T},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,_,E,T){const L=p?this.ignoredGrid:this.grid,j={bucketInstanceId:_,featureIndex:E,collisionGroupID:T};for(let G=0;G<u.length;G+=4)L.insertCircle(j,u[G],u[G+1],u[G+2])}projectAndGetPerspectiveRatio(u,p,_,E,T,L,j){const G=[p,_,E,1];let K=!1;if(E||this.transform.pitch>0){o.transformMat4$1(G,G,u);const te=j.name==="globe";this.fogState&&T&&!te&&(K=function(pe,me,ge,ve,le,Ae){const Te=Ae.calculateFogTileMatrix(le),Re=[me,ge,ve];return o.transformMat4(Re,Re,Te),Ze(pe,Re,Ae.pitch,Ae._fov)}(this.fogState,p,_,E,T.toUnwrapped(),this.transform)>.9)}else Ay(G,G,u);const X=G[3];return{point:new o.pointGeometry((G[0]/X+1)/2*this.transform.width+Mo,(-G[1]/X+1)/2*this.transform.height+Mo),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(j)/X*.5,1.5),signedDistanceFromCamera:X,occluded:L&&G[2]>X||K}}isOffscreen(u,p,_,E){return _<Mo||u>=this.screenRightBoundary||E<Mo||p>this.screenBottomBoundary}isInsideGrid(u,p,_,E){return _>=0&&u<this.gridRightBoundary&&E>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=o.identity([]);return o.translate(u,u,[-100,-100,0]),u}}function xl(y,u,p){const _=u.createTileMatrix(y,y.worldSize,p.toUnwrapped());return o.multiply(new Float32Array(16),y.projMatrix,_)}function gf(y,u,p){if(u.projection.name===p.projection.name)return y.projMatrix;const _=p.clone();return _.setProjection(u.projection),xl(_,u.getProjection(),y)}function Yd(y,u,p){return u.name===p.projection.name?y.projMatrix:xl(p,u,y)}class xc{constructor(u,p,_,E){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):E&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class bl{constructor(u,p,_,E,T,L=!1){this.text=new xc(u?u.text:null,p,_,T),this.icon=new xc(u?u.icon:null,p,E,T),this.clipped=L}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class uu{constructor(u,p,_,E=!1){this.text=u,this.icon=p,this.skipFade=_,this.clipped=E}}class yf{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Io{constructor(u,p,_,E,T){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=_,this.bucketIndex=E,this.tileID=T}}class pi{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:_=>_.collisionGroupID===p}}return this.collisionGroups[u]}}function Jd(y,u,p,_,E){const{horizontalAlign:T,verticalAlign:L}=o.getAnchorAlignment(y),j=-(T-.5)*u,G=-(L-.5)*p,K=o.evaluateVariableOffset(y,_);return new o.pointGeometry(j+K[0]*E,G+K[1]*E)}function bc(y,u,p,_,E){const T=new o.pointGeometry(y,u);return p&&T._rotate(_?E:-E),T}class Po{constructor(u,p,_,E,T){this.transform=u.clone(),this.projection=u.projection.name,this.collisionIndex=new mf(this.transform,T),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new pi(_),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,p,_,E){const T=_.getBucket(p),L=_.latestFeatureIndex;if(!T||!L||p.id!==T.layerIds[0])return;const j=T.layers[0].layout,G=_.collisionBoxArray,K=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),X=_.tileSize/o.EXTENT,te=_.tileID.toUnwrapped();this.transform.setProjection(T.projection);const ce=(pe=_.tileID,me=T.getProjection(),ge=this.transform,me.name===this.projection?ge.calculateProjMatrix(pe.toUnwrapped()):xl(ge,me,pe));var pe,me,ge;const ve=j.get("text-pitch-alignment")==="map",le=j.get("text-rotation-alignment")==="map";p.compileFilter();const Ae=p.dynamicFilter(),Te=p.dynamicFilterNeedsFeature(),Re=this.transform.calculatePixelsToTileUnitsMatrix(_),He=ky(ce,_.tileID.canonical,ve,le,this.transform,T.getProjection(),Re);let je=null;if(ve){const ot=au(ce,_.tileID.canonical,ve,le,this.transform,T.getProjection(),Re);je=o.multiply([],this.transform.labelPlaneMatrix,ot)}let Ge=null;Ae&&_.latestFeatureIndex&&(Ge={unwrappedTileID:te,dynamicFilter:Ae,dynamicFilterNeedsFeature:Te,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[T.bucketInstanceId]=new Io(T.bucketInstanceId,L,T.sourceLayerIndex,T.index,_.tileID);const et={bucket:T,layout:j,posMatrix:ce,textLabelPlaneMatrix:He,labelToScreenMatrix:je,clippingData:Ge,scale:K,textPixelRatio:X,holdingForFade:_.holdingForFade(),collisionBoxArray:G,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(T.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(T.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(E)for(const ot of T.sortKeyRanges){const{sortKey:ut,symbolInstanceStart:Ut,symbolInstanceEnd:nt}=ot;u.push({sortKey:ut,symbolInstanceStart:Ut,symbolInstanceEnd:nt,parameters:et})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:et})}attemptAnchorPlacement(u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge,ve,le,Ae){const{textOffset0:Te,textOffset1:Re,crossTileID:He}=ce,je=[Te,Re],Ge=Jd(u,_,E,je,T),et=this.collisionIndex.placeCollisionBox(me,T,p,bc(Ge.x,Ge.y,L,j,this.transform.angle),te,G,K,X.predicate);if(ve){const ot=me.getSymbolInstanceIconSize(Ae,this.transform.zoom,ce.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(me,ot,ve,bc(Ge.x,Ge.y,L,j,this.transform.angle),te,G,K,X.predicate).box.length===0)return}if(et.box.length>0){let ot;return this.prevPlacement&&this.prevPlacement.variableOffsets[He]&&this.prevPlacement.placements[He]&&this.prevPlacement.placements[He].text&&(ot=this.prevPlacement.variableOffsets[He].anchor),this.variableOffsets[He]={textOffset:je,width:_,height:E,anchor:u,textScale:T,prevAnchor:ot},this.markUsedJustification(me,u,ce,ge),me.allowVerticalPlacement&&(this.markUsedOrientation(me,ge,ce),this.placedOrientations[He]=ge),{shift:Ge,placedGlyphBoxes:et}}}placeLayerBucketPart(u,p,_,E){const{bucket:T,layout:L,posMatrix:j,textLabelPlaneMatrix:G,labelToScreenMatrix:K,clippingData:X,textPixelRatio:te,holdingForFade:ce,collisionBoxArray:pe,partiallyEvaluatedTextSize:me,partiallyEvaluatedIconSize:ge,collisionGroup:ve}=u.parameters,le=L.get("text-optional"),Ae=L.get("icon-optional"),Te=L.get("text-allow-overlap"),Re=L.get("icon-allow-overlap"),He=L.get("text-rotation-alignment")==="map",je=L.get("text-pitch-alignment")==="map",Ge=L.get("icon-text-fit")!=="none",et=L.get("symbol-z-order")==="viewport-y";this.transform.setProjection(T.projection);let ot=Te&&(Re||!T.hasIconData()||Ae),ut=Re&&(Te||!T.hasTextData()||le);!T.collisionArrays&&pe&&T.deserializeCollisionBoxes(pe),_&&E&&T.updateCollisionDebugBuffers(this.transform.zoom,pe);const Ut=(nt,Mt,yt)=>{const{crossTileID:Rt,numVerticalGlyphVertices:st}=nt;if(X){const Xr={zoom:this.transform.zoom,pitch:this.transform.pitch};let Ir=null;if(X.dynamicFilterNeedsFeature){const nr=this.retainedQueryData[T.bucketInstanceId];Ir=X.featureIndex.loadFeature({featureIndex:nt.featureIndex,bucketIndex:nr.bucketIndex,sourceLayerIndex:nr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,X.dynamicFilter)(Xr,Ir,this.retainedQueryData[T.bucketInstanceId].tileID.canonical,new o.pointGeometry(nt.tileAnchorX,nt.tileAnchorY),this.transform.calculateDistanceTileData(X.unwrappedTileID)))return this.placements[Rt]=new uu(!1,!1,!1,!0),void(p[Rt]=!0)}if(p[Rt])return;if(ce)return void(this.placements[Rt]=new uu(!1,!1,!1));let Ye=!1,dt=!1,Dt=!0,Ot=!1,un=!1,Nn=null,on={box:null,offscreen:null,occluded:null},Qt={box:null,offscreen:null,occluded:null},hn=null,Hn=null,gn=null,lr=0,fr=0,zr=0;yt.textFeatureIndex?lr=yt.textFeatureIndex:nt.useRuntimeCollisionCircles&&(lr=nt.featureIndex),yt.verticalTextFeatureIndex&&(fr=yt.verticalTextFeatureIndex);const Mr=Xr=>{Xr.tileID=this.retainedQueryData[T.bucketInstanceId].tileID;const Ir=this.transform.elevation;(Ir||Xr.elevation)&&(Xr.elevation=Ir?Ir.getAtTileOffset(Xr.tileID,Xr.tileAnchorX,Xr.tileAnchorY):0)},wi=yt.textBox;if(wi){Mr(wi);const Xr=nr=>{let li=o.WritingMode.horizontal;if(T.allowVerticalPlacement&&!nr&&this.prevPlacement){const so=this.prevPlacement.placedOrientations[Rt];so&&(this.placedOrientations[Rt]=so,li=so,this.markUsedOrientation(T,li,nt))}return li},Ir=(nr,li)=>{if(T.allowVerticalPlacement&&st>0&&yt.verticalTextBox){for(const so of T.writingModes)if(so===o.WritingMode.vertical?(on=li(),Qt=on):on=nr(),on&&on.box&&on.box.length)break}else on=nr()};if(L.get("text-variable-anchor")){let nr=L.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Rt]){const Hr=this.prevPlacement.variableOffsets[Rt];nr.indexOf(Hr.anchor)>0&&(nr=nr.filter(lo=>lo!==Hr.anchor),nr.unshift(Hr.anchor))}const li=(Hr,lo,uo)=>{const Vs=T.getSymbolInstanceTextSize(me,nt,this.transform.zoom,Mt),Su=(Hr.x2-Hr.x1)*Vs+2*Hr.padding,Go=(Hr.y2-Hr.y1)*Vs+2*Hr.padding,ra=Ge&&!Re?lo:null;ra&&Mr(ra);let vs={box:[],offscreen:!1,occluded:!1};const Hs=Te?2*nr.length:nr.length;for(let Ws=0;Ws<Hs;++Ws){const Tu=this.attemptAnchorPlacement(nr[Ws%nr.length],Hr,Su,Go,Vs,He,je,te,j,ve,Ws>=nr.length,nt,Mt,T,uo,ra,me,ge);if(Tu&&(vs=Tu.placedGlyphBoxes,vs&&vs.box&&vs.box.length)){Ye=!0,Nn=Tu.shift;break}}return vs};Ir(()=>li(wi,yt.iconBox,o.WritingMode.horizontal),()=>{const Hr=yt.verticalTextBox;return Hr&&Mr(Hr),T.allowVerticalPlacement&&!(on&&on.box&&on.box.length)&&st>0&&Hr?li(Hr,yt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),on&&(Ye=on.box,Dt=on.offscreen,Ot=on.occluded);const so=Xr(on&&on.box);if(!Ye&&this.prevPlacement){const Hr=this.prevPlacement.variableOffsets[Rt];Hr&&(this.variableOffsets[Rt]=Hr,this.markUsedJustification(T,Hr.anchor,nt,so))}}else{const nr=(li,so)=>{const Hr=T.getSymbolInstanceTextSize(me,nt,this.transform.zoom,Mt),lo=this.collisionIndex.placeCollisionBox(T,Hr,li,new o.pointGeometry(0,0),Te,te,j,ve.predicate);return lo&&lo.box&&lo.box.length&&(this.markUsedOrientation(T,so,nt),this.placedOrientations[Rt]=so),lo};Ir(()=>nr(wi,o.WritingMode.horizontal),()=>{const li=yt.verticalTextBox;return T.allowVerticalPlacement&&st>0&&li?(Mr(li),nr(li,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Xr(on&&on.box&&on.box.length)}}if(hn=on,Ye=hn&&hn.box&&hn.box.length>0,Dt=hn&&hn.offscreen,Ot=hn&&hn.occluded,nt.useRuntimeCollisionCircles){const Xr=T.text.placedSymbolArray.get(nt.centerJustifiedTextSymbolIndex>=0?nt.centerJustifiedTextSymbolIndex:nt.verticalPlacedTextSymbolIndex),Ir=o.evaluateSizeForFeature(T.textSizeData,me,Xr),nr=L.get("text-padding");Hn=this.collisionIndex.placeCollisionCircles(T,Te,Xr,T.lineVertexArray,T.glyphOffsetArray,Ir,j,G,K,_,je,ve.predicate,nt.collisionCircleDiameter*Ir/o.ONE_EM,nr,this.retainedQueryData[T.bucketInstanceId].tileID),Ye=Te||Hn.circles.length>0&&!Hn.collisionDetected,Dt=Dt&&Hn.offscreen,Ot=Hn.occluded}if(yt.iconFeatureIndex&&(zr=yt.iconFeatureIndex),yt.iconBox){const Xr=Ir=>{Mr(Ir);const nr=Ge&&Nn?bc(Nn.x,Nn.y,He,je,this.transform.angle):new o.pointGeometry(0,0),li=T.getSymbolInstanceIconSize(ge,this.transform.zoom,nt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(T,li,Ir,nr,Re,te,j,ve.predicate)};Qt&&Qt.box&&Qt.box.length&&yt.verticalIconBox?(gn=Xr(yt.verticalIconBox),dt=gn.box.length>0):(gn=Xr(yt.iconBox),dt=gn.box.length>0),Dt=Dt&&gn.offscreen,un=gn.occluded}const Do=le||nt.numHorizontalGlyphVertices===0&&st===0,xa=Ae||nt.numIconVertices===0;if(Do||xa?xa?Do||(dt=dt&&Ye):Ye=dt&&Ye:dt=Ye=dt&&Ye,Ye&&hn&&hn.box&&this.collisionIndex.insertCollisionBox(hn.box,L.get("text-ignore-placement"),T.bucketInstanceId,Qt&&Qt.box&&fr?fr:lr,ve.ID),dt&&gn&&this.collisionIndex.insertCollisionBox(gn.box,L.get("icon-ignore-placement"),T.bucketInstanceId,zr,ve.ID),Hn&&(Ye&&this.collisionIndex.insertCollisionCircles(Hn.circles,L.get("text-ignore-placement"),T.bucketInstanceId,lr,ve.ID),_)){const Xr=T.bucketInstanceId;let Ir=this.collisionCircleArrays[Xr];Ir===void 0&&(Ir=this.collisionCircleArrays[Xr]=new yf);for(let nr=0;nr<Hn.circles.length;nr+=4)Ir.circles.push(Hn.circles[nr+0]),Ir.circles.push(Hn.circles[nr+1]),Ir.circles.push(Hn.circles[nr+2]),Ir.circles.push(Hn.collisionDetected?1:0)}const ys=T.projection.name!=="globe";ot=ot&&(ys||!Ot),ut=ut&&(ys||!un),this.placements[Rt]=new uu(Ye||ot,dt||ut,Dt||T.justReloaded),p[Rt]=!0};if(et){const nt=T.getSortedSymbolIndexes(this.transform.angle);for(let Mt=nt.length-1;Mt>=0;--Mt){const yt=nt[Mt];Ut(T.symbolInstances.get(yt),yt,T.collisionArrays[yt])}}else for(let nt=u.symbolInstanceStart;nt<u.symbolInstanceEnd;nt++)Ut(T.symbolInstances.get(nt),nt,T.collisionArrays[nt]);if(_&&T.bucketInstanceId in this.collisionCircleArrays){const nt=this.collisionCircleArrays[T.bucketInstanceId];o.invert(nt.invProjMatrix,j),nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1}markUsedJustification(u,p,_,E){const{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:L,rightJustifiedTextSymbolIndex:j,verticalPlacedTextSymbolIndex:G,crossTileID:K}=_,X=o.getAnchorJustification(p),te=E===o.WritingMode.vertical?G:X==="left"?T:X==="center"?L:X==="right"?j:-1;T>=0&&(u.text.placedSymbolArray.get(T).crossTileID=te>=0&&T!==te?0:K),L>=0&&(u.text.placedSymbolArray.get(L).crossTileID=te>=0&&L!==te?0:K),j>=0&&(u.text.placedSymbolArray.get(j).crossTileID=te>=0&&j!==te?0:K),G>=0&&(u.text.placedSymbolArray.get(G).crossTileID=te>=0&&G!==te?0:K)}markUsedOrientation(u,p,_){const E=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,T=p===o.WritingMode.vertical?p:0,{leftJustifiedTextSymbolIndex:L,centerJustifiedTextSymbolIndex:j,rightJustifiedTextSymbolIndex:G,verticalPlacedTextSymbolIndex:K}=_,X=u.text.placedSymbolArray;L>=0&&(X.get(L).placedOrientation=E),j>=0&&(X.get(j).placedOrientation=E),G>=0&&(X.get(G).placedOrientation=E),K>=0&&(X.get(K).placedOrientation=T)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let _=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const E=p?p.symbolFadeChange(u):1,T=p?p.opacities:{},L=p?p.variableOffsets:{},j=p?p.placedOrientations:{};for(const G in this.placements){const K=this.placements[G],X=T[G];X?(this.opacities[G]=new bl(X,E,K.text,K.icon,null,K.clipped),_=_||K.text!==X.text.placed||K.icon!==X.icon.placed):(this.opacities[G]=new bl(null,E,K.text,K.icon,K.skipFade,K.clipped),_=_||K.text||K.icon)}for(const G in T){const K=T[G];if(!this.opacities[G]){const X=new bl(K,E,!1,!1);X.isHidden()||(this.opacities[G]=X,_=_||K.text.placed||K.icon.placed)}}for(const G in L)this.variableOffsets[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.variableOffsets[G]=L[G]);for(const G in j)this.placedOrientations[G]||!this.opacities[G]||this.opacities[G].isHidden()||(this.placedOrientations[G]=j[G]);_?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const _={};for(const E of p){const T=E.getBucket(u);T&&E.latestFeatureIndex&&u.id===T.layerIds[0]&&this.updateBucketOpacities(T,_,E.collisionBoxArray)}}updateBucketOpacities(u,p,_){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const E=u.layers[0].layout,T=!!u.layers[0].dynamicFilter(),L=new bl(null,0,!1,!1,!0),j=E.get("text-allow-overlap"),G=E.get("icon-allow-overlap"),K=E.get("text-variable-anchor"),X=E.get("text-rotation-alignment")==="map",te=E.get("text-pitch-alignment")==="map",ce=E.get("icon-text-fit")!=="none",pe=new bl(null,0,j&&(G||!u.hasIconData()||E.get("icon-optional")),G&&(j||!u.hasTextData()||E.get("text-optional")),!0);!u.collisionArrays&&_&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(_);const me=(ve,le,Ae)=>{for(let Te=0;Te<le/4;Te++)ve.opacityVertexArray.emplaceBack(Ae)};let ge=0;for(let ve=0;ve<u.symbolInstances.length;ve++){const le=u.symbolInstances.get(ve),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:Te,crossTileID:Re,numIconVertices:He}=le;let je=this.opacities[Re];p[Re]?je=L:je||(je=pe,this.opacities[Re]=je),p[Re]=!0;const Ge=Ae>0||Te>0,et=He>0,ot=this.placedOrientations[Re],ut=ot===o.WritingMode.vertical,Ut=ot===o.WritingMode.horizontal||ot===o.WritingMode.horizontalOnly;if(!Ge&&!et||je.isHidden()||ge++,Ge){const nt=eh(je.text);me(u.text,Ae,ut?cu:nt),me(u.text,Te,Ut?cu:nt);const Mt=je.text.isHidden(),{leftJustifiedTextSymbolIndex:yt,centerJustifiedTextSymbolIndex:Rt,rightJustifiedTextSymbolIndex:st,verticalPlacedTextSymbolIndex:Ye}=le,dt=u.text.placedSymbolArray,Dt=Mt||ut?1:0;yt>=0&&(dt.get(yt).hidden=Dt),Rt>=0&&(dt.get(Rt).hidden=Dt),st>=0&&(dt.get(st).hidden=Dt),Ye>=0&&(dt.get(Ye).hidden=Mt||Ut?1:0);const Ot=this.variableOffsets[Re];Ot&&this.markUsedJustification(u,Ot.anchor,le,ot);const un=this.placedOrientations[Re];un&&(this.markUsedJustification(u,"left",le,un),this.markUsedOrientation(u,un,le))}if(et){const nt=eh(je.icon),{placedIconSymbolIndex:Mt,verticalPlacedIconSymbolIndex:yt}=le,Rt=u.icon.placedSymbolArray,st=je.icon.isHidden()?1:0;Mt>=0&&(me(u.icon,He,ut?cu:nt),Rt.get(Mt).hidden=st),yt>=0&&(me(u.icon,le.numVerticalIconVertices,Ut?cu:nt),Rt.get(yt).hidden=st)}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const nt=u.collisionArrays[ve];if(nt){let Mt=new o.pointGeometry(0,0),yt=!0;if(nt.textBox||nt.verticalTextBox){if(K){const st=this.variableOffsets[Re];st?(Mt=Jd(st.anchor,st.width,st.height,st.textOffset,st.textScale),X&&Mt._rotate(te?this.transform.angle:-this.transform.angle)):yt=!1}T&&(yt=!je.clipped),nt.textBox&&xo(u.textCollisionBox.collisionVertexArray,je.text.placed,!yt||ut,Mt.x,Mt.y),nt.verticalTextBox&&xo(u.textCollisionBox.collisionVertexArray,je.text.placed,!yt||Ut,Mt.x,Mt.y)}const Rt=yt&&Boolean(!Ut&&nt.verticalIconBox);nt.iconBox&&xo(u.iconCollisionBox.collisionVertexArray,je.icon.placed,Rt,ce?Mt.x:0,ce?Mt.y:0),nt.verticalIconBox&&xo(u.iconCollisionBox.collisionVertexArray,je.icon.placed,!Rt,ce?Mt.x:0,ce?Mt.y:0)}}}if(u.fullyClipped=ge===0,u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.bucketInstanceId in this.collisionCircleArrays){const ve=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=ve.invProjMatrix,u.placementViewportMatrix=ve.viewportMatrix,u.collisionCircleArray=ve.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const _=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*_>u}setStale(){this.stale=!0}}function xo(y,u,p,_,E){y.emplaceBack(u?1:0,p?1:0,_||0,E||0),y.emplaceBack(u?1:0,p?1:0,_||0,E||0),y.emplaceBack(u?1:0,p?1:0,_||0,E||0),y.emplaceBack(u?1:0,p?1:0,_||0,E||0)}const My=Math.pow(2,25),Qd=Math.pow(2,24),Pi=Math.pow(2,17),wc=Math.pow(2,16),vf=Math.pow(2,9),Ec=Math.pow(2,8),Xi=Math.pow(2,1);function eh(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const u=y.placed?1:0,p=Math.floor(127*y.opacity);return p*My+u*Qd+p*Pi+u*wc+p*vf+u*Ec+p*Xi+u}const cu=0;class fs{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&u.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,_,E,T){const L=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(L,E,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,L.sort((j,G)=>j.sortKey-G.sortKey));this._currentPartIndex<L.length;){const j=L[this._currentPartIndex];if(p.placeLayerBucketPart(j,this._seenCrossTileIDs,_,j.symbolInstanceStart===0),this._currentPartIndex++,T())return!0}return!1}}class Cc{constructor(u,p,_,E,T,L,j,G){this.placement=new Po(u,T,L,j,G),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(u,p,_){const E=o.exported.now(),T=()=>{const L=o.exported.now()-E;return!this._forceFullPlacement&&L>2};for(;this._currentPlacementIndex>=0;){const L=p[u[this._currentPlacementIndex]],j=this.placement.collisionIndex.transform.zoom;if(L.type==="symbol"&&(!L.minzoom||L.minzoom<=j)&&(!L.maxzoom||L.maxzoom>j)){if(this._inProgressLayer||(this._inProgressLayer=new fs(L)),this._inProgressLayer.continuePlacement(_[L.source],this.placement,this._showCollisionBoxes,L,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const th=512/o.EXTENT/2;class N1{constructor(u,p,_){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let E=0;E<p.length;E++){const T=p.get(E),L=T.key;this.indexedSymbolInstances[L]||(this.indexedSymbolInstances[L]=[]),this.indexedSymbolInstances[L].push({crossTileID:T.crossTileID,coord:this.getScaledCoordinates(T,u)})}}getScaledCoordinates(u,p){const _=th/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+u.tileAnchorX)*_),y:Math.floor((p.canonical.y*o.EXTENT+u.tileAnchorY)*_)}}findMatches(u,p,_){const E=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let T=0;T<u.length;T++){const L=u.get(T);if(L.crossTileID)continue;const j=this.indexedSymbolInstances[L.key];if(!j)continue;const G=this.getScaledCoordinates(L,p);for(const K of j)if(Math.abs(K.coord.x-G.x)<=E&&Math.abs(K.coord.y-G.y)<=E&&!_[K.crossTileID]){_[K.crossTileID]=!0,L.crossTileID=K.crossTileID;break}}}}class _f{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class du{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const _ in this.indexes){const E=this.indexes[_],T={};for(const L in E){const j=E[L];j.tileID=j.tileID.unwrapTo(j.tileID.wrap+p),T[j.tileID.key]=j}this.indexes[_]=T}this.lng=u}addBucket(u,p,_){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let T=0;T<p.symbolInstances.length;T++)p.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const E=this.usedCrossTileIDs[u.overscaledZ];for(const T in this.indexes){const L=this.indexes[T];if(Number(T)>u.overscaledZ)for(const j in L){const G=L[j];G.tileID.isChildOf(u)&&G.findMatches(p.symbolInstances,u,E)}else{const j=L[u.scaledTo(Number(T)).key];j&&j.findMatches(p.symbolInstances,u,E)}}for(let T=0;T<p.symbolInstances.length;T++){const L=p.symbolInstances.get(T);L.crossTileID||(L.crossTileID=_.generate(),E[L.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new N1(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const _ in p.indexedSymbolInstances)for(const E of p.indexedSymbolInstances[_])delete this.usedCrossTileIDs[u][E.crossTileID]}removeStaleBuckets(u){let p=!1;for(const _ in this.indexes){const E=this.indexes[_];for(const T in E)u[E[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,E[T]),delete E[T],p=!0)}return p}}class Iy{constructor(){this.layerIndexes={},this.crossTileIDs=new _f,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,_,E){let T=this.layerIndexes[u.id];T===void 0&&(T=this.layerIndexes[u.id]=new du);let L=!1;const j={};E.name!=="globe"&&T.handleWrapJump(_);for(const G of p){const K=G.getBucket(u);K&&u.id===K.layerIds[0]&&(K.bucketInstanceId||(K.bucketInstanceId=++this.maxBucketInstanceId),T.addBucket(G.tileID,K,this.crossTileIDs)&&(L=!0),j[K.bucketInstanceId]=!0)}return T.removeStaleBuckets(j)&&(L=!0),L}pruneUnusedLayers(u){const p={};u.forEach(_=>{p[_]=!0});for(const _ in this.layerIndexes)p[_]||delete this.layerIndexes[_]}}const Sc=(y,u)=>o.emitValidationErrors(y,u&&u.filter(p=>p.identifier!=="source.canvas")),hu=o.pick(wn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Ns=o.pick(wn,["setCenter","setZoom","setBearing","setPitch"]),nh={version:8,layers:[],sources:{}},$s={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ta extends o.Evented{constructor(u,p={}){super(),this.map=u,this.dispatcher=new nn(pn(),this),this.imageManager=new ee,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(u._requestManager,p.localFontFamily?o.LocalGlyphMode.all:p.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,p.localFontFamily||p.localIdeographFontFamily),this.crossTileSymbolIndex=new Iy,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const _=this;this._rtlTextPluginCallback=ta.registerForPluginStateChange(E=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},(T,L)=>{if(o.triggerPluginCompletionEvent(T),L&&L.every(j=>j))for(const j in _._sourceCaches){const G=_._sourceCaches[j],K=G.getSource().type;K!=="vector"&&K!=="geojson"||G.reload()}})}),this.on("data",E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const T=this.getSource(E.sourceId);if(T&&T.vectorLayerIds)for(const L in this._layers){const j=this._layers[L];j.source===T.id&&this._validateLayer(j)}})}loadURL(u,p={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const _=typeof p.validate=="boolean"?p.validate:!o.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,p.accessToken);const E=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(E,(T,L)=>{this._request=null,T?this.fire(new o.ErrorEvent(T)):L&&this._load(L,_)})}loadJSON(u,p={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(u,p.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(nh,!1)}_updateLayerCount(u,p){const _=p?1:-1;u.is3D()&&(this._num3DLayers+=_),u.type==="circle"&&(this._numCircleLayers+=_),u.type==="symbol"&&(this._numSymbolLayers+=_)}_load(u,p){if(p&&Sc(this,o.validateStyle(u)))return;this._loaded=!0,this.stylesheet=o.clone$1(u),this._updateMapProjection();for(const E in u.sources)this.addSource(E,u.sources[E],{validate:!1});this._changed=!1,u.sprite?this._loadSprite(u.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(u.glyphs);const _=ir(this.stylesheet.layers);this._order=_.map(E=>E.id),this._layers={},this._serializedLayers={};for(const E of _){const T=o.createStyleLayer(E);T.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=T,this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Oe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(u){u?this.stylesheet.projection=u:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(u){this._spriteRequest=function(p,_,E){let T,L,j;const G=o.exported.devicePixelRatio>1?"@2x":"";let K=o.getJSON(_.transformRequest(_.normalizeSpriteURL(p,G,".json"),o.ResourceType.SpriteJSON),(ce,pe)=>{K=null,j||(j=ce,T=pe,te())}),X=o.getImage(_.transformRequest(_.normalizeSpriteURL(p,G,".png"),o.ResourceType.SpriteImage),(ce,pe)=>{X=null,j||(j=ce,L=pe,te())});function te(){if(j)E(j);else if(T&&L){const ce=o.exported.getImageData(L),pe={};for(const me in T){const{width:ge,height:ve,x:le,y:Ae,sdf:Te,pixelRatio:Re,stretchX:He,stretchY:je,content:Ge}=T[me],et=new o.RGBAImage({width:ge,height:ve});o.RGBAImage.copy(ce,et,{x:le,y:Ae},{x:0,y:0},{width:ge,height:ve}),pe[me]={data:et,pixelRatio:Re,sdf:Te,stretchX:He,stretchY:je,content:Ge}}E(null,pe)}}return{cancel(){K&&(K.cancel(),K=null),X&&(X.cancel(),X=null)}}}(u,this.map._requestManager,(p,_)=>{if(this._spriteRequest=null,p)this.fire(new o.ErrorEvent(p));else if(_)for(const E in _)this.imageManager.addImage(E,_[E]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(u){const p=this.getSource(u.source);if(!p)return;const _=u.sourceLayer;_&&(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${p.id}" as specified by style layer "${u.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this._sourceCaches)if(!this._sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const p=[];for(const _ of u){const E=this._layers[_];E.type!=="custom"&&p.push(E.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const u in this._sourceCaches)if(this._sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(u){return!!this.terrain&&(typeof u.isLayerDraped=="function"?u.isLayerDraped():$s[u.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(u){if(!this._loaded)return;const p=this._changed;if(this._changed){const E=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(E.length||T.length)&&this._updateWorkerLayers(E,T);for(const L in this._updatedSources){const j=this._updatedSources[L];j==="reload"?this._reloadSource(L):j==="clear"&&this._clearSource(L)}this._updateTilesForChangedImages();for(const L in this._updatedPaintProps)this._layers[L].updateTransitions(u);this.light.updateTransitions(u),this.fog&&this.fog.updateTransitions(u),this._resetUpdates()}const _={};for(const E in this._sourceCaches){const T=this._sourceCaches[E];_[E]=T.used,T.used=!1}for(const E of this._order){const T=this._layers[E];if(T.recalculate(u,this._availableImages),!T.isHidden(u.zoom)){const j=this._getLayerSourceCache(T);j&&(j.used=!0)}const L=this.map.painter;if(L){const j=T.getProgramIds();if(!j)continue;const G=T.getProgramConfiguration(u.zoom);for(const K of j)L.useProgram(K,G)}}for(const E in _){const T=this._sourceCaches[E];_[E]!==T.used&&T.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:T.getSource().id}))}this.light.recalculate(u),this.terrain&&this.terrain.recalculate(u),this.fog&&this.fog.recalculate(u),this.z=u.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),p&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this._sourceCaches)this._sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(u){if(this._checkLoaded(),Sc(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=ir(u.layers);const p=function(E,T){if(!E)return[{command:wn.setStyle,args:[T]}];let L=[];try{if(!m(E.version,T.version))return[{command:wn.setStyle,args:[T]}];m(E.center,T.center)||L.push({command:wn.setCenter,args:[T.center]}),m(E.zoom,T.zoom)||L.push({command:wn.setZoom,args:[T.zoom]}),m(E.bearing,T.bearing)||L.push({command:wn.setBearing,args:[T.bearing]}),m(E.pitch,T.pitch)||L.push({command:wn.setPitch,args:[T.pitch]}),m(E.sprite,T.sprite)||L.push({command:wn.setSprite,args:[T.sprite]}),m(E.glyphs,T.glyphs)||L.push({command:wn.setGlyphs,args:[T.glyphs]}),m(E.transition,T.transition)||L.push({command:wn.setTransition,args:[T.transition]}),m(E.light,T.light)||L.push({command:wn.setLight,args:[T.light]}),m(E.fog,T.fog)||L.push({command:wn.setFog,args:[T.fog]}),m(E.projection,T.projection)||L.push({command:wn.setProjection,args:[T.projection]});const j={},G=[];(function(te,ce,pe,me){let ge;for(ge in ce=ce||{},te=te||{})te.hasOwnProperty(ge)&&(ce.hasOwnProperty(ge)||xr(ge,pe,me));for(ge in ce){if(!ce.hasOwnProperty(ge))continue;const ve=ce[ge];te.hasOwnProperty(ge)?m(te[ge],ve)||(te[ge].type==="geojson"&&ve.type==="geojson"&&hs(te,ce,ge)?pe.push({command:wn.setGeoJSONSourceData,args:[ge,ve.data]}):Bs(ge,ce,pe,me)):_r(ge,ce,pe)}})(E.sources,T.sources,G,j);const K=[];E.layers&&E.layers.forEach(te=>{te.source&&j[te.source]?L.push({command:wn.removeLayer,args:[te.id]}):K.push(te)});let X=E.terrain;X&&j[X.source]&&(L.push({command:wn.setTerrain,args:[void 0]}),X=void 0),L=L.concat(G),m(X,T.terrain)||L.push({command:wn.setTerrain,args:[T.terrain]}),function(te,ce,pe){ce=ce||[];const me=(te=te||[]).map(ps),ge=ce.map(ps),ve=te.reduce(bi,{}),le=ce.reduce(bi,{}),Ae=me.slice(),Te=Object.create(null);let Re,He,je,Ge,et,ot,ut;for(Re=0,He=0;Re<me.length;Re++)je=me[Re],le.hasOwnProperty(je)?He++:(pe.push({command:wn.removeLayer,args:[je]}),Ae.splice(Ae.indexOf(je,He),1));for(Re=0,He=0;Re<ge.length;Re++)je=ge[ge.length-1-Re],Ae[Ae.length-1-Re]!==je&&(ve.hasOwnProperty(je)?(pe.push({command:wn.removeLayer,args:[je]}),Ae.splice(Ae.lastIndexOf(je,Ae.length-He),1)):He++,ot=Ae[Ae.length-Re],pe.push({command:wn.addLayer,args:[le[je],ot]}),Ae.splice(Ae.length-Re,0,je),Te[je]=!0);for(Re=0;Re<ge.length;Re++)if(je=ge[Re],Ge=ve[je],et=le[je],!Te[je]&&!m(Ge,et))if(m(Ge.source,et.source)&&m(Ge["source-layer"],et["source-layer"])&&m(Ge.type,et.type)){for(ut in Ct(Ge.layout,et.layout,pe,je,null,wn.setLayoutProperty),Ct(Ge.paint,et.paint,pe,je,null,wn.setPaintProperty),m(Ge.filter,et.filter)||pe.push({command:wn.setFilter,args:[je,et.filter]}),m(Ge.minzoom,et.minzoom)&&m(Ge.maxzoom,et.maxzoom)||pe.push({command:wn.setLayerZoomRange,args:[je,et.minzoom,et.maxzoom]}),Ge)Ge.hasOwnProperty(ut)&&ut!=="layout"&&ut!=="paint"&&ut!=="filter"&&ut!=="metadata"&&ut!=="minzoom"&&ut!=="maxzoom"&&(ut.indexOf("paint.")===0?Ct(Ge[ut],et[ut],pe,je,ut.slice(6),wn.setPaintProperty):m(Ge[ut],et[ut])||pe.push({command:wn.setLayerProperty,args:[je,ut,et[ut]]}));for(ut in et)et.hasOwnProperty(ut)&&!Ge.hasOwnProperty(ut)&&ut!=="layout"&&ut!=="paint"&&ut!=="filter"&&ut!=="metadata"&&ut!=="minzoom"&&ut!=="maxzoom"&&(ut.indexOf("paint.")===0?Ct(Ge[ut],et[ut],pe,je,ut.slice(6),wn.setPaintProperty):m(Ge[ut],et[ut])||pe.push({command:wn.setLayerProperty,args:[je,ut,et[ut]]}))}else pe.push({command:wn.removeLayer,args:[je]}),ot=Ae[Ae.lastIndexOf(je)+1],pe.push({command:wn.addLayer,args:[et,ot]})}(K,T.layers,L)}catch(j){console.warn("Unable to compute style diff:",j),L=[{command:wn.setStyle,args:[T]}]}return L}(this.serialize(),u).filter(E=>!(E.command in Ns));if(p.length===0)return!1;const _=p.filter(E=>!(E.command in hu));if(_.length>0)throw new Error(`Unimplemented: ${_.map(E=>E.command).join(", ")}.`);return p.forEach(E=>{E.command!=="setTransition"&&E.command!=="setProjection"&&this[E.command].apply(this,E.args)}),this.stylesheet=u,this._updateMapProjection(),!0}addImage(u,p){return this.getImage(u)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(u,p),this._afterImageUpdated(u),this)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){return this.getImage(u)?(this.imageManager.removeImage(u),this._afterImageUpdated(u),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(u,p,_={}){if(this._checkLoaded(),this.getSource(u)!==void 0)throw new Error("There is already a source with this ID");if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.validateSource,`sources.${u}`,p,null,_))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const E=Ke(u,p,this.dispatcher,this);E.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(u),source:E.serialize(),sourceId:u}));const T=L=>{const j=(L?"symbol:":"other:")+u,G=this._sourceCaches[j]=new o.SourceCache(j,E,L);(L?this._symbolSourceCaches:this._otherSourceCaches)[u]=G,G.style=this,G.onAdd(this.map)};T(!1),p.type!=="vector"&&p.type!=="geojson"||T(!0),E.onAdd&&E.onAdd(this.map),this._changed=!0}removeSource(u){this._checkLoaded();const p=this.getSource(u);if(!p)throw new Error("There is no source with this ID");for(const E in this._layers)if(this._layers[E].source===u)return this.fire(new o.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${E}" is using it.`)));if(this.terrain&&this.terrain.get().source===u)return this.fire(new o.ErrorEvent(new Error(`Source "${u}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(u);for(const E of _)delete this._sourceCaches[E.id],delete this._updatedSources[E.id],E.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:E.getSource().id})),E.setEventedParent(null),E.clearTiles();return delete this._otherSourceCaches[u],delete this._symbolSourceCaches[u],p.setEventedParent(null),p.onRemove&&p.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(u,p){this._checkLoaded(),this.getSource(u).setData(p),this._changed=!0}getSource(u){const p=this._getSourceCache(u);return p&&p.getSource()}_getSources(){const u=[];for(const p in this._otherSourceCaches){const _=this._getSourceCache(p);_&&u.push(_.getSource())}return u}addLayer(u,p,_={}){this._checkLoaded();const E=u.id;if(this.getLayer(E))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${E}" already exists on this map`)));let T;if(u.type==="custom"){if(Sc(this,o.validateCustomStyleLayer(u)))return;T=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(E,u.source),u=o.clone$1(u),u=o.extend(u,{source:E})),this._validate(o.validateLayer,`layers.${E}`,u,{arrayIndex:-1},_))return;T=o.createStyleLayer(u),this._validateLayer(T),T.setEventedParent(this,{layer:{id:E}}),this._serializedLayers[T.id]=T.serialize(),this._updateLayerCount(T,!0)}const L=p?this._order.indexOf(p):this._order.length;if(p&&L===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`)));this._order.splice(L,0,E),this._layerOrderChanged=!0,this._layers[E]=T;const j=this._getLayerSourceCache(T);if(this._removedLayers[E]&&T.source&&j&&T.type!=="custom"){const G=this._removedLayers[E];delete this._removedLayers[E],G.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",j.pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const _=this._order.indexOf(u);this._order.splice(_,1);const E=p?this._order.indexOf(p):this._order.length;p&&E===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${p}" does not exist on this map.`))):(this._order.splice(E,0,u),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be removed.`)));p.setEventedParent(null),this._updateLayerCount(p,!1);const _=this._order.indexOf(u);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}hasLayerType(u){for(const p in this._layers)if(this._layers[p].type===u)return!0;return!1}setLayerZoomRange(u,p,_){this._checkLoaded();const E=this.getLayer(u);E?E.minzoom===p&&E.maxzoom===_||(p!=null&&(E.minzoom=p),_!=null&&(E.maxzoom=_),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(u,p,_={}){this._checkLoaded();const E=this.getLayer(u);if(E){if(!m(E.filter,p))return p==null?(E.filter=void 0,void this._updateLayer(E)):void(this._validate(o.validateFilter,`layers.${E.id}.filter`,p,{layerType:E.type},_)||(E.filter=o.clone$1(p),this._updateLayer(E)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be filtered.`)))}getFilter(u){const p=this.getLayer(u);return p&&o.clone$1(p.filter)}setLayoutProperty(u,p,_,E={}){this._checkLoaded();const T=this.getLayer(u);T?m(T.getLayoutProperty(p),_)||(T.setLayoutProperty(p,_,E),this._updateLayer(T)):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(u,p){const _=this.getLayer(u);if(_)return _.getLayoutProperty(p);this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style.`)))}setPaintProperty(u,p,_,E={}){this._checkLoaded();const T=this.getLayer(u);T?m(T.getPaintProperty(p),_)||(T.setPaintProperty(p,_,E)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(u,p){const _=this.getLayer(u);return _&&_.getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const _=u.source,E=u.sourceLayer,T=this.getSource(_);if(!T)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const L=T.type;if(L==="geojson"&&E)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(L==="vector"&&!E)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const j=this._getSourceCaches(_);for(const G of j)G.setFeatureState(E,u.id,p)}removeFeatureState(u,p){this._checkLoaded();const _=u.source,E=this.getSource(_);if(!E)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const T=E.type,L=T==="vector"?u.sourceLayer:void 0;if(T==="vector"&&!L)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(p&&typeof u.id!="string"&&typeof u.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const j=this._getSourceCaches(_);for(const G of j)G.removeFeatureState(L,u.id,p)}getFeatureState(u){this._checkLoaded();const p=u.source,_=u.sourceLayer,E=this.getSource(p);if(E){if(E.type!=="vector"||_)return u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(p)[0].getFeatureState(_,u.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const u={};for(const p in this._sourceCaches){const _=this._sourceCaches[p].getSource();u[_.id]||(u[_.id]=_.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:u,layers:this._serializeLayers(this._order)},p=>p!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0;const p=this._getLayerSourceCache(u);u.source&&!this._updatedSources[u.source]&&p&&p.getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",p.pause()),this._changed=!0,u.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(u){const p=L=>this._layers[L].type==="fill-extrusion",_={},E=[];for(let L=this._order.length-1;L>=0;L--){const j=this._order[L];if(p(j)){_[j]=L;for(const G of u){const K=G[j];if(K)for(const X of K)E.push(X)}}}E.sort((L,j)=>j.intersectionZ-L.intersectionZ);const T=[];for(let L=this._order.length-1;L>=0;L--){const j=this._order[L];if(p(j))for(let G=E.length-1;G>=0;G--){const K=E[G].feature;if(_[K.layer.id]<L)break;T.push(K),E.pop()}else for(const G of u){const K=G[j];if(K)for(const X of K)T.push(X.feature)}}return T}queryRenderedFeatures(u,p,_){p&&p.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",p.filter,null,p);const E={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const G of p.layers){const K=this._layers[G];if(!K)return this.fire(new o.ErrorEvent(new Error(`The layer '${G}' does not exist in the map's style and cannot be queried for features.`))),[];E[K.source]=!0}}const T=[];p.availableImages=this._availableImages;const L=p&&p.layers?p.layers.some(G=>{const K=this.getLayer(G);return K&&K.is3D()}):this.has3DLayers(),j=an.createFromScreenPoints(u,_);for(const G in this._sourceCaches){const K=this._sourceCaches[G].getSource().id;p.layers&&!E[K]||T.push(Ie(this._sourceCaches[G],this._layers,this._serializedLayers,j,p,_,L,!!this.map._showQueryGeometry))}return this.placement&&T.push(function(G,K,X,te,ce,pe,me){const ge={},ve=pe.queryRenderedSymbols(te),le=[];for(const Ae of Object.keys(ve).map(Number))le.push(me[Ae]);le.sort(wt);for(const Ae of le){const Te=Ae.featureIndex.lookupSymbolFeatures(ve[Ae.bucketInstanceId],K,Ae.bucketIndex,Ae.sourceLayerIndex,ce.filter,ce.layers,ce.availableImages,G);for(const Re in Te){const He=ge[Re]=ge[Re]||[],je=Te[Re];je.sort((Ge,et)=>{const ot=Ae.featureSortOrder;if(ot){const ut=ot.indexOf(Ge.featureIndex);return ot.indexOf(et.featureIndex)-ut}return et.featureIndex-Ge.featureIndex});for(const Ge of je)He.push(Ge)}}for(const Ae in ge)ge[Ae].forEach(Te=>{const Re=Te.feature,He=X(G[Ae]);if(!He)return;const je=He.getFeatureState(Re.layer["source-layer"],Re.id);Re.source=Re.layer.source,Re.layer["source-layer"]&&(Re.sourceLayer=Re.layer["source-layer"]),Re.state=je});return ge}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),j.screenGeometry,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(u,p){p&&p.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",p.filter,null,p);const _=this._getSourceCaches(u);let E=[];for(const T of _)E=E.concat(Ue(T,p));return E}addSourceType(u,p,_){return ta.getSourceType(u)?_(new Error(`A source type called "${u}" already exists.`)):(ta.setSourceType(u,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:p.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const _=this.light.getLight();let E=!1;for(const L in u)if(!m(u[L],_[L])){E=!0;break}if(!E)return;const T=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(u,p),this.light.updateTransitions(T)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(u,p=1){if(this._checkLoaded(),!u)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let _=u;if(p===1){if(typeof _.source=="object"){const E="terrain-dem-src";this.addSource(E,_.source),_=o.clone$1(_),_=o.extend(_,{source:E})}if(this._validate(o.validateTerrain,"terrain",_))return}if(!this.terrain||this.terrain&&p!==this.terrain.drapeRenderMode){if(!_)return;this._createTerrain(_,p)}else{const E=this.terrain,T=E.get();for(const L of Object.keys(o.spec.terrain))!_.hasOwnProperty(L)&&o.spec.terrain[L].default&&(_[L]=o.spec.terrain[L].default);for(const L in _)if(!m(_[L],T[L])){E.set(_),this.stylesheet.terrain=_;const j=this._setTransitionParameters({duration:0});E.updateTransitions(j);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(u){const p=this.fog=new be(u,this.map.transform);this.stylesheet.fog=u;const _=this._setTransitionParameters({duration:0});p.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const u of this.map._markers)u._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(u){if(this._checkLoaded(),!u)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const p=this.fog,_=p.get();Object.keys(u).length===0&&p.set(u);for(const E in u)if(!m(u[E],_[E])){p.set(u),this.stylesheet.fog=u;const T=this._setTransitionParameters({duration:0});p.updateTransitions(T);break}}else this._createFog(u);this._markersNeedUpdate=!0}_setTransitionParameters(u){return{now:o.exported.now(),transition:o.extend(u,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const u=this._order.filter(_=>this.isLayerDraped(this._layers[_])),p=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...u),this._drapedFirstOrder.push(...p)}_createTerrain(u,p){const _=this.terrain=new ct(u,p);this.stylesheet.terrain=u,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const E=this._setTransitionParameters({duration:0});_.updateTransitions(E)}_force3DLayerUpdate(){for(const u in this._layers){const p=this._layers[u];p.type==="fill-extrusion"&&this._updateLayer(p)}}_forceSymbolLayerUpdate(){for(const u in this._layers){const p=this._layers[u];p.type==="symbol"&&this._updateLayer(p)}}_validate(u,p,_,E,T={}){return(!T||T.validate!==!1)&&Sc(this,u.call(o.validateStyle,o.extend({key:p,style:this.serialize(),value:_,styleSpec:o.spec},E)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this._sourceCaches)this._sourceCaches[u].clearTiles(),this._sourceCaches[u].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){const p=this._getSourceCaches(u);for(const _ of p)_.clearTiles()}_reloadSource(u){const p=this._getSourceCaches(u);for(const _ of p)_.resume(),_.reload()}_reloadSources(){for(const u of this._getSources())u.reload&&u.reload()}_updateSources(u){for(const p in this._sourceCaches)this._sourceCaches[p].update(u)}_generateCollisionBoxes(){for(const u in this._sourceCaches){const p=this._sourceCaches[u];p.resume(),p.reload()}}_updatePlacement(u,p,_,E,T=!1){let L=!1,j=!1;const G={};for(const K of this._order){const X=this._layers[K];if(X.type!=="symbol")continue;if(!G[X.source]){const ce=this._getLayerSourceCache(X);if(!ce)continue;G[X.source]=ce.getRenderableIds(!0).map(pe=>ce.getTileByID(pe)).sort((pe,me)=>me.tileID.overscaledZ-pe.tileID.overscaledZ||(pe.tileID.isLessThan(me.tileID)?-1:1))}const te=this.crossTileSymbolIndex.addLayer(X,G[X.source],u.center.lng,u.projection);L=L||te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),T=T||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(T||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),u.zoom))&&(this.pauseablePlacement=new Cc(u,this._order,T,p,_,E,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,G),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),j=!0),L&&this.pauseablePlacement.placement.setStale()),j||L)for(const K of this._order){const X=this._layers[K];X.type==="symbol"&&this.placement.updateLayerOpacities(X,G[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const u in this._sourceCaches)this._sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,p,_){this.imageManager.getImages(p.icons,_),this._updateTilesForChangedImages();const E=T=>{T&&T.setDependencies(p.tileID.key,p.type,p.icons)};E(this._otherSourceCaches[p.source]),E(this._symbolSourceCaches[p.source])}getGlyphs(u,p,_){this.glyphManager.getGlyphs(p.stacks,_)}getResource(u,p,_){return o.makeRequest(p,_)}_getSourceCache(u){return this._otherSourceCaches[u]}_getLayerSourceCache(u){return u.type==="symbol"?this._symbolSourceCaches[u.source]:this._otherSourceCaches[u.source]}_getSourceCaches(u){const p=[];return this._otherSourceCaches[u]&&p.push(this._otherSourceCaches[u]),this._symbolSourceCaches[u]&&p.push(this._symbolSourceCaches[u]),p}_isSourceCacheLoaded(u){const p=this._getSourceCaches(u);return p.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${u}'`))),!1):p.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ta.getSourceType=function(y){return Qe[y]},ta.setSourceType=function(y,u){Qe[y]=u},ta.registerForPluginStateChange=o.registerForPluginStateChange;var Tc=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Py="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Dy=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,rh=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ry=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let xf={},bf={};const pu=[];wl(Tc,pu),wl(Dy,pu),wl(rh,pu),wl(Ry,pu),xf=sr("",Dy),bf=sr(Ry,rh);const Ly=sr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),ih=Tc,oh=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var wf={background:sr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:sr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:sr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:sr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:sr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:sr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:sr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:sr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:sr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:sr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:sr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:sr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:sr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:sr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:sr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:sr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:sr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:sr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:sr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:sr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:sr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:sr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:sr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Py),skyboxGradient:sr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Py),skyboxCapture:sr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:sr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:sr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function wl(y,u){const p=y.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of p)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const E=_.split(" ");for(const T of E)u.includes(T)||u.push(T)}}function sr(y,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=u.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),E={},T=[...pu];return wl(y,T),wl(u,T),{fragmentSource:y=y.replace(p,(L,j,G,K,X)=>(E[X]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${G} ${K} ${X};
#else
uniform ${G} ${K} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${G} ${K} ${X} = u_${X};
#endif
`)),vertexSource:u=u.replace(p,(L,j,G,K,X)=>{const te=K==="float"?"vec2":"vec4",ce=X.match(/color/)?"color":te;return E[X]?j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${G} ${te} a_${X};
varying ${G} ${K} ${X};
#else
uniform ${G} ${K} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${G} ${K} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${G} ${K} ${X} = u_${X};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${G} ${te} a_${X};
#else
uniform ${G} ${K} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${G} ${K} ${X} = a_${X};
#else
    ${G} ${K} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${G} ${K} ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${G} ${K} ${X} = u_${X};
#endif
`}),staticAttributes:_,usedDefines:T}}class kc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(u,p,_,E,T,L,j){this.context=u;let G=this.boundPaintVertexBuffers.length!==E.length;for(let X=0;!G&&X<E.length;X++)this.boundPaintVertexBuffers[X]!==E[X]&&(G=!0);let K=this.boundDynamicVertexBuffers.length!==j.length;for(let X=0;!K&&X<j.length;X++)this.boundDynamicVertexBuffers[X]!==j[X]&&(K=!0);if(!u.extVertexArrayObject||!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==_||G||K||this.boundIndexBuffer!==T||this.boundVertexOffset!==L)this.freshBind(p,_,E,T,L,j);else{u.bindVertexArrayOES.set(this.vao);for(const X of j)X&&X.bind();T&&T.dynamicDraw&&T.bind()}}freshBind(u,p,_,E,T,L){let j;const G=u.numAttributes,K=this.context,X=K.gl;if(K.extVertexArrayObject)this.vao&&this.destroy(),this.vao=K.extVertexArrayObject.createVertexArrayOES(),K.bindVertexArrayOES.set(this.vao),j=0,this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=E,this.boundVertexOffset=T,this.boundDynamicVertexBuffers=L;else{j=K.currentNumAttributes||0;for(let te=G;te<j;te++)X.disableVertexAttribArray(te)}p.enableAttributes(X,u),p.bind(),p.setVertexAttribPointers(X,u,T);for(const te of _)te.enableAttributes(X,u),te.bind(),te.setVertexAttribPointers(X,u,T);for(const te of L)te&&(te.enableAttributes(X,u),te.bind(),te.setVertexAttribPointers(X,u,T));E&&E.bind(),K.currentNumAttributes=G}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ef(y,u){const p=Math.pow(2,u.canonical.z),_=u.canonical.y;return[new o.MercatorCoordinate(0,_/p).toLngLat().lat,new o.MercatorCoordinate(0,(_+1)/p).toLngLat().lat]}function Ac(y,u,p,_,E,T,L){const j=y.context,G=j.gl,K=p.fbo;if(!K)return;y.prepareDrawTile();const X=y.useProgram("hillshade");j.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,K.colorAttachment.get());const te=((ge,ve,le,Ae)=>{const Te=le.paint.get("hillshade-shadow-color"),Re=le.paint.get("hillshade-highlight-color"),He=le.paint.get("hillshade-accent-color");let je=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(je-=ge.transform.angle);const Ge=!ge.options.moving;return{u_matrix:Ae||ge.transform.calculateProjMatrix(ve.tileID.toUnwrapped(),Ge),u_image:0,u_latrange:Ef(0,ve.tileID),u_light:[le.paint.get("hillshade-exaggeration"),je],u_shadow:Te,u_highlight:Re,u_accent:He}})(y,p,_,y.terrain?u.projMatrix:null);y.prepareDrawProgram(j,X,u.toUnwrapped());const{tileBoundsBuffer:ce,tileBoundsIndexBuffer:pe,tileBoundsSegments:me}=y.getTileBoundsBuffers(p);X.draw(j,G.TRIANGLES,E,T,L,o.CullFaceMode.disabled,te,_.id,ce,pe,me)}function Mc(y,u,p){if(!u.needsDEMTextureUpload)return;const _=y.context,E=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||y.getTileTexture(p.stride);const T=p.getPixels();u.demTexture?u.demTexture.update(T,{premultiply:!1}):u.demTexture=new o.Texture(_,T,E.RGBA,{premultiply:!1}),u.needsDEMTextureUpload=!1}function ah(y,u,p,_,E,T){const L=y.context,j=L.gl;if(!u.dem)return;const G=u.dem;if(L.activeTexture.set(j.TEXTURE1),Mc(y,u,G),!u.demTexture)return;u.demTexture.bind(j.NEAREST,j.CLAMP_TO_EDGE);const K=G.dim;L.activeTexture.set(j.TEXTURE0);let X=u.fbo;if(!X){const me=new o.Texture(L,{width:K,height:K,data:null},j.RGBA);me.bind(j.LINEAR,j.CLAMP_TO_EDGE),X=u.fbo=L.createFramebuffer(K,K,!0),X.colorAttachment.set(me.texture)}L.bindFramebuffer.set(X.framebuffer),L.viewport.set([0,0,K,K]);const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ce,tileBoundsSegments:pe}=y.getMercatorTileBoundsBuffers();y.useProgram("hillshadePrepare").draw(L,j.TRIANGLES,_,E,T,o.CullFaceMode.disabled,((me,ge)=>{const ve=ge.stride,le=o.create();return o.ortho(le,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(le,le,[0,-o.EXTENT,0]),{u_matrix:le,u_image:1,u_dimension:[ve,ve],u_zoom:me.overscaledZ,u_unpack:ge.unpackVector}})(u.tileID,G),p.id,te,ce,pe),u.needsHillshadePrepare=!1}const sh=y=>({u_matrix:new o.UniformMatrix4f(y),u_image0:new o.Uniform1i(y),u_skirt_height:new o.Uniform1f(y)}),Cf=(y,u)=>({u_matrix:y,u_image0:0,u_skirt_height:u}),lh=(y,u,p,_,E,T,L,j,G,K,X,te,ce,pe,me)=>({u_proj_matrix:Float32Array.from(y),u_globe_matrix:u,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:p,u_zoom_transition:E,u_merc_center:T,u_image0:0,u_frustum_tl:L,u_frustum_tr:j,u_frustum_br:G,u_frustum_bl:K,u_globe_pos:X,u_globe_radius:te,u_viewport:ce,u_grid_matrix:me?Float32Array.from(me):new Float32Array(9),u_skirt_height:pe});function Sf(y,u){return y!=null&&u!=null&&!(!y.hasData()||!u.hasData())&&y.demTexture!=null&&u.demTexture!=null&&y.tileID.key!==u.tileID.key}const Us=new class{constructor(){this.operations={}}newMorphing(y,u,p,_,E){if(y in this.operations){const T=this.operations[y];T.to.tileID.key!==p.tileID.key&&(T.queued=p)}else this.operations[y]={startTime:_,phase:0,duration:E,from:u,to:p,queued:null}}getMorphValuesForProxy(y){if(!(y in this.operations))return null;const u=this.operations[y];return{from:u.from,to:u.to,phase:u.phase}}update(y){for(const u in this.operations){const p=this.operations[u];for(p.phase=(y-p.startTime)/p.duration;p.phase>=1||!this._validOp(p);)if(!this._nextOp(p,y)){delete this.operations[u];break}}}_nextOp(y,u){return!!y.queued&&(y.from=y.to,y.to=y.queued,y.queued=null,y.phase=0,y.startTime=u,!0)}_validOp(y){return y.from.hasData()&&y.to.hasData()}},El={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function uh(y){return 6*Math.pow(1.5,22-y)}function Tf(y,u){const p=1<<y.z;return!u&&(y.x===0||y.x===p-1)||y.y===0||y.y===p-1}const Qn=y=>({u_matrix:y});function Ic(y,u,p,_,E){if(E>0){const T=o.exported.now(),L=(T-y.timeAdded)/E,j=u?(T-u.timeAdded)/E:-1,G=p.getSource(),K=_.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),X=!u||Math.abs(u.tileID.overscaledZ-K)>Math.abs(y.tileID.overscaledZ-K),te=X&&y.refreshedUponExpiration?1:o.clamp(X?L:1-j,0,1);return y.refreshedUponExpiration&&L>=1&&(y.refreshedUponExpiration=!1),u?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}class Oy extends o.SourceCache{constructor(u){const p={type:"raster-dem",maxzoom:u.transform.maxZoom},_=new nn(pn(),null),E=Ke("mock-dem",p,_,u.style);super("mock-dem",E,!1),E.setEventedParent(this),this._sourceLoaded=!0}_loadTile(u,p){u.state="loaded",p(null)}}class zy extends o.SourceCache{constructor(u){const p=Ke("proxy",{type:"geojson",maxzoom:u.transform.maxZoom},new nn(pn(),null),u.style);super("proxy",p,!1),p.setEventedParent(this),this.map=this.getSource().map=u,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(u,p,_){if(u.freezeTileCoverage)return;this.transform=u;const E=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((T,L)=>{if(T[L.key]="",!this._tiles[L.key]){const j=new o.Tile(L,this._source.tileSize*L.overscaleFactor(),u.tileZoom);j.state="loaded",this._tiles[L.key]=j}return T},{});for(const T in this._tiles)T in E||(this.freeFBO(T),this._tiles[T].unloadVectorData(),delete this._tiles[T])}freeFBO(u){const p=this.proxyCachedFBO[u];if(p!==void 0){const _=Object.values(p);this.renderCachePool.push(..._),delete this.proxyCachedFBO[u]}}deallocRenderCache(){this.renderCache.forEach(u=>u.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class kf extends o.OverscaledTileID{constructor(u,p,_){super(u.overscaledZ,u.wrap,u.canonical.z,u.canonical.x,u.canonical.y),this.proxyTileKey=p,this.projMatrix=_}}class Af extends o.Elevation{constructor(u,p){super(),this.painter=u,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,E,T]=function(G){const K=new o.StructArrayLayout2i4,X=new o.StructArrayLayout3ui6,te=131;K.reserve(17161),X.reserve(33800);const ce=o.EXTENT/128,pe=o.EXTENT+ce/2,me=pe+ce;for(let ve=-ce;ve<me;ve+=ce)for(let le=-ce;le<me;le+=ce){const Ae=le<0||le>pe||ve<0||ve>pe?24575:0,Te=o.clamp(Math.round(le),0,o.EXTENT),Re=o.clamp(Math.round(ve),0,o.EXTENT);K.emplaceBack(Te+Ae,Re)}const ge=(ve,le)=>{const Ae=le*te+ve;X.emplaceBack(Ae+1,Ae,Ae+te),X.emplaceBack(Ae+te,Ae+te+1,Ae+1)};for(let ve=1;ve<129;ve++)for(let le=1;le<129;le++)ge(le,ve);return[0,129].forEach(ve=>{for(let le=0;le<130;le++)ge(le,ve),ge(ve,le)}),[K,X,32768]}(),L=u.context;this.gridBuffer=L.createVertexBuffer(_,o.posAttributes.members),this.gridIndexBuffer=L.createIndexBuffer(E),this.gridSegments=o.SegmentVector.simpleSegment(0,0,_.length,E.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,_.length,T),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new zy(p.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const j=L.gl;this._overlapStencilMode=new o.StencilMode({func:j.GEQUAL,mask:255},0,255,j.KEEP,j.KEEP,j.REPLACE),this._previousZoom=u.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=p,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Oy(p.map)}set style(u){u.on("data",this._onStyleDataEvent.bind(this)),u.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=u,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(u,p,_){if(u&&u.terrain){this._style!==u&&(this.style=u),this.enabled=!0;const E=u.terrain.properties;this.sourceCache=u.terrain.drapeRenderMode===0?this._mockSourceCache:u._getSourceCache(E.get("source")),this._exaggeration=E.get("exaggeration");const T=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const L=this.getScaledDemTileSize();this.sourceCache.update(p,L,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,T(),this._initializing=!0),T(),p.updateElevation(!0,_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(p),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(u){this._findCoveringTileCache[u]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const u=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||u.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${u.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${u.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(u){u.coord&&u.dataType==="source"?this._clearRenderCacheForTile(u.sourceCacheId,u.coord):u.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const u in this._style._sourceCaches)this._style._sourceCaches[u].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(u=>u.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const u=2*this.proxySourceCache.getSource().tileSize;return[u,u]}set useVertexMorphing(u){this._useVertexMorphing=u}updateTileBinding(u){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const p=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const E=this.proxyCoords=p.getIds().map(G=>{const K=p.getTileByID(G).tileID;return K.projMatrix=_.calculateProjMatrix(K.toUnwrapped()),K});(function(G,K){const X=K.transform.pointCoordinate(K.transform.getCameraPoint()),te=new o.pointGeometry(X.x,X.y);G.sort((ce,pe)=>{if(pe.overscaledZ-ce.overscaledZ)return pe.overscaledZ-ce.overscaledZ;const me=new o.pointGeometry(ce.canonical.x+(1<<ce.canonical.z)*ce.wrap,ce.canonical.y),ge=new o.pointGeometry(pe.canonical.x+(1<<pe.canonical.z)*pe.wrap,pe.canonical.y),ve=te.mult(1<<ce.canonical.z);return ve.x-=.5,ve.y-=.5,ve.distSqr(me)-ve.distSqr(ge)})})(E,this.painter),this._previousZoom=_.zoom;const T=this.proxyToSource||{};this.proxyToSource={},E.forEach(G=>{this.proxyToSource[G.key]={}}),this.terrainTileForTile={};const L=this._style._sourceCaches;for(const G in L){const K=L[G];if(!K.used||(K!==this.sourceCache&&this.resetTileLookupCache(K.id),this._setupProxiedCoordsForOrtho(K,u[G],T),K.usedForTerrain))continue;const X=u[G];K.getSource().reparseOverscaled&&this._assignTerrainTiles(X)}this.proxiedCoords[p.id]=E.map(G=>new kf(G,G.key,this.orthoMatrix)),this._assignTerrainTiles(E),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(T),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const j={};this._visibleDemTiles=[];for(const G of this.proxyCoords){const K=this.terrainTileForTile[G.key];if(!K)continue;const X=K.tileID.key;X in j||(this._visibleDemTiles.push(K),j[X]=X)}}_assignTerrainTiles(u){this._initializing||u.forEach(p=>{if(this.terrainTileForTile[p.key])return;const _=this._findTileCoveringTileID(p,this.sourceCache);_&&(this.terrainTileForTile[p.key]=_)})}_prepareDEMTextures(){const u=this.painter.context,p=u.gl;for(const _ in this.terrainTileForTile){const E=this.terrainTileForTile[_],T=E.dem;!T||E.demTexture&&!E.needsDEMTextureUpload||(u.activeTexture.set(p.TEXTURE1),Mc(this.painter,E,T))}}_prepareDemTileUniforms(u,p,_,E){if(!p||p.demTexture==null)return!1;const T=u.tileID.canonical,L=Math.pow(2,p.tileID.canonical.z-T.z),j=E||"";return _[`u_dem_tl${j}`]=[T.x*L%1,T.y*L%1],_[`u_dem_scale${j}`]=L,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const u=this.painter.context,p=u.gl;if(!this._emptyDepthBufferTexture){const _=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(u,_,p.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let u=0;const p=this._visibleDemTiles.reduce((_,E)=>{if(!E.dem)return _;const T=E.dem.tree.minimums[0];return T>0&&u++,_+T},0);return u?p/u:0}_updateEmptyDEMTexture(){const u=this.painter.context,p=u.gl;u.activeTexture.set(p.TEXTURE2);const _=this._getLoadedAreaMinimum(),E=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let T=this._emptyDEMTexture;return T?T.update(E,{premultiply:!1}):T=this._emptyDEMTexture=new o.Texture(u,E,p.RGBA,{premultiply:!1}),T}setupElevationDraw(u,p,_){const E=this.painter.context,T=E.gl,L=(j=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(j),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var j;L.u_dem_size=this.sourceCache.getSource().tileSize,L.u_exaggeration=this.exaggeration();let G=null,K=null,X=1;if(_&&_.morphing&&this._useVertexMorphing){const te=_.morphing.srcDemTile,ce=_.morphing.dstDemTile;X=_.morphing.phase,te&&ce&&(this._prepareDemTileUniforms(u,te,L,"_prev")&&(K=te),this._prepareDemTileUniforms(u,ce,L)&&(G=ce))}if(K&&G?(E.activeTexture.set(T.TEXTURE2),G.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE,T.NEAREST),E.activeTexture.set(T.TEXTURE4),K.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE,T.NEAREST),L.u_dem_lerp=X):(G=this.terrainTileForTile[u.tileID.key],E.activeTexture.set(T.TEXTURE2),(this._prepareDemTileUniforms(u,G,L)?G.demTexture:this.emptyDEMTexture).bind(T.NEAREST,T.CLAMP_TO_EDGE)),E.activeTexture.set(T.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),this._depthFBO&&(L.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE),L.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&G){const te=(1<<G.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;L.u_meter_to_dem=te}if(_&&_.labelPlaneMatrixInv&&(L.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),p.setTerrainUniformValues(E,L),this.painter.transform.projection.name==="globe"){const te=this.globeUniformValues(this.painter.transform,u.tileID.canonical,_&&_.useDenormalizedUpVectorScale);p.setGlobeUniformValues(E,te)}}globeUniformValues(u,p,_){const E=u.projection;return{u_tile_tl_up:E.upVector(p,0,0),u_tile_tr_up:E.upVector(p,o.EXTENT,0),u_tile_br_up:E.upVector(p,o.EXTENT,o.EXTENT),u_tile_bl_up:E.upVector(p,0,o.EXTENT),u_tile_up_scale:_?o.globeMetersToEcef(1):E.upVectorScale(p,u.center.lat,u.worldSize).metersToTile}}renderToBackBuffer(u){const p=this.painter,_=this.painter.context;u.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,p.width,p.height]),p.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(E,T,L,j,G){if(E.transform.projection.name==="globe")(function(K,X,te,ce,pe){const me=K.context,ge=me.gl;let ve,le;const Ae=K.options.showTerrainWireframe?2:0,Te=K.transform,Re=o.globeUseCustomAntiAliasing(K,me,Te),He=(Rt,st)=>{if(le===Rt)return;const Ye=[El[Rt],"PROJECTION_GLOBE_VIEW"];Re&&Ye.push("CUSTOM_ANTIALIASING"),st&&Ye.push(El[Ae]),ve=K.useProgram("globeRaster",null,Ye),le=Rt},je=K.colorModeForRenderPass(),Ge=new o.DepthMode(ge.LEQUAL,o.DepthMode.ReadWrite,K.depthRangeFor3D);Us.update(pe);const et=o.calculateGlobeMercatorMatrix(Te),ot=[o.mercatorXfromLng(Te.center.lng),o.mercatorYfromLat(Te.center.lat)],ut=Ae?[!1,!0]:[!1],Ut=K.globeSharedBuffers,nt=[Te.width*o.exported.devicePixelRatio,Te.height*o.exported.devicePixelRatio],Mt=Float32Array.from(Te.globeMatrix),yt={useDenormalizedUpVectorScale:!0};if(ut.forEach(Rt=>{const st=K.transform,Ye=uh(st.zoom)*X.exaggeration();le=-1;const dt=Rt?ge.LINES:ge.TRIANGLES;for(const Dt of ce){const Ot=te.getTile(Dt),un=o.StencilMode.disabled,Nn=X.prevTerrainTileForTile[Dt.key],on=X.terrainTileForTile[Dt.key];Sf(Nn,on)&&Us.newMorphing(Dt.key,Nn,on,pe,250),me.activeTexture.set(ge.TEXTURE0),Ot.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);const Qt=Us.getMorphValuesForProxy(Dt.key),hn=Qt?1:0;Qt&&o.extend$1(yt,{morphing:{srcDemTile:Qt.from,dstDemTile:Qt.to,phase:o.easeCubicInOut(Qt.phase)}});const Hn=o.tileCornersToBounds(Dt.canonical),gn=o.getLatitudinalLod(Hn.getCenter().lat),lr=o.getGridMatrix(Dt.canonical,Hn,gn,st.worldSize/st._pixelsPerMercatorPixel),fr=o.globeNormalizeECEF(o.globeTileBounds(Dt.canonical)),zr=lh(st.projMatrix,Mt,et,fr,o.globeToMercatorTransition(st.zoom),ot,st.frustumCorners.TL,st.frustumCorners.TR,st.frustumCorners.BR,st.frustumCorners.BL,st.globeCenterInViewSpace,st.globeRadius,nt,Ye,lr);if(He(hn,Rt),X.setupElevationDraw(Ot,ve,yt),K.prepareDrawProgram(me,ve,Dt.toUnwrapped()),Ut){const[Mr,wi,Do]=Rt?Ut.getWirefameBuffers(K.context,gn):Ut.getGridBuffers(gn,Ye!==0);ve.draw(me,dt,Ge,un,je,o.CullFaceMode.backCCW,zr,"globe_raster",Mr,wi,Do)}}}),Ut){const Rt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Re&&Rt.push("CUSTOM_ANTIALIASING"),ve=K.useProgram("globeRaster",null,Rt);for(const st of ce){const{x:Ye,y:dt,z:Dt}=st.canonical,Ot=dt===0,un=dt===(1<<Dt)-1,[Nn,on,Qt,hn]=Ut.getPoleBuffers(Dt);if(hn&&(Ot||un)){const Hn=te.getTile(st);me.activeTexture.set(ge.TEXTURE0),Hn.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);let gn=o.globePoleMatrixForTile(Dt,Ye,Te);const lr=o.globeNormalizeECEF(o.globeTileBounds(st.canonical)),fr=(zr,Mr)=>zr.draw(me,ge.TRIANGLES,Ge,o.StencilMode.disabled,je,o.CullFaceMode.disabled,lh(Te.projMatrix,gn,gn,lr,0,ot,Te.frustumCorners.TL,Te.frustumCorners.TR,Te.frustumCorners.BR,Te.frustumCorners.BL,Te.globeCenterInViewSpace,Te.globeRadius,nt,0),"globe_pole_raster",Mr,Qt,hn);X.setupElevationDraw(Hn,ve,yt),K.prepareDrawProgram(me,ve,st.toUnwrapped()),Ot&&fr(ve,Nn),un&&(gn=o.scale(o.create(),gn,[1,-1,1]),fr(ve,on))}}}})(E,T,L,j,G);else{const K=E.context,X=K.gl;let te,ce;const pe=E.options.showTerrainWireframe?2:0,me=(Te,Re)=>{if(ce===Te)return;const He=[El[Te]];Re&&He.push(El[pe]),te=E.useProgram("terrainRaster",null,He),ce=Te},ge=E.colorModeForRenderPass(),ve=new o.DepthMode(X.LEQUAL,o.DepthMode.ReadWrite,E.depthRangeFor3D);Us.update(G);const le=E.transform,Ae=uh(le.zoom)*T.exaggeration();(pe?[!1,!0]:[!1]).forEach(Te=>{ce=-1;const Re=Te?X.LINES:X.TRIANGLES,[He,je]=Te?T.getWirefameBuffer():[T.gridIndexBuffer,T.gridSegments];for(const Ge of j){const et=L.getTile(Ge),ot=o.StencilMode.disabled,ut=T.prevTerrainTileForTile[Ge.key],Ut=T.terrainTileForTile[Ge.key];Sf(ut,Ut)&&Us.newMorphing(Ge.key,ut,Ut,G,250),K.activeTexture.set(X.TEXTURE0),et.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const nt=Us.getMorphValuesForProxy(Ge.key),Mt=nt?1:0;let yt;nt&&(yt={morphing:{srcDemTile:nt.from,dstDemTile:nt.to,phase:o.easeCubicInOut(nt.phase)}});const Rt=Cf(Ge.projMatrix,Tf(Ge.canonical,le.renderWorldCopies)?Ae/10:Ae);me(Mt,Te),T.setupElevationDraw(et,te,yt),E.prepareDrawProgram(K,te,Ge.toUnwrapped()),te.draw(K,Re,ve,ot,ge,o.CullFaceMode.backCCW,Rt,"terrain_raster",T.gridBuffer,He,je)}})}}(p,this,this.proxySourceCache,u,this._updateTimestamp),this.renderingToTexture=!0,p.gpuTimingDeferredRenderEnd(),u.splice(0,u.length))}renderBatch(u){if(this._drapedRenderBatches.length===0)return u+1;this.renderingToTexture=!0;const p=this.painter,_=this.painter.context,E=this.proxySourceCache,T=this.proxiedCoords[E.id],L=this._drapedRenderBatches.shift(),j=[],G=p.style.order;let K=0;for(const X of T){const te=E.getTileByID(X.proxyTileKey),ce=E.proxyCachedFBO[X.key]?E.proxyCachedFBO[X.key][u]:void 0,pe=ce!==void 0?E.renderCache[ce]:this.pool[K++],me=ce!==void 0;if(te.texture=pe.tex,me&&!pe.dirty){j.push(te.tileID);continue}let ge;_.bindFramebuffer.set(pe.fb.framebuffer),this.renderedToTile=!1,pe.dirty&&(_.clear({color:o.Color.transparent,stencil:0}),pe.dirty=!1);for(let ve=L.start;ve<=L.end;++ve){const le=p.style._layers[G[ve]];if(le.isHidden(p.transform.zoom))continue;const Ae=p.style._getLayerSourceCache(le),Te=Ae?this.proxyToSource[X.key][Ae.id]:[X];if(!Te)continue;const Re=Te;_.viewport.set([0,0,pe.fb.width,pe.fb.height]),ge!==(Ae?Ae.id:null)&&(this._setupStencil(pe,Te,le,Ae),ge=Ae?Ae.id:null),p.renderLayer(p,Ae,le,Re)}this.renderedToTile?(pe.dirty=!0,j.push(te.tileID)):me||--K,K===5&&(K=0,this.renderToBackBuffer(j))}return this.renderToBackBuffer(j),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,p.width,p.height]),L.end+1}postRender(){}renderCacheEfficiency(u){const p=u.order.length;if(p===0)return{efficiency:100};let _,E=0,T=0,L=!1;for(let j=0;j<p;++j){const G=u._layers[u.order[j]];this._style.isLayerDraped(G)?(L&&++E,++T):L||(L=!0,_=G.id)}return T===0?{efficiency:100}:{efficiency:100*(1-E/T),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let u=0;return this._visibleDemTiles.filter(p=>p.dem).forEach(p=>{u=Math.min(u,p.dem.tree.minimums[0])}),u===0?u:(u-30)*this._exaggeration}raycast(u,p,_){if(!this._visibleDemTiles)return null;const E=this._visibleDemTiles.filter(T=>T.dem).map(T=>{const L=T.tileID,j=1<<L.overscaledZ,{x:G,y:K}=L.canonical,X=G/j,te=(G+1)/j,ce=K/j,pe=(K+1)/j;return{minx:X,miny:ce,maxx:te,maxy:pe,t:T.dem.tree.raycastRoot(X,ce,te,pe,u,p,_),tile:T}});E.sort((T,L)=>(T.t!==null?T.t:Number.MAX_VALUE)-(L.t!==null?L.t:Number.MAX_VALUE));for(const T of E){if(T.t==null)return null;const L=T.tile.dem.tree.raycast(T.minx,T.miny,T.maxx,T.maxy,u,p,_);if(L!=null)return L}return null}_createFBO(){const u=this.painter.context,p=u.gl,_=this.drapeBufferSize;u.activeTexture.set(p.TEXTURE0);const E=new o.Texture(u,{width:_[0],height:_[1],data:null},p.RGBA);E.bind(p.LINEAR,p.CLAMP_TO_EDGE);const T=u.createFramebuffer(_[0],_[1],!1);return T.colorAttachment.set(E.texture),T.depthAttachment=new Ni(u,T.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=u.createRenderbuffer(u.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,T.depthAttachment.set(this._sharedDepthStencil),u.clear({stencil:0})):T.depthAttachment.set(this._sharedDepthStencil),u.extTextureFilterAnisotropic&&!u.extTextureFilterAnisotropicForceOff&&p.texParameterf(p.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax),{fb:T,tex:E,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const u in this._style._sourceCaches)if(this._style._sourceCaches[u].hasTransition())return!0;return this._style.order.some(u=>{const p=this._style._layers[u],_=p.isHidden(this.painter.transform.zoom);return p.type==="custom"?!_&&p.shouldRedrape():!_&&p.hasTransition()})}_clearLineLayersFromRenderCache(){let u=!1;for(const _ of this._style._getSources())if(_ instanceof ne){u=!0;break}if(!u)return;const p={};for(let _=0;_<this._style.order.length;++_){const E=this._style._layers[this._style.order[_]],T=this._style._getLayerSourceCache(E);if(T&&!p[T.id]&&!E.isHidden(this.painter.transform.zoom)&&E.type==="line"&&E.widthExpression()instanceof o.ZoomDependentExpression){p[T.id]=!0;for(const L of this.proxyCoords){const j=this.proxyToSource[L.key][T.id];if(j)for(const G of j)this._clearRenderCacheForTile(T.id,G)}}}}_clearRasterLayersFromRenderCache(){let u=!1;for(const _ in this._style._sourceCaches)if(this._style._sourceCaches[_]._source instanceof se){u=!0;break}if(!u)return;const p={};for(let _=0;_<this._style.order.length;++_){const E=this._style._layers[this._style.order[_]],T=this._style._getLayerSourceCache(E);if(!T||p[T.id]||E.isHidden(this.painter.transform.zoom)||E.type!=="raster")continue;const L=E.paint.get("raster-fade-duration");for(const j of this.proxyCoords){const G=this.proxyToSource[j.key][T.id];if(G)for(const K of G){const X=Ic(T.getTile(K),T.findLoadedParent(K,0),T,this.painter.transform,L);(X.opacity!==1||X.mix!==0)&&this._clearRenderCacheForTile(T.id,K)}}}}_setupDrapedRenderBatches(){const u=this._style.order,p=u.length;if(p===0)return;const _=[];let E,T=0,L=this._style._layers[u[T]];for(;!this._style.isLayerDraped(L)&&L.isHidden(this.painter.transform.zoom)&&++T<p;)L=this._style._layers[u[T]];for(;T<p;++T){const j=this._style._layers[u[T]];j.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(j)?E===void 0&&(E=T):E!==void 0&&(_.push({start:E,end:T-1}),E=void 0))}E!==void 0&&_.push({start:E,end:T-1}),this._drapedRenderBatches=_}_setupRenderCache(u){const p=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,p.renderCache.length>p.renderCachePool.length){const L=Object.values(p.proxyCachedFBO);p.proxyCachedFBO={};for(let j=0;j<L.length;++j){const G=Object.values(L[j]);p.renderCachePool.push(...G)}}return}this._clearRasterLayersFromRenderCache();const _=this.proxyCoords,E=this._tilesDirty;for(let L=_.length-1;L>=0;L--){const j=_[L];if(p.getTileByID(j.key),p.proxyCachedFBO[j.key]!==void 0){const G=u[j.key],K=this.proxyToSource[j.key];let X=0;for(const te in K){const ce=K[te],pe=G[te];if(!pe||pe.length!==ce.length||ce.some((me,ge)=>me!==pe[ge]||E[te]&&E[te].hasOwnProperty(me.key))){X=-1;break}++X}for(const te in p.proxyCachedFBO[j.key])p.renderCache[p.proxyCachedFBO[j.key][te]].dirty=X<0||X!==Object.values(G).length}}const T=[...this._drapedRenderBatches];T.sort((L,j)=>j.end-j.start-(L.end-L.start));for(const L of T)for(const j of _){if(p.proxyCachedFBO[j.key])continue;let G=p.renderCachePool.pop();G===void 0&&p.renderCache.length<50&&(G=p.renderCache.length,p.renderCache.push(this._createFBO())),G!==void 0&&(p.proxyCachedFBO[j.key]={},p.proxyCachedFBO[j.key][L.start]=G,p.renderCache[G].dirty=!0)}this._tilesDirty={}}_setupStencil(u,p,_,E){if(!E||!this._sourceTilesOverlap[E.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const T=this.painter.context,L=T.gl;if(p.length<=1)return void(this._overlapStencilType=!1);let j;if(_.isTileClipped())j=p.length,this._overlapStencilMode.test={func:L.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(p[0].overscaledZ>p[p.length-1].overscaledZ))return void(this._overlapStencilType=!1);j=1,this._overlapStencilMode.test={func:L.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+j>255&&(T.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=j,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(p,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(u){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[u.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(u,p){const _=this.painter,E=this.painter.context,T=E.gl;_._tileClippingMaskIDs={},E.setColorMode(o.ColorMode.disabled),E.setDepthMode(o.DepthMode.disabled);const L=_.useProgram("clippingMask");for(const j of u){const G=_._tileClippingMaskIDs[j.key]=--p;L.draw(E,T.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:T.ALWAYS,mask:0},G,255,T.KEEP,T.KEEP,T.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Qn(j.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(u){const p=this.painter.transform;if(u.x<0||u.x>p.width||u.y<0||u.y>p.height)return null;const _=[u.x,u.y,1,1];o.transformMat4$1(_,_,p.pixelMatrixInverse),o.scale$1(_,_,1/_[3]),_[0]/=p.worldSize,_[1]/=p.worldSize;const E=p._camera.position,T=o.mercatorZfromAltitude(1,p.center.lat),L=[E[0],E[1],E[2]/T,0],j=o.subtract([],_.slice(0,3),L);o.normalize(j,j);const G=this.raycast(L,j,this._exaggeration);return G!==null&&G?(o.scaleAndAdd(L,L,j,G),L[3]=L[2],L[2]*=T,L):null}drawDepth(){const u=this.painter,p=u.context,_=this.proxySourceCache,E=Math.ceil(u.width),T=Math.ceil(u.height);if(!this._depthFBO||this._depthFBO.width===E&&this._depthFBO.height===T||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const L=p.gl,j=p.createFramebuffer(E,T,!0);p.activeTexture.set(L.TEXTURE0);const G=new o.Texture(p,{width:E,height:T,data:null},L.RGBA);G.bind(L.NEAREST,L.CLAMP_TO_EDGE),j.colorAttachment.set(G.texture);const K=p.createRenderbuffer(p.gl.DEPTH_COMPONENT16,E,T);j.depthAttachment.set(K),this._depthFBO=j,this._depthTexture=G}p.bindFramebuffer.set(this._depthFBO.framebuffer),p.viewport.set([0,0,E,T]),function(L,j,G,K){if(L.transform.projection.name==="globe")return;const X=L.context,te=X.gl;X.clear({depth:1});const ce=L.useProgram("terrainDepth"),pe=new o.DepthMode(te.LESS,o.DepthMode.ReadWrite,L.depthRangeFor3D);for(const me of K){const ge=G.getTile(me),ve=Cf(me.projMatrix,0);j.setupElevationDraw(ge,ce),ce.draw(X,te.TRIANGLES,pe,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,ve,"terrain_depth",j.gridBuffer,j.gridIndexBuffer,j.gridNoSkirtSegments)}}(u,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(u,p,_){if(u.getSource()instanceof We)return this._setupProxiedCoordsForImageSource(u,p,_);this._findCoveringTileCache[u.id]=this._findCoveringTileCache[u.id]||{};const E=this.proxiedCoords[u.id]=[],T=this.proxyCoords;for(let j=0;j<T.length;j++){const G=T[j],K=this._findTileCoveringTileID(G,u);if(K){const X=this._createProxiedId(G,K,_[G.key]&&_[G.key][u.id]);E.push(X),this.proxyToSource[G.key][u.id]=[X]}}let L=!1;for(let j=0;j<p.length;j++){const G=u.getTile(p[j]);if(!G||!G.hasData())continue;const K=this._findTileCoveringTileID(G.tileID,this.proxySourceCache);if(K&&K.tileID.canonical.z!==G.tileID.canonical.z){const X=this.proxyToSource[K.tileID.key][u.id],te=this._createProxiedId(K.tileID,G,_[K.tileID.key]&&_[K.tileID.key][u.id]);X?X.splice(X.length-1,0,te):this.proxyToSource[K.tileID.key][u.id]=[te],E.push(te),L=!0}}this._sourceTilesOverlap[u.id]=L}_setupProxiedCoordsForImageSource(u,p,_){if(!u.getSource().loaded())return;const E=this.proxiedCoords[u.id]=[],T=this.proxyCoords,L=u.getSource(),j=new o.pointGeometry(L.tileID.x,L.tileID.y)._div(1<<L.tileID.z),G=L.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((X,te)=>(X.min.x=Math.min(X.min.x,te.x-j.x),X.min.y=Math.min(X.min.y,te.y-j.y),X.max.x=Math.max(X.max.x,te.x-j.x),X.max.y=Math.max(X.max.y,te.y-j.y),X),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),K=(X,te)=>{const ce=X.wrap+X.canonical.x/(1<<X.canonical.z),pe=X.canonical.y/(1<<X.canonical.z),me=o.EXTENT/(1<<X.canonical.z),ge=te.wrap+te.canonical.x/(1<<te.canonical.z),ve=te.canonical.y/(1<<te.canonical.z);return ce+me<ge+G.min.x||ce>ge+G.max.x||pe+me<ve+G.min.y||pe>ve+G.max.y};for(let X=0;X<T.length;X++){const te=T[X];for(let ce=0;ce<p.length;ce++){const pe=u.getTile(p[ce]);if(!pe||!pe.hasData()||K(te,pe.tileID))continue;const me=this._createProxiedId(te,pe,_[te.key]&&_[te.key][u.id]),ge=this.proxyToSource[te.key][u.id];ge?ge.push(me):this.proxyToSource[te.key][u.id]=[me],E.push(me)}}}_createProxiedId(u,p,_){let E=this.orthoMatrix;if(_){const T=_.find(L=>L.key===p.tileID.key);if(T)return T}if(p.tileID.key!==u.key){const T=u.canonical.z-p.tileID.canonical.z;let L,j,G;E=o.create();const K=p.tileID.wrap-u.wrap<<u.overscaledZ;T>0?(L=o.EXTENT>>T,j=L*((p.tileID.canonical.x<<T)-u.canonical.x+K),G=L*((p.tileID.canonical.y<<T)-u.canonical.y)):(L=o.EXTENT<<-T,j=o.EXTENT*(p.tileID.canonical.x-(u.canonical.x+K<<-T)),G=o.EXTENT*(p.tileID.canonical.y-(u.canonical.y<<-T))),o.ortho(E,0,L,0,L,0,1),o.translate(E,E,[j,G,0])}return new kf(p.tileID,u.key,E)}_findTileCoveringTileID(u,p){let _=p.getTile(u);if(_&&_.hasData())return _;const E=this._findCoveringTileCache[p.id],T=E[u.key];if(_=T?p.getTileByID(T):null,_&&_.hasData()||T===null)return _;let L=_?_.tileID:u,j=L.overscaledZ;const G=p.getSource().minzoom,K=[];if(!T){const te=p.getSource().maxzoom;if(u.canonical.z>=te){const ce=u.canonical.z-te;p.getSource().reparseOverscaled?(j=Math.max(u.canonical.z+2,p.transform.tileZoom),L=new o.OverscaledTileID(j,u.wrap,te,u.canonical.x>>ce,u.canonical.y>>ce)):ce!==0&&(j=te,L=new o.OverscaledTileID(j,u.wrap,te,u.canonical.x>>ce,u.canonical.y>>ce))}L.key!==u.key&&(K.push(L.key),_=p.getTile(L))}const X=te=>{K.forEach(ce=>{E[ce]=te}),K.length=0};for(j-=1;j>=G&&(!_||!_.hasData());j--){_&&X(_.tileID.key);const te=L.calculateScaledKey(j);if(_=p.getTileByID(te),_&&_.hasData())break;const ce=E[te];if(ce===null)break;ce===void 0?K.push(te):_=p.getTileByID(ce)}return X(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(u){return this.enabled?this._findTileCoveringTileID(u,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(u,p){let _=this._tilesDirty[u];_||(_=this._tilesDirty[u]={}),_[p.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const u=function(p){let _=0;const E=new o.StructArrayLayout2ui4,T=131;for(let L=1;L<129;L++){for(let j=1;j<129;j++)_=L*T+j,E.emplaceBack(_,_+1),E.emplaceBack(_,_+T),E.emplaceBack(_+1,_+T),L===128&&E.emplaceBack(_+T,_+T+1);E.emplaceBack(_+1,_+1+T)}return E}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(u),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,u.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Mf{static cacheKey(u,p,_,E){let T=`${p}${E?E.cacheKey:""}`;for(const L of _)u.usedDefines.includes(L)&&(T+=`/${L}`);return T}constructor(u,p,_,E,T,L){const j=u.gl;this.program=j.createProgram();const G=function(le){const Ae=[];for(let Te=0;Te<le.length;Te++){if(le[Te]===null)continue;const Re=le[Te].split(" ");Ae.push(Re.pop())}return Ae}(_.staticAttributes),K=E?E.getBinderAttributes():[],X=G.concat(K);let te=E?E.defines():[];te=te.concat(L.map(le=>`#define ${le}`));const ce=u.isWebGL2?`#version 300 es
`:"",pe=ce+te.concat(u.extStandardDerivatives&&ce.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(oh):oh,oh,ih,Ly.fragmentSource,bf.fragmentSource,_.fragmentSource).join(`
`),me=ce+te.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,ih,Ly.vertexSource,bf.vertexSource,xf.vertexSource,_.vertexSource).join(`
`),ge=j.createShader(j.FRAGMENT_SHADER);if(j.isContextLost())return void(this.failedToCreate=!0);j.shaderSource(ge,pe),j.compileShader(ge),j.attachShader(this.program,ge);const ve=j.createShader(j.VERTEX_SHADER);if(j.isContextLost())this.failedToCreate=!0;else{j.shaderSource(ve,me),j.compileShader(ve),j.attachShader(this.program,ve),this.attributes={},this.numAttributes=X.length;for(let le=0;le<this.numAttributes;le++)X[le]&&(j.bindAttribLocation(this.program,le,X[le]),this.attributes[X[le]]=le);j.linkProgram(this.program),j.deleteShader(ve),j.deleteShader(ge),this.fixedUniforms=T(u),this.binderUniforms=E?E.getUniforms(u):[],L.includes("TERRAIN")&&(this.terrainUniforms=(le=>({u_dem:new o.Uniform1i(le),u_dem_prev:new o.Uniform1i(le),u_dem_unpack:new o.Uniform4f(le),u_dem_tl:new o.Uniform2f(le),u_dem_scale:new o.Uniform1f(le),u_dem_tl_prev:new o.Uniform2f(le),u_dem_scale_prev:new o.Uniform1f(le),u_dem_size:new o.Uniform1f(le),u_dem_lerp:new o.Uniform1f(le),u_exaggeration:new o.Uniform1f(le),u_depth:new o.Uniform1i(le),u_depth_size_inv:new o.Uniform2f(le),u_meter_to_dem:new o.Uniform1f(le),u_label_plane_matrix_inv:new o.UniformMatrix4f(le)}))(u)),L.includes("GLOBE")&&(this.globeUniforms=(le=>({u_tile_tl_up:new o.Uniform3f(le),u_tile_tr_up:new o.Uniform3f(le),u_tile_br_up:new o.Uniform3f(le),u_tile_bl_up:new o.Uniform3f(le),u_tile_up_scale:new o.Uniform1f(le)}))(u)),L.includes("FOG")&&(this.fogUniforms=(le=>({u_fog_matrix:new o.UniformMatrix4f(le),u_fog_range:new o.Uniform2f(le),u_fog_color:new o.Uniform4f(le),u_fog_horizon_blend:new o.Uniform1f(le),u_fog_temporal_offset:new o.Uniform1f(le),u_frustum_tl:new o.Uniform3f(le),u_frustum_tr:new o.Uniform3f(le),u_frustum_br:new o.Uniform3f(le),u_frustum_bl:new o.Uniform3f(le),u_globe_pos:new o.Uniform3f(le),u_globe_radius:new o.Uniform1f(le),u_globe_transition:new o.Uniform1f(le),u_is_globe:new o.Uniform1i(le),u_viewport:new o.Uniform2f(le)}))(u))}}setTerrainUniformValues(u,p){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const E in p)_[E]&&_[E].set(this.program,E,p[E])}}setGlobeUniformValues(u,p){if(!this.globeUniforms)return;const _=this.globeUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const E in p)_[E]&&_[E].set(this.program,E,p[E])}}setFogUniformValues(u,p){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){u.program.set(this.program);for(const E in p)_[E].set(this.program,E,p[E])}}draw(u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge){const ve=u.gl;if(this.failedToCreate)return;u.program.set(this.program),u.setDepthMode(_),u.setStencilMode(E),u.setColorMode(T),u.setCullFace(L);for(const Ae of Object.keys(this.fixedUniforms))this.fixedUniforms[Ae].set(this.program,Ae,j[Ae]);me&&me.setUniforms(this.program,u,this.binderUniforms,ce,{zoom:pe});const le={[ve.LINES]:2,[ve.TRIANGLES]:3,[ve.LINE_STRIP]:1}[p];for(const Ae of te.get()){const Te=Ae.vaos||(Ae.vaos={});(Te[G]||(Te[G]=new kc)).bind(u,this,K,me?me.getPaintVertexBuffers():[],X,Ae.vertexOffset,ge||[]),ve.drawElements(p,Ae.primitiveLength*le,ve.UNSIGNED_SHORT,Ae.primitiveOffset*le*2)}}}function By(y,u){const p=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,y.transform.tileZoom)/p,E=_*(u.tileID.canonical.x+u.tileID.wrap*p),T=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_tile_units_to_pixels:1/$t(u,1,y.transform.tileZoom),u_pixel_coord_upper:[E>>16,T>>16],u_pixel_coord_lower:[65535&E,65535&T]}}const $1=o.create(),ch=(y,u,p,_,E,T,L,j,G,K,X)=>{const te=u.style.light,ce=te.properties.get("position"),pe=[ce.x,ce.y,ce.z],me=o.create$1();te.properties.get("anchor")==="viewport"&&(o.fromRotation(me,-u.transform.angle),o.transformMat3(pe,pe,me));const ge=te.properties.get("color"),ve=u.transform,le={u_matrix:y,u_lightpos:pe,u_lightintensity:te.properties.get("intensity"),u_lightcolor:[ge.r,ge.g,ge.b],u_vertical_gradient:+p,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:$1,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:E,u_edge_radius:T};return ve.projection.name==="globe"&&(le.u_tile_id=[L.canonical.x,L.canonical.y,1<<L.canonical.z],le.u_zoom_transition=G,le.u_inv_rot_matrix=X,le.u_merc_center=K,le.u_up_dir=ve.projection.upVector(new o.CanonicalTileID(0,0,0),K[0]*o.EXTENT,K[1]*o.EXTENT),le.u_height_lift=j),le},If=(y,u,p,_,E,T,L,j,G,K,X,te)=>{const ce=ch(y,u,p,_,E,T,L,G,K,X,te),pe={u_height_factor:-Math.pow(2,L.overscaledZ)/j.tileSize/8};return o.extend(ce,By(u,j),pe)},dh=y=>({u_matrix:y}),hh=(y,u,p)=>o.extend(dh(y),By(u,p)),Fy=(y,u)=>({u_matrix:y,u_world:u}),Ny=(y,u,p,_)=>o.extend(hh(y,u,p),{u_world:_}),U1=o.create(),Pc=(y,u,p,_,E,T)=>{const L=y.transform,j=L.projection.name==="globe";let G;if(T.paint.get("circle-pitch-alignment")==="map")if(j){const X=o.globePixelsToTileUnits(L.zoom,u.canonical)*L._pixelsPerMercatorPixel;G=Float32Array.from([X,0,0,X])}else G=L.calculatePixelsToTileUnitsMatrix(p);else G=new Float32Array([L.pixelsToGLUnits[0],0,0,L.pixelsToGLUnits[1]]);const K={u_camera_to_center_distance:L.cameraToCenterDistance,u_matrix:y.translatePosMatrix(u.projMatrix,p,T.paint.get("circle-translate"),T.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:G,u_inv_rot_matrix:U1,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(j){K.u_inv_rot_matrix=_,K.u_merc_center=E,K.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],K.u_zoom_transition=o.globeToMercatorTransition(L.zoom);const X=E[0]*o.EXTENT,te=E[1]*o.EXTENT;K.u_up_dir=L.projection.upVector(new o.CanonicalTileID(0,0,0),X,te)}return K},Dc=y=>{const u=[];return y.paint.get("circle-pitch-alignment")==="map"&&u.push("PITCH_WITH_MAP"),y.paint.get("circle-pitch-scale")==="map"&&u.push("SCALE_WITH_MAP"),u},$y=(y,u,p,_)=>{const E=o.EXTENT/p.tileSize;return{u_matrix:y,u_camera_to_center_distance:u.getCameraToCenterDistance(_),u_extrude_scale:[u.pixelsToGLUnits[0]/E,u.pixelsToGLUnits[1]/E]}},Rc=(y,u,p=1)=>({u_matrix:y,u_color:u,u_overlay:0,u_overlay_scale:p}),Pf=o.create(),Ua=(y,u,p,_,E,T,L)=>{const j=y.transform,G=j.projection.name==="globe",K=G?o.globePixelsToTileUnits(j.zoom,u.canonical)*j._pixelsPerMercatorPixel:$t(p,1,T),X={u_matrix:u.projMatrix,u_extrude_scale:K,u_intensity:L,u_inv_rot_matrix:Pf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(G){X.u_inv_rot_matrix=_,X.u_merc_center=E,X.u_tile_id=[u.canonical.x,u.canonical.y,1<<u.canonical.z],X.u_zoom_transition=o.globeToMercatorTransition(j.zoom);const te=E[0]*o.EXTENT,ce=E[1]*o.EXTENT;X.u_up_dir=j.projection.upVector(new o.CanonicalTileID(0,0,0),te,ce)}return X},Df=(y,u,p,_,E,T,L)=>{const j=y.transform,G=j.calculatePixelsToTileUnitsMatrix(u);return{u_matrix:Rf(y,u,p,_),u_pixels_to_tile_units:G,u_device_pixel_ratio:T,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:E,u_texsize:fh(p)?u.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ph(u,y.transform),u_alpha_discard_threshold:0,u_trim_offset:L}},Uy=(y,u,p,_,E)=>{const T=y.transform;return{u_matrix:Rf(y,u,p,_),u_texsize:u.imageAtlasTexture.size,u_pixels_to_tile_units:T.calculatePixelsToTileUnitsMatrix(u),u_device_pixel_ratio:E,u_image:0,u_tile_units_to_pixels:ph(u,T),u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ph(y,u){return 1/$t(y,1,u.tileZoom)}function Rf(y,u,p,_){return y.translatePosMatrix(_||u.tileID.projMatrix,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}function fh(y){const u=y.paint.get("line-dasharray").value;return u.value||u.kind!=="constant"}const j1=(y,u,p,_,E,T)=>{return{u_matrix:y,u_tl_parent:u,u_scale_parent:p,u_fade_t:_.mix,u_opacity:_.opacity*E.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:E.paint.get("raster-brightness-min"),u_brightness_high:E.paint.get("raster-brightness-max"),u_saturation_factor:(j=E.paint.get("raster-saturation"),j>0?1-1/(1.001-j):-j),u_contrast_factor:(L=E.paint.get("raster-contrast"),L>0?1/(1-L):1+L),u_spin_weights:Lf(E.paint.get("raster-hue-rotate")),u_perspective_transform:T};var L,j};function Lf(y){y*=Math.PI/180;const u=Math.sin(y),p=Math.cos(y);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const jy=o.create(),Lc=(y,u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge)=>{const ve=E.transform,le={u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:ve.cameraToCenterDistance,u_rotate_symbol:+p,u_aspect_ratio:ve.width/ve.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:L,u_coord_matrix:j,u_is_text:+G,u_pitch_with_map:+_,u_texsize:K,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:jy,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:jy,u_up_vector:[0,-1,0]};return ge.name==="globe"&&(le.u_tile_id=[X.canonical.x,X.canonical.y,1<<X.canonical.z],le.u_zoom_transition=te,le.u_inv_rot_matrix=pe,le.u_merc_center=ce,le.u_camera_forward=ve._camera.forward(),le.u_ecef_origin=o.globeECEFOrigin(ve.globeMatrix,X.toUnwrapped()),le.u_tile_matrix=Float32Array.from(ve.globeMatrix),le.u_up_vector=me),le},Vy=(y,u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge,ve)=>o.extend(Lc(y,u,p,_,E,T,L,j,G,K,te,ce,pe,me,ge,ve),{u_gamma_scale:_?E.transform.cameraToCenterDistance*Math.cos(E.terrain?0:E.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+X}),Of=(y,u,p,_,E,T,L,j,G,K,X,te,ce,pe,me,ge)=>o.extend(Vy(y,u,p,_,E,T,L,j,!0,G,!0,X,te,ce,pe,me,ge),{u_texsize_icon:K,u_texture_icon:1}),V1=(y,u,p)=>({u_matrix:y,u_opacity:u,u_color:p}),zf=(y,u,p,_,E)=>o.extend(function(T,L,j){const G=L.imageManager.getPattern(T.toString()),{width:K,height:X}=L.imageManager.getPixelSize(),te=Math.pow(2,j.tileID.overscaledZ),ce=j.tileSize*Math.pow(2,L.transform.tileZoom)/te,pe=ce*(j.tileID.canonical.x+j.tileID.wrap*te),me=ce*j.tileID.canonical.y;return{u_image:0,u_pattern_tl:G.tl,u_pattern_br:G.br,u_texsize:[K,X],u_pattern_size:G.displaySize,u_tile_units_to_pixels:1/$t(j,1,L.transform.tileZoom),u_pixel_coord_upper:[pe>>16,me>>16],u_pixel_coord_lower:[65535&pe,65535&me]}}(_,p,E),{u_matrix:y,u_opacity:u}),H1={fillExtrusion:y=>({u_matrix:new o.UniformMatrix4f(y),u_lightpos:new o.Uniform3f(y),u_lightintensity:new o.Uniform1f(y),u_lightcolor:new o.Uniform3f(y),u_vertical_gradient:new o.Uniform1f(y),u_opacity:new o.Uniform1f(y),u_edge_radius:new o.Uniform1f(y),u_ao:new o.Uniform2f(y),u_tile_id:new o.Uniform3f(y),u_zoom_transition:new o.Uniform1f(y),u_inv_rot_matrix:new o.UniformMatrix4f(y),u_merc_center:new o.Uniform2f(y),u_up_dir:new o.Uniform3f(y),u_height_lift:new o.Uniform1f(y)}),fillExtrusionPattern:y=>({u_matrix:new o.UniformMatrix4f(y),u_lightpos:new o.Uniform3f(y),u_lightintensity:new o.Uniform1f(y),u_lightcolor:new o.Uniform3f(y),u_vertical_gradient:new o.Uniform1f(y),u_height_factor:new o.Uniform1f(y),u_edge_radius:new o.Uniform1f(y),u_ao:new o.Uniform2f(y),u_tile_id:new o.Uniform3f(y),u_zoom_transition:new o.Uniform1f(y),u_inv_rot_matrix:new o.UniformMatrix4f(y),u_merc_center:new o.Uniform2f(y),u_up_dir:new o.Uniform3f(y),u_height_lift:new o.Uniform1f(y),u_image:new o.Uniform1i(y),u_texsize:new o.Uniform2f(y),u_pixel_coord_upper:new o.Uniform2f(y),u_pixel_coord_lower:new o.Uniform2f(y),u_tile_units_to_pixels:new o.Uniform1f(y),u_opacity:new o.Uniform1f(y)}),fill:y=>({u_matrix:new o.UniformMatrix4f(y)}),fillPattern:y=>({u_matrix:new o.UniformMatrix4f(y),u_image:new o.Uniform1i(y),u_texsize:new o.Uniform2f(y),u_pixel_coord_upper:new o.Uniform2f(y),u_pixel_coord_lower:new o.Uniform2f(y),u_tile_units_to_pixels:new o.Uniform1f(y)}),fillOutline:y=>({u_matrix:new o.UniformMatrix4f(y),u_world:new o.Uniform2f(y)}),fillOutlinePattern:y=>({u_matrix:new o.UniformMatrix4f(y),u_world:new o.Uniform2f(y),u_image:new o.Uniform1i(y),u_texsize:new o.Uniform2f(y),u_pixel_coord_upper:new o.Uniform2f(y),u_pixel_coord_lower:new o.Uniform2f(y),u_tile_units_to_pixels:new o.Uniform1f(y)}),circle:y=>({u_camera_to_center_distance:new o.Uniform1f(y),u_extrude_scale:new o.UniformMatrix2f(y),u_device_pixel_ratio:new o.Uniform1f(y),u_matrix:new o.UniformMatrix4f(y),u_inv_rot_matrix:new o.UniformMatrix4f(y),u_merc_center:new o.Uniform2f(y),u_tile_id:new o.Uniform3f(y),u_zoom_transition:new o.Uniform1f(y),u_up_dir:new o.Uniform3f(y)}),collisionBox:y=>({u_matrix:new o.UniformMatrix4f(y),u_camera_to_center_distance:new o.Uniform1f(y),u_extrude_scale:new o.Uniform2f(y)}),collisionCircle:y=>({u_matrix:new o.UniformMatrix4f(y),u_inv_matrix:new o.UniformMatrix4f(y),u_camera_to_center_distance:new o.Uniform1f(y),u_viewport_size:new o.Uniform2f(y)}),debug:y=>({u_color:new o.UniformColor(y),u_matrix:new o.UniformMatrix4f(y),u_overlay:new o.Uniform1i(y),u_overlay_scale:new o.Uniform1f(y)}),clippingMask:y=>({u_matrix:new o.UniformMatrix4f(y)}),heatmap:y=>({u_extrude_scale:new o.Uniform1f(y),u_intensity:new o.Uniform1f(y),u_matrix:new o.UniformMatrix4f(y),u_inv_rot_matrix:new o.UniformMatrix4f(y),u_merc_center:new o.Uniform2f(y),u_tile_id:new o.Uniform3f(y),u_zoom_transition:new o.Uniform1f(y),u_up_dir:new o.Uniform3f(y)}),heatmapTexture:y=>({u_image:new o.Uniform1i(y),u_color_ramp:new o.Uniform1i(y),u_opacity:new o.Uniform1f(y)}),hillshade:y=>({u_matrix:new o.UniformMatrix4f(y),u_image:new o.Uniform1i(y),u_latrange:new o.Uniform2f(y),u_light:new o.Uniform2f(y),u_shadow:new o.UniformColor(y),u_highlight:new o.UniformColor(y),u_accent:new o.UniformColor(y)}),hillshadePrepare:y=>({u_matrix:new o.UniformMatrix4f(y),u_image:new o.Uniform1i(y),u_dimension:new o.Uniform2f(y),u_zoom:new o.Uniform1f(y),u_unpack:new o.Uniform4f(y)}),line:y=>({u_matrix:new o.UniformMatrix4f(y),u_pixels_to_tile_units:new o.UniformMatrix2f(y),u_device_pixel_ratio:new o.Uniform1f(y),u_units_to_pixels:new o.Uniform2f(y),u_dash_image:new o.Uniform1i(y),u_gradient_image:new o.Uniform1i(y),u_image_height:new o.Uniform1f(y),u_texsize:new o.Uniform2f(y),u_tile_units_to_pixels:new o.Uniform1f(y),u_alpha_discard_threshold:new o.Uniform1f(y),u_trim_offset:new o.Uniform2f(y)}),linePattern:y=>({u_matrix:new o.UniformMatrix4f(y),u_texsize:new o.Uniform2f(y),u_pixels_to_tile_units:new o.UniformMatrix2f(y),u_device_pixel_ratio:new o.Uniform1f(y),u_image:new o.Uniform1i(y),u_units_to_pixels:new o.Uniform2f(y),u_tile_units_to_pixels:new o.Uniform1f(y),u_alpha_discard_threshold:new o.Uniform1f(y)}),raster:y=>({u_matrix:new o.UniformMatrix4f(y),u_tl_parent:new o.Uniform2f(y),u_scale_parent:new o.Uniform1f(y),u_fade_t:new o.Uniform1f(y),u_opacity:new o.Uniform1f(y),u_image0:new o.Uniform1i(y),u_image1:new o.Uniform1i(y),u_brightness_low:new o.Uniform1f(y),u_brightness_high:new o.Uniform1f(y),u_saturation_factor:new o.Uniform1f(y),u_contrast_factor:new o.Uniform1f(y),u_spin_weights:new o.Uniform3f(y),u_perspective_transform:new o.Uniform2f(y)}),symbolIcon:y=>({u_is_size_zoom_constant:new o.Uniform1i(y),u_is_size_feature_constant:new o.Uniform1i(y),u_size_t:new o.Uniform1f(y),u_size:new o.Uniform1f(y),u_camera_to_center_distance:new o.Uniform1f(y),u_rotate_symbol:new o.Uniform1i(y),u_aspect_ratio:new o.Uniform1f(y),u_fade_change:new o.Uniform1f(y),u_matrix:new o.UniformMatrix4f(y),u_label_plane_matrix:new o.UniformMatrix4f(y),u_coord_matrix:new o.UniformMatrix4f(y),u_is_text:new o.Uniform1i(y),u_pitch_with_map:new o.Uniform1i(y),u_texsize:new o.Uniform2f(y),u_tile_id:new o.Uniform3f(y),u_zoom_transition:new o.Uniform1f(y),u_inv_rot_matrix:new o.UniformMatrix4f(y),u_merc_center:new o.Uniform2f(y),u_camera_forward:new o.Uniform3f(y),u_tile_matrix:new o.UniformMatrix4f(y),u_up_vector:new o.Uniform3f(y),u_ecef_origin:new o.Uniform3f(y),u_texture:new o.Uniform1i(y)}),symbolSDF:y=>({u_is_size_zoom_constant:new o.Uniform1i(y),u_is_size_feature_constant:new o.Uniform1i(y),u_size_t:new o.Uniform1f(y),u_size:new o.Uniform1f(y),u_camera_to_center_distance:new o.Uniform1f(y),u_rotate_symbol:new o.Uniform1i(y),u_aspect_ratio:new o.Uniform1f(y),u_fade_change:new o.Uniform1f(y),u_matrix:new o.UniformMatrix4f(y),u_label_plane_matrix:new o.UniformMatrix4f(y),u_coord_matrix:new o.UniformMatrix4f(y),u_is_text:new o.Uniform1i(y),u_pitch_with_map:new o.Uniform1i(y),u_texsize:new o.Uniform2f(y),u_texture:new o.Uniform1i(y),u_gamma_scale:new o.Uniform1f(y),u_device_pixel_ratio:new o.Uniform1f(y),u_tile_id:new o.Uniform3f(y),u_zoom_transition:new o.Uniform1f(y),u_inv_rot_matrix:new o.UniformMatrix4f(y),u_merc_center:new o.Uniform2f(y),u_camera_forward:new o.Uniform3f(y),u_tile_matrix:new o.UniformMatrix4f(y),u_up_vector:new o.Uniform3f(y),u_ecef_origin:new o.Uniform3f(y),u_is_halo:new o.Uniform1i(y)}),symbolTextAndIcon:y=>({u_is_size_zoom_constant:new o.Uniform1i(y),u_is_size_feature_constant:new o.Uniform1i(y),u_size_t:new o.Uniform1f(y),u_size:new o.Uniform1f(y),u_camera_to_center_distance:new o.Uniform1f(y),u_rotate_symbol:new o.Uniform1i(y),u_aspect_ratio:new o.Uniform1f(y),u_fade_change:new o.Uniform1f(y),u_matrix:new o.UniformMatrix4f(y),u_label_plane_matrix:new o.UniformMatrix4f(y),u_coord_matrix:new o.UniformMatrix4f(y),u_is_text:new o.Uniform1i(y),u_pitch_with_map:new o.Uniform1i(y),u_texsize:new o.Uniform2f(y),u_texsize_icon:new o.Uniform2f(y),u_texture:new o.Uniform1i(y),u_texture_icon:new o.Uniform1i(y),u_gamma_scale:new o.Uniform1f(y),u_device_pixel_ratio:new o.Uniform1f(y),u_is_halo:new o.Uniform1i(y)}),background:y=>({u_matrix:new o.UniformMatrix4f(y),u_opacity:new o.Uniform1f(y),u_color:new o.UniformColor(y)}),backgroundPattern:y=>({u_matrix:new o.UniformMatrix4f(y),u_opacity:new o.Uniform1f(y),u_image:new o.Uniform1i(y),u_pattern_tl:new o.Uniform2f(y),u_pattern_br:new o.Uniform2f(y),u_texsize:new o.Uniform2f(y),u_pattern_size:new o.Uniform2f(y),u_pixel_coord_upper:new o.Uniform2f(y),u_pixel_coord_lower:new o.Uniform2f(y),u_tile_units_to_pixels:new o.Uniform1f(y)}),terrainRaster:sh,terrainDepth:sh,skybox:y=>({u_matrix:new o.UniformMatrix4f(y),u_sun_direction:new o.Uniform3f(y),u_cubemap:new o.Uniform1i(y),u_opacity:new o.Uniform1f(y),u_temporal_offset:new o.Uniform1f(y)}),skyboxGradient:y=>({u_matrix:new o.UniformMatrix4f(y),u_color_ramp:new o.Uniform1i(y),u_center_direction:new o.Uniform3f(y),u_radius:new o.Uniform1f(y),u_opacity:new o.Uniform1f(y),u_temporal_offset:new o.Uniform1f(y)}),skyboxCapture:y=>({u_matrix_3f:new o.UniformMatrix3f(y),u_sun_direction:new o.Uniform3f(y),u_sun_intensity:new o.Uniform1f(y),u_color_tint_r:new o.Uniform4f(y),u_color_tint_m:new o.Uniform4f(y),u_luminance:new o.Uniform1f(y)}),globeRaster:y=>({u_proj_matrix:new o.UniformMatrix4f(y),u_globe_matrix:new o.UniformMatrix4f(y),u_normalize_matrix:new o.UniformMatrix4f(y),u_merc_matrix:new o.UniformMatrix4f(y),u_zoom_transition:new o.Uniform1f(y),u_merc_center:new o.Uniform2f(y),u_image0:new o.Uniform1i(y),u_grid_matrix:new o.UniformMatrix3f(y),u_skirt_height:new o.Uniform1f(y),u_frustum_tl:new o.Uniform3f(y),u_frustum_tr:new o.Uniform3f(y),u_frustum_br:new o.Uniform3f(y),u_frustum_bl:new o.Uniform3f(y),u_globe_pos:new o.Uniform3f(y),u_globe_radius:new o.Uniform1f(y),u_viewport:new o.Uniform2f(y)}),globeAtmosphere:y=>({u_frustum_tl:new o.Uniform3f(y),u_frustum_tr:new o.Uniform3f(y),u_frustum_br:new o.Uniform3f(y),u_frustum_bl:new o.Uniform3f(y),u_horizon:new o.Uniform1f(y),u_transition:new o.Uniform1f(y),u_fadeout_range:new o.Uniform1f(y),u_color:new o.Uniform4f(y),u_high_color:new o.Uniform4f(y),u_space_color:new o.Uniform4f(y),u_star_intensity:new o.Uniform1f(y),u_star_density:new o.Uniform1f(y),u_star_size:new o.Uniform1f(y),u_temporal_offset:new o.Uniform1f(y),u_horizon_angle:new o.Uniform1f(y),u_rotation_matrix:new o.UniformMatrix4f(y)})};let Cl;function Hy(y,u,p,_,E,T,L){const j=y.context,G=j.gl,K=y.transform,X=y.useProgram("collisionBox"),te=[];let ce=0,pe=0;for(let Re=0;Re<_.length;Re++){const He=_[Re],je=u.getTile(He),Ge=je.getBucket(p);if(!Ge)continue;const et=gf(He,Ge,K);let ot=et;E[0]===0&&E[1]===0||(ot=y.translatePosMatrix(et,je,E,T));const ut=L?Ge.textCollisionBox:Ge.iconCollisionBox,Ut=Ge.collisionCircleArray;if(Ut.length>0){const nt=o.create(),Mt=ot;o.mul(nt,Ge.placementInvProjMatrix,K.glCoordMatrix),o.mul(nt,nt,Ge.placementViewportMatrix),te.push({circleArray:Ut,circleOffset:pe,transform:Mt,invTransform:nt,projection:Ge.getProjection()}),ce+=Ut.length/4,pe=ce}ut&&(y.terrain&&y.terrain.setupElevationDraw(je,X),X.draw(j,G.LINES,o.DepthMode.disabled,o.StencilMode.disabled,y.colorModeForRenderPass(),o.CullFaceMode.disabled,$y(ot,K,je,Ge.getProjection()),p.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,null,K.zoom,null,[ut.collisionVertexBuffer,ut.collisionVertexBufferExt]))}if(!L||!te.length)return;const me=y.useProgram("collisionCircle"),ge=new o.StructArrayLayout2f1f2i16;ge.resize(4*ce),ge._trim();let ve=0;for(const Re of te)for(let He=0;He<Re.circleArray.length/4;He++){const je=4*He,Ge=Re.circleArray[je+0],et=Re.circleArray[je+1],ot=Re.circleArray[je+2],ut=Re.circleArray[je+3];ge.emplace(ve++,Ge,et,ot,ut,0),ge.emplace(ve++,Ge,et,ot,ut,1),ge.emplace(ve++,Ge,et,ot,ut,2),ge.emplace(ve++,Ge,et,ot,ut,3)}(!Cl||Cl.length<2*ce)&&(Cl=function(Re){const He=2*Re,je=new o.StructArrayLayout3ui6;je.resize(He),je._trim();for(let Ge=0;Ge<He;Ge++){const et=6*Ge;je.uint16[et+0]=4*Ge+0,je.uint16[et+1]=4*Ge+1,je.uint16[et+2]=4*Ge+2,je.uint16[et+3]=4*Ge+2,je.uint16[et+4]=4*Ge+3,je.uint16[et+5]=4*Ge+0}return je}(ce));const le=j.createIndexBuffer(Cl,!0),Ae=j.createVertexBuffer(ge,o.collisionCircleLayout.members,!0);for(const Re of te){const He={u_matrix:Re.transform,u_inv_matrix:Re.invTransform,u_camera_to_center_distance:(Te=K).getCameraToCenterDistance(Re.projection),u_viewport_size:[Te.width,Te.height]};me.draw(j,G.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,y.colorModeForRenderPass(),o.CullFaceMode.disabled,He,p.id,Ae,le,o.SegmentVector.simpleSegment(0,2*Re.circleOffset,Re.circleArray.length,Re.circleArray.length/2),null,K.zoom)}var Te;Ae.destroy(),le.destroy()}const Bf=o.create();function Wy({width:y,height:u,anchor:p,textOffset:_,textScale:E},T){const{horizontalAlign:L,verticalAlign:j}=o.getAnchorAlignment(p),G=-(L-.5)*y,K=-(j-.5)*u,X=o.evaluateVariableOffset(p,_);return new o.pointGeometry((G/E+X[0])*T,(K/E+X[1])*T)}function fu(y,u,p,_,E,T,L,j,G,K,X){const te=y.text.placedSymbolArray,ce=y.text.dynamicLayoutVertexArray,pe=y.icon.dynamicLayoutVertexArray,me={},ge=y.getProjection(),ve=Yd(j,ge,T),le=T.elevation,Ae=ge.upVectorScale(j.canonical,T.center.lat,T.worldSize).metersToTile;ce.clear();for(let Te=0;Te<te.length;Te++){const Re=te.get(Te),{tileAnchorX:He,tileAnchorY:je,numGlyphs:Ge}=Re,et=y.allowVerticalPlacement&&!Re.placedOrientation,ot=Re.hidden||!Re.crossTileID||et?null:_[Re.crossTileID];if(ot){let ut=0,Ut=0,nt=0;if(le){const un=le?le.getAtTileOffset(j,He,je):0,[Nn,on,Qt]=ge.upVector(j.canonical,He,je);ut=un*Nn*Ae,Ut=un*on*Ae,nt=un*Qt*Ae}let[Mt,yt,Rt,st]=Vt(Re.projectedAnchorX+ut,Re.projectedAnchorY+Ut,Re.projectedAnchorZ+nt,p?ve:L);const Ye=Xn(T.getCameraToCenterDistance(ge),st);let dt=E.evaluateSizeForFeature(y.textSizeData,K,Re)*Ye/o.ONE_EM;p&&(dt*=y.tilePixelRatio/G);const Dt=Wy(ot,dt);p?({x:Mt,y:yt,z:Rt}=ge.projectTilePoint(He+Dt.x,je+Dt.y,j.canonical),[Mt,yt,Rt]=Vt(Mt+ut,yt+Ut,Rt+nt,L)):(u&&Dt._rotate(-T.angle),Mt+=Dt.x,yt+=Dt.y,Rt=0);const Ot=y.allowVerticalPlacement&&Re.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let un=0;un<Ge;un++)o.addDynamicAttributes(ce,Mt,yt,Rt,Ot);X&&Re.associatedIconIndex>=0&&(me[Re.associatedIconIndex]={x:Mt,y:yt,z:Rt,angle:Ot})}else Or(Ge,ce)}if(X){pe.clear();const Te=y.icon.placedSymbolArray;for(let Re=0;Re<Te.length;Re++){const He=Te.get(Re),{numGlyphs:je}=He,Ge=me[Re];if(He.hidden||!Ge)Or(je,pe);else{const{x:et,y:ot,z:ut,angle:Ut}=Ge;for(let nt=0;nt<je;nt++)o.addDynamicAttributes(pe,et,ot,ut,Ut)}}y.icon.dynamicLayoutVertexBuffer.updateData(pe)}y.text.dynamicLayoutVertexBuffer.updateData(ce)}function W1(y,u,p){return p.iconsInText&&u?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Gy(y,u,p,_,E,T,L,j,G,K,X,te){const ce=y.context,pe=ce.gl,me=y.transform,ge=j==="map",ve=G==="map",le=ge&&p.layout.get("symbol-placement")!=="point",Ae=ge&&!ve&&!le,Te=p.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Re=!1;const He=y.depthModeForSublayer(0,o.DepthMode.ReadOnly),je=[o.mercatorXfromLng(me.center.lng),o.mercatorYfromLat(me.center.lat)],Ge=p.layout.get("text-variable-anchor"),et=me.projection.name==="globe",ot=[],ut=[0,-1,0];let Ut=ut;!et&&!me.mercatorFromTransition||ge||(Ut=function(nt){const Mt=nt._camera.getWorldToCamera(nt.worldSize,1),yt=o.multiply([],Mt,nt.globeMatrix);o.invert(yt,yt);const Rt=[0,0,0],st=[0,1,0,0];return o.transformMat4$1(st,st,yt),Rt[0]=st[0],Rt[1]=st[1],Rt[2]=st[2],o.normalize(Rt,Rt),Rt}(me));for(const nt of _){const Mt=u.getTile(nt),yt=Mt.getBucket(p);if(!yt||yt.projection.name==="mercator"&&et)continue;const Rt=E?yt.text:yt.icon;if(!Rt||yt.fullyClipped||!Rt.segments.get().length)continue;const st=Rt.programConfigurations.get(p.id),Ye=E||yt.sdfIcons,dt=E?yt.textSizeData:yt.iconSizeData,Dt=ve||me.pitch!==0,Ot=o.evaluateSizeForZoom(dt,me.zoom);let un,Nn,on,Qt,hn=[0,0],Hn=null;if(E){if(Nn=Mt.glyphAtlasTexture,on=pe.LINEAR,un=Mt.glyphAtlasTexture.size,yt.iconsInText){hn=Mt.imageAtlasTexture.size,Hn=Mt.imageAtlasTexture;const Go=dt.kind==="composite"||dt.kind==="camera";Qt=Dt||y.options.rotating||y.options.zooming||Go?pe.LINEAR:pe.NEAREST}}else{const Go=p.layout.get("icon-size").constantOr(0)!==1||yt.iconsNeedLinear;Nn=Mt.imageAtlasTexture,on=Ye||y.options.rotating||y.options.zooming||Go||Dt?pe.LINEAR:pe.NEAREST,un=Mt.imageAtlasTexture.size}const gn=yt.projection.name==="globe",lr=gn?Ut:ut,fr=gn?o.globeToMercatorTransition(me.zoom):0,zr=Yd(nt,yt.getProjection(),me),Mr=me.calculatePixelsToTileUnitsMatrix(Mt),wi=ou(zr,Mt.tileID.canonical,ve,ge,me,yt.getProjection(),Mr),Do=y.terrain&&ve&&le?o.invert(o.create(),wi):Bf,xa=au(zr,Mt.tileID.canonical,ve,ge,me,yt.getProjection(),Mr),ys=Ge&&yt.hasTextData(),Xr=p.layout.get("icon-text-fit")!=="none"&&ys&&yt.hasIconData();if(le){const Go=me.elevation,ra=Go?Go.getAtTileOffsetFunc(nt,me.center.lat,me.worldSize,yt.getProjection()):null,vs=ky(zr,Mt.tileID.canonical,ve,ge,me,yt.getProjection(),Mr);$a(yt,zr,y,E,vs,xa,ve,K,ra,nt)}const Ir=le||E&&Ge||Xr,nr=y.translatePosMatrix(zr,Mt,T,L),li=Ir?Bf:wi,so=y.translatePosMatrix(xa,Mt,T,L,!0),Hr=yt.getProjection().createInversionMatrix(me,nt.canonical),lo=[];y.terrainRenderModeElevated()&&ve&&lo.push("PITCH_WITH_MAP_TERRAIN"),gn&&lo.push("PROJECTION_GLOBE_VIEW"),Ir&&lo.push("PROJECTED_POS_ON_VIEWPORT");const uo=Ye&&p.paint.get(E?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Vs;Vs=Ye?yt.iconsInText?Of(dt.kind,Ot,Ae,ve,y,nr,li,so,un,hn,nt,fr,je,Hr,lr,yt.getProjection()):Vy(dt.kind,Ot,Ae,ve,y,nr,li,so,E,un,!0,nt,fr,je,Hr,lr,yt.getProjection()):Lc(dt.kind,Ot,Ae,ve,y,nr,li,so,E,un,nt,fr,je,Hr,lr,yt.getProjection());const Su={program:y.useProgram(W1(Ye,E,yt),st,lo),buffers:Rt,uniformValues:Vs,atlasTexture:Nn,atlasTextureIcon:Hn,atlasInterpolation:on,atlasInterpolationIcon:Qt,isSDF:Ye,hasHalo:uo,tile:Mt,labelPlaneMatrixInv:Do};if(Te&&yt.canOverlap){Re=!0;const Go=Rt.segments.get();for(const ra of Go)ot.push({segments:new o.SegmentVector([ra]),sortKey:ra.sortKey,state:Su})}else ot.push({segments:Rt.segments,sortKey:0,state:Su})}Re&&ot.sort((nt,Mt)=>nt.sortKey-Mt.sortKey);for(const nt of ot){const Mt=nt.state;if(y.terrain&&y.terrain.setupElevationDraw(Mt.tile,Mt.program,{useDepthForOcclusion:!et,labelPlaneMatrixInv:Mt.labelPlaneMatrixInv}),ce.activeTexture.set(pe.TEXTURE0),Mt.atlasTexture.bind(Mt.atlasInterpolation,pe.CLAMP_TO_EDGE),Mt.atlasTextureIcon&&(ce.activeTexture.set(pe.TEXTURE1),Mt.atlasTextureIcon&&Mt.atlasTextureIcon.bind(Mt.atlasInterpolationIcon,pe.CLAMP_TO_EDGE)),Mt.isSDF){const yt=Mt.uniformValues;Mt.hasHalo&&(yt.u_is_halo=1,qy(Mt.buffers,nt.segments,p,y,Mt.program,He,X,te,yt)),yt.u_is_halo=0}qy(Mt.buffers,nt.segments,p,y,Mt.program,He,X,te,Mt.uniformValues)}}function qy(y,u,p,_,E,T,L,j,G){const K=_.context,X=[y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer,y.globeExtVertexBuffer];E.draw(K,K.gl.TRIANGLES,T,L,j,o.CullFaceMode.disabled,G,p.id,y.layoutVertexBuffer,y.indexBuffer,u,p.paint,_.transform.zoom,y.programConfigurations.get(p.id),X)}function Zy(y,u,p,_,E,T,L){const j=y.context.gl,G=p.paint.get("fill-pattern"),K=G&&G.constantOr(1);let X,te,ce,pe,me;L?(te=K&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=j.LINES):(te=K?"fillPattern":"fill",X=j.TRIANGLES);for(const ge of _){const ve=u.getTile(ge);if(K&&!ve.patternsLoaded())continue;const le=ve.getBucket(p);if(!le)continue;y.prepareDrawTile();const Ae=le.programConfigurations.get(p.id),Te=y.useProgram(te,Ae);K&&(y.context.activeTexture.set(j.TEXTURE0),ve.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),Ae.updatePaintBuffers());const Re=G.constantOr(null);if(Re&&ve.imageAtlas){const je=ve.imageAtlas.patternPositions[Re.toString()];je&&Ae.setConstantPatternPositions(je)}const He=y.translatePosMatrix(ge.projMatrix,ve,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(L){pe=le.indexBuffer2,me=le.segments2;const je=y.terrain&&y.terrain.renderingToTexture?y.terrain.drapeBufferSize:[j.drawingBufferWidth,j.drawingBufferHeight];ce=te==="fillOutlinePattern"&&K?Ny(He,y,ve,je):Fy(He,je)}else pe=le.indexBuffer,me=le.segments,ce=K?hh(He,y,ve):dh(He);y.prepareDrawProgram(y.context,Te,ge.toUnwrapped()),Te.draw(y.context,X,E,y.stencilModeForClipping(ge),T,o.CullFaceMode.disabled,ce,p.id,le.layoutVertexBuffer,pe,me,p.paint,y.transform.zoom,Ae)}}function Ff(y,u,p,_,E,T,L){const j=y.context,G=j.gl,K=y.transform,X=p.paint.get("fill-extrusion-pattern"),te=X.constantOr(1),ce=p.paint.get("fill-extrusion-opacity"),pe=[p.paint.get("fill-extrusion-ambient-occlusion-intensity"),p.paint.get("fill-extrusion-ambient-occlusion-radius")],me=p.layout.get("fill-extrusion-edge-radius"),ge=K.projection.name==="globe"?o.fillExtrusionHeightLift():0,ve=K.projection.name==="globe",le=ve?o.globeToMercatorTransition(K.zoom):0,Ae=[o.mercatorXfromLng(K.center.lng),o.mercatorYfromLat(K.center.lat)],Te=[];ve&&Te.push("PROJECTION_GLOBE_VIEW"),pe[0]>0&&Te.push("FAUX_AO");for(const Re of _){const He=u.getTile(Re),je=He.getBucket(p);if(!je||je.projection.name!==K.projection.name)continue;const Ge=je.programConfigurations.get(p.id),et=y.useProgram(te?"fillExtrusionPattern":"fillExtrusion",Ge,Te);if(y.terrain){const Rt=y.terrain;if(y.style.terrainSetForDrapingOnly())Rt.setupElevationDraw(He,et,{useMeterToDem:!0});else{if(!je.enableTerrain)continue;if(Rt.setupElevationDraw(He,et,{useMeterToDem:!0}),G1(j,u,Re,je,p,Rt),!je.centroidVertexBuffer){const st=et.attributes.a_centroid_pos;st!==void 0&&G.vertexAttrib2f(st,0,0)}}}te&&(y.context.activeTexture.set(G.TEXTURE0),He.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),Ge.updatePaintBuffers());const ot=X.constantOr(null);if(ot&&He.imageAtlas){const Rt=He.imageAtlas.patternPositions[ot.toString()];Rt&&Ge.setConstantPatternPositions(Rt)}const ut=y.translatePosMatrix(Re.projMatrix,He,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),Ut=K.projection.createInversionMatrix(K,Re.canonical),nt=p.paint.get("fill-extrusion-vertical-gradient"),Mt=te?If(ut,y,nt,ce,pe,me,Re,He,ge,le,Ae,Ut):ch(ut,y,nt,ce,pe,me,Re,ge,le,Ae,Ut);y.prepareDrawProgram(j,et,Re.toUnwrapped());const yt=[];y.terrain&&yt.push(je.centroidVertexBuffer),ve&&yt.push(je.layoutVertexExtBuffer),et.draw(j,j.gl.TRIANGLES,E,T,L,o.CullFaceMode.backCCW,Mt,p.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,p.paint,y.transform.zoom,Ge,yt)}}function G1(y,u,p,_,E,T){const L=[le=>{let Ae=le.canonical.x-1,Te=le.wrap;return Ae<0&&(Ae=(1<<le.canonical.z)-1,Te--),new o.OverscaledTileID(le.overscaledZ,Te,le.canonical.z,Ae,le.canonical.y)},le=>{let Ae=le.canonical.x+1,Te=le.wrap;return Ae===1<<le.canonical.z&&(Ae=0,Te++),new o.OverscaledTileID(le.overscaledZ,Te,le.canonical.z,Ae,le.canonical.y)},le=>new o.OverscaledTileID(le.overscaledZ,le.wrap,le.canonical.z,le.canonical.x,(le.canonical.y===0?1<<le.canonical.z:le.canonical.y)-1),le=>new o.OverscaledTileID(le.overscaledZ,le.wrap,le.canonical.z,le.canonical.x,le.canonical.y===(1<<le.canonical.z)-1?0:le.canonical.y+1)],j=le=>{const Ae=u.getSource().minzoom,Te=He=>{const je=u.getTileByID(He);if(je&&je.hasData())return je.getBucket(E)},Re=[0,-1,1];for(const He of Re){if(le.overscaledZ+He<Ae)continue;const je=Te(le.calculateScaledKey(le.overscaledZ+He));if(je)return je}},G=[0,0,0],K=(le,Ae)=>(G[0]=Math.min(le.min.y,Ae.min.y),G[1]=Math.max(le.max.y,Ae.max.y),G[2]=o.EXTENT-Ae.min.x>le.max.x?Ae.min.x-o.EXTENT:le.max.x,G),X=(le,Ae)=>(G[0]=Math.min(le.min.x,Ae.min.x),G[1]=Math.max(le.max.x,Ae.max.x),G[2]=o.EXTENT-Ae.min.y>le.max.y?Ae.min.y-o.EXTENT:le.max.y,G),te=[(le,Ae)=>K(le,Ae),(le,Ae)=>K(Ae,le),(le,Ae)=>X(le,Ae),(le,Ae)=>X(Ae,le)],ce=new o.pointGeometry(0,0);let pe,me,ge;const ve=(le,Ae,Te,Re,He)=>{const je=[[Re?Te:le,Re?le:Te,0],[Re?Te:Ae,Re?Ae:Te,0]],Ge=He<0?o.EXTENT+He:He,et=[Re?Ge:(le+Ae)/2,Re?(le+Ae)/2:Ge,0];return Te===0&&He<0||Te!==0&&He>0?T.getForTilePoints(ge,[et],!0,me):je.push(et),T.getForTilePoints(p,je,!0,pe),Math.max(je[0][2],je[1][2],et[2])/T.exaggeration()};for(let le=0;le<4;le++){const Ae=(le<2?1:5)-le,Te=_.borders[le];if(Te.length===0)continue;const Re=ge=L[le](p),He=j(Re);if(!(He&&He instanceof o.FillExtrusionBucket&&He.enableTerrain)||_.borderDoneWithNeighborZ[le]===He.canonical.z&&He.borderDoneWithNeighborZ[Ae]===_.canonical.z||(me=T.findDEMTileFor(Re),!me||!me.dem))continue;if(!pe){const ot=T.findDEMTileFor(p);if(!ot||!ot.dem)return;pe=ot}const je=He.borders[Ae];let Ge=0;const et=He.borderDoneWithNeighborZ[Ae]!==_.canonical.z;if(_.canonical.z===He.canonical.z){for(let ot=0;ot<Te.length;ot++){const ut=_.featuresOnBorder[Te[ot]],Ut=ut.borders[le];let nt;for(;Ge<je.length&&(nt=He.featuresOnBorder[je[Ge]],!(nt.borders[Ae][1]>Ut[0]+3));)et&&He.encodeCentroid(void 0,nt,!1),Ge++;if(nt&&Ge<je.length){const Mt=Ge;let yt=0;for(;!(nt.borders[Ae][0]>Ut[1]-3)&&(yt++,++Ge!==je.length);)nt=He.featuresOnBorder[je[Ge]];if(nt=He.featuresOnBorder[je[Mt]],ut.intersectsCount()>1||nt.intersectsCount()>1||yt!==1){yt!==1&&(Ge=Mt),_.encodeCentroid(void 0,ut,!1),et&&He.encodeCentroid(void 0,nt,!1);continue}const Rt=te[le](ut,nt),st=le%2?o.EXTENT-1:0;ce.x=ve(Rt[0],Math.min(o.EXTENT-1,Rt[1]),st,le<2,Rt[2]),ce.y=0,_.encodeCentroid(ce,ut,!1),et&&He.encodeCentroid(ce,nt,!1)}else _.encodeCentroid(void 0,ut,!1)}_.borderDoneWithNeighborZ[le]=He.canonical.z,_.needsCentroidUpdate=!0,et&&(He.borderDoneWithNeighborZ[Ae]=_.canonical.z,He.needsCentroidUpdate=!0)}else{for(const ot of Te)_.encodeCentroid(void 0,_.featuresOnBorder[ot],!1);if(et){for(const ot of je)He.encodeCentroid(void 0,He.featuresOnBorder[ot],!1);He.borderDoneWithNeighborZ[Ae]=_.canonical.z,He.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[le]=He.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(y)}const Nf=new o.Color(1,0,0,1),$f=new o.Color(0,1,0,1),Xy=new o.Color(0,0,1,1),Ky=new o.Color(1,0,1,1),Yy=new o.Color(0,1,1,1);function Uf(y,u,p){const _=y.context,E=y.transform,T=_.gl,L=E.projection.name==="globe",j=L?["PROJECTION_GLOBE_VIEW"]:null;let G=p.projMatrix;if(L&&o.globeToMercatorTransition(E.zoom)>0){const ut=o.transitionTileAABBinECEF(p.canonical,E),Ut=o.globeDenormalizeECEF(ut);G=o.multiply(new Float32Array(16),E.globeMatrix,Ut),o.multiply(G,E.projMatrix,G)}const K=y.useProgram("debug",null,j),X=u.getTileByID(p.key);y.terrain&&y.terrain.setupElevationDraw(X,K);const te=o.DepthMode.disabled,ce=o.StencilMode.disabled,pe=y.colorModeForRenderPass(),me="$debug";_.activeTexture.set(T.TEXTURE0),y.emptyTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),L?X._makeGlobeTileDebugBuffers(y.context,E):X._makeDebugTileBoundsBuffers(y.context,E.projection);const ge=X._tileDebugBuffer||y.debugBuffer,ve=X._tileDebugIndexBuffer||y.debugIndexBuffer,le=X._tileDebugSegments||y.debugSegments;K.draw(_,T.LINE_STRIP,te,ce,pe,o.CullFaceMode.disabled,Rc(G,o.Color.red),me,ge,ve,le,null,null,null,[X._globeTileDebugBorderBuffer]);const Ae=X.latestRawTileData,Te=Math.floor((Ae&&Ae.byteLength||0)/1024),Re=u.getTile(p).tileSize,He=512/Math.min(Re,512)*(p.overscaledZ/E.zoom)*.5;let je=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(je+=` => ${p.overscaledZ}`),je+=` ${Te}kb`,function(ut,Ut){ut.initDebugOverlayCanvas();const nt=ut.debugOverlayCanvas,Mt=ut.context.gl,yt=ut.debugOverlayCanvas.getContext("2d");yt.clearRect(0,0,nt.width,nt.height),yt.shadowColor="white",yt.shadowBlur=2,yt.lineWidth=1.5,yt.strokeStyle="white",yt.textBaseline="top",yt.font="bold 36px Open Sans, sans-serif",yt.fillText(Ut,5,5),yt.strokeText(Ut,5,5),ut.debugOverlayTexture.update(nt),ut.debugOverlayTexture.bind(Mt.LINEAR,Mt.CLAMP_TO_EDGE)}(y,je);const Ge=X._tileDebugTextBuffer||y.debugBuffer,et=X._tileDebugTextIndexBuffer||y.quadTriangleIndexBuffer,ot=X._tileDebugTextSegments||y.debugSegments;K.draw(_,T.TRIANGLES,te,ce,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,Rc(G,o.Color.transparent,He),me,Ge,et,ot,null,null,null,[X._globeTileDebugTextBuffer])}function js(y,u,p,_){Oc(y,0,u+p/2,y.transform.width,p,_)}function mu(y,u,p,_){Oc(y,u-p/2,0,p,y.transform.height,_)}function Oc(y,u,p,_,E,T){const L=y.context,j=L.gl;j.enable(j.SCISSOR_TEST),j.scissor(u*o.exported.devicePixelRatio,p*o.exported.devicePixelRatio,_*o.exported.devicePixelRatio,E*o.exported.devicePixelRatio),L.clear({color:T}),j.disable(j.SCISSOR_TEST)}const gu=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:yu}=gu;function ms(y,u,p,_){y.emplaceBack(u,p,_)}class mh{constructor(u){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,ms(this.vertexArray,-1,-1,1),ms(this.vertexArray,1,-1,1),ms(this.vertexArray,-1,1,1),ms(this.vertexArray,1,1,1),ms(this.vertexArray,-1,-1,-1),ms(this.vertexArray,1,-1,-1),ms(this.vertexArray,-1,1,-1),ms(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=u.createVertexBuffer(this.vertexArray,yu),this.indexBuffer=u.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function Yn(y,u,p,_,E,T){const L=y.gl,j=u.paint.get("sky-atmosphere-color"),G=u.paint.get("sky-atmosphere-halo-color"),K=u.paint.get("sky-atmosphere-sun-intensity"),X=((te,ce,pe,me,ge)=>({u_matrix_3f:te,u_sun_direction:ce,u_sun_intensity:pe,u_color_tint_r:[me.r,me.g,me.b,me.a],u_color_tint_m:[ge.r,ge.g,ge.b,ge.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),_),E,K,j,G);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+T,u.skyboxTexture,0),p.draw(y,L.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,X,"skyboxCapture",u.skyboxGeometry.vertexBuffer,u.skyboxGeometry.indexBuffer,u.skyboxGeometry.segment)}const gh=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class q1{constructor(u){const p=new o.StructArrayLayout5f20;p.emplaceBack(-1,1,1,0,0),p.emplaceBack(1,1,1,1,0),p.emplaceBack(1,-1,1,1,1),p.emplaceBack(-1,-1,1,0,1);const _=new o.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=u.createVertexBuffer(p,gh.members),this.indexBuffer=u.createIndexBuffer(_),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const jf={symbol:function(y,u,p,_,E){if(y.renderPass!=="translucent")return;const T=o.StencilMode.disabled,L=y.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(j,G,K,X,te,ce,pe){const me=G.transform,ge=te==="map",ve=ce==="map";for(const le of j){const Ae=X.getTile(le),Te=Ae.getBucket(K);if(!Te||!Te.text||!Te.text.segments.get().length)continue;const Re=o.evaluateSizeForZoom(Te.textSizeData,me.zoom),He=Yd(le,Te.getProjection(),me),je=me.calculatePixelsToTileUnitsMatrix(Ae),Ge=ou(He,Ae.tileID.canonical,ve,ge,me,Te.getProjection(),je),et=K.layout.get("icon-text-fit")!=="none"&&Te.hasIconData();if(Re){const ot=Math.pow(2,me.zoom-Ae.tileID.overscaledZ);fu(Te,ge,ve,pe,o.symbolSize,me,Ge,le,ot,Re,et)}}}(_,y,p,u,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),E),p.paint.get("icon-opacity").constantOr(1)!==0&&Gy(y,u,p,_,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),T,L),p.paint.get("text-opacity").constantOr(1)!==0&&Gy(y,u,p,_,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),T,L),u.map.showCollisionBoxes&&(Hy(y,u,p,_,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),Hy(y,u,p,_,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))},circle:function(y,u,p,_){if(y.renderPass!=="translucent")return;const E=p.paint.get("circle-opacity"),T=p.paint.get("circle-stroke-width"),L=p.paint.get("circle-stroke-opacity"),j=p.layout.get("circle-sort-key").constantOr(1)!==void 0;if(E.constantOr(1)===0&&(T.constantOr(1)===0||L.constantOr(1)===0))return;const G=y.context,K=G.gl,X=y.transform,te=y.depthModeForSublayer(0,o.DepthMode.ReadOnly),ce=o.StencilMode.disabled,pe=y.colorModeForRenderPass(),me=X.projection.name==="globe",ge=[o.mercatorXfromLng(X.center.lng),o.mercatorYfromLat(X.center.lat)],ve=[];for(let Ae=0;Ae<_.length;Ae++){const Te=_[Ae],Re=u.getTile(Te),He=Re.getBucket(p);if(!He||He.projection.name!==X.projection.name)continue;const je=He.programConfigurations.get(p.id),Ge=Dc(p);me&&Ge.push("PROJECTION_GLOBE_VIEW");const et=y.useProgram("circle",je,Ge),ot=He.layoutVertexBuffer,ut=He.globeExtVertexBuffer,Ut=He.indexBuffer,nt=X.projection.createInversionMatrix(X,Te.canonical),Mt={programConfiguration:je,program:et,layoutVertexBuffer:ot,globeExtVertexBuffer:ut,indexBuffer:Ut,uniformValues:Pc(y,Te,Re,nt,ge,p),tile:Re};if(j){const yt=He.segments.get();for(const Rt of yt)ve.push({segments:new o.SegmentVector([Rt]),sortKey:Rt.sortKey,state:Mt})}else ve.push({segments:He.segments,sortKey:0,state:Mt})}j&&ve.sort((Ae,Te)=>Ae.sortKey-Te.sortKey);const le={useDepthForOcclusion:!me};for(const Ae of ve){const{programConfiguration:Te,program:Re,layoutVertexBuffer:He,globeExtVertexBuffer:je,indexBuffer:Ge,uniformValues:et,tile:ot}=Ae.state,ut=Ae.segments;y.terrain&&y.terrain.setupElevationDraw(ot,Re,le),y.prepareDrawProgram(G,Re,ot.tileID.toUnwrapped()),Re.draw(G,K.TRIANGLES,te,ce,pe,o.CullFaceMode.disabled,et,p.id,He,Ge,ut,p.paint,X.zoom,Te,[je])}},heatmap:function(y,u,p,_){if(p.paint.get("heatmap-opacity")!==0)if(y.renderPass==="offscreen"){const E=y.context,T=E.gl,L=o.StencilMode.disabled,j=new o.ColorMode([T.ONE,T.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(pe,me,ge,ve){const le=pe.gl,Ae=me.width*ve,Te=me.height*ve;pe.activeTexture.set(le.TEXTURE1),pe.viewport.set([0,0,Ae,Te]);let Re=ge.heatmapFbo;if(!Re||Re&&(Re.width!==Ae||Re.height!==Te)){Re&&Re.destroy();const He=le.createTexture();le.bindTexture(le.TEXTURE_2D,He),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),Re=ge.heatmapFbo=pe.createFramebuffer(Ae,Te,!1),function(je,Ge,et,ot,ut,Ut){const nt=je.gl;nt.texImage2D(nt.TEXTURE_2D,0,je.isWebGL2&&je.extRenderToTextureHalfFloat?nt.RGBA16F:nt.RGBA,ut,Ut,0,nt.RGBA,je.extRenderToTextureHalfFloat?je.isWebGL2?nt.HALF_FLOAT:je.extTextureHalfFloat.HALF_FLOAT_OES:nt.UNSIGNED_BYTE,null),ot.colorAttachment.set(et)}(pe,0,He,Re,Ae,Te)}else le.bindTexture(le.TEXTURE_2D,Re.colorAttachment.get()),pe.bindFramebuffer.set(Re.framebuffer)})(E,y,p,y.transform.projection.name==="globe"?.5:.25),E.clear({color:o.Color.transparent});const G=y.transform,K=G.projection.name==="globe",X=K?["PROJECTION_GLOBE_VIEW"]:null,te=K?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,ce=[o.mercatorXfromLng(G.center.lng),o.mercatorYfromLat(G.center.lat)];for(let pe=0;pe<_.length;pe++){const me=_[pe];if(u.hasRenderableParent(me))continue;const ge=u.getTile(me),ve=ge.getBucket(p);if(!ve||ve.projection.name!==G.projection.name)continue;const le=ve.programConfigurations.get(p.id),Ae=y.useProgram("heatmap",le,X),{zoom:Te}=y.transform;y.terrain&&y.terrain.setupElevationDraw(ge,Ae),y.prepareDrawProgram(E,Ae,me.toUnwrapped());const Re=G.projection.createInversionMatrix(G,me.canonical);Ae.draw(E,T.TRIANGLES,o.DepthMode.disabled,L,j,te,Ua(y,me,ge,Re,ce,Te,p.paint.get("heatmap-intensity")),p.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,p.paint,y.transform.zoom,le,K?[ve.globeExtVertexBuffer]:null)}E.viewport.set([0,0,y.width,y.height])}else y.renderPass==="translucent"&&(y.context.setColorMode(y.colorModeForRenderPass()),function(E,T){const L=E.context,j=L.gl,G=T.heatmapFbo;if(!G)return;L.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,G.colorAttachment.get()),L.activeTexture.set(j.TEXTURE1);let K=T.colorRampTexture;K||(K=T.colorRampTexture=new o.Texture(L,T.colorRamp,j.RGBA)),K.bind(j.LINEAR,j.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(L,j.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,E.colorModeForRenderPass(),o.CullFaceMode.disabled,((X,te,ce,pe)=>({u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}))(0,T),T.id,E.viewportBuffer,E.quadTriangleIndexBuffer,E.viewportSegments,T.paint,E.transform.zoom)}(y,p))},line:function(y,u,p,_){if(y.renderPass!=="translucent")return;const E=p.paint.get("line-opacity"),T=p.paint.get("line-width");if(E.constantOr(1)===0||T.constantOr(1)===0)return;const L=y.depthModeForSublayer(0,o.DepthMode.ReadOnly),j=y.colorModeForRenderPass(),G=y.terrain&&y.terrain.renderingToTexture?1:o.exported.devicePixelRatio,K=p.paint.get("line-dasharray"),X=K.constantOr(1),te=p.layout.get("line-cap"),ce=p.paint.get("line-pattern"),pe=ce.constantOr(1),me=p.paint.get("line-gradient"),ge=pe?"linePattern":"line",ve=y.context,le=ve.gl,Ae=(Re=>{const He=[];fh(Re)&&He.push("RENDER_LINE_DASH"),Re.paint.get("line-gradient")&&He.push("RENDER_LINE_GRADIENT");const je=Re.paint.get("line-trim-offset");je[0]===0&&je[1]===0||He.push("RENDER_LINE_TRIM_OFFSET");const Ge=Re.paint.get("line-pattern").constantOr(1),et=Re.paint.get("line-opacity").constantOr(1)!==1;return!Ge&&et&&He.push("RENDER_LINE_ALPHA_DISCARD"),He})(p);let Te=Ae.includes("RENDER_LINE_ALPHA_DISCARD");y.terrain&&y.terrain.clipOrMaskOverlapStencilType()&&(Te=!1);for(const Re of _){const He=u.getTile(Re);if(pe&&!He.patternsLoaded())continue;const je=He.getBucket(p);if(!je)continue;y.prepareDrawTile();const Ge=je.programConfigurations.get(p.id),et=y.useProgram(ge,Ge,Ae),ot=ce.constantOr(null);if(ot&&He.imageAtlas){const Ye=He.imageAtlas.patternPositions[ot.toString()];Ye&&Ge.setConstantPatternPositions(Ye)}const ut=K.constantOr(null),Ut=te.constantOr(null);if(!pe&&ut&&Ut&&He.lineAtlas){const Ye=He.lineAtlas.getDash(ut,Ut);Ye&&Ge.setConstantPatternPositions(Ye)}let[nt,Mt]=p.paint.get("line-trim-offset");(Ut==="round"||Ut==="square")&&nt!==Mt&&(nt===0&&(nt-=1),Mt===1&&(Mt+=1));const yt=y.terrain?Re.projMatrix:null,Rt=pe?Uy(y,He,p,yt,G):Df(y,He,p,yt,je.lineClipsArray.length,G,[nt,Mt]);if(me){const Ye=je.gradients[p.id];let dt=Ye.texture;if(p.gradientVersion!==Ye.version){let Dt=256;if(p.stepInterpolant){const Ot=u.getSource().maxzoom,un=Re.canonical.z===Ot?Math.ceil(1<<y.transform.maxZoom-Re.canonical.z):1;Dt=o.clamp(o.nextPowerOfTwo(je.maxLineLength/o.EXTENT*1024*un),256,ve.maxTextureSize)}Ye.gradient=o.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:Dt,image:Ye.gradient||void 0,clips:je.lineClipsArray}),Ye.texture?Ye.texture.update(Ye.gradient):Ye.texture=new o.Texture(ve,Ye.gradient,le.RGBA),Ye.version=p.gradientVersion,dt=Ye.texture}ve.activeTexture.set(le.TEXTURE1),dt.bind(p.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}X&&(ve.activeTexture.set(le.TEXTURE0),He.lineAtlasTexture.bind(le.LINEAR,le.REPEAT),Ge.updatePaintBuffers()),pe&&(ve.activeTexture.set(le.TEXTURE0),He.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),Ge.updatePaintBuffers()),y.prepareDrawProgram(ve,et,Re.toUnwrapped());const st=Ye=>{et.draw(ve,le.TRIANGLES,L,Ye,j,o.CullFaceMode.disabled,Rt,p.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,p.paint,y.transform.zoom,Ge,[je.layoutVertexBuffer2])};if(Te){const Ye=y.stencilModeForClipping(Re).ref;Ye===0&&y.terrain&&ve.clear({stencil:0});const dt={func:le.EQUAL,mask:255};Rt.u_alpha_discard_threshold=.8,st(new o.StencilMode(dt,Ye,255,le.KEEP,le.KEEP,le.INVERT)),Rt.u_alpha_discard_threshold=0,st(new o.StencilMode(dt,Ye,255,le.KEEP,le.KEEP,le.KEEP))}else st(y.stencilModeForClipping(Re))}Te&&(y.resetStencilClippingMasks(),y.terrain&&ve.clear({stencil:0}))},fill:function(y,u,p,_){const E=p.paint.get("fill-color"),T=p.paint.get("fill-opacity");if(T.constantOr(1)===0)return;const L=y.colorModeForRenderPass(),j=p.paint.get("fill-pattern"),G=y.opaquePassEnabledForLayer()&&!j.constantOr(1)&&E.constantOr(o.Color.transparent).a===1&&T.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===G){const K=y.depthModeForSublayer(1,y.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);Zy(y,u,p,_,K,L,!1)}if(y.renderPass==="translucent"&&p.paint.get("fill-antialias")){const K=y.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);Zy(y,u,p,_,K,L,!0)}},"fill-extrusion":function(y,u,p,_){const E=p.paint.get("fill-extrusion-opacity");if(E!==0&&y.renderPass==="translucent"){const T=new o.DepthMode(y.context.gl.LEQUAL,o.DepthMode.ReadWrite,y.depthRangeFor3D);if(E!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))Ff(y,u,p,_,T,o.StencilMode.disabled,o.ColorMode.disabled),Ff(y,u,p,_,T,y.stencilModeFor3D(),y.colorModeForRenderPass()),y.resetStencilClippingMasks();else{const L=y.colorModeForRenderPass();Ff(y,u,p,_,T,o.StencilMode.disabled,L)}}},hillshade:function(y,u,p,_){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const E=y.context,T=y.depthModeForSublayer(0,o.DepthMode.ReadOnly),L=y.colorModeForRenderPass(),j=y.terrain&&y.terrain.renderingToTexture,[G,K]=y.renderPass!=="translucent"||j?[{},_]:y.stencilConfigForOverlap(_);for(const X of K){const te=u.getTile(X);if(te.needsHillshadePrepare&&y.renderPass==="offscreen")ah(y,te,p,T,o.StencilMode.disabled,L);else if(y.renderPass==="translucent"){const ce=j&&y.terrain?y.terrain.stencilModeForRTTOverlap(X):G[X.overscaledZ];Ac(y,X,te,p,T,ce,L)}}E.viewport.set([0,0,y.width,y.height]),y.resetStencilClippingMasks()},raster:function(y,u,p,_,E,T){if(y.renderPass!=="translucent"||p.paint.get("raster-opacity")===0||!_.length)return;const L=y.context,j=L.gl,G=u.getSource(),K=y.useProgram("raster"),X=y.colorModeForRenderPass(),te=y.terrain&&y.terrain.renderingToTexture,[ce,pe]=G instanceof We||te?[{},_]:y.stencilConfigForOverlap(_),me=pe[pe.length-1].overscaledZ,ge=!y.options.moving;for(const ve of pe){const le=te?o.DepthMode.disabled:y.depthModeForSublayer(ve.overscaledZ-me,p.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,j.LESS),Ae=ve.toUnwrapped(),Te=u.getTile(ve);if(te&&(!Te||!Te.hasData()))continue;const Re=te?ve.projMatrix:y.transform.calculateProjMatrix(Ae,ge),He=y.terrain&&te?y.terrain.stencilModeForRTTOverlap(ve):ce[ve.overscaledZ],je=T?0:p.paint.get("raster-fade-duration");Te.registerFadeDuration(je);const Ge=u.findLoadedParent(ve,0),et=Ic(Te,Ge,u,y.transform,je);let ot,ut;y.terrain&&y.terrain.prepareDrawTile();const Ut=p.paint.get("raster-resampling")==="nearest"?j.NEAREST:j.LINEAR;L.activeTexture.set(j.TEXTURE0),Te.texture.bind(Ut,j.CLAMP_TO_EDGE),L.activeTexture.set(j.TEXTURE1),Ge?(Ge.texture.bind(Ut,j.CLAMP_TO_EDGE),ot=Math.pow(2,Ge.tileID.overscaledZ-Te.tileID.overscaledZ),ut=[Te.tileID.canonical.x*ot%1,Te.tileID.canonical.y*ot%1]):Te.texture.bind(Ut,j.CLAMP_TO_EDGE),Te.texture.useMipmap&&L.extTextureFilterAnisotropic&&y.transform.pitch>20&&j.texParameterf(j.TEXTURE_2D,L.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,L.extTextureFilterAnisotropicMax);const nt=j1(Re,ut||[0,0],ot||1,et,p,G instanceof We?G.perspectiveTransform:[0,0]);if(y.prepareDrawProgram(L,K,Ae),G instanceof We)G.boundsBuffer&&G.boundsSegments&&K.draw(L,j.TRIANGLES,le,o.StencilMode.disabled,X,o.CullFaceMode.disabled,nt,p.id,G.boundsBuffer,y.quadTriangleIndexBuffer,G.boundsSegments);else{const{tileBoundsBuffer:Mt,tileBoundsIndexBuffer:yt,tileBoundsSegments:Rt}=y.getTileBoundsBuffers(Te);K.draw(L,j.TRIANGLES,le,He,X,o.CullFaceMode.disabled,nt,p.id,Mt,yt,Rt)}}y.resetStencilClippingMasks()},background:function(y,u,p,_){const E=p.paint.get("background-color"),T=p.paint.get("background-opacity");if(T===0)return;const L=y.context,j=L.gl,G=y.transform,K=G.tileSize,X=p.paint.get("background-pattern");if(y.isPatternMissing(X))return;const te=!X&&E.a===1&&T===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==te)return;const ce=o.StencilMode.disabled,pe=y.depthModeForSublayer(0,te==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),me=y.colorModeForRenderPass(),ge=y.useProgram(X?"backgroundPattern":"background");let ve,le=_;le||(ve=y.getBackgroundTiles(),le=Object.values(ve).map(Ae=>Ae.tileID)),X&&(L.activeTexture.set(j.TEXTURE0),y.imageManager.bind(y.context));for(const Ae of le){const Te=Ae.toUnwrapped(),Re=_?Ae.projMatrix:y.transform.calculateProjMatrix(Te);y.prepareDrawTile();const He=u?u.getTile(Ae):ve?ve[Ae.key]:new o.Tile(Ae,K,G.zoom,y),je=X?zf(Re,T,y,X,{tileID:Ae,tileSize:K}):V1(Re,T,E);y.prepareDrawProgram(L,ge,Te);const{tileBoundsBuffer:Ge,tileBoundsIndexBuffer:et,tileBoundsSegments:ot}=y.getTileBoundsBuffers(He);ge.draw(L,j.TRIANGLES,pe,ce,me,o.CullFaceMode.disabled,je,p.id,Ge,et,ot)}},sky:function(y,u,p){const _=y.transform,E=_.projection.name==="mercator"||_.projection.name==="globe"?1:o.smoothstep(7,8,_.zoom),T=p.paint.get("sky-opacity")*E;if(T===0)return;const L=y.context,j=p.paint.get("sky-type"),G=new o.DepthMode(L.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),K=y.frameCounter/1e3%1;j==="atmosphere"?y.renderPass==="offscreen"?p.needsSkyboxCapture(y)&&(function(X,te,ce,pe){const me=X.context,ge=me.gl;let ve=te.skyboxFbo;if(!ve){ve=te.skyboxFbo=me.createFramebuffer(32,32,!1),te.skyboxGeometry=new mh(me),te.skyboxTexture=me.gl.createTexture(),ge.bindTexture(ge.TEXTURE_CUBE_MAP,te.skyboxTexture),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_CUBE_MAP,ge.TEXTURE_MAG_FILTER,ge.LINEAR);for(let Re=0;Re<6;++Re)ge.texImage2D(ge.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0,ge.RGBA,32,32,0,ge.RGBA,ge.UNSIGNED_BYTE,null)}me.bindFramebuffer.set(ve.framebuffer),me.viewport.set([0,0,32,32]);const le=te.getCenter(X,!0),Ae=X.useProgram("skyboxCapture"),Te=new Float64Array(16);o.identity(Te),o.rotateY(Te,Te,.5*-Math.PI),Yn(me,te,Ae,Te,le,0),o.identity(Te),o.rotateY(Te,Te,.5*Math.PI),Yn(me,te,Ae,Te,le,1),o.identity(Te),o.rotateX(Te,Te,.5*-Math.PI),Yn(me,te,Ae,Te,le,2),o.identity(Te),o.rotateX(Te,Te,.5*Math.PI),Yn(me,te,Ae,Te,le,3),o.identity(Te),Yn(me,te,Ae,Te,le,4),o.identity(Te),o.rotateY(Te,Te,Math.PI),Yn(me,te,Ae,Te,le,5),me.viewport.set([0,0,X.width,X.height])}(y,p),p.markSkyboxValid(y)):y.renderPass==="sky"&&function(X,te,ce,pe,me){const ge=X.context,ve=ge.gl,le=X.transform,Ae=X.useProgram("skybox");ge.activeTexture.set(ve.TEXTURE0),ve.bindTexture(ve.TEXTURE_CUBE_MAP,te.skyboxTexture);const Te=((Re,He,je,Ge,et)=>({u_matrix:Re,u_sun_direction:He,u_cubemap:0,u_opacity:Ge,u_temporal_offset:et}))(le.skyboxMatrix,te.getCenter(X,!1),0,pe,me);X.prepareDrawProgram(ge,Ae),Ae.draw(ge,ve.TRIANGLES,ce,o.StencilMode.disabled,X.colorModeForRenderPass(),o.CullFaceMode.backCW,Te,"skybox",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(y,p,G,T,K):j==="gradient"&&y.renderPass==="sky"&&function(X,te,ce,pe,me){const ge=X.context,ve=ge.gl,le=X.transform,Ae=X.useProgram("skyboxGradient");te.skyboxGeometry||(te.skyboxGeometry=new mh(ge)),ge.activeTexture.set(ve.TEXTURE0);let Te=te.colorRampTexture;Te||(Te=te.colorRampTexture=new o.Texture(ge,te.colorRamp,ve.RGBA)),Te.bind(ve.LINEAR,ve.CLAMP_TO_EDGE);const Re=((He,je,Ge,et,ot)=>({u_matrix:He,u_color_ramp:0,u_center_direction:je,u_radius:o.degToRad(Ge),u_opacity:et,u_temporal_offset:ot}))(le.skyboxMatrix,te.getCenter(X,!1),te.paint.get("sky-gradient-radius"),pe,me);X.prepareDrawProgram(ge,Ae),Ae.draw(ge,ve.TRIANGLES,ce,o.StencilMode.disabled,X.colorModeForRenderPass(),o.CullFaceMode.backCW,Re,"skyboxGradient",te.skyboxGeometry.vertexBuffer,te.skyboxGeometry.indexBuffer,te.skyboxGeometry.segment)}(y,p,G,T,K)},debug:function(y,u,p){for(let _=0;_<p.length;_++)Uf(y,u,p[_])},custom:function(y,u,p,_){const E=y.context,T=p.implementation;if(!y.transform.projection.unsupportedLayers||!y.transform.projection.unsupportedLayers.includes("custom")||y.terrain&&(y.terrain.renderingToTexture||y.renderPass==="offscreen")&&p.isLayerDraped()){if(y.renderPass==="offscreen"){const L=T.prerender;if(L){if(y.setCustomLayerDefaults(),E.setColorMode(y.colorModeForRenderPass()),y.transform.projection.name==="globe"){const j=y.transform.pointMerc;L.call(T,E.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(y.transform.zoom),[j.x,j.y],y.transform.pixelsPerMeterRatio)}else L.call(T,E.gl,y.transform.customLayerMatrix());E.setDirty(),y.setBaseState()}}else if(y.renderPass==="translucent"){if(y.terrain&&y.terrain.renderingToTexture){const j=T.renderToTile;if(j){const G=_[0].canonical,K=new o.MercatorCoordinate(G.x+_[0].wrap*(1<<G.z),G.y,G.z);E.setDepthMode(o.DepthMode.disabled),E.setStencilMode(o.StencilMode.disabled),E.setColorMode(y.colorModeForRenderPass()),y.setCustomLayerDefaults(),j.call(T,E.gl,K),E.setDirty(),y.setBaseState()}return}y.setCustomLayerDefaults(),E.setColorMode(y.colorModeForRenderPass()),E.setStencilMode(o.StencilMode.disabled);const L=T.renderingMode==="3d"?new o.DepthMode(y.context.gl.LEQUAL,o.DepthMode.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(E.setDepthMode(L),y.transform.projection.name==="globe"){const j=y.transform.pointMerc;T.render(E.gl,y.transform.customLayerMatrix(),y.transform.getProjection(),y.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(y.transform.zoom),[j.x,j.y],y.transform.pixelsPerMeterRatio)}else T.render(E.gl,y.transform.customLayerMatrix());E.setDirty(),y.setBaseState(),E.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class zc{constructor(u,p,_=!1){this.context=new _e(u,_),this.transform=p,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Iy,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(u,p){const _=!!u&&!!u.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Af(this,u));const E=this._terrain;this.transform.elevation=_?E:null,E.update(u,this.transform,p)}_updateFog(u){const p=u.fog;if(!p||this.transform.projection.name==="globe"||p.getOpacity(this.transform.pitch)<1||p.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,E]=p.getFovAdjustedRange(this.transform._fov);if(_>E)return void(this.transform.fogCullDistSq=null);const T=_+.78*(E-_);this.transform.fogCullDistSq=T*T}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(u,p){if(this.width=u*o.exported.devicePixelRatio,this.height=p*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const u=this.context,p=new o.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(p,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const _=new o.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(o.EXTENT,0),_.emplaceBack(0,o.EXTENT),_.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=u.createVertexBuffer(_,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const E=new o.StructArrayLayout2i4;E.emplaceBack(-1,-1),E.emplaceBack(1,-1),E.emplaceBack(-1,1),E.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(E,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const T=new o.StructArrayLayout4i8;T.emplaceBack(0,0,0,0),T.emplaceBack(o.EXTENT,0,o.EXTENT,0),T.emplaceBack(0,o.EXTENT,0,o.EXTENT),T.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=u.createVertexBuffer(T,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const L=new o.StructArrayLayout3ui6;L.emplaceBack(0,1,2),L.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(L);const j=new o.StructArrayLayout1ui2;for(const K of[0,1,3,2,0])j.emplaceBack(K);this.debugIndexBuffer=u.createIndexBuffer(j),this.emptyTexture=new o.Texture(u,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),u.gl.RGBA),this.identityMat=o.create();const G=this.context.gl;this.stencilClearMode=new o.StencilMode({func:G.ALWAYS,mask:0},0,255,G.ZERO,G.ZERO,G.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new q1(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(u){return u._makeTileBoundsBuffers(this.context,this.transform.projection),u._tileBoundsBuffer?{tileBoundsBuffer:u._tileBoundsBuffer,tileBoundsIndexBuffer:u._tileBoundsIndexBuffer,tileBoundsSegments:u._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(u,p.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,Qn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(u,p,_){if(!p||this.currentStencilSource===p.id||!u.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let j=!1;for(const G of _)if(this._tileClippingMaskIDs[G.key]===void 0){j=!0;break}if(!j)return}this.currentStencilSource=p.id;const E=this.context,T=E.gl;this.nextStencilID+_.length>256&&this.clearStencil(),E.setColorMode(o.ColorMode.disabled),E.setDepthMode(o.DepthMode.disabled);const L=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const j of _){const G=p.getTile(j),K=this._tileClippingMaskIDs[j.key]=this.nextStencilID++,{tileBoundsBuffer:X,tileBoundsIndexBuffer:te,tileBoundsSegments:ce}=this.getTileBoundsBuffers(G);L.draw(E,T.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:T.ALWAYS,mask:0},K,255,T.KEEP,T.KEEP,T.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Qn(j.projMatrix),"$clipping",X,te,ce)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new o.StencilMode({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(u);const p=this.context.gl;return new o.StencilMode({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(u){const p=this.context.gl,_=u.sort((L,j)=>j.overscaledZ-L.overscaledZ),E=_[_.length-1].overscaledZ,T=_[0].overscaledZ-E+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const L={};for(let j=0;j<T;j++)L[j+E]=new o.StencilMode({func:p.GEQUAL,mask:255},j+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=T,[L,_]}return[{[E]:o.StencilMode.disabled},_]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([u.CONSTANT_COLOR,u.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(u,p,_){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const E=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new o.DepthMode(_||this.context.gl.LEQUAL,p,[E,E])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){this.style=u,this.options=p,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const _=this.style.order,E=this.style._sourceCaches;for(const K in E){const X=E[K];X.used&&X.prepare(this.context)}const T={},L={},j={};for(const K in E){const X=E[K];T[K]=X.getVisibleCoordinates(),L[K]=T[K].slice().reverse(),j[K]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let K=0;K<_.length;K++)if(this.style._layers[_[K]].is3D()){this.opaquePassCutoff=K;break}if(this.terrain&&(this.terrain.updateTileBinding(j),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const K of _){const X=this.style._layers[K],te=u._getLayerSourceCache(X);if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const ce=te?L[te.id]:void 0;(X.type==="custom"||X.isSky()||ce&&ce.length)&&this.renderLayer(this,te,X,ce)}this.depthRangeFor3D=[0,1-(u.order.length+2)*this.numSublayers*this.depthEpsilon];const G=this.terrain;if(G&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&G.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const K=this.style._layers[_[this.currentLayer]],X=u._getLayerSourceCache(K);if(K.isSky())continue;const te=X?L[X.id]:void 0;this._renderTileClippingMasks(K,X,te),this.renderLayer(this,X,K,te)}if(this.style.fog&&this.transform.projection.supportsFog&&function(K,X){const te=K.context,ce=te.gl,pe=K.transform,me=new o.DepthMode(ce.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ge=K.useProgram("globeAtmosphere",null,pe.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ve=o.globeToMercatorTransition(pe.zoom),le=X.properties.get("color").toArray01(),Ae=X.properties.get("high-color").toArray01(),Te=X.properties.get("space-color").toArray01PremultipliedAlpha(),Re=o.identity$1([]);o.rotateY$1(Re,Re,-o.degToRad(pe._center.lng)),o.rotateX$1(Re,Re,o.degToRad(pe._center.lat)),o.rotateZ$1(Re,Re,pe.angle),o.rotateX$1(Re,Re,-pe._pitch);const He=o.fromQuat(new Float32Array(16),Re),je=o.mapValue(X.properties.get("star-intensity"),0,1,0,.25),Ge=5e-4,et=o.mapValue(X.properties.get("horizon-blend"),0,1,Ge,.25),ot=o.globeUseCustomAntiAliasing(K,te,pe)&&et===Ge?pe.worldSize/(2*Math.PI*1.025)-1:pe.globeRadius,ut=K.frameCounter/1e3%1,Ut=o.length(pe.globeCenterInViewSpace),nt=Math.sqrt(Math.pow(Ut,2)-Math.pow(ot,2)),Mt=Math.acos(nt/Ut),yt=((st,Ye,dt,Dt,Ot,un,Nn,on,Qt,hn,Hn,gn,lr,fr)=>({u_frustum_tl:st,u_frustum_tr:Ye,u_frustum_br:dt,u_frustum_bl:Dt,u_horizon:Ot,u_transition:un,u_fadeout_range:Nn,u_color:on,u_high_color:Qt,u_space_color:hn,u_star_intensity:Hn,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:gn,u_horizon_angle:lr,u_rotation_matrix:fr}))(pe.frustumCorners.TL,pe.frustumCorners.TR,pe.frustumCorners.BR,pe.frustumCorners.BL,pe.frustumCorners.horizon,ve,et,le,Ae,Te,je,ut,Mt,He);K.prepareDrawProgram(te,ge);const Rt=K.atmosphereBuffer;Rt&&ge.draw(te,ce.TRIANGLES,me,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,yt,"skybox",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const K=this.style._layers[_[this.currentLayer]],X=u._getLayerSourceCache(K);K.isSky()&&this.renderLayer(this,X,K,X?L[X.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const K=this.style._layers[_[this.currentLayer]],X=u._getLayerSourceCache(K);if(K.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(K)){if(K.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const te=X?(K.type==="symbol"?j:L)[X.id]:void 0;this._renderTileClippingMasks(K,X,X?T[X.id]:void 0),this.renderLayer(this,X,K,te),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let K=null;o.values(this.style._layers).forEach(X=>{const te=u._getLayerSourceCache(X);te&&!X.isHidden(this.transform.zoom)&&(!K||K.getSource().maxzoom<te.getSource().maxzoom)&&(K=te)}),K&&this.options.showTileBoundaries&&jf.debug(this,K,K.getVisibleCoordinates())}this.options.showPadding&&function(K){const X=K.transform.padding;js(K,K.transform.height-(X.top||0),3,Nf),js(K,X.bottom||0,3,$f),mu(K,X.left||0,3,Xy),mu(K,K.transform.width-(X.right||0),3,Ky);const te=K.transform.centerPoint;(function(ce,pe,me,ge){Oc(ce,pe-1,me-10,2,20,ge),Oc(ce,pe-10,me-1,20,2,ge)})(K,te.x,K.transform.height-te.y,Yy)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(u,p,_,E){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||E&&E.length)&&(this.id=_.id,this.gpuTimingStart(_),(!u.transform.projection.unsupportedLayers||!u.transform.projection.unsupportedLayers.includes(_.type)||u.terrain&&_.type==="custom")&&jf[_.type](u,p,_,E,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const p=this.context.extTimerQuery;let _=this.gpuTimers[u.id];_||(_=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),_.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const u=this.context.extTimerQuery,p=u.createQueryEXT();this.deferredRenderGpuTimeQueries.push(p),u.beginQueryEXT(u.TIME_ELAPSED_EXT,p)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}collectDeferredRenderGpuQueries(){const u=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],u}queryGpuTimers(u){const p={};for(const _ in u){const E=u[_],T=this.context.extTimerQuery,L=T.getQueryObjectEXT(E.query,T.QUERY_RESULT_EXT)/1e6;T.deleteQueryEXT(E.query),p[_]=L}return p}queryGpuTimeDeferredRender(u){if(!this.options.gpuTimingDeferredRender)return 0;const p=this.context.extTimerQuery;let _=0;for(const E of u)_+=p.getQueryObjectEXT(E,p.QUERY_RESULT_EXT)/1e6,p.deleteQueryEXT(E);return _}translatePosMatrix(u,p,_,E,T){if(!_[0]&&!_[1])return u;const L=T?E==="map"?this.transform.angle:0:E==="viewport"?-this.transform.angle:0;if(L){const K=Math.sin(L),X=Math.cos(L);_=[_[0]*X-_[1]*K,_[0]*K+_[1]*X]}const j=[T?_[0]:$t(p,_[0],this.transform.zoom),T?_[1]:$t(p,_[1],this.transform.zoom),0],G=new Float32Array(16);return o.translate(G,u,j),G}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){return u===null||u!==void 0&&!this.imageManager.getPattern(u.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const u=this.terrain&&this.terrain.renderingToTexture,p=this.terrain&&this.terrain.exaggeration()===0,_=this.style&&this.style.fog,E=[];return this.terrainRenderModeElevated()&&E.push("TERRAIN"),this.transform.projection.name==="globe"&&E.push("GLOBE"),p&&E.push("ZERO_EXAGGERATION"),_&&!u&&_.getOpacity(this.transform.pitch)!==0&&E.push("FOG"),u&&E.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&E.push("OVERDRAW_INSPECTOR"),E}useProgram(u,p,_){this.cache=this.cache||{};const E=_||[],T=this.currentGlobalDefines().concat(E),L=Mf.cacheKey(wf[u],u,T,p);return this.cache[L]||(this.cache[L]=new Mf(this.context,u,wf[u],p,H1[u],T)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(u,p,_){if(this.terrain&&this.terrain.renderingToTexture)return;const E=this.style.fog;if(E){const T=E.getOpacity(this.transform.pitch),L=((j,G,K,X,te,ce,pe,me,ge,ve,le)=>{const Ae=j.transform,Te=G.properties.get("color").toArray01();Te[3]=X;const Re=j.frameCounter/1e3%1;return{u_fog_matrix:K?Ae.calculateFogTileMatrix(K):j.identityMat,u_fog_range:G.getFovAdjustedRange(Ae._fov),u_fog_color:Te,u_fog_horizon_blend:G.properties.get("horizon-blend"),u_fog_temporal_offset:Re,u_frustum_tl:te,u_frustum_tr:ce,u_frustum_br:pe,u_frustum_bl:me,u_globe_pos:ge,u_globe_radius:ve,u_viewport:le,u_globe_transition:o.globeToMercatorTransition(Ae.zoom),u_is_globe:+(Ae.projection.name==="globe")}})(this,E,_,T,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);p.setFogUniformValues(u,L)}}setTileLoadedFlag(u){this.tileLoaded=u}saveCanvasCopy(){const u=this.canvasCopy();u&&(this.frameCopies.push(u),this.tileLoaded=!1)}canvasCopy(){const u=this.context.gl,p=u.createTexture();return u.bindTexture(u.TEXTURE_2D,p),u.copyTexImage2D(u.TEXTURE_2D,0,u.RGBA,0,0,u.drawingBufferWidth,u.drawingBufferHeight,0),p}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const u=this.style&&this.style.fog;return!!u&&u.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const u=this._backgroundTiles,p=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const E of _)p[E.key]=u[E.key]||new o.Tile(E,512,this.transform.tileZoom,this);return p}clearBackgroundTiles(){this._backgroundTiles={}}}class Vf{constructor(u=0,p=0,_=0,E=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(_)||_<0||isNaN(E)||E<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=_,this.right=E}interpolate(u,p,_){return p.top!=null&&u.top!=null&&(this.top=o.number(u.top,p.top,_)),p.bottom!=null&&u.bottom!=null&&(this.bottom=o.number(u.bottom,p.bottom,_)),p.left!=null&&u.left!=null&&(this.left=o.number(u.left,p.left,_)),p.right!=null&&u.right!=null&&(this.right=o.number(u.right,p.right,_)),this}getCenter(u,p){const _=o.clamp((this.left+u-this.right)/2,0,u),E=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.pointGeometry(_,E)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Vf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Jy(y,u){const p=o.getColumn(y,3);o.fromQuat(y,u),o.setColumn(y,3,p)}function yh(y,u){const p=o.identity$1([]);return o.rotateZ$1(p,p,-u),o.rotateX$1(p,p,-y),p}function Qy(y,u){const p=[y[0],y[1],0],_=[u[0],u[1],0];if(o.length(p)>=1e-15){const L=o.normalize([],p);o.scale$2(_,L,o.dot(_,L)),u[0]=_[0],u[1]=_[1]}const E=o.cross([],u,y);if(o.len(E)<1e-15)return null;const T=Math.atan2(-E[1],E[0]);return yh(Math.atan2(Math.sqrt(y[0]*y[0]+y[1]*y[1]),-y[2]),T)}class vh{constructor(u,p){this.position=u,this.orientation=p}get position(){return this._position}set position(u){if(u){const p=u instanceof o.MercatorCoordinate?u:new o.MercatorCoordinate(u[0],u[1],u[2]);this._renderWorldCopies&&(p.x=o.wrap(p.x,0,1)),this._position=p}else this._position=null}lookAtPoint(u,p){if(this.orientation=null,!this.position)return;const _=this.position,E=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(u)):0,T=o.MercatorCoordinate.fromLngLat(u,E),L=[T.x-_.x,T.y-_.y,T.z-_.z];p||(p=[0,0,1]),p[2]=Math.abs(p[2]),this.orientation=Qy(L,p)}setPitchBearing(u,p){this.orientation=yh(o.degToRad(u),o.degToRad(-p))}}class vu{constructor(u,p){this._transform=o.identity([]),this.orientation=p,this.position=u}get mercatorPosition(){const u=this.position;return new o.MercatorCoordinate(u[0],u[1],u[2])}get position(){const u=o.getColumn(this._transform,3);return[u[0],u[1],u[2]]}set position(u){var p;u&&o.setColumn(this._transform,3,[(p=u)[0],p[1],p[2],1])}get orientation(){return this._orientation}set orientation(u){this._orientation=u||o.identity$1([]),u&&Jy(this._transform,this._orientation)}getPitchBearing(){const u=this.forward(),p=this.right();return{bearing:Math.atan2(-p[1],p[0]),pitch:Math.atan2(Math.sqrt(u[0]*u[0]+u[1]*u[1]),-u[2])}}setPitchBearing(u,p){this._orientation=yh(u,p),Jy(this._transform,this._orientation)}forward(){const u=o.getColumn(this._transform,2);return[-u[0],-u[1],-u[2]]}up(){const u=o.getColumn(this._transform,1);return[-u[0],-u[1],-u[2]]}right(){const u=o.getColumn(this._transform,0);return[u[0],u[1],u[2]]}getCameraToWorld(u,p){const _=new Float64Array(16);return o.invert(_,this.getWorldToCamera(u,p)),_}getWorldToCameraPosition(u,p,_){const E=this.position;o.scale$2(E,E,-u);const T=new Float64Array(16);return o.fromScaling(T,[_,_,_]),o.translate(T,T,E),T[10]*=p,T}getWorldToCamera(u,p){const _=new Float64Array(16),E=new Float64Array(4),T=this.position;return o.conjugate(E,this._orientation),o.scale$2(T,T,-u),o.fromQuat(_,E),o.translate(_,_,T),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=p,_[9]*=p,_[10]*=p,_[11]*=p,_}getCameraToClipPerspective(u,p,_,E){const T=new Float64Array(16);return o.perspective(T,u,p,_,E),T}getDistanceToElevation(u,p=!1){const _=u===0?0:o.mercatorZfromAltitude(u,p?o.latFromMercatorY(this.position[1]):this.position[1]),E=this.forward();return(_-this.position[2])/E[2]}clone(){return new vu([...this.position],[...this.orientation])}}function _u(y,u){const p=Sl(y.projection,y.zoom,y.width,y.height),_=function(T,L,j,G,K){const X=new o.LngLat(j.lng-180*Tl,j.lat),te=new o.LngLat(j.lng+180*Tl,j.lat),ce=T.project(X.lng,X.lat),pe=T.project(te.lng,te.lat),me=-Math.atan2(pe.y-ce.y,pe.x-ce.x),ge=o.MercatorCoordinate.fromLngLat(j);ge.y=o.clamp(ge.y,-.999975,.999975);const ve=ge.toLngLat(),le=T.project(ve.lng,ve.lat),Ae=o.MercatorCoordinate.fromLngLat(ve);Ae.x+=Tl;const Te=Ae.toLngLat(),Re=T.project(Te.lng,Te.lat),He=Fc(Re.x-le.x,Re.y-le.y,me),je=o.MercatorCoordinate.fromLngLat(ve);je.y+=Tl;const Ge=je.toLngLat(),et=T.project(Ge.lng,Ge.lat),ot=Fc(et.x-le.x,et.y-le.y,me),ut=Math.abs(He.x)/Math.abs(ot.y),Ut=o.identity([]);o.rotateZ(Ut,Ut,-me*(1-(K?0:G)));const nt=o.identity([]);return o.scale(nt,nt,[1,1-(1-ut)*G,1]),nt[4]=-ot.x/ot.y*G,o.rotateZ(nt,nt,me),o.multiply(nt,Ut,nt),nt}(y.projection,0,y.center,p,u),E=_h(y);return o.scale(_,_,[E,E,1]),_}function _h(y){const u=y.projection,p=Sl(y.projection,y.zoom,y.width,y.height),_=Bc(u,y.center),E=Bc(u,o.LngLat.convert(u.center));return Math.pow(2,_*p+(1-p)*E)}function Sl(y,u,p,_,E=1/0){const T=y.range;if(!T)return 0;const L=Math.min(E,Math.max(p,_)),j=Math.log(L/1024)/Math.LN2;return o.smoothstep(T[0]+j,T[1]+j,u)}const Tl=1/4e4;function Bc(y,u){const p=o.clamp(u.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=new o.LngLat(u.lng-180*Tl,p),E=new o.LngLat(u.lng+180*Tl,p),T=y.project(_.lng,p),L=y.project(E.lng,p),j=o.MercatorCoordinate.fromLngLat(_),G=o.MercatorCoordinate.fromLngLat(E),K=L.x-T.x,X=L.y-T.y,te=G.x-j.x,ce=G.y-j.y,pe=Math.sqrt((te*te+ce*ce)/(K*K+X*X));return Math.log(pe)/Math.LN2}function Fc(y,u,p){const _=Math.cos(p),E=Math.sin(p);return{x:y*_-u*E,y:y*E+u*_}}class Jt{constructor(u,p,_,E,T,L,j){this.tileSize=512,this._renderWorldCopies=T===void 0||T,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=_==null?0:_,this._maxPitch=E==null?60:E,this.setProjection(L),this.setMaxBounds(j),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Vf,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new vu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const u=new Jt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return u._elevation=this._elevation,u._centerAltitude=this._centerAltitude,u._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,u.tileSize=this.tileSize,u.mercatorFromTransition=this.mercatorFromTransition,u.width=this.width,u.height=this.height,u.cameraElevationReference=this.cameraElevationReference,u._center=this._center,u._setZoom(this.zoom),u._seaLevelZoom=this._seaLevelZoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._nearZ=this._nearZ,u._farZ=this._farZ,u._averageElevation=this._averageElevation,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._camera=this._camera.clone(),u._calcMatrices(),u.freezeTileCoverage=this.freezeTileCoverage,u.frustumCorners=this.frustumCorners,u}get elevation(){return this._elevation}set elevation(u){this._elevation!==u&&(this._elevation=u,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(u,p=!1){const _=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||_)&&this._updateCameraOnTerrain(),(u||_)&&this._constrainCamera(p),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(u){this.projectionOptions=u||{name:"mercator"};const p=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const _=!m(p,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const u=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const p=u!==this.projection.name;return p&&this._calcMatrices(),p}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get cameraWorldSize(){const u=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(u))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(u){this.rotation=u}get rotation(){return-this.angle/Math.PI*180}set rotation(u){const p=-u*Math.PI/180;var _;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(_=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(E,T,L){var j=T[0],G=T[1],K=T[2],X=T[3],te=Math.sin(L),ce=Math.cos(L);E[0]=j*ce+K*te,E[1]=G*ce+X*te,E[2]=j*-te+K*ce,E[3]=G*-te+X*ce}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const p=o.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const u=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/u)}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=o.degToRad(u),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(u){this._averageElevation=u,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(u){const p=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._setZoom(p),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(u){this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const u=this._elevation;this._centerAltitude=u.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=u.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const u=this._elevation,p=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let E=0,T=0;for(let L=0;L<p.length;L++){const j=new o.pointGeometry(p[L][0]*this.width,_+p[L][1]*(this.height-_)),G=u.pointCoordinate(j);if(!G)continue;const K=1/Math.hypot(G[0]-this._camera.position[0],G[1]-this._camera.position[1]);E+=G[3]*K,T+=K}return T===0?NaN:E/T}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const u=this._seaLevelZoom,p=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*p,E=this._mercatorZfromZoom(u),T=this._mercatorZfromZoom(this._maxZoom),L=Math.max(E-_,T);this._setZoom(this._zoomFromMercatorZ(L))}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}computeZoomRelativeTo(u){const p=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,u.toAltitude()));let _;_=u.z<this._camera.position[2]?[p.x,p.y,p.z]:[u.x,u.y,u.z];const E=o.length(o.sub([],this._camera.position,_));return o.clamp(this._zoomFromMercatorZ(E),this._minZoom,this._maxZoom)}setFreeCameraOptions(u){if(!this.height||!u.position&&!u.orientation)return;this._updateCameraState();let p=!1;if(u.orientation&&!o.exactEquals(u.orientation,this._camera.orientation)&&(p=this._setCameraOrientation(u.orientation)),u.position){const _=[u.position.x,u.position.y,u.position.z];o.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),p=!0)}p&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const u=this._camera.position,p=new vh;return p.position=new o.MercatorCoordinate(u[0],u[1],u[2]),p.orientation=this._camera.orientation,p._elevation=this.elevation,p._renderWorldCopies=this.renderWorldCopies,p}_setCameraOrientation(u){if(!o.length$1(u))return!1;o.normalize$1(u,u);const p=o.transformQuat([],[0,0,-1],u),_=o.transformQuat([],[0,-1,0],u);if(_[2]<0)return!1;const E=Qy(p,_);return!!E&&(this._camera.orientation=E,!0)}_setCameraPosition(u){const p=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,E=this.cameraToCenterDistance;u[2]=o.clamp(u[2],E/_,E/p),this._camera.position=u}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,_){this._unmodified=!1,this._edgeInsets.interpolate(u,p,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const p=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(u){const p=[new o.UnwrappedTileID(0,u)];if(this.renderWorldCopies){const _=this.pointCoordinate(new o.pointGeometry(0,0)),E=this.pointCoordinate(new o.pointGeometry(this.width,0)),T=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),L=this.pointCoordinate(new o.pointGeometry(0,this.height)),j=Math.floor(Math.min(_.x,E.x,T.x,L.x)),G=Math.floor(Math.max(_.x,E.x,T.x,L.x)),K=1;for(let X=j-K;X<=G+K;X++)X!==0&&p.push(new o.UnwrappedTileID(X,u))}return p}coveringTiles(u){let p=this.coveringZoomLevel(u);const _=p,E=this.elevation&&!u.isTerrainDEM,T=this.projection.name==="mercator";if(u.minzoom!==void 0&&p<u.minzoom)return[];u.maxzoom!==void 0&&p>u.maxzoom&&(p=u.maxzoom);const L=this.locationCoordinate(this.center),j=this.center.lat,G=1<<p,K=[G*L.x,G*L.y,0],X=this.projection.name==="globe",te=!X,ce=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p,te),pe=X?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),me=G*o.mercatorZfromAltitude(1,this.center.lat),ge=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),ve=[G*pe.x,G*pe.y,ge*(te?1:me)],le=this.cameraToCenterDistance/u.tileSize*(u.roundZoom?1:.502),Ae=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?p:0,Te=u.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Re=u.isTerrainDEM?-Te:this._elevation?this._elevation.getMinElevationBelowMSL():0,He=this.projection.isReprojectedInTileSpace?_h(this):1,je=st=>{const dt=new o.MercatorCoordinate(st.x+25e-6,st.y,st.z),Dt=new o.MercatorCoordinate(st.x,st.y+25e-6,st.z),Ot=st.toLngLat(),un=dt.toLngLat(),Nn=Dt.toLngLat(),on=this.locationCoordinate(Ot),Qt=this.locationCoordinate(un),hn=this.locationCoordinate(Nn),Hn=Math.hypot(Qt.x-on.x,Qt.y-on.y),gn=Math.hypot(hn.x-on.x,hn.y-on.y);return Math.sqrt(Hn*gn)*He/25e-6},Ge=st=>{const Ye=Te,dt=Re;return{aabb:o.tileAABB(this,G,0,0,0,st,dt,Ye,this.projection),zoom:0,x:0,y:0,minZ:dt,maxZ:Ye,wrap:st,fullyVisible:!1}},et=[];let ot=[];const ut=p,Ut=u.reparseOverscaled?_:p,nt=st=>st*st,Mt=nt((ge-this._centerAltitude)*me),yt=st=>{if(!this._elevation||!st.tileID||!T)return;const Ye=this._elevation.getMinMaxForTile(st.tileID),dt=st.aabb;Ye?(dt.min[2]=Ye.min,dt.max[2]=Ye.max,dt.center[2]=(dt.min[2]+dt.max[2])/2):(st.shouldSplit=Rt(st),st.shouldSplit||(dt.min[2]=dt.max[2]=dt.center[2]=this._centerAltitude))},Rt=st=>{if(st.zoom<Ae)return!0;if(st.zoom===ut)return!1;if(st.shouldSplit!=null)return st.shouldSplit;const Ye=st.aabb.distanceX(ve),dt=st.aabb.distanceY(ve);let Dt=Mt,Ot=1;if(X){Dt=nt(st.aabb.distanceZ(ve));const on=Math.pow(2,st.zoom),Qt=o.latFromMercatorY((st.y+1)/on),hn=o.latFromMercatorY(st.y/on),Hn=Math.min(Math.max(j,Qt),hn),gn=o.circumferenceAtLatitude(Hn)/o.circumferenceAtLatitude(j);if(Ot=Hn===j?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,gn/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&st.zoom===ut-1&&gn>=.9)return!0}else if(E&&(Dt=nt(st.aabb.distanceZ(ve)*me)),this.projection.isReprojectedInTileSpace&&_<=5){const on=Math.pow(2,st.zoom),Qt=je(new o.MercatorCoordinate((st.x+.5)/on,(st.y+.5)/on));Ot=Qt>.85?1:Qt}const un=Ye*Ye+dt*dt+Dt,Nn=nt((1<<ut-st.zoom)*le*Ot*((on,Qt)=>{if(Qt*nt(.707)<on)return 1;const hn=Math.sqrt(Qt/on);return hn/(1.4144271570014144+(Math.pow(1.1,hn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Dt,Mt),un));return un<Nn};if(this.renderWorldCopies)for(let st=1;st<=3;st++)et.push(Ge(-st)),et.push(Ge(st));for(et.push(Ge(0));et.length>0;){const st=et.pop(),Ye=st.x,dt=st.y;let Dt=st.fullyVisible;if(!Dt){const Ot=st.aabb.intersects(ce);if(Ot===0)continue;Dt=Ot===2}if(st.zoom!==ut&&Rt(st))for(let Ot=0;Ot<4;Ot++){const un=(Ye<<1)+Ot%2,Nn=(dt<<1)+(Ot>>1),on={aabb:T?st.aabb.quadrant(Ot):o.tileAABB(this,G,st.zoom+1,un,Nn,st.wrap,st.minZ,st.maxZ,this.projection),zoom:st.zoom+1,x:un,y:Nn,wrap:st.wrap,fullyVisible:Dt,tileID:void 0,shouldSplit:void 0,minZ:st.minZ,maxZ:st.maxZ};E&&!X&&(on.tileID=new o.OverscaledTileID(st.zoom+1===ut?Ut:st.zoom+1,st.wrap,st.zoom+1,un,Nn),yt(on)),et.push(on)}else{const Ot=st.zoom===ut?Ut:st.zoom;if(u.minzoom&&u.minzoom>Ot)continue;const un=K[0]-(.5+Ye+(st.wrap<<st.zoom))*(1<<p-st.zoom),Nn=K[1]-.5-dt,on=st.tileID?st.tileID:new o.OverscaledTileID(Ot,st.wrap,st.zoom,Ye,dt);ot.push({tileID:on,distanceSq:un*un+Nn*Nn})}}if(this.fogCullDistSq){const st=this.fogCullDistSq,Ye=this.horizonLineFromTop();ot=ot.filter(dt=>{const Dt=[0,0,0,1],Ot=[o.EXTENT,o.EXTENT,0,1],un=this.calculateFogTileMatrix(dt.tileID.toUnwrapped());o.transformMat4$1(Dt,Dt,un),o.transformMat4$1(Ot,Ot,un);const Nn=o.getAABBPointSquareDist(Dt,Ot);if(Nn===0)return!0;let on=!1;const Qt=this._elevation;if(Qt&&Nn>st&&Ye!==0){const hn=this.calculateProjMatrix(dt.tileID.toUnwrapped());let Hn;u.isTerrainDEM||(Hn=Qt.getMinMaxForTile(dt.tileID)),Hn||(Hn={min:Re,max:Te});const gn=o.furthestTileCorner(this.rotation),lr=[gn[0]*o.EXTENT,gn[1]*o.EXTENT,Hn.max];o.transformMat4(lr,lr,hn),on=(1-lr[1])*this.height*.5<Ye}return Nn<st||on})}return ot.sort((st,Ye)=>st.distanceSq-Ye.distanceSq).map(st=>st.tileID)}resize(u,p){this.width=u,this.height=p,this.pixelsToGLUnits=[2/u,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const p=o.clamp(u.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=this.projection.project(u.lng,p);return new o.pointGeometry(_.x*this.worldSize,_.y*this.worldSize)}unproject(u){return this.projection.unproject(u.x/this.worldSize,u.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(u,p){let _,E;const T=this.centerPoint;if(this.projection.name==="globe"){const j=this.worldSize;_=(p.x-T.x)/j,E=(p.y-T.y)/j}else{const j=this.pointCoordinate(p),G=this.pointCoordinate(T);_=j.x-G.x,E=j.y-G.y}const L=this.locationCoordinate(u);this.setLocation(new o.MercatorCoordinate(L.x-_,L.y-E))}setLocation(u){this.center=this.coordinateLocation(u),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(u){return this.projection.locationPoint(this,u)}locationPoint3D(u){return this.projection.locationPoint(this,u,!0)}pointLocation(u){return this.coordinateLocation(this.pointCoordinate(u))}pointLocation3D(u){return this.coordinateLocation(this.pointCoordinate3D(u))}locationCoordinate(u,p){const _=p?o.mercatorZfromAltitude(p,u.lat):void 0,E=this.projection.project(u.lng,u.lat);return new o.MercatorCoordinate(E.x,E.y,_)}coordinateLocation(u){return this.projection.unproject(u.x,u.y)}pointRayIntersection(u,p){const _=p!=null?p:this._centerAltitude,E=[u.x,u.y,0,1],T=[u.x,u.y,1,1];o.transformMat4$1(E,E,this.pixelMatrixInverse),o.transformMat4$1(T,T,this.pixelMatrixInverse);const L=T[3];o.scale$1(E,E,1/E[3]),o.scale$1(T,T,1/L);const j=E[2],G=T[2];return{p0:E,p1:T,t:j===G?0:(_-j)/(G-j)}}screenPointToMercatorRay(u){const p=[u.x,u.y,0,1],_=[u.x,u.y,1,1];return o.transformMat4$1(p,p,this.pixelMatrixInverse),o.transformMat4$1(_,_,this.pixelMatrixInverse),o.scale$1(p,p,1/p[3]),o.scale$1(_,_,1/_[3]),p[2]=o.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,_[2]=o.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,o.scale$1(p,p,1/this.worldSize),o.scale$1(_,_,1/this.worldSize),new o.Ray([p[0],p[1],p[2]],o.normalize([],o.sub([],_,p)))}rayIntersectionCoordinate(u){const{p0:p,p1:_,t:E}=u,T=o.mercatorZfromAltitude(p[2],this._center.lat),L=o.mercatorZfromAltitude(_[2],this._center.lat);return new o.MercatorCoordinate(o.number(p[0],_[0],E)/this.worldSize,o.number(p[1],_[1],E)/this.worldSize,o.number(T,L,E))}pointCoordinate(u,p=this._centerAltitude){return this.projection.pointCoordinate(this,u.x,u.y,p)}pointCoordinate3D(u){if(!this.elevation)return this.pointCoordinate(u);let p=this.projection.pointCoordinate3D(this,u.x,u.y);if(p)return new o.MercatorCoordinate(p[0],p[1],p[2]);let _=0,E=this.horizonLineFromTop();if(u.y>E)return this.pointCoordinate(u);const T=.02*E,L=u.clone();for(let j=0;j<10&&E-_>T;j++){L.y=o.number(_,E,.66);const G=this.projection.pointCoordinate3D(this,L.x,L.y);G?(E=L.y,p=G):_=L.y}return p?new o.MercatorCoordinate(p[0],p[1],p[2]):this.pointCoordinate(u)}isPointAboveHorizon(u){return this.projection.isPointAboveHorizon(this,u)}_coordinatePoint(u,p){const _=p&&this.elevation?this.elevation.getAtPointOrZero(u,this._centerAltitude):this._centerAltitude,E=[u.x*this.worldSize,u.y*this.worldSize,_+u.toAltitude(),1];return o.transformMat4$1(E,E,this.pixelMatrix),E[3]>0?new o.pointGeometry(E[0]/E[3],E[1]/E[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:u,left:p}=this._edgeInsets,_=this.height-this._edgeInsets.bottom,E=this.width-this._edgeInsets.right,T=this.pointLocation3D(new o.pointGeometry(p,u)),L=this.pointLocation3D(new o.pointGeometry(E,u)),j=this.pointLocation3D(new o.pointGeometry(E,_)),G=this.pointLocation3D(new o.pointGeometry(p,_));let K=Math.min(T.lng,L.lng,j.lng,G.lng),X=Math.max(T.lng,L.lng,j.lng,G.lng),te=Math.min(T.lat,L.lat,j.lat,G.lat),ce=Math.max(T.lat,L.lat,j.lat,G.lat);const pe=Math.pow(2,-this.zoom)/16*270,me=this.projection.name==="globe"?1:4,ge=(ve,le,Ae,Te,Re)=>{const He=(ve+Ae)/2,je=(le+Te)/2,Ge=new o.pointGeometry(He,je),{lng:et,lat:ot}=this.pointLocation3D(Ge),ut=Math.max(0,K-et,te-ot,et-X,ot-ce);K=Math.min(K,et),X=Math.max(X,et),te=Math.min(te,ot),ce=Math.max(ce,ot),(Re<me||ut>pe)&&(ge(ve,le,He,je,Re+1),ge(He,je,Ae,Te,Re+1))};if(ge(p,u,E,u,1),ge(E,u,E,_,1),ge(E,_,p,_,1),ge(p,_,p,u,1),this.projection.name==="globe"){const[ve,le]=o.polesInViewport(this);ve?(ce=90,X=180,K=-180):le&&(te=-90,X=180,K=-180)}return new o.LngLatBounds(new o.LngLat(K,te),new o.LngLat(X,ce))}_getBoundsRectangular(u,p){const{top:_,left:E}=this._edgeInsets,T=this.height-this._edgeInsets.bottom,L=this.width-this._edgeInsets.right,j=new o.pointGeometry(E,_),G=new o.pointGeometry(L,_),K=new o.pointGeometry(L,T),X=new o.pointGeometry(E,T);let te=this.pointCoordinate(j,u),ce=this.pointCoordinate(G,u);const pe=this.pointCoordinate(K,p),me=this.pointCoordinate(X,p),ge=(ve,le)=>(le.y-ve.y)/(le.x-ve.x);return te.y>1&&ce.y>=0?te=new o.MercatorCoordinate((1-me.y)/ge(me,te)+me.x,1):te.y<0&&ce.y<=1&&(te=new o.MercatorCoordinate(-me.y/ge(me,te)+me.x,0)),ce.y>1&&te.y>=0?ce=new o.MercatorCoordinate((1-pe.y)/ge(pe,ce)+pe.x,1):ce.y<0&&te.y<=1&&(ce=new o.MercatorCoordinate(-pe.y/ge(pe,ce)+pe.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(te)).extend(this.coordinateLocation(ce)).extend(this.coordinateLocation(me)).extend(this.coordinateLocation(pe))}_getBoundsRectangularTerrain(){const u=this.elevation;if(!u.visibleDemTiles.length||u.isUsingMockSource())return this._getBoundsRectangular(0,0);const p=u.visibleDemTiles.reduce((_,E)=>{if(E.dem){const T=E.dem.tree;_.min=Math.min(_.min,T.minimums[0]),_.max=Math.max(_.max,T.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(p.min*u.exaggeration(),p.max*u.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(u=!0){const p=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-p*(1-this._horizonShift);return u?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(u){this.maxBounds=u,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,u&&(this.minLat=u.getSouth(),this.maxLat=u.getNorth(),this.minLng=u.getWest(),this.maxLng=u.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(u,p){return this.projection.createTileMatrix(this,p,u)}calculateDistanceTileData(u){const p=u.key,_=this._distanceTileDataCache;if(_[p])return _[p];const E=u.canonical,T=1/this.height,L=this.cameraWorldSize,j=L/this.zoomScale(E.z),G=(E.x+Math.pow(2,E.z)*u.wrap)*j,K=E.y*j,X=this.point;X.x*=L/this.worldSize,X.y*=L/this.worldSize;const te=this.angle,ce=Math.sin(-te),pe=-Math.cos(-te);return _[p]={bearing:[ce,pe],center:[(X.x-G)*T,(X.y-K)*T],scale:j/o.EXTENT*T},_[p]}calculateFogTileMatrix(u){const p=u.key,_=this._fogTileMatrixCache;if(_[p])return _[p];const E=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,u);return o.multiply(E,this.worldToFogMatrix,E),_[p]=new Float32Array(E),_[p]}calculateProjMatrix(u,p=!1){const _=u.key,E=p?this._alignedProjMatrixCache:this._projMatrixCache;if(E[_])return E[_];const T=this.calculatePosMatrix(u,this.worldSize);return o.multiply(T,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:p?this.alignedProjMatrix:this.projMatrix,T),E[_]=new Float32Array(T),E[_]}calculatePixelsToTileUnitsMatrix(u){const p=u.tileID.key,_=this._pixelsToTileUnitsCache;if(_[p])return _[p];const E=function(T,L){const{scale:j}=T.tileTransform,G=j*o.EXTENT/(T.tileSize*Math.pow(2,L.zoom-T.tileID.overscaledZ+T.tileID.canonical.z));return K=new Float32Array(4),ce=(X=L.inverseAdjustmentMatrix)[1],pe=X[2],me=X[3],ve=(te=[G,G])[1],K[0]=X[0]*(ge=te[0]),K[1]=ce*ge,K[2]=pe*ve,K[3]=me*ve,K;var K,X,te,ce,pe,me,ge,ve}(u,this);return _[p]=E,_[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const u=1/this.worldSize,p=o.fromScaling([],[u,u,u]);return o.multiply(p,p,this.globeMatrix),p}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const u=this._elevation;this._updateCameraState();const p=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(p),E=this._camera.forward(),T=o.mercatorZfromAltitude(1,this._center.lat);_[2]/=T,E[2]/=T,o.normalize(E,E);const L=u.raycast(_,E,u.exaggeration());if(L){const j=o.scaleAndAdd([],_,E,L),G=new o.MercatorCoordinate(j[0],j[1],o.mercatorZfromAltitude(j[2],o.latFromMercatorY(j[1]))),K=(G.z+o.length([G.x-_[0],G.y-_[1],G.z-_[2]*T]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(K),this._centerAltitude=G.toAltitude(),this._center=this.coordinateLocation(G),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(u=!1){if(!this._elevation)return;const p=this._elevation,_=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,E=this._computeCameraPosition(_),T=p.getAtPointOrZero(new o.MercatorCoordinate(...E)),L=this.pixelsPerMeter/this.worldSize*T,j=this._minimumHeightOverTerrain(),G=E[2]-L;if(G<=j)if(G<0||u){const K=this.locationCoordinate(this._center,this._centerAltitude),X=[E[0],E[1],K.z-E[2]],te=o.length(X);X[2]-=(j-G)/this._pixelsPerMercatorPixel;const ce=o.length(X);if(ce===0)return;o.scale$2(X,X,te/ce*this._pixelsPerMercatorPixel),this._camera.position=[E[0],E[1],K.z*this._pixelsPerMercatorPixel-X[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||u){const ce=this.center;return ce.lat=o.clamp(ce.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!u)&&(ce.lng=o.clamp(ce.lng,this.minLng,this.maxLng)),this.center=ce,void(this._constraining=!1)}const p=this._unmodified,{x:_,y:E}=this.point;let T=0,L=_,j=E;const G=this.width/2,K=this.height/2,X=this.worldMinY*this.scale,te=this.worldMaxY*this.scale;if(E-K<X&&(j=X+K),E+K>te&&(j=te-K),te-X<this.height&&(T=Math.max(T,this.height/(te-X)),j=(te+X)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ce=this.worldMinX*this.scale,pe=this.worldMaxX*this.scale,me=this.worldSize/2-(ce+pe)/2;L=(_+me+this.worldSize)%this.worldSize-me,L-G<ce&&(L=ce+G),L+G>pe&&(L=pe-G),pe-ce<this.width&&(T=Math.max(T,this.width/(pe-ce)),L=(pe+ce)/2)}L===_&&j===E||(this.center=this.unproject(new o.pointGeometry(L,j))),T&&(this.zoom+=this.scaleZoom(T)),this._constrainCamera(),this._unmodified=p,this._constraining=!1}_minZoomForBounds(){let u=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(u=Math.max(u,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),u}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,p=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const _=Sl(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const E=this.projection.zAxisUnit==="meters"?p:1,T=this._camera.getWorldToCamera(this.worldSize,E),L=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);L[8]=2*-u.x/this.width,L[9]=2*u.y/this.height;let j=o.mul([],L,T);if(this.projection.isReprojectedInTileSpace){const je=this.locationCoordinate(this.center),Ge=o.identity([]);o.translate(Ge,Ge,[je.x*this.worldSize,je.y*this.worldSize,0]),o.multiply(Ge,Ge,_u(this)),o.translate(Ge,Ge,[-je.x*this.worldSize,-je.y*this.worldSize,0]),o.multiply(j,j,Ge),this.inverseAdjustmentMatrix=function(et){const ot=_u(et,!0);return re([],[ot[0],ot[1],ot[4],ot[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],j,[this.worldSize,this.worldSize,this.worldSize/E,1]),this.projMatrix=j,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const G=o.invert([],L);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(G,this.horizonLineFromTop(),this.height);const K=new Float32Array(16);o.identity(K),o.scale(K,K,[1,-1,1]),o.rotateX(K,K,this._pitch),o.rotateZ(K,K,this.angle);const X=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),te=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;X[8]=2*-u.x/this.width,X[9]=2*(u.y+te)/this.height,this.skyboxMatrix=o.multiply(K,X,K);const ce=this.point,pe=ce.x,me=ce.y,ge=this.width%2/2,ve=this.height%2/2,le=Math.cos(this.angle),Ae=Math.sin(this.angle),Te=pe-Math.round(pe)+le*ge+Ae*ve,Re=me-Math.round(me)+le*ve+Ae*ge,He=new Float64Array(j);if(o.translate(He,He,[Te>.5?Te-1:Te,Re>.5?Re-1:Re,0]),this.alignedProjMatrix=He,j=o.create(),o.scale(j,j,[this.width/2,-this.height/2,1]),o.translate(j,j,[1,-1,0]),this.labelPlaneMatrix=j,j=o.create(),o.scale(j,j,[1,-1,1]),o.translate(j,j,[-1,-1,0]),o.scale(j,j,[2/this.width,2/this.height,1]),this.glCoordMatrix=j,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},j=o.invert(new Float64Array(16),this.pixelMatrix),!j)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=j,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const je=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(je,je,T),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=j;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const u=this.cameraWorldSizeForFog,p=this.cameraPixelsPerMeter,_=this._camera.position,E=1/this.height/this._pixelsPerMercatorPixel,T=[u,u,p];o.scale$2(T,T,E),o.scale$2(_,_,-1),o.multiply$2(_,_,T);const L=o.create();o.translate(L,L,_),o.scale(L,L,T),this.mercatorFogMatrix=L,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(u,p,E)}_computeCameraPosition(u){const p=(u=u||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),E=this.point,T=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*p-u/this.worldSize*this._centerAltitude;return[E.x/this.worldSize-_[0]*T,E.y/this.worldSize-_[1]*T,u/this.worldSize*this._centerAltitude-_[2]*T]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(u){const p=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=this._camera.position[2],E=u[2];let T=1;this.projection.wrap&&(this.center=this.center.wrap()),E>0&&(T=Math.min((p-_)/E,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,u,T),this._updateStateFromCamera()}_updateStateFromCamera(){const u=this._camera.position,p=this._camera.forward(),{pitch:_,bearing:E}=this._camera.getPitchBearing(),T=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,L=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),j=Math.max((u[2]-T)/Math.cos(_),L),G=this._zoomFromMercatorZ(j);o.scaleAndAdd(u,u,p,j),this._pitch=o.clamp(_,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(E,-Math.PI,Math.PI),this._setZoom(o.clamp(G,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(u[0],u[1],u[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(u){return Math.pow(2,u)*this.tileSize}_mercatorZfromZoom(u){return this.cameraToCenterDistance/this._worldSizeFromZoom(u)}_minimumHeightOverTerrain(){const u=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(u)}_zoomFromMercatorZ(u){return this.scaleZoom(this.cameraToCenterDistance/(u*this.tileSize))}zoomFromMercatorZAdjusted(u){let p=0,_=o.GLOBE_ZOOM_THRESHOLD_MAX,E=0,T=1/0;for(;_-p>1e-6&&_>p;){const L=p+.5*(_-p),j=this.tileSize*Math.pow(2,L),G=this.getCameraToCenterDistance(this.projection,L,j),K=this.scaleZoom(G/(u*this.tileSize)),X=Math.abs(L-K);X<T&&(T=X,E=L),L<K?p=L:_=L}return E}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(u,p){const _=Math.min(u.x,p.x),E=Math.max(u.x,p.x),T=Math.min(u.y,p.y),L=Math.max(u.y,p.y);if(T<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const j=[new o.pointGeometry(_,T),new o.pointGeometry(E,L),new o.pointGeometry(_,L),new o.pointGeometry(E,T)],G=this.renderWorldCopies?-3:0,K=this.renderWorldCopies?4:1;for(const X of j){const te=this.pointRayIntersection(X);if(te.t<0)return!0;const ce=this.rayIntersectionCoordinate(te);if(ce.x<G||ce.y<0||ce.x>K||ce.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(u,p){const _=o.length(o.sub([],this._camera.position,u)),E=this._zoomFromMercatorZ(_)+p;return _-this._mercatorZfromZoom(E)}getCameraPoint(){if(this.projection.name==="globe"){const u=function([p,_,E],T){const L=[p,_,E,1];o.transformMat4$1(L,L,T);const j=L[3]=Math.max(L[3],1e-6);return L[0]/=j,L[1]/=j,L[2]/=j,L}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(u[0],u[1])}{const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,u))}}getCameraToCenterDistance(u,p=this.zoom,_=this.worldSize){const E=Sl(u,p,this.width,this.height,1024),T=u.pixelSpaceConversion(this.center.lat,_,E);return .5/Math.tan(.5*this._fov)*this.height*T}getWorldToCameraMatrix(){const u=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(u,u,this.globeMatrix),u}}function na(y,u){let p=!1,_=null;const E=()=>{_=null,p&&(y(),_=setTimeout(E,u),p=!1)};return()=>(p=!0,_||E(),_)}class ev{constructor(u){this._hashName=u&&encodeURIComponent(u),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=na(this._updateHashUnthrottled.bind(this),300)}addTo(u){return this._map=u,o.window.addEventListener("hashchange",this._onHashChange,!1),u.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const u=this._map;if(!u)return"";const p=Hf(u);if(this._hashName){const _=this._hashName;let E=!1;const T=o.window.location.hash.slice(1).split("&").map(L=>{const j=L.split("=")[0];return j===_?(E=!0,`${j}=${p}`):L}).filter(L=>L);return E||T.push(`${_}=${p}`),`#${T.join("&")}`}return`#${p}`}_getCurrentHash(){const u=o.window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(p=_)}),(p&&p[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._map;if(!u)return!1;const p=this._getCurrentHash();if(p.length>=3&&!p.some(_=>isNaN(_))){const _=u.dragRotate.isEnabled()&&u.touchZoomRotate.isEnabled()?+(p[3]||0):u.getBearing();return u.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:_,pitch:+(p[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,u)}}function Hf(y,u){const p=y.getCenter(),_=Math.round(100*y.getZoom())/100,E=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,E),L=Math.round(p.lng*T)/T,j=Math.round(p.lat*T)/T,G=y.getBearing(),K=y.getPitch();let X=u?`/${L}/${j}/${_}`:`${_}/${j}/${L}`;return(G||K)&&(X+="/"+Math.round(10*G)/10),K&&(X+=`/${Math.round(K)}`),X}const Nc={linearity:.3,easing:o.bezier(0,0,.3,1)},xu=o.extend({deceleration:2500,maxSpeed:1400},Nc),tv=o.extend({deceleration:20,maxSpeed:1400},Nc),xh=o.extend({deceleration:1e3,maxSpeed:360},Nc),Wf=o.extend({deceleration:1e3,maxSpeed:90},Nc);class bh{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=o.exported.now();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(o.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const p={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)p.zoom+=T.zoomDelta||0,p.bearing+=T.bearingDelta||0,p.pitch+=T.pitchDelta||0,T.panDelta&&p.pan._add(T.panDelta),T.around&&(p.around=T.around),T.pinchAround&&(p.pinchAround=T.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(p.pan.mag()){const T=Uc(p.pan.mag(),_,o.extend({},xu,u||{}));E.offset=p.pan.mult(T.amount/p.pan.mag()),E.center=this._map.transform.center,$c(E,T)}if(p.zoom){const T=Uc(p.zoom,_,tv);E.zoom=this._map.transform.zoom+T.amount,$c(E,T)}if(p.bearing){const T=Uc(p.bearing,_,xh);E.bearing=this._map.transform.bearing+o.clamp(T.amount,-179,179),$c(E,T)}if(p.pitch){const T=Uc(p.pitch,_,Wf);E.pitch=this._map.transform.pitch+T.amount,$c(E,T)}if(E.zoom||E.bearing){const T=p.pinchAround===void 0?p.around:p.pinchAround;E.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),E.noMoveStart=!0,E}}function $c(y,u){(!y.duration||y.duration<u.duration)&&(y.duration=u.duration,y.easing=u.easing)}function Uc(y,u,p){const{maxSpeed:_,linearity:E,deceleration:T}=p,L=o.clamp(y*E/(u/1e3),-_,_),j=Math.abs(L)/(T*E);return{easing:p.easing,duration:1e3*j,amount:L*(j/2)}}class Vi extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,_,E={}){const T=S(p.getCanvasContainer(),_),L=p.unproject(T);super(u,o.extend({point:T,lngLat:L,originalEvent:_},E)),this._defaultPrevented=!1,this.target=p}}class wh extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,_){const E=u==="touchend"?_.changedTouches:_.touches,T=b(p.getCanvasContainer(),E),L=T.map(G=>p.unproject(G)),j=T.reduce((G,K,X,te)=>G.add(K.div(te.length)),new o.pointGeometry(0,0));super(u,{points:T,point:j,lngLats:L,lngLat:p.unproject(j),originalEvent:_}),this._defaultPrevented=!1}}class Z1 extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,_){super(u,{originalEvent:_}),this._defaultPrevented=!1}}class nv{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){this._mousedownPos=void 0}wheel(u){return this._firePreventable(new Z1(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new Vi(u.type,this._map,u))}mouseup(u){this._map.fire(new Vi(u.type,this._map,u))}preclick(u){const p=o.extend({},u);p.type="preclick",this._map.fire(new Vi(p.type,this._map,p))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||(this.preclick(u),this._map.fire(new Vi(u.type,this._map,u)))}dblclick(u){return this._firePreventable(new Vi(u.type,this._map,u))}mouseover(u){this._map.fire(new Vi(u.type,this._map,u))}mouseout(u){this._map.fire(new Vi(u.type,this._map,u))}touchstart(u){return this._firePreventable(new wh(u.type,this._map,u))}touchmove(u){this._map.fire(new wh(u.type,this._map,u))}touchend(u){this._map.fire(new wh(u.type,this._map,u))}touchcancel(u){this._map.fire(new wh(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Eh{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(u){this._map.fire(new Vi(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Vi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._map.fire(new Vi(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gf{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(U(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const _=p,E=this._startPos,T=this._lastPos;if(!E||!T||T.equals(_)||!this._box&&_.dist(E)<this._clickTolerance)return;this._lastPos=_,this._box||(this._box=O("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const L=Math.min(E.x,_.x),j=Math.max(E.x,_.x),G=Math.min(E.y,_.y),K=Math.max(E.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${L}px,${G}px)`,this._box.style.width=j-L+"px",this._box.style.height=K-G+"px")})}mouseupWindow(u,p){if(!this._active)return;const _=this._startPos,E=p;if(_&&u.button===0){if(this.reset(),z(),_.x!==E.x||_.y!==E.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:T=>T.fitScreenCoordinates(_,E,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",u)}}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),W(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new o.Event(u,{originalEvent:p}))}}function Ch(y,u){const p={};for(let _=0;_<y.length;_++)p[y[_].identifier]=u[_];return p}class rv{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(u,p,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=u.timeStamp),_.length===this.numTouches&&(this.centroid=function(E){const T=new o.pointGeometry(0,0);for(const L of E)T._add(L);return T.div(E.length)}(p),this.touches=Ch(_,p)))}touchmove(u,p,_){if(this.aborted||!this.centroid)return;const E=Ch(_,p);for(const T in this.touches){const L=this.touches[T],j=E[T];(!j||j.dist(L)>30)&&(this.aborted=!0)}}touchend(u,p,_){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const E=!this.aborted&&this.centroid;if(this.reset(),E)return E}}}class bu{constructor(u){this.singleTap=new rv(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(u,p,_){this.singleTap.touchstart(u,p,_)}touchmove(u,p,_){this.singleTap.touchmove(u,p,_)}touchend(u,p,_){const E=this.singleTap.touchend(u,p,_);if(E){const T=u.timeStamp-this.lastTime<500,L=!this.lastTap||this.lastTap.dist(E)<30;if(T&&L||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=E,this.count===this.numTaps)return this.reset(),E}}}class qf{constructor(){this._zoomIn=new bu({numTouches:1,numTaps:2}),this._zoomOut=new bu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,_){this._zoomIn.touchstart(u,p,_),this._zoomOut.touchstart(u,p,_)}touchmove(u,p,_){this._zoomIn.touchmove(u,p,_),this._zoomOut.touchmove(u,p,_)}touchend(u,p,_){const E=this._zoomIn.touchend(u,p,_),T=this._zoomOut.touchend(u,p,_);return E?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()+1,around:L.unproject(E)},{originalEvent:u})}):T?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:L.getZoom()-1,around:L.unproject(T)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const iv={0:1,2:2};class Sh{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(u,p){return!1}_move(u,p){return{}}mousedown(u,p){if(this._lastPoint)return;const _=D(u);this._correctButton(u,_)&&(this._lastPoint=p,this._eventButton=_)}mousemoveWindow(u,p){const _=this._lastPoint;if(_){if(u.preventDefault(),this._eventButton!=null&&function(E,T){const L=iv[T];return E.buttons===void 0||(E.buttons&L)!==L}(u,this._eventButton))this.reset();else if(this._moved||!(p.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(_,p)}}mouseupWindow(u){this._lastPoint&&D(u)===this._eventButton&&(this._moved&&z(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ov extends Sh{mousedown(u,p){super.mousedown(u,p),this._lastPoint&&(this._active=!0)}_correctButton(u,p){return p===0&&!u.ctrlKey}_move(u,p){return{around:p,panDelta:p.sub(u)}}}class Zf extends Sh{_correctButton(u,p){return p===0&&u.ctrlKey||p===2}_move(u,p){const _=.8*(p.x-u.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(u){u.preventDefault()}}class Xf extends Sh{_correctButton(u,p){return p===0&&u.ctrlKey||p===2}_move(u,p){const _=-.5*(p.y-u.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(u){u.preventDefault()}}class wu{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._minTouches=1,this._clickTolerance=p.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(u,p,_){return this._calculateTransform(u,p,_)}touchmove(u,p,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return u.cancelable&&u.preventDefault(),this._calculateTransform(u,p,_)}}touchend(u,p,_){this._calculateTransform(u,p,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,_){_.length>0&&(this._active=!0);const E=Ch(_,p),T=new o.pointGeometry(0,0),L=new o.pointGeometry(0,0);let j=0;for(const K in E){const X=E[K],te=this._touches[K];te&&(T._add(X),L._add(X.sub(te)),j++,E[K]=X)}if(this._touches=E,j<this._minTouches||!L.mag())return;const G=L.div(j);return this._sum._add(G),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(j),panDelta:G}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=O("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Th{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(u){}_move(u,p,_){return{}}touchstart(u,p,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,_){const E=this._firstTwoTouches;if(!E)return;u.preventDefault();const[T,L]=E,j=jc(_,p,T),G=jc(_,p,L);if(!j||!G)return;const K=this._aroundCenter?null:j.add(G).div(2);return this._move([j,G],K,u)}touchend(u,p,_){if(!this._firstTwoTouches)return;const[E,T]=this._firstTwoTouches,L=jc(_,p,E),j=jc(_,p,T);L&&j||(this._active&&z(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function jc(y,u,p){for(let _=0;_<y.length;_++)if(y[_].identifier===p)return u[_]}function av(y,u){return Math.log(y/u)/Math.LN2}class sv extends Th{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const _=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(av(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:av(this._distance,_),pinchAround:p}}}function Kf(y,u){return 180*y.angleWith(u)/Math.PI}class lv extends Th{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p){const _=this._vector;if(this._vector=u[0].sub(u[1]),_&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Kf(this._vector,_),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,_=this._startVector;if(!_)return!1;const E=Kf(u,_);return Math.abs(E)<p}}function kh(y){return Math.abs(y.y)>Math.abs(y.x)}class ao extends Th{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(u){this._lastPoints=u,kh(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,_){const E=this._lastPoints;if(!E)return;const T=u[0].sub(E[0]),L=u[1].sub(E[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(T,L,_.timeStamp),!this._valid)?void 0:(this._lastPoints=u,this._active=!0,{pitchDelta:(T.y+L.y)/2*-.5})}gestureBeginsVertically(u,p,_){if(this._valid!==void 0)return this._valid;const E=u.mag()>=2,T=p.mag()>=2;if(!E&&!T)return;if(!E||!T)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const L=u.y>0==p.y>0;return kh(u)&&kh(p)&&L}}const X1={panStep:100,bearingStep:15,pitchStep:10};class uv{constructor(){const u=X1;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,_=0,E=0,T=0,L=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?_=-1:(u.preventDefault(),T=-1);break;case 39:u.shiftKey?_=1:(u.preventDefault(),T=1);break;case 38:u.shiftKey?E=1:(u.preventDefault(),L=-1);break;case 40:u.shiftKey?E=-1:(u.preventDefault(),L=1);break;default:return}return this._rotationDisabled&&(_=0,E=0),{cameraAnimation:j=>{const G=j.getZoom();j.easeTo({duration:300,easeId:"keyboardHandler",easing:K1,zoom:p?Math.round(G)+p*(u.shiftKey?2:1):G,bearing:j.getBearing()+_*this._bearingStep,pitch:j.getPitch()+E*this._pitchStep,offset:[-T*this._panStep,-L*this._panStep],center:j.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function K1(y){return y*(2-y)}const cv=4.000244140625;class gs{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(u.ctrlKey||u.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let p=u.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const _=o.exported.now(),E=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,p!==0&&p%cv==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":E>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(E*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=S(this._el,u);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:p,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;this._type==="wheel"&&u.projection.wrap&&(u._center.lng>=180||u._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const p=()=>u._terrainEnabled()&&this._aroundCoord?u.computeZoomRelativeTo(this._aroundCoord):u.zoom;if(this._delta!==0){const G=this._type==="wheel"&&Math.abs(this._delta)>cv?this._wheelZoomRate:this._defaultZoomRate;let K=2/(1+Math.exp(-Math.abs(this._delta*G)));this._delta<0&&K!==0&&(K=1/K);const X=p(),te=Math.pow(2,X),ce=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):te;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(ce*K))),this._type==="wheel"&&(this._startZoom=X,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:p(),E=this._startZoom,T=this._easing;let L,j=!1;if(this._type==="wheel"&&E&&T){const G=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),K=T(G);L=o.number(E,_,K),G<1?this._frameId||(this._frameId=!0):j=!0}else L=_,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:L-p(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=o.ease;if(this._prevEase){const _=this._prevEase,E=(o.exported.now()-_.start)/_.duration,T=_.easing(E+.01)-_.easing(E),L=.27/Math.sqrt(T*T+1e-4)*.01,j=Math.sqrt(.0729-L*L);p=o.bezier(L,j,.25,1)}return this._prevEase={start:o.exported.now(),duration:u,easing:p},p}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=O("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class dv{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Eu{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(u,p){return u.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(u.shiftKey?-1:1),around:_.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ja{constructor(){this._tap=new bu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(u,p,_){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=p[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(u,p,_))}touchmove(u,p,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const E=p[0],T=E.y-this._swipePoint.y;return this._swipePoint=E,u.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(u,p,_)}touchend(u,p,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(u,p,_)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ah{constructor(u,p,_){this._el=u,this._mousePan=p,this._touchPan=_}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class rn{constructor(u,p,_){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=p,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hv{constructor(u,p,_,E){this._el=u,this._touchZoom=p,this._touchRotate=_,this._tapDragZoom=E,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Vc=y=>y.zoom||y.drag||y.pitch||y.rotate;class Hc extends o.Event{}class Wc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(u,p){const _=o.sub([],p,u);this.radius=o.length(_[2]<0?o.div([],_,this.constants):[_[0],_[1],0])}projectRay(u){o.div(u,u,this.constants),o.normalize(u,u),o.mul$1(u,u,this.constants);const p=o.scale$2([],u,this.radius);if(p[2]>0){const _=o.scale$2([],[0,0,1],o.dot(p,[0,0,1])),E=o.scale$2([],o.normalize([],[p[0],p[1],0]),this.radius),T=o.add([],p,o.scale$2([],o.sub([],o.add([],E,_),p),2));p[0]=T[0],p[1]=T[1]}return p}}function Gc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class pv{constructor(u,p){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new bh(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Wc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[E,T,L]of this._listeners)E.addEventListener(T,E===o.window.document?this.handleWindowEvent:this.handleEvent,L)}destroy(){for(const[u,p,_]of this._listeners)u.removeEventListener(p,u===o.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(u){const p=this._map,_=p.getCanvasContainer();this._add("mapEvent",new nv(p,u));const E=p.boxZoom=new Gf(p,u);this._add("boxZoom",E);const T=new qf,L=new Eu;p.doubleClickZoom=new dv(L,T),this._add("tapZoom",T),this._add("clickZoom",L);const j=new ja;this._add("tapDragZoom",j);const G=p.touchPitch=new ao(p);this._add("touchPitch",G);const K=new Zf(u),X=new Xf(u);p.dragRotate=new rn(u,K,X),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]);const te=new ov(u),ce=new wu(p,u);p.dragPan=new Ah(_,te,ce),this._add("mousePan",te),this._add("touchPan",ce,["touchZoom","touchRotate"]);const pe=new lv,me=new sv;p.touchZoomRotate=new hv(_,me,pe,j),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Eh(p));const ge=p.scrollZoom=new gs(p,this);this._add("scrollZoom",ge,["mousePan"]);const ve=p.keyboard=new uv;this._add("keyboard",ve);for(const le of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[le]&&p[le].enable(u[le])}_add(u,p,_){this._handlers.push({handlerName:u,handler:p,allowed:_}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vc(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(u,p,_){for(const E in u)if(E!==_&&(!p||p.indexOf(E)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const p=[];for(const _ of u)this._el.contains(_.target)&&p.push(_);return p}handleEvent(u,p){this._updatingCamera=!0;const _=u.type==="renderFrame",E=_?void 0:u,T={needsRenderFrame:!1},L={},j={},G=u.touches?this._getMapTouches(u.touches):void 0,K=G?b(this._el,G):_?void 0:S(this._el,u);for(const{handlerName:ce,handler:pe,allowed:me}of this._handlers){if(!pe.isEnabled())continue;let ge;this._blockedByActive(j,me,ce)?pe.reset():pe[p||u.type]&&(ge=pe[p||u.type](u,K,G),this.mergeHandlerResult(T,L,ge,ce,E),ge&&ge.needsRenderFrame&&this._triggerRenderFrame()),(ge||pe.isActive())&&(j[ce]=pe)}const X={};for(const ce in this._previousActiveHandlers)j[ce]||(X[ce]=E);this._previousActiveHandlers=j,(Object.keys(X).length||Gc(T))&&(this._changes.push([T,L,X]),this._triggerRenderFrame()),(Object.keys(j).length||Gc(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:te}=T;te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],te(this._map))}mergeHandlerResult(u,p,_,E,T){if(!_)return;o.extend(u,_);const L={handlerName:E,originalEvent:_.originalEvent||T};_.zoomDelta!==void 0&&(p.zoom=L),_.panDelta!==void 0&&(p.drag=L),_.pitchDelta!==void 0&&(p.pitch=L),_.bearingDelta!==void 0&&(p.rotate=L)}_applyChanges(){const u={},p={},_={};for(const[E,T,L]of this._changes)E.panDelta&&(u.panDelta=(u.panDelta||new o.pointGeometry(0,0))._add(E.panDelta)),E.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(u.around=E.around),E.aroundCoord!==void 0&&(u.aroundCoord=E.aroundCoord),E.pinchAround!==void 0&&(u.pinchAround=E.pinchAround),E.noInertia&&(u.noInertia=E.noInertia),o.extend(p,T),o.extend(_,L);this._updateMapTransform(u,p,_),this._changes=[]}_updateMapTransform(u,p,_){const E=this._map,T=E.transform,L=Ae=>[Ae.x,Ae.y,Ae.z];if((Ae=>{const Te=this._eventsInProgress.drag;return Te&&!this._handlersById[Te.handlerName].isActive()})()&&!Gc(u)){const Ae=T.zoom;T.cameraElevationReference="sea",T.recenterOnTerrain(),T.cameraElevationReference="ground",Ae!==T.zoom&&this._map._update(!0)}if(T._isCameraConstrained&&E._stop(!0),!Gc(u))return void this._fireEvents(p,_,!0);let{panDelta:j,zoomDelta:G,bearingDelta:K,pitchDelta:X,around:te,aroundCoord:ce,pinchAround:pe}=u;T._isCameraConstrained&&(G>0&&(G=0),T._isCameraConstrained=!1),pe!==void 0&&(te=pe),(G||(Ae=>p.drag&&!this._eventsInProgress.drag)())&&te&&(this._dragOrigin=L(T.pointCoordinate3D(te)),this._trackingEllipsoid.setup(T._camera.position,this._dragOrigin)),T.cameraElevationReference="sea",E._stop(!0),te=te||E.transform.centerPoint,K&&(T.bearing+=K),X&&(T.pitch+=X),T._updateCameraState();const me=[0,0,0];if(j)if(T.projection.name==="mercator"){const Ae=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(te).dir),Te=this._trackingEllipsoid.projectRay(T.screenPointToMercatorRay(te.sub(j)).dir);me[0]=Te[0]-Ae[0],me[1]=Te[1]-Ae[1]}else{const Ae=T.pointCoordinate(te);if(T.projection.name==="globe"){j=j.rotate(-T.angle);const Te=T._pixelsPerMercatorPixel/T.worldSize;me[0]=-j.x*o.mercatorScale(o.latFromMercatorY(Ae.y))*Te,me[1]=-j.y*o.mercatorScale(T.center.lat)*Te}else{const Te=T.pointCoordinate(te.sub(j));Ae&&Te&&(me[0]=Te.x-Ae.x,me[1]=Te.y-Ae.y)}}const ge=T.zoom,ve=[0,0,0];if(G){const Ae=L(ce||T.pointCoordinate3D(te)),Te={dir:o.normalize([],o.sub([],Ae,T._camera.position))};if(Te.dir[2]<0){const Re=T.zoomDeltaToMovement(Ae,G);o.scale$2(ve,Te.dir,Re)}}const le=o.add(me,me,ve);T._translateCameraConstrained(le),G&&Math.abs(T.zoom-ge)>1e-4&&T.recenterOnTerrain(),T.cameraElevationReference="ground",this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,_,!0)}_fireEvents(u,p,_){const E=Vc(this._eventsInProgress),T=Vc(u),L={};for(const X in u){const{originalEvent:te}=u[X];this._eventsInProgress[X]||(L[`${X}start`]=te),this._eventsInProgress[X]=u[X]}!E&&T&&this._fireEvent("movestart",T.originalEvent);for(const X in L)this._fireEvent(X,L[X]);T&&this._fireEvent("move",T.originalEvent);for(const X in u){const{originalEvent:te}=u[X];this._fireEvent(X,te)}const j={};let G;for(const X in this._eventsInProgress){const{handlerName:te,originalEvent:ce}=this._eventsInProgress[X];this._handlersById[te].isActive()||(delete this._eventsInProgress[X],G=p[te]||ce,j[`${X}end`]=G)}for(const X in j)this._fireEvent(X,j[X]);const K=Vc(this._eventsInProgress);if(_&&(E||T)&&!K){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ce=>ce!==0&&-this._bearingSnap<ce&&ce<this._bearingSnap;X?(te(X.bearing||this._map.getBearing())&&(X.bearing=0),this._map.easeTo(X,{originalEvent:G})):(this._map.fire(new o.Event("moveend",{originalEvent:G})),te(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new o.Event(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{this._frameId=void 0,this.handleEvent(new Hc("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Yf="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class fv extends o.Evented{constructor(u,p){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=p.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}panBy(u,p,_){return u=o.pointGeometry.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},p),_)}panTo(u,p,_){return this.easeTo(o.extend({center:u},p),_)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,_){return this.easeTo(o.extend({zoom:u},p),_)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,_){return this.easeTo(o.extend({bearing:u},p),_)}resetNorth(u,p){return this.rotateTo(0,o.extend({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}cameraForBounds(u,p){u=o.LngLatBounds.convert(u);const _=p&&p.bearing||0,E=p&&p.pitch||0,T=u.getNorthWest(),L=u.getSouthEast();return this._cameraForBounds(this.transform,T,L,_,E,p)}_extendCameraOptions(u){const p={top:0,bottom:0,right:0,left:0};if(typeof(u=o.extend({padding:p,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const _=u.padding;u.padding={top:_,bottom:_,right:_,left:_}}return u.padding=o.extend(p,u.padding),u}_minimumAABBFrustumDistance(u,p){const _=p.max[0]-p.min[0],E=p.max[1]-p.min[1];return _/E>u.aspect?_/(2*Math.tan(.5*u.fovX)*u.aspect):E/(2*Math.tan(.5*u.fovY)*u.aspect)}_cameraForBoundsOnGlobe(u,p,_,E,T,L){const j=u.clone(),G=this._extendCameraOptions(L);j.bearing=E,j.pitch=T;const K=o.LngLat.convert(p),X=o.LngLat.convert(_),te=.5*(K.lat+X.lat),ce=.5*(K.lng+X.lng),pe=o.latLngToECEF(te,ce),me=o.normalize([],pe),ge=o.normalize([],o.cross([],me,[0,1,0])),ve=o.cross([],ge,me),le=[ge[0],ge[1],ge[2],0,ve[0],ve[1],ve[2],0,me[0],me[1],me[2],0,0,0,0,1],Ae=[pe,o.latLngToECEF(K.lat,K.lng),o.latLngToECEF(X.lat,K.lng),o.latLngToECEF(X.lat,X.lng),o.latLngToECEF(K.lat,X.lng),o.latLngToECEF(te,K.lng),o.latLngToECEF(te,X.lng),o.latLngToECEF(K.lat,ce),o.latLngToECEF(X.lat,ce)];let Te=o.Aabb.fromPoints(Ae.map(Dt=>[o.dot(ge,Dt),o.dot(ve,Dt),o.dot(me,Dt)]));const Re=o.transformMat4([],Te.center,le);o.squaredLength(Re)===0&&o.set(Re,0,0,1),o.normalize(Re,Re),o.scale$2(Re,Re,o.GLOBE_RADIUS),j.center=o.ecefToLatLng(Re);const He=j.getWorldToCameraMatrix(),je=o.invert(new Float64Array(16),He);Te=o.Aabb.applyTransform(Te,o.multiply([],He,le)),o.transformMat4(Re,Re,He);const Ge=.5*(Te.max[2]-Te.min[2]),et=this._minimumAABBFrustumDistance(j,Te),ot=o.scale$2([],[0,0,1],Ge),ut=o.add(ot,Re,ot),Ut=et+(j.pitch===0?0:o.distance(Re,ut)),nt=j.globeCenterInViewSpace,Mt=o.sub([],Re,[nt[0],nt[1],nt[2]]);o.normalize(Mt,Mt),o.scale$2(Mt,Mt,Ut);const yt=o.add([],Re,Mt);o.transformMat4(yt,yt,je);const Rt=o.earthRadius/o.GLOBE_RADIUS,st=o.length(yt),Ye=o.mercatorZfromAltitude(Math.max(st*Rt-o.earthRadius,Number.EPSILON),0),dt=Math.min(j.zoomFromMercatorZAdjusted(Ye),G.maxZoom);return dt>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(j.setProjection({name:"mercator"}),j.zoom=dt,this._cameraForBounds(j,p,_,E,T,L)):{center:j.center,zoom:dt,bearing:E,pitch:T}}queryTerrainElevation(u,p){const _=this.transform.elevation;return _?(p=o.extend({},{exaggerated:!0},p),_.getAtPoint(o.MercatorCoordinate.fromLngLat(u),null,p.exaggerated)):null}_cameraForBounds(u,p,_,E,T,L){if(u.projection.name==="globe")return this._cameraForBoundsOnGlobe(u,p,_,E,T,L);const j=u.clone(),G=this._extendCameraOptions(L),K=j.padding;j.bearing=E,j.pitch=T;const X=o.LngLat.convert(p),te=o.LngLat.convert(_),ce=new o.LngLat(X.lng,te.lat),pe=new o.LngLat(te.lng,X.lat),me=j.project(X),ge=j.project(te),ve=this.queryTerrainElevation(X),le=this.queryTerrainElevation(te),Ae=this.queryTerrainElevation(ce),Te=this.queryTerrainElevation(pe),Re=[[me.x,me.y,Math.min(ve||0,le||0,Ae||0,Te||0)],[ge.x,ge.y,Math.max(ve||0,le||0,Ae||0,Te||0)]];let He=o.Aabb.fromPoints(Re);const je=j.getWorldToCameraMatrix(),Ge=o.invert(new Float64Array(16),je);He=o.Aabb.applyTransform(He,je);const et=o.sub([],He.max,He.min),ot=K.left||0,ut=K.right||0,Ut=K.bottom||0,nt=K.top||0,{left:Mt,right:yt,top:Rt,bottom:st}=G.padding,Ye=.5*(ot+ut),dt=.5*(nt+Ut),Dt=Math.min(j.scaleZoom(j.scale*Math.min((j.width-(ot+ut+Mt+yt))/et[0],(j.height-(Ut+nt+st+Rt))/et[1])),G.maxZoom),Ot=j.scale/j.zoomScale(Dt);He=new o.Aabb([He.min[0]-(Mt+Ye)*Ot,He.min[1]-(st+dt)*Ot,He.min[2]],[He.max[0]+(yt+Ye)*Ot,He.max[1]+(Rt+dt)*Ot,He.max[2]]);const un=.5*et[2],Nn=this._minimumAABBFrustumDistance(j,He),on=[0,0,1,0];o.transformMat4$1(on,on,je),o.normalize$2(on,on);const Qt=o.scale$2([],on,Nn+un),hn=o.add([],He.center,Qt),Hn=(typeof G.offset.x=="number"&&typeof G.offset.y=="number"?new o.pointGeometry(G.offset.x,G.offset.y):o.pointGeometry.convert(G.offset)).rotate(-o.degToRad(E));He.center[0]-=Hn.x*Ot,He.center[1]+=Hn.y*Ot,o.transformMat4(He.center,He.center,Ge),o.transformMat4(hn,hn,Ge);const gn=[He.center[0],He.center[1],hn[2]*j.pixelsPerMeter];o.scale$2(gn,gn,1/j.worldSize);const lr=o.lngFromMercatorX(gn[0]),fr=o.latFromMercatorY(gn[1]),zr=Math.min(j._zoomFromMercatorZ(gn[2]),G.maxZoom),Mr=new o.LngLat(lr,fr);return j.mercatorFromTransition&&zr<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(j.setProjection({name:"globe"}),j.zoom=zr,this._cameraForBounds(j,p,_,E,T,L)):{center:Mr,zoom:zr,bearing:E,pitch:T}}fitBounds(u,p,_){const E=this.cameraForBounds(u,p);return this._fitInternal(E,p,_)}fitScreenCoordinates(u,p,_,E,T){const L=o.pointGeometry.convert(u),j=o.pointGeometry.convert(p),G=new o.pointGeometry(Math.min(L.x,j.x),Math.min(L.y,j.y)),K=new o.pointGeometry(Math.max(L.x,j.x),Math.max(L.y,j.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(L,j))return this;const X=this.transform.pointLocation3D(G),te=this.transform.pointLocation3D(K),ce=this.transform.pointLocation3D(new o.pointGeometry(G.x,K.y)),pe=this.transform.pointLocation3D(new o.pointGeometry(K.x,G.y)),me=[Math.min(X.lng,te.lng,ce.lng,pe.lng),Math.min(X.lat,te.lat,ce.lat,pe.lat)],ge=[Math.max(X.lng,te.lng,ce.lng,pe.lng),Math.max(X.lat,te.lat,ce.lat,pe.lat)],ve=E&&E.pitch?E.pitch:this.getPitch(),le=this._cameraForBounds(this.transform,me,ge,_,ve,E);return this._fitInternal(le,E,T)}_fitInternal(u,p,_){return u?(delete(p=o.extend(u,p)).padding,p.linear?this.easeTo(p,_):this.flyTo(p,_)):this}jumpTo(u,p){this.stop();const _=u.preloadOnly?this.transform.clone():this.transform;let E=!1,T=!1,L=!1;return"zoom"in u&&_.zoom!==+u.zoom&&(E=!0,_.zoom=+u.zoom),u.center!==void 0&&(_.center=o.LngLat.convert(u.center)),"bearing"in u&&_.bearing!==+u.bearing&&(T=!0,_.bearing=+u.bearing),"pitch"in u&&_.pitch!==+u.pitch&&(L=!0,_.pitch=+u.pitch),u.padding==null||_.isPaddingEqual(u.padding)||(_.padding=u.padding),u.preloadOnly?(this._preloadTiles(_),this):(this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),E&&this.fire(new o.Event("zoomstart",p)).fire(new o.Event("zoom",p)).fire(new o.Event("zoomend",p)),T&&this.fire(new o.Event("rotatestart",p)).fire(new o.Event("rotate",p)).fire(new o.Event("rotateend",p)),L&&this.fire(new o.Event("pitchstart",p)).fire(new o.Event("pitch",p)).fire(new o.Event("pitchend",p)),this.fire(new o.Event("moveend",p)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Yf),this.transform.getFreeCameraOptions()}setFreeCameraOptions(u,p){const _=this.transform;if(!_.projection.supportsFreeCamera)return o.warnOnce(Yf),this;this.stop();const E=_.zoom,T=_.pitch,L=_.bearing;_.setFreeCameraOptions(u);const j=E!==_.zoom,G=T!==_.pitch,K=L!==_.bearing;return this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),j&&this.fire(new o.Event("zoomstart",p)).fire(new o.Event("zoom",p)).fire(new o.Event("zoomend",p)),K&&this.fire(new o.Event("rotatestart",p)).fire(new o.Event("rotate",p)).fire(new o.Event("rotateend",p)),G&&this.fire(new o.Event("pitchstart",p)).fire(new o.Event("pitch",p)).fire(new o.Event("pitchend",p)),this.fire(new o.Event("moveend",p)),this}easeTo(u,p){this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.exported.prefersReducedMotion)&&(u.duration=0);const _=this.transform,E=this.getZoom(),T=this.getBearing(),L=this.getPitch(),j=this.getPadding(),G="zoom"in u?+u.zoom:E,K="bearing"in u?this._normalizeBearing(u.bearing,T):T,X="pitch"in u?+u.pitch:L,te="padding"in u?u.padding:_.padding,ce=o.pointGeometry.convert(u.offset);let pe,me,ge;if(_.projection.name==="globe"){const ot=o.MercatorCoordinate.fromLngLat(_.center),ut=ce.rotate(-_.angle);ot.x+=ut.x/_.worldSize,ot.y+=ut.y/_.worldSize;const Ut=ot.toLngLat(),nt=o.LngLat.convert(u.center||Ut);this._normalizeCenter(nt),pe=_.centerPoint.add(ut),me=new o.pointGeometry(ot.x,ot.y).mult(_.worldSize),ge=new o.pointGeometry(o.mercatorXfromLng(nt.lng),o.mercatorYfromLat(nt.lat)).mult(_.worldSize).sub(me)}else{pe=_.centerPoint.add(ce);const ot=_.pointLocation(pe),ut=o.LngLat.convert(u.center||ot);this._normalizeCenter(ut),me=_.project(ot),ge=_.project(ut).sub(me)}const ve=_.zoomScale(G-E);let le,Ae;u.around&&(le=o.LngLat.convert(u.around),Ae=_.locationPoint(le));const Te=this._zooming||G!==E,Re=this._rotating||T!==K,He=this._pitching||X!==L,je=!_.isPaddingEqual(te),Ge=ot=>ut=>{if(Te&&(ot.zoom=o.number(E,G,ut)),Re&&(ot.bearing=o.number(T,K,ut)),He&&(ot.pitch=o.number(L,X,ut)),je&&(ot.interpolatePadding(j,te,ut),pe=ot.centerPoint.add(ce)),le)ot.setLocationAtPoint(le,Ae);else{const Ut=ot.zoomScale(ot.zoom-E),nt=G>E?Math.min(2,ve):Math.max(.5,ve),Mt=Math.pow(nt,1-ut),yt=ot.unproject(me.add(ge.mult(ut*Mt)).mult(Ut));ot.setLocationAtPoint(ot.renderWorldCopies?yt.wrap():yt,pe)}return u.preloadOnly||this._fireMoveEvents(p),ot};if(u.preloadOnly){const ot=this._emulate(Ge,u.duration,_);return this._preloadTiles(ot),this}const et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Te,this._rotating=Re,this._pitching=He,this._padding=je,this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,et),this._ease(Ge(_),ot=>{_.recenterOnTerrain(),this._afterEase(p,ot)},u),this}_prepareEase(u,p,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",p||_.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!_.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!_.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!_.pitching&&this.fire(new o.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,E=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new o.Event("zoomend",u)),E&&this.fire(new o.Event("rotateend",u)),T&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}flyTo(u,p){if(!u.essential&&o.exported.prefersReducedMotion){const Dt=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Dt,p)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);const _=this.transform,E=this.getZoom(),T=this.getBearing(),L=this.getPitch(),j=this.getPadding(),G="zoom"in u?o.clamp(+u.zoom,_.minZoom,_.maxZoom):E,K="bearing"in u?this._normalizeBearing(u.bearing,T):T,X="pitch"in u?+u.pitch:L,te="padding"in u?u.padding:_.padding,ce=_.zoomScale(G-E),pe=o.pointGeometry.convert(u.offset);let me=_.centerPoint.add(pe);const ge=_.pointLocation(me),ve=o.LngLat.convert(u.center||ge);this._normalizeCenter(ve);const le=_.project(ge),Ae=_.project(ve).sub(le);let Te=u.curve;const Re=Math.max(_.width,_.height),He=Re/ce,je=Ae.mag();if("minZoom"in u){const Dt=o.clamp(Math.min(u.minZoom,E,G),_.minZoom,_.maxZoom),Ot=Re/_.zoomScale(Dt-E);Te=Math.sqrt(Ot/je*2)}const Ge=Te*Te;function et(Dt){const Ot=(He*He-Re*Re+(Dt?-1:1)*Ge*Ge*je*je)/(2*(Dt?He:Re)*Ge*je);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function ot(Dt){return(Math.exp(Dt)-Math.exp(-Dt))/2}function ut(Dt){return(Math.exp(Dt)+Math.exp(-Dt))/2}const Ut=et(0);let nt=function(Dt){return ut(Ut)/ut(Ut+Te*Dt)},Mt=function(Dt){return Re*((ut(Ut)*(ot(Ot=Ut+Te*Dt)/ut(Ot))-ot(Ut))/Ge)/je;var Ot},yt=(et(1)-Ut)/Te;if(Math.abs(je)<1e-6||!isFinite(yt)){if(Math.abs(Re-He)<1e-6)return this.easeTo(u,p);const Dt=He<Re?-1:1;yt=Math.abs(Math.log(He/Re))/Te,Mt=function(){return 0},nt=function(Ot){return Math.exp(Dt*Te*Ot)}}u.duration="duration"in u?+u.duration:1e3*yt/("screenSpeed"in u?+u.screenSpeed/Te:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0);const Rt=T!==K,st=X!==L,Ye=!_.isPaddingEqual(te),dt=Dt=>Ot=>{const un=Ot*yt,Nn=1/nt(un);Dt.zoom=Ot===1?G:E+Dt.scaleZoom(Nn),Rt&&(Dt.bearing=o.number(T,K,Ot)),st&&(Dt.pitch=o.number(L,X,Ot)),Ye&&(Dt.interpolatePadding(j,te,Ot),me=Dt.centerPoint.add(pe));const on=Ot===1?ve:Dt.unproject(le.add(Ae.mult(Mt(un))).mult(Nn));return Dt.setLocationAtPoint(Dt.renderWorldCopies?on.wrap():on,me),Dt._updateCameraOnTerrain(),u.preloadOnly||this._fireMoveEvents(p),Dt};if(u.preloadOnly){const Dt=this._emulate(dt,u.duration,_);return this._preloadTiles(Dt),this}return this._zooming=!0,this._rotating=Rt,this._pitching=st,this._padding=Ye,this._prepareEase(p,!1),this._ease(dt(_),()=>this._afterEase(p),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,p)}if(!u){const _=this.handlers;_&&_.stop(!1)}return this}_ease(u,p,_){_.animate===!1||_.duration===0?(u(1),p()):(this._easeStart=o.exported.now(),this._easeOptions=_,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),p=this._onEaseFrame;p&&p(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,p){u=o.wrap(u,-180,180);const _=Math.abs(u-p);return Math.abs(u-360-p)<_&&(u-=360),Math.abs(u+360-p)<_&&(u+=360),u}_normalizeCenter(u){const p=this.transform;if(!p.renderWorldCopies||p.maxBounds)return;const _=u.lng-p.center.lng;u.lng+=_>180?-360:_<-180?360:0}_emulate(u,p,_){const E=Math.ceil(15*p/1e3),T=[],L=u(_.clone());for(let j=0;j<=E;j++){const G=L(j/E);T.push(G.clone())}return T}}class Jf{constructor(u={}){this.options=u,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){const p=this.options&&this.options.compact;return this._map=u,this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=O("button","mapboxgl-ctrl-attrib-button",this._container),O("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const _=this._map._getUIString(`AttributionControl.${p}`);u.setAttribute("aria-label",_),u.removeAttribute("title"),u.firstElementChild&&u.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let u=this._editLink;u||(u=this._editLink=this._container.querySelector(".mapbox-improve-map"));const p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(u){const _=p.reduce((E,T,L)=>(T.value&&(E+=`${T.key}=${T.value}${L<p.length-1?"&":""}`),E),"?");u.href=`${o.config.FEEDBACK_URL}/${_}#${Hf(this._map,!0)}`,u.rel="noopener nofollow",this._setElementTitle(u,"MapFeedback")}}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let u=[];if(this._map.style.stylesheet){const E=this._map.style.stylesheet;this.styleOwner=E.owner,this.styleId=E.id}const p=this._map.style._sourceCaches;for(const E in p){const T=p[E];if(T.used){const L=T.getSource();L.attribution&&u.indexOf(L.attribution)<0&&u.push(L.attribution)}}u.sort((E,T)=>E.length-T.length),u=u.filter((E,T)=>{for(let L=T+1;L<u.length;L++)if(u[L].indexOf(E)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=[...this.options.customAttribution,...u]:u.unshift(this.options.customAttribution));const _=u.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,u.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Qf{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(u){this._map=u,this._container=O("div","mapboxgl-ctrl");const p=O("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(u){u&&u.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const u=this._map.style._sourceCaches;if(Object.entries(u).length===0)return!0;for(const p in u){const _=u[p].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}}}class qc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,_=p?this._queue.concat(p):this._queue;for(const E of _)if(E.id===u)return void(E.cancelled=!0)}run(u=0){const p=this._currentlyRunning=this._queue;this._queue=[];for(const _ of p)if(!_.cancelled&&(_.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Mh(y,u,p){if(y=new o.LngLat(y.lng,y.lat),u){const _=new o.LngLat(y.lng-360,y.lat),E=new o.LngLat(y.lng+360,y.lat),T=360*Math.ceil(Math.abs(y.lng-p.center.lng)/360),L=p.locationPoint(y).distSqr(u),j=u.x<0||u.y<0||u.x>p.width||u.y>p.height;p.locationPoint(_).distSqr(u)<L&&(j||Math.abs(_.lng-p.center.lng)<T)?y=_:p.locationPoint(E).distSqr(u)<L&&(j||Math.abs(E.lng-p.center.lng)<T)&&(y=E)}for(;Math.abs(y.lng-p.center.lng)>180;){const _=p.locationPoint(y);if(_.x>=0&&_.y>=0&&_.x<=p.width&&_.y<=p.height)break;y.lng>p.center.lng?y.lng-=360:y.lng+=360}return y}const Cu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Ih extends o.Evented{constructor(u,p){if(super(),(u instanceof o.window.HTMLElement||p)&&(u=o.extend({element:u},p)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=u&&u.occludedOpacity||.2,u&&u.element)this._element=u.element,this._offset=o.pointGeometry.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=O("div");const E=41,T=27,L=B("svg",{display:"block",height:E*this._scale+"px",width:T*this._scale+"px",viewBox:`0 0 ${T} ${E}`},this._element),j=B("radialGradient",{id:"shadowGradient"},B("defs",{},L));B("stop",{offset:"10%","stop-opacity":.4},j),B("stop",{offset:"100%","stop-opacity":.05},j),B("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},L),B("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},L),B("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},L),B("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},L),this._offset=o.pointGeometry.convert(u&&u.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",E=>{E.preventDefault()}),this._element.addEventListener("mousedown",E=>{E.preventDefault()});const _=this._element.classList;for(const E in Cu)_.remove(`mapboxgl-marker-anchor-${E}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(u){return u===this._map||(this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._updateMoving),u.on("moveend",this._update),u.on("remove",this._clearFadeTimer),u._addMarker(this),this.setDraggable(this._draggable),this._update(),u.on("click",this._onMapClick)),this}remove(){const u=this._map;return u&&(u.off("click",this._onMapClick),u.off("move",this._updateMoving),u.off("moveend",this._update),u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler),u.off("mouseup",this._onUp),u.off("touchend",this._onUp),u.off("mousemove",this._onMove),u.off("touchmove",this._onMove),u.off("remove",this._clearFadeTimer),u._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const E=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[E,-1*(38.1-13.5+E)],"bottom-right":[-E,-1*(38.1-13.5+E)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,u._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(u){const p=u.code,_=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(u){const p=u.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?(u.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(u.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const u=this._map,p=this._pos;if(!u||!p)return!1;const _=u.unproject(p),E=u.getFreeCameraOptions();if(!E.position)return!1;const T=E.position.toLngLat();return T.distanceTo(_)<.9*T.distanceTo(this._lngLat)}_evaluateOpacity(){const u=this._map;if(!u)return;const p=this._pos;if(!p||p.x<0||p.x>u.transform.width||p.y<0||p.y>u.transform.height)return void this._clearFadeTimer();const _=u.unproject(p);let E;u._showingGlobe()&&o.isLngLatBehindGlobe(u.transform,this._lngLat)?E=0:(E=1-u._queryFogOpacity(_),u.transform._terrainEnabled()&&u.getTerrain()&&this._behindTerrain()&&(E*=this._occludedOpacity)),this._element.style.opacity=`${E}`,this._element.style.pointerEvents=E>0?"auto":"none",this._popup&&this._popup._setOpacity(E),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const u=this._pos;if(!u||!this._map)return;const p=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${u.x}px,${u.y}px)
            ${Cu[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${p.x}px,${p.y}px)
        `}_calculateXYTransform(){const u=this._pos,p=this._map,_=this.getPitchAlignment();if(!p||!u||_!=="map")return"";if(!p._showingGlobe()){const G=p.getPitch();return G?`rotateX(${G}deg)`:""}const E=o.radToDeg(o.globeTiltAtLngLat(p.transform,this._lngLat)),T=u.sub(o.globeCenterToScreenPoint(p.transform)),L=Math.abs(T.x)+Math.abs(T.y);if(L===0)return"";const j=E/L;return`rotateX(${-T.y*j}deg) rotateY(${T.x*j}deg)`}_calculateZTransform(){const u=this._pos,p=this._map;if(!p||!u)return"";let _=0;const E=this.getRotationAlignment();if(E==="map")if(p._showingGlobe()){const T=p.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),L=p.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(T);_=o.radToDeg(Math.atan2(L.y,L.x))-90}else _=-p.getBearing();else if(E==="horizon"){const T=o.smoothstep(4,6,p.getZoom()),L=o.globeCenterToScreenPoint(p.transform);L.y+=T*p.transform.height;const j=u.sub(L),G=o.radToDeg(Math.atan2(j.y,j.x));_=(G>90?G-270:G+90)*(1-T)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(u){o.window.cancelAnimationFrame(this._updateFrameId);const p=this._map;p&&(p.transform.renderWorldCopies&&(this._lngLat=Mh(this._lngLat,this._pos,p.transform)),this._pos=p.project(this._lngLat),u===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),p._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(p._showingGlobe()||p.getTerrain()||p.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(u){return this._offset=o.pointGeometry.convert(u),this._update(),this}_onMove(u){const p=this._map;if(!p)return;const _=this._pointerdownPos,E=this._positionDelta;if(_&&E){if(!this._isDragging){const T=this._clickTolerance||p._clickTolerance;if(u.point.dist(_)<T)return;this._isDragging=!0}this._pos=u.point.sub(E),this._lngLat=p.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const u=this._map;u&&(u.off("mousemove",this._onMove),u.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(u){const p=this._map,_=this._pos;p&&_&&this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(_),this._pointerdownPos=u.point,this._state="pending",p.on("mousemove",this._onMove),p.on("touchmove",this._onMove),p.once("mouseup",this._onUp),p.once("touchend",this._onUp))}setDraggable(u){this._draggable=!!u;const p=this._map;return p&&(u?(p.on("mousedown",this._addDragHandler),p.on("touchstart",this._addDragHandler)):(p.off("mousedown",this._addDragHandler),p.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(u){return this._occludedOpacity=u||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const mv={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},gv=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function em(y=new o.pointGeometry(0,0),u="bottom"){if(typeof y=="number"){const p=Math.round(Math.sqrt(.5*Math.pow(y,2)));switch(u){case"top":return new o.pointGeometry(0,y);case"top-left":return new o.pointGeometry(p,p);case"top-right":return new o.pointGeometry(-p,p);case"bottom":return new o.pointGeometry(0,-y);case"bottom-left":return new o.pointGeometry(p,-p);case"bottom-right":return new o.pointGeometry(-p,-p);case"left":return new o.pointGeometry(y,0);case"right":return new o.pointGeometry(-y,0)}return new o.pointGeometry(0,0)}return y instanceof o.pointGeometry||Array.isArray(y)?o.pointGeometry.convert(y):o.pointGeometry.convert(y[u]||[0,0])}class yv{constructor(u){this.jumpTo(u)}getValue(u){if(u<=this._startTime)return this._start;if(u>=this._endTime)return this._end;const p=o.easeCubicInOut((u-this._startTime)/(this._endTime-this._startTime));return this._start*(1-p)+this._end*p}isEasing(u){return u>=this._startTime&&u<=this._endTime}jumpTo(u){this._startTime=-1/0,this._endTime=-1/0,this._start=u,this._end=u}easeTo(u,p,_){this._start=this.getValue(p),this._end=u,this._startTime=p,this._endTime=p+_}}const vv={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},_v={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},tm={showCompass:!0,showZoom:!0,visualizePitch:!1};class xv{constructor(u,p,_=!1){this._clickTolerance=10,this.element=p,this.mouseRotate=new Zf({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,_&&(this.mousePitch=new Xf({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),p.addEventListener("mousedown",this.mousedown),p.addEventListener("touchstart",this.touchstart,{passive:!1}),p.addEventListener("touchmove",this.touchmove),p.addEventListener("touchend",this.touchend),p.addEventListener("touchcancel",this.reset)}down(u,p){this.mouseRotate.mousedown(u,p),this.mousePitch&&this.mousePitch.mousedown(u,p),U()}move(u,p){const _=this.map,E=this.mouseRotate.mousemoveWindow(u,p),T=E&&E.bearingDelta;if(T&&_.setBearing(_.getBearing()+T),this.mousePitch){const L=this.mousePitch.mousemoveWindow(u,p),j=L&&L.pitchDelta;j&&_.setPitch(_.getPitch()+j)}}off(){const u=this.element;u.removeEventListener("mousedown",this.mousedown),u.removeEventListener("touchstart",this.touchstart,{passive:!1}),u.removeEventListener("touchmove",this.touchmove),u.removeEventListener("touchend",this.touchend),u.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){W(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(u){this.down(o.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),S(this.element,u)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(u){this.move(u,S(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=b(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const bv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},wv={maxWidth:100,unit:"metric"};function Ev(y,u,p){const _=Ph(u),E=_/u,T={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[p];this._map._requestDomTask(()=>{this._container.style.width=y*E+"px",this._container.innerHTML=`${_}&nbsp;${T}`})}function Ph(y){const u=Math.pow(10,`${Math.floor(y)}`.length-1);let p=y/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:p>=1?1:function(_){const E=Math.pow(10,Math.ceil(-Math.log(_)/Math.LN10));return Math.round(_*E)/E}(p),u*p}const Zc={version:o.version,supported:w,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends fv{constructor(y){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(y=o.extend({},_v,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(y.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(y.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Jt(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),y),this._interactive=y.interactive,this._minTileCacheSize=y.minTileCacheSize,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._useWebGL2=y.useWebGL2,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=y.crossSourceCollisions,this._collectResourceTiming=y.collectResourceTiming,this._optimizeForTerrain=y.optimizeForTerrain,this._language=this._parseLanguage(y.language),this._worldview=y.worldview,this._renderTaskQueue=new qc,this._domRenderTaskQueue=new qc,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},vv,y.locale),this._clickTolerance=y.clickTolerance,this._cooperativeGestures=y.cooperativeGestures,this._performanceMetricsCollection=y.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new yv(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(y.transformRequest,y.accessToken,y.testMode),this._silenceAuthErrors=!!y.testMode,typeof y.container=="string"){if(this._container=o.window.document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),y.maxBounds&&this.setMaxBounds(y.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new pv(this,y),this._localFontFamily=y.localFontFamily,this._localIdeographFontFamily=y.localIdeographFontFamily,y.style&&this.setStyle(y.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),y.projection&&this.setProjection(y.projection),this._hash=y.hash&&new ev(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,o.extend({},y.fitBoundsOptions,{duration:0})))),this.resize(),y.attributionControl&&this.addControl(new Jf({customAttribution:y.customAttribution})),this._logoControl=new Qf,this.addControl(this._logoControl,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new o.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new o.Event(`${u.dataType}dataloading`,u))})}_getMapId(){return this._mapId}addControl(y,u){if(u===void 0&&(u=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=y.onAdd(this);this._controls.push(y);const _=this._controlPositions[u];return u.indexOf("bottom")!==-1?_.insertBefore(p,_.firstChild):_.appendChild(p),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(y);return u>-1&&this._controls.splice(u,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(y){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const u=!this._moving;return u&&this.fire(new o.Event("movestart",y)).fire(new o.Event("move",y)),this.fire(new o.Event("resize",y)),u&&this.fire(new o.Event("moveend",y)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(y){return this.transform.setMaxBounds(o.LngLatBounds.convert(y)),this._update()}setMinZoom(y){if((y=y==null?-2:y)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y?this.setZoom(y):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y==null?22:y)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y?this.setZoom(y):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y==null?0:y)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y?this.setPitch(y):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y==null?85:y)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y?this.setPitch(y):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(y){return y==="auto"?o.window.navigator.language:Array.isArray(y)?y.length===0?void 0:y.map(u=>u==="auto"?o.window.navigator.language:u):y}setLanguage(y){const u=this._parseLanguage(y);if(!this.style||u===this._language)return this;this._language=u,this.style._reloadSources();for(const p of this._controls)p._setLanguage&&p._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(y){return this.style&&y!==this._worldview?(this._worldview=y,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(y){return this._lazyInitEmptyStyle(),y?typeof y=="string"&&(y={name:y}):y=null,this._useExplicitProjection=!!y,this._prioritizeAndUpdateProjection(y,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const y=this.transform,u=y.projection.name;let p;u==="globe"&&y.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(y.setMercatorFromTransition(),p=!0):u==="mercator"&&y.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(y.setProjection({name:"globe"}),p=!0),p&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(y,u){return this._updateProjection(y||u||{name:"mercator"})}_updateProjection(y){let u;if(u=y.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(y),this.style.applyProjectionUpdate(),u){this.painter.clearBackgroundTiles();for(const p in this.style._sourceCaches)this.style._sourceCaches[p].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(y){return this.transform.locationPoint3D(o.LngLat.convert(y))}unproject(y){return this.transform.pointLocation3D(o.pointGeometry.convert(y))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(y,u,p){if(y==="mouseenter"||y==="mouseover"){let _=!1;const E=L=>{const j=u.filter(K=>this.getLayer(K)),G=j.length?this.queryRenderedFeatures(L.point,{layers:j}):[];G.length?_||(_=!0,p.call(this,new Vi(y,this,L.originalEvent,{features:G}))):_=!1},T=()=>{_=!1};return{layers:new Set(u),listener:p,delegates:{mousemove:E,mouseout:T}}}if(y==="mouseleave"||y==="mouseout"){let _=!1;const E=L=>{const j=u.filter(G=>this.getLayer(G));(j.length?this.queryRenderedFeatures(L.point,{layers:j}):[]).length?_=!0:_&&(_=!1,p.call(this,new Vi(y,this,L.originalEvent)))},T=L=>{_&&(_=!1,p.call(this,new Vi(y,this,L.originalEvent)))};return{layers:new Set(u),listener:p,delegates:{mousemove:E,mouseout:T}}}{const _=E=>{const T=u.filter(j=>this.getLayer(j)),L=T.length?this.queryRenderedFeatures(E.point,{layers:T}):[];L.length&&(E.features=L,p.call(this,E),delete E.features)};return{layers:new Set(u),listener:p,delegates:{[y]:_}}}}on(y,u,p){if(p===void 0)return super.on(y,u);Array.isArray(u)||(u=[u]);const _=this._createDelegatedListener(y,u,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(_);for(const E in _.delegates)this.on(E,_.delegates[E]);return this}once(y,u,p){if(p===void 0)return super.once(y,u);Array.isArray(u)||(u=[u]);const _=this._createDelegatedListener(y,u,p);for(const E in _.delegates)this.once(E,_.delegates[E]);return this}off(y,u,p){if(p===void 0)return super.off(y,u);u=new Set(Array.isArray(u)?u:[u]);const _=(T,L)=>{if(T.size!==L.size)return!1;for(const j of T)if(!L.has(j))return!1;return!0},E=this._delegatedListeners?this._delegatedListeners[y]:void 0;return E&&(T=>{for(let L=0;L<T.length;L++){const j=T[L];if(j.listener===p&&_(j.layers,u)){for(const G in j.delegates)this.off(G,j.delegates[G]);return T.splice(L,1),this}}})(E),this}queryRenderedFeatures(y,u){return this.style?(u!==void 0||y===void 0||y instanceof o.pointGeometry||Array.isArray(y)||(u=y,y=void 0),this.style.queryRenderedFeatures(y=y||[[0,0],[this.transform.width,this.transform.height]],u=u||{},this.transform)):[]}querySourceFeatures(y,u){return this.style.querySourceFeatures(y,u)}setStyle(y,u){return(u=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&u.localFontFamily===this._localFontFamily&&this.style&&y?(this._diffStyle(y,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._localFontFamily=u.localFontFamily,this._updateStyle(y,u))}_getUIString(y){const u=this._locale[y];if(u==null)throw new Error(`Missing UI string '${y}'`);return u}_updateStyle(y,u){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),y&&(this.style=new ta(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y):this.style.loadJSON(y)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ta(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,u){if(typeof y=="string"){const p=this._requestManager.normalizeStyleURL(y),_=this._requestManager.transformRequest(p,o.ResourceType.Style);o.getJSON(_,(E,T)=>{E?this.fire(new o.ErrorEvent(E)):T&&this._updateDiff(T,u)})}else typeof y=="object"&&this._updateDiff(y,u)}_updateDiff(y,u){try{this.style.setState(y)&&this._update(!0)}catch(p){o.warnOnce(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(y,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(y,u){return this._lazyInitEmptyStyle(),this.style.addSource(y,u),this._update(!0)}isSourceLoaded(y){return!!this.style&&this.style._isSourceCacheLoaded(y)}areTilesLoaded(){const y=this.style&&this.style._sourceCaches;for(const u in y){const p=y[u]._tiles;for(const _ in p){const E=p[_];if(E.state!=="loaded"&&E.state!=="errored")return!1}}return!0}addSourceType(y,u,p){this._lazyInitEmptyStyle(),this.style.addSourceType(y,u,p)}removeSource(y){return this.style.removeSource(y),this._updateTerrain(),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,u,{pixelRatio:p=1,sdf:_=!1,stretchX:E,stretchY:T,content:L}={}){if(this._lazyInitEmptyStyle(),u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap){const{width:j,height:G,data:K}=o.exported.getImageData(u);this.style.addImage(y,{data:new o.RGBAImage({width:j,height:G},K),pixelRatio:p,stretchX:E,stretchY:T,content:L,sdf:_,version:0})}else if(u.width===void 0||u.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:j,height:G}=u,K=u;this.style.addImage(y,{data:new o.RGBAImage({width:j,height:G},new Uint8Array(K.data)),pixelRatio:p,stretchX:E,stretchY:T,content:L,sdf:_,version:0,userImage:K}),K.onAdd&&K.onAdd(this,y)}}updateImage(y,u){const p=this.style.getImage(y);if(!p)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap?o.exported.getImageData(u):u,{width:E,height:T}=_;E!==void 0&&T!==void 0?E===p.data.width&&T===p.data.height?(p.data.replace(_.data,!(u instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&u instanceof o.window.ImageBitmap)),this.style.updateImage(y,p)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${E}, ${T})
                must be that same as the previous version of the image
                (${p.data.width}, ${p.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,u){o.getImage(this._requestManager.transformRequest(y,o.ResourceType.Image),(p,_)=>{u(p,_ instanceof o.window.HTMLImageElement?o.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(y,u){return this._lazyInitEmptyStyle(),this.style.addLayer(y,u),this._update(!0)}moveLayer(y,u){return this.style.moveLayer(y,u),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}setLayerZoomRange(y,u,p){return this.style.setLayerZoomRange(y,u,p),this._update(!0)}setFilter(y,u,p={}){return this.style.setFilter(y,u,p),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,u,p,_={}){return this.style.setPaintProperty(y,u,p,_),this._update(!0)}getPaintProperty(y,u){return this.style.getPaintProperty(y,u)}setLayoutProperty(y,u,p,_={}){return this.style.setLayoutProperty(y,u,p,_),this._update(!0)}getLayoutProperty(y,u){return this.style.getLayoutProperty(y,u)}setLight(y,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,u),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(y){return this._lazyInitEmptyStyle(),!y&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(y),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(y){return this._lazyInitEmptyStyle(),this.style.setFog(y),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(y){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(y),this.transform):0}setFeatureState(y,u){return this.style.setFeatureState(y,u),this._update()}removeFeatureState(y,u){return this.style.removeFeatureState(y,u),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}_updateContainerDimensions(){if(!this._container)return;const y=this._container.getBoundingClientRect().width||400,u=this._container.getBoundingClientRect().height||300;let p,_,E,T=this._container;for(;T&&(!_||!E);){const L=o.window.getComputedStyle(T).transform;L&&L!=="none"&&(p=L.match(/matrix.*\((.+)\)/)[1].split(", "),p[0]&&p[0]!=="0"&&p[0]!=="1"&&(_=p[0]),p[3]&&p[3]!=="0"&&p[3]!=="1"&&(E=p[3])),T=T.parentElement}this._containerWidth=_?Math.abs(y/_):y,this._containerHeight=E?Math.abs(u/E):u}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=O("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();const u=this._canvasContainer=O("div","mapboxgl-canvas-container",y);this._interactive&&u.classList.add("mapboxgl-interactive"),this._canvas=O("canvas","mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const p=this._controlContainer=O("div","mapboxgl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{_[E]=O("div",`mapboxgl-ctrl-${E}`,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(y,u){const p=o.exported.devicePixelRatio||1;this._canvas.width=p*Math.ceil(y),this._canvas.height=p*Math.ceil(u),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${u}px`}_addMarker(y){this._markers.push(y)}_removeMarker(y){const u=this._markers.indexOf(y);u!==-1&&this._markers.splice(u,1)}_addPopup(y){this._popups.push(y)}_removePopup(y){const u=this._popups.indexOf(y);u!==-1&&this._popups.splice(u,1)}_setupPainter(){const y=o.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._useWebGL2&&this._canvas.getContext("webgl2",y),p=u||this._canvas.getContext("webgl",y)||this._canvas.getContext("experimental-webgl",y);p?(this._useWebGL2&&!u&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(p,!0),this.painter=new zc(p,this.transform,!!u),this.on("data",_=>{_.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(p)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:y}))}_contextRestored(y){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:y}))}_onMapScroll(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_requestDomTask(y){!this.loaded()||this.loaded()&&!this.isMoving()?y():this._domRenderTaskQueue.add(y)}_render(y){let u;const p=this.painter.context.extTimerQuery,_=o.exported.now();if(this.listens("gpu-timing-frame")&&(u=p.createQueryEXT(),p.beginQueryEXT(p.TIME_ELAPSED_EXT,u)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(y),this._domRenderTaskQueue.run(y),this._removed)return;this._updateProjectionTransition();const E=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const j=this.transform.zoom,G=this.transform.pitch,K=o.exported.now(),X=new o.EvaluationParameters(j,{now:K,fadeDuration:E,pitch:G,transition:this.style.getTransition()});this.style.update(X)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let T=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),T=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):T=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,E,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),u){const j=o.exported.now()-_;p.endQueryEXT(p.TIME_ELAPSED_EXT,u),setTimeout(()=>{const G=p.getQueryObjectEXT(u,p.QUERY_RESULT_EXT)/1e6;p.deleteQueryEXT(u),this.fire(new o.Event("gpu-timing-frame",{cpuTime:j,gpuTime:G})),o.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:G}})},50)}if(this.listens("gpu-timing-layer")){const j=this.painter.collectGpuTimers();setTimeout(()=>{const G=this.painter.queryGpuTimers(j);this.fire(new o.Event("gpu-timing-layer",{layerTimes:G}))},50)}if(this.listens("gpu-timing-deferred-render")){const j=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const G=this.painter.queryGpuTimeDeferredRender(j);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:G}))},50)}const L=this._sourcesDirty||this._styleDirty||this._placementDirty||T;if(L||this._repaint)this.triggerRepaint();else{const j=!this.isMoving()&&this.loaded();if(j&&(T=this._updateAverageElevation(_,!0)),T)this.triggerRepaint();else if(this._triggerFrame(!1),j&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const G=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:G})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(y){for(const u of this._markers)y&&!this.getRenderWorldCopies()&&(u._lngLat=u._lngLat.wrap()),u._update();for(const u of this._popups)!y||this.getRenderWorldCopies()||u._trackPointer||(u._lngLat=u._lngLat.wrap()),u._update()}_updateAverageElevation(y,u=!1){const p=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&p(0);if((u||y-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(y)){const _=this.transform.averageElevation;let E=this.transform.sampleAverageElevation(),T=!1;this.transform.elevation&&(T=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(E)?E=0:this._averageElevationLastSampledAt=y;const L=Math.abs(_-E);if(L>1){if(this._isInitialLoad||T)return this._averageElevation.jumpTo(E),p(E);this._averageElevation.easeTo(E,y,300)}else if(L>1e-4)return this._averageElevation.jumpTo(E),p(E)}return!!this._averageElevation.isEasing(y)&&p(this._averageElevation.getValue(y))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,y=>{if(y&&(y.message===o.AUTH_ERR_MSG||y.status===401)){const u=this.painter.context.gl;o.storeAuthState(u,!1),this._logoControl instanceof Qf&&this._logoControl._updateLogo(),u&&u.clear(u.DEPTH_BUFFER_BIT|u.COLOR_BUFFER_BIT|u.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const y=this._isDragging();this.painter.updateTerrain(this.style,y)}_calculateSpeedIndex(){const y=this.painter.canvasCopy(),u=this.painter.getCanvasCopiesAndTimestamps();u.timeStamps.push(performance.now());const p=this.painter.context.gl,_=p.createFramebuffer();function E(T){p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,T,0);const L=new Uint8Array(p.drawingBufferWidth*p.drawingBufferHeight*4);return p.readPixels(0,0,p.drawingBufferWidth,p.drawingBufferHeight,p.RGBA,p.UNSIGNED_BYTE,L),L}return p.bindFramebuffer(p.FRAMEBUFFER,_),this._canvasPixelComparison(E(y),u.canvasCopies.map(E),u.timeStamps)}_canvasPixelComparison(y,u,p){let _=p[1]-p[0];const E=y.length/4;for(let T=0;T<u.length;T++){const L=u[T];let j=0;for(let G=0;G<L.length;G+=4)L[G]===y[G]&&L[G+1]===y[G+1]&&L[G+2]===y[G+2]&&L[G+3]===y[G+3]&&(j+=1);_+=(p[T+2]-p[T+1])*(1-j/E)}return _}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const y=this.painter.context.gl.getExtension("WEBGL_lose_context");y&&y.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(y){this._renderNextFrame=this._renderNextFrame||y,this.style&&!this._frame&&(this._frame=o.exported.frame(u=>{const p=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,p&&this._render(u)}))}_preloadTiles(y){const u=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(u,(p,_)=>p._preloadTiles(y,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(y){this._trackResize&&this.resize({originalEvent:y})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(y){this._showTerrainWireframe!==y&&(this._showTerrainWireframe=y,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(y){this._speedIndexTiming!==y&&(this._speedIndexTiming=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(y){this._showTileAABBs!==y&&(this._showTileAABBs=y,y&&this._update())}_setCacheLimits(y,u){o.setCacheLimits(y,u)}get version(){return o.version}},NavigationControl:class{constructor(y){this.options=o.extend({},tm,y),this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",u=>{this._map&&this._map.zoomIn({},{originalEvent:u})}),O("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",u=>{this._map&&this._map.zoomOut({},{originalEvent:u})}),O("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",u=>{const p=this._map;p&&(this.options.visualizePitch?p.resetNorthPitch({},{originalEvent:u}):p.resetNorth({},{originalEvent:u}))}),this._compassIcon=O("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const y=this._map;if(!y)return;const u=y.getZoom(),p=u===y.getMaxZoom(),_=u===y.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const y=this._map;if(!y)return;const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(y.transform.pitch*(Math.PI/180)),.5)}) rotateX(${y.transform.pitch}deg) rotateZ(${y.transform.angle*(180/Math.PI)}deg)`:`rotate(${y.transform.angle*(180/Math.PI)}deg)`;y._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=u)})}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),y.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&y.on("pitch",this._rotateCompassArrow),y.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xv(y,this._compass,this.options.visualizePitch)),this._container}onRemove(){const y=this._map;y&&(this._container.remove(),this.options.showZoom&&y.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&y.off("pitch",this._rotateCompassArrow),y.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(y,u){const p=O("button",y,this._container);return p.type="button",p.addEventListener("click",u),p}_setButtonTitle(y,u){if(!this._map)return;const p=this._map._getUIString(`NavigationControl.${u}`);y.setAttribute("aria-label",p),y.firstElementChild&&y.firstElementChild.setAttribute("title",p)}},GeolocateControl:class extends o.Evented{constructor(y){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},bv,y),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=na(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(y){return this._map=y,this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(y){const u=(p=!!this.options.geolocation)=>{this._supportsGeolocation=p,y(p)};this._supportsGeolocation!==void 0?y(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(p=>u(p.state!=="denied")).catch(()=>u()):u()}_isOutOfMapMaxBounds(y){const u=this._map.getMaxBounds(),p=y.coords;return!!u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(y){if(this._map){if(this._isOutOfMapMaxBounds(y))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",y)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",y)),this._finish()}}_updateCamera(y){const u=new o.LngLat(y.coords.longitude,y.coords.latitude),p=y.coords.accuracy,_=this._map.getBearing(),E=o.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(p),E,{geolocateSource:!0})}_updateMarker(y){if(y){const u=new o.LngLat(y.coords.longitude,y.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const y=this._map.transform,u=o.mercatorZfromAltitude(1,y._center.lat)*y.worldSize,p=Math.ceil(2*this._accuracy*u);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(y){if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",y)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(y){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=O("button","mapboxgl-ctrl-geolocate",this._container),O("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",y===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",u),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O("div","mapboxgl-user-location"),this._dotElement.appendChild(O("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(O("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Ih({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=O("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ih({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(y){this._userLocationDotMarker&&(y.webkitCompassHeading?this._heading=y.webkitCompassHeading:y.absolute===!0&&(this._heading=-1*y.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(y={maximumAge:6e5,timeout:0},this._noTimeout=!0):(y=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,y),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const y=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(u=>{u==="granted"&&y()}).catch(console.error):y()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Jf,ScaleControl:class{constructor(y){this.options=o.extend({},wv,y),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Ev.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const y=this.options.maxWidth||100,u=this._map,p=u._containerHeight/2,_=u._containerWidth/2-y/2,E=u.unproject([_,p]),T=u.unproject([_+y,p]),L=E.distanceTo(T);if(this.options.unit==="imperial"){const j=3.2808*L;j>5280?this._setScale(y,j/5280,"mile"):this._setScale(y,j,"foot")}else this.options.unit==="nautical"?this._setScale(y,L/1852,"nautical-mile"):L>=1e3?this._setScale(y,L/1e3,"kilometer"):this._setScale(y,L,"meter")}_setScale(y,u,p){const _=Ph(u),E=_/u;this._map._requestDomTask(()=>{this._container.style.width=y*E+"px",this._container.innerHTML=p!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:p}).format(_):`${_}&nbsp;nm`})}onAdd(y){return this._map=y,this._language=y.getLanguage(),this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-scale",y.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(y){this._language=y,this._update()}setUnit(y){this.options.unit=y,this._update()}},FullscreenControl:class{constructor(y){this._fullscreen=!1,y&&y.container&&(y.container instanceof o.window.HTMLElement?this._container=y.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const y=this._fullscreenButton=O("button","mapboxgl-ctrl-fullscreen",this._controlContainer);O("span","mapboxgl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",y)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(y){super(),this.options=o.extend(Object.create(mv),y),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(y&&y.className?y.className.trim().split(/\s+/):[])}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&y.on("preclick",this._onClose),this.options.closeOnMove&&y.on("move",this._onClose),y.on("remove",this.remove),this._update(),y._addPopup(this),this._focusFirstElement(),this._trackPointer?(y.on("mousemove",this._onMouseEvent),y.on("mouseup",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")):y.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const y=this._map;return y&&(y.off("move",this._update),y.off("move",this._onClose),y.off("preclick",this._onClose),y.off("click",this._onClose),y.off("remove",this.remove),y.off("mousemove",this._onMouseEvent),y.off("mouseup",this._onMouseEvent),y.off("drag",this._onMouseEvent),y._canvasContainer&&y._canvasContainer.classList.remove("mapboxgl-track-pointer"),y._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(y){this._lngLat=o.LngLat.convert(y),this._pos=null,this._trackPointer=!1,this._update();const u=this._map;return u&&(u.on("move",this._update),u.off("mousemove",this._onMouseEvent),u._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const y=this._map;return y&&(y.off("move",this._update),y.on("mousemove",this._onMouseEvent),y.on("drag",this._onMouseEvent),y._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(o.window.document.createTextNode(y))}setHTML(y){const u=o.window.document.createDocumentFragment(),p=o.window.document.createElement("body");let _;for(p.innerHTML=y;_=p.firstChild,_;)u.appendChild(_);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){let u=this._content;if(u)for(;u.hasChildNodes();)u.firstChild&&u.removeChild(u.firstChild);else u=this._content=O("div","mapboxgl-popup-content",this._container||void 0);if(u.appendChild(y),this.options.closeButton){const p=this._closeButton=O("button","mapboxgl-popup-close-button",u);p.type="button",p.setAttribute("aria-label","Close popup"),p.setAttribute("aria-hidden","true"),p.innerHTML="&#215;",p.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(y){return this._classList.add(y),this._updateClassList(),this}removeClassName(y){return this._classList.delete(y),this._updateClassList(),this}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){let u;return this._classList.delete(y)?u=!1:(this._classList.add(y),u=!0),this._updateClassList(),u}_onMouseEvent(y){this._update(y.point)}_getAnchor(y){if(this.options.anchor)return this.options.anchor;const u=this._map,p=this._container,_=this._pos;if(!u||!p||!_)return"bottom";const E=p.offsetWidth,T=p.offsetHeight,L=_.x<E/2,j=_.x>u.transform.width-E/2;if(_.y+y<T)return L?"top-left":j?"top-right":"top";if(_.y>u.transform.height-T){if(L)return"bottom-left";if(j)return"bottom-right"}return L?"left":j?"right":"bottom"}_updateClassList(){const y=this._container;if(!y)return;const u=[...this._classList];u.push("mapboxgl-popup"),this._anchor&&u.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&u.push("mapboxgl-popup-track-pointer"),y.className=u.join(" ")}_update(y){const u=this._map,p=this._content;if(!u||!this._lngLat&&!this._trackPointer||!p)return;let _=this._container;if(_||(_=this._container=O("div","mapboxgl-popup",u.getContainer()),this._tip=O("div","mapboxgl-popup-tip",_),_.appendChild(p)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),u.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Mh(this._lngLat,this._pos,u.transform)),!this._trackPointer||y){const E=this._pos=this._trackPointer&&y?y:u.project(this._lngLat),T=em(this.options.offset),L=this._anchor=this._getAnchor(T.y),j=em(this.options.offset,L),G=E.add(j).round();u._requestDomTask(()=>{this._container&&L&&(this._container.style.transform=`${Cu[L]} translate(${G.x}px,${G.y}px)`)})}if(!this._marker&&u._showingGlobe()){const E=o.isLngLatBehindGlobe(u.transform,this._lngLat)?0:1;this._setOpacity(E)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(gv);y&&y.focus()}_onClose(){this.remove()}_setOpacity(y){this._container&&(this._container.style.opacity=`${y}`),this._content&&(this._content.style.pointerEvents=y?"auto":"none")}},Marker:Ih,Style:ta,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:vh,Evented:o.Evented,config:o.config,prewarm:function(){pn().acquire(qt)},clearPrewarmedResources:function(){const y=Yt;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(qt),Yt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(y){o.config.ACCESS_TOKEN=y},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(y){o.config.API_URL=y},get workerCount(){return tn.workerCount},set workerCount(y){tn.workerCount=y},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(y){o.config.MAX_PARALLEL_IMAGE_REQUESTS=y},clearStorage(y){o.clearTileCache(y)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Zc});var h=a;return h})})(OB);var Cp=OB.exports,ff=nce,tce=Object.prototype.hasOwnProperty;function nce(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)tce.call(n,r)&&(e[r]=n[r])}return e}var BB={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,a){return a.filter(function(c){return n.test(r,c)})},n.test=function(r,a){return n.match(r,a)!==null},n.match=function(r,a,c){c=c||{};var h=0,o=[],m=a.length,w=0,A=0,P=c.pre||"",O=c.post||"",B=c.caseSensitive&&a||a.toLowerCase(),N;r=c.caseSensitive&&r||r.toLowerCase();for(var k=0;k<m;k++)N=a[k],B[k]===r[h]?(N=P+N+O,h+=1,A+=1+A):A=0,w+=A,o[o.length]=N;return h===r.length?(w=B===r?1/0:w,{rendered:o.join(""),score:w}):null},n.filter=function(r,a,c){return!a||a.length===0?[]:typeof r!="string"?a:(c=c||{},a.reduce(function(h,o,m,w){var A=o;c.extract&&(A=c.extract(o));var P=n.match(r,A,c);return P!=null&&(h[h.length]={string:P.rendered,score:P.score,index:m,original:o}),h},[]).sort(function(h,o){var m=o.score-h.score;return m||h.index-o.index}))}})()})(BB);var _a=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};_a.prototype.show=function(){this.element.style.display="block"};_a.prototype.hide=function(){this.element.style.display="none"};_a.prototype.add=function(e){this.items.push(e)};_a.prototype.clear=function(){this.items=[],this.active=0};_a.prototype.isEmpty=function(){return!this.items.length};_a.prototype.isVisible=function(){return this.element.style.display==="block"};_a.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};_a.prototype.drawItem=function(e,t){var n=document.createElement("li"),r=document.createElement("a");t&&(n.className+=" active"),r.innerHTML=e.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};_a.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};_a.prototype.move=function(e){this.active=e,this.draw()};_a.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};_a.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};_a.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var rce=_a,ice=ff,oce=BB.exports,ace=rce,Wo=function(e,t,n){return n=n||{},this.options=ice({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new ace(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(r){this.handleKeyUp(r.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(r){this.handleKeyDown(r)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(r){this.handlePaste(r)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};Wo.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};Wo.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};Wo.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};Wo.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};Wo.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};Wo.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};Wo.prototype.update=function(e){this.data=e,this.handleKeyUp()};Wo.prototype.clear=function(){this.data=[],this.list.clear()};Wo.prototype.normalize=function(e){return e=e.toLowerCase(),e};Wo.prototype.match=function(e,t){return e.indexOf(t)>-1};Wo.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};Wo.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(r){return this.getItemValue(r)}.bind(this)},n;this.options.filter?(n=oce.filter(this.query,this.data,t),n=n.map(function(r){return{original:r.original,string:this.render(r.original,r.string)}}.bind(this))):n=this.data.map(function(r){var a=this.render(r);return{original:r,string:a}}.bind(this)),e(n)};Wo.prototype.getItemValue=function(e){return e};Wo.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),r=this.normalize(n),a=r.lastIndexOf(this.query);a>-1;){var c=a+this.query.length;n=n.slice(0,a)+"<strong>"+n.slice(a,c)+"</strong>"+n.slice(c),a=r.slice(0,a).lastIndexOf(this.query)}return n};Wo.prototype.renderError=function(e){this.list.drawError(e)};var sce=Wo,FB=sce,lce=FB;typeof window!="undefined"&&(window.Suggestions=FB);var uce="Expected a function",JR=0/0,cce="[object Symbol]",dce=/^\s+|\s+$/g,hce=/^[-+]0x[0-9a-f]+$/i,pce=/^0b[01]+$/i,fce=/^0o[0-7]+$/i,mce=parseInt,gce=typeof Uo=="object"&&Uo&&Uo.Object===Object&&Uo,yce=typeof self=="object"&&self&&self.Object===Object&&self,vce=gce||yce||Function("return this")(),_ce=Object.prototype,xce=_ce.toString,bce=Math.max,wce=Math.min,bE=function(){return vce.Date.now()};function Ece(e,t,n){var r,a,c,h,o,m,w=0,A=!1,P=!1,O=!0;if(typeof e!="function")throw new TypeError(uce);t=QR(t)||0,mS(n)&&(A=!!n.leading,P="maxWait"in n,c=P?bce(QR(n.maxWait)||0,t):c,O="trailing"in n?!!n.trailing:O);function B(b){var D=r,Y=a;return r=a=void 0,w=b,h=e.apply(Y,D),h}function N(b){return w=b,o=setTimeout(U,t),A?B(b):h}function k(b){var D=b-m,Y=b-w,re=t-D;return P?wce(re,c-Y):re}function V(b){var D=b-m,Y=b-w;return m===void 0||D>=t||D<0||P&&Y>=c}function U(){var b=bE();if(V(b))return W(b);o=setTimeout(U,k(b))}function W(b){return o=void 0,O&&r?B(b):(r=a=void 0,h)}function F(){o!==void 0&&clearTimeout(o),w=0,r=m=a=o=void 0}function z(){return o===void 0?h:W(bE())}function S(){var b=bE(),D=V(b);if(r=arguments,a=this,m=b,D){if(o===void 0)return N(m);if(P)return o=setTimeout(U,t),B(m)}return o===void 0&&(o=setTimeout(U,t)),h}return S.cancel=F,S.flush=z,S}function mS(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Cce(e){return!!e&&typeof e=="object"}function Sce(e){return typeof e=="symbol"||Cce(e)&&xce.call(e)==cce}function QR(e){if(typeof e=="number")return e;if(Sce(e))return JR;if(mS(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=mS(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(dce,"");var n=pce.test(e);return n||fce.test(e)?mce(e.slice(2),n?2:8):hce.test(e)?JR:+e}var Tce=Ece,$k={exports:{}},Fp=typeof Reflect=="object"?Reflect:null,eL=Fp&&typeof Fp.apply=="function"?Fp.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},dx;Fp&&typeof Fp.ownKeys=="function"?dx=Fp.ownKeys:Object.getOwnPropertySymbols?dx=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:dx=function(t){return Object.getOwnPropertyNames(t)};function kce(e){console&&console.warn&&console.warn(e)}var NB=Number.isNaN||function(t){return t!==t};function ei(){ei.init.call(this)}$k.exports=ei;$k.exports.once=Pce;ei.EventEmitter=ei;ei.prototype._events=void 0;ei.prototype._eventsCount=0;ei.prototype._maxListeners=void 0;var tL=10;function B1(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ei,"defaultMaxListeners",{enumerable:!0,get:function(){return tL},set:function(e){if(typeof e!="number"||e<0||NB(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");tL=e}});ei.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ei.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||NB(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function $B(e){return e._maxListeners===void 0?ei.defaultMaxListeners:e._maxListeners}ei.prototype.getMaxListeners=function(){return $B(this)};ei.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var a=t==="error",c=this._events;if(c!==void 0)a=a&&c.error===void 0;else if(!a)return!1;if(a){var h;if(n.length>0&&(h=n[0]),h instanceof Error)throw h;var o=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw o.context=h,o}var m=c[t];if(m===void 0)return!1;if(typeof m=="function")eL(m,this,n);else for(var w=m.length,A=WB(m,w),r=0;r<w;++r)eL(A[r],this,n);return!0};function UB(e,t,n,r){var a,c,h;if(B1(n),c=e._events,c===void 0?(c=e._events=Object.create(null),e._eventsCount=0):(c.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),c=e._events),h=c[t]),h===void 0)h=c[t]=n,++e._eventsCount;else if(typeof h=="function"?h=c[t]=r?[n,h]:[h,n]:r?h.unshift(n):h.push(n),a=$B(e),a>0&&h.length>a&&!h.warned){h.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=h.length,kce(o)}return e}ei.prototype.addListener=function(t,n){return UB(this,t,n,!1)};ei.prototype.on=ei.prototype.addListener;ei.prototype.prependListener=function(t,n){return UB(this,t,n,!0)};function Ace(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jB(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=Ace.bind(r);return a.listener=n,r.wrapFn=a,a}ei.prototype.once=function(t,n){return B1(n),this.on(t,jB(this,t,n)),this};ei.prototype.prependOnceListener=function(t,n){return B1(n),this.prependListener(t,jB(this,t,n)),this};ei.prototype.removeListener=function(t,n){var r,a,c,h,o;if(B1(n),a=this._events,a===void 0)return this;if(r=a[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(c=-1,h=r.length-1;h>=0;h--)if(r[h]===n||r[h].listener===n){o=r[h].listener,c=h;break}if(c<0)return this;c===0?r.shift():Mce(r,c),r.length===1&&(a[t]=r[0]),a.removeListener!==void 0&&this.emit("removeListener",t,o||n)}return this};ei.prototype.off=ei.prototype.removeListener;ei.prototype.removeAllListeners=function(t){var n,r,a;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var c=Object.keys(r),h;for(a=0;a<c.length;++a)h=c[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(t,n[a]);return this};function VB(e,t,n){var r=e._events;if(r===void 0)return[];var a=r[t];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?Ice(a):WB(a,a.length)}ei.prototype.listeners=function(t){return VB(this,t,!0)};ei.prototype.rawListeners=function(t){return VB(this,t,!1)};ei.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):HB.call(e,t)};ei.prototype.listenerCount=HB;function HB(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ei.prototype.eventNames=function(){return this._eventsCount>0?dx(this._events):[]};function WB(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Mce(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Ice(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Pce(e,t){return new Promise(function(n,r){function a(h){e.removeListener(t,c),r(h)}function c(){typeof e.removeListener=="function"&&e.removeListener("error",a),n([].slice.call(arguments))}GB(e,t,c,{once:!0}),t!=="error"&&Dce(e,a,{once:!0})})}function Dce(e,t,n){typeof e.on=="function"&&GB(e,"error",t,n)}function GB(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(c){r.once&&e.removeEventListener(t,a),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Rce={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function Lce(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function Oce(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],r=t[2].split(";"),a=null,c=r.reduce(function(h,o){var m=Lce(o);return m?m.key==="rel"?(a||(a=m.value),h):(h[m.key]=m.value,h):h},{});return a?{url:n,rel:a,params:c}:null}function zce(e){return e?e.split(/,\s*</).reduce(function(t,n){var r=Oce(n);if(!r)return t;var a=r.rel.split(/\s+/);return a.forEach(function(c){t[c]||(t[c]={url:r.url,params:r.params})}),t},{}):{}}var Bce=zce,Fce=Bce;function Uk(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=Fce(this.headers.link)}Uk.prototype.hasNextPage=function(){return!!this.links.next};Uk.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var Nce=Uk,F1={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},nL=F1;function $ce(e){var t=e.type||nL.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var r=e.message||null;r||(typeof n=="string"?r=n:n&&typeof n.message=="string"?r=n.message:t===nL.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var Uce=$ce;function jce(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),r=e.substring(t+1).trim();return{name:n,value:r}}function Vce(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var r=jce(n);t[r.name]=r.value}),t}var Hce=Vce,Wce=Nce,rL=Uce,wE=F1,Gce=Hce,h0={};function qce(e){var t=h0[e.id];!t||(t.abort(),delete h0[e.id])}function Zce(e,t){return new Wce(e,{body:t.response,headers:Gce(t.getAllResponseHeaders()),statusCode:t.status})}function iL(e){var t=e.total,n=e.loaded,r=100*n/t;return{total:t,transferred:n,percent:r}}function qB(e,t){return new Promise(function(n,r){t.onprogress=function(h){e.emitter.emit(wE.EVENT_PROGRESS_DOWNLOAD,iL(h))};var a=e.file;a&&(t.upload.onprogress=function(h){e.emitter.emit(wE.EVENT_PROGRESS_UPLOAD,iL(h))}),t.onerror=function(h){r(h)},t.onabort=function(){var h=new rL({request:e,type:wE.ERROR_REQUEST_ABORTED});r(h)},t.onload=function(){if(delete h0[e.id],t.status<200||t.status>=400){var h=new rL({request:e,body:t.response,statusCode:t.status});r(h);return}n(t)};var c=e.body;typeof c=="string"?t.send(c):c?t.send(JSON.stringify(c)):a?t.send(a):t.send(),h0[e.id]=t}).then(function(n){return Zce(e,n)})}function ZB(e,t){var n=e.url(t),r=new window.XMLHttpRequest;return r.open(e.method,n),Object.keys(e.headers).forEach(function(a){r.setRequestHeader(a,e.headers[a])}),r}function Xce(e){return Promise.resolve().then(function(){var t=ZB(e,e.client.accessToken);return qB(e,t)})}var Kce={browserAbort:qce,sendRequestXhr:qB,browserSend:Xce,createRequestXhr:ZB},gS={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(e,t){(function(n){var r=t,a=e&&e.exports==r&&e,c=typeof Uo=="object"&&Uo;(c.global===c||c.window===c)&&(n=c);var h=function(N){this.message=N};h.prototype=new Error,h.prototype.name="InvalidCharacterError";var o=function(N){throw new h(N)},m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=/[\t\n\f\r ]/g,A=function(N){N=String(N).replace(w,"");var k=N.length;k%4==0&&(N=N.replace(/==?$/,""),k=N.length),(k%4==1||/[^+a-zA-Z0-9/]/.test(N))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var V=0,U,W,F="",z=-1;++z<k;)W=m.indexOf(N.charAt(z)),U=V%4?U*64+W:W,V++%4&&(F+=String.fromCharCode(255&U>>(-2*V&6)));return F},P=function(N){N=String(N),/[^\0-\xFF]/.test(N)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var k=N.length%3,V="",U=-1,W,F,z,S,b=N.length-k;++U<b;)W=N.charCodeAt(U)<<16,F=N.charCodeAt(++U)<<8,z=N.charCodeAt(++U),S=W+F+z,V+=m.charAt(S>>18&63)+m.charAt(S>>12&63)+m.charAt(S>>6&63)+m.charAt(S&63);return k==2?(W=N.charCodeAt(U)<<8,F=N.charCodeAt(++U),S=W+F,V+=m.charAt(S>>10)+m.charAt(S>>4&63)+m.charAt(S<<2&63)+"="):k==1&&(S=N.charCodeAt(U),V+=m.charAt(S>>2)+m.charAt(S<<4&63)+"=="),V},O={encode:P,decode:A,version:"0.1.0"};if(r&&!r.nodeType)if(a)a.exports=O;else for(var B in O)O.hasOwnProperty(B)&&(r[B]=O[B]);else n.base64=O})(Uo)})(gS,gS.exports);var Yce=gS.exports,EE={};function Jce(e){if(EE[e])return EE[e];var t=e.split("."),n=t[0],r=t[1];if(!r)throw new Error("Invalid token");var a=Qce(r),c={usage:n,user:a.u};return cd(a,"a")&&(c.authorization=a.a),cd(a,"exp")&&(c.expires=a.exp*1e3),cd(a,"iat")&&(c.created=a.iat*1e3),cd(a,"scopes")&&(c.scopes=a.scopes),cd(a,"client")&&(c.client=a.client),cd(a,"ll")&&(c.lastLogin=a.ll),cd(a,"iu")&&(c.impersonator=a.iu),EE[e]=c,c}function Qce(e){try{return JSON.parse(Yce.decode(e))}catch{throw new Error("Invalid token")}}function cd(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var XB=Jce,KB={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(m,w,A){this.fn=m,this.context=w,this.once=A||!1}function c(m,w,A,P,O){if(typeof A!="function")throw new TypeError("The listener must be a function");var B=new a(A,P||m,O),N=n?n+w:w;return m._events[N]?m._events[N].fn?m._events[N]=[m._events[N],B]:m._events[N].push(B):(m._events[N]=B,m._eventsCount++),m}function h(m,w){--m._eventsCount===0?m._events=new r:delete m._events[w]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var w=[],A,P;if(this._eventsCount===0)return w;for(P in A=this._events)t.call(A,P)&&w.push(n?P.slice(1):P);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(A)):w},o.prototype.listeners=function(w){var A=n?n+w:w,P=this._events[A];if(!P)return[];if(P.fn)return[P.fn];for(var O=0,B=P.length,N=new Array(B);O<B;O++)N[O]=P[O].fn;return N},o.prototype.listenerCount=function(w){var A=n?n+w:w,P=this._events[A];return P?P.fn?1:P.length:0},o.prototype.emit=function(w,A,P,O,B,N){var k=n?n+w:w;if(!this._events[k])return!1;var V=this._events[k],U=arguments.length,W,F;if(V.fn){switch(V.once&&this.removeListener(w,V.fn,void 0,!0),U){case 1:return V.fn.call(V.context),!0;case 2:return V.fn.call(V.context,A),!0;case 3:return V.fn.call(V.context,A,P),!0;case 4:return V.fn.call(V.context,A,P,O),!0;case 5:return V.fn.call(V.context,A,P,O,B),!0;case 6:return V.fn.call(V.context,A,P,O,B,N),!0}for(F=1,W=new Array(U-1);F<U;F++)W[F-1]=arguments[F];V.fn.apply(V.context,W)}else{var z=V.length,S;for(F=0;F<z;F++)switch(V[F].once&&this.removeListener(w,V[F].fn,void 0,!0),U){case 1:V[F].fn.call(V[F].context);break;case 2:V[F].fn.call(V[F].context,A);break;case 3:V[F].fn.call(V[F].context,A,P);break;case 4:V[F].fn.call(V[F].context,A,P,O);break;default:if(!W)for(S=1,W=new Array(U-1);S<U;S++)W[S-1]=arguments[S];V[F].fn.apply(V[F].context,W)}}return!0},o.prototype.on=function(w,A,P){return c(this,w,A,P,!1)},o.prototype.once=function(w,A,P){return c(this,w,A,P,!0)},o.prototype.removeListener=function(w,A,P,O){var B=n?n+w:w;if(!this._events[B])return this;if(!A)return h(this,B),this;var N=this._events[B];if(N.fn)N.fn===A&&(!O||N.once)&&(!P||N.context===P)&&h(this,B);else{for(var k=0,V=[],U=N.length;k<U;k++)(N[k].fn!==A||O&&!N[k].once||P&&N[k].context!==P)&&V.push(N[k]);V.length?this._events[B]=V.length===1?V[0]:V:h(this,B)}return this},o.prototype.removeAllListeners=function(w){var A;return w?(A=n?n+w:w,this._events[A]&&h(this,A)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(KB);function ede(e){return e.map(encodeURIComponent).join(",")}function YB(e){return Array.isArray(e)?ede(e):encodeURIComponent(String(e))}function JB(e,t,n){if(n===!1||n===null)return e;var r=/\?/.test(e)?"&":"?",a=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(a+="="+YB(n)),""+e+r+a}function tde(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(r){var a=t[r];a!==void 0&&(Array.isArray(a)&&(a=a.filter(function(c){return c!=null}).join(",")),n=JB(n,r,a))}),n}function nde(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function rde(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,r){var a=t[r];if(a===void 0)throw new Error("Unspecified route parameter "+r);var c=YB(a);return"/"+c}):e}var ide={appendQueryObject:tde,appendQueryParam:JB,prependOrigin:nde,interpolateRouteParams:rde},ode=XB,jk=ff,ade=KB.exports,F_=ide,oL=F1,sde=1;function uc(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var r=jk(n,t.headers),a=Object.keys(r).reduce(function(c,h){return c[h.toLowerCase()]=r[h],c},{});this.id=sde++,this._options=t,this.emitter=new ade,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=a}uc.prototype.url=function(t){var n=F_.prependOrigin(this.path,this.origin);n=F_.appendQueryObject(n,this.query);var r=this.params,a=t==null?this.client.accessToken:t;if(a){n=F_.appendQueryParam(n,"access_token",a);var c=ode(a).user;r=jk({ownerId:c},r)}return n=F_.interpolateRouteParams(n,r),n};uc.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit(oL.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit(oL.EVENT_ERROR,n),n})};uc.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};uc.prototype.eachPage=function(t){var n=this;function r(h){function o(){delete n._nextPageRequest;var m=h.nextPage();m&&(n._nextPageRequest=m,c(m))}t(null,h,o)}function a(h){t(h,null,function(){})}function c(h){h.send().then(r,a)}c(this)};uc.prototype.clone=function(){return this._extend()};uc.prototype._extend=function(t){var n=jk(this._options,t);return new uc(this.client,n)};var lde=uc,ude=XB,cde=lde,dde=F1;function QB(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");ude(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||dde.API_ORIGIN}QB.prototype.createRequest=function(t){return new cde(this,t)};var eF=QB,tF=Kce,nF=eF;function ef(e){nF.call(this,e)}ef.prototype=Object.create(nF.prototype);ef.prototype.constructor=ef;ef.prototype.sendRequest=tF.browserSend;ef.prototype.abortRequest=tF.browserAbort;function hde(e){return new ef(e)}var rF=hde,pde=rF,fde=pde,mde=Object.prototype.toString,gde=function(e){var t;return mde.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},yde=gde,vde=ff,iF="value",CE=`
  `,ii={};ii.assert=function(e,t){return t=t||{},function(n){var r=cc(e,n);if(!!r){var a=Vk(r,t);throw t.apiName&&(a=t.apiName+": "+a),new Error(a)}}};ii.shape=function(t){var n=wde(t);return function(a){var c=cc(ii.plainObject,a);if(c)return c;for(var h,o,m=[],w=0;w<n.length;w++)h=n[w].key,o=n[w].value,c=cc(o,a[h]),c&&m.push([h].concat(c));return m.length<2?m[0]:function(A){m=m.map(function(B){var N=B[0],k=Vk(B,A).split(`
`).join(CE);return"- "+N+": "+k});var P=A.path.join("."),O=P===iF?"":" of "+P;return"The following properties"+O+" have invalid values:"+CE+m.join(CE)}}};ii.strictShape=function(t){var n=ii.shape(t);return function(a){var c=n(a);if(c)return c;var h=Object.keys(a).reduce(function(o,m){return t[m]===void 0&&o.push(m),o},[]);if(h.length!==0)return function(){return"The following keys are invalid: "+h.join(", ")}}};ii.arrayOf=function(t){return oF(t)};ii.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return oF(t)};function oF(e){var t=Array.isArray(e),n=function(r){return t?e[r]:e};return function(a){var c=cc(ii.plainArray,a);if(c)return c;if(t&&a.length!==e.length)return"an array with "+e.length+" items";for(var h=0;h<a.length;h++)if(c=cc(n(h),a[h]),c)return[h].concat(c)}}ii.required=function(t){function n(r){return r==null?function(a){return aF(a,sF(a.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};ii.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(r){var a=t.map(function(c){return cc(c,r)}).filter(Boolean);if(a.length===t.length)return a.every(function(c){return c.length===1&&typeof c[0]=="string"})?_de(a.map(function(c){return c[0]})):a.reduce(function(c,h){return h.length>c.length?h:c})}};ii.equal=function(t){return function(r){if(r!==t)return JSON.stringify(t)}};ii.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(r){return ii.equal(r)});return ii.oneOfType.apply(this,n)};ii.range=function(t){var n=t[0],r=t[1];return function(c){var h=cc(ii.number,c);if(h||c<n||c>r)return"number between "+n+" & "+r+" (inclusive)"}};ii.any=function(){};ii.boolean=function(t){if(typeof t!="boolean")return"boolean"};ii.number=function(t){if(typeof t!="number")return"number"};ii.plainArray=function(t){if(!Array.isArray(t))return"array"};ii.plainObject=function(t){if(!yde(t))return"object"};ii.string=function(t){if(typeof t!="string")return"string"};ii.func=function(t){if(typeof t!="function")return"function"};function cc(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function Vk(e,t){var n=e.length,r=e[n-1],a=e.slice(0,n-1);return a.length===0&&(a=[iF]),t=vde(t,{path:a}),typeof r=="function"?r(t):aF(t,xde(r))}function _de(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function xde(e){return"must be "+bde(e)+"."}function bde(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function aF(e,t){var n=sF(e.path),r=e.path.join(".")+" "+t,a=n?"Item at position ":"";return a+r}function sF(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function wde(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}ii.validate=cc;ii.processMessage=Vk;var Ede=ii,Cde=ff,Np=Ede;function Sde(e){if(typeof window!="undefined")return e instanceof Uo.Blob||e instanceof Uo.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function Tde(e,t){return Np.assert(Np.strictShape(e),t)}function kde(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function Ade(e){return Np.tuple(Np.number,Np.number)(e)}var Mde=Cde(Np,{file:Sde,date:kde,coordinates:Ade,assertShape:Tde});function Ide(e,t){var n=function(r,a){return t.indexOf(r)!==-1&&a!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(r){return n(r,e[r])}).reduce(function(r,a){return r[a]=e[a],r},{})}var Pde=Ide;function Dde(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(r,e[r]),n},{})}var Rde=Dde,Lde=Rde;function Ode(e){return Lde(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var zde=Ode,Bde=eF,Fde=rF;function Nde(e){return function(t){var n;Bde.prototype.isPrototypeOf(t)?n=t:n=Fde(t);var r=Object.create(e);return r.client=n,r}}var $de=Nde,lF=ff,mr=Mde,p0=Pde,uF=zde,Ude=$de,Hk={},cF=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];Hk.forwardGeocode=function(e){mr.assertShape({query:mr.required(mr.string),mode:mr.oneOf("mapbox.places","mapbox.places-permanent"),countries:mr.arrayOf(mr.string),proximity:mr.oneOf(mr.coordinates,"ip"),types:mr.arrayOf(mr.oneOf(cF)),autocomplete:mr.boolean,bbox:mr.arrayOf(mr.number),limit:mr.number,language:mr.arrayOf(mr.string),routing:mr.boolean,fuzzyMatch:mr.boolean,worldview:mr.string})(e),e.mode=e.mode||"mapbox.places";var t=uF(lF({country:e.countries},p0(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:p0(e,["mode","query"]),query:t})};Hk.reverseGeocode=function(e){mr.assertShape({query:mr.required(mr.coordinates),mode:mr.oneOf("mapbox.places","mapbox.places-permanent"),countries:mr.arrayOf(mr.string),types:mr.arrayOf(mr.oneOf(cF)),bbox:mr.arrayOf(mr.number),limit:mr.number,language:mr.arrayOf(mr.string),reverseMode:mr.oneOf("distance","score"),routing:mr.boolean,worldview:mr.string})(e),e.mode=e.mode||"mapbox.places";var t=uF(lF({country:e.countries},p0(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:p0(e,["mode","query"]),query:t})};var jde=Ude(Hk);let Vde="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",dF=e=>crypto.getRandomValues(new Uint8Array(e)),hF=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*r*t/e.length);return(c=t)=>{let h="";for(;;){let o=n(a),m=a;for(;m--;)if(h+=e[o[m]&r]||"",h.length===c)return h}}},Hde=(e,t=21)=>hF(e,t,dF),Wde=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var Gde=Object.freeze(Object.defineProperty({__proto__:null,nanoid:Wde,customAlphabet:Hde,customRandom:hF,urlAlphabet:Vde,random:dF},Symbol.toStringTag,{value:"Module"})),qde=K6(Gde),Zde=qde.nanoid;function pF(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}pF.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),r=this.getEventPayload("search.select",t);if(r.resultIndex=n,r.resultPlaceName=e.place_name,r.resultId=e.id,!(n===this.lastSentIndex&&r.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,!!r.queryString))return this.push(r)},start:function(e){var t=this.getEventPayload("search.start",e);if(!!t.queryString)return this.push(t)},keyevent:function(e,t){if(!!e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(r){if(r)return this.handleError(r,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var r=t._map?t._map.getZoom():void 0,a={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:r,keyboardLocale:this.locale};return e==="search.select"?a.queryString=t.inputString:e!="search.select"&&t._inputEl?a.queryString=t._inputEl.value:a.queryString=t.inputString,a},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var r in e.headers){var a=e.headers[r];n.setRequestHeader(r,a)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return Zde()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(!!t._typeahead){var n=t._typeahead.data,r=e.id,a=n.map(function(h){return h.id}),c=a.indexOf(r);return c}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var Xde=pF,Kde={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},Yde={placeholder:Kde},fF={exports:{}};(function(e){(function(t,n,r){e.exports?e.exports=r():t[n]=r()})(Uo,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(m){return m.match(n)||[]}function a(m){return r(m).filter(function(w,A){return w&&A})}function c(m){return m=r(m),{language:m[1]||t,extlang:m[2]||t,script:m[3]||t,region:m[4]||t}}function h(m,w,A){Object.defineProperty(m,w,{value:A,enumerable:!0})}function o(m,w,A){function P(O){return r(O)[m]||t}h(P,"pattern",w),h(c,A,P)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),h(c,"split",a),c})})(fF);function mF(){}mF.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var Jde=mF;function Qde(e,t){const n=gF(e),r=["address","street","place","country"];var a;if(typeof t=="function")return t(n);const c=r.indexOf(t);return c===-1?a=r:a=r.slice(c),a.reduce(function(h,o){return n[o]?(h!==""&&(h=h+", "),h+n[o]):h},"")}function gF(e){const t=e.address||"",n=e.text||"",r=e.place_name||"",c={address:r.split(",")[0],houseNumber:t,street:n,placeName:r};return e.context.forEach(function(h){const o=h.id.split(".")[0];c[o]=h.text}),c}const ehe=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var the={transformFeatureToGeolocationText:Qde,getAddressInfo:gF,REVERSE_GEOCODE_COORD_RGX:ehe},nhe=lce,rhe=Tce,yd=ff,ihe=$k.exports.EventEmitter,aL=Rce,SE=fde,TE=jde,ohe=Xde,ahe=Yde,she=fF.exports,lhe=Jde,sL=the;const Nu={FORWARD:0,LOCAL:1,REVERSE:2};function uhe(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function yF(e){this._eventEmitter=new ihe,this.options=yd({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new lhe}yF.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const a=n.onAdd();r.appendChild(a)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=TE(SE({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new ohe(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",rhe(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(w){this.eventManager.keyevent(w,this)}.bind(this));var r=document.createElement("div");r.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var a=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(a),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(r),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var c=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(c),r.appendChild(this._geolocateEl),this._showGeolocateButton()}var h=this._typeahead=new nhe(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),h.getItemValue=this.options.getItemValue;var o=h.list.draw,m=this._footerNode=uhe();return h.list.draw=function(){o.call(this),m.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),m.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(m)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const r=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(r),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(r){const a=r.body.features[0];if(a){const c=sL.transformFeatureToGeolocationText(a,this.options.addressAccuracy);this._setInputValue(c),a.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:a})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var r=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,a=r?r.value:"";if(!a)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&aL[e.properties.short_code])t=yd({},this.options.flyTo),this._map&&this._map.fitBounds(aL[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=yd({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var r={zoom:this.options.zoom};t=yd({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=Nu.LOCAL:e.reverseGeocode&&sL.REVERSE_GEOCODE_COORD_RGX.test(t)?n=Nu.REVERSE:n=Nu.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],r=/[\s,]+/;var a=this,c=n.reduce(function(o,m){if(a.options[m]===void 0||a.options[m]===null)return o;["countries","types","language"].indexOf(m)>-1?o[m]=a.options[m].split(r):o[m]=a.options[m];const w=typeof a.options[m].longitude=="number"&&typeof a.options[m].latitude=="number";if(m==="proximity"&&w){const A=a.options[m].longitude,P=a.options[m].latitude;o[m]=[A,P]}return o},{});switch(e){case Nu.REVERSE:{var h=t.split(r).map(function(o){return parseFloat(o,10)});a.options.flipCoordinates||h.reverse(),c.types&&c.types[0],c=yd(c,{query:h,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(o){o in c&&delete c[o]})}break;case Nu.FORWARD:{const o=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(o)&&(t=t.replace(/,/g," ")),c=yd(c,{query:t})}break}return c},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var r;switch(t){case Nu.LOCAL:r=Promise.resolve();break;case Nu.FORWARD:r=this.geocoderService.forwardGeocode(n).send();break;case Nu.REVERSE:r=this.geocoderService.reverseGeocode(n).send();break}var a=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],c=[],h=null;return r.catch(function(o){h=o}.bind(this)).then(function(o){this._hideLoadingIcon();var m={};return o?o.statusCode=="200"&&(m=o.body,m.request=o.request,m.headers=o.headers):m={type:"FeatureCollection",features:[]},m.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),m.features=m.features?a.concat(m.features):a,this.options.externalGeocoder?(c=this.options.externalGeocoder(e,m.features)||Promise.resolve([]),c.then(function(w){return m.features=m.features?w.concat(m.features):w,m},function(){return m})):m}.bind(this)).then(function(o){if(h)throw h;this.options.filter&&o.features.length&&(o.features=o.features.filter(this.options.filter)),o.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",o),this._typeahead.update(o.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",o))}.bind(this)).catch(function(o){this._hideLoadingIcon(),this._hideAttribution(),a.length&&this.options.localGeocoder||c.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(a)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:a}),this._eventEmitter.emit("error",{error:o})}.bind(this)),r},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(!!t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=she.language(e),n=ahe.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=TE(SE({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=TE(SE({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(!!this._map){this._removeMarker();var t={color:"#4668F2"},n=yd({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var che=yF;function dhe(e){document.getElementById("coordinates");const t={features:[{type:"Feature",geometry:{type:"Point",coordinates:[-79.46242786599252,43.75383226893149]},properties:{title:"Portable 1",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46243325527307,43.753970965485735]},properties:{title:"Portable 2",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46221099031513,43.75317237412631]},properties:{title:"Portable 3",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4624108175995,43.75314428115445]},properties:{title:"Portable 4",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46218818873812,43.75305128362666]},properties:{title:"Portable 5",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238399545628,43.753030941531875]},properties:{title:"Portable 6",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46256102100658,43.75326634251712]},properties:{title:"Portable 7",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462327663467,43.75335158721401]},properties:{title:"Room 119",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46234644222046,43.753461051808415]},properties:{title:"Room 121",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46236521768313,43.75354726659225]},properties:{title:"Room 123",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238265202406,43.75363735643279]},properties:{title:"Room 125",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462198032334,43.75360889118667]},properties:{title:"small gym (124)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46207609586855,43.75347184182684]},properties:{title:"fitness centre (124c)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46208442599088,43.75363465159106]},properties:{title:"team change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46199855338851,43.753670911751186]},properties:{title:"girls change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46195099685673,43.753506785659]},properties:{title:"boys change room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46193094840253,43.75359351676818]},properties:{title:"equipment office (127D)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46188333944669,43.75353345567834]},properties:{title:"gym office (127E)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46191351470047,43.75364049932426]},properties:{title:"gym office (127A)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46172911873167,43.75361606821852]},properties:{title:"large gym (127)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4621022029668,43.75382222066108]},properties:{title:"Room 118T",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46215856297853,43.753759532291014]},properties:{title:"Room 118C",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46195278569445,43.75379119907919]},properties:{title:"Room 118E",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4618069554343,43.75382092588782]},properties:{title:"Room 114",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46167722609954,43.7537957223808]},properties:{title:"music office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145355825836,43.753934020553146]},properties:{title:"dance room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46121179888955,43.75373700003314]},properties:{title:"cafeteria/cafetorium",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46105544571898,43.75333204884339]},properties:{title:"library (134)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46107005200406,43.75322380678202]},properties:{title:"special education resource",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46104008434995,43.753229743456245]},properties:{title:"SAC room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100721719883,43.75323148904425]},properties:{title:"cyw",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46098063358639,43.753235329484454]},properties:{title:"library office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100511477736,43.75357005485046]},properties:{title:"staff room",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4611868324436,43.75348515432293]},properties:{title:"student services",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4613271203871,43.7535216196801]},properties:{title:"Main Office (116)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612725332962,43.75326367491422]},properties:{title:"Room 108b",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46127074403375,43.75321326924049]},properties:{title:"Room 108a",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46128058522986,43.75315898346079]},properties:{title:"Room 106",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46125649284252,43.75304288437272]},properties:{title:"Room 104",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46122382537122,43.752906633057165]},properties:{title:"Room 102",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46136354515774,43.752898126964254]},properties:{title:"Room 101",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139777712486,43.753043114903306]},properties:{title:"Room 103",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46140380351744,43.75312579142903]},properties:{title:"Science Office (105)",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145048325354,43.753248299164255]},properties:{title:"Room 107",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4614761683771,43.75338955719843]},properties:{title:"Room 109",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46164036883964,43.75341958509614]},properties:{title:"Room 111",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4617811841459,43.75340328772481]},properties:{title:"Room 113",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4618675399702,43.75338755291526]},properties:{title:"business office",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4619749024224,43.753384181329636]},properties:{title:"Room 117",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46238565237367,43.75363361197046]},properties:{title:"Room 231",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46236964343728,43.75353590861371]},properties:{title:"Room 229",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46235355018324,43.7534516311066]},properties:{title:"Room 227",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46233057723609,43.753381976637144]},properties:{title:"co-op office (226)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46232115842207,43.75333592207335]},properties:{title:"Room 225",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46218059901656,43.75335319315036]},properties:{title:"Room 223",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46211394375436,43.75346309583611]},properties:{title:"computer office (233)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46199367203847,43.753379882216166]},properties:{title:"Room 222",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46186832688937,43.75339349079542]},properties:{title:"Room 221",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46175240183594,43.75340709778331]},properties:{title:"Room 220",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163140622886,43.75342489140834]},properties:{title:"Room 219",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46148515501359,43.75340071235618]},properties:{title:"Room 213",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46146486998195,43.75331017352619]},properties:{title:"Room 211",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46144603105236,43.753222249695966]},properties:{title:"Room 209",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46142791795658,43.753137991624214]},properties:{title:"Room 207",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139302860175,43.75298885245036]},properties:{title:"Room 203",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46136767069875,43.75288156880836]},properties:{title:"Room 201",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46122821655393,43.752901057246845]},properties:{title:"Room 202",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612506789127,43.75298740995075]},properties:{title:"Room 204",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46126661842634,43.75306957486865]},properties:{title:"Room 206",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46128545635727,43.75315802234198]},properties:{title:"Room 208",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46130284491909,43.75324332707672]},properties:{title:"Room 210",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46132168256682,43.75332549164267]},properties:{title:"Room 212",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46134559208431,43.75341393834546]},properties:{title:"Room 214",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154185196188,43.75361634427]},properties:{title:"dark room",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46144650667092,43.75375052923056]},properties:{title:"dark room (216A)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4615603074014,43.75358834987574]},properties:{title:"book room",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4614354341234,43.753830952741794]},properties:{title:"Room 216",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46158008591014,43.753810213485025]},properties:{title:"Room 215",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46145890294959,43.75391685074018]},properties:{title:"Room 218",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46160715142894,43.75393995400347]},properties:{title:"Room 217",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46138769422942,43.75345548469946]},properties:{title:"modern languages office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139276605106,43.753478131876875]},properties:{title:"history office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139737638734,43.75350077690234]},properties:{title:"geography office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46140705817172,43.753543403070495]},properties:{title:"english office",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46141581781006,43.75359668555146]},properties:{title:"math office (238)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46150331164226,43.753973545031556]},properties:{title:"art office (218A)",floor:2}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46100506863056,43.75350601053009]},properties:{title:"library room A",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46098927243114,43.753440973854964]},properties:{title:"library room B",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.461073977011,43.75360391989807]},properties:{title:"Exit 1",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4612968674094,43.7528424736621]},properties:{title:"Exit 2",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154945637606,43.75343068463039]},properties:{title:"Exit 3",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46207053027169,43.753387916496564]},properties:{title:"Exit 4",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.462225356633,43.75329998220087]},properties:{title:"Exit 5",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4623567892464,43.75368485054281]},properties:{title:"Exit 6",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46225551171938,43.753697201431095]},properties:{title:"Exit 7",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4616471361122,43.753852812405086]},properties:{title:"Exit 7C",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163294208165,43.75396385435636]},properties:{title:"Exit 7D",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46163524982596,43.753980964854605]},properties:{title:"Exit 7E",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.4616518679316,43.75403205707923]},properties:{title:"Exit 7F",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46154103707552,43.754010022029945]},properties:{title:"Exit 8",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46143369162724,43.75400234476848]},properties:{title:"Exit 8A",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46139309605415,43.75381129680861]},properties:{title:"Exit 8B",floor:1}},{type:"Feature",geometry:{type:"Point",coordinates:[-79.46109108651713,43.75380139567167]},properties:{title:"Exit 8C",floor:1}},{type:"Feature",properties:{title:"Stage",floor:1},geometry:{type:"Point",coordinates:[-79.46198968848333,43.75325517632149]}},{type:"Feature",properties:{title:"Booth 13",floor:1},geometry:{type:"Point",coordinates:[-79.46219738125589,43.75323295523572]}},{type:"Feature",properties:{title:"Booth 12",floor:1},geometry:{type:"Point",coordinates:[-79.46207866115284,43.75318521982399]}},{type:"Feature",properties:{title:"Booth 11",floor:1},geometry:{type:"Point",coordinates:[-79.46165706009798,43.75321935736699]}},{type:"Feature",properties:{title:"Booth 10",floor:1},geometry:{type:"Point",coordinates:[-79.4618750685682,43.75311118946689]}},{type:"Feature",properties:{title:"Booth 14",floor:1},geometry:{type:"Point",coordinates:[-79.46209468956859,43.753125035135554]}},{type:"Feature",properties:{title:"Booth 15",floor:1},geometry:{type:"Point",coordinates:[-79.46207501005615,43.753063291649454]}},{type:"Feature",properties:{title:"Booth 08",floor:1},geometry:{type:"Point",coordinates:[-79.46204669592589,43.75298912538665]}},{type:"Feature",properties:{title:"Booth 07",floor:1},geometry:{type:"Point",coordinates:[-79.46193911779909,43.75295355028311]}},{type:"Feature",properties:{title:"Booth 06",floor:1},geometry:{type:"Point",coordinates:[-79.46181749497252,43.752941266286854]}},{type:"Feature",properties:{title:"Booth 05",floor:1},geometry:{type:"Point",coordinates:[-79.46170511120118,43.75294733544803]}},{type:"Feature",properties:{title:"Booth 04",floor:1},geometry:{type:"Point",coordinates:[-79.46146134490077,43.75285072422923]}},{type:"Feature",properties:{title:"Booth 03",floor:1},geometry:{type:"Point",coordinates:[-79.46147604027834,43.75293562803412]}},{type:"Feature",properties:{title:"Booth 02",floor:1},geometry:{type:"Point",coordinates:[-79.46150013755523,43.753062392390746]}},{type:"Feature",properties:{title:"Booth 01",floor:1},geometry:{type:"Point",coordinates:[-79.46151085321212,43.753155288730596]}},{type:"Feature",properties:{title:"Booth 09",floor:1},geometry:{type:"Point",coordinates:[-79.46168273591726,43.7530478330533]}}],type:"FeatureCollection"};function n(a){const c=[];for(const h of t.features)h.properties.title.toLowerCase().includes(a.toLowerCase())&&(h.place_name=`${h.properties.title}`,h.center=h.geometry.coordinates,c.push(h));return c}const r=new che({accessToken:Cp.accessToken,localGeocoder:n,localGeocoderOnly:!0,zoom:19,placeholder:"Search School",marker:{color:"red"},mapboxgl:Cp,render:function(a){return`<div class='geocoder-dropdown-item'>
    <span class='geocoder-dropdown-text'>
    ${a.properties.title}
    </span>
    </div>`}});e.addControl(r),e.on("load",()=>{e.addSource("floorOne",{type:"image",url:"../static/img/FloorOne.jpg",coordinates:[[-79.46270547634776,43.75413886166868],[-79.46072668772469,43.75413886166868],[-79.46072668772469,43.75274955916902],[-79.46270547634776,43.75274955916902]]}),e.addSource("floorTwo",{type:"image",url:"../static/img/FloorTwo.jpg",coordinates:[[-79.46270547634776,43.75413886166868],[-79.46072668772469,43.75413886166868],[-79.46072668772469,43.75274955916902],[-79.46270547634776,43.75274955916902]]}),e.addSource("outline",{type:"image",url:"../static/img/booths/booths.jpg",coordinates:[[-79.46155542041252,43.7538999252219],[-79.46100243451043,43.75394902268886],[-79.46092763227323,43.7535715308978],[-79.46146639944199,43.75351043643877]]}),e.addControl(new Cp.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),e.addLayer({id:"floorOne",source:"floorOne",type:"raster",layout:{visibility:"visible"}}),e.addLayer({id:"floorTwo",source:"floorTwo",type:"raster",layout:{visibility:"none"}}),e.addLayer({id:"outline",source:"outline",type:"raster",layout:{visibility:"none"}}),e.addSource("booths",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:1,description:' <b> Mackenzie Science Club </b><p><a href="https://maclyonsden.com/club/msc" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4613942054596,43.75355665507274]}},{type:"Feature",properties:{id:2,description:'<b>ACED Team</b><p><a href="https://maclyonsden.com/club/aced" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46135445939534,43.75356090732248]}},{type:"Feature",properties:{id:3,description:'<b>MCPT</b><p><a href="https://maclyonsden.com/club/mcpt" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46140496158867,43.75360322941137]}},{type:"Feature",properties:{id:4,description:'<b>HOSA Team</b><p><a href="https://maclyonsden.com/club/hosa" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46136381338786,43.75360627182371]}},{type:"Feature",properties:{id:5,description:'<b>Animanga Club</b><p><a href="https://maclyonsden.com/club/animanga-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46128489186641,43.75364329694912]}},{type:"Feature",properties:{id:6,description:'<b>Cubing Club</b><p><a href="https://maclyonsden.com/club/cubing-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46128608332647,43.75365481503346]}},{type:"Feature",properties:{id:7,description:'<b>Linguistics Club</b><p><a href="https://maclyonsden.com/club/linguistics" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4612909873974,43.75367164651922]}},{type:"Feature",properties:{id:8,description:'<b>Chess Club</b><p><a href="https://maclyonsden.com/club/chess-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129246204951,43.75368139874675]}},{type:"Feature",properties:{id:9,description:'<b>Book Club</b><p><a href="https://maclyonsden.com/club/book-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129614052039,43.75369893721205]}},{type:"Feature",properties:{id:10,description:'<b>3D Design Club</b><p><a href="https://maclyonsden.com/club/3d-design-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46129823092178,43.753710973343345]}},{type:"Feature",properties:{id:11,description:'<b>History Club</b><p><a href="https://maclyonsden.com/club/history-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46130174953414,43.75372861925064]}},{type:"Feature",properties:{id:12,description:'<b>French Club</b><p><a href="https://maclyonsden.com/club/french-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46130560495627,43.75373952230913]}},{type:"Feature",properties:{id:13,description:'<b>The Lyon</b><p><a href="https://maclyonsden.com/club/the-lyon" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46125581707167,43.75362888910291]}},{type:"Feature",properties:{id:14,description:'<b>Tree Huggers</b><p><a href="https://maclyonsden.com/club/treehuggers" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124157189129,43.75363030445041]}},{type:"Feature",properties:{id:15,description:'<b>Mac Radio Annoucners</b><p><a href="https://maclyonsden.com/club/mac-radio-announcers" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46121714530972,43.753632722096654]}},{type:"Feature",properties:{id:16,description:`<b>Let's Talk Now Club</b><p><a href="https://maclyonsden.com/club/lets-talk-now" target="_blank" title="Opens in a new window">Club Page</a></p>`,icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46120288834399,43.7536349018703]}},{type:"Feature",properties:{id:17,description:'<b>UNICEF</b><p><a href="https://maclyonsden.com/club/unicef" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46117691331494,43.753637686444335]}},{type:"Feature",properties:{id:18,description:'<b>Rainbow Club</b><p><a href="https://maclyonsden.com/club/rainbow-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116265520898,43.75363938250496]}},{type:"Feature",properties:{id:19,description:'<b>UNI-talk</b><p><a href="https://maclyonsden.com/club/UNI-talk" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46113823553753,43.75364216826375]}},{type:"Feature",properties:{id:20,description:'<b>Wellness @ Mac</b><p><a href="https://maclyonsden.com/club/wellness-at-mac" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112314101545,43.75364398532042]}},{type:"Feature",properties:{id:21,description:'<b>Gardening Club</b><p><a href="https://maclyonsden.com/club/gardening-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46109867295455,43.75364676961962]}},{type:"Feature",properties:{id:22,description:'<b>Key Club</b><p><a href="https://maclyonsden.com/club/key-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46108357843245,43.75364846567999]}},{type:"Feature",properties:{id:23,description:'<b>Careers in Design</b><p><a href="https://maclyonsden.com/club/careers-in-design" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46105850701775,43.753651482449214]}},{type:"Feature",properties:{id:24,description:'<b>The Flounder</b><p><a href="https://maclyonsden.com/club/flounder" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46104391452232,43.753652694705266]}},{type:"Feature",properties:{id:25,description:'<b>Cybersecurity Club</b><p><a href="https://maclyonsden.com/club/cybersecurity-club" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46126130154995,43.75369496490765]}},{type:"Feature",properties:{id:26,description:'<b>Mackenzie Engineeering Club</b><p><a href="https://maclyonsden.com/club/MEC" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46125836307769,43.75368385665968]}},{type:"Feature",properties:{id:27,description:'<b>MEDLIFE</b><p><a href="https://maclyonsden.com/club/medlife" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46123535767697,43.7536597356675]}},{type:"Feature",properties:{id:28,description:'<b>Baycrest-Mackenzie Partnership</b><p><a href="https://maclyonsden.com/club/mackenzie-baycrest-partnership" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46121946489153,43.75366139859827]}},{type:"Feature",properties:{id:29,description:'<b>Women in STEM</b><p><a href="https://maclyonsden.com/club/women-in-stem" target="_blank" title="Opens in a new window">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119664892562,43.75366456109961]}},{type:"Feature",properties:{id:30,description:'<b>Math Club</b><p><a href="https://maclyonsden.com/club/math-club" target="_blank" title="Math Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46118165938897,43.7536663936842]}},{type:"Feature",properties:{id:31,description:'<b>Physics Club</b><p><a href="https://maclyonsden.com/club/physics-club" target="_blank" title="Physics Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116413872673,43.75369319879434]}},{type:"Feature",properties:{id:32,description:'<b>Chemistry Club</b><p><a href="https://maclyonsden.com/club/chemistry-club" target="_blank" title="Chemistry Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46116782229596,43.75370450389764]}},{type:"Feature",properties:{id:33,description:'<b>Muslim Culture Club</b><p><a href="https://maclyonsden.com/club/muslim-culture-club" target="_blank" title="Muslim Culture Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119500554012,43.75372414542039]}},{type:"Feature",properties:{id:34,description:'<b>Biology Club</b><p><a href="https://maclyonsden.com/club/bio-club" target="_blank" title="Biology Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46120953770222,43.75372133179536]}},{type:"Feature",properties:{id:35,description:"helk",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46123327399353,43.75371816841607]}},{type:"Feature",properties:{id:36,description:'<b>Jewish Culture Club</b><p><a href="https://maclyonsden.com/club/jewish-culture-club" target="_blank" title="Jewish Culture Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124826422738,43.75371650221419]}},{type:"Feature",properties:{id:37,description:'<b>Dance Team</b><p><a href="https://www.instagram.com/wlmac.danceteam/" target="_blank" title="Dance Teal">@wlmac.danceteam</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46114243759361,43.75370838709108]}},{type:"Feature",properties:{id:38,description:'<b>Central Arts Council</b><p><a href="https://maclyonsden.com/club/artscouncil" target="_blank" title="Central Arts Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46113955168924,43.75369793518965]}},{type:"Feature",properties:{id:39,description:'<b>Mackenzie Calligraphy Club</b><p><a href="https://maclyonsden.com/club/mackenzie-calligraphy-club" target="_blank" title="Mackenzie Calligraphy Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46111398384248,43.753675016730824]}},{type:"Feature",properties:{id:40,description:'<b>Creator\u2019s Joy</b><p><a href="https://maclyonsden.com/club/creators-joy" target="_blank" title="Creator\u2019s Joy">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46109894955666,43.75367648606982]}},{type:"Feature",properties:{id:41,description:'<b>Creative Arts Alliance</b><p><a href="https://maclyonsden.com/club/creative-arts-alliance" target="_blank" title="Creative Arts Alliance">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46107682531661,43.75367831739524]}},{type:"Feature",properties:{id:42,description:'<b>Creative Writing Club</b><p><a href="https://maclyonsden.com/club/mackenzie-creative-writing-club" target="_blank" title="Creative Writing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4610616059595,43.75367998259105]}},{type:"Feature",properties:{id:43,description:"kgjhy",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46107528243958,43.753688731082434]}},{type:"Feature",properties:{id:44,description:"jhfjhg",icon:"embassy"},geometry:{type:"Point",coordinates:[79.46107528243958,43.753688731082434]}},{type:"Feature",properties:{id:45,description:'<b>Visual Arts Council</b><p><a href="https://maclyonsden.com/club/visual-arts-council" target="_blank" title="Visual Arts Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.4610749649739,43.75373709635679]}},{type:"Feature",properties:{id:46,description:'<b>Drama Council</b><p><a href="https://maclyonsden.com/club/drama-concil" target="_blank" title="Drama Council">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46108924570751,43.753734932774734]}},{type:"Feature",properties:{id:47,description:'<b>Composing Club</b><p><a href="https://maclyonsden.com/club/composing-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46111252113948,43.753732934566415]}},{type:"Feature",properties:{id:48,description:'<b>Music Council</b></b><p><a href="https://maclyonsden.com/club/music-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112774136735,43.753731102865345]}},{type:"Feature",properties:{id:49,description:'<b>Model United Nations</b></b><p><a href="https://maclyonsden.com/club/mun" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46127993280194,43.75374969548815]}},{type:"Feature",properties:{id:50,description:'<b>Mackenzie Athletic Council</b></b><p><a href="https://maclyonsden.com/club/athletic-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46126622741446,43.75375153977589]}},{type:"Feature",properties:{id:51,description:'<b>Mock Trials</b></b><p><a href="https://maclyonsden.com/club/mock-trials" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46124041855968,43.75375353773157]}},{type:"Feature",properties:{id:52,description:'<b>Business Council</b></b><p><a href="https://maclyonsden.com/club/business-council" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46122634812941,43.7537552030515]}},{type:"Feature",properties:{id:53,description:'<b>NBA Fan Club</b></b><p><a href="https://maclyonsden.com/club/nba-fan-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46119984807186,43.7537563689765]}},{type:"Feature",properties:{id:54,description:'<b>Debate Club</b></b><p><a href="https://maclyonsden.com/club/debate-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46118508608991,43.753758865571655]}},{type:"Feature",properties:{id:55,description:'<b>Kinesiology and Fitness</b></b><p><a href="https://maclyonsden.com/club/kinesiology-and-fitness" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46115973722371,43.75376186231631]}},{type:"Feature",properties:{id:56,description:'<b>Esports Club</b></b><p><a href="https://maclyonsden.com/club/esports-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46114658851327,43.753762862867404]}},{type:"Feature",properties:{id:57,description:'<b>TED Club</b></b><p><a href="https://maclyonsden.com/club/ted-club" target="_blank" title="Composing Club">Club Page</a></p>',icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}},{type:"Feature",properties:{id:58,description:"sdfsd",icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}},{type:"Feature",properties:{id:59,description:"<b>BILT</b><p>No Information Avalible</p>",icon:"embassy"},geometry:{type:"Point",coordinates:[-79.46112131852031,43.75376500594942]}}]}}),e.addSource("mactoberfest",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:1,description:"Stage",icon:"castle"},geometry:{type:"Point",coordinates:[-79.46198968848333,43.75325517632149]}},{type:"Feature",properties:{id:13,description:"<b>Booth 12</b><p>Drama Council (Goodie Bags + Rice Crispies + Improv Costume Contest)</p> ",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46219738125589,43.75323295523572]}},{type:"Feature",properties:{id:12,description:"<b>Booth 11</b> <p>Gardening Club (Cookies)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46207866115284,43.75318521982399]}},{type:"Feature",properties:{id:11,description:"<b>Booth 10</b> <p>Music Council (Musical Chairs)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46165706009798,43.75321935736699]}},{type:"Feature",properties:{id:10,description:"<b>Booth 09</b> <p>MCPT (Games)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.4618750685682,43.75311118946689]}},{type:"Feature",properties:{id:14,description:"<b>Booth 13</b> <p>Photo Booth</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46209468956859,43.753125035135554]}},{type:"Feature",properties:{id:15,description:"<b>Booth 14</b> <p>DJ</p>",icon:"music"},geometry:{type:"Point",coordinates:[-79.46207501005615,43.753063291649454]}},{type:"Feature",properties:{id:8,description:"<b>Booth 07</b> <p>Let' Talk Now (Timbits)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46193911779909,43.75295355028311]}},{type:"Feature",properties:{id:7,description:"<b>Booth 06</b> <p>MSC (Chips, Cotton Candy, Tic Tac)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46181749497252,43.752941266286854]}},{type:"Feature",properties:{id:6,description:"<b>Booth 05</b> <p>UNICEF (Junior Chickens + Dounuts)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46170511120118,43.75294733544803]}},{type:"Feature",properties:{id:5,description:"<b>Booth 04 </b> <p>Creator's Joy (Juice Boxes)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46159780966113,43.7528969650275]}},{type:"Feature",properties:{id:4,description:"<b>Booth 03 </b> <p>Book Club (Bookmarks + Baked Goods)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46147604027834,43.75293562803412]}},{type:"Feature",properties:{id:2,description:"<b>Booth 02 </b> <p> Dance Team (Popcorn)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46150013755523,43.753062392390746]}},{type:"Feature",properties:{id:1,description:"<b>Booth 01 </b> <p>Athletic Council (Hot Chocolate)</p>",icon:"fast-food"},geometry:{type:"Point",coordinates:[-79.46151085321212,43.753155288730596]}},{type:"Feature",properties:{id:9,description:"<b>Booth 08 </b> <p>Dance Council (Instax Photo Booth)</p>",icon:"bowling-alley"},geometry:{type:"Point",coordinates:[-79.46168273591726,43.7530478330533]}}]}}),e.on("click","mactoberfest",c=>{const h=c.features[0].geometry.coordinates.slice(),o=c.features[0].properties.description;new Cp.Popup().setLngLat(h).setHTML(o).addTo(e)}),e.on("mouseenter","mactoberfest",()=>{e.getCanvas().style.cursor="pointer"}),e.on("mouseleave","mactoberfest",()=>{e.getCanvas().style.cursor=""});var a=document.querySelector("input[name=checkbox]");a.addEventListener("change",function(){this.checked?(console.log("Checkbox is checked.."),e.setLayoutProperty("floorTwo","visibility","visible"),e.setLayoutProperty("floorOne","visibility","none"),e.setLayoutProperty("booths","visibility","none")):(console.log("Checkbox is not checked.."),e.setLayoutProperty("floorOne","visibility","visible"),e.setLayoutProperty("floorTwo","visibility","none"),e.setLayoutProperty("booths","visibility","visible"))}),r.on("result",({result:c})=>{console.log(c.properties.title),c.properties.floor==1?(a.checked=!1,e.setLayoutProperty("floorOne","visibility","visible"),e.setLayoutProperty("floorTwo","visibility","none"),e.setLayoutProperty("booths","visibility","visible")):(a.checked=!0,e.setLayoutProperty("floorTwo","visibility","visible"),e.setLayoutProperty("floorOne","visibility","none"),e.setLayoutProperty("booths","visibility","none"))})})}Cp.accessToken="pk.eyJ1IjoibmlraXN1IiwiYSI6ImNrc3A3c2FieTAwM3kybnA3anNjY2c3MXMifQ.T_8vAyTc4PMuGUC23vIOhA";const hhe=()=>{const e=g.exports.useRef(null),[t,n]=g.exports.useState(-79.46155348420591),[r,a]=g.exports.useState(43.753374130758445),[c,h]=g.exports.useState(19);return g.exports.useEffect(()=>{const o=new Cp.Map({container:e.current,style:"mapbox://styles/nikisu/cktk76xy90rgm17s7q7pg0g55",center:[t,r],zoom:c});return dhe(o),()=>o.remove()},[]),at.createElement(at.Fragment,null,at.createElement("link",{rel:"stylesheet",href:"/static/css/map.css"}),at.createElement("link",{rel:"stylesheet",href:"/static/css/mapbox-gl-geocoder.css"}),at.createElement("link",{rel:"stylesheet",href:"/static/css/mapbox-gl.css"}),at.createElement("script",{src:"/static/js/mapbox-gl-geocoder.min.js"}),at.createElement("script",{src:"/static/js/mapbox-gl.js"}),at.createElement("div",{className:"container"},at.createElement("div",{className:"map-container"},at.createElement("div",{className:"heading"},at.createElement("div",{className:"legend"},at.createElement("div",{className:"legend-items"},at.createElement("div",{className:"legend-square",style:{backgroundColor:"#946987"}}),at.createElement("span",null,"General Spaces")),at.createElement("div",{className:"legend-items"},at.createElement("div",{className:"legend-square",style:{backgroundColor:"#946469"}}),at.createElement("span",null,"Washrooms + Change Rooms")),at.createElement("div",{className:"legend-items"},at.createElement("div",{className:"legend-square",style:{backgroundColor:"#b0a169"}}),at.createElement("span",null,"Offices")),at.createElement("div",{className:"legend-items"},at.createElement("div",{className:"legend-square",style:{backgroundColor:"#68936f"}}),at.createElement("span",null,"Classrooms + Labs")),at.createElement("div",{className:"legend-items"},at.createElement("div",{className:"legend-square",style:{backgroundColor:"#5d97d1"}}),at.createElement("span",null,"Stairways")),at.createElement("div",{className:"legend-items"},at.createElement("div",{className:"legend-square",style:{backgroundColor:"#3774b2"}}),at.createElement("span",null,"Hallways")),at.createElement("div",{className:"legend-items"},at.createElement("div",{className:"legend-square",style:{backgroundColor:"#646d78"}}),at.createElement("span",null,"Miscellaneous")))),at.createElement("div",{style:{margin:0}},at.createElement("a",{href:"#help"},at.createElement("i",{className:"small material-icons icon-blue"},"help"))),at.createElement("div",{className:"switch-container"},at.createElement("div",{className:"switch",id:"floor"},at.createElement("label",{style:{fontSize:"1rem"}},"Floor One",at.createElement("input",{type:"checkbox",name:"checkbox",id:"checkbox"}),at.createElement("span",{className:"lever"}),"Floor Two"))),at.createElement("pre",{id:"coordinates",className:"coordinates"}),at.createElement("div",{className:"map mapboxgl-map",id:"map",ref:e},at.createElement("div",{className:"mapboxgl-canary",style:{visibility:"hidden"}}),at.createElement("div",{className:"mapboxgl-canvas-container mapboxgl-interactive mapboxgl-touch-drag-pan mapboxgl-touch-zoom-rotate"},at.createElement("canvas",{className:"mapboxgl-canvas",tabIndex:0,"aria-label":"Map",role:"region",width:"998",height:"532",style:{width:"998px",height:"532px"}})),at.createElement("div",{className:"mapboxgl-control-container"},at.createElement("div",{className:"mapboxgl-ctrl-top-left"}),at.createElement("div",{className:"mapboxgl-ctrl-top-right"},at.createElement("div",{className:"mapboxgl-ctrl-geocoder mapboxgl-ctrl"},at.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-search",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},at.createElement("path",{d:"M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"})),at.createElement("input",{type:"text",className:"mapboxgl-ctrl-geocoder--input",placeholder:"Search School","aria-label":"Search School"}),at.createElement("div",{className:"suggestions-wrapper"},at.createElement("ul",{className:"suggestions",style:{display:"none"}})),at.createElement("div",{className:"mapboxgl-ctrl-geocoder--pin-right"},at.createElement("button",{"aria-label":"Clear",className:"mapboxgl-ctrl-geocoder--button"},at.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-close",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},at.createElement("path",{d:"M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"}))),at.createElement("svg",{className:"mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-loading",viewBox:"0 0 18 18",xmlSpace:"preserve",width:"18",height:"18"},at.createElement("path",{fill:"#333",d:"M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"}),at.createElement("path",{opacity:".1",d:"M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"})))),at.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group"},at.createElement("button",{className:"mapboxgl-ctrl-geolocate",type:"button",title:"Find my location","aria-label":"Find my location","aria-pressed":"false"},at.createElement("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"})))),at.createElement("div",{className:"mapboxgl-ctrl-bottom-left"},at.createElement("div",{className:"mapboxgl-ctrl",style:{display:"block"}},at.createElement("a",{className:"mapboxgl-ctrl-logo",target:"_blank",rel:"noopener nofollow",href:"https://www.mapbox.com/","aria-label":"Mapbox logo"}))),at.createElement("div",{className:"mapboxgl-ctrl-bottom-right"},at.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-attrib"},at.createElement("button",{className:"mapboxgl-ctrl-attrib-button",type:"button",title:"Toggle attribution","aria-label":"Toggle attribution"}),at.createElement("div",{className:"mapboxgl-ctrl-attrib-inner",role:"list"},at.createElement("a",{href:"https://www.mapbox.com/about/maps/",target:"_blank",title:"Mapbox","aria-label":"Mapbox",role:"listitem"},"\xA9 Mapbox")," ",at.createElement("a",{href:"https://www.openstreetmap.org/about/",target:"_blank",title:"OpenStreetMap","aria-label":"OpenStreetMap",role:"listitem"},"\xA9 OpenStreetMap")," ",at.createElement("a",{className:"mapbox-improve-map",href:"https://apps.mapbox.com/feedback/?owner=nikisu&id=cktk76xy90rgm17s7q7pg0g55&access_token=pk.eyJ1IjoibmlraXN1IiwiYSI6ImNrc3A3c2FieTAwM3kybnA3anNjY2c3MXMifQ.T_8vAyTc4PMuGUC23vIOhA",target:"_blank",title:"Map feedback","aria-label":"Map feedback",role:"listitem",rel:"noopener nofollow"},"Improve this map")))))),at.createElement("div",{className:"controls",id:"help"},at.createElement("div",{className:"mobile-controls"},at.createElement("details",null,at.createElement("summary",null,at.createElement("h6",null,at.createElement("strong",null," Mobile Controls"))),at.createElement("ul",null,at.createElement("li",null,at.createElement("strong",null,"Pan screen:"),"1 finger + drag"),at.createElement("li",null,at.createElement("strong",null,"Zoom In/Out:"),"2 fingers + pinch screen"),at.createElement("li",null,at.createElement("strong",null,"Perspective:"),"2 fingers + drag")))),at.createElement("div",{className:"computer-controls"},at.createElement("details",null,at.createElement("summary",null,at.createElement("h6",null,at.createElement("strong",null," Computer Controls"))),at.createElement("ul",null,at.createElement("li",null,at.createElement("strong",null,"Pan screen:"),"drag screen"),at.createElement("li",null,at.createElement("strong",null,"Zoom In/Out:"),"double click OR scroll up or down"),at.createElement("li",null,at.createElement("strong",null,"Perspective:"),"Ctrl + drag"))))))))},phe=()=>{const[e,t]=g.exports.useState(""),{username:n}=qd(),r=g.exports.useContext(Tr);oi(),r.user;const[a,c]=g.exports.useState({});g.exports.useState([]),g.exports.useEffect(()=>{document.title=`User ${a.username} | Metropolis`},[a]);const h=()=>{!n||r.getAPI(`${ur.USER}/retrieve/${n}?lookup=username`,!0).then(o=>{o.data,c(o.data),r.getAPI(`${ur.OBJECT}/organization`,!1).then(m=>{m.data.results}).catch(m=>{})}).catch(o=>{o.response.status===401?(r.refreshAuth(),h()):r.notify("An internal error occurred. Please contact an admin to get it fixed!","error")})};return g.exports.useEffect(()=>{h()},[]),g.exports.useEffect(()=>{if(!("username"in a))return;const o=[];r.allOrgs.forEach(m=>{a.organizations.find(w=>w===m.id)&&o.push(m.name)}),t(o.join(", "))},[r.allOrgs,a]),g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("div",{className:"header"},g.exports.createElement("img",{className:"circle responsive-img profile-picture",src:a.gravatar_url,alt:`${a.username}'s profile picture`}),g.exports.createElement("div",{className:"name-info"},g.exports.createElement("h5",{className:"full-name"},a.first_name," ",a.last_name),g.exports.createElement("h6",{className:"username"},a.username)),r.user.id===a.id&&g.exports.createElement("div",{className:"edit-button"},g.exports.createElement("i",{className:"zmdi zmdi-fw-3x zmdi-edit"}),g.exports.createElement(vn,{to:"/accounts/profile/update"},"Edit"))),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"body"},g.exports.createElement("div",{className:"field"},g.exports.createElement("div",{className:"label"},"Graduating"),g.exports.createElement("div",null,a.graduating_year)),g.exports.createElement("div",{className:"field"},g.exports.createElement("div",{className:"label"},"Executive of"),e),g.exports.createElement("br",null),g.exports.createElement("div",null,a.bio?g.exports.createElement("p",null,a.bio):g.exports.createElement("p",null,"This user has not shared any information."))))},fhe=()=>{const e=oi(),t=g.exports.useContext(Tr);let n=t.user;g.exports.useEffect(()=>{no()||e("/accounts/login")});const{register:r,handleSubmit:a,watch:c,reset:h,formState:{errors:o}}=d4();g.exports.useEffect(()=>{"username"in n&&(console.log("User:",{...t.user,graduating_year:t.user.graduating_year.toString()}),h({...t.user,graduating_year:t.user.graduating_year.toString()}))},[t.user]);const m=w=>{console.log(w),t.putAPI(`${ur.POST.USER_UPDATE}/${n.id}`,w).then(A=>{console.log("Successfully updated user"),e("/accounts/login")}).catch(A=>{console.log("Failed to update user"),t.refreshAuth()})};return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/profile/update.css"}),g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/base.css"}),g.exports.createElement("div",{className:"header"},g.exports.createElement("img",{className:"circle responsive-img profile-picture",src:n.gravatar_url,alt:`${n.username}'s profile picture`}),g.exports.createElement("div",{className:"name-info"},g.exports.createElement("h5",{className:"full-name"},`${n.first_name} ${n.last_name}`),g.exports.createElement("h6",{className:"username"},n.username))),g.exports.createElement("hr",null),g.exports.createElement("div",{className:"body"},g.exports.createElement("div",{className:"avatar"},g.exports.createElement("a",{href:"https://gravatar.com/",target:"_blank"},"Edit profile photo"),g.exports.createElement("br",null)),g.exports.createElement("form",{onSubmit:a(m)},g.exports.createElement("div",{className:"field bio"},g.exports.createElement("div",{className:"label"},g.exports.createElement("label",{htmlFor:"id_bio"},"Bio:")),g.exports.createElement("span",null,g.exports.createElement("textarea",{...r("bio"),name:"bio",cols:40,rows:10,id:"id_bio"}))),g.exports.createElement("div",{className:"field"},g.exports.createElement("div",{className:"label"},g.exports.createElement("label",{htmlFor:"id_timezone"},"Timezone:")),g.exports.createElement("span",null,g.exports.createElement("select",{...r("timezone"),name:"timezone",className:"browser-default",id:"id_timezone"},g.exports.createElement("option",{value:"Africa/Abidjan"},"Africa/Abidjan"),g.exports.createElement("option",{value:"Africa/Accra"},"Africa/Accra"),g.exports.createElement("option",{value:"Africa/Addis_Ababa"},"Africa/Addis_Ababa"),g.exports.createElement("option",{value:"Africa/Algiers"},"Africa/Algiers"),g.exports.createElement("option",{value:"Africa/Asmara"},"Africa/Asmara"),g.exports.createElement("option",{value:"Africa/Bamako"},"Africa/Bamako"),g.exports.createElement("option",{value:"Africa/Bangui"},"Africa/Bangui"),g.exports.createElement("option",{value:"Africa/Banjul"},"Africa/Banjul"),g.exports.createElement("option",{value:"Africa/Bissau"},"Africa/Bissau"),g.exports.createElement("option",{value:"Africa/Blantyre"},"Africa/Blantyre"),g.exports.createElement("option",{value:"Africa/Brazzaville"},"Africa/Brazzaville"),g.exports.createElement("option",{value:"Africa/Bujumbura"},"Africa/Bujumbura"),g.exports.createElement("option",{value:"Africa/Cairo"},"Africa/Cairo"),g.exports.createElement("option",{value:"Africa/Casablanca"},"Africa/Casablanca"),g.exports.createElement("option",{value:"Africa/Ceuta"},"Africa/Ceuta"),g.exports.createElement("option",{value:"Africa/Conakry"},"Africa/Conakry"),g.exports.createElement("option",{value:"Africa/Dakar"},"Africa/Dakar"),g.exports.createElement("option",{value:"Africa/Dar_es_Salaam"},"Africa/Dar_es_Salaam"),g.exports.createElement("option",{value:"Africa/Djibouti"},"Africa/Djibouti"),g.exports.createElement("option",{value:"Africa/Douala"},"Africa/Douala"),g.exports.createElement("option",{value:"Africa/El_Aaiun"},"Africa/El_Aaiun"),g.exports.createElement("option",{value:"Africa/Freetown"},"Africa/Freetown"),g.exports.createElement("option",{value:"Africa/Gaborone"},"Africa/Gaborone"),g.exports.createElement("option",{value:"Africa/Harare"},"Africa/Harare"),g.exports.createElement("option",{value:"Africa/Johannesburg"},"Africa/Johannesburg"),g.exports.createElement("option",{value:"Africa/Juba"},"Africa/Juba"),g.exports.createElement("option",{value:"Africa/Kampala"},"Africa/Kampala"),g.exports.createElement("option",{value:"Africa/Khartoum"},"Africa/Khartoum"),g.exports.createElement("option",{value:"Africa/Kigali"},"Africa/Kigali"),g.exports.createElement("option",{value:"Africa/Kinshasa"},"Africa/Kinshasa"),g.exports.createElement("option",{value:"Africa/Lagos"},"Africa/Lagos"),g.exports.createElement("option",{value:"Africa/Libreville"},"Africa/Libreville"),g.exports.createElement("option",{value:"Africa/Lome"},"Africa/Lome"),g.exports.createElement("option",{value:"Africa/Luanda"},"Africa/Luanda"),g.exports.createElement("option",{value:"Africa/Lubumbashi"},"Africa/Lubumbashi"),g.exports.createElement("option",{value:"Africa/Lusaka"},"Africa/Lusaka"),g.exports.createElement("option",{value:"Africa/Malabo"},"Africa/Malabo"),g.exports.createElement("option",{value:"Africa/Maputo"},"Africa/Maputo"),g.exports.createElement("option",{value:"Africa/Maseru"},"Africa/Maseru"),g.exports.createElement("option",{value:"Africa/Mbabane"},"Africa/Mbabane"),g.exports.createElement("option",{value:"Africa/Mogadishu"},"Africa/Mogadishu"),g.exports.createElement("option",{value:"Africa/Monrovia"},"Africa/Monrovia"),g.exports.createElement("option",{value:"Africa/Nairobi"},"Africa/Nairobi"),g.exports.createElement("option",{value:"Africa/Ndjamena"},"Africa/Ndjamena"),g.exports.createElement("option",{value:"Africa/Niamey"},"Africa/Niamey"),g.exports.createElement("option",{value:"Africa/Nouakchott"},"Africa/Nouakchott"),g.exports.createElement("option",{value:"Africa/Ouagadougou"},"Africa/Ouagadougou"),g.exports.createElement("option",{value:"Africa/Porto-Novo"},"Africa/Porto-Novo"),g.exports.createElement("option",{value:"Africa/Sao_Tome"},"Africa/Sao_Tome"),g.exports.createElement("option",{value:"Africa/Tripoli"},"Africa/Tripoli"),g.exports.createElement("option",{value:"Africa/Tunis"},"Africa/Tunis"),g.exports.createElement("option",{value:"Africa/Windhoek"},"Africa/Windhoek"),g.exports.createElement("option",{value:"America/Adak"},"America/Adak"),g.exports.createElement("option",{value:"America/Anchorage"},"America/Anchorage"),g.exports.createElement("option",{value:"America/Anguilla"},"America/Anguilla"),g.exports.createElement("option",{value:"America/Antigua"},"America/Antigua"),g.exports.createElement("option",{value:"America/Araguaina"},"America/Araguaina"),g.exports.createElement("option",{value:"America/Argentina/Buenos_Aires"},"America/Argentina/Buenos_Aires"),g.exports.createElement("option",{value:"America/Argentina/Catamarca"},"America/Argentina/Catamarca"),g.exports.createElement("option",{value:"America/Argentina/Cordoba"},"America/Argentina/Cordoba"),g.exports.createElement("option",{value:"America/Argentina/Jujuy"},"America/Argentina/Jujuy"),g.exports.createElement("option",{value:"America/Argentina/La_Rioja"},"America/Argentina/La_Rioja"),g.exports.createElement("option",{value:"America/Argentina/Mendoza"},"America/Argentina/Mendoza"),g.exports.createElement("option",{value:"America/Argentina/Rio_Gallegos"},"America/Argentina/Rio_Gallegos"),g.exports.createElement("option",{value:"America/Argentina/Salta"},"America/Argentina/Salta"),g.exports.createElement("option",{value:"America/Argentina/San_Juan"},"America/Argentina/San_Juan"),g.exports.createElement("option",{value:"America/Argentina/San_Luis"},"America/Argentina/San_Luis"),g.exports.createElement("option",{value:"America/Argentina/Tucuman"},"America/Argentina/Tucuman"),g.exports.createElement("option",{value:"America/Argentina/Ushuaia"},"America/Argentina/Ushuaia"),g.exports.createElement("option",{value:"America/Aruba"},"America/Aruba"),g.exports.createElement("option",{value:"America/Asuncion"},"America/Asuncion"),g.exports.createElement("option",{value:"America/Atikokan"},"America/Atikokan"),g.exports.createElement("option",{value:"America/Bahia"},"America/Bahia"),g.exports.createElement("option",{value:"America/Bahia_Banderas"},"America/Bahia_Banderas"),g.exports.createElement("option",{value:"America/Barbados"},"America/Barbados"),g.exports.createElement("option",{value:"America/Belem"},"America/Belem"),g.exports.createElement("option",{value:"America/Belize"},"America/Belize"),g.exports.createElement("option",{value:"America/Blanc-Sablon"},"America/Blanc-Sablon"),g.exports.createElement("option",{value:"America/Boa_Vista"},"America/Boa_Vista"),g.exports.createElement("option",{value:"America/Bogota"},"America/Bogota"),g.exports.createElement("option",{value:"America/Boise"},"America/Boise"),g.exports.createElement("option",{value:"America/Cambridge_Bay"},"America/Cambridge_Bay"),g.exports.createElement("option",{value:"America/Campo_Grande"},"America/Campo_Grande"),g.exports.createElement("option",{value:"America/Cancun"},"America/Cancun"),g.exports.createElement("option",{value:"America/Caracas"},"America/Caracas"),g.exports.createElement("option",{value:"America/Cayenne"},"America/Cayenne"),g.exports.createElement("option",{value:"America/Cayman"},"America/Cayman"),g.exports.createElement("option",{value:"America/Chicago"},"America/Chicago"),g.exports.createElement("option",{value:"America/Chihuahua"},"America/Chihuahua"),g.exports.createElement("option",{value:"America/Costa_Rica"},"America/Costa_Rica"),g.exports.createElement("option",{value:"America/Creston"},"America/Creston"),g.exports.createElement("option",{value:"America/Cuiaba"},"America/Cuiaba"),g.exports.createElement("option",{value:"America/Curacao"},"America/Curacao"),g.exports.createElement("option",{value:"America/Danmarkshavn"},"America/Danmarkshavn"),g.exports.createElement("option",{value:"America/Dawson"},"America/Dawson"),g.exports.createElement("option",{value:"America/Dawson_Creek"},"America/Dawson_Creek"),g.exports.createElement("option",{value:"America/Denver"},"America/Denver"),g.exports.createElement("option",{value:"America/Detroit"},"America/Detroit"),g.exports.createElement("option",{value:"America/Dominica"},"America/Dominica"),g.exports.createElement("option",{value:"America/Edmonton"},"America/Edmonton"),g.exports.createElement("option",{value:"America/Eirunepe"},"America/Eirunepe"),g.exports.createElement("option",{value:"America/El_Salvador"},"America/El_Salvador"),g.exports.createElement("option",{value:"America/Fort_Nelson"},"America/Fort_Nelson"),g.exports.createElement("option",{value:"America/Fortaleza"},"America/Fortaleza"),g.exports.createElement("option",{value:"America/Glace_Bay"},"America/Glace_Bay"),g.exports.createElement("option",{value:"America/Goose_Bay"},"America/Goose_Bay"),g.exports.createElement("option",{value:"America/Grand_Turk"},"America/Grand_Turk"),g.exports.createElement("option",{value:"America/Grenada"},"America/Grenada"),g.exports.createElement("option",{value:"America/Guadeloupe"},"America/Guadeloupe"),g.exports.createElement("option",{value:"America/Guatemala"},"America/Guatemala"),g.exports.createElement("option",{value:"America/Guayaquil"},"America/Guayaquil"),g.exports.createElement("option",{value:"America/Guyana"},"America/Guyana"),g.exports.createElement("option",{value:"America/Halifax"},"America/Halifax"),g.exports.createElement("option",{value:"America/Havana"},"America/Havana"),g.exports.createElement("option",{value:"America/Hermosillo"},"America/Hermosillo"),g.exports.createElement("option",{value:"America/Indiana/Indianapolis"},"America/Indiana/Indianapolis"),g.exports.createElement("option",{value:"America/Indiana/Knox"},"America/Indiana/Knox"),g.exports.createElement("option",{value:"America/Indiana/Marengo"},"America/Indiana/Marengo"),g.exports.createElement("option",{value:"America/Indiana/Petersburg"},"America/Indiana/Petersburg"),g.exports.createElement("option",{value:"America/Indiana/Tell_City"},"America/Indiana/Tell_City"),g.exports.createElement("option",{value:"America/Indiana/Vevay"},"America/Indiana/Vevay"),g.exports.createElement("option",{value:"America/Indiana/Vincennes"},"America/Indiana/Vincennes"),g.exports.createElement("option",{value:"America/Indiana/Winamac"},"America/Indiana/Winamac"),g.exports.createElement("option",{value:"America/Inuvik"},"America/Inuvik"),g.exports.createElement("option",{value:"America/Iqaluit"},"America/Iqaluit"),g.exports.createElement("option",{value:"America/Jamaica"},"America/Jamaica"),g.exports.createElement("option",{value:"America/Juneau"},"America/Juneau"),g.exports.createElement("option",{value:"America/Kentucky/Louisville"},"America/Kentucky/Louisville"),g.exports.createElement("option",{value:"America/Kentucky/Monticello"},"America/Kentucky/Monticello"),g.exports.createElement("option",{value:"America/Kralendijk"},"America/Kralendijk"),g.exports.createElement("option",{value:"America/La_Paz"},"America/La_Paz"),g.exports.createElement("option",{value:"America/Lima"},"America/Lima"),g.exports.createElement("option",{value:"America/Los_Angeles"},"America/Los_Angeles"),g.exports.createElement("option",{value:"America/Lower_Princes"},"America/Lower_Princes"),g.exports.createElement("option",{value:"America/Maceio"},"America/Maceio"),g.exports.createElement("option",{value:"America/Managua"},"America/Managua"),g.exports.createElement("option",{value:"America/Manaus"},"America/Manaus"),g.exports.createElement("option",{value:"America/Marigot"},"America/Marigot"),g.exports.createElement("option",{value:"America/Martinique"},"America/Martinique"),g.exports.createElement("option",{value:"America/Matamoros"},"America/Matamoros"),g.exports.createElement("option",{value:"America/Mazatlan"},"America/Mazatlan"),g.exports.createElement("option",{value:"America/Menominee"},"America/Menominee"),g.exports.createElement("option",{value:"America/Merida"},"America/Merida"),g.exports.createElement("option",{value:"America/Metlakatla"},"America/Metlakatla"),g.exports.createElement("option",{value:"America/Mexico_City"},"America/Mexico_City"),g.exports.createElement("option",{value:"America/Miquelon"},"America/Miquelon"),g.exports.createElement("option",{value:"America/Moncton"},"America/Moncton"),g.exports.createElement("option",{value:"America/Monterrey"},"America/Monterrey"),g.exports.createElement("option",{value:"America/Montevideo"},"America/Montevideo"),g.exports.createElement("option",{value:"America/Montserrat"},"America/Montserrat"),g.exports.createElement("option",{value:"America/Nassau"},"America/Nassau"),g.exports.createElement("option",{value:"America/New_York"},"America/New_York"),g.exports.createElement("option",{value:"America/Nipigon"},"America/Nipigon"),g.exports.createElement("option",{value:"America/Nome"},"America/Nome"),g.exports.createElement("option",{value:"America/Noronha"},"America/Noronha"),g.exports.createElement("option",{value:"America/North_Dakota/Beulah"},"America/North_Dakota/Beulah"),g.exports.createElement("option",{value:"America/North_Dakota/Center"},"America/North_Dakota/Center"),g.exports.createElement("option",{value:"America/North_Dakota/New_Salem"},"America/North_Dakota/New_Salem"),g.exports.createElement("option",{value:"America/Nuuk"},"America/Nuuk"),g.exports.createElement("option",{value:"America/Ojinaga"},"America/Ojinaga"),g.exports.createElement("option",{value:"America/Panama"},"America/Panama"),g.exports.createElement("option",{value:"America/Pangnirtung"},"America/Pangnirtung"),g.exports.createElement("option",{value:"America/Paramaribo"},"America/Paramaribo"),g.exports.createElement("option",{value:"America/Phoenix"},"America/Phoenix"),g.exports.createElement("option",{value:"America/Port-au-Prince"},"America/Port-au-Prince"),g.exports.createElement("option",{value:"America/Port_of_Spain"},"America/Port_of_Spain"),g.exports.createElement("option",{value:"America/Porto_Velho"},"America/Porto_Velho"),g.exports.createElement("option",{value:"America/Puerto_Rico"},"America/Puerto_Rico"),g.exports.createElement("option",{value:"America/Punta_Arenas"},"America/Punta_Arenas"),g.exports.createElement("option",{value:"America/Rainy_River"},"America/Rainy_River"),g.exports.createElement("option",{value:"America/Rankin_Inlet"},"America/Rankin_Inlet"),g.exports.createElement("option",{value:"America/Recife"},"America/Recife"),g.exports.createElement("option",{value:"America/Regina"},"America/Regina"),g.exports.createElement("option",{value:"America/Resolute"},"America/Resolute"),g.exports.createElement("option",{value:"America/Rio_Branco"},"America/Rio_Branco"),g.exports.createElement("option",{value:"America/Santarem"},"America/Santarem"),g.exports.createElement("option",{value:"America/Santiago"},"America/Santiago"),g.exports.createElement("option",{value:"America/Santo_Domingo"},"America/Santo_Domingo"),g.exports.createElement("option",{value:"America/Sao_Paulo"},"America/Sao_Paulo"),g.exports.createElement("option",{value:"America/Scoresbysund"},"America/Scoresbysund"),g.exports.createElement("option",{value:"America/Sitka"},"America/Sitka"),g.exports.createElement("option",{value:"America/St_Barthelemy"},"America/St_Barthelemy"),g.exports.createElement("option",{value:"America/St_Johns"},"America/St_Johns"),g.exports.createElement("option",{value:"America/St_Kitts"},"America/St_Kitts"),g.exports.createElement("option",{value:"America/St_Lucia"},"America/St_Lucia"),g.exports.createElement("option",{value:"America/St_Thomas"},"America/St_Thomas"),g.exports.createElement("option",{value:"America/St_Vincent"},"America/St_Vincent"),g.exports.createElement("option",{value:"America/Swift_Current"},"America/Swift_Current"),g.exports.createElement("option",{value:"America/Tegucigalpa"},"America/Tegucigalpa"),g.exports.createElement("option",{value:"America/Thule"},"America/Thule"),g.exports.createElement("option",{value:"America/Thunder_Bay"},"America/Thunder_Bay"),g.exports.createElement("option",{value:"America/Tijuana"},"America/Tijuana"),g.exports.createElement("option",{value:"America/Toronto"},"America/Toronto"),g.exports.createElement("option",{value:"America/Tortola"},"America/Tortola"),g.exports.createElement("option",{value:"America/Vancouver"},"America/Vancouver"),g.exports.createElement("option",{value:"America/Whitehorse"},"America/Whitehorse"),g.exports.createElement("option",{value:"America/Winnipeg"},"America/Winnipeg"),g.exports.createElement("option",{value:"America/Yakutat"},"America/Yakutat"),g.exports.createElement("option",{value:"America/Yellowknife"},"America/Yellowknife"),g.exports.createElement("option",{value:"Antarctica/Casey"},"Antarctica/Casey"),g.exports.createElement("option",{value:"Antarctica/Davis"},"Antarctica/Davis"),g.exports.createElement("option",{value:"Antarctica/DumontDUrville"},"Antarctica/DumontDUrville"),g.exports.createElement("option",{value:"Antarctica/Macquarie"},"Antarctica/Macquarie"),g.exports.createElement("option",{value:"Antarctica/Mawson"},"Antarctica/Mawson"),g.exports.createElement("option",{value:"Antarctica/McMurdo"},"Antarctica/McMurdo"),g.exports.createElement("option",{value:"Antarctica/Palmer"},"Antarctica/Palmer"),g.exports.createElement("option",{value:"Antarctica/Rothera"},"Antarctica/Rothera"),g.exports.createElement("option",{value:"Antarctica/Syowa"},"Antarctica/Syowa"),g.exports.createElement("option",{value:"Antarctica/Troll"},"Antarctica/Troll"),g.exports.createElement("option",{value:"Antarctica/Vostok"},"Antarctica/Vostok"),g.exports.createElement("option",{value:"Arctic/Longyearbyen"},"Arctic/Longyearbyen"),g.exports.createElement("option",{value:"Asia/Aden"},"Asia/Aden"),g.exports.createElement("option",{value:"Asia/Almaty"},"Asia/Almaty"),g.exports.createElement("option",{value:"Asia/Amman"},"Asia/Amman"),g.exports.createElement("option",{value:"Asia/Anadyr"},"Asia/Anadyr"),g.exports.createElement("option",{value:"Asia/Aqtau"},"Asia/Aqtau"),g.exports.createElement("option",{value:"Asia/Aqtobe"},"Asia/Aqtobe"),g.exports.createElement("option",{value:"Asia/Ashgabat"},"Asia/Ashgabat"),g.exports.createElement("option",{value:"Asia/Atyrau"},"Asia/Atyrau"),g.exports.createElement("option",{value:"Asia/Baghdad"},"Asia/Baghdad"),g.exports.createElement("option",{value:"Asia/Bahrain"},"Asia/Bahrain"),g.exports.createElement("option",{value:"Asia/Baku"},"Asia/Baku"),g.exports.createElement("option",{value:"Asia/Bangkok"},"Asia/Bangkok"),g.exports.createElement("option",{value:"Asia/Barnaul"},"Asia/Barnaul"),g.exports.createElement("option",{value:"Asia/Beirut"},"Asia/Beirut"),g.exports.createElement("option",{value:"Asia/Bishkek"},"Asia/Bishkek"),g.exports.createElement("option",{value:"Asia/Brunei"},"Asia/Brunei"),g.exports.createElement("option",{value:"Asia/Chita"},"Asia/Chita"),g.exports.createElement("option",{value:"Asia/Choibalsan"},"Asia/Choibalsan"),g.exports.createElement("option",{value:"Asia/Colombo"},"Asia/Colombo"),g.exports.createElement("option",{value:"Asia/Damascus"},"Asia/Damascus"),g.exports.createElement("option",{value:"Asia/Dhaka"},"Asia/Dhaka"),g.exports.createElement("option",{value:"Asia/Dili"},"Asia/Dili"),g.exports.createElement("option",{value:"Asia/Dubai"},"Asia/Dubai"),g.exports.createElement("option",{value:"Asia/Dushanbe"},"Asia/Dushanbe"),g.exports.createElement("option",{value:"Asia/Famagusta"},"Asia/Famagusta"),g.exports.createElement("option",{value:"Asia/Gaza"},"Asia/Gaza"),g.exports.createElement("option",{value:"Asia/Hebron"},"Asia/Hebron"),g.exports.createElement("option",{value:"Asia/Ho_Chi_Minh"},"Asia/Ho_Chi_Minh"),g.exports.createElement("option",{value:"Asia/Hong_Kong"},"Asia/Hong_Kong"),g.exports.createElement("option",{value:"Asia/Hovd"},"Asia/Hovd"),g.exports.createElement("option",{value:"Asia/Irkutsk"},"Asia/Irkutsk"),g.exports.createElement("option",{value:"Asia/Jakarta"},"Asia/Jakarta"),g.exports.createElement("option",{value:"Asia/Jayapura"},"Asia/Jayapura"),g.exports.createElement("option",{value:"Asia/Jerusalem"},"Asia/Jerusalem"),g.exports.createElement("option",{value:"Asia/Kabul"},"Asia/Kabul"),g.exports.createElement("option",{value:"Asia/Kamchatka"},"Asia/Kamchatka"),g.exports.createElement("option",{value:"Asia/Karachi"},"Asia/Karachi"),g.exports.createElement("option",{value:"Asia/Kathmandu"},"Asia/Kathmandu"),g.exports.createElement("option",{value:"Asia/Khandyga"},"Asia/Khandyga"),g.exports.createElement("option",{value:"Asia/Kolkata"},"Asia/Kolkata"),g.exports.createElement("option",{value:"Asia/Krasnoyarsk"},"Asia/Krasnoyarsk"),g.exports.createElement("option",{value:"Asia/Kuala_Lumpur"},"Asia/Kuala_Lumpur"),g.exports.createElement("option",{value:"Asia/Kuching"},"Asia/Kuching"),g.exports.createElement("option",{value:"Asia/Kuwait"},"Asia/Kuwait"),g.exports.createElement("option",{value:"Asia/Macau"},"Asia/Macau"),g.exports.createElement("option",{value:"Asia/Magadan"},"Asia/Magadan"),g.exports.createElement("option",{value:"Asia/Makassar"},"Asia/Makassar"),g.exports.createElement("option",{value:"Asia/Manila"},"Asia/Manila"),g.exports.createElement("option",{value:"Asia/Muscat"},"Asia/Muscat"),g.exports.createElement("option",{value:"Asia/Nicosia"},"Asia/Nicosia"),g.exports.createElement("option",{value:"Asia/Novokuznetsk"},"Asia/Novokuznetsk"),g.exports.createElement("option",{value:"Asia/Novosibirsk"},"Asia/Novosibirsk"),g.exports.createElement("option",{value:"Asia/Omsk"},"Asia/Omsk"),g.exports.createElement("option",{value:"Asia/Oral"},"Asia/Oral"),g.exports.createElement("option",{value:"Asia/Phnom_Penh"},"Asia/Phnom_Penh"),g.exports.createElement("option",{value:"Asia/Pontianak"},"Asia/Pontianak"),g.exports.createElement("option",{value:"Asia/Pyongyang"},"Asia/Pyongyang"),g.exports.createElement("option",{value:"Asia/Qatar"},"Asia/Qatar"),g.exports.createElement("option",{value:"Asia/Qostanay"},"Asia/Qostanay"),g.exports.createElement("option",{value:"Asia/Qyzylorda"},"Asia/Qyzylorda"),g.exports.createElement("option",{value:"Asia/Riyadh"},"Asia/Riyadh"),g.exports.createElement("option",{value:"Asia/Sakhalin"},"Asia/Sakhalin"),g.exports.createElement("option",{value:"Asia/Samarkand"},"Asia/Samarkand"),g.exports.createElement("option",{value:"Asia/Seoul"},"Asia/Seoul"),g.exports.createElement("option",{value:"Asia/Shanghai"},"Asia/Shanghai"),g.exports.createElement("option",{value:"Asia/Singapore"},"Asia/Singapore"),g.exports.createElement("option",{value:"Asia/Srednekolymsk"},"Asia/Srednekolymsk"),g.exports.createElement("option",{value:"Asia/Taipei"},"Asia/Taipei"),g.exports.createElement("option",{value:"Asia/Tashkent"},"Asia/Tashkent"),g.exports.createElement("option",{value:"Asia/Tbilisi"},"Asia/Tbilisi"),g.exports.createElement("option",{value:"Asia/Tehran"},"Asia/Tehran"),g.exports.createElement("option",{value:"Asia/Thimphu"},"Asia/Thimphu"),g.exports.createElement("option",{value:"Asia/Tokyo"},"Asia/Tokyo"),g.exports.createElement("option",{value:"Asia/Tomsk"},"Asia/Tomsk"),g.exports.createElement("option",{value:"Asia/Ulaanbaatar"},"Asia/Ulaanbaatar"),g.exports.createElement("option",{value:"Asia/Urumqi"},"Asia/Urumqi"),g.exports.createElement("option",{value:"Asia/Ust-Nera"},"Asia/Ust-Nera"),g.exports.createElement("option",{value:"Asia/Vientiane"},"Asia/Vientiane"),g.exports.createElement("option",{value:"Asia/Vladivostok"},"Asia/Vladivostok"),g.exports.createElement("option",{value:"Asia/Yakutsk"},"Asia/Yakutsk"),g.exports.createElement("option",{value:"Asia/Yangon"},"Asia/Yangon"),g.exports.createElement("option",{value:"Asia/Yekaterinburg"},"Asia/Yekaterinburg"),g.exports.createElement("option",{value:"Asia/Yerevan"},"Asia/Yerevan"),g.exports.createElement("option",{value:"Atlantic/Azores"},"Atlantic/Azores"),g.exports.createElement("option",{value:"Atlantic/Bermuda"},"Atlantic/Bermuda"),g.exports.createElement("option",{value:"Atlantic/Canary"},"Atlantic/Canary"),g.exports.createElement("option",{value:"Atlantic/Cape_Verde"},"Atlantic/Cape_Verde"),g.exports.createElement("option",{value:"Atlantic/Faroe"},"Atlantic/Faroe"),g.exports.createElement("option",{value:"Atlantic/Madeira"},"Atlantic/Madeira"),g.exports.createElement("option",{value:"Atlantic/Reykjavik"},"Atlantic/Reykjavik"),g.exports.createElement("option",{value:"Atlantic/South_Georgia"},"Atlantic/South_Georgia"),g.exports.createElement("option",{value:"Atlantic/St_Helena"},"Atlantic/St_Helena"),g.exports.createElement("option",{value:"Atlantic/Stanley"},"Atlantic/Stanley"),g.exports.createElement("option",{value:"Australia/Adelaide"},"Australia/Adelaide"),g.exports.createElement("option",{value:"Australia/Brisbane"},"Australia/Brisbane"),g.exports.createElement("option",{value:"Australia/Broken_Hill"},"Australia/Broken_Hill"),g.exports.createElement("option",{value:"Australia/Darwin"},"Australia/Darwin"),g.exports.createElement("option",{value:"Australia/Eucla"},"Australia/Eucla"),g.exports.createElement("option",{value:"Australia/Hobart"},"Australia/Hobart"),g.exports.createElement("option",{value:"Australia/Lindeman"},"Australia/Lindeman"),g.exports.createElement("option",{value:"Australia/Lord_Howe"},"Australia/Lord_Howe"),g.exports.createElement("option",{value:"Australia/Melbourne"},"Australia/Melbourne"),g.exports.createElement("option",{value:"Australia/Perth"},"Australia/Perth"),g.exports.createElement("option",{value:"Australia/Sydney"},"Australia/Sydney"),g.exports.createElement("option",{value:"Canada/Atlantic"},"Canada/Atlantic"),g.exports.createElement("option",{value:"Canada/Central"},"Canada/Central"),g.exports.createElement("option",{value:"Canada/Eastern"},"Canada/Eastern"),g.exports.createElement("option",{value:"Canada/Mountain"},"Canada/Mountain"),g.exports.createElement("option",{value:"Canada/Newfoundland"},"Canada/Newfoundland"),g.exports.createElement("option",{value:"Canada/Pacific"},"Canada/Pacific"),g.exports.createElement("option",{value:"Europe/Amsterdam"},"Europe/Amsterdam"),g.exports.createElement("option",{value:"Europe/Andorra"},"Europe/Andorra"),g.exports.createElement("option",{value:"Europe/Astrakhan"},"Europe/Astrakhan"),g.exports.createElement("option",{value:"Europe/Athens"},"Europe/Athens"),g.exports.createElement("option",{value:"Europe/Belgrade"},"Europe/Belgrade"),g.exports.createElement("option",{value:"Europe/Berlin"},"Europe/Berlin"),g.exports.createElement("option",{value:"Europe/Bratislava"},"Europe/Bratislava"),g.exports.createElement("option",{value:"Europe/Brussels"},"Europe/Brussels"),g.exports.createElement("option",{value:"Europe/Bucharest"},"Europe/Bucharest"),g.exports.createElement("option",{value:"Europe/Budapest"},"Europe/Budapest"),g.exports.createElement("option",{value:"Europe/Busingen"},"Europe/Busingen"),g.exports.createElement("option",{value:"Europe/Chisinau"},"Europe/Chisinau"),g.exports.createElement("option",{value:"Europe/Copenhagen"},"Europe/Copenhagen"),g.exports.createElement("option",{value:"Europe/Dublin"},"Europe/Dublin"),g.exports.createElement("option",{value:"Europe/Gibraltar"},"Europe/Gibraltar"),g.exports.createElement("option",{value:"Europe/Guernsey"},"Europe/Guernsey"),g.exports.createElement("option",{value:"Europe/Helsinki"},"Europe/Helsinki"),g.exports.createElement("option",{value:"Europe/Isle_of_Man"},"Europe/Isle_of_Man"),g.exports.createElement("option",{value:"Europe/Istanbul"},"Europe/Istanbul"),g.exports.createElement("option",{value:"Europe/Jersey"},"Europe/Jersey"),g.exports.createElement("option",{value:"Europe/Kaliningrad"},"Europe/Kaliningrad"),g.exports.createElement("option",{value:"Europe/Kiev"},"Europe/Kiev"),g.exports.createElement("option",{value:"Europe/Kirov"},"Europe/Kirov"),g.exports.createElement("option",{value:"Europe/Lisbon"},"Europe/Lisbon"),g.exports.createElement("option",{value:"Europe/Ljubljana"},"Europe/Ljubljana"),g.exports.createElement("option",{value:"Europe/London"},"Europe/London"),g.exports.createElement("option",{value:"Europe/Luxembourg"},"Europe/Luxembourg"),g.exports.createElement("option",{value:"Europe/Madrid"},"Europe/Madrid"),g.exports.createElement("option",{value:"Europe/Malta"},"Europe/Malta"),g.exports.createElement("option",{value:"Europe/Mariehamn"},"Europe/Mariehamn"),g.exports.createElement("option",{value:"Europe/Minsk"},"Europe/Minsk"),g.exports.createElement("option",{value:"Europe/Monaco"},"Europe/Monaco"),g.exports.createElement("option",{value:"Europe/Moscow"},"Europe/Moscow"),g.exports.createElement("option",{value:"Europe/Oslo"},"Europe/Oslo"),g.exports.createElement("option",{value:"Europe/Paris"},"Europe/Paris"),g.exports.createElement("option",{value:"Europe/Podgorica"},"Europe/Podgorica"),g.exports.createElement("option",{value:"Europe/Prague"},"Europe/Prague"),g.exports.createElement("option",{value:"Europe/Riga"},"Europe/Riga"),g.exports.createElement("option",{value:"Europe/Rome"},"Europe/Rome"),g.exports.createElement("option",{value:"Europe/Samara"},"Europe/Samara"),g.exports.createElement("option",{value:"Europe/San_Marino"},"Europe/San_Marino"),g.exports.createElement("option",{value:"Europe/Sarajevo"},"Europe/Sarajevo"),g.exports.createElement("option",{value:"Europe/Saratov"},"Europe/Saratov"),g.exports.createElement("option",{value:"Europe/Simferopol"},"Europe/Simferopol"),g.exports.createElement("option",{value:"Europe/Skopje"},"Europe/Skopje"),g.exports.createElement("option",{value:"Europe/Sofia"},"Europe/Sofia"),g.exports.createElement("option",{value:"Europe/Stockholm"},"Europe/Stockholm"),g.exports.createElement("option",{value:"Europe/Tallinn"},"Europe/Tallinn"),g.exports.createElement("option",{value:"Europe/Tirane"},"Europe/Tirane"),g.exports.createElement("option",{value:"Europe/Ulyanovsk"},"Europe/Ulyanovsk"),g.exports.createElement("option",{value:"Europe/Uzhgorod"},"Europe/Uzhgorod"),g.exports.createElement("option",{value:"Europe/Vaduz"},"Europe/Vaduz"),g.exports.createElement("option",{value:"Europe/Vatican"},"Europe/Vatican"),g.exports.createElement("option",{value:"Europe/Vienna"},"Europe/Vienna"),g.exports.createElement("option",{value:"Europe/Vilnius"},"Europe/Vilnius"),g.exports.createElement("option",{value:"Europe/Volgograd"},"Europe/Volgograd"),g.exports.createElement("option",{value:"Europe/Warsaw"},"Europe/Warsaw"),g.exports.createElement("option",{value:"Europe/Zagreb"},"Europe/Zagreb"),g.exports.createElement("option",{value:"Europe/Zaporozhye"},"Europe/Zaporozhye"),g.exports.createElement("option",{value:"Europe/Zurich"},"Europe/Zurich"),g.exports.createElement("option",{value:"GMT"},"GMT"),g.exports.createElement("option",{value:"Indian/Antananarivo"},"Indian/Antananarivo"),g.exports.createElement("option",{value:"Indian/Chagos"},"Indian/Chagos"),g.exports.createElement("option",{value:"Indian/Christmas"},"Indian/Christmas"),g.exports.createElement("option",{value:"Indian/Cocos"},"Indian/Cocos"),g.exports.createElement("option",{value:"Indian/Comoro"},"Indian/Comoro"),g.exports.createElement("option",{value:"Indian/Kerguelen"},"Indian/Kerguelen"),g.exports.createElement("option",{value:"Indian/Mahe"},"Indian/Mahe"),g.exports.createElement("option",{value:"Indian/Maldives"},"Indian/Maldives"),g.exports.createElement("option",{value:"Indian/Mauritius"},"Indian/Mauritius"),g.exports.createElement("option",{value:"Indian/Mayotte"},"Indian/Mayotte"),g.exports.createElement("option",{value:"Indian/Reunion"},"Indian/Reunion"),g.exports.createElement("option",{value:"Pacific/Apia"},"Pacific/Apia"),g.exports.createElement("option",{value:"Pacific/Auckland"},"Pacific/Auckland"),g.exports.createElement("option",{value:"Pacific/Bougainville"},"Pacific/Bougainville"),g.exports.createElement("option",{value:"Pacific/Chatham"},"Pacific/Chatham"),g.exports.createElement("option",{value:"Pacific/Chuuk"},"Pacific/Chuuk"),g.exports.createElement("option",{value:"Pacific/Easter"},"Pacific/Easter"),g.exports.createElement("option",{value:"Pacific/Efate"},"Pacific/Efate"),g.exports.createElement("option",{value:"Pacific/Fakaofo"},"Pacific/Fakaofo"),g.exports.createElement("option",{value:"Pacific/Fiji"},"Pacific/Fiji"),g.exports.createElement("option",{value:"Pacific/Funafuti"},"Pacific/Funafuti"),g.exports.createElement("option",{value:"Pacific/Galapagos"},"Pacific/Galapagos"),g.exports.createElement("option",{value:"Pacific/Gambier"},"Pacific/Gambier"),g.exports.createElement("option",{value:"Pacific/Guadalcanal"},"Pacific/Guadalcanal"),g.exports.createElement("option",{value:"Pacific/Guam"},"Pacific/Guam"),g.exports.createElement("option",{value:"Pacific/Honolulu"},"Pacific/Honolulu"),g.exports.createElement("option",{value:"Pacific/Kanton"},"Pacific/Kanton"),g.exports.createElement("option",{value:"Pacific/Kiritimati"},"Pacific/Kiritimati"),g.exports.createElement("option",{value:"Pacific/Kosrae"},"Pacific/Kosrae"),g.exports.createElement("option",{value:"Pacific/Kwajalein"},"Pacific/Kwajalein"),g.exports.createElement("option",{value:"Pacific/Majuro"},"Pacific/Majuro"),g.exports.createElement("option",{value:"Pacific/Marquesas"},"Pacific/Marquesas"),g.exports.createElement("option",{value:"Pacific/Midway"},"Pacific/Midway"),g.exports.createElement("option",{value:"Pacific/Nauru"},"Pacific/Nauru"),g.exports.createElement("option",{value:"Pacific/Niue"},"Pacific/Niue"),g.exports.createElement("option",{value:"Pacific/Norfolk"},"Pacific/Norfolk"),g.exports.createElement("option",{value:"Pacific/Noumea"},"Pacific/Noumea"),g.exports.createElement("option",{value:"Pacific/Pago_Pago"},"Pacific/Pago_Pago"),g.exports.createElement("option",{value:"Pacific/Palau"},"Pacific/Palau"),g.exports.createElement("option",{value:"Pacific/Pitcairn"},"Pacific/Pitcairn"),g.exports.createElement("option",{value:"Pacific/Pohnpei"},"Pacific/Pohnpei"),g.exports.createElement("option",{value:"Pacific/Port_Moresby"},"Pacific/Port_Moresby"),g.exports.createElement("option",{value:"Pacific/Rarotonga"},"Pacific/Rarotonga"),g.exports.createElement("option",{value:"Pacific/Saipan"},"Pacific/Saipan"),g.exports.createElement("option",{value:"Pacific/Tahiti"},"Pacific/Tahiti"),g.exports.createElement("option",{value:"Pacific/Tarawa"},"Pacific/Tarawa"),g.exports.createElement("option",{value:"Pacific/Tongatapu"},"Pacific/Tongatapu"),g.exports.createElement("option",{value:"Pacific/Wake"},"Pacific/Wake"),g.exports.createElement("option",{value:"Pacific/Wallis"},"Pacific/Wallis"),g.exports.createElement("option",{value:"US/Alaska"},"US/Alaska"),g.exports.createElement("option",{value:"US/Arizona"},"US/Arizona"),g.exports.createElement("option",{value:"US/Central"},"US/Central"),g.exports.createElement("option",{value:"US/Eastern"},"US/Eastern"),g.exports.createElement("option",{value:"US/Hawaii"},"US/Hawaii"),g.exports.createElement("option",{value:"US/Mountain"},"US/Mountain"),g.exports.createElement("option",{value:"US/Pacific"},"US/Pacific"),g.exports.createElement("option",{value:"UTC"},"UTC")),g.exports.createElement("input",{type:"hidden",name:"initial-timezone",value:"America/Toronto",id:"initial-id_timezone"}))),g.exports.createElement("div",{className:"field"},g.exports.createElement("div",{className:"label"},g.exports.createElement("label",{htmlFor:"id_first_name"},"First name:")),g.exports.createElement("span",null,g.exports.createElement("input",{...r("first_name"),type:"text",name:"first_name",value:"Jimmy",maxLength:150,id:"id_first_name"}),g.exports.createElement("div",{"data-lastpass-icon-root":"true",style:{position:"relative",height:"0px",width:"0px",float:"left"}},g.exports.createElement("template",null,g.exports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","data-lastpass-icon":"true",style:{position:"absolute",cursor:"pointer",height:"22px",maxHeight:"22px",width:"22px",maxWidth:"22px",top:"11.5px",left:"154px",zIndex:"auto",color:"rgb(215, 64, 58)"}},g.exports.createElement("rect",{x:"0.680176",y:"0.763062",width:"22.6392",height:"22.4737",rx:"4",fill:"currentColor"}),g.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7935 7.9516C19.7935 7.64414 20.0427 7.3949 20.3502 7.3949C20.6576 7.3949 20.9069 7.64414 20.9069 7.9516V16.0487C20.9069 16.3562 20.6576 16.6054 20.3502 16.6054C20.0427 16.6054 19.7935 16.3562 19.7935 16.0487V7.9516Z",fill:"white"}),g.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.76288 13.6577C5.68525 13.6577 6.43298 12.9154 6.43298 11.9998C6.43298 11.0842 5.68525 10.3419 4.76288 10.3419C3.8405 10.3419 3.09277 11.0842 3.09277 11.9998C3.09277 12.9154 3.8405 13.6577 4.76288 13.6577Z",fill:"white"}),g.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3298 13.6577C11.2521 13.6577 11.9999 12.9154 11.9999 11.9998C11.9999 11.0842 11.2521 10.3419 10.3298 10.3419C9.4074 10.3419 8.65967 11.0842 8.65967 11.9998C8.65967 12.9154 9.4074 13.6577 10.3298 13.6577Z",fill:"white"}),g.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8964 13.6577C16.8188 13.6577 17.5665 12.9154 17.5665 11.9998C17.5665 11.0842 16.8188 10.3419 15.8964 10.3419C14.974 10.3419 14.2263 11.0842 14.2263 11.9998C14.2263 12.9154 14.974 13.6577 15.8964 13.6577Z",fill:"white"})))))),g.exports.createElement("div",{className:"field"},g.exports.createElement("div",{className:"label"},g.exports.createElement("label",{htmlFor:"id_last_name"},"Last name:")),g.exports.createElement("span",null,g.exports.createElement("input",{...r("last_name"),type:"text",name:"last_name",value:"Liu",maxLength:150,id:"id_last_name"}),g.exports.createElement("div",{"data-lastpass-icon-root":"true",style:{position:"relative",height:"0px",width:"0px",float:"left"}},g.exports.createElement("template",null,g.exports.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none","data-lastpass-icon":"true",style:{position:"absolute",cursor:"pointer",height:"22px",maxHeight:"22px",width:"22px",maxWidth:"22px",top:"11.5px",left:"154px",zIndex:"auto",color:"rgb(215, 64, 58)"}},g.exports.createElement("rect",{x:"0.680176",y:"0.763062",width:"22.6392",height:"22.4737",rx:"4",fill:"currentColor"}),g.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7935 7.9516C19.7935 7.64414 20.0427 7.3949 20.3502 7.3949C20.6576 7.3949 20.9069 7.64414 20.9069 7.9516V16.0487C20.9069 16.3562 20.6576 16.6054 20.3502 16.6054C20.0427 16.6054 19.7935 16.3562 19.7935 16.0487V7.9516Z",fill:"white"}),g.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.76288 13.6577C5.68525 13.6577 6.43298 12.9154 6.43298 11.9998C6.43298 11.0842 5.68525 10.3419 4.76288 10.3419C3.8405 10.3419 3.09277 11.0842 3.09277 11.9998C3.09277 12.9154 3.8405 13.6577 4.76288 13.6577Z",fill:"white"}),g.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.3298 13.6577C11.2521 13.6577 11.9999 12.9154 11.9999 11.9998C11.9999 11.0842 11.2521 10.3419 10.3298 10.3419C9.4074 10.3419 8.65967 11.0842 8.65967 11.9998C8.65967 12.9154 9.4074 13.6577 10.3298 13.6577Z",fill:"white"}),g.exports.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.8964 13.6577C16.8188 13.6577 17.5665 12.9154 17.5665 11.9998C17.5665 11.0842 16.8188 10.3419 15.8964 10.3419C14.974 10.3419 14.2263 11.0842 14.2263 11.9998C14.2263 12.9154 14.974 13.6577 15.8964 13.6577Z",fill:"white"})))))),g.exports.createElement("div",{className:"field"},g.exports.createElement("div",{className:"label"},g.exports.createElement("label",{htmlFor:"id_graduating_year"},"Graduating year:")),g.exports.createElement("span",null,g.exports.createElement("select",{...r("graduating_year"),className:"browser-default",id:"id_graduating_year"},g.exports.createElement("option",{value:""},"Does not apply"),g.exports.createElement("option",{value:"2023"},"2023"),g.exports.createElement("option",{value:"2024"},"2024"),g.exports.createElement("option",{value:"2025"},"2025"),g.exports.createElement("option",{value:"2026"},"2026")))),g.exports.createElement("div",{style:{display:"flex",alignItems:"center",gap:"3px"}},g.exports.createElement("button",{type:"submit",className:"btn"},"Submit"),g.exports.createElement(W9,{to:`/user/${n.id}`,className:"btn",role:"button","aria-pressed":"true"},"Cancel")))))},mhe=()=>{const e=g.exports.useContext(Tr);oi();const{ID:t}=qd(),[n,r]=g.exports.useState([]),[a,c]=g.exports.useState([]);return g.exports.useEffect(()=>{e.getAPI(`${ur.COURSE}?term=${t}`).then(h=>{r(h.data.results)}).catch(()=>{e.refreshAuth()})},[]),g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/edit.css"}),g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/select2.min.css"}),g.exports.createElement("div",{className:"card-body","data-select2-id":"select2-data-21-vyjo"},g.exports.createElement("form",{onSubmit:h=>{h.preventDefault(),console.log(a)},"data-select2-id":"select2-data-20-cr8n"},g.exports.createElement("h5",{className:"card-title"},g.exports.createElement("strong",null,"Edit timetable for Test term")),g.exports.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:"dUBPiwcYI3sSDgC52qu3o8cutarEiO1xML4iteigRLs9eEEA26us3LXlBdxidNAh"}),g.exports.createElement(Rae,{multiple:!0,onChange:(h,o)=>{c(o)},id:"tags-outlined",options:n,getOptionLabel:h=>h.code,filterSelectedOptions:!0,renderInput:h=>g.exports.createElement(Jue,{...h,label:"Courses",placeholder:"Start typing course code..."}),sx:{marginTop:"1.25em",marginBottom:"1.25em"}}),g.exports.createElement(vn,{to:"/course/add/term/1?next=/timetable/edit/2"},"Add a missing course"),g.exports.createElement("br",null),g.exports.createElement("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginTop:"1.5em"}},g.exports.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Save"),g.exports.createElement(vn,{to:"/timetable",className:"btn btn-primary"},"Cancel")))))},ghe=()=>{const e=g.exports.useContext(Tr),t=oi(),{ID:n}=qd(),[r,a]=g.exports.useState(""),[c,h]=g.exports.useState(-1),o=()=>{e.postAPI(`${ur.COURSE}/new`,{code:r,position:c,term:n}).then(()=>{e.notify(`Course ${r} was successfully added!`,"success"),t(`/timetable/edit/${n}`)}).catch(m=>{if(m.response.status===401){e.refreshAuth(),o();return}e.notify("An internal error occurred. Please contact an admin to get it fixed!","error")})};return g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/secondary.css"}),g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/main.css"}),g.exports.createElement("link",{rel:"stylesheet",href:"/static/css/timetable/new_course.css"}),g.exports.createElement("form",{onSubmit:m=>{m.preventDefault(),o()}},g.exports.createElement("h6",{className:"card-subtitle mb-2 text-muted card-top"},"Add a course for Test term"),g.exports.createElement("label",{htmlFor:"id_code",className:"active"},"Code:"),g.exports.createElement("input",{type:"text",onChange:m=>{a(m.target.value)},name:"code",maxLength:16,placeholder:"Ex. AAA1O1",required:!0,id:"id_code"}),g.exports.createElement("label",{className:"active"},"On Day 1, which period is this course in?"),g.exports.createElement("div",{id:"id_position"},g.exports.createElement("div",null,g.exports.createElement("label",{htmlFor:"id_position_0"},g.exports.createElement("input",{onClick:()=>h(1),type:"radio",name:"position",value:"1",required:!0,id:"id_position_0"}),"Period 1")),g.exports.createElement("div",null,g.exports.createElement("label",{htmlFor:"id_position_1"},g.exports.createElement("input",{onClick:()=>h(2),type:"radio",name:"position",value:"2",required:!0,id:"id_position_1"}),"Period 2")),g.exports.createElement("div",null,g.exports.createElement("label",{htmlFor:"id_position_2"},g.exports.createElement("input",{onClick:()=>h(3),type:"radio",name:"position",value:"3",required:!0,id:"id_position_2"}),"Period 3")),g.exports.createElement("div",null,g.exports.createElement("label",{htmlFor:"id_position_3"},g.exports.createElement("input",{onClick:()=>h(4),type:"radio",name:"position",value:"4",required:!0,id:"id_position_3"}),"Period 4")),g.exports.createElement("div",null,g.exports.createElement("label",{htmlFor:"id_position_4"},g.exports.createElement("input",{onClick:()=>h(5),type:"radio",name:"position",value:"5",required:!0,id:"id_position_4"}),"This course is a 2-credit Co-op in the morning.")),g.exports.createElement("div",null,g.exports.createElement("label",{onClick:()=>h(6),htmlFor:"id_position_5"},g.exports.createElement("input",{type:"radio",name:"position",value:"6",required:!0,id:"id_position_5"}),"This course is a 2-credit Co-op in the afternoon."))),g.exports.createElement("div",{style:{display:"flex",alignItems:"center",gap:"3px",marginTop:"1.5em"}},g.exports.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Submit"),g.exports.createElement(vn,{to:"/timetable",className:"btn btn-primary"},"Cancel"))))};function yhe(){return g.exports.createElement(Bk,null,g.exports.createElement(xB,{id:"demo-radio-buttons-group-label"},"Gender"),g.exports.createElement(gue,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group"},g.exports.createElement(gE,{value:"female",control:g.exports.createElement(xE,null),label:"Female"}),g.exports.createElement(gE,{value:"male",control:g.exports.createElement(xE,null),label:"Male"}),g.exports.createElement(gE,{value:"other",control:g.exports.createElement(xE,null),label:"Other"})))}const vhe=()=>{oi();const e=g.exports.useContext(Tr);return g.exports.useEffect(()=>{Pq.AutoInit()}),g.exports.createElement(g.exports.Fragment,null,g.exports.createElement("div",{className:"page"},g.exports.createElement(c7,null),g.exports.createElement("div",{className:"router-outlet"},g.exports.createElement($9,null,g.exports.createElement(Ti,{path:"/",element:g.exports.createElement(h7,null)}),g.exports.createElement(Ti,{path:"/announcements",element:g.exports.createElement(y7,null)}),g.exports.createElement(Ti,{path:"/announcement/:id",element:g.exports.createElement(iQ,null)}),g.exports.createElement(Ti,{path:"/calendar",element:g.exports.createElement(oq,null)}),g.exports.createElement(Ti,{path:"/clubs",element:g.exports.createElement(k7,null)}),g.exports.createElement(Ti,{path:"/club/:slug",element:g.exports.createElement(tQ,null)}),g.exports.createElement(Ti,{path:"/club/edit/:slug",element:g.exports.createElement(p4,null,g.exports.createElement(nQ,null))}),g.exports.createElement(Ti,{path:"/blog",element:g.exports.createElement(Dq,null)}),g.exports.createElement(Ti,{path:"/blog/:slug",element:g.exports.createElement(rQ,null)}),g.exports.createElement(Ti,{path:"/about",element:g.exports.createElement(qI,null)},g.exports.createElement(Ti,{path:":page",element:g.exports.createElement(qI,null)})),g.exports.createElement(Ti,{path:"/map",element:g.exports.createElement(hhe,null)}),g.exports.createElement(Ti,{path:"/accounts/login",element:g.exports.createElement(cq,null)}),g.exports.createElement(Ti,{path:"/accounts/signup",element:g.exports.createElement(Iq,null)}),g.exports.createElement(Ti,{path:"/accounts/logout",element:g.exports.createElement(oQ,null)}),g.exports.createElement(Ti,{path:"/timetable",element:g.exports.createElement(ece,null)}),g.exports.createElement(Ti,{path:"/timetable/edit/:ID",element:g.exports.createElement(I_,null,g.exports.createElement(mhe,null))}),g.exports.createElement(Ti,{path:"/course/add/term/:ID",element:g.exports.createElement(I_,null,g.exports.createElement(ghe,null))}),g.exports.createElement(Ti,{path:"/user/:username",element:g.exports.createElement(I_,null,g.exports.createElement(phe,null))}),g.exports.createElement(Ti,{path:"/accounts/profile/update",element:g.exports.createElement(I_,null,g.exports.createElement(fhe,null))}),g.exports.createElement(Ti,{path:"/demo",element:g.exports.createElement(yhe,null)}),g.exports.createElement(Ti,{path:"*",element:g.exports.createElement(eQ,null)}))),g.exports.createElement(d7,null)),g.exports.createElement(Wue,{open:e.notification.open,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:6e3,onClose:e.closeNotif},g.exports.createElement(Poe,{onClose:e.closeNotif,severity:e.notification.type,sx:{width:"100%"}},e.notification.message)))},_he=()=>g.exports.createElement(V9,null,g.exports.createElement(u7,null,g.exports.createElement(vhe,null))),xhe=y3(document.getElementById("root"));xhe.render(g.exports.createElement(_he,null));
